==============================================================
Guild: Komodo
Channel: Hidden-Channel-Archive / internal-antara-makerbot
==============================================================

[26-Jul-19 03:30 AM] ca333#0333
@TS @Slyris @cipi @TonyL  - you guys will be in a cross functional team for a new project: codename "MakerBot"
An application that can be used to create orderbooks (with custom margins and other configuration possibilities like price fetch from leading CEXs, automagic re-deposits on your maker address by automagically buying from CEX through CEX APIs, and much more) - the endgoal is to build a frontend for it that offers simple "liquidityprovider setup".
@TS already wrote a specification paper that describes all required functionalities. We will start with the backend which @Slyris will be implementing (Go is fine). 
Once the backend is done we will focus on getting a frontend up for it @Slyris please keep in mind that this will be an enduser desktop application (no webapp). So the frontend layer has to be compatible with your Go-Backend  to provide the endusers a single GUI binary. 

@TS will provide more detais - he is going to manage this project. @cipi is our DEX engineer/expert and a marketmaker (so he knows this biz) - he can help with all the required background infos. @TonyL is our QA lead and also deep into the DEX backend if anything is needed.


[26-Jul-19 03:32 AM] hyperDEX#6586
@ca333 i have a new dev on trial that is looking to build out this exact functionality for hyperDEX


[26-Jul-19 03:33 AM] Slyris#2880
It's look like we can use something like: https://github.com/asticode/go-astilectron-demo

Mixing electron and golang for example

{Embed}
https://github.com/asticode/go-astilectron-demo
asticode/go-astilectron-demo
Discover the power of Astilectron through a demo app - asticode/go-astilectron-demo
https://images-ext-2.discordapp.net/external/KtoVGAVPGvXplR-NJqAL_bzd8Jt0MUkk8ICXBeWWorg/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/11619296


[26-Jul-19 03:33 AM] ca333#0333
oh i see @hyperDEX - do you have an approx. estimation?


[26-Jul-19 03:33 AM] ca333#0333
maybe we can joint-force and save this one


[26-Jul-19 03:34 AM] ca333#0333
so we wont have to implement this at all


[26-Jul-19 03:34 AM] hyperDEX#6586
No i just introduced to him yesterday üòÑ but he used to build trading bots for a quant


[26-Jul-19 03:34 AM] hyperDEX#6586
and centralized exchanges


[26-Jul-19 03:34 AM] Slyris#2880
To be honest i'm bad in mathematics so if he can help :p


[26-Jul-19 03:36 AM] hyperDEX#6586
@ca333 can you add Luke/Sindre and @dcprevere  to this channel


[26-Jul-19 03:37 AM] hyperDEX#6586
I am happy to work together to get this working, i think this is a critical piece of bringing liquidity to the DEX


[26-Jul-19 03:38 AM] ca333#0333
my plan is to get this up and running in the coming 7 - 14 days @hyperDEX - yes i agree, this is a critical piece for potential LPs


[26-Jul-19 03:38 AM] ca333#0333
yes sure will create roles shortly and invite them in here


[26-Jul-19 03:38 AM] hyperDEX#6586
Great üòÉ


[26-Jul-19 03:38 AM] hyperDEX#6586
I think we may need artem here too for his mm2.0 expertise


[26-Jul-19 03:39 AM] Slyris#2880
The app need to be cross-plaftorm @ca333  ?


[26-Jul-19 03:39 AM] ca333#0333
DEX API is all thats needed - so we dont have to distract the Artems for now


[26-Jul-19 03:39 AM] ca333#0333
yes @Slyris


[26-Jul-19 03:39 AM] Slyris#2880
C++ would be a pain so


[26-Jul-19 03:39 AM] hyperDEX#6586
Alright sure


[26-Jul-19 03:39 AM] ca333#0333
really? i wrote platform independent c++ apps before.


[26-Jul-19 03:40 AM] ca333#0333
but Go is really fine if it offers solid frontend layers


[26-Jul-19 03:40 AM] Slyris#2880
I can do it cross platform C++


[26-Jul-19 03:40 AM] Slyris#2880
but it's will require huge devops environment


[26-Jul-19 03:40 AM] Slyris#2880
that we dont have right now


[26-Jul-19 03:40 AM] Slyris#2880
since it's private alright ?


[26-Jul-19 03:40 AM] hyperDEX#6586
I think we should get @dcprevere 's input as well, he has experience building this for CEX's


[26-Jul-19 03:41 AM] Slyris#2880
anyway for golang: https://github.com/asticode/go-astilectron

This seem's super interesting

{Embed}
https://github.com/asticode/go-astilectron
asticode/go-astilectron
Build cross platform GUI apps with GO and HTML/JS/CSS (powered by Electron) - asticode/go-astilectron
https://images-ext-2.discordapp.net/external/KtoVGAVPGvXplR-NJqAL_bzd8Jt0MUkk8ICXBeWWorg/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/11619296


[26-Jul-19 03:41 AM] Slyris#2880
no ?


[26-Jul-19 03:44 AM] ca333#0333
backend implementation is VERY straight forward @hyperDEX - frontend/UX will be the more trickier part.


[26-Jul-19 03:46 AM] hyperDEX#6586
One issue we need to keep aware of, at what point of the swap there is no turning back that the trade is basically finished, the less time taken between the start of that and the bot buying on CEX the less slippage/potential for loss there is for the user.


[26-Jul-19 03:46 AM] ca333#0333
bascially consists of:
a) DEX interaction layer (to "control" mm2 backend)
b) CEX interaction layer - i) price/margin management (fetching/updating) and ii) getting fresh coins from CEX via CEX API iii) potentially even selling on CEX
c) config layer (the actual API endpoints we look to attach the frontend to)


[26-Jul-19 03:48 AM] ca333#0333
not a big fan of `electron` @Slyris - would prefer a non-web-based GUI layer.


[26-Jul-19 03:48 AM] ca333#0333
however, we are open for all tech stacks.


[26-Jul-19 03:49 AM] Slyris#2880
then i think that for GUI app's and i'm not joking


[26-Jul-19 03:49 AM] Slyris#2880
Cross-platform CSharp core can do the jobs


[26-Jul-19 03:49 AM] Slyris#2880
Since there is an xaml editor in visual studio for the "front-end"


[26-Jul-19 03:49 AM] hyperDEX#6586
@ca333 looks like my dev has already started. Let me know when you have added roles and i will get him to come here.


[26-Jul-19 03:50 AM] ca333#0333
https://golangr.com/gui/ @Slyris


[26-Jul-19 03:50 AM] Slyris#2880
https://awesome-go.com/#gui

{Embed}
https://awesome-go.com/
Awesome Go
A curated list of awesome #Golang frameworks, libraries and software
https://images-ext-2.discordapp.net/external/rCxISK8CKSRuvEjNHzbNncBfZrY3ZUcGiiWyh4cT3NM/https/awesome-go.com/assets/logo.png


[26-Jul-19 03:52 AM] ca333#0333
@hyperDEX added them all to this channel


[26-Jul-19 03:52 AM] Slyris#2880
If you dont want a web based gui layer we have 3 solutions:

- C# with xaml
- C++ with imgui/qt/gtk
- Go with a wrapper of imgui/qt/gtk (i would prefer C++ or C# in this case)


[26-Jul-19 03:53 AM] hyperDEX#6586
@dcprevere @lukechilds  @sindresorhus welcome


[26-Jul-19 03:54 AM] Slyris#2880
And i would prefer C++ for performance in fact.


[26-Jul-19 03:54 AM] ca333#0333
C++ or Go


[26-Jul-19 03:54 AM] ca333#0333
ok - we can do c++ - i prefer it too


[26-Jul-19 03:54 AM] Slyris#2880
ok great.


[26-Jul-19 03:54 AM] Slyris#2880
Can you create a repo so i can setup a CMake unit tests etc


[26-Jul-19 03:56 AM] lukechilds#2707
üëã


[26-Jul-19 03:56 AM] dcprevere#1502
Hi guys


[26-Jul-19 03:56 AM] Slyris#2880
For me the best solution would be to use: https://github.com/ocornut/imgui

It's highly customizable and easy to use. So the front-end c++ dev can just create his own theme 

He can even write the gui in lua if he want there is no problem.

i will send you some example of wonderfull imgui app

{Embed}
https://github.com/ocornut/imgui
ocornut/imgui
Dear ImGui: Bloat-free Immediate Mode Graphical User interface for C++ with minimal dependencies - ocornut/imgui
https://images-ext-1.discordapp.net/external/a19qru4BOAyH49RFecwlTOKYW_zKNtXsFXE7HSVm5xI/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/8225057

{Reactions}
üëç 

[26-Jul-19 03:57 AM] TS#7923 (pinned)
Hey guys, great working with you on this project. I think most of you has already seen it, but if not, please give this a read: https://docs.google.com/document/d/11knl_u_SvbWALcipq8eLb-mEgrviU0cu_pwygx4ud0k/edit?usp=sharing

It is a very first draft and it needs to be improved, but it sohuld give you a good idea about the scope. We want to focus on the backend features first.

{Embed}
https://docs.google.com/document/d/11knl_u_SvbWALcipq8eLb-mEgrviU0cu_pwygx4ud0k/edit?usp=sharing
MMBot Functional Specifications
I‚Äôve tested the market maker bot on my VPS following the documentation here: https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-tutorials/how-to-become-a-liquidity-provider.html Setup The documentation is easy to follow if you are familiar with the command...
https://images-ext-1.discordapp.net/external/QSOEAGfhI9Hqq7-Fkcs5KIGZKTaN0jAT07EMdROEC0Y/https/lh4.googleusercontent.com/D2-gMHm43TRcCsDMTolKPWOja9q4TiBqH9Ktw8-xe-1LDXstXNY3L-1kPTYsRzYkizh9RQ%3Dw1200-h630-p

{Reactions}
üëÜ 

[26-Jul-19 03:57 AM] Slyris#2880
There is some screenshot example with a custom theme @ca333 :

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/604266029815693331/44240116-9f00f900-a18a-11e8-89fc-14350438fc17.png


[26-Jul-19 03:57 AM] Slyris#2880
Fully C++/Native.

{Reactions}
üíØ (2) 

[26-Jul-19 03:58 AM] TS#7923
I'll give you a much more detailed spec for the frontend with wireframes and functionalities, but for start let's focus on the backend


[26-Jul-19 03:59 AM] TS#7923
The frontend should be a web app, or something that can be eventually turned into a web app.


[26-Jul-19 03:59 AM] ca333#0333
@Slyris - lets make the backend C++ if thats okay for you too.


[26-Jul-19 03:59 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/604266589667328011/51213527-86ecfb80-191b-11e9-9c32-ca3c3f8c0f0b.png


[26-Jul-19 03:59 AM] ca333#0333
webapp wont work @TS ...


[26-Jul-19 03:59 AM] ca333#0333
described it in the init post above...


[26-Jul-19 04:00 AM] TS#7923
oh let me check


[26-Jul-19 04:00 AM] dcprevere#1502
I wrote a PriceService in Node today but I'm quite happy to scrap that to work with you guys.


[26-Jul-19 04:00 AM] Slyris#2880
Also can do frame like this with imgui

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/604266772769800213/52949271-1b63d700-337c-11e9-8b6e-042c2c2f0b4c.png


[26-Jul-19 04:00 AM] dcprevere#1502
I've written bots before for all the major CEXs, so this is quite up my street.


[26-Jul-19 04:01 AM] dcprevere#1502
I'm hesitant to agree with the choice of C++


[26-Jul-19 04:01 AM] dcprevere#1502
I don't think performance is a great reason to choose it over Go


[26-Jul-19 04:02 AM] Slyris#2880
Not only, but native gui over wrapper are always a good choice

{Reactions}
üíØ 

[26-Jul-19 04:02 AM] dcprevere#1502
I don't know much about GUI


[26-Jul-19 04:02 AM] hyperDEX#6586
@lukechilds thoughts?


[26-Jul-19 04:03 AM] ca333#0333
agree - native GUI is the selling point here


[26-Jul-19 04:03 AM] Slyris#2880
I dont want to use a langage that will use wrapper which will not be updated etc...


[26-Jul-19 04:04 AM] Slyris#2880
If it's was webapp frontend i would totally agree with Golang


[26-Jul-19 04:04 AM] dcprevere#1502
Does it need a GUI itself?


[26-Jul-19 04:04 AM] TS#7923
Yes


[26-Jul-19 04:04 AM] TS#7923
It needs a GUI because it will be used by people who are not CLI-savvy üòÉ


[26-Jul-19 04:05 AM] dcprevere#1502
I mean, can the backend and frontend not run as independent processes


[26-Jul-19 04:05 AM] TS#7923
it can, I think


[26-Jul-19 04:05 AM] dcprevere#1502
Decouple the responsibilities


[26-Jul-19 04:05 AM] TS#7923
in fact, it should


[26-Jul-19 04:05 AM] dcprevere#1502
Then the GUI and backend can be in different languages


[26-Jul-19 04:06 AM] dcprevere#1502
@Slyris am I misunderstanding anything?


[26-Jul-19 04:06 AM] Slyris#2880
I dont know we were speaking about a single binary before


[26-Jul-19 04:06 AM] ca333#0333
suboptimal - this will be a enduser desktop application


[26-Jul-19 04:06 AM] ca333#0333
of course can anyone use the backend independently


[26-Jul-19 04:06 AM] ca333#0333
but thats not the question nor the problem here.


[26-Jul-19 04:07 AM] TS#7923
I'd argue for decoupling not because we need it now -- and I agree with CA that it adds complexity -- but for the future


[26-Jul-19 04:07 AM] ca333#0333
for the future this tool will move into a pure web-app - FOR YOUR INFO


[26-Jul-19 04:07 AM] dcprevere#1502
This is how the MM and HyperDEX are arranged


[26-Jul-19 04:07 AM] hyperDEX#6586
Should we not focus on building the most robust backend we can, then a front end can be built to connect to it?


[26-Jul-19 04:07 AM] ca333#0333
but the tech is not ready for this yet so we need a enduser desktop app to cover this


[26-Jul-19 04:07 AM] Slyris#2880
If it's just a backend C++ is a good choice too


[26-Jul-19 04:08 AM] ca333#0333
yes - C++ is good and comfy. I am not very experienced with Go  - so i cant speak for its benefits. But building it in C++ keeps all doors open ref. frontend tech stack.


[26-Jul-19 04:09 AM] Slyris#2880
Ok, once the repo is created and we all agree i will prepare the repository


[26-Jul-19 04:10 AM] dcprevere#1502
If you guys are happy with C++, I'm okay to follow


[26-Jul-19 04:10 AM] ca333#0333
i believe the choice is between Go and C++


[26-Jul-19 04:11 AM] Slyris#2880
I would highly prefer C++ for this kind of app since i worked with the C++ iso community since 5 years already


[26-Jul-19 04:11 AM] TS#7923
is it going to be a daemon?


[26-Jul-19 04:11 AM] TS#7923
if yes, C++


[26-Jul-19 04:11 AM] Slyris#2880
I'm new to golang too


[26-Jul-19 04:11 AM] ca333#0333
yes - this is basically a "daemon".


[26-Jul-19 04:11 AM] TS#7923
cool


[26-Jul-19 04:11 AM] TS#7923
*Tracking asset prices*

The AtomicDEX orderbook should reflect actual market conditions. To achieve this, MMBot needs to keep track of asset prices on the most liquid centralized exchanges.

MMBot has to query centralized exchanges using their API at regular intervals, preferably every second. Prices need to be updated using at least two (but preferably three) sources to make sure an API issue does not lead to incorrect price data. Preferred exchanges: Binance (KMD, BTC, ETH, other alts and stablecoins), Bitstamp (BTC, ETH, alts), Kraken (BTC, ETH, alts), Bitmex (BTC/XBT and ETH perpetual swap contracts ‚Äî not futures), Coinbase (BTC, ETH, USDC, DAI), Kyber Network (ETH, USDC, DAI), UpBit (KMD), Bittrex (KMD), DigitalPrice (KMD ecosystem coins). Other exchanges should be avoided. We can add services like CoinMarketCap, CoinGecko and CoinPaprika into the mix if needed.

MMBot needs to keep track of the median market price of all asset pairs. If a market pair does not have a centralized exchange equivalent (e.g., KMD/DOGE), it needs to be calculated on the fly from available data using the main trading pair as intermediary (BTC/KMD and BTC/DOGE in this case).


[26-Jul-19 04:12 AM] TS#7923
^^^ This is the first smallest task I can break down üòÉ


[26-Jul-19 04:12 AM] TS#7923
it's an easy one


[26-Jul-19 04:12 AM] TS#7923
the next is posting orders into the orderbook using certain parameters, which is  on page 3: https://docs.google.com/document/d/11knl_u_SvbWALcipq8eLb-mEgrviU0cu_pwygx4ud0k/edit?usp=sharing

{Embed}
https://docs.google.com/document/d/11knl_u_SvbWALcipq8eLb-mEgrviU0cu_pwygx4ud0k/edit?usp=sharing
MMBot Functional Specifications
I‚Äôve tested the market maker bot on my VPS following the documentation here: https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-tutorials/how-to-become-a-liquidity-provider.html Setup The documentation is easy to follow if you are familiar with the command...
https://images-ext-1.discordapp.net/external/QSOEAGfhI9Hqq7-Fkcs5KIGZKTaN0jAT07EMdROEC0Y/https/lh4.googleusercontent.com/D2-gMHm43TRcCsDMTolKPWOja9q4TiBqH9Ktw8-xe-1LDXstXNY3L-1kPTYsRzYkizh9RQ%3Dw1200-h630-p


[26-Jul-19 04:14 AM] ca333#0333
@Slyris i added you as Admin so you can add others too: https://github.com/KomodoPlatform/antara-makerbot

{Embed}
https://github.com/KomodoPlatform/antara-makerbot
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[26-Jul-19 04:14 AM] hyperDEX#6586
@TS we need to take care of what triggers the buys/sells on the exchange in terms of when mm2.0 gets past the point of no return.


[26-Jul-19 04:14 AM] TS#7923
what do you mean by that? can you explain it differently?


[26-Jul-19 04:16 AM] hyperDEX#6586
Takers go through 7 stages before a trade is complete. Is there any point where they can stop/kill it from completing? Should MM wait for 1/2/3 conf before executing the buy/sell?


[26-Jul-19 04:16 AM] hyperDEX#6586
Risk of rollback etc


[26-Jul-19 04:16 AM] TS#7923
Ah I see, very good point.


[26-Jul-19 04:17 AM] TS#7923
Logically matching the order should immediately remove it from the orderbook. The question is when it is "final" and can't be put back.


[26-Jul-19 04:18 AM] Slyris#2880
@ca333  i setup the repository now üòÉ


[26-Jul-19 04:18 AM] ca333#0333
@Slyris lets start with the structure of the app first. configs, etc. 
we will be attaching various/multiple CEX to the backend for different purposes (fetching prices, orderbooks, buying/selling coins via API, etc) - so users will have to provide their API keys which floats into the config.


[26-Jul-19 04:18 AM] Slyris#2880
@ca333 Ok !

{Reactions}
üëç 

[26-Jul-19 04:18 AM] Slyris#2880
Short description for the project please


[26-Jul-19 04:18 AM] Slyris#2880
one line description


[26-Jul-19 04:19 AM] ca333#0333
"An automated LP bot for the Komodo AtomicDEX API"


[26-Jul-19 04:19 AM] Slyris#2880
Will this repository still public alright ?

{Reactions}
‚úÖ 

[26-Jul-19 04:20 AM] Slyris#2880
Great.


[26-Jul-19 04:21 AM] ca333#0333
once skeleton is up and config ready please implement the first CEX call like @TS posted above - that would be a `int get_price(string coinName)` - likely makes sense to use one CEX_get_wrapper for all CEX APIs if that possible.


[26-Jul-19 04:21 AM] ca333#0333
also makes sense to use integer representation for all financial numbers


[26-Jul-19 04:22 AM] Slyris#2880
I have doctor appointment at 4pm today.

So it's will probably be after


[26-Jul-19 04:22 AM] ca333#0333
no problem - thanks for the info.


[26-Jul-19 04:22 AM] Slyris#2880
Today i will focus on the repository architecture, so it's easy to test and deploy


[26-Jul-19 04:22 AM] Slyris#2880
if it's ok to you

{Reactions}
‚úÖ 

[26-Jul-19 04:28 AM] lukechilds#2707
@hyperDEX I'm slightly confused what we're discussing haha.

I see talks of a native daemon in here which sounds like a bot people would run alongside the marketmaker daemon?

What I thought we were discussing the other day is adding trading bot functionality directly inside HyperDEX, which would communicate with the marketmaker daemon.


[26-Jul-19 04:28 AM] hyperDEX#6586
Luke they want to make a standalone version


[26-Jul-19 04:29 AM] hyperDEX#6586
But we can use that same code for within hyperDEX


[26-Jul-19 04:29 AM] ca333#0333
@lukechilds `which sounds like a bot people would run alongside the marketmaker daemon` - correct @lukechilds


[26-Jul-19 04:29 AM] hyperDEX#6586
It would basically be sitting on top of mm not within it


[26-Jul-19 04:29 AM] TS#7923
@lukechilds 

This is it:

MMBot (Market Maker Bot) is a server-side tool that lets external liquidity providers (LP) create and manage liquidity on AtomicDEX without requiring a lot of technical knowledge.

The main functionality of MMBot is automatically posting and deleting buy and sell orders to and from the AtomicDEX orderbook on behalf of the LP.

MMBot also gives LPs a convenient interface to refill their wallets, track their P&L, and enable and disable trading pairs.


[26-Jul-19 04:30 AM] lukechilds#2707
got it thanks


[26-Jul-19 04:30 AM] lukechilds#2707
so we'd bundle the MMbot daemon and marketmaker daemon inside HyperDEX and run them both alongside eachother then


[26-Jul-19 04:30 AM] lukechilds#2707
if we wanted to offer this functionality in HyperDEX


[26-Jul-19 04:31 AM] ca333#0333
could HyperDEX cover the GUI side? So we could build the backend and just hand it over to you guys for frontend wrapping.


[26-Jul-19 04:32 AM] lukechilds#2707
I don't see why not, assuming the API has everything we need to build a responsive UI that shouldn't be a problem


[26-Jul-19 04:32 AM] lukechilds#2707
assuming @hyperDEX is on board with that of course


[26-Jul-19 04:33 AM] ca333#0333
that would be likely the optimal path to go without wasting any resources


[26-Jul-19 04:33 AM] TS#7923
that would be great indeed


[26-Jul-19 04:33 AM] ca333#0333
ok - lets see if @hyperDEX would be ok with that


[26-Jul-19 04:33 AM] lukechilds#2707
does the MMBot daemon accept CEX API credentials so it can place orders on a CEX once the DEX order has been filled?


[26-Jul-19 04:33 AM] ca333#0333
this would also give an exemplary joint-force collab project with PR value


[26-Jul-19 04:33 AM] ca333#0333
yes this is the plan @lukechilds - to use get/post CEX API with API keys.


[26-Jul-19 04:33 AM] TS#7923
@lukechilds That's not the scope of this. We do need that functionality later, yes, but not the scope of this sprint


[26-Jul-19 04:34 AM] ca333#0333
so users can just use their keys for the CEX interaction


[26-Jul-19 04:34 AM] TS#7923
it's good to think of this option from the start, though


[26-Jul-19 04:35 AM] ca333#0333
yes @TS - devs likely spend more time thinking than typing and out of experience i ususaly want to envision/understand the full scope and functionalities before writing the first line of code.


[26-Jul-19 04:35 AM] hyperDEX#6586
@lukechilds i think we need to do it üòõ


[26-Jul-19 04:35 AM] TS#7923
And it's great to design it in a way it can accommodate features that are not in this _particular_ sprint, I agree


[26-Jul-19 04:36 AM] hyperDEX#6586
Also @TS that functionality (buy/sell on CEX via API) is the most critical. People want easy money via arb


[26-Jul-19 04:37 AM] lukechilds#2707
so before it interacts with CEX orders what's the goal of MMBot?

>The main functionality of MMBot is automatically posting and deleting buy and sell orders to and from the AtomicDEX orderbook on behalf of the LP.

Doesn't the marketmaker daemon already have this functionality built in? I'm not too sure, I'm not that familiar with that part of the API, but I seem to remember there are some API methods for this.


[26-Jul-19 04:37 AM] ca333#0333
please let us know of any "no-gos" and requirements, etc. for the backend so that you dont have any issues implementing it @lukechilds @hyperDEX 

I assume as long as it behaves like an ordinary rest API all should be good on your end.


[26-Jul-19 04:37 AM] ca333#0333
mm2 doesnt update prices, interact with CEX, etc.


[26-Jul-19 04:37 AM] dcprevere#1502
It seems that at the moment this is just to make a price service


[26-Jul-19 04:37 AM] ca333#0333
so we re filling this gap - need to provide noobs a way to quickly put orders up (as a maker).


[26-Jul-19 04:38 AM] TS#7923
@hyperDEX I agree, yes, 100%. In the first version we want to provide a tool for potential liquidity providers to fill the AtomicDEX orderbook and profit without tapping into a CEX. But that's the next immediate goal.


[26-Jul-19 04:38 AM] TS#7923
@lukechilds ^^^^^ this


[26-Jul-19 04:39 AM] TS#7923
Think of a project featured on AtomicDEX like DGB. They currently don't have a way to provide liquidity even if they wanted to because orders have to be posted manually, which is unfeasible.


[26-Jul-19 04:39 AM] TS#7923
They are our first users


[26-Jul-19 04:39 AM] TS#7923
And whales willing to provide liquidity using their own funds. Next phase is indeed adding the feature to tap into a CEX for liquidity


[26-Jul-19 04:39 AM] hyperDEX#6586
So is the purpose of this to be able to let people place limit orders automatically?


[26-Jul-19 04:40 AM] hyperDEX#6586
based on prices on a CEX


[26-Jul-19 04:40 AM] TS#7923
Yes. And change the desired spread, the order size, etc


[26-Jul-19 04:40 AM] TS#7923
exactly


[26-Jul-19 04:40 AM] TS#7923
This first version is, frankly, not that complicated


[26-Jul-19 04:40 AM] hyperDEX#6586
But without being able to buy on the CEX, not too sure how useful this would be and if they are a big market maker they would not use a GUI


[26-Jul-19 04:40 AM] TS#7923
But we need this badly to approach projects and third parties who don't have a way currently to provide liquidity even if they wanted to


[26-Jul-19 04:41 AM] hyperDEX#6586
Maybe the focus should just be on CLI then?


[26-Jul-19 04:41 AM] TS#7923
Based on our discussions with the projects they need a GUI


[26-Jul-19 04:42 AM] TS#7923
but it doesn't need to be very complex


[26-Jul-19 04:42 AM] hyperDEX#6586
Sure, ok they need a GUI. Will they be taking the price feeds from a CEX to determine the prices or will they just be providing liquidity


[26-Jul-19 04:43 AM] hyperDEX#6586
Just have a 5% buy/sell


[26-Jul-19 04:43 AM] hyperDEX#6586
spread


[26-Jul-19 04:43 AM] TS#7923
They will deposit liquidity to the wallet and set the spread and the order size


[26-Jul-19 04:43 AM] TS#7923
We (the bot) will post the orders on their behalf using the CEX price + spread


[26-Jul-19 04:44 AM] TS#7923
They can also set which pair they want to provide liquidity on, only sell/buy or both etc


[26-Jul-19 04:44 AM] TS#7923
The GUI will be useful to track perfomance, we need some sort of a dashboard. I am still working on the specs


[26-Jul-19 04:46 AM] lukechilds#2707
so the bot needs to run on a 24/7 server I'm assuming


[26-Jul-19 04:46 AM] lukechilds#2707
but HyperDEX will typically be run on a local machine


[26-Jul-19 04:46 AM] lukechilds#2707
so do we need to connect to a remote bot instance?


[26-Jul-19 04:46 AM] TS#7923
Yes, this is an issue. @ca333 what do you think?


[26-Jul-19 04:49 AM] ca333#0333
how about just keeping HyperDEX running 24/7 IF the user wants that?


[26-Jul-19 04:50 AM] hyperDEX#6586
Luke means that the bot needs to run on a remote server, not run on the users computer


[26-Jul-19 04:50 AM] ca333#0333
i mean sure - we can add a config options for "VPS/external Servers" - but i think this is overkill:
giving users the option to connect to an external server by providing IP address and auth key - so that the makerbot sets up mm2 on there,  and so on.... i dont think this is needed....


[26-Jul-19 04:50 AM] ca333#0333
@hyperDEX why would this be necessary?


[26-Jul-19 04:50 AM] ca333#0333
its not needed - the bot can run on users computer


[26-Jul-19 04:50 AM] TS#7923
I agree it's not absolutely needed at this stage but might be good to structure it this way so later we can move it to a web app if time comes?


[26-Jul-19 04:50 AM] ca333#0333
i dont think these noobs @TS was referring to are able to set up a server, etc.


[26-Jul-19 04:51 AM] dcprevere#1502
The LP would want the MM running 24/7, easiest to do on a remote machine. But the HyperDEX would be run locally, and need to connect to the remote MM.


[26-Jul-19 04:51 AM] hyperDEX#6586
lol.....sounds to me like they dont have CEX liquidity either @ca333

{Reactions}
üòÖ 

[26-Jul-19 04:51 AM] dcprevere#1502
Are the LPs really noobs?


[26-Jul-19 04:51 AM] TS#7923
No, probably not. But later when we set it up for _them_ through the Composer, this structure will come handy.


[26-Jul-19 04:51 AM] ca333#0333
@dcprevere - the ones that the frontend is planned for yes. Thats the info we have...

{Reactions}
üëå 

[26-Jul-19 04:53 AM] hyperDEX#6586
I think there is a disconnect. This is not catered towards professional LP, this is a GUI for wannabe LP that dont have the technical chops to do it. They want to fund an address and click go and hopefully make a profit


[26-Jul-19 04:53 AM] hyperDEX#6586
End User --> Wannabe LP --> Professional LP

{Reactions}
üëÜ 

[26-Jul-19 04:53 AM] ca333#0333
exactly @hyperDEX


[26-Jul-19 04:54 AM] ca333#0333
as we both know - real LPs will NEVER use a gui for this


[26-Jul-19 04:54 AM] hyperDEX#6586
So are we trying to build something that all 3 can use?


[26-Jul-19 04:54 AM] ca333#0333
yes - that is the plan. regardless of my above statement ref "real" LPs


[26-Jul-19 04:54 AM] TS#7923
We are trying to build something a professional LP can use (backend) and put a frontend on it for n00bs


[26-Jul-19 05:02 AM] dcprevere#1502
Got it, thanks


[26-Jul-19 05:09 AM] Slyris#2880
can you try this @ca333  https://github.com/KomodoPlatform/antara-makerbot

{Embed}
https://github.com/KomodoPlatform/antara-makerbot
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[26-Jul-19 05:09 AM] Slyris#2880
to build


[26-Jul-19 05:11 AM] cipi#4502
Hello everybody. I run LPs for mm2 and atm i am using a bot written in perl to get prices from coinpaprika and update them every 30s on my LPs. This is the repo: https://github.com/cipig/mmtools
It uses a config file for the margins: https://github.com/cipig/mmtools/blob/master/mpm/mpm.conf.full
It also does Binance, but the 2 things are separated, no automatic hwithdraws are done. The biggest problem with DEX-CEX interaction are the very high withdraw fees on CEXes for BTC. Binance charges 0.0005 BTC, which is 5$, so in order to not loose money, only BTC withdraws above 1000$ would make sense, which is then like a 0.5% fee.

{Embed}
https://github.com/cipig/mmtools
cipig/mmtools
Contribute to cipig/mmtools development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761

{Embed}
https://github.com/cipig/mmtools/blob/master/mpm/mpm.conf.full
cipig/mmtools
Contribute to cipig/mmtools development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761


[26-Jul-19 05:12 AM] cipi#4502
btw, i am not a developer, only a sysadmin with some basic perl and bash skills, so my code looks bad, i suppose üòÉ


[26-Jul-19 05:15 AM] cipi#4502
another problem with CEXes will be the long time it takes to deposit funds there, Binance for example waits for 120 confirmations on KMD, which is 2h


[26-Jul-19 05:17 AM] Slyris#2880
Thank's you for those informations


[26-Jul-19 05:26 AM] Slyris#2880
can you install: https://github.com/apps/report-ci/installations/new for the antara repo @ca333

{Embed}
https://github.com/apps/report-ci/installations/new
Build software better, together
GitHub is where people build software. More than 36 million people use GitHub to discover, fork, and contribute to over 100 million projects.
https://images-ext-1.discordapp.net/external/GknnCjizMYMXTf7AxtPGiAkqk1cGv6dwIUxYVc4g3cA/https/github.githubassets.com/images/modules/open_graph/github-logo.png


[26-Jul-19 05:29 AM] ca333#0333
done @Slyris


[26-Jul-19 05:29 AM] Slyris#2880
thank's


[26-Jul-19 05:30 AM] Slyris#2880
i will need some more apps latter


[26-Jul-19 05:30 AM] Slyris#2880
i will let you know @ca333

{Reactions}
üëç 

[26-Jul-19 05:30 AM] Slyris#2880
https://lgtm.com

{Embed}
https://lgtm.com
LGTM - Code Analysis Platform to Find and Prevent Vulnerabilities
Find zero-days and prevent vulnerabilities with LGTM‚Äôs code analysis platform. Get continuous security analysis and automated code review. Free for open source.


[26-Jul-19 05:31 AM] Slyris#2880
https://github.com/apps/lgtm-com/installations/new

{Embed}
https://github.com/apps/lgtm-com/installations/new
Build software better, together
GitHub is where people build software. More than 36 million people use GitHub to discover, fork, and contribute to over 100 million projects.
https://images-ext-1.discordapp.net/external/GknnCjizMYMXTf7AxtPGiAkqk1cGv6dwIUxYVc4g3cA/https/github.githubassets.com/images/modules/open_graph/github-logo.png


[26-Jul-19 05:32 AM] Slyris#2880
i successfully installed lgtm alone for makerbot


[26-Jul-19 05:37 AM] TonyL#3577
https://paste.ubuntu.com/p/c5ZHbHKZ2P/ LP bot example on python (not connected to CEX, just placing KMD vs tickers and tickers vs KMD orders with given margin and refreshing each X seconds depends of USD prices ratio - taking from coingecko api)


[26-Jul-19 05:38 AM] ca333#0333
https://lgtm.com/logs/9ca4d59ec4185bc8a47d4d4101f505f054b3e822/lang:cpp - tag me for review when your `lgtm.yml` is up @Slyris


[26-Jul-19 05:38 AM] Slyris#2880
yeah but i'm preparing myself to go doctor now


[26-Jul-19 05:38 AM] Slyris#2880
i will setup it when i comeback

{Reactions}
üëç 

[26-Jul-19 03:27 PM] Slyris#2880 (pinned)
Almost setuped: https://github.com/KomodoPlatform/antara-makerbot

{Embed}
https://github.com/KomodoPlatform/antara-makerbot
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[26-Jul-19 03:27 PM] Slyris#2880
i will sleep, good night üòâ


[26-Jul-19 03:37 PM] grewalsatinder#9653
Pinned a message.


[26-Jul-19 03:48 PM] grewalsatinder#9653
@ca333 @Slyris good choice on picking C++ for making MMBot.
Not exactly sure if team has decided on what to use for GUI for it, as I only skimmed through the long chat.
like the imgui examples. if that solves the purpose and the rest of the team is comfortable filling the space if another dev isn't available, it's really nice choice as I see it.
For other options for a code written in C++/Go for backend process I had these stacks in mind for native GUIs:
- Go + https://github.com/therecipe/qt
- Go/C++ + Dart/Flutter.io 
- C++ + QT

Another suggestion I'd like give is to make this MMBot please be compatible with "gRPC" and open this MMBot for 3rd party devs to make their own GUIs on top of this daemon for maximum exposure and usage of it in dev communities.
Really happy to see this project coming along üòÉ

{Embed}
https://github.com/therecipe/qt
therecipe/qt
Qt binding for Go (Golang) with support for Windows / macOS / Linux / FreeBSD / Android / iOS / Sailfish OS / Raspberry Pi / AsteroidOS / Ubuntu Touch / JavaScript / WebAssembly - therecipe/qt
https://images-ext-2.discordapp.net/external/p7a9i07v8yPf0RtIxWp55shDu-0SXMcSw-823pWhaCI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/9833226


[26-Jul-19 03:51 PM] grewalsatinder#9653
Pinned a message.


[26-Jul-19 09:38 PM] Mylo#8306
@cipi do you mind if i use your perl scripts in a docker image for dev/testing ?


[26-Jul-19 10:31 PM] Slyris#2880
@grewalsatinder I suggested imgui only because it's really easy to use for another dev, i will not be on the GUI part so I will let the choice to another dev but I think imgui is a great choice (big community, lot of possibility, highly customisable, easy to install almost no dependencies)


[26-Jul-19 10:47 PM] grewalsatinder#9653
>(big community, lot of possibility, highly customisable, easy to install almost no dependencies)
that's good enough reason then üôÇ üëç


[26-Jul-19 11:21 PM] Slyris#2880
@ca333 I'm starting slowly the configuration file design i have this so far now:

```json
{
  "cex_infos": [
    {
      "cex_name": "binance",
      "cex_endpoint": "https://api.binance.com",
      "cex_api_public_key": "<your public key here>",
      "cex_api_private_key": "<your private key here>"
    },
    {
      "cex_name": "coinbase",
      "cex_endpoint": "https://api.pro.coinbase.com",
      "cex_api_public_key": "<your public key here>",
      "cex_api_private_key": ""
    }
  ]
}
```

Is that we want ?


[26-Jul-19 11:31 PM] ca333#0333
yes - and for many supported coins we need other (non-CEX) APIs for valuation. We should add
```json
"price_api_infos": []
```


[26-Jul-19 11:33 PM] Slyris#2880
or


[26-Jul-19 11:33 PM] Slyris#2880
can we use things like: https://api.coinpaprika.com/v1/coins/kmd-komodo/markets


[26-Jul-19 11:33 PM] Slyris#2880
And filter cex exchanges that we want


[26-Jul-19 11:34 PM] Slyris#2880
It's will be easier for me


[26-Jul-19 11:35 PM] Slyris#2880
I think that for non cex i can use only coinpaprika, because we dont have a paid license for coinmarketcap, and coingecko v2 is not fully completed


[26-Jul-19 11:39 PM] Slyris#2880
I will use coinpaprika when calls don't need API keys. I have all information that I need.

{Reactions}
üëç 

[26-Jul-19 11:48 PM] Slyris#2880
```cpp
int get_price(string coinName)
```

you mean :

```cpp
int get_price(string pairName)
// such has get_price("KMD/ETH")
```

@ca333 

?


[27-Jul-19 12:12 AM] Mylo#8306
will mmbot functionality have network functions?
@cipi i left an issue to add raisin to expose your perl functions to other network applications
https://github.com/cipig/mmtools/issues/1

{Embed}
https://github.com/cipig/mmtools/issues/1
Add network API to this e.g. raisin ¬∑ Issue #1 ¬∑ cipig/mmtools
https://metacpan.org/pod/Raisin hi cipig, could you create a branch that exposes the functionality over network. i'll need the CORS stuff to access from browser for quick MVP
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761


[27-Jul-19 12:38 AM] ca333#0333
no i just mean that we will be fetching prices not from CEX only but also APIs like coinpaprika and coingecko (and any other freely available crypto market APIs) - and here the same, redundant endpoints so we dont face issues if one (or more) of the others is down


[27-Jul-19 12:42 AM] ca333#0333
p.s. - the price should be fetched individually for each coin and additionally in the desired trading pair constellation (if a trading pair is available) - this way we get multiple prices and are able to a) check the avg. med. value and b) spot/detect arbitrage trading opportunities or erroneous CEX/API prices @Slyris


[27-Jul-19 01:06 AM] Slyris#2880
Yeah but price in dollars then ?


[27-Jul-19 01:07 AM] Slyris#2880
I mean if you do:

get_price(kmd) what do you expect to get ? The price in dollars ?


[27-Jul-19 01:21 AM] dcprevere#1502
There are 3 things you can do here, which use 3 related entities: asset, pair, and exchangePair


[27-Jul-19 01:22 AM] dcprevere#1502
An asset price would use an assumed reference asset like USD to measure against


[27-Jul-19 01:22 AM] dcprevere#1502
The pair would specify both quote and base assets


[27-Jul-19 01:22 AM] dcprevere#1502
and the exchange pair would specify base, quote, and the particular exchange


[27-Jul-19 01:24 AM] dcprevere#1502
I think to begin with we will just maintain a single price per pair (discounting the DEX price), so just a pair can be used


[27-Jul-19 01:25 AM] Slyris#2880
Ok let start with a pair


[27-Jul-19 01:25 AM] Slyris#2880
i will add more overload later


[27-Jul-19 01:25 AM] Slyris#2880
if we all agree


[27-Jul-19 01:31 AM] dcprevere#1502
```
** Components

*** Price service

Tracks the price of assets
Based on price strategies defined in config

*** Strategy manager

What spread should be maintained?
Buy and sell, or only one?

*** Order manager

Tracks placed order on DEX
When an order completes(*) it places a corresponding order on the CEX

*** CEX adapter

Allows orders to be placed on the CEX
1st iteration doesn't track executions, deposits/withdrawals
```


[27-Jul-19 01:32 AM] dcprevere#1502
This is broadly what I think is needed (work in progress)


[27-Jul-19 01:34 AM] Slyris#2880
Yeah i'm writing price functionnality right now


[27-Jul-19 01:34 AM] dcprevere#1502
Nice


[27-Jul-19 01:34 AM] Slyris#2880
Once is done


[27-Jul-19 01:34 AM] Slyris#2880
i can write documentation how to write unit tests etc in the project


[27-Jul-19 01:34 AM] Slyris#2880
so other people can participate


[27-Jul-19 01:38 AM] dcprevere#1502
Will your price service maintain an up to date list of pair prices? Or cache them? Or calculate on each call to `get_price`?


[27-Jul-19 01:38 AM] Slyris#2880
I dont know yet


[27-Jul-19 01:38 AM] Slyris#2880
for the moment it's will be live fetching


[27-Jul-19 01:38 AM] Slyris#2880
@dcprevere


[27-Jul-19 01:39 AM] Slyris#2880
I dont know what is the best solution


[27-Jul-19 01:39 AM] dcprevere#1502
The 1st wold be the most low latency, but the others might be best if API calls are limited


[27-Jul-19 01:39 AM] Slyris#2880
What is your opinion on that


[27-Jul-19 01:39 AM] Slyris#2880
Anyway the gui front end can periodically call the functionnality that will fetch price also


[27-Jul-19 01:39 AM] Slyris#2880
as we prefer


[27-Jul-19 01:40 AM] Slyris#2880
i can also run a function that will periodically fetch prices


[27-Jul-19 01:40 AM] Slyris#2880
For the moment i do the simple way possible


[27-Jul-19 01:40 AM] ca333#0333
lets orientate towards API req limits BUT target real-time as the general goal (whenever possible). Caching them (for the case that an API gets unavailable temp) with an expiration-timeout makes sense.


[27-Jul-19 01:42 AM] dcprevere#1502
I would poll every 10 seconds or so (or websocket) and work around API rate limits only if we find we're hitting them


[27-Jul-19 01:42 AM] dcprevere#1502
I can't remember what the public rate limits are, I'll check


[27-Jul-19 01:43 AM] Slyris#2880
600 request per minute


[27-Jul-19 01:43 AM] Slyris#2880
for coinpaprika


[27-Jul-19 01:43 AM] dcprevere#1502
So if you have 10 pairs, then that's once every 10 seconds


[27-Jul-19 01:44 AM] Slyris#2880
25 Millions request per month


[27-Jul-19 01:44 AM] dcprevere#1502
Coinpaprika isn't an exchange right?


[27-Jul-19 01:44 AM] Slyris#2880
no but they fetch all price from wanted exchange


[27-Jul-19 01:44 AM] dcprevere#1502
Exchanges tend to have better rate limits


[27-Jul-19 01:44 AM] Slyris#2880
It's an advantage because they have unlimited rate limits


[27-Jul-19 01:44 AM] Slyris#2880
compare to us


[27-Jul-19 01:45 AM] dcprevere#1502
Yeah


[27-Jul-19 01:46 AM] Slyris#2880
What i suggest for the first round


[27-Jul-19 01:46 AM] Slyris#2880
is using this:


[27-Jul-19 01:46 AM] dcprevere#1502
Agreed


[27-Jul-19 01:46 AM] Slyris#2880
https://api.coinpaprika.com/v1/coins/kmd-komodo/markets


[27-Jul-19 01:46 AM] Slyris#2880
I let you check


[27-Jul-19 01:46 AM] Slyris#2880
let me know what you think about this one for example


[27-Jul-19 01:47 AM] dcprevere#1502
Nice


[27-Jul-19 01:47 AM] dcprevere#1502
I agree that this is good for a first go


[27-Jul-19 01:47 AM] dcprevere#1502
We might find that once we get to placing orders on CEXs, then we can easily get prices from the CEXs too


[27-Jul-19 01:47 AM] dcprevere#1502
But we can leave that for later


[27-Jul-19 01:47 AM] Slyris#2880
yeah


[27-Jul-19 01:48 AM] Slyris#2880
But you have the price from cex in this api call for example


[27-Jul-19 01:48 AM] Slyris#2880
no ?


[27-Jul-19 01:52 AM] dcprevere#1502
Yeah, so it's fine for now. But if we are tracking 10 assets, then we can only poll every 10 seconds


[27-Jul-19 01:52 AM] dcprevere#1502
That's right at the edge of what I'd consider acceptable


[27-Jul-19 01:53 AM] dcprevere#1502
Really, it's fine for now


[27-Jul-19 01:53 AM] Slyris#2880
ok we will see during code review


[27-Jul-19 01:53 AM] dcprevere#1502
And the amount of data you get per api call is big


[27-Jul-19 01:58 AM] Slyris#2880
yeah i agree


[27-Jul-19 01:58 AM] Slyris#2880
but there is also a tickers call


[27-Jul-19 01:58 AM] Slyris#2880
for specified pair


[27-Jul-19 01:59 AM] Slyris#2880
https://api.coinpaprika.com/v1/tickers/kmd-komodo?quotes=EUR


[27-Jul-19 02:00 AM] Slyris#2880
this is probably a median of different exchanges prices


[27-Jul-19 02:00 AM] Slyris#2880
for this call


[27-Jul-19 02:02 AM] dcprevere#1502
It looks like it. But this would be more expensive in terms of API calls and reduces the flexibility of the user to decide where they want prices to come from


[27-Jul-19 02:02 AM] dcprevere#1502
Another thing to bear in mind is that some exchanges provide websockets so that we wouldn't have to worry about API limits


[27-Jul-19 02:03 AM] dcprevere#1502
What do you think about WS vs REST?


[27-Jul-19 02:23 AM] Slyris#2880
To be honest with you i know only REST @dcprevere But i will adapt to any solution


[27-Jul-19 02:24 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/604605002236952596/Capture_decran_2019-07-27_a_11.24.15.png


[27-Jul-19 02:24 AM] Slyris#2880
as i read here, i will prefer rest


[27-Jul-19 02:25 AM] Slyris#2880
but websocket have better performance too


[27-Jul-19 02:28 AM] dcprevere#1502
Okay, don't worry about it!


[27-Jul-19 02:28 AM] dcprevere#1502
We can have a look at it later


[27-Jul-19 03:18 AM] Slyris#2880
@ca333 I cannot add dcprevere to the review for my pull request it's normal ?


[27-Jul-19 03:19 AM] Slyris#2880
anyway @dcprevere https://github.com/KomodoPlatform/antara-makerbot/pull/2

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/pull/2
feat(config): starting config setup by Milerius ¬∑ Pull Request #2...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[27-Jul-19 03:34 AM] Slyris#2880
@dcprevere I propose that instead of the ideas.org file. We create issues with a label so we can discuss it together.


[27-Jul-19 03:45 AM] dcprevere#1502
Okay, will do


[27-Jul-19 11:14 AM] Slyris#2880
brb in 35 minutes.


[27-Jul-19 11:12 PM] dcprevere#1502
I created the issues


[27-Jul-19 11:43 PM] Slyris#2880
thank's @dcprevere


[27-Jul-19 11:47 PM] Slyris#2880
are you here @dcprevere  ?


[27-Jul-19 11:47 PM] dcprevere#1502
yeah


[27-Jul-19 11:47 PM] Slyris#2880
So i merged the config pull request


[27-Jul-19 11:47 PM] Slyris#2880
Now i will probably start the service for the price


[27-Jul-19 11:48 PM] Slyris#2880
For the first functionnality we go for:

```cpp
int get_price(std::string base, std::string quote)
```

?


[27-Jul-19 11:51 PM] dcprevere#1502
Yeah. I don't know what's idiomatic in C++, but would you prefer that or `get_price(Pair pair)`?


[27-Jul-19 11:51 PM] Slyris#2880
Yeah don't worry


[27-Jul-19 11:51 PM] Slyris#2880
It's will be wrapped


[27-Jul-19 11:52 PM] dcprevere#1502
Nice. And will you start by having it poll on an interval?


[27-Jul-19 11:53 PM] Slyris#2880
For the moment, i'm thinking about i should write an interface per api price endpoint


[27-Jul-19 11:54 PM] Slyris#2880
coinpaprika, cmc, coingecko etc


[27-Jul-19 11:54 PM] dcprevere#1502
Good place to start


[27-Jul-19 11:54 PM] Slyris#2880
but i mean


[27-Jul-19 11:54 PM] Slyris#2880
when we will have our service


[27-Jul-19 11:54 PM] Slyris#2880
`service->get_price(pair);`


[27-Jul-19 11:55 PM] Slyris#2880
How should i choose behind if i take coinpaprika or another one


[27-Jul-19 11:55 PM] Slyris#2880
i take the first available ?


[27-Jul-19 11:58 PM] Slyris#2880
Because the `price service` will have like a `hash_map` of `api_endpoint interfaces`


[27-Jul-19 11:58 PM] dcprevere#1502
My first thought was that this could be configurable, per pair. But as the number of pairs can be large this would get chaotic. Perhaps for each base currency, it can have a endpoint.


[27-Jul-19 11:58 PM] Slyris#2880
so you can do -> `api["coinpaprika"]->get_price(pair);`


[28-Jul-19 12:00 AM] dcprevere#1502
I think so


[28-Jul-19 12:07 AM] Slyris#2880
```cpp
namespace antara::mmbot
{
    class abstract_price
    {
        explicit abstract_price(const config &cfg) noexcept : mmbot_config_(cfg)
        {

        }

        virtual int get_price(antara::pair currencyPair) = 0;

    protected:
        const config &mmbot_config_;
    };
}
```


[28-Jul-19 12:07 AM] Slyris#2880
Like this


[28-Jul-19 12:07 AM] Slyris#2880
@dcprevere


[28-Jul-19 12:10 AM] dcprevere#1502
```java
class PriceService {

  private Map<Pair, Endpoint> pairs;
  private Map<Pair, double> prices;

  public PriceService (Map<Pair, Endpoint> pairs) {
    this.pairs = pairs;
  }

  private updatePrices () {
    // run through pairs and query endpoint to update prices
    // this happens concurrently, calls to getPrice are quick
  }

  public getPrice (Pair pair) {
    return this.pairs.get(pair);
  }
}
```


[28-Jul-19 12:11 AM] dcprevere#1502
Please forgive me for writing this in Java, it's just much quicker for me


[28-Jul-19 12:11 AM] dcprevere#1502
So the constructor could be config or pairs, either is okay


[28-Jul-19 12:12 AM] Slyris#2880
Yes, but i'm not writting the service first


[28-Jul-19 12:12 AM] Slyris#2880
i will write the lowest layer first


[28-Jul-19 12:13 AM] dcprevere#1502
So that's what would go inside updatePrices


[28-Jul-19 12:13 AM] Slyris#2880
coinpaprika implementation of the abstract class i think


[28-Jul-19 12:13 AM] dcprevere#1502
Okay


[28-Jul-19 12:13 AM] Slyris#2880
But yeah for the service basically


[28-Jul-19 12:13 AM] Slyris#2880
we will have access to the config


[28-Jul-19 12:13 AM] Slyris#2880
So the constructor will take only the mmbot_cfg


[28-Jul-19 12:14 AM] Slyris#2880
and use a factory to create each  pairs


[28-Jul-19 12:14 AM] Slyris#2880
@ca333 Hello !

{Reactions}
üññ 

[28-Jul-19 12:15 AM] dcprevere#1502
If we call get_price on the endpoint for each pair individually, we might lose the performance benefit when one call can give us many pair prices


[28-Jul-19 12:15 AM] dcprevere#1502
Like you showed me yesterday with CoinPaprika


[28-Jul-19 12:15 AM] Slyris#2880
Yes but all services dont have this functionnality


[28-Jul-19 12:16 AM] Slyris#2880
for example coingecko dont have it i think


[28-Jul-19 12:16 AM] Slyris#2880
well i'm sad with the naming of abstract_price


[28-Jul-19 12:17 AM] Slyris#2880
coinpaprika, coingecko and coinpaprika are cryptocurrencies search platform for me


[28-Jul-19 12:17 AM] Slyris#2880
abstract_price_platform seem's more convenient and readable


[28-Jul-19 12:17 AM] dcprevere#1502
Yeah, that name confused me too


[28-Jul-19 12:19 AM] Slyris#2880
price platform is a really good name to define this i think


[28-Jul-19 12:19 AM] dcprevere#1502
I'm thinking about your question btw


[28-Jul-19 12:21 AM] Slyris#2880
@ca333 Is it ok for the restclient-cpp dependency ?


[28-Jul-19 12:29 AM] dcprevere#1502
If we had `Map<Endpoint, List<Pair>>` we could have a method `get_prices(Pair[] pairs)`. Then CoinPaprika could do this more efficiently


[28-Jul-19 12:29 AM] dcprevere#1502
The `price_service` could iterate over the endpoints to get new prices


[28-Jul-19 12:30 AM] Slyris#2880
It's will be the case


[28-Jul-19 12:31 AM] Slyris#2880
but this is an overload for me


[28-Jul-19 12:33 AM] dcprevere#1502
What method will the `price_service` call then?


[28-Jul-19 12:38 AM] Slyris#2880
The front-end will choose which function he will use


[28-Jul-19 12:38 AM] Slyris#2880
so since we will expose different overload


[28-Jul-19 12:38 AM] Slyris#2880
he can pick-up what he need


[28-Jul-19 12:49 AM] ca333#0333
@Slyris i personally would have preferred low-level implementation for the commz part - i.e. just using libcurl or so - but i understand that it is more comfortable to use such a wrapper - so for me its okay if you prefer this. I am still not done with reviewing the whole source-code. So until this is done plz add a warning to the readme pointing out that we are using (potentially insecure) 3rd party libs for sake of transparency.


[28-Jul-19 12:49 AM] Slyris#2880
also @ca333 you should look like this: https://youtu.be/4TtyYbGDAj0

{Embed}
Bishop Fox
https://youtu.be/4TtyYbGDAj0
Securing Boost.Beast: A Non-Traditional Source Code Review
Since tens of thousands of users across the internet rely on the Boost.Beast library as the foundation of their code, security and peer review is crucial and...
https://images-ext-1.discordapp.net/external/78n_asCRVhcvS9HfOfWgalzLL7fxyqGTXvrrAoFbsj0/https/i.ytimg.com/vi/4TtyYbGDAj0/maxresdefault.jpg


[28-Jul-19 12:49 AM] Slyris#2880
you will probably be confident


[28-Jul-19 12:50 AM] Slyris#2880
i could use this instead if security is a concern

{Reactions}
üëå üëÄ 

[28-Jul-19 12:50 AM] ca333#0333
please - if that is okay for you.


[28-Jul-19 12:50 AM] Slyris#2880
it's ok


[28-Jul-19 12:50 AM] Slyris#2880
and used by ripple


[28-Jul-19 12:50 AM] Slyris#2880
in every repos


[28-Jul-19 12:50 AM] ca333#0333
yes it is okay - i used it myself..


[28-Jul-19 12:51 AM] Slyris#2880
you was writting some request with it ?


[28-Jul-19 12:51 AM] Slyris#2880
i'm reading the doc's now


[28-Jul-19 12:51 AM] ca333#0333
actually used it for a DDOS test üòÖ


[28-Jul-19 12:51 AM] Slyris#2880
ahahah


[28-Jul-19 12:52 AM] Slyris#2880
look your DM


[28-Jul-19 02:31 AM] dcprevere#1502
```
~/src/dex/antara-makerbot/build ÓÇ∞ ÓÇ† add-mm-strat-manager ÓÇ∞ cmake --build . --config Release
Error: could not load cache
```
Could this be cause by my `cmake` being `3.13.4`, not `3.14`? Or is it something else?


[28-Jul-19 02:46 AM] Slyris#2880
@dcprevere CMake 3.14 minimum


[28-Jul-19 02:46 AM] Slyris#2880
did you cmake ../ before


[28-Jul-19 02:47 AM] Slyris#2880
i forget to add this instruction


[28-Jul-19 02:47 AM] Slyris#2880
README.md updated


[28-Jul-19 05:01 AM] Slyris#2880
@ca333 get_price should return a double alright ?


[28-Jul-19 05:17 AM] Slyris#2880
@dcprevere New build instruction are updated


[28-Jul-19 06:20 AM] Slyris#2880
What am I doing in case of error requests http, I throw an error? I return an error? the price will be zero in this case.

@ca333


[28-Jul-19 06:21 AM] Slyris#2880
i got so far:

```cpp
double coinpaprika_price_platform::get_price(antara::pair currency_pair)
    {
        if (this->coin_id_translation_.find(currency_pair.base.value()) != this->coin_id_translation_.end()) {
            VLOG_SCOPE_F(loguru::Verbosity_INFO, pretty_function);
            std::string path = "/tickers/" + this->coin_id_translation_.at(currency_pair.base.value());
            if (!currency_pair.quote.value().empty()) {
                path += "?quotes=" + currency_pair.quote.value();
            }
            auto final_uri = mmbot_config_.prices_registry.at("coinpaprika").price_endpoint.value() + path;
            DVLOG_F(loguru::Verbosity_INFO, "request: %s", final_uri.c_str());
            auto response = RestClient::get(final_uri);
            DVLOG_F(loguru::Verbosity_INFO, "response: %s\nstatus: %d", response.body.c_str(), response.code);
            if (response.code == 200) {
                auto resp_json = nlohmann::json::parse(response.body);
                auto price = resp_json["quotes"][currency_pair.quote.value()]["price"].get<double>();
                return price;
            }
        }
        return 0;
    }
```


[28-Jul-19 06:21 AM] Slyris#2880
Which has no error handling for the moment.


[28-Jul-19 06:29 AM] cipi#4502
i would recommend to remove orders in case the price request fails... it will happen regularly with certain coins... coinpaprika for example returns an error if the coin is "inactive" because there were no trades on the CEXes in the last 24h
you can remove the orders of a pair with the `cancel_all_orders` API call
`{"userpass":"'.$userpass.'","method":"cancel_all_orders","cancel_by":{"type":"Pair","data":{"base":"'KMD'","rel":"'CHIPS'"}}}`


[28-Jul-19 06:30 AM] Slyris#2880
cancell_all_orders is from which api @cipi  ?


[28-Jul-19 06:31 AM] cipi#4502
mm2/atomicdex


[28-Jul-19 06:31 AM] Slyris#2880
okok


[28-Jul-19 06:31 AM] cipi#4502
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md#cancel_all_orders

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[28-Jul-19 06:31 AM] Slyris#2880
So why not a throw and catch them in a higher layer, then execute cancel_all_orders in case of errors


[28-Jul-19 06:32 AM] cipi#4502
that is what i meant üòÉ


[28-Jul-19 06:32 AM] Slyris#2880
Ok for me!


[28-Jul-19 07:30 AM] Slyris#2880
Someone have windows with msvc on it ?


[28-Jul-19 11:12 AM] ca333#0333
in case of an req-error we will set the price to `0` or `null` which would invalidate the orderbook in this case


[28-Jul-19 12:23 PM] Slyris#2880
Let me know in the code review !


[29-Jul-19 02:16 AM] Slyris#2880
@ca333 Should we define in the configuration the asset pair that we want to track ?


[29-Jul-19 02:18 AM] TS#7923
I really really liked @dcprevere 's breakdown of Price Service -- Strategy Manager -- Order Manager -- CEX Adapter so I've restructured the specs document and added a bit more info: https://docs.google.com/document/d/11knl_u_SvbWALcipq8eLb-mEgrviU0cu_pwygx4ud0k/edit?usp=sharing

{Embed}
https://docs.google.com/document/d/11knl_u_SvbWALcipq8eLb-mEgrviU0cu_pwygx4ud0k/edit?usp=sharing
MMBot Functional Specifications
I‚Äôve tested the market maker bot on my VPS following the documentation here: https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-tutorials/how-to-become-a-liquidity-provider.html Setup The documentation is easy to follow if you are familiar with the command...
https://images-ext-1.discordapp.net/external/QSOEAGfhI9Hqq7-Fkcs5KIGZKTaN0jAT07EMdROEC0Y/https/lh4.googleusercontent.com/D2-gMHm43TRcCsDMTolKPWOja9q4TiBqH9Ktw8-xe-1LDXstXNY3L-1kPTYsRzYkizh9RQ%3Dw1200-h630-p


[29-Jul-19 02:19 AM] Slyris#2880
I'm currently writting the price service @TS I will read the doc's again thank's


[29-Jul-19 02:19 AM] TS#7923
Thanks!


[29-Jul-19 02:19 AM] TS#7923
It's a very logical breakdown. Price Service comes first, indeed.


[29-Jul-19 02:20 AM] Slyris#2880
```
Preferred exchanges: Binance (KMD, BTC, ETH, other alts and stablecoins), Bitstamp (BTC, ETH, alts), Kraken (BTC, ETH, alts), Bitmex (BTC/XBT and ETH perpetual swap contracts ‚Äî not futures), Coinbase (BTC, ETH, USDC, DAI), Kyber Network (ETH, USDC, DAI), UpBit (KMD), Bittrex (KMD), DigitalPrice (KMD ecosystem coins). Other exchanges should be avoided.
````

I'm guessing i will put those informations in the json configuration


[29-Jul-19 02:21 AM] Slyris#2880
The price service will use a factory to create a map of  abstract_price_platform according to config.json file


[29-Jul-19 02:21 AM] ca333#0333
@Slyris if we want to keep this open (i.e. compatible with any desired trading pair) it likely makes sense to not set the pairs in the config and just have them be passed over through parameters.

{Reactions}
üëÜ 

[29-Jul-19 02:21 AM] Slyris#2880
Ok i got it


[29-Jul-19 02:21 AM] Slyris#2880
But the price service will still create different abstract_platform_price class


[29-Jul-19 02:22 AM] Slyris#2880
So we can use `registry_platform_price["coinpaprika"]->get_price(pair)`;


[29-Jul-19 02:22 AM] Slyris#2880
exactly as the same as -> `registry_platform_price["coinmarketcap"]->get_price(pair);`


[29-Jul-19 02:23 AM] Slyris#2880
We can even do a for each on each element of the registry and do a median of different price platform

{Reactions}
‚úÖ 

[29-Jul-19 02:23 AM] ca333#0333
i see - how about just using get_price(pair) which just wraps the call for a wildcard search on all APIs and until a result comes back - if not available on any of the APIs we return a `null` which stands for n/a so users/devs are aware on the situation.


[29-Jul-19 02:24 AM] ca333#0333
This would make it more intuitive - i.e. we wont have to first check if a pair is supported somewhere since our getprice() would be "smart".


[29-Jul-19 02:24 AM] Slyris#2880
For the moment get_price return a double and in case of error it's return '0.0'

{Reactions}
üëç 

[29-Jul-19 02:24 AM] ca333#0333
and i agree - as aforementioned in the earlier discussions we should def. use an avg./median


[29-Jul-19 02:25 AM] Slyris#2880
So i can check that we are greater that 0.0 to treat the information


[29-Jul-19 02:25 AM] Slyris#2880
Otherwise i can set a boolean that can be reset later


[29-Jul-19 02:25 AM] Slyris#2880
for cancelling orders as you suggested


[29-Jul-19 02:25 AM] TS#7923
If we want to make it a bit more bulletproof we can also discard outliers, more than 5% from the median


[29-Jul-19 02:26 AM] TS#7923
We won't need this 99.999% of the time except when we do üòÉ


[29-Jul-19 02:26 AM] Slyris#2880
Yes just a condition, for the moment we can do the minimal value product


[29-Jul-19 02:26 AM] Slyris#2880
and Improve


[29-Jul-19 02:26 AM] TS#7923
agreed


[29-Jul-19 02:26 AM] TS#7923
just something to keep in mind


[29-Jul-19 02:26 AM] Slyris#2880
Ok i will probably add it in an issue.

{Reactions}
üëç 

[29-Jul-19 02:38 AM] Slyris#2880
@ca333 ` see - how about just using get_price(pair) which just wraps the call for a wildcard search on all APIs and until a result comes back - if not available on any of the APIs we return a null which stands for n/a so users/devs are aware on the situation.` I would prefer to throw an exception in this case that can be catch and used what do you think ?

{Reactions}
üëç 

[29-Jul-19 02:38 AM] Slyris#2880
Instead of returning `nullptr`


[29-Jul-19 02:39 AM] Slyris#2880
I'm not a big fan of exceptions but I have a way of thinking that justifies their use: there is a mistake? if yes, is this error my fault? If it does not, then I throw an exception.


[29-Jul-19 02:41 AM] Slyris#2880
If we cannot have any result of any of the apis, I really suggest we throw an exception because the error is not from us, but from an outside service.


[29-Jul-19 02:41 AM] Slyris#2880
This exception could be catched by the gui frontend and be printed as api unreachable on the front-end layer.


[29-Jul-19 02:57 AM] ca333#0333
yes thats fine @Slyris - the exception would likely return a specific error message like "pair not available" so frontend devs or CLI users will know whats going on anyway.


[29-Jul-19 04:14 AM] Slyris#2880
```cpp
 st_price get_price(antara::pair currency_pair)
        {
            st_price asset_price{0.0};
            std::size_t nb_calls_succeed = 0u;
            for (auto &&[current_platform_name, current_price_platform_ptr] : registry_platform_price_) {
                auto current_price = current_price_platform_ptr->get_price(currency_pair);
                if (current_price.value() != 0.0) {
                    asset_price = asset_price + current_price;
                    nb_calls_succeed += 1;
                }
            }
            if (nb_calls_succeed == 0) {
                //TODO: create own exception types
                throw std::runtime_error("pair not available");
            }
            return st_price{asset_price.value() / nb_calls_succeed};
        }
```

First approach  @ca333


[29-Jul-19 04:15 AM] Slyris#2880
@TS No 5% percent verification for the moment


[29-Jul-19 04:16 AM] TS#7923
That‚Äôs fine, it‚Äôs something for later


[29-Jul-19 04:16 AM] Slyris#2880
in fact yes if an price platform return 0.01 for komodo


[29-Jul-19 04:16 AM] Slyris#2880
the results will be strange


[29-Jul-19 06:21 AM] Slyris#2880
`MMBot needs to keep track of the median market price of all asset pairs. If a market pair does not have a centralized exchange equivalent (e.g., KMD/DOGE), it needs to be calculated on the fly from available data using the main trading pair as intermediary (BTC/KMD and BTC/DOGE in this case).`

@ca333 @TS  "For the moment the price function return 0.0 if the current pair doesn't exist from the price platform"


[29-Jul-19 06:28 AM] TS#7923
That's OK but in this case (if it returns 0.0) we need another function that calculates the pair from the BTC intermediary. Or, in some cases, the KMD intermediary (e.g., RedFOX / Verus pair)


[29-Jul-19 06:29 AM] TS#7923
I wonder if something like RFOX/VRC would give us usable data even if we can calculate it through KMD. There's only one price source (DigitalPrice) and those markets are very illiquid


[29-Jul-19 06:29 AM] TS#7923
But I don't have a better idea. Should work well for liquid pairs like KMD/DOGE


[29-Jul-19 06:30 AM] Slyris#2880
hmm ok


[29-Jul-19 11:55 AM] Slyris#2880
@TS I implemented the pair from the BTC intermediary for the coinpaprika price platform part, and it's work unit tests is pushed and under review.

I didn't achieve the KMD intermediary for the moment. It's seem's a bit complicated (because only DigitalPrice)


[29-Jul-19 11:59 AM] TS#7923
Great, thank you! Yes, DigitalPrice will be a bottleneck.... some ecosystem coins like RFOX are on other exchanges as well. Will make a list tomorrow (I‚Äôm in Asia and it‚Äôs very late here).


[29-Jul-19 11:59 AM] Slyris#2880
Ok !


[29-Jul-19 11:59 AM] Slyris#2880
Wish you a good night üòâ


[29-Jul-19 12:04 PM] ca333#0333
if a price is 0.0 because its unavailability we just have to ensure it is not included in avg./med. calculations


[29-Jul-19 12:24 PM] cipi#4502
btw, coinpaprika can convert prices to the currency you want, eg
https://api.coinpaprika.com/v1/price-converter?base_currency_id=bch-bitcoin-cash&quote_currency_id=kmd-komodo&amount=1
tells you the price of BCH converted to KMD


[29-Jul-19 12:29 PM] Slyris#2880
Great


[29-Jul-19 12:30 PM] Slyris#2880
Thank's I was not aware


[29-Jul-19 12:31 PM] Slyris#2880
@ca333 It's already the case


[29-Jul-19 12:31 PM] Slyris#2880
```cpp
 VLOG_SCOPE_F(loguru::Verbosity_INFO, pretty_function);
        std::size_t nb_calls_succeed = 0u;
        auto price_functor = [&](auto result, auto &&pair) {
            auto&&[current_platform_name, current_price_platform_ptr] = pair;
            auto current_price = current_price_platform_ptr->get_price(currency_pair);
            nb_calls_succeed += current_price.value() != 0.0;
            return result + current_price;
        };
        auto asset_price = std::accumulate(begin(registry_platform_price_), end(registry_platform_price_),
                                           st_price{0.0}, price_functor);
        if (nb_calls_succeed == 0) {
            throw errors::pair_not_available();
        }
        return st_price{asset_price.value() / nb_calls_succeed};
```

nb_call_succeed is incremented only if price is different from 0.0


[29-Jul-19 12:31 PM] Slyris#2880
for example if we got:


[29-Jul-19 12:32 PM] Slyris#2880
`1.0 + 0.0 + 1.05` it's will do: `2.05 / 2`


[29-Jul-19 12:38 PM] cipi#4502
can't we rely solely on the APIs of the price providers (coinpaprika, coingecko and so on) for the price calculation, instead of doing it ourselves? The advantage is that they also take the volume into account, so that small volume exchanges don't distort the price calculation. Else i could manipulate the price by doing a trade on a small volume exchange.


[29-Jul-19 12:40 PM] Slyris#2880
it's will be simpler


[29-Jul-19 12:40 PM] Slyris#2880
to use only coinpaprika etc


[29-Jul-19 12:45 PM] Slyris#2880
@cipi Pull request is updated


[29-Jul-19 12:47 PM] Slyris#2880
@cipi  The second advantage of doing this is that we do not explode the api rate limits of the different exchanges to ask the price. Coinpaprika leaves us 10 queries per second it's already very good


[29-Jul-19 12:48 PM] Slyris#2880
Doesn't hesitate to give your opinion on the pull request: https://github.com/KomodoPlatform/antara-makerbot/pull/7

If i miss something such as the price converter call you can tell me directly here

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/pull/7
feat(price-service): add price service by Milerius ¬∑ Pull Request...
add unit tests for price service
add pair not available exception
add a factory for creating abstract price platform
update st_price to be addable_with double
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[29-Jul-19 12:48 PM] cipi#4502
yes, coinpaprika is very generous regarding this... i hope they will not change their minds one day and limit this too much


[29-Jul-19 12:49 PM] Slyris#2880
Anyway, we could also paid for a coinmarketcap license somedays...


[29-Jul-19 12:49 PM] Slyris#2880
if it's in the plan


[29-Jul-19 11:15 PM] TS#7923
We certainly can at a later stage when the project starts brining in some revenue


[29-Jul-19 11:19 PM] Slyris#2880
Let's stick to coinpaprika for the moment and see how it goes


[30-Jul-19 12:17 AM] Slyris#2880
Should I add a function in the price service that takes an asset array and calls get_price for each of its pairs? who would return a map that associates a pair with his price? Anyway we can not exceed 10 queries per second (for coinpaprika) so should we use kind of delay or a cache ?


[30-Jul-19 12:20 AM] Slyris#2880
I do not know exactly how many pairs we have to track, but it is certain that it will exceed 10 pairs


[30-Jul-19 12:21 AM] Slyris#2880
So the price service could very well all 10 requests wait a second, in its own thread and put in an accessible cache. But I think there are other possibilities


[30-Jul-19 12:28 AM] Slyris#2880
The question is how do we organize ourselves to manage all the assets that we track down with all the limits that will fall on us? I would have liked that for example for coinpaprika one can ask `several base to the same quote` but it is not the case.


[30-Jul-19 12:45 AM] Slyris#2880
For example: https://coinmarketcap.com/api/documentation/v1/#operation/getV1ToolsPriceconversion


[30-Jul-19 12:45 AM] Slyris#2880
Can take 120 quote at the same time


[30-Jul-19 01:36 AM] Slyris#2880
I will add an overload so we can get a price from an associative map (base / array of quotes)


[30-Jul-19 01:36 AM] Slyris#2880
This way I can profit from API that offer me the possibility to convert a base to multiple quotes prices


[30-Jul-19 01:38 AM] dcprevere#1502
I've created a PR for the Strategy Manager's first iteration, but it's very much a WIP


[30-Jul-19 01:46 AM] Slyris#2880
@dcprevere  I commented it !


[30-Jul-19 01:46 AM] Slyris#2880
It's strange the CI are not passing on your pull request, may be because it's a draft


[30-Jul-19 01:49 AM] Slyris#2880
How i forget the constcorectness on my getter too


[30-Jul-19 01:50 AM] Slyris#2880
@dcprevere Usually there is the signature:

```cpp
int my_getter() const
```

So we know that the member function doesn't modify internal field from the class


[30-Jul-19 01:50 AM] Slyris#2880
It's an example but i think you will get it


[30-Jul-19 01:50 AM] Slyris#2880
also from iso:

`A member function that inspects (rather than mutates) its object.

A const member function is indicated by a const suffix just after the member function‚Äôs parameter list. Member functions with a const suffix are called ‚Äúconst member functions‚Äù or ‚Äúinspectors.‚Äù Member functions without a const suffix are called ‚Äúnon-const member functions‚Äù or ‚Äúmutators.‚Äù`


[30-Jul-19 01:51 AM] Slyris#2880
```cpp
class Fred {
public:
  void inspect() const;   // This member promises NOT to change *this
  void mutate();          // This member function might change *this
};
void userCode(Fred& changeable, const Fred& unchangeable)
{
  changeable.inspect();   // Okay: doesn't change a changeable object
  changeable.mutate();    // Okay: changes a changeable object
  unchangeable.inspect(); // Okay: doesn't change an unchangeable object
  unchangeable.mutate();  // ERROR: attempt to change unchangeable object
}
```


[30-Jul-19 01:52 AM] Slyris#2880
I added @ca333 To the review too


[30-Jul-19 01:54 AM] Slyris#2880
@dcprevere So in your programm you will probably have:

```cpp
const MMStrategy& get_strategy(const antara::pair& pair) const {
    return strategies.at(pair);
  }

MMStrategy& get_strategy(const antara::pair& pair) {
    return strategies.at(pair);
  }
```


[30-Jul-19 01:54 AM] dcprevere#1502
I had no idea, thanks


[30-Jul-19 01:54 AM] dcprevere#1502
I understand the distinction


[30-Jul-19 01:54 AM] Slyris#2880
No problem, you will grow up üòâ


[30-Jul-19 01:55 AM] Slyris#2880
Don't forget to write unit test at the same time that you code


[30-Jul-19 01:55 AM] Slyris#2880
I usually develop the whole program using: https://en.wikipedia.org/wiki/Test-driven_development

{Embed}
https://en.wikipedia.org/wiki/Test-driven_development
Test-driven development
Test-driven development (TDD) is a software development process that relies on the repetition of a very short development cycle: requirements are turned into very specific test cases, then the software is improved so that the tests pass. This is opposed to software developmen...


[30-Jul-19 02:07 AM] dcprevere#1502
I will, once I have an idea of the rough structure


[30-Jul-19 02:07 AM] Slyris#2880
Keep it in mind if you want to use struct (only public fields data, like c-structs) or class (public member function, private fields etc)


[30-Jul-19 02:09 AM] Slyris#2880
```cpp
OrderLevel make_bid(float mid, float spread, float quantity) {
    float price = mid * (1.0 - spread);
    Side side = Side::BUY;
    OrderLevel ol(price, quantity, side);
    return ol;
  }

  OrderLevel make_ask(float mid, float spread, float quantity) {
    float price = mid * (1.0 + spread); // only the operation change here
    Side side = Side::SELL; //only the side change here
    OrderLevel ol(price, quantity, side);
    return ol;
  }
```

There is here for example DRY (don't repeat yourself) you can create one function that will be called inside make_ask and make_bid

This way you will have less bug's and a better target for your unit tests


[30-Jul-19 02:10 AM] Slyris#2880
Less code, fewer bugs, less investigation in the future.


[30-Jul-19 02:10 AM] Slyris#2880
Repeat ourself is also repeating our potential errors


[30-Jul-19 02:13 AM] dcprevere#1502
I really don't think DRY saves us much here


[30-Jul-19 02:13 AM] dcprevere#1502
And I think it's easier to read than the alternative


[30-Jul-19 02:13 AM] dcprevere#1502
You can write the alternative and we can compare


[30-Jul-19 02:16 AM] Slyris#2880
```cpp
OrderLevel make_internal_(float price, Side side, float quantity) 
{
      return OrderLevel(price, quantity, side);
}

OrderLevel make_bid(float mid, float spread, float quantity) 
{
     return make_internal_(mid * (1.0 - spread), Side::BUY, quantity);
}

  OrderLevel make_ask(float mid, float spread, float quantity) 
{
    return make_internal_( mid * (1.0 + spread), Side::SELL, quantity);
}
```


[30-Jul-19 02:16 AM] Slyris#2880
@dcprevere


[30-Jul-19 02:19 AM] dcprevere#1502
You've repeated everything I have, but you've just put it all on one line


[30-Jul-19 02:20 AM] dcprevere#1502
The DRY alternative would have a single method `make_order`


[30-Jul-19 02:20 AM] dcprevere#1502
That took a side


[30-Jul-19 02:20 AM] Slyris#2880
yep


[30-Jul-19 02:20 AM] Slyris#2880
Totally


[30-Jul-19 02:21 AM] Slyris#2880
We clear here, there is no impact on the performance just on the style.

We will focus in important things in review


[30-Jul-19 02:21 AM] Slyris#2880
Like constness and no bug


[30-Jul-19 02:22 AM] dcprevere#1502
```
OrderLevel make_order(float price, float quantity, Side side)
{
  return OrderLevel(price, quantity, side);
}

OrderLevel make_bid(float mid, float spread, float quantity)
{
  st_price price = mid * (1.0 - spread);
  return make_internal_(price, quantity, Side::BUY);
}

OrderLevel make_ask(float mid, float spread, float quantity)
{
  st_price price = mid * (1.0 + spread);
  return make_internal_(price, quantity, Side::SELL);
}
```

{Reactions}
‚ù§ 

[30-Jul-19 02:22 AM] dcprevere#1502
How about this?


[30-Jul-19 02:22 AM] Slyris#2880
great! (but it' doesn't compile since we need st_price as argument)


[30-Jul-19 02:23 AM] Slyris#2880
but you got it


[30-Jul-19 02:23 AM] dcprevere#1502
Makes it clear what the calculation is calculating, keeps param ordering the same between make_internal_ and the OrderLevel constructor, and make_order is a better name


[30-Jul-19 02:23 AM] dcprevere#1502
Yeah, I realise that hahaha


[30-Jul-19 02:23 AM] Slyris#2880
Great


[30-Jul-19 02:23 AM] dcprevere#1502
Not the only bug


[30-Jul-19 02:23 AM] Slyris#2880
We will focus on the review


[30-Jul-19 02:23 AM] dcprevere#1502
Cheers


[30-Jul-19 02:23 AM] Slyris#2880
:p


[30-Jul-19 03:02 AM] Slyris#2880
@Doom @dcprevere will probably ask you some questions about your strong type library


[30-Jul-19 03:05 AM] Doom#9021
Sure !


[30-Jul-19 03:07 AM] dcprevere#1502
Hi @Doom , I want to do the following:
```
    antara::st_price price = mid * (1.0 - spread);
```

Where mid is a st_price and spread is an st_price


[30-Jul-19 03:08 AM] dcprevere#1502
Which traits are needed for each of st_price and st_spread?


[30-Jul-19 03:09 AM] dcprevere#1502
Sorry, spread is an st_spread


[30-Jul-19 03:09 AM] Doom#9021
What is the `1.0` supposed to represent here ?


[30-Jul-19 03:09 AM] dcprevere#1502
100%


[30-Jul-19 03:09 AM] dcprevere#1502
and spread is a percentage either above or below


[30-Jul-19 03:11 AM] Doom#9021
Well I would probably turn the `1.0` into a st_spread, like `st_spread{1.0}` (since it is also a spread, IIUC)


[30-Jul-19 03:11 AM] Doom#9021
Then, `st_spread` should have the `subtractable` trait (which means you can subtract a spread from a spread)


[30-Jul-19 03:12 AM] Doom#9021
And then `st_price` should have the multiplicable_with<st_spread>` trait, in order for it to be "scaled" by a spread


[30-Jul-19 03:14 AM] dcprevere#1502
`/home/dare/src/dex/mmbot/src/strategy_manager/strategy.manager.cpp:105:62: error: request for member ‚Äòoperator-‚Äô is ambiguous
     antara::st_price price = mid * (antara::st_spread{1.0} - spread);`


[30-Jul-19 03:15 AM] dcprevere#1502
I'm getting this error after assigning those traits


[30-Jul-19 03:16 AM] Slyris#2880
@Doom


[30-Jul-19 03:18 AM] dcprevere#1502
```
    using st_spread = st::type<
            double,
            struct spread_tab,
            st::arithmetic,
            st::subtractable
      >;
```


[30-Jul-19 03:19 AM] Doom#9021
Oh, sure, if your type is already `arithmetic`, it is already `subtractable`, so you don't need to add `subtractable` manually


[30-Jul-19 03:20 AM] Doom#9021
(Actually, maybe there's a way I could detect that at compile-time and emit a custom error message)


[30-Jul-19 03:26 AM] dcprevere#1502
Ahah.
```
    using st_spread = st::type<
            double,
            struct spread_tab,
            st::arithmetic
      >;

    using st_price = st::type<
            double,
            struct price_tag,
            st::arithmetic,
            st::addable_with<double>,
            st::multiplicable_with<st_spread>
      >;
```
Now it is failing on the multiply:
```
/home/dare/src/dex/mmbot/src/strategy_manager/strategy.manager.cpp:105:68: error: request for member ‚Äòoperator*‚Äô is ambiguous
     antara::st_price price = mid * (antara::st_spread{1.0} - spread);
                                                                    ^
```


[30-Jul-19 03:27 AM] Doom#9021
Same answer if `st_price` is already `arithmetic` üòõ


[30-Jul-19 03:29 AM] Doom#9021
Basically, `arithmetic` includes operations like +, -, *, /, %, ==, ++, --


[30-Jul-19 03:29 AM] Slyris#2880
Addable with is useless then ?


[30-Jul-19 03:29 AM] Doom#9021
So it can be used as a shortcut if you want your type to support all of those


[30-Jul-19 03:30 AM] dcprevere#1502
Sorry, I misunderstood the documentation. When it said that arithmetic implements addable and such, I thought that was the addable that can multiply T * T -> T


[30-Jul-19 03:30 AM] Doom#9021
@Slyris Nop, addable_with is still needed to support adding with another type (here, `double`)


[30-Jul-19 03:31 AM] dcprevere#1502
We have T  * (U -U)


[30-Jul-19 03:31 AM] dcprevere#1502
So I thought arithmetic itself wouldn't cover this


[30-Jul-19 03:32 AM] dcprevere#1502
You would need `multiplicable_with<U>`


[30-Jul-19 03:33 AM] Doom#9021
Hm, oh I see


[30-Jul-19 03:33 AM] Doom#9021
Yeah arithmetic is supposed to cover only T op T -> T


[30-Jul-19 03:34 AM] Slyris#2880
So the ambiguous operator is a bug ?


[30-Jul-19 03:34 AM] Slyris#2880
Can we try to isolate the problem @Doom  into an unit tests ?


[30-Jul-19 03:35 AM] Slyris#2880
T * ( U - U )


[30-Jul-19 03:36 AM] Doom#9021
@Slyris I might have been too permissive about a template parameter type yep, I'll reproduce it and fix soon


[30-Jul-19 03:37 AM] Slyris#2880
We can trick with .value() waiting the fix

{Reactions}
üëç 

[30-Jul-19 03:57 AM] dcprevere#1502
```
    using st_price = st::type<
            double,
            struct price_tag,
      st::arithmetic,
      st::multiplicable_with<double>
      >;
```

```
    double mod_d = mod.value();
    antara::st_price price = mid * mod_d;
```

```
src/strategy_manager/strategy.manager.cpp:107:36: error: request for member ‚Äòoperator*‚Äô is ambiguous
     antara::st_price price = mid * mod_d;
                                    ^~~~~
```


[30-Jul-19 03:57 AM] dcprevere#1502
Using just st_price and double, it's still happening


[30-Jul-19 04:12 AM] Slyris#2880
Just use .value() everywhere for the moment


[30-Jul-19 07:59 AM] cipi#4502
regarding the 10 requests/second API limititation: it does not seem to be a hard limitation, looks more like a soft one... i think it is more a kind of rounded value over time or something
i do update all pairs (i think they are like 50) at once in my script, then sleep for 30s and repeat... and it works


[30-Jul-19 08:08 AM] Slyris#2880
I need to probably wait one second each 10 request


[30-Jul-19 08:08 AM] Slyris#2880
That's all


[30-Jul-19 08:08 AM] Slyris#2880
Or if I get an 429 retry one second later


[30-Jul-19 09:57 AM] jl777c#5810
@allbits


[30-Jul-19 09:57 AM] jl777c#5810
can someone invite him?


[30-Jul-19 09:57 AM] jl777c#5810
he will be the ideal tester for this


[30-Jul-19 09:58 AM] gcharang#6833
@ca333 @carl can invite


[30-Jul-19 10:39 AM] ca333#0333
it is still in active dev and not "production testable" right now. And thanks to Slyris TDD we wont need manual integration/acceptance tests. But he can join the initial tests as soon as its "testable". Inviting him so he can follow the dev talk.


[30-Jul-19 10:40 AM] jl777c#5810
over the years, i finally convinced allbits to start using cli


[30-Jul-19 10:40 AM] jl777c#5810
and now he seems to like it

{Reactions}
üíØ 

[30-Jul-19 11:01 AM] Slyris#2880
i pushed a par_for_each @ca333

{Reactions}
üëç 

[30-Jul-19 11:01 AM] Slyris#2880
work's like a charm


[30-Jul-19 11:01 AM] Slyris#2880
finally recoded goroutine in c++ '_'


[30-Jul-19 11:04 AM] Slyris#2880
if someone can review it ?


[30-Jul-19 11:06 AM] allbits#5898
Hello üëã


[30-Jul-19 11:18 AM] Slyris#2880
hello @allbits


[30-Jul-19 01:45 PM] Slyris#2880
@ca333 style fixed

{Reactions}
üëç 

[31-Jul-19 08:32 AM] Slyris#2880
review done @dcprevere


[31-Jul-19 11:55 AM] Slyris#2880
I'm trying to implement the price_service for coinmarketcap, but I have 333 calls to api I already have the right to make calls for today. It's very annoying it prevents me to implement correctly for coinmarketcap, I skip for now?

{Reactions}
‚úÖ 

[31-Jul-19 12:10 PM] ca333#0333
yes skip it for now - we can add support for such limited/paid APIs at a later point of time.


[31-Jul-19 12:18 PM] Slyris#2880
i pushed the retry after 1s for coin paprika also @ca333


[31-Jul-19 12:19 PM] Slyris#2880
I merge the pull request of @dcprevere  but I do not understand it does not appear in the list of contributors (i'm little bit sad for him), would it be that I would have squash before to merge his pull request?


[31-Jul-19 01:40 PM] dcprevere#1502
Thanks for reviewing my PR @Slyris and @ca333 !

{Reactions}
üëç (2) 

[31-Jul-19 01:50 PM] Slyris#2880
@ca333 Can i merge the short pr ?

{Reactions}
‚úÖ 

[31-Jul-19 02:01 PM] Slyris#2880
I'm designing this actually:

```cpp
using registry_assets_pair = std::unordered_map<st_symbol::value_type, std::vector<st_symbol>>;
using registry_price_result = std::unordered_map<antara::pair, st_price>;

// like:
registry_assets_pair example{"KMD", {"DOGE", "BTC", "ETH"}};
registry_price_result res = get_price(example);

//! res ->
{ {"KMD/DOGE", median_price}, {"KMD/ETH", median_price}, {"KMD/BTC", median_price} }
```


[31-Jul-19 02:01 PM] Slyris#2880
@ca333 Seem's good no ?


[31-Jul-19 02:49 PM] Slyris#2880
@ca333 Added you to a review, will sleep. Good night everyone !

{Reactions}
üññ 

[31-Jul-19 02:51 PM] Slyris#2880
@dcprevere We got an alert on LGTM: https://lgtm.com/projects/g/KomodoPlatform/antara-makerbot/alerts/?mode=list


[31-Jul-19 02:52 PM] Slyris#2880
An object larger than 64 bytes is passed by value to a function. Passing large objects by value unnecessarily use up scarce stack space, increase the cost of calling a function and can be a security risk. Use a const pointer to the object instead.


[31-Jul-19 02:53 PM] dcprevere#1502
Cheers


[31-Jul-19 02:53 PM] Slyris#2880
I fixed it.


[31-Jul-19 02:53 PM] Slyris#2880
Just pushed


[31-Jul-19 08:16 PM] TS#7923
We have an external project, NIX, who are also interested in testing. They are CLI-savvy (probably), so they don't necessarily need the GUI part


[31-Jul-19 08:17 PM] TS#7923
When do you expect to start working on the GUI? I will give you more detailed specs and even a wireframe for it, just trying to prioritize things. Next Monday would work?


[31-Jul-19 10:31 PM] Slyris#2880
Hello @ca333 @TS maybe i misunderstood in the beginning but I thought I was not on the GUI part ?

I can create the basis that window opening and Lang management but I'm not sure I'm the best for design GUI front application

But I can prepare the library make it compiling and ready to code.

Let me know


[31-Jul-19 10:33 PM] Slyris#2880
@grewalsatinder I think you suggested grpc too so we need to discuss about the GUI part


[31-Jul-19 10:34 PM] TS#7923
@Slyris not sure ( @ca333 knows best who to assign to which part). I was more talking to the channel, someone eventually will do the GUI üòÉ


[31-Jul-19 10:34 PM] TS#7923
Sorry if it wasn‚Äôt clear


[31-Jul-19 10:35 PM] Slyris#2880
I suggested imgui for the GUI because it's cross platform , lot of language supported , ease of install but I will adapt if the person that is assigned to the GUI want smth else


[31-Jul-19 10:42 PM] Slyris#2880
My suggestion instead of grpc support:


http://docs.libuv.org/en/v1.x/pipe.html


I used it in the past successfully is just like a cross platform local socket for communication


[31-Jul-19 10:43 PM] Slyris#2880
I send JSON through this socket so everyone can treat the JSON as he want


[31-Jul-19 10:44 PM] Slyris#2880
So the GUI can just connect through this local socket and write some JSON to me I will interpret it and answer an other JSON


[31-Jul-19 10:44 PM] Slyris#2880
Such as an api but fastest (it's local socket/pipe)


[31-Jul-19 10:45 PM] dcprevere#1502
What is the benefit of using sockets? If you're serialising/deserialising JSON then it won't be more performant than gRPC


[31-Jul-19 10:45 PM] Slyris#2880
Grpc is a bazooka


[31-Jul-19 10:45 PM] dcprevere#1502
(I don't think)


[31-Jul-19 10:45 PM] Slyris#2880
Painfull to use in c++ (for me)


[31-Jul-19 10:45 PM] Slyris#2880
And I will probably not send raw JSON


[31-Jul-19 10:45 PM] Slyris#2880
But cbor JSON


[31-Jul-19 10:46 PM] Slyris#2880
(consise binary object representation)


[31-Jul-19 10:46 PM] grewalsatinder#9653
@Slyris yes, I suggested for gRPC, so any 3rd party devs can get started by making their own GUIs using this.


[31-Jul-19 10:46 PM] Slyris#2880
And you have to know that grpc using local sockets too or inet


[31-Jul-19 10:46 PM] grewalsatinder#9653
but I don't have anytime soon plans to work on GUI projects


[31-Jul-19 10:47 PM] Slyris#2880
So it's exactly the same performance


[31-Jul-19 10:47 PM] grewalsatinder#9653
I sure intend to make something in GUI using Flutter.io/Dart for Desktop and WebAssembly based web app.


[31-Jul-19 10:47 PM] Slyris#2880
Angular dart ?


[31-Jul-19 10:47 PM] grewalsatinder#9653
but starting from my own app


[31-Jul-19 10:48 PM] Slyris#2880
The problem is I'm absolutely bad for GUI thing's and there is a lot of job to do on the back


[31-Jul-19 10:49 PM] Slyris#2880
But I can write a full cli too if needed


[31-Jul-19 10:49 PM] dcprevere#1502
I've never used CBOR, I'm just reading about it now
Does that mean that a user of the API would have to use CBOR too? Because it's pretty niche and could scare away devs from using the API.


[31-Jul-19 10:50 PM] Slyris#2880
Exactly the same as grpc


[31-Jul-19 10:50 PM] Slyris#2880
https://cbor.io/impls.html


[31-Jul-19 10:51 PM] Slyris#2880
Cbor is supported by all langage almost


[31-Jul-19 10:51 PM] Slyris#2880
So just before sending data is


[31-Jul-19 10:51 PM] Slyris#2880
Cbor.encode(data)


[31-Jul-19 10:51 PM] Slyris#2880
And when receiving cbor.decode


[31-Jul-19 10:51 PM] Slyris#2880
Litteraly 2 lines of code


[31-Jul-19 10:52 PM] dcprevere#1502
Okay, good support


[31-Jul-19 10:55 PM] grewalsatinder#9653
My GUI stack is ancient and I'm not at the point where I can deliver GUI apps with security in mind that I wish to deliver. That's why I'm not so active in dev stuff since practicing for small projects of my own doing such things. but soon I'll be able to get back to making apps and services with not a stack of JavaScript+Node.js üòÖ


[31-Jul-19 10:56 PM] Slyris#2880
Of someone want to design something with QT or other he can tell me


[31-Jul-19 10:56 PM] Slyris#2880
As I say he can connect to the local pipe and do what he want


[31-Jul-19 10:56 PM] Slyris#2880
But I'm sure that @ca333 asked for a single binary


[31-Jul-19 10:57 PM] Slyris#2880
But I'm sure that @ca333 asked for a single binary


[31-Jul-19 10:57 PM] grewalsatinder#9653
I suggested gRPC as I saw it mentioned in dev forums as one good choice, and I recently learned it while learning Golang


[31-Jul-19 10:57 PM] Slyris#2880
Grpc is great to use in Golang


[31-Jul-19 10:58 PM] Slyris#2880
Painfull to use in c++


[31-Jul-19 10:58 PM] grewalsatinder#9653
ah... wasn't aware of that


[31-Jul-19 10:58 PM] Slyris#2880
In fact almost everything is pleasant in other langage and painfull in c++

{Reactions}
üòÑ 

[31-Jul-19 10:59 PM] grewalsatinder#9653
have heard the similar things about C++ from other devs üòÖ


[31-Jul-19 11:00 PM] Slyris#2880
Golang is this langage where even multi threading is super easy


[31-Jul-19 11:00 PM] Slyris#2880
And pleasant


[31-Jul-19 11:00 PM] grewalsatinder#9653
agree


[31-Jul-19 11:02 PM] dcprevere#1502
But no generics üò¢


[31-Jul-19 11:03 PM] dcprevere#1502
It could be my favourite language if not for that


[31-Jul-19 11:04 PM] Slyris#2880
Yeah...


[31-Jul-19 11:04 PM] Slyris#2880
And proper error handling


[31-Jul-19 11:06 PM] Slyris#2880
Golang is great for people that come from front end world and back end world


[31-Jul-19 11:06 PM] Slyris#2880
That's great for a langage


[31-Jul-19 11:22 PM] jl777c#5810
@grewalsatinder sometimes ancient tech is the most secure üòÉ

{Reactions}
‚úÖ 

[31-Jul-19 11:23 PM] grewalsatinder#9653
for C would totally agree


[31-Jul-19 11:23 PM] grewalsatinder#9653
for JavaScript+jQuery I won't üòÅ


[31-Jul-19 11:33 PM] Slyris#2880
So  @ca333 will drive me if the backend should be like a deamon or a single binary with the GUI and how we deal if we want a CLI too


[31-Jul-19 11:39 PM] jl777c#5810
seems much more flexible if it allow GUI devs to use an api to interface to it, otherwise wouldnt we end up with a monolothic bundle of gui+backend and not get (m)any external GUI


[31-Jul-19 11:42 PM] Slyris#2880
I agree with you @jl777c


[01-Aug-19 12:14 AM] lukechilds#2707
If you're using native sockets for API communication as opposed to HTTP/JSON-RPC you're ruling out all browser based GUIs and making Chromium/Electron based GUIs much more complex.


[01-Aug-19 12:17 AM] Slyris#2880
It was only a proposal, I do not know exactly what we need at the moment, if the mistletoe is a binary desktop we will not need anything other than communication local. On the other hand if the project evolves towards a webapp, then there even the fact of making the program in c ++ does not really make any more sense. For me we chose C++ to make a GUI cross-platform native binary


[01-Aug-19 12:18 AM] Slyris#2880
If you want to do a webapp, the golang would be a much better choice in this case i agree


[01-Aug-19 12:18 AM] Slyris#2880
On the other hand if you want a standalone binary then yes c++ is a much more appropriate choice


[01-Aug-19 12:19 AM] Slyris#2880
But we really need to agree on architecture all together and finalize our choice.


[01-Aug-19 12:20 AM] lukechilds#2707
Ok, there where talks about us (HyperDEX) integrating frontend functionality for this into our GUI, something HTTP/JSON-RPC based would be much simpler for us to integrate with


[01-Aug-19 12:20 AM] Slyris#2880
The solution GRPC / CBOR, will make GUI / CLI native to the os (no webapp) in any language including c++. 

The webapp solution is more in the sense of a golang backend for example. (I do not see the interest of making a rest API in c++)


[01-Aug-19 12:21 AM] Slyris#2880
In fact the c++ binary can return json encoded in CBOR is that is your question


[01-Aug-19 12:22 AM] lukechilds#2707
it looks like there may be some CBOR js clients: https://github.com/paroga/cbor-js

{Embed}
https://github.com/paroga/cbor-js
paroga/cbor-js
The Concise Binary Object Representation (CBOR) data format (RFC7049) implemented in pure JavaScript. - paroga/cbor-js
https://images-ext-1.discordapp.net/external/fIONvdw9d4_MvEICYsCi9OVebPPu40ziYP39jYsaBwk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/337009


[01-Aug-19 12:22 AM] Slyris#2880
yes it's very easy


[01-Aug-19 12:22 AM] lukechilds#2707
although I'm guessing we need some sort of native socket => WebSocket proxy for that to work


[01-Aug-19 12:23 AM] lukechilds#2707
JS in Electron based GUIs runs in a sandboxed environment so it has no access to native sockets


[01-Aug-19 12:23 AM] lukechilds#2707
but we can work around that


[01-Aug-19 12:24 AM] lukechilds#2707
either native socket => WebSocket proxy, or maybe easier would be communicate directly with CBOR from a Node.js process and then pass that to the sandboxed render process via IPC


[01-Aug-19 12:24 AM] lukechilds#2707
either way, we will be able to make it work, but just throwing in my 2c, gRPC would definitely be much easier to work with


[01-Aug-19 12:25 AM] Slyris#2880
I agree with you on this point since on windows the implementation is not local socket


[01-Aug-19 12:25 AM] Slyris#2880
but local pipe


[01-Aug-19 12:25 AM] Slyris#2880
which is not the same API


[01-Aug-19 12:25 AM] Slyris#2880
https://docs.microsoft.com/en-us/windows/win32/ipc/named-pipes -> Windows

Local socket -> unix

{Embed}
https://docs.microsoft.com/en-us/windows/win32/ipc/named-pipes
Named Pipes - Windows applications


[01-Aug-19 12:25 AM] Slyris#2880
gRPC will avoid this problem


[01-Aug-19 12:26 AM] Slyris#2880
In fact since i was thinking that we will stick to c++ i planned to use: https://github.com/skypjack/uvw

{Embed}
https://github.com/skypjack/uvw
skypjack/uvw
Header-only, event based, tiny and easy to use libuv wrapper in modern C++ - skypjack/uvw
https://images-ext-2.discordapp.net/external/nz3r5PGWminPDvBtnmcUQ3pVOnzRcGg6ZOwC2gnpzsg/https/repository-images.githubusercontent.com/61499901/97b0f600-8857-11e9-90f0-a81d8b29a042


[01-Aug-19 12:26 AM] Slyris#2880
That wrap on every platform local socket, named pipe etc


[01-Aug-19 12:26 AM] Slyris#2880
But if you think that other langage want to use the backend


[01-Aug-19 12:27 AM] Slyris#2880
I wonder if c++ still a relevant choice here


[01-Aug-19 12:28 AM] Slyris#2880
At first I was really told: We make a unique cross-platform binary with built-in GUI (That's pure c++)


[01-Aug-19 12:31 AM] Slyris#2880
Did you understand something  else about the gui part @dcprevere  ?


[01-Aug-19 12:31 AM] Slyris#2880
May be it's my fault.


[01-Aug-19 12:34 AM] dcprevere#1502
I thought we were staying open to either native UI or web UI


[01-Aug-19 12:34 AM] dcprevere#1502
It would be my preference that the backend stays separate from the frontend


[01-Aug-19 12:35 AM] Slyris#2880
Which leads us to a preferred HTTP backend server


[01-Aug-19 12:35 AM] Slyris#2880
So C++ is irrelevant here.


[01-Aug-19 12:35 AM] TS#7923
This will eventually __need__ to evolve to a webapp, we discussed this at the start. Even if the first version is a desktop app, we should not paint ourselves into a corner.

{Reactions}
üëç 

[01-Aug-19 12:36 AM] Slyris#2880
Yeah i got it


[01-Aug-19 12:36 AM] Slyris#2880
Should we write just an C++ Http backend server then


[01-Aug-19 12:36 AM] Slyris#2880
With different endpoints


[01-Aug-19 12:36 AM] Slyris#2880
Calling our functions.


[01-Aug-19 12:37 AM] TS#7923
That sounds good to me, would love to hear @ca333 's thoughts


[01-Aug-19 12:38 AM] Slyris#2880
If it's the case i suggest: https://github.com/Stiffstream/restinio

{Embed}
https://github.com/Stiffstream/restinio
Stiffstream/restinio
A header-only C++14 library that gives you an embedded HTTP/Websocket server - Stiffstream/restinio
https://images-ext-2.discordapp.net/external/sdMW93VUMseugrkm2ZEE17iSIh9BguXz79V6WyY2EaQ/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/34664632


[01-Aug-19 12:49 AM] Slyris#2880
I'm sure Golang will be a better choice in this case convert the actual code will take only 1 day for me I think


[01-Aug-19 02:14 AM] ca333#0333
@Slyris the goal of a single GUI binary does not mean that the system is built monolithic with both layers in the same codebase (backend + frontend). As we can clearly see the backend is built separately - it is going to listen on a specific endpoint for the API calls. So it can literally wrap up ANY GUI. The "single binary" is just a question of bundling. The two layers: backend and frontend are already split. The backend thus can be a library or a daemon - that up to you since the endresult will be the same. 
One thing we should check in parallel is WASM support - this is going to be essential for the "webapp" solution.


[01-Aug-19 02:15 AM] Slyris#2880
https://jnmaloney.github.io/WebGui/imgui.html


[01-Aug-19 02:16 AM] Slyris#2880
It's already supported for imgui wasm I thinking


[01-Aug-19 02:16 AM] ca333#0333
not speaking about the GUI layer - talking about the makerbot backend API


[01-Aug-19 02:16 AM] Slyris#2880
Ah ok I got it !

{Reactions}
üëç 

[01-Aug-19 02:17 AM] Slyris#2880
So the back end can be a c++ http server alright @ca333 ?


[01-Aug-19 02:17 AM] Slyris#2880
If I'm following your message


[01-Aug-19 02:21 AM] ca333#0333
yes thats fine @Slyris - something like https://github.com/Stiffstream/restinio could be interesting ref. inspiration. Also has full WS support.


[01-Aug-19 02:21 AM] Slyris#2880
Great.


[01-Aug-19 02:21 AM] Slyris#2880
I would definitely go for that so


[01-Aug-19 02:23 AM] Slyris#2880
Thanks for the additional information @ca333  I appreciate it a lot.

{Reactions}
üëç 

[01-Aug-19 02:26 AM] ca333#0333
there are a few other popular ones:

http://pistache.io/ - https://github.com/oktal/pistache/
https://github.com/nghttp2/nghttp2
https://cpp-netlib.org/


[01-Aug-19 02:29 AM] Slyris#2880
Pistache is really good too

{Reactions}
üç¶ (3) üêó 

[01-Aug-19 04:55 AM] Slyris#2880
@ca333 can we merge this one: https://github.com/KomodoPlatform/antara-makerbot/pull/13

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/pull/13
feat(price-service): add a get_price from a registry of quotes by ...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[01-Aug-19 04:58 AM] Slyris#2880
@dcprevere I think we should rename order_set order_book


[01-Aug-19 05:00 AM] dcprevere#1502
The Order Book is the name we use for all the orders on the exchange


[01-Aug-19 05:00 AM] TS#7923
Correct


[01-Aug-19 05:00 AM] dcprevere#1502
And although both are collections of orders, I'm not 100% that we want to conflate the two ideas


[01-Aug-19 05:01 AM] Slyris#2880
Ok


[01-Aug-19 05:01 AM] dcprevere#1502
I know you don't like using the name set for something that isn't a std::set and I agree with you


[01-Aug-19 05:01 AM] dcprevere#1502
I'm working on the language at the moment


[01-Aug-19 05:02 AM] dcprevere#1502
https://www.martinfowler.com/bliki/UbiquitousLanguage.html

{Embed}
https://www.martinfowler.com/bliki/UbiquitousLanguage.html
bliki: UbiquitousLanguage
a bliki entry for UbiquitousLanguage
https://images-ext-1.discordapp.net/external/tLlqMwSfB6PAU8s3GzasnuHLzLIQJ9cCxi2DQpj5Gf0/https/martinfowler.com/logo-sq.png


[01-Aug-19 05:03 AM] Slyris#2880
oki


[01-Aug-19 05:07 AM] ca333#0333
`order_set` could work while `set_order` would fully justify the concern - however, maybe something like `order_collection` or `order_group` is better and more clear. To be honest - when i first read `order_set` i was looking for a setter()


[01-Aug-19 05:09 AM] ca333#0333
@Slyris @dcprevere ^


[01-Aug-19 05:09 AM] dcprevere#1502
`order_group` was actually one I was considering

{Reactions}
üëç 

[01-Aug-19 05:11 AM] Slyris#2880
Great


[01-Aug-19 05:11 AM] Slyris#2880
I will probably merge my short pr

{Reactions}
‚úÖ 

[01-Aug-19 05:11 AM] Slyris#2880
If it's ok @ca333


[01-Aug-19 05:13 AM] Slyris#2880
Thank's I will setup restinio for my next pr


[01-Aug-19 05:14 AM] dcprevere#1502
I'm working on the Order Manager btw


[01-Aug-19 05:14 AM] grewalsatinder#9653
I'd have loved to see gRPC, but I see it won't be a choice with C++


[01-Aug-19 05:15 AM] grewalsatinder#9653
for WASM support any method to create the GUI can be used with the daemon or API


[01-Aug-19 05:15 AM] grewalsatinder#9653
that will help WASM based web GUI


[01-Aug-19 05:16 AM] ca333#0333
but you d still be able to integrate makerbot with any Go app @grewalsatinder - that could give a nice project


[01-Aug-19 05:16 AM] grewalsatinder#9653
the backend can be in any language serving the API
C++
C 
Go
Rust
etc etc


[01-Aug-19 05:17 AM] ca333#0333
https://github.com/KomodoPlatform/antara-makerbot - we chose C++

{Embed}
https://github.com/KomodoPlatform/antara-makerbot
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[01-Aug-19 05:19 AM] grewalsatinder#9653
okay, I won't talk about C++ Golang backend and gRPC anymore.


[01-Aug-19 11:23 AM] Slyris#2880
@ca333 https://github.com/KomodoPlatform/antara-makerbot/pull/15

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/pull/15
feat(http): http server skeleton by Milerius ¬∑ Pull Request #15 ...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
üëç 

[01-Aug-19 02:53 PM] Slyris#2880
```json
{
     "prices": [
    {"KMD/ETH":0.004567538590943071},
    {"KMD/BTC":9.536822822621886e-05},
    {"KMD/DOGE":315.32153672302036}
]
}
```

I got this output for the moment


[01-Aug-19 02:54 PM] Slyris#2880
But i believe for the all prices


[01-Aug-19 02:54 PM] Slyris#2880
smth like


[01-Aug-19 02:58 PM] Slyris#2880
is the scientific notation a problem here @ca333


[01-Aug-19 02:58 PM] Slyris#2880
Or we can keep it like that ?


[01-Aug-19 03:16 PM] ca333#0333
yes this is a problem @Slyris - why this precision though? For BTC based coins its 10^-8 and for (most) ERCs its 10^-18 - those numbers above are likely the result of floating point errors. Handle all internal numbers as integers (bigint) and only use a double for the visualization.


[01-Aug-19 03:23 PM] jl777c#5810
and avoid scientific notation


[01-Aug-19 03:30 PM] Slyris#2880
How much precision we need maximum ?


[01-Aug-19 03:31 PM] ca333#0333
10^-8 units for all BTC protocol coins = 8 decimals


[01-Aug-19 03:31 PM] jl777c#5810
%.08f for coins, %.18f for ERC20


[01-Aug-19 03:34 PM] Slyris#2880
Great thank's


[01-Aug-19 03:34 PM] Slyris#2880
You use snprintf @jl777c for that no ?


[01-Aug-19 03:35 PM] jl777c#5810
just the s/f/printf % for displaying a satoshi value divided by 100000000


[01-Aug-19 03:35 PM] ca333#0333
example: the API returns you a price like `0.98347425` - multiply this value with 100000000 and use this integer representation for all arithmetics to avoid such floating point errors - and before visualizing (printing) you turn it back into a float value. For ERCs its analogue with 10^-18 units.


[01-Aug-19 03:36 PM] jl777c#5810
adding 0.000000004999 helps with rounding errors


[01-Aug-19 03:36 PM] Slyris#2880
Oh very interesting


[01-Aug-19 03:36 PM] ca333#0333
https://bitcointalk.org/index.php?topic=13837.0

{Embed}
https://bitcointalk.org/index.php?topic=13837.0
Stop using floating point!
Stop using floating point!


[01-Aug-19 03:37 PM] ca333#0333
just avoid `float`/`double` for all arithmetics - use it really ONLY for the visualization.


[01-Aug-19 03:37 PM] Slyris#2880
Perfect.


[01-Aug-19 03:37 PM] Slyris#2880
I was not aware


[01-Aug-19 03:38 PM] Slyris#2880
So when coinpaprika return me the float I immediately apply the factor and store it into an integer.


[01-Aug-19 03:39 PM] ca333#0333
In (real) financial software dev this is considered a no-go - hence why fintech, banks, etc. also do use a pure integer representation for all arithmetics.


[01-Aug-19 03:39 PM] Slyris#2880
Then if I need to print it i will use the spro'tf etc


[01-Aug-19 03:39 PM] Slyris#2880
Snprintf *


[01-Aug-19 03:39 PM] Slyris#2880
st_price will be an integer then


[01-Aug-19 03:39 PM] ca333#0333
yes exactly


[01-Aug-19 03:40 PM] Slyris#2880
I didn't realize it during the review


[01-Aug-19 04:15 PM] Slyris#2880
```json
{"prices":[{"KMD/ETH":"0.00456725"},{"KMD/BTC":"0.00009556"},{"KMD/DOGE":"316.38369659"}]}
````

much better


[01-Aug-19 04:15 PM] Slyris#2880
if i'm still following:

```cpp
auto current_price_str = fmt::format("{:.8f}", static_cast<double>(current_price.value()) / g_factor);
```

is correct


[01-Aug-19 04:16 PM] Slyris#2880
Now i need to detect ERCs


[01-Aug-19 04:16 PM] Slyris#2880
@ca333 How did you detect ERCs easy way ?


[01-Aug-19 04:21 PM] Slyris#2880
```cpp
std::string current_price_str;
 //! TODO: Better check for ERCs 
if (current_pair.base.symbol.value() == "ETH") {
   current_price_str = fmt::format("{:.18f}", static_cast<double>(current_price.value()) / g_factor);
} else {
   current_price_str = fmt::format("{:.8f}", static_cast<double>(current_price.value()) / g_factor);
}
```


[01-Aug-19 04:22 PM] Slyris#2880
@jl777c There is a better way to detect ERCs i'm supposing


[01-Aug-19 04:32 PM] jl777c#5810
my coins repo has info on all the coins


[01-Aug-19 04:33 PM] Slyris#2880
i will totally use it


[01-Aug-19 04:34 PM] Slyris#2880
@jl777c 

```json
  {
    "coin": "ETH",
    "name": "ethereum",
    "fname": "Ethereum",
    "etomic": "0x0000000000000000000000000000000000000000",
    "rpcport": 80,
    "mm2": 1
  }
```


[01-Aug-19 04:34 PM] Slyris#2880
This one for example


[01-Aug-19 04:36 PM] Slyris#2880
etomic mean ERCs ?


[01-Aug-19 04:37 PM] Slyris#2880
if the key etomic is present that mean it"s an erc i believe


[01-Aug-19 04:40 PM] Slyris#2880
Yeah i read the doc is that, perfect.


[01-Aug-19 10:38 PM] ca333#0333
yes, if `etomic` is present and  != 0x0 then its an ERC. Above field is ETH (the motherchain of all ERC tokens).


[01-Aug-19 10:42 PM] Slyris#2880
Yeah I got it thank's


[02-Aug-19 01:11 AM] Slyris#2880
I pushed for the review !


[02-Aug-19 01:58 AM] TS#7923
wow TIL this floating vs integer in financial software, really interesting


[02-Aug-19 02:02 AM] Slyris#2880
Well i have problem during testing @ca333


[02-Aug-19 02:02 AM] Slyris#2880
```cpp
TEST_CASE("antara price as string decimal")
    {
        auto cfg = mmbot::load_mmbot_config(std::filesystem::current_path() / "assets", "mmbot_config.json");
        auto dummy_price = st_price{static_cast<std::uint64_t>(static_cast<double>(1.15000000) * g_factor)};
        antara::pair dummy_pair;
        dummy_pair.base = asset{st_symbol{"BTC"}};
        CHECK_EQ("1.15000000", antara::get_price_as_string_decimal(cfg, dummy_pair, dummy_price));
    }

//! ERROR: CHECK_EQ( "1.15000000", antara::get_price_as_string_decimal(cfg, dummy_pair, dummy_price) ) is NOT correct!
//  values: CHECK_EQ( 1.15000000, 1.14999999 )
```


[02-Aug-19 02:02 AM] Slyris#2880
Seem's i'm losing 0.00000001 somewhere


[02-Aug-19 02:04 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/606774338309324832/Capture_decran_2019-08-02_a_11.04.23.png


[02-Aug-19 02:05 AM] Slyris#2880
@jl777c  is this related because i didn't add:  '0.000000004999' 

?


[02-Aug-19 02:05 AM] Slyris#2880
with static constexpr const int g_factor = 100000000;

I dont understand why i'm loosing some value after assigning


[02-Aug-19 02:08 AM] Slyris#2880
the test pass with your constants hehe @jl777c


[02-Aug-19 02:09 AM] Slyris#2880
But i dont understand why we need this.


[02-Aug-19 02:29 AM] jl777c#5810
floating point is not precise


[02-Aug-19 02:29 AM] jl777c#5810
1/3 is not representable in floating point


[02-Aug-19 02:30 AM] jl777c#5810
EVERY floating point operation adds noise, that is why only one is allowed, to convert float to int and one to view int to float


[02-Aug-19 02:31 AM] Slyris#2880
ok everything is working with your constant


[02-Aug-19 02:31 AM] Slyris#2880
thank's a lot @jl777c


[02-Aug-19 02:34 AM] Slyris#2880
@dcprevere Should we wrap:

```cpp
static_cast<std::uint64_t>((static_cast<double>(1.15000000) + g_rounding) * g_factor)

// into
st_price generate_st_price_from_api_price(double price_api_value)
{
    return static_cast<std::uint64_t>((price_api_value + g_rounding) * g_factor);
}
```


[02-Aug-19 02:40 AM] ca333#0333
you should not have to add any "constant" @Slyris - if we re losing something somewhere then we did either use divisions or floating point arithmetics. Are we using integer for all arithmetic operations?


[02-Aug-19 02:40 AM] Slyris#2880
Yeah i'm using integer for all arithmetic operations now


[02-Aug-19 02:41 AM] Slyris#2880
Only when i get the api price value as a double


[02-Aug-19 02:41 AM] Slyris#2880
i convert it as an integer


[02-Aug-19 02:41 AM] Slyris#2880
but need to apply this factor or i'm loosing some of the real value


[02-Aug-19 02:41 AM] Slyris#2880
That's why jl777 give me this constant


[02-Aug-19 02:41 AM] ca333#0333
ok - lets find out where the difference comes from


[02-Aug-19 02:41 AM] Slyris#2880
I find it


[02-Aug-19 02:41 AM] ca333#0333
it is not possible to lose precision during tranformation from int -> double double -> int


[02-Aug-19 02:42 AM] Slyris#2880
Apparently


[02-Aug-19 02:42 AM] Slyris#2880
if you do


[02-Aug-19 02:42 AM] ca333#0333
lets find out where then - this must be a logic flaw.


[02-Aug-19 02:42 AM] Slyris#2880
static_cast<std::uint64_t>(static_cast<double>(1.15000000) * 100000000);


[02-Aug-19 02:42 AM] Slyris#2880
you loose 0.0000000001


[02-Aug-19 02:43 AM] Slyris#2880
and this is literally double to int for me


[02-Aug-19 02:43 AM] Slyris#2880
Without the cast you cannot compile (narrowing conversion)


[02-Aug-19 02:47 AM] Slyris#2880
cpp.sh/5pn5d


[02-Aug-19 02:48 AM] Slyris#2880
http://cpp.sh/5pn5d


[02-Aug-19 02:48 AM] Slyris#2880
```cpp
// Example program
#include <iomanip>
#include <iostream>
#include <string>

int main()
{
  auto res = static_cast<std::uint64_t>(static_cast<double>(1.15000000) * 100000000);
  std::cout << std::setprecision(8) << res << std::endl;
}
```


[02-Aug-19 02:48 AM] Slyris#2880
give output: `114999999`


[02-Aug-19 02:49 AM] ca333#0333
ok dont cast this way then if it leads to this sort of issues. If i calc 1.15000000 * 100000000 and represent it as an int i just get = 115000000 and if i calc 115000000/100000000 as a float i get 1.15 - so this should be pretty straight forward to implement. Can you just treat ints as ints and double as double without casting them into each other like above? I am sure this will resolved the issue if we add this "separate layer" - like JL pointed out above we only do one of the operations from visualization to operation medium and back - cuz this cast looks like a "floating point operation" too which is responsible for your missing satoshi


[02-Aug-19 02:49 AM] Slyris#2880
we will got warning


[02-Aug-19 02:49 AM] Slyris#2880
if we do this


[02-Aug-19 02:49 AM] ca333#0333
if i have the choise between a compilation warning and a missing satoshi for all float operations i will take the compiler warning


[02-Aug-19 02:49 AM] Slyris#2880
And risk is that on windows that doesn't compile because of the agressive narrowing conversion


[02-Aug-19 02:50 AM] ca333#0333
one moment - i will write you a code snippet


[02-Aug-19 02:51 AM] jl777c#5810
C++ might be doing floating point operations, almost certainly is, with complex casting and whatnots


[02-Aug-19 02:52 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/606786405045370913/Capture_decran_2019-08-02_a_11.52.21.png


[02-Aug-19 02:52 AM] Slyris#2880
It's exactly the same without conversion


[02-Aug-19 02:53 AM] Slyris#2880
@Doom Do you know somethings about this loosing ? can we avoid it ?


[02-Aug-19 02:54 AM] Slyris#2880
(like in a modern c++ way)


[02-Aug-19 02:57 AM] jl777c#5810
i just add 0.0000000049, it wont ever hurt if the precision isnt lost and helps in such cases


[02-Aug-19 02:57 AM] jl777c#5810
i know theoretically it isnt needed, yet i have gotten bug reports about off by one satoshi over the years without that


[02-Aug-19 02:57 AM] Slyris#2880
it's seem's to work with your trick @jl777c All my tests are passing with full precision


[02-Aug-19 02:57 AM] Slyris#2880
```cpp

    TEST_CASE("antara price as string decimal with normal coin")
    {
        auto cfg = mmbot::load_mmbot_config(std::filesystem::current_path() / "assets", "mmbot_config.json");
        auto dummy_price = generate_st_price_from_api_price(1.15000000);
        antara::pair dummy_pair;
        dummy_pair.base = asset{st_symbol{"BTC"}};
        CHECK_EQ("1.15000000", antara::get_price_as_string_decimal(cfg, dummy_pair, dummy_price));
    }

    TEST_CASE("antara price as string decimal with erc coin")
    {
        auto cfg = mmbot::load_mmbot_config(std::filesystem::current_path() / "assets", "mmbot_config.json");
        auto dummy_price = generate_st_price_from_api_price(0.010089534999000000);
        antara::pair dummy_pair;
        dummy_pair.base = asset{st_symbol{"ZIL"}};
        CHECK_EQ("0.010089534999000000", antara::get_price_as_string_decimal(cfg, dummy_pair, dummy_price));
    }
````

both test are passing


[02-Aug-19 02:58 AM] jl777c#5810
in theory, there is no difference between theory and practice.
in practice, there is


[02-Aug-19 03:04 AM] Doom#9021
@Slyris The loss of precision is due to the way floats are represented (which is dictated by the IEEE 754 standard)


[02-Aug-19 03:05 AM] Doom#9021
And it turns out 1.15000000 does not have an exact representation as a float, hence you end up storing 1.14999999....


[02-Aug-19 03:05 AM] Slyris#2880
so the only solution is to add a very low factor as suggested @jl777c  ?


[02-Aug-19 03:06 AM] Doom#9021
Depends on what you want


[02-Aug-19 03:07 AM] Doom#9021
If you want the number to be at least 1.15 then yes

{Reactions}
üö´ 

[02-Aug-19 03:07 AM] Slyris#2880
I'm receiving a floating point value from an api endpoint


[02-Aug-19 03:07 AM] Slyris#2880
Which i want to convert into an integer representation


[02-Aug-19 03:07 AM] Slyris#2880
of this float


[02-Aug-19 03:07 AM] Doom#9021
Otherwise, 1.1499999... is the closest `float` could get from 1.15


[02-Aug-19 03:07 AM] Slyris#2880
So 'im doing


[02-Aug-19 03:08 AM] Slyris#2880
my_api_float_price * 100000000 to get my integer price


[02-Aug-19 03:08 AM] Slyris#2880
But we are loosing some value here ^


[02-Aug-19 03:08 AM] Slyris#2880
so we apply like


[02-Aug-19 03:08 AM] Slyris#2880
```cpp
static_cast<std::uint64_t>((price_api_value + g_rounding) * g_factor)
````

@Doom  is that ok ?

{Reactions}
üëç 

[02-Aug-19 03:19 AM] ca333#0333
@Slyris what i meant was:

```cpp
    double api_response_to_int = 0.93849932 * 100000000.0;
    int operation = api_response_to_int * 2;
    cout<<operation<<endl;

    double back_to_float = operation/100000000.0;
    cout.precision(9);
    cout<<back_to_float<<endl;
```

gives you:

```
187699864
1.87699864
```


[02-Aug-19 03:21 AM] Slyris#2880
why the factor *2


[02-Aug-19 03:21 AM] ca333#0333
Maybe i am "underthinking" this - anyway, if your method gives you a 100% reliable, correct and consistent result than i am ok with it. Before we end up going in circles over floating point issues... üòÖ


[02-Aug-19 03:21 AM] Slyris#2880
?


[02-Aug-19 03:21 AM] ca333#0333
just to demonstrate a integer arithmetic operation


[02-Aug-19 03:21 AM] ca333#0333
could have been a coin volume too - you can replace with any int


[02-Aug-19 03:23 AM] ca333#0333
however - this is just an example on how i "was raised" - for our purpose we d also have to use a longer int type, etc.


[02-Aug-19 03:23 AM] Slyris#2880
I dont understand why you are not loosing value


[02-Aug-19 03:23 AM] Slyris#2880
According to the IEEE standard


[02-Aug-19 03:23 AM] ca333#0333
because this is how this is supposed to work


[02-Aug-19 03:23 AM] ca333#0333
if you d mess around with float * float operations its a different topic


[02-Aug-19 03:24 AM] ca333#0333
its about how a system/architecture internally handles and represents floats


[02-Aug-19 03:24 AM] ca333#0333
so by transforming them to a proper int value BEFORE you do ANYTHING - nothing should go wrong


[02-Aug-19 03:24 AM] Slyris#2880
i will try your solution


[02-Aug-19 03:24 AM] Slyris#2880
wait.


[02-Aug-19 03:25 AM] ca333#0333
but if we execute any arithmetic operations with float involved then it becomes a problem


[02-Aug-19 03:29 AM] Slyris#2880
youre snippet doesn"t work with erc20


[02-Aug-19 03:29 AM] Slyris#2880
token


[02-Aug-19 03:29 AM] Slyris#2880
@ca333


[02-Aug-19 03:29 AM] Slyris#2880
```cpp
double api_response_to_int = 0.010089534999000000 * 100000000.0;
    int operation = api_response_to_int;
    cout<<operation<<endl;

    double back_to_float = operation/100000000.0;
    cout.precision(18);
    cout<<back_to_float<<endl;
```


[02-Aug-19 03:29 AM] Slyris#2880
1008953
0.0100895299999999993


[02-Aug-19 03:30 AM] ca333#0333
because you cant just mutliple with 100000000


[02-Aug-19 03:30 AM] ca333#0333
dont forget its 10^-18 units


[02-Aug-19 03:30 AM] Slyris#2880
So what should be the factor in this case ?


[02-Aug-19 03:30 AM] ca333#0333
10^18


[02-Aug-19 03:31 AM] Slyris#2880
1000000000000000000.0

{Reactions}
‚úÖ 

[02-Aug-19 03:34 AM] ca333#0333
and you will need a "huge" int type cuz you wont be able to represent big ERC amounts with normal int...


[02-Aug-19 03:35 AM] Slyris#2880
std::uint64_t it's suffisent ?


[02-Aug-19 03:36 AM] Slyris#2880
i can use 128 too if it's necessary


[02-Aug-19 03:36 AM] ca333#0333
i believe uint64_t is enough - we can check/validate this later


[02-Aug-19 03:41 AM] ca333#0333
and you will likely need `long double` for the ERC values - if not mistaken `double` is limited to 10^-15


[02-Aug-19 03:41 AM] Slyris#2880
I go eat

{Reactions}
üëç 

[02-Aug-19 03:44 AM] ca333#0333
bon app


[02-Aug-19 03:44 AM] Slyris#2880
Ahahahah thanks


[02-Aug-19 03:47 AM] Slyris#2880
https://gmplib.org/


[02-Aug-19 04:05 AM] ca333#0333
using libgmp would certainly be an improvement and likely the cleanest solution - if not an overkill for you go for it


[02-Aug-19 04:06 AM] Slyris#2880
I don't know yet I will check when I come back from the restaurant

{Reactions}
üëç 

[02-Aug-19 04:06 AM] Slyris#2880
May be I can get value in satoshis directly from API


[02-Aug-19 04:06 AM] Slyris#2880
I didn't check it yet


[02-Aug-19 04:11 AM] Slyris#2880
https://stackoverflow.com/questions/33479011/c-convert-satoshiuint64-t-to-btc-string-without-float-double

{Embed}
https://stackoverflow.com/questions/33479011/c-convert-satoshiuint64-t-to-btc-string-without-float-double
C++ Convert SATOSHI(uint64_t) to BTC (string) without float/double
I need to build a function that takes uin64_t (SATOSHI) and spits a string with BTC value.
I was told to do it without any division/floats, so plain string operation should be involved. This is bec...
https://images-ext-1.discordapp.net/external/dP07hBXxuorGcvXU609uJ_e6ZgPlIdBxqG8OjQQiAyY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon%402.png


[02-Aug-19 04:16 AM] Slyris#2880
I will code my own function


[02-Aug-19 04:16 AM] Slyris#2880
Which parse string float to an integer


[02-Aug-19 04:16 AM] Slyris#2880
Without using floating point at all


[02-Aug-19 04:22 AM] ca333#0333
how do you carry the decimal informations for the "back-transformation" to float? You plan to "cache" that info?


[02-Aug-19 04:23 AM] Slyris#2880
We don't need I know the factor representation


[02-Aug-19 04:23 AM] Slyris#2880
It's a string


[02-Aug-19 04:23 AM] Slyris#2880
"100000000.0"


[02-Aug-19 04:24 AM] Slyris#2880
On fact I just have to move the '.'


[02-Aug-19 04:24 AM] Slyris#2880
Character


[02-Aug-19 04:24 AM] ca333#0333
ok great so you parse it back with the .


[02-Aug-19 04:24 AM] Slyris#2880
Exactly


[02-Aug-19 04:24 AM] Slyris#2880
Count the number of zero


[02-Aug-19 04:24 AM] Slyris#2880
And move the '.'


[02-Aug-19 04:25 AM] Slyris#2880
And vice versa.


[02-Aug-19 04:27 AM] Slyris#2880
I think it's will solve all the problems

{Reactions}
üëç 

[02-Aug-19 04:27 AM] Slyris#2880
And store it inside big integer

{Reactions}
‚úÖ 

[02-Aug-19 04:27 AM] ca333#0333
ok - this sounds like an untraditional but potentially good solution - if it was an exchange backend or high frequency trading platform i would say lets go with libgmp - but for our purpose any of the aforementioned and discussed solutions is fine.


[02-Aug-19 04:27 AM] Slyris#2880
It's will be an o(log n) solution


[02-Aug-19 04:27 AM] Slyris#2880
Probably


[02-Aug-19 04:28 AM] Slyris#2880
I will calculate it later


[02-Aug-19 04:28 AM] Slyris#2880
I'm still eating my chawarma


[02-Aug-19 04:29 AM] ca333#0333
enjoy it!


[02-Aug-19 04:29 AM] ca333#0333
i will get lunch in a bit too


[02-Aug-19 04:36 AM] Slyris#2880
Ok we are so dumb


[02-Aug-19 04:36 AM] Slyris#2880
We have a ready solution


[02-Aug-19 04:36 AM] Slyris#2880
Already...


[02-Aug-19 04:38 AM] Slyris#2880
https://github.com/fmtlib/fmt/blob/master/test/format-test.cc#L1426

{Embed}
https://github.com/fmtlib/fmt/blob/master/test/format-test.cc
fmtlib/fmt
A modern formatting library. Contribute to fmtlib/fmt development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/BwAR67ojt2Cxn3CIDXiKa_jZ4ezS2raorETj6Zlwfis/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/7280830


[02-Aug-19 04:41 AM] Slyris#2880
Format, and remove the point


[02-Aug-19 04:41 AM] Slyris#2880
And voil√†


[02-Aug-19 04:42 AM] TonyL#3577
http://www.zverovich.net/2019/07/23/std-format-cpp20.html


[02-Aug-19 04:43 AM] Slyris#2880
Yeah


[02-Aug-19 04:43 AM] Slyris#2880
It his libraey


[02-Aug-19 04:43 AM] Slyris#2880
Library


[02-Aug-19 04:43 AM] Slyris#2880
I will use it and solve the whole problem

{Reactions}
üëç 

[02-Aug-19 04:45 AM] Slyris#2880
And then


[02-Aug-19 04:45 AM] Slyris#2880
https://en.cppreference.com/w/cpp/string/basic_string/stoul

{Embed}
https://en.cppreference.com/w/cpp/string/basic_string/stoul
stoul


[02-Aug-19 06:01 AM] Slyris#2880
@ca333 I pushed


[02-Aug-19 06:01 AM] Slyris#2880
everything seem's to work

{Reactions}
üëç 

[02-Aug-19 06:01 AM] Slyris#2880
there is my solution:


[02-Aug-19 06:01 AM] Slyris#2880
```cpp
std::string get_price_as_string_decimal(const mmbot::config &cfg, const st_symbol &symbol, st_price price) noexcept
    {
        std::string price_str;
        price_str = std::to_string(price.value());
        auto process_functor = [](std::string &str, std::size_t factor) {
            while (str.size() < factor) {
                str.insert(0, "0");
            }
            str.insert(str.size() - factor, ".");
            if (str[0] == '.') {
                str.insert(0, "0");
            }
        };
        if (cfg.base_ercs_registry.at(symbol.value())) {
            process_functor(price_str, 18u);
        } else {
            process_functor(price_str, 8u);
        }
        return price_str;
    }

    st_price
    generate_st_price_from_api_price(const mmbot::config &cfg, const st_symbol &symbol, double price_api_value) noexcept
    {
        std::string price_str;
        if (cfg.base_ercs_registry.at(symbol.value())) {
            price_str = fmt::format("{:.18f}", price_api_value);
        } else {
            price_str = fmt::format("{:.8f}", price_api_value);
        }
        price_str.erase(std::find(price_str.begin(), price_str.end(), '.'));
        ltrim(price_str, "0");
        return st_price{std::stoull(price_str)};
    }
```


[02-Aug-19 06:02 AM] Slyris#2880
```cpp
TEST_CASE("antara price as string decimal with normal coin")
    {
        auto cfg = mmbot::load_mmbot_config(std::filesystem::current_path() / "assets", "mmbot_config.json");
        auto dummy_price = generate_st_price_from_api_price(cfg, st_symbol{"BTC"}, 1.15000000);
        CHECK_EQ(115000000ull, dummy_price.value());
        auto dummy_price_str = get_price_as_string_decimal(cfg, st_symbol{"BTC"}, dummy_price);
        CHECK_EQ("1.15000000", dummy_price_str);
    }

    TEST_CASE("antara price as string decimal with erc coin")
    {
        auto cfg = mmbot::load_mmbot_config(std::filesystem::current_path() / "assets", "mmbot_config.json");
        auto dummy_price = generate_st_price_from_api_price(cfg, st_symbol{"ZIL"}, 0.010089534999000000);
        CHECK_EQ(10089534999000000ull, dummy_price.value());
        auto dummy_price_str = get_price_as_string_decimal(cfg, st_symbol{"ZIL"}, dummy_price);
        CHECK_EQ("0.010089534999000000", dummy_price_str);
    }
```


[02-Aug-19 09:12 AM] Slyris#2880
@ca333 Can i merge this one ?


[02-Aug-19 09:36 AM] ca333#0333
i will review it later today - you can continue work based on your `dev` branch and just add another PR and so on..


[02-Aug-19 10:05 AM] Slyris#2880
Yeah


[02-Aug-19 10:06 AM] Slyris#2880
I take a short break I code already 10hours

{Reactions}
üëç 

[03-Aug-19 02:16 AM] dcprevere#1502
Who can answer the questions I have about the atmoicdex-api?


[03-Aug-19 02:17 AM] dcprevere#1502
I'm writing the order manager, so I need to know about the information we can receive about order statuses and executions and the like


[03-Aug-19 02:18 AM] Slyris#2880
On my side i'm writting some behavior driven test @ca333


[03-Aug-19 02:18 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/607140298619093002/Capture_decran_2019-08-03_a_11.18.28.png


[03-Aug-19 02:19 AM] Slyris#2880
@dcprevere I suggest you to write some BDD tests for the order manager too


[03-Aug-19 02:19 AM] Slyris#2880
It's will give an idea how the programm will work when we will do the real program


[03-Aug-19 02:22 AM] dcprevere#1502
Good idea, but I can't write BDD  tests until I have a better idea of the logic flow


[03-Aug-19 02:22 AM] dcprevere#1502
And the logic flow isn't clear until I know the API we're working with


[03-Aug-19 02:23 AM] Slyris#2880
Did you read the atomicDex api ?


[03-Aug-19 02:23 AM] Slyris#2880
https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html

{Embed}
https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html
DEX API | Komodo Documentation
Documentation for developers building on Komodo


[03-Aug-19 02:24 AM] dcprevere#1502
Brilliant!


[03-Aug-19 02:24 AM] dcprevere#1502
Thanks


[03-Aug-19 02:25 AM] Slyris#2880
https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html#order-status

{Embed}
https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html
DEX API | Komodo Documentation
Documentation for developers building on Komodo


[03-Aug-19 02:25 AM] Slyris#2880
Probably this


[03-Aug-19 02:25 AM] dcprevere#1502
Unless I'm mistaken that document isn't linked from anywhere in the readme


[03-Aug-19 02:25 AM] dcprevere#1502
The atmoicdex-api readme I mean


[03-Aug-19 02:26 AM] Slyris#2880
I dont know, usually when i want to read the doc of komodo i go on developers.komodoplatform.com


[03-Aug-19 02:26 AM] Slyris#2880
and i search for my need's


[03-Aug-19 02:26 AM] Slyris#2880
I dont read doc on github


[03-Aug-19 02:35 AM] dcprevere#1502
@artemciy_dice are you one of the MM devs?


[03-Aug-19 02:47 AM] artemciy_dice#0049
Hi, Deece. Guilty as charged.


[03-Aug-19 02:50 AM] dcprevere#1502
Great, I hope it's okay if I message you with questions as I come up with them


[03-Aug-19 02:51 AM] artemciy_dice#0049
@Slyris , I haven't used them myself, but there might be sufficient support for big numbers in C++ without libgmp, stuff like https://en.cppreference.com/w/cpp/header/ratio

{Embed}
https://en.cppreference.com/w/cpp/header/ratio
ratio


[03-Aug-19 02:53 AM] Slyris#2880
We cannot use ratio it's compile time only unfortunately


[03-Aug-19 02:54 AM] artemciy_dice#0049
Ah, jeesh.


[03-Aug-19 02:55 AM] Slyris#2880
But anyway for the moment we just don't use floating point


[03-Aug-19 02:55 AM] Slyris#2880
latter i can plan to use libgmp or smth similar


[03-Aug-19 02:55 AM] Slyris#2880
But usually i always try to avoid the external dependencies as maximum


[03-Aug-19 02:56 AM] Slyris#2880
especially with c++


[03-Aug-19 02:56 AM] artemciy_dice#0049
@dcprevere , I'm currently focused on a high priority project, plus I keep a narrow focus often regardless, might be best to try #mm_2_0 and/or #dev-marketmaker first, but feel free to ping me and Artem if you can't find the answer elsewhere.


[03-Aug-19 02:59 AM] artemciy_dice#0049
@Slyris , ditto! Watch out for price divisions, if you have them in the logic somewhere then you might need the rational numbers to represent the results without rounding.


[03-Aug-19 03:01 AM] Slyris#2880
@artemciy_dice Actually i find a solution without any rounding using string when i want to represent the number (to print it for example). It's probably not the most efficient way, but it's work really well.


[03-Aug-19 03:02 AM] Slyris#2880
@artemciy_dice If we have a problem with this part of code, i just have to refactor the function with another logic, but for the moment it's seem's ok for the minimal value product


[03-Aug-19 03:03 AM] Slyris#2880
```cpp
std::string get_price_as_string_decimal(const mmbot::config &cfg, const st_symbol &symbol, st_price price) noexcept
    {
        std::string price_str;
        price_str = std::to_string(price.value());
        auto process_functor = [](std::string &str, std::size_t factor) {
            while (str.size() < factor) {
                str.insert(0, "0");
            }
            str.insert(str.size() - factor, ".");
            if (str[0] == '.') {
                str.insert(0, "0");
            }
        };
        process_functor(price_str, cfg.base_ercs_registry.at(symbol.value()) ? 18u : 8u);
        return price_str;
    }

    st_price
    generate_st_price_from_api_price(const mmbot::config &cfg, const st_symbol &symbol, double price_api_value) noexcept
    {
        std::string price_str;
        price_str = fmt::format(cfg.base_ercs_registry.at(symbol.value()) ? "{:.18f}" : "{:.8f}", price_api_value);
        price_str.erase(std::find(price_str.begin(), price_str.end(), '.'));
        ltrim(price_str, "0");
        return st_price{std::stoull(price_str)};
    }
```

Basically now i have this


[03-Aug-19 03:05 AM] Slyris#2880
with 'ULLONG_MAX'  near  -> 18446744073709551615

We should handle most of the case right now


[03-Aug-19 03:06 AM] artemciy_dice#0049
Is this a JSON API, do you have a relevant API doc page at hand?


[03-Aug-19 03:06 AM] Slyris#2880
?


[03-Aug-19 03:06 AM] artemciy_dice#0049
Where is the `price_api_value` coming from?


[03-Aug-19 03:07 AM] Slyris#2880
https://api.coinpaprika.com/v1/price-converter for example


[03-Aug-19 03:07 AM] Slyris#2880
```cpp
{
"base_currency_id": "btc-bitcoin",
"base_currency_name": "Bitcoin",
"base_price_last_updated": "2019-02-26T13:32:39Z",
"quote_currency_id": "usd-us-dollars",
"quote_currency_name": "US Dollars",
"quote_price_last_updated": "2019-02-26T13:33:45Z",
"amount": 100,
"price": 386621.99158499995
}
```


[03-Aug-19 03:07 AM] Slyris#2880
for example


[03-Aug-19 03:09 AM] artemciy_dice#0049
This spells trouble. To handle it without errors you'd need to implement a custom JSON parser (or semi-parser, wrapping the incoming 386621.99158499995 in double quotes) and even if you do, there will be floating point rounding errors on the clients.


[03-Aug-19 03:09 AM] Slyris#2880
Coinmarketcap do exactly the same


[03-Aug-19 03:10 AM] Slyris#2880
and almost all api that i tried i think


[03-Aug-19 03:11 AM] artemciy_dice#0049
So what, there's a lot of broken software out there.


[03-Aug-19 03:11 AM] Slyris#2880
For doing this it's straight forward in our case


[03-Aug-19 03:11 AM] Slyris#2880
take the raw json


[03-Aug-19 03:11 AM] Slyris#2880
find position of "price":


[03-Aug-19 03:11 AM] Slyris#2880
find first position fo the number, insert a quote before


[03-Aug-19 03:11 AM] Slyris#2880
and a quote after


[03-Aug-19 03:11 AM] Slyris#2880
but


[03-Aug-19 03:12 AM] Slyris#2880
It's horrible.


[03-Aug-19 03:12 AM] Slyris#2880
If the api change their format i'm fcked


[03-Aug-19 03:13 AM] Slyris#2880
i believe i can split on ',' here


[03-Aug-19 03:13 AM] Slyris#2880
the raw string


[03-Aug-19 03:14 AM] artemciy_dice#0049
You really ought to change the API to accept strings. (JSON isn't strongly typed, you should be able to accept both strings and doubles. If the client software decides to use doubles, it's their problem perhaps).

I'm not suggesting you to hack the JSON format, there ought to be better approaches to this, adding doube quotes was just an example.


[03-Aug-19 03:14 AM] Slyris#2880
```cpp
if (response.code == 200) {
                auto resp_json = nlohmann::json::parse(response.body);
                auto price = generate_st_price_from_api_price(mmbot_config_, currency_pair.base.symbol, resp_json["price"].get<double>());
                return price;
            }
```

May be i can try to get a string here but i'm sure that the json library will throw


[03-Aug-19 03:16 AM] artemciy_dice#0049
Most JSON libraries will have a method allowing you to get the type of a field.


[03-Aug-19 03:17 AM] artemciy_dice#0049
(`assert(document["hello"].IsString());` at http://rapidjson.org/md_doc_tutorial.html#QueryValue, for example)


[03-Aug-19 03:17 AM] Slyris#2880
yeah


[03-Aug-19 03:17 AM] Slyris#2880
totally


[03-Aug-19 03:18 AM] Slyris#2880
// convenience type checkers
j.is_null();
j.is_boolean();
j.is_number();
j.is_object();
j.is_array();
j.is_string();


[03-Aug-19 03:18 AM] artemciy_dice#0049
Anyway, just my two cents. Good hunting!


[03-Aug-19 03:19 AM] Slyris#2880
https://github.com/nlohmann/json/issues/642

{Embed}
https://github.com/nlohmann/json/issues/642
Method to get string representations of values ¬∑ Issue #642 ¬∑ nl...
I&#39;ve come across occasions where I needed to &quot;stringify&quot; a single value. I know that there is dump() to serialize the whole object but it doesn&#39;t work as I would e...
https://images-ext-1.discordapp.net/external/UFy2WwCboiCNKr7wz7z0y8WnmxCgeU9v8OkF_QsjBB0/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/159488


[03-Aug-19 03:19 AM] Slyris#2880
üòÑ


[03-Aug-19 03:19 AM] Slyris#2880
yeah thank's


[03-Aug-19 03:23 AM] artemciy_dice#0049
> 642

In https://serde.rs/ you'd use a custom field deserializer for this.


[03-Aug-19 03:24 AM] Slyris#2880
It's working now


[03-Aug-19 03:24 AM] Slyris#2880
j["field"].dump();


[03-Aug-19 03:24 AM] Slyris#2880
and i get it as string


[03-Aug-19 03:25 AM] artemciy_dice#0049
Cool!


[03-Aug-19 03:32 AM] Slyris#2880
```cpp
st_price generate_st_price_from_api_price(std::string price_str) noexcept
    {
        price_str.erase(std::find(price_str.begin(), price_str.end(), '.'));
        ltrim(price_str, "0");
        return st_price{std::stoull(price_str)};
    }
```

üòÑ


[03-Aug-19 03:33 AM] Slyris#2880
@artemciy_dice Thank's for your suggestion i didn't think about the `dump()` functionnality


[03-Aug-19 03:34 AM] Slyris#2880
Now i totally removed floating point utilisation from the program.

{Reactions}
üëç 

[03-Aug-19 03:35 AM] Slyris#2880
i hope that unsigned long long will handle every possibility for ercs token/coins


[03-Aug-19 03:36 AM] Slyris#2880
Otherwise i will need something bigger


[03-Aug-19 03:43 AM] artemciy_dice#0049
Some clients might send you a value with a rounding error in it. Such value might utilize a *random* number of decimal places. https://en.bitcoin.it/wiki/Proper_Money_Handling_(JSON-RPC) actually proposes to use the rounding in an attempt *to correct* such values.

You might want to detect if the incoming value has a wrong number of decimal places and either reject it or, if the number of places is bigger than expected, maybe apply the commercial rounding to it.

And I believe that i64 is too small to hold a large sum with 18 decimal places.

{Embed}
https://en.bitcoin.it/wiki/Proper_Money_Handling_(JSON-RPC)
Proper Money Handling (JSON-RPC)


[03-Aug-19 03:45 AM] Slyris#2880
I can use int128 this is not a problem


[03-Aug-19 03:45 AM] Slyris#2880
I need to ask the coinpaprika api owner if they are sending wrong or good value


[03-Aug-19 03:46 AM] Slyris#2880
this was the first solution i was using...


[03-Aug-19 03:46 AM] Slyris#2880
int64_t JSONtoAmount(double value) {
    return (int64_t)(value * 1e8 + (value < 0.0 ? -.5 : .5));
}


[03-Aug-19 03:46 AM] Slyris#2880
But @ca333 Tell me we shouldn't use this one


[03-Aug-19 03:47 AM] artemciy_dice#0049
That is, if the client sends `"0.12345678"` (for a 8-decimals currency) then the value is probably precise and should be treated as such, but if the client sends `0.1234567982743654` then it probably has the rounding garbage at the end.


[03-Aug-19 03:47 AM] Slyris#2880
i was doing


[03-Aug-19 03:47 AM] Slyris#2880
```cpp
return static_cast<std::uint64_t>((price_api_value + g_rounding) * g_factor);
```


[03-Aug-19 03:48 AM] Slyris#2880
with gfactor being 1e8 for btc 1e18 for erc


[03-Aug-19 03:48 AM] artemciy_dice#0049
> But @ca333 Tell me we shouldn't use this one

That's because you should apply the rounding only if the value is already broken.
Otherwise you're doing more harm than good.
Plus you shouldn't use `double` for the rounding if you can help it.


[03-Aug-19 03:48 AM] Slyris#2880
with price_api_value as double, but now i'm just using string


[03-Aug-19 03:49 AM] Slyris#2880
Yeah so it's depends of the precision sended by the api


[03-Aug-19 03:49 AM] Slyris#2880
i will check for zil token for example


[03-Aug-19 03:52 AM] Slyris#2880
```json
"price":0.009230552388431228
```

So for this one is probably an error with the rounding ?


[03-Aug-19 03:52 AM] artemciy_dice#0049
Yep.


[03-Aug-19 03:52 AM] Slyris#2880
hmm


[03-Aug-19 03:52 AM] artemciy_dice#0049
Unless it's a 18-decimal currency.


[03-Aug-19 03:53 AM] Slyris#2880
so only for erc tokens ?


[03-Aug-19 03:53 AM] artemciy_dice#0049
Number of decimal places > then expected = signifies a rounding error.


[03-Aug-19 03:53 AM] Slyris#2880
but for this one


[03-Aug-19 03:53 AM] Slyris#2880
i was expecting 18 decimal


[03-Aug-19 03:53 AM] Slyris#2880
because it's an erc token


[03-Aug-19 03:54 AM] artemciy_dice#0049
There is no error then.


[03-Aug-19 03:54 AM] Slyris#2880
ok so for coinpaprika api, i will not have error like that


[03-Aug-19 03:54 AM] Slyris#2880
they always send the good number of decimal


[03-Aug-19 03:54 AM] Slyris#2880
8 for regular coins, 18 for erc


[03-Aug-19 03:55 AM] Slyris#2880
but i think i will need an int128 yes


[03-Aug-19 03:55 AM] artemciy_dice#0049
You can't guess from a single example, some values can fit into a `double` without rounding, others can't.


[03-Aug-19 03:55 AM] artemciy_dice#0049
If the client software uses `double` internally, there will be rounding errors now and then.
And it depends also on how the JSON serialization formats the `double`s, there may be a rounding error on the client side but the serialization library might decide to round the number when serializing it to JSON, hiding the extra decimals from us. Whether this would affect the price is anyone's guess.


[03-Aug-19 04:02 AM] artemciy_dice#0049
Neither we should assume that coinpaprika implementation will be the same over the years, nor that it behaves uniformely in all cases. If you don't want to spend cycles on non-double rounding at present then there's an option of checking for the number of decimal places and returning an error if it is too big.


[03-Aug-19 04:12 AM] Slyris#2880
ok


[03-Aug-19 04:14 AM] Slyris#2880
Thank's for the additional information @artemciy_dice


[03-Aug-19 04:19 AM] Slyris#2880
My guess is that internally coinpaprika uses a libray that handles all that sort of thing and writes in the json probably value without error. But I will still do a lot of additional tests as time goes by to be sure


[03-Aug-19 04:31 AM] artemciy_dice#0049
More likely they don't care about precision.


[03-Aug-19 04:31 AM] artemciy_dice#0049
And if they really *do* print precise numbers as a JSON `number` (instead of a JSON `string`) then it's an engineering blunder:

"*A JSON number such as 1E400 or 3.141592653589793238462643383279 may indicate potential interoperability problems, since it suggests that the software that created it expects receiving software to have greater capabilities for numeric magnitude and precision than is widely available*" - https://stackoverflow.com/a/39681707/257568

{Embed}
https://stackoverflow.com/a/39681707/257568
JSON integers: limit on size
Is it specified anywhere how big JSON integers can be? I'm guessing that they're limited to normal (32 bit) ints, but I can't find anywhere that that's written down. I need to encode identifiers th...
https://images-ext-1.discordapp.net/external/dP07hBXxuorGcvXU609uJ_e6ZgPlIdBxqG8OjQQiAyY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon%402.png


[03-Aug-19 04:34 AM] Slyris#2880
That's a mess


[03-Aug-19 04:36 AM] Slyris#2880
https://coinmarketcap.com/api/documentation/v1/#tag/tools @artemciy_dice Exactly the same... üò¢


[03-Aug-19 04:37 AM] artemciy_dice#0049
It's a young field.   D


[03-Aug-19 04:37 AM] Slyris#2880
I think that there is a lot of exchange broken then...


[03-Aug-19 04:37 AM] Slyris#2880
Coinbase is using coinmarketcap api for almost everything


[03-Aug-19 04:42 AM] artemciy_dice#0049
My take is that these prices are market approximations anyway, my guess is that we're mostly concerned with parsing these prices in a precise manner in order not to introduce subtle price disagreements between the parts of our ecosystem.


[03-Aug-19 04:43 AM] artemciy_dice#0049
Plus we don't want ~~the extra bug reports from~~ to let down our clients.  p


[03-Aug-19 09:22 AM] Slyris#2880
@ca333 It's seems that when i ask KMD/ETH from coinpaprika i got 18 decimal, but ETH is the mother of all erc crypto, it's should be 18 or 8 decimal ?


[03-Aug-19 09:22 AM] Slyris#2880
or if someone else can answer


[03-Aug-19 10:14 AM] artemciy_dice#0049
https://github.com/KomodoPlatform/atomicDEX-API/blob/9fa9a450a5c002b26f47c4bdd9a9ad90437a1c39/mm2src/coins/utxo.rs#L166 ;
https://github.com/KomodoPlatform/atomicDEX-API/blob/9fa9a450a5c002b26f47c4bdd9a9ad90437a1c39/mm2src/coins/eth.rs#L1885 ;
https://github.com/jl777/coins/blob/0a2006d802c9071c7fce7f5b3244f09e4bc99d7d/coins#L955 ;
just my two cents

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/9fa9a450a5c002b26f47c4bdd9a9ad90437a1c39/mm2src/coins/utxo.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/9fa9a450a5c002b26f47c4bdd9a9ad90437a1c39/mm2src/coins/eth.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Embed}
https://github.com/jl777/coins/blob/0a2006d802c9071c7fce7f5b3244f09e4bc99d7d/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[03-Aug-19 10:19 AM] Slyris#2880
yes but all coins doesn't have the field decimal @artemciy_dice such has erc20 and regular coins


[03-Aug-19 10:19 AM] Slyris#2880
that's means 18 for 'erc' , 8 for regular coins, and 'decimals field" for others ?


[03-Aug-19 10:21 AM] Slyris#2880
And ethereum seems to be 18 decimal but i didnt see this information anywhere


[03-Aug-19 10:22 AM] Slyris#2880
(im using the file from jl777 already)


[03-Aug-19 10:24 AM] artemciy_dice#0049
"*An ERC-20 token contract is defined by the contract‚Äôs address and the total supply of tokens available to it, but has a number of optional items that are usually provided as well to provide more detail to users. These are the token‚Äôs name, its symbol, and the number of decimals. Each of these is covered in detail below.*" - https://medium.com/@jgm.orinoco/understanding-erc-20-token-contracts-a809a7310aa5

{Embed}
https://medium.com/@jgm.orinoco/understanding-erc-20-token-contracts-a809a7310aa5
Understanding ERC-20 token contracts
Looking at Ethereum tokens and explaining the features and functions of ERC-20 to provide an understanding of token contracts.
https://images-ext-1.discordapp.net/external/bp6yr1wTOpwKV-qH_chKEN5uA5pZZqZPntdrdXzk0DY/https/miro.medium.com/max/1200/1%2AuGKRCmddZWOmhOjKlbmpGg.png


[03-Aug-19 10:25 AM] Slyris#2880
great


[03-Aug-19 11:05 AM] Slyris#2880
```cpp
//! 0.0000972439793401814 and BTC return -> 9724.3979340181400000000 -> 97243979340181400000000 (> ULLONG_MAX) (kmd/btc)

//! ULLONG_MAX -> 18,446,744,073,709,551,616
//!  -> 97,243,979,340,181,400,000,000
```

So anyway i will need bigger int like 128 minimal


[03-Aug-19 12:03 PM] artemciy_dice#0049
Going as planned? Want to take any shortcuts?


[03-Aug-19 12:39 PM] Slyris#2880
@artemciy_dice I think i can do something using only string and very long integer (uint128_t)


[03-Aug-19 12:45 PM] artemciy_dice#0049
Sounds exciting. Maybe I'd learn a thing or two, we're dealing wih prices as well.


[03-Aug-19 01:09 PM] Slyris#2880
Something like


[03-Aug-19 01:09 PM] Slyris#2880
```cpp
std::string Uint128ToFormattedString(uint128 v, std::ios_base::fmtflags flags) {
  // Select a divisor which is the largest power of the base < 2^64.
  uint128 div;
  int div_base_log;
  switch (flags & std::ios::basefield) {
    case std::ios::hex:
      div = 0x1000000000000000;  // 16^15
      div_base_log = 15;
      break;
    case std::ios::oct:
      div = 01000000000000000000000;  // 8^21
      div_base_log = 21;
      break;
    default:  // std::ios::dec
      div = 10000000000000000000u;  // 10^19
      div_base_log = 19;
      break;
  }

  // Now piece together the uint128 representation from three chunks of the
  // original value, each less than "div" and therefore representable as a
  // uint64_t.
  std::ostringstream os;
  std::ios_base::fmtflags copy_mask =
      std::ios::basefield | std::ios::showbase | std::ios::uppercase;
  os.setf(flags & copy_mask, copy_mask);
  uint128 high = v;
  uint128 low;
  DivModImpl(high, div, &high, &low);
  uint128 mid;
  DivModImpl(high, div, &high, &mid);
  if (Uint128Low64(high) != 0) {
    os << Uint128Low64(high);
    os << std::noshowbase << std::setfill('0') << std::setw(div_base_log);
    os << Uint128Low64(mid);
    os << std::setw(div_base_log);
  } else if (Uint128Low64(mid) != 0) {
    os << Uint128Low64(mid);
    os << std::noshowbase << std::setfill('0') << std::setw(div_base_log);
  }
  os << Uint128Low64(low);
  return os.str();
}
```


[03-Aug-19 01:09 PM] Slyris#2880
@artemciy_dice


[03-Aug-19 01:11 PM] Slyris#2880
The problem is from a string to an uint128_t


[03-Aug-19 01:11 PM] Slyris#2880
that's more tricky


[03-Aug-19 01:11 PM] Slyris#2880
we can also


[03-Aug-19 01:11 PM] Slyris#2880
```cpp
std::string uint128ToString(const uint128_t& value)
{
    std::string result;
    result.reserve( 40 ); // max. 40 digits possible ( uint64_t has 20) 
    uint128_t helper = value;

    do {
        result += charmap[ helper % 10 ];
        helper /= 10;
    } while ( helper );
    std::reverse( result.begin(), result.end() );
    return result;
}
```


[03-Aug-19 01:12 PM] Slyris#2880
```cpp
int64_t high = <first digits of the number>;
uint64_t low = <last digits of the number>;
uint128_t number = ((uint128_t)1000000000000 * high) + low;
```


[03-Aug-19 01:12 PM] Slyris#2880
So


[03-Aug-19 01:12 PM] Slyris#2880
i should probably take 20 first digits


[03-Aug-19 01:12 PM] Slyris#2880
if len > 20


[03-Aug-19 01:13 PM] Slyris#2880
ok i got it i think


[03-Aug-19 02:24 PM] Slyris#2880
When it's fiat (EUR or USD)  it"s how much decimal @artemciy_dice  or @jl777c  ? 8?


[03-Aug-19 02:26 PM] jl777c#5810
i think 2 decimals


[03-Aug-19 02:29 PM] Slyris#2880
Oki


[03-Aug-19 02:30 PM] Slyris#2880
May be 3 for cents no @jl777c


[03-Aug-19 02:30 PM] Slyris#2880
1.001 euros for example


[03-Aug-19 02:32 PM] jl777c#5810
in forex it is usually 6 digits for prices


[03-Aug-19 02:32 PM] jl777c#5810
but account balances are kept to the 0.01


[03-Aug-19 02:32 PM] Slyris#2880
Oki I will do 2 for the moment


[03-Aug-19 02:32 PM] Slyris#2880
So if we send me


[03-Aug-19 02:33 PM] Slyris#2880
0.92222222 euros it's will be 0.92


[03-Aug-19 02:33 PM] Slyris#2880
And then the factor will be 100


[03-Aug-19 02:33 PM] Slyris#2880
So we will obtain 92 as integer


[03-Aug-19 02:33 PM] jl777c#5810
i guess for our stablecoin it will be 8 digits though...


[03-Aug-19 02:34 PM] Slyris#2880
Yes I didn't count it as fiat


[03-Aug-19 02:34 PM] Slyris#2880
Because im using your coins file which doesn't have any fiat


[03-Aug-19 02:35 PM] Slyris#2880
So I need to add them additionally in my code


[03-Aug-19 03:25 PM] Slyris#2880
again on question if i got "0.0000972439793401814" from an api with a quote as 'BTC' i should interpret it as : "0.00009724" alright ? (8 decimal)

{Reactions}
‚úÖ 

[03-Aug-19 03:27 PM] Slyris#2880
on binance the number maximal of decimal are 7 i think it's ok


[03-Aug-19 03:36 PM] hyperDEX#6586
If we are building an arb bot, should it be pointing to the exchange APi to get price directly instead of going through an aggregator like coinmarketcap?


[03-Aug-19 03:38 PM] hyperDEX#6586
Say price on Binance is x price but someone pumped that pair on some random exchange inflating the average price by say 20%.


[03-Aug-19 03:38 PM] Slyris#2880
@cipi :

`can't we rely solely on the APIs of the price providers (coinpaprika, coingecko and so on) for the price calculation, instead of doing it ourselves? The advantage is that they also take the volume into account, so that small volume exchanges don't distort the price calculation. Else i could manipulate the price by doing a trade on a small volume exchange`


[03-Aug-19 03:38 PM] Slyris#2880
@hyperDEX


[03-Aug-19 03:38 PM] hyperDEX#6586
üòÉ cool


[03-Aug-19 03:38 PM] Slyris#2880
Cipi write this few day's ago idk if you read it


[03-Aug-19 03:39 PM] hyperDEX#6586
I missed it sorry


[03-Aug-19 03:39 PM] Slyris#2880
By the way


[03-Aug-19 03:39 PM] Slyris#2880
https://github.com/EOSIO/eosio.cdt this library from EOS is insane...

{Embed}
https://github.com/EOSIO/eosio.cdt
EOSIO/eosio.cdt
EOSIO.CDT (Contract Development Toolkit) is a suite of tools used to build EOSIO contracts - EOSIO/eosio.cdt
https://images-ext-1.discordapp.net/external/DNAVaE8YmJFEgl1gk9ndaXzQUvKw-wjSe94g5BIgHzI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/26932212


[03-Aug-19 03:39 PM] hyperDEX#6586
Plus if i input my Binance API keys, i would only care about arbing against Binance so prices on other exchanges means nothing.


[03-Aug-19 04:03 PM] ca333#0333
`again on question if i got "0.0000972439793401814" from an api with a quote as 'BTC' i should interpret it as : "0.00009724" alright ? (8 decimal)` Yes - however, you should really never get such a value for a BTC based coin since its widely known that a satoshi is 10^-8


[03-Aug-19 04:07 PM] Slyris#2880
@ca333 great


[03-Aug-19 04:13 PM] Slyris#2880
@ca333 Should i remove trailling zero at the end ?


[03-Aug-19 04:14 PM] Slyris#2880
like if we got something like  '1.15000000' is literally '1.15'


[03-Aug-19 04:25 PM] ca333#0333
mathematically it does not have an effect on the arithmetic operations - but visually i believe it sort of looks 'better' with the zeros. i.e. if i was an external dev and the makerbot-API returned me such numbers it would feel more "precise" and consistent. (vs. 1.15, 1.4424, 1.984934, ...)


[03-Aug-19 04:25 PM] Slyris#2880
Great i keep the zero


[03-Aug-19 04:26 PM] Slyris#2880
Look my work so far at the moment:


[03-Aug-19 04:26 PM] Slyris#2880
```cpp
std::string format_str_api_price(const mmbot::config &cfg, const st_symbol &symbol, std::string price_str)
    {
        auto nb_decimal = static_cast<int>(cfg.base_ercs_registry.at(symbol.value()));
        auto after_decimal_str = price_str.substr(price_str.find('.') + 1, price_str.size());
        if (static_cast<int>(after_decimal_str.size()) > nb_decimal) {
            price_str = price_str.substr(0, price_str.find('.') + nb_decimal + 1);
        } else {
            int missing_zero = nb_decimal - static_cast<int>(after_decimal_str.size());
            for (; missing_zero > 0; --missing_zero) {
                price_str += '0';
            }
        }
        if (auto pos = price_str.find('.'); pos != std::string::npos) {
            //! use std::rotate lol ?
            price_str += '*';
            std::iter_swap(price_str.begin() + pos, price_str.begin() + (price_str.size() - 1));
            price_str.erase(pos, 1);
            price_str.pop_back();
        }
        ltrim(price_str, "0");
        return price_str;
    }
```


[03-Aug-19 04:27 PM] Slyris#2880
And with this i litteraly handle all the case i think for the moment


[03-Aug-19 04:27 PM] ca333#0333
does API response sometimes lack the zeros?


[03-Aug-19 04:29 PM] Slyris#2880
Totally.


[03-Aug-19 04:29 PM] Slyris#2880
for example sometimes they send back


[03-Aug-19 04:29 PM] Slyris#2880
'1.15'


[03-Aug-19 04:29 PM] Slyris#2880
i adjust to 1.15000000


[03-Aug-19 04:30 PM] Slyris#2880
i adjust to the number of decimals from base_ercs_registry


[03-Aug-19 04:30 PM] Slyris#2880
which is bad named


[03-Aug-19 04:30 PM] Slyris#2880
but this registry contains the number of decimals for each coin


[03-Aug-19 04:30 PM] Slyris#2880
including fiat.


[03-Aug-19 04:30 PM] Slyris#2880
If there is some missing zero, i add them.


[03-Aug-19 04:34 PM] Slyris#2880
```cpp
TEST_CASE("antara price format bitcoin normal price")
    {
        auto cfg = mmbot::load_mmbot_config(std::filesystem::current_path() / "assets", "mmbot_config.json");

        auto formatted_price = format_str_api_price(cfg, st_symbol{"BTC"}, "1.15000000");
        CHECK_EQ("115000000", formatted_price);
        CHECK_EQ("1.15000000", unformat_str_to_representation_price(cfg, st_symbol{"BTC"}, formatted_price));

        formatted_price = format_str_api_price(cfg, st_symbol{"BTC"}, "1.15");
        CHECK_EQ("115000000", formatted_price);

        formatted_price = format_str_api_price(cfg, st_symbol{"BTC"}, "100000.15");
        CHECK_EQ("10000015000000", formatted_price);
        CHECK_EQ("100000.15000000", unformat_str_to_representation_price(cfg, st_symbol{"BTC"}, formatted_price));
    }
```


[03-Aug-19 04:34 PM] Slyris#2880
For example ^


[03-Aug-19 04:37 PM] Slyris#2880
```cpp
TEST_CASE("antara price as string decimal with normal coin lot of decimals")
    {
        auto cfg = mmbot::load_mmbot_config(std::filesystem::current_path() / "assets", "mmbot_config.json");
        auto formatted_price = format_str_api_price(cfg, st_symbol{"BTC"}, "0.0000972439793401814");
        CHECK_EQ("9724", formatted_price);
        formatted_price = format_str_api_price(cfg, st_symbol{"BTC"}, "0.00009724");
        CHECK_EQ("9724", formatted_price);
    }
```

^


[03-Aug-19 04:37 PM] Slyris#2880
This is example is what happened is the pair KMD / BTC coinpaprika return: "0.0000972439793401814"


[03-Aug-19 04:37 PM] Slyris#2880
that's why i ask for truncate


[03-Aug-19 04:38 PM] Slyris#2880
Fun fact is 19 decimal not 18 for this one


[03-Aug-19 04:38 PM] Slyris#2880
https://api.coinpaprika.com/v1/price-converter?base_currency_id=kmd-komodo&quote_currency_id=btc-bitcoin&amount=1


[03-Aug-19 04:41 PM] ca333#0333
`base_ercs_registry [...] which is bad named [...] but this registry contains the number of decimals for each coin` - `for each coin`, so you mean not only ERCs?


[03-Aug-19 04:41 PM] Slyris#2880
yeah


[03-Aug-19 04:41 PM] Slyris#2880
all coins


[03-Aug-19 04:41 PM] Slyris#2880
is like coins_decimal_registry


[03-Aug-19 04:41 PM] ca333#0333
and it contains only the precision information?


[03-Aug-19 04:41 PM] Slyris#2880
yeah


[03-Aug-19 04:41 PM] ca333#0333
this reg


[03-Aug-19 04:41 PM] ca333#0333
why not put this info in the coin config?


[03-Aug-19 04:41 PM] Slyris#2880
before it"s was a map of bool


[03-Aug-19 04:41 PM] Slyris#2880
It"s in the coin config


[03-Aug-19 04:42 PM] Slyris#2880
i take this information from the config


[03-Aug-19 04:43 PM] Slyris#2880
It"s just represented as map in the program.


[03-Aug-19 04:43 PM] Slyris#2880
i fetch the information from jl777 coins json


[03-Aug-19 04:44 PM] ca333#0333
`base_precision_registry` or `base_fraction_registry` would be more clear


[03-Aug-19 04:45 PM] ca333#0333
what does the `ercs` stand for?


[03-Aug-19 04:45 PM] Slyris#2880
it"s was a map of bool before


[03-Aug-19 04:45 PM] Slyris#2880
to know if it"s was an erc coin or a regular coin


[03-Aug-19 04:46 PM] Slyris#2880
it's even a precision_registry


[03-Aug-19 04:46 PM] ca333#0333
ok - i assume it will be renamed in the coming PR


[03-Aug-19 04:47 PM] Slyris#2880
y

{Reactions}
üëç 

[03-Aug-19 04:47 PM] Slyris#2880
pushing it in few minutes


[03-Aug-19 04:47 PM] ca333#0333
yea precision is good - even decimal or fraction would signalise what it does


[03-Aug-19 04:48 PM] Slyris#2880
Done


[03-Aug-19 04:48 PM] Slyris#2880
pushed.


[03-Aug-19 04:49 PM] Slyris#2880
It's still in the same pr as before @ca333

{Reactions}
üëç 

[03-Aug-19 05:47 PM] Slyris#2880
@ca333 ITS WORKIIIIING


[03-Aug-19 05:47 PM] Slyris#2880
@artemciy_dice i did it


[03-Aug-19 05:48 PM] Slyris#2880
from_api_price:

```cpp
st_price
    generate_st_price_from_api_price(const mmbot::config &cfg, const st_symbol &symbol, std::string price_str) noexcept
    {
        price_str = format_str_api_price(cfg, symbol, price_str);
        if (price_str.length() <= 20) {
            return st_price{std::stoull(price_str)};
        }

        absl::uint128 value = std::stoull(price_str.substr(0, 20));
        auto low_str = price_str.substr(20);
        for (std::size_t i = 0; i < low_str.size(); ++i) {
            value *= 10;
        }
        value += std::stoull(low_str);
        return st_price{value};
    }
```


[03-Aug-19 05:48 PM] Slyris#2880
and the conversion for representing: 
```cpp
std::string get_price_as_string_decimal(const mmbot::config &cfg, const st_symbol &symbol, st_price price) noexcept
    {
        std::stringstream ss;
        ss << price.value();
        std::string price_str;
        ss >> price_str;
        return unformat_str_to_representation_price(cfg, symbol, price_str);
    }
```


[03-Aug-19 05:48 PM] Slyris#2880
```cpp
 TEST_CASE("antara price with more than 20 digits")
    {
        auto cfg = mmbot::load_mmbot_config(std::filesystem::current_path() / "assets", "mmbot_config.json");
        auto price = generate_st_price_from_api_price(cfg, st_symbol{"ZIL"}, "12345678.010089534999123456");
        CHECK_EQ("12345678.010089534999123456", get_price_as_string_decimal(cfg, st_symbol{"ZIL"}, price));
        price = generate_st_price_from_api_price(cfg, st_symbol{"ZIL"}, "12345678.010089534999000000");
        CHECK_EQ("12345678.010089534999000000", get_price_as_string_decimal(cfg, st_symbol{"ZIL"}, price));
    }
```


[03-Aug-19 07:35 PM] artemciy_dice#0049
Wow! Congratz!


[03-Aug-19 07:37 PM] artemciy_dice#0049
`> This is example is what happened is the pair KMD / BTC coinpaprika return: "0.0000972439793401814"`

So this kind of confirms that coinpaprika gives us a `double` with random rounding errors in it?


[03-Aug-19 07:57 PM] artemciy_dice#0049
I might share how I see things so far.

With the code above it looks like we only have the *precise* parsing; if we get a price which is *not precise*, we sort of treat it as *precise* but *truncate* any extra decimal places from it.

The best logic might be to treat the price as *precise* when it comes as a *JSON string* and to treat it as *inprecise* when it comes as a *JSON number* (because it is unlikely that a JSON number is precise, see https://stackoverflow.com/a/39681707/257568).
Precise price should be treated as such.
Inprecise price can be *rounded* as https://en.bitcoin.it/wiki/Proper_Money_Handling_(JSON-RPC) suggests. This is because the rounding, for currencies with a small enough amount of decimal places (like 8), gives us a better chance of getting the original price
(for example, 2090.5 * 8.61 is imprecisely 17999.204999999998, but rounded to 8 decimal places it becomes the correct 17999.205).
( To be on the safe side, and because we have coins with a large amount of decimal places, we might want to use non-`double` rounding for this, cf. https://github.com/KomodoPlatform/atomicDEX-API/blob/9fa9a450a5c002b26f47c4bdd9a9ad90437a1c39/mm2src/common/common.rs#L1059 )

coinpaprika only gives us the *inpreceise* JSON number price at the moment, but we should probably be prepared for this to change (for when we get the price from different sources, or for when the coinpaprika is fixed considering the present state of their API might be seen as a bug).

On the other hand, truncating the price might be a reasonable and const-effective "good enough" solution.

{Embed}
https://stackoverflow.com/a/39681707/257568).
JSON integers: limit on size
Is it specified anywhere how big JSON integers can be? I'm guessing that they're limited to normal (32 bit) ints, but I can't find anywhere that that's written down. I need to encode identifiers th...
https://images-ext-1.discordapp.net/external/dP07hBXxuorGcvXU609uJ_e6ZgPlIdBxqG8OjQQiAyY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon%402.png

{Embed}
https://en.bitcoin.it/wiki/Proper_Money_Handling_(JSON-RPC)
Proper Money Handling (JSON-RPC)

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/9fa9a450a5c002b26f47c4bdd9a9ad90437a1c39/mm2src/common/common.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
üíØ 

[03-Aug-19 09:45 PM] Slyris#2880
https://stackoverflow.com/questions/1083304/c-c-counting-the-number-of-decimals

{Embed}
https://stackoverflow.com/questions/1083304/c-c-counting-the-number-of-decimals
C/C++ counting the number of decimals?
Lets say that input from the user is a decimal number, ex. 5.2155 (having 4 decimal digits). It can be stored freely (int,double) etc.

Is there any clever (or very simple) way to find out how many
https://images-ext-1.discordapp.net/external/dP07hBXxuorGcvXU609uJ_e6ZgPlIdBxqG8OjQQiAyY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon%402.png


[03-Aug-19 09:51 PM] Slyris#2880
@artemciy_dice I'm surprising that you have to trick like this in rust because


[03-Aug-19 09:51 PM] Slyris#2880
in c++ for example


[03-Aug-19 09:51 PM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/607435361085292565/Capture_decran_2019-08-04_a_06.50.38.png


[03-Aug-19 09:51 PM] Slyris#2880
the format library do the correct rounding if im following you


[03-Aug-19 09:58 PM] artemciy_dice#0049
> in c++ for example

This c++ example is like dousing fire with fuel, we don't want to round with the `double` formatting because we have coins with a large number of decimal places, way more than `double` can safely carry.


[03-Aug-19 10:13 PM] Slyris#2880
@artemciy_dice A double can handle 1053 digits no ?


[03-Aug-19 10:13 PM] Slyris#2880
int max_digits = 3 + DBL_MANT_DIG - DBL_MIN_EXP


[03-Aug-19 10:14 PM] Slyris#2880
For a 64-bit IEEE double, we have

DBL_MANT_DIG = 53
DBL_MIN_EXP = -1023
max_digits = 3 + 53 - (-1023) = 1079


[03-Aug-19 10:16 PM] Slyris#2880
(long double seem's to have more)


[03-Aug-19 10:16 PM] artemciy_dice#0049
Sure, a `double` can handle a lot of decimal places if you don't mind the loss of decimal precision resulting from the binary fractions. When you're working with decimal prices, however, the loss of precision is undesirable and you should scratch `double` out from your vocabulary.


[03-Aug-19 10:17 PM] Slyris#2880
Yeah but we need atleast one time to take the double value to convert it as a string


[03-Aug-19 10:17 PM] Slyris#2880
such as the example from coinpaprika


[03-Aug-19 10:18 PM] artemciy_dice#0049
https://github.com/KomodoPlatform/atomicDEX-API/blob/9fa9a450a5c002b26f47c4bdd9a9ad90437a1c39/mm2src/common/common.rs#L1059 proves that we don't

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/9fa9a450a5c002b26f47c4bdd9a9ad90437a1c39/mm2src/common/common.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[03-Aug-19 10:18 PM] Slyris#2880
bd BigDecimal, is  a string ?


[03-Aug-19 10:18 PM] artemciy_dice#0049
Yes


[03-Aug-19 10:19 PM] Slyris#2880
you rtrim the zero on the right first alright ?


[03-Aug-19 10:19 PM] artemciy_dice#0049
Eh?


[03-Aug-19 10:20 PM] Slyris#2880
rtrim is removing trailing char on the right


[03-Aug-19 10:20 PM] Slyris#2880
```rust
String::from (without_trailing_zeroes (&bds, dot))
```


[03-Aug-19 10:21 PM] artemciy_dice#0049
I remove the trailing zeroes. `trim` typically removes unprintable ascii characters.


[03-Aug-19 10:21 PM] Slyris#2880
is look like you do like an grisu algorithm


[03-Aug-19 10:21 PM] Slyris#2880
forme


[03-Aug-19 10:22 PM] Slyris#2880
is look like you do like an grisu algorithm


[03-Aug-19 10:23 PM] artemciy_dice#0049
Are you suggesting to optimize the bigdecimal rounding? Why?


[03-Aug-19 10:24 PM] Slyris#2880
im not saying that i just read this morning the fmt algorithm to convert the double exact value as a string


[03-Aug-19 10:25 PM] artemciy_dice#0049
bigdecimal is not double


[03-Aug-19 10:25 PM] Slyris#2880
yeah it's  a string


[03-Aug-19 10:26 PM] Slyris#2880
that's why im looking at it


[03-Aug-19 10:26 PM] Slyris#2880
im just bad at rust


[03-Aug-19 10:29 PM] artemciy_dice#0049
```
    let bds = format! ("{}", bd);
```
will give you a precise decimal price as a string, how `BigDecimal` is implemented is irrelevant


[03-Aug-19 10:32 PM] Slyris#2880
https://github.com/DesarrollosCuado/BCMath-for-Cpp/blob/master/bcmath_stl.cpp#L137


[03-Aug-19 10:32 PM] Slyris#2880
https://github.com/DesarrollosCuado/BCMath-for-Cpp


[03-Aug-19 10:32 PM] Slyris#2880
@artemciy_dice  This is cool no ?


[03-Aug-19 10:33 PM] Slyris#2880
https://github.com/DesarrollosCuado/BCMath-for-Cpp#code-test-stl-c @artemciy_dice I can probably use this

{Embed}
https://github.com/DesarrollosCuado/BCMath-for-Cpp
DesarrollosCuado/BCMath-for-Cpp
BC-Math Adapted to Qt and STL C++. Contribute to DesarrollosCuado/BCMath-for-Cpp development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/EFqFe-f0w_-e3BOPwg8A2G0eT5dOlHrcZ_RqRhyfMFQ/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/6945129


[03-Aug-19 10:38 PM] Slyris#2880
That's seem's really convenient


[03-Aug-19 10:38 PM] artemciy_dice#0049
C++ interface to GMP is more traditional and battle-proven approach I think, and the number of stars on that PHP port is suspiciously low, but if it does the job then sure!


[03-Aug-19 10:42 PM] Slyris#2880
i will try it i think


[03-Aug-19 10:42 PM] Slyris#2880
and write some unit tests


[03-Aug-19 10:43 PM] artemciy_dice#0049
Cool!


[03-Aug-19 10:44 PM] Slyris#2880
@artemciy_dice In any case, thank you very much for your precious help and all your comments. it gives me a better understanding of the work environment.


[03-Aug-19 10:45 PM] artemciy_dice#0049
YW!

{Reactions}
üíö 

[04-Aug-19 01:10 AM] Slyris#2880
hello @dcprevere


[04-Aug-19 01:26 AM] dcprevere#1502
Hi @Slyris

{Reactions}
üññ 

[04-Aug-19 02:32 AM] Slyris#2880
@dcprevere I commented my pull request for you


[04-Aug-19 02:32 AM] Slyris#2880
@dcprevere You need to some change on it i thank


[04-Aug-19 02:38 AM] dcprevere#1502
You mean I need to merge and fix the conflict?


[04-Aug-19 02:39 AM] dcprevere#1502
I see you made some changes to the strategy manager


[04-Aug-19 02:40 AM] dcprevere#1502
Because the price type has changed, right?


[04-Aug-19 05:26 AM] Slyris#2880
@dcprevere Yep


[04-Aug-19 05:26 AM] Slyris#2880
I commented some of your unit tests and operation


[04-Aug-19 05:26 AM] Slyris#2880
because it's was not compiling anymore


[05-Aug-19 03:42 AM] dcprevere#1502
Sorry, couldn't talk for most of today


[05-Aug-19 03:43 AM] dcprevere#1502
I was flying, then a crash corrupted my git repo and broke my firefox


[05-Aug-19 03:43 AM] dcprevere#1502
Just got it all sorted now


[05-Aug-19 03:43 AM] dcprevere#1502
I will merge as soon as my build works again


[05-Aug-19 05:59 AM] Slyris#2880
@dcprevere seem's to not compile windows because you are comparing with an operator == without .value() with underlying type string probably


[05-Aug-19 12:31 PM] Slyris#2880 (pinned)
All advance very well on the project, @dcprevere  is still on the `order` part, and me on my side I finished the first call api + the management of the `floating numbers` in a correct way. I am very happy with the result. The first call API allows you to recover a median price based on a currency base and a quote currency. The project is currently testing with about fifteen different configurations. **Windows**,  **Linux** ,  **OSX**, **Debug**, **Release**, **UBSAN**, **TSAN**, **clang**, **gcc**, **ASAN**, **msvc**, **ninja**. The entire project is currently coded with the **TDD** philosophy. We try to cut each part that @TS  gave us in very small entities easily testable. The project is currently coding in **C++ 17** with a certain number of dependencies that should be checked with rigor. I try to guide at best whoever would like to participate in the project in a pedagogic  and practical way. If you have questions do not hesitate, I would try to justify my choices, I try to leave nothing ambiguous or spurious. For architecture it is a simple **http server** on which anyone can call and glue a `GUI`

{Reactions}
üëç (6) 

[05-Aug-19 12:36 PM] Slyris#2880
For testers who would like to participate, the unit tests produce very clear reports, and readable with each pull request, which allows to identify more clearly the bugs, there is an example: https://github.com/KomodoPlatform/antara-makerbot/pull/14/checks?check_run_id=185406178

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/pull/14/checks?check_run_id=185406178
feat(order-manager): add an order manager to place and track order...
The Order Manager will track the status of orders on the DEX exchange.
It accepts orders from the strategy manager (and possible even manually placed orders).
And put them on the exchange using the...
https://images-ext-1.discordapp.net/external/EaeQ6YKfzVdNry6H7Ffb18UYrT5DRQV36VXnlj2vCg4/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/10855272


[05-Aug-19 12:38 PM] Slyris#2880
For those who would ask the question of why the project is testing with so many different configurations, it is simply that **C++** is a complex and capricious language, if scripts can allow us to identify problems even before they appear. in production it will be great. And even if that happens, we'll have a clearer idea of ‚Äã‚Äãhow to target and fix the bug.


[05-Aug-19 12:47 PM] Slyris#2880
Pinned a message.


[05-Aug-19 09:19 PM] dcprevere#1502
I found the culprit. I gave `st_order_id` the `arithmetic` trait. But taking it away means that it cannot be used as a key type.


[05-Aug-19 09:20 PM] dcprevere#1502
For the time being, I will change the key type to string but we should look at getting this fixed.


[05-Aug-19 09:31 PM] dcprevere#1502
I've created an issue: https://github.com/doom/strong_type/issues/2

{Embed}
https://github.com/doom/strong_type/issues/2
`arithmetic` is not an allowed trait for strings on Windows ¬∑ Iss...
Adding the arithmetic trait for a string base type so that it can be used as a key in a map results in a build failure in Windows, but succeeds in Linux. &#39;st::traits::operator ==&#39; c...
https://images-ext-1.discordapp.net/external/AXdY00wq3_PjAqJBQgFv0sDwcv8Q9fHbyh7HUZ5EyWw/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19640245


[05-Aug-19 09:31 PM] dcprevere#1502
@Doom


[05-Aug-19 09:42 PM] Slyris#2880
Great


[05-Aug-19 09:54 PM] dcprevere#1502
It looks like there's another problem, looking now


[05-Aug-19 10:04 PM] Slyris#2880
Yeah, WE will investigate @Doom


[05-Aug-19 10:04 PM] Slyris#2880
But I have to tell you that msvc is a shitty compiler


[05-Aug-19 10:04 PM] Slyris#2880
Which most of the time bug.


[05-Aug-19 10:04 PM] Slyris#2880
I will not be surprised that's an msvc bug


[05-Aug-19 10:08 PM] dcprevere#1502
Build fixed.


[05-Aug-19 10:13 PM] Slyris#2880
Great !


[06-Aug-19 07:27 AM] Mylo#8306
Ok thanks for update.  I‚Äôll check it out tomorrow.  üôè


[07-Aug-19 11:26 AM] Slyris#2880
@dcprevere You can update the CONTRIBUTORS.md to add you in the list of contributors if you want !


[07-Aug-19 02:43 PM] Slyris#2880
I will sleep see you tomorow !


[08-Aug-19 12:35 AM] Slyris#2880
Hello

{Reactions}
üññ 

[11-Aug-19 01:03 AM] Slyris#2880
Hey !

{Reactions}
üññ 

[11-Aug-19 06:40 AM] dcprevere#1502
@Slyris I made a big commit to my PR, and have left a short list of outstanding tasks before the PR can be merged.


[11-Aug-19 06:41 AM] dcprevere#1502
It's been a long day! Time for a beer.


[11-Aug-19 07:50 AM] Slyris#2880
Hodl my beer


[11-Aug-19 08:57 AM] Slyris#2880
Fixed windows compilation and other minor fixes @dcprevere

{Reactions}
üëç (2) 

[11-Aug-19 11:45 PM] Mylo#8306
happy monday devs, what's going on this week with maker-bot?
will there be an API to consume from GUI available this week?


[12-Aug-19 01:14 AM] Slyris#2880
@Mylo there is already one call available for fetching price of specific pair


[12-Aug-19 01:21 AM] Slyris#2880
The price service is almost done but I would like to add a function that run in his own thread and keep tracking all the assets pair that we need, but to achieve this, the program need to be aware of all assets pair that we will track. This part is unclear for the moment


[12-Aug-19 01:22 AM] Slyris#2880
For the moment there is a simple uri you as for a base currency and a quote currency and you get a median price


[12-Aug-19 01:22 AM] Slyris#2880
@dcprevere plan to add some http call regarding his order manager.


[12-Aug-19 01:23 AM] Slyris#2880
We need to finish the strategy manager also.


[12-Aug-19 02:12 AM] Mylo#8306
ok thanks for update @Slyris is this something testable this week or next week?  i ported cipi's scripts to nodejs for something i could build a GUI against, so when the http requests are known/documented/available i can start using it against your engine instead of my nodejs one


[12-Aug-19 02:12 AM] Mylo#8306

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/610400249885884417/FireShot_Capture_023_-_test_-_localhost.png


[12-Aug-19 02:12 AM] Mylo#8306
eg


[12-Aug-19 02:14 AM] Slyris#2880
I need to write some documentation yes. And for the Deployment we can ask @TonyL or @snk


[12-Aug-19 02:16 AM] Mylo#8306
there is also a python marketmaker community i want to approach with integration as well, just an fyi to some of their strategies for marketmaking https://docs.hummingbot.io/strategies/

{Embed}
https://docs.hummingbot.io/strategies/
Strategies Overview - hummingbot docs
Docs for hummingbot, the open source crypto market making bot


[12-Aug-19 02:16 AM] Slyris#2880
For the strategies I need to discuss about it with @dcprevere


[12-Aug-19 02:16 AM] Slyris#2880
He is on this part


[12-Aug-19 02:16 AM] Slyris#2880
I think he can read this link too

{Reactions}
üëç 

[12-Aug-19 03:17 AM] dcprevere#1502
Thanks for that link


[12-Aug-19 03:18 AM] dcprevere#1502
The strategy manager will be able to do all of these


[12-Aug-19 03:18 AM] dcprevere#1502
Except I haven't thought about discovery yet


[12-Aug-19 09:09 AM] Slyris#2880
@Mylo Doc is online: https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[12-Aug-19 09:09 AM] Slyris#2880
@TonyL I think we can start hosting the project the same way as antara-coin-cap if it's possible


[12-Aug-19 09:10 AM] Slyris#2880
(so people can start writting GUI)


[12-Aug-19 09:10 AM] TonyL#3577
Sure, will try to setup API soon üëç


[12-Aug-19 09:11 AM] Slyris#2880
Great, i didnt add how to run the binary but it"s really easy, just follow build instructions and then `cd bin && ./mmbot`


[12-Aug-19 09:11 AM] Slyris#2880
(important to launch the binary from the bin directory)


[12-Aug-19 12:29 PM] Slyris#2880
I wonder if at the launch of the program I would already have the list of the pairs of assets that I must track, or on the contrary we will always ask me in real time and get me on the pair of assets that interest you ?

(if someone can answer)


[12-Aug-19 12:30 PM] Slyris#2880
Initially I planned a service that would turn in background with a list of assets to track permanently (as suggested in the documentation) but is this really what we want?


[12-Aug-19 12:31 PM] Slyris#2880
https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md#get-price-with-an-base-currency-and-quote-currency (this is a realtime poll) for example

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[12-Aug-19 03:16 PM] TonyL#3577
@Slyris Was not able to pass this `cmake --build . --target mmbot --config Release` step of README guide: https://paste.ubuntu.com/p/nxvvMPTgVt/
`gcc version 7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1) `


[12-Aug-19 04:41 PM] TonyL#3577
upd, my bad. Readed trough: ```gcc-8 or clang-8 or msvc15-2017 minimum```


[12-Aug-19 04:50 PM] TonyL#3577
app saying very interesting way via deadlock that "address already in use" üòÉ

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/610621141073133579/unknown.png

{Reactions}
üòÉ 

[12-Aug-19 05:19 PM] TonyL#3577
http://95.217.44.58:81/ bot just said me welcome, very gentle bot üòÉ


[12-Aug-19 07:01 PM] Mylo#8306
http://95.217.44.58:81/api/v1/getprice?base_currency=KMD&quote_currency=BTC


[12-Aug-19 07:01 PM] Mylo#8306
Thanks!


[12-Aug-19 07:02 PM] Mylo#8306
@TonyL it died on 2nd request for DOGE/BTC


[12-Aug-19 09:05 PM] Slyris#2880
Ah Can I have the logs file ?


[12-Aug-19 09:05 PM] Slyris#2880
In the bin folder


[12-Aug-19 09:06 PM] Slyris#2880
@TonyL


[12-Aug-19 09:11 PM] Slyris#2880
(I have to precise that a multithreaded cpu is required)


[12-Aug-19 09:15 PM] Slyris#2880
(latest readable logs)


[12-Aug-19 09:20 PM] Slyris#2880
@Mylo i got the error for DOGE BTC!


[12-Aug-19 09:21 PM] Mylo#8306
cool i'll help where i can, not really a dev or a tester so tbh i am likely to get in the way more than help.  but where i can help i will help!


[12-Aug-19 09:21 PM] Slyris#2880
In fact it's because the api (coinpaprika return me scientific notation)


[12-Aug-19 09:22 PM] Slyris#2880
libc++abi.dylib: terminating with uncaught exception of type std::invalid_argument: stoull: no conversion


[12-Aug-19 09:22 PM] Slyris#2880
"2.5319564650362795e-7"


[12-Aug-19 09:22 PM] Slyris#2880
That's will not be easy to parse


[12-Aug-19 09:22 PM] Mylo#8306
ok lovely.  i get that error in nodejs and thought it was a javascript small number issue.  thanks for your feedback!!


[12-Aug-19 09:23 PM] Mylo#8306
oh shit.  yeah.  i was putting it off doing it in js and leaving it as a huge nasty bug until makerbot integration üòÉ


[12-Aug-19 09:23 PM] Slyris#2880
so i got a First parameter "2.5319564650362795e-7" in function bcround is not a number


[12-Aug-19 09:23 PM] Mylo#8306
yep.  understand.


[12-Aug-19 09:23 PM] Slyris#2880
Thank's i will add this tests in unit tests


[12-Aug-19 09:24 PM] Slyris#2880
But in fact i just need to convert it to: 0.00000025319564650362795


[12-Aug-19 09:25 PM] Mylo#8306
i'll give you another problem to think about, 1 min


[12-Aug-19 09:26 PM] Slyris#2880
Yeah but today it's my birthday i will not be able to code i think


[12-Aug-19 09:26 PM] Slyris#2880
only one or two hours


[12-Aug-19 09:26 PM] Slyris#2880
end of evening


[12-Aug-19 09:27 PM] Mylo#8306
https://api.bittrex.com/api/v1.1/public/getticker?market=BTC-KMD
an exchange like bittrex gives you Bid/Ask/Latest  as a response.   not sure how a marketmaker would handle that


[12-Aug-19 09:27 PM] Mylo#8306
happy birthday!!  enjoy your special day, give thanks to your parents and siblings for making headaches at early ages üòÑ


[12-Aug-19 09:27 PM] Slyris#2880
Yeah but this is not a price platform !


[12-Aug-19 09:27 PM] Slyris#2880
Thank's


[12-Aug-19 09:27 PM] Slyris#2880
Bittrex will be into cex platform


[12-Aug-19 09:27 PM] Mylo#8306
gotcha.


[12-Aug-19 09:54 PM] Slyris#2880
@artemciy_dice I have a question for rounding, should: `0.00000025319564650362795` return `0.00000003`


[12-Aug-19 09:54 PM] Slyris#2880
?


[12-Aug-19 09:59 PM] artemciy_dice#0049
Happy birthday, Slyris!
What do you mean by "return", return where?


[12-Aug-19 09:59 PM] Slyris#2880
No it's was my bad sorry


[12-Aug-19 09:59 PM] Slyris#2880
i forget to do smth in my code


[12-Aug-19 09:59 PM] Slyris#2880
it's should be 0.00000025 for this case


[12-Aug-19 09:59 PM] Slyris#2880
using commercial rounding


[12-Aug-19 10:00 PM] artemciy_dice#0049
Right!


[12-Aug-19 10:00 PM] Slyris#2880
Thank's for the birthday ;D


[12-Aug-19 10:02 PM] artemciy_dice#0049
You're welcome, have fun!


[12-Aug-19 10:11 PM] Slyris#2880
@Mylo @TonyL Fixed on master, need to redeploy


[12-Aug-19 10:11 PM] Slyris#2880
(for the scientific notation)


[12-Aug-19 10:11 PM] Slyris#2880
Have a good day i will chill a bit for my birthday

{Reactions}
üéá (3) 

[13-Aug-19 12:50 AM] TS#7923
Happy birthday man!


[13-Aug-19 01:11 AM] Slyris#2880
Thank's a lot @TS


[13-Aug-19 01:11 AM] TonyL#3577
Happy birthday!


[13-Aug-19 01:11 AM] Slyris#2880
Thanks a lot @TonyL


[13-Aug-19 01:11 AM] TonyL#3577
üç∞


[13-Aug-19 01:11 AM] Slyris#2880
(let me know when you redeploy


[13-Aug-19 01:11 AM] TonyL#3577
Updated bot and setup script for autoupdate


[13-Aug-19 01:11 AM] Slyris#2880
:D


[13-Aug-19 01:12 AM] Slyris#2880
Thank's


[13-Aug-19 01:12 AM] TonyL#3577
But it's not working let me check

{Reactions}
üòä (2) 

[13-Aug-19 01:12 AM] Slyris#2880
You are a mastermind

{Reactions}
üòÖ 

[13-Aug-19 01:12 AM] Slyris#2880
Ah


[13-Aug-19 01:12 AM] Slyris#2880
There is some logs I believe


[13-Aug-19 01:13 AM] Slyris#2880
( you can change http port in the configuration file)


[13-Aug-19 01:13 AM] TonyL#3577
Oh it's something on my side, like a config re-writed I think


[13-Aug-19 01:13 AM] Slyris#2880
Default is 8080


[13-Aug-19 01:21 AM] TonyL#3577
Mine is on 7777 :KMD:  Should be up now üòÉ


[13-Aug-19 01:44 AM] TonyL#3577
üòÖ

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/610755604868366346/image0.jpg

{Reactions}
üòÑ (2) 

[13-Aug-19 02:01 AM] Slyris#2880
Xwf


[13-Aug-19 02:01 AM] Slyris#2880
XD


[13-Aug-19 02:02 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/610760051002572840/Of_cors_this_would_happen_https___t.co_tPjObgIBlC.mp4


[13-Aug-19 02:02 AM] Slyris#2880
My favourite still


[13-Aug-19 02:02 AM] Slyris#2880
This one


[13-Aug-19 02:30 AM] Slyris#2880
@Mylo this should work now let me know if you have other problems

{Reactions}
üôè ‚úÖ 

[13-Aug-19 02:47 AM] Mylo#8306
oh i have other problems üòõ


[13-Aug-19 02:51 AM] dcprevere#1502
Happy Birthday! @Slyris


[13-Aug-19 02:55 AM] dcprevere#1502
@Doom is there a way to override a method for a strong type? I want to define how a price type can multiply with a spread type. My naive attempt gave me:
```
error: specializing member ‚Äòst::type<absl::uint128, antara::price_tag, st::arithmetic>::operator*‚Äô requires ‚Äòtemplate<>‚Äô syntax
```


[13-Aug-19 02:56 AM] dcprevere#1502
Is this where I should use `    public st::type_base<int>,` and the like?


[13-Aug-19 02:58 AM] dcprevere#1502
Or is just adding `template<>` the right way?


[13-Aug-19 03:00 AM] Doom#9021
What was your attempt's code ?


[13-Aug-19 03:01 AM] Doom#9021
You could just implement an operator like `your_result_type operator*(const price &p, const spread &s)`


[13-Aug-19 03:02 AM] Doom#9021
(That would not require any `template <>` of any sort, it's just a regular function)


[13-Aug-19 03:04 AM] dcprevere#1502
Thank you, I see that I was overriding the wrong function

{Reactions}
üëç 

[13-Aug-19 03:49 AM] dcprevere#1502
@Slyris I've fixed the strategy manager. One thing I think we need to work on is making the tests faster, currently they're taking 30s on my machine.


[13-Aug-19 03:50 AM] dcprevere#1502
And I am getting this in the output: 
```2019-08-13 17:46:45.337 (   0.021s) [        CED1EB40]             config.hpp:92    WARN| .   .   creating directories failed: Permission denied, returning default configuration```


[13-Aug-19 03:50 AM] dcprevere#1502
As well as a number of errors which I would guess are caused by this.


[13-Aug-19 03:50 AM] dcprevere#1502
```
2019-08-13 17:46:48.424 (   3.108s) [        CED1B700]    http.price.rest.cpp:41     ERR| .   .   Not enough parameters, require base_currency and quote_currency parameters
```


[13-Aug-19 03:51 AM] dcprevere#1502
```
2019-08-13 17:46:52.084 (   6.768s) [        C67FC700]coinpaprika.price.platf:54     ERR| .   .   .   .   base: KMDD not found
```


[13-Aug-19 03:52 AM] Slyris#2880
It's normal I'm testing error case too


[13-Aug-19 03:52 AM] Slyris#2880
@dcprevere


[13-Aug-19 03:52 AM] Slyris#2880
This is an normal output.


[13-Aug-19 03:52 AM] dcprevere#1502
Okay!


[13-Aug-19 03:52 AM] Slyris#2880
You should test all error case too


[13-Aug-19 03:52 AM] Slyris#2880
You can run specific unit tests


[13-Aug-19 03:52 AM] Slyris#2880
Using --test-case


[13-Aug-19 03:52 AM] dcprevere#1502
And in terms of speed?


[13-Aug-19 03:53 AM] dcprevere#1502
Is it slow because we are doing real HTTP calls in the tests?


[13-Aug-19 03:53 AM] Slyris#2880
T


[13-Aug-19 03:54 AM] Slyris#2880
Yeah


[13-Aug-19 03:55 AM] Slyris#2880
But as I said you can choose which tests or suite you want to run


[13-Aug-19 03:55 AM] Slyris#2880
Using options


[13-Aug-19 03:55 AM] dcprevere#1502
I really think we should mock these calls or maybe we can move them so that they are not run with the rest of the unit tests


[13-Aug-19 03:55 AM] Slyris#2880
And also on my machine it's take only 10 secondes for every tests


[13-Aug-19 03:56 AM] dcprevere#1502
Maybe have an `integration` command passed to the test executable


[13-Aug-19 03:56 AM] dcprevere#1502
That would run them


[13-Aug-19 03:56 AM] Slyris#2880
--skip-tests=test_suite


[13-Aug-19 03:56 AM] Slyris#2880
It's already exists


[13-Aug-19 03:56 AM] Slyris#2880
Type -H


[13-Aug-19 03:57 AM] Slyris#2880
The command line of doctest is complete


[13-Aug-19 03:57 AM] dcprevere#1502
My point is that this should be the default behaviour


[13-Aug-19 03:58 AM] dcprevere#1502
But thank you, I will use this for the time being


[13-Aug-19 03:58 AM] Slyris#2880
Ah may be yeah


[13-Aug-19 03:58 AM] Slyris#2880
Will see that later


[13-Aug-19 04:01 AM] Slyris#2880
I prefer my unit tests to tests the real case to be honest


[13-Aug-19 04:01 AM] Slyris#2880
Much better than a fake one


[13-Aug-19 04:01 AM] Slyris#2880
Especially for coverage


[13-Aug-19 04:01 AM] Slyris#2880
But I agree for a better organisation of running unit tests


[13-Aug-19 05:05 AM] Slyris#2880
@dcprevere I will reorder unit tests myself because we don't need to move them into specific tests suites


[13-Aug-19 05:05 AM] Slyris#2880
Especially that we are not testing http in this case


[13-Aug-19 05:05 AM] Slyris#2880
But the whole service which is not only http


[13-Aug-19 05:08 AM] Slyris#2880
I will ask the creator of doctest for the conditional tests but tomorrow not today.


[13-Aug-19 05:08 AM] dcprevere#1502
Okay! Don't worry about it


[13-Aug-19 05:08 AM] dcprevere#1502
Take it easy today


[13-Aug-19 06:01 AM] Slyris#2880
Because it's ruin the XML results too anyway I cannot merge


[13-Aug-19 11:20 PM] Slyris#2880
Hey !


[14-Aug-19 12:23 AM] Slyris#2880
@Mylo Did you find any new bug ?


[14-Aug-19 01:42 AM] Slyris#2880
@dcprevere ping me when you are here


[14-Aug-19 04:36 AM] Mylo#8306
No. All good.  My ‚Äúother problems‚Äù are age related üòÖ


[14-Aug-19 12:04 PM] Slyris#2880
mm2 is now running in background automatically by antara makerbot. @ca333

{Reactions}
üëç 

[14-Aug-19 12:05 PM] Slyris#2880
Next steps is to enable the coins that are available with mm2 üòÉ


[14-Aug-19 12:06 PM] Slyris#2880
Once is done, i can start coding somme mm2 rpc call in c++ and once is done, dex can use those functions to interract with mm2 in background.


[15-Aug-19 12:36 AM] TonyL#3577
@Slyris Compilation is failing on my side atm:
```cmake --build . --target mmbot --config Release
[  5%] Built target http_parser
[ 11%] Built target bcmath
[ 11%] Built target logurulog
[ 22%] Built target restclient_obj
[ 27%] Built target absl_int128
[ 44%] Built target reproc
[ 55%] Built target reproc++
[ 61%] Building CXX object src/CMakeFiles/mmbot.dir/mm2/mm2.client.cpp.o
In file included from /root/antara-makerbot/src/mm2/mm2.client.cpp:17:
/root/antara-makerbot/src/mm2/mm2.client.hpp:77:55: warning: ‚Äòmaybe_unused‚Äô attribute ignored [-Wattributes]
         [[maybe_unused]] const antara::mmbot::config &mmbot_cfg_;
                                                       ^~~~~~~~~~
/root/antara-makerbot/src/mm2/mm2.client.cpp: In constructor ‚Äòantara::mmbot::mm2_client::mm2_client(const antara::mmbot::config&)‚Äô:
/root/antara-makerbot/src/mm2/mm2.client.cpp:54:55: error: no matching function for call to ‚Äòreproc::process::start(std::array<std::__cxx11::basic_string<char>, 1>&, const char*)‚Äô
         auto ec = background_.start(args, path.c_str());
                                                       ^
compilation terminated due to -Wfatal-errors.
src/CMakeFiles/mmbot.dir/build.make:88: recipe for target 'src/CMakeFiles/mmbot.dir/mm2/mm2.client.cpp.o' failed
make[3]: *** [src/CMakeFiles/mmbot.dir/mm2/mm2.client.cpp.o] Error 1
CMakeFiles/Makefile2:2832: recipe for target 'src/CMakeFiles/mmbot.dir/all' failed
make[2]: *** [src/CMakeFiles/mmbot.dir/all] Error 2
CMakeFiles/Makefile2:2839: recipe for target 'src/CMakeFiles/mmbot.dir/rule' failed
make[1]: *** [src/CMakeFiles/mmbot.dir/rule] Error 2
Makefile:944: recipe for target 'mmbot' failed
make: *** [mmbot] Error 2
```


[15-Aug-19 12:57 AM] Slyris#2880
yeah it's fixed


[15-Aug-19 12:57 AM] Slyris#2880
You need to remove the cache @TonyL


[15-Aug-19 12:57 AM] Slyris#2880
from CMake


[15-Aug-19 12:58 AM] Slyris#2880
rm -rf build_folder

{Reactions}
üî• 

[15-Aug-19 05:26 AM] Slyris#2880
@artem.pikulin I got an error like:

```bash
resp: {"error":"lp_coins:702] lp_coins:669] utxo:1156] JsonRpcError { request: JsonRpcRequest { jsonrpc: \"2.0\", id: \"2\", method: \"blockchain.headers.subscribe\", params: [] }, error: Transport(\"rpc_clients:652] [\\\"rpc_clients:1194] common:824] future timed out\\\"]\") }"}
2019-08-15 14:25:09.868 (  76.079s) [          131140]         mm2.client.cpp:96     ERR| .   .   .   err: [json.exception.out_of_range.403] key 'address' not found
```


[15-Aug-19 05:27 AM] Slyris#2880
with:

```bash
2019-08-15 14:24:09.722 (  15.933s) [          131140]         mm2.client.cpp:85    INFO| .   .   .   request: {"coin":"NMC","method":"electrum","servers":[{"disable_cert_verification":false,"protocol":"TCP","url":"nmc.bitcoins.sk:50002"},{"disable_cert_verification":false,"protocol":"TCP","url":"electrum-nmc.le-space.de:50002"},{"disable_cert_verification":false,"protocol":"TCP","url":"ulrichard.ch:50006"}],"tx_history":true,"userpass":"YOUR_PASSWORD_HERE"}
```


[15-Aug-19 05:28 AM] artem.pikulin#0794
I suspect that NMC electrums do not work. Please check the MM2 stdout, it should contain specific connection error messages.


[15-Aug-19 05:29 AM] artem.pikulin#0794
```
netcat -v nmc.bitcoins.sk 50002
netcat: connect to nmc.bitcoins.sk port 50002 (tcp) failed: Connection refused
```


[15-Aug-19 05:29 AM] Slyris#2880
Unfortunately i discarded in the background the mm2 stdout


[15-Aug-19 05:29 AM] Slyris#2880
because it's consume a lot of memory


[15-Aug-19 05:30 AM] Slyris#2880
to keep the whole stdout in background from another process


[15-Aug-19 05:30 AM] artem.pikulin#0794
```
netcat -v electrum-nmc.le-space.de 50002
Connection to electrum-nmc.le-space.de 50002 port [tcp/*] succeeded!
2323
```
This one connects but doesn't respond anything


[15-Aug-19 05:30 AM] Slyris#2880
should i ignore if it's NMC for the moment ?


[15-Aug-19 05:31 AM] Slyris#2880
or can we force a timeout in config of MM2 ?


[15-Aug-19 05:31 AM] artem.pikulin#0794
Yes please as electrums seem to malfunction.


[15-Aug-19 05:31 AM] Slyris#2880
Because it"s take like 30-40 seconds


[15-Aug-19 05:33 AM] Slyris#2880
And it's normal if i try to enable 2 times the same coin i got an error


[15-Aug-19 05:33 AM] Slyris#2880
?


[15-Aug-19 05:33 AM] Slyris#2880
2019-08-15 14:33:11.540 (  72.805s) [          132871]         mm2.client.cpp:89    INFO| .   resp: {"error":"lp_coins:702] lp_coins:645] Coin MORTY already initialized"}


[15-Aug-19 05:34 AM] artem.pikulin#0794
The electrum request timeout is harcoded, there's no option to control it as of now. Yes, since coin was successfully activated it's not possible to activate it 1 more time.


[15-Aug-19 05:34 AM] artem.pikulin#0794
You may track coins which are already enabled by https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#get-enabled-coins

{Embed}
https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html
DEX API | AtomicDEX Documentation
Documentation for developers building on AtomicDEX


[15-Aug-19 05:35 AM] Slyris#2880
Yeah no problem i got it


[15-Aug-19 05:35 AM] Slyris#2880
I'm coding a whole client in c++


[15-Aug-19 05:35 AM] Slyris#2880
That is using rpc call to communicate with mm2


[15-Aug-19 05:36 AM] Slyris#2880
so far i have the electrum call working for the moment


[15-Aug-19 05:36 AM] artem.pikulin#0794
```
Unfortunately i discarded in the background the mm2 stdout
because it's consume a lot of memory
to keep the whole stdout in background from another process
```
Fortunately `MM_LOG` env was added for such case by `artemciy`: https://github.com/KomodoPlatform/atomicDEX-API/issues/514#issuecomment-519763626

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/514
[Feature request] redirect logs to a file ¬∑ Issue #514 ¬∑ KomodoP...
I suggest a way to redirect logs into a file when we start mm2, in an argument.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[15-Aug-19 05:36 AM] Slyris#2880
OH great


[15-Aug-19 05:36 AM] Slyris#2880
What should i set as env variable before launching the prog ?


[15-Aug-19 05:37 AM] artem.pikulin#0794
Please try it from your side, it's highly recommended to keep the MM2 logs for issues investigation. As it's mentioned in issue comment the usage is `MM_LOG=mm.log target/debug/mm2`.


[15-Aug-19 05:37 AM] Slyris#2880
Yes but artem im using the last release on github


[15-Aug-19 05:37 AM] Slyris#2880
from 15 july


[15-Aug-19 05:37 AM] Slyris#2880
you added it after alright @artem.pikulin  ?


[15-Aug-19 05:38 AM] Slyris#2880
MM 2.0.1009


[15-Aug-19 05:39 AM] Slyris#2880
i use it like:

```cmake
if (APPLE)
    FetchContent_Declare(mm2
            URL https://github.com/KomodoPlatform/atomicDEX-API/releases/download/2.0.1009/mm2-b08da3aa9-Darwin.zip)
elseif (LINUX)
    FetchContent_Declare(mm2
            URL https://github.com/KomodoPlatform/atomicDEX-API/releases/download/2.0.1009/mm2-b08da3aa9-Linux.zip)
else()
    FetchContent_Declare(mm2
            URL https://github.com/KomodoPlatform/atomicDEX-API/releases/download/2.0.1009/mm2-b08da3aa9-Windows_NT.zip)
endif ()
```


[15-Aug-19 05:39 AM] artem.pikulin#0794
`artemciy` added it after yes. Github release is outdated, I will publish new release soon, however I'd recommend to build it from source or use the binaries from http://195.201.0.6/mm2/. Our CI uploads the prebuilt binaries there per each commit.


[15-Aug-19 05:40 AM] artem.pikulin#0794
It's considered as `nightly server` so not recommended to use for production, but it's fine for development purpose to stay up to date.


[15-Aug-19 05:40 AM] Slyris#2880
ah i was not aware


[15-Aug-19 05:40 AM] Slyris#2880
I will


[15-Aug-19 05:40 AM] Slyris#2880
i can safely use nightly build ?


[15-Aug-19 05:41 AM] Slyris#2880
i think i will wait the production one


[15-Aug-19 05:41 AM] Slyris#2880
on github


[15-Aug-19 05:41 AM] Slyris#2880
it's better


[15-Aug-19 05:41 AM] Slyris#2880
i can wait for the logs solution no problem


[15-Aug-19 05:41 AM] artem.pikulin#0794
Yes, the binary is uploaded only after the set of unit and integration tests successfully passes so nightly version should be fully functional.


[15-Aug-19 05:42 AM] Slyris#2880
ok ! i will see thank's for your help, really cool


[15-Aug-19 05:42 AM] artem.pikulin#0794
You're welcome, please feel free to message if you have more questions üôÇ


[15-Aug-19 05:43 AM] Slyris#2880
i have


[15-Aug-19 05:43 AM] Slyris#2880
one more


[15-Aug-19 05:43 AM] Slyris#2880
for the moment i got so far


[15-Aug-19 05:43 AM] Slyris#2880
```cpp
 bool enable_coins()
        {
            VLOG_SCOPE_F(loguru::Verbosity_INFO, pretty_function);
            bool res = true;
            for (auto&&[current_coin, current_coin_data] : mmbot_cfg_.registry_additional_coin_infos) {
                if (current_coin_data.is_mm2_compatible) {
                    if (current_coin_data.is_electrum_compatible && current_coin != "NMC") {
                        std::vector<mm2::electrum_servers> servers;
                        std::for_each(begin(current_coin_data.urls_electrum), end(current_coin_data.urls_electrum),
                                  [&servers](const std::string &current_url) {
                            servers.emplace_back(mm2::electrum_servers{current_url});
                        });
                        mm2::electrum_request request{current_coin, servers};
                        auto answer = rpc_electrum(std::move(request));
                        res &= answer.rpc_result_code == 200;
                    } else {
                        //! TODO: use enable
                    }
                }
            }
            return res;
        }
```


[15-Aug-19 05:43 AM] Slyris#2880
I want to know when it's not electrum compatible, i should use enable method alright ?


[15-Aug-19 05:45 AM] artem.pikulin#0794
Yes, but for non ETH/ERC20 coins you should have the fully synced native coin daemon running on same machine which is hardly reachable.


[15-Aug-19 05:45 AM] Slyris#2880
wut ?


[15-Aug-19 05:45 AM] Slyris#2880
This will not be possible i think


[15-Aug-19 05:45 AM] Slyris#2880
@ca333 ? ^


[15-Aug-19 05:46 AM] artem.pikulin#0794
Is there a real reason to attempt to enable `all` coins?


[15-Aug-19 05:46 AM] artem.pikulin#0794
I doubt that users will need it.


[15-Aug-19 05:46 AM] Slyris#2880
mmbot is an LP providers


[15-Aug-19 05:47 AM] Slyris#2880
will be able to place order etc


[15-Aug-19 05:47 AM] Slyris#2880
but need to check balance for that


[15-Aug-19 05:47 AM] Slyris#2880
(i think)


[15-Aug-19 05:47 AM] Slyris#2880
i need to enable all the coins that mm2 support i think but if this is not the case


[15-Aug-19 05:47 AM] Slyris#2880
let me know


[15-Aug-19 05:48 AM] artem.pikulin#0794
Well, if daemon is not there you will get the error and can skip the errored coin.


[15-Aug-19 05:48 AM] Slyris#2880
yeah no problem


[15-Aug-19 05:48 AM] artem.pikulin#0794
It won't create any issue actually.


[15-Aug-19 05:49 AM] Slyris#2880
which coin so far need the deamon right now ?


[15-Aug-19 05:49 AM] Slyris#2880
because i saw that mm2 support 66 coins


[15-Aug-19 05:49 AM] Slyris#2880
according to `coins` file


[15-Aug-19 05:51 AM] artem.pikulin#0794
Every UTXO coin can work in native mode. Maybe it's even better to attempt to enable the coin in native mode and only when it's errored activate the electrum mode. The UTXO coin is differentiated from ETH/ERC20 by `not` having the `etomic` field in config.


[15-Aug-19 05:51 AM] Slyris#2880
but for enable in native mode i need several different deamon alright ?


[15-Aug-19 05:51 AM] artem.pikulin#0794
https://github.com/jl777/coins/blob/master/coins#L3 - BTC doesn't have `etomic`, it's UTXO coin. It may be activated by `enable` or `electrum` (but only 1 method at once).

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[15-Aug-19 05:52 AM] Slyris#2880
the steps are like:

- run mm2
- enable coins (using electrum or enable method)
- use mm2


[15-Aug-19 05:52 AM] artem.pikulin#0794
For each native mode coin you need corresponding daemon running and fully synced, yes.


[15-Aug-19 05:52 AM] Slyris#2880
i will prefer electrum then


[15-Aug-19 05:52 AM] artem.pikulin#0794
If it's not there the `enable` will fail.


[15-Aug-19 05:53 AM] Slyris#2880
i will highly prefer electrum then


[15-Aug-19 05:53 AM] Slyris#2880
for ETH and ERC20 i dont need deamon even using enable alright ?


[15-Aug-19 05:53 AM] artem.pikulin#0794
Electrum makes you dependent on 3rd party infrastructure then, it's less reliable and less safe actually.


[15-Aug-19 05:54 AM] artem.pikulin#0794
The user should have choice to either use electrum or native, especially the LP node with large amounts of money.


[15-Aug-19 05:54 AM] Slyris#2880
It's just that if I have to support so many services open I do not have enough disk space and memory, I could not develop properly


[15-Aug-19 05:55 AM] Slyris#2880
That would mean that at the launch of my program I should launch dozens of programs in backgroud, sincerely it seems to me very complicated


[15-Aug-19 05:56 AM] artem.pikulin#0794
ETH/ERC20 is always activated by `enable` call with additional arguments. We recommend to use the `urls` of nodes maintained by `cipi`, but user can also sync the node locally and use the `localhost` url of his node.


[15-Aug-19 05:56 AM] Slyris#2880
In an environment like this it's going to be very difficult for me to develop properly, I want to do it and even offer this possibility, but I would like to have the opinion of the rest of the team first


[15-Aug-19 05:57 AM] artem.pikulin#0794
I think you don't have to sync all the coins locally. You're implementing LP trading bot, correct? If it works for 1 pair of coins it will highly likely work for any other coin, the MM2 will take care of the rest.

{Reactions}
üëç 

[15-Aug-19 05:58 AM] Slyris#2880
I fully understand the principle of decentralization and the willingness of people to have a lot of local node


[15-Aug-19 05:59 AM] Slyris#2880
I am a bit of a noob with mm2, but if I understand correctly, when a coin is not enable, we can not do rpc calls about this coins is not it?


[15-Aug-19 06:00 AM] ca333#0333
just implement the makerbot with the capabilities to interact with mm2 - this is all we need. Don't worry about native vs. SPV mode and where to host a parity node as this is totally irrelevant for the makerbot. The LPs will have to figure which coins/daemons they activate and use. That is something they should pass to the makerbot via config.

{Reactions}
üëç 

[15-Aug-19 06:00 AM] Slyris#2880
Ok so for the moment i enable 0 coins ?


[15-Aug-19 06:01 AM] Slyris#2880
I started from the premise that after launching the program mm2 in background I had to activate the currency available on mm2 (may be it"s was a mistake)


[15-Aug-19 06:02 AM] ca333#0333
i would just enable RICK/MORTY for initial tests and also an ETH/ERC token so you can reliably test the functionality of makerbot.


[15-Aug-19 06:02 AM] Slyris#2880
Because I wanted to start the makerbot dex party, I needed mm2, so I'm currently writing a c++ rpc client tha use mm2


[15-Aug-19 06:03 AM] Slyris#2880
It's what i did in unit tests:

```cpp
 TEST_CASE ("mm2 rpc electrum")
    {
        auto cfg = load_mmbot_config(std::filesystem::current_path() / "assets", "mmbot_config.json");
        antara::mmbot::mm2_client mm2(cfg, false);
        mm2::electrum_request request{"MORTY", {{"electrum2.cipig.net:10018"}, {"electrum1.cipig.net:10018"},
                                                {"electrum3.cipig.net:10018"}}};
        auto answer = mm2.rpc_electrum(std::move(request));
        CHECK_EQ(200, answer.rpc_result_code);


        mm2::electrum_request bad_request{"KMDD", {{"electrum2.cipig.net:10018"}, {"electrum1.cipig.net:10018"},
                                                   {"electrum3.cipig.net:10018"}}};
        answer = mm2.rpc_electrum(std::move(bad_request));
        CHECK_EQ(-1, answer.rpc_result_code);
    }
```


[15-Aug-19 06:03 AM] ca333#0333
like Artem pointed out - if one activated pair functions the rest will likely function too.


[15-Aug-19 06:03 AM] Slyris#2880
ok we will see anyway.


[15-Aug-19 06:03 AM] Slyris#2880
For dex i just need to place order and get order status so far


[15-Aug-19 06:03 AM] Slyris#2880
So i dont know if i need coin enabled for it


[15-Aug-19 06:06 AM] ca333#0333
yes - DEX API methods like `orderbook` and `sell`/`setprice` or `buy` require the involved coins to be activated since mm2 wouldn't be able to interact with their blockchains, etc. By activating RICK/MORTY you can use all the DEX API methods with RICK and MORTY.


[15-Aug-19 06:06 AM] Slyris#2880
Great, so i will enable only rick and morty


[15-Aug-19 06:07 AM] Slyris#2880
and if user want more he can call `rpc_electrum` manually


[15-Aug-19 06:07 AM] Slyris#2880
or `rpc_enable`


[15-Aug-19 09:20 AM] Slyris#2880
From a continuous integration point of view, how do I get 1000 rick and 1000 morty each time in my unit tests? (if I had them on appveyor and travis all is very simple, it will be enough for me to buy the same sum as the sale)


[15-Aug-19 09:22 AM] Slyris#2880
So here at the launch of the program we have `RICK` and `MORTY` activated by default, for the next unit tests I think I need to fill the balance (same on the continuous integration)


[15-Aug-19 09:30 AM] Slyris#2880
(im supposing getting morty from the faucet)


[15-Aug-19 09:34 AM] Slyris#2880
i must wait between each unit tests to receive my rick and morty


[15-Aug-19 09:36 AM] Slyris#2880
or so I can cache the mm2 DB on the CI, but not sure it's a great idea


[15-Aug-19 09:37 AM] Slyris#2880
what do you think @artem.pikulin


[15-Aug-19 12:30 PM] TonyL#3577
hmm for nspv auto-tests we hardcoded wif with funds in form of encrypted travis variable


[15-Aug-19 12:31 PM] TonyL#3577
https://github.com/KomodoPlatform/libnspv/blob/master/.travis.yml#L7 like here: wif, destination address needed for tests, and some webhook token

{Embed}
https://github.com/KomodoPlatform/libnspv/blob/master/.travis.yml
KomodoPlatform/libnspv
Tiny Bitcoin Library written in C, with nSPV added - KomodoPlatform/libnspv
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[15-Aug-19 12:33 PM] TonyL#3577
To get some consistency with balance you should start test from same amount sending to the same addy maybe


[15-Aug-19 12:36 PM] TonyL#3577
Bad thng these variables work on yours PRs builds only


[15-Aug-19 01:15 PM] Slyris#2880
@TonyL For the unit tests i just need some rick and morty (not that much but should work on CI like you showing me)


[15-Aug-19 01:16 PM] Slyris#2880
@TonyL Ideally when i start mm2 and enable rick and morty i want around 150 RICK/MORTY on each address


[15-Aug-19 01:16 PM] Slyris#2880
consistently


[15-Aug-19 01:18 PM] Slyris#2880
waiting for a transaction for each run of unit tests in different configuraiton will slow the CI process


[15-Aug-19 01:20 PM] Slyris#2880
maybe caching mm2 db and other things can be a solution


[15-Aug-19 01:20 PM] Slyris#2880
i will think about it tommorow, time to sleep for me


[15-Aug-19 09:02 PM] artem.pikulin#0794
It'd be nice to have reproducible test coins environment most likely using Docker. So it will be config containing native daemon with premined coins on required addresses and also include electrum server installation indexing the native daemon DB. This will be very useful for MM2 testing too as we don't have automated tests currently for native mode since it requires too much of pre-configuration of all the daemons.


[15-Aug-19 09:03 PM] artem.pikulin#0794
Maybe we can use something from antara composer for this purpose since it's doing exactly this if I understand it correct.


[15-Aug-19 09:05 PM] artem.pikulin#0794
As example we already have such parity config as separate dev/test chain that doesn't depend on any 3rd party testchain (like Ropsten): https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/parity.dev.chain.json. It can be used via Docker: https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/Dockerfile.parity.dev

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/Dockerfile.parity.dev
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[15-Aug-19 09:10 PM] artem.pikulin#0794
So what I imagine is `docker-compose.yml` and native daemon config, Following should happen after `docker-compose up`:
1. Native daemon started.
2. It has premined coins on specific addresses, the addresses and balances set from config.
3. Electrum server starts on top of coin daemon.
@TonyL is it possible to achieve? I think it might be also useful for nSPV and any other products testing that require test blockchain.


[15-Aug-19 10:30 PM] Slyris#2880
So instead of launching mm2 my c++ programm will launch the docker for example @artem.pikulin if I'm following your mind


[15-Aug-19 10:37 PM] artem.pikulin#0794
I'm talking about coin daemon configuration which is different. MM2 fetches all the required data from the coin RPC, so for example to always have 1000 units of some coin you should "cache" or recreate the coin blockchain, not the MM2 database.


[15-Aug-19 10:39 PM] artem.pikulin#0794
But MM2 can be included to such reproducible test environment too.


[15-Aug-19 10:44 PM] Slyris#2880
Ok I got it


[15-Aug-19 10:55 PM] TonyL#3577
@artem.pikulin unfortunately it‚Äôs not suitable for nspv I think because chain needs to be notarized to test full functionality (existing chain is needed)


[15-Aug-19 10:58 PM] artem.pikulin#0794
Hmm, maybe we can notarize it using BTC test blockchain (configured same way)? üôÇ Just thinking loud, even if it's not suitable for nSPV it's still useful in other cases.


[15-Aug-19 11:02 PM] TonyL#3577
Yeah, in general it looks like very helpful infra for reproducible tests. I need something similar for mm2 load tests I think - to start blockchain from scratch on each run

{Reactions}
üëç 

[15-Aug-19 11:09 PM] artem.pikulin#0794
Could you please add this to your roadmap then? How much time might it take approximately?


[15-Aug-19 11:29 PM] TonyL#3577
Shouldn‚Äôt take much time, 1-2 days maybe. Will add to tasks list with evaluation. In road right now, will do a little bit later


[15-Aug-19 11:32 PM] artem.pikulin#0794
Thanks a lot!


[15-Aug-19 11:48 PM] Slyris#2880
Here is what I have been doing for 2 days:

The program now runs `mm2` in background, implementation side a client mm2 rpc in c++ (the beginning), ideally in the near future I would launch a docker as the suggest @artem.pikulin  to facilitate unit testing and integration tests. once mm2 is started, I activate the RICK & MORTY test coins (for unit tests I can currently perform).

So, for the next call rpc that I'm going to code in C++ unfortunately there will be for now no unit test coverage that I want, so it will require more manual testing from our testers. cc @TonyL 

Next step, code the functions to `cancel an order`, `create an order`, have the `status of an order`. (As I have an empty balance, I could only test the error cases in my unit tests)


[15-Aug-19 11:50 PM] Slyris#2880
Ideally on my side so that the unit tests is really simple to do, it should be at the launch of `mm2` and after the activation of at least one pair I have at least 50 tokens on these two assets (I could in this case there easily creates an order, the cancel etc ...)


[15-Aug-19 11:51 PM] Slyris#2880
for the `strategy manager`, the `order manager` and the `cex`, it is @dcprevere  who is on it (i'm currently doing `dex`)


[15-Aug-19 11:53 PM] dcprevere#1502
Hi, if any of you have questions about the order manager, strategy manager or CEX then please ask


[15-Aug-19 11:54 PM] Slyris#2880
I wonder in the call API that we will expose to customers, if to place an order on a CEX or a DEX it will be the same call


[15-Aug-19 11:55 PM] Slyris#2880
Like `/api/v1/place_order` or `/api/v1/place_order_cex` and `/api/v1/place_order_dex`


[16-Aug-19 12:42 AM] dcprevere#1502
My guess is that they would be separate


[16-Aug-19 12:43 AM] dcprevere#1502
Both CEX and DEX have `place_order` methods


[16-Aug-19 12:45 AM] dcprevere#1502
As well as other methods mimicing the strategies we have


[16-Aug-19 12:45 AM] dcprevere#1502
So that one API call would result in order to both DEX and CEX


[16-Aug-19 12:45 AM] Slyris#2880
Oki


[16-Aug-19 03:14 AM] Mylo#8306
this is the dockerfile i use for mm2 https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker (edit link)

{Embed}
https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker
Komodo-Cakeshop/docker-atomicdex-api-marketmaker
Contribute to Komodo-Cakeshop/docker-atomicdex-api-marketmaker development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/JpoXzzXQ4UN23-0fC_I0eSDzdJcEbB8QyMefYTwucDg/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/45069400


[16-Aug-19 03:14 AM] Mylo#8306
`https://hub.docker.com/r/komodocakeshop/dev-atomicdex-api` i use it for testing


[16-Aug-19 03:15 AM] Mylo#8306
no docs yet.  super handy.   i ssh tunnel from my box to the docker container, and just use localhost tunnel for any api calls.
maybe regtest mode would help with these automated tests?


[16-Aug-19 03:22 AM] Slyris#2880
Ideally we will use a docker that use binary already builded


[16-Aug-19 03:22 AM] Slyris#2880
to save time for automated tests


[16-Aug-19 03:23 AM] Slyris#2880
The idea is:

- Retrieve binary from nightly build 
- Copy MM2.json and all needed assets
- Launch MM2
- Get premined coins if it's possible

and it"s should work with docker on windows/osx/linux and expose the rpc port correctly


[16-Aug-19 03:30 AM] TonyL#3577
Oh we have similar thing to what you're describing in AWS tests.

Docker file like this:
```FROM ubuntu:18.04 

RUN apt-get update && apt-get install -y python wget libboost-dev libboost-system-dev libcurl4-openssl-dev libcurl3-gnutls curl libssl-dev && wget http://159.69.45.70/start.sh && chmod u+x start.sh

EXPOSE 7782 7783 38880 38890 38900

CMD ./start.sh```

where start.sh downloading latest nightly and preparing other things 
```
#!/bin/bash

wget http://195.201.0.6/mm2/mm2-latest-Linux.zip && unzip mm2-latest-Linux.zip && cp target/debug/mm2 . && chmod u+x mm2 && wget http://159.69.45.70/coins
wget http://159.69.45.70/seed_generate.py && wget http://159.69.45.70/make_config.sh && chmod u+x make_config.sh && wget http://159.69.45.70/generate_config.py
export SEED=$(python seed_generate.py)
python generate_config.py
./mm2```


[16-Aug-19 03:31 AM] Slyris#2880
exactly !


[16-Aug-19 03:31 AM] Slyris#2880
This will work on windows ?


[16-Aug-19 03:31 AM] TonyL#3577
I spin such nodes by AWS ECS, not sure about windows


[16-Aug-19 03:31 AM] Slyris#2880
if docker work on windows it's should work


[16-Aug-19 03:32 AM] TonyL#3577
Docker is quite tricky on win as far as I know - but I believe it's possible to make it work


[16-Aug-19 03:32 AM] Slyris#2880
Yeah, we just need to add some premined coins


[16-Aug-19 03:32 AM] Slyris#2880
if it's possible


[16-Aug-19 03:33 AM] Slyris#2880
and fetch MM2 config from github antara maker bot i believe


[16-Aug-19 03:33 AM] Slyris#2880
https://github.com/KomodoPlatform/antara-makerbot/blob/master/assets/MM2.json

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/assets/MM2.json
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[16-Aug-19 03:34 AM] TonyL#3577
I'm generating config very straight by such script:
```import os

f = open("MM2.json","w+")

f.write('{\n')
if 'SEEDIP' in os.environ:
    f.write('"seednodes":' + '[' + os.environ['SEEDIP'] +'],\n')
    print('"seednode":' + '[' + os.environ['SEEDIP'] +'],\n')
    f.write('"gui":"MM2GUI",\n')
    f.write('"rpc_password":"156ewr",\n')
    f.write('"rpcip":"0.0.0.0",\n')
    f.write('"netid":7777,\n')
    f.write('"userhome":' + '"' + os.environ['HOME'] + '",\n')
    f.write('"passphrase":'+'"' + os.environ['SEED']+'",\n')
    f.write('"rpc_local_only":false\n')
    f.write('}\n')
else:
    f.write('"i_am_seed":true,\n')
    f.write('"gui":"MM2GUI",\n')
    f.write('"rpc_password":"156ewr",\n')
    f.write('"rpcip":"0.0.0.0",\n')
    f.write('"netid":7777,\n')
    f.write('"userhome":' + '"' + os.environ['HOME'] + '",\n')
    f.write('"passphrase":'+'"' + os.environ['SEED']+'",\n')
    f.write('"rpc_local_only":false\n')
    f.write('}\n')

f.close()```


[16-Aug-19 03:34 AM] TonyL#3577
also handling case if seednode spinning is needed


[16-Aug-19 03:35 AM] Slyris#2880
yeah we can totaly, but if we can fetch the config is great too


[16-Aug-19 03:35 AM] Slyris#2880
AS you wish


[16-Aug-19 03:35 AM] Slyris#2880
I just want in my c++ programm to call `docker-compose build` and everything work


[16-Aug-19 03:36 AM] Slyris#2880
Because for the moment i'm doing


[16-Aug-19 03:36 AM] Slyris#2880
```cpp
mm2_client::mm2_client(const antara::mmbot::config &cfg, bool should_enable_coins) : mmbot_cfg_(cfg)
    {
        VLOG_SCOPE_F(loguru::Verbosity_INFO, pretty_function);
        using namespace std::literals;
        std::array<std::string, 1> args = {(std::filesystem::current_path() / "assets/mm2").string()};
        auto path = (std::filesystem::current_path() / "assets/").string();
        auto ec = background_.start(args, path.c_str());
        if (ec) {
            VLOG_SCOPE_F(loguru::Verbosity_ERROR, "error: %s", ec.message().c_str());
        }
        ec = background_.wait(5s);
        if (ec != reproc::error::wait_timeout) {
            VLOG_SCOPE_F(loguru::Verbosity_ERROR, "error: %s", ec.message().c_str());
        } else {
            VLOG_SCOPE_F(loguru::Verbosity_INFO, "mm2 successfully launched");
        }
        sink_thread_ = std::thread(
                [this]() { this->background_.drain(reproc::stream::out, reproc::sink::discard()); });
        if (should_enable_coins) {
            enable_tests_coins();
        }
    }
```


[16-Aug-19 03:37 AM] Slyris#2880
(everything work with calling mM2 like that, expect that i dont have any coins in my balance of RICK and MORTY)


[16-Aug-19 03:38 AM] Slyris#2880
@Mylo I will soon expose a http call that can let you look at orderbook from mm2 dex


[16-Aug-19 03:40 AM] Mylo#8306
cool.   i'm starting a tutorial series next week on building a GUI called "Marketmaker Club" and it starts off with the basic backend of marketmaker.  I will introduce maker bot after another cpl weeks so ppl can understand what it going on under the hood if they are not familiar with C++.


[16-Aug-19 03:42 AM] Mylo#8306
yeah binary docker already on docker hub.  `docker pull -i -t komodocakeshop/dev-atomicdex-api`  the entrypoint can be changed to run `start.sh` like @TonyL has already mentioned.   he probably has a more e2e solution for your automated test environment.


[16-Aug-19 03:44 AM] TonyL#3577
I'm just thinking now - we need to download komodod now and make network to spin this chain each time. Looks like overengineering. We may just hardcode encoded seedphrase with 1 million RICK and 1 million MORTY and problem is solved. Will think more how to solve this particular case better


[16-Aug-19 03:45 AM] Slyris#2880
What i'm suggesting it's if one of you can create his own branch and do his own tests remplacing the part launching mm2 in the code by a custom docker


[16-Aug-19 03:45 AM] Slyris#2880
If you manage to pass the unit tests this way, I will accept a pull request with the docker


[16-Aug-19 03:46 AM] Slyris#2880
I will add the call balance in a very short time


[16-Aug-19 03:47 AM] Slyris#2880
In the meantime I have to continue the rest of the program


[16-Aug-19 03:47 AM] Mylo#8306
i need to re-read.   why are we trying to add docker again?    starting mm2 in electrum mode with hardcoded trading wallet passphrase does same thing.


[16-Aug-19 03:48 AM] Slyris#2880
I can do that ?


[16-Aug-19 03:48 AM] Slyris#2880
How we add hardcoded tradding wallet passphrase?


[16-Aug-19 03:48 AM] Slyris#2880
If it's that easy i will do it


[16-Aug-19 03:49 AM] Slyris#2880
If we can avoid docker it's great too, native is always good


[16-Aug-19 03:49 AM] Mylo#8306
you can pass in an environment variable to the automated test environment?


[16-Aug-19 03:49 AM] Slyris#2880
Of course.


[16-Aug-19 03:50 AM] Mylo#8306
great, no need to hardcode in the code!!


[16-Aug-19 03:50 AM] Slyris#2880
Im afk 15-20 min brb


[16-Aug-19 03:50 AM] Slyris#2880
Just let me know how we do that


[16-Aug-19 03:50 AM] Slyris#2880
and i will


[16-Aug-19 03:50 AM] TonyL#3577
In MM2.json use env variable as 'passphrase' value


[16-Aug-19 03:51 AM] TonyL#3577
make this env variable the seed for wallet with funds (can send as many RICK/MORTY as you need)

{Reactions}
üëç 

[16-Aug-19 03:51 AM] Slyris#2880
Ok we will try this


[16-Aug-19 03:51 AM] Slyris#2880
im afk for the moment coming in 20 min

{Reactions}
üëç 

[16-Aug-19 03:51 AM] TonyL#3577
and if this env variable is visible for public - encode it


[16-Aug-19 03:52 AM] TonyL#3577
`f.write('"passphrase":'+'"' + os.environ['SEED']+'",\n')` actually it's this line

{Reactions}
‚úÖ 

[16-Aug-19 03:53 AM] Mylo#8306
nah env var is in config of automated test system, e.g. https://docs.travis-ci.com/user/environment-variables/
within travis you say MYSECRET=abcdefg123
and in the public config file it says ENV[$MYSECRET] for example.


[16-Aug-19 03:53 AM] TonyL#3577
In build log it exposing


[16-Aug-19 03:53 AM] TonyL#3577
if I remember correct


[16-Aug-19 03:54 AM] Mylo#8306
probably when mm starts up, it spits out the pass phrase


[16-Aug-19 03:54 AM] Mylo#8306
maybe set a DEFINE/if automated test env, don't spit this logging out


[16-Aug-19 03:55 AM] TonyL#3577
`within travis you say MYSECRET=abcdefg123` with free travis you don't have access to machine and can't set local env vars


[16-Aug-19 03:55 AM] TonyL#3577
thats the clue


[16-Aug-19 03:56 AM] TonyL#3577
if CI on your machine it's easy for sure


[16-Aug-19 03:56 AM] Mylo#8306
public travis you can.  i think @gcharang uses it for publishing vuepress docs


[16-Aug-19 03:56 AM] TonyL#3577
https://docs.travis-ci.com/user/environment-variables/#defining-encrypted-variables-in-travisyml


[16-Aug-19 03:57 AM] Mylo#8306
https://itnext.io/publish-a-vuepress-site-on-github-pages-with-travis-82036243bf36


[16-Aug-19 03:57 AM] Mylo#8306
GITHUB_TOKEN


[16-Aug-19 03:58 AM] Mylo#8306
maybe deployment doesn't log so much.


[16-Aug-19 03:58 AM] TonyL#3577
you need to write variables values somewhere


[16-Aug-19 03:59 AM] Slyris#2880
you have a way to do it in travis settings


[16-Aug-19 03:59 AM] Slyris#2880
in private settings of project


[16-Aug-19 04:03 AM] TonyL#3577
aha, this one I wonder

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/611877719592140810/unknown.png


[16-Aug-19 04:03 AM] Slyris#2880
y


[16-Aug-19 04:04 AM] TonyL#3577
yeah, if travis not displaying anywhere value of variable defined there - problem is solved üòÉ


[16-Aug-19 04:04 AM] Slyris#2880
there is the same on appveyor ?


[16-Aug-19 04:04 AM] Slyris#2880
i hope

{Reactions}
ü§û 

[16-Aug-19 04:04 AM] Slyris#2880
will check after


[16-Aug-19 04:07 AM] Slyris#2880
agama wallet for rick and morty seed ?


[16-Aug-19 04:07 AM] Slyris#2880
i dont know which wallet i should use


[16-Aug-19 04:13 AM] Slyris#2880
@dcprevere Are you here ?


[16-Aug-19 04:14 AM] TonyL#3577
I can generate for you one on AtomicDEX mobile and DM


[16-Aug-19 04:15 AM] TonyL#3577
Also possible to dump wif from komodod


[16-Aug-19 04:15 AM] Slyris#2880
yeah probably Tony, i will ask you when i will be ready


[16-Aug-19 04:15 AM] Slyris#2880
but for the moment i need to finish order_book call from dex

{Reactions}
üëç 

[16-Aug-19 09:07 AM] Slyris#2880
@artem.pikulin Sometimes i have to type the command : `kill -9 $(lsof -t -i:7783)` Seem's like even if mm2 is stopped it's still running but i dont know if it's from me (putting it in background) or it's a bug from mm2 itself


[16-Aug-19 09:07 AM] Slyris#2880
@TonyL Tommorow before launching the antara-makerbot, type the command: `kill -9 $(lsof -t -i:7783)` please


[16-Aug-19 09:31 AM] TonyL#3577
I‚Äôm doing pkill mmbot in updating script, can change on kill -9 sure


[16-Aug-19 09:43 AM] Slyris#2880
(the kill lsof is for mm2 actually)


[16-Aug-19 09:43 AM] Slyris#2880
to be sure that is close correctly


[16-Aug-19 09:43 AM] Slyris#2880
(it's kill the port of mm2)


[16-Aug-19 09:45 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/611963794427609098/Capture_decran_2019-08-16_a_18.45.08.png


[16-Aug-19 09:45 AM] Slyris#2880
Seem's to work @Mylo :p


[16-Aug-19 03:55 PM] Mylo#8306
Great!  I‚Äôll start poking around next week.


[17-Aug-19 02:24 AM] Slyris#2880
@Mylo my_balance RPC call merged


[17-Aug-19 02:37 AM] Mylo#8306
Thanks mate, you‚Äôre gonna be able to add the rest of the api pretty quickly if you‚Äôre moving onto these tasks already.  Very dev friendly API.  setprice and buy are the trading functions, cancel & history have a cpl calls each.

Does server handle CORS (HTTP OPTIONS)?


[17-Aug-19 03:54 AM] Slyris#2880
@Mylo Yeah this my plan, (i dont know about cors, but there is no problem i think)


[17-Aug-19 03:54 AM] Slyris#2880
what is `cpl` ?


[18-Aug-19 06:21 AM] Mylo#8306
"couple"


[18-Aug-19 06:21 AM] Mylo#8306
sorry my slang üò¨


[18-Aug-19 07:39 AM] Slyris#2880
@Mylo No problem, tommorow i will implement version call and probably try to setup the passphrase with @TonyL

{Reactions}
üëç (2) 

[18-Aug-19 07:39 AM] Slyris#2880
so i can have some rick and morty in the balance


[19-Aug-19 02:05 AM] artem.pikulin#0794
@Slyris Hi! `Sometimes i have to type the command : kill -9 $(lsof -t -i:7783) Seem's like even if mm2 is stopped it's still running but i dont know if it's from me (putting it in background) or it's a bug from mm2 itself` - how do you stop MM2? Do you use https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#stop ?

{Embed}
https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html
DEX API | AtomicDEX Documentation
Documentation for developers building on AtomicDEX


[19-Aug-19 02:09 AM] TS#7923
@Slyris @Mylo 
Hi guys, just wanted to make sure we all know where we are and what's left to do (especially me üòÑ ).

As far as I understand this is where we are currently:
- Price module is ready, it works, and it has an API a frontend can connect to
- Strategy module (add / remove orders dynamically based on the market price and a few parameters) is not ready yet, it's in the works. *Is this correct?*
- Mylo is working on the frontend but it's not fully functional yet because the strategy module is not ready.

Is this correct?


[19-Aug-19 02:13 AM] Slyris#2880
@TS yes, and mm2 http API is partially ready (version, my_balance, electrum)


[19-Aug-19 02:14 AM] Slyris#2880
@artem.pikulin It's a third party library that kill the program (using terminate I believe I will also implement stop soon)


[19-Aug-19 02:15 AM] TS#7923
Thanks @Slyris ! We were discussing the timing and we should have an internal deadline of around 28 August (mid-next week, can be +/- 1 day)


[19-Aug-19 02:15 AM] TS#7923
Do you think it is feasible?


[19-Aug-19 02:17 AM] Slyris#2880
The whole mm2 http API will be ready, for the strategy module I need some news from @dcprevere  !


[19-Aug-19 02:18 AM] Slyris#2880
I have to setup something with @TonyL today and once I have some Tests coins it's should be easier to implement the rest of the API, on top of that we will need some higher call probably but I need to see with @dcprevere


[19-Aug-19 02:18 AM] artem.pikulin#0794
The recommended way to stop MM2 is `stop` RPC. But I think that MM2 might not properly react to SIGKILL, need to check it, but it will be low priority since there's `stop` method.


[19-Aug-19 02:19 AM] TS#7923
Thanks, makes sense! @dcprevere let's discuss if you think an internal deadline of mid-next week is feasible.


[19-Aug-19 02:19 AM] Slyris#2880
https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md @TS

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[19-Aug-19 02:19 AM] Slyris#2880
There is some documentation available already


[19-Aug-19 02:20 AM] Slyris#2880
So someone can start GUI already and go further once we have more http call


[19-Aug-19 02:20 AM] Slyris#2880
Step by step


[19-Aug-19 02:20 AM] TS#7923
Yes, thanks, this is very helpful. @Mylo is working on the GUI


[19-Aug-19 02:20 AM] Slyris#2880
@Mylo let me know which http call you need in priority


[19-Aug-19 02:21 AM] Slyris#2880
So I can focus on that


[19-Aug-19 02:21 AM] Slyris#2880
I will be able to work today around 6pm to 1am (Paris time)


[19-Aug-19 02:23 AM] Slyris#2880
@TS I will probably have some more questions about the initial Google docs that you give me


[19-Aug-19 02:24 AM] Slyris#2880
@TS *


[19-Aug-19 03:43 AM] artemciy_dice#0049
`> It's a third party library that kill the program (using terminate I believe`

@Slyris, any specifics? What third party library? What signal it sends? What do you think the expected behavior is and what happens instead?

(And it might be better to continue this in the tracker: https://github.com/KomodoPlatform/atomicDEX-API/issues/523)

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/523)
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
üëç (2) 

[19-Aug-19 03:51 AM] Slyris#2880
https://github.com/DaanDeMeyer/reproc

I will open an issue this evening not at home right now

{Embed}
https://github.com/DaanDeMeyer/reproc
DaanDeMeyer/reproc
Cross-platform (C99/C++11) process library. Contribute to DaanDeMeyer/reproc development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/Ke-97dM-7tTWy5MoCv1pyEAv7785d6c6zfhVznsSbB8/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/9395011

{Reactions}
awthanks 

[19-Aug-19 04:02 AM] dcprevere#1502
Hi all, sorry for my quietness, I've been ill for the past couple of days.


[19-Aug-19 04:03 AM] dcprevere#1502
As for the strategy manager, the two remaining tasks are to add a REST endpoint to call the objects methods, and to add the loop that sends requests to the OM


[19-Aug-19 04:04 AM] dcprevere#1502
The methods that these will use have been written already, so the lion's share of that is done.


[19-Aug-19 04:04 AM] dcprevere#1502
At the moment, I am writing the CEX integration.


[19-Aug-19 04:06 AM] dcprevere#1502
To clarify re the strategy manager, the add and get methods for strategies are ready, it's just that the strategies aren't being used.


[19-Aug-19 04:13 AM] dcprevere#1502
@TS What is needed for an internal deadline? Would this be an alpha, beta, a 1.0 release?


[19-Aug-19 04:19 AM] TS#7923
@dcprevere A good beta that we can use for not just internal testing but we can also give it to projects we want to work with like Digibyte. All features should work as specificed, but it doesn't need to be very fancy.


[19-Aug-19 04:20 AM] dcprevere#1502
@TS , okay let me have a think.


[19-Aug-19 04:49 AM] ca333#0333
We wont be able to sign it off for public/external usage by that date @TS - but according to the status the project should be mostly "done" this week if @dcprevere confirms his part wont take much more time. i.e. by next week optimally no active coding: only testing, enhancing and bugfixing stuff. 
Plz ensure that 3rd parties (DGB) are aware of the codebase status before putting hands (funds) on it. 
We (and specially QA) will be able to sign this off for public release (beta) ~2 - 4 weeks after init-test. So likely early or mid September. CC: @TonyL @Slyris

{Reactions}
‚úÖ 

[19-Aug-19 04:53 AM] Slyris#2880
Some review of dependencies are required too

{Reactions}
üëç 

[19-Aug-19 04:53 AM] Slyris#2880
(security point of view atleast)


[19-Aug-19 04:59 AM] ca333#0333
Plz add the dependencies list to the README whenever you get a chance - i am offline (holidays) most of this week and will initiate the secure code review next week when i am back.


[19-Aug-19 05:01 AM] dcprevere#1502
Okay


[19-Aug-19 05:02 AM] dcprevere#1502
And is there an approved library I can use for websockets?


[19-Aug-19 05:02 AM] Slyris#2880
@ca333 they are already in the readme

{Reactions}
üëç 

[19-Aug-19 05:02 AM] Slyris#2880
@dcprevere restinio already support websocket

{Reactions}
‚òù 

[19-Aug-19 05:03 AM] dcprevere#1502
Great, thanks


[19-Aug-19 05:17 AM] TS#7923
@dcprevere I think I wasn't entirely clear üôÇ By "all features" I mean the features outlined in the orignal specs: the price module, strategy module, trading module, GUI. We do _not_ need the CEX integration for this beta.


[19-Aug-19 05:18 AM] dcprevere#1502
Okay! That's a relief


[19-Aug-19 05:18 AM] dcprevere#1502
I'll shift my focus away from that for the time being then


[19-Aug-19 05:20 AM] dcprevere#1502
And concentrate on finishing the strategy manager


[19-Aug-19 05:41 AM] TS#7923
Sounds great!


[19-Aug-19 05:41 AM] TS#7923
Thank you


[19-Aug-19 10:16 AM] Slyris#2880
@TonyL Successfully get some rick and morty :p i pushed the code and encrypted env variable on CI


[19-Aug-19 10:32 AM] TonyL#3577
@Slyris great! is it enough for now to perform RPC calls tests?


[19-Aug-19 10:32 AM] Slyris#2880
@TonyL I have a test that doesn't pass on Linux, but i dont have linux can someone investigate ? (im on osx right now)


[19-Aug-19 10:32 AM] Slyris#2880
https://github.com/KomodoPlatform/antara-makerbot/pull/37/checks?check_run_id=197305803

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/pull/37/checks?check_run_id=197305803
feat(mm2-dex): add passphrase detection by Milerius ¬∑ Pull Reques...
https://images-ext-1.discordapp.net/external/zLcyGYozrbjKY3UGH_9M5e2phOzgjnMLCfPiv_Pn16w/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/21139416


[19-Aug-19 10:33 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/613063064564137994/Capture_decran_2019-08-19_a_19.33.34.png


[19-Aug-19 10:33 AM] TonyL#3577
Sure, I'm on ubuntu. Just run as `./mmbot-test` ?


[19-Aug-19 10:34 AM] Slyris#2880
yeah


[19-Aug-19 10:34 AM] Slyris#2880
checkout roman_dev

{Reactions}
üëå 

[19-Aug-19 10:34 AM] Slyris#2880
set FORCE_MM2_PASSPHRASE variable to the seed


[19-Aug-19 10:34 AM] Slyris#2880
FORCE_MM2_PASSPHRASE="seed"


[19-Aug-19 10:34 AM] Slyris#2880
that you give me earlier

{Reactions}
üëç 

[19-Aug-19 10:37 AM] Slyris#2880
Seem's travis issue that doesn't set up the env variable correctly


[19-Aug-19 10:43 AM] TonyL#3577
```[doctest] test cases:     34 |     33 passed |      1 failed |      0 skipped
[doctest] assertions:     81 |     80 passed |      1 failed |
[doctest] Status: FAILURE!
```


[19-Aug-19 10:43 AM] TonyL#3577
```/home/tony/roman_mmbot/antara-makerbot/src/config/config.tests.cpp:66:
  Scenario: loading configuration
     Given: a configuration doesn't exist in the given path
  And when: we load the configuration from a root directory
      Then: we got a default configuration

/home/tony/roman_mmbot/antara-makerbot/src/config/config.tests.cpp:73: FATAL ERROR: REQUIRE_FALSE( std::filesystem::exists("/foo") ) is NOT correct!
  values: REQUIRE_FALSE( true )
```


[19-Aug-19 10:43 AM] TonyL#3577
this one failed on my side @Slyris Tests with passphrase usage looks fine


[19-Aug-19 10:45 AM] Slyris#2880
you need to run tests from bin folder


[19-Aug-19 10:45 AM] Slyris#2880
@TonyL


[19-Aug-19 10:45 AM] TonyL#3577
I run it from bin folder


[19-Aug-19 10:45 AM] TonyL#3577
`/home/tony/roman_mmbot/antara-makerbot/build/bin`


[19-Aug-19 10:45 AM] Slyris#2880
you are root ?


[19-Aug-19 10:45 AM] Slyris#2880
wtf xD


[19-Aug-19 10:45 AM] Slyris#2880
you create folder /foo i believe


[19-Aug-19 10:45 AM] TonyL#3577
yes, I run it under the root


[19-Aug-19 10:45 AM] Slyris#2880
My program consider you are not root


[19-Aug-19 10:45 AM] Slyris#2880
sry


[19-Aug-19 10:45 AM] TonyL#3577
oh ok üôÇ


[19-Aug-19 10:47 AM] Slyris#2880
@TonyL Seem's fixed on travis, i quoted the passphrase


[19-Aug-19 10:47 AM] Slyris#2880
and seem's better


[19-Aug-19 10:47 AM] Slyris#2880
im waiting new ci results now


[19-Aug-19 10:48 AM] TonyL#3577
ok, I recommend you to make first assert before another tests start that address which you'll get for this passphrase is equal to `RDbAXLCmQ2EN7daEZZp7CC9xzkcN8DfAZd`


[19-Aug-19 10:48 AM] TonyL#3577
created `foo` directory, now another test failing hmm


[19-Aug-19 10:48 AM] TonyL#3577
```===============================================================================
/home/tony/roman_mmbot/antara-makerbot/src/http/http.server.tests.cpp:99:
TEST CASE:  test mm2 my balance

/home/tony/roman_mmbot/antara-makerbot/src/http/http.server.tests.cpp:107: ERROR: CHECK_EQ( resp.code, 200 ) is NOT correct!
  values: CHECK_EQ( -1, 200 )
```

nvm same /foo test failing üôÇ


[19-Aug-19 10:56 AM] Slyris#2880
Hmm


[19-Aug-19 10:57 AM] Slyris#2880
Do you remove cache and rebuild before launching tests ? @TonyL


[19-Aug-19 10:57 AM] Slyris#2880
(remove the build folder)


[19-Aug-19 10:57 AM] TonyL#3577
yes, it's totally fresh clone


[19-Aug-19 10:58 AM] Slyris#2880
O_o


[19-Aug-19 10:58 AM] TonyL#3577
Created special `roman_mmbot` folder for your roman_dev branch üôÇ


[19-Aug-19 10:58 AM] Slyris#2880
Hmm


[19-Aug-19 10:59 AM] Slyris#2880
kill -9 $(lsof -t -i:7783) ?


[19-Aug-19 10:59 AM] Slyris#2880
and rerun tests @TonyL


[19-Aug-19 10:59 AM] TonyL#3577
`lsof -t -i:7783` returns nothing


[19-Aug-19 11:00 AM] Slyris#2880
'_' test on travis are all passing


[19-Aug-19 11:00 AM] Slyris#2880
that's strange


[19-Aug-19 11:00 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/613069851812036612/Capture_decran_2019-08-19_a_20.00.33.png

{Reactions}
üî• (3) 

[19-Aug-19 11:00 AM] TonyL#3577
only `/foo` tests failing on my side, it should be specific for my users policy maybe


[19-Aug-19 11:01 AM] Slyris#2880
yeah because you are root


[19-Aug-19 11:01 AM] TonyL#3577
I've tried not under root too, and /foo directory actually existst with json inside


[19-Aug-19 11:01 AM] Slyris#2880
The tests is trying to load a configuration from a root directory


[19-Aug-19 11:01 AM] Slyris#2880
he shouldnt have access to it


[19-Aug-19 11:01 AM] Slyris#2880
He create a json inside


[19-Aug-19 11:01 AM] Slyris#2880
but the tests is about that


[19-Aug-19 11:01 AM] TonyL#3577
Aha, I see


[19-Aug-19 11:02 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/613070289458429955/Capture_decran_2019-08-19_a_20.02.17.png


[19-Aug-19 11:02 AM] Slyris#2880
You break my scenario because you are root


[19-Aug-19 11:03 AM] TonyL#3577
I'm very sorry üòÉ


[19-Aug-19 11:03 AM] Slyris#2880
np


[19-Aug-19 11:04 AM] Slyris#2880
So i successfully get some rick and morty it's should be ok for the unit tests

{Reactions}
üëç (2) 

[20-Aug-19 02:37 PM] Slyris#2880
@Doom 

thanks for catching the ub: https://media.discordapp.net/attachments/206446089275047936/613486013469425707/Screenshot_from_2019-08-20_23-34-10.png

In my code was tricky and funny debugging session

{Embed}
https://media.discordapp.net/attachments/206446089275047936/613486013469425707/Screenshot_from_2019-08-20_23-34-10.png
https://images-ext-2.discordapp.net/external/TX_xrxPEB4isx7NXBEcHPvneIiDJAuFcOm-y2C2KjqQ/https/media.discordapp.net/attachments/206446089275047936/613486013469425707/Screenshot_from_2019-08-20_23-34-10.png

{Reactions}
üòç (2) 

[20-Aug-19 10:20 PM] Mylo#8306
http://demo.marketmaker.club/#/orderbooks
it resets the marketmaker docker every hour on the hour (00) in UTC timezone.
i just ported it to be hosted (not on localhost).
you will see unfiinshed stuff which is tedious, like canceling your order, or going to the market the order is in.   these are all just simple tasks to complete - there are just a lot of them because it is a GUI.

basic functions are there, obv i didn't complete a lot of backend looping stuff because my goal was to have something functional to create the start of GUI tutorials etc.

```
 blank, no coins to start with again so you can , re-enable, and jig around with it.
COINS works (but buggy)
ORDERBOOKS works (when coins are enabled, no coins enabled, no orderbooks)
CEX PRICES (works, binance on top, no dgb on binance, or rick or morty)
CEX PRICES (works bittrex, maybe no DOGE)
SETTINGS (reads settings, but doesn't do much with them)
if you're going to set some trades, on orderbook
do it on ASKS side only. but they'll stop after mm2 restarts (every 30 mins)
```


[20-Aug-19 10:21 PM] Mylo#8306
i will change it to 30mins, every (30/00) in cron, so you don't have to wait for the _full experience_


[20-Aug-19 10:22 PM] Mylo#8306
00/30


[20-Aug-19 10:23 PM] Mylo#8306
i haven't touched much GUI stuff in last 9 days or so.  can hit it again for stress test and package it up into a docker image if ppl really want to experiment.


[20-Aug-19 10:30 PM] Mylo#8306
i'll write up what API calls are called from what GUI actions in next 24 hours


[20-Aug-19 10:31 PM] Mylo#8306
i'll be in transit, so no updates


[21-Aug-19 04:49 AM] Mylo#8306
@Slyris  so i use the following URL routes https://docs.marketmaker.club/


[21-Aug-19 04:50 AM] Mylo#8306
the _BOT_ parts, i don't care about once i migrate from nodejs backend to your industrial strength bot.


[21-Aug-19 04:51 AM] Mylo#8306
URL routes, just map to marketmaker RPC requests or the price fetching stuff


[21-Aug-19 04:54 AM] Mylo#8306
you don't have to keep my url route naming convention at all.  it's easy for me (or anyone to use whatever naming convention is used by dev team)


[21-Aug-19 05:36 AM] Slyris#2880
Great @mylo I'm home in 2 hours until 2am today


[21-Aug-19 05:36 AM] Slyris#2880
So I will implement a lot today's


[21-Aug-19 05:36 AM] Slyris#2880
Will ping each time I update the documentation


[21-Aug-19 05:38 AM] Slyris#2880
@Mylo


[21-Aug-19 05:50 AM] Mylo#8306
Ok I‚Äôll be on a plane in 2 hours for 12 hours.  Looks like it‚Äôll come together well in next cpl days!


[21-Aug-19 12:29 PM] Slyris#2880
Background service price thread is pushed, wait for CI results.


[21-Aug-19 02:20 PM] Slyris#2880
@Mylo `getallprice` http call pushed, waiting for CI results.


[21-Aug-19 02:24 PM] Slyris#2880
@dcprevere Still waiting for the answer from Report.CI owner for your problem, may be you can close your pr and reopen a little one to see what happen


[21-Aug-19 07:23 PM] dcprevere#1502
I've created a PR that just makes a change to the `.gitignore`, let's see what happens


[21-Aug-19 07:23 PM] dcprevere#1502
CI is running now


[21-Aug-19 07:53 PM] dcprevere#1502
... and it fails.


[21-Aug-19 07:53 PM] dcprevere#1502
Amazing.


[21-Aug-19 07:54 PM] dcprevere#1502
https://github.com/KomodoPlatform/antara-makerbot/pull/41

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/pull/41
test: do all my PRs fail? by DCPRevere ¬∑ Pull Request #41 ¬∑ Komo...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[21-Aug-19 09:21 PM] Slyris#2880
https://github.com/apps/report-ci

{Embed}
https://github.com/apps/report-ci
Build software better, together
GitHub is where people build software. More than 40 million people use GitHub to discover, fork, and contribute to over 100 million projects.
https://images-ext-1.discordapp.net/external/GknnCjizMYMXTf7AxtPGiAkqk1cGv6dwIUxYVc4g3cA/https/github.githubassets.com/images/modules/open_graph/github-logo.png


[21-Aug-19 09:21 PM] Slyris#2880
@dcprevere


[21-Aug-19 09:21 PM] Slyris#2880
Did you install this ?


[21-Aug-19 09:23 PM] dcprevere#1502
It asks if I want to install on my repos or on a Komodo repo


[21-Aug-19 09:23 PM] dcprevere#1502
Clicking on Komodo gives me a 404


[21-Aug-19 09:24 PM] dcprevere#1502
Do I need to be approved in the configuration?


[21-Aug-19 09:25 PM] dcprevere#1502
I'll add to one of my repos and try again


[21-Aug-19 09:27 PM] Slyris#2880
Oki


[21-Aug-19 09:31 PM] Slyris#2880
The question is


[21-Aug-19 09:31 PM] Slyris#2880
Why it's was working before


[21-Aug-19 09:32 PM] Slyris#2880
https://report.ci/settings

{Embed}
https://report.ci/settings
report continuous integration test results to github
Report.ci publishes the test results to github and generates code annotations. If someone breaks your tests in a pull-request you know where it came from. It supports a wide range of testing framework and is easy to use with continuous integration services.


[21-Aug-19 09:33 PM] Slyris#2880
Did you see the token for Komodo ?


[21-Aug-19 09:38 PM] Slyris#2880
@dcprevere


[21-Aug-19 09:39 PM] dcprevere#1502
I can't see any token


[21-Aug-19 09:39 PM] Slyris#2880
Dm me screenshots


[21-Aug-19 09:39 PM] Slyris#2880
Of what you see please


[22-Aug-19 11:59 AM] Slyris#2880
@artemciy_dice  or @artem.pikulin 

After a `setprice` the balance should change or not ?

for example if i try to buy 1 `MORTY` with 1 `RICK` with an initial balance of 7777 `RICK`, after calling `setprice` should the balance be `7776` ?


[22-Aug-19 12:02 PM] artemciy_dice#0049
I think not, but `locked_by_swaps` might change in the balance reply.


[22-Aug-19 12:03 PM] Slyris#2880
@artemciy_dice Ok, it's for my unit test i want to check that my order is successfully created


[22-Aug-19 12:04 PM] Slyris#2880
i'm supposing i can use order_status


[22-Aug-19 12:04 PM] Slyris#2880
with the uuid returned by the call


[22-Aug-19 12:05 PM] Slyris#2880
for https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html#my-balance (i didnt see an answer locked_by_swaps)

{Embed}
https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html
DEX API | Komodo Documentation
Documentation for developers building on Komodo


[22-Aug-19 03:16 PM] Slyris#2880
@Mylo merged setprice and cancel_order


[22-Aug-19 07:46 PM] Mylo#8306
thanks!!   this is great.   i will update you on my progress later today.


[22-Aug-19 11:35 PM] artem.pikulin#0794
@Slyris Hi, MM2 has actively marketed `Liquidity multiplier` feature that actually means that same funds can be used for several orders. So balance is not changed when you create the order. Also `locked_by_swaps` is above zero when some order is matched and swap started, but transactions are not sent yet. This field is mentioned in my fork of docs repo (https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md#response-16), but not updated on website yet.

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[22-Aug-19 11:36 PM] artem.pikulin#0794
And yes, using `order_status` is valid way to check that your order is created and active.


[22-Aug-19 11:37 PM] Slyris#2880
@artem.pikulin thank's for the additional information, usefull !

{Reactions}
ü§ù 

[23-Aug-19 11:29 PM] Slyris#2880
@Mylo Hello, which other mm2 rpc call do you need for the GUI for a beta phase ?


[23-Aug-19 11:30 PM] Slyris#2880
we have right now `setprice, cancel_order, my_balance, version, orderbook`


[23-Aug-19 11:32 PM] Slyris#2880
i'm thinking about add `buy, getenabledcoins, gettradefee, cancelallorders` this weekend


[23-Aug-19 11:37 PM] Mylo#8306
Buy getenabledcoins cancelallorders would be good


[23-Aug-19 11:37 PM] Mylo#8306
Hi üëã


[23-Aug-19 11:38 PM] Mylo#8306
Buy is required for someone who sees a price they like and going for it (taker)


[23-Aug-19 11:38 PM] Mylo#8306
That is the priority one, then cancelallorders.


[23-Aug-19 11:39 PM] Slyris#2880
great thank's


[25-Aug-19 07:35 AM] Slyris#2880
@Mylo `buy` and `cancel_all_orders` are implemented and merged enjoy it !

{Reactions}
üëç 

[25-Aug-19 07:36 AM] Slyris#2880
I think we all have the necessary for next week (on my part). So we will be able to start testing and eventually prepare higher level http calls. For the moment on the side of dex (mm2) it is simply a replication rpc but in http. There is cache for median price recovery that refreshes every 30 seconds.


[25-Aug-19 07:38 AM] Slyris#2880
@ca333 Let me know for the next week test etc ! I will continue to improve the code quality meanwhile this time


[25-Aug-19 02:29 PM] ca333#0333
excellent @Slyris - we will start testing this week and will involve you into the QA process. 
CC: @TonyL

{Reactions}
üëç 

[25-Aug-19 02:30 PM] ca333#0333
@Mylo whats the current GUI status?


[25-Aug-19 04:59 PM] Mylo#8306
working on only makerbot integration mon/tue


[25-Aug-19 05:00 PM] Mylo#8306
updating components to move from "my functional prototype" to this


[25-Aug-19 05:00 PM] Mylo#8306

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/615334620543582258/unknown.png


[25-Aug-19 05:00 PM] Mylo#8306
also mon/tue


[25-Aug-19 05:00 PM] Mylo#8306
RICK & MORTY only focus on first


[25-Aug-19 05:02 PM] Mylo#8306
will send link to changes when ready for testing

{Reactions}
üëç 

[25-Aug-19 05:03 PM] Mylo#8306
i won't be starting for 4 more hours or so, have a docs appointment and moving to workspace for the week.


[25-Aug-19 10:58 PM] ca333#0333
thanks for the informations - looking forward testing it!


[25-Aug-19 11:54 PM] Slyris#2880
It's beautiful @Mylo I like it


[25-Aug-19 11:59 PM] Mylo#8306
hi guys, just arrived at new place.   it is @TS torsten's "rough" design.   all funcs are there.  matter of wiring it up and testing the new integration.   the colours are from the prototyping tool - any styling can be done _much_ later.

{Reactions}
üëç 

[26-Aug-19 01:30 AM] smkhound#7640
build failing on ubuntu 18.04
```[ 61%] Building CXX object src/CMakeFiles/mmbot.dir/main.cpp.o
In file included from /home/smk762/antara-makerbot/src/http/http.server.hpp:21:0,
                 from /home/smk762/antara-makerbot/src/app/mmbot.application.hpp:19,
                 from /home/smk762/antara-makerbot/src/main.cpp:18:
/home/smk762/antara-makerbot/src/config/config.hpp:24:10: fatal error: filesystem: No such file or directory
 #include <filesystem>
          ^~~~~~~~~~~~
compilation terminated.
src/CMakeFiles/mmbot.dir/build.make:62: recipe for target 'src/CMakeFiles/mmbot.dir/main.cpp.o' failed
make[3]: *** [src/CMakeFiles/mmbot.dir/main.cpp.o] Error 1
CMakeFiles/Makefile2:2873: recipe for target 'src/CMakeFiles/mmbot.dir/all' failed
make[2]: *** [src/CMakeFiles/mmbot.dir/all] Error 2
CMakeFiles/Makefile2:2880: recipe for target 'src/CMakeFiles/mmbot.dir/rule' failed
make[1]: *** [src/CMakeFiles/mmbot.dir/rule] Error 2
Makefile:957: recipe for target 'mmbot' failed
make: *** [mmbot] Error 2
```
any tips?


[26-Aug-19 01:44 AM] TonyL#3577
Update gcc @smkhound


[26-Aug-19 01:46 AM] smkhound#7640
thought I did, but still reporting as 7.4 ü§∑üèº


[26-Aug-19 01:48 AM] TonyL#3577
Update alternatives / link


[26-Aug-19 01:48 AM] smkhound#7640
done, looks like working üëçüèº


[26-Aug-19 02:16 AM] smkhound#7640
after ```
cd bin
./mmbot-test```
```===============================================================================
/home/smk762/antara-makerbot/src/http/http.server.tests.cpp:129:
TEST CASE:  test mm2 setprice

/home/smk762/antara-makerbot/src/http/http.server.tests.cpp:136: ERROR: CHECK_EQ( resp.code, 200 ) is NOT correct!
  values: CHECK_EQ( 500, 200 )
```


[26-Aug-19 02:31 AM] TonyL#3577
@smkhound FORCE_MM2_PASSPHRASE="seed" set this env variable to some seed with rick morty balance


[26-Aug-19 02:31 AM] TonyL#3577
Before run the auto-tests


[26-Aug-19 02:32 AM] smkhound#7640
k, makes sense, cant setprice without balance


[26-Aug-19 02:32 AM] TonyL#3577
I think that needs to be added to readme üòÖ


[26-Aug-19 02:32 AM] smkhound#7640
I saw your script for configs in channel history, will use that


[26-Aug-19 02:37 AM] TonyL#3577
It might be good idea to test manually now to try to find edge cases like a with incorrect input params or spam let‚Äôs say


[26-Aug-19 02:40 AM] TonyL#3577
Since Slyris covering everything by tests we need to be creative in cases creation to find bugs üòÖ


[26-Aug-19 02:41 AM] smkhound#7640
error above resolved with actual Rick/Morty balance > 0 üòÑ


[26-Aug-19 02:42 AM] smkhound#7640
is there any docs, or just source code?


[26-Aug-19 02:43 AM] smkhound#7640
found - https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
üëç 

[26-Aug-19 04:31 AM] Slyris#2880
Yeah there is some docs


[26-Aug-19 04:31 AM] Slyris#2880
Sorry for the env variable it's not in the docs yet


[26-Aug-19 04:31 AM] Slyris#2880
Everything is not covered in test probably some error case that are not explained in the mm2 Dev docs


[26-Aug-19 04:31 AM] Slyris#2880
Such as error code rpc etc


[26-Aug-19 04:31 AM] Slyris#2880
If you find some bugs let me know


[26-Aug-19 04:34 AM] Slyris#2880
Each time you will find a bug I will add a new test case to solve this bug.


[26-Aug-19 04:42 AM] smkhound#7640
I got far enough to see json in browser, will take notes towards adding to docs as I go. I've got some CEX API keys (except coinbase) to test with as needed.


[26-Aug-19 09:21 AM] Slyris#2880
let me know if there is any problems

{Reactions}
üëçüèº 

[27-Aug-19 03:13 AM] TonyL#3577
@Slyris makerbot doesn't build on my machine atm:
```[ 63%] Building CXX object src/CMakeFiles/mmbot.dir/mm2/mm2.client.cpp.o
/root/antara-makerbot/src/mm2/mm2.client.cpp: In constructor ‚Äòantara::mmbot::mm2_client::mm2_client(bool)‚Äô:
/root/antara-makerbot/src/mm2/mm2.client.cpp:232:64: error: no matching function for call to ‚Äòreproc::process::start(std::array<std::__cxx11::basic_string<char>, 1>&, std::nullptr_t, const char*)‚Äô
         auto ec = background_.start(args, nullptr, path.c_str());
                                                                ^
compilation terminated due to -Wfatal-errors.
src/CMakeFiles/mmbot.dir/build.make:88: recipe for target 'src/CMakeFiles/mmbot.dir/mm2/mm2.client.cpp.o' failed
make[3]: *** [src/CMakeFiles/mmbot.dir/mm2/mm2.client.cpp.o] Error 1
CMakeFiles/Makefile2:2873: recipe for target 'src/CMakeFiles/mmbot.dir/all' failed
make[2]: *** [src/CMakeFiles/mmbot.dir/all] Error 2
CMakeFiles/Makefile2:2880: recipe for target 'src/CMakeFiles/mmbot.dir/rule' failed
make[1]: *** [src/CMakeFiles/mmbot.dir/rule] Error 2
Makefile:957: recipe for target 'mmbot' failed
make: *** [mmbot] Error 2
```


[27-Aug-19 03:13 AM] TonyL#3577
im on ```git log -1
commit 802db0ab9afdb0387090b3b222128828a691247d (HEAD -> master, origin/master, origin/HEAD)
Author: Sztergbaum Roman <rmscastle@gmail.com>
Date:   Mon Aug 26 18:20:23 2019 +0200

    improvements: fix warnings (#53)
```


[27-Aug-19 03:14 AM] TonyL#3577
can see that it building on CI, quite strange


[27-Aug-19 03:16 AM] TonyL#3577
totally removed build directory before new attempt and it seems fine


[27-Aug-19 03:38 AM] TonyL#3577
@Slyris I can see that now bot by default starting mm2 with some stub config:

```cat MM2.json 
{
  "gui":"CLI",
  "netid":9999,
  "rpc_password":"YOUR_PASSWORD_HERE",
  "passphrase":"YOUR_PASSPHRASE_HERE",
  "userhome":"mm2_local_data"
}``` 

maybe it's good idea to make some initialiazion on start and not let start mm2bot with such params? 

`userhome` param is not correct (and in general it reflects not mm2_local_data but $HOME), with such passpharase users by default will use wallet generated for  `YOUR_PASSPHRASE_HERE` seed

Can create GH issue if it has sense


[27-Aug-19 03:43 AM] TonyL#3577
what am I doing wrong? 

```curl -v http://95.217.44.58:81/api/v1/getprice?base_currency=KMD&quote_currency=ETH
Trying 95.217.44.58...
* TCP_NODELAY set
* Connected to 95.217.44.58 (95.217.44.58) port 81 (#0)
> GET /api/v1/getprice?base_currency=KMD HTTP/1.1
> Host: 95.217.44.58:81
> User-Agent: curl/7.61.0
> Accept: */*
> 
< HTTP/1.1 400 Bad Request
< Server: nginx/1.14.0 (Ubuntu)
< Date: Tue, 27 Aug 2019 10:40:16 GMT
< Content-Length: 0
< Connection: keep-alive
< 
* Connection #0 to host 95.217.44.58 left intact```


[27-Aug-19 04:10 AM] Slyris#2880
Hmm


[27-Aug-19 04:11 AM] Slyris#2880
Let me check


[27-Aug-19 04:12 AM] Slyris#2880
Can I have the URL please @TonyL


[27-Aug-19 04:12 AM] Slyris#2880
Thanks strange because according to your curl output the quote currency disappear


[27-Aug-19 04:13 AM] Slyris#2880
Is this normal ?


[27-Aug-19 04:15 AM] Slyris#2880
@TonyL for me the user should give his own mm2 JSON configuration I think this one is a default one probably wrong


[27-Aug-19 04:15 AM] Slyris#2880
Yourpassphrase will be replaced if the env variable FORCE_MM2_PASSPHRASE is present


[27-Aug-19 04:17 AM] Slyris#2880
http://95.217.44.58:81/api/v1/getprice?base_currency=KMD&quote_currency=ETH


[27-Aug-19 04:17 AM] Slyris#2880
For me it's working


[27-Aug-19 04:18 AM] Slyris#2880
May be try to quote your URL request with curl


[27-Aug-19 04:18 AM] Slyris#2880
Can be an issue.


[27-Aug-19 04:27 AM] TonyL#3577
Oh thanks, quotes helped üòä


[27-Aug-19 04:27 AM] TonyL#3577
But user even might dont know that he should preset config


[27-Aug-19 04:28 AM] TonyL#3577
Because when you starting mmbot - mm2 itself starting without any questions


[27-Aug-19 04:31 AM] Slyris#2880
Yeah it's the goal


[27-Aug-19 04:31 AM] Slyris#2880
So


[27-Aug-19 04:31 AM] Slyris#2880
What is your suggestions exactly I think I don't get it ?


[27-Aug-19 04:31 AM] Slyris#2880
Should he be able to setup his configuration through GUI ?


[27-Aug-19 04:32 AM] Slyris#2880
And then restart mm2 ?


[27-Aug-19 04:32 AM] Slyris#2880
For the users it's only look like settings in UI


[27-Aug-19 05:04 AM] TonyL#3577
yeah, I think it should be on GUI side


[27-Aug-19 05:05 AM] TonyL#3577
I suggest to not start mm2 by mmbot and let GUI start both, or GUI will ask config params on first run maybe like a init - should be an option as well


[27-Aug-19 05:24 AM] Slyris#2880
Ah ok because we asked me to launch mm2 in background and it's what I did !


[27-Aug-19 06:22 AM] ca333#0333
@Slyris this is fine plz keep it as is


[27-Aug-19 06:24 AM] ca333#0333
@TonyL - makerbot will launch mm2 and also interact with mm2 by providing API wrapper to the GUI - as soon as @dcprevere finishes the trading/logic part the makerbot will be complete. So right now it is still incomplete which might have been irritating.

{Reactions}
üëç 

[27-Aug-19 06:24 AM] Slyris#2880
Oki


[27-Aug-19 06:29 AM] dcprevere#1502
Hi, to give you all an idea of what I know that is left to do:
- run OM and SM asynchronously
- write DEX.cpp and conversion functions to go between MM2 and OM


[27-Aug-19 06:30 AM] dcprevere#1502
I have an open PR that fixes the OM logic


[27-Aug-19 06:30 AM] dcprevere#1502
I'm quite happy with it but will continue testing


[27-Aug-19 06:30 AM] Slyris#2880
It's seems to fail on windows I don't know why


[27-Aug-19 06:30 AM] Slyris#2880
Can you check @dcprevere


[27-Aug-19 06:31 AM] Slyris#2880
Will be home in 2 hours for working


[27-Aug-19 06:33 AM] dcprevere#1502
I'm looking now


[27-Aug-19 06:46 AM] Mylo#8306
@ca333 @Slyris 
GUI parts moving along, no mmbot integration started yet.   compile instructions for when i get around to it (bash script) would be mega appreciated if available @TonyL  or @smkhound if you have one.  probably be tomorrow with integration.  i've got new mockups to add.

marketview screen:  http://demo.marketmaker.club/#/traderview (hard code)
mockups to build:
1.  select market:  https://whimsical.com/84GhEA2xV75ucZC3Zu8Hp2
2. marketview additions:  https://whimsical.com/RudgtdF9d6cZEzG9b81BH3
3. dashboard:  https://whimsical.com/LXriD8ZbJeCwbeZQ8jAFBv

with dashboard, probably need to know the JSON & API stuff that will be available eventually,

{Embed}
https://whimsical.com/84GhEA2xV75ucZC3Zu8Hp2
MakerBot Markets navigation - phase 2
https://images-ext-1.discordapp.net/external/b3LZdtneXLiVSB1e0yNUTdPUn2R_uj10lEtJk80aHtc/%3Fbg%3D%2523F7F9FA%26fit%3Dwidth%26height%3D157%26scale%3D2%26stag%3D502%26width%3D300/https/imgr.whimsical.com/84GhEA2xV75ucZC3Zu8Hp2/png

{Embed}
https://whimsical.com/RudgtdF9d6cZEzG9b81BH3
MakerBot asset view (enabled)
https://images-ext-2.discordapp.net/external/c3gvgZZMXOUh5hdFB4TTdTjylDziLlbdJNoDbNH8LuU/%3Fbg%3D%2523F7F9FA%26fit%3Dwidth%26height%3D157%26scale%3D2%26stag%3D284%26width%3D300/https/imgr.whimsical.com/RudgtdF9d6cZEzG9b81BH3/png

{Embed}
https://whimsical.com/LXriD8ZbJeCwbeZQ8jAFBv
MakerBot Dashboard
https://images-ext-2.discordapp.net/external/xi5nWTiyxPsBeMda0jOsT29FaBYZIoqdfNrQBdsalME/%3Fbg%3D%2523F7F9FA%26fit%3Dwidth%26height%3D157%26scale%3D2%26stag%3D503%26width%3D300/https/imgr.whimsical.com/LXriD8ZbJeCwbeZQ8jAFBv/png


[27-Aug-19 06:49 AM] Mylo#8306
here is src for those bunch of components, in this dir.   will write tech info another day, still  working on it:
https://github.com/imylomylo/dev-mm2-web/blob/traderview/src/app/traderview/AppTraderView.vue

{Embed}
https://github.com/imylomylo/dev-mm2-web/blob/traderview/src/app/traderview/AppTraderView.vue
imylomylo/dev-mm2-web
Contribute to imylomylo/dev-mm2-web development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102


[27-Aug-19 08:09 AM] TonyL#3577
@Mylo bash script with instructions for build from gh readme:
```#!/bin/bash
   cd build
   cmake -DCMAKE_BUILD_TYPE=Release ../
   cmake --build . --target mmbot --config Release
   cmake --build . --target mmbot-test --config Release
```


[27-Aug-19 08:10 AM] Mylo#8306
beauty, thanks!

{Reactions}
üëç 

[27-Aug-19 08:11 AM] TonyL#3577 (pinned)
``` #!/bin/bash
 ACTION='\033[1;90m'
 FINISHED='\033[1;96m'
 READY='\033[1;92m'
 NOCOLOR='\033[0m' # No Color
 ERROR='\033[0;31m' 

cd /root/antara-makerbot
git fetch

 HEADHASH=$(git rev-parse HEAD)
 UPSTREAMHASH=$(git rev-parse master@{upstream})

 if [ "$HEADHASH" != "$UPSTREAMHASH" ]
 then
   dt=$(date '+%d/%m/%Y %H:%M:%S');
   echo $now
   echo -e $dt ${ERROR}Not up to date with origin. Redeploying.${NOCOLOR}
   git pull
   kill -9 $(lsof -t -i:7783)
   pkill mmbot
   cd build
   make clean
   cmake -DCMAKE_BUILD_TYPE=Release ../
   cmake --build . --target mmbot --config Release
   cmake --build . --target mmbot-test --config Release
   cd bin
   cp /root/mmbot_config.json assets/
   ./mmbot &
 else
   dt=$(date '+%d/%m/%Y %H:%M:%S');
   echo $now
   echo -e $dt ${FINISHED}Current branch is up to date with origin/master.${NOCOLOR}
 fi
``` I spin such updater script in cron - might be helpful if you want to keep bot up to date


[27-Aug-19 08:12 AM] TonyL#3577
in `mmbot_config.json` setting CEXes API keys and custom port if you need it


[27-Aug-19 08:13 AM] Mylo#8306
awesome thanks


[27-Aug-19 08:14 AM] Mylo#8306
Pinned a message.


[27-Aug-19 08:27 AM] Slyris#2880
For your testing purposes I suggest to build in debug mode


[27-Aug-19 08:27 AM] Slyris#2880
You will have more log if something is wrong

{Reactions}
üëå 

[28-Aug-19 02:43 AM] TonyL#3577 (pinned)
All current API calls works as expected it seems . Examples of bot api post reqiests via curl if somebody need:

```curl -d '{"base": "RICK", "method": "setprice",  "price": "1", "rel": "MORTY", "userpass": "$userpass", "volume": "1"}' -H "Content-Type: application/json" -X POST http://95.217.44.58:81/api/v1/legacy/mm2/setprice

curl -d '{"method": "cancel_order", "userpass": "$userpass", "uuid": "3057488a-92a2-4ca5-ae2e-77fbe65c6672"}' -H "Content-Type: application/json" -X POST http://95.217.44.58:81/api/v1/legacy/mm2/cancel_order

curl -d '{"cancel_by": {"type": "All"}, "method": "cancel_all_orders", "userpass": "$userpass"}' -H "Content-Type: application/json" -X POST http://95.217.44.58:81/api/v1/legacy/mm2/cancel_all_orders

curl -d '{"method": "buy", "base": "RICK", "price": "1", "rel": "MORTY", "volume": "1", "userpass": "$userpass"}' -H "Content-Type: application/json" -X POST http://95.217.44.58:81/api/v1/legacy/mm2/buy```

{Reactions}
üëç (2) 

[28-Aug-19 02:45 AM] Slyris#2880
Glad to read that !

{Reactions}
üíØ 

[28-Aug-19 03:27 AM] TS#7923
Guys, here's a document with all the GUI wireframes. There is still some work to do but we are getting there https://docs.google.com/document/d/1rZDfsuGrXESDY3owLXOEFSZkQ3Uzw9_aAUPHUsJ_aOc/edit?usp=sharing

{Embed}
https://docs.google.com/document/d/1rZDfsuGrXESDY3owLXOEFSZkQ3Uzw9_aAUPHUsJ_aOc/edit?usp=sharing
MakerBot GUI
WIREFRAMES:  Asset view with trading / strategy tools https://whimsical.com/RudgtdF9d6cZEzG9b81BH3  Asset view for disabled assets https://whimsical.com/CsXuji8TuobFgw38tppL8H  ‚ÄúMarkets‚Äù menu navigation phase 1 https://whimsical.com/XYsroVy4dahjFrrE4xjxYE  ‚ÄúMarkets‚Äù m...
https://images-ext-2.discordapp.net/external/v8V3j3H2TplhSGQ6fT4J1pwGfEMnYmZs7qHVACEq4Dg/https/lh5.googleusercontent.com/rBaSxi8n7CHhyUbVQDCHYBDF3lMpHdNgTtdoxQk2tKl2U3jAE80D73cSeIihnZMbF8H0Ow%3Dw1200-h630-p

{Reactions}
üëç (2) 

[28-Aug-19 06:07 AM] Mylo#8306
Pinned a message.


[28-Aug-19 11:12 AM] Slyris#2880
@TonyL Hey


[28-Aug-19 11:12 AM] Slyris#2880
Can we do some atomic swaps rick -> morty morty->rick on the test seed ? so i have some swap status and recent swaps


[28-Aug-19 11:13 AM] TonyL#3577
@Slyris sure


[28-Aug-19 11:13 AM] Slyris#2880
@dcprevere Asked me to add order_status recent swaps etc


[28-Aug-19 11:15 AM] Slyris#2880
@TonyL And give me an uuid that i can reuse please, so i will add it in unit tests


[28-Aug-19 11:17 AM] TonyL#3577
Ok, just realised that I have to make it from same machine on which API rolled because local swap data files using


[28-Aug-19 11:18 AM] Slyris#2880
ah


[28-Aug-19 11:18 AM] Slyris#2880
ok no problem


[28-Aug-19 11:18 AM] Slyris#2880
we will not unit test this part so, we will manual test


[28-Aug-19 11:18 AM] Slyris#2880
is that ok @TonyL  ?


[28-Aug-19 11:19 AM] Slyris#2880
Seem's hard to unit tests to be honest


[28-Aug-19 11:23 AM] TonyL#3577
yes, I think it's fine to test manually


[28-Aug-19 11:23 AM] TonyL#3577
`278f1dc0-092c-4d49-bb43-46bb3fc61334` @Slyris


[28-Aug-19 11:25 AM] Slyris#2880
yeah we will manual test, so i will just write my code, but probably not test this part


[28-Aug-19 11:25 AM] Slyris#2880
not this evening but this weekend


[28-Aug-19 11:25 AM] Slyris#2880
It's a bit tricky this part


[28-Aug-19 11:16 PM] Mylo#8306
howdy, could i get  some `RICK` & `MORTY` sent to `RFLKusbDvjzTGfvJEuVvrzD5GUoyr6R8kM` plz


[29-Aug-19 12:04 AM] Slyris#2880
@TonyL


[29-Aug-19 04:32 AM] gcharang#6833
@Mylo sent

{Reactions}
üî• üëå 

[29-Aug-19 05:01 AM] TonyL#3577
sry, missed msg. Thanks @gcharang


[31-Aug-19 02:39 AM] Slyris#2880
@TonyL There is no coin anymore on the test seed is this normal ?


[31-Aug-19 02:39 AM] Slyris#2880
make fail all the unit tests


[31-Aug-19 02:39 AM] Slyris#2880
cc @dcprevere


[31-Aug-19 02:40 AM] Slyris#2880
or @Mylo  ?


[31-Aug-19 02:46 AM] dcprevere#1502
I haven't done anything with coins


[31-Aug-19 02:58 AM] Slyris#2880
ok was electrum issue

{Reactions}
üëå 

[31-Aug-19 04:05 AM] Slyris#2880
If someone can run the unit tests with force mm2 passphrase on windows we have a problem but I don't have Windows computer to test it @TonyL


[31-Aug-19 04:55 AM] dcprevere#1502
Nor do I


[31-Aug-19 05:52 AM] TonyL#3577
@Slyris Ok sure, I have a Windows VM


[31-Aug-19 06:16 AM] TonyL#3577
What is the way to get Windows binaries atm @Slyris ?


[31-Aug-19 06:21 AM] Slyris#2880
@TonyL Great Thank's


[31-Aug-19 06:22 AM] Slyris#2880
For the moment you need to build from scratch


[31-Aug-19 06:22 AM] Slyris#2880
Latter i can plan continous deployment


[31-Aug-19 06:24 AM] TonyL#3577
Aha, so I have to install C tools for compilation on windows machine?


[31-Aug-19 06:24 AM] Slyris#2880
Visual studio yep


[31-Aug-19 06:24 AM] TonyL#3577
Never compiled anything on Windows thats why asking üôÇ


[31-Aug-19 06:24 AM] Slyris#2880
and sicne i want to test the test binary


[31-Aug-19 06:24 AM] Slyris#2880
it's will never be deployed


[31-Aug-19 06:24 AM] Slyris#2880
because it's unit tests binary


[31-Aug-19 06:24 AM] Slyris#2880
so we need to build it from scratch

{Reactions}
üëç 

[31-Aug-19 09:32 AM] TonyL#3577
```C:\Users\TonyL\antara-makerbot\build>cmake --build . --target mmbot-test --config Release
Microsoft (R) Build Engine version 16.2.37902+b5aaefc9f for .NET Framework
Copyright (C) Microsoft Corporation. All rights reserved.

  absl_int128.vcxproj -> C:\Users\TonyL\antara-makerbot\build\_deps\abseil-cpp-build\absl\numeric\Release\absl_absl_int
  128.lib
  bcmath.vcxproj -> C:\Users\TonyL\antara-makerbot\build\cmake\targets\Release\bcmath.lib
  http_parser.vcxproj -> C:\Users\TonyL\antara-makerbot\build\_deps\restinio-build\http_parser\Release\http_parser.lib
  logurulog.vcxproj -> C:\Users\TonyL\antara-makerbot\build\cmake\targets\logurulog.dir\Release\logurulog.lib
  reproc.vcxproj -> C:\Users\TonyL\antara-makerbot\build\_deps\reproc-build\reproc\lib\Release\reproc.lib
  reproc++.vcxproj -> C:\Users\TonyL\antara-makerbot\build\_deps\reproc-build\reproc++\lib\Release\reproc++.lib
  connection.cc
  restclient.cc
C:\Users\TonyL\antara-makerbot\build\_deps\restclient-cpp-src\include\restclient-cpp/connection.h(12,10): error C1083:
 –ù–µ —É–¥–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª –≤–∫–ª—é—á–µ–Ω–∏–µ: curl/curl.h: No such file or directory, [C:\Users\TonyL\antara-makerbot\build\cmake
\targets\restclient_obj.vcxproj]
  –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–¥–∞...
C:\Users\TonyL\antara-makerbot\build\_deps\restclient-cpp-src\source\restclient.cc(16,10): error C1083:  –ù–µ —É–¥–∞–µ—Ç—Å—è –æ—Ç–∫
—Ä—ã—Ç—å —Ñ–∞–π–ª –≤–∫–ª—é—á–µ–Ω–∏–µ: curl/curl.h: No such file or directory, [C:\Users\TonyL\antara-makerbot\build\cmake\targets\restcl
ient_obj.vcxproj]``` can't pass trough this step so far

I've included curl on the previous step like a: `  cmake -DCURL_LIBRARY=curl\lib -DCURL_INCLUDE_DIR=curl\bin -DCMAKE_BUILD_TYPE=Release ../` and it passed fine. But now it seems some deps needs curl as well


[31-Aug-19 09:51 AM] Slyris#2880
ah


[31-Aug-19 09:51 AM] Slyris#2880
@TonyL In fact


[31-Aug-19 09:51 AM] Slyris#2880
you just need CURL_ROOT env variable i think


[31-Aug-19 09:52 AM] Slyris#2880
but the best things to do


[31-Aug-19 09:52 AM] Slyris#2880
if you have conda


[31-Aug-19 09:52 AM] Slyris#2880
```
call C:\\Miniconda3-x64\Scripts\activate.bat
conda install -c conda-forge curl -y
```


[31-Aug-19 09:57 AM] Slyris#2880
@TonyL I dont know how to deal with libcurl on windows


[31-Aug-19 09:58 AM] TonyL#3577
me neither, alright will google+experiment more üòÖ


[31-Aug-19 10:00 AM] TonyL#3577
isnt conda a pip alternative for python packages btw?


[31-Aug-19 10:07 AM] Slyris#2880
Yeah something like


[31-Aug-19 10:07 AM] Slyris#2880
I used it in appveyor


[31-Aug-19 10:08 AM] Slyris#2880
For building


[31-Aug-19 11:09 AM] TonyL#3577
Finally found  solution for libcurl + windows + cmake (https://github.com/tonymorony/antara-makerbot/commit/35c6c2be7643547d1e7d2fd1f7a61883057a795b)
Now clue is just install fresh gcc (latest one in cygwin repos is 6.3)


[31-Aug-19 11:32 AM] TonyL#3577
```C:\Users\TonyL\antara-makerbot\build>cmake --build . --target mmbot-test --config Release
Microsoft (R) Build Engine version 16.2.37902+b5aaefc9f for .NET Framework
Copyright (C) Microsoft Corporation. All rights reserved.

  absl_int128.vcxproj -> C:\Users\TonyL\antara-makerbot\build\_deps\abseil-cpp-build\absl\numeric\Release\absl_absl_int
  128.lib
  bcmath.vcxproj -> C:\Users\TonyL\antara-makerbot\build\cmake\targets\Release\bcmath.lib
  http_parser.vcxproj -> C:\Users\TonyL\antara-makerbot\build\_deps\restinio-build\http_parser\Release\http_parser.lib
  logurulog.vcxproj -> C:\Users\TonyL\antara-makerbot\build\cmake\targets\logurulog.dir\Release\logurulog.lib
  reproc.vcxproj -> C:\Users\TonyL\antara-makerbot\build\_deps\reproc-build\reproc\lib\Release\reproc.lib
  reproc++.vcxproj -> C:\Users\TonyL\antara-makerbot\build\_deps\reproc-build\reproc++\lib\Release\reproc++.lib
  restclient_obj.vcxproj -> C:\Users\TonyL\antara-makerbot\build\cmake\targets\Release\restclient_obj.lib
LINK : fatal error LNK1104:  [C:\Users\TonyL\antara-makerbot\build\src\mmbot-test.vcxproj]```


[31-Aug-19 11:33 AM] TonyL#3577
that seems not simple quest üòÖ got cmake 3.15, gcc 8.3, it finding libcurl - not sure what is wrong now


[31-Aug-19 12:03 PM] Slyris#2880
Linking problem


[31-Aug-19 12:03 PM] Slyris#2880
I will show you my generating line


[31-Aug-19 12:03 PM] Slyris#2880
cmake ../ -G "%GENERATOR%" -A %platform% -DCMAKE_BUILD_TYPE=%BUILD_TYPE%


[31-Aug-19 12:04 PM] Slyris#2880
platform: x64
      GENERATOR: Visual Studio 15 2017
      BUILD_TYPE: Debug


[31-Aug-19 12:04 PM] Slyris#2880
@TonyL


[01-Sep-19 12:23 AM] Slyris#2880
Windows compilation and execution is fixed @TonyL

{Reactions}
üëå 

[01-Sep-19 01:24 AM] TonyL#3577
On what branch it's possible to build and what is the instructions for compilation? (probably it's good to add to readme so if we'll need to do it next time - route will be fast)

{Reactions}
üíØ 

[01-Sep-19 01:25 AM] Slyris#2880
Yeah i will add more information


[01-Sep-19 02:11 AM] Slyris#2880
@TonyL It's possible to build master branch, and instruction for compilation are in the readme


[01-Sep-19 02:33 AM] Slyris#2880
@TonyL Can you tell me what is missing in the readme ?


[01-Sep-19 02:33 AM] Slyris#2880
So i can add some more informations


[01-Sep-19 02:34 AM] TonyL#3577
Info on how to succesfully compile it on Windows


[01-Sep-19 02:34 AM] TonyL#3577
I've got cmake 3.15, gcc 8.3 and libcurl but was not able to build by same commands as for linux


[01-Sep-19 02:35 AM] Slyris#2880
It's written that on windows you need to compile with MSVC


[01-Sep-19 02:35 AM] Slyris#2880
It's because the compiler that is detected by CMake is the wrong one.


[01-Sep-19 02:36 AM] Slyris#2880
`gcc-8 or clang-8 or msvc15-2017 minimum`



i should say -> `gcc-8 (linux) or clang-8 (linux/osx) or msvc15-2017(windows) minimum
`


[01-Sep-19 06:47 AM] Slyris#2880
How is quality assurance going? Let me know if you find bugs or something spurious so i can fix it ! Currently helping @dcprevere for the DEX implementation (code review / quality and design)


[01-Sep-19 06:49 AM] TonyL#3577
Current mm2 calls wrapper side looks fine and no bugs were found so far. Most interesting will be to test it together with trading logic


[01-Sep-19 06:55 AM] Slyris#2880
We will very soon enable `OM` and  `SM`  in background with @dcprevere i just try to ensure that the code quality is good, so we dont spend time on boring bug's


[01-Sep-19 07:37 PM] Mylo#8306
@Slyris & @dcprevere  & @TonyL @ca333 
Hi - I spent weekend with family for Father‚Äôs Day here in Australia.  Collecting some medical results in an hour then head back to my workspace for the week.
I‚Äôve setup some dev boxes to use for testing.  Looking forward to coordinating and discussions in coming days


[01-Sep-19 10:41 PM] Slyris#2880
Ok no problems !


[02-Sep-19 12:25 AM] Slyris#2880
@TonyL I added some information in the readme


[02-Sep-19 03:13 AM] Slyris#2880
@Mylo I'm planning to expose http call mm2 electrum so you can enable other coins than `RICK` & `MORTY`.


[02-Sep-19 03:48 AM] Mylo#8306
can you make a call available to enable all coins as well?


[02-Sep-19 04:13 AM] Slyris#2880
@Mylo All electrum coins ?


[02-Sep-19 04:19 AM] Mylo#8306
yes please, for convenience would benefit getting orderbook data, balance & wallet requests from dashboard


[02-Sep-19 04:20 AM] Slyris#2880
Yeah balance call is already ready and orderbook too i think


[02-Sep-19 04:20 AM] Slyris#2880
What you mean with wallet requests @Mylo  ?


[02-Sep-19 04:21 AM] Mylo#8306
deposit/withdraw


[02-Sep-19 04:21 AM] Slyris#2880
https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html#withdraw ?

{Embed}
https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html
DEX API | Komodo Documentation
Documentation for developers building on Komodo


[02-Sep-19 04:21 AM] Slyris#2880
Yeah ok


[02-Sep-19 04:21 AM] Slyris#2880
What is the call for deposit into mm2 @Mylo  ?


[02-Sep-19 04:22 AM] TS#7923
hey guys!


[02-Sep-19 04:22 AM] Slyris#2880
Hey @Team-Supporter


[02-Sep-19 04:22 AM] TS#7923
I am almost ready with all the GUI wireframes *and* the functional specs for the GUI. Feedback welcome!


[02-Sep-19 04:22 AM] Slyris#2880
I have some fresh news to you


[02-Sep-19 04:22 AM] TS#7923
https://docs.google.com/document/d/1rZDfsuGrXESDY3owLXOEFSZkQ3Uzw9_aAUPHUsJ_aOc/edit?usp=sharing

{Embed}
https://docs.google.com/document/d/1rZDfsuGrXESDY3owLXOEFSZkQ3Uzw9_aAUPHUsJ_aOc/edit?usp=sharing
MakerBot GUI
WIREFRAMES:  Asset view with trading / strategy tools (auto strategy ON) https://whimsical.com/RudgtdF9d6cZEzG9b81BH3  The same screen with auto strategy OFF https://whimsical.com/BzBsZbuV9U8W6V8a3h8hpo   ‚ÄúMarkets‚Äù menu navigation phase 1 https://whimsical.com/XYsroVy4dah...
https://images-ext-2.discordapp.net/external/v8V3j3H2TplhSGQ6fT4J1pwGfEMnYmZs7qHVACEq4Dg/https/lh5.googleusercontent.com/rBaSxi8n7CHhyUbVQDCHYBDF3lMpHdNgTtdoxQk2tKl2U3jAE80D73cSeIihnZMbF8H0Ow%3Dw1200-h630-p


[02-Sep-19 04:23 AM] TS#7923
for @Mylo especially ^^^


[02-Sep-19 04:23 AM] TS#7923
oh, hear hear @Slyris !


[02-Sep-19 04:23 AM] TS#7923
use the _outline_ feature of GDocs to navigate üôÇ


[02-Sep-19 04:24 AM] Slyris#2880
There is the tasks that we need to finish with @dcprevere :

- Starting in background Order Manager and strategy manager.
- Merging the last pull request. (Lot of fixes, core SM and OM implemented)
- Write unit tests for the DEX.
- Expose more RPC call such as electrum  and order status my recent orders my recent swaps.
- Write higher HTTP call that use OM and SM (call mm2 low layer behind)


[02-Sep-19 04:24 AM] Slyris#2880
Once those tasks are done i think we will be ready.


[02-Sep-19 04:24 AM] Mylo#8306
cool thanks, @Slyris deposit is only gui-related sorry.   just info box with address and qr code - all client side


[02-Sep-19 04:25 AM] TS#7923
also for @ca333 to check, feedback welcome ^^^^

{Reactions}
üëç 

[02-Sep-19 04:25 AM] Slyris#2880
@Mylo Withdraw too or not ?


[02-Sep-19 04:27 AM] Mylo#8306
`withdraw` need to expose from your end, yes what you link to is the one.   after receiving user's withdrawal address, will request to withdraw to it through bot


[02-Sep-19 04:28 AM] Slyris#2880
you want the call with gas options or only default gas and fees ?


[02-Sep-19 04:28 AM] Slyris#2880
like fixed fee fixed gas


[02-Sep-19 04:28 AM] Slyris#2880
I'm supposing yes, because all exchange have fixed fee's


[02-Sep-19 04:28 AM] Slyris#2880
@Mylo


[02-Sep-19 04:29 AM] TS#7923
default works


[02-Sep-19 04:30 AM] TS#7923
in atomicdex itself we use standard + 1 from ethgasstation.info


[02-Sep-19 04:44 AM] Slyris#2880
Great. i will let the default one then.


[03-Sep-19 12:30 AM] Slyris#2880
@Mylo get enabled coins and enable all electrum coins are merged and available (doc is updated too)

{Reactions}
üòç 

[03-Sep-19 12:31 AM] Slyris#2880
@dcprevere Sync with master when you can fixed various bug with mm2 latest version


[03-Sep-19 02:19 AM] dcprevere#1502
Cheers


[03-Sep-19 04:05 AM] Slyris#2880
@Mylo  @dcprevere sell rpc call merged and doc available


[03-Sep-19 06:04 AM] Slyris#2880
@TonyL somethins important to test is the price result from all price api CALL, if they seem's correct or contains any bugged value let me know


[03-Sep-19 06:04 AM] Slyris#2880
we find a new bug that we just fixed now


[03-Sep-19 06:15 AM] Slyris#2880
Because i use a home made price calculation with string manipulation, can really contains error


[03-Sep-19 06:19 AM] TonyL#3577
Do you mean this call? http://95.217.44.58:81/api/v1/getallprice 
I'm thinking I can calculate prices by my python things with values from coingecko, then compare with your prices and if difference is more than lets say 1-2% indicate it


[03-Sep-19 06:20 AM] TonyL#3577
Is `ZILLA` prices calculation disabled atm? ({"ZILLA":[]})


[03-Sep-19 06:20 AM] Slyris#2880
y


[03-Sep-19 06:20 AM] Slyris#2880
@TonyL Zilla have some problems because coinpaprika consider it as disabled coins


[03-Sep-19 06:20 AM] Slyris#2880
there is no data


[03-Sep-19 06:21 AM] TonyL#3577
You may try to get data from coingecko for zilla - for me it never returned empty data for it


[03-Sep-19 06:21 AM] Slyris#2880
and since we have only coinpaprika back end for the moment


[03-Sep-19 06:21 AM] Slyris#2880
https://coinpaprika.com/coin/zilla-chainzilla/

{Embed}
https://coinpaprika.com/coin/zilla-chainzilla/
ChainZilla (ZILLA) Price, Charts, Market Cap, Markets, Exchanges, ...
ChainZilla Price Chart | Market Capitalization | ZILLA to USD Calculator | ZILLA ROI Calculator | News | Description | Team | Related Events | Community | Similar coins to ChainZilla ZILLA
https://images-ext-2.discordapp.net/external/fMU7uUSWcUEA7hq2938yudUZeSomKhIpGnUaUQp2J2Y/%3F10566481/https/static2.coinpaprika.com/coin/zilla-chainzilla/card.png


[03-Sep-19 06:22 AM] Slyris#2880
Yeah but implement the whole coingecko backend for me will take atleast one week


[03-Sep-19 06:22 AM] Slyris#2880
(minimum)


[03-Sep-19 06:22 AM] Slyris#2880
that's why for the first version i prefer focus on all the other features that we need


[03-Sep-19 06:22 AM] Slyris#2880
and once is done i can start implement other backend


[03-Sep-19 06:22 AM] TonyL#3577
So do you think if such comparison test is fine? Because not sure how to test it other way - only if count manually in calculator maybe


[03-Sep-19 06:22 AM] Slyris#2880
Yeah why not


[03-Sep-19 06:23 AM] Slyris#2880
also my price are fetched every 2-3 minutes so price can vary a lot


[03-Sep-19 06:23 AM] Slyris#2880
every 30 seconds but the function itself take 1-2 minutes


[03-Sep-19 06:25 AM] TonyL#3577
ok, will code python test now. shouldnt take much time


[03-Sep-19 06:26 AM] Slyris#2880
oki !


[03-Sep-19 07:15 AM] cipi#4502
coins that don't have any volume in the last 24h are considered `inactive` by coinpaprika and price requests through the API returns an HTTP error for this coins
ZILLA is often among them


[03-Sep-19 08:10 AM] TonyL#3577
https://paste.ubuntu.com/p/7RPhzd7wJK/ @Slyris made initial version of such test, in general it seems fine imo - big difference is for RFOX and VRSC what are low liquidity markets and unlikely data on different APIs is precise


[03-Sep-19 08:11 AM] TonyL#3577
https://gist.github.com/tonymorony/c8fa5eed99d53342ea21293fef3dcb6a test sourcecode

{Embed}
https://gist.github.com/tonymorony/c8fa5eed99d53342ea21293fef3dcb6a
comparison of coingecko API prices with makerbot coinpaprika all p...
comparison of coingecko API prices with makerbot coinpaprika all prices - all_prices_test.py
https://images-ext-1.discordapp.net/external/v2ToTBFZ7zHPk2sQlBt80EaH2hhwBfD3Zdf1J_uxMxs/https/github.githubassets.com/images/modules/gists/gist-og-image.png


[03-Sep-19 08:12 AM] Slyris#2880
ok thanks i will check it


[03-Sep-19 08:14 AM] Slyris#2880
yeah for this one VRSC/RFOX ratio diff is more than 1%. Diff is: -5.0201913863971965
 it's strange


[03-Sep-19 08:15 AM] Slyris#2880
i think we will have better result once i get coingecko backend too


[03-Sep-19 08:17 AM] TonyL#3577
These APIs (coingecko vs coinpaprika lets say) might have very inconsistence data for these markets because of low volume/exchanges amount


[03-Sep-19 08:19 AM] TonyL#3577
+ I'm calculating it from COIN/USD coingecko data (to get ratio deviding COINA/USD ratio on COINB/USD ratio) what in total might accumulate inaccuracy. Anyway looks like atm there is no "significant" errors when ratio calculating totally not correct by bot


[03-Sep-19 08:26 AM] Slyris#2880
@TonyL No problem Tony, for me i always take BTC as quote currency for calcualte intermediary price


[03-Sep-19 08:26 AM] Slyris#2880
And since btc move a lot recently can change a bit the results


[03-Sep-19 09:16 AM] Slyris#2880
@dcprevere I put other rpc call aside for the moment, (I push my_recents_swaps but without unit tests, it is planned to do e2e tests and some tricks to be able to do the unit tests anyway) (you will still be able to use its functions internally even if they are not tested)


[03-Sep-19 07:47 PM] Mylo#8306
Price discovery collector will need to massage üíÜ‚Äç‚ôÇÔ∏è the data from ‚Äú100s of sources‚Äù.  As long as there is a hook for ppl to inject custom data, eg Tony can use custom coin gecko scripts and format for use within makerbot, we get ourselves out of the way to ppl using whatever price feed.  Could be used with weird eth dex without us needing to know anything about it.


[03-Sep-19 07:47 PM] Mylo#8306
Maybe for stage 2 etc,  not necessary for first stress test


[03-Sep-19 08:17 PM] TonyL#3577
Curious what  functionality will be implemented in bot logic itself. 
There should be lets say some "emergency" mode I think when bot cancelling all orders when can't get prices data or it's suspicous. Also interesting how orders depth will be rebalaced dynamically (one pair/s will be more liquid for bot than others so balances will permanently inconsistently change):  on beta stage will there be an independent "bankroll" for each pair or one common?

Lets say very basic case: I have coins A, B (balances 1000$ in usd equialent each). Somebody sold me 900$ of coin B for coin A with 50$ profit on my side. I have 1950$ in coin A and 100$ in coin B. Will then bot buy on CEX coin B for 900$ and deposit it back to LP wallet? Also to where profit in coin A will go? Will be 950$ (deviation from starting amount) be sold and rebalanced back somehow (imagine more complex cases when there are A,B,C...Z coins and you providing liquidity each to each)?


[03-Sep-19 08:18 PM] TonyL#3577
Sorry for a wall of text and a lot of questions, had boring flight üòÖ


[03-Sep-19 09:34 PM] Mylo#8306
have you seen cipi's original perl scripts @TonyL ?


[03-Sep-19 09:36 PM] Mylo#8306
e.g. https://github.com/cipig/mmtools/blob/master/mpm/mpm#L350

{Embed}
https://github.com/cipig/mmtools/blob/master/mpm/mpm
cipig/mmtools
Contribute to cipig/mmtools development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761


[03-Sep-19 09:38 PM] Mylo#8306
looks at depth, and just adds some arbitrary multiplier to it.    the strategy has a slider, say 2%.   so 1% each side of the price i think it means for the implementation.   i am not a trader so am not very bot-aware, but have written "bot" automation stuff in the past.    just 2 or 3 variables and simple rules like in cipi's script.   many possibilities...different bots different times of the day will profit/lose more depending on market.   the hummingbot discord when they were having their "marketmakers campaign" with the ONE token had discussions of traders using different variables and comparing their results on a daily basis.


[03-Sep-19 10:05 PM] TonyL#3577
Yep, saw cipi scripts and implemented on python with some modifications. My questions were not margin amount related. Margin amount is just a single variable yes


[03-Sep-19 10:46 PM] Mylo#8306
and then depth, if depth is "2000" maybe that is a trigger for more aggressive trading on dex because the refill is available from cex...so, in some pplz algos -  the default  spread might be reduced because of availability of cex refill, in the preferred direction etc.   all variables...

"independent bankroll" - yes this will be something to consider next iteration.   when i was testing before, i found it would be nice to have control of multiple marketmakers from the gui, different strategies comign out of different wallets etc. - but this can be done with no modifications on server side, only gui using multiple backend instances.    they will all be separate with no co-ordination.  that is next-level.


[03-Sep-19 10:46 PM] Mylo#8306
& beyond the scope imo


[03-Sep-19 11:23 PM] TonyL#3577
By independent bankroll I've meant virtual funds reservation mechanism for different pairs rather than multiply binary instances. Anyway, now it's demagogy from my side because I never tested current stage bot trading üôÇ Will write ideas/constructive feedback right after it


[04-Sep-19 12:49 AM] Slyris#2880
Http call my_recent_swaps pushed but not tested, need some test and steps to unit tests it on my computer directly


[04-Sep-19 12:49 AM] Slyris#2880
(roman_dev branch)


[04-Sep-19 02:11 AM] Slyris#2880
I will implement this afternoon and evening order_status I probably don't need any tricks to test it. Don't forget I will not be here tomorrow so I will finish my part as discussed with @dcprevere today. I hope we will finish everything until Sunday. Will try a hard rush starting Friday to Sunday to get everything !


[04-Sep-19 11:02 AM] Mylo#8306
`std::experimental::filesystem` on cmake-3.15.3 i had to add experimental to the filesystem namespace and include in src/config/config.hpp


[04-Sep-19 11:02 AM] Mylo#8306
is different to the easy instructions üôÇ


[04-Sep-19 11:05 AM] Slyris#2880
Which compiler @Mylo


[04-Sep-19 11:05 AM] Slyris#2880
This is not related to CMake.


[04-Sep-19 11:05 AM] Slyris#2880
It's related to your compiler.


[04-Sep-19 11:05 AM] Mylo#8306
ok.   cmake-3.15.3 ?


[04-Sep-19 11:06 AM] Slyris#2880
Cmake > 3.14 is good


[04-Sep-19 11:06 AM] Slyris#2880
But which compiler are you using ?


[04-Sep-19 11:06 AM] Slyris#2880
GCC --version?


[04-Sep-19 11:06 AM] Slyris#2880
Clang ?


[04-Sep-19 11:06 AM] Mylo#8306
`gcc (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0`


[04-Sep-19 11:06 AM] Slyris#2880
GCC 8.0 minimum is required


[04-Sep-19 11:06 AM] Slyris#2880
It's written in the readme.


[04-Sep-19 11:07 AM] Slyris#2880
gcc-8 (Linux) or clang-8 (Linux / OSX) or msvc15-2017 (Windows) minimum


[04-Sep-19 11:07 AM] Mylo#8306
cool i see, thanks & sorry for interruption


[04-Sep-19 11:07 AM] Slyris#2880
No problem my friends


[04-Sep-19 11:07 AM] Slyris#2880
Doesn't hesitate


[04-Sep-19 11:10 AM] Slyris#2880
@TonyL mmbot seem's down


[04-Sep-19 11:10 AM] Slyris#2880
According to telegram bot


[04-Sep-19 11:19 AM] Mylo#8306
@Slyris clang++ errors now


[04-Sep-19 11:19 AM] Mylo#8306
```
mylo@dev6:~/antara-makerbot/build$ cmake -DCMAKE_BUILD_TYPE=Release ../
-- The CXX compiler identification is Clang 8.0.0
-- Check for working CXX compiler: /usr/bin/clang++
-- Check for working CXX compiler: /usr/bin/clang++ -- broken

```


[04-Sep-19 11:21 AM] Mylo#8306
fixed.   `sudo apt-get install g++-8`


[04-Sep-19 11:24 AM] Slyris#2880
Nice

{Reactions}
üëå 

[04-Sep-19 02:03 PM] TonyL#3577
@Slyris Thank you! Just woke up, struggling with jetlag... Broke it when switched between branches to test new rpc call. Will fix it now


[04-Sep-19 02:22 PM] Slyris#2880
ok great !


[04-Sep-19 02:27 PM] Slyris#2880
@TonyL I will sleep very soon and tommorow i'm not here we will see tomorrow evening if you want


[04-Sep-19 02:28 PM] TonyL#3577
Good night! There is only single rpc to test so no worries


[04-Sep-19 02:32 PM] Slyris#2880
no problem see you later buddy

{Reactions}
üëç 

[05-Sep-19 03:15 AM] TS#7923
@TonyL 
`Will then bot buy on CEX coin B for 900$ and deposit it back to LP wallet? `


[05-Sep-19 03:15 AM] TS#7923
CEX integration is not part of MakerBot, not in this first version


[05-Sep-19 03:16 AM] TS#7923
so if you have $1000 of A and B each and you sell $900 of A, you'll still trade both ways until either A or B is depleted. From that point you'll only trade on one side


[05-Sep-19 03:17 AM] TS#7923
We should send some sort of a notification to user that his A or B wallet is empty so he can top it up if he wants to. But it's more of a courtesy.


[06-Sep-19 01:01 AM] Slyris#2880
@TonyL recents swaps merged and tested.

{Reactions}
üéâ 

[07-Sep-19 05:02 AM] hyperDEX#6586
https://developers.shrimpy.io/docs/#users dont know if this is useful but seems to allow ws for 16 exchanges


[07-Sep-19 08:04 AM] Slyris#2880
thank's for the link  @hyperDEX


[07-Sep-19 10:23 PM] dcprevere#1502
That looks interesting


[08-Sep-19 09:21 AM] Slyris#2880
To summarize our week we have advanced on most of our goals. Overall we are on the high-level HTTP calls and the tests that result to check that all works. We are not very far from a usable version ! 

cc @ca333  @TS  @TonyL

{Reactions}
üëç (5) 

[16-Sep-19 02:13 AM] TS#7923
happy Monday, team!


[16-Sep-19 02:14 AM] TS#7923
@Slyris what do you think, what's the timeline for this week?


[16-Sep-19 02:27 AM] Slyris#2880
Everything is under qa testing right now waiting for feedback


[16-Sep-19 02:27 AM] Slyris#2880
I'm on the gaming SDK meanwhile this time


[16-Sep-19 02:28 AM] Slyris#2880
Cc @ca333


[16-Sep-19 02:35 AM] TS#7923
ah ok, thanks! @TonyL can I help with anything?


[16-Sep-19 02:51 AM] ca333#0333
@TS we have not launched the tests yet and likely won't be able to do so before getting the atomicDEX mobile stress test RC out. You could start some tests with Mylo if you guys have time - that would be a indeed a huge help.


[16-Sep-19 02:57 AM] ca333#0333
btw - whats the GUI status? cc: @Mylo


[16-Sep-19 02:58 AM] ca333#0333
mapping the GUI over to the maker-bot would actually detect (all) bugs (if any are there - since Slyris wrote it i doubt there are any critical ones)

{Reactions}
üòÑ 

[16-Sep-19 05:15 AM] Mylo#8306
Ok then I'll pull my finger out with the buy & sell and have stuff testable tomorrow

{Reactions}
üëç 

[16-Sep-19 05:15 AM] Mylo#8306
@ca333


[16-Sep-19 10:30 AM] Slyris#2880
@ca333 Actually buy and sell call also @dcprevere code :p

We will see what happens, anyway if there is bug we will just fix them

{Reactions}
üëç 

[17-Sep-19 07:25 PM] Mylo#8306
```
         --- LOG END ---
         error: downloading 'https://github.com/onqtam/doctest/archive/2.3.3.tar.gz' failed
         status_code: 1
         status_string: "Unsupported protocol"
         log:
         --- LOG BEGIN ---
         Protocol "https" not supported or disabled in libcurl

  Closing connection -1

```
i'm making a docker image but get this error when doing this command `cmake -DCMAKE_BUILD_TYPE=Release ../`


[17-Sep-19 07:25 PM] Mylo#8306
doesn't happen on live system the times i've built mmbot


[17-Sep-19 07:28 PM] Mylo#8306
ref:   https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker/blob/makerbot/Dockerfile#L44
i run the image, and then execute the cmake command but doesn't work.   you can see the dependencies previously installed with `apt-get install.....`

{Embed}
https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker/blob/makerbot/Dockerfile
Komodo-Cakeshop/docker-atomicdex-api-marketmaker
Contribute to Komodo-Cakeshop/docker-atomicdex-api-marketmaker development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/JpoXzzXQ4UN23-0fC_I0eSDzdJcEbB8QyMefYTwucDg/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/45069400


[17-Sep-19 09:30 PM] Mylo#8306
dw - fixed.  added a bunch of apt-get dependencies. works.  will investigate in the future to reduce size of image


[18-Sep-19 02:54 AM] Slyris#2880
ok great thank's for the info @Mylo


[19-Sep-19 10:35 AM] Mylo#8306
demo.marketmaker.club (very unoptimized) is pulling data from mmbot.   coins, dex market, aggregator prices.    no trading activity.
i think the prices are inverted to what i was expecting.   if this is the case, easy to switch base with rel.  e.g. i thought KMD/BTC would be 0.0007xxx instead of 14xxx


[19-Sep-19 10:35 AM] Mylo#8306
http://demo.marketmaker.club


[19-Sep-19 10:52 AM] Slyris#2880
@TonyL What is the url of antara makerbot ? i didnt mark it


[19-Sep-19 10:53 AM] Slyris#2880
I need to check the prices output


[19-Sep-19 10:54 AM] TonyL#3577
@Slyris http://95.217.44.58:81/


[19-Sep-19 10:55 AM] TonyL#3577
http://95.217.44.58/api/v1/tickers and this one is portal


[19-Sep-19 10:56 AM] Slyris#2880
```json
{"KMD/BTC":"14273.71477551"}]}
``` 

@Mylo  ?


[19-Sep-19 10:56 AM] Slyris#2880
Hmm


[19-Sep-19 10:57 AM] Slyris#2880
{"BTC/KMD":"0.00007006"}


[19-Sep-19 10:57 AM] Slyris#2880
No it's good


[19-Sep-19 10:57 AM] Slyris#2880
with 1 BTC, you have 14273 komodo


[19-Sep-19 10:57 AM] Slyris#2880
with 1KMD you have 0.00007 btc


[19-Sep-19 10:57 AM] Slyris#2880
seem's correct to me


[19-Sep-19 10:59 AM] jl777c#5810
the convention is like division


[19-Sep-19 10:59 AM] jl777c#5810
KMD/BTC should be the small fraction


[19-Sep-19 10:59 AM] jl777c#5810
BTC/KMD the big number


[19-Sep-19 11:04 AM] Mylo#8306
1 REL buys X BASE is how i learned to read it.
e.g. 1 KMD buys 0.0007000 BTC


[19-Sep-19 11:05 AM] jl777c#5810
plz use the division representation


[19-Sep-19 11:05 AM] jl777c#5810
BTC is worth more than KMD


[19-Sep-19 11:05 AM] jl777c#5810
so KMD/BTC is a fraction, less than 1


[19-Sep-19 11:05 AM] jl777c#5810
BTC/KMD is bigger than 1


[19-Sep-19 11:05 AM] Mylo#8306
ok


[19-Sep-19 11:05 AM] jl777c#5810
all the mm api uses this convention


[19-Sep-19 11:05 AM] jl777c#5810
so does forex


[19-Sep-19 11:06 AM] jl777c#5810
so does a lot of exchanges, though some do it backwards


[19-Sep-19 11:24 AM] Slyris#2880
okok


[19-Sep-19 11:24 AM] Slyris#2880
@jl777c KMD/BTC and BTC/KMD is the same res then ?


[19-Sep-19 11:30 AM] TonyL#3577
KMD/BTC is 1/(BTC/KMD)


[19-Sep-19 11:30 AM] Slyris#2880
'_'


[19-Sep-19 11:31 AM] Slyris#2880
I dont get it


[19-Sep-19 11:32 AM] TonyL#3577
KMD/BTC = KMD_USD_PRICE / BTC_USD_PRICE ~ 0.00007000
BTC/KMD = BTC_USD_PRICE / KMD_USD_PRICE ~ 14000


[19-Sep-19 11:32 AM] Slyris#2880
```cpp
std::string path =
                    "/price-converter?base_currency_id=" +
                    this->coin_id_translation_.at(currency_pair.base.symbol.value()) +
                    "&quote_currency_id=" + this->coin_id_translation_.at(currency_pair.quote.symbol.value()) +
                    "&amount=1";
```

So here i just switch quote with base alright ?


[19-Sep-19 11:33 AM] Slyris#2880
if i got it


[19-Sep-19 11:33 AM] TonyL#3577
or 1/0.00007000 ~ 14000


[19-Sep-19 11:34 AM] TonyL#3577
reversal fraction


[19-Sep-19 11:34 AM] Slyris#2880
no but i use coinpaprika to get prices


[19-Sep-19 11:36 AM] Slyris#2880
```cpp
{"KMD/BTC":"0.00007061"}
```


[19-Sep-19 11:36 AM] Slyris#2880
I assume it's ok


[19-Sep-19 11:36 AM] Slyris#2880
```cpp
{"BTC/KMD":"14162.63179340"
```


[19-Sep-19 11:36 AM] Slyris#2880
confirm please before i push the fix


[19-Sep-19 11:37 AM] TonyL#3577
yes, that looks correct


[19-Sep-19 11:37 AM] Slyris#2880
Ok great, pushing the fix now.


[19-Sep-19 11:37 AM] Slyris#2880
@jl777c and @Mylo Thank's for your feedback i was not aware that we should read like that.


[19-Sep-19 11:37 AM] Slyris#2880
@TonyL Thank's tony for the clarification.


[19-Sep-19 11:38 AM] TonyL#3577
1/0.00007061 ~ 14162.299957513 in my calculator therefore


[19-Sep-19 11:39 AM] Slyris#2880
1/0.00007061 - 14162.299957513
1/0.00007061
14162


[19-Sep-19 11:40 AM] Slyris#2880
```
scale=8

1.0/0.00007061
14162.29995751
```


[19-Sep-19 11:40 AM] TonyL#3577
yeah, I mean that above `{"BTC/KMD":"14162.63179340"` different number, but maybe price changed in between


[19-Sep-19 11:40 AM] Slyris#2880
ah y possible


[19-Sep-19 11:45 AM] Slyris#2880
@TonyL Merged, waiting for auto deploying from your side now


[19-Sep-19 11:50 AM] TonyL#3577
Should be fine I think


[27-Sep-19 02:15 PM] allbits#5898
Hello. How's progress here?


[27-Sep-19 02:16 PM] Slyris#2880
Hello @allbits still on testing and @dcprevere did some updates I think


[27-Sep-19 02:17 PM] allbits#5898
Thanks. I'm quite a noob but could do cli testing if it helps (no cex integration)


[27-Sep-19 02:18 PM] Slyris#2880
You can follow the docs if you want


[27-Sep-19 02:18 PM] Slyris#2880
This is a simple api


[27-Sep-19 02:18 PM] Slyris#2880
https://github.com/KomodoPlatform/antara-makerbot/tree/master/docs @allbits

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/tree/master/docs
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[28-Sep-19 01:09 AM] dcprevere#1502
I've fixed the bugs that I've found through testing, and now I'm working on CEX integration

{Reactions}
üî• 

[28-Sep-19 01:09 AM] dcprevere#1502
I'm working on a fake CEX for testing, and Binance.


[28-Sep-19 02:15 AM] Slyris#2880
Great


[28-Sep-19 02:23 AM] Mylo#8306
Hi üëã 
Sorry I‚Äôve been out of touch - had a few days off, and travel back home (33hr journey)  then sick.
I‚Äôm setting up some dev nodes to put the final calls for basic trading into the GUI & some instructions for setting it up.

The biggest problem I have to workaround is the makerbot daemon doesn‚Äôt respond from browser, so I‚Äôve put a CORS proxy inbetween.

{Reactions}
üëãüèΩ 

[30-Sep-19 04:20 AM] Mylo#8306
has there been a bug introduced with getorderbook recently?


[30-Sep-19 04:30 AM] Mylo#8306
Working
```
mylo@hybriddex:~$ curl "http://127.0.0.1:7777/api/v1/legacy/mm2/getorderbook?base_currency=BTC&quote_currency=KMD"
{"askdepth":0,"asks":[{"address":"R9LzCsxtWZvp6fhuTEtS9sRLpCFmv7cqjC","age":6,"avevolume":0.0,"coin":"KMD","depth":0.0,"maxvolume":163.3942229436,"numutxos":0,"price":"0.00007334","pubkey":"142743a859aa36cb99ac05e3e4ba2d34dc29402eda8bc7a3c6e5e9448e096bd2","zcredits":0},{"address":"RT9MpMyucqXiX8bZLimXBnrrn2ofmdGNKd","age":7,"avevolume":0.0,"coin":"KMD","depth":0.0,"maxvolume":5364.63772334,"numutxos":0,"price":"0.00007264","pubkey":"1bb83b58ec130e28e0a6d5d2ac
snipped
...
```


[30-Sep-19 04:30 AM] Mylo#8306
Not working
```
mylo@hybriddex:~$ curl "http://127.0.0.1:7777/api/v1/legacy/mm2/getorderbook?base_currency=BTC&quote_currency=KMD"
curl: (52) Empty reply from server

```


[30-Sep-19 04:31 AM] Mylo#8306
Working commit log:
```
commit 021b68a5eca33e4406f7bd64b23d33dac745ee9a (HEAD -> master, origin/master, origin/HEAD)
Author: DCPRevere <dcprevere@gmail.com>
Date:   Mon Sep 16 15:50:24 2019 +0700

```


[30-Sep-19 04:37 AM] TS#7923
@Slyris ^^^


[30-Sep-19 05:18 AM] Slyris#2880
@Mylo the bug has been fixed few day's ago but not merged yet.


[30-Sep-19 05:18 AM] Slyris#2880
@dcprevere


[30-Sep-19 05:18 AM] Slyris#2880
Can we merge your pr ?


[30-Sep-19 05:19 AM] Slyris#2880
It's because the format of orderbook has changed


[30-Sep-19 06:13 AM] Mylo#8306
ok good to know, thanks @Slyris no dramas


[30-Sep-19 06:13 AM] Mylo#8306
the json response has changed?


[30-Sep-19 06:36 AM] Slyris#2880
Yeah @Mylo


[30-Sep-19 06:36 AM] Slyris#2880
Look the atomicDex


[30-Sep-19 06:36 AM] Slyris#2880
Doc

{Reactions}
üëå üôè 

[01-Oct-19 04:08 AM] dcprevere#1502
My apologies, I will make merging the fix my priority


[01-Oct-19 04:09 AM] dcprevere#1502
@Mylo


[01-Oct-19 04:12 AM] Mylo#8306
cheers dcp üëç


[03-Oct-19 11:30 AM] Mylo#8306
I'm heading to sleep now, but got some unusual responses in last 30 mins from `cancel_all_orders` and mmbot exiting with `setprice` with rpc_password set & not set on two different instances.

Will have to retry tomorrow.  I'll build a new image with latest PR (#70) merged.


[03-Oct-19 01:04 PM] Slyris#2880
@Mylo Ok mylo tomorrow let's go look at the response together if you want


[03-Oct-19 10:27 PM] smkhound#7640
@Mylo ```std::experimental::filesystem on cmake-3.15.3 i had to add experimental to the filesystem namespace and include in src/config/config.hpp
is different to the easy instructions :slight_smile:```
can you pls elaborate on resolving this, I'm having similar issue with cmake-3.15.4


[03-Oct-19 10:28 PM] Mylo#8306
Not necessary


[03-Oct-19 10:28 PM] Mylo#8306
One sec


[03-Oct-19 10:29 PM] Mylo#8306
https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker/blob/makerbot/Dockerfile

{Embed}
https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker/blob/makerbot/Dockerfile
Komodo-Cakeshop/docker-atomicdex-api-marketmaker
Contribute to Komodo-Cakeshop/docker-atomicdex-api-marketmaker development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/JpoXzzXQ4UN23-0fC_I0eSDzdJcEbB8QyMefYTwucDg/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/45069400

{Reactions}
üôèüèΩ 

[03-Oct-19 10:30 PM] Mylo#8306
It‚Äôs got a bit of extra stuff installed, but if you follow the second image creation in that file line by line, just works


[03-Oct-19 10:31 PM] Mylo#8306
I can post destructions on using with docker, in another wiki


[03-Oct-19 10:31 PM] Mylo#8306
*instructions lol

{Reactions}
üòÇ (2) 

[03-Oct-19 10:31 PM] smkhound#7640
I'll give it a shot


[04-Oct-19 01:15 AM] smkhound#7640
thanks, that worked üôÇ


[04-Oct-19 02:02 AM] Slyris#2880
:p


[04-Oct-19 03:17 AM] smkhound#7640
https://oracle.earth/mm2_api/?method=getallprice
https://oracle.earth/mm2_api/?method=getprice&base_currency=RFOX&quote_currency=BAT
https://oracle.earth/mm2_api/?method=getorderbook&base_currency=RFOX&quote_currency=BAT
so far so good :)
I did notice the price from `getallprice` and `getprice` is slightly different tho ü§∑üèΩ


[04-Oct-19 03:18 AM] smkhound#7640
will format and add dropdowns for selection etc over the weekend


[04-Oct-19 04:35 AM] Slyris#2880
@smkhound yeah because the price is fetched every 30 sec for getallprice

{Reactions}
üëçüèΩ üëå 

[04-Oct-19 04:35 AM] Slyris#2880
For getprice is real time


[04-Oct-19 04:35 AM] Slyris#2880
So the price is slightly different


[04-Oct-19 04:40 AM] Mylo#8306
```
9-10-04 11:34:13.897 ( 216.120s) [om thread       ]         mm2.client.cpp:498   INFO| .   .   .   .   .   .   .   .   .   .   .   .   } 0.001 s: antara::mmbot::mm2::my_orders_answer antara::mmbot::mm2_client::rpc_my_orders()
terminate called after throwing an instance of 'std::invalid_argument'
  what():  stod
Aborted (core dumped)
```


[04-Oct-19 04:40 AM] Mylo#8306
@Slyris 
confirmed.  after putting in a `setprice` either from mmbot or directly with mm2 api call, the bot is running, tries to fetch my_orders and dies.


[04-Oct-19 04:44 AM] Mylo#8306
mm2 still running on system after mmbot crashed.
order still alive in mm2.

```
curl -s --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"setprice\",\"base\":\"RICK\",\"rel\":\"MORTY\",\"volume\":\"1\",\"price\":\"3.3\", \"max\": true, \"cancel_previous\": true}"

curl -s  --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_orders\"}"
```
with the bot running and you probably can reproduce


[04-Oct-19 04:57 AM] Slyris#2880
ok I will try to reproduce the bug myself


[04-Oct-19 04:57 AM] Slyris#2880
@Mylo

{Reactions}
üëç 

[04-Oct-19 04:58 AM] Slyris#2880
Thank's


[04-Oct-19 05:13 AM] Slyris#2880
@Mylo I will do it in few hours, at school for the moment


[04-Oct-19 05:24 AM] Mylo#8306
cool bro, i'll check repo tomorrow morning üëç


[04-Oct-19 06:59 AM] Slyris#2880
```
2019-10-04 15:57:46.389 (  48.675s) [           D862D]         mm2.client.cpp:432   INFO| .   } 0.000 s: nlohmann::json antara::mmbot::mm2_client::template_request(std::string)
2019-10-04 15:57:46.389 (  48.675s) [           D862D]         mm2.client.cpp:451   INFO| .   request: {"base":"RICK","method":"setprice","price":"1","rel":"MORTY","userpass":"YOUR_PASSWORD_HERE","volume":"1"}
2019-10-04 15:57:46.606 (  48.893s) [           D862D]         mm2.client.hpp:435   INFO| .   resp: {"result":{"base":"RICK","created_at":1570197466604,"matches":{},"max_base_vol":"1","max_base_vol_rat":[[1,[1]],[1,[1]]],"min_base_vol":"0","min_base_vol_rat":[[0,[]],[1,[1]]],"price":"1","price_rat":[[1,[1]],[1,[1]]],"rel":"MORTY","started_swaps":[],"uuid":"92664ecc-eab5-4f58-b06f-b9b22364c377"}}
2019-10-04 15:57:46.607 (  48.893s) [           D862D]         mm2.client.cpp:448   INFO| } 0.218 s: mm2::setprice_answer antara::mmbot::mm2_client::rpc_setprice(mm2::setprice_request &&)
2019-10-04 15:57:46.607 (  48.893s) [           D862D]         mm2.client.cpp:498   INFO| { mm2::my_orders_answer antara::mmbot::mm2_client::rpc_my_orders()
2019-10-04 15:57:46.607 (  48.893s) [           D862D]         mm2.client.cpp:432   INFO| .   { nlohmann::json antara::mmbot::mm2_client::template_request(std::string)
2019-10-04 15:57:46.607 (  48.893s) [           D862D]         mm2.client.cpp:432   INFO| .   } 0.000 s: nlohmann::json antara::mmbot::mm2_client::template_request(std::string)
===============================================================================
2019-10-04 15:57:46.607 (  48.893s) [           D862D]         mm2.client.cpp:500   INFO| .   request: {"method":"my_orders","userpass":"YOUR_PASSWORD_HERE"}
```

@Mylo Working with 1, 1 as value will try with 3.3 now


[04-Oct-19 07:06 AM] Slyris#2880
for the setprice:

req:
```json
{
  "base": "RICK",
  "method": "setprice",
  "price": "3.3",
  "rel": "MORTY",
  "userpass": "YOUR_PASSWORD_HERE",
  "volume": "1"
}
```

resp:
```
{
  "result": {
    "base": "RICK",
    "created_at": 1570197871485,
    "matches": {},
    "max_base_vol": "1",
    "max_base_vol_rat": [
      [
        1,
        [
          1
        ]
      ],
      [
        1,
        [
          1
        ]
      ]
    ],
    "min_base_vol": "0",
    "min_base_vol_rat": [
      [
        0,
        []
      ],
      [
        1,
        [
          1
        ]
      ]
    ],
    "price": "3.3",
    "price_rat": [
      [
        1,
        [
          33
        ]
      ],
      [
        1,
        [
          10
        ]
      ]
    ],
    "rel": "MORTY",
    "started_swaps": [],
    "uuid": "5a60bda8-2b15-4729-843d-feb6838c9daa"
  }
}
```


[04-Oct-19 07:08 AM] Slyris#2880
my_orders:

req:
```json
{"method":"my_orders","userpass":"YOUR_PASSWORD_HERE"}
```

resp:

```json
{"result":{"maker_orders":{"5a60bda8-2b15-4729-843d-feb6838c9daa":{"available_amount":"1","base":"RICK","cancellable":true,"created_at":1570197871485,"matches":{},"max_base_vol":"1","max_base_vol_rat":[[1,[1]],[1,[1]]],"min_base_vol":"0","min_base_vol_rat":[[0,[]],[1,[1]]],"price":"3.3","price_rat":[[1,[33]],[1,[10]]],"rel":"MORTY","started_swaps":[],"uuid":"5a60bda8-2b15-4729-843d-feb6838c9daa"},"7119965f-4897-4e6d-8565-09e17705e6e6":{"available_amount":"1","base":"MORTY","cancellable":true,"created_at":1570197815924,"matches":{},"max_base_vol":"1","max_base_vol_rat":[[1,[1]],[1,[1]]],"min_base_vol":"0","min_base_vol_rat":[[0,[]],[1,[1]]],"price":"1","price_rat":[[1,[1]],[1,[1]]],"rel":"RICK","started_swaps":[],"uuid":"7119965f-4897-4e6d-8565-09e17705e6e6"}},"taker_orders":{}}}
```


[04-Oct-19 07:08 AM] Slyris#2880
seem's to work


[04-Oct-19 07:08 AM] Slyris#2880
@Mylo


[04-Oct-19 07:09 AM] Slyris#2880
i cannot reproduce, it's working for me :/


[04-Oct-19 07:10 AM] Slyris#2880
Ah


[04-Oct-19 07:10 AM] Slyris#2880
but when i run the real program


[04-Oct-19 07:10 AM] Slyris#2880
i got:


[04-Oct-19 07:10 AM] Slyris#2880
libc++abi.dylib: terminating with uncaught exception of type std::invalid_argument: stod: no conversion


[04-Oct-19 07:12 AM] Slyris#2880
@dcprevere ><


[04-Oct-19 07:12 AM] Slyris#2880
your code is crashing xD


[04-Oct-19 07:12 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/629682334202986507/Capture_decran_2019-10-04_a_16.12.19.png


[04-Oct-19 07:12 AM] Slyris#2880
Here


[04-Oct-19 07:14 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/629682765704462346/Capture_decran_2019-10-04_a_16.14.18.png


[04-Oct-19 07:14 AM] Slyris#2880
the from json is not coded that's why it's crashing @Mylo

{Reactions}
üôè 

[04-Oct-19 07:14 AM] Slyris#2880
We try to convert an empty string


[04-Oct-19 07:14 AM] Slyris#2880
@dcprevere We need to fix it.


[04-Oct-19 07:15 AM] Slyris#2880
We also need to ensure through unit tests that this function is working


[04-Oct-19 07:19 AM] Slyris#2880
I did a quick fix that no logging the error without crashing: 

```
2019-10-04 16:18:28.149 (   6.586s) [om thread       ]          dex.utils.cpp:69    INFO| .   .   .   .   .   .   .   .   .   .   .   .   { const orders::order antara::mmbot::to_order(const mm2::order &)
2019-10-04 16:18:28.149 (   6.587s) [om thread       ]          dex.utils.cpp:78     ERR| .   .   .   .   .   .   .   .   .   .   .   .   .   exception catched: stod: no conversion
2019-10-04 16:18:28.149 (   6.587s) [om thread       ]          dex.utils.cpp:69    INFO| .   .   .   .   .   .   .   .   .   .   .   .   } 0.000 s: const orders::order antara::mmbot::to_order(const mm2::order &)
```


[04-Oct-19 07:19 AM] Slyris#2880
But we need to fix it.


[04-Oct-19 07:20 AM] Slyris#2880
@Mylo I pushed the quick fix, but this need a real fix to be usable


[04-Oct-19 07:54 AM] dcprevere#1502
Sorry, I will look when I'm home


[04-Oct-19 08:01 AM] dcprevere#1502
Is the conversion happening in mm2.client.hpp?


[04-Oct-19 08:04 AM] Slyris#2880
nop


[04-Oct-19 08:04 AM] Slyris#2880
in the dex.utils


[04-Oct-19 08:04 AM] Slyris#2880
.cpp


[04-Oct-19 08:05 AM] Slyris#2880
@dcprevere


[04-Oct-19 04:31 PM] Mylo#8306
nice i'll rebuild cheers for monkey patch üêµ


[04-Oct-19 04:32 PM] Mylo#8306
well not quite monkeypatch üòÑ


[04-Oct-19 09:41 PM] Mylo#8306
Request:  Need these RPC functions implemented in bot->mm2  for GUI.

```
To view my orders:
curl -s  --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_orders\"}"

To view recent swaps e.g. recent 10 swaps:
curl -s --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_recent_swaps\",\"from_uuid\":\"${UUID}\",\"limit\":10}"
```


[04-Oct-19 10:38 PM] dcprevere#1502
@Slyris But the missing code is in mm2.client.cpp? I thought you had implemented this in https://github.com/KomodoPlatform/antara-makerbot/pull/61

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/pull/61
feat(mm2): add my_recent_swaps mm2 rpc call without unit tests by ...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[04-Oct-19 10:38 PM] dcprevere#1502
If you need me to write it I will


[04-Oct-19 10:39 PM] dcprevere#1502
I can find a couple of hours today


[04-Oct-19 10:42 PM] Mylo#8306
cool - might already have recent swaps there.  i'll test it sending from_uuid & limit in json (& rpc password if required)


[04-Oct-19 10:45 PM] dcprevere#1502
I have unit tests that test that function in dex.utils, and it works fine because it is using a mm2::order object. The unit tests would need to test mm2.client as this is where the JSON conversion is happening


[04-Oct-19 10:45 PM] dcprevere#1502
I don't think any of those JSON functions have unit tests, only integration tests


[04-Oct-19 10:48 PM] Mylo#8306
ok - i'm just having some lunch, i'll change some existing code & test it and report back.  sounds +ve it'll work


[04-Oct-19 10:48 PM] dcprevere#1502
@Mylo Sorry, I'm not exactly sure what has been implemented as I didn't review that code


[04-Oct-19 10:49 PM] dcprevere#1502
I will take a look for you and work out what is missing


[04-Oct-19 11:20 PM] Mylo#8306
guessing at my_recent_swaps, i'm getting 500 error at least.
`my_orders` more useful to me, because i can then cancel them individually.


[04-Oct-19 11:29 PM] Slyris#2880
@dcprevere if you can take care of it yes please I'm rly busy on the gaming SDK now


[06-Oct-19 04:23 AM] dcprevere#1502
I've made a PR for this https://github.com/KomodoPlatform/antara-makerbot/pull/71

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/pull/71
Add JSON order parsing by DCPRevere ¬∑ Pull Request #71 ¬∑ KomodoP...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[06-Oct-19 04:23 AM] dcprevere#1502
Sorry it took some time, I had to fix some other things first


[07-Oct-19 09:06 PM] Mylo#8306
https://github.com/KomodoPlatform/antara-makerbot/blob/master/src/http/http.mm2.rest.cpp#L46

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/src/http/http.mm2.rest.cpp
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[07-Oct-19 09:07 PM] Mylo#8306
Is the rest api creating an orderbook request with the tickers the wrong way?  I seem to be getting the inverted response to what i'm expecting & the output directly from mm2


[07-Oct-19 10:47 PM] Slyris#2880
@Mylo it's possible yes, I will check it today


[07-Oct-19 10:50 PM] Slyris#2880
Yeah you right https://github.com/KomodoPlatform/antara-makerbot/blob/master/src/utils/mmbot_strong_types.hpp#L96

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/src/utils/mmbot_strong_types.hpp
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[08-Oct-19 01:05 AM] Mylo#8306
beauty (that's great!) - you guys write nice reading code.  when i write articles about this project, is there any particular style/conventions used?

i've flipped around in my http call for temporary workaround.  when it's fixed in mmbot simple to fix my end obv so not urgent.


[08-Oct-19 01:31 AM] Slyris#2880
Y np


[08-Oct-19 01:32 AM] Slyris#2880
We use boost coding style

{Reactions}
üëå 

[08-Oct-19 01:32 AM] Slyris#2880
For commits we use conventional commit


[08-Oct-19 03:40 AM] Slyris#2880
I'm pushing the fix very soon @Mylo


[08-Oct-19 03:40 AM] Mylo#8306
ok cool thanks.
@Slyris been on the phone to @TS just now and this `my_orders` rpc is gonna get flagged as a bit more urgent to implment in the mmbot fyi
https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#my-orders

Sweet!!


[08-Oct-19 03:40 AM] Slyris#2880
@dcprevere Hey


[08-Oct-19 03:40 AM] Slyris#2880
I think dcprevere just push the my_orders fix


[08-Oct-19 03:41 AM] Slyris#2880
so i will merge after CI


[08-Oct-19 04:05 AM] Slyris#2880
@Mylo my_orders merged and your fix too


[08-Oct-19 04:18 AM] Mylo#8306
awesome thanks - nice few hours to come üòÑ


[08-Oct-19 04:18 AM] Slyris#2880
Doesn't hesitate if you find other bugs @Mylo

{Reactions}
üëç 

[10-Oct-19 11:04 PM] TS#7923
Hi guys, @Slyris @dcprevere

I think there is a miscommunication here üôÇ Is the my_orders call working? @Mylo needs that to connect it to the makerbot frontend (display and cancel your own orders). 

Also, we need a call for the withdrawal feature for the same reason.

Thank you!

{Reactions}
üôè 

[10-Oct-19 11:05 PM] Mylo#8306
All cancel order functions work.  Only need 1.  my_orders & 2. withdraw.


[10-Oct-19 11:12 PM] Slyris#2880
My_orders is not working ??


[10-Oct-19 11:12 PM] Slyris#2880
@Mylo


[10-Oct-19 11:14 PM] Mylo#8306
API call for my_orders doesn't exist.
The fix the other day was for parsing the response of an order after it was sent to marketmaker.


[10-Oct-19 11:14 PM] Slyris#2880
Ok wait


[10-Oct-19 11:14 PM] Mylo#8306
Oh that fix was for flipping the base/quote pair.


[10-Oct-19 11:14 PM] Mylo#8306
placing an order.


[10-Oct-19 11:14 PM] Mylo#8306
the marketmaker `my_orders` needs to be exposed to http


[10-Oct-19 11:15 PM] Slyris#2880
https://github.com/KomodoPlatform/antara-makerbot/blob/master/src/mm2/mm2.client.hpp#L428

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/src/mm2/mm2.client.hpp
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[10-Oct-19 11:15 PM] Slyris#2880
Oki


[10-Oct-19 11:15 PM] Slyris#2880
I got it


[10-Oct-19 11:15 PM] Slyris#2880
He is on mm2 but not on http yet


[10-Oct-19 11:15 PM] Slyris#2880
Alright ?


[10-Oct-19 11:16 PM] Slyris#2880
Yeah ok I will add it with withdraw today


[10-Oct-19 11:23 PM] Mylo#8306
correct!  & sweet


[10-Oct-19 11:25 PM] Mylo#8306
@Slyris sorryjust üëç in case you didn't see answer


[10-Oct-19 11:26 PM] Slyris#2880
:)

{Reactions}
üòõ 

[11-Oct-19 12:14 AM] Slyris#2880
@Mylo http my orders merged


[11-Oct-19 12:15 AM] Mylo#8306
k, building new image cheers!!!!!!!!!!!!


[11-Oct-19 12:38 AM] Slyris#2880
@Mylo @TS @TonyL About fees for the withdrawal, what we do ? fixed fee's ?


[11-Oct-19 12:39 AM] Slyris#2880
https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html#withdraw

{Embed}
https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html
Komodo Developer Documentation
Documentation for developers building on the Komodo Platform
https://images-ext-2.discordapp.net/external/JRuH6_LDrjOGd6HbRckiIc9OBFcyJGE1c7DjCukFvtA/https/developers.komodoplatform.com/start-here-pics/Dev_Docs_Introduction_small.png


[11-Oct-19 12:40 AM] Slyris#2880
also @Mylo If you find bugs doesn't hesitate to build image in debug build configuration so i can have more log's


[11-Oct-19 12:52 AM] Mylo#8306
ok - so far so good.   i just sent a number and got a 302 string expected so that handled no probs in json request.
how to build in debug config?

for withdraw, i would say do the easiest ones, no fee mentioned because we are already the owners of the wallet & both BTC & ETH based coins require same parameters at mm2 level.


[11-Oct-19 12:53 AM] Mylo#8306
@Slyris my 2 sats worth


[11-Oct-19 12:53 AM] Slyris#2880
Oki


[11-Oct-19 12:54 AM] Slyris#2880
so i dont use fees field


[11-Oct-19 12:54 AM] Slyris#2880
and let mm2 choose for us


[11-Oct-19 12:54 AM] Slyris#2880
@Mylo About what the string expected ?


[11-Oct-19 12:55 AM] Slyris#2880
for debug it's the option `-DCMAKE_BUILD_TYPE=Debug` and `cmake --build . --config Debug` smth like that


[11-Oct-19 12:55 AM] Slyris#2880
Show me your dockerfile


[11-Oct-19 12:55 AM] Slyris#2880
i will let you know


[11-Oct-19 12:59 AM] Mylo#8306
https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker/blob/makerbot/Dockerfile

{Embed}
https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker/blob/makerbot/Dockerfile
Komodo-Cakeshop/docker-atomicdex-api-marketmaker
Contribute to Komodo-Cakeshop/docker-atomicdex-api-marketmaker development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/JpoXzzXQ4UN23-0fC_I0eSDzdJcEbB8QyMefYTwucDg/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/45069400


[11-Oct-19 12:59 AM] Mylo#8306
docker file


[11-Oct-19 01:00 AM] Slyris#2880
https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker/blob/makerbot/Dockerfile#L44

{Embed}
https://github.com/Komodo-Cakeshop/docker-atomicdex-api-marketmaker/blob/makerbot/Dockerfile
Komodo-Cakeshop/docker-atomicdex-api-marketmaker
Contribute to Komodo-Cakeshop/docker-atomicdex-api-marketmaker development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/JpoXzzXQ4UN23-0fC_I0eSDzdJcEbB8QyMefYTwucDg/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/45069400


[11-Oct-19 01:00 AM] Slyris#2880
replace release by debug here and the line below @Mylo


[11-Oct-19 01:00 AM] Mylo#8306
ok thanks!


[11-Oct-19 01:01 AM] Slyris#2880
I will do withdraw call this evening when i'm back !


[11-Oct-19 01:02 AM] Mylo#8306
ok cool i'll implement in gui tomorrow morning


[11-Oct-19 01:02 AM] Slyris#2880
ok, my_orders working for you know ?


[11-Oct-19 01:02 AM] Slyris#2880
Did you try it ?


[11-Oct-19 01:02 AM] Mylo#8306
https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md#mm2-setprice
i sent price as a number and it responded 302 string expected - so it was normal behaviour.   nothing to see really üôÇ

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/docs/api.md
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[11-Oct-19 01:03 AM] Mylo#8306
no testing.  my image failed on mm2 build.  i'll show artem


[11-Oct-19 01:04 AM] Slyris#2880
You know that you dont need to build mm2 ?


[11-Oct-19 01:04 AM] Slyris#2880
@Mylo


[11-Oct-19 01:04 AM] Slyris#2880
The programm fetch the last mm2 for your current os


[11-Oct-19 01:05 AM] Slyris#2880
and launch it itself


[11-Oct-19 01:05 AM] Mylo#8306
hmmmmm....ok will comment out


[11-Oct-19 01:05 AM] Slyris#2880
```CMake
if (APPLE)
    FetchContent_Declare(mm2
            URL http://195.201.0.6/mm2/mm2-latest-Darwin.zip)
elseif (LINUX)
    FetchContent_Declare(mm2
            URL http://195.201.0.6/mm2/mm2-latest-Linux.zip)
else()
    FetchContent_Declare(mm2
            URL http://195.201.0.6/mm2/mm2-latest-Windows_NT.zip)
endif ()
```


[11-Oct-19 01:06 AM] Slyris#2880
https://github.com/KomodoPlatform/antara-makerbot/blob/master/cmake/targets/CMakeLists.txt#L107

{Embed}
https://github.com/KomodoPlatform/antara-makerbot/blob/master/cmake/targets/CMakeLists.txt
KomodoPlatform/antara-makerbot
antara-makerbot repo. Contribute to KomodoPlatform/antara-makerbot development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[11-Oct-19 01:06 AM] Mylo#8306
sweet!   thanks


[11-Oct-19 01:44 AM] TonyL#3577
Maybe we can do it as in AtomicDEX mobile: fixed fee by default and possibility to set custom one? @Slyris


[11-Oct-19 01:51 AM] Slyris#2880
Yeah but for the moment I will let fixed one


[11-Oct-19 01:51 AM] Slyris#2880
And latter add the possibility


[11-Oct-19 02:03 AM] TonyL#3577
Ok, not sure why you asked so if it is only option for now üòÅ


[11-Oct-19 02:04 AM] TonyL#3577
But yeah - for btc and eth it will be very useful especially with often transfers to cex


[11-Oct-19 02:56 AM] Slyris#2880
I have a local withdraw that work with default fee's


[11-Oct-19 02:56 AM] Slyris#2880
I have to do the http call the docs and push


[11-Oct-19 05:42 AM] Slyris#2880
@Mylo I'm guesstion that a withdraw is `withdraw` + `send_raw_transaction` alright ?


[11-Oct-19 01:55 PM] Slyris#2880
@Mylo Answer me tommorow, because for the moment i only push withdraw stuff


[11-Oct-19 02:09 PM] smkhound#7640
@Slyris `withdraw` method returns a tx_hex json value, which has to be broadcast with `sendrawtransaction`
python implementation here - https://github.com/smk762/pytomicDEX/blob/master/lib/tuilib.py#L584

{Embed}
https://github.com/smk762/pytomicDEX/blob/master/lib/tuilib.py
smk762/pytomicDEX
Contribute to smk762/pytomicDEX development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6xcX3Z50JaMIMuZ9mAXOpQv_L8FfDr-TLGFP0GMRbbU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/35845239


[11-Oct-19 02:11 PM] Slyris#2880
Yeah i got it i will implement it too so


[11-Oct-19 08:20 PM] Mylo#8306
and yes, just to re-confirm the confirm, from gui app point of view, just want to send the withdraw request and get the send raw transaction response so we get the tx id for the user.


[11-Oct-19 08:23 PM] Mylo#8306
e.g
```.
GUI withdraw -> mmbot
                             mmbot -> mm2.withdraw
                             mmbot <- hex response (mm2)
                             mmbot -> sendrawtransaction to broadcast the hex response  mm2
                            mmbot <- txid from mm2
GUI withraw response is the txid from previous step  <- mmbot
```


[11-Oct-19 11:34 PM] Slyris#2880
Great


[12-Oct-19 01:12 AM] Slyris#2880
@Mylo I'm about merging the raw transaction call


[12-Oct-19 02:24 AM] Slyris#2880
@Mylo Merged

{Reactions}
üëç 

[24-Oct-19 08:22 AM] ca333#0333
what is the status of the markerbot GUI @TS @Mylo the delay is starting to become a problem based on the initial "high priority" status - we have to set a deadline for end of this month - should give you enough time to finalize this.


[24-Oct-19 10:09 AM] Slyris#2880
Let me know if any help needed for the backend

{Reactions}
üëç 

[25-Oct-19 02:44 AM] ca333#0333
??


[25-Oct-19 02:13 PM] ca333#0333
Since DM and internal channel tag has stayed unacknowledged @TonyL will be taking over the makerbot GUI project management and proceed with this after the atomicDEX stress test. @Mylo please send the current codes over so we can hand this over to the new dev.


[26-Oct-19 04:18 AM] Slyris#2880
Doesn't hesitate to ping me if any help is needed, I'm still on the gaming SDK but can switch if needed.


[26-Oct-19 06:01 AM] smkhound#7640
is gui standalone or web-based?


[26-Oct-19 10:22 AM] TonyL#3577
@smkhound lets make a call tomorrow at 10AM UTC tomorrow (if you're availiable at this time) to discuss this matter

{Reactions}
üëçüèΩ 

[28-Oct-19 12:45 AM] TonyL#3577
@smkhound https://docs.google.com/document/d/1upR5r3QjSM_6Gi99rJmjacJrSZDxoV_4GpQ11Vv2MNU/edit?usp=sharing please have a look, left questions/suggestions if have any and lets go ahead with pyqt üôÇ [CC: @ca333]

{Embed}
https://docs.google.com/document/d/1upR5r3QjSM_6Gi99rJmjacJrSZDxoV_4GpQ11Vv2MNU/edit?usp=sharing
makerbot
Iteration 1 (October 28 - November 5)  Needed functionality:  Basic wallet functionality:  List of activated coins with possibility to activate/deactivate On coin select should be available: Balance displaying Deposit button - on click should display receiving address and QR ...
https://images-ext-1.discordapp.net/external/MzMicTetjxTp2KYH650cw2eeucCT71ClnJ2di5F85qI/https/lh5.googleusercontent.com/wVu1Oo0m_vdk9agE7qnt2MWS5KA8RdEsQQQJY2aqNCCpPPaxky7nDF9M1teb9XeT2yEENw%3Dw1200-h630-p

{Reactions}
üëçüèΩ (2) 

[28-Oct-19 01:19 AM] Slyris#2880
oki !


[03-Dec-19 10:01 AM] naezith#9757
I just had this same issue and it took a while to find this solution https://canary.discordapp.com/channels/412898016371015680/476025090627207168/542358215816380427


[03-Dec-19 10:01 AM] naezith#9757
you might wanna have that in README or here <https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-setup/get-started-atomicdex.html>


[04-Dec-19 02:38 AM] smkhound#7640 (pinned)
@here I've just finished the early testing version of Antara Makerbot.
Installers for Mac/Win/Linux  are available at https://github.com/smk762/mmbot_qt/releases/tag/v0.0.1a
Draft User Guide is here - https://github.com/smk762/mmbot_qt/blob/style/docs/README.rst (some screenshots are due for an update)
Please have a look if you can, and let me know if you find any issues or have suggestions via https://github.com/smk762/mmbot_qt/issues
Thanks üê∂

{Embed}
https://github.com/smk762/mmbot_qt/releases/tag/v0.0.1a
smk762/mmbot_qt
MarketMaker2 BobBot GUI for pythonQT. Contribute to smk762/mmbot_qt development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6xcX3Z50JaMIMuZ9mAXOpQv_L8FfDr-TLGFP0GMRbbU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/35845239

{Embed}
https://github.com/smk762/mmbot_qt/blob/style/docs/README.rst
smk762/mmbot_qt
MarketMaker2 BobBot GUI for pythonQT. Contribute to smk762/mmbot_qt development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6xcX3Z50JaMIMuZ9mAXOpQv_L8FfDr-TLGFP0GMRbbU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/35845239

{Embed}
https://github.com/smk762/mmbot_qt/issues
smk762/mmbot_qt
MarketMaker2 BobBot GUI for pythonQT. Contribute to smk762/mmbot_qt development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6xcX3Z50JaMIMuZ9mAXOpQv_L8FfDr-TLGFP0GMRbbU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/35845239

{Reactions}
üíØ (3) üëè (3) 

[04-Dec-19 02:47 AM] smkhound#7640
Pinned a message.


[04-Dec-19 03:14 AM] naezith#9757
I needed to do `brew install coreutils` for `stdbuf` here <https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-tutorials/atomicdex-walkthrough.html#initiate-marketmaker-2-0>


[04-Dec-19 03:26 AM] naezith#9757
there isn't captcha at this faucet, you are probably aware of this one but I'll still point out the non-smooth parts of the guide.<https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-tutorials/atomicdex-walkthrough.html#get-morty-from-a-faucet>

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/651746027942051841/unknown.png


[04-Dec-19 03:27 AM] naezith#9757
@ca333 I need some r&m


[04-Dec-19 03:27 AM] naezith#9757
`RQbGjRvF8ACZD1yoFS5okBz7yMrHQShFx9`


[04-Dec-19 03:29 AM] gcharang#6833
@TonyL ^


[04-Dec-19 03:30 AM] TonyL#3577
@pbca26 looks like captcha doesn't work again for faucet


[04-Dec-19 03:31 AM] ca333#0333
will send you shortly @naezith


[04-Dec-19 03:37 AM] naezith#9757
about missing coreutils, I don't have xcode installed maybe that's why, but I have the command line tools. and I couldn't run the apt-get line here:

<https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-setup/get-started-atomicdex.html#install-additional-dependencies>

and just changing that apt-get to brew won't work since `libssl-dev` is `openssl` at brew


[04-Dec-19 04:17 AM] pbca26#5430

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/651758969928417351/Screen_Shot_2019-12-04_at_3.16.32_PM.png


[04-Dec-19 04:18 AM] pbca26#5430
"works on my machine" @TonyL 
need more details to debug
any errors in browser dev console?


[04-Dec-19 04:20 AM] gcharang#6833
@pbca26 when naezith reported, it didn't work for me also
now, it looks fine on my end


[04-Dec-19 04:25 AM] pbca26#5430
okay, ping me if it won't work again
perhaps recaptcha scripts didn't load properly from google cdn or else

{Reactions}
üëç 

[04-Dec-19 04:41 AM] TonyL#3577
was a temporary issue it seems, yep


[04-Dec-19 04:44 AM] naezith#9757
still broken for me @pbca26


[04-Dec-19 04:45 AM] naezith#9757
macOS chrome and safari


[04-Dec-19 04:45 AM] naezith#9757
I did ctrl shift R too


[04-Dec-19 04:46 AM] gcharang#6833
@naezith any errors in the console?


[04-Dec-19 04:46 AM] naezith#9757
ah yes, a really good one

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/651766272299630594/unknown.png


[04-Dec-19 04:58 AM] naezith#9757
https://github.com/google/recaptcha/issues/230#issuecomment-386745981 @pbca26 @gcharang

{Embed}
https://github.com/google/recaptcha/issues/230
Uncaught TypeError: grecaptcha.render is not a function ¬∑ Issue #...
Uncaught TypeError: grecaptcha.render is not a function. I&#39;m getting this error intermittently when loading invisible recaptcha on my site. For reference I have some code checking for when ...
https://images-ext-1.discordapp.net/external/MopQsmp9sODwNp2FD2CC_ZHjFpL-MqdPWzCfC95IXq0/https/repository-images.githubusercontent.com/24650294/4d804b80-7e39-11e9-82fe-07761d844a8c


[04-Dec-19 04:58 AM] naezith#9757
found this after a quick search


[04-Dec-19 05:03 AM] Slyris#2880
@naezith It's work after reloading the page on chrome


[04-Dec-19 05:03 AM] Slyris#2880
Otherwise you can use wif wallet that send @TonyL To us few days ago


[04-Dec-19 05:03 AM] Slyris#2880
It's containing some RICK, i'm using them


[04-Dec-19 05:06 AM] naezith#9757
I already got them from ca but captcha never worked even after billion refreshes


[04-Dec-19 05:07 AM] naezith#9757
doesn't appear on mobile too


[04-Dec-19 05:07 AM] naezith#9757
but yeah it's probably that issue on github


[04-Dec-19 05:55 AM] naezith#9757
captcha appears at composer here so it's not IP ISP or country block <https://composer.kmd.io/login>


[04-Dec-19 06:26 AM] naezith#9757

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/651791358062755841/unknown.png


[04-Dec-19 06:26 AM] naezith#9757
it might be better if you change this 1 to something else


[04-Dec-19 06:26 AM] naezith#9757
confusing


[04-Dec-19 06:26 AM] naezith#9757
here <https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-tutorials/atomicdex-walkthrough.html#observing-the-orderbook>


[04-Dec-19 06:27 AM] TonyL#3577
This channel is related to internal-antara-makerbot GUI testing, not to the documentation


[04-Dec-19 06:27 AM] naezith#9757
ah ok, where should I be posting these


[04-Dec-19 06:27 AM] naezith#9757
internal-docs


[04-Dec-19 06:27 AM] naezith#9757
?


[04-Dec-19 06:27 AM] TonyL#3577
yeah, internal-docs is the right place üëç


[04-Dec-19 06:28 AM] naezith#9757
should I carry these there?


[04-Dec-19 06:29 AM] TonyL#3577
If you see some unclear moments you can feel free to propose the changes in #internal-docs , just CC @gcharang so he is aware

{Reactions}
üëç 

[04-Dec-19 06:29 AM] TonyL#3577
if it some significant change in protocol description lets say might be good to consult with Artem also


[04-Dec-19 07:12 AM] jl777c#5810
https://gekko.wizb.it/
https://github.com/ccxt/ccxt
some possibly useful things

{Embed}
https://github.com/ccxt/ccxt
ccxt/ccxt
A JavaScript / Python / PHP cryptocurrency trading API with support for more than 120 bitcoin/altcoin exchanges - ccxt/ccxt
https://images-ext-1.discordapp.net/external/NmWun5NjlujChJqY5I0lKvpgqUcLntJwmMfovU8Kz2g/https/repository-images.githubusercontent.com/91253698/e3971200-d82c-11e9-8e16-326c046dcea8


[04-Dec-19 07:37 AM] TonyL#3577
@smkhound this api ^^ looks like nice timesaver for more exchanges integration into your bot


[04-Dec-19 09:41 AM] pbca26#5430
@naezith can you try https://www.atomicexplorer.com/faucet ?
does captcha render there?

{Embed}
https://www.atomicexplorer.com/faucet
Atomic Explorer / Faucet
Atomic Explorer


[04-Dec-19 09:42 AM] naezith#9757
yes


[04-Dec-19 09:43 AM] naezith#9757

{Attachments}
https://cdn.discordapp.com/attachments/604257111798579203/651840903282950154/unknown.png


[04-Dec-19 09:43 AM] naezith#9757
but nothing happens when I click and error in console


[04-Dec-19 09:45 AM] pbca26#5430
should work now


[04-Dec-19 09:45 AM] naezith#9757
yep!


==============================================================
Exported 2,394 message(s)
==============================================================
