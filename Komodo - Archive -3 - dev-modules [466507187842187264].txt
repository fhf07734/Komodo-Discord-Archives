==============================================================
Guild: Komodo
Channel: Archive -3 / dev-modules
Topic: Dev Docs: https://developers.komodoplatform.com | Test plan: https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=211514340
https://medium.com/@jameslee777/how-to-implement-finite-state-machines-into-a-cc-8dfeadccbcad
https://github.com/dimxy/komodo/wiki/Designing-RPC-for-FSM-CC
==============================================================

[11-Jul-18 12:46 AM] Mylo#8306
@libscott @libscott would you mind posting the web payment api link and the big chain DB links that were in slack so we can pin them here.  Cheers


[11-Jul-18 01:08 AM] gcharang#6833
@Mylo do you remember the name of the slack channel for cryptoconditions? Its pins might be useful to backup. i have been collecting the pins of other major slack channels


[11-Jul-18 01:12 AM] Mylo#8306
@gcharang #ilp


[11-Jul-18 02:04 AM] jorian#4555
https://blog.bigchaindb.com/an-argument-against-smart-contracts-57f4f2a05b3d

{Embed}
https://blog.bigchaindb.com/an-argument-against-smart-contracts-57f4f2a05b3d
Introducing Simple Contracts ‚Äì The BigchainDB Blog
Business Logic Without Smart Contract Security Risks
https://images-ext-1.discordapp.net/external/lUtN8HERTLBrzxi-CjzaPPfh0n41qpIWSnNKn9jEw8Y/https/cdn-images-1.medium.com/max/1200/1%2Ay9HLT-qda2wjb1dL5xZy6Q.jpeg


[11-Jul-18 02:05 AM] jorian#4555
https://blog.bigchaindb.com/stateless-stateful-smart-contracts-9b8ed2c36bbf

{Embed}
https://blog.bigchaindb.com/stateless-stateful-smart-contracts-9b8ed2c36bbf
Stateless & Stateful Smart Contracts ‚Äì The BigchainDB Blog
Lessons in flexibility, scale, and security from digital circuit design
https://images-ext-1.discordapp.net/external/sbjQYJUFPxaCCuIzOsm30iUJJTORL_gaPTJbNV1guOE/https/cdn-images-1.medium.com/max/1200/1%2Ahv1H5z95bT2f_llqtxYglQ.png


[11-Jul-18 02:06 AM] jorian#4555
and i think this applies too, but @libscott will need to confirm https://datatracker.ietf.org/doc/draft-thomas-crypto-conditions/

{Embed}
https://datatracker.ietf.org/doc/draft-thomas-crypto-conditions/
draft-thomas-crypto-conditions-04 - Crypto-Conditions
Crypto-Conditions (Internet-Draft, 2018)


[11-Jul-18 02:11 AM] Mylo#8306
@gcharang found it https://developers.google.com/web/fundamentals/payments/

{Embed}
https://developers.google.com/web/fundamentals/payments/
Introducing the Payment Request API ¬†|¬† Web Fundamentals
      ...
Payment Request API is for fast, easy payments on the web.
https://images-ext-1.discordapp.net/external/zvOwtGB-vQ_Ds1_hHJFFVF_srT_KmypeWmcEuHbmXCU/https/developers.google.com/web/images/social-webfu-16x9.png

{Reactions}
üëç 

[11-Jul-18 02:14 AM] gcharang#6833
@SHossain pin the above links please.


[11-Jul-18 04:02 AM] KomodoWorld#8282
are there other projects beside Ripple and Komodo that are implementing the Inter ledger protocol ?


[11-Jul-18 09:22 AM] gcharang#6833 (pinned)
Introduction to Simple Contracts:
https://blog.bigchaindb.com/an-argument-against-smart-contracts-57f4f2a05b3d
https://blog.bigchaindb.com/stateless-stateful-smart-contracts-9b8ed2c36bbf

Crypto Conditions implemented for KMD: 
https://datatracker.ietf.org/doc/draft-thomas-crypto-conditions/

Google's native payment API for the web
https://developers.google.com/web/fundamentals/payments/

{Embed}
https://blog.bigchaindb.com/an-argument-against-smart-contracts-57f4f2a05b3d
Introducing Simple Contracts ‚Äì The BigchainDB Blog
Business Logic Without Smart Contract Security Risks
https://images-ext-1.discordapp.net/external/lUtN8HERTLBrzxi-CjzaPPfh0n41qpIWSnNKn9jEw8Y/https/cdn-images-1.medium.com/max/1200/1%2Ay9HLT-qda2wjb1dL5xZy6Q.jpeg

{Embed}
https://blog.bigchaindb.com/stateless-stateful-smart-contracts-9b8ed2c36bbf
Stateless & Stateful Smart Contracts ‚Äì The BigchainDB Blog
Lessons in flexibility, scale, and security from digital circuit design
https://images-ext-1.discordapp.net/external/sbjQYJUFPxaCCuIzOsm30iUJJTORL_gaPTJbNV1guOE/https/cdn-images-1.medium.com/max/1200/1%2Ahv1H5z95bT2f_llqtxYglQ.png

{Embed}
https://datatracker.ietf.org/doc/draft-thomas-crypto-conditions/
draft-thomas-crypto-conditions-04 - Crypto-Conditions
Crypto-Conditions (Internet-Draft, 2018)

{Embed}
https://developers.google.com/web/fundamentals/payments/
Introducing the Payment Request API ¬†|¬† Web Fundamentals
      ...
Payment Request API is for fast, easy payments on the web.
https://images-ext-1.discordapp.net/external/zvOwtGB-vQ_Ds1_hHJFFVF_srT_KmypeWmcEuHbmXCU/https/developers.google.com/web/images/social-webfu-16x9.png

{Reactions}
üíØ (2) üëç 

[11-Jul-18 09:22 AM] gcharang#6833
Pinned a message.


[11-Jul-18 06:46 PM] Mylo#8306 (pinned)
also "Payment Handler API" to enable payments from webapps.
1.  https://www.w3.org/Payments/WG/
2. https://w3c.github.io/payment-handler/

{Reactions}
üëå 

[11-Jul-18 11:06 PM] gcharang#6833
Pinned a message.


[14-Jul-18 06:43 AM] grewalsatinder#9653
https://twitter.com/satindergrewal/status/1018127510784040960

{Embed}
Satinder Grewal (@satindergrewal)
https://twitter.com/satindergrewal/status/1018127510784040960
Merkle Root Of Merkle Root Of Merkle Root (MoMoM) is the base component tech of @KomodoPlatform smart contracts. To get yourself some technical clarity on Mekle Root, you might like to watch this good video: https://t.co/ayRdcvK7Iv https://t.co/TarNoBZmzd
Twitter

{Reactions}
üëå (2) 

[14-Jul-18 06:43 AM] grewalsatinder#9653
The video referenced in tweet is very good.


[14-Jul-18 06:43 AM] grewalsatinder#9653
It helped me better than the andreas's book of Mastring Bitcoin.


[14-Jul-18 06:44 AM] grewalsatinder#9653
@benohanlon


[17-Jul-18 11:01 PM] ph03nix#3115
can we rename this channel to #crypto-conditions


[18-Jul-18 03:07 AM] jl777c#5810
yes


[18-Jul-18 07:36 AM] jl777c#5810
I am starting to experiment with CC and see what I can make it do. not 100% sure yet, but I think I might have written a utxo based assets system. All you can do is create and transfer assets, but it is divisible to the satoshi, whatever amount was used to create it. this is only core level support, so would need to have the asset tx creation made easy, but so far it seems very very extensible. If you have a smart contract use case, plz post here and I will see how much work it would be to implement


[18-Jul-18 07:38 AM] jl777c#5810
actually libscott wrote 200 lines of code to implement a basic colored coin implementation and I just morphed it a bit to leverage the built in utxo system. still need to make the wallet know about asset utxo


[18-Jul-18 07:39 AM] KomodoWorld#8282
this is another great feature


[18-Jul-18 07:40 AM] KomodoWorld#8282
I wonder if it's possible to have cross-chain transfer where the coins become colored coins on the destination blockchain ?

{Reactions}
ü§î 

[18-Jul-18 07:42 AM] KomodoWorld#8282
so we could have blockchains with their own coin, and Kmd as an asset on them


[18-Jul-18 07:43 AM] Deleted User#0000
I would love for this to be possible. Me and my friend were discussing a game, where you have items and a crypto to trade said items, being able to transfer items across blockchains would allow that to scale to infinity. The items would be something like crypto kitties, but weapons and armour etc, that you can upgrade, each being totally unique.


[18-Jul-18 07:45 AM] KomodoWorld#8282
I've been thinking about this for a while, a way to entice small coins (and some not so small ones) to join Kmd ecosystem. They could fork to an assetchain importing their current utxo, and at the time same work as a "transport layer" for kmd as a colored coin on top of them


[18-Jul-18 07:46 AM] jl777c#5810
it costs the native coin to issue the colored coins


[18-Jul-18 07:47 AM] jl777c#5810
but you can interpret each satoshi to represent a different amount, ie. change the decimals resolution, so 1 COIN would support 1 million assets with 0.01 resolution (as there are 100 million satoshis in 1.00000000)

{Reactions}
üëå (2) 

[18-Jul-18 07:51 AM] jl777c#5810
I would think a dedicated blockchain for a specific game would be able to handle its usage


[18-Jul-18 07:52 AM] Deleted User#0000
I think that would be fine to really. As the blockchain would really only need transactions for trading or when an item is created/upgraded. Even with millions of users, it would probably handle the load.


[18-Jul-18 07:53 AM] jl777c#5810
as it is you should be able to add arbitrary data to the asset creation via opreturn

{Reactions}
üëç 

[18-Jul-18 07:54 AM] jl777c#5810
so a game can have some list of characteristics, names, even small graphics


[18-Jul-18 07:54 AM] jl777c#5810
encoded into each asset creation.


[18-Jul-18 07:55 AM] jl777c#5810
for now an asset is divisible to the satoshi, but I guess if you created it with 0.00000001 native coins, it cant be divided


[18-Jul-18 10:50 AM] grewalsatinder#9653
The first thing I'd love to have solved in KMD ecosystem is the identity and trust system on those anon identities.

{Reactions}
üëå 

[18-Jul-18 10:50 AM] grewalsatinder#9653
May be if we can replicate Augur system for that?


[18-Jul-18 06:17 PM] Mylo#8306 (pinned)
Transfer an asset example (a coloured marble):  https://developer.ibm.com/code/patterns/deploy-an-asset-transfer-app-using-blockchain/  nodejs & go.

{Embed}
Neil MacKinnon
https://developer.ibm.com/code/patterns/deploy-an-asset-transfer-app-using-blockchain/
Deploy an asset-transfer app using blockchain - IBM Code
Learn app development within a Hyperledger Fabric network by creating an asset-transfer app to transfer marbles between multiple owners.
https://images-ext-1.discordapp.net/external/l_mOyWsC184w-otilyQIutNziz2XkfGP6twV8vNLPCo/https/developer.ibm.com/code/wp-content/uploads/sites/118/2017/06/twitter-code-journey-marbles-app.jpg


[19-Jul-18 02:16 AM] Mylo#8306
Pinned a message.


[19-Jul-18 02:16 AM] Mylo#8306
Pinned a message.


[19-Jul-18 02:16 AM] Mylo#8306
Pinned a message.


[19-Jul-18 02:17 AM] Mylo#8306
Pinned a message.


[19-Jul-18 02:19 AM] Mylo#8306
sorry, no pinned messages were showing, then after i pinned they displayed.

where are the instructions for compiling kmd-cc, i remember in the old chat there were instructions posted.

regtest works for kmd and ACs, next step cc


[19-Jul-18 02:25 AM] jl777c#5810
CC is built into komodod


[19-Jul-18 02:25 AM] jl777c#5810
any chain with -ac_cc=1 enables CC


[19-Jul-18 04:22 AM] Mylo#8306
do i need `-pubkey` ?

start
```
./komodod -ac_name=CCWOOHOO -regtest -gen -genproclimit=1 -rpcport=17557 -port=17558 -ac_cc=1 &
```

generate 5 blocks
```
$ ./komodo-cli -regtest -ac_name=CCWOOHOO generate 5
6d6923e2bfde7c168aa291d6f2956a7ba25b5fa97a48bd32d789e496a5458176 hash vs 0f0f0f0000000000000000000000000000000000000000000000000000000000 ht.2 special.0 special2.0 flag.0 notaryid.-1 mod.2 error
000000000000000000000000000000000000000000000000000000000000000000 <- pubkey
000000000000000000000000000000000000000000000000000000000000000000 <- origpubkey
b5c2b870040957fb952ee1fa5707b739fda4a370b8bdbe0912dc3f7dc7ef734c hash vs 0f0f0f0000000000000000000000000000000000000000000000000000000000 ht.2 special.0 special2.0 flag.0 notaryid.-1 mod.2 error
...
...
... this repeats about 20 times
...
...
```
but it works
```
-1 mod.6 error
000000000000000000000000000000000000000000000000000000000000000000 <- pubkey
000000000000000000000000000000000000000000000000000000000000000000 <- origpubkey
[
  "0de50308ffc6a486549b4d471e8946a4c20f916a0386a943a46399e311936355",
  "00180d01a5b8408b8861995518a78d69eb5aca036688518c3d278f7f90e18e3e",
  "06b197894e572c7c3cea001a1897aacabd7870675880e0cc8d554c4a399da4ca",
  "021cb68d4812978f8a6a435d9db57b88ed68572036340284545df79d147353e1",
  "0be4cb70e65471b34f3ea4363a967da5da99c6f900b401f608f88bf932276b90"
]
```
`jl777/dev` repo/branch fyi


[19-Jul-18 04:30 AM] jl777c#5810
why are you using regtest?


[19-Jul-18 04:30 AM] jl777c#5810
the entire chain is a testchain


[19-Jul-18 04:30 AM] jl777c#5810
just run it normally


[19-Jul-18 04:31 AM] jl777c#5810
-pubkey is optional, it just makes change go to the pubkey


[19-Jul-18 05:26 AM] Mylo#8306
regtest is a fairly new feature added.

and cos a friendly quote says `since we have regtest, we can write new KMD-specific tests that make sure KMD features work correctly/etc` - which is a good way to get new devs familiar with code, writing tests for them.   plus we inherit a whole bunch of zcash testing.

and when dockerized, lowers barriers for devs to d/l in their sanctioned environments.

rinse repeat something something contracts, NN/iguana.


[19-Jul-18 05:28 AM] Mylo#8306
obv i can ignore
```
error
000000000000000000000000000000000000000000000000000000000000000000 <- pubkey
000000000000000000000000000000000000000000000000000000000000000000 <- origpubkey
```
are these same warnings as pre-MoMoM times when first introduced to CHIPS network?


[19-Jul-18 05:41 AM] jl777c#5810
not sure what that is from


[20-Jul-18 11:35 AM] allbits#5898
I understand that example simple cc contracts are being built now - would a simple permissionless, 100% enforceable lottery be a decent proof of concept?

https://www.reddit.com/r/ethereum/comments/7qzn4t/a_smart_contract_that_functions_as_a_lottery/#thing_t1_dst413n

{Embed}
https://www.reddit.com/r/ethereum/comments/7qzn4t/a_smart_contract_that_functions_as_a_lottery/
r/ethereum - A smart contract that functions as a lottery...
12 votes and 38 comments so far on Reddit


[20-Jul-18 11:43 AM] jl777c#5810
sure I will add a lotto contract to my list


[20-Jul-18 12:51 PM] allbits#5898
Cool! It "works" on ethereum ... if you you're willing to pay silly gas prices lol


[20-Jul-18 01:56 PM] siu#3920
How is the underlying chain txfees be paid when tokens move on a cc smart contract?


[20-Jul-18 01:56 PM] allbits#5898
Another possible simple and fun proof of concept contract idea would be an actual ponzi that returns 100% of "invested" funds. So if you put a unit in, then you get in line to receive two units that are "invested" after you


[20-Jul-18 02:12 PM] grewalsatinder#9653
@siu talking about the assets/tokens made on cc enabled assetchain?


[20-Jul-18 02:12 PM] siu#3920
Yes


[20-Jul-18 02:12 PM] grewalsatinder#9653
those coloured coins as I understand works same as we experienced the NXT's Asset Exchange tokens.


[20-Jul-18 02:13 PM] grewalsatinder#9653
if that's correct and my understanding is fine, then every coloured token tx will cost the underlying assetchain tx fee.


[20-Jul-18 02:25 PM] siu#3920
Which in the case of 100m per 1 underlying coin will make it impossible to move just one token


[20-Jul-18 02:27 PM] siu#3920
I would say that one token is 0.00011000 of the underlying coin


[20-Jul-18 02:27 PM] siu#3920
That way each token has its own txfee to be moved


[20-Jul-18 02:27 PM] siu#3920
But then it could be moved just once?


[20-Jul-18 03:07 PM] grewalsatinder#9653
think it's good to get this cleared by @jl777c üôÇ


[20-Jul-18 08:06 PM] gcharang#6833
@siu As far as I get it,   after coloring, the coins gain new intrinsic value that wasn't there before. So 1 colored coin, even if it is created using 1 sat of the parent chain, doesn't mean its value is 1 sat of the parent chain forever.  As there are other factors that influence its value come into play, it will be worth it to pay the txfee in terms of the parent chain to move even 1 colored coin. (All of the above is similar to using ETH to pay for transacting ERC20 s). A simpler example would be like bitcoins from the genesis block that were mined by satoshi himself. If they were to be sold, they would presumably go for a high premium. Also `untainted` bitcoins that were just mined can go for a premium over bitcoins that were involved with silkroad etc., so you can see a situation in which a colored coin on a ParentChain can have 1/10 th the value of the ParentChain coin if it the market forces decide it. So it would definitely be worth it to transact a single colored coin using 0.00011000 of the underlying coin as the tx fee.


[20-Jul-18 08:08 PM] gcharang#6833
I don't know how fractional colored coins would work, but I am sure it would be an interesting explanation.


[20-Jul-18 11:46 PM] Mylo#8306
creating 100m token from 1 coin means "cost price" is 1 sat per token at creation.
once you add value to the token, it will be worth more than 1 sat.
if you cannot make a token worth more than the tx fee, maybe it's not a good idea to make a token for whatever it represents?


[21-Jul-18 01:09 AM] jl777c#5810
txfees are paid in the native coin


[21-Jul-18 01:10 AM] jl777c#5810
you can use 1 coin or a million to create the total assetoshis supply and make each 0.00000001 worth whatever you deem it to be. Once created, they cannot be destroyed and live on in a separate set of utxos. Ok, you can send to the null privkey address and that would burn it, but all operations preserve the total count of assets, normal utxo must be used for txfee


[21-Jul-18 01:11 AM] jl777c#5810
@allbits I have added ponzi to my list of contracts. also added dice and savings


[21-Jul-18 01:22 AM] polycryptoblog#1173
Futures contract could definitely be done.  Seems like the definition of a timelocked contract.


[21-Jul-18 01:33 AM] jl777c#5810
only for onchain (fo now)


[21-Jul-18 01:36 AM] polycryptoblog#1173
It all starts somewhere


[21-Jul-18 01:41 AM] jl777c#5810
usually, yes


[21-Jul-18 09:31 AM] Hollowman9000#3344
Stretching the definition of usually


[21-Jul-18 09:31 AM] Hollowman9000#3344
Only event that started nowhere was the Big Bang


[21-Jul-18 10:39 AM] Cryptoon#3362
How do we know the big bang didnt get started by something else that started before it


[21-Jul-18 05:26 PM] Deleted User#0000
Big bang didn't happen üòï


[21-Jul-18 05:54 PM] Mylo#8306
crypto explains a lot imo.  we have yet to answer lots of life questions but crypto probably has the answer.  maths isnt invented, it's discovered because it always existed - just our minds needed to find the questions and solutions.  it always has the answer given inputs.  and my hope is we prove that nobody ever "dies" through this immutable ledger tech.

the alt in me is taking a learning trip down the kinesiology path so i've learned recently from talking to ppl about it and am interested to learn more by checking it out.

what fascinates me about it - basically, if someone has a bad experience and bad memory - the practitioner basically "branches" from the event that forms the memory and asks the patient to create a new memory that would have been "better".

software mimics a lot of life, so i'm interested to know if the "branching" is indeed how i perceive it to be.

big bang - maybe thats the coinbase of this universe, parallel ones out there, just need the crypto conditions of astrophysics to be discovered.  üòÑ


[21-Jul-18 05:57 PM] Mylo#8306
"software is an abstraction of reality"


[21-Jul-18 06:32 PM] Deleted User#0000
oh man bringing me down the lsd memory lane üè≥Ô∏è‚Äçüåà


[21-Jul-18 06:32 PM] Deleted User#0000
Do yall ever get phases where you want to enlighten yourself, to learn more and think deep af about everything, then a week later you forget it and go back to normal life for another year LOL.


[21-Jul-18 06:33 PM] Deleted User#0000
We will never figure it all out üò¢


[21-Jul-18 06:44 PM] Deleted User#0000
all the time üòÖ


[21-Jul-18 06:51 PM] Deleted User#0000
Like how tf did some organism turn rocks, fossils and shit into something that can blast us into space üòÇ üöÄ


[21-Jul-18 06:57 PM] Deleted User#0000
Look at your phone and memorize what it looks like. Now move your phone away and picture it in your head


[21-Jul-18 06:57 PM] Deleted User#0000
How can you see both what is in front of your eyes, and the phone at the same time üôÑ


[21-Jul-18 06:58 PM] Deleted User#0000
But that itself is mindfucking LOL. To me anyway

{Reactions}
ü§î 

[21-Jul-18 07:00 PM] Deleted User#0000
My mum recently started travelling to India a lot, to learn Yoga and stuff. There is so much stuff that people seem to ahve forgotten, or whatever to do with consciousness and that.. Science can't even explain what it is, like has no clue at all.


[21-Jul-18 07:01 PM] Deleted User#0000
and the normal everyday person just calls you a crazy and laughs LOL.

{Reactions}
üíØ 

[21-Jul-18 09:07 PM] polycryptoblog#1173
Lol it would be fun to design a faux metaphysics based around crypto  terminology.


[21-Jul-18 11:35 PM] jl777c#5810
== Tokens ==
tokenaddress [pubkey]
tokenask numtokens tokenid price
tokenbalance tokenid [pubkey]
tokenbid numtokens tokenid price
tokencancelask tokenid asktxid
tokencancelbid tokenid bidtxid
tokencreate name supply description
tokenfillask tokenid asktxid fillamount
tokenfillbid tokenid bidtxid fillamount
tokenfillswap tokenid otherid asktxid fillamount
tokenorders [tokenid]
tokenswap numtokens tokenid otherid price
tokentransfer tokenid destpubkey amount
It is still very new and rough and not much tested, but I have created assets, made and cancelled bids, even filled a bid. To fill an order, requires to have the txid of the bid or ask, but once that works I plan to make a price based buy/sell.

issue tokenaddress to find your address where the tokens will end up. you need to run with -pubkey=02... set to a valid pubkey. using the addressindex functions you can find your asset transactions. anyway, i will be going offline for a bit if you want to connect to a test chain: ./komodod -ac_cc=1 -ac_name=ASSETS -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=100000000 -pubkey=<put a pubkey to an address inyour wallet> -addnode=5.9.102.210

@SHossain we will want to start making documentation for the above. please ask if anything is unclear. all the commands have a one line help that shows the parameters if you run it without any

{Reactions}
üëå (8) üôè (3) üëç (4) üëåüèº (3) Komodo (5) 

[22-Jul-18 04:52 AM] jl777c#5810
ok, I am back. plz ask any questions about usage


[22-Jul-18 05:19 AM] SHossain#0007
i'll spin up a node and get started with with documentation soon.


[22-Jul-18 05:23 AM] SHossain#0007
@Alright @gcharang we need to get these documented clearly. Please follow the development and keep note. I already saved some posts by jl777 from different channels and will start to organize them in a folder starting from tomorrow


[22-Jul-18 05:23 AM] siu#3920
Ill give it a test shortly


[22-Jul-18 06:44 AM] siu#3920
ok... got the chain


[22-Jul-18 06:45 AM] siu#3920
i dont see the tokens section in help


[22-Jul-18 06:45 AM] siu#3920
maybe i need to update komodo first?


[22-Jul-18 06:57 AM] siu#3920
nope still not there after update


[22-Jul-18 06:57 AM] siu#3920
ahh but it should be jl777 right?


[22-Jul-18 07:11 AM] siu#3920
updated from jl777 still dont have token methods


[22-Jul-18 07:34 AM] jl777c#5810
how are you getting help?


[22-Jul-18 07:34 AM] siu#3920
./komodo-cli -ac_name=ASSETS help


[22-Jul-18 07:36 AM] jl777c#5810
./komodo-cli -ac_name=ASSETS help | grep token


[22-Jul-18 07:36 AM] jl777c#5810
above shows blank?


[22-Jul-18 07:36 AM] jl777c#5810
if so you are not running the right komodo-cli


[22-Jul-18 07:36 AM] siu#3920
yes


[22-Jul-18 07:36 AM] siu#3920
ok


[22-Jul-18 07:36 AM] jl777c#5810
tokenaddress [pubkey]
tokenask numtokens tokenid price
tokenbalance tokenid [pubkey]
tokenbid numtokens tokenid price
tokencancelask tokenid asktxid
tokencancelbid tokenid bidtxid
tokencreate name supply description
tokenfillask tokenid asktxid fillamount
tokenfillbid tokenid bidtxid fillamount
tokenfillswap tokenid otherid asktxid fillamount
tokenorders [tokenid]
tokenswap numtokens tokenid otherid price
tokentransfer tokenid destpubkey amount


[22-Jul-18 07:36 AM] jl777c#5810
how did you launch ASSETS? what block are you on


[22-Jul-18 07:36 AM] siu#3920
git branch
  dev
* jl777
  master


[22-Jul-18 07:37 AM] jl777c#5810
and you did a git pull and make?


[22-Jul-18 07:37 AM] siu#3920
pull and build


[22-Jul-18 07:37 AM] jl777c#5810
can somebody else check this


[22-Jul-18 07:37 AM] siu#3920
im rebuilding now, seems like some new updates are now available


[22-Jul-18 07:37 AM] siu#3920
i had pulled like an hour ago


[22-Jul-18 07:38 AM] jl777c#5810
help was there an hour ago though


[22-Jul-18 07:38 AM] jl777c#5810
but it had build errors for a bit, so maybe it didnt build and you running old version


[22-Jul-18 07:39 AM] siu#3920
ok


[22-Jul-18 07:39 AM] siu#3920
might be


[22-Jul-18 07:48 AM] siu#3920
now, now its there\


[22-Jul-18 07:51 AM] siu#3920
./komodo-cli -ac_name=ASSETS tokenaddress 028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27
{
  "result": "success",
  "AssetsCCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "myCCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6"
}


[22-Jul-18 07:53 AM] siu#3920
./komodo-cli -ac_name=ASSETS tokencreate RMS 10000000error code: -1
error message:
basic_string::_M_construct null not valid


[22-Jul-18 08:01 AM] jl777c#5810
./komodo-cli -ac_name=ASSETS tokencreate tokenname 1 "token description" 
pretty sure you dont have 10 million ASSETS coins


[22-Jul-18 08:01 AM] jl777c#5810
there are less than 2000 total


[22-Jul-18 08:01 AM] jl777c#5810
I can send you some


[22-Jul-18 08:06 AM] siu#3920
ok, but supply is not based on satoshi?


[22-Jul-18 08:07 AM] siu#3920
supply in the command should be basedon the ASSETS supply or the token?


[22-Jul-18 08:08 AM] siu#3920
./komodo-cli -ac_name=ASSETS tokencreate RMS 10 Rincon
{
  "result": "success",


[22-Jul-18 08:08 AM] siu#3920
got a long hex, now what?


[22-Jul-18 08:08 AM] jl777c#5810
sendrawtransaction


[22-Jul-18 08:08 AM] siu#3920
ok


[22-Jul-18 08:09 AM] jl777c#5810
but you dont have any ASSETS coins, or are you mining some


[22-Jul-18 08:09 AM] siu#3920
1a740ef156a7fef22c8b45738730e25aa0683f47280a5e97e69b8dddf113f997


[22-Jul-18 08:09 AM] siu#3920
i mined some, yes


[22-Jul-18 08:09 AM] jl777c#5810
1a7 is the tokenid!


[22-Jul-18 08:09 AM] jl777c#5810
now you can do a tokenbalance


[22-Jul-18 08:09 AM] siu#3920
"balance": 164.99980000,
  "blocks": 230,
  "longestchain": 728,


[22-Jul-18 08:10 AM] jl777c#5810
you mined your own chain, but thats ok just for testing


[22-Jul-18 08:10 AM] siu#3920
./komodo-cli -ac_name=ASSETS tokenbalance 1a740ef156a7fef22c8b45738730e25aa0683f47280a5e97e69b8dddf113f997
{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "1a740ef156a7fef22c8b45738730e25aa0683f47280a5e97e69b8dddf113f997",
  "balance": 0
}


[22-Jul-18 08:10 AM] jl777c#5810
it can be on any -ac_cc=N chain


[22-Jul-18 08:10 AM] jl777c#5810
did it confirm, the tx?


[22-Jul-18 08:11 AM] siu#3920
./komodo-cli -ac_name=ASSETS tokenbalance 1a740ef156a7fef22c8b45738730e25aa0683f47280a5e97e69b8dddf113f997{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "1a740ef156a7fef22c8b45738730e25aa0683f47280a5e97e69b8dddf113f997",
  "balance": 1000000000
}


[22-Jul-18 08:11 AM] siu#3920
ok now


[22-Jul-18 08:12 AM] siu#3920
so supply is in the underlying chain


[22-Jul-18 08:15 AM] siu#3920
now anyone that will like to transfer the token will need the tokenid?


[22-Jul-18 08:17 AM] siu#3920
AssetValidate (t)
CC Eval EVAL_ASSETS Invalid: no asset inputs for transfer spending tx 1a740ef156a7fef22c8b45738730e25aa0683f47280a5e97e69b8dddf113f997
AssetValidate (t)
CC Eval EVAL_ASSETS Invalid: no asset inputs for transfer spending tx 1a740ef156a7fef22c8b45738730e25aa0683f47280a5e97e69b8dddf113f997
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)


[22-Jul-18 08:17 AM] siu#3920
tried sending tokens to another pubkey


[22-Jul-18 08:20 AM] jl777c#5810
you need to decoderawtransaction and make sure all the inputs and outputs are sane


[22-Jul-18 08:20 AM] jl777c#5810
there is no gui for this


[22-Jul-18 08:20 AM] Alright#0419
Is `getinfo` hanging for anyone else on ASSETS?


[22-Jul-18 08:21 AM] Alright#0419
working fine on other chains with the same build


[22-Jul-18 08:21 AM] siu#3920
{
  "txid": "fc3ee4523f8078aee2632ef27d2c2f091fc6872fb0cc717a587b32a7d8b6903b",
  "size": 490,
  "version": 1,
  "locktime": 0,


[22-Jul-18 08:21 AM] jl777c#5810
i have seen the mining node have some problems


[22-Jul-18 08:21 AM] siu#3920
"vin": [
    {
      "txid": "4549dac6073cbede653d6528d20dcc915c520f63cbfb4652d5b41cbef064b204",
      "vout": 0,
      "scriptSig": {
        "asm": "3044022012841ff614baeabb9a37672ec25c8b828802bd7c9cb7155cd32b71641b33dc5c022003f0b4aa3742e21c1ac1495ee2f36d277b61ba9ff87a95b0ed7cabb6b266894a01",
        "hex": "473044022012841ff614baeabb9a37672ec25c8b828802bd7c9cb7155cd32b71641b33dc5c022003f0b4aa3742e21c1ac1495ee2f36d277b61ba9ff87a95b0ed7cabb6b266894a01"
      },
      "sequence": 4294967295
    },


[22-Jul-18 08:21 AM] siu#3920
{
      "txid": "1a740ef156a7fef22c8b45738730e25aa0683f47280a5e97e69b8dddf113f997",
      "vout": 0,
      "scriptSig": {
        "asm": "a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140e705da73473d1aebf56d5780ec20a03c7a72e997b9c32f1032607b777f5b931b1d47229be6214bb8dd8ea39d0be46c01de7429fb53eb6f43907e6ee8e802c5f1a100af038001e3a10001",
        "hex": "4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140e705da73473d1aebf56d5780ec20a03c7a72e997b9c32f1032607b777f5b931b1d47229be6214bb8dd8ea39d0be46c01de7429fb53eb6f43907e6ee8e802c5f1a100af038001e3a10001"
      },
      "sequence": 4294967295
    }
  ],
  "vout": [


[22-Jul-18 08:21 AM] siu#3920
{
      "value": 0.00009999,
      "valueSat": 9999,
      "n": 0,
      "scriptPubKey": {
        "asm": "a22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401 OP_CHECKCRYPTOCONDITION",
        "hex": "2ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc",
        "reqSigs": 1,
        "type": "cryptocondition",
        "addresses": [
          "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm"
        ]
      }
    },
    {
      "value": 9.99990001,
      "valueSat": 999990001,
      "n": 1,
      "scriptPubKey": {
        "asm": "a22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401 OP_CHECKCRYPTOCONDITION",
        "hex": "2ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc",
        "reqSigs": 1,
        "type": "cryptocondition",
        "addresses": [
          "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm"
        ]
      }
    },
    {
      "value": 0.99990000,
      "valueSat": 99990000,
      "n": 2,
      "scriptPubKey": {
        "asm": "028bb4ae66aa4f1960a4aa822907e800eb688d9ab


[22-Jul-18 08:22 AM] Alright#0419
Yea, `getblockhash`, `getmininginfo` hanging on ASSETS also


[22-Jul-18 08:23 AM] Alright#0419
Think it may be all CLI commands hang


[22-Jul-18 08:27 AM] Alright#0419
Seems `setgenerate` works. I think it hangs on anything that should return something


[22-Jul-18 08:27 AM] jl777c#5810
you need to run with -pubkey= and have that address i the wallet


[22-Jul-18 08:28 AM] Alright#0419
Hmmm thought I did that


[22-Jul-18 08:28 AM] jl777c#5810
what I was seeing was that once you mine a block with a transfer transaction, it locked up. i put in a workaround that fixed it on my system, but on other systems it could still be there


[22-Jul-18 08:28 AM] Alright#0419
ok no, didn't import it


[22-Jul-18 08:28 AM] Alright#0419
but importprivkey is hanging also


[22-Jul-18 08:29 AM] jl777c#5810
do it early, before it sees other nodes


[22-Jul-18 08:29 AM] Alright#0419
Cool, works


[22-Jul-18 08:31 AM] Alright#0419
Can't sync past block 54 
```
2018-07-22 15:29:49 ERROR: CScriptCheck(): 06d3cc2515ea33a50b8f0c63084f78d0cc9cdef705c2a5a2c5a946c602ee9b14:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-07-22 15:29:49 Misbehaving: 5.9.102.210:60925 (0 -> 100)
2018-07-22 15:29:49 InvalidChainFound: invalid block=08dd37a17a9b7fa4e62eb626e8f669553af36aa39159d6d27d989029c0748015  height=55  log2_work=10.091435  date=2018-07-21 21:15:19
2018-07-22 15:29:49 InvalidChainFound:  current best=033dab553fe1104bbd3e1224eb34e9ef18d84c905cbaaa103f40b3609bda8cc0  height=54  log2_work=10.068778  date=2018-07-21 20:53:57
2018-07-22 15:29:49 ERROR: ConnectTip(): ConnectBlock 08dd37a17a9b7fa4e62eb626e8f669553af36aa39159d6d27d989029c0748015 failed
```


[22-Jul-18 08:31 AM] Alright#0419
```
CC Eval EVAL_ASSETS Invalid: no asset inputs for transfer spending tx 5117c5f5f7b077c3f8ef08bc0f5789d6b53a6fea61ee0a51b5c829797bd81a57
```


[22-Jul-18 08:35 AM] jl777c#5810
chain is pretty messed up. just make a new chain


[22-Jul-18 08:43 AM] siu#3920
Im running chain with the pubkey


[22-Jul-18 08:49 AM] jl777c#5810
make a new chain. mine got messed up during debugging


[22-Jul-18 08:53 AM] Alright#0419
@siu  want to use the chain I just made in case we want to try something together?


[22-Jul-18 08:57 AM] siu#3920
sure


[22-Jul-18 08:58 AM] siu#3920
what is the chain?>


[22-Jul-18 08:58 AM] Alright#0419
./komodod -ac_cc=1 -ac_name=ASSES -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=100000000 -pubkey=027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392 -addnode=195.201.137.5 -gen -genproclimit=4


[22-Jul-18 08:58 AM] Alright#0419
üòÖ


[22-Jul-18 08:58 AM] siu#3920
lol


[22-Jul-18 08:59 AM] siu#3920
thats a chain i can back :p


[22-Jul-18 08:59 AM] Alright#0419
just got a seg fault after doing tokenbalance, going to see if I can replicate it


[22-Jul-18 08:59 AM] siu#3920
but i should use my own pubkey right?


[22-Jul-18 08:59 AM] Alright#0419
yes


[22-Jul-18 08:59 AM] siu#3920
ok


[22-Jul-18 08:59 AM] Alright#0419
Send an address and I'll give you half the premine


[22-Jul-18 09:01 AM] siu#3920
seems like im mining my own chain


[22-Jul-18 09:01 AM] Alright#0419
Oh woah, not sure what just happened, after restarting after that segfault, it restarted the chain


[22-Jul-18 09:03 AM] siu#3920
ok... i got your chain


[22-Jul-18 09:03 AM] siu#3920
104 blocks, right?


[22-Jul-18 09:03 AM] Alright#0419
Yes, trying to get both nodes on that chain right now


[22-Jul-18 09:05 AM] Alright#0419
Ah problem was that I had -gen in the startup params but the chain wasn't synced


[22-Jul-18 09:06 AM] jl777c#5810
sync, then gen


[22-Jul-18 09:06 AM] Alright#0419
is this the correct format for tokenbalance? `./komodo-cli -ac_name=ASSES tokenbalance ALRIGHT 027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392`


[22-Jul-18 09:06 AM] Alright#0419
giving me a segfault each time. `tokencreate` seemed to work


[22-Jul-18 09:07 AM] siu#3920
i have to go now


[22-Jul-18 09:08 AM] siu#3920
will take tomorow all day to test this


[22-Jul-18 09:11 AM] jl777c#5810
maybe it is useful to look at the help output instead of guessing...


[22-Jul-18 09:11 AM] jl777c#5810
tokenbalance tokenid [pubkey]


[22-Jul-18 09:12 AM] jl777c#5810
granted it shouldnt crash but the entire codebase is 4 days old, so not time to make it bulletproof yet


[22-Jul-18 09:21 AM] Alright#0419
I did look at the help output. The tokenid is the `name` value from `tokencreate`, yes?


[22-Jul-18 09:24 AM] jl777c#5810
id not name, as in txID


[22-Jul-18 09:29 AM] Alright#0419
Well that explains the seg fault. `tokenbalance` working fine with txid


[23-Jul-18 02:17 AM] jl777c#5810
fixed crash along with too strict error check for most of the rpc calls


[23-Jul-18 02:21 AM] jl777c#5810
if you have errors, what I need is:
a) the specific chain parameters so I can connect to it
b) the EXACT rpc call and parameters you used
c) the most important! the raw tx generated
d) clear description of why you think it is a bug. for now you need to look at the raw tx details to make sure all vins are valid, signed and all vouts are sane.
e) do not post things like "i tried X and it didnt work" as that does not help at all at this stage. These are raw transaction level things and until everything works, things wont work at the higher level.

@cipi I could use your help in validating the fill commands, it is very similar (but different) from the marketmaker order matching issues. For tokens, I actually automatically gather the required utxo for the filling side, so assuming you have the funds, the order will be filled completely.


[23-Jul-18 02:42 AM] jusoaresf#3291
would cc allow for a safe/decentralized (at least as decentralized as NNs) custodian service to hold and release funds without human intervention?


[23-Jul-18 02:50 AM] jl777c#5810
I am making a faucet demo CC contract that allows 1 coin per block to be given out


[23-Jul-18 02:50 AM] jl777c#5810
a savings contract that paid a defined amount of interest is possible as long as the coins needed to pay the interest is funded


[23-Jul-18 02:51 AM] jl777c#5810
as far as holding funds, yes, it will be very good at holding them. however the rules for releasing the funds must be 100% precisely definable via onchain events


[23-Jul-18 02:51 AM] jl777c#5810
if that is possible, then it is possible. if anywhere in there is a "and the contract magically reaches consensus on a real world event", then some magic will be needed in addition


[23-Jul-18 02:53 AM] jl777c#5810
CC contracts using arbitrary rules on CC utxo is a totally new type of contract. What applies to ETH contracts might or might not apply. So far I have been able to devise a way to implement the contract idea requests being sent, though I notice a lot of reliance on "magic" in many desired contract definitions


[23-Jul-18 02:54 AM] jl777c#5810
one solution to the "magic" would be to have an arbitration address that is controlled by a trusted arbitrator. Then a contract can use signoff from the arbitrator to attest to a specific external event


[23-Jul-18 02:56 AM] jl777c#5810
Another way is to have a specific arbitration utxo for a specific instance of a contract. The spent status of this utxo would then indicate a specific event has happened. So you would setup the arbitration utxos tied to specific events first and then setup the contract that depends on these utxos


[23-Jul-18 02:56 AM] jl777c#5810
i know how much people love utxos


[23-Jul-18 02:56 AM] jl777c#5810
now there is even more reason to become familiar with utxo as we have colored utxo, ie. a specific utxo tied to a specific external event


[23-Jul-18 02:58 AM] jl777c#5810
@SHossain I am assuming my relevant posts are being collected as CC is needing a lot of documentation


[23-Jul-18 03:10 AM] gcharang#6833
I am saving your posts about cc from this channel and other places when I see them. shossain is also doing it I think.


[23-Jul-18 03:11 AM] jl777c#5810
ok, and I am also (unusually for me) actually commenting the source code in ~/komodo/src/cc/*


[23-Jul-18 03:13 AM] jl777c#5810
we need to get it so new devs can onboard quickly to make new CC contracts. I will be making a set of reference contracts. If there is a C++ coder experience in making classes, I would appreciate a bit of help to define the CCcontract class to put all these contracts into. I am not quite clear enough on all the c++ details to feel thatI can do a proper job for this, so I am making it C based for now


[23-Jul-18 03:29 AM] SHossain#0007
yes, we are collecting them. i'll start to organise them today

{Reactions}
üëå 

[23-Jul-18 04:31 AM] jl777c#5810
pushed fix for fillbuy, now all rpc other than fillsell and swaps have been tested at least once


[23-Jul-18 05:45 AM] jl777c#5810
fillsell now has a non-zero chance of actually being sane and working


[23-Jul-18 05:48 AM] jl777c#5810
I could really use some help in finding bugs, especially with the fill commands...


[23-Jul-18 05:57 AM] SHossain#0007
@jl777c please send some ASSETS here `RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ`


[23-Jul-18 05:59 AM] SHossain#0007
actually, now trying to mine with 2 threads


[23-Jul-18 06:00 AM] jl777c#5810
we are using alright's chain: ./komodod -ac_cc=1 -ac_name=ASSES -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=100000000 -pubkey=0329c28e5d0b5c49f759cfb680b08bf08fd780845b382b077a473a237841db7404 -addnode=195.201.137.5


[23-Jul-18 06:00 AM] Alright#0419
Fairly sure ASSETS is deded, I can send you some ASSES though üòÇ


[23-Jul-18 06:00 AM] Alright#0419
unstuck it?


[23-Jul-18 06:00 AM] jl777c#5810
sent some already 8b854e3e1d77b32e98dd6b8b6fc10cca87e7031a65926b6e2ace863cbd8ecf9e


[23-Jul-18 06:00 AM] jl777c#5810
update to latest on your nodes and it should confirm your bidfill


[23-Jul-18 06:01 AM] Alright#0419
üëå


[23-Jul-18 06:01 AM] SHossain#0007
thanks very much


[23-Jul-18 06:01 AM] SHossain#0007
updating


[23-Jul-18 06:01 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ASSETS getbalance
8.00000000
```


[23-Jul-18 06:01 AM] SHossain#0007
ASSETS not deaded


[23-Jul-18 06:02 AM] SHossain#0007
but, yes. i'll change to ASSES now


[23-Jul-18 06:02 AM] SHossain#0007
after the update


[23-Jul-18 06:02 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ASSETS getbalance
13.00000000
```
mining quite fast üòõ


[23-Jul-18 06:04 AM] Alright#0419
sent you some ASSES, if you sync it, you'll see bids under `tokenorders`, try to buy them


[23-Jul-18 06:05 AM] Alright#0419
Going to resyn ASSETS in a minute, I'm tired of saying ASSES


[23-Jul-18 06:50 AM] jusoaresf#3291
The kind of cc magic I dream of is related to atomic swaps
Like if I send the cc contract an X amount of coin A along with my address of coin B then, after my coin A tx gets enough confirmations, the contract will send Y amount of coin B to that address... not much hocus pocus I hope (?)

{Reactions}
üëå 

[23-Jul-18 06:57 AM] jl777c#5810
so instead of limiting things to a single chain, you want to operate on three chains?


[23-Jul-18 06:57 AM] SHossain#0007
```
end.0 blocks, reward 1.00000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
Created (/home/hitman/.komodo/ASSES/ASSES.conf)
call komodo_args.(./komodod) NOTARY_PUBKEY.(03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc)
>>>>>>>>>> ASSES: p2p.53149 rpc.53150 magic.82c3e89d 2193877149 1000 coins
initialized ASSES at 1532354158
finished loading blocks ASSES
height.0 slowflag.1 possible.0 cmp.0
ProcessAssets
AssetValidate (t)
vin1 100000000, vout0 13, vout1 99999987, transfer validated 1.00000000 -> 1.00000000
AssetValidate.(t) passed
ProcessAssets
AssetValidate (t)
vin1 1000000000, vout0 100, vout1 999999900, transfer validated 10.00000000 -> 10.00000000
AssetValidate.(t) passed
ProcessAssets
AssetValidate (o)
Got 100.00000000 to origaddr.(RNv5ppQ2G7BLA2EFhFj86upZJr9tzwuuvi)
cancelbuy validated to origaddr.(RNv5ppQ2G7BLA2EFhFj86upZJr9tzwuuvi)
AssetValidate.(o) passed
ProcessAssets
AssetValidate (o)
AssetValidate.(o) failed
CC Eval EVAL_ASSETS Invalid: asset inputs != outputs spending tx 7dc1ed60260dbb2d25792de59d84151e8d6f7531b295726bf975fff2f51ea361
```


[23-Jul-18 06:58 AM] SHossain#0007
with ASSES


[23-Jul-18 06:58 AM] jl777c#5810
latest version?


[23-Jul-18 06:58 AM] SHossain#0007
yes


[23-Jul-18 06:58 AM] SHossain#0007
first start


[23-Jul-18 06:58 AM] SHossain#0007
sorry. i see another update


[23-Jul-18 06:59 AM] SHossain#0007
`Updating 75b63fa..de9e3c8`


[23-Jul-18 06:59 AM] jl777c#5810
it could be some tx on chain are invalid due to different versions along the way


[23-Jul-18 06:59 AM] SHossain#0007
compiling now


[23-Jul-18 07:00 AM] jl777c#5810
oh, that is a new bug. fixing


[23-Jul-18 07:01 AM] SHossain#0007
cool. waiting for another update üòÉ


[23-Jul-18 07:02 AM] SHossain#0007
this chain got stuck for me
```
  "blocks": 656,
  "longestchain": 1449,
```
will delete data dir and start fresh after your update


[23-Jul-18 07:05 AM] jl777c#5810
pushed fix


[23-Jul-18 07:08 AM] SHossain#0007
updating


[23-Jul-18 07:10 AM] SHossain#0007
```
end.0 blocks, reward 1.00000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
Created (/home/hitman/.komodo/ASSES/ASSES.conf)
call komodo_args.(./komodod) NOTARY_PUBKEY.(03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc)
>>>>>>>>>> ASSES: p2p.53149 rpc.53150 magic.82c3e89d 2193877149 1000 coins
initialized ASSES at 1532355018
finished loading blocks ASSES
height.0 slowflag.1 possible.0 cmp.0
ProcessAssets
AssetValidate (t)
vin1 100000000, vout0 13, vout1 99999987, transfer validated 1.00000000 -> 1.00000000
AssetValidate.(t) passed
ProcessAssets
AssetValidate (t)
vin1 1000000000, vout0 100, vout1 999999900, transfer validated 10.00000000 -> 10.00000000
AssetValidate.(t) passed
ProcessAssets
AssetValidate (o)
Got 100.00000000 to origaddr.(RNv5ppQ2G7BLA2EFhFj86upZJr9tzwuuvi)
cancelbuy validated to origaddr.(RNv5ppQ2G7BLA2EFhFj86upZJr9tzwuuvi)
AssetValidate.(o) passed
ProcessAssets
AssetValidate (o)
AssetValidate.(o) failed
CC Eval EVAL_ASSETS Invalid: asset inputs != outputs spending tx 7dc1ed60260dbb2d25792de59d84151e8d6f7531b295726bf975fff2f51ea361```


[23-Jul-18 07:11 AM] SHossain#0007
latest output


[23-Jul-18 07:11 AM] jl777c#5810
ok I will resync and try to reproduce

{Reactions}
üëç 

[23-Jul-18 07:13 AM] jl777c#5810
reproduced. fixing


[23-Jul-18 07:13 AM] SHossain#0007
nice. sync stopped for me at the same block


[23-Jul-18 07:14 AM] SHossain#0007
656


[23-Jul-18 07:15 AM] jl777c#5810
yes bug in new validation code, fixing


[23-Jul-18 07:20 AM] jusoaresf#3291
3? I thought it was 2 ... üò¶


[23-Jul-18 07:21 AM] jl777c#5810
cross chain from one to another and the chain with CC


[23-Jul-18 07:21 AM] jl777c#5810
it is possible but need to get more infrastructure in place. let us start with the simpler things


[23-Jul-18 07:22 AM] jl777c#5810
@SHossain pushed fix


[23-Jul-18 07:22 AM] jl777c#5810
oh but stuck at 656 investigating


[23-Jul-18 07:22 AM] SHossain#0007
ok. waiting for next fix


[23-Jul-18 07:26 AM] jl777c#5810
actually i think the other node is just not responding


[23-Jul-18 07:26 AM] jl777c#5810
plz make a new test chain and test things not contaminated by older versions


[23-Jul-18 07:28 AM] SHossain#0007
ok. let me prepare a vps as seednode first


[23-Jul-18 07:44 AM] Mylo#8306
jl777 or dev branch?


[23-Jul-18 07:46 AM] jl777c#5810
only jl777 for now


[23-Jul-18 07:55 AM] SHossain#0007
fresh clone build failed in my VPS
```
cc/CCcustom.cpp: In function ‚Äòbool IsAssetsInput(const CScript&)‚Äô:
cc/CCcustom.cpp:55:57: error: cannot convert ‚ÄòIsAssetsInput(const CScript&)::<lambda(CC*, CCVisitor)>‚Äô to ‚Äòint (*)(CC*, CCVisitor)‚Äô in initialization
     CCVisitor visitor = {findEval, (uint8_t*)"", 0, NULL};
                                                         ^
cc/CCcustom.cpp: In function ‚Äòbool IsFaucetInput(const CScript&)‚Äô:
cc/CCcustom.cpp:72:57: error: cannot convert ‚ÄòIsFaucetInput(const CScript&)::<lambda(CC*, CCVisitor)>‚Äô to ‚Äòint (*)(CC*, CCVisitor)‚Äô in initialization
     CCVisitor visitor = {findEval, (uint8_t*)"", 0, NULL};
                                                         ^
Makefile:2886: recipe for target 'cc/libbitcoin_server_a-CCcustom.o' failed
make[2]: *** [cc/libbitcoin_server_a-CCcustom.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f cc/.deps/libbitcoin_server_a-CCtx.Tpo cc/.deps/libbitcoin_server_a-CCtx.Po
mv -f cc/.deps/libbitcoin_server_a-CCutils.Tpo cc/.deps/libbitcoin_server_a-CCutils.Po
mv -f cc/.deps/libbitcoin_server_a-assets.Tpo cc/.deps/libbitcoin_server_a-assets.Po
make[2]: Leaving directory '/home/lpx/komodo/src'
Makefile:4387: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/lpx/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
```


[23-Jul-18 07:56 AM] Deleted User#0000
I had that error, ubuntu 16.04 (GCC version 5) fixed it


[23-Jul-18 07:56 AM] Deleted User#0000
GCC 6 would not compile nor GCC 7


[23-Jul-18 08:00 AM] Mylo#8306
and to give you an example of this 3rd chain stuff, i sent libscott this message a week or two ago when prodding for info:
```
Yes. In steps of "can we achieve it with CC"

Address on chain A to automatically accrue funds from chain B
At a block height (divisible by 1000 for example), chain A uses a cc to exchange chain B in their wallet for chain C
The chain C only has a finite amount available for exchange with chain B every 1000 blocks.
For instance, every new KMD address receives PIONEERS. Every 1000 blocks, if the wallet hasn't got any MEETUPS or the PIONEERS address hasn't been used to swap for MEETUPS in the past, some PIONEERS coins are exchanged for MEETUPS.

As a side note, the komodopioneers notary node offers meetup subsidies. So in this example, in order to get a komodopioneers meetup subsidy (up to $300), you need to exchange 100k MEETUPS, by collecting MEETUPS from people. Because MEETUPS are available everywhere, it's a means/incentive for people holding the event to collect MEETUPS from people (at the event or just online or through forum, or computer generated script)
```
and the awesome reply was
```
Yea... lets imagine this is possible <------this!----
The thing is all the transactions need to be triggered manually
```


[23-Jul-18 08:02 AM] Mylo#8306
basically chain A -> get token A -> exchange for token C at certain times in blockchain life (height)


[23-Jul-18 08:03 AM] SHossain#0007
i had gcc v7.2

{Reactions}
üëç 

[23-Jul-18 08:04 AM] Mylo#8306
oooh sorry for interrupting


[23-Jul-18 08:05 AM] Deleted User#0000
Only works on GCC 5 for me.. tested on 3 systems today.


[23-Jul-18 08:07 AM] SHossain#0007
hmmm...ok. i'll roll back to older version


[23-Jul-18 08:09 AM] jl777c#5810
@libscott can you fix the old gcc dependence described above?


[23-Jul-18 08:15 AM] cipi#4502
you can have multiple gcc-versions installed at the same time and switch between them as needed


[23-Jul-18 08:15 AM] cipi#4502
```sudo apt-get install gcc-5 g++-5 gcc-6 g++-6 gcc-7 g++-7
sudo update-alternatives --remove-all gcc
sudo update-alternatives --remove-all g++
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-6 60 --slave /usr/bin/g++ g++ /usr/bin/g++-6
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-5 40 --slave /usr/bin/g++ g++ /usr/bin/g++-5
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 50 --slave /usr/bin/g++ g++ /usr/bin/g++-7

# switch gcc with
sudo update-alternatives --config gcc```


[23-Jul-18 08:16 AM] cipi#4502
@jl777c how can i help with the fill-testing? I have to admit, i haven't used cc till now


[23-Jul-18 08:17 AM] jl777c#5810
you just need to use the token rpc calls, it will do all the CC for you


[23-Jul-18 08:17 AM] jl777c#5810
tokenaddress [pubkey]
tokenask numtokens tokenid price
tokenbalance tokenid [pubkey]
tokenbid numtokens tokenid price
tokencancelask tokenid asktxid
tokencancelbid tokenid bidtxid
tokencreate name supply description
tokenfillask tokenid asktxid fillamount
tokenfillbid tokenid bidtxid fillamount
tokenfillswap tokenid otherid asktxid fillamount
tokenorders [tokenid]
tokenswap numtokens tokenid otherid price
tokentransfer tokenid destpubkey amount


[23-Jul-18 08:17 AM] jl777c#5810
tokenbid is filled with tokenfillbid


[23-Jul-18 08:17 AM] jl777c#5810
tokenask is filled with tokenfillask


[23-Jul-18 08:18 AM] jl777c#5810
once those are working, we can worry about tokenswap


[23-Jul-18 08:23 AM] jl777c#5810
just ask if any questions, I realize not any docs yet


[23-Jul-18 08:24 AM] Alright#0419
@SHossain did you start a fresh chain?


[23-Jul-18 08:24 AM] Alright#0419
my nodes kept mining on ASSES


[23-Jul-18 08:25 AM] Alright#0419
can you give me params for new chain?


[23-Jul-18 08:27 AM] jl777c#5810
pushed fix for things not syncing to the existing chain


[23-Jul-18 08:27 AM] jl777c#5810
it was quite interesting


[23-Jul-18 08:28 AM] jl777c#5810
the problem was that the transactions were not in the mempool


[23-Jul-18 08:28 AM] jl777c#5810
and the block had tx that spent outputs from another tx in the same block


[23-Jul-18 08:28 AM] jl777c#5810
out of order!


[23-Jul-18 08:29 AM] jl777c#5810
now it syncs with latest validation from scratch


[23-Jul-18 08:30 AM] SHossain#0007
@Alright i had issues compiling with gcc v7.2 in my VPS. wanted to start a fresh chain


[23-Jul-18 08:41 AM] SHossain#0007
thanks @cipi . trying your fix


[23-Jul-18 08:41 AM] siu#3920
we are still using ASSES to test?


[23-Jul-18 08:42 AM] SHossain#0007
```
$ sudo apt-get install gcc-5 g++-5 gcc-6 g++-6 gcc-7 g++-7
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Note, selecting 'clang-6.0' for regex 'g++-6'
Note, selecting 'python-clang-6.0' for regex 'g++-6'
Note, selecting 'clang-6.0-doc' for regex 'g++-6'
Note, selecting 'libclang-6.0-dev' for regex 'g++-6'
Note, selecting 'clang-6.0-examples' for regex 'g++-6'
E: Unable to locate package gcc-6
```


[23-Jul-18 08:45 AM] SHossain#0007
my local computer has gcc 5


[23-Jul-18 08:45 AM] SHossain#0007
and, it works fine


[23-Jul-18 08:46 AM] siu#3920
so asses it is?


[23-Jul-18 08:47 AM] Alright#0419
ASSES is working fine on the latest commit


[23-Jul-18 08:47 AM] Alright#0419
@jl777c did something break? Should I create a new chain instead?


[23-Jul-18 08:49 AM] jl777c#5810
syncing from scratch was always broken but not visible until the chain advanced. I fixed it as described above


[23-Jul-18 08:49 AM] jl777c#5810
all seems well for now


[23-Jul-18 08:53 AM] SHossain#0007
ok. starting ASSES again


[23-Jul-18 08:53 AM] SHossain#0007
from start


[23-Jul-18 08:54 AM] siu#3920
ok, me too


[23-Jul-18 08:54 AM] Alright#0419
@siu did I give you coins for that chain?


[23-Jul-18 08:54 AM] siu#3920
no..


[23-Jul-18 08:55 AM] siu#3920
but i can mine them, right?


[23-Jul-18 08:55 AM] SHossain#0007
look like it is working


[23-Jul-18 08:55 AM] Alright#0419
Yea I can give you some though


[23-Jul-18 08:55 AM] SHossain#0007
no more failed message from startup


[23-Jul-18 08:55 AM] Deleted User#0000
He as plenty of ASSES :trollface:

{Reactions}
trollface (2) 

[23-Jul-18 08:55 AM] Alright#0419
should have set a higher block reward


[23-Jul-18 08:55 AM] SHossain#0007
lol


[23-Jul-18 08:55 AM] siu#3920
üòÇ


[23-Jul-18 09:01 AM] SHossain#0007
be back after the meeting


[23-Jul-18 09:06 AM] Alright#0419
https://github.com/jl777/komodo/blob/jl777/src/cc/assets.cpp has some good info on what exactly is happening btw

{Embed}
https://github.com/jl777/komodo/blob/jl777/src/cc/assets.cpp
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[23-Jul-18 09:06 AM] siu#3920
my chain gets stuck in block 13


[23-Jul-18 09:06 AM] siu#3920
"blocks": 13,
  "longestchain": 1564,


[23-Jul-18 09:06 AM] Alright#0419
on the latest commit?


[23-Jul-18 09:06 AM] siu#3920
hmm


[23-Jul-18 09:06 AM] siu#3920
let me be sure


[23-Jul-18 09:06 AM] siu#3920
ah, not yet :p


[23-Jul-18 09:07 AM] SHossain#0007
```
  "blocks": 1572,
  "longestchain": 1572,
```


[23-Jul-18 09:08 AM] Alright#0419
confirmed to at least work so far is `tokenaddress` `tokenbalance` `tokenbid` `tokencancelbid` `tokencreate` `tokenorders` and `tokentransfer`


[23-Jul-18 09:24 AM] siu#3920
im in the latest


[23-Jul-18 09:24 AM] siu#3920
ok, now im doing ok


[23-Jul-18 09:28 AM] siu#3920
@Alright do you have an asset already i need to run?


[23-Jul-18 09:30 AM] Alright#0419
you can create your own or I'll send you some in a couple minutes


[23-Jul-18 09:31 AM] Alright#0419
try to fill the bids you see when you do `tokenorders`


[23-Jul-18 09:31 AM] siu#3920
ok


[23-Jul-18 09:31 AM] siu#3920
but i need asses right? :p


[23-Jul-18 09:32 AM] Alright#0419
yes send an address or mine some


[23-Jul-18 10:48 AM] jl777c#5810
pushed update that has faucet api


[23-Jul-18 10:48 AM] Mylo#8306
@jl777c what is the debug.log output when the "out of order!!" thing happened earlier
```
2018-07-23 17:44:27 ERROR: CScriptCheck(): cf991a7efbc3561dd68cc579d1ad1428c33b1c2c66f422e874ce91f9a4cc7163:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
```
From @Alright testing
Or do you recognise what is happening here?


[23-Jul-18 10:48 AM] jl777c#5810
faucetaddress [pubkey]
faucetfund amount
faucetget


[23-Jul-18 10:48 AM] jl777c#5810
only the one funding the faucet needs to do faucetfund with the amount


[23-Jul-18 10:49 AM] jl777c#5810
everybody can just do a faucetget (as long as there are funds in the faucet)


[23-Jul-18 10:49 AM] jl777c#5810
@Mylo there is nothing to be gained by running ancient version

{Reactions}
üëå 

[23-Jul-18 10:51 AM] jl777c#5810
the faucet works only for the native coin in the chain


[23-Jul-18 10:55 AM] libscott#8867
Hey sorry


[23-Jul-18 10:55 AM] libscott#8867
whats the GCC issue?


[23-Jul-18 10:56 AM] jl777c#5810
cc/CCcustom.cpp: In function ‚Äòbool IsAssetsInput(const CScript&)‚Äô:
cc/CCcustom.cpp:55:57: error: cannot convert ‚ÄòIsAssetsInput(const CScript&)::<lambda(CC*, CCVisitor)>‚Äô to ‚Äòint (*)(CC*, CCVisitor)‚Äô in initialization
     CCVisitor visitor = {findEval, (uint8_t*)"", 0, NULL};
                                                         ^
cc/CCcustom.cpp: In function ‚Äòbool IsFaucetInput(const CScript&)‚Äô:
cc/CCcustom.cpp:72:57: error: cannot convert ‚ÄòIsFaucetInput(const CScript&)::<lambda(CC*, CCVisitor)>‚Äô to ‚Äòint (*)(CC*, CCVisitor)‚Äô in initialization
     CCVisitor visitor = {findEval, (uint8_t*)"", 0, NULL};
                                                         ^
Makefile:2886: recipe for target 'cc/libbitcoin_server_a-CCcustom.o' failed
make[2]: *** [cc/libbitcoin_server_a-CCcustom.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f cc/.deps/libbitcoin_server_a-CCtx.Tpo cc/.deps/libbitcoin_server_a-CCtx.Po
mv -f cc/.deps/libbitcoin_server_a-CCutils.Tpo cc/.deps/libbitcoin_server_a-CCutils.Po
mv -f cc/.deps/libbitcoin_server_a-assets.Tpo cc/.deps/libbitcoin_server_a-assets.Po
make[2]: Leaving directory '/home/lpx/komodo/src'
Makefile:4387: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/lpx/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1


[23-Jul-18 10:57 AM] jl777c#5810
seems only gcc5 works and more recent gcc gets errors


[23-Jul-18 11:00 AM] libscott#8867
i see


[23-Jul-18 11:01 AM] cipi#4502
commit 728965dfee0822da8a60b28c1b1f9809db7c3a51 does not compile here, even with GCC 5:


[23-Jul-18 11:01 AM] cipi#4502
```/usr/bin/ld: komodo_tx-komodo-tx.o: in function `OutputTxHash':
/mnt/data/wallets/komodo/src/komodo-tx.cpp:569: undefined reference to `base_blob<256u>::GetHex() const'```


[23-Jul-18 11:02 AM] cipi#4502
the `undefined reference to base_blob` shows up multiple times


[23-Jul-18 11:03 AM] SHossain#0007
i've started this pad with the info we have. please contribute editing whoever can. thank you very much http://pad.supernet.org/CC-Token-Doc-Collection


[23-Jul-18 11:04 AM] jl777c#5810
I am not seeing any errors with komodo-tx building


[23-Jul-18 11:05 AM] cipi#4502
yeah, did `make clean` and compiled agaian, now it is working


[23-Jul-18 11:07 AM] libscott#8867
is the issue fixed?


[23-Jul-18 11:08 AM] libscott#8867
do we need it working with gcc 6? I never paid attention to gcc version before


[23-Jul-18 11:08 AM] jl777c#5810
not your issue. problem the new compilers reject it


[23-Jul-18 11:08 AM] jl777c#5810
gcc 7 also fails and likely so will 8, 9, ... and soon projects will drop support for gcc5


[23-Jul-18 11:09 AM] libscott#8867
interesting


[23-Jul-18 11:33 AM] siu#3920
can i get some ASSES?


[23-Jul-18 11:34 AM] libscott#8867
didnt expect that, is everyone using ubuntu 18.04 now?


[23-Jul-18 11:34 AM] libscott#8867
maybe I should upgrade


[23-Jul-18 11:38 AM] SHossain#0007
i'm using 16.04


[23-Jul-18 11:39 AM] SHossain#0007
but, can upgrade to 18.04 if we all are testing and re-basing to 18.04, as this is the latest LTS version


[23-Jul-18 12:25 PM] Alright#0419
./komodo-cli -ac_name=ASSES getblockhash 1751
00671285669a84591f9271b33758487a43e96107927eaf5b98dfd6a99eae61ae


[23-Jul-18 12:26 PM] Alright#0419
chain stalled or am I on a fork?


[23-Jul-18 12:29 PM] jl777c#5810
stalled


[23-Jul-18 12:30 PM] Alright#0419
Any idea why? Should I try a stratum?


[23-Jul-18 12:32 PM] siu#3920
./komodo-cli -ac_name=ASSES tokenorders
[
  {
    "funcid": "b",
    "txid": "a6b7eae704cdf670becb3266190d16350c45999df69619978f71a4df3bbf617f",
    "vout": 0,
    "amount": 0.1,
    "bidamount": 0.1,
    "origaddress": "RR7Xkqb3nhdVpo6KG7cQPj9UDXdWokeUU2",
    "tokenid": "5117c5f5f7b077c3f8ef08bc0f5789d6b53a6fea61ee0a51b5c829797bd81a57",
    "totalrequired": 10,
    "price": 0.01
  },
  {
    "funcid": "b",
    "txid": "94c5243b79b79f75efa66d8bcc5481f35b09fada436ab3004b5676db5d8986a5",
    "vout": 0,
    "amount": 1,
    "bidamount": 1,
    "origaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
    "tokenid": "2cc16d6da8fd1084eca3f46c8258f8aa4501cb96d744f13aa7e475e40f470ef2",
    "totalrequired": 1,
    "price": 1
  },
  {
    "funcid": "B",
    "txid": "76958420fa4ce7d99e2da8cab3c093c0eeb5cccb4530348c7e6ee3bf2df145fa",
    "vout": 0,
    "amount": 0,
    "bidamount": 0,
    "origaddress": "RR7Xkqb3nhdVpo6KG7cQPj9UDXdWokeUU2",
    "tokenid": "4ed21446c9d25b1f8515950e901f2f96eeba79ad6f1aab2146a1284cf01fe05d"
  }
]


[23-Jul-18 12:32 PM] siu#3920
what do i ask for here?


[23-Jul-18 12:34 PM] siu#3920
ohh.. got stuck...


[23-Jul-18 12:36 PM] Alright#0419
the first two are bids


[23-Jul-18 12:36 PM] Alright#0419
so to buy you would do `tokenfillbid <tokenid> <bidtxid> <amount>`


[23-Jul-18 12:37 PM] Alright#0419
but i've yet to make a successful fill


[23-Jul-18 12:37 PM] Alright#0419
might need to make new bids


[23-Jul-18 12:37 PM] SHossain#0007
```
  "blocks": 1751,
  "longestchain": 1751,
  "timeoffset": 0,
  "tiptime": 1532372773,
  "connections": 1,
```


[23-Jul-18 12:39 PM] Alright#0419
setting up a stratum right now to see if it can mine blocks


[23-Jul-18 12:39 PM] jl777c#5810
i started mining


[23-Jul-18 12:40 PM] Alright#0419
don't have any blocks past 1751


[23-Jul-18 12:40 PM] Alright#0419
what's the ip of the node, I'll delete my chain and -connect to it


[23-Jul-18 12:40 PM] Alright#0419
also, komodo-cli is hanging on `getmempoolinfo` while it's stuck at 1751


[23-Jul-18 12:41 PM] Alright#0419
Oh hanging for all cli commands


[23-Jul-18 12:41 PM] siu#3920
out 0 vs 0 isValid
CC Eval EVAL_FAUCET Invalid: invalid-code spending tx 2707b7d8772ce34368f0e9efeabe62a557f9e2639ec8291abc8a1cc596280eb5
out.0 from cc_verify
b0d865720f0a92dd9d8063af07795850217db25d54f54a04bfab8daa6ce48927 sighash
out 0 vs 0 isValid
CC Eval EVAL_FAUCET Invalid: invalid-code spending tx 2707b7d8772ce34368f0e9efeabe62a557f9e2639ec8291abc8a1cc596280eb5
out.0 from cc_verify
5bc994184992b3286f82539115950d64c589439896000e4449a8ce2291323742 sighash
out 0 vs 0 isValid
CC Eval EVAL_FAUCET Invalid: invalid-code spending tx feb099453d45d08b93f6c9627cfb0108b9311d41744f72e6f03e228bc960bd33
out.0 from cc_verify
5bc994184992b3286f82539115950d64c589439896000e4449a8ce2291323742 sighash
out 0 vs 0 isValid
CC Eval EVAL_FAUCET Invalid: invalid-code spending tx feb099453d45d08b93f6c9627cfb0108b9311d41744f72e6f03e228bc960bd33
out.0 from cc_verify


[23-Jul-18 12:41 PM] siu#3920
this is the last prints before it hanged


[23-Jul-18 12:41 PM] SHossain#0007
i've added more lines and output on the etherpad


[23-Jul-18 12:43 PM] Alright#0419
seems the same bug as before @jl777c, cli hangs and can't stop komodod without a pkill -9


[23-Jul-18 12:45 PM] Alright#0419
stratum mining blocks


[23-Jul-18 12:45 PM] Alright#0419
you guys get those? UpdateTip: new best=0002191d306b909d83f60d248689158a0a83f873ff1b952c00299e147fb3944b  height=1753


[23-Jul-18 12:46 PM] jl777c#5810
yes getting new blocks


[23-Jul-18 12:46 PM] jl777c#5810
old version will reject faucet tx, need to update


[23-Jul-18 12:46 PM] Alright#0419
on the latest commit


[23-Jul-18 12:47 PM] Alright#0419
have a txid of a faucet tx?


[23-Jul-18 12:47 PM] Alright#0419
did any make it onto the chain?


[23-Jul-18 12:47 PM] SHossain#0007
updating


[23-Jul-18 12:47 PM] Alright#0419
ok stopped stratum, wonder if CPU will be able to mine now


[23-Jul-18 12:49 PM] Alright#0419
cool, those are CPU mined


[23-Jul-18 12:53 PM] SHossain#0007
1766


[23-Jul-18 12:57 PM] Alright#0419
one of my nodes locked up at 1766


[23-Jul-18 12:57 PM] Alright#0419
other node on the same commit kept going


[23-Jul-18 12:57 PM] siu#3920
p


[23-Jul-18 12:58 PM] SHossain#0007
now 1769


[23-Jul-18 12:58 PM] SHossain#0007
chain advancing


[23-Jul-18 12:59 PM] siu#3920
yes


[23-Jul-18 12:59 PM] siu#3920
going places now


[23-Jul-18 01:00 PM] Alright#0419
...and my other node locked up


[23-Jul-18 01:00 PM] Alright#0419
pkill -9 komodod then restarting the daemon gets me on the chain, but not for long


[23-Jul-18 01:01 PM] SHossain#0007
```
$ ./komodo-cli -ac_name=ASSES getblockhash 1775
0116813058daa666063ff487e01ca5daea378e0ecf2f5c34ebdb349da5a0f4c4
```


[23-Jul-18 01:05 PM] Alright#0419
no one else had a node stop?


[23-Jul-18 01:09 PM] siu#3920
ok, i just did a swap and lost all my balance


[23-Jul-18 01:09 PM] Alright#0419
tokenswap?


[23-Jul-18 01:09 PM] siu#3920
./komodo-cli -ac_name=ASSES tokenbid 1 2cc16d6da8fd1084eca3f46c8258f8aa4501cb96d744f13aa7e475e40f470ef2 1
privkey for the -pubkey= address is not in the wallet, importprivkey!
{
  "result": "success",
  "hex": "01000000019a288c85c3def6cdff3b23da581f465b18a8e27b979d883a8ed476b65b5e9707010000006b483045022100acfcff826e107eed0845b427154b4dac09711a82a84b5793d2434a432acfa43802207df5b1aa061dde881eb35ae74697db40033b55774b546e47f5c2fa4d535a478f0121020070dcd8e066868f250d8b80eef0af1095d78846b44363c23341789f62fa345cffffffff0300e1f50500000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccf087394a090000002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3622cc16d6da8fd1084eca3f46c8258f8aa4501cb96d744f13aa7e475e40f470ef2010000000000000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000"
}


[23-Jul-18 01:10 PM] Alright#0419
you lost the ASSES balance or token balance


[23-Jul-18 01:10 PM] siu#3920
they are in my pubkey which i have not imported?


[23-Jul-18 01:10 PM] Alright#0419
the token are locked at that point


[23-Jul-18 01:10 PM] siu#3920
ASSES balance


[23-Jul-18 01:10 PM] Alright#0419
Oh yes, setting pubkey makes all change addresses the pubkey's address


[23-Jul-18 01:11 PM] Alright#0419
definitely needs to be imported


[23-Jul-18 01:17 PM] Alright#0419
I'll be back in a couple hours üëã


[23-Jul-18 01:17 PM] Alright#0419
oh let me fix CHIPS before I go


[23-Jul-18 01:23 PM] jl777c#5810
are the mining nodes updated and accepting faucet tx?


[23-Jul-18 01:23 PM] jl777c#5810
they still seem to be unconfrmd


[23-Jul-18 01:25 PM] SHossain#0007
$ ./komodo-cli -ac_name=ASSES faucetaddress
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "myCCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ"
}


[23-Jul-18 01:26 PM] jl777c#5810
you dont need to specify addresses for faucet use, it is just for debug


[23-Jul-18 01:26 PM] SHossain#0007
./komodo-cli -ac_name=ASSES faucetaddress 03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "CCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "myCCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ"
}


[23-Jul-18 01:27 PM] Alright#0419
both of my nodes locked up again at 1809


[23-Jul-18 01:27 PM] jl777c#5810
yes, when I enable mining,my node locks up


[23-Jul-18 01:27 PM] SHossain#0007
i have 1809 as well


[23-Jul-18 01:27 PM] jl777c#5810
so it seems the faucet tx causes this as it is likely in the mempool


[23-Jul-18 01:27 PM] SHossain#0007
will be back shortly after some food


[23-Jul-18 01:28 PM] Alright#0419
/komodo-cli -ac_name=ASSES getrawmempool
[
  "cf991a7efbc3561dd68cc579d1ad1428c33b1c2c66f422e874ce91f9a4cc7163",
  "aca3c4b5dde6ce5f4699b1168fb90b84f0c74127e6675bc0cb66c3db319706f4"
]


[23-Jul-18 01:28 PM] Alright#0419
that one of them?


[23-Jul-18 01:28 PM] jl777c#5810
dont worry about the faucet tx, I need to debug the locking up of the miner, but too tired now.


[23-Jul-18 01:28 PM] jl777c#5810
there are 2


[23-Jul-18 01:28 PM] jl777c#5810
those two


[23-Jul-18 01:28 PM] jl777c#5810
I think time for a new chain


[23-Jul-18 01:29 PM] siu#3920
stuck at 1809


[23-Jul-18 01:29 PM] Alright#0419
I'll do a new chain, 2 minutes


[23-Jul-18 01:29 PM] jl777c#5810
I will debug the mining after some rest. in the meantime start a new chain


[23-Jul-18 01:31 PM] siu#3920
ok


[23-Jul-18 01:32 PM] Alright#0419
komodod -ac_cc=1 -ac_name=ATEST -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKEY> -addnode=195.201.20.230 -addnode=195.201.137.5


[23-Jul-18 01:35 PM] Alright#0419
I just need to do some work around the house. If anyone needs me just send a message or ping me


[23-Jul-18 01:58 PM] Alright#0419
CHIPS unstuck, only had enough BTC on MMR to rent an s9 for 12 hours though


[23-Jul-18 02:02 PM] SHossain#0007
i'll point 2 miners tomorrow. please DM me the server details


[24-Jul-18 12:33 AM] jl777c#5810
pushed fix for miner locking up. chain is mining again.


[24-Jul-18 12:33 AM] jl777c#5810
some very interesting issues create by allowing CC to access the entire blockchain for its decision making


[24-Jul-18 12:36 AM] jl777c#5810
hopefully that was the last of these tricky issues... want to get back to coding more CC contracts instead of debugging esoteric system issues


[24-Jul-18 12:37 AM] jl777c#5810
I have the skeleton of the rewards CC already active, but plz dont use it as it has no actual functionality yet


[24-Jul-18 03:07 AM] SHossain#0007
updating to the latest source


[24-Jul-18 03:09 AM] jl777c#5810
i merged it into dev branch so people can use dev branch as I break jl777


[24-Jul-18 03:11 AM] SHossain#0007
i have jl777 branch compiled now


[24-Jul-18 03:11 AM] Deleted User#0000
Its still not compiling on GCC6


[24-Jul-18 03:12 AM] SHossain#0007
my node is gcc5.6


[24-Jul-18 03:12 AM] Deleted User#0000
debian9 comes wit gcc 6 ... we cant compile dev branch for NN


[24-Jul-18 03:12 AM] SHossain#0007
i mean the one i am currently using


[24-Jul-18 03:12 AM] Deleted User#0000
a few of us use debian9


[24-Jul-18 03:12 AM] SHossain#0007
i believe @libscott is on it


[24-Jul-18 03:12 AM] SHossain#0007
he is working on a fix


[24-Jul-18 03:12 AM] jl777c#5810
until libscott fixes the compile issue, it wont magically start working


[24-Jul-18 03:12 AM] Deleted User#0000
ok no wworis. I will checkout earlier commit


[24-Jul-18 03:13 AM] jl777c#5810
none of the CC enabled builds would work on non-gcc 5


[24-Jul-18 03:16 AM] SHossain#0007
```
  "balance": 1000000.00000000,
  "blocks": 954,
  "longestchain": 954,
```


[24-Jul-18 03:16 AM] Deleted User#0000
the very first one did I am pretty sure. in any case i will just revert it.


[24-Jul-18 03:16 AM] SHossain#0007
are we on the ATEST chanin?


[24-Jul-18 03:16 AM] SHossain#0007
`./komodod -ac_cc=1 -ac_name=ATEST -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKEY> -addnode=195.201.20.230 -addnode=195.201.137.5 &`


[24-Jul-18 03:16 AM] SHossain#0007
using this one


[24-Jul-18 03:26 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokencreate TESTTOKEN 100 "Test CC enabled token for our token development"
{
  "result": "success",
  "hex": "010000000104839a361577a3f4421d1c0171805884ce5f1a182b46d25a609f0097a8c82d9b0000000048473044022033589005f3cdb892f3bbbd46e2168b7a0d9db69c3adefec1395610d6b0b0139102201dbb6a16a1a4d9482991666f935aec2c6507de269749d94c675257fdc1a10fcd01ffffffff0400e40b5402000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc1027000000000000232102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702ace06d66fa15090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0000000000000000616a4c5ee3632103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc0954455354544f4b454e2f5465737420434320656e61626c656420746f6b656e20666f72206f757220746f6b656e20646576656c6f706d656e7400000000"
}
```
created new token


[24-Jul-18 03:26 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST sendrawtransaction 010000000104839a361577a3f4421d1c0171805884ce5f1a182b46d25a609f0097a8c82d9b0000000048473044022033589005f3cdb892f3bbbd46e2168b7a0d9db69c3adefec1395610d6b0b0139102201dbb6a16a1a4d9482991666f935aec2c6507de269749d94c675257fdc1a10fcd01ffffffff0400e40b5402000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc1027000000000000232102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702ace06d66fa15090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0000000000000000616a4c5ee3632103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc0954455354544f4b454e2f5465737420434320656e61626c656420746f6b656e20666f72206f757220746f6b656e20646576656c6f706d656e7400000000
307c094bce80205ec56abd43041530b0cd6faf449ea84cd2ae49339cfc3c222c
```
sent raw transaction


[24-Jul-18 03:28 AM] SHossain#0007
{
  "txid": "307c094bce80205ec56abd43041530b0cd6faf449ea84cd2ae49339cfc3c222c",
  "size": 374,
  "version": 1,
  "locktime": 0,
  "vin": [
    {
      "txid": "9b2dc8a897009f605ad2462b181a5fce84588071011c1d42f4a37715369a8304",
      "vout": 0,
      "scriptSig": {
        "asm": "3044022033589005f3cdb892f3bbbd46e2168b7a0d9db69c3adefec1395610d6b0b0139102201dbb6a16a1a4d9482991666f935aec2c6507de269749d94c675257fdc1a10fcd01",
        "hex": "473044022033589005f3cdb892f3bbbd46e2168b7a0d9db69c3adefec1395610d6b0b0139102201dbb6a16a1a4d9482991666f935aec2c6507de269749d94c675257fdc1a10fcd01"
      },
      "sequence": 4294967295
    }
  ],
  "vout": [
    {
      "value": 100.00000000,
      "valueSat": 10000000000,
      "n": 0,
      "scriptPubKey": {
        "asm": "a22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401 OP_CHECKCRYPTOCONDITION",
        "hex": "2ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc",
        "reqSigs": 1,
        "type": "cryptocondition",
        "addresses": [
          "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti"
        ]
      }
    },
    {
      "value": 0.00010000,
      "valueSat": 10000,
      "n": 1,
      "scriptPubKey": {
        "asm": "02adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702 OP_CHECKSIG",
        "hex": "2102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702ac",
        "reqSigs": 1,
        "type": "pubkey",
        "addresses": [
          "RFYE2yL3KknWdHK6uNhvWacYsCUtwzjY3u"
        ]
      }
    },


[24-Jul-18 03:28 AM] SHossain#0007
{
      "value": 99899.99980000,
      "valueSat": 9989999980000,
      "n": 2,
      "scriptPubKey": {
        "asm": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc OP_CHECKSIG",
        "hex": "2103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac",
        "reqSigs": 1,
        "type": "pubkey",
        "addresses": [
          "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
        ]
      }
    },
    {
      "value": 0.00000000,
      "valueSat": 0,
      "n": 3,
      "scriptPubKey": {
        "asm": "OP_RETURN e3632103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc0954455354544f4b454e2f5465737420434320656e61626c656420746f6b656e20666f72206f757220746f6b656e20646576656c6f706d656e74",
        "hex": "6a4c5ee3632103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc0954455354544f4b454e2f5465737420434320656e61626c656420746f6b656e20666f72206f757220746f6b656e20646576656c6f706d656e74",
        "type": "nulldata"
      }
    }
  ]
}


[24-Jul-18 03:28 AM] SHossain#0007
decoded raw transaction


[24-Jul-18 04:59 AM] jl777c#5810
yes plz test all the rpc


[24-Jul-18 04:59 AM] jl777c#5810
maybe make some test scripts to automate parts of it


[24-Jul-18 05:04 AM] SHossain#0007
i'm trying to make a github repo with the infos available. will break them down to different text files https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/README.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/README.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[24-Jul-18 05:06 AM] jl777c#5810
i cleaned up the code and now the following is what is needed to create a new contract:
1. add EVAL_CODE to eval.h
2. initialize the variables in the CCinit function below
3. write a Validate function to reject any unsanctioned usage of vin/vout
4. make helper functions to create rawtx for RPC functions
5. add rpc calls to rpcserver.cpp and rpcserver.h and in one of the rpc.cpp files
6. add the new .cpp files to src/Makefile.am

1, 2 and 6 are not even coding tasks. 4 and 5 are non-consensus time, mostly dealing with JSON. 3. is the main work needed, which makes sense as a different 3 is what makes it a different contract. a lot of a contract can use slightly modified functions from the other CC contracts. So the best way to do a new one would be to pick the one that is closest to what you want and start morphing it.


[24-Jul-18 05:07 AM] jl777c#5810
I am working next on the rewards CC, this will implement what OOT needs for doing rewards which became a bit more difficult when I found out it needs to work via SPV also. if it werent for that requirement, it would already be done

{Reactions}
üíØ (2) üëå (3) üëè (3) üëç (2) üöÄ 

[24-Jul-18 05:07 AM] jl777c#5810
I think we will need some sort of test plan for each CC contract


[24-Jul-18 05:24 AM] SHossain#0007
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/How-to-create-a-new-contract.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/How-to-create-a-new-contract.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[24-Jul-18 05:27 AM] SHossain#0007
Please make suggestions and PR to edit any doc in this repo. This is draft repo and the final documentation will end up in https://docs.komodoplatform.com


[24-Jul-18 05:28 AM] grewalsatinder#9653
It'd be great to see an example cc demo repo which has 1 simplest smart contract/CC files.
This will help isolate ONLY single demo smart contract for reference.
If more, then I guess having branches in that demo CC repo will be helpful.
Just a thought if possible.
@jl777c üôÇ

{Reactions}
üíØ (2) 

[24-Jul-18 05:29 AM] grewalsatinder#9653
I guess the help would says that, compile these files with these xyz commands.
you get a binary or the class file(s)
now use these classes/functions/methods etc in your own code.


[24-Jul-18 05:30 AM] grewalsatinder#9653
the reason for seperate CC Demo repo is as you will push the fixes to it, those will be specific to the smart contracts. which probably can be helpful as you or anyone will be pushing bug fixes to it.


[24-Jul-18 05:31 AM] grewalsatinder#9653
the commits history helps understand things üôÇ


[24-Jul-18 05:31 AM] grewalsatinder#9653
and if the CC contracts is simple enough I wish to understand that and translate it to Go language codebase


[24-Jul-18 05:31 AM] jl777c#5810
~/komodo/src/cc/faucet.cpp


[24-Jul-18 05:32 AM] grewalsatinder#9653
so if using golanguage, I hope I can use external class/lib file.


[24-Jul-18 05:32 AM] jl777c#5810
but it relies on the rest of the komodod codebase, since within a CC contract you can directly access all the blockchain code


[24-Jul-18 05:33 AM] jl777c#5810
As long as it compiles to a linkable library, the language for faucet.cpp equivalent wont matter, well it would need to be compatible with C/C++ stack calling convention


[24-Jul-18 05:34 AM] grewalsatinder#9653
so you mean I can code my own smart contract in Go language and compile it to a library file (example .a file), and use that to compile with komodo source code??


[24-Jul-18 05:35 AM] jl777c#5810
why not?


[24-Jul-18 05:35 AM] grewalsatinder#9653
I was thinking it'd be other way....


[24-Jul-18 05:35 AM] grewalsatinder#9653
like running komodod with the CC params, and having another binary with smart contract


[24-Jul-18 05:35 AM] jl777c#5810
it is komodod that is doing all this... seems logical to extend komodod


[24-Jul-18 05:35 AM] grewalsatinder#9653
right....okay....


[24-Jul-18 05:36 AM] jl777c#5810
it is a native contract, directly accessing the DB and datastructures


[24-Jul-18 05:36 AM] grewalsatinder#9653
don't you think it will add a lot of help command outputs to the original komodod ?? üòÑ


[24-Jul-18 05:36 AM] jl777c#5810
not really anything I consider a problem


[24-Jul-18 05:37 AM] grewalsatinder#9653
I guess in that case we should add the help switch to `-ac_name=` too ü§î


[24-Jul-18 05:37 AM] grewalsatinder#9653
if need help for `ASSETS` chain, use `komodo-cli -ac_name=ASSETS help`


[24-Jul-18 05:37 AM] grewalsatinder#9653
something like this


[24-Jul-18 05:38 AM] jl777c#5810
I await pull request for such things


[24-Jul-18 05:38 AM] jl777c#5810
my task is to make a wide spectrum of example CC contracts


[24-Jul-18 05:38 AM] jl777c#5810
that will allow others to jump start their development from the closest fit


[24-Jul-18 05:39 AM] jl777c#5810
the hard part about the utxo based CC contracts is that it is utxo based and very unconstrained


[24-Jul-18 05:47 AM] grewalsatinder#9653
@jl777c made issue for this. https://github.com/jl777/komodo/issues/783

{Embed}
https://github.com/jl777/komodo/issues/783
[Enhancement] Isolating cryptocondition applications help to speci...
As per current development of demo smart contracts/cryptoconditions, the help for these demo smart contracts are showing in komodo-cli help. like for faucet demo (https://github.com/jl777/komodo/bl...
https://images-ext-2.discordapp.net/external/71iBcuotcNOabCT-SIJNXqFke8SwwPrGxFH-18wojo8/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/12998093


[24-Jul-18 05:47 AM] grewalsatinder#9653
so that it can be referenced to some other devs if need to get help.


[24-Jul-18 05:48 AM] jl777c#5810
wait, i think you are misunderstanding


[24-Jul-18 05:48 AM] grewalsatinder#9653
ü§î


[24-Jul-18 05:48 AM] jl777c#5810
the token, faucet, rewards, these contracts are part of all komodod -ac_cc=1 chains


[24-Jul-18 05:49 AM] SHossain#0007
started an faq doc on this as well https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/faq.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/faq.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[24-Jul-18 05:49 AM] jl777c#5810
it is just something that any chain can do. you dont need to make a special FAUCET chain to use the faucet CC rpc


[24-Jul-18 05:49 AM] SHossain#0007
will post the questions jl777 gets asked and the answers.


[24-Jul-18 05:49 AM] SHossain#0007
please correct me if i'm wrong


[24-Jul-18 05:50 AM] jl777c#5810
I extended the type of vouts that exist. before we had p2pk, p2pkh and p2sh. basically with very few exceptions all scriptPubKey were one of those three types


[24-Jul-18 05:50 AM] jl777c#5810
now there is a cryptoconditions type of vout


[24-Jul-18 05:50 AM] jl777c#5810
but additionally, each CC output has an evalcode


[24-Jul-18 05:51 AM] grewalsatinder#9653
yes, I understand so far that I don't have to create a FAUCET chain to use `faucet` commands from `komodo-cli`. I was just using faucet as example. may be I need to update the example chain name... ü§î


[24-Jul-18 05:51 AM] jl777c#5810
so there is a customizable and identifiable CC outputs


[24-Jul-18 05:51 AM] jl777c#5810
each new CC contract added, creates effectively a new type of vout


[24-Jul-18 05:52 AM] jl777c#5810
and these new types of vouts are basically living in their own universe of utxo


[24-Jul-18 05:52 AM] jl777c#5810
but it is easy to have it go from normal coin to CC utxo and back


[24-Jul-18 05:52 AM] jl777c#5810
just a matter of allowing it


[24-Jul-18 05:53 AM] jl777c#5810
which means all chains with CC enabled will be able to use all of the CC contracts


[24-Jul-18 05:54 AM] grewalsatinder#9653
let's say I made a smart contract of `cat_ping`, and it's help command is `komodo-cli cat_ping <string>` which outputs as `meaw`. 
so I expect as of now it's help will show in `komodo-cli help` as well as in `komodo-cli -ac_name=<ANYASSETCHIN/ALLASSETCHAINS> help`
but I wish to show this help only in `komodo-cli -ac_name=KITTYCAT help`.


[24-Jul-18 06:03 AM] grewalsatinder#9653
re-read the last comments again....
so I guess my request doesn't make sense if all the commands in the CC assetchain also has to be supported in the Komodo main blockchain too ü§î


[24-Jul-18 06:11 AM] grewalsatinder#9653
have another question:
What is the importance of these new EVAL like this: https://github.com/jl777/komodo/blob/jl777/src/cc/eval.h#L43
what should I search to read more on it?

{Embed}
https://github.com/jl777/komodo/blob/jl777/src/cc/eval.h
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[24-Jul-18 06:45 AM] Mylo#8306
EVAL codes in eval.h are the CC contract types i believe.
"`rewards contract`" ID is 0xe5, `faucet contract` is 0xe4.

The goal is to have building blocks of smart contracts.
It's important to ignore for 1 moment that assets/tokens exist and can be exchanged.  This is a huge smart contract.

Imagine faucet was the first contract made.
It includes `CCinclude.h` which has all the core komodo stuff (wallet, signing, etc.) and eval.h so that somewhere i can spit out the ID of the contract type it is.

The smart contract "library" or "catalogue" is available to all of komodo.  You pick what you need to use for your use of blockchain.

That's how i'm reading it.


[24-Jul-18 06:46 AM] Mylo#8306
If you need something different, you pick the "smart contract of closest fit" and make your changes.  If you want, you PR it upstream back to komodo and it is included in the komodo "catalogue of smart contracts"


[24-Jul-18 06:49 AM] Mylo#8306
If you wanted to write contracts in go....as long as the data structures are the same, you're only encoding/decoding bytes of signed transactions - so as long as go can use the cpp libs - yeah why not!?


[24-Jul-18 06:59 AM] grewalsatinder#9653
thanks for clearing a bit on it Mylo üôÇ  üëç

{Reactions}
ü§û 

[24-Jul-18 07:44 AM] Mylo#8306
my question is, can you chain smart contract conditions together like IF statements.


[24-Jul-18 08:17 AM] jl777c#5810
The demo contracts I am doing use the absolute simplest possible CC condition


[24-Jul-18 08:17 AM] jl777c#5810
and with that I am able to do assets, rewards, faucet and more


[24-Jul-18 08:18 AM] jl777c#5810
there is no reason you cant make a contract that knows about other contracts


[24-Jul-18 08:18 AM] jl777c#5810
if you can describe what the contract does in terms of utxo, likely it can be done as long as you dont require the mindreading api. that is where it somehow magically needs to know what the user is thinking. too many bugs with that one so far


[24-Jul-18 09:39 AM] tolken#2655
üòâ  hah


[24-Jul-18 10:42 AM] Alright#0419
@jl777c can you explain what exactly the purpose of these addresses are? 
https://github.com/jl777/komodo/blob/da8b0b333653ce2539fd61c3d1fc6f27a9944fe2/src/cc/CCcustom.cpp#L45

{Embed}
https://github.com/jl777/komodo/blob/da8b0b333653ce2539fd61c3d1fc6f27a9944fe2/src/cc/CCcustom.cpp
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[24-Jul-18 10:43 AM] Alright#0419
I just imported RFYE2yL3KknWdHK6uNhvWacYsCUtwzjY3u on ATEST and spent the .0001 that was in it


[24-Jul-18 10:43 AM] Alright#0419
going to try the other addresses


[24-Jul-18 10:48 AM] Alright#0419
https://github.com/jl777/komodo/blob/da8b0b333653ce2539fd61c3d1fc6f27a9944fe2/src/cc/CCcustom.cpp#L67
this one isn't the correct privkey for that commented address

{Embed}
https://github.com/jl777/komodo/blob/da8b0b333653ce2539fd61c3d1fc6f27a9944fe2/src/cc/CCcustom.cpp
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[24-Jul-18 10:58 AM] jl777c#5810
you can only spend the normal funds in those addresses, CC outputs are protected


[24-Jul-18 10:58 AM] jl777c#5810
CC addresses map the CC scriptPubKey to an address, not the pubkey


[24-Jul-18 11:00 AM] jl777c#5810
the purpose of the addresses are to have special addresses that all nodes have the privkey for and are able to sign the CC transaction to released otherwise locked funds


[24-Jul-18 11:01 AM] Alright#0419
and what's the purpose of sending coins to them?


[24-Jul-18 11:01 AM] jl777c#5810
depends on the CC contract


[24-Jul-18 11:01 AM] jl777c#5810
for the faucet contract, the purpose is to have funds for the faucet


[24-Jul-18 11:02 AM] jl777c#5810
for the assets contract, the purpose is to create colored coins


[24-Jul-18 11:02 AM] jl777c#5810
for the rewards contract, the purpose is to have funds for the rewards


[24-Jul-18 11:02 AM] jl777c#5810
etc


[24-Jul-18 11:03 AM] jl777c#5810
contracts usually needs to have funds to operate.


[24-Jul-18 11:07 AM] Alright#0419
Should the colored coins be going to RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6 instead of RFYE2yL3KknWdHK6uNhvWacYsCUtwzjY3u?


[24-Jul-18 11:07 AM] Alright#0419
The faucetfund coins go to the non-commented address


[24-Jul-18 11:07 AM] Alright#0419
whereas the tokens go to the commented address


[24-Jul-18 11:08 AM] jl777c#5810
yes, the commented address is the normal address


[24-Jul-18 11:09 AM] jl777c#5810
what do you mean tokens goes to commented address?


[24-Jul-18 11:09 AM] jl777c#5810
tokens go to RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6


[24-Jul-18 11:09 AM] Alright#0419
I just mean that the tokencreate tx has vouts going to the commented address


[24-Jul-18 11:09 AM] Alright#0419
and no vouts going to the non-commented address


[24-Jul-18 11:09 AM] jl777c#5810
yes because when you create tokens you dont send them to the contract you send them to yourself


[24-Jul-18 11:10 AM] jl777c#5810
from assets.cpp:
 create
 vin.0: normal input
 vout.0: issuance assetoshis to CC
 vout.1: tag sent to AssetsCCaddress
 vout.2: normal output for change (if any)
 vout.n-1: opreturn [EVAL_ASSETS] ['c'] [origpubkey] "<assetname>" "<description>"


[24-Jul-18 11:10 AM] jl777c#5810
comment is wrong, should be the normal address for vout1


[24-Jul-18 11:11 AM] jl777c#5810
locking is needed for doing trades


[24-Jul-18 11:11 AM] jl777c#5810
so you would lock assets (or coins) in the AssetsCCaddress when you make a bid or ask


[24-Jul-18 11:12 AM] Alright#0419
Ok understood, that address is for coins you set a condition for them able to be spent


[24-Jul-18 11:13 AM] Alright#0419
what I don't understand is why tokencreate sends coins to an address that everyone has a privkey for and can spend them


[24-Jul-18 11:22 AM] jl777c#5810
that is just 0.0001 for a tag to easily get a list of all creates


[24-Jul-18 11:22 AM] jl777c#5810
where it wouldnt be saturated with a bunch of other tx


[24-Jul-18 11:23 AM] Alright#0419
Ah ok that makes sense


[24-Jul-18 11:23 AM] jl777c#5810
i figure 0.0001 is no big deal cost wise


[24-Jul-18 11:24 AM] jl777c#5810
the coins sent to the CC address are all in effect locked as you need to follow the contract rules to be able to spend them


[24-Jul-18 11:30 AM] siu#3920
```At global scope:
cc1plus: error: unrecognized command line option ‚Äò-Wno-builtin-declaration-mismatch‚Äô [-Werror]
cc1plus: all warnings being treated as errors
Makefile:2961: recipe for target 'cc/libbitcoin_server_a-rewards.o' failed
make[2]: *** [cc/libbitcoin_server_a-rewards.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f cc/.deps/libbitcoin_server_a-betprotocol.Tpo cc/.deps/libbitcoin_server_a-betprotocol.Po
make[2]: Leaving directory '/home/siu/komodo/src'
Makefile:4406: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/siu/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
siu@T460:~/komodo$ 
```


[24-Jul-18 11:30 AM] siu#3920
this is from latest build


[24-Jul-18 11:32 AM] jl777c#5810
you missed the message to use dev branch and not jl777 branch for now


[24-Jul-18 11:32 AM] siu#3920
ah


[24-Jul-18 11:32 AM] siu#3920
ok


[24-Jul-18 11:59 AM] jl777c#5810
I plan to make an enable/disable mask for specific contracts. not sure the best way to deal with varied activations on the different chains


[24-Jul-18 12:04 PM] jl777c#5810
made good progress on the rewards contract, i hope to debug it tomorrow


[24-Jul-18 12:04 PM] jl777c#5810
a normal opreturn transaction can be used to lock funds, via SPV


[24-Jul-18 12:05 PM] jl777c#5810
and anybody will be able to unlock, but there is only one address it can go back to, as specified in the lock transaction

{Reactions}
üÜí 

[24-Jul-18 01:04 PM] jl777c#5810
added the skeleton code for a few more CC contracts. Not sure how long it will take to get all these coded, but it seems a good starting set:
        EVAL(EVAL_ASSETS,   0xe3)  \
        EVAL(EVAL_FAUCET, 0xe4) \
        EVAL(EVAL_REWARDS, 0xe5) \
        EVAL(EVAL_DICE, 0xe6) \
        EVAL(EVAL_PONZI, 0xe7) \
        EVAL(EVAL_AUCTION, 0xe8) \
        EVAL(EVAL_LOTTO, 0xe9)


[24-Jul-18 01:06 PM] jl777c#5810
has anybody been able to test the bidfill?


[24-Jul-18 01:06 PM] Alright#0419
Have you worked on since about 12 hours ago?


[24-Jul-18 01:10 PM] SHossain#0007
@libscott i tried to build from jl777's dev branch on Ubuntu 18.04. Compiling failed with the following error. using gcc v 7.3
```
In file included from cc/CCcustom.cpp:66:0:
cc/CCcustom.inc: In function ‚Äòbool IsRewardsInput(const CScript&)‚Äô:
cc/CCcustom.inc:13:57: error: cannot convert ‚ÄòIsRewardsInput(const CScript&)::<lambda(CC, CCVisitor)>‚Äô to ‚Äòint ()(CC, CCVisitor)‚Äô in initialization
     CCVisitor visitor = {findEval, (uint8_t)"", 0, NULL};
                                                         ^
Makefile:2891: recipe for target 'cc/libbitcoin_server_a-CCcustom.o' failed
make[2]:  [cc/libbitcoin_server_a-CCcustom.o] Error 1
make[2]:  Waiting for unfinished jobs....
mv -f cc/.deps/libbitcoin_server_a-CCassetsCore.Tpo cc/.deps/libbitcoin_server_a-CCassetsCore.Po
libtool: compile:  /home/alien/komodo/depends/x86_64-unknown-linux-gnu/share/../native/bin/ccache g++ -m64 -std=c++11 -DHAVE_CONFIG_H -I. -I../src/config -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=2 -I./obj -I./secp256k1/include -I./cryptoconditions/include -DBUILD_BITCOIN_INTERNAL -I/home/alien/komodo/depends/x86_64-unknown-linux-gnu/share/../include/libsnark -I/home/alien/komodo/depends/x86_64-unknown-linux-gnu/share/../include/ -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS -Wformat -Wformat-security -Wstack-protector -fstack-protector-all -Werror -pipe -O1 -g -fopenmp -fwrapv -fno-strict-aliasing -Wno-builtin-declaration-mismatch -MT crypto/libzcashconsensus_la-equihash.lo -MD -MP -MF crypto/.deps/libzcashconsensus_la-equihash.Tpo -c crypto/equihash.cpp  -fPIC -DPIC -o crypto/libzcashconsensus_la-equihash.o >/dev/null 2>&1
mv -f crypto/.deps/libzcashconsensus_la-equihash.Tpo crypto/.deps/libzcashconsensus_la-equihash.Plo
```


[24-Jul-18 01:10 PM] jl777c#5810
@Alright not sure what you mean


[24-Jul-18 01:10 PM] SHossain#0007
```
mv -f cc/.deps/libbitcoin_server_a-CCutils.Tpo cc/.deps/libbitcoin_server_a-CCutils.Po
mv -f wallet/.deps/libbitcoin_wallet_a-walletdb.Tpo wallet/.deps/libbitcoin_wallet_a-walletdb.Po
mv -f cc/.deps/libbitcoin_server_a-CCtx.Tpo cc/.deps/libbitcoin_server_a-CCtx.Po
mv -f cc/.deps/libbitcoin_server_a-assets.Tpo cc/.deps/libbitcoin_server_a-assets.Po
mv -f cc/.deps/libbitcoin_server_a-rewards.Tpo cc/.deps/libbitcoin_server_a-rewards.Po
mv -f cc/.deps/libbitcoin_server_a-faucet.Tpo cc/.deps/libbitcoin_server_a-faucet.Po
mv -f cc/.deps/libbitcoin_server_a-betprotocol.Tpo cc/.deps/libbitcoin_server_a-betprotocol.Po
mv -f wallet/.deps/libbitcoin_wallet_a-rpcwallet.Tpo wallet/.deps/libbitcoin_wallet_a-rpcwallet.Po
mv -f wallet/.deps/libbitcoin_wallet_a-wallet.Tpo wallet/.deps/libbitcoin_wallet_a-wallet.Po
make[2]: Leaving directory '/home/alien/komodo/src'
Makefile:4406: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/alien/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
```


[24-Jul-18 01:10 PM] Alright#0419
I tried bidfill multiple times yesterday, couldn't get it to work


[24-Jul-18 01:12 PM] siu#3920
/komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59
{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 1000000000
}


[24-Jul-18 01:13 PM] jl777c#5810
I did fix some things, not sure how many hours ago. but I really cant fix bugs without details


[24-Jul-18 01:13 PM] jl777c#5810
the mind reading api isnt working very well anymore


[24-Jul-18 01:13 PM] Alright#0419
what details do you need. I gave you the errors I was getting, didn't I?


[24-Jul-18 01:13 PM] Alright#0419
@siu do `tokenorders` then try to do `tokenfillbid` on the one that's there


[24-Jul-18 01:15 PM] SHossain#0007
Just a general guidance on reporting issues to jl777:
```
a) the specific chain parameters so I can connect to it
b) the EXACT rpc call and parameters you used
c) the most important! the raw tx generated
d) clear description of why you think it is a bug. for now you need to look at the raw tx details to make sure all vins are valid, signed and all vouts are sane.
e) do not post things like "i tried X and it didnt work" as that does not help at all at this stage. These are raw transaction level things and until everything works, things wont work at the higher level.
```


[24-Jul-18 01:17 PM] jl777c#5810
that was a lot more than 12 hrs ago, I fixed your tx and it confirmed


[24-Jul-18 01:17 PM] jl777c#5810
so what bugs are actually still there?


[24-Jul-18 01:18 PM] siu#3920
```./komodo-cli -ac_name=ATEST tokenorders
[
  {
    "funcid": "b",
    "txid": "f3e2dd8fa7de03d488e3a7aef988998a5a1c48901d8636ebb886226eaf1fc9ff",
    "vout": 0,
    "amount": 1000,
    "bidamount": 1000,
    "origaddress": "R9sDyKt2kW5uJaoZT6GF9e3WRbGioBuhoZ",
    "tokenid": "e7d034fb7dbad561c9a86dcbcc64aa89e1d311891b4e7c744280b7de13b1186f",
    "totalrequired": 1000,
    "price": 1
  }
]
siu@T460:~/komodo/src$ ./komodo-cli -ac_name=ATEST tokenfillbid e7d034fb7dbad561c9a86dcbcc64aa89e1d311891b4e7c744280b7de13b1186f f3e2dd8fa7de03d488e3a7aef988998a5a1c48901d8636ebb886226eaf1fc9ff 100
filltx wasnt for assetid
error code: -1
error message:
basic_string::_M_construct null not valid
```


[24-Jul-18 01:18 PM] siu#3920
i guess the error means i wrote something wrong


[24-Jul-18 01:20 PM] Alright#0419
going to take a look at the tx, but I'm getting 
```
vin2 5000, vout2 100, vout3 4900, Got 1000.00000000 to origaddr.(RTNpztwViPEVACRbCi2B7w28QPuoByk3eC)
ValidateAssetRemainder: totalunits 1000 != 100 (remaining_price 0 + 100 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx f3e2dd8fa7de03d488e3a7aef988998a5a1c48901d8636ebb886226eaf1fc9ff
AssetValidate (B)
vin2 5000, vout2 100, vout3 4900, Got 1000.00000000 to origaddr.(RTNpztwViPEVACRbCi2B7w28QPuoByk3eC)
ValidateAssetRemainder: totalunits 1000 != 100 (remaining_price 0 + 100 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx f3e2dd8fa7de03d488e3a7aef988998a5a1c48901d8636ebb886226eaf1fc9ff
```
with tokenfillbid for this bid
```
  {
    "funcid": "b",
    "txid": "f3e2dd8fa7de03d488e3a7aef988998a5a1c48901d8636ebb886226eaf1fc9ff",
    "vout": 0,
    "amount": 1000,
    "bidamount": 1000,
    "origaddress": "R9sDyKt2kW5uJaoZT6GF9e3WRbGioBuhoZ",
    "tokenid": "e7d034fb7dbad561c9a86dcbcc64aa89e1d311891b4e7c744280b7de13b1186f",
    "totalrequired": 1000,
    "price": 1
  }
```
created the tx with `./komodo-cli -ac_name=ATEST tokenfillbid e7d034fb7dbad561c9a86dcbcc64aa89e1d311891b4e7c744280b7de13b1186f f3e2dd8fa7de03d488e3a7aef988998a5a1c48901d8636ebb886226eaf1fc9ff 100`


[24-Jul-18 01:21 PM] Alright#0419
Oh, got it to work with 1000 instead of 100


[24-Jul-18 01:22 PM] Alright#0419
the bid stays in the orderbook with 0'd amounts though


[24-Jul-18 01:23 PM] siu#3920
you filled it


[24-Jul-18 01:25 PM] Alright#0419
is it possible to partially fill bids/asks?


[24-Jul-18 01:25 PM] jl777c#5810
it is these EVAL_ASSETS invalid messages I need to be able to fix it, along with details of the trade. Once you can get a specific error on a chain, then I need the raw bytes that create the error


[24-Jul-18 01:25 PM] jl777c#5810
yes partial fills should work


[24-Jul-18 01:25 PM] jl777c#5810
so each bug report would be the raw hex bytes that reproduces the bug. once things are setup, I can quickly reproduce it just by  a sendrawtransaction


[24-Jul-18 01:26 PM] jl777c#5810
of course you would need to maybe even setup a new asset to create a different bug as any activity might make the bug go away and if the bug goes away, I cant fix it


[24-Jul-18 01:26 PM] siu#3920
{
    "funcid": "b",
    "txid": "a8d60a3ce429ccb885ad445e7a4534130a35d2424d1883c6513d0f4da2fe9a92",
    "vout": 0,
    "amount": 150,
    "bidamount": 150,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": 100,
    "price": 1.5
  },


[24-Jul-18 01:26 PM] siu#3920
this is mine


[24-Jul-18 01:26 PM] siu#3920
can you fill it? @Alright


[24-Jul-18 01:27 PM] siu#3920
and what command you use to fill it?


[24-Jul-18 01:27 PM] jl777c#5810
there is no restriction on who can fill orders, but it is easier if a different address does it so you can tell where the payments are going ti


[24-Jul-18 01:27 PM] jl777c#5810
and for now I need PRECISE and ACCURATE bug reports. none of this "it didnt work" type of reports as that does not help


[24-Jul-18 01:27 PM] jl777c#5810
reproduced bugs via raw hex


[24-Jul-18 01:28 PM] jl777c#5810
maybe make a bunch if bug assets, bug1, bug2, bug3, ... and experiment around until you create a new bug


[24-Jul-18 01:28 PM] Alright#0419
I'll give you the raw tx for that failed tokenfillbid in a moment


[24-Jul-18 01:28 PM] jl777c#5810
and no point to make variations of the same bug over and over, better to have different types of bugs


[24-Jul-18 01:30 PM] jl777c#5810
I will be offline soon and wont have time to troubleshoot, so maybe even make github issue out of each one and put in all the details I need to reproduce and understand the context. if it is a fill problem, how was the bid created, what commands were used, what is the rawhex, what error appears


[24-Jul-18 01:30 PM] jl777c#5810
I dont want to have to guess


[24-Jul-18 01:30 PM] Alright#0419
üëå


[24-Jul-18 01:30 PM] siu#3920
understood


[24-Jul-18 01:31 PM] Alright#0419
not able to fill that bid @siu


[24-Jul-18 01:31 PM] Alright#0419
try another with a whole number for price


[24-Jul-18 01:31 PM] Alright#0419
might be that


[24-Jul-18 01:32 PM] Alright#0419
just filled another one of my own bids though


[24-Jul-18 01:32 PM] jl777c#5810
at first, lets try the easiest cases, which is overfilling or filling exactly


[24-Jul-18 01:33 PM] jl777c#5810
and making sure you have a single utxo big enough to do so


[24-Jul-18 01:33 PM] jl777c#5810
from there, you can make it progressively more complex scenario. theoretically it should find however many utxo needed to fill exactly what you specific.


[24-Jul-18 01:34 PM] jl777c#5810
also even if it looks like it works, odds are that it did it wrong, so you need to analyze what actually happened with all the inputs and outputs


[24-Jul-18 01:34 PM] siu#3920
ok, a new one


[24-Jul-18 01:34 PM] siu#3920
{
    "funcid": "b",
    "txid": "2d0cad1c94749958f4221b55a79b7718e14441ceab7e9e367e111fb5fc60178f",
    "vout": 0,
    "amount": 100,
    "bidamount": 100,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": 100,
    "price": 1
  },


[24-Jul-18 01:37 PM] Alright#0419
getting 
```
error code: -1
error message:
basic_string::_M_construct null not valid
```

```
filltx wasnt for assetid
```


[24-Jul-18 01:37 PM] Alright#0419
checking out the txs, couple minutes


[24-Jul-18 01:37 PM] Alright#0419
that's while trying to create the tokenfillbid tx


[24-Jul-18 01:38 PM] siu#3920
what are you buying the tokens with?


[24-Jul-18 01:38 PM] siu#3920
ATEST?


[24-Jul-18 01:39 PM] Alright#0419
yes


[24-Jul-18 01:39 PM] siu#3920
hmm


[24-Jul-18 01:39 PM] jl777c#5810
basic_string::_M_construct null not valid
 that means the request got an error in creating the transaction


[24-Jul-18 01:40 PM] siu#3920
i can buy my own token


[24-Jul-18 01:41 PM] siu#3920
cant buy your orders


[24-Jul-18 01:41 PM] siu#3920
the same for you


[24-Jul-18 01:41 PM] jl777c#5810
that's an interesting bug!


[24-Jul-18 01:41 PM] Alright#0419
I'm doing it from separate nodes


[24-Jul-18 01:41 PM] Alright#0419
although I did do tokentransfer between them


[24-Jul-18 01:42 PM] jl777c#5810
assets just after being created are in a different state, like coinbase


[24-Jul-18 01:42 PM] jl777c#5810
it could be not all cases properly handle it


[24-Jul-18 01:42 PM] jl777c#5810
it might be that it needs to be transferred before it can be traded


[24-Jul-18 01:44 PM] jl777c#5810
also faucet contract is ready to test


[24-Jul-18 01:44 PM] Alright#0419
faucet works as intended from what I can tell


[24-Jul-18 01:44 PM] jl777c#5810
it should be much easier to validate or find bugs


[24-Jul-18 01:44 PM] Alright#0419
gives you the block reward each time you do faucetget?


[24-Jul-18 01:44 PM] Alright#0419
is that correct?


[24-Jul-18 01:44 PM] jl777c#5810
gives you 1 coin


[24-Jul-18 01:45 PM] Alright#0419
Ok, let me look again


[24-Jul-18 01:45 PM] jl777c#5810
can you do a bunch of faucet gets in the same block?


[24-Jul-18 01:45 PM] Alright#0419
it gives the same raw tx


[24-Jul-18 01:45 PM] Alright#0419
so no?


[24-Jul-18 01:45 PM] jl777c#5810
and it has code (untested) to prevent using mempool utxo as vin


[24-Jul-18 01:46 PM] jl777c#5810
so if there is 1 big utxo in the faucet fund, 1 faucetget per block


[24-Jul-18 01:46 PM] jl777c#5810
unless bugs


[24-Jul-18 01:46 PM] jl777c#5810
and any stability or locking up issues?


[24-Jul-18 01:46 PM] jl777c#5810
those were nasty bugs


[24-Jul-18 01:47 PM] jl777c#5810
it could be just the bidfill and asks are the current bugs. try to break down the bidfill into the different scenarios and test each one


[24-Jul-18 01:48 PM] Alright#0419
no lock ups or crashes


[24-Jul-18 01:49 PM] jl777c#5810
good. it was a definite bug with a definite fix, but concerned there could be other cases. I dont think any other bitcoin protocol blockchain has contracts code with full access to prior blockchain data


[24-Jul-18 01:50 PM] jl777c#5810
the miner lockup was due to it doing a validateblock!


[24-Jul-18 01:50 PM] Alright#0419
Just had a node crash :/


[24-Jul-18 01:50 PM] jl777c#5810
which was under a lock


[24-Jul-18 01:50 PM] Alright#0419
Had something to do with setgenerate true I believe


[24-Jul-18 01:50 PM] Alright#0419
let me try to replicate


[24-Jul-18 01:50 PM] jl777c#5810
and the validation invoked the CC code, which deadlocked waiting for the lock to be released


[24-Jul-18 01:50 PM] Alright#0419
```
komodod: checkqueue.h:189: CCheckQueueControl<T>::CCheckQueueControl(CCheckQueue<T>*) [with T = CScriptCheck]: Assertion `isIdle' failed.
komodod: checkqueue.h:189: CCheckQueueControl<T>::CCheckQueueControl(CCheckQueue<T>*) [with T = CScriptCheck]: Assertion `isIdle' failed.
Aborted (core dumped)
```


[24-Jul-18 01:51 PM] jl777c#5810
reproducible?\


[24-Jul-18 01:51 PM] Alright#0419
do anything for you?


[24-Jul-18 01:51 PM] Alright#0419
Trying


[24-Jul-18 01:51 PM] jl777c#5810
I have seen that occasionally. seems some low probability crash


[24-Jul-18 01:51 PM] Alright#0419
have a node consistently doing it


[24-Jul-18 01:51 PM] jl777c#5810
ok, if it is consistent that is great


[24-Jul-18 01:52 PM] jl777c#5810
i will have to remote into it, so DM me the login and I can trouble shoot it later


[24-Jul-18 01:56 PM] Alright#0419
@siu do you have the p2p port open?


[24-Jul-18 01:56 PM] Alright#0419
I see a peer on a longer chain that my nodes don't want to sync to


[24-Jul-18 01:56 PM] siu#3920
yes, p2p port is open


[24-Jul-18 01:57 PM] siu#3920
"blocks": 1579,
  "longestchain": 0,


[24-Jul-18 01:57 PM] Alright#0419
what block are you on?


[24-Jul-18 01:57 PM] siu#3920
but seems like i forked


[24-Jul-18 01:57 PM] Alright#0419
do `./komodo-cli -ac_name=ATEST setgenerate true`


[24-Jul-18 01:57 PM] Alright#0419
does it crash?


[24-Jul-18 01:57 PM] siu#3920
./komodo-cli -ac_name=ATEST getblockhash 1579
001acfb03527e443f04e86fa6b4e1ff66c4733f148301dd50fab1406407ad62f


[24-Jul-18 01:57 PM] Alright#0419
setting the thread count works


[24-Jul-18 01:58 PM] Alright#0419
but without a number after true it crashes on each node


[24-Jul-18 01:58 PM] jl777c#5810
without a number it does maxthreads


[24-Jul-18 01:58 PM] siu#3920
setgenerate true


[24-Jul-18 01:58 PM] siu#3920
still stuck


[24-Jul-18 01:58 PM] Alright#0419
check the stdout


[24-Jul-18 01:58 PM] Alright#0419
might have crashed


[24-Jul-18 01:59 PM] siu#3920
not crashed


[24-Jul-18 01:59 PM] siu#3920
blocks": 1580,


[24-Jul-18 02:00 PM] siu#3920
moving ahead very slowly but without longestchain


[24-Jul-18 02:00 PM] siu#3920
connections:0


[24-Jul-18 02:00 PM] jl777c#5810
longestchain will be 0 unless there is a consensus majority longest chain


[24-Jul-18 02:01 PM] jl777c#5810
which when there are very few nodes might not happen


[24-Jul-18 02:01 PM] jl777c#5810
but doeesnt mean anything is wrong, especially if you have 2 peers


[24-Jul-18 02:02 PM] siu#3920
restarted chain


[24-Jul-18 02:02 PM] siu#3920
still the same block


[24-Jul-18 02:02 PM] siu#3920
will go out to eat


[24-Jul-18 02:02 PM] siu#3920
will comeback later


[24-Jul-18 03:40 PM] siu#3920
im back


[24-Jul-18 03:44 PM] siu#3920
```ProcessAssets
AssetValidate (B)
vin2 100, vin3 999999900, vout2 100, vout3 999999850, inputs 10.00000000 vs 9.99999950 outputs
AssetValidate.(B) failed
CC Eval EVAL_ASSETS Invalid: asset inputs != outputs spending tx a8d60a3ce429ccb885ad445e7a4534130a35d2424d1883c6513d0f4da2fe9a92
ProcessAssets
AssetValidate (B)
vin2 100, vin3 999999900, vout2 100, vout3 999999850, inputs 10.00000000 vs 9.99999950 outputs
AssetValidate.(B) failed
CC Eval EVAL_ASSETS Invalid: asset inputs != outputs spending tx a8d60a3ce429ccb885ad445e7a4534130a35d2424d1883c6513d0f4da2fe9a92
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[24-Jul-18 04:04 PM] Alright#0419
tokenfillbid?


[24-Jul-18 09:31 PM] cipi#4502
hmmm, tried tokenfillbid and i get the same error
```filltx wasnt for assetid
error code: -1
error message:
basic_string::_M_construct null not valid```
it is this entry
```    "funcid": "b",
    "txid": "a8d60a3ce429ccb885ad445e7a4534130a35d2424d1883c6513d0f4da2fe9a92",
    "vout": 0,
    "amount": 150,
    "bidamount": 150,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": 100,
    "price": 1.5```
and i tried this
```komodo-cli -ac_name=ATEST tokenfillbid c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 a8d60a3ce429ccb885ad445e7a4534130a35d2424d1883c6513d0f4da2fe9a92 150```
tried other amounts too and another bid, but the error is the same... am i doing something wrong?


[25-Jul-18 01:19 AM] jl777c#5810
AssetValidate error is saying that assets are being burned. That is a violation of the rules as assets need to always be preserved, so the bug is in the construction of the tx.
vin2 100, vin3 999999900, vout2 100, vout3 999999850, inputs 10.00000000 vs 9.99999950 outputs


[25-Jul-18 01:20 AM] jl777c#5810
maybe the tokenfillbid isnt handling a too large request? fillamount is how much of the totalrequired you are filling


[25-Jul-18 01:23 AM] jl777c#5810
and again I need to ask for basic questions like what command was issued to get the AssetValidate error. I should have to guess what exact fillbid command was used. When there are precise bug reports I will fix them


[25-Jul-18 01:23 AM] jl777c#5810
without it, it can go for months and nothing will be fixed


[25-Jul-18 06:09 AM] siu#3920
I tried the same `tokenfillbid` command as cipi


[25-Jul-18 06:10 AM] jl777c#5810
what is your tokenbalance for that token?


[25-Jul-18 06:11 AM] jl777c#5810
bid locks normal coins to buy the specified token


[25-Jul-18 06:11 AM] jl777c#5810
bidfill requires you have the token in order to fill the bid


[25-Jul-18 06:11 AM] siu#3920
I have the whole balance since i created it


[25-Jul-18 06:11 AM] siu#3920
The bid was placed by myself


[25-Jul-18 06:12 AM] jl777c#5810
ok, do a transfer to yourself


[25-Jul-18 06:12 AM] jl777c#5810
it could be the coinbase cant be used to trade


[25-Jul-18 06:12 AM] siu#3920
Ok. Will try


[25-Jul-18 06:13 AM] SHossain#0007
@siu please put a buy order of this token `e4895451cae47f8f10303c3594888b739f044f7c778623318d877e8df365cc66`. i'll try to fill


[25-Jul-18 06:24 AM] jl777c#5810
I dont see any confirmed bugs. ping me when there is one


[25-Jul-18 06:42 AM] siu#3920
wow, new contracts are sprouting like flowers now


[25-Jul-18 06:42 AM] siu#3920
im on it now... finally arrived to my computer


[25-Jul-18 06:42 AM] siu#3920
recompiling kmd


[25-Jul-18 06:47 AM] siu#3920
i see that there is no way to call what tokenids i hold


[25-Jul-18 06:48 AM] siu#3920
right now unless i dont check my history i dont see a way to print the tokenid of the token i created yesterday


[25-Jul-18 06:52 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59
{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 1000000000
}
siu@T460:~/komodo/src$ ./komodo-cli -ac_name=ATEST tokentransfer c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27 99999
{
  "result": "success",
```


[25-Jul-18 06:53 AM] siu#3920
```./komodo-cli -ac_name=ATEST sendrawtransaction 01000000031675034d1ab8c91ba05c545cc6d2d482c08d0da0ab96f8d0b973b4ee027b03a9000000004948304502210093a25d7028208f92861af15c7f0594570d44bef6ceff5081cd4d19458a3be65402204ecee11c009b1e9918b7bbd1af091407b4ece7573380cf41557b41126a83aa0b01ffffffff06b83f3bc299b145eba79318af1b13ef5fc14c24b6e9fc5e712ea8b6e905d3b9020000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140185f18ce45dc4c932be0ae421923af44aa002d18f17b861572fc831a6347f8ce3589193e985502bdfa25c46b2dd48fc29832210bf8d87006196c05782fd65d51a100af038001e3a10001ffffffff06b83f3bc299b145eba79318af1b13ef5fc14c24b6e9fc5e712ea8b6e905d3b9030000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2781404b83f9f2dcc34bace8a19adcd23de1a0e46ba04af4bc6786d9566789c6ceedc142ca86b42af29573ba4b45ffdd186810c78d200ff4bf8964e5074bf63c3573d8a100af038001e3a10001ffffffff049f86010000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc6143993b00000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401ccf078724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac0000000000000000246a22e374c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b5900000000
error code: -25
error message:
```


[25-Jul-18 06:53 AM] siu#3920
then sendrawtransaction printed an empty error message


[25-Jul-18 06:54 AM] siu#3920
```AssetValidate (t)
vin1 100, vin2 999999900, vout0 1000, vout1 999999000, transfer validated 10.00000000 -> 10.00000000
AssetValidate (t)
vin1 1000000000, vout0 500000, vout1 999500000, transfer validated 10.00000000 ```


[25-Jul-18 06:54 AM] siu#3920
and the console printed this


[25-Jul-18 06:54 AM] SHossain#0007
@siu please send some of this token to this pubkey `03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc` when you have some time


[25-Jul-18 06:55 AM] SHossain#0007
so i can test fillbid


[25-Jul-18 06:55 AM] siu#3920
ill set an bid now


[25-Jul-18 06:55 AM] jl777c#5810
I was able to broadcast fbd753a25eb1abe928bfe40eaf3a0c7a6e4a73fdcfd691fce382002fd26dba06


[25-Jul-18 06:55 AM] siu#3920
was testing the tokentransfer first


[25-Jul-18 06:55 AM] jl777c#5810
AssetValidate (t)
vin1 100, vin2 999999900, vout0 99999, vout1 999900001, transfer validated 10.00000000 -> 10.00000000


[25-Jul-18 06:55 AM] jl777c#5810
do you have the latest version? @siu


[25-Jul-18 06:56 AM] siu#3920
yes, i just pulled and rebuit


[25-Jul-18 06:56 AM] siu#3920
``` ./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 1000000000
}
```


[25-Jul-18 06:56 AM] siu#3920
my token balances shows the same


[25-Jul-18 06:57 AM] SHossain#0007
i have created a new `rpc` directory which will have all RPC call description, example command and output https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[25-Jul-18 06:58 AM] jl777c#5810
fbd753a25eb1abe928bfe40eaf3a0c7a6e4a73fdcfd691fce382002fd26dba06


[25-Jul-18 06:58 AM] jl777c#5810
it confirmed


[25-Jul-18 06:58 AM] siu#3920
@SHossain  broadcasted the bid:


[25-Jul-18 06:58 AM] siu#3920
9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d


[25-Jul-18 06:59 AM] siu#3920
@jl777c


[25-Jul-18 06:59 AM] siu#3920
./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 1000000000
}


[25-Jul-18 06:59 AM] siu#3920
still shows the complete original balance


[25-Jul-18 07:00 AM] jl777c#5810
@siu if you transfer tokens to yourself, why would you expect the balance to change?


[25-Jul-18 07:01 AM] siu#3920
right


[25-Jul-18 07:02 AM] siu#3920
ok, then will try to send them to @SHossain pubkey


[25-Jul-18 07:02 AM] SHossain#0007
thank you


[25-Jul-18 07:03 AM] siu#3920
`cc095a3201320759ad22d7d740e4e2a0a368ce7628964fdf7fd8767e8b3fecfc`


[25-Jul-18 07:03 AM] siu#3920
sent


[25-Jul-18 07:05 AM] SHossain#0007
great!


[25-Jul-18 07:06 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenfillbid c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 45b3f7874fc4a2699729a9792bc7679f6b5f11035a29ad9f661425b19534dd1d 10
recvunitprice 1.0000000000000000 >= 1.0000000000000000 unitprice, new unitprice 1.0000000000000000
remaining 990 -> origpubkey
{
  "result": "success",
  "hex": "0100000003b46fb06b731e7b68bbcfaa2e90035389e92e48abd595c18a9d4e65274d2dac880200000049483045022100901abdad137d43201e5596104f8a3ad6ca28d92f4259a74ad1228ec94d5469a002206cf992359449faef3acde1b7f44612c16983c25dd5e90a71640797bac022652501ffffffff1ddd3495b12514669fad295a03115f6b9f67c72b79a9299769a2c44f87f7b345000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281404ce4d9aa9de47f31eecd0efff2674587875aab9f2071068b72fd9cc12ea8d6a578b736c63054bb631524f1780dce45d102933f3ed58f476ef8315d3360faefa2a100af038001e3a10001fffffffffcec3f8b7e76d87fdf4f962876ce68a3a0e2e440d7d722ad59073201325a09cc000000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc8140de7e99512b11a402657aabd537db822a1d7fe4ae2f1fb843565a56effab5b0de4816f028e24d60877bfeeb8b066805cc89926be05cccbf02c42441c32b0134c0a100af038001e3a10001ffffffff06001edc0c17000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00ca9a3b00000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0a00000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc9586010000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc1892486cb2430000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce342c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59de0300000000000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000"
}
```
**fillbid**


[25-Jul-18 07:07 AM] SHossain#0007
sendrawtransaction gave me this 
```
ProcessAssets
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 1000.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
recvunitprice 1.0000000000000000 >= 1.0000000000000000 unitprice, new unitprice 1.0000000000000000
AssetValidate.(B) failed
CC Eval EVAL_ASSETS Invalid: dust vout0 to AssetsCCaddr for fillbuy spending tx 45b3f7874fc4a2699729a9792bc7679f6b5f11035a29ad9f661425b19534dd1d
ProcessAssets
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 1000.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
recvunitprice 1.0000000000000000 >= 1.0000000000000000 unitprice, new unitprice 1.0000000000000000
AssetValidate.(B) failed
CC Eval EVAL_ASSETS Invalid: dust vout0 to AssetsCCaddr for fillbuy spending tx 45b3f7874fc4a2699729a9792bc7679f6b5f11035a29ad9f661425b19534dd1d
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[25-Jul-18 07:09 AM] jl777c#5810
perfect! I reproduced the bug, since you posted the rawhex

{Reactions}
üëåüèΩ (2) 

[25-Jul-18 07:18 AM] siu#3920
tested faucet... works as expected


[25-Jul-18 07:18 AM] siu#3920
only thing is that it seems to have a default faucetget of 1 coin


[25-Jul-18 07:18 AM] siu#3920
can this be changed?


[25-Jul-18 07:18 AM] siu#3920
i mean... change the quantity of coins per faucetget


[25-Jul-18 07:21 AM] SHossain#0007
be back in 10 min.


[25-Jul-18 07:21 AM] siu#3920
ok


[25-Jul-18 07:22 AM] jl777c#5810
how many coins should a faucet give out?


[25-Jul-18 07:22 AM] Deleted User#0000
1 billion


[25-Jul-18 07:25 AM] siu#3920
whatever the faucet creator wants


[25-Jul-18 07:26 AM] siu#3920
maybe and an option in `faucetfund`


[25-Jul-18 07:26 AM] siu#3920
`amount [size]¬¥


[25-Jul-18 07:27 AM] siu#3920
dont know the correct term


[25-Jul-18 07:27 AM] jl777c#5810
faucet is meant as the simplest possible CC demo


[25-Jul-18 07:27 AM] jl777c#5810
adding a size parameter would make it more complex


[25-Jul-18 07:27 AM] siu#3920
ok


[25-Jul-18 07:27 AM] jl777c#5810
I think for most all chains a faucet of 1 coin is not such a bad default


[25-Jul-18 07:27 AM] jl777c#5810
oh, pushed fix @SHossain


[25-Jul-18 07:28 AM] siu#3920
no, not at all


[25-Jul-18 07:28 AM] siu#3920
rebuilding


[25-Jul-18 07:30 AM] SHossain#0007
i'm back and updating


[25-Jul-18 07:31 AM] jl777c#5810
any bugs, needs at least the raw txbytes (if any), then I can usually immediately duplicate it


[25-Jul-18 07:31 AM] siu#3920
also, i know @jl777c wont like this... but what about a masternode contract? üòÇ

{Reactions}
üëç 

[25-Jul-18 07:32 AM] siu#3920
restarting daemon


[25-Jul-18 07:32 AM] jl777c#5810
what exactly does a masternode CC need to do?


[25-Jul-18 07:32 AM] siu#3920
lock coins and give a bigger reward than non locked coins?


[25-Jul-18 07:32 AM] siu#3920
also voting capacity


[25-Jul-18 07:33 AM] jl777c#5810
as a CC I dont object to a masternode, I still have yet to hear a coherent explanation of what they actually do


[25-Jul-18 07:33 AM] jl777c#5810
rewards CC will be giving rewards


[25-Jul-18 07:33 AM] jl777c#5810
for locked coins


[25-Jul-18 07:33 AM] siu#3920
yes... but higher rewards because the coins are locked


[25-Jul-18 07:34 AM] siu#3920
and locked coins give you voting capacity


[25-Jul-18 07:34 AM] jl777c#5810
please read the description of what the rewards CC does before concluding if it is or isnt adequate


[25-Jul-18 07:34 AM] jl777c#5810
The rewards CC contract is initially for OOT, which needs this functionality. However, many of the attributes can be parameterized to allow different rewards programs to run. Multiple rewards plans could even run on the same blockchain, though the user would need to choose which one to lock funds into.
 
 At the high level, the user would lock funds for some amount of time and at the end of it, would get all the locked funds back with an additional reward. So there needs to be a lock funds and unlock funds ability. Additionally, the rewards need to come from somewhere, so similar to the faucet, there would be a way to fund the reward.
 
 Additional requirements are for the user to be able to lock funds via SPV. This requirement in turns forces the creation of a way for anybody to be able to unlock the funds as that operation requires a native daemon running and cant be done over SPV. The idea is to allow anybody to run a script that would unlock all funds that are matured. As far as the user is concerned, he locks his funds via SPV and after some time it comes back with an extra reward.
 
 In reality, the funds are locked into a CC address that is unspendable, except for some special conditions and it needs to come back to the address that funded the lock. In order to implement this, several things are clear.


[25-Jul-18 07:34 AM] jl777c#5810
1) each locked CC utxo needs to be linked to a specific rewards plan
 2) each locked CC utxo needs to know the only address that it can be unlocked into
 3) SPV requirement means the lock transaction needs to be able to be created without any CC signing
 
 The opreturn will be used to store the name of the rewards plan and all funding and locked funds with the same plan will use the same pool of rewards. plan names will be limited to 8 chars and encoded into a uint64_t.
 
 The initial funding transaction will have all the parameters for the rewards plan encoded in the vouts. Additional fundings will just increase the available CC utxo for the rewards.
 
 Locks wont have any CC vins, but will send to the RewardsCCaddress, with the plan stringbits in the opreturn. vout1 will have the unlock address and no other destination is valid.
 
 Unlock does a CC spend to the vout1 address


[25-Jul-18 07:35 AM] jl777c#5810
######


[25-Jul-18 07:35 AM] jl777c#5810
a voting CC that uses coins locked by a different CC would get voting, but voting on what? need details


[25-Jul-18 07:36 AM] siu#3920
aah, so a masternode can just be a different rewards plan


[25-Jul-18 07:36 AM] siu#3920
clever


[25-Jul-18 07:37 AM] jl777c#5810
so all the craze over masternodes are just locking coins to get rewards?


[25-Jul-18 07:37 AM] siu#3920
and voting


[25-Jul-18 07:37 AM] jl777c#5810
like the 5% APR


[25-Jul-18 07:37 AM] jl777c#5810
voting on what?


[25-Jul-18 07:37 AM] siu#3920
on project proposals submitted


[25-Jul-18 07:38 AM] siu#3920
im not sure how this is implemented though


[25-Jul-18 07:39 AM] siu#3920
@SHossain i placed another bid


[25-Jul-18 07:39 AM] SHossain#0007
filling üòÉ


[25-Jul-18 07:39 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenfillbid c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 45b3f7874fc4a2699729a9792bc7679f6b5f11035a29ad9f661425b19534dd1d 10
recvunitprice 1.0000000000000000 >= 1.0000000000000000 unitprice, new unitprice 1.0000000000000000
remaining 990 -> origpubkey
{
  "result": "success",
  "hex": "0100000003b46fb06b731e7b68bbcfaa2e90035389e92e48abd595c18a9d4e65274d2dac880200000049483045022100901abdad137d43201e5596104f8a3ad6ca28d92f4259a74ad1228ec94d5469a002206cf992359449faef3acde1b7f44612c16983c25dd5e90a71640797bac022652501ffffffff1ddd3495b12514669fad295a03115f6b9f67c72b79a9299769a2c44f87f7b345000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281404ce4d9aa9de47f31eecd0efff2674587875aab9f2071068b72fd9cc12ea8d6a578b736c63054bb631524f1780dce45d102933f3ed58f476ef8315d3360faefa2a100af038001e3a10001fffffffffcec3f8b7e76d87fdf4f962876ce68a3a0e2e440d7d722ad59073201325a09cc000000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc8140de7e99512b11a402657aabd537db822a1d7fe4ae2f1fb843565a56effab5b0de4816f028e24d60877bfeeb8b066805cc89926be05cccbf02c42441c32b0134c0a100af038001e3a10001ffffffff06001edc0c17000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00ca9a3b00000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0a00000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc9586010000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc1892486cb2430000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce342c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59de0300000000000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000"
}
```


[25-Jul-18 07:40 AM] SHossain#0007
sendrawtransaction output:
```
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 1000.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
ValidateAssetRemainder: totalunits 1000 != 10 (remaining_price 0 + 10 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx 45b3f7874fc4a2699729a9792bc7679f6b5f11035a29ad9f661425b19534dd1d
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 1000.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
ValidateAssetRemainder: totalunits 1000 != 10 (remaining_price 0 + 10 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx 45b3f7874fc4a2699729a9792bc7679f6b5f11035a29ad9f661425b19534dd1d
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[25-Jul-18 07:42 AM] jl777c#5810
thank's! duplicated


[25-Jul-18 07:42 AM] jl777c#5810
see how easy it is to find and report bugs


[25-Jul-18 07:42 AM] jl777c#5810
this is what we need. this is all brand new untested code in complex logic


[25-Jul-18 07:42 AM] jl777c#5810
investigating


[25-Jul-18 07:42 AM] SHossain#0007
cool!


[25-Jul-18 07:42 AM] siu#3920
nice


[25-Jul-18 07:43 AM] SHossain#0007
@siu we are back in business üòé

{Reactions}
üòé 

[25-Jul-18 07:43 AM] siu#3920
nice


[25-Jul-18 07:43 AM] siu#3920
i do think a call to get the tokenid of the tokens i have balance of is needed


[25-Jul-18 07:44 AM] siu#3920
maybe instead of `tokenbalance` we also need `tokenbalances`


[25-Jul-18 07:44 AM] jl777c#5810
what is needed is a way to get all the assets ever created


[25-Jul-18 07:45 AM] jl777c#5810
then for each one you can check your balance


[25-Jul-18 07:45 AM] jl777c#5810
for now plz dont forget the assets you created


[25-Jul-18 07:45 AM] siu#3920
ok


[25-Jul-18 07:49 AM] SHossain#0007
i'll keep a list of created tokens by me as well


[25-Jul-18 07:52 AM] SHossain#0007
@here if you created a token with this new source and testing, please post it here or comment in this spreadsheet. i'll add them up and keep the list updated
https://docs.google.com/spreadsheets/d/1mggY4TfDxaj1HnabPFeMxwkPTxZQENMjx2yowiy441g/edit?usp=sharing

{Embed}
https://docs.google.com/spreadsheets/d/1mggY4TfDxaj1HnabPFeMxwkPTxZQENMjx2yowiy441g/edit?usp=sharing
Token List
Sheet1


 User, Token ID
 Siu, c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59
 SHossain, e4895451cae47f8f10303c3594888b739f044f7c778623318d877e8df365cc66


[25-Jul-18 07:52 AM] siu#3920
thanks


[25-Jul-18 07:54 AM] jl777c#5810
pushed fix


[25-Jul-18 07:55 AM] SHossain#0007
`./komodo-cli -ac_name=ATEST tokenorders`  & `./komodo-cli -ac_name=ATEST tokenorders c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59` giving me same result. according to my understanding the latter should display orders for only c5b... token


[25-Jul-18 07:56 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/471692100556029955/Screenshot_from_2018-07-25_15-55-35.png


[25-Jul-18 07:57 AM] SHossain#0007
this output is from the command `tokenorders [tokenid]`


[25-Jul-18 07:57 AM] siu#3920
rebuilding


[25-Jul-18 07:58 AM] SHossain#0007
@jl777c is the fix in jl777 branch?


[25-Jul-18 07:58 AM] SHossain#0007
i was using dev


[25-Jul-18 07:58 AM] jl777c#5810
duplicated tokenorders bug. you are on a roll!


[25-Jul-18 07:58 AM] jl777c#5810
yes, only updating jl777 as you are finding a bug an hour


[25-Jul-18 07:59 AM] SHossain#0007
ok. switching


[25-Jul-18 08:01 AM] jl777c#5810
pushed fix for tokenorders <assetid>


[25-Jul-18 08:02 AM] SHossain#0007
haha. look like your previous fix worked
```
$ ./komodo-cli -ac_name=ATEST tokenfillbid c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d 10
recvunitprice 1.0000000000000000 >= 1.0000000000000000 unitprice, new unitprice 1.0000000000000000
remaining 90 -> origpubkey
{
  "result": "success",
  "hex": "0100000003b46fb06b731e7b68bbcfaa2e90035389e92e48abd595c18a9d4e65274d2dac880200000049483045022100ccd98db21b5c1c22caaf20aa6ed1c89f60f2af3caa4bceb53f6269376173d9a902201c9ad4fa6584d2c22dae440df4f512b01087187ab50d0c77952e0feeb3cb058b01ffffffff1d02d36f98a46a688361260d52b40cc249716100e14fb65594d5b71bc0d8ab9d000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140fdf06f2d696df4c6baeeb15c801b12e6ca8390b97b6f5c9be57297460799bf547366923a16d6066cb49d8181d270ab304e2280e97fe5ec1abcc0aa3eaebf72eda100af038001e3a10001fffffffffcec3f8b7e76d87fdf4f962876ce68a3a0e2e440d7d722ad59073201325a09cc000000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc81400b2c4920e2bf716403a6e38361be586be3356457e291ac976a5c6ff1fadfd2ba0f3dd7c10319ad0d9143d9ee503c4c42f2b88626107b0275725e5d6ac919eab7a100af038001e3a10001ffffffff06001a711802000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00ca9a3b00000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0a00000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc9586010000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc1892486cb2430000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce342c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b595a0000000000000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000"
}
```


[25-Jul-18 08:03 AM] SHossain#0007
sendrawtransaction output:
```
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 100.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
recvunitprice 1.0000000000000000 >= 1.0000000000000000 unitprice, new unitprice 1.0000000000000000
fillbuy validated
2ecc3f6867d1eb20adda4424bee768d7b9bb0b8e104f4d16f76e9387e104f5f9
```


[25-Jul-18 08:03 AM] SHossain#0007
@siu can you please confirm if it was your order?


[25-Jul-18 08:03 AM] SHossain#0007
in the meantime, i'll update to the latest source


[25-Jul-18 08:05 AM] siu#3920
dit it confirm?


[25-Jul-18 08:06 AM] jl777c#5810
it wont confirm until the mining node updates


[25-Jul-18 08:06 AM] siu#3920
im restarting tonew version


[25-Jul-18 08:06 AM] SHossain#0007
@jl777c shall i post `decoderawtransaction` output as well?


[25-Jul-18 08:07 AM] jl777c#5810
for what?


[25-Jul-18 08:07 AM] jl777c#5810
given raw hex I can decode it


[25-Jul-18 08:07 AM] SHossain#0007
ok. fair enough


[25-Jul-18 08:08 AM] jl777c#5810
so if I have the rpc command and the rawhex, I can troubleshoot and usually immediately reproduce the error


[25-Jul-18 08:08 AM] jl777c#5810
given a report "xyz didnt work" that gives me no data


[25-Jul-18 08:09 AM] SHossain#0007
my balance is showing 0 now


[25-Jul-18 08:10 AM] SHossain#0007
this was displayed during the startup call
```
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 100.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
recvunitprice 1.0000000000000000 >= 1.0000000000000000 unitprice, new unitprice 1.0000000000000000
```


[25-Jul-18 08:10 AM] siu#3920
i dont see a change in balance on my side


[25-Jul-18 08:11 AM] siu#3920
```{
    "funcid": "b",
    "txid": "9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d",
    "vout": 0,
    "amount": 100,
    "bidamount": 100,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": 100,
    "price": 1
  },
```


[25-Jul-18 08:11 AM] siu#3920
also order seems to still be live


[25-Jul-18 08:11 AM] SHossain#0007
token order now showing data for specific tokenid
```
$ ./komodo-cli -ac_name=ATEST tokenorders c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59
[
  {
    "funcid": "B",
    "txid": "b9d305e9b6a82e715efce9b6244cc15fef131baf1893a7eb45b199c23b3fb806",
    "vout": 0,
    "amount": 0,
    "bidamount": 0,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59"
  },
  {
    "funcid": "b",
    "txid": "9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d",
    "vout": 0,
    "amount": 100,
    "bidamount": 100,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": 100,
    "price": 1
  },
  {
    "funcid": "b",
    "txid": "45b3f7874fc4a2699729a9792bc7679f6b5f11035a29ad9f661425b19534dd1d",
    "vout": 0,
    "amount": 1000,
    "bidamount": 1000,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": 1000,
    "price": 1
  },
  {
    "funcid": "b",
    "txid": "a8d60a3ce429ccb885ad445e7a4534130a35d2424d1883c6513d0f4da2fe9a92",
    "vout": 0,
    "amount": 150,
    "bidamount": 150,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": 100,
    "price": 1.5
  }
]
```


[25-Jul-18 08:12 AM] SHossain#0007
time to update https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenorders.md#show-orders-for-specific-token

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenorders.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[25-Jul-18 08:12 AM] jl777c#5810
did the 'B' transaction confirm?


[25-Jul-18 08:13 AM] siu#3920
i have no transactions regarding this swap


[25-Jul-18 08:15 AM] SHossain#0007
```
  {
    "account": "",
    "address": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ",
    "category": "receive",
    "amount": 10.00000000,
    "vout": 1,
    "confirmations": 0,
    "txid": "2ecc3f6867d1eb20adda4424bee768d7b9bb0b8e104f4d16f76e9387e104f5f9",
    "walletconflicts": [
    ],
    "time": 1532530945,
    "timereceived": 1532530945,
    "vjoinsplit": [
    ],
    "size": 799
  },
```


[25-Jul-18 08:16 AM] SHossain#0007
0 confirmation still


[25-Jul-18 08:17 AM] jl777c#5810
until it is confirmed, it isnt confirmed


[25-Jul-18 08:17 AM] jl777c#5810
i hope that makes sense


[25-Jul-18 08:17 AM] jl777c#5810
balances wont change until confirmed


[25-Jul-18 08:18 AM] SHossain#0007
right. this is the reason, i have 0 balance
```
  {
    "account": "",
    "address": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ",
    "category": "send",
    "amount": -744335.99935000,
    "vout": 4,
    "fee": 100.00089999,
    "confirmations": 0,
    "txid": "2ecc3f6867d1eb20adda4424bee768d7b9bb0b8e104f4d16f76e9387e104f5f9",
    "walletconflicts": [
    ],
    "time": 1532530945,
    "timereceived": 1532530945,
    "vjoinsplit": [
    ],
    "size": 799
  }
```


[25-Jul-18 08:19 AM] siu#3920
ill setgenerate true


[25-Jul-18 08:22 AM] SHossain#0007
blocks are being generated fine


[25-Jul-18 08:22 AM] siu#3920
still unconfirmed?


[25-Jul-18 08:23 AM] SHossain#0007
yes


[25-Jul-18 08:23 AM] SHossain#0007
still 0


[25-Jul-18 08:23 AM] jl777c#5810
mining node needs to be updated


[25-Jul-18 08:23 AM] siu#3920
mine is mining and is in latest


[25-Jul-18 08:24 AM] jl777c#5810
is the txid in the mempool


[25-Jul-18 08:24 AM] jl777c#5810
if not broadcastit again


[25-Jul-18 08:24 AM] SHossain#0007
$ ./komodo-cli -ac_name=ATEST getmempoolinfo
{
  "size": 1,
  "bytes": 799,
  "usage": 2000
}


[25-Jul-18 08:24 AM] jl777c#5810
getrawmempool


[25-Jul-18 08:25 AM] siu#3920
./komodo-cli -ac_name=ATEST getrawmempool
[
]


[25-Jul-18 08:25 AM] SHossain#0007
$ ./komodo-cli -ac_name=ATEST getrawmempool
[
  "2ecc3f6867d1eb20adda4424bee768d7b9bb0b8e104f4d16f76e9387e104f5f9"
]


[25-Jul-18 08:25 AM] SHossain#0007
re-broadcasting


[25-Jul-18 08:25 AM] jl777c#5810
it needs to be in the mempool of the mining node


[25-Jul-18 08:27 AM] siu#3920
i see new updates, will rebuild


[25-Jul-18 08:27 AM] SHossain#0007
if i use `setgenerate true 1` in the same node, any possibility to be mined by my node?


[25-Jul-18 08:32 AM] jl777c#5810
of course, that should work


[25-Jul-18 08:34 AM] SHossain#0007
started mining


[25-Jul-18 08:36 AM] SHossain#0007
@siu please check now. it is no longer in my mempool


[25-Jul-18 08:37 AM] siu#3920
no change yet


[25-Jul-18 08:37 AM] SHossain#0007
tx is confirmed. my balance came back


[25-Jul-18 08:38 AM] SHossain#0007
```
  {
    "account": "",
    "address": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "category": "send",
    "amount": -0.00000010,
    "vout": 2,
    "fee": 100.00089999,
    "confirmations": 3,
    "blockhash": "0087ab76aefcc3049572f9c52ff027abfbbc7def63e44a4531b6cee86991d876",
    "blockindex": 1,
    "blocktime": 1532533028,
    "expiryheight": 0,
    "txid": "2ecc3f6867d1eb20adda4424bee768d7b9bb0b8e104f4d16f76e9387e104f5f9",
    "walletconflicts": [
    ],
    "time": 1532530945,
    "timereceived": 1532530945,
    "vjoinsplit": [
    ],
    "size": 799
  },```


[25-Jul-18 08:38 AM] siu#3920
```AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 100.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
ValidateAssetRemainder: totalunits 100 != 10 (remaining_price 0 + 10 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx 9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 100.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
ValidateAssetRemainder: totalunits 100 != 10 (remaining_price 0 + 10 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx 9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 100.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
ValidateAssetRemainder: totalunits 100 != 10 (remaining_price 0 + 10 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx 9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d
```


[25-Jul-18 08:38 AM] siu#3920
```AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 100.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
ValidateAssetRemainder: totalunits 100 != 10 (remaining_price 0 + 10 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx 9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 100.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
ValidateAssetRemainder: totalunits 100 != 10 (remaining_price 0 + 10 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx 9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 100.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
ValidateAssetRemainder: totalunits 100 != 10 (remaining_price 0 + 10 paidunits)
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillbuy spending tx 9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d
AssetValidate (B)
AssetValidate (B)
vin2 99999, vout2 10, vout3 99989, Got 100.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
```


[25-Jul-18 08:40 AM] SHossain#0007
re-broadcasting the same hex shwos me `transaction already in block chain`


[25-Jul-18 08:40 AM] SHossain#0007
let me issue another one


[25-Jul-18 08:41 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST tokenorders
[
]
```


[25-Jul-18 08:41 AM] SHossain#0007
orderbook gone or just my end?


[25-Jul-18 08:42 AM] jl777c#5810
no tokenorders


[25-Jul-18 08:43 AM] SHossain#0007
ok


[25-Jul-18 08:43 AM] SHossain#0007
@siu please put another order.


[25-Jul-18 08:43 AM] siu#3920
just your end


[25-Jul-18 08:44 AM] jl777c#5810
was the old order filled completely? if not the 'B' order should still be in the orderbook


[25-Jul-18 08:44 AM] SHossain#0007
i tried filling partial


[25-Jul-18 08:44 AM] SHossain#0007
order was for 1000, i did 10


[25-Jul-18 08:44 AM] siu#3920
```{
    "funcid": "B",
    "txid": "b9d305e9b6a82e715efce9b6244cc15fef131baf1893a7eb45b199c23b3fb806",
    "vout": 0,
    "amount": 0,
    "bidamount": 0,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59"
  },
  {
    "funcid": "b",
    "txid": "9dabd8c01bb7d59455b64fe100617149c20cb4520d266183686aa4986fd3021d",
    "vout": 0,
    "amount": 100,
    "bidamount": 100,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": 100,
    "price": 1
  },```


[25-Jul-18 08:44 AM] siu#3920
what is b vs B?


[25-Jul-18 08:45 AM] SHossain#0007
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenorders.md#displaying-the-orderbook

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenorders.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[25-Jul-18 08:45 AM] SHossain#0007
'b' is the offer, 'B' is the fill


[25-Jul-18 08:45 AM] jl777c#5810
was the 'B' (fill) outputs sane?


[25-Jul-18 08:45 AM] siu#3920
100 at 1


[25-Jul-18 08:45 AM] siu#3920
yes


[25-Jul-18 08:46 AM] SHossain#0007
i have more balance now `"balance": 1044345.99945000`


[25-Jul-18 08:47 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST getblockhash 2450
00ab2bd7c85d05670ecaac1c99f5cdeb54da9243fd545b6ce645a6aaa5c62f0c```


[25-Jul-18 08:47 AM] jl777c#5810
that is expected, isnt it?


[25-Jul-18 08:47 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59
{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 999900001
}
```


[25-Jul-18 08:47 AM] siu#3920
but my balance is exactly the same after sending you 99999


[25-Jul-18 08:48 AM] jl777c#5810
are you 100% sure?


[25-Jul-18 08:49 AM] jl777c#5810
999900001 is exactly 1000000000 - 99999


[25-Jul-18 08:49 AM] jl777c#5810
assets are denominated in satoshis


[25-Jul-18 08:49 AM] SHossain#0007
my token balance looks ok
```
$ ./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc
{
  "result": "success",
  "CCaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 99989
}
```


[25-Jul-18 08:49 AM] SHossain#0007
i sold 10 to you


[25-Jul-18 08:50 AM] SHossain#0007
@siu also use your pubkey after the tokenid to specifically show that pubkey's balance


[25-Jul-18 08:51 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27
{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 999900001
}
```


[25-Jul-18 08:53 AM] SHossain#0007
i see different data than yours using your pubkey
```
$ ./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27
{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 999900011
}
```


[25-Jul-18 08:53 AM] SHossain#0007
post your latest block hash


[25-Jul-18 08:53 AM] SHossain#0007
are you using jl777 branch?


[25-Jul-18 08:53 AM] jl777c#5810
999900011 is what I get


[25-Jul-18 08:56 AM] siu#3920
./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27
{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 999900001
}


[25-Jul-18 08:56 AM] siu#3920
i just executed


[25-Jul-18 08:57 AM] SHossain#0007
which branch?


[25-Jul-18 08:57 AM] siu#3920
dev


[25-Jul-18 08:57 AM] SHossain#0007
jl777


[25-Jul-18 08:57 AM] SHossain#0007
use ^^


[25-Jul-18 08:57 AM] siu#3920
ok


[25-Jul-18 08:57 AM] siu#3920
i thought we moved to dev


[25-Jul-18 08:57 AM] SHossain#0007
changed within the last couple of hours


[25-Jul-18 08:58 AM] siu#3920
rebuilding


[25-Jul-18 09:01 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27
{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 999900011
}
```


[25-Jul-18 09:01 AM] siu#3920
now


[25-Jul-18 09:01 AM] siu#3920
perfect


[25-Jul-18 09:02 AM] SHossain#0007
haha


[25-Jul-18 09:02 AM] SHossain#0007
nice


[25-Jul-18 09:03 AM] siu#3920
so it was a branch change


[25-Jul-18 09:03 AM] SHossain#0007
i also have this RPC call documented https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenbalance.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenbalance.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[25-Jul-18 09:03 AM] jl777c#5810
so partial fill has first success


[25-Jul-18 09:03 AM] siu#3920
yes


[25-Jul-18 09:03 AM] jl777c#5810
and all balances are good?


[25-Jul-18 09:03 AM] siu#3920
can you now place a bid so i can fill it?


[25-Jul-18 09:03 AM] siu#3920
yes


[25-Jul-18 09:03 AM] SHossain#0007
yep. balances looks good


[25-Jul-18 09:03 AM] SHossain#0007
no orderbook for me


[25-Jul-18 09:03 AM] SHossain#0007
do you see orderbook, @siu?


[25-Jul-18 09:03 AM] jl777c#5810
but the partial fill should have still put something in the orderbook


[25-Jul-18 09:03 AM] jl777c#5810
so there is missing orderbook


[25-Jul-18 09:04 AM] SHossain#0007
yes


[25-Jul-18 09:04 AM] siu#3920
./komodo-cli -ac_name=ATEST tokenorders
[
]


[25-Jul-18 09:04 AM] siu#3920
nope


[25-Jul-18 09:04 AM] siu#3920
no orderbook now


[25-Jul-18 09:04 AM] SHossain#0007
please put an order again


[25-Jul-18 09:04 AM] jl777c#5810
no


[25-Jul-18 09:04 AM] jl777c#5810
plz make a new token


[25-Jul-18 09:04 AM] siu#3920
can you put one now?


[25-Jul-18 09:04 AM] siu#3920
ohh ok


[25-Jul-18 09:04 AM] siu#3920
ill make one


[25-Jul-18 09:04 AM] jl777c#5810
I want to fix the missing orderbook problem


[25-Jul-18 09:04 AM] jl777c#5810
what was the txid for the 'B' fillbid?


[25-Jul-18 09:05 AM] SHossain#0007
this one? `2ecc3f6867d1eb20adda4424bee768d7b9bb0b8e104f4d16f76e9387e104f5f9`


[25-Jul-18 09:05 AM] jl777c#5810
that is the last one that was a partial fill?


[25-Jul-18 09:05 AM] SHossain#0007
yes


[25-Jul-18 09:05 AM] jl777c#5810
i will find where it is hiding


[25-Jul-18 09:06 AM] jl777c#5810
plz make a new token for next bug

{Reactions}
üòÉ 

[25-Jul-18 09:06 AM] SHossain#0007
sure


[25-Jul-18 09:07 AM] SHossain#0007
new token `4908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee3`


[25-Jul-18 09:09 AM] siu#3920
f4131ee56a47273195a899f60a187862aa8e39a974b5a19d860e2fe69f60242f


[25-Jul-18 09:09 AM] siu#3920
i did one too :p


[25-Jul-18 09:11 AM] SHossain#0007
suddenly in my console `no nodes, break`


[25-Jul-18 09:11 AM] jl777c#5810
pushed fix for missing orderbook


[25-Jul-18 09:11 AM] SHossain#0007
updating


[25-Jul-18 09:11 AM] siu#3920
updating


[25-Jul-18 09:13 AM] siu#3920
```At global scope:
cc1plus: error: unrecognized command line option ‚Äò-Wno-builtin-declaration-mismatch‚Äô [-Werror]
cc1plus: all warnings being treated as errors
Makefile:3905: recipe for target 'cc/libbitcoin_wallet_a-CCassetstx.o' failed
make[2]: *** [cc/libbitcoin_wallet_a-CCassetstx.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f cc/.deps/libbitcoin_server_a-rewards.Tpo cc/.deps/libbitcoin_server_a-rewards.Po
make[2]: Leaving directory '/home/siu/komodo/src'
Makefile:4482: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/siu/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
```


[25-Jul-18 09:13 AM] siu#3920
build failed


[25-Jul-18 09:14 AM] jl777c#5810
fixed 35 seconds ago


[25-Jul-18 09:14 AM] jl777c#5810
i am seeing 0 values in the orderbook now, at least it is there, investigating


[25-Jul-18 09:18 AM] jl777c#5810
fixed


[25-Jul-18 09:18 AM] siu#3920
i see orderbook now


[25-Jul-18 09:18 AM] siu#3920
will rebuild again


[25-Jul-18 09:18 AM] jl777c#5810
partial fill was the hardest case


[25-Jul-18 09:18 AM] jl777c#5810
but it is possible overfill or exact fill will have bugs as it uses slightly different code paths


[25-Jul-18 09:19 AM] jl777c#5810
and notice you only had to specify the bidtxid you are filling, getting funds from your utxos was automatic


[25-Jul-18 09:19 AM] jl777c#5810
and all these trades are atomic swaps!!


[25-Jul-18 09:19 AM] jl777c#5810
onchain atomic swaps are of course an easy thing, just make sure the outputs are sane


[25-Jul-18 09:26 AM] siu#3920
now im seeing the complete correct orderbook


[25-Jul-18 09:26 AM] siu#3920
@SHossain you can place an order?


[25-Jul-18 09:28 AM] SHossain#0007
yes. just give me a sec.


[25-Jul-18 09:28 AM] siu#3920
ok


[25-Jul-18 09:28 AM] SHossain#0007
@siu please jump in the meeting if you have couple of min


[25-Jul-18 09:29 AM] SHossain#0007
@jl777c be back shortly after the meeing


[25-Jul-18 09:34 AM] siu#3920
right


[25-Jul-18 09:46 AM] SHossain#0007
here is a new bid order
```
$ ./komodo-cli -ac_name=ATEST tokenbid 100 4908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee3 1
{
  "result": "success",
  "hex": "010000000163733ad3b0b9b2eb06a8d0b2de8832c9e9e2f86215d0d27bf2fd129db6992ecf0000000049483045022100f8dd512732d8eae10a10e0aa3896ebb4de23bfa50baa7c4d16b90b12f10fcd750220640e7b0981e1e1f0898db8bf474fd310fecea721653f24ae4381567cb159a47701ffffffff0300e40b5402000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00bc66fa15090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce3624908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee364000000000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
}
```


[25-Jul-18 09:46 AM] SHossain#0007
sendrawtransaction output `42a50f7fffc9e5d15fd04082e5d434803641f37e7b33b09010b525c33bae05cb`


[25-Jul-18 09:48 AM] SHossain#0007
```
Mining when blockchain might not be in sync
Mining when blockchain might not be in sync
```


[25-Jul-18 09:48 AM] SHossain#0007
```
  "blocks": 2482,
  "longestchain": 2482,
```


[25-Jul-18 09:49 AM] jl777c#5810
does it keep saying: Mining when blockchain might not be in sync


[25-Jul-18 09:49 AM] jl777c#5810
or does it stop after in sync?


[25-Jul-18 09:50 AM] SHossain#0007
it keeps going


[25-Jul-18 09:50 AM] SHossain#0007
same block 2482


[25-Jul-18 09:52 AM] jl777c#5810
let me reproduce


[25-Jul-18 09:58 AM] SHossain#0007
```
Mining when blockchain might not be in sync
Mining when blockchain might not be in sync
Mining when blockchain might not be in sync
no nodes, break
```


[25-Jul-18 09:58 AM] SHossain#0007
longest chain is now 0, also 0 connections


[25-Jul-18 10:02 AM] jl777c#5810
no connections, that is why chain not in sync..


[25-Jul-18 10:02 AM] jl777c#5810
what is your ip, I will connect to your node


[25-Jul-18 10:05 AM] SHossain#0007
i see some update. let me update first


[25-Jul-18 10:08 AM] SHossain#0007
```
  "blocks": 2482,
  "longestchain": 2482,
  "timeoffset": 0,
  "tiptime": 1532534821,
  "connections": 1,
```


[25-Jul-18 10:11 AM] jl777c#5810
does is complain about not in sync?


[25-Jul-18 10:12 AM] SHossain#0007
yes, continuously


[25-Jul-18 10:12 AM] jl777c#5810
rewardsaddfunding name fundingtxid amount
rewardsaddress [pubkey]
rewardsfund name amount APR mindays maxdays mindeposit
rewardslock name fundingtxid amount
rewardsunlock name fundingtxid [txid]
@Deleted User the rewards CC is coming together. mostly coded, but still need to add in error checks and constraints

{Reactions}
üëç (2) 

[25-Jul-18 10:12 AM] jl777c#5810
ok,let me setgenerate


[25-Jul-18 10:12 AM] jl777c#5810
duplicated


[25-Jul-18 10:12 AM] SHossain#0007
üëçüèΩ


[25-Jul-18 10:13 AM] siu#3920
./komodo-cli -ac_name=ATEST getblockhash 2482
004174239ff4301257f72cbba5bb54495358a8a6efa7d70c9650e7fcdba1d3b2


[25-Jul-18 10:13 AM] siu#3920
we are in the same chain?


[25-Jul-18 10:13 AM] SHossain#0007
@Audo @n2okpride new RPC calls ^^


[25-Jul-18 10:14 AM] Audo#5667
cool, rewards üòÉ


[25-Jul-18 10:17 AM] siu#3920
ok @SHossain filling your order now


[25-Jul-18 10:17 AM] SHossain#0007
you see my order?


[25-Jul-18 10:17 AM] jl777c#5810
rewards are not readyfor testing yet


[25-Jul-18 10:17 AM] siu#3920
``` {
    "funcid": "b",
    "txid": "3db9e264ea295a34c6798caf458c65a2a87ca0f50fd0818207feaf87ad8d620b",
    "vout": 0,
    "amount": 100,
    "bidamount": 100,
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "4908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee3",
    "totalrequired": 100,
    "price": 1
  },
```?


[25-Jul-18 10:17 AM] SHossain#0007
yes


[25-Jul-18 10:17 AM] jl777c#5810
fixed the mining warning, but it is just a cosmetic thing as it was still mining before, just a bit slower


[25-Jul-18 10:18 AM] SHossain#0007
updating


[25-Jul-18 10:19 AM] SHossain#0007
@siu please update and we can test the latest


[25-Jul-18 10:19 AM] jl777c#5810
i think things are in an "all known bugs" fixed state


[25-Jul-18 10:19 AM] siu#3920
you need to send me some tokens first


[25-Jul-18 10:20 AM] siu#3920
028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27


[25-Jul-18 10:20 AM] siu#3920
please send them here


[25-Jul-18 10:26 AM] SHossain#0007
```
AssetValidate (t)
vin1 1000000000, vout0 100000, vout1 999900000, transfer validated 10.00000000 -> 10.00000000
abf008c57e82ff68983b8e1de4663132facce04272b896277a8b741b1a6af9f3
```


[25-Jul-18 10:26 AM] SHossain#0007
sent


[25-Jul-18 10:26 AM] SHossain#0007
tx confirmed


[25-Jul-18 10:27 AM] Alright#0419
little late to the party here üòÖ


[25-Jul-18 10:28 AM] Alright#0419
are we still on this chain 
UpdateTip: new best=008baeef0fae1c489094095512a972955984b6a82919de5e27509a5ef1c0babe  height=2554


[25-Jul-18 10:28 AM] SHossain#0007
it is never late. the party never ends here


[25-Jul-18 10:32 AM] Alright#0419
Am I on a fork?


[25-Jul-18 10:36 AM] jl777c#5810
./c getblockhash 2502
0127cf88e4b8f5a917a69deabd8f4dc06f57c8da9cb3318ab69a80d184e463e6


[25-Jul-18 10:37 AM] jl777c#5810
yes there were 92 updates several of them hardforks. your node was left behind


[25-Jul-18 10:38 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST getblockhash 2502
0127cf88e4b8f5a917a69deabd8f4dc06f57c8da9cb3318ab69a80d184e463e6
```


[25-Jul-18 10:39 AM] Alright#0419
need a node to sync from


[25-Jul-18 10:40 AM] jl777c#5810
136.243.58.134


[25-Jul-18 10:42 AM] SHossain#0007
@Alright send me your pubkey, i will send you some`4908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee3` tokens to test


[25-Jul-18 10:44 AM] Alright#0419
-pubkey=0298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560

-pubkey=027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392


[25-Jul-18 10:44 AM] Alright#0419
or actually just send to one and I'll tokentransfer to my other


[25-Jul-18 10:45 AM] SHossain#0007
@jl777c now i'm getting this

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/471734634657480724/Screenshot_from_2018-07-25_18-44-25.png


[25-Jul-18 10:45 AM] SHossain#0007
`Mining when blockchain might not be in sync longest.2560 vs 2561`


[25-Jul-18 10:46 AM] jl777c#5810
it is a warning if the miner isnt sure you are in sync.


[25-Jul-18 10:46 AM] jl777c#5810
it does not mean error


[25-Jul-18 10:46 AM] jl777c#5810
unless it keeps printing when it shouldnt


[25-Jul-18 10:46 AM] Alright#0419
he just reorged 37 blocks?


[25-Jul-18 10:46 AM] Alright#0419
wasn't me


[25-Jul-18 10:46 AM] jl777c#5810
ATEST hwmheight.2510 vs pindex->nHeight.2473 t.1532534282 reorg.37


[25-Jul-18 10:46 AM] siu#3920
sorry... got afk for a bit


[25-Jul-18 10:46 AM] jl777c#5810
i got that too, which made it realize it wasnt in sync


[25-Jul-18 10:46 AM] SHossain#0007
```
  "blocks": 2562,
  "longestchain": 2562,
  "timeoffset": 0,
  "tiptime": 1532540719,
  "connections": 3,
```


[25-Jul-18 10:47 AM] jl777c#5810
so it was a proper warning


[25-Jul-18 10:47 AM] SHossain#0007
yes, it is gone now


[25-Jul-18 10:47 AM] jl777c#5810
my guess is that is was due to alright's node reorging the chain


[25-Jul-18 10:47 AM] Alright#0419
Nope


[25-Jul-18 10:47 AM] jl777c#5810
check some recent txids and see if they are still confirmed


[25-Jul-18 10:47 AM] Alright#0419
I deleted my chain before I synced


[25-Jul-18 10:47 AM] jl777c#5810
some other node could have had your chain


[25-Jul-18 10:47 AM] Alright#0419
deleted chainstate and blocks directories


[25-Jul-18 10:48 AM] siu#3920
./komodo-cli -ac_name=ATEST getblockhash 2564
00b8ba9fde49aba661db13ad69019ac390a6df2775b15243cf1f09f85361c3da


[25-Jul-18 10:49 AM] SHossain#0007
@jl777c yes, few recent txids has -1 confirmation
```
    "confirmations": -1,
    "txid": "ee04d02fbe43d4ab0e5751422c6f92f529bc3544cf88fece75ff5a7414269c4e",
```


[25-Jul-18 10:49 AM] siu#3920
am i in the correct chain?


[25-Jul-18 10:49 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST getblockhash 2564
00b8ba9fde49aba661db13ad69019ac390a6df2775b15243cf1f09f85361c3da
```


[25-Jul-18 10:49 AM] SHossain#0007
@siu yes


[25-Jul-18 10:49 AM] siu#3920
ok... good


[25-Jul-18 10:50 AM] jl777c#5810
yes, so what happened is the longer chain from somewhere reorged many of the tx, so dont assume a tx that was confirmed before is still confirmed


[25-Jul-18 10:50 AM] SHossain#0007
rawmempool is empty
```
$ ./komodo-cli -ac_name=ATEST getrawmempool
[
]
```


[25-Jul-18 10:51 AM] siu#3920
@SHossain did you send me tokens from `4908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee3`?


[25-Jul-18 10:51 AM] gcharang#6833
I am here too.

{Reactions}
üëçüèΩ 

[25-Jul-18 10:51 AM] SHossain#0007
yes, i sent them


[25-Jul-18 10:52 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenbalance 4908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee3
{
  "result": "success",
  "CCaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
  "tokenid": "4908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee3",
  "balance": 0
}
```


[25-Jul-18 10:52 AM] SHossain#0007
`abf008c57e82ff68983b8e1de4663132facce04272b896277a8b741b1a6af9f3`


[25-Jul-18 10:52 AM] SHossain#0007
this was the txid @siu


[25-Jul-18 10:53 AM] siu#3920
```./komodo-cli -ac_name=ATEST listtransactions | grep "abf008c57e82ff68983b8e1de4663132facce04272b896277a8b741b1a6af9f3"
```


[25-Jul-18 10:53 AM] siu#3920
doesnt show in my listtransactions


[25-Jul-18 10:54 AM] SHossain#0007
new assset time?


[25-Jul-18 10:54 AM] cipi#4502
@SHossain can you send me some of this tokens? my pubkey is 02f8113fac97b2bc6ad454a94082c2bd7799ab441454364d207013d21ac72ae00a


[25-Jul-18 10:55 AM] siu#3920
`028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27` this pubkey?


[25-Jul-18 10:55 AM] SHossain#0007
@cipi look like something is wrong on my end. don't see token balance
```
$ ./komodo-cli -ac_name=ATEST tokenbalance 4908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee3
{
  "result": "success",
  "CCaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
  "tokenid": "4908bf1257169bf30f25a49dbb416d08a58d95594721ff57fb4e29143fc1aee3",
  "balance": 0
}
```


[25-Jul-18 10:55 AM] SHossain#0007
my pubkey is `03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc` @siu


[25-Jul-18 10:55 AM] SHossain#0007
i'll restart my node


[25-Jul-18 10:56 AM] siu#3920
no, i mean mine... the pubkey you sent the tokens to


[25-Jul-18 10:56 AM] gcharang#6833
```
gcharang@qa-gcharang1:~/komodo/src$ ./komodo-cli -ac_name=ATEST tokenbalance c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59
{
  "result": "success",
  "CCaddress": "RHLWEaERnDjuxtfB4fFxfTcPyjfcPftcZm",
  "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "balance": 0
}
```
token balance 0 for this token too


[25-Jul-18 10:57 AM] cipi#4502
@SHossain you posted this a while ago
```./komodo-cli -ac_name=ATEST getblockhash 2502
0127cf88e4b8f5a917a69deabd8f4dc06f57c8da9cb3318ab69a80d184e463e6```
but i get this: 005f24f5f7dc1b5fab7618e4511c1c46b8604f105b20cd74daf1205b7f070ebd


[25-Jul-18 10:57 AM] jl777c#5810
yes the chain got reorged


[25-Jul-18 10:57 AM] jl777c#5810
./komodo-cli -ac_name=ATEST getblockhash 2502
005f24f5f7dc1b5fab7618e4511c1c46b8604f105b20cd74daf1205b7f070ebd


[25-Jul-18 10:57 AM] siu#3920
resync


[25-Jul-18 10:57 AM] SHossain#0007
@siu yes, to your pubkey


[25-Jul-18 10:57 AM] SHossain#0007
i have 2577


[25-Jul-18 10:58 AM] siu#3920
./komodo-cli -ac_name=ATEST getblockhash 2502
005f24f5f7dc1b5fab7618e4511c1c46b8604f105b20cd74daf1205b7f070ebd


[25-Jul-18 10:58 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST getblockhash 2502
005f24f5f7dc1b5fab7618e4511c1c46b8604f105b20cd74daf1205b7f070ebd
```


[25-Jul-18 10:58 AM] SHossain#0007
```
  "blocks": 2577,
  "longestchain": 2577,
  "timeoffset": 0,
  "tiptime": 1532541406,
  "connections": 4,
  "proxy": "",
```


[25-Jul-18 10:58 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST getblockhash 2577
014f6f5d6dbc5f203ce952f3be333740cb5171b41cc8059624c6028529dede22
```


[25-Jul-18 10:58 AM] Alright#0419
same as SHo here


[25-Jul-18 10:59 AM] cipi#4502
here too... so we are all in sync

{Reactions}
üëç 

[25-Jul-18 10:59 AM] Alright#0419
Oh same thing as before, same chain but some nodes stopped syncing


[25-Jul-18 11:01 AM] Alright#0419
@SHossain if you sent me, c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59, I didn't get it


[25-Jul-18 11:02 AM] SHossain#0007
i couldn't. didin't have token balance showing


[25-Jul-18 11:03 AM] SHossain#0007
```
  {
    "account": "",
    "address": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ",
    "category": "send",
    "amount": -99889.99990000,
    "vout": 1,
    "fee": -0.00010000,
    "confirmations": -1,
    "txid": "ee04d02fbe43d4ab0e5751422c6f92f529bc3544cf88fece75ff5a7414269c4e",
    "walletconflicts": [
    ],
    "time": 1532540513,
    "timereceived": 1532540513,
    "vjoinsplit": [
    ],
    "size": 313
  },
  {
    "account": "",
    "address": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
    "category": "send",
    "amount": -110.00000000,
    "vout": 0,
    "fee": -0.00010000,
    "confirmations": -1,
    "txid": "ee04d02fbe43d4ab0e5751422c6f92f529bc3544cf88fece75ff5a7414269c4e",
    "walletconflicts": [
    ],
    "time": 1532540513,
    "timereceived": 1532540513,
    "vjoinsplit": [
    ],
    "size": 313
  },
```


[25-Jul-18 11:03 AM] SHossain#0007
i have these 2 txs unconfirmed


[25-Jul-18 11:04 AM] Alright#0419
nothing in my mempool


[25-Jul-18 11:04 AM] SHossain#0007
token balance showing 0


[25-Jul-18 11:05 AM] jl777c#5810
rebroadcast the rawtx


[25-Jul-18 11:05 AM] jl777c#5810
or just make new tokens


[25-Jul-18 11:05 AM] jl777c#5810
if you restart, it might rebroadcast the valid tx automatic


[25-Jul-18 11:06 AM] SHossain#0007
i restarted. didn't help. will create new tokens


[25-Jul-18 11:06 AM] gcharang#6833
add pubkeys in the doc too: https://docs.google.com/spreadsheets/d/1mggY4TfDxaj1HnabPFeMxwkPTxZQENMjx2yowiy441g/edit#gid=0

{Embed}
https://docs.google.com/spreadsheets/d/1mggY4TfDxaj1HnabPFeMxwkPTxZQENMjx2yowiy441g/edit
Token List
Sheet1


 User, Token ID, pubkey
 Siu, c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59
 f4131ee56a47273195a899f60a187862aa8e39a974b5a19d860e2fe69f60242f
 SHossain, e4895451cae47f8f10303c3594888b739f044f7c778623318d877e8df365cc66
 4908bf1257169bf30f25a49dbb416...
https://images-ext-1.discordapp.net/external/Qd4-WMYAKNDNuYdPvyssWmo9yQukwM3LNPiN-iWiaLI/https/lh6.googleusercontent.com/0AA2j8VdC-1p7mp-QZecmlzcoj7taksxjs5MNxfzCzZW2thObhfN18Aq2fzwUMVbk2WinQ%3Dw1200-h630-p


[25-Jul-18 11:06 AM] jl777c#5810
the dangers of a weakly secured chain


[25-Jul-18 11:06 AM] SHossain#0007
@gcharang please collect the pubkey from here and add it in the sheet.


[25-Jul-18 11:07 AM] SHossain#0007
i'll send to everyone once i have the new tokens


[25-Jul-18 11:07 AM] siu#3920
new token 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e


[25-Jul-18 11:08 AM] SHossain#0007
@siu in this case, please send to everyone and put few orders. we will try to fill


[25-Jul-18 11:09 AM] siu#3920
please post your pubkeys here


[25-Jul-18 11:10 AM] SHossain#0007
```
03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc
024ce12f3423345350d8535e402803da30abee3c2941840b5002bf05e88b7f6e2d
02f8113fac97b2bc6ad454a94082c2bd7799ab441454364d207013d21ac72ae00a
0298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560
```


[25-Jul-18 11:10 AM] siu#3920
e6d319b48bf20738daf481af7c57ab43137d3c2393d6b46c546eb9dc4741e355


[25-Jul-18 11:11 AM] siu#3920
```./komodo-cli -ac_name=ATEST sendrawtransaction 01000000021f3378ab04c907dd346fd97525b3dfe9cb202735391290c7bb17bf73475054ca0000000049483045022100c4142bfbf9477e05955cc68cd10a2c757ac4c47ef9ede3c96fc4cdb6e5e0d27b02205d227fd3fae5666e6f6d7019e0625e43fa6057261ade46239bc69ef9c0f5faa301ffffffff5e4a12d64e80f5ec1ecff1eaf994978574b4c179f33246b6a0830aae4e011792000000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2781408f2328366cbc71eff08fec05738eaf8d387dfd05fc5fcce081042251e1b5468d452c7226f2e9ec5eb1766f0b0b1e6d04b6da3c5180de198c834607195d2e0ab1a100af038001e3a10001ffffffff041027000000000000302ea22c8020362775a967380d5e54673877e469a4fa912cfe4873792f9a2117a1603db92ef38103120c008203000401ccf0bc0b5402000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401ccf078724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac0000000000000000246a22e3749217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00000000
error code: -25
error message:
```


[25-Jul-18 11:11 AM] siu#3920
if someone can broadcast this


[25-Jul-18 11:12 AM] SHossain#0007
which block you have latest


[25-Jul-18 11:12 AM] siu#3920
228a32975c547431d31f5d0a8529ccb72cfe1f6d8e7d9fc8b0d7097e9284237b


[25-Jul-18 11:12 AM] SHossain#0007
"blocks": 2594,
  "longestchain": 2594,


[25-Jul-18 11:12 AM] siu#3920
no sorry that is the txid


[25-Jul-18 11:13 AM] siu#3920
blocks": 2594,
  "longestchain": 2594,


[25-Jul-18 11:13 AM] SHossain#0007
./komodo-cli -ac_name=ATEST getblockhash 2594
00c5b2b990868e6de58385f309177e1a49df79554028bebbe23cdb6f267336d5

{Reactions}
‚úÖ (2) 

[25-Jul-18 11:13 AM] siu#3920
./komodo-cli -ac_name=ATEST getblockhash 2594
00c5b2b990868e6de58385f309177e1a49df79554028bebbe23cdb6f267336d5


[25-Jul-18 11:14 AM] SHossain#0007
broadcasting the rawtx gives error


[25-Jul-18 11:14 AM] siu#3920
78eff8afd5692c3261721637c9e3cefbcad66891b051e64131c1b885938b8579


[25-Jul-18 11:14 AM] jl777c#5810
just make new tx


[25-Jul-18 11:15 AM] jl777c#5810
if any tx was dont that invalidated old tx, they are invalid now


[25-Jul-18 11:15 AM] Alright#0419
Can someone help me understand the format of this 
```
  {
    "funcid": "b",
    "txid": "a8d60a3ce429ccb885ad445e7a4534130a35d2424d1883c6513d0f4da2fe9a92",
    "vout": 0,
    "amount": 150,
    "bidamount": 150,
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": 100,
    "price": 1.5

```
Is it asking for 100 tokens for 150 ATEST?


[25-Jul-18 11:15 AM] jl777c#5810
yes


[25-Jul-18 11:15 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenbalance 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e
{
  "result": "success",
  "CCaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
  "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
  "balance": 10000
}
```


[25-Jul-18 11:15 AM] SHossain#0007
funds received


[25-Jul-18 11:15 AM] jl777c#5810
totalrequired is the number of tokens


[25-Jul-18 11:15 AM] jl777c#5810
price is ATEST per token


[25-Jul-18 11:16 AM] jl777c#5810
that is why the bidamount is 150


[25-Jul-18 11:16 AM] jl777c#5810
and that 150 is locked so you know the funds are there


[25-Jul-18 11:16 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenbid 100 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1.1
{
  "result": "success",
  "hex": "01000000010094b24fc8c846335727ce552e23af15d0ab79869ec72b7c32038a2a6aeeb52c000000004847304402201050d45a89993894567a0461c6046d570946e6e68d443be365fb85331d69053b02202b477e008e5cb5046803253a64981605d0f60c1751afb4c70157d4d8a9ee67d001ffffffff0300aea68f02000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccf0cacbbe15090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce3629217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e64000000000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
}
```


[25-Jul-18 11:17 AM] SHossain#0007
`f8b1c52557bc031fbcc1ea0582d5d42a9c4702482b90e5be198de876a78eeaa5`


[25-Jul-18 11:18 AM] Alright#0419
I need some c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 sent here please -pubkey=0298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560


[25-Jul-18 11:18 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST getrawmempool
[
  "c26b152504b73f55511d36c474e032873835cb43ba2ef3a036b32e9d404eed36",
  "f8b1c52557bc031fbcc1ea0582d5d42a9c4702482b90e5be198de876a78eeaa5"
]
```


[25-Jul-18 11:19 AM] siu#3920
im sending 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e now


[25-Jul-18 11:19 AM] Alright#0419
who is owner of that google doc?


[25-Jul-18 11:19 AM] SHossain#0007
me


[25-Jul-18 11:19 AM] siu#3920
11916d4cf08876a9b2b8615dd6a9c02112d98e213ef8f1df057eb382be57af76


[25-Jul-18 11:19 AM] siu#3920
sent


[25-Jul-18 11:19 AM] Alright#0419
need you to give me edit access, just requested it


[25-Jul-18 11:20 AM] jl777c#5810
would be good to test sell


[25-Jul-18 11:20 AM] SHossain#0007
@Alright you have access


[25-Jul-18 11:20 AM] siu#3920
ill set an ask


[25-Jul-18 11:20 AM] gcharang#6833
@siu I didn't get em yet: 024ce12f3423345350d8535e402803da30abee3c2941840b5002bf05e88b7f6e2d


[25-Jul-18 11:20 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenorders 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e
[
  {
    "funcid": "b",
    "txid": "f8b1c52557bc031fbcc1ea0582d5d42a9c4702482b90e5be198de876a78eeaa5",
    "vout": 0,
    "amount": 110,
    "bidamount": 110,
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": 100,
    "price": 1.1
  }
]
```


[25-Jul-18 11:20 AM] SHossain#0007
my order is up


[25-Jul-18 11:20 AM] jl777c#5810
everyone can just make your own assets for testing


[25-Jul-18 11:21 AM] Alright#0419
trying to fill the bids they have up


[25-Jul-18 11:21 AM] siu#3920
@gcharang fbef5f5cc441123d02dd97b3d26b1ef8634581dbd633ae09eda65f50b1663861


[25-Jul-18 11:21 AM] jl777c#5810
ok, we had success with one of the bidfills, was a partial


[25-Jul-18 11:22 AM] SHossain#0007
i will have another order up soon with different price


[25-Jul-18 11:23 AM] SHossain#0007
as soon as the tx is confirmed


[25-Jul-18 11:23 AM] siu#3920
```./komodo-cli -ac_name=ATEST sendrawtransaction 01000000024c564a9b533e0c8a94d28f3236bd627f5c8f1a469da3c935f48356153754ff840000000049483045022100c36a29297c3742754c38c11a1028343cbce2f598f4d17266e48fc933ef1b894e022055addff4bc65883546fb9f7ef076b0eb987038885736c6df8b469ef74735f82001ffffffff76af57be82b37e05dff1f83e218ed91221c0a9d65d61b8b2a97688f04c6d9111010000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140e7638ae37136b6e72d5ae5b1b8e9110e6dc3b665b3138d96d1791fdd219f37b2335f7bc0fc8ffaa169dee5ce7580e9f32a99cba0611aa0c5bda120c003f2a0e7a100af038001e3a10001ffffffff04e803000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccd8430b5402000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401ccf078724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3739217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00e876481700000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000
error code: -26
error message:
18: bad-txns-inputs-spent
```


[25-Jul-18 11:24 AM] siu#3920
```./komodo-cli -ac_name=ATEST sendrawtransaction 01000000024c564a9b533e0c8a94d28f3236bd627f5c8f1a469da3c935f48356153754ff840000000049483045022100932c73e4930fd308a765e2f96719750f6dcd1d590bdd7cfcad2d68c6abc5a19b02201372a548156005a5de4c20708895bcb4329b70a8e9fe59c101006f0dd10159f101ffffffff613866b1505fa6ed09ae33d6db814563f81e6bd2b397dd023d1241c45c5feffb010000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140aff03d9e21428b8971b77b6ccfe1513cdf16cd54c5e8c74a2d05526be2a1e23311c5c8cbb5dca69376911823245826b3670ae70f4ab28fbc797db13fbbc0a925a100af038001e3a10001ffffffff04e803000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccc81c0b5402000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401ccf078724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3739217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00e876481700000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[25-Jul-18 11:24 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenask 1000 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1{
  "result": "success",
  "hex": "01000000024c564a9b533e0c8a94d28f3236bd627f5c8f1a469da3c935f48356153754ff840000000049483045022100932c73e4930fd308a765e2f96719750f6dcd1d590bdd7cfcad2d68c6abc5a19b02201372a548156005a5de4c20708895bcb4329b70a8e9fe59c101006f0dd10159f101ffffffff613866b1505fa6ed09ae33d6db814563f81e6bd2b397dd023d1241c45c5feffb010000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140aff03d9e21428b8971b77b6ccfe1513cdf16cd54c5e8c74a2d05526be2a1e23311c5c8cbb5dca69376911823245826b3670ae70f4ab28fbc797db13fbbc0a925a100af038001e3a10001ffffffff04e803000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccc81c0b5402000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401ccf078724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3739217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00e876481700000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000"
}
```


[25-Jul-18 11:24 AM] SHossain#0007
probably, wait for the previous one to confirm before issuing the call again?


[25-Jul-18 11:24 AM] SHossain#0007
check `./komodo-cli -ac_name=ATEST getrawmempool`


[25-Jul-18 11:24 AM] siu#3920
OK


[25-Jul-18 11:25 AM] SHossain#0007
```
[
  {
    "funcid": "b",
    "txid": "f8b1c52557bc031fbcc1ea0582d5d42a9c4702482b90e5be198de876a78eeaa5",
    "vout": 0,
    "amount": 110,
    "bidamount": 110,
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": 100,
    "price": 1.1
  },
  {
    "funcid": "b",
    "txid": "297dc78c5165124a1b26bfea48f2f2d5e1d21152442b5bf89540d4e728249ca9",
    "vout": 0,
    "amount": 90,
    "bidamount": 90,
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": 100,
    "price": 0.9
  }
]
```


[25-Jul-18 11:25 AM] siu#3920
./komodo-cli -ac_name=ATEST getrawmempool
[
]


[25-Jul-18 11:25 AM] SHossain#0007
2 of my orders are up


[25-Jul-18 11:25 AM] SHossain#0007
check your balance siu


[25-Jul-18 11:25 AM] SHossain#0007
or list transactions and check confirm


[25-Jul-18 11:26 AM] siu#3920
same issue on my side ```./komodo-cli -ac_name=ATEST tokenask 1000 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1{
  "result": "success",
```


[25-Jul-18 11:26 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=ATEST sendrawtransaction 01000000024c564a9b533e0c8a94d28f3236bd627f5c8f1a469da3c935f48356153754ff840000000049483045022100932c73e4930fd308a765e2f96719750f6dcd1d590bdd7cfcad2d68c6abc5a19b02201372a548156005a5de4c20708895bcb4329b70a8e9fe59c101006f0dd10159f101ffffffff613866b1505fa6ed09ae33d6db814563f81e6bd2b397dd023d1241c45c5feffb010000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140aff03d9e21428b8971b77b6ccfe1513cdf16cd54c5e8c74a2d05526be2a1e23311c5c8cbb5dca69376911823245826b3670ae70f4ab28fbc797db13fbbc0a925a100af038001e3a10001ffffffff04e803000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccc81c0b5402000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401ccf078724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3739217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00e876481700000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[25-Jul-18 11:26 AM] siu#3920
@jl777c can you reproduce?


[25-Jul-18 11:27 AM] siu#3920
```AssetValidate (s)
vin1 9999950000, vout0 1000, vout1 9999949000, CC Eval EVAL_ASSETS Invalid: invalid CC vout spending tx fbef5f5cc441123d02dd97b3d26b1ef8634581dbd633ae09eda65f50b1663861```


[25-Jul-18 11:27 AM] jl777c#5810
reproduced, thanks

{Reactions}
üëç 

[25-Jul-18 11:28 AM] SHossain#0007
i have a lot of orders to fill.


[25-Jul-18 11:28 AM] SHossain#0007
actually, waiting to confirm üòõ


[25-Jul-18 11:28 AM] SHossain#0007
```
vin2 10000, vout2 10, vout3 9990, Got 90.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
recvunitprice 0.9000000000000000 >= 0.9000000000000000 unitprice, new unitprice 0.9000000000000000
fillbuy validated
```


[25-Jul-18 11:29 AM] SHossain#0007
just popped in my console


[25-Jul-18 11:29 AM] Alright#0419
What is expected behavior if 2 txs in the mempool are trying to kill the same bid/ask


[25-Jul-18 11:29 AM] siu#3920
bloodbath üòÇ


[25-Jul-18 11:29 AM] cipi#4502
yeah, i did a `tokenfillbid 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 297dc78c5165124a1b26bfea48f2f2d5e1d21152442b5bf89540d4e728249ca9 10`


[25-Jul-18 11:29 AM] siu#3920
bids seem to be working


[25-Jul-18 11:30 AM] siu#3920
asks seem to have issues


[25-Jul-18 11:30 AM] SHossain#0007
@cipi did you do partial? or full?


[25-Jul-18 11:30 AM] SHossain#0007
i have 5 orders up now


[25-Jul-18 11:30 AM] SHossain#0007
creating more with smaller amount


[25-Jul-18 11:31 AM] cipi#4502
partial... the order was with 100 and i filled 10


[25-Jul-18 11:31 AM] siu#3920
thats me


[25-Jul-18 11:31 AM] SHossain#0007
please try full order


[25-Jul-18 11:32 AM] siu#3920
94743ffd00274cea2ad0787fe4be1645a951196114d097d325dc51c647f8b624


[25-Jul-18 11:32 AM] SHossain#0007
i have orders for total 10 now up


[25-Jul-18 11:32 AM] SHossain#0007
soon will up for 1, 2


[25-Jul-18 11:33 AM] SHossain#0007
& 5


[25-Jul-18 11:33 AM] SHossain#0007
happy bid filling


[25-Jul-18 11:34 AM] CryptoFoxGaming#5228
Quick question, if cryptoconditions is language agnostic, what stops someone from making an infinite loop?


[25-Jul-18 11:34 AM] gcharang#6833
```
./komodo-cli -ac_name=ATEST tokenfillbid 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e d4e58c5467dae7e8ee7e97571c53ee837ebc9d6fc3e579608792aea50168ef8e 10
```
70057a885217266c0b5ba0c0492c4e83c73c630d87f5f7138f3d079b1bec280f


[25-Jul-18 11:34 AM] cipi#4502
ok, full worked too: `tokenfillbid 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 2c57981c9c4e4a4dfe6ed7a38b47772d874a52f72a3a333ecb3ceddb6a3e742b 10`


[25-Jul-18 11:34 AM] siu#3920
filled the 81 token order d56bf750ba19e2293b901a2a57205b798f8a20a23d993ede746cea8101d12ee1


[25-Jul-18 11:34 AM] siu#3920
``` tokenfillbid 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 2abebe5f57c9f0ddd1f05da489f927c25faf2746099928f06a50340be0fef88b 81
```


[25-Jul-18 11:35 AM] SHossain#0007
AssetValidate (B)
AssetValidate (B)
vin2 10000, vout2 10, vout3 9990, vin2 9999949990, vout2 81, vout3 9999949909, vin2 9999949990, vout2 81, vout3 9999949909, Got 11.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
vin2 10000, vout2 10, vout3 9990, recvunitprice 1.1000000000000001 >= 1.1000000000000001 unitprice, new unitprice 0.0000000000000000
fillbuy validated
Got 81.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
recvunitprice 0.9000000000000000 >= 0.9000000000000000 unitprice, new unitprice 0.9000000000000000
Got 81.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
Got 11.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
recvunitprice 0.9000000000000000 >= 0.9000000000000000 unitprice, new unitprice 0.9000000000000000
recvunitprice 1.1000000000000001 >= 1.1000000000000001 unitprice, new unitprice 0.0000000000000000
fillbuy validated
fillbuy validated


[25-Jul-18 11:35 AM] Alright#0419
@CryptoFoxGaming each contract needs to be added to the coin's daemon


[25-Jul-18 11:35 AM] SHossain#0007
can you guys try overfilling?


[25-Jul-18 11:36 AM] Alright#0419
Can you send me some of that token?


[25-Jul-18 11:36 AM] jl777c#5810
@CryptoFoxGaming nothing


[25-Jul-18 11:36 AM] SHossain#0007
it's siu's token


[25-Jul-18 11:36 AM] SHossain#0007
@Alright ^^


[25-Jul-18 11:36 AM] jl777c#5810
just like nothing prevents an infinite loop in the coin daemon. it is native contract


[25-Jul-18 11:36 AM] jl777c#5810
running at native speeds


[25-Jul-18 11:37 AM] jl777c#5810
sandboxes are for girls


[25-Jul-18 11:37 AM] siu#3920
AssetValidate (B)
vin2 9999949909, vout2 2, vout3 9999949904, inputs 99.99949909 vs 99.99949906 outputs
CC Eval EVAL_ASSETS Invalid: asset inputs != outputs spending tx e98066c29bf5c9b6177acb0c4cd68618b7ac2b5543cc21821f1c9b5d3ae6ae74
AssetValidate (B)
vin2 9999949909, vout2 2, vout3 9999949904, inputs 99.99949909 vs 99.99949906 outputs
CC Eval EVAL_ASSETS Invalid: asset inputs != outputs spending tx e98066c29bf5c9b6177acb0c4cd68618b7ac2b5543cc21821f1c9b5d3ae6ae74


[25-Jul-18 11:37 AM] siu#3920
i tried to overfill a 4 token order with 5


[25-Jul-18 11:38 AM] siu#3920
```./komodo-cli -ac_name=ATEST sendrawtransaction 010000000324b6f847c651dc25d397d014611951a94516bee47f78d02aea4c2700fd3f7494040000004847304402205f0030defc5f2d644fd23ce62e28d27987d963d7e10f24dbe4a8ee366ffa676f02204edeae2b7cb5b40a4d54f7bdf54817baa61060d56117b958ea1d2a8fc9bd942701ffffffff74aee63a5d9b1c1f8221cc43552bacb71886d64c0ccb7a17b6c9f59bc26680e9000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281403ccec136a4912d65f2019a046710d336bd6b059fab4ce0e092d73f6e5e753c1a2a95caf429dfeb93ebed1cea8c73bb9e49a5aefa0f6c13ce20c2ca46b7be5130a100af038001e3a10001ffffffffe12ed10181ea6c74de3e993da2208a8f795b20572a1a903b29e219ba50f76bd5030000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2781400325d2c0f00ee346c0b2d3865083baaf50b581c3f277653a71aa1804289c273374b5d8749de01b19141ec8b114d413cc6bf1997adc1a82d4fd31162a79ba67aba100af038001e3a10001ffffffff060000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0084d717000000002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac0200000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc50200b5402000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cce351724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3429217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00000000000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[25-Jul-18 11:38 AM] jl777c#5810
overfill should have worked.


[25-Jul-18 11:38 AM] jl777c#5810
reproduced


[25-Jul-18 11:38 AM] jl777c#5810
but i need the rpc command


[25-Jul-18 11:38 AM] siu#3920
ahh wait... price was different


[25-Jul-18 11:39 AM] siu#3920
but that doesnt seem to make a difference


[25-Jul-18 11:39 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenfillbid 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e e98066c29bf5c9b6177acb0c4cd68618b7ac2b5543cc21821f1c9b5d3ae6ae74 5```


[25-Jul-18 11:39 AM] jl777c#5810
price? i dont think you put in price


[25-Jul-18 11:39 AM] siu#3920
no, you dont


[25-Jul-18 11:39 AM] siu#3920
just wondered if that was an issue, but im too used to bdex üòÇ


[25-Jul-18 11:40 AM] jl777c#5810
thats a good one, it tried to burn 3 assets!


[25-Jul-18 11:40 AM] CryptoFoxGaming#5228
@jl777c, got it, because it is local, it doesn't kill the whole network. But if that is the case, I am assuming you are placing trust in the host of the cryptoconditions such that they won't maliciously modify them, unless there is some client side validation.


[25-Jul-18 11:40 AM] siu#3920
hhmm


[25-Jul-18 11:41 AM] cipi#4502
```src/komodo-cli -ac_name=ATEST tokenfillbid 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e c65edbed453308567c9843a1aad953703fb79a6d9f80430b1e9334d194696863 2
totally filled!
remaining 0 -> origpubkey
{
  "result": "success",
  "hex": "0100000003017c47d4ee7ff2c543c2931aa64c313fd522d1984cf4bb6121f3868a7663b56a000000004847304402200d3eee1f490bc2650ccb9e8e17ce2fbbbe505a0832904260083c8251b19268b20220607927952dd76b38830e665836fe26da13f86eefafca2011b75e4094296ef51101ffffffff63686994d134931e0b43809f6d9ab73f7053d9aaa143987c56083345eddb5ec6000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281407ee8c4ebe77fbbc2b13802a45f5b9494b80ee081ea275f4fd6fc8273fcfef2f21d2d62f322024c808c3293b0a49190e6c07186f4721a855a14fb36b5d627c369a100af038001e3a10001ffffffff0d4f54795cd255f7e7ca5354eef0566b9c43273b69da3a1e0e5ec4f118e72b57030000007b4c79a276a072a26ba067a565802102f8113fac97b2bc6ad454a94082c2bd7799ab441454364d207013d21ac72ae00a8140040f34dd28ff910007a88ca3e6ecdb76425204cd56a5a577abff125a66deadfb23affb07e82c36ba523dedf9966c01208cf0656b72b896740e531bb6a93cf958a100af038001e3a10001ffffffff060000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00e1f50500000000232102f8113fac97b2bc6ad454a94082c2bd7799ab441454364d207013d21ac72ae00aac0100000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401ccfa26000000000000302ea22c80201457a7aa9b0696255fa4f495f2ea619cd3946ab19c9b5c3874d792e72dc3f73e8103120c008203000401ccf178724e18090000232102f8113fac97b2bc6ad454a94082c2bd7799ab441454364d207013d21ac72ae00aac00000000000000004f6a4c4ce3429217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00000000000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"```


[25-Jul-18 11:41 AM] jl777c#5810
@siu your prior bug doesnt reproduce anymore since you spent one of its inputs with the next one


[25-Jul-18 11:41 AM] cipi#4502
but i get `16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)` when sendrawtransaction


[25-Jul-18 11:42 AM] jl777c#5810
CC validation failed


[25-Jul-18 11:42 AM] cipi#4502
btw, discord does not let me post long messages


[25-Jul-18 11:42 AM] siu#3920
ill try another overfill


[25-Jul-18 11:42 AM] Alright#0419
@cipi just drag and drop text files


[25-Jul-18 11:42 AM] jl777c#5810
@CryptoFoxGaming if people want to release buggy CC contracts, nothing stops them


[25-Jul-18 11:43 AM] jl777c#5810
but the built in contracts are built into KMD source


[25-Jul-18 11:43 AM] Alright#0419
Does a coin need to hardfork for each additional contract added?


[25-Jul-18 11:43 AM] siu#3920
@jl777c ```./komodo-cli -ac_name=ATEST sendrawtransaction 010000000324b6f847c651dc25d397d014611951a94516bee47f78d02aea4c2700fd3f749404000000484730440220571c2ac9876335c9307b36ec1b7b24958249fbc1cf871d9dd95006fd724a13b402203403522fa54808e3a0f72c4072ee5ae2b538e6bf06e682c0abc01fd41cdfd3af01ffffffffcc532b7fda7c95a26ad426b581dbe968d79f9783f5b3cf449488fed72f116e54000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281402ae3a1efa7ef8457f1c36ef55a198233805c6ccc233b4032ccf70cc21f1078ad6fe9fc6cfb645a4b368a401709a4df1bd21594a539a6e5f6c82c67dd536078dba100af038001e3a10001ffffffffe12ed10181ea6c74de3e993da2208a8f795b20572a1a903b29e219ba50f76bd5030000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140dfb90c6e95736e5f5914db85d609cf2c4dad075608dbdf583196aee7684fe2871afe7eec76a0346a075ef9a48f183af296a7cbfed3323b8e6c284a0f2b80bcc4a100af038001e3a10001ffffffff060000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00562183000000002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac1400000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc3e200b5402000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cce351724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3429217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00000000000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[25-Jul-18 11:44 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenfillbid 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 546e112fd7fe889444cfb3f583979fd768e9db81b526d46aa2957cda7f2b53cc 23
```


[25-Jul-18 11:44 AM] SHossain#0007
@cipi yes, it is a shame that discrod doesn't give abilities lile `Create a Snippet` we had in slack


[25-Jul-18 11:45 AM] gcharang#6833
pastebin is the best alternative


[25-Jul-18 11:46 AM] SHossain#0007
distraction


[25-Jul-18 11:46 AM] jl777c#5810
@siu thanks duplicated. you are getting good at this

{Reactions}
üíØ 

[25-Jul-18 11:46 AM] siu#3920
üòÇ


[25-Jul-18 11:48 AM] CryptoFoxGaming#5228
@jl777c, I gathered, but how can a participant in the contract know that the contract will be executed as per the code (buggy or not) by all other involved parties?


[25-Jul-18 11:51 AM] CryptoFoxGaming#5228
Or is that not even a necessity due to the purpose CC contracts serve or the existence of some other security mechanism I am missing.


[25-Jul-18 11:52 AM] jl777c#5810
did you read the comments in ~/komodo/src/cc/faucet.cpp ?


[25-Jul-18 11:52 AM] jl777c#5810
do you understand how CC works?


[25-Jul-18 11:53 AM] jl777c#5810
plz at least read the comments, you are asking questions that dont really make any senes


[25-Jul-18 11:53 AM] jl777c#5810
@siu pushed fix


[25-Jul-18 11:54 AM] CryptoFoxGaming#5228
@jl777c, hahaha! Fair enough. I don't know at all how they work which is why I am asking questions. Wasn't sure where to look. I saw brief mention in the Whitepaper but there wasn't really much detail.


[25-Jul-18 11:54 AM] jl777c#5810
CC are a new type of vout using the bitcoin protocol utxo system


[25-Jul-18 11:55 AM] jl777c#5810
the CC contract code adds constraints on the vins and vouts


[25-Jul-18 11:55 AM] jl777c#5810
asking how people know the contract will be executed, is like asking how you know a bitcoin payment will be sent


[25-Jul-18 11:55 AM] SHossain#0007
updating


[25-Jul-18 11:55 AM] SHossain#0007
@CryptoFoxGaming you can have a look here https://github.com/jl777/komodo/blob/dev/src/cc/assets.cpp

{Embed}
https://github.com/jl777/komodo/blob/dev/src/cc/assets.cpp
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[25-Jul-18 11:56 AM] jl777c#5810
start with faucet, then rewards then assets


[25-Jul-18 11:56 AM] CryptoFoxGaming#5228
Will do.


[25-Jul-18 11:56 AM] jl777c#5810
CC allow to create colored utxo and a specific set of new rules that govern these colored utxos


[25-Jul-18 11:57 AM] Alright#0419
Does each additional contract require a hard fork?


[25-Jul-18 11:58 AM] jl777c#5810
it depends on what you mean, how it was deployed and if any specific CC contracts were done


[25-Jul-18 11:59 AM] siu#3920
rebuilding


[25-Jul-18 12:01 PM] SHossain#0007
one good thing about these orderbook is, it doesn't get cancelled if you close your wallet


[25-Jul-18 12:01 PM] Alright#0419
So let's say coin X wants to start using the rewards contract once it's polished, they hard fork and start using it. They then want to add their own custom contract, is it soft fork or a hard fork?


[25-Jul-18 12:01 PM] Alright#0419
depends on the new contract or?


[25-Jul-18 12:04 PM] jl777c#5810
adding support for a new contract would require a hardfork


[25-Jul-18 12:06 PM] siu#3920
@jl777c  96a87697d7061fbfbe932701863d6c47290a0b05f769a0e76a052cace8637869


[25-Jul-18 12:06 PM] siu#3920
it worked this time


[25-Jul-18 12:06 PM] siu#3920
```AssetValidate (B)
vin2 9999949909, vout2 20, vout3 9999949889, Got 22.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
recvunitprice 1.1000000000000001 >= 1.1000000000000001 unitprice, new unitprice 0.0000000000000000
fillbuy validated
```


[25-Jul-18 12:06 PM] jl777c#5810
yes, it helps to check for exact amounts after (not before) the amounts are determined


[25-Jul-18 12:06 PM] SHossain#0007
```
AssetValidate (B)
vin2 9999949909, vout2 20, vout3 9999949889, Got 22.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
recvunitprice 1.1000000000000001 >= 1.1000000000000001 unitprice, new unitprice 0.0000000000000000
fillbuy validated
```


[25-Jul-18 12:06 PM] jl777c#5810
problem was in the tx creation side


[25-Jul-18 12:07 PM] SHossain#0007
@siu how about overfilling?


[25-Jul-18 12:07 PM] siu#3920
i did an overfill


[25-Jul-18 12:07 PM] siu#3920
total wall 22 i asked for 23


[25-Jul-18 12:07 PM] SHossain#0007
did it work?


[25-Jul-18 12:08 PM] SHossain#0007
i see the order is there 
```
  {
    "funcid": "b",
    "txid": "546e112fd7fe889444cfb3f583979fd768e9db81b526d46aa2957cda7f2b53cc",
    "vout": 0,
    "amount": 22,
    "bidamount": 22,
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": 20,
    "price": 1.1
  },
```


[25-Jul-18 12:09 PM] SHossain#0007
@jl777c is there any way that we can see how much filled of an order?


[25-Jul-18 12:09 PM] SHossain#0007
if it is partial fill


[25-Jul-18 12:10 PM] siu#3920
yes


[25-Jul-18 12:10 PM] jl777c#5810
you specify how much you are filling


[25-Jul-18 12:11 PM] jl777c#5810
so if it works, then it did what you asked


[25-Jul-18 12:11 PM] siu#3920
./komodo-cli -ac_name=ATEST getrawmempool[
  "96a87697d7061fbfbe932701863d6c47290a0b05f769a0e76a052cace8637869"
]


[25-Jul-18 12:12 PM] siu#3920
still waiting for it to confirm


[25-Jul-18 12:12 PM] SHossain#0007
aha


[25-Jul-18 12:12 PM] jl777c#5810
likely the mining node isnt updated


[25-Jul-18 12:14 PM] SHossain#0007
after the last update i wasn't mining


[25-Jul-18 12:14 PM] SHossain#0007
started miner now


[25-Jul-18 12:15 PM] siu#3920
got it


[25-Jul-18 12:15 PM] SHossain#0007
@siu that order is gone from entries üëçüèΩ


[25-Jul-18 12:15 PM] siu#3920
ü§ë


[25-Jul-18 12:15 PM] siu#3920
üòÇ


[25-Jul-18 12:20 PM] jl777c#5810
can anybody get a sell to work?


[25-Jul-18 12:20 PM] jl777c#5810
or fail


[25-Jul-18 12:20 PM] SHossain#0007
you mean ask?


[25-Jul-18 12:20 PM] jl777c#5810
yes, ask


[25-Jul-18 12:20 PM] SHossain#0007
i'll put orders then üòÉ


[25-Jul-18 12:20 PM] jl777c#5810
also did we validate cancelling bid


[25-Jul-18 12:21 PM] Alright#0419
cancel seems to work in that the bid disappears from the books


[25-Jul-18 12:21 PM] jl777c#5810
are the vins and vouts as they should be?


[25-Jul-18 12:21 PM] Alright#0419
Someone who did a successful tokenfillbid, verify that the token and ATEST balances are correct afterwards


[25-Jul-18 12:21 PM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenask 5 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1.1
{
  "result": "success",
  "hex": "010000000208d4d205f7aa84878cee4f5a2bdcd585bbee1e919c860c6ba8eaaf3a4c2b6bb3000000004847304402203eea39262673c546a131fa8b5e3c91c7a422d4360a59f4324e14335322169fae022068ba734aa162e36c3c7e1e25e0596c0829ec45eb8fc3c48faeeb3971565597a901ffffffff0d4f54795cd255f7e7ca5354eef0566b9c43273b69da3a1e0e5ec4f118e72b57020000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc81408722ac74cb60c5fa5540eea487af59db4096a73ae496a553ac721c838ce1ca056cbc9d1b03ccd8698e3a5637a3b9e68b4b8ef0b6d95a1403dcf3b977ea4682fda100af038001e3a10001ffffffff040500000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0500000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401ccf078724e18090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce3739217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e8055c820000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
}
```


[25-Jul-18 12:21 PM] Alright#0419
Will check a cancel tx


[25-Jul-18 12:21 PM] jl777c#5810
assets.cpp has the documentation of what the vins/vouts should be


[25-Jul-18 12:22 PM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST sendrawtransaction HEX from above
AssetValidate (s)
vin1 10, vout0 5, vout1 5, CC Eval EVAL_ASSETS Invalid: invalid CC vout spending tx 572be718f1c45e0e1e3ada693b27439c6b56f0ee5453cae7f755d25c79544f0d
AssetValidate (s)
vin1 10, vout0 5, vout1 5, CC Eval EVAL_ASSETS Invalid: invalid CC vout spending tx 572be718f1c45e0e1e3ada693b27439c6b56f0ee5453cae7f755d25c79544f0d
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[25-Jul-18 12:22 PM] jl777c#5810
reproduced

{Reactions}
üëçüèΩ 

[25-Jul-18 12:28 PM] siu#3920
@jl777c  ```./komodo-cli -ac_name=ATEST sendrawtransaction 01000000023fcd78228c3b20eec6772c8864cc0362635ce2b3181568b075f1cc31df9877290000000049483045022100f3ebe8591740997a44de1979be636e6aca4bb2156051de04609a9983d3c9e446022057e7dff491ecb30c0aa90779d28ecdd71345998b1baea0b02f716f502240616801ffffffff697863e8ac2c056ae7a069f7050b0a29476c3d86012793bebf1f06d79776a896030000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140e9bfb96c4aa35e460dda62a4de0b2fa0b16310d2a5ef1c12e4a0adacd08dd2fa146dcb4712e6d80f9a18e4642491a583a03d440a57c5b19cf08a0f8cfe34abada100af038001e3a10001ffffffff04e803000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc591c0b5402000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc00a0724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3739217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00e876481700000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[25-Jul-18 12:28 PM] siu#3920
```./komodo-cli -ac_name=ATEST tokenask 1000 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1```


[25-Jul-18 12:32 PM] jl777c#5810
pushed fix


[25-Jul-18 12:32 PM] jl777c#5810
next bug please


[25-Jul-18 12:33 PM] SHossain#0007
updating


[25-Jul-18 12:34 PM] jl777c#5810
if ask works, then there is cancel ask and fill ask


[25-Jul-18 12:35 PM] Alright#0419
tokencancelbid checks out


[25-Jul-18 12:35 PM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenask 5 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1.1
{
  "result": "success",
  "hex": "010000000208d4d205f7aa84878cee4f5a2bdcd585bbee1e919c860c6ba8eaaf3a4c2b6bb3000000004847304402203eea39262673c546a131fa8b5e3c91c7a422d4360a59f4324e14335322169fae022068ba734aa162e36c3c7e1e25e0596c0829ec45eb8fc3c48faeeb3971565597a901ffffffff0d4f54795cd255f7e7ca5354eef0566b9c43273b69da3a1e0e5ec4f118e72b57020000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc81408722ac74cb60c5fa5540eea487af59db4096a73ae496a553ac721c838ce1ca056cbc9d1b03ccd8698e3a5637a3b9e68b4b8ef0b6d95a1403dcf3b977ea4682fda100af038001e3a10001ffffffff040500000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0500000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401ccf078724e18090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce3739217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e8055c820000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
}
```


[25-Jul-18 12:35 PM] Alright#0419
works, and vins vouts match the doc


[25-Jul-18 12:35 PM] SHossain#0007
```
AssetValidate (s)
vin1 10, vout0 5, vout1 5, 61b6f2ea148e8dc6536bcaba86c1a8680ed7b8bb08f8fbc78d3da699653be846
```


[25-Jul-18 12:35 PM] SHossain#0007
sendrawtransaction output ^^


[25-Jul-18 12:36 PM] SHossain#0007
someone please test fillask


[25-Jul-18 12:36 PM] SHossain#0007
i'm putting more order up


[25-Jul-18 12:36 PM] jl777c#5810
maybe even swap will work


[25-Jul-18 12:36 PM] jl777c#5810
that gets us all the single chain atomic swap level of functionality that matches the ERC20 DEX


[25-Jul-18 12:37 PM] Alright#0419
An ask shows as capital B in orderbook, yes?


[25-Jul-18 12:37 PM] jl777c#5810
'a'


[25-Jul-18 12:37 PM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenask 10 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1.1
{
  "result": "success",
  "hex": "01000000020ad962196ba8067bda7c3dcf59d0a23b53380c7a09cbcf36cd5978741feed2df0000000049483045022100e47d6ff5feba3b368834650529f8fb624827916f9ede459e0fde515c677e3d03022003eca276039901e88e9f3c9da441550e06ca03d8b3eb33152d67593f2e55445101ffffffff0d4f54795cd255f7e7ca5354eef0566b9c43273b69da3a1e0e5ec4f118e72b57020000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc8140bd0778b7eebc9368f34a2e2a6edfe91b05cd6ac0c108106f8f0944cf2b593a5e524472d89e98d0c32b49ac9700156ee49a96feff4e626fae9052f87401a727e2a100af038001e3a10001ffffffff030a00000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccf078724e18090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce3739217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00ab9041000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
}
```
sendrawtx output
```
error code: -25
error message:

```


[25-Jul-18 12:37 PM] jl777c#5810
sorry 's'


[25-Jul-18 12:37 PM] Alright#0419
And capital B is a fillbid?


[25-Jul-18 12:38 PM] SHossain#0007
`'b' is the offer, 'B' is the fill`


[25-Jul-18 12:38 PM] jl777c#5810
yes, capital is fill, lower case is the offer


[25-Jul-18 12:38 PM] Alright#0419
```
2018-07-25 19:37:57 Misbehaving: 136.243.58.134:56656 (100 -> 200) BAN THRESHOLD EXCEEDED
2018-07-25 19:37:57 InvalidChainFound: invalid block=011aa8406d37e87dc3f6b38f9db6ade1d5d582af84a79eeeaafccb82a1d95f6d  height=2668  log2_work=19.825504  date=2018-07-25 19:36:15
2018-07-25 19:37:57 InvalidChainFound:  current best=01936f27bb8563f8e9ea8bbe381fe09d859299f29195f91e2bd344ef77072c06  height=2667  log2_work=19.825215  date=2018-07-25 19:35:14
2018-07-25 19:37:57 ERROR: ConnectTip(): ConnectBlock 011aa8406d37e87dc3f6b38f9db6ade1d5d582af84a79eeeaafccb82a1d95f6d failed
2018-07-25 19:37:57 InvalidChainFound: invalid block=011aa8406d37e87dc3f6b38f9db6ade1d5d582af84a79eeeaafccb82a1d95f6d  height=2668  log2_work=19.825504  date=2018-07-25 19:36:15
2018-07-25 19:37:57 InvalidChainFound:  current best=01936f27bb8563f8e9ea8bbe381fe09d859299f29195f91e2bd344ef77072c06  height=2667  log2_work=19.825215  date=2018-07-25 19:35:14
```


[25-Jul-18 12:38 PM] jl777c#5810
did you update to the latest?


[25-Jul-18 12:38 PM] jl777c#5810
we hardforked again 10 min ago


[25-Jul-18 12:38 PM] SHossain#0007
```
AssetValidate (s)
vin1 9979, vout0 10, vout1 9969, 
```


[25-Jul-18 12:38 PM] Alright#0419
Ah >.<


[25-Jul-18 12:39 PM] Alright#0419
commit eac2c15e5da30704a4214aa6ed2f1a12d3ec92fb
Author: jl777 <jameslee777@yahoo.com>
Date:   Wed Jul 25 07:51:07 2018 -1100

    Fix dropped assetoshis


[25-Jul-18 12:41 PM] SHossain#0007
```
error code: -25
error message:
```
without error message these errors may be related to unconfirmed tx


[25-Jul-18 12:42 PM] jl777c#5810
-25 is a tx that is using spent vin


[25-Jul-18 12:42 PM] jl777c#5810
you made a tx, broadcast it, it didnt confirm


[25-Jul-18 12:42 PM] cipi#4502
price and amount looks weird for the asks... `src/komodo-cli -ac_name=ATEST tokenask 10 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1` created this ask
```    "funcid": "s",
    "txid": "51e6bdcd5061b92dea1e93462efdea8b478b31a0fa4babe98384a9777889793a",
    "vout": 0,
    "amount": 1e-07,
    "askamount": 10,
    "origaddress": "RVyuWMAmKiHPx8s2jmTE9bm4nvLC4xAx4r",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": 1000000000,
    "price": 1e-16```


[25-Jul-18 12:42 PM] jl777c#5810
you made another tx, which used the utxo same as the prior tx


[25-Jul-18 12:42 PM] SHossain#0007
yes


[25-Jul-18 12:42 PM] SHossain#0007
that is correct


[25-Jul-18 12:42 PM] jl777c#5810
and it became invalid when the original tx confirms


[25-Jul-18 12:43 PM] jl777c#5810
currently the utxo selection is really simple linear search ,  so it always picks the same utxo


[25-Jul-18 12:43 PM] jl777c#5810
@cipi did you pipe it through jq?


[25-Jul-18 12:43 PM] cipi#4502
no, just did `src/komodo-cli -ac_name=ATEST tokenorders 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e`


[25-Jul-18 12:44 PM] SHossain#0007
we have ask orders in orderbook
```
  {
    "funcid": "s",
    "txid": "51e6bdcd5061b92dea1e93462efdea8b478b31a0fa4babe98384a9777889793a",
    "vout": 0,
    "amount": 1e-07,
    "askamount": 10,
    "origaddress": "RVyuWMAmKiHPx8s2jmTE9bm4nvLC4xAx4r",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": 1000000000,
    "price": 1e-16
  },
  {
    "funcid": "s",
    "txid": "61b6f2ea148e8dc6536bcaba86c1a8680ed7b8bb08f8fbc78d3da699653be846",
    "vout": 0,
    "amount": 5e-08,
    "askamount": 5,
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": 550000000,
    "price": 9.090909090909091e-17
  },
```


[25-Jul-18 12:44 PM] cipi#4502
seems something is inverted... 1/x  versus x


[25-Jul-18 12:46 PM] jl777c#5810
I also should adjust for satoshis, fixing


[25-Jul-18 12:51 PM] siu#3920
tokenask worked on newest code


[25-Jul-18 12:51 PM] siu#3920
ca1c485a536bcf456d21edfdc0c3f135c6a884e578f0d9c40e388d532775199c


[25-Jul-18 12:52 PM] siu#3920
```AssetValidate (s)
vin1 10, vout0 10, AssetValidate (s)
vin1 9999949889, vout0 1000, vout1 9999948889,```


[25-Jul-18 12:54 PM] SHossain#0007
yes, it is working. jl777 is adjusting the satoshis in the ask orders


[25-Jul-18 12:55 PM] siu#3920
im still waiting for my order to confirm


[25-Jul-18 12:58 PM] jl777c#5810
@cipi non-hardfork change, but i think it is still not quite right


[25-Jul-18 12:58 PM] siu#3920
./komodo-cli -ac_name=ATEST getblockhash 2672
004ed81c0ba331914657ca2272176216af1477fc6083ccb49c511ddbbc94efe9


[25-Jul-18 12:58 PM] siu#3920
everyone here?


[25-Jul-18 12:58 PM] SHossain#0007
this popped up on my console
```AssetValidate (s)
vin1 9999949889, vout0 1000, vout1 9999948889, no nodes, break
no nodes, break
```


[25-Jul-18 12:58 PM] siu#3920
üò¶


[25-Jul-18 12:58 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST getblockhash 2672
005d383444104fbb9312e7414c55476b76c386fbf473e7dc64bb790e612b40aa
```


[25-Jul-18 12:58 PM] siu#3920
my chain forked


[25-Jul-18 12:59 PM] SHossain#0007
```
  "blocks": 2684,
  "longestchain": 0,
  "timeoffset": 0,
  "tiptime": 1532548655,
  "connections": 0,
```


[25-Jul-18 12:59 PM] siu#3920
"blocks": 2673,
  "longestchain": 0,


[25-Jul-18 12:59 PM] siu#3920
connections 0 too


[25-Jul-18 12:59 PM] siu#3920
i think we need to get this running in a stronger chain


[25-Jul-18 01:00 PM] siu#3920
can we just notarize this one or fork beer or pizza?


[25-Jul-18 01:01 PM] SHossain#0007
i guess we need to use hardfork for existing chain to make -ac_cc=1


[25-Jul-18 01:01 PM] jl777c#5810
yes all nodes would need to update


[25-Jul-18 01:01 PM] jl777c#5810
not much can make 10 hardforks in a day smooth


[25-Jul-18 01:03 PM] SHossain#0007
be back soon. need to turn on the miner for CHIPS


[25-Jul-18 01:06 PM] siu#3920
im going to be off for the day soon too


[25-Jul-18 01:06 PM] siu#3920
but i think we need to get this chain stronger to make more tests


[25-Jul-18 01:07 PM] jl777c#5810
fixed sell display


[25-Jul-18 01:07 PM] Alright#0419
"stronger"?


[25-Jul-18 01:07 PM] Alright#0419
it's only forking because we are forking it


[25-Jul-18 01:07 PM] jl777c#5810
10 hardforks today, by my count


[25-Jul-18 01:07 PM] siu#3920
ok


[25-Jul-18 01:08 PM] siu#3920
rebuilding


[25-Jul-18 01:08 PM] siu#3920
but any chainge in the smart contracts are hardforks?


[25-Jul-18 01:08 PM] jl777c#5810
this one is not a hardfork


[25-Jul-18 01:08 PM] siu#3920
ok


[25-Jul-18 01:08 PM] jl777c#5810
a hardforking change to CC is a hardfork


[25-Jul-18 01:08 PM] jl777c#5810
a non-hardfork change isnt


[25-Jul-18 01:12 PM] siu#3920
what is funcid": "s"? ask?


[25-Jul-18 01:13 PM] jl777c#5810
yes


[25-Jul-18 01:13 PM] jl777c#5810
ask for native coin


[25-Jul-18 01:13 PM] siu#3920
``` {
    "funcid": "s",
    "txid": "ca1c485a536bcf456d21edfdc0c3f135c6a884e578f0d9c40e388d532775199c",
    "vout": 0,
    "amount": "1000",
    "askamount": "1000",
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": "1000.00000000",
    "price": "1.00000000"
  },
```


[25-Jul-18 01:13 PM] siu#3920
this is my order


[25-Jul-18 01:13 PM] jl777c#5810
your price is 1 ATEST per asset, for 1000 assets?


[25-Jul-18 01:14 PM] siu#3920
:p


[25-Jul-18 01:14 PM] siu#3920
taking into account that the block reward is 100k ATEST perblock


[25-Jul-18 01:14 PM] siu#3920
"blocks": 2673,
  "longestchain": 2687,


[25-Jul-18 01:14 PM] siu#3920
i have this issue though


[25-Jul-18 01:15 PM] jl777c#5810
didnt realize it was such a high blockreward! it is a good test


[25-Jul-18 01:15 PM] jl777c#5810
so the display for 's' seems fine


[25-Jul-18 01:17 PM] siu#3920
let me see if i can mine a couple of blocks


[25-Jul-18 01:17 PM] siu#3920
anyone here can try to fill it? @Alright @gcharang ?


[25-Jul-18 01:18 PM] Alright#0419
building 1 minute


[25-Jul-18 01:18 PM] siu#3920
```Mining when blockchain might not be in sync longest.2687 vs 2674
```


[25-Jul-18 01:18 PM] siu#3920
resync?


[25-Jul-18 01:18 PM] jl777c#5810
it is a warning


[25-Jul-18 01:18 PM] siu#3920
ok, its mining its way up now


[25-Jul-18 01:18 PM] jl777c#5810
you are on your own fork


[25-Jul-18 01:18 PM] jl777c#5810
resync


[25-Jul-18 01:19 PM] siu#3920
ok


[25-Jul-18 01:19 PM] jl777c#5810
-addnode=136.243.58.134


[25-Jul-18 01:20 PM] Alright#0419
getting 
```
./komodo-cli -ac_name=ATEST tokenfillask 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e ce7811a63e2d06ec6bde8a553b05b7dca95b17e8a676e431a887135ed62549b7 100
error code: -1
error message:
basic_string::_M_construct null not valid
```

```
filltx not enough utxos
```


[25-Jul-18 01:21 PM] Alright#0419
trying to fill 
```
  {
    "funcid": "s",
    "txid": "ce7811a63e2d06ec6bde8a553b05b7dca95b17e8a676e431a887135ed62549b7",
    "vout": 0,
    "amount": "10",
    "askamount": "10",
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": "1000.00000000",
    "price": "100.00000000"
  },

```


[25-Jul-18 01:21 PM] Alright#0419
need to split UTXOs or something possibly?


[25-Jul-18 01:22 PM] jl777c#5810
no


[25-Jul-18 01:22 PM] jl777c#5810
this is a bug unless you dont have 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e


[25-Jul-18 01:22 PM] jl777c#5810
what is your tokenbalance 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e


[25-Jul-18 01:23 PM] Alright#0419
Thought I was trying to *buy* 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e


[25-Jul-18 01:23 PM] Alright#0419
have 0


[25-Jul-18 01:23 PM] jl777c#5810
error message is correct


[25-Jul-18 01:23 PM] jl777c#5810
or no, I got it backwards


[25-Jul-18 01:23 PM] jl777c#5810
maybe the error check is backwards!


[25-Jul-18 01:23 PM] jl777c#5810
you have 100 ATEST?


[25-Jul-18 01:23 PM] Alright#0419
yes a couple million


[25-Jul-18 01:24 PM] jl777c#5810
that should be enough


[25-Jul-18 01:24 PM] jl777c#5810
ok, I reproduced it


[25-Jul-18 01:25 PM] siu#3920
i was wrong


[25-Jul-18 01:25 PM] siu#3920
./komodo-cli -ac_name=ATEST getblockhash 2687
012fae58de4307fb67f544d944568fa297fcf0ea7813760f787654339e32e24c


[25-Jul-18 01:25 PM] siu#3920
im with everyone now?


[25-Jul-18 01:26 PM] cipi#4502
i have the same blockhash


[25-Jul-18 01:26 PM] Alright#0419
yes


[25-Jul-18 01:26 PM] jl777c#5810
pushed fix


[25-Jul-18 01:26 PM] jl777c#5810
it is not a hardfork


[25-Jul-18 01:27 PM] jl777c#5810
at least it generates a rawtx


[25-Jul-18 01:27 PM] jl777c#5810
but I found a bug in the utxo selection


[25-Jul-18 01:32 PM] Alright#0419
```
error code: -26
error message:
16: bad-txns-vout-negative
```

```
privkey for the -pubkey= address is not in the wallet, importprivkey!
remaining 99999999990 -> origpubkey
```

from the same tokenfillask as above


[25-Jul-18 01:32 PM] Alright#0419
privkey is imported


[25-Jul-18 01:32 PM] Alright#0419
```
2018-07-25 20:31:20 ERROR: CheckTransaction(): txout.nValue negative
2018-07-25 20:31:20 ERROR: AcceptToMemoryPool: CheckTransaction failed
```


[25-Jul-18 01:32 PM] siu#3920
can we test even with the utxo slection issue?


[25-Jul-18 01:33 PM] Alright#0419
yea first vout is negative


[25-Jul-18 01:34 PM] Alright#0419

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/471777186505031680/negvout


[25-Jul-18 01:35 PM] jl777c#5810
how did you create that negative tx? I cant read your screen from here


[25-Jul-18 01:37 PM] siu#3920
ill see if i can connect later


[25-Jul-18 01:39 PM] Alright#0419
./komodo-cli -ac_name=ATEST tokenfillask 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e ce7811a63e2d06ec6bde8a553b05b7dca95b17e8a676e431a887135ed62549b7 10


[25-Jul-18 01:40 PM] jl777c#5810
fixing fillask bugs


[25-Jul-18 01:41 PM] jl777c#5810
test cancel, and swap ask


[25-Jul-18 01:43 PM] jl777c#5810
this will take a while... anyway, fantastic project today!

{Reactions}
üíØ (4) 

[25-Jul-18 01:46 PM] Alright#0419
order book is getting pretty unwieldy if you guys could start canceling orders, that'd be nice


[25-Jul-18 01:46 PM] Alright#0419
just going to use my own token for now with tokenorders <txid>


[25-Jul-18 01:50 PM] Alright#0419
are we stuck?


[25-Jul-18 01:50 PM] Alright#0419
My node is finding blocks but not broadcasting


[25-Jul-18 01:51 PM] Alright#0419

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/471781526414163988/nobroadcast


[25-Jul-18 01:51 PM] cipi#4502
and my node does not get new blocks üòÉ


[25-Jul-18 01:53 PM] cipi#4502
@Alright do you have public IP? can i connect my daemon to it?


[25-Jul-18 01:53 PM] Alright#0419
195.201.137.5 or 195.201.20.230


[25-Jul-18 01:54 PM] Alright#0419
try 137.5 first


[25-Jul-18 01:54 PM] Alright#0419
do -connect=195.201.137.5


[25-Jul-18 01:54 PM] Alright#0419
see how many blocks it says I have


[25-Jul-18 01:54 PM] cipi#4502
hmmm, these 2 are already in my -addnode-start paramaters


[25-Jul-18 01:54 PM] cipi#4502
ok, will try only -connect


[25-Jul-18 01:55 PM] Alright#0419
Ah @jl777c bug seems to be back, hanging cli commands


[25-Jul-18 01:55 PM] Alright#0419
can't kill the daemon


[25-Jul-18 01:55 PM] Alright#0419
got 
```
komodod: checkqueue.h:189: CCheckQueueControl<T>::CCheckQueueControl(CCheckQueue<T>*) [with T = CScriptCheck]: Assertion `isIdle' failed.
Aborted (core dumped)
``` 
on one of them


[25-Jul-18 01:57 PM] Alright#0419
pkill -9'd and resyncing to your node


[25-Jul-18 01:58 PM] Alright#0419
same as before, `setgenerate true` crashes the daemon with that ^ error


[25-Jul-18 01:59 PM] Alright#0419
other node didn't crash, just says `Mining when blockchain might not be in sync longest.2687 vs 2688`


[25-Jul-18 01:59 PM] Alright#0419
`getpeerinfo` shows no peers with 2688


[25-Jul-18 02:00 PM] Alright#0419
....and it started mining again O.o


[25-Jul-18 02:02 PM] Alright#0419
grabbing some food, back in 30


[25-Jul-18 02:10 PM] SHossain#0007
i'm off for the night. back in the morning again


[25-Jul-18 02:11 PM] SHossain#0007
CHIPS mining started again


[25-Jul-18 02:11 PM] cipi#4502
are you running a miner for CHIPS?


[25-Jul-18 02:12 PM] SHossain#0007
yes


[25-Jul-18 02:12 PM] SHossain#0007
antminer t9+


[25-Jul-18 02:13 PM] cipi#4502
nice... and thanks a lot, CHIPS blocks were coming very slowly in the last days


[25-Jul-18 02:16 PM] SHossain#0007
i'll keep them running for a while, operating from my friends garden shed. yesterday, the miners were running at 93C due to the hot weather here.


[25-Jul-18 02:17 PM] SHossain#0007
this address `RSVwXstQM8gGV4fNJ5MWHuBpbqNv4E6HH5` is also mining CHIPS.


[25-Jul-18 02:18 PM] cipi#4502
lol, yes, it is very hot here too... that's why i sleep during day and do cryptostuff during night..


[25-Jul-18 02:18 PM] SHossain#0007
good idea


[25-Jul-18 02:27 PM] Alright#0419
sort of think there may be something else wrong with the CHIPS network other than just lack of hash rate and someone profit switching with a shit load of hash rate


[25-Jul-18 02:27 PM] Alright#0419
it stalled for several hours even while SHo's 21TH was mining it constantly


[25-Jul-18 02:27 PM] Alright#0419
and the block times are rarely consistent


[25-Jul-18 02:40 PM] jl777c#5810
problems with fillsell, to complex to solve when tired.


[25-Jul-18 02:41 PM] jl777c#5810
but buy side likely still has some issues, especially if you dont have big enough utxos and other edge cases


[25-Jul-18 02:41 PM] jl777c#5810
so all but the fillsell and swap rpc calls are ready for testing


[25-Jul-18 02:47 PM] Alright#0419
üëå


[25-Jul-18 07:13 PM] cipi#4502
my komodod is segfaulting when i call `komodo-cli -ac_name=ATEST tokenorders 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e`
```[Jul26 02:02] zcash-httpworke[2804]: segfault at 0 ip 0000555555826b87 sp 00007fffee122680 error 4 in komodod[5555555be000+787000]```
i can't get a backtrace from gdb, it just shows `No stack.`


[25-Jul-18 07:17 PM] cipi#4502
it also segfaults when i call `tokenorders` without passing a tokenid


[25-Jul-18 07:52 PM] Alright#0419
Yes, I did a tokenask with a negative price


[25-Jul-18 07:52 PM] Alright#0419
think we need a new chain


[25-Jul-18 07:58 PM] Alright#0419
komodod -ac_cc=1 -ac_name=AT -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKEY> -addnode=195.201.137.5 -addnode=195.201.20.230


[25-Jul-18 08:20 PM] Alright#0419
still can't get `tokenfillask` to work no matter what I try 
```
filltx not enough utxos
```

```
./komodo-cli -ac_name=AT tokenfillask be15c0662a26c9ffd948b3363dfd9384051f2edaad7baf34cc5a3b0b363e9f5a 8edc3315e541c98e9fc501de6c47e9ff8a1dec4052b109127ff1639b41f7b4ec 100000
error code: -1
error message:
basic_string::_M_construct null not valid
```


[25-Jul-18 08:20 PM] Alright#0419
```
  {
    "funcid": "s",
    "txid": "8edc3315e541c98e9fc501de6c47e9ff8a1dec4052b109127ff1639b41f7b4ec",
    "vout": 0,
    "amount": "10000",
    "askamount": "10000",
    "origaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
    "tokenid": "be15c0662a26c9ffd948b3363dfd9384051f2edaad7baf34cc5a3b0b363e9f5a",
    "totalrequired": "10000.00000000",
    "price": "1.00000000"
  }
```


[26-Jul-18 12:07 AM] jl777c#5810
fillask is broken until I fix it


[26-Jul-18 12:07 AM] jl777c#5810
I will fix the crash too, it shouldnt crash


[26-Jul-18 12:20 AM] jl777c#5810
crash is fixed


[26-Jul-18 03:11 AM] SHossain#0007
updating


[26-Jul-18 03:18 AM] jl777c#5810
it is broken state now


[26-Jul-18 03:18 AM] jl777c#5810
fixing fill ask


[26-Jul-18 03:23 AM] SHossain#0007
üëçüèΩ


[26-Jul-18 05:05 AM] siu#3920
morning guys


[26-Jul-18 05:05 AM] siu#3920
how is everything?


[26-Jul-18 05:11 AM] jl777c#5810
had to rework bidfill and askfill, but all other bugs are fixed


[26-Jul-18 05:11 AM] siu#3920
so its ready to test or need to wait more?


[26-Jul-18 05:25 AM] jl777c#5810
almost


[26-Jul-18 05:31 AM] jorian#4555
how do i set this up? is there a 'guide'?


[26-Jul-18 05:35 AM] siu#3920
update to latest jl777


[26-Jul-18 05:35 AM] siu#3920
run this chain


[26-Jul-18 05:35 AM] siu#3920
```./komodod -ac_cc=1 -ac_name=ATEST -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKEY> -addnode=136.243.58.134 -addnode=195.201.20.230 -addnode=195.201.137.5 -daemon```


[26-Jul-18 05:35 AM] siu#3920
then explore the new api calls in help


[26-Jul-18 05:38 AM] jl777c#5810
ok, latest version got a fillsell that looked ok


[26-Jul-18 05:38 AM] jl777c#5810
however make sure to revalidate fillbuy as all that code was changed too


[26-Jul-18 06:05 AM] jorian#4555
ok, synced


[26-Jul-18 06:05 AM] jorian#4555
you need a pubkey or sth?


[26-Jul-18 06:05 AM] SHossain#0007
yes


[26-Jul-18 06:05 AM] SHossain#0007
you need pubkey


[26-Jul-18 06:05 AM] SHossain#0007
i'm coming back soon üòÉ


[26-Jul-18 06:11 AM] jl777c#5810
just updated with another fix.


[26-Jul-18 06:11 AM] jl777c#5810
the hard case is when multiple utxos are needed to do a partial fill


[26-Jul-18 06:11 AM] siu#3920
ok


[26-Jul-18 06:13 AM] jl777c#5810
there is a chance that all but the swap commands are working now


[26-Jul-18 06:14 AM] siu#3920
what is the difference between tokenfillswap vs. tokenfillbid or tokenfillask?


[26-Jul-18 06:14 AM] jorian#4555
my pubkey 027cdfb1022981b58d6cad3f455af209d7098af19557f040efdd225242b16a5396


[26-Jul-18 06:14 AM] siu#3920
you want some tokens?


[26-Jul-18 06:14 AM] siu#3920
or will you just create yours?


[26-Jul-18 06:15 AM] jorian#4555
what is smartest?


[26-Jul-18 06:18 AM] siu#3920
ill send you some


[26-Jul-18 06:19 AM] jorian#4555
you have 3 tokens


[26-Jul-18 06:22 AM] siu#3920
got the link for the google doc?


[26-Jul-18 06:22 AM] siu#3920
cant find it now


[26-Jul-18 06:22 AM] jorian#4555
https://docs.google.com/spreadsheets/d/1mggY4TfDxaj1HnabPFeMxwkPTxZQENMjx2yowiy441g/edit#gid=0

{Embed}
https://docs.google.com/spreadsheets/d/1mggY4TfDxaj1HnabPFeMxwkPTxZQENMjx2yowiy441g/edit
Token List
Sheet1


 User, Token ID, pubkey
 Siu, c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59, 028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27
 f4131ee56a47273195a899f60a187862aa8e39a974b5a19d860e2fe69f60242f
 9217014eae0a83a0b64632f379c1b47485979...
https://images-ext-1.discordapp.net/external/Qd4-WMYAKNDNuYdPvyssWmo9yQukwM3LNPiN-iWiaLI/https/lh6.googleusercontent.com/0AA2j8VdC-1p7mp-QZecmlzcoj7taksxjs5MNxfzCzZW2thObhfN18Aq2fzwUMVbk2WinQ%3Dw1200-h630-p


[26-Jul-18 06:22 AM] siu#3920
ahh found it


[26-Jul-18 06:22 AM] siu#3920
thanks


[26-Jul-18 06:22 AM] jl777c#5810
fill swap fills a swap


[26-Jul-18 06:23 AM] jl777c#5810
fill bid fills a bid


[26-Jul-18 06:23 AM] jl777c#5810
fill ask fills an ask


[26-Jul-18 06:23 AM] siu#3920
but what is a swap compared to a bid or an ask?


[26-Jul-18 06:23 AM] jl777c#5810
swap is assetA for assetB


[26-Jul-18 06:23 AM] siu#3920
ohh


[26-Jul-18 06:23 AM] jl777c#5810
bid is buy asset with native coin


[26-Jul-18 06:23 AM] siu#3920
ok... understood


[26-Jul-18 06:23 AM] jl777c#5810
ask is sell asset for native coin


[26-Jul-18 06:25 AM] siu#3920
@jorian  sent you some 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e


[26-Jul-18 06:28 AM] siu#3920
tx confirmed


[26-Jul-18 06:34 AM] jorian#4555
where


[26-Jul-18 06:34 AM] jorian#4555
i need a tokenid right?


[26-Jul-18 06:38 AM] jorian#4555
i see


[26-Jul-18 06:38 AM] jorian#4555
10000


[26-Jul-18 07:06 AM] jorian#4555
so what do i do next?


[26-Jul-18 07:07 AM] jl777c#5810
read the api docs and find bugs


[26-Jul-18 07:08 AM] siu#3920
put an ask


[26-Jul-18 07:13 AM] jorian#4555
```./komodo-cli -ac_name=ATEST tokenask 50 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1
error code: -1
error message:
basic_string::_M_construct null not valid```


[26-Jul-18 07:25 AM] siu#3920
is this yours?   {
    "funcid": "s",
    "txid": "aaa63cdc03d406dfd7fa8ccfaf7bd30e41c9e8b70649b090bfc8370e70763239",
    "vout": 0,
    "amount": "10000",
    "askamount": "10000",
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": "1000000.00000000",
    "price": "100.00000000"
  },


[26-Jul-18 07:30 AM] jorian#4555
no


[26-Jul-18 07:30 AM] jorian#4555
i didnt get to post any ask


[26-Jul-18 07:30 AM] jorian#4555
error


[26-Jul-18 07:35 AM] jl777c#5810
you need asset to post ask


[26-Jul-18 07:38 AM] siu#3920
but i sent you some


[26-Jul-18 07:40 AM] jorian#4555
```
./komodo-cli -ac_name=ATEST tokenbalance 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e
{
  "result": "success",
  "CCaddress": "RXEyDskp4aWHqAuXMCKHUMP1kUuU2t53ut",
  "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
  "balance": 10000
}```


[26-Jul-18 07:47 AM] jorian#4555
so i do `getnewaddress`, `validateaddress <addy>` and that's my pubkey?


[26-Jul-18 07:47 AM] jorian#4555
i then restart daemon with pubkey specified


[26-Jul-18 07:48 AM] jl777c#5810
yes


[26-Jul-18 07:51 AM] jorian#4555
how about an importprivkey


[26-Jul-18 07:51 AM] jorian#4555
@siu new pubkey 03fcc4b37ee767a67b75503832764b559d764d71c13785482b73609159aa6ae9ef


[26-Jul-18 07:53 AM] jl777c#5810
if you got the address from getnewaddress, shouldnt need to importprivkey


[26-Jul-18 07:54 AM] jorian#4555
i made address in kmd, then dumped privkey and imported in ATEST


[26-Jul-18 07:54 AM] jl777c#5810
that works too


[26-Jul-18 07:55 AM] jorian#4555
ok, but then i got the above error


[26-Jul-18 07:55 AM] jorian#4555
```./komodo-cli -ac_name=ATEST tokenbalance 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e
{
  "result": "success",
  "CCaddress": "RXEyDskp4aWHqAuXMCKHUMP1kUuU2t53ut",
  "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
  "balance": 10000
}``` but then ```./komodo-cli -ac_name=ATEST tokenask 50 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 1
error code: -1
error message:
basic_string::_M_construct null not valid```


[26-Jul-18 07:55 AM] jorian#4555
do those addresses need to match the address that links to pubkey?


[26-Jul-18 07:57 AM] siu#3920
f3f136375edec40efae0cc791132444170a342bb678d33311f072d11e5199c6d


[26-Jul-18 07:57 AM] siu#3920
sent tokens to @jorian


[26-Jul-18 07:57 AM] siu#3920
tokenid: 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e


[26-Jul-18 07:58 AM] jorian#4555
got them ```./komodo-cli -ac_name=ATEST tokenbalance 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e
{
  "result": "success",
  "CCaddress": "RFnLYXmb2Ngh9mazvxkxo4Sf3YvxX5eiat",
  "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
  "balance": 10000
}```


[26-Jul-18 08:00 AM] jorian#4555
nope, same error


[26-Jul-18 08:01 AM] jorian#4555
making clean and rebuilding


[26-Jul-18 08:07 AM] jorian#4555
still the same error


[26-Jul-18 08:11 AM] jl777c#5810
what branch?


[26-Jul-18 08:14 AM] jorian#4555
jl777


[26-Jul-18 08:14 AM] jorian#4555
do i need configuration settings?


[26-Jul-18 08:17 AM] jl777c#5810
no. your tokenask call works for me. let me add some error messages


[26-Jul-18 08:18 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenask 100 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 100
{
  "result": "success",
  "hex": "0100000003055359b9a447e90d1948e56ec92ea7db0a493cf3aa9600069e0ced5ac682ea610000000049483045022100a9f297e0ba99ab67bf91662dde4cd2a441d1c8730bf3aa06fcc667e8e64af19302202649561dcce63e227eb98434f507d3a5e20ce731bc51a641f2552c5f7fe2a14e01ffffffff393276700e37c8bf90b04906b7e8c9410ed37bafcf8cfad7df06d403dc3ca6aa010000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc814095428ac879d62bc4316e00ae4bd4745282ceb6c7f1f6db98cae7ab437904a9954d72b2c5dcdde92e710f9e25d4e1bdd62cef6225b41a65a9cdd7311fa09e2874a100af038001e3a10001ffffffffe12ed10181ea6c74de3e993da2208a8f795b20572a1a903b29e219ba50f76bd5020000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc8140f2c0f79d63949ef46c0e8a10f3d3aa9f6352833a2303f31fea1b8c029651628a345ab8296f57e4f3abd6f4085f4d069d75053b3f9d2afa1646fea2bf27ebb1caa100af038001e3a10001ffffffff046400000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0700000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401ccf078724e18090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce3739217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e0010a5d4e80000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
}
```


[26-Jul-18 08:18 AM] SHossain#0007
sendrawtransaction output:
```
AssetValidate (s)
vin1 26, vin2 81, vout0 100, vout1 7, 5faafa360b537c13340e44b8e3b01042464eed1a8a421e89de6c098936364107
```


[26-Jul-18 08:19 AM] jl777c#5810
pushed a version with error prints


[26-Jul-18 08:19 AM] SHossain#0007
@jorian if you have this token `9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e`, you can try to use fillask on my orders


[26-Jul-18 08:19 AM] SHossain#0007
updating


[26-Jul-18 08:20 AM] jl777c#5810
first jorian needs to be able to post an ask


[26-Jul-18 08:20 AM] jl777c#5810
@jorian how much ATEST do you have?


[26-Jul-18 08:20 AM] jorian#4555
0


[26-Jul-18 08:20 AM] SHossain#0007
ahaa... post your address


[26-Jul-18 08:20 AM] SHossain#0007
i will send you some


[26-Jul-18 08:20 AM] jorian#4555
ah


[26-Jul-18 08:22 AM] jorian#4555
RVCVaEHdH1gp1aPfu9MkgGBfdVNuW824PY


[26-Jul-18 08:22 AM] SHossain#0007
just few sec. updating komodod.


[26-Jul-18 08:23 AM] SHossain#0007
sent, 777777 1a54ab354c52a7e09c0847a36c13e1d3e027b2da9f4d6fc0c2b3145cddad8e86


[26-Jul-18 08:24 AM] SHossain#0007
you will find token orders with this `./komodo-cli -ac_name=ATEST tokenorders 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e`


[26-Jul-18 08:25 AM] jorian#4555
ok, thats it


[26-Jul-18 08:25 AM] jorian#4555
tokenask worked


[26-Jul-18 08:25 AM] SHossain#0007
did you use sendrawtransaction of the hex?


[26-Jul-18 08:27 AM] jorian#4555
just did


[26-Jul-18 08:27 AM] jorian#4555
and there it is ``` {
    "funcid": "s",
    "txid": "d1b2676bb118d7bb8604dc5bb0a320a2ffb6f7ee118bfd20ed33be3fbd0b9b62",
    "vout": 0,
    "amount": "50",
    "askamount": "50",
    "origaddress": "RFnLYXmb2Ngh9mazvxkxo4Sf3YvxX5eiat",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": "5.00000000",
    "price": "0.10000000"
  },```


[26-Jul-18 08:28 AM] jorian#4555
interesting


[26-Jul-18 08:29 AM] SHossain#0007
nice


[26-Jul-18 08:31 AM] SHossain#0007
for any transfer or order enntries, operation, we need to use `sendrawtransaction` call to broadcast the hex.


[26-Jul-18 08:31 AM] SHossain#0007
let's test different scenereos and we may face some bugs


[26-Jul-18 08:37 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenfillask 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e d1b2676bb118d7bb8604dc5bb0a320a2ffb6f7ee118bfd20ed33be3fbd0b9b62 50
totally filled!
{
  "result": "success",
  "hex": "01000000031a47a2fa94f27f7e98645a6827f9382991d76fcfd2d84b96065763d1cfed78fc02000000494830450221008be941e56b10fb51459f66288bb68936c55fd17ecbebd12b142f4575b0fe4bf702205f048ad69269ba81530230496fea42983aad88882b1ef7d08304e1230040fb0001ffffffff629b0bbd3fbe33ed20fd8b11eef7b6ffa220a3b05bdc0486bbd718b16b67b2d1000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140da534b773f52c77ebbd590330468ba49333acc0971da444de512b85d039f59f778c8bab7cb1be909b6473789b237966a0f137a9b24c93ebebe0d83ae34a6bd6fa100af038001e3a10001ffffffff2bf671abc3bdfb673c0103a3bd59282c1aee473c6ccc4b591cdb42dc469d68c4000000004847304402204fa686dfdc7c0b7d42e538751aee0534b54747df4f335fb4d3b0d1a86c68e96d02202083fa811dd4506ad83f6d58a420d31ff7ccbae84ea05399b616e3d6f373682401ffffffff050000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc3200000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc0065cd1d00000000232103fcc4b37ee767a67b75503832764b559d764d71c13785482b73609159aa6ae9efacf01710252d090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000004f6a4c4ce3539217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00000000000000002103fcc4b37ee767a67b75503832764b559d764d71c13785482b73609159aa6ae9ef00000000"
}
```


[26-Jul-18 08:38 AM] SHossain#0007
sendrawtransaction of this hex:
```
AssetValidate (S)
vin1 50, vout1 50, AssetValidateSellvin
Got 0.00000050 to origaddr.(RVCVaEHdH1gp1aPfu9MkgGBfdVNuW824PY)
0 0 50 50 500000000 500000000
got recvunitprice 0.10000000 >= 0.10000000 unitprice, new unitprice 0.00000000
fill validated
b6ebeaafced887fd63deb9207e0484570d49abe8fe4fcbaa026666d4ea3f902e
```


[26-Jul-18 08:39 AM] SHossain#0007
tx is in my rawmempool


[26-Jul-18 08:39 AM] jorian#4555
cool


[26-Jul-18 08:39 AM] SHossain#0007
confirmed


[26-Jul-18 08:39 AM] jorian#4555
order is gone


[26-Jul-18 08:39 AM] SHossain#0007
indeed üòÉ


[26-Jul-18 08:39 AM] jorian#4555
so what did we do just now? siu made a token, sent some to me and i sold it to you?


[26-Jul-18 08:39 AM] jorian#4555
or, transferred


[26-Jul-18 08:39 AM] jorian#4555
oh wait, my balance increased


[26-Jul-18 08:39 AM] jorian#4555
ah


[26-Jul-18 08:40 AM] jorian#4555
cool


[26-Jul-18 08:40 AM] jorian#4555
so this is a mini ethereum


[26-Jul-18 08:40 AM] SHossain#0007
or nxt


[26-Jul-18 08:40 AM] SHossain#0007
asset/token exchanged within an AC


[26-Jul-18 08:41 AM] jorian#4555
sold for AC


[26-Jul-18 08:41 AM] jorian#4555
so what if i have another token


[26-Jul-18 08:42 AM] jorian#4555
i'm gonna ask noobquestions


[26-Jul-18 08:43 AM] jorian#4555
that is swap?


[26-Jul-18 08:43 AM] jorian#4555
i guess


[26-Jul-18 08:43 AM] jl777c#5810
swap is totally untested, very likely crawling with bugs


[26-Jul-18 08:43 AM] jl777c#5810
but we need to retest buy side first


[26-Jul-18 08:43 AM] jorian#4555
ok, just wondering


[26-Jul-18 08:43 AM] jl777c#5810
i could have broken it


[26-Jul-18 08:43 AM] jl777c#5810
especially if multiple utxo are needed to fill


[26-Jul-18 08:44 AM] jorian#4555
so theoretically. ATEST with token a and BTEST with token b.  can those be exchanged?


[26-Jul-18 08:50 AM] SHossain#0007
we need a chain BTEST to make sure üòõ


[26-Jul-18 08:51 AM] jl777c#5810
for now no cross chain

{Reactions}
üëçüèΩ (2) 

[26-Jul-18 08:51 AM] SHossain#0007
@jorian i can put a fill bid order, do want to fill it?


[26-Jul-18 08:51 AM] SHossain#0007
or, i already have orders up


[26-Jul-18 08:52 AM] jorian#4555
how do i see those?


[26-Jul-18 08:52 AM] jorian#4555
oh i see


[26-Jul-18 08:52 AM] jorian#4555
bidamount vs askamount


[26-Jul-18 08:52 AM] jorian#4555
b == bid, s == ask?


[26-Jul-18 08:53 AM] jl777c#5810
yes and uppercase for the fill


[26-Jul-18 08:54 AM] SHossain#0007
```
'b' is the offer, 'B' is the fill
's' is the offer, 'S' is the ask
fillbid for bid
fillask for ask
fillswap for swap
```


[26-Jul-18 08:56 AM] jorian#4555
wait, i dont understand that. what is the difference between b and B?


[26-Jul-18 08:57 AM] SHossain#0007
```
vin2 9950, vout2 5, vout3 9945, Got 5.50000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
recvunitprice 1.1000000000000001 >= 1.1000000000000001 unitprice, new unitprice 0.0000000000000000
fillbuy validated
```


[26-Jul-18 08:58 AM] jorian#4555
yeah, i totally filled that one


[26-Jul-18 08:58 AM] jorian#4555
c66c txid


[26-Jul-18 09:00 AM] jl777c#5810
lower case letter is the offer, uppercase is filling of that offer


[26-Jul-18 09:00 AM] jl777c#5810
not sure what is confusing


[26-Jul-18 09:01 AM] jorian#4555
uppercase is history?


[26-Jul-18 09:01 AM] jl777c#5810
what?


[26-Jul-18 09:02 AM] jl777c#5810
do you understand you need to place an offer first


[26-Jul-18 09:02 AM] jorian#4555
yes


[26-Jul-18 09:02 AM] jl777c#5810
then to fill it


[26-Jul-18 09:02 AM] jl777c#5810
lowercase is the offer


[26-Jul-18 09:02 AM] jl777c#5810
upperase is the fill


[26-Jul-18 09:02 AM] jl777c#5810
there is no history rpc yet


[26-Jul-18 09:06 AM] SHossain#0007
@jorian you are welcome to submit a PR with easier wordings or explanation if you feel like :)
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenorders.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenorders.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[26-Jul-18 09:07 AM] jorian#4555
yeah, it could be me but it's not very clear yet. why would you need a fill?


[26-Jul-18 09:08 AM] jl777c#5810
if you place an offer, until someone fills the order, it just sits there


[26-Jul-18 09:08 AM] jorian#4555
that's the 'b'?


[26-Jul-18 09:08 AM] jl777c#5810
buy offer, bid


[26-Jul-18 09:08 AM] jl777c#5810
tokenbid -> 'b'


[26-Jul-18 09:08 AM] jl777c#5810
tokenbidfill -> 'B'


[26-Jul-18 09:08 AM] jl777c#5810
you place an order with 'b'


[26-Jul-18 09:09 AM] jl777c#5810
someone else fills it with 'B'


[26-Jul-18 09:09 AM] jl777c#5810
have you ever used a central exchange?


[26-Jul-18 09:09 AM] jorian#4555
got it. so the ones sitting now in the tokenorders are unconfirmed fills?


[26-Jul-18 09:09 AM] jl777c#5810
'b' is when you way you want to buy something


[26-Jul-18 09:09 AM] jl777c#5810
'B' is when you agree to a buy offer


[26-Jul-18 09:10 AM] jl777c#5810
actually a 'B' that was a partial fill, creates a 'b' for the balance


[26-Jul-18 09:10 AM] jl777c#5810
but it shows as 'B'


[26-Jul-18 09:18 AM] SHossain#0007 (pinned)
**Good to know:**

Fill: 'b' is the offer, 'B' is the fill
Ask: 's' is the offer, 'S' is the ask
fillbid for bid
fillask for ask
fillswap for swap
If you place an offer, until someone fills the order, it just sits there.

**buy offer, bid**
tokenbid -> 'b'
tokenbidfill -> 'B'
You place a buy order with 'b'
Someone else fills it with 'B'

**sell offer, ask**
tokenask -> 's'
tokenaskfill -> 'S'
You place a sell order with 's'
Someone else fills it with 'S'

{Reactions}
üëç 

[26-Jul-18 09:19 AM] SHossain#0007
Pinned a message.


[26-Jul-18 09:21 AM] jorian#4555
üëç


[26-Jul-18 09:42 AM] SHossain#0007
@jl777c what is `otherid` in tokenfillswap call?


[26-Jul-18 09:46 AM] jl777c#5810
the txid of the other token


[26-Jul-18 09:47 AM] jl777c#5810
to swap a token you need 2 tokenids


[26-Jul-18 09:52 AM] SHossain#0007
where can i find the other txid? do we need to put order first using `tokenswap numtokens tokenid otherid price`


[26-Jul-18 09:52 AM] SHossain#0007
?


[26-Jul-18 09:53 AM] jl777c#5810
yes, like when doing a bid, you need to specify the terms


[26-Jul-18 09:54 AM] jl777c#5810
so use tokenswap to define the pair to swap


[26-Jul-18 09:55 AM] SHossain#0007
ok. trying to place an order first


[26-Jul-18 09:57 AM] SHossain#0007
is this a correct command?


[26-Jul-18 09:58 AM] SHossain#0007
`./komodo-cli -ac_name=ATEST tokenswap 100 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 1`


[26-Jul-18 09:58 AM] SHossain#0007
i want to swap 100 of `921` token with `c5b` token at price 1


[26-Jul-18 09:59 AM] SHossain#0007
console gives me error
```
error code: -32601
error message:
Method not found
```


[26-Jul-18 10:03 AM] jl777c#5810
tokenaddress [pubkey]
tokenask numtokens tokenid price
tokenbalance tokenid [pubkey]
tokenbid numtokens tokenid price
tokencancelask tokenid asktxid
tokencancelbid tokenid bidtxid
tokencreate name supply description
tokenfillask tokenid asktxid fillunits
tokenfillbid tokenid bidtxid fillamount
tokenfillswap tokenid otherid asktxid fillunits
tokenorders [tokenid]
tokenswap numtokens tokenid otherid price
tokentransfer tokenid destpubkey amount


[26-Jul-18 10:04 AM] jl777c#5810
sorry help error: tokenswapask


[26-Jul-18 10:05 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenswapask 100 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 1 
{
  "result": "success",
  "hex": "01000000042e7b395ab1b87b6735b6df47d1756eb880a6ee643c80ef8ac5f6e84f655162ba000000004847304402206e80101156d7253c0ab8b3aa928edab3b02e64670a92806a879c8a572b2d3bf702204b1380d0ae78480c7f3567e78438d18e1bebfa494a37d2a9deff2a897da9272a01ffffffff0741363689096cde891e428a1aed4e464210b0e3b8440e34137c530b36faaa5f010000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc81402e6b14bbc8005a953bf0233d45bad375d4f120b9eab9a2c54e2ad3da258862252b670582de32c7c4aba56f0f43f3e22c64591edb66332847044dcfb287c76738a100af038001e3a10001ffffffff2e903fead4666602aacb4ffee8ab490d5784047e20b9de63fd87d8ceafeaebb6010000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc814066c5d84892d53cb23e1a3a96a78f19fc92633f5cfb1b45faf21c84270fb53aca1bc86f8757b29e61fe79fca815635ccdfc9419e890e11de07de824ca83a3bb5aa100af038001e3a10001ffffffffb759965cde1c911e303e4da9dba544a2737d1df3292d0d532b64f853a1cf202d020000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc81408ae122920afb107d2020972d4721a3d06214c1cd3a8bbf9ec922f88c2f83dace6542fd84435f088a99d1e330c57778e181ab236605e858a93a31eda462c1a7fda100af038001e3a10001ffffffff036400000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccca78724e18090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006f6a4c6ce3659217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5ec5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b5900e40b54020000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
```


[26-Jul-18 10:05 AM] SHossain#0007
sendrawtransaction output:
```
AssetValidate (e)
vin1 7, vin2 50, vin3 5, vout0 100, inputs 0.00000062 vs 0.00000100 outputs
CC Eval EVAL_ASSETS Invalid: asset inputs != outputs spending tx 5faafa360b537c13340e44b8e3b01042464eed1a8a421e89de6c098936364107
AssetValidate (e)
vin1 7, vin2 50, vin3 5, vout0 100, inputs 0.00000062 vs 0.00000100 outputs
CC Eval EVAL_ASSETS Invalid: asset inputs != outputs spending tx 5faafa360b537c13340e44b8e3b01042464eed1a8a421e89de6c098936364107
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```


[26-Jul-18 10:06 AM] jl777c#5810
ok, duplicated. thanks

{Reactions}
üëçüèΩ 

[26-Jul-18 10:27 AM] jl777c#5810
can you send me some 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e


[26-Jul-18 10:30 AM] SHossain#0007
sent 10 tokens ae7b7330f13625f70c893f2dc1c33495fdd7163ba5147545286a6097dc7d3462


[26-Jul-18 10:32 AM] SHossain#0007
@siu when you have some time please send me some `9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e` token. i have 52 tokens left üòÉ


[26-Jul-18 10:33 AM] siu#3920
Im driving right now. Will be at the office in around 40min.


[26-Jul-18 10:33 AM] SHossain#0007
no worries. when you are free


[26-Jul-18 10:34 AM] SHossain#0007
thanks


[26-Jul-18 10:40 AM] SHossain#0007
@jl777c 
```
$ ./komodo-cli -ac_name=ATEST tokenswapask 10 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 1
{
  "result": "success",
  "hex": "01000000022e903fead4666602aacb4ffee8ab490d5784047e20b9de63fd87d8ceafeaebb6030000004847304402203647846e6ec3db5ad1edb37b97199a8f4ac9fbe375a14a4d58ec39d7a08e30ce022033894b024d21d480540b53e70507899252f6459d44f2e7e7cbb43b318afbc31301ffffffff62347ddc97606a28457514a53b16d7fd9534c3c12d3f890cf72536f130737bae010000007b4c79a276a072a26ba067a565802103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc8140ffcc5b674da8e551a39abf4078f12c2e10fe6a0cfba4a220f92cdc84eae9fee964379923d4148155f6f93d6e59f679b5aca48c1bc81ee0ebf2303af736711b92a100af038001e3a10001ffffffff040a00000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc2500000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cce0f00f252d090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006f6a4c6ce3659217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5ec5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b5900ca9a3b000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
}
```
sendrawtx output:
```
AssetValidate (e)
vin1 47, vout0 10, vout1 37, 7194ae293330af80fdbe4b4b2c8b51194f12e334b4a0489288288c1b7336a65c```


[26-Jul-18 10:41 AM] SHossain#0007
the error popped up because i didn't have enough balance for 100 tokens swap. i had only 62. now tried 10, and output looks clean


[26-Jul-18 10:42 AM] SHossain#0007
waiting for the tx to confirm, still sitting in my mempool


[26-Jul-18 10:44 AM] SHossain#0007
order is now displaying on orderbook
```
  {
    "funcid": "e",
    "txid": "7194ae293330af80fdbe4b4b2c8b51194f12e334b4a0489288288c1b7336a65c",
    "vout": 0,
    "amount": "10",
    "askamount": "10",
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "otherid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": "10.00000000",
    "price": "1.00000000"
  },
```


[26-Jul-18 10:44 AM] SHossain#0007
now we have otherid


[26-Jul-18 10:44 AM] jl777c#5810
that's surprising. didnt expect it to work without bugs


[26-Jul-18 10:44 AM] SHossain#0007
someone with c5b can fill this order


[26-Jul-18 10:44 AM] jl777c#5810
you can verify the cancel works


[26-Jul-18 10:44 AM] jl777c#5810
and then fill


[26-Jul-18 10:45 AM] SHossain#0007
sure. let me also document them


[26-Jul-18 10:47 AM] jl777c#5810
pull latest


[26-Jul-18 10:48 AM] jl777c#5810
I changed the parameters a bit for swapfill


[26-Jul-18 10:50 AM] SHossain#0007
pulling


[26-Jul-18 10:52 AM] SHossain#0007
will there be any rpc call with `tokenswapbid`?


[26-Jul-18 10:53 AM] jl777c#5810
no


[26-Jul-18 10:53 AM] jl777c#5810
just flip around the tokenids


[26-Jul-18 10:54 AM] SHossain#0007
understood


[26-Jul-18 10:54 AM] jl777c#5810
gui will have to take care of such things


[26-Jul-18 11:00 AM] SHossain#0007
will use `tokencancelask tokenid asktxid` to cancel the swap ask


[26-Jul-18 11:01 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokencancelask 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 7194ae293330af80fdbe4b4b2c8b51194f12e334b4a0489288288c1b7336a65c
{
  "result": "success",
  "hex": "010000000234c335a46dadea8e42420b0e284f5577cfbcb7764a8d5c3b61312b71c5b14d0800000000494830450221009f365d429d03df66b34cad764368092498ebd7340587c558ea19c4248202317b0220531524ef076f9e5b26ec5aa38b3078c041f8d0603b85552177ef14d00b0e499601ffffffff5ca636731b8c28889248a0b434e3124f19518b2c4b4bbefd80af303329ae9471000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702814066f6a9d580da0ac901ada8c61922d93da005e92c9e419a44c1bcbf9ec8ad43790dfc8ca71b5c21b79a58aa173fb71e1ab0b82c590dc883359de60f743fabda16a100af038001e3a10001ffffffff030a00000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401ccf078724e18090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0000000000000000246a22e3789217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e00000000"
}
```
sendrawtransaction output:
```
AssetValidate (x)
vin1 10, vout0 10, AssetValidateSellvin
Got 0.00000010 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
21d152480275568e3f82a5049d8b30308e3739ebd98171e075a75fea504364cd
```


[26-Jul-18 11:02 AM] jl777c#5810
cool, so all rpc calls other than swapfill we have seen work


[26-Jul-18 11:17 AM] SHossain#0007
yes


[26-Jul-18 11:17 AM] siu#3920
ok im back


[26-Jul-18 11:18 AM] SHossain#0007
üëçüèΩ


[26-Jul-18 11:18 AM] siu#3920
please pass me your pubkey to send you some tokens


[26-Jul-18 11:19 AM] SHossain#0007
03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc


[26-Jul-18 11:20 AM] siu#3920
70b7d2a8d856f070bceeb8694f0d2cc357d5fffb022d2abec7d73244e3521206


[26-Jul-18 11:20 AM] siu#3920
sent


[26-Jul-18 11:21 AM] SHossain#0007
thanks


[26-Jul-18 11:21 AM] SHossain#0007
i have a new order up. please fill it


[26-Jul-18 11:21 AM] siu#3920
which one?


[26-Jul-18 11:21 AM] SHossain#0007
`tokenfillswap tokenid otherid asktxid fillamount`


[26-Jul-18 11:22 AM] SHossain#0007
```
  {
    "funcid": "e",
    "txid": "00a3d076c1fd818c331b13cba2691b5b9275df32a4a9ddeee265ce342c7979dc",
    "vout": 0,
    "amount": "10",
    "askamount": "10",
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "otherid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": "0.00000010",
    "price": "0.00000001"
  },
```


[26-Jul-18 11:23 AM] SHossain#0007
@jl777c this is the command that created the above order
`./komodo-cli -ac_name=ATEST tokenswapask 10 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 1`
price looks very low. look like using satoshi


[26-Jul-18 11:23 AM] siu#3920
`AcceptToMemoryPool reject nonstandard transaction: dust`


[26-Jul-18 11:24 AM] SHossain#0007
yes. because the price is in satoshi


[26-Jul-18 11:24 AM] siu#3920
```./komodo-cli -ac_name=ATEST sendrawtransaction 0100000003061252e34432d7c7be2a2d02fbffd557c32c0d4f69b8eebc70f056d8a8d2b7700200000049483045022100b54f36b259b9e3ccdef334e4917160a177df8be94ac82df6a168b844d0584a5702200668bb8fd10bbff464039c1c88bec6f9294ae033a3d433cf93215731e5d2d9c201ffffffffdc79792c34ce65e2eedda9a432df75925b1b69a2cb131b338c81fdc176d0a300000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281402fb563cd70fac0c58a04fc65603a57d6aab50d447f3cd083f0e2e76d1a9117196ea9b09e3b15208df370956054debe8620ac79958206ca1f0ba009525da2388ca100af038001e3a10001ffffffff06ba6dd22f0082e3fc91d6cffd734a6e7a0c3aaf0ee4bf28e9abb15ea253d7fb010000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140abede449eb82380d68f95ef10f11a72c2d8eec286b9486558940703ed6f0dcf162a736b0c581e12af7d49842736ca154206e6ed31565d9122c4ff97f272b12b4a100af038001e3a10001ffffffff060000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0a00000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc0a00000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac5743993b00000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cce051724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000006f6a4c6ce3459217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5ec5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b5900000000000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000
error code: -26
error message:
64: dust
```


[26-Jul-18 11:24 AM] SHossain#0007
let me put another order with higher price. jl777 needs to fix that part


[26-Jul-18 11:25 AM] SHossain#0007
@siu i'll have this order up as soon as the tx confirms `592db74266bd2fd955a4fdbc2723e8c3179a4a6ca082ad96dfdd717e4af174f3`


[26-Jul-18 11:25 AM] siu#3920
ok


[26-Jul-18 11:25 AM] SHossain#0007
`"funcid": "e",` are the swap orders


[26-Jul-18 11:26 AM] jl777c#5810
plz test everything other than swap, it will be  a while before I can fix it


[26-Jul-18 11:26 AM] siu#3920
ok


[26-Jul-18 11:28 AM] SHossain#0007
i have plenty other order in the orderbook. please help me clearing them up üòõ


[26-Jul-18 11:28 AM] siu#3920
sure


[26-Jul-18 11:29 AM] SHossain#0007
```
vin2 999900001, vout2 90, vout3 999899911, Got 90.00000000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
recvunitprice 1.0000000000000000 >= 1.0000000000000000 unitprice, new unitprice 0.0000000000000000
fillbuy validated
```


[26-Jul-18 11:43 AM] siu#3920
this one will be very hard to fill üòÇ


[26-Jul-18 11:43 AM] siu#3920
{
    "funcid": "s",
    "txid": "396425cf7ff031e4c0263b3e379f40af4c1d742ace8a1a8283bbc06ce9aa4b5c",
    "vout": 0,
    "amount": "15000",
    "askamount": "15000",
    "origaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
    "tokenid": "9eec77a3e02dec0ca60ead7e8cfb6cb6809c40fe54b804e51d5c6c2a445ffbf3",
    "totalrequired": "184467425737.09552002",
    "price": "12297828.38247303"
  },


[26-Jul-18 11:50 AM] jl777c#5810
yes try to overflow prices, underflow, in general just mess things up


[26-Jul-18 11:51 AM] SHossain#0007
doesn't look like my order üòÑ


[26-Jul-18 11:53 AM] jl777c#5810
it does seem it will take multiple utxo to partial fill that one


[26-Jul-18 11:56 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=ATEST sendrawtransaction 010000000303116a918fe41f4fc4a5c14eda50d4cc1d4817be26f2664739e8ee0e7bbc4e4b0100000049483045022100e2a2f88e49a4c9d09764b8e1aa1b6752217d5a240a819a39a1daa96d0f55717102202636f3ded25c54fe430314f80e6f015a1f82d37ec452e0e372da871c7de1601501ffffffff5890b79f42a2039d6b661cec3f0a748f8122b51427d2747d7cddb45e7c774988000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140842be835651ce3fb750a4a0ad8d96a4006c77c81e5986c7f2a8ab0ff08c049360e71775999224c0e2db915ab5303061a1943b835e79c35c43cac1ddc20ee5daaa100af038001e3a10001ffffffff03116a918fe41f4fc4a5c14eda50d4cc1d4817be26f2664739e8ee0e7bbc4e4b030000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140c17e433d9485920d8bbd95acf60bc450193c1e9de09fbb608b9a0c251e6db4d52d559455376321c1793728d80b408ba5f998368b1b56717ff9bc008fa464e9afa100af038001e3a10001ffffffff060a00000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00000000000000002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac0b00000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401ccd503000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401ccf0a29a3b000000002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3429217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5ef5aa9041000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000
error code: -26
error message:
64: dust```


[26-Jul-18 11:57 AM] siu#3920
this one is not working


[26-Jul-18 11:57 AM] siu#3920
```tokenfillbid 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e 8849777c5eb4dd7c7d74d22714b522818f740a3fec1c666b9d03a2429fb79058 11```


[26-Jul-18 11:58 AM] siu#3920
```./komodo-cli -ac_name=ATEST sendrawtransaction 010000000303116a918fe41f4fc4a5c14eda50d4cc1d4817be26f2664739e8ee0e7bbc4e4b010000004847304402201d42dd7fd48728d8589786677fb13348e0cf43408fbcd622d8c83b87531d3aaf02207bf08ba82e2fc77eab1ca4581eb3db9284b4ef7f402328cff6b2c08d19021bb301ffffffff5c4baae96cc0bb83821a8ace2a741d4caf409f373e3b26c0e431f07fcf256439000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281403dcc53b4f6bef8275271d7acb4fdaf06fcfd2704db533a37b0d8c35cbfdebf92706ef0b16ae3225666947f55a0b8170391f2978e70cbe31aec2fec6e336e3512a100af038001e3a10001ffffffff03116a918fe41f4fc4a5c14eda50d4cc1d4817be26f2664739e8ee0e7bbc4e4b04000000484730440220134ce5fa1b0dfd41010e761fbc51ee187816040e54fe52dcd94e80628f06214d022033dcaa5d89dda2eed20e4132354678113d969ddbf0925fc172cb84f6317e2d7801ffffffff05983a000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0000000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc00000000000000002321027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392acc0e90036160900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000004f6a4c4ce3539eec77a3e02dec0ca60ead7e8cfb6cb6809c40fe54b804e51d5c6c2a445ffbf3006808c1a2feffff21027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e33039200000000
error code: -26
error message:
64: dust
```


[26-Jul-18 11:58 AM] siu#3920
again with another ask


[26-Jul-18 11:58 AM] siu#3920
but this one is because of the price and size i guess


[26-Jul-18 11:59 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenfillask 9eec77a3e02dec0ca60ead7e8cfb6cb6809c40fe54b804e51d5c6c2a445ffbf3 396425cf7ff031e4c0263b3e379f40af4c1d742ace8a1a8283bbc06ce9aa4b5c 19000
```


[26-Jul-18 11:59 AM] siu#3920
```{
    "funcid": "s",
    "txid": "396425cf7ff031e4c0263b3e379f40af4c1d742ace8a1a8283bbc06ce9aa4b5c",
    "vout": 0,
    "amount": "15000",
    "askamount": "15000",
    "origaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
    "tokenid": "9eec77a3e02dec0ca60ead7e8cfb6cb6809c40fe54b804e51d5c6c2a445ffbf3",
    "totalrequired": "184467425737.09552002",
    "price": "12297828.38247303"
  },
```


[26-Jul-18 12:01 PM] jl777c#5810
184467425737.09552002 that looks like overflow


[26-Jul-18 12:02 PM] siu#3920
yeah, but im not being able to fill the asks of a token i own


[26-Jul-18 12:02 PM] jl777c#5810
reproduced both


[26-Jul-18 12:03 PM] jl777c#5810
the problem is the overflow:     "totalrequired": "184467425737.09552002",


[26-Jul-18 12:03 PM] jl777c#5810
that messes up the tx


[26-Jul-18 12:03 PM] jl777c#5810
need to make a new asset


[26-Jul-18 12:04 PM] siu#3920
but im not able to fill any other ask for token 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e


[26-Jul-18 12:04 PM] siu#3920
which is the one i own most supply of


[26-Jul-18 12:05 PM] jl777c#5810
without an example I cant do anything


[26-Jul-18 12:07 PM] siu#3920
ahh wait


[26-Jul-18 12:07 PM] siu#3920
disregard me


[26-Jul-18 12:08 PM] siu#3920
was using tokenfillbid instead of ask


[26-Jul-18 12:13 PM] SHossain#0007
aha


[26-Jul-18 12:44 PM] siu#3920
This one is giving me errors


[26-Jul-18 12:44 PM] siu#3920
```  {
    "funcid": "s",
    "txid": "aaa63cdc03d406dfd7fa8ccfaf7bd30e41c9e8b70649b090bfc8370e70763239",
    "vout": 0,
    "amount": "10000",
    "askamount": "10000",
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "totalrequired": "1000000.00000000",
    "price": "100.00000000"
  },
```


[26-Jul-18 12:45 PM] siu#3920
ok, no error, seems more like issue with volume


[26-Jul-18 12:47 PM] SHossain#0007
what kind of error?


[26-Jul-18 12:48 PM] SHossain#0007
did you check your balance if you have enough? i had issues with 1 order. later i realised that i dont' have enough balance to fill the order


[26-Jul-18 12:49 PM] jl777c#5810
I do need to add more errorchecking


[26-Jul-18 12:59 PM] siu#3920
is someone posting more orders?


[26-Jul-18 01:00 PM] siu#3920
i keep filling bids and asks and new ones popup :p


[26-Jul-18 01:02 PM] jl777c#5810
try prices that dont divide evenly, i think there are cases where the tx created will be rejected due to rounding error


[26-Jul-18 01:05 PM] SHossain#0007
i didn't post any new order


[26-Jul-18 01:06 PM] SHossain#0007
i want my previous ones to get filled or i'll cancel them. üòõ


[26-Jul-18 01:09 PM] siu#3920
im working on getting all orders closed


[26-Jul-18 01:09 PM] SHossain#0007
i see that you already filled most of the orders. only few entries left. compared to 2 hours ago


[26-Jul-18 01:11 PM] siu#3920
ill only leave the ones that give errors


[26-Jul-18 01:13 PM] SHossain#0007
cool


[26-Jul-18 01:13 PM] SHossain#0007
are we getting a new chain setup ?


[26-Jul-18 01:15 PM] siu#3920
what do you mean?


[26-Jul-18 01:15 PM] siu#3920
a new chain?


[26-Jul-18 01:16 PM] SHossain#0007
sorry, misunderstood jl777's message. he meant new asset üòõ


[26-Jul-18 01:20 PM] SHossain#0007
5 orders left


[26-Jul-18 01:30 PM] siu#3920
https://pastebin.com/PnUjMw6f

{Embed}
https://pastebin.com/PnUjMw6f
./komodo-cli -ac_name=ATEST sendrawtransaction 0100000006209922110...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[26-Jul-18 01:30 PM] siu#3920
```AssetValidateSellvin
Got 0.00000010 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
assets vout0 10, vin1 10, vout2 999900010 -> orig, vout1 0, total 10000000000
ValidateAssetRemainder: orig_nValue == 10 || received_nValue == 0 || paidunits == 999900010 || totalunits == 10000000000
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fill spending tx 592db74266bd2fd955a4fdbc2723e8c3179a4a6ca082ad96dfdd717e4af174f3
```


[26-Jul-18 01:30 PM] siu#3920
```./komodo-cli -ac_name=ATEST tokenfillswap 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 592db74266bd2fd955a4fdbc2723e8c3179a4a6ca082ad96dfdd717e4af174f3 10
```


[26-Jul-18 01:31 PM] siu#3920
```{
    "funcid": "e",
    "txid": "592db74266bd2fd955a4fdbc2723e8c3179a4a6ca082ad96dfdd717e4af174f3",
    "vout": 0,
    "amount": "10",
    "askamount": "10",
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "otherid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": "100.00000000",
    "price": "10.00000000"
  }
```


[26-Jul-18 01:31 PM] siu#3920
so , i know @jl777c said to not test fillswap for now, but i emptied all other orders in the orderbook and tried to test this order


[26-Jul-18 01:32 PM] siu#3920
here is the report for eveyrthing i did and what order i tried to fill


[26-Jul-18 01:32 PM] siu#3920
pastebin is because the hex got too big to be pasted here


[26-Jul-18 01:34 PM] jl777c#5810
any bugs other than swap?


[26-Jul-18 01:38 PM] siu#3920
i was able to fill all other orders trying different variations of over supply or lower supply


[26-Jul-18 01:38 PM] jl777c#5810
so all the amounts in the tx were ok?


[26-Jul-18 01:39 PM] jl777c#5810
your balances are exactly as expected


[26-Jul-18 01:40 PM] siu#3920
balances changed


[26-Jul-18 01:40 PM] siu#3920
cant be sure if its exactly what i asked for


[26-Jul-18 01:40 PM] jl777c#5810
i would hope so


[26-Jul-18 01:40 PM] siu#3920
sinc ei have no explorer to be sure


[26-Jul-18 01:40 PM] jl777c#5810
your wallet balance


[26-Jul-18 01:41 PM] SHossain#0007
`getbalance`


[26-Jul-18 01:41 PM] jl777c#5810
you can also use addressbalance


[26-Jul-18 01:41 PM] jl777c#5810
curl --user user2254844184:pass7e0f2dab2daf0ece6be6310226dcd83b096b36ae0ce996765e45fe56c037e7f301 --data-binary '{"jsonrpc": "1.0", "id":"curltest", "method": "getaddressbalance", "params": [{"addresses": ["RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6"]}] }' -H 'content-type: text/plain;' http://127.0.0.1:42840/


[26-Jul-18 01:41 PM] jl777c#5810
that works for any address


[26-Jul-18 01:41 PM] jl777c#5810
dont need explorer


[26-Jul-18 01:41 PM] jl777c#5810
we kind of need to make sure both buy side and sell side are exact to the satoshi


[26-Jul-18 01:41 PM] jl777c#5810
partial fills, exact fills, overfills


[26-Jul-18 01:42 PM] jl777c#5810
multiple utxos for fills


[26-Jul-18 01:43 PM] siu#3920
yes


[26-Jul-18 01:43 PM] siu#3920
{"result":{"balance":858955849650000,"received":1766500438910000},"error":null,"id":"curltest"}


[26-Jul-18 01:44 PM] siu#3920
i guess its ok


[26-Jul-18 01:52 PM] siu#3920
ok


[26-Jul-18 02:01 PM] SHossain#0007
down to 3 orders


[26-Jul-18 02:01 PM] SHossain#0007
i will create a new token


[26-Jul-18 02:02 PM] siu#3920
im off for now


[26-Jul-18 02:02 PM] siu#3920
will take over later or tomorrow


[26-Jul-18 02:06 PM] SHossain#0007
üëçüèΩ


[26-Jul-18 02:07 PM] SHossain#0007
i have created new token, will distribute to all pubkeys `43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add`


[26-Jul-18 02:09 PM] SHossain#0007
@jl777c would there be any rpc call similar to `sendmany` in the future?


[26-Jul-18 02:11 PM] SHossain#0007
a lot of tokens :)
```
{
  "result": "success",
  "CCaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
  "tokenid": "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add",
  "balance": 10000000000000
}
```


[26-Jul-18 02:17 PM] siu#3920
028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27


[26-Jul-18 02:17 PM] siu#3920
send me some


[26-Jul-18 02:19 PM] SHossain#0007
yep. sending everyone from the spreadsheet 7777777 tokens


[26-Jul-18 02:20 PM] SHossain#0007
i need to send them 1 by one...and in the middle need to wait for previous tx to confirm. otherwise, the next broadcast fails


[26-Jul-18 02:20 PM] siu#3920
im going now


[26-Jul-18 02:20 PM] siu#3920
see ya.


[26-Jul-18 02:20 PM] SHossain#0007
@siu this is yours`4fab51004aacd746df8db9949974083c1c93d77689fd63c2c222c869c75546b1`


[26-Jul-18 02:52 PM] SHossain#0007
@jl777c @Alright @jorian @gcharang @siu you got new tokens in your pubkey(s)
tokenid: `43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add`
total amount of token: `10000000000000`
sent to each pubkey: `7777777`
happy spending üòÉ

{Reactions}
üëç 

[26-Jul-18 03:07 PM] siu#3920
ü§ë ü§ë ü§ë


[26-Jul-18 09:10 PM] Alright#0419
the overflow in the orderbook is from my tokenask with a negative price


[26-Jul-18 09:12 PM] Alright#0419
Have 2 nodes on different chains


[26-Jul-18 09:14 PM] Alright#0419
Oh nope, not different chains, just one refuses to sync ü§î


[26-Jul-18 09:15 PM] Alright#0419
no errors or anything, just stuck at 
```
2018-07-27 04:14:31 receive version message: /MagicBean:1.0.15/: version 170003, blocks=3867, us=195.201.137.5:36458, peer=1
2018-07-27 04:14:31 Added time data, samples 2, offset +0 (+0 minutes)
```


[26-Jul-18 09:17 PM] Alright#0419
deleted chain and resynced, but that bug keeps happening from time to time, can't figure out why


[26-Jul-18 11:06 PM] Alright#0419
`tokenbid` and `tokenbidfill` are messed up in that it gives the node that did `tokenbid` both the native coins and tokens


[26-Jul-18 11:07 PM] Alright#0419
Maybe I'm misunderstanding this? I thought I was crazy at first when I was looking at these numbers. Have to look at the vins/vouts of each tx


[26-Jul-18 11:18 PM] Alright#0419
Ok, definitely something weird with this. On one node I did 
```
./komodo-cli -ac_name=ATEST tokenbid 10 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add 1
```
Balances for that node previous to placing the bid:
```
./komodo-cli -ac_name=ATEST tokenbalance 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add
{
  "result": "success",
  "CCaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
  "tokenid": "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add",
  "balance": 105
}

./komodo-cli -ac_name=ATEST getbalance
239089642.15739731
```

On the other node I filled that bid
```
./komodo-cli -ac_name=ATEST tokenfillbid 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add c5025232d5415b4bf943a31fa57eafe940fe554d7139c774df1d0e09f07abd10 10
```
balances previous to filling it: 
```
./komodo-cli -ac_name=ATEST tokenbalance 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add
{
  "result": "success",
  "CCaddress": "R9sDyKt2kW5uJaoZT6GF9e3WRbGioBuhoZ",
  "tokenid": "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add",
  "balance": 15555449
}

./komodo-cli -ac_name=ATEST getbalance
115399846.00173368
```


[26-Jul-18 11:19 PM] Alright#0419
The node doing `tokenfillbid` paid 10 ATEST and 10 tokens to the node that did `tokenbid`, yes?


[26-Jul-18 11:19 PM] Alright#0419
Am I seeing that correctly?


[26-Jul-18 11:27 PM] Alright#0419
So to put it simply, the node that placed the bid, gained 10 tokens and paid no ATEST. The node that filled the bid paid 10 tokens and gained 10 ATEST.


[26-Jul-18 11:40 PM] Alright#0419
node0 before
```
./komodo-cli -ac_name=ATEST tokenbalance 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add
{
  "result": "success",
  "CCaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
  "tokenid": "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add",
  "balance": 105
}

./komodo-cli -ac_name=ATEST getbalance
239089642.15739731
```
node0 after
```
./komodo-cli -ac_name=ATEST tokenbalance 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add
{
  "result": "success",
  "CCaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
  "tokenid": "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add",
  "balance": 115
}

./komodo-cli -ac_name=ATEST getbalance
239089642.15719731
```
node1 before
```
./komodo-cli -ac_name=ATEST tokenbalance 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add
{
  "result": "success",
  "CCaddress": "R9sDyKt2kW5uJaoZT6GF9e3WRbGioBuhoZ",
  "tokenid": "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add",
  "balance": 15555449
}

./komodo-cli -ac_name=ATEST getbalance
115399846.00173368
```
node1 after
```
./komodo-cli -ac_name=ATEST tokenbalance 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add
{
  "result": "success",
  "CCaddress": "R9sDyKt2kW5uJaoZT6GF9e3WRbGioBuhoZ",
  "tokenid": "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add",
  "balance": 15555439
}
./komodo-cli -ac_name=ATEST getbalance
115399856.00163368
```


[27-Jul-18 02:02 AM] jl777c#5810
this is the type of bug I was expecting. it does seem that the bidder got a pretty good deal. investigating


[27-Jul-18 02:06 AM] jl777c#5810
do you have the bidfill rawtx? I keep saying I need the rawtx to troubleshoot


[27-Jul-18 02:15 AM] Alright#0419
```
0100000003061892e4cdb07ee1f9d7a944c27ff5c242b536d8f8d8cd77a5bd71b4d4a3c1450000000049483045022100ef185d1046300c7644b9a0cbab40571ccfd68a3308956cc0b20660e7157bfa51022055826ba667433e172d0bac56833c9a2175dde48cc5eecc92729d173a4be2b91b01ffffffff10bd7af0090e1ddf74c739714d55fe40e9af7ea51fa343f94b5b41d5325202c5000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702814063abadef81d977954446083bc229335d80407bae4d7077d67257192be1d376186146ac6deb3bbb4562e3796d1526cbed45ac51a6fcc44ff4b9d31cb5ea002dfea100af038001e3a10001ffffffff8ee494766e6f4a7a5d9b47c7bc88ad3821c99af2ddcb2ff1875b6b808a927809000000007b4c79a276a072a26ba067a56580210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b5608140a3fbad58856a8a631cac5b802e117d3095f9624e0cfb0d19f4a8831781d77304584d94391504af846080f073d9df68801c9de43ecc2be5a8cf385ea3c92e3c93a100af038001e3a10001ffffffff060000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00ca9a3b0000000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac0a00000000000000302ea22c8020329d8a3e0e89b68e469d087203351d16856e699e043838d45c2efbb170b87cca8103120c008203000401cce7ad760000000000302ea22c8020a480be1cec6d9cab424b1576571e09f3a381ad090668a146f02340a498f009b38103120c008203000401ccf078724e1809000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac00000000000000004f6a4c4ce34243850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add000000000000000021027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e33039200000000
```


[27-Jul-18 02:16 AM] Alright#0419
./komodo-cli -ac_name=ATEST tokenfillbid 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add c5025232d5415b4bf943a31fa57eafe940fe554d7139c774df1d0e09f07abd10 10


[27-Jul-18 02:16 AM] Alright#0419
Sorry, I started looking at the raw txs myself and forgot to post them here


[27-Jul-18 02:16 AM] jl777c#5810
and for the initial bid?


[27-Jul-18 02:17 AM] jl777c#5810
what is the normal address for node0 and node1


[27-Jul-18 02:17 AM] Alright#0419
```
010000000102cca2e8fdaba2b80607a6d0224f81cdf86db9f26f4475325c18433fcbdde196000000004948304502210082cae3bce6c46ae30d7dc41cd21dcd353cfc1f94d0b85a087be53789b122911f022047b9c7dc036e8ae163bacc153881281d33ff32b66e98c02456b72c4bffec627201ffffffff0300ca9a3b00000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccf0aed712180900002321027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392ac00000000000000004f6a4c4ce36243850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add0a0000000000000021027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e33039200000000
```


[27-Jul-18 02:18 AM] Alright#0419
node0 is RNv5ppQ2G7BLA2EFhFj86upZJr9tzwuuvi


[27-Jul-18 02:18 AM] Alright#0419
nodo1 RTNpztwViPEVACRbCi2B7w28QPuoByk3eC


[27-Jul-18 02:18 AM] jl777c#5810
what were the vouts for the bid and fill? that is the only way to track down how node0 got double paid


[27-Jul-18 02:18 AM] Alright#0419
that's the address for each pubkey


[27-Jul-18 02:18 AM] Alright#0419
looking at it still, had me a bit confused tbh


[27-Jul-18 02:18 AM] jl777c#5810
the bidfill does not pay RNv5 at all


[27-Jul-18 02:19 AM] jl777c#5810
are you 100% sure there were no other transactions that confirmed that ended up paying 10 ATEST to RNv


[27-Jul-18 02:19 AM] Alright#0419
I'll reproduce it again


[27-Jul-18 02:21 AM] jl777c#5810
no need


[27-Jul-18 02:21 AM] jl777c#5810
we believe in the rawtransaction


[27-Jul-18 02:22 AM] Alright#0419
I was having trouble figuring out where that 10 ATEST came from


[27-Jul-18 02:22 AM] jl777c#5810
please make a list of the vouts for the bid and bidfill, I can do it if you dont know what I mean


[27-Jul-18 02:22 AM] Alright#0419
the bid vouts matched the assets.cpp doc


[27-Jul-18 02:22 AM] jl777c#5810
and the fill?


[27-Jul-18 02:23 AM] jl777c#5810
and it didnt bonus the bidder with his coins back?


[27-Jul-18 02:23 AM] jl777c#5810
I am thinking it could be possible that assets are satoshis that they could be bonused back and absorbed with a lower txfee


[27-Jul-18 02:23 AM] jl777c#5810
and the way the validation code works, if you are giving a better deal than what was asked for, it wouldnt complain


[27-Jul-18 02:24 AM] Alright#0419
I'm doing it again right now. I'll have a better understanding if I do this again


[27-Jul-18 02:25 AM] jl777c#5810
ok


[27-Jul-18 02:26 AM] jl777c#5810
since the bidfill isnt paying normal coins to node0, this seems a false report


[27-Jul-18 02:30 AM] Alright#0419
ok, again the node that places the bid receives tokens without paying for them. The node that fills the bid receives coins from somewhere other than the node placing the bid. Looking at the inputs of the fillbid


[27-Jul-18 02:31 AM] Alright#0419
tokenbid:
```
0100000001030646d4e0fdf481801e5977de00ce401b38a28980585e9d4ee3ca35bf2aca7c000000004847304402202075f69f6433fa069f2a7fd1edb5138b2edc492b3cb2f9538f4b23f5835a835c0220080beb30fe9fe53ea33d969d79785cfe5afd17167c83ae8dd221f018b3e86d5801ffffffff030094357700000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccf0e43cd7170900002321027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392ac00000000000000004f6a4c4ce36243850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add140000000000000021027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e33039200000000
```


[27-Jul-18 02:31 AM] Alright#0419
fillbid:
```
0100000003063708207c69ceabff76ac687dd3cbab9bcdb16349b1791839c759075972a5270000000049483045022100fe22c49b75f2503b7bfb29dc7343a8adda8a05a77f9b8f91d4fdd128bfc1ea0a02200b65f44b3da6a9b52e132bf71715bbe556cf42d30ebd891333c90c1806ce8cd001ffffffffbe7e2135a0f8dbc5903c88afbbeb5170a618d8955d08230323b2aa3b08044291000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140b3e5a780222b4e300ed6e44379dbad43bb311f133928e8ac949858d154226c797b850379a80c004332e905dce38887a62652100f7f85d7888b5ff7b4eee7a4e3a100af038001e3a10001ffffffff713dc61604cfde2d84647d6662f1a7b1f8ed8c3cf09abbf1af1805a8050b4068030000007b4c79a276a072a26ba067a56580210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b5608140650e77345673551d12511114fc3dec81cd7da5c83c9eb3ff3156a653853b60d944f8f596798be326e14aafd8bd1e23e3b896db63c643042a106347f84abf4129a100af038001e3a10001ffffffff060000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc009435770000000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac1400000000000000302ea22c8020329d8a3e0e89b68e469d087203351d16856e699e043838d45c2efbb170b87cca8103120c008203000401ccd3ad760000000000302ea22c8020a480be1cec6d9cab424b1576571e09f3a381ad090668a146f02340a498f009b38103120c008203000401ccf078724e1809000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac00000000000000004f6a4c4ce34243850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add000000000000000021027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e33039200000000
```


[27-Jul-18 02:32 AM] Alright#0419
trying to figure out where these coins come from


[27-Jul-18 02:34 AM] Alright#0419
the outputs of fillbid look correct


[27-Jul-18 02:42 AM] Alright#0419
I'm going to spend a bit of time setting up an explorer for this chain. Trying to decode each vin/vout has me going in circles right now


[27-Jul-18 03:00 AM] jl777c#5810
i think you must have vins in a different address that is funding the original bid


[27-Jul-18 03:01 AM] jl777c#5810
you need to understand vin and vout, rawtransactions.


[27-Jul-18 03:02 AM] jl777c#5810
did you check the balance of node0 AFTER the bid confirmed? my guess is that its ATEST didnt change


[27-Jul-18 03:03 AM] jl777c#5810
my theory explains all the data points you posted about this just need to check the vin and where it came from


[27-Jul-18 03:03 AM] jl777c#5810
ie. get the rawtransaction for the vin and see what address had the funds


[27-Jul-18 03:11 AM] jl777c#5810
...


[27-Jul-18 03:11 AM] jl777c#5810
but something is still wrong, if you used the getbalance rpc call, that should account for all ATEST in the wallet


[27-Jul-18 03:11 AM] jl777c#5810
ok, so definitely something strange here. plz make a tally of all vins/vouts for both the bid and fill, including change


[27-Jul-18 03:12 AM] jl777c#5810
coins dont just disappear, other than txfee that went to the miner


[27-Jul-18 03:15 AM] Alright#0419
I know this sounds nuts, but it seems like coins are appearing from somewhere other than my wallet. I'm using Decker's script to set up an insight explorer right now. Will definitely help if insight will work at least some what properly with the cryptocondition vouts


[27-Jul-18 03:15 AM] Alright#0419
I'm not losing coins. I'm gaining them from I don't know where


[27-Jul-18 03:15 AM] jl777c#5810
plz check the vins and vouts


[27-Jul-18 03:16 AM] Alright#0419
Each time I start to look at the raw txs, and trace back the vins I just keep confusing myself


[27-Jul-18 03:16 AM] jl777c#5810
do you know about getrawtransaction txid 1


[27-Jul-18 03:16 AM] jl777c#5810
for each vin do the above to get the rawtx. find the corresponding output


[27-Jul-18 03:16 AM] jl777c#5810
if you dont understand rawtx fully, you will make mistakes


[27-Jul-18 03:16 AM] jl777c#5810
it isnt that hard, just a bit tedious


[27-Jul-18 03:17 AM] jl777c#5810
so for each input there is a txid/out, get the value and address


[27-Jul-18 03:17 AM] jl777c#5810
for each output, it is much easier, as you just get it from the tx JSON


[27-Jul-18 03:17 AM] Alright#0419
Is insight likely to work? I do understand raw txs for the most part, I just feel like I'm going in circles while looking at these raw txs >.<


[27-Jul-18 03:17 AM] jl777c#5810
then you can list all the inputs alongside the outputs


[27-Jul-18 03:17 AM] jl777c#5810
please listen to what I suggest


[27-Jul-18 03:17 AM] jl777c#5810
insight wont know about the new CC outputs


[27-Jul-18 03:18 AM] jl777c#5810
or maybe it will if it uses the latest


[27-Jul-18 03:18 AM] jl777c#5810
stop going in circles


[27-Jul-18 03:18 AM] jl777c#5810
do it for one rawtx and it will become much clearer


[27-Jul-18 03:19 AM] jl777c#5810
vin0: x -> addr
vin1: y -> addr2
vin2: z-> addr3
vout0: A -> outaddr0
vout1: B -> outaddr1
txfee -> miner


[27-Jul-18 03:19 AM] jl777c#5810
one you reduce a tx to the above, then i dont think you will be circling much


[27-Jul-18 03:24 AM] Alright#0419
ok, tokenbid tx looks totally normal


[27-Jul-18 03:24 AM] Alright#0419
100k ATEST vin 
20 ATEST vout to CC address 
99979.99990000 ATEST vout to change address
op_return vout


[27-Jul-18 03:25 AM] jl777c#5810
good. much easier when reduced to that form


[27-Jul-18 03:34 AM] Alright#0419
tokenbidfill 
normal 100k ATEST vin0
vout0 of tokenbid tx vin1  (20 ATEST)
vout3 of a tokentrasfer tx (7777767 assets) vin2

0 sat cryptocondition to CC address vout0
20 ATEST to pubkey address that did tokenfillbid vout1
20 tokens to RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R(?) vout2
change address(?) for tokens vout3
change address for ATEST vout4
op_return vout 5


[27-Jul-18 03:34 AM] Alright#0419
Neither of my nodes own that RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R address according to validateaddress


[27-Jul-18 03:35 AM] jl777c#5810
do a tokenaddress command, it maps normal address to CC variant


[27-Jul-18 03:35 AM] jl777c#5810
but how much was the vout3/4 for the bidfill? need all the totals to track things


[27-Jul-18 03:36 AM] jl777c#5810
RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R should be the CC address for node0


[27-Jul-18 03:36 AM] jl777c#5810
the problem could well be the change is too big


[27-Jul-18 03:36 AM] jl777c#5810
need ALL the details to fully reconcile the fill


[27-Jul-18 03:37 AM] Alright#0419
vout 3 value": 0.07777747


[27-Jul-18 03:37 AM] Alright#0419
vout 4 "value": 99999.99990000


[27-Jul-18 03:37 AM] Alright#0419
RPb is token address for node0 yes


[27-Jul-18 03:38 AM] jl777c#5810
ok, so it seems all adds up to the satoshi


[27-Jul-18 03:38 AM] jl777c#5810
assuming the destinations for the change is correct


[27-Jul-18 03:39 AM] jl777c#5810
but how is your wallet balance not going down?


[27-Jul-18 03:39 AM] jl777c#5810
I guess you need to do a listunspent, maybe having CC utxo is confusing the wallet


[27-Jul-18 03:42 AM] jl777c#5810
or do a really big swap so it wont be hard to find where the magic money is coming from


[27-Jul-18 03:43 AM] Alright#0419
Could it have something to do with importing those addresses found in the source code possibly?


[27-Jul-18 03:43 AM] Alright#0419
those were imported to node0


[27-Jul-18 03:43 AM] Alright#0419
going to wipe the wallet and retry this


[27-Jul-18 03:43 AM] jl777c#5810
you can listunspent and see which utxo are unexpected


[27-Jul-18 03:45 AM] jl777c#5810
also ask/fillask are totally different code path than bid, so just because bid works doesnt mean ask will work


[27-Jul-18 03:46 AM] Alright#0419
scrolling through, every UTXO in listunspent is a coinbase 100K ATEST UTXO


[27-Jul-18 03:46 AM] Alright#0419
or well as far as I can scroll up in my terminal at least


[27-Jul-18 03:47 AM] jl777c#5810
also once rpc based bid and ask are working you can try to cheat by changing the tx created by CCassettx to be more favorable to your side and see if it gets rejected. I doubt I caught all cases of cheating


[27-Jul-18 03:49 AM] Alright#0419
curious what expected behavior is if 2 tokenbidfills are done in the same block. First one scene by the miner gets confirmed, yes?


[27-Jul-18 03:49 AM] Alright#0419
Other gets rejected as it spends the same inputs?


[27-Jul-18 03:51 AM] Alright#0419
need someone to place a tokenbid so I can try that with both of my nodes


[27-Jul-18 03:51 AM] Alright#0419
I just wiped both wallets of both nodes, going to try a bid and fillbid again


[27-Jul-18 03:52 AM] jl777c#5810
it shouldnt even get into the mempool if it uses the same inputs


[27-Jul-18 03:53 AM] jl777c#5810
so we are using the mempool/confirmation double spend prevention to deal with resolving who gets the fill


[27-Jul-18 04:02 AM] SHossain#0007
@Alright i have a new bid up as soon as the tx confirms `24a6b1c9773b48feaa449566ee9ebdeac9531109554369b0abe51bb62f084839`


[27-Jul-18 04:02 AM] SHossain#0007
for this token `43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add`


[27-Jul-18 04:04 AM] jl777c#5810
I want to get bid and ask 100% validated before moving onto swap as swap has a lot in common and will be much more efficient to do it after I merged in all the bid+ask fixes into swap


[27-Jul-18 04:04 AM] jl777c#5810
from what I have seen bid is reconciled to the satoshi, hopefully ask side will match


[27-Jul-18 04:05 AM] jl777c#5810
then trying to cheat via CCassettx.c changes and at that point I think it is pretty much ready for GUIfication


[27-Jul-18 04:06 AM] Alright#0419
so I accidentally just placed a bid for a token that doesn't exist on this chain, shows up in the orderbook, but if I try to cancel it, I get 
```
CC Eval EVAL_ASSETS Invalid: cant find asset create txid spending tx fd0cc4a17e77d362d63cf3093d6aef0ae06f01c2a91d2371d83f5a91c4535079
```


[27-Jul-18 04:06 AM] Alright#0419
not a bid deal, but it's going to be in the orderbook forever it seems


[27-Jul-18 04:07 AM] Alright#0419
I also can't cancel that one I did with the negative price


[27-Jul-18 04:07 AM] jl777c#5810
a bug is a bug


[27-Jul-18 04:07 AM] jl777c#5810
without rawtx, ...


[27-Jul-18 04:07 AM] jl777c#5810
let us fix all bugs, let us post the rawtx so I can fix it


[27-Jul-18 04:08 AM] Alright#0419
bid for token that doesn't exist on chain 
```
./komodo-cli -ac_name=ATEST tokenbid 20 be15c0662a26c9ffd948b3363dfd9384051f2edaad7baf34cc5a3b0b363e9f5a 1{
  "result": "success",
  "hex": "0100000001034b79e89098df4e3138ce4505bb55aca26fa1f675381a05741c09dd65f1aaa60000000049483045022100f04c013f0f86e1bbc4c2d85d903b163977831314d4c11883589f90cbfd2a215502206b3019a807e5fb78ff574c50bfa81148c532de032160707be3202d036583006001ffffffff030094357700000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccf0e43cd71709000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac00000000000000004f6a4c4ce362be15c0662a26c9ffd948b3363dfd9384051f2edaad7baf34cc5a3b0b363e9f5a1400000000000000210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b56000000000"
}
```


[27-Jul-18 04:08 AM] Alright#0419
trying to cancel it 
```
./rawsend 0100000002035220ad05f7dcad39eec735a9567bb91c54f4c136b3dfebabdbb1acaf54ea8b0000000049483045022100cee59fbdd8c85937b794c280a0f182b4f525dfc5b3a60ad0ea55ca825926a9430220593083b0210acefdb71f14f7ad431130ef7cf68ded3f2361c9c98bd69885267101ffffffff795053c4915a3fd871231da9c2016fe00aef6a3d09f33cd662d3777ea1c40cfd000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281400e667782aaaaffc75860562690895956d0086ddfbef7df59c9b167fcdf0900241a70e56d9dd94de45f2ed565d343f0d61baa5cb27f71083a1d723669ec09e68fa100af038001e3a10001ffffffff03009435770000000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560acf078724e1809000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac0000000000000000246a22e36fbe15c0662a26c9ffd948b3363dfd9384051f2edaad7baf34cc5a3b0b363e9f5a00000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[27-Jul-18 04:11 AM] jl777c#5810
pushed fix


[27-Jul-18 04:12 AM] jl777c#5810
how did you create the negative value one?


[27-Jul-18 04:12 AM] jl777c#5810
seems there are several more error checks that are needed


[27-Jul-18 04:13 AM] Alright#0419
Was about a day ago, simply did a tokenask with -1 set as price


[27-Jul-18 04:13 AM] jl777c#5810
i guess that would do it. fixing


[27-Jul-18 04:13 AM] Alright#0419
that's what was crashing nodes when tokenorders was called


[27-Jul-18 04:13 AM] Alright#0419
I think at least


[27-Jul-18 04:27 AM] Alright#0419
http://cctest.explorer.dexstats.info/

{Embed}
http://cctest.explorer.dexstats.info/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[27-Jul-18 04:27 AM] Alright#0419
I love you @CHMEX

{Reactions}
‚ò∫ 

[27-Jul-18 04:28 AM] jl777c#5810
pushed version with error checks for negative numbers


[27-Jul-18 04:29 AM] jl777c#5810
so now it shouldnt be created, might reject the existing negtx though. i will test a resync


[27-Jul-18 04:32 AM] jl777c#5810
still syncs


[27-Jul-18 04:32 AM] jl777c#5810
@Alright were you able to cancel the previously uncancellable?


[27-Jul-18 04:32 AM] Alright#0419
building


[27-Jul-18 04:38 AM] Alright#0419
for the token that doesn't exist on chain:
```
AssetValidate (o)
CC Eval EVAL_ASSETS Invalid: cant find asset create txid spending tx fd0cc4a17e77d362d63cf3093d6aef0ae06f01c2a91d2371d83f5a91c4535079
```


[27-Jul-18 04:38 AM] Alright#0419
```
010000000203933a2d8276db58e0542a32a49f586247a7b52c539f3aac4f54f83ef9abd3c000000000494830450221008a363ce44545318a9a03467a58ac938d211d214669e3dc6501ce5f5d2f4512dc0220034a373f4f120783a0ce4d62096f673dbfb613bb64440c5f49d45a38c650717601ffffffff795053c4915a3fd871231da9c2016fe00aef6a3d09f33cd662d3777ea1c40cfd000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281405d5fbb2da018f2a9d618b2ee31899cd5229b255e5375f2b29d82d24f783cf2d627817c1d904b1e49c52c61eeadd1ab9338305410d79010cdc49f0bae65122a3aa100af038001e3a10001ffffffff03009435770000000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560acf078724e1809000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac0000000000000000246a22e36fbe15c0662a26c9ffd948b3363dfd9384051f2edaad7baf34cc5a3b0b363e9f5a00000000
```


[27-Jul-18 04:42 AM] jl777c#5810
strange. but duplicated. thanks for posting the rawtx


[27-Jul-18 04:42 AM] Alright#0419
cancelled the neg price one


[27-Jul-18 04:43 AM] Alright#0419
the neg price one changed how it showed in the orderbook btw 
before I cancelled it:
```
  {
    "funcid": "s",
    "txid": "396425cf7ff031e4c0263b3e379f40af4c1d742ace8a1a8283bbc06ce9aa4b5c",
    "vout": 0,
    "amount": "15000",
    "askamount": "15000",
    "origaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
    "tokenid": "9eec77a3e02dec0ca60ead7e8cfb6cb6809c40fe54b804e51d5c6c2a445ffbf3"
  },
```


[27-Jul-18 04:44 AM] jl777c#5810
plz make sure you cant create any more neg price ones


[27-Jul-18 04:44 AM] jl777c#5810
pushed fix for cancel


[27-Jul-18 04:45 AM] Alright#0419
```
negative askamount -500000000, askamount 5
```
üëç


[27-Jul-18 04:46 AM] Alright#0419
negative bidamount -2500000000, pricetotal 5


[27-Jul-18 04:54 AM] Alright#0419
Was able to cancel it


[27-Jul-18 04:59 AM] jl777c#5810
added error check to bid so that assetid that is a txid but not asset create will return error


[27-Jul-18 05:00 AM] jl777c#5810
@Alright did the new wallet make the mystery bid + bidfill not create coins from thin air?


[27-Jul-18 05:00 AM] Alright#0419
did not


[27-Jul-18 05:01 AM] Alright#0419
I have no idea what was happening üò£


[27-Jul-18 05:01 AM] jl777c#5810
i think importing the other address might have confused the wallet total


[27-Jul-18 05:01 AM] Alright#0419
seems I can place bids for a different pubkey


[27-Jul-18 05:01 AM] jl777c#5810
important thing is the satoshis reconcile


[27-Jul-18 05:01 AM] Alright#0419
```
./komodo-cli -ac_name=ATEST tokenbid 5 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add 1
{
  "result": "success",
  "hex": "010000000103de724d7d6457d9ec6af9d8958f256992d2d40b2b86625ae8c9ba572dca5c4c0000000049483045022100db7a41cf7c5ae1299b039bada02d69e84e8c2657e2b5e33133a4362f24f43119022074931c90cc0675ac87ebd5301b26657c1b1f7b86ab631954c587332841fe6b4201ffffffff030065cd1d00000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccf013a5301809000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac00000000000000004f6a4c4ce36243850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add0500000000000000210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b56000000000"
}
```


[27-Jul-18 05:02 AM] Alright#0419
did that^ while the privkey for the pubkey wasn't imported


[27-Jul-18 05:02 AM] jl777c#5810
why would that be needed?


[27-Jul-18 05:02 AM] jl777c#5810
you can lock any funds for a bid


[27-Jul-18 05:03 AM] Alright#0419
Ah, right


[27-Jul-18 05:03 AM] jl777c#5810
not sure we should restrict bidding for someone else


[27-Jul-18 05:03 AM] jl777c#5810
such things belong at the GUI level


[27-Jul-18 05:03 AM] Alright#0419
I was just trying to place bids/asks for pubkeys the node didn't own


[27-Jul-18 05:03 AM] jl777c#5810
yes and that is allowed


[27-Jul-18 05:03 AM] jl777c#5810
and if the funds are locked then it is avalid bid


[27-Jul-18 05:08 AM] Alright#0419
```
komodod: checkqueue.h:189: CCheckQueueControl<T>::CCheckQueueControl(CCheckQueue<T>*) [with T = CScriptCheck]: Assertion `isIdle' failed.
Aborted (core dumped)
```
After doing `setgenerate true 4` on the node


[27-Jul-18 05:08 AM] Alright#0419
seemed it was stuck before doing that


[27-Jul-18 05:08 AM] jl777c#5810
4 cores?


[27-Jul-18 05:08 AM] Alright#0419
yes


[27-Jul-18 05:11 AM] Alright#0419
nodes occasionally just stop syncing entirely


[27-Jul-18 05:11 AM] Alright#0419
then when you do setgenerate true on them, it crashes


[27-Jul-18 05:12 AM] jl777c#5810
seems like a related issue. added a specific check for this with a 1 second pause


[27-Jul-18 05:21 AM] Alright#0419
lmk when I can build, pulled in the middle of you pushing commits it seems


[27-Jul-18 05:26 AM] jl777c#5810
should build now, added tokeninfo


[27-Jul-18 05:28 AM] jl777c#5810
still debugging tokeninfo


[27-Jul-18 05:31 AM] jl777c#5810
tokeinfo works now


[27-Jul-18 05:31 AM] jl777c#5810
tokeninfo


[27-Jul-18 05:36 AM] SHossain#0007
`usage: tokeninfo tokenid`


[27-Jul-18 05:50 AM] jl777c#5810
added tokenlist


[27-Jul-18 05:50 AM] jl777c#5810
tokenlist
[
  "307c094bce80205ec56abd43041530b0cd6faf449ea84cd2ae49339cfc3c222c",
  "e7d034fb7dbad561c9a86dcbcc64aa89e1d311891b4e7c744280b7de13b1186f",
  "21020a609c162fa2d0bc223acfff14bb0b886743303f5e4a661dade7a69b24a5",
  "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "e4895451cae47f8f10303c3594888b739f044f7c778623318d877e8df365cc66",
  "045a31b7e38b1538d111ea87ad9ec53952a70e9a5e8d076f7ed7923d8723f02d",
  "f4131ee56a47273195a899f60a187862aa8e39a974b5a19d860e2fe69f60242f",
  "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
  "9eec77a3e02dec0ca60ead7e8cfb6cb6809c40fe54b804e51d5c6c2a445ffbf3",
  "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add"
]


[27-Jul-18 05:50 AM] jl777c#5810
is that a complete list of tokens created?


[27-Jul-18 05:51 AM] jl777c#5810
tokeninfo 307c094bce80205ec56abd43041530b0cd6faf449ea84cd2ae49339cfc3c222c
{
  "result": "success",
  "tokenid": "307c094bce80205ec56abd43041530b0cd6faf449ea84cd2ae49339cfc3c222c",
  "owner": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc",
  "name": "TESTTOKEN",
  "supply": "100.00000000",
  "description": "Test CC enabled token for our token development"
}


[27-Jul-18 05:51 AM] jl777c#5810
now it is possible to get a list of all the tokens and therefore to check for you complete list of tokenbalance


[27-Jul-18 05:54 AM] jl777c#5810
with these two rpc calls, I think everything needed for GUI is there as long as tokenswap isnt needed


[27-Jul-18 06:02 AM] SHossain#0007 (pinned)
ATEST explorer: http://cctest.explorer.dexstats.info/

{Embed}
http://cctest.explorer.dexstats.info/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[27-Jul-18 06:02 AM] SHossain#0007
Pinned a message.


[27-Jul-18 06:03 AM] SHossain#0007
Thanks @CHMEX  üòÉ


[27-Jul-18 06:04 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokeninfo 43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add
{
  "result": "success",
  "tokenid": "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add",
  "owner": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc",
  "name": "TAKA",
  "supply": "100000.00000000",
  "description": "Testing phase 3."
}
```


[27-Jul-18 06:06 AM] SHossain#0007
tokeninfo shows correct info


[27-Jul-18 06:13 AM] SHossain#0007
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokeninfo.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokeninfo.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[27-Jul-18 06:15 AM] SHossain#0007
@jl777c would it be a good idea to have token creation timestamp in there as well?


[27-Jul-18 06:18 AM] jl777c#5810
I can get it from txid, good idea


[27-Jul-18 06:19 AM] jl777c#5810
except it is not always available easily


[27-Jul-18 06:19 AM] SHossain#0007
then, GUI users will be able to see date and time the token was created


[27-Jul-18 06:20 AM] SHossain#0007
thanks


[27-Jul-18 06:22 AM] SHossain#0007
```
-lboost_filesystem -lboost_program_options -lboost_thread -lboost_chrono -ldb_cxx-6.2 -lssl -ldl /home/user/komodo/depends/x86_64-unknown-linux-gnu/lib/libevent_pthreads.a /home/user/komodo/depends/x86_64-unknown-linux-gnu/lib/libevent.a crypto/libbitcoin_crypto.a /home/user/komodo/depends/x86_64-unknown-linux-gnu/lib/libgmpxx.a /home/user/komodo/depends/x86_64-unknown-linux-gnu/lib/libgmp.a -lboost_system -lcrypto /home/user/komodo/depends/x86_64-unknown-linux-gnu/lib/libsodium.a -lrustzcash -lanl -pthread -fopenmp
libbitcoin_wallet.a(libbitcoin_wallet_a-rpcwallet.o): In function `rewardscreatefunding(UniValue const&, bool)':
/home/user/komodo/src/wallet/rpcwallet.cpp:4987: undefined reference to `RewardsCreateFunding[abi:cxx11](unsigned long, char*, long, long, long, long, long)'
collect2: error: ld returned 1 exit status
Makefile:2051: recipe for target 'komodod' failed
make[2]: *** [komodod] Error 1
make[2]: *** Waiting for unfinished jobs....
libbitcoin_wallet.a(libbitcoin_wallet_a-rpcwallet.o): In function `rewardscreatefunding(UniValue const&, bool)':
/home/user/komodo/src/wallet/rpcwallet.cpp:4987: undefined reference to `RewardsCreateFunding[abi:cxx11](unsigned long, char*, long, long, long, long, long)'
collect2: error: ld returned 1 exit status
Makefile:2043: recipe for target 'komodo-test' failed
make[2]: *** [komodo-test] Error 1
make[2]: Leaving directory '/home/user/komodo/src'
Makefile:4482: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/user/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
```


[27-Jul-18 06:22 AM] SHossain#0007
latest jl777 branch


[27-Jul-18 06:23 AM] SHossain#0007
i see. you are coding heavily. will wait for your signal to update again


[27-Jul-18 06:24 AM] SHossain#0007
now, it is working


[27-Jul-18 06:25 AM] jl777c#5810
builds now. added rewardslist and rewardsinfo


[27-Jul-18 06:25 AM] SHossain#0007
ok


[27-Jul-18 06:28 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST tokenlist
[
  "307c094bce80205ec56abd43041530b0cd6faf449ea84cd2ae49339cfc3c222c",
  "e7d034fb7dbad561c9a86dcbcc64aa89e1d311891b4e7c744280b7de13b1186f",
  "21020a609c162fa2d0bc223acfff14bb0b886743303f5e4a661dade7a69b24a5",
  "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
  "e4895451cae47f8f10303c3594888b739f044f7c778623318d877e8df365cc66",
  "045a31b7e38b1538d111ea87ad9ec53952a70e9a5e8d076f7ed7923d8723f02d",
  "f4131ee56a47273195a899f60a187862aa8e39a974b5a19d860e2fe69f60242f",
  "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
  "9eec77a3e02dec0ca60ead7e8cfb6cb6809c40fe54b804e51d5c6c2a445ffbf3",
  "43850dfce744581ef44775086625745adecd628993c5ff4c1c786cfd21009add"
]
```


[27-Jul-18 06:28 AM] SHossain#0007
token list


[27-Jul-18 06:33 AM] SHossain#0007
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenlist.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/tokenlist.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[27-Jul-18 06:35 AM] SHossain#0007
```
$ ./komodo-cli -ac_name=ATEST rewardslist
[
  "6a9f3a0a7a570bce1022a13f5f9b613d1431fa11dba9a09e10fe54b6998ff8d5"
]
```
```
$ ./komodo-cli -ac_name=ATEST rewardsinfo 6a9f3a0a7a570bce1022a13f5f9b613d1431fa11dba9a09e10fe54b6998ff8d5
{
  "error": "assetid isnt assetcreation txid",
  "result": "success",
  "fundingtxid": "6a9f3a0a7a570bce1022a13f5f9b613d1431fa11dba9a09e10fe54b6998ff8d5",
  "name": "",
  "sbits": 0,
  "APR": "5.00000000",
  "minseconds": 5184000,
  "maxseconds": 5184000,
  "mindeposit": "100.00000000",
  "funding": "10.00000000"
}
```


[27-Jul-18 06:36 AM] SHossain#0007
rewardslist and rewardsinfo seems to be displaying info


[27-Jul-18 06:46 AM] jl777c#5810
rewardscreatefunding works now


[27-Jul-18 06:47 AM] jl777c#5810
rewardsaddfunding also seems to work


[27-Jul-18 06:48 AM] SHossain#0007
so many üòÉ


[27-Jul-18 06:48 AM] SHossain#0007
will update now.


[27-Jul-18 06:49 AM] jl777c#5810
rewardsaddfunding name fundingtxid amount
rewardsaddress [pubkey]
rewardscreatefunding name amount APR mindays maxdays mindeposit
rewardsinfo fundingtxid
rewardslist
rewardslock name fundingtxid amount
rewardsunlock name fundingtxid [txid]
all but the last 2 should be working, am testing rewardslock now


[27-Jul-18 07:00 AM] jl777c#5810
rewardslock seems to work now. rewardsunlock is the main one along with constraints


[27-Jul-18 07:21 AM] jorian#4555
Rewards is the stuff for OOT?


[27-Jul-18 07:25 AM] jl777c#5810
OOT and anybody that wants masternode type rewards


[27-Jul-18 08:19 AM] siu#3920
Wow... much deving today


[27-Jul-18 08:19 AM] siu#3920
Will start tests in a minute


[27-Jul-18 09:32 AM] siu#3920
a minute became an hour, but here i am


[27-Jul-18 09:33 AM] siu#3920
updating


[27-Jul-18 09:43 AM] jl777c#5810
@Deleted User rewards CC is basically ready to test. just need to add validation code and make sure the rewards calc is correct, but i have it set so minimum time for a plan is 1 day


[27-Jul-18 09:44 AM] jl777c#5810
./c rewardsinfo cc9e4abd6ed7ef9ff3b7a278dba8cf32c3480bff2fb596dfb4d745adb430a349
{
  "result": "success",
  "fundingtxid": "cc9e4abd6ed7ef9ff3b7a278dba8cf32c3480bff2fb596dfb4d745adb430a349",
  "name": "test",
  "sbits": 1953719668,
  "APR": "5.00000000",
  "minseconds": 5184000,
  "maxseconds": 5184000,
  "mindeposit": "100.00000000",
  "funding": "10.00000000"
}


[27-Jul-18 09:50 AM] siu#3920
@Deleted User lets test it


[27-Jul-18 10:15 AM] siu#3920
what does `name` in `rewardsaddfunding` stand for?


[27-Jul-18 10:15 AM] siu#3920
@jl777c


[27-Jul-18 10:16 AM] jl777c#5810
name of the rewards plan


[27-Jul-18 10:16 AM] jl777c#5810
created when you create the plan


[27-Jul-18 10:16 AM] jl777c#5810
once created names are unique and can only be added to


[27-Jul-18 10:17 AM] siu#3920
` ./komodo-cli -ac_name=ATEST rewardsaddfunding APR 8a5e77885d7cad0bec97f42572e0dafdb6a40791f392fdd266f45a476c13a9e1 10000
`


[27-Jul-18 10:18 AM] siu#3920
txid is the txid for where funds are in the chain?


[27-Jul-18 10:18 AM] siu#3920
```./komodo-cli -ac_name=ATEST rewardsaddfunding APR 8a5e77885d7cad0bec97f42572e0dafdb6a40791f392fdd266f45a476c13a9e1 10000
error code: -1
error message:
basic_string::_M_construct null not valid
```


[27-Jul-18 10:18 AM] siu#3920
`Rewards plan APR doesnt exist`


[27-Jul-18 10:19 AM] jl777c#5810
did you make a plan called "APR"?


[27-Jul-18 10:20 AM] jl777c#5810
the fundingtxid is like tokenid, txid of the rewardscreatefunding txid


[27-Jul-18 10:20 AM] siu#3920
ahh ok, i missed the first step


[27-Jul-18 10:21 AM] siu#3920
`rewardscreatefunding name amount APR mindays maxdays mindeposit
`


[27-Jul-18 10:24 AM] jl777c#5810
rewards.cpp has lots of comments


[27-Jul-18 10:33 AM] siu#3920
got it


[27-Jul-18 10:33 AM] siu#3920
`c7ed3a353c32a6b2af24c5020fea414d673628c69cb779ede8fd9fa27464c009`


[27-Jul-18 10:39 AM] siu#3920
```./komodo-cli -ac_name=ATEST rewardsinfo ea64d712e5ae363a261fd2a2ef24a37710cdec03125590e3fc84993cb615402d
{
  "result": "success",
  "fundingtxid": "ea64d712e5ae363a261fd2a2ef24a37710cdec03125590e3fc84993cb615402d",
  "name": "COQUI",
  "sbits": 314964004675,
  "APR": "5.00000000",
  "minseconds": 86400,
  "maxseconds": 604800,
  "mindeposit": "10.00000000",
  "funding": "100000.00000000"
}
```


[27-Jul-18 11:11 AM] siu#3920
```./komodo-cli -ac_name=ATEST rewardslist
[
  "6a9f3a0a7a570bce1022a13f5f9b613d1431fa11dba9a09e10fe54b6998ff8d5",
  "c62c7cb77852b78ccbb6e596ea88784f912f7550eb5b3eed752e3e22f829e7fa",
  "cc9e4abd6ed7ef9ff3b7a278dba8cf32c3480bff2fb596dfb4d745adb430a349",
  "ea64d712e5ae363a261fd2a2ef24a37710cdec03125590e3fc84993cb615402d"
]
```


[27-Jul-18 11:11 AM] siu#3920
these are different reward plans?


[27-Jul-18 11:11 AM] siu#3920
in the chain?


[27-Jul-18 11:14 AM] SHossain#0007
yes


[27-Jul-18 11:15 AM] SHossain#0007
`rewardsinfo` call with these fundingtxid will show you detailed info about the specific reward contract


[27-Jul-18 11:19 AM] siu#3920
and how do i know its working?


[27-Jul-18 11:19 AM] siu#3920
tx will be moving to my wallet?


[27-Jul-18 11:22 AM] SHossain#0007
i guess, when your wallet matches the conditions required. jl777 can describe better


[27-Jul-18 11:24 AM] siu#3920
i need to lock funds in order to collect rewards?


[27-Jul-18 11:29 AM] jl777c#5810
did you read rewards.cpp comments?


[27-Jul-18 11:30 AM] siu#3920
im doing that now


[27-Jul-18 11:34 AM] siu#3920
so basically yes, you need to lock the funds


[27-Jul-18 11:34 AM] siu#3920
ok, cool


[27-Jul-18 11:38 AM] siu#3920
to unlock the funds you need to store the txid


[27-Jul-18 12:00 PM] siu#3920
would an airdrop to a token work?


[27-Jul-18 12:00 PM] siu#3920
coin to token airdrop


[27-Jul-18 12:02 PM] jl777c#5810
why not? just a matter to get a snapshot and sending


[27-Jul-18 12:02 PM] jl777c#5810
can go either way


[27-Jul-18 12:02 PM] jl777c#5810
though tokensnapshot is not an available rpc yet


[27-Jul-18 12:04 PM] siu#3920
that would be nice to have


[27-Jul-18 12:05 PM] siu#3920
might also dumb down dICOs


[27-Jul-18 12:08 PM] siu#3920
even maybe a smart contract might solve the utxo autosplit problem in mm


[27-Jul-18 12:09 PM] siu#3920
im just guessing though


[27-Jul-18 12:17 PM] siu#3920
tokenlist shows the tokens you hold balance for, right?


[27-Jul-18 12:20 PM] jl777c#5810
all tokens ever created by anybody


[27-Jul-18 12:21 PM] siu#3920
```{
    "funcid": "b",
    "txid": "6dc4dcf9ab4871e435aecdc93c7c63a34a29edeaf8cefaab6c77b22faa72f2fa",
    "vout": 0,
    "amount": "20.00000000",
    "bidamount": "20.00000000",
    "origaddress": "R9sDyKt2kW5uJaoZT6GF9e3WRbGioBuhoZ",
    "totalrequired": 20,
    "price": "1.00000000"
  }
```


[27-Jul-18 12:21 PM] siu#3920
this is weird... this bid doesnt have tokenid


[27-Jul-18 12:22 PM] jl777c#5810
some were malformed during early days


[27-Jul-18 12:25 PM] jl777c#5810
recvunitprice -0.8446744073709551 >= -0.8446744073709551 unitprice, new unitprice 0.0000000000000000
i see some problem


[27-Jul-18 12:33 PM] siu#3920
but this was not there yesterday if i recall correctly


[27-Jul-18 12:33 PM] siu#3920
since i cleaned the whole orderbook


[27-Jul-18 12:35 PM] jl777c#5810
oh ok, i thought I introduced a new bug


[27-Jul-18 12:53 PM] siu#3920
you might have


[28-Jul-18 02:13 AM] jl777c#5810
swaps are ready to test

{Reactions}
üëå 

[28-Jul-18 05:05 AM] jl777c#5810
rewards CC is code complete and I have tested unlock, ready to test


[28-Jul-18 05:06 AM] jl777c#5810
now the token, faucet and rewards CC are ready for full testing of all their rpc calls

{Reactions}
üëå (4) 

[28-Jul-18 05:06 AM] Deleted User#0000
Got some free time tomorrow maybe, might have a go at it.


[28-Jul-18 05:08 AM] jl777c#5810
all mining nodes need to be updated, there were some hardforking changes


[30-Jul-18 04:10 AM] SHossain#0007
```
== Dice ==
diceaddfunds name fundingtxid amount
diceaddress [pubkey]
dicebet name fundingtxid amount odds
dicefund name funds minbet maxbet maxodds forfeitblocks
diceinfo fundingtxid
dicelist
```


[30-Jul-18 04:18 AM] jl777c#5810
still testing dice, plz test the others first


[30-Jul-18 04:28 AM] SHossain#0007
ok


[30-Jul-18 04:44 AM] SHossain#0007
is there a way to check total balance of the faucet fund?


[30-Jul-18 04:46 AM] SHossain#0007
currently i see anyone uses `faucetfund amount`, the funds adds up in this address `R9zHrofhRbub7ER77B7NrVch3A63R39GuC`


[30-Jul-18 04:47 AM] SHossain#0007
when i use my pubkey with `faucetaddress` i get different CC address
```
./komodo-cli -ac_name=ATEST faucetaddress 03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc
{
  "result": "success",
  "FaucetCCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "CCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "myCCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "myaddress": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
}
```


[30-Jul-18 05:08 AM] jl777c#5810
"FaucetCCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
faucet funds from FaucetCC address


[30-Jul-18 05:09 AM] jl777c#5810
but it seems wrong...


[30-Jul-18 05:09 AM] jl777c#5810
R9zHrofhRbub7ER77B7NrVch3A63R39GuC is the correct address


[30-Jul-18 05:10 AM] jl777c#5810
i get:
faucetaddress
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "myCCaddress": "R9dWc5WGTnne7hcWSshanEuDPxr4DFCsS7",
  "myaddress": "RHV2As4rox97BuE3LK96vMeNY8VsGRTmBj"
}


[30-Jul-18 05:11 AM] SHossain#0007
if i use your pubkey, i get this
```
./komodo-cli -ac_name=ATEST faucetaddress 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92
{
  "result": "success",
  "FaucetCCaddress": "R9dWc5WGTnne7hcWSshanEuDPxr4DFCsS7",
  "CCaddress": "R9dWc5WGTnne7hcWSshanEuDPxr4DFCsS7",
  "myCCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "myaddress": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
}
```


[30-Jul-18 05:13 AM] SHossain#0007
the funds are being deposite and sent from this address `R9zHrofhRbub7ER77B7NrVch3A63R39GuC`


[30-Jul-18 05:14 AM] jl777c#5810
yes, pushed fix


[30-Jul-18 05:15 AM] SHossain#0007
updating


[30-Jul-18 05:20 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST faucetaddress 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk",
  "CCaddress": "R9dWc5WGTnne7hcWSshanEuDPxr4DFCsS7",
  "myCCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "myaddress": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
}
```


[30-Jul-18 05:20 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST faucetaddress 03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk",
  "CCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "myCCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "myaddress": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
}
```


[30-Jul-18 05:21 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST faucetaddress
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk",
  "myCCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "myaddress": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
}
```


[30-Jul-18 05:22 AM] SHossain#0007
what is the usage of `[pubkey]` param in the faucetaddress call?


[30-Jul-18 05:24 AM] jl777c#5810
to find the CC address of that pubkey


[30-Jul-18 05:25 AM] jl777c#5810
it defaults to your own pubkey


[30-Jul-18 05:26 AM] SHossain#0007
thanks


[30-Jul-18 05:50 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST faucetget
{
  "result": "success",
  "hex": "01000000010941cea65a560aeae02f0d49770965490bd99eeac4185f25075685da58e99d40000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe128140150ad95012ad8fae990096787d75d563977cef914e812e9dc8b6236243ac5f0050b3af4f2675ad433dcff4be16d113fb9a46357ee60682ed5d76c60f9ccffe8ea100af038001e4a10001ffffffff02b077a43018090000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc00e1f50500000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000"
}
```


[30-Jul-18 05:51 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST sendrawtransaction 01000000010941cea65a560aeae02f0d49770965490bd99eeac4185f25075685da58e99d40000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe128140150ad95012ad8fae990096787d75d563977cef914e812e9dc8b6236243ac5f0050b3af4f2675ad433dcff4be16d113fb9a46357ee60682ed5d76c60f9ccffe8ea100af038001e4a10001ffffffff02b077a43018090000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc00e1f50500000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000
64760e66c49df97eea14896ecdd505d2d78ea214eb583c8a6a0ac863b2b989b3
```


[30-Jul-18 05:55 AM] jl777c#5810
it worked?


[30-Jul-18 05:55 AM] SHossain#0007
https://github.com/himu007/KMD-CC-Token-Test-Guide/tree/master/rpc/faucet

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/tree/master/rpc/faucet
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[30-Jul-18 05:56 AM] SHossain#0007
yes. i got 1 coin http://cctest.explorer.dexstats.info/tx/64760e66c49df97eea14896ecdd505d2d78ea214eb583c8a6a0ac863b2b989b3


[30-Jul-18 05:57 AM] jl777c#5810
I think I figured out how to get a fully trustless and verifiable dice game, and depending on when exactly the CC tx are validated, it might complete within a block or two

{Reactions}
üé∞ (3) 

[30-Jul-18 05:57 AM] jl777c#5810
hope to have a release tomorrow

{Reactions}
üëåüèΩ üíØ üëèüèΩ (2) 

[30-Jul-18 05:57 AM] SHossain#0007
great!


[30-Jul-18 05:59 AM] jl777c#5810
dice is the first one that requires several steps to complete, instead of a single one from the user


[30-Jul-18 05:59 AM] jl777c#5810
so after dice, we will have a multistep CC contract example


[30-Jul-18 08:15 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST rewardsaddress
{
  "result": "success",
  "RewardsCCaddress": "RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK",
  "Rewardsmarker": "RMgye9jeczNjQx9Uzq8no8pTLiCSwuHwkz",
  "myCCaddress": "RWYMahH8orozYyZP62mTP4Pmf8JVUErXAu",
  "myaddress": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
}
```


[30-Jul-18 08:16 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST rewardsaddress 03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc
{
  "result": "success",
  "RewardsCCaddress": "RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK",
  "Rewardsmarker": "RMgye9jeczNjQx9Uzq8no8pTLiCSwuHwkz",
  "CCaddress": "RWYMahH8orozYyZP62mTP4Pmf8JVUErXAu",
  "myCCaddress": "RWYMahH8orozYyZP62mTP4Pmf8JVUErXAu",
  "myaddress": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
}
```


[30-Jul-18 08:17 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST rewardslist
[
]
```


[30-Jul-18 08:17 AM] SHossain#0007
no rewards listed at the moment


[30-Jul-18 08:25 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST rewardscreatefunding FREE 1000 5 1 10 10
{
  "result": "success",
  "hex": "01000000015022a9ead688a68f018bf18f44ad5a04689edacfcd68c62283d6113d24e647b50000000048473044022021776c2a758d6e9f8dda9e97ca088a777656759b0cf4426ce2e23a04bfa915880220180b674b90ea812b7f20b159b6a03e454fce6fe87bd6261b9cb65f21b142006401ffffffff0400e8764817000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc1027000000000000232103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9ace069fb0501090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000002c6a2ae54646524545000000000065cd1d000000008051010000000000002f0d000000000000ca9a3b0000000000000000"
}
```


[30-Jul-18 08:25 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST sendrawtransaction 01000000015022a9ead688a68f018bf18f44ad5a04689edacfcd68c62283d6113d24e647b50000000048473044022021776c2a758d6e9f8dda9e97ca088a777656759b0cf4426ce2e23a04bfa915880220180b674b90ea812b7f20b159b6a03e454fce6fe87bd6261b9cb65f21b142006401ffffffff0400e8764817000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc1027000000000000232103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9ace069fb0501090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000002c6a2ae54646524545000000000065cd1d000000008051010000000000002f0d000000000000ca9a3b0000000000000000
c0c5165902fd21728aed707888db082a72a013def8902c21626c1e5214f00fae
```


[30-Jul-18 08:45 AM] SHossain#0007
look like i'm in a different chain


[30-Jul-18 08:45 AM] SHossain#0007
```
  "blocks": 4860,
  "longestchain": 8822,
  "timeoffset": 0,
  "tiptime": 1532721562,
  "connections": 4,
```


[30-Jul-18 08:50 AM] jl777c#5810
rewardslist
[
  "ca553d2737b91a059db365d613dcc4865bd1127aece51793cbafbd5719b9fe83",
  "ca553d2737b91a059db365d613dcc4865bd1127aece51793cbafbd5719b9fe83",
  "f383092ebaa0a7ea40f47c36569d006e273c818ef1dc3a8e173b9c2aaf07273a",
  "a4482ccb37b2e8164940d4074023038e814fcf4401b38e5e3711a39f8643c084",
  "c0c5165902fd21728aed707888db082a72a013def8902c21626c1e5214f00fae"
]


[30-Jul-18 08:50 AM] jl777c#5810
probably you need to resync. many hardforking changes along the way


[30-Jul-18 08:51 AM] SHossain#0007
i'm trying fresh sync. got stuck at 2667


[30-Jul-18 08:52 AM] SHossain#0007
```
AssetValidate (s)
vin1 9979, vout0 10, vout1 9969, constrain vout error nValue 0.00009979 vs 0.00000010
CC Eval EVAL_ASSETS Invalid: mismatched vout0 AssetsCCaddr for selloffer spending tx c7c5296f59e3a59ef5004f09d94ccf33a3a5e01d8a96071253db727be381008b
AssetValidate (s)
vin1 10, vout0 10, AssetValidate (s)
vin1 9999949889, vout0 1000, vout1 9999948889, constrain vout error nValue 99.99949889 vs 0.00001000
CC Eval EVAL_ASSETS Invalid: mismatched vout0 AssetsCCaddr for selloffer spending tx 96a87697d7061fbfbe932701863d6c47290a0b05f769a0e76a052cace8637869
AssetValidate (s)
vin1 9999949889, vout0 1000, vout1 9999948889, constrain vout error nValue 99.99949889 vs 0.00001000
CC Eval EVAL_ASSETS Invalid: mismatched vout0 AssetsCCaddr for selloffer spending tx 96a87697d7061fbfbe932701863d6c47290a0b05f769a0e76a052cace8637869
AssetValidate (s)
vin1 9999949889, vout0 1000, vout1 9999948889, constrain vout error nValue 99.99949889 vs 0.00001000
CC Eval EVAL_ASSETS Invalid: mismatched vout0 AssetsCCaddr for selloffer spending tx 96a87697d7061fbfbe932701863d6c47290a0b05f769a0e76a052cace8637869
AssetValidate (s)
vin1 9999949889, vout0 1000, vout1 9999948889, constrain vout error nValue 99.99949889 vs 0.00001000
CC Eval EVAL_ASSETS Invalid: mismatched vout0 AssetsCCaddr for selloffer spending tx 96a87697d7061fbfbe932701863d6c47290a0b05f769a0e76a052cace8637869
AssetValidate (s)
vin1 100000000000000, vout0 15000, vout1 99999999985000, constrain vout error nValue 1000000.00000000 vs 0.00015000
CC Eval EVAL_ASSETS Invalid: mismatched vout0 AssetsCCaddr for selloffer spending tx 9eec77a3e02dec0ca60ead7e8cfb6cb6809c40fe54b804e51d5c6c2a445ffbf3
AssetValidate (s)
vin1 100000000000000, vout0 15000, vout1 999999999```


[30-Jul-18 08:52 AM] SHossain#0007
console printout before stuck


[30-Jul-18 08:52 AM] jl777c#5810
let me check fullsync


[30-Jul-18 08:55 AM] jl777c#5810
reproduced problem. for now plz make a new chain for testing


[30-Jul-18 09:29 AM] jl777c#5810
pushed fix


[30-Jul-18 10:05 AM] siu#3920
hello guys


[30-Jul-18 10:06 AM] siu#3920
what are we testing right now?


[30-Jul-18 10:11 AM] jl777c#5810
token, faucet, rewards all are supposedly complete


[30-Jul-18 10:11 AM] siu#3920
nice. I can create the chain


[30-Jul-18 10:11 AM] siu#3920
this will be for testing dice?


[30-Jul-18 10:11 AM] jl777c#5810
dice isnt ready for testing yet


[30-Jul-18 10:12 AM] jl777c#5810
token, faucet, rewards all are supposedly complete


[30-Jul-18 10:12 AM] jl777c#5810
token, faucet and rewards are ready for testing


[30-Jul-18 10:12 AM] jl777c#5810
dice is not


[30-Jul-18 10:12 AM] siu#3920
ok


[30-Jul-18 10:17 AM] SHossain#0007
testing jl777's fix. @siu we may not have to create new chain for now


[30-Jul-18 10:17 AM] siu#3920
ok


[30-Jul-18 10:17 AM] siu#3920
i run ATEST then


[30-Jul-18 10:30 AM] SHossain#0007
fresh sync worked fine


[30-Jul-18 10:32 AM] siu#3920
`./komodo-cli -ac_name=ATEST getblockhash 8917
044dfdf3b106de93e189fc7c2299318ed2c00c298c87a36211f1e97c5852223c`


[30-Jul-18 10:35 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST getblockhash 8917
044dfdf3b106de93e189fc7c2299318ed2c00c298c87a36211f1e97c5852223c
```

{Reactions}
üëç 

[30-Jul-18 10:36 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST rewardsinfo c0c5165902fd21728aed707888db082a72a013def8902c21626c1e5214f00fae
{
  "result": "success",
  "fundingtxid": "c0c5165902fd21728aed707888db082a72a013def8902c21626c1e5214f00fae",
  "name": "FREE",
  "sbits": 1162170950,
  "APR": "5.00000000",
  "minseconds": 86400,
  "maxseconds": 864000,
  "mindeposit": "10.00000000",
  "funding": "1000.00000000"
}
```


[30-Jul-18 10:36 AM] SHossain#0007
@webworker01 are you testing as well? üòÉ


[30-Jul-18 10:37 AM] SHossain#0007
@jl777c what does `"sbits": 1162170950,` mean?


[30-Jul-18 10:40 AM] SHossain#0007
```
name = Name of the Rewards plan
sbits = ??
APR = Annual percentage of Rewards
minseconds = Minimum time the funds will be locked in seconds
maxseconds = Maximum time the funds will be locked in seconds
mindeposit = Minimum deposit amount
funding = The amount of funds the rewards plan contains
```


[30-Jul-18 10:42 AM] jl777c#5810
sbits is the first 8 chars of the name as a 64 bit int


[30-Jul-18 10:47 AM] SHossain#0007
thank you. putting it in the doc


[30-Jul-18 11:02 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST rewardsaddfunding FREE c0c5165902fd21728aed707888db082a72a013def8902c21626c1e5214f00fae 100
{
  "result": "success",
  "hex": "010000000152a6b24c8494578c7c0e9a703d95b2061bd0512bd1a02d30e65fedb9d792466e0000000048473044022058653933f08ff93dc9d7693d558f4f25b7c64ef037f0d7a997fb9311bd28560002206fdefe808438d26f5c9298a251243ac1faaadcab0e85afac6a98468c576838ad01ffffffff0300e40b5402000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401ccf09466fa15090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000002c6a2ae5414652454500000000ae0ff014521e6c62212c90f8de13a0722a08db887870ed8a7221fd025916c5c000000000"
}
```


[30-Jul-18 11:02 AM] SHossain#0007
output:
```
347b7023e95f00f55a2abf6475e50ecba273a73f37b2ed749fb2691745c231eb
```


[30-Jul-18 11:04 AM] SHossain#0007
looks like other testing is going on :)
```
got bet txid
CC Eval EVAL_DICE Invalid: dont confirm bet during debug spending tx a196b59c89a17aa774b0a9872e201ba896a7eba3bc6bec2a9683ad2dbe92ae01
got bet txid
CC Eval EVAL_DICE Invalid: dont confirm bet during debug spending tx a196b59c89a17aa774b0a9872e201ba896a7eba3bc6bec2a9683ad2dbe92ae01
```


[30-Jul-18 11:14 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST rewardslock FREE c0c5165902fd21728aed707888db082a72a013def8902c21626c1e5214f00fae 500
{
  "result": "success",
  "hex": "010000000155824bc1930bb322270e0ebb9536b469a99142317e022b0c086adb0377aa8d070000000048473044022005be54269bcb8fc0e4fad40019afcd41d1df56d7504cb10d70bbcd26f13e89fd02203cf4378155f082667b0aafb0ae9b6ed54c9498415215424ba57796dcd37e4ea901ffffffff0400743ba40b000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcace0dd36aa0c090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000002c6a2ae54c4652454500000000ae0ff014521e6c62212c90f8de13a0722a08db887870ed8a7221fd025916c5c000000000"
}
```


[30-Jul-18 11:14 AM] SHossain#0007
output:
```
86185406f5836b60a381f254d743983b3719bf61cee5ca0c07dbd0806aee1094
```


[30-Jul-18 11:21 AM] Alright#0419
Seems to have an extra .0001 sat vout, yes?


[30-Jul-18 11:22 AM] Alright#0419
two change address 
```
    {
      "value": 0.00010000,
      "valueSat": 10000,
      "n": 1,
      "scriptPubKey": {
        "asm": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc OP_CHECKSIG",
        "hex": "2103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac",
        "reqSigs": 1,
        "type": "pubkey",
        "addresses": [
          "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
        ]
      }
    },
    {
      "value": 99499.99980000,
      "valueSat": 9949999980000,
      "n": 2,
      "scriptPubKey": {
        "asm": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc OP_CHECKSIG",
        "hex": "2103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac",
        "reqSigs": 1,
        "type": "pubkey",
        "addresses": [
          "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
        ]
      }
    }
```


[30-Jul-18 11:25 AM] SHossain#0007
2 vouts. yes


[30-Jul-18 11:25 AM] Alright#0419
4 vouts when I think there should be 3


[30-Jul-18 11:29 AM] SHossain#0007
@jl777c ^^


[30-Jul-18 11:30 AM] Alright#0419
Sorry, might be looking at this wrong. What is meant by `vout.1: normal output to unlock address`


[30-Jul-18 11:30 AM] Alright#0419
what is the unlock address?


[30-Jul-18 11:33 AM] Alright#0419
Ah, I think I understand. Vout 1 is essentially just a marker for where  the coins will be returned to and vout 2 is just the change address which happens to be the same because pubkey is set?


[30-Jul-18 11:38 AM] jl777c#5810
rewards only go to the vout.1 address, the unlock address


[30-Jul-18 11:39 AM] jl777c#5810
as such anybody can submit such a tx


[30-Jul-18 11:39 AM] jl777c#5810
this was a requirement due to need to be able to support SPV users


[30-Jul-18 11:42 AM] SHossain#0007
reawards and faucet rpc calls documented fully
tokens - 6 API calls remaining


[30-Jul-18 11:45 AM] SHossain#0007
wanted to unlock rewards funds after locking it. the contract won't allow me as the minimum time is not met
```
./komodo-cli -ac_name=ATEST rewardsunlock FREE c0c5165902fd21728aed707888db082a72a013def8902c21626c1e5214f00fae 86185406f5836b60a381f254d743983b3719bf61cee5ca0c07dbd0806aee1094
APR 5.00000000 minseconds.86400 maxseconds.864000 mindeposit 10.00000000
RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK locktxid/v0 is spent
error code: -1
error message:
basic_string::_M_construct null not valid
```


[30-Jul-18 11:50 AM] siu#3920
can i get some FREE? `028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27`


[30-Jul-18 11:50 AM] SHossain#0007
FREE is the rewards plan


[30-Jul-18 11:50 AM] SHossain#0007
you need to send funds there


[30-Jul-18 11:51 AM] SHossain#0007
@siu use this https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/rewards/rewardsaddfunding.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/rewards/rewardsaddfunding.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[30-Jul-18 11:51 AM] SHossain#0007
lock your funds for 5% APR üòÉ

{Reactions}
üëç (2) 

[30-Jul-18 11:59 AM] jl777c#5810
ok, initial version if dice CC is in jl777


[30-Jul-18 11:59 AM] jl777c#5810
this one is somewhat similar to rewards, in that you need to create a specific dice plan


[30-Jul-18 12:00 PM] jl777c#5810
diceaddfunds name fundingtxid amount
diceaddress [pubkey]
dicebet name fundingtxid amount odds
dicefund name funds minbet maxbet maxodds timeoutblocks
diceinfo fundingtxid
dicelist
diceloser name fundingtxid bettxid
dicerefund name fundingtxid bettxid
dicewinner name fundingtxid bettxid

but additionally, you need to create txids with hashed entropy, basically any dice tx other than a dicebet will add hashed entropy, but you need to create a few at first via diceaddfunds


[30-Jul-18 12:01 PM] jl777c#5810
the diceinfo, dicelist, diceaddress work just like the rewards counterparts


[30-Jul-18 12:02 PM] jl777c#5810
once there is a dice plan with funds, you can make dicebets. for now to resolve it the creator of the diceplan needs to do a dicewinner or diceloser


[30-Jul-18 12:04 PM] jl777c#5810
last I will add a dicerefund that allows anybody to undo a dicebet, this would happen only if the diceplan node is offline.I guess it could be that it refunds or it becomes an automatic win. not sure which is best. probably need to make it an automatic win to incentivize the "house" account not to go offline


[30-Jul-18 12:06 PM] jl777c#5810
in order to save a step, I dont hash the entropy of the dicebet. but I guess I need to if we want it to refund after timeout instead of automatic win, as the way it is now would allow the house account to just not complete a large losing bet


[30-Jul-18 12:07 PM] jl777c#5810
as you can see, things are not quite settled, but enough seems to work I wanted to get some feedback


[30-Jul-18 12:53 PM] SHossain#0007
that was done very fast


[30-Jul-18 12:53 PM] SHossain#0007
updating


[30-Jul-18 12:57 PM] jl777c#5810
CC enables some pretty cool stuff, pretty quickly


[30-Jul-18 12:57 PM] siu#3920
updating


[30-Jul-18 12:57 PM] jl777c#5810
of course initial dice is likely full of bugs, dont bet anything you cant afford to lose!

{Reactions}
üòÇ (3) 

[30-Jul-18 12:57 PM] siu#3920
any new smart contract added to -ac_cc=1 is a hard fork change?


[30-Jul-18 12:58 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST dicelist
[
  "0d6e82af9959caec14d7af42fd67db68a45bcd23c755457ebf192a52d62c599c"
]
```


[30-Jul-18 12:59 PM] jl777c#5810
not many active entropy utxo, so probably you want to make your own dice plan


[30-Jul-18 01:02 PM] SHossain#0007
these messages keep appearing/appeared in console
```
CC Eval EVAL_FAUCET Invalid: cant faucet from mempool spending tx 66a12f22ac8b84f61bd912b61aad4ee014929a1bf6a51f013e477253770a760e
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: cant faucet from mempool spending tx 66a12f22ac8b84f61bd912b61aad4ee014929a1bf6a51f013e477253770a760e
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: cant faucet from mempool spending tx 66a12f22ac8b84f61bd912b61aad4ee014929a1bf6a51f013e477253770a760e
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: cant faucet from mempool spending tx 66a12f22ac8b84f61bd912b61aad4ee014929a1bf6a51f013e477253770a760e
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: cant faucet from mempool spending tx 66a12f22ac8b84f61bd912b61aad4ee014929a1bf6a51f013e477253770a760e
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: cant faucet from mempool spending tx 66a12f22ac8b84f61bd912b61aad4ee014929a1bf6a51f013e477253770a760e
```


[30-Jul-18 01:03 PM] Alright#0419
Yea, trying to break the faucet with spam


[30-Jul-18 01:03 PM] jl777c#5810
faucet is self limiting from evil spammers


[30-Jul-18 01:04 PM] SHossain#0007
```./komodo-cli -ac_name=ATEST diceaddress 03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc
{
  "result": "success",
  "DiceCCaddress": "REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw",
  "Dicemarker": "RLEe8f7Eg3TDuXii9BmNiiiaVGraHUt25c",
  "CCaddress": "RNZBxcH9ntcB8cJMTtbWZJrjzJNQ4ADLkz",
  "myCCaddress": "RNZBxcH9ntcB8cJMTtbWZJrjzJNQ4ADLkz",
  "myaddress": "RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ"
}```


[30-Jul-18 01:10 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST diceinfo 0d6e82af9959caec14d7af42fd67db68a45bcd23c755457ebf192a52d62c599c
{
  "result": "success",
  "fundingtxid": "0d6e82af9959caec14d7af42fd67db68a45bcd23c755457ebf192a52d62c599c",
  "name": "dice",
  "sbits": 1701013860,
  "minbet": "1.00000000",
  "maxbet": "100.00000000",
  "maxodds": 10,
  "timeoutblocks": 5,
  "funding": "1000.00000000"
}
```


[30-Jul-18 01:16 PM] Alright#0419
Anyone able to do `faucetget`


[30-Jul-18 01:16 PM] Alright#0419
think I broke it


[30-Jul-18 01:18 PM] Alright#0419
```
2018-07-30 20:17:25 ERROR: CheckInputs(): 059757fa3941f90f63fe6c7770cad75caab9618d2ae50fa40b9fca7a17fb4676 value in (0.0000006) < value out (1.00) diff -0.99999940
2018-07-30 20:17:25 ERROR: AcceptToMemoryPool: ConnectInputs failed 059757fa3941f90f63fe6c7770cad75caab9618d2ae50fa40b9fca7a17fb4676
```

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/473585182947934228/faucetraw


[30-Jul-18 01:20 PM] jl777c#5810
investigating


[30-Jul-18 01:20 PM] Alright#0419
I spammed faucetfund with a couple thousand single sat txs


[30-Jul-18 01:20 PM] Alright#0419
cost less than 1 ATEST


[30-Jul-18 01:20 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST faucetget
{
  "result": "success",
  "hex": "0100000002202179e70ed59683fcfd6121dd0e23e9df16cee723b662fcf050dc9c256a0d50000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281408116dd798ea55305a5b6afbda77d5e51243079f5f9917caf2902b9db4e7adbaf473ffbe122a1dc2fd2f622c60262f70968c1507eeca68ca2d405db0748338725a100af038001e4a10001ffffffff45943aa711c4c163e2bfe1ad2fa4749cdd213ed9b30bbdde103dd337c09fada9000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281408d6d35b91cc67babf7f651627701a481e45a085ba00f87ad313f6ff49156f4dd43296375db303bb2ebbbe7a2537cd54d0edc1495f1d897c07998c05faa4849a2a100af038001e4a10001ffffffff02e1d31f4802000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc00e1f50500000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000"
}
```


[30-Jul-18 01:20 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST sendrawtransaction 0100000002202179e70ed59683fcfd6121dd0e23e9df16cee723b662fcf050dc9c256a0d50000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281408116dd798ea55305a5b6afbda77d5e51243079f5f9917caf2902b9db4e7adbaf473ffbe122a1dc2fd2f622c60262f70968c1507eeca68ca2d405db0748338725a100af038001e4a10001ffffffff45943aa711c4c163e2bfe1ad2fa4749cdd213ed9b30bbdde103dd337c09fada9000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281408d6d35b91cc67babf7f651627701a481e45a085ba00f87ad313f6ff49156f4dd43296375db303bb2ebbbe7a2537cd54d0edc1495f1d897c07998c05faa4849a2a100af038001e4a10001ffffffff02e1d31f4802000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc00e1f50500000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000
faucetget validated
faucetget validated
faucetget validated
faucetget validated
d58b71231087a0f0ba73eca5a1577bcba2d8d5c8bd158241e832dcfe9a80e109
```


[30-Jul-18 01:21 PM] Alright#0419
works?


[30-Jul-18 01:21 PM] Alright#0419
ü§î


[30-Jul-18 01:21 PM] jl777c#5810
fixed


[30-Jul-18 01:21 PM] SHossain#0007
actually....
```
  "blocks": 9083,
  "longestchain": 9127,
  "timeoffset": 0,
  "tiptime": 1532979828,
  "connections": 6,
```


[30-Jul-18 01:21 PM] SHossain#0007
will resync from fresh


[30-Jul-18 01:27 PM] Alright#0419
`faucetget` works again


[30-Jul-18 01:27 PM] Alright#0419
What problem did that actually cause?


[30-Jul-18 01:28 PM] Alright#0419
Curious if spamming any of the other contracts would be worth trying.


[30-Jul-18 01:28 PM] SHossain#0007
please try


[30-Jul-18 01:29 PM] Alright#0419
Ah, he just added protection to other contracts


[30-Jul-18 01:29 PM] SHossain#0007
i'm testing the new dice rpc call, you can keep doing illeagal calls üòõ


[30-Jul-18 01:29 PM] SHossain#0007
on the old rpc calls which are working


[30-Jul-18 01:30 PM] Alright#0419
Yea I was looking at the validation code and that was all I could think of


[30-Jul-18 01:30 PM] Alright#0419
*for now*


[30-Jul-18 01:32 PM] jl777c#5810
dice has no validation yet


[30-Jul-18 01:32 PM] jl777c#5810
i think for assets, there could be some issues if you tweak the tx construction in CCassetstx to be more in favor to your side


[30-Jul-18 01:33 PM] Alright#0419
üëå


[30-Jul-18 01:36 PM] Alright#0419
any chance you could fix this 
```
2018-07-30 20:35:56 skip Relaying wtx 73abb112b4df3100e1d14e148db70cce0b0eded49f0b30aa9107fed91e1dc1ff nLockTime 1532439629 vs now.1532982956
2018-07-30 20:35:56 skip Relaying wtx 84dbba278c46db19eae5b03426d22ec418f5d3591db1f8c4af41a24362aae2ff nLockTime 1532790057 vs now.1532982956
2018-07-30 20:35:56 skip Relaying wtx 485c1255aa26176d5db49e330f1948fa022b43358740d8e0a274afb1f30ce3ff nLockTime 1532567040 vs now.1532982956
2018-07-30 20:35:56 skip Relaying wtx b61ac4853f60c437055a23c43c6094717faf97f8f681c31cfc39f3f16680fbff nLockTime 1532704767 vs now.1532982956
2018-07-30 20:35:56 skip Relaying wtx 24c42b63d637f6f473816bd8563eabf63adef0a6abdcc5effee03b3e989ffcff nLockTime 1532965209 vs now.1532982956
```

It's been happening on all chains for what seems like a couple months now. Every now and then it spams this *a lot*


[30-Jul-18 01:37 PM] jl777c#5810
it should just be KMD


[30-Jul-18 01:37 PM] Alright#0419
getting it on ATEST right now


[30-Jul-18 01:37 PM] jl777c#5810
investigating


[30-Jul-18 01:38 PM] jl777c#5810
pushed fix


[30-Jul-18 01:40 PM] SHossain#0007
what is `maxodds`, & `timeoutblocks` in **`dicefund`** call?


[30-Jul-18 01:41 PM] jl777c#5810
maxodds is the largest odds you can be with


[30-Jul-18 01:41 PM] jl777c#5810
timeoutblocks is how many blocks before it times out


[30-Jul-18 01:41 PM] SHossain#0007
what are the optimal numbers for those? (never played dice before)


[30-Jul-18 01:41 PM] SHossain#0007
trying to create a new dice


[30-Jul-18 01:42 PM] jl777c#5810
if you allow 100 million odds, then it can make for a very large payout


[30-Jul-18 01:44 PM] SHossain#0007
Thanks


[30-Jul-18 01:44 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST dicefund KMDDice 777777 0.777 7.77 777 7
{
  "result": "success",
  "hex": "010000000a5890b79f42a2039d6b661cec3f0a748f8122b51427d2747d7cddb45e7c774988010000004847304402206544c1d0bb42da89d93e58526a28b3c80ef45dca516ecd11ee3fe7fc35a5261c02207f0b134ff5cdb840692a65eccd86fb2fc2a63afc6f1309a2ed9d054d1a076b1201ffffffff5b90bd88124ebd1a0988c612902234782b737b860189fb5871088d2d3aae2481020000004948304502210091972c641291022da6d49ab8d3790ccdbb0f563b385b89ac723fa688a6c84ee202207198c3d48ce1d9591fce6fb41192145c38f8312c7a78251f4231986070a3283a01ffffffff5bfb06fac51707a69414a1f908ac3f9eb3fca50f303c4ae960f94491e8dc7f5c0100000049483045022100ea0b49d902f844ef280b8621cdc5a5365a779a04a159ba30e00bd0b3eaf284da02205aece19ee807ce11b0ed7b74175df29dd2be4560361174664571a6a596a894fd01ffffffff5ca636731b8c28889248a0b434e3124f19518b2c4b4bbefd80af303329ae9471020000004847304402203eb318ae650753ab7cc2e9ea9b2cc2477add2fbd9e49e0ac1d7560f7e08ecbb002202d77d75ed2c1d3b53feda45c699374f74d1bf1065b46e3a24514dd072f2a9dcb01ffffffff5d5132ee6f33ba09b4bcfb84beddfcbdf58888ea7f221cc8078a96865e1e0ea10000000049483045022100e3cc5062becc979fc347a9ccde6af8ebba39c0d88105c9a35c89876207fafb0202204f631d063911e4526958f6629a847cca832d845a86adcae248625fd45b03e7d001ffffffff5e626ec0b20cd783ee0bf52aa33189796ddd4649d31b64fdee10b6daecbd079200000000494830450221009f3c17ccc73f28d9ba1d80c149890f56c6aafa576e152eb776082d12d54548eb022053f3b87eee04d9f5ef9f961d79433ec76b0f0e4a2288104212db01f6d2d7d1f801ffffffff5eb56cd4df0702b06debcf36de8309432b8140daa0a2544159ff68bbb96ed205000000004847304402202.............
```


[30-Jul-18 01:45 PM] SHossain#0007
that was a very big hex value


[30-Jul-18 01:45 PM] SHossain#0007
output:
```
ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7
```


[30-Jul-18 01:45 PM] jl777c#5810
yes, the rawtx construction is quite simplistic now


[30-Jul-18 01:46 PM] jl777c#5810
but it allows for a predictable vin selection


[30-Jul-18 01:46 PM] jl777c#5810
i will need to improve it


[30-Jul-18 01:47 PM] jl777c#5810
anyway, now there is a new dice fund, do a few diceaddfunds and then you can bet


[30-Jul-18 01:47 PM] jl777c#5810
as soon as you bet, you will know if you won or lost


[30-Jul-18 01:47 PM] jl777c#5810
well, only if you are controlling the address that created the dice fund


[30-Jul-18 01:53 PM] SHossain#0007
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/dice/dicefund.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/dice/dicefund.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[30-Jul-18 01:53 PM] SHossain#0007
all the outputs are there, including hex value


[30-Jul-18 01:55 PM] SHossain#0007
the txid still in mempool


[30-Jul-18 01:55 PM] jl777c#5810
it was a big output, relative to the utxo you had


[30-Jul-18 01:55 PM] SHossain#0007
started local miner


[30-Jul-18 01:55 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST dicelist
[
  "0d6e82af9959caec14d7af42fd67db68a45bcd23c755457ebf192a52d62c599c",
  "ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7"
]
```


[30-Jul-18 01:56 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST diceinfo ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7
{
  "result": "success",
  "fundingtxid": "ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7",
  "name": "KMDDice",
  "sbits": 28538276415819083,
  "minbet": "0.77700000",
  "maxbet": "7.77000000",
  "maxodds": 777,
  "timeoutblocks": 7,
  "funding": "777777.00000000"
}
```


[30-Jul-18 01:56 PM] SHossain#0007
anyone interested in betting?


[30-Jul-18 02:03 PM] jl777c#5810
the dicefund creator can actually finalize any dicebet transactions and it should properly deal with paying winners and not paying losing tx


[30-Jul-18 02:08 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST diceaddfunds KMDDice ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7 10
{
  "result": "success",
  "hex": "0100000001646b59153d05ed0cb2b241dbbc42cd86df446ea43db8a66c68fdc2462e1bc6850000000049483045022100bdbf75970d7f708c4a5637d703b0a055e65a2eab0e71f6435604281d5981143d022008942029da09aa09bd0c9358b8169528e596968150e85d15c143c6961bf2b39501ffffffff0400ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcacf0aed71218090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6454b4d444469636500f74cae60f1901161cbe475ff00f1024bb3d64be778b714bfbeb75afa20fffcebd22d4e75f4939198938b49036f71c3a0e00d20ca05237147aaed0d85cd50ff29000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[30-Jul-18 02:09 PM] SHossain#0007
output:
```
83370785623efc679de990b0d90bd45b375a0a53ce9e011259c31a8c747fd1ff
```


[30-Jul-18 02:32 PM] SHossain#0007
i have added 10 coins to the dice fund using the above command. contract address balance still shows same
```
./komodo-cli -ac_name=ATEST diceinfo ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7
{
  "result": "success",
  "fundingtxid": "ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7",
  "name": "KMDDice",
  "sbits": 28538276415819083,
  "minbet": "0.77700000",
  "maxbet": "7.77000000",
  "maxodds": 777,
  "timeoutblocks": 7,
  "funding": "777777.00000000"
}
```


[30-Jul-18 02:38 PM] SHossain#0007
```
./komodo-cli -ac_name=ATEST dicebet KMDDice ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7 7 7
else case funcid 70
else case funcid 69
add 777777.00000000
else case funcid 66
else case funcid 66
cant find dice entropy inputs
error code: -1
error message:
basic_string::_M_construct null not valid
```


[30-Jul-18 02:38 PM] SHossain#0007
@Deleted User https://github.com/himu007/KMD-CC-Token-Test-Guide

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040

{Reactions}
üëç 

[30-Jul-18 03:32 PM] Alright#0419
did we stall?


[30-Jul-18 03:32 PM] Alright#0419
/komodo-cli -ac_name=ATEST getblockhash 9157
011dd8ff1e10af504e46b19bc310d7b9495c2f891944820261b31b0078cd4471


[30-Jul-18 03:32 PM] Alright#0419
Oh nope


[30-Jul-18 04:10 PM] siu#3920
updating again


[30-Jul-18 04:16 PM] siu#3920
seems like im stuck at 9083


[30-Jul-18 05:02 PM] siu#3920
resynced and everything good


[30-Jul-18 11:36 PM] jl777c#5810
pushed fix, the addfunds tx was corrupted


[30-Jul-18 11:40 PM] jl777c#5810
still has problems, investigating


[30-Jul-18 11:46 PM] jl777c#5810
pushed fix, got a bet to create


[30-Jul-18 11:47 PM] jl777c#5810
and broadcast


[31-Jul-18 02:06 AM] SHossain#0007
updating


[31-Jul-18 02:10 AM] Mylo#8306
sorry to be a noob.
when i launch
`/komodo/src/komodod -ac_cc=1 -ac_name=ATEST -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey= 03A09B67FC0AB05E212BDD085AC03A04EF0CD88A45F0E25D109B23ACFDA1B9EF09  -addnode=136.243.58.134 -addnode=195.201.20.230 -addnode=195.201.137.5 &`

pubkey.....is this my "compressed 66 character KMD pubkey" or does it need to be a BTC pubkey?   is it pre-shared, like notaries, or can i put my NN pubkey there?

also, how do i know what P2P port it will use?  in my docker file i need to pre-define which ports to passthru/map.


[31-Jul-18 02:11 AM] Mylo#8306
debug says 40245, but i wouldn't know until after i try.


[31-Jul-18 02:11 AM] SHossain#0007
BTC pubkey

{Reactions}
üëç 

[31-Jul-18 02:11 AM] SHossain#0007
when you do `validateaddress` it shows the same pubkey


[31-Jul-18 02:12 AM] Mylo#8306
think i need to order a pizza first.


[31-Jul-18 02:13 AM] SHossain#0007
send me 10,000 KMD and i'll do it for you :p


[31-Jul-18 02:13 AM] SHossain#0007
instead of 2 i'll send at least 100


[31-Jul-18 02:18 AM] Mylo#8306
DOGE?


[31-Jul-18 02:18 AM] Mylo#8306
üòÑ


[31-Jul-18 02:19 AM] SHossain#0007
Only KMD accepted here! üòÑ


[31-Jul-18 02:21 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST diceaddfunds KMDDice ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7 10
{
  "result": "success",
  "hex": "01000000010b18f0e5f22bba5acaceee51247eb55cb0de64846c6fe45cafb6205ed1ef92560000000049483045022100accfb27375d0173110fd2b5084507b5bb99a9bccc09a11bedb2140957fe140150220020b14ce2c6c0dc160af99d10dd8bcd98806ebc58b6883c79057ebce2d32fcc001ffffffff0400ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcacf0aed71218090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6454b4d444469636500f74cae60f1901161cbe475ff00f1024bb3d64be778b714bfbeb75afa20fffceba7424e7f2e4cf52d10db27941ec9bffe4f0410f9cdd991f4ad5c8621333b612e000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[31-Jul-18 02:24 AM] SHossain#0007
output:
```
babff5244baf91e6bed276a6667077302fc5358d2130374c5fb8d9906ecf7122
```


[31-Jul-18 02:26 AM] SHossain#0007
look like i had some users to play Dice üòÉ


[31-Jul-18 02:27 AM] Mylo#8306
where would i find the rpc port for ATEST?


[31-Jul-18 02:28 AM] Mylo#8306
is it +1 of the p2p port?


[31-Jul-18 02:28 AM] SHossain#0007
@jl777c `diceinfo` has a bug. it still shows the first funding amount
```
./komodo-cli -ac_name=ATEST diceinfo ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7
{
  "result": "success",
  "fundingtxid": "ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7",
  "name": "KMDDice",
  "sbits": 28538276415819083,
  "minbet": "0.77700000",
  "maxbet": "7.77000000",
  "maxodds": 777,
  "timeoutblocks": 7,
  "funding": "777777.00000000"
}
```
explorer has different amount


[31-Jul-18 02:29 AM] SHossain#0007
@Mylo when you start a coin or AC, the p2p port is displayed in the startup outputs
`>>>>>>>>>> ATEST: p2p.42839 rpc.42840 magic.ecef9573 3975124339 1000 coins`


[31-Jul-18 02:29 AM] SHossain#0007
the port for ATEST is 42839


[31-Jul-18 02:29 AM] SHossain#0007
it is -1 of the rpcport


[31-Jul-18 02:30 AM] Mylo#8306
-1, ok.  in debug.log when connection ```2018-07-31 09:25:52 connect() to 94.102.63.217:40245 failed after select(): Connection refused (111)
```


[31-Jul-18 02:31 AM] Mylo#8306
oh i'm using the  start up from https://github.com/himu007/KMD-CC-Token-Test-Guide

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[31-Jul-18 02:31 AM] Mylo#8306
```./komodod -ac_cc=1 -ac_name=ATEST -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<yourpubkey> -addnode=136.243.58.134 -addnode=195.201.20.230 -addnode=195.201.137.5 &```


[31-Jul-18 02:32 AM] SHossain#0007
we all are using this ^^


[31-Jul-18 02:32 AM] Mylo#8306
ok i'll rebuild docker with ports you show.  debug.log has 40245 though....?


[31-Jul-18 02:32 AM] SHossain#0007
you need to have your pubkey instead of `<yourpubkey>`


[31-Jul-18 02:33 AM] Mylo#8306
yeah it was there üòÉ 03ace something...


[31-Jul-18 02:33 AM] Mylo#8306
thx


[31-Jul-18 02:36 AM] Mylo#8306
`>>>>>>>>>> ATEST: port.40245/40246 magic.31c42f49 834940745 1000 coins`


[31-Jul-18 02:36 AM] Mylo#8306
i must be on different start up params


[31-Jul-18 02:37 AM] SHossain#0007
```
./komodod -ac_cc=1 -ac_name=ATEST -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc -addnode=136.243.58.134 -addnode=195.201.20.230 -addnode=195.201.137.5 &
```


[31-Jul-18 02:40 AM] Mylo#8306
weird ```/src/komodod -ac_cc=1 -ac_name=ATEST -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=033ace50aedf8df70035b962a805431363a61cc4e69d99d90726a2d48fb195f68c  -addnode=136.243.58.134 -addnode=195.201.20.230 -addnode=195.201.137.5 &
[1] 36
root@b62cfdc3404a:/# end.0 blocks, reward 100000.00000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
call komodo_args.(/komodo/src/komodod) NOTARY_PUBKEY.(033ace50aedf8df70035b962a805431363a61cc4e69d99d90726a2d48fb195f68c)
>>>>>>>>>> ATEST: port.40245/40246 magic.31c42f49 834940745 1000 coins```
maybe it is docker üò¶


[31-Jul-18 02:50 AM] jl777c#5810
getinfo shows the p2p and rpc ports


[31-Jul-18 02:56 AM] jl777c#5810
fixed funding return value

{Reactions}
üëçüèΩ 

[31-Jul-18 03:01 AM] SHossain#0007
updating


[31-Jul-18 03:09 AM] jl777c#5810
i will fix the same issue with rewardsinfo


[31-Jul-18 03:11 AM] SHossain#0007
new diceinfo shows `  "funding": "777807.00000000"`
for the contract address, explorer has different balance `778836` http://cctest.explorer.dexstats.info/address/REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw


[31-Jul-18 03:13 AM] jl777c#5810
REab... is the ONLY dice CC address that all dice plans share


[31-Jul-18 03:14 AM] jl777c#5810
778836 should match the sum of all the diceplans' funding fields


[31-Jul-18 03:15 AM] SHossain#0007
ok. understood


[31-Jul-18 03:17 AM] SHossain#0007
diceinfo output looks correct


[31-Jul-18 03:18 AM] jl777c#5810
fixed the same issue with rewards. i think for faucet I should add a faucetinfo too


[31-Jul-18 03:24 AM] SHossain#0007
updating


[31-Jul-18 03:32 AM] Mylo#8306
works on dedicated box, i'll have to suss out what docker is doing wrong.  regtest works dedicated, not with docker.


[31-Jul-18 04:28 AM] jl777c#5810
updated dice CC, old plans are now broken, so new dicefund is needed


[31-Jul-18 04:31 AM] SHossain#0007
ok. will create another one


[31-Jul-18 04:32 AM] jl777c#5810
not yet


[31-Jul-18 04:32 AM] jl777c#5810
I am really still deep in the middle of dice and we still have assets/tokens and rewards CC that needs to be fullly tested


[31-Jul-18 04:32 AM] jl777c#5810
please find all bugs with tokens first


[31-Jul-18 04:39 AM] Mylo#8306
@SHossain have you got a `history` of your commands cli or curl?


[31-Jul-18 04:47 AM] SHossain#0007
i posted all commands in the github repo


[31-Jul-18 04:48 AM] SHossain#0007
i have not saved them locally


[31-Jul-18 04:52 AM] Mylo#8306
ty sir


[31-Jul-18 04:53 AM] Mylo#8306
so run ATEST chain and we're on dice right now?


[31-Jul-18 04:53 AM] jl777c#5810
if you read 4 posts up:

jl777cToday at 00:32
not yet
I am really still deep in the middle of dice and we still have assets/tokens and rewards CC that needs to be fullly tested
please find all bugs with tokens first


[31-Jul-18 04:58 AM] Mylo#8306
gotcha thanks


[31-Jul-18 05:01 AM] SHossain#0007
@Mylo you can test the rewards, faucet and token for now


[31-Jul-18 05:02 AM] Mylo#8306
yep, i can do that on my own can't i?


[31-Jul-18 05:02 AM] Mylo#8306
two nodes


[31-Jul-18 05:02 AM] SHossain#0007
i have a rewards contract


[31-Jul-18 05:03 AM] SHossain#0007
you can lock some funds in there


[31-Jul-18 05:03 AM] Mylo#8306
oh i'll need funds


[31-Jul-18 05:03 AM] SHossain#0007
post your address


[31-Jul-18 05:04 AM] Mylo#8306
`RRfwaf9T24wa5GRmtdRcq2QSpTAmmxp5it` por favor


[31-Jul-18 05:05 AM] CHMEX#0686
8f3ec2fe087df376b661ef5a369b632e2c6f0c09818f2e005fce81500b7818ff


[31-Jul-18 05:05 AM] SHossain#0007
aha...thanks @CHMEX


[31-Jul-18 05:06 AM] siu#3920
Have you noticed there are 2 rewards contracts that are exactly the same?


[31-Jul-18 05:06 AM] jl777c#5810
there is a faucet


[31-Jul-18 05:06 AM] siu#3920
```iu@T460:~/komodo/src$ ./komodo-cli -ac_name=ATEST rewardslist
[
  "ca553d2737b91a059db365d613dcc4865bd1127aece51793cbafbd5719b9fe83",
  "ca553d2737b91a059db365d613dcc4865bd1127aece51793cbafbd5719b9fe83",
```


[31-Jul-18 05:07 AM] jl777c#5810
just do a faucetget to get some coins from the faucet


[31-Jul-18 05:07 AM] jl777c#5810
duplicate entry seems a low priority bug. hopefully there are higher bugs to find


[31-Jul-18 05:08 AM] Mylo#8306
```$ ./komodo-cli -ac_name=ATEST faucetaddress 03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk",
  "CCaddress": "RSxACZQhskPjQyxp7TUPG1oP1wm4agFycJ",
  "myCCaddress": "RJf8Hm6gcExTDvYkXi9Mvu9LjDuKkeewdq",
  "myaddress": "RGxBQho3stt6EiApWTzFZxDvqqsM8GwAuk"
}```
so the faucet pubkey is a published thing that is given out by the "project" doing the faucet-ing?


[31-Jul-18 05:08 AM] CHMEX#0686
~/komodo/src$ ./komodo-cli -ac_name=ATEST faucetget
./komodo-cli -ac_name=ATEST sendrawtransaction


[31-Jul-18 05:08 AM] jl777c#5810
anybody can fund the faucet


[31-Jul-18 05:08 AM] jl777c#5810
faucetinfo shows how much funds it has


[31-Jul-18 05:09 AM] jl777c#5810
each chain has only one faucet CC


[31-Jul-18 05:09 AM] jl777c#5810
presumably the community/project would fund it


[31-Jul-18 05:10 AM] CHMEX#0686
@SHossain can you pin your repo with the docs?


[31-Jul-18 05:11 AM] SHossain#0007
sure. go ahead


[31-Jul-18 05:12 AM] Mylo#8306
`faucetaddress` <pubkey>
i put shossains pubkey, i put my pubkey.
the differences are:
`CCaddress` & `myaddress` <---this is obvous.
why is CCaddress different?


[31-Jul-18 05:13 AM] Mylo#8306
putting help in gets this
```
mylo@dedi-par-76117:~/komodo/src$ ./komodo-cli -ac_name=ATEST faucetaddress help                                                              
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk",
  "myCCaddress": "RJf8Hm6gcExTDvYkXi9Mvu9LjDuKkeewdq",
  "myaddress": "RGxBQho3stt6EiApWTzFZxDvqqsM8GwAuk"
}
```


[31-Jul-18 05:15 AM] Mylo#8306
oops wrong way. noob. sorry


[31-Jul-18 05:16 AM] Mylo#8306
needs some ‚ù§  anyway
```
$ ./komodo-cli -ac_name=ATEST help faucetaddress
faucetaddress [pubkey]
```


[31-Jul-18 05:22 AM] Mylo#8306
is `  "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk"` relatively new?


[31-Jul-18 05:23 AM] siu#3920
i had some funds locked in FREE


[31-Jul-18 05:23 AM] siu#3920
unlocked them now


[31-Jul-18 05:24 AM] siu#3920
saw that tx was in `rawmempool` so i started mining


[31-Jul-18 05:24 AM] siu#3920
now commands get stuck and no specific error message appears to be printing


[31-Jul-18 05:25 AM] siu#3920
```cant find rewards inputs
cant find rewards inputAPR 5.00000000 minseconds.86400 maxseconds.864000 mindeposit 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) f383092ebaa0a7ea40f47c36569d006e273c818ef1dc3a8e173b9c2aaf07273a/v0 1000.00000000
fundsflag.0 (F) 1000.00000000 1000.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 166c8b3f1eaf987ce6f38e0edcad4422e21b1740954569089d43f86108d24b56/v0 20.00000000
fundsflag.0 (L) 20.00000000 20.00000000
minseconds 86400 maxseconds 864000
duration 161399 (1533039107 - 1532877708)
amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) f383092ebaa0a7ea40f47c36569d006e273c818ef1dc3a8e173b9c2aaf07273a/v0 1000.00000000
fundsflag.1 (F) 1000.00000000 1000.00000000
inputs 1000.00000000 CCchange 999.99478208 amount 20.00000000 reward 0.00511792
minseconds 86400 maxseconds 864000
duration 161399 (1533039107 - 1532877708)
amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
minseconds 86400 maxseconds 864000
duration 161399 (1533039107 - 1532877708)
amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
minseconds 86400 maxseconds 864000
duration 161399 (1533039107 - 1532877708)
amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
minseconds 86400 maxseconds 864000
duration 161399 (1533039107 - 1532877708)
amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
notaryid.-1 Mining.ATEST with tromp
try ATEST Mining with tromp
minseconds 86400 maxseconds 864000
duration 161399 (1533039107 - 1532877708)
amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
minseconds 86400 maxseconds 864000
duration 161399 (1533039107 - 1532877708)
```


[31-Jul-18 05:25 AM] siu#3920
```amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
minseconds 86400 maxseconds 864000
minseconds 86400 maxseconds 864000
duration 161399 (1533039107 - 1532877708)
amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
duration 161399 (1533039107 - 1532877708)
amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
minseconds 86400 maxseconds 864000
minseconds 86400 maxseconds 864000
duration 161399 (1533039107 - 1532877708)
amount 20.00000000 10000000000.00000000 317 -> duration.161399 reward 0.00511792
```


[31-Jul-18 05:41 AM] SHossain#0007 (pinned)
https://github.com/himu007/KMD-CC-Token-Test-Guide

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[31-Jul-18 05:41 AM] SHossain#0007
Pinned a message.


[31-Jul-18 05:47 AM] Mylo#8306
`faucetinfo` ?


[31-Jul-18 05:52 AM] SHossain#0007
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/faucet/faucetaddress.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/rpc/faucet/faucetaddress.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[31-Jul-18 05:52 AM] SHossain#0007
a balance of the faucet address would be nice


[31-Jul-18 05:56 AM] jl777c#5810
you mean like:
faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "200207.99860023"
}


[31-Jul-18 05:57 AM] SHossain#0007
i guess you can include that in the `faucetaddress` call. while it is displaying the central faucet address, it can display the balance as well


[31-Jul-18 05:57 AM] SHossain#0007
just a thought


[31-Jul-18 05:58 AM] SHossain#0007
rather than creating additional call for this


[31-Jul-18 06:00 AM] jl777c#5810
faucetinfo has been live for a while now


[31-Jul-18 06:03 AM] Mylo#8306
```komodo-cli -ac_name=ATEST faucetinfo
error code: -32601
error message:
Method not found```


[31-Jul-18 06:04 AM] Mylo#8306
oh are you doing it from curl jl?


[31-Jul-18 06:04 AM] jl777c#5810
using jl777 branch


[31-Jul-18 06:05 AM] Mylo#8306
3 hours ago i saw comment üòÉ


[31-Jul-18 06:07 AM] SHossain#0007
my bad. i didn't check faucetinfo


[31-Jul-18 06:07 AM] SHossain#0007
will test and put it in the doc


[31-Jul-18 06:15 AM] SHossain#0007
`faucetinfo` added

{Reactions}
üëç 

[31-Jul-18 06:15 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "200207.99860023"
}
```


[31-Jul-18 06:23 AM] Mylo#8306
ok i'll be back.  have to do something before meeting.  will come back later and test rewards and token.


[31-Jul-18 07:22 AM] siu#3920
Can anyone try to unlock funds from rewardsunlock?


[31-Jul-18 07:37 AM] jl777c#5810
yes


[31-Jul-18 07:37 AM] jl777c#5810
anyone can, but it should only go back to where it was locked from


[31-Jul-18 07:57 AM] jl777c#5810
pushed fix for miner locking up


[31-Jul-18 08:06 AM] gcharang#6833
Is there a pkill command for killing `komodod`


[31-Jul-18 08:10 AM] jl777c#5810
if you were mining and it doesnt stop, you need to kill -9

{Reactions}
üëç 

[31-Jul-18 08:10 AM] siu#3920
Anyone got the same freeze after unlocking funds?


[31-Jul-18 08:13 AM] jl777c#5810
pushed fix for miner locking up


[31-Jul-18 08:13 AM] jl777c#5810
it was in the rewards CC


[31-Jul-18 08:13 AM] jl777c#5810
update


[31-Jul-18 08:14 AM] SHossain#0007
updating


[31-Jul-18 08:17 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST rewardsunlock FREE c0c5165902fd21728aed707888db082a72a013def8902c21626c1e5214f00fae 86185406f5836b60a381f254d743983b3719bf61cee5ca0c07dbd0806aee1094
APR 5.00000000 minseconds.86400 maxseconds.864000 mindeposit 10.00000000
minseconds 86400 maxseconds 864000
duration 72347 (1533050138 - 1532977791)
duration 72347 < minseconds 86400
amount 500.00000000 -> reward 0.00000000
error code: -1
error message:
basic_string::_M_construct null not valid
```


[31-Jul-18 08:19 AM] jl777c#5810
duration 72347 < minseconds 86400
72347 is not long enough


[31-Jul-18 08:20 AM] SHossain#0007
i guess in few more hours it will be unlocked.


[31-Jul-18 09:09 AM] jl777c#5810
latest version has dice CC which automatically generates win/loss tx (as long as the house address node is running)


[31-Jul-18 09:09 AM] jl777c#5810
left to do is the timeout claiming and validation. so for now no cheating


[31-Jul-18 09:16 AM] SHossain#0007
http://cctest.explorer.dexstats.info/ 
the explorer seems down for me

{Embed}
http://cctest.explorer.dexstats.info/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[31-Jul-18 09:16 AM] SHossain#0007
can anyone else please confirm?


[31-Jul-18 09:22 AM] siu#3920
The site loaded but i dont see blocks. Im from phone on bad connection though


[31-Jul-18 09:24 AM] jl777c#5810
today's fix for rewards CC is needed, otherwise nodes will lockup


[31-Jul-18 09:25 AM] SHossain#0007
@CHMEX you may need to update the cctest explorer üòÉ


[31-Jul-18 09:25 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST dicebet KMDDice ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7 7 10
add 10.00000000
add 7.00000000
add 777777.00000000
add 10.00000000
mask.1 vs CCmask.0 1 0 7
{
  "result": "success",
  "hex": "0100000003c8072b0be6fa420f34e0864140decec0c298070b5986ca5b64cfa167421f8920000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81409d243ed80029d9eb827a4bff8d32d5860c31076cc753fae9fdc446ee17326fb933d5b3d2eb5052836dbc7011024aef1418b4d2e9433631497472682205eb74a6a100af038001e6a10001ffffffff35a3ae8f3b7748a913870531cc05db530cb2b1d22bf811dde28c9495990f4268020000004847304402205c2cd85ce0239a1006e22866e21d89a946a30dd3d7f37953f142e12df6c31b9502204155f28ecb7f1d571fad53499e3cf45b911bf46642bc7afdbbb99c5c23b8ab2a01ffffffff35a3ae8f3b7748a913870531cc05db530cb2b1d22bf811dde28c9495990f42680300000049483045022100eb25c0daa5ebccf884aef5a751fa772d4f30604529c947560577fe9d966c556f0220154289ebb11514a754bfaa8bf943e6e792aae141eea1be6c1937ab2fe4ffe6f901ffffffff0500ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc0027b92900000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1a27000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcacc6dcfffa17090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6424b4d444469636500f74cae60f1901161cbe475ff00f1024bb3d64be778b714bfbeb75afa20fffceb71e2a7e994297514406421bcddfd430f60db628ca1f3242deb1814b163886e90000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[31-Jul-18 09:26 AM] SHossain#0007
output:
```
8f8cb72ebfa9f5358fbb9bc6f3568eb23cf9f01a38be5b22dd2fbb21f50f2ba3
```


[31-Jul-18 09:27 AM] jl777c#5810
did you make a new dice plan today? there was a change that made old ones not work


[31-Jul-18 09:28 AM] jl777c#5810
automatic detection of win/loss tx is not yet, but the house node should print


[31-Jul-18 09:28 AM] jl777c#5810
i got: only dice fund creator can submit winner or loser


[31-Jul-18 09:29 AM] SHossain#0007
i see


[31-Jul-18 09:29 AM] SHossain#0007
creating a new plan


[31-Jul-18 09:31 AM] jl777c#5810
i am seeing a crash. investigating

{Reactions}
üëçüèΩ 

[31-Jul-18 09:34 AM] SHossain#0007
i wanted to create another dice plan with same name. the chain didn't allow me
`Dice plan (KMDDice) already exists cmpflag.0`


[31-Jul-18 09:34 AM] SHossain#0007
expected behaviour


[31-Jul-18 09:44 AM] jl777c#5810
yes, names are unique


[31-Jul-18 09:44 AM] jl777c#5810
pushed fix for crash


[31-Jul-18 09:54 AM] SHossain#0007
new dice plan
```
./komodo-cli -ac_name=ATEST diceinfo 4db6e015e520488f585d7d7d2c13a95eec7a1cb4ac465f5efa9dad3fec45bbbb
add 777777.77777777
{
  "result": "success",
  "fundingtxid": "4db6e015e520488f585d7d7d2c13a95eec7a1cb4ac465f5efa9dad3fec45bbbb",
  "name": "DiceGeni",
  "sbits": 7597120978738702660,
  "minbet": "0.77777777",
  "maxbet": "7.77777770",
  "maxodds": 777,
  "timeoutblocks": 7,
  "funding": "777777.77777777"
}
```


[31-Jul-18 09:57 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST dicebet DiceGeni 4db6e015e520488f585d7d7d2c13a95eec7a1cb4ac465f5efa9dad3fec45bbbb 7 1.5
add 777777.77777777
cant find dice entropy inputs
error code: -1
error message:
basic_string::_M_construct null not valid
```


[31-Jul-18 09:59 AM] SHossain#0007
the plan already deducted the balance from my account. do i still need to add more funds there before betting?


[31-Jul-18 10:00 AM] jl777c#5810
you need to diceaddfunds


[31-Jul-18 10:01 AM] jl777c#5810
that is what "cant find dice entropy inputs" means


[31-Jul-18 10:10 AM] SHossain#0007
```
./komodo-cli -ac_name=ATEST dicebet DiceGeni 4db6e015e520488f585d7d7d2c13a95eec7a1cb4ac465f5efa9dad3fec45bbbb 7 1.5
add 777777.77777777
add 1000.00000000
mask.1 vs CCmask.0 1 0 3
{
  "result": "success",
  "hex": "0100000002dc77cac6ecea39ff074d52b21b43cd15a1942667590811bc815ce1c31355dac2000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140547ee05790c9b96d7a67768f66fc703c5640d14bbb41af5314798a78b6a7af2b737eb39e5a6ba69266bd331ac1d18aed018a76c849f8ad403ca7b46bee4bc24fa100af038001e6a10001ffffffff868eaddd5c14b3c2c06f4d9fdab227e0d3e1136ca347089ce0a7524c35ab541a0000000049483045022100e42d35d5e2542b52bc59f3c7e473604acdca21ccf85c580fa91e08c3e92a2d820220696603e6b41c12a988801ae78deea5ae4205776755668e21cc070880aa3a056d01ffffffff0500e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc0027b92900000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1127000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac17caac4105020000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6424469636547656e69bbbb45ec3fad9dfa5e5f46acb41c7aec5ea9132c7d7d5d588f4820e515e0b64dd329605daaca4b441695b565ee1382ec8c01014e96031775ab24cf5c317a4fa7000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[31-Jul-18 10:11 AM] SHossain#0007
output:
```
winnings 7.00000000 bet 7.00000000 at odds 1:1 52176ad4c1636e7ae25f055acf6b4eae63d32529e20cd068efc412df1c29d979 vs 6b6f3961c5c7038a4ce3faffff411e2281f7f8bff3aa87b7279f45c0b2ded978
DiceIsWinner.1
winnings 7.00000000 bet 7.00000000 at odds 1:1 52176ad4c1636e7ae25f055acf6b4eae63d32529e20cd068efc412df1c29d979 vs 6b6f3961c5c7038a4ce3faffff411e2281f7f8bff3aa87b7279f45c0b2ded978
DiceIsWinner.1
e41c47cf55282eda66ac0f5493554a0ac6c84fefbd0722a4b1cc2436e5a29c2f
duplicate.0 dicefinish.1 DiceGeni funding.4db6e015e520488f585d7d7d2c13a95eec7a1cb4ac465f5efa9dad3fec45bbbb bid.e41c47cf55282eda66ac0f5493554a0ac6c84fefbd0722a4b1cc2436e5a29c2f
duplicate.1 dicefinish.1 DiceGeni funding.4db6e015e520488f585d7d7d2c13a95eec7a1cb4ac465f5efa9dad3fec45bbbb bid.e41c47cf55282eda66ac0f5493554a0ac6c84fefbd0722a4b1cc2436e5a29c2f
winnings 7.00000000 bet 7.00000000 at odds 1:1 52176ad4c1636e7ae25f055acf6b4eae63d32529e20cd068efc412df1c29d979 vs 6b6f3961c5c7038a4ce3faffff411e2281f7f8bff3aa87b7279f45c0b2ded978
```


[31-Jul-18 10:12 AM] SHossain#0007
```
iswin.1 matches
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) ef63c57deb9308deb13ed0d1d7f771402d58956edfbc33b8423f140dbe61220b/v0 10.00000000
fundsflag.1 (B) 10.00000000 10.00000000
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) ef63c57deb9308deb13ed0d1d7f771402d58956edfbc33b8423f140dbe61220b/v1 7.00000000
fundsflag.1 (B) 7.00000000 7.00000000
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) 63aacbb45d6372749794b7cc55ee89dff4e6c3b285335fc40b5f3bd141752a13/v0 1.00000000
fundsflag.1 (B) 1.00000000 1.00000000
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) 63aacbb45d6372749794b7cc55ee89dff4e6c3b285335fc40b5f3bd141752a13/v1 1.00000000
fundsflag.1 (B) 1.00000000 1.00000000
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) d187083e9d4b4d6331f16e90146d79b3c9e8f303c0813b9bdb2a81f93380321b/v0 1.00000000
null funcid
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) 68420f9995948ce2dd11f82bd2b1b20c53db05cc31058713a948773b8faea335/v0 10.00000000
```


[31-Jul-18 10:13 AM] SHossain#0007
```
fundsflag.1 (B) 10.00000000 10.00000000
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) 68420f9995948ce2dd11f82bd2b1b20c53db05cc31058713a948773b8faea335/v1 7.00000000
fundsflag.1 (B) 7.00000000 7.00000000
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) 9e5b9af84985fb7313f64a690a2a486643b4b4dcb3868475cd3eaf59819bc13c/v0 1.00000000
null funcid
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) 6f081521ed119267c98171136417e196d1f4a04f4539179f961f9d12f4ecad3d/v0 1.00000000
null funcid
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) 645e17843726f31a569a8d7be71dfb0e4be51abf8b48a2f9248344adf0ae9141/v0 1.00000000
fundsflag.1 (B) 1.00000000 1.00000000
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) 645e17843726f31a569a8d7be71dfb0e4be51abf8b48a2f9248344adf0ae9141/v1 1.00000000
fundsflag.1 (B) 1.00000000 1.00000000
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) d0ba665e9544aa12e835add1159012c19083c842c18dbb54caaf439596555e42/v0 1.00000000
fundsflag.1 (B) 1.00000000 1.00000000
(REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw) d0ba665e9544aa12e835add1159012c19083c842c18dbb54caaf439596555e42/v1 1.00000000
fundsflag.1 (B) 1.00000000 1.00000000
```


[31-Jul-18 10:14 AM] SHossain#0007
...


[31-Jul-18 10:14 AM] SHossain#0007
```
result.(6eff68f9aeb092fef6c715d0470a70e8ccda2f73d84baf8daec2be4c354b62df)
winnings 7.00000000 bet 7.00000000 at odds 1:1 52176ad4c1636e7ae25f055acf6b4eae63d32529e20cd068efc412df1c29d979 vs 6b6f3961c5c7038a4ce3faffff411e2281f7f8bff3aa87b7279f45c0b2ded978
DiceIsWinner.1
duplicate.1 dicefinish.1 DiceGeni funding.4db6e015e520488f585d7d7d2c13a95eec7a1cb4ac465f5efa9dad3fec45bbbb bid.e41c47cf55282eda66ac0f5493554a0ac6c84fefbd0722a4b1cc2436e5a29c2f
```


[31-Jul-18 10:19 AM] SHossain#0007
next one, no win
```
iswin.-1 matches
mask.3 vs CCmask.0 3 0 3
```


[31-Jul-18 10:19 AM] jl777c#5810
did you get paid the winner?


[31-Jul-18 10:20 AM] Deleted User#0000
someone is spamming in the #dev-scalability  channel dunno who can ban @SHossain


[31-Jul-18 10:21 AM] SHossain#0007
done


[31-Jul-18 10:27 AM] SHossain#0007
yes, winner is paid


[31-Jul-18 10:29 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/473904965602246656/dice-winner


[31-Jul-18 10:29 AM] jl777c#5810
it was automatic?


[31-Jul-18 10:29 AM] SHossain#0007
yes


[31-Jul-18 10:29 AM] jl777c#5810
the big test is for a differnt node to bet and have it automatic paid


[31-Jul-18 10:29 AM] jl777c#5810
blockchain enforced provably fair dice


[31-Jul-18 10:30 AM] SHossain#0007
i didn't do anything manually


[31-Jul-18 10:30 AM] jl777c#5810
took 2 days so far


[31-Jul-18 10:30 AM] SHossain#0007
did a getinfo call in the beginning and at end


[31-Jul-18 10:30 AM] SHossain#0007
listed in the txt file


[31-Jul-18 10:30 AM] jl777c#5810
the loser should be automatic too, but of course the bettor wont get anything


[31-Jul-18 10:32 AM] SHossain#0007
seems a lot of progress in 2 days


[31-Jul-18 10:33 AM] SHossain#0007
i see another winner
```
winnings 7.00000000 bet 7.00000000 at odds 1:1 0cbc6675420ebb0d0c788c5c48998382dab5299c5a5cc5e467773be8e89663bd vs 56887058c458949905fe1769b97febe46f38ef02b20a650e7a01cd8a2d751740
DiceIsWinner.1
duplicate.1 dicefinish.1 DiceGeni funding.4db6e015e520488f585d7d7d2c13a95eec7a1cb4ac465f5efa9dad3fec45bbbb bid.e1900291d7b3a0b1cb591bfb61fb6048ce72fa45af1b19760a5784def726b217
```


[31-Jul-18 10:33 AM] SHossain#0007
hope it wasn't mine


[31-Jul-18 10:33 AM] jl777c#5810
the same tx triggers at least 2, if not 3 validations


[31-Jul-18 10:33 AM] jl777c#5810
each one printing such things


[31-Jul-18 10:34 AM] jl777c#5810
check the txid


[31-Jul-18 10:34 AM] SHossain#0007
which hash is the exact txid?


[31-Jul-18 10:35 AM] jl777c#5810
maybe you won twice?


[31-Jul-18 10:35 AM] SHossain#0007
total twice. yes


[31-Jul-18 10:35 AM] SHossain#0007
i have played few times


[31-Jul-18 10:35 AM] SHossain#0007
first time didn't check my balance


[31-Jul-18 10:35 AM] jl777c#5810
at 7x?


[31-Jul-18 10:36 AM] SHossain#0007
yes


[31-Jul-18 10:36 AM] jl777c#5810
that is very lucky


[31-Jul-18 10:36 AM] SHossain#0007
```
dicebet DiceGeni 4db6e015e520488f585d7d7d2c13a95eec7a1cb4ac465f5efa9dad3fec45bbbb 7 1.5
```


[31-Jul-18 10:36 AM] SHossain#0007
odds 1.5


[31-Jul-18 10:36 AM] jl777c#5810
0cbc6675420ebb0d0c788c5c48998382dab5299c5a5cc5e467773be8e89663bd the house value was very low, allowed a win


[31-Jul-18 10:36 AM] jl777c#5810
odds are integers


[31-Jul-18 10:38 AM] jl777c#5810
i see, it was odds of 1:!


[31-Jul-18 10:38 AM] jl777c#5810
1:1


[31-Jul-18 10:48 AM] SHossain#0007
added 1000 coins, played few hands. now asking me again to add funds


[31-Jul-18 10:49 AM] jl777c#5810
are all tx confirmed?


[31-Jul-18 10:50 AM] SHossain#0007
mempool is empty


[31-Jul-18 10:50 AM] jl777c#5810
once they are confirmed, winning and losing tx should also work for entropy


[31-Jul-18 10:53 AM] jl777c#5810
if not, it is a bug


[31-Jul-18 10:54 AM] jl777c#5810
so create exact number of addfunding, and make sure you can do more bets than addfunding


[31-Jul-18 11:00 AM] SHossain#0007
for the current one i added 1000, used few times 7, as 8 would be max limit


[31-Jul-18 11:00 AM] SHossain#0007
i'll add another 1000


[31-Jul-18 11:01 AM] Alright#0419
Did anyone load that link to rebuild the explorer?


[31-Jul-18 11:01 AM] Alright#0419
or did it just break


[31-Jul-18 11:06 AM] SHossain#0007
it just broke. i initiated the update. should be ready soon


[31-Jul-18 11:06 AM] Alright#0419
Seems it got stuck updating


[31-Jul-18 11:06 AM] Alright#0419
tried it about a half hour ago


[31-Jul-18 11:07 AM] SHossain#0007
in that case we need CHMEX to have a look


[31-Jul-18 11:07 AM] SHossain#0007
i ran the link few minutes ago


[31-Jul-18 11:07 AM] Alright#0419
Ok, just no one touch it for a bit and see if it fixes itself üòõ


[31-Jul-18 11:08 AM] jl777c#5810
there was a critical update today


[31-Jul-18 11:08 AM] jl777c#5810
@SHossain it is not the amount that matters, but the number of utxos

{Reactions}
üëçüèΩ 

[31-Jul-18 11:13 AM] SHossain#0007
going afk. be back in an hour or so


[31-Jul-18 11:35 AM] Alright#0419
@jl777c is there some way I could get these commands to output unsigned raw txs? Or would my best bet for trying to create malformed txs be to change the contract itself?


[31-Jul-18 11:36 AM] jl777c#5810
change the functions that call FinalizeCCTx


[31-Jul-18 11:36 AM] jl777c#5810
i doubt you will be able to do the signing yourself, it uses a combined normal signing and CC signing


[31-Jul-18 11:37 AM] jl777c#5810
if ( (inputs= AddFaucetInputs(cp,mtx,faucetpk,nValue+txfee,60)) > 0 )
    {
        if ( inputs > nValue )
            CCchange = (inputs - nValue - txfee);
        if ( CCchange != 0 )
            mtx.vout.push_back(MakeCC1vout(EVAL_FAUCET,CCchange,faucetpk));
        mtx.vout.push_back(CTxOut(nValue,CScript() << ParseHex(HexStr(mypk)) << OP_CHECKSIG));
        return(FinalizeCCTx(-1LL,cp,mtx,mypk,txfee,opret));
    } else fprintf(stderr,"cant find faucet inputs\n");


[31-Jul-18 11:38 AM] Alright#0419
:/ would be able to test things a lot quicker if I could sign them myself. Could change things on the fly without having to rebuild to test each


[31-Jul-18 11:38 AM] Alright#0419
Will just start building though


[31-Jul-18 11:38 AM] jl777c#5810
dice isnt ready to be abused yet


[31-Jul-18 11:38 AM] jl777c#5810
use FinalizeCCTx


[31-Jul-18 11:39 AM] jl777c#5810
it is the only way for now. signrawtransaction does not work


[31-Jul-18 11:39 AM] jl777c#5810
for CC


[31-Jul-18 02:06 PM] siu#3920
did a new REWARDS program its called MASTERNODE :p


[31-Jul-18 02:14 PM] siu#3920
ups only got to MASTERNO


[31-Jul-18 02:14 PM] siu#3920
üòÇ


[31-Jul-18 02:43 PM] siu#3920
i notice that in help there is only `tokenswapask numtokens tokenid otherid price` but no `tokenswapbid`


[31-Jul-18 02:58 PM] Alright#0419
So I started with my poking on faucet as it's seems the simplest, but I can't get any malformed txs to pass consensus rules


[31-Jul-18 02:59 PM] Alright#0419
*seems* pretty solid in that it checks the exact amount. The only thing I could think of was maybe manipulating it to pay the miner instead, so a miner could just run it constantly and drain the faucet. Although, anyone could just run a script constantly to slowly drain the faucet, so it wouldn't really help them


[31-Jul-18 02:59 PM] Alright#0419
ü§∑


[31-Jul-18 02:59 PM] Alright#0419
*moves on to assets*


[31-Jul-18 03:02 PM] siu#3920
yeah


[31-Jul-18 03:02 PM] siu#3920
there is no limitation on the faucet contract


[31-Jul-18 03:02 PM] siu#3920
so one person can just drain it all in a few minutes


[31-Jul-18 03:11 PM] SHossain#0007
@siu `tokenswapbid` is not necessary. just swap the tokens


[31-Jul-18 03:11 PM] SHossain#0007
and use `tokenswapask`


[31-Jul-18 03:27 PM] siu#3920
ok


[31-Jul-18 03:28 PM] siu#3920
you own c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59?


[31-Jul-18 03:31 PM] siu#3920
```{
    "funcid": "e",
    "txid": "998c32ac6c733c4de31cc647a4bba4395e8e475b90b2b019559579faa407cd09",
    "vout": 0,
    "amount": "1000",
    "askamount": "1000",
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "otherid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": "0.00001234",
    "price": "0.00000001"
  },```


[31-Jul-18 03:31 PM] siu#3920
if someone wants to fill my ask


[31-Jul-18 06:17 PM] Mylo#8306
@Alright here's my docs on faucet https://github.com/imylomylo/KMD-CC-Token-Test-Guide/tree/master/rpc/faucet @SHossain can you PR it before it gets harder to merge pls üòÉ

{Embed}
https://github.com/imylomylo/KMD-CC-Token-Test-Guide/tree/master/rpc/faucet
imylomylo/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102


[31-Jul-18 06:18 PM] Mylo#8306
*my additions


[31-Jul-18 06:18 PM] Mylo#8306
üôè


[31-Jul-18 06:19 PM] Alright#0419
üî•


[31-Jul-18 10:17 PM] jl777c#5810
@siu plz demonstrate how someone can drain the faucet of more than a few coins per block


[31-Jul-18 10:18 PM] jl777c#5810
200,000 coins in the faucet you claim can be drained in "a few minutes"? really? if so that is a big bug


[31-Jul-18 10:18 PM] jl777c#5810
plz dont make unsubstantiated claims based on your false assumptions. please test and report ACTUAL results


[31-Jul-18 10:19 PM] jl777c#5810
faucet is utxo based. it should be preventing usage of a mempool utxo, which means max throughput is the total number of utxo the faucet has, which is not 100,000


[31-Jul-18 10:20 PM] jl777c#5810
so I think it will take closer to 50,000 blocks to drain the entire faucet, which is quite a lot longer than a few minutes. more like a month


[31-Jul-18 11:27 PM] jl777c#5810
@SHossain let us make test plans for each CC so that we can know how close to complete each one is. plz get help from cipi for the tokens test plan, that one will have a lot of similarities to barterDEX, though it is quite different and utxo-ness is mostly hidden


[01-Aug-18 02:14 AM] SHossain#0007
Thanks, will do.


[01-Aug-18 02:21 AM] SHossain#0007
@Mylo thanks for the updates. the help command for `faucetaddress` call shows how to use the call, that is already listed as `Usage: command` on top of every RPC call .md file.

{Reactions}
üëå 

[01-Aug-18 02:23 AM] SHossain#0007
i will use the faq entry and the description you provided for faucet. those looks good and are needed.


[01-Aug-18 04:04 AM] siu#3920
my statement was regarding smaller supply... like 1000 or 10000


[01-Aug-18 04:11 AM] jl777c#5810
1000 would still take many hours


[01-Aug-18 04:19 AM] siu#3920
```./komodo-cli -ac_name=ATEST sendrawtransaction 010000000309cd07a4fa79955519b0b2905b478e5e39a4bba447c61ce34d3c736cac328c99020000004948304502210092a6ad8cbbef0ff3d483c058580dfaa48338ca7b9e68deba684e77b5b641d3d10220174b20b056ab0a233472876d12bf4de4cea3df8ca64c69cfc856e088b8b6fa9601ffffffff09cd07a4fa79955519b0b2905b478e5e39a4bba447c61ce34d3c736cac328c99000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140b80f4401345b2037add332e4049021bb30f7ff94eaa978acca1a8603fe3685163e0b73cab675cbb7d09fee9479deced07893715577341af98dc8cbcdc6163af3a100af038001e3a10001ffffffff4f2016d356282fca9d8278aa04fbdbed98ac6af0bf7a479959c5bb91f95e8ef5020000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2781402f6515eca068539af87aedea1b0108ac9bedf7cad890cb6bdbfb2089a9287e1e7204702806f5177f4868a13de993a47fdadd57a003c672dd9aab845df6c3e7bba100af038001e3a10001ffffffff068503000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc6300000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc7b000000000000002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac6d03000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cce051724e180900002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000006f6a4c6ce3459217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5ec5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59570400000000000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000
```


[01-Aug-18 04:19 AM] siu#3920
tried to partially fillswap


[01-Aug-18 04:19 AM] siu#3920
```error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[01-Aug-18 04:19 AM] siu#3920
```AssetValidateSellvin
Got 0.00001000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
constrain vout error isCC 0 vs 1 CCflag
CC Eval EVAL_ASSETS Invalid: vout2 doesnt go to origpubkey fillex spending tx 998c32ac6c733c4de31cc647acd src
```


[01-Aug-18 04:22 AM] siu#3920
is there a limit of how much % of an order can be filled?


[01-Aug-18 04:22 AM] jl777c#5810
no limits


[01-Aug-18 04:22 AM] jl777c#5810
it is totally untested, so not surprising there are bugs. almost finished with dice, will investigate above after dice is done


[01-Aug-18 04:25 AM] siu#3920
ahh i notice the issue


[01-Aug-18 04:25 AM] siu#3920
the price is set in satoshis for swaps


[01-Aug-18 04:26 AM] siu#3920
different from bid and ask


[01-Aug-18 04:26 AM] jl777c#5810
constrain vout error isCC 0 vs 1 CCflag <- that is also a problem


[01-Aug-18 04:27 AM] jl777c#5810
i added more error check code, so best to make sure normal bid and ask are still working first


[01-Aug-18 04:28 AM] siu#3920
i have done various bid and asks and filled most here and everything seems to be doing good


[01-Aug-18 04:28 AM] siu#3920
but swaps are still tricky


[01-Aug-18 04:28 AM] jl777c#5810
yes


[01-Aug-18 04:29 AM] siu#3920
the pricing changes to satoshis which is confunsing


[01-Aug-18 04:29 AM] siu#3920
since bid and ask are natural numbers


[01-Aug-18 04:34 AM] siu#3920
also... could tokenlist get a `[pubkey]` option for getting the list of tokens with balance in a specific pubkey


[01-Aug-18 04:34 AM] jl777c#5810
assets are satoshi based


[01-Aug-18 04:38 AM] siu#3920
```./komodo-cli -ac_name=ATEST diceaddfunds KMDDice ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7 1000
error code: -1
error message:
basic_string::_M_construct null not valid
```


[01-Aug-18 04:38 AM] siu#3920
what am i doing wrong on this?


[01-Aug-18 04:38 AM] siu#3920
```./komodo-cli -ac_name=ATEST diceinfo ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7
{
  "result": "success",
  "fundingtxid": "ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7",
  "name": "KMDDice",
  "sbits": 28538276415819083,
  "minbet": "0.77700000",
  "maxbet": "7.77000000",
  "maxodds": 777,
  "timeoutblocks": 7,
  "funding": "777787.00000000"
}
```


[01-Aug-18 04:39 AM] siu#3920
`diceaddfunds name fundingtxid amount`


[01-Aug-18 04:45 AM] jl777c#5810
only the one that created a dice plan is able to addfunds


[01-Aug-18 04:49 AM] siu#3920
ok


[01-Aug-18 04:57 AM] siu#3920
``` ./komodo-cli -ac_name=ATEST dicebet KMDDice ebfcff20fa5ab7bebf14b778e74bd6b34b02f100ff75e4cb611190f160ae4cf7 5 2
error code: -1
error message:
basic_string::_M_construct null not valid
```


[01-Aug-18 04:57 AM] siu#3920
```(E 10.00000000) numentropy tx 1: 777787.00000000
cant find dice entropy inputs```


[01-Aug-18 04:58 AM] siu#3920
trying with different odds and cant get it to work


[01-Aug-18 04:59 AM] jl777c#5810
likely no entropy tx, can you wait until dice is ready to test before testing it?


[01-Aug-18 05:23 AM] siu#3920
@SHossain  im sending some PR to your repo... updating some old info https://github.com/himu007/KMD-CC-Token-Test-Guide/pull/6

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/pull/6
Update README.md by siulynot ¬∑ Pull Request #6 ¬∑ himu007/KMD-CC-...
https://images-ext-1.discordapp.net/external/xCKCGKW2Cdx-azNvvFa86K6JbDxwudWk-KIM31ZOFss/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/225342

{Reactions}
üëçüèΩ 

[01-Aug-18 05:33 AM] siu#3920
https://github.com/himu007/KMD-CC-Token-Test-Guide/pull/7

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/pull/7
Create tokenask.md by siulynot ¬∑ Pull Request #7 ¬∑ himu007/KMD-C...
https://images-ext-1.discordapp.net/external/xCKCGKW2Cdx-azNvvFa86K6JbDxwudWk-KIM31ZOFss/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/225342


[01-Aug-18 05:54 AM] jl777c#5810
OK, dice is ready to test. everything other than timeout tx should work


[01-Aug-18 05:54 AM] jl777c#5810
it is a hardforking change


[01-Aug-18 06:00 AM] jl777c#5810
@siu pushed fix for the swap fill error


[01-Aug-18 06:23 AM] siu#3920
ok


[01-Aug-18 06:27 AM] jl777c#5810
i just had a dicebet win and get the winning tx in 4 seconds


[01-Aug-18 06:31 AM] siu#3920
```{
    "funcid": "e",
    "txid": "998c32ac6c733c4de31cc647a4bba4395e8e475b90b2b019559579faa407cd09",
    "vout": 0,
    "amount": "1000",
    "askamount": "1000",
    "origaddress": "RQymbXA8FfWw2AaHv7oC8JRKo9W5HkFVMm",
    "tokenid": "9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e",
    "otherid": "c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59",
    "totalrequired": "0.00001234",
    "price": "0.00000001"
  },
```


[01-Aug-18 06:31 AM] siu#3920
this is the order


[01-Aug-18 06:32 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenfillswap 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 998c32ac6c733c4de31cc647a4bba4395e8e475b90b2b019559579faa407cd09 0.00001
```


[01-Aug-18 06:32 AM] siu#3920
this is the `tokenfillswap`


[01-Aug-18 06:32 AM] siu#3920
```./komodo-cli -ac_name=ATEST sendrawtransaction 010000000205baade632273516722d906b74fd1c3e1aaf23da3f9a5a4b995f0ebc72c4c85f0100000049483045022100a7ef3a65ceec2cbb4d2dde6af7a516b8c6e2119323f051742b914cef9a96460a022013f873e755ce7693d25e439376c6ea81872e81a4a25e32f0021e7928fb312b0401ffffffff09cd07a4fa79955519b0b2905b478e5e39a4bba447c61ce34d3c736cac328c99000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281408491daa48ad1331a1d2b9fd2e680f8f5a1d3ed499ed1775c854e50c01fffab4b5beb9a53dc32eb6628a657f96797b765374e3bd55911110f1c84ec8b16c0b451a100af038001e3a10001ffffffff06e803000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0000000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc0000000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc6a43993b00000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc9667c92c4a0300002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000006f6a4c6ce3459217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5ec5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59d20400000000000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[01-Aug-18 06:32 AM] siu#3920
rawtx


[01-Aug-18 06:33 AM] siu#3920
```AssetValidate (E)
vin1 1000, vout0 1000, AssetValidateSellvin
Got 0.00001000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
CC Eval EVAL_ASSETS Invalid: asset inputs doesnt match vout2+3 fillex spending tx 998c32ac6c733c4de31cc647a4bba4395e8e475b90b2b019559579faa407cd09
```


[01-Aug-18 06:33 AM] siu#3920
output


[01-Aug-18 06:35 AM] jl777c#5810
investigating


[01-Aug-18 07:02 AM] jl777c#5810
but first need to fix a few problems I found with dice


[01-Aug-18 07:32 AM] siu#3920
ok


[01-Aug-18 09:05 AM] CHMEX#0686
can somebody confirm this on a fresh node not getting past height 9640
Don't trash your current chain as it might not sync past 9640


[01-Aug-18 09:11 AM] CHMEX#0686
this is tail -20 debug.log
maybe it helps
https://pastebin.com/VhKxgf2p

{Embed}
https://pastebin.com/VhKxgf2p
2018-08-01 16:09:38 ERROR: AcceptToMemoryPool: ConnectInputs faile...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[01-Aug-18 10:01 AM] siu#3920
mine is at 11261


[01-Aug-18 10:01 AM] siu#3920
you might want to update to latest and reindex @CHMEX


[01-Aug-18 10:09 AM] CHMEX#0686
Ok after a complete resynch from scratch?


[01-Aug-18 10:14 AM] siu#3920
yes


[01-Aug-18 10:15 AM] CHMEX#0686
Ok


[01-Aug-18 11:09 AM] jl777c#5810
@siu updated assetvalidate.E but just added some additional printout, need to see the value


[01-Aug-18 11:10 AM] siu#3920
ok... so i try again to do a fillswap?


[01-Aug-18 11:10 AM] jl777c#5810
do the same tx, yes


[01-Aug-18 11:12 AM] siu#3920
updating


[01-Aug-18 11:12 AM] jl777c#5810
also I think the fillswap you need to specify the number of assets, not a fraction


[01-Aug-18 11:12 AM] siu#3920
ok


[01-Aug-18 11:13 AM] siu#3920
will try with 1


[01-Aug-18 11:25 AM] siu#3920
``` ./komodo-cli -ac_name=ATEST sendrawtransaction 010000000305baade632273516722d906b74fd1c3e1aaf23da3f9a5a4b995f0ebc72c4c85f0100000049483045022100839b252d9d6c3aea1507945b09a44c50d7b9e1b562f0c4071341075c48e194800220747784bc3ffa363d70903087c46b8bd28454dc150bbdf93a8569756cf36d845001ffffffff09cd07a4fa79955519b0b2905b478e5e39a4bba447c61ce34d3c736cac328c99000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281405f37afa543279775b3edbbd184e4cdf2a53b2010875a11f81a75e7cae5d169a1335585c0f777bdc57fe8917b23783d99ad39b3ad8807bfb1f42276f22aa39bd4a100af038001e3a10001ffffffff4f2016d356282fca9d8278aa04fbdbed98ac6af0bf7a479959c5bb91f95e8ef5030000007b4c79a276a072a26ba067a5658021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e278140eddbae5ff422e21e2c13c5371ac60c33bdd715ba322fba3e8a4c0c12bb9a115c4a51778dbdbd2f292ff318dab5fddcec12e4c6f1ec9fbc99bf314394bca313f0a100af038001e3a10001ffffffff06e803000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0000000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc0100000000000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc143f993b00000000302ea22c80204f037064a29eb9cb7476eb8d0fbabbaa366c617f95fb4353658e84a493962eb38103120c008203000401cc00ab62684a0300002321028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e27ac00000000000000006f6a4c6ce3459217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5ec5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59d10400000000000021028bb4ae66aa4f1960a4aa822907e800eb688d9ab2605c8067a34b421748c67e2700000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[01-Aug-18 11:25 AM] siu#3920
this was my order


[01-Aug-18 11:25 AM] siu#3920
```./komodo-cli -ac_name=ATEST tokenfillswap 9217014eae0a83a0b64632f379c1b474859794f9eaf1cf1eecf5804ed6124a5e c5bbc34e6517c483afc910a3b0585c40da5c09b7c5d2d9757c5c5075e2d41b59 998c32ac6c733c4de31cc647a4bba4395e8e475b90b2b019559579faa407cd09 1
```


[01-Aug-18 11:25 AM] siu#3920
```AssetValidateSellvin
Got 0.00001000 to origaddr.(RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ)
assets vout0 1000, vin1 1000, vout2 1 -> orig, vout1 0, total 1234
ValidateAssetRemainder: orig_nValue == 1000 || received_nValue == 0 || paidunits == 1 || totalunits == 1234
CC Eval EVAL_ASSETS Invalid: mismatched remainder for fillex spending tx 998c32ac6c733c4de31cc647a4bba4395e8e475b90b2b019559579faa407cd09
```


[01-Aug-18 11:25 AM] siu#3920
output ^


[01-Aug-18 11:27 AM] jl777c#5810
ok, this helps, but too complicated to fix until tomorrow


[01-Aug-18 11:30 AM] siu#3920
the thing is that price got fractional because iit is showing satoshis


[01-Aug-18 11:30 AM] siu#3920
i think price should be like the bid and ask


[01-Aug-18 11:32 AM] jl777c#5810
i need to think through asssetA/assetB pricing when I am not tired


[01-Aug-18 11:43 AM] siu#3920
ok


[01-Aug-18 06:46 PM] Alright#0419
ATEST won't sync from 0 on the latest commit 
```
2018-08-02 01:44:59 ERROR: ConnectTip(): ConnectBlock 0167a555620d920b721f45a7ea7c9aabded85822ec76480374f17c6d1f
646974 failed
2018-08-02 01:44:59 InvalidChainFound: invalid block=0167a555620d920b721f45a7ea7c9aabded85822ec76480374f17c6d1f6
46974  height=9641  log2_work=20.915036  date=2018-07-31 06:37:57
2018-08-02 01:44:59 InvalidChainFound:  current best=006603f155f802c1d963a3a7400764983a93ce3f6ef0d04c11b0fba292d
168ac  height=9640  log2_work=20.914971  date=2018-07-31 06:37:42
2018-08-02 01:44:59 ERROR: CScriptCheck(): 2309f0c7ac81e93385835f70e4434a82dad8ef477ebbecc88cf8063c758755aa:0 Ve
rifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-02 01:44:59 ERROR: CScriptCheck(): 2309f0c7ac81e93385835f70e4434a82dad8ef477ebbecc88cf8063c758755aa:0 Ve
rifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-02 01:44:59 ERROR: AcceptToMemoryPool: ConnectInputs failed 2309f0c7ac81e93385835f70e4434a82dad8ef477ebb
ecc88cf8063c758755aa
2018-08-02 01:44:59 ERROR: CScriptCheck(): 2309f0c7ac81e93385835f70e4434a82dad8ef477ebbecc88cf8063c758755aa:0 Ve
rifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-02 01:44:59 ERROR: CScriptCheck(): 2309f0c7ac81e93385835f70e4434a82dad8ef477ebbecc88cf8063c758755aa:0 Ve
rifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-02 01:44:59 ERROR: AcceptToMemoryPool: ConnectInputs failed 2309f0c7ac81e93385835f70e4434a82dad8ef477ebb
ecc88cf8063c758755aa
```


[01-Aug-18 06:47 PM] Alright#0419
new chain?


[01-Aug-18 06:48 PM] Alright#0419
rejects http://cctest.explorer.dexstats.info/block/0167a555620d920b721f45a7ea7c9aabded85822ec76480374f17c6d1f646974


[01-Aug-18 06:56 PM] Alright#0419
from stdout
```
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 89947fce3c85ac701ac2a1b2f14565755da4
e8a69323f99b44c987c3de9d3ab5
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 89947fce3c85ac701ac2a1b2f14565755da4
e8a69323f99b44c987c3de9d3ab5
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 89947fce3c85ac701ac2a1b2f14565755da4
e8a69323f99b44c987c3de9d3ab5
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 89947fce3c85ac701ac2a1b2f14565755da4
e8a69323f99b44c987c3de9d3ab5
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 89947fce3c85ac701ac2a1b2f14565755da4
e8a69323f99b44c987c3de9d3ab5
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 89947fce3c85ac701ac2a1b2f14565755da4
e8a69323f99b44c987c3de9d3ab5
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 89947fce3c85ac701ac2a1b2f14565755da4
e8a69323f99b44c987c3de9d3ab5
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 12a86730ad65ef8d876883d1672668089bac
0b9df4a77d2fcc699f5b74f089f2
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 12a86730ad65ef8d876883d1672668089bac
0b9df4a77d2fcc699f5b74f089f2
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 12a86730ad65ef8d876883d1672668089bac
0b9df4a77d2fcc699f5b74f089f2
CC Eval EVAL_DICE Invalid: entropy tx not fundingPubKey for bet spending tx 12a86730ad65ef8d876883d1672668089bac
0b9df4a77d2fcc699f5b74f089f2
```


[01-Aug-18 06:56 PM] Alright#0419
creating a new chain for now


[01-Aug-18 07:22 PM] Alright#0419
`./komodod -ac_cc=1 -ac_name=AT1 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKEY> -addnode=195.201.137.5 -addnode=195.201.20.230`


[02-Aug-18 02:22 AM] jl777c#5810
yes some invalid (now) tx were previously accepted


[02-Aug-18 02:30 AM] CHMEX#0686
so shall we move to the above mentioned AT1  chain?


[02-Aug-18 02:37 AM] jl777c#5810
yes a good idea as the old ATEST chain is likely needing a rewind and no sense to fiddle with a broken chain


[02-Aug-18 02:38 AM] jl777c#5810
moving forward I will do the cutting edge testing on a different chain and as long as people update we would avoid such conditions


[02-Aug-18 02:39 AM] jl777c#5810
for now, the first 4 CC contracts assets, faucet, rewards and dice are essentially done other than for bugfixes. I still am fixing some runtime issues for dice where the winning/losing tx isnt always immediately sent out. It really should be processed in seconds and that would be really cool.


[02-Aug-18 02:41 AM] CHMEX#0686
yes to have a real-time experience is always nice and would probably also increase the usage of such a contract the faster the better.
I will move the explorer to the new chain than


[02-Aug-18 02:46 AM] jl777c#5810
found the problem, but it will take some hours to fix


[02-Aug-18 02:46 AM] jl777c#5810
it wont affect consensus


[02-Aug-18 02:46 AM] jl777c#5810
so for now plz test all other than dice


[02-Aug-18 02:52 AM] SHossain#0007
Pinned a message.


[02-Aug-18 05:30 AM] siu#3920
morning

{Reactions}
‚òï (3) 

[02-Aug-18 08:47 AM] siu#3920
https://smartvows.com/

{Embed}
https://smartvows.com/
SmartVows Blockchain Marriage Smart Contract
Get married on the blockchain! SmartVows provides smart contract services for Blockchain Weddings. Create your own Blockchain Marriage Smart Contract or buy a gift card for that modern couple. Makes a perfect engagement, wedding, or anniversary gift. Say it forever on the blo...
https://images-ext-2.discordapp.net/external/qVJ2ZzKl6cRbDTOwslmUM5R0t0fnH2eVGsampMFs0gQ/%3Fv%3D1511721764/https/cdn.shopify.com/s/files/1/2548/2292/files/Smartvows_c8da9d76-b1a5-4a3b-997a-e23a1eaafbeb_1200x1200.png


[02-Aug-18 08:47 AM] siu#3920
An idea for smart contract


[02-Aug-18 08:49 AM] jl777c#5810
finally stabilized the dice CC. The problems were caused by the need for automatically generating transactions by the house address. which exposed some issues with tracking mempool. anyway, I also changed some of the rpc calls and added a very useful dicestatus. With dicestatus you can find out if your bet won or lost. Using dicestatus, the house address can automatically finalize a specific bettxid or all pending ones


[02-Aug-18 08:49 AM] jl777c#5810
I still need to implement the timeout to collect the win, but with the dicebet finishing in a few seconds, it seems not a high priority

{Reactions}
Komodo 

[02-Aug-18 08:58 AM] jl777c#5810
so dice is ready for testing. just make sure you create enough addfunds tx


[02-Aug-18 09:01 AM] jl777c#5810
it does seem it loses track of some outputs, so keep a close eye on funds totals


[02-Aug-18 09:04 AM] jl777c#5810
actually, the protocol design eats an entropy utxo for each bet


[02-Aug-18 09:23 AM] siu#3920
Ok, updating


[02-Aug-18 09:37 AM] jl777c#5810
To setup a dice plan, you can run:
dicestatus dice <diceplan id> 
in a cron task. that will complete any missed bet tx and create entropy tx

{Reactions}
üëå 

[02-Aug-18 10:06 AM] siu#3920
ok


[02-Aug-18 10:13 AM] siu#3920
still trying to get a block of AT1 for funds


[02-Aug-18 10:24 AM] siu#3920
@Alright can you send me some funds?


[02-Aug-18 10:27 AM] siu#3920
RDjG4sM1y4udiJSszF6BLotqUnZX79Rom9


[02-Aug-18 10:27 AM] siu#3920
thanks!


[02-Aug-18 10:32 AM] jl777c#5810
you broadcast it?


[02-Aug-18 10:57 AM] siu#3920
``` ./komodo-cli -ac_name=AT1 diceinfo dae5c8147c416709bce9d153072e8857167cbba1255bcb16b35efceaa8a68538
{
  "result": "success",
  "fundingtxid": "dae5c8147c416709bce9d153072e8857167cbba1255bcb16b35efceaa8a68538",
  "name": "DICE",
  "sbits": 1162037572,
  "minbet": "1.00000000",
  "maxbet": "10.00000000",
  "maxodds": 7,
  "timeoutblocks": 5,
  "funding": "1000.00000000"
}
```


[02-Aug-18 10:58 AM] siu#3920
created this dice fund


[02-Aug-18 10:58 AM] siu#3920
``` ./komodo-cli -ac_name=AT1 dicebet DICE dae5c8147c416709bce9d153072e8857167cbba1255bcb16b35efceaa8a68538 5 3
error code: -1
error message:
basic_string::_M_construct null not valid
```


[02-Aug-18 10:58 AM] siu#3920
is there something wrong here?


[02-Aug-18 10:59 AM] siu#3920
also `diceaddfunds` returns:


[02-Aug-18 10:59 AM] siu#3920
```./komodo-cli -ac_name=AT1 diceaddfunds DICE dae5c8147c416709bce9d153072e8857167cbba1255bcb16b35efceaa8a68538 10
error code: -1
error message:
basic_string::_M_construct null not valid
```


[02-Aug-18 11:01 AM] siu#3920
output: ```numentropy tx 0: 1000.00000000
numentropy tx 0: 1000.00000000
cant find dice entropy inputs
cant find enough inputs

```


[02-Aug-18 11:03 AM] jl777c#5810
diceaddfunds should work


[02-Aug-18 11:03 AM] jl777c#5810
without entropy tx, nothing else will work.


[02-Aug-18 11:04 AM] jl777c#5810
it works fine for me. do you have any funds in that address?


[02-Aug-18 11:05 AM] jl777c#5810
address of your -pubkey


[02-Aug-18 11:06 AM] siu#3920
```  "DiceCCaddress": "REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw"```


[02-Aug-18 11:06 AM] siu#3920
?


[02-Aug-18 11:06 AM] jl777c#5810
your normal address


[02-Aug-18 11:07 AM] siu#3920
"myaddress": "RKVF6bHNo9w83ZJtM1RCEj4mb1HUsEYDUJ"
?


[02-Aug-18 11:07 AM] jl777c#5810
you need to add funds from normal address funds


[02-Aug-18 11:07 AM] jl777c#5810
whatever your address is


[02-Aug-18 11:07 AM] jl777c#5810
you posted: RDjG4sM1y4udiJSszF6BLotqUnZX79Rom9


[02-Aug-18 11:07 AM] jl777c#5810
how much funds in RDjG4sM1y4udiJSszF6BLotqUnZX79Rom9


[02-Aug-18 11:07 AM] siu#3920
hmm, yeah but i generated that one with a `getnewaddress`


[02-Aug-18 11:07 AM] jl777c#5810
what is your -pubkey address?


[02-Aug-18 11:08 AM] jl777c#5810
send funds from your wallet to your pubkey address so you have funds


[02-Aug-18 11:08 AM] jl777c#5810
if you dont have funds in the -pubkey address (whatever that is) you wont have funds to addfunding with


[02-Aug-18 11:09 AM] jl777c#5810
the funding dae5c8147c416709bce9d153072e8857167cbba1255bcb16b35efceaa8a68538 will have the address in its output


[02-Aug-18 11:09 AM] jl777c#5810
did you look at the dice.cpp documentation?


[02-Aug-18 11:09 AM] jl777c#5810
/*
 in order to implement a dice game, we need a source of entropy, reasonably fast completion time and a way to manage the utxos.
 
 1. CC vout locks "house" funds with hash(entropy)
 2. bettor submits bet, with entropy, odds, houseid and sends combined amount into another CC vout.
 3. house account sends funds to winner/loser with proof of entropy
 4. if timeout, bettor gets refund
 
 2. and 3. can be done in mempool
 
 The house commits to an entropy value by including the hash of the entropy value  in the 'E' transaction.
 
 To bet, one of these 'E' transactions is used as the first input and its hashed entropy is combined with the unhashed entropy attached to the bet 'B' transaction.
 
 The house node monitors the 'B' transactions and if it sees one of its own, it creates either a winner 'W' or loser 'L' transaction, with proof of hash of entropy.


[02-Aug-18 11:09 AM] jl777c#5810
In the even the house node doesnt respond before timeoutblocks, then anybody (including bettor) can undo the bet with funds going back to the house and bettor
 
 In order for people to play dice, someone (anyone) needs to create a funded dice plan and addfunding with enough utxo to allow players to find one.
 
createfunding:
 vins.*: normal inputs
 vout.0: CC vout for funding
 vout.1: owner vout
 vout.2: dice marker address vout for easy searching
 vout.3: normal change
 vout.n-1: opreturn 'F' sbits minbet maxbet maxodds timeoutblocks

addfunding (entropy):
 vins.*: normal inputs
 vout.0: CC vout for locked entropy funds
 vout.1: tag to owner address for entropy funds
 vout.2: normal change
 vout.n-1: opreturn 'E' sbits fundingtxid hentropy

bet:
 vin.0: entropy txid from house (must validate vin0 of 'E')
 vins.1+: normal inputs
 vout.0: CC vout for locked entropy
 vout.1: CC vout for locked bet
 vout.2: tag for bettor's address (txfee + odds)
 vout.3: change
 vout.n-1: opreturn 'B' sbits fundingtxid entropy

loser:
 vin.0: normal input
 vin.1: betTx CC vout.0 entropy from bet
 vin.2: betTx CC vout.1 bet amount from bet
 vin.3+: funding CC vout.0 from 'F', 'E', 'W', 'L' or 'T'
 vout.0: funding CC to entropy owner
 vout.1: tag to owner address for entropy funds
 vout.2: change to fundingpk
 vout.n-1: opreturn 'L' sbits fundingtxid hentropy proof
 
winner:
 same as loser, but vout.2 is winnings
 vout.3: change to fundingpk
 vout.n-1: opreturn 'W' sbits fundingtxid hentropy proof

timeout:
 same as winner, just without hentropy or proof
 
 */


[02-Aug-18 11:14 AM] siu#3920
crap... need to change some stuff


[02-Aug-18 11:17 AM] siu#3920
can someone send me some funds again?


[02-Aug-18 11:18 AM] jl777c#5810
there is no faucet?


[02-Aug-18 11:18 AM] siu#3920
i started the new chain with a pubkey that was not from that chain


[02-Aug-18 11:18 AM] siu#3920
ahh right


[02-Aug-18 11:18 AM] jl777c#5810
there should always be a faucet


[02-Aug-18 11:18 AM] jl777c#5810
you could always importprivkey


[02-Aug-18 11:18 AM] jl777c#5810
a pubkey doesnt "belong" to any specific chain


[02-Aug-18 11:18 AM] siu#3920
yeah, but need to roll up the old chain.


[02-Aug-18 11:19 AM] jl777c#5810
or drain the entire faucet in 2 minutes!


[02-Aug-18 11:19 AM] jl777c#5810
i heard it is easy to do

{Reactions}
trollface (3) 

[02-Aug-18 11:19 AM] siu#3920
üòÇ


[02-Aug-18 11:20 AM] siu#3920
draining it!


[02-Aug-18 11:28 AM] siu#3920
```./komodo-cli -ac_name=AT1 sendrawtransaction 0100000002bad9a2fb0084733eb59f9acaec249e53fbf72f1281861a36c332e5902f1d252c000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81405ddb12b7f1bfdcea9e5dbfa5b7ac744dc6130d70c7e33da6903f23e51ee4a7677fa28aa079c23809586652a2d5cefdfe6a58acdf7e52b715cfcddf29e08d08f0a100af038001e6a10001ffffffff06fb0bb86cc606aea7a8d73f909d70b6f39c7f97062562b6a81ff4ec4c1bc2f40000000049483045022100a34922bee09238e435c96f036b82c9a6c8c69ce63c7bd81b2c19532cc5b924db022058bce93461964a316751773bc1a82f677f3464eff7fe6ab5cad007ad8398345601ffffffff050065cd1d00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc0065cd1d00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc13270000000000002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9acddeca430180900002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ac00000000000000006d6a4c6ae64244494333000000002e95904ef8edcdabf471bd90d1bb067e499497c983be8c8a9fdf468d8eca3241d172c13571e27812edccbd99df14a3dde0f178a9a2bd53d1b32b378d3c10ea68000000000000000000000000000000000000000000000000000000000000000000000000
1668187112d6157f977a8c10d87eea9bf583b63139484e32245b666756f48b5e
```


[02-Aug-18 11:28 AM] siu#3920
now it worked


[02-Aug-18 11:29 AM] siu#3920
```0.00000000 bet 5.00000000 at odds 3:1
1668187112d6157f977a8c10d87eea9bf583b63139484e32245b666756f48b5e winnings 0.00000000 bet 5.00000000 at odds 3:1
1668187112d6157f977a8c10d87eea9bf583b63139484e32245b666756f48b5e winnings 0.00000000 bet 5.00000000 at odds 3:1
01000000034b3fedb3b3ab2f1626d202399087b015ef8fffe34d480efba268fb89e0b5d7aa00000000484730440220216822b6bd0d1bea7a0ae7c2737b55745fadef23ca17b4155216c3cb22fa5a7702205a8ccbbc39f9479d30d830d9dadf9778c25b4e288f9edaacb8718897a64ac1aa01ffffffff5e8bf45667665b24324e483931b683f59bea7ed8108c7a977f15d61271186816000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81407ab6ef7245281935d7eae2e50a86d7b460922b8fa02319572a8e738b758617751666cf07be4fc40f83111716a345fabc65f6a590d02d5b6823526661dbdedc07a100af038001e6a10001ffffffff5e8bf45667665b24324e483931b683f59bea7ed8108c7a977f15d61271186816010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140ef104064ed6f7657a494c383901fa9fcb0e11d0d82c9aaaa9705ccbf6b9abd4d5972266d06fe99a4c91b91e6f456ababc7482ba079477f98918decc8383f946fa100af038001e6a10001ffffffff0400ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc10270000000000002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ace051724e180900002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ac00000000000000006d6a4c6ae64c44494333000000002e95904ef8edcdabf471bd90d1bb067e499497c983be8c8a9fdf468d8eca3241fd88a0f16f09a7fe40dd5d21e40ef4530029104a854cef3c22dea9a25054e7cf0d82610af7f5698c6e6cc4bbf441f8d41d8d75395fdb5b95d6e5ead5483a6e1300000000
72adc693ce4ea8c75e854fd4cc1aee1a75cd504426af4fd4d51cc41139918ae1
added to mempool and broadcast
1668187112d6157f977a8c10d87eea9bf583b63139484e32245b666756f48b5e winnings 0.00000000 bet 5.00000000 at odds 3:1
```


[02-Aug-18 11:30 AM] siu#3920
```./komodo-cli -ac_name=AT1 dicestatus DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 1668187112d6157f977a8c10d87eea9bf583b63139484e32245b666756f48b5e
{
  "result": "success",
  "status": "loss"
}
```


[02-Aug-18 11:30 AM] siu#3920
üò¶


[02-Aug-18 11:30 AM] siu#3920
loss


[02-Aug-18 11:30 AM] jl777c#5810
1668187112d6157f977a8c10d87eea9bf583b63139484e32245b666756f48b5e winnings 0.00000000 bet 5.00000000 at odds 3:1


[02-Aug-18 11:30 AM] siu#3920
need to get out of the office, will try again in half an our


[02-Aug-18 11:30 AM] jl777c#5810
winnings of 0.00 is a loss


[02-Aug-18 11:31 AM] jl777c#5810
but it looks like it is working. the hard part is dicebet from some randome node that needs to be processed by the dice plan creator's node


[02-Aug-18 11:46 AM] siu#3920
Hah... that is medular info


[02-Aug-18 11:47 AM] siu#3920
So dice plab creator needs to be always online


[02-Aug-18 11:48 AM] jl777c#5810
not sure what medular info means... yes, dice plan creator needs to be online or all dicebets will timeout


[02-Aug-18 11:49 AM] jl777c#5810
and be an automatic win for the dicebet, so there is incentive to stay online


[02-Aug-18 11:49 AM] jl777c#5810
of course if no more entropy tx, nobody can bet against that plan


[02-Aug-18 11:54 AM] siu#3920
Medular as in, important for the contract to work


[02-Aug-18 11:56 AM] jl777c#5810
the spanish I am not so familiar

{Reactions}
üá™üá∏ 

[02-Aug-18 12:31 PM] siu#3920
ok, back for another test


[02-Aug-18 12:37 PM] siu#3920
```5e177babb5b55e8a15864649c04861195c895ac664c8c2023e5976a958602775 winnings 0.00000000 bet 5.00000000 at odds 3:1
```


[02-Aug-18 12:37 PM] siu#3920
lost again üò¶


[02-Aug-18 12:38 PM] jl777c#5810
at 3:1 odds what do you expect?


[02-Aug-18 12:46 PM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT1 sendrawtransaction 01000000029c46df1fb3408384203eacb0c96e18af448939875030a8a907b74a58660cf9fd000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140dca6b3772fe6f73e2284ef6dbdaa58354c926a5baaaacdda67d11344f2a0bd6102573921b8dd96880b3b4b5e29fd979edee7dee279133d2d2e31099230ce3f4fa100af038001e6a10001ffffffff5048bd3025d9ae4ce50e991fd91b25c26db45c607b750d687624947c20227e350000000049483045022100d6390919905477c64c2d5a8bdc85214df3daba65f6abfa493a598da6fafa666e0220407b42a96b733bb295bdc2888b6512664df3a089e57945653d82ad43d5cc5de001ffffffff0500f9029500000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc0065cd1d00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc17270000000000002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9acd9eca430180900002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ac00000000000000006d6a4c6ae64244494333000000002e95904ef8edcdabf471bd90d1bb067e499497c983be8c8a9fdf468d8eca324147d3f55c671eeae70466c1145249d729751b0063627b1b2006482a8f78319e71000000000000000000000000000000000000000000000000000000000000000000000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[02-Aug-18 12:47 PM] siu#3920
```df90c66584ab707a9a8305087398944af186ec9b0ac3e20848340b31fdf469c.(L 25.00000000) check first
numentropy tx 1: 1025.00000000
fdf90c66584ab707a9a8305087398944af186ec9b0ac3e20848340b31fdf469c.(L 25.00000000) check first
numentropy tx 1: 1025.00000000
CC Eval EVAL_DICE Invalid: vout[2] nValue violation for bet spending tx fdf90c66584ab707a9a8305087398944af186ec9b0ac3e20848340b31fdf469c
CC Eval EVAL_DICE Invalid: vout[2] nValue violation for bet spending tx fdf90c66584ab707a9a8305087398944af186ec9b0ac3e20848340b31fdf469c
```


[02-Aug-18 12:47 PM] siu#3920
```./komodo-cli -ac_name=AT1 dicebet DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 5 7
```


[02-Aug-18 12:56 PM] jl777c#5810
interesting bug... try even odds


[02-Aug-18 01:00 PM] siu#3920
1:1?


[02-Aug-18 01:07 PM] jl777c#5810
1x, 2x, 4x, 8x I think there might be rounding issues


[02-Aug-18 01:14 PM] siu#3920
1:1 works


[02-Aug-18 01:14 PM] siu#3920
2:1 works


[02-Aug-18 01:14 PM] jl777c#5810
my guess is 3x wont work


[02-Aug-18 01:14 PM] siu#3920
`56498555a810a9052e0a4c3b5bf677e99125d4cbe7473733a7ad9ad78f956098 winnings 15.00000000 bet 5.00000000 at odds 2:1
`


[02-Aug-18 01:14 PM] jl777c#5810
you won!


[02-Aug-18 01:14 PM] siu#3920
got my first win! woot!


[02-Aug-18 01:15 PM] siu#3920
```./komodo-cli -ac_name=AT1 dicebet DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 5 3
error code: -1
error message:
basic_string::_M_construct null not valid
```


[02-Aug-18 01:15 PM] siu#3920
3 didnt work


[02-Aug-18 01:15 PM] siu#3920
it was working though


[02-Aug-18 01:15 PM] jl777c#5810
if you bet 6, then 3x should work


[02-Aug-18 01:15 PM] jl777c#5810
i think it is not matching to the satoshi when it ends up with fractions


[02-Aug-18 01:16 PM] siu#3920
4:1 worked


[02-Aug-18 01:16 PM] siu#3920
```./komodo-cli -ac_name=AT1 dicebet DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 5 5
error code: -1
error message:
basic_string::_M_construct null not valid
```


[02-Aug-18 01:16 PM] siu#3920
5:1 didnt


[02-Aug-18 01:19 PM] jl777c#5810
unexpected 5x didnt work for 5... i will need to test different odds tomorrow


[02-Aug-18 01:22 PM] siu#3920
6:1 worked


[02-Aug-18 01:23 PM] siu#3920
7 is the only one that does generate a hex but the hex doesnt work


[02-Aug-18 01:23 PM] siu#3920
```./komodo-cli -ac_name=AT1 sendrawtransaction 0100000002d8a8988214023866afbdaf764a91cc6f04e7b8a0ea11a8a0a4f699b4789e26ab000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140e00f7db82e7944e611b61d7dfce4af5a4bde676f96798d0e4efe0c422ba4fbf46a9b797f0de026d9751fc4df9fb5ffbc76648f26ae8f222d460896e182e18765a100af038001e6a10001ffffffff61faea0498c4809bdc1f2553ce5dfdd2a4853c2ec672c8164613481998a4756600000000484730440220665541572218b3605e26fef6163d1c5f1874b5cda085938e76516a626e325f0102205935112faebb92360a0e868f5f20c02a5174537f0f4302715242bcdbf19e69b201ffffffff05f0174a9018000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc0065cd1d00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc17270000000000002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9acd9eca430180900002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ac00000000000000006d6a4c6ae64244494333000000002e95904ef8edcdabf471bd90d1bb067e499497c983be8c8a9fdf468d8eca3241879d1bcd7e19e4c55a90bcf8836940766880799f1b31dffd65b6923c2a0aeb85000000000000000000000000000000000000000000000000000000000000000000000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[02-Aug-18 01:23 PM] siu#3920
```0) check first
numentropy tx 1: 1054.99990000
CC Eval EVAL_DICE Invalid: vout[2] nValue violation for bet spending tx ab269e78b499f6a4a0a811eaa0b8e7046fcc914a76afbdaf663802148298a8d8
CC Eval EVAL_DICE Invalid: vout[2] nValue violation for bet spending tx ab269e78b499f6a4a0a811eaa0b8e7046fcc914a76afbdaf663802148298a8d8
```


[02-Aug-18 01:23 PM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT1 dicebet DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 5 7
```


[02-Aug-18 01:24 PM] siu#3920
```./komodo-cli -ac_name=AT1 dicebet DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 1 2
error code: -1
error message:
basic_string::_M_construct null not valid
```


[02-Aug-18 01:24 PM] siu#3920
1 at 2:1 didnt work


[02-Aug-18 01:26 PM] siu#3920
ohh... lol, wait... the issue is tx confirmations


[02-Aug-18 01:30 PM] jl777c#5810
vout[2] nValue violation for bet spending <- that is a protocol error


[02-Aug-18 01:30 PM] jl777c#5810
stick to odds that work, I will fix the others later


[02-Aug-18 01:30 PM] siu#3920
im looking for those


[02-Aug-18 01:30 PM] siu#3920
so far 5 at 7:1 truly doesnt work


[02-Aug-18 01:31 PM] jl777c#5810
I mean different odds not working, that is due to only using 1x while i was developing


[03-Aug-18 12:49 AM] Alright#0419
Not sure it really matters, but cc vouts don't follow typical dust rules


[03-Aug-18 12:49 AM] Alright#0419
http://cctest.explorer.dexstats.info/tx/397bf2e3976bcc4cf217b7faaa0a01bfb347294e084ea569d03931b2792988e9


[03-Aug-18 12:58 AM] Alright#0419
if that's not a problem, `tokencreate` could do 0 sat vouts instead of 10000 sats to the address with the privkey in source code


[03-Aug-18 01:29 AM] jl777c#5810
yes, it is allowed


[03-Aug-18 01:29 AM] Alright#0419
Ah just realized those vouts aren't cryptocondition vouts


[03-Aug-18 01:30 AM] jl777c#5810
more for code sanity reasons to make sure the same vouts has the same things in most cases.


[03-Aug-18 01:30 AM] jl777c#5810
CC contracts 100% rely on enforcement of vin and vout constraints


[03-Aug-18 03:36 AM] jl777c#5810
I cant duplicate the problems with different odds. could it be that you didnt have enough funds to cover the high odds bets?


[03-Aug-18 03:36 AM] jl777c#5810
latest version supports timeout claims for automatic win


[03-Aug-18 04:16 AM] jl777c#5810
I disabled tokens asset swap rpc, so by that method there is no reproducible bug in any of the CC contracts


[03-Aug-18 05:32 AM] siu#3920
good morning


[03-Aug-18 05:32 AM] siu#3920
will test again now .


[03-Aug-18 05:32 AM] siu#3920
i did have funds though.


[03-Aug-18 05:43 AM] jl777c#5810
I will need to duplicate it on the same chain


[03-Aug-18 05:47 AM] siu#3920
updating to latest


[03-Aug-18 06:57 AM] siu#3920
```b449b3404e263502fca5dd7c469dcc398d2c7b7a125c50eeca02397a3e1d6218 winnings 0.00000000 bet 1.00000000 at odds 3:1
```


[03-Aug-18 06:57 AM] siu#3920
bet 1 at 3:1 odds work


[03-Aug-18 06:58 AM] jl777c#5810
insufficient data


[03-Aug-18 07:00 AM] siu#3920
it worked


[03-Aug-18 07:00 AM] siu#3920
3e2870ebd4b4313e342794149d8361f6f8d6ea2769090f6f62d92c59f53cb077 winnings 0.00000000 bet 1.00000000 at odds 4:1


[03-Aug-18 07:00 AM] siu#3920
also 4:1


[03-Aug-18 07:01 AM] jl777c#5810
I would like to fix this, but insufficient data given


[03-Aug-18 07:01 AM] siu#3920
worked as in, no error messages and txs went through


[03-Aug-18 07:01 AM] jl777c#5810
so everything is working?


[03-Aug-18 07:01 AM] jl777c#5810
even 5x and 7x


[03-Aug-18 07:02 AM] siu#3920
```275a02b2d9911f16cfd6aaf7a2671b9b90efb5295a13ad78fdd48c723f6979a3 winnings 0.00000000 bet 1.00000000 at odds 5:1```


[03-Aug-18 07:02 AM] siu#3920
im testing every possible bet in the diceplan


[03-Aug-18 07:03 AM] siu#3920
there we go bet 1 coin at 7:1 odds doesnt work


[03-Aug-18 07:03 AM] siu#3920
```./komodo-cli -ac_name=AT1 sendrawtransaction 010000000250339f9f8e977d7f2fc08e21e793734d6c7d40cd54e43e0e0f3ed9eea78a5731000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814086416ea8ac29f18b2042f1c287d59223ae55843ee386489ce36d2b90760f2ff229092cccd7067718c38a312cdf8b7fba6e5011ab5601fbbe005e7a02561dd87aa100af038001e6a10001ffffffff0ec5ba32379601329be5159c5a9b95630f054705f03e41abc613e20225ca6efc0000000048473044022071d0b81bcde3a43bcf0a6dd6d01d6f1921d17e5bc406e197fede27dc8219957702207338cb8458af73d56f5a97bfcf291acb279f8d47768c5f6ef80bd92d06cf048a01ffffffff05e03d8ef62f000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e1f50500000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc17270000000000002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9acd9707c48180900002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ac00000000000000006d6a4c6ae64244494333000000002e95904ef8edcdabf471bd90d1bb067e499497c983be8c8a9fdf468d8eca32415dd6ce12fa0afbfc46cd85021118ad7c0c94f035aad5f99dd2027e8a3d5343a0000000000000000000000000000000000000000000000000000000000000000000000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[03-Aug-18 07:04 AM] siu#3920
```numentropy tx 1: 2059.99980000
CC Eval EVAL_DICE Invalid: vout[2] nValue violation for bet spending tx 31578aa7eed93e0f0e3ee454cd407d6c4d7393e7218ec02f7f7d978e9f9f3350
CC Eval EVAL_DICE Invalid: vout[2] nValue violation for bet spending tx 31578aa7eed93e0f0e3ee454cd407d6c4d7393e7218ec02f7f7d978e9f9f3350

```


[03-Aug-18 07:04 AM] jl777c#5810
need the dicebet command


[03-Aug-18 07:04 AM] siu#3920
```./komodo-cli -ac_name=AT1 dicebet DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 1 7```


[03-Aug-18 07:04 AM] jl777c#5810
what is the chain? i dont have any peers


[03-Aug-18 07:06 AM] jl777c#5810
what is the maxodds for the dice plan?


[03-Aug-18 07:07 AM] siu#3920
AT1


[03-Aug-18 07:07 AM] siu#3920
7


[03-Aug-18 07:07 AM] jl777c#5810
pushed fix


[03-Aug-18 07:07 AM] siu#3920
```./komodod -ac_cc=1 -ac_name=AT1 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKEY> -addnode=195.201.137.5 -addnode=195.201.20.230 -daemon
```


[03-Aug-18 07:08 AM] siu#3920
updating


[03-Aug-18 08:08 AM] siu#3920
@jl777c how hard it would be to create an audit trail contract?


[03-Aug-18 08:08 AM] siu#3920
just got 2 call with possible clients in search of such functionalities


[03-Aug-18 08:08 AM] jl777c#5810
what would an audit trail contract need to do?


[03-Aug-18 08:10 AM] siu#3920
do an OP_RETURN of info in a simple way?


[03-Aug-18 08:11 AM] siu#3920
not exactly sure about the technical specifics


[03-Aug-18 08:11 AM] jl777c#5810
then I cant be sure about if it can be done easily


[03-Aug-18 08:11 AM] jl777c#5810
kvupdate is pretty simple interface for opreturn


[03-Aug-18 08:12 AM] siu#3920
but there is demand for using the blockchain as a registry


[03-Aug-18 08:12 AM] jl777c#5810
but you can just do createrawtransaction with "opreturn"


[03-Aug-18 08:12 AM] jl777c#5810
without a technical description I cant give you a technical answer


[03-Aug-18 08:12 AM] siu#3920
can kvupdate be used in other assetchains?


[03-Aug-18 08:12 AM] siu#3920
ok


[03-Aug-18 08:12 AM] jl777c#5810
yes


[03-Aug-18 08:12 AM] siu#3920
im looking for the technical side.


[03-Aug-18 08:13 AM] jl777c#5810
you can write data, get back a txid


[03-Aug-18 08:13 AM] jl777c#5810
then the txid refers to the data


[03-Aug-18 08:13 AM] jl777c#5810
data can be anything


[03-Aug-18 08:14 AM] siu#3920
```842c9992067caf179dd57f0a6ced679e56ac8d74818a249c5c96098e3db15c86 winnings 0.00000000 bet 1.00000000 at odds 7:1
842c9992067caf179dd57f0a6ced679e56ac8d74818a249c5c96098e3db15c86 winnings 0.00000000 bet 1.00000000 at odds 7:1
842c9992067caf179dd57f0a6ced679e56ac8d74818a249c5c96098e3db15c86 winnings 0.00000000 bet 1.00000000 at odds 7:1
842c9992067caf179dd57f0a6ced679e56ac8d74818a249c5c96098e3db15c86 winnings 0.00000000 bet 1.00000000 at odds 7:1
```


[03-Aug-18 08:14 AM] siu#3920
7:1 odds worked btw


[03-Aug-18 08:14 AM] siu#3920
```./komodo-cli -ac_name=AT1 sendrawtransaction 010000000250339f9f8e977d7f2fc08e21e793734d6c7d40cd54e43e0e0f3ed9eea78a5731000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814086416ea8ac29f18b2042f1c287d59223ae55843ee386489ce36d2b90760f2ff229092cccd7067718c38a312cdf8b7fba6e5011ab5601fbbe005e7a02561dd87aa100af038001e6a10001ffffffff0ec5ba32379601329be5159c5a9b95630f054705f03e41abc613e20225ca6efc0000000048473044022071d0b81bcde3a43bcf0a6dd6d01d6f1921d17e5bc406e197fede27dc8219957702207338cb8458af73d56f5a97bfcf291acb279f8d47768c5f6ef80bd92d06cf048a01ffffffff05e03d8ef62f000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e1f50500000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc17270000000000002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9acd9707c48180900002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ac00000000000000006d6a4c6ae64244494333000000002e95904ef8edcdabf471bd90d1bb067e499497c983be8c8a9fdf468d8eca32415dd6ce12fa0afbfc46cd85021118ad7c0c94f035aad5f99dd2027e8a3d5343a0000000000000000000000000000000000000000000000000000000000000000000000000
```


[03-Aug-18 08:14 AM] jl777c#5810
it was an edge case of betting maxodds that gave an error


[03-Aug-18 08:16 AM] siu#3920
what does `key` in `kvupdate key "value" days passphrase` stand for?


[03-Aug-18 08:16 AM] siu#3920
im new to this


[03-Aug-18 08:17 AM] jl777c#5810
the key


[03-Aug-18 08:17 AM] jl777c#5810
@Alright should have documented the calls


[03-Aug-18 08:17 AM] siu#3920
ok


[03-Aug-18 08:18 AM] jl777c#5810
KV -> key value storage


[03-Aug-18 08:18 AM] jl777c#5810
value is associated with a key


[03-Aug-18 08:25 AM] siu#3920
tried a kvupdate and it seems like it broke the chain


[03-Aug-18 08:25 AM] siu#3920
```"blocks": 2112,
  "longestchain": 0,
```


[03-Aug-18 08:26 AM] jl777c#5810
why do you say the chain is broken?


[03-Aug-18 08:27 AM] jl777c#5810
longestchain requires 3 or more peers


[03-Aug-18 08:37 AM] siu#3920
ohh so all peers disconnected :/


[03-Aug-18 09:01 AM] siu#3920
im a bit confused with the day and passphrase in the kvupdate


[03-Aug-18 09:01 AM] siu#3920
if i set a key/value with a passphrase


[03-Aug-18 09:02 AM] siu#3920
then try to edit it with another passphrase, i still get to change it, even when passphrase is not the same


[03-Aug-18 09:16 AM] jl777c#5810
sounds like a bug


[03-Aug-18 09:31 AM] siu#3920
```./komodo-cli -ac_name=COQUI kvupdate AURORA "Nace 24 de febrero de 2012 en Mayag√ºez" azgmvd```


[03-Aug-18 09:31 AM] siu#3920
```{
  "coin": "COQUI",
  "height": 138493,
  "expiration": 139933,
  "flags": 1,
  "key": "AURORA",
  "keylen": 6,
  "value": "Nace 24 de febrero de 2012 en Mayag√ºez",
  "valuesize": 39,
  "fee": 0.001,
  "txid": "029c9cf352b33d189595cba7b7be5b31d966e65d6274731208148e2fba95f0c6"
}
```


[03-Aug-18 09:32 AM] siu#3920
```./komodo-cli -ac_name=COQUI kvsearch AURORA{
  "coin": "COQUI",
  "currentheight": 138493,
  "key": "AURORA",
  "keylen": 6,
  "height": 138466,
  "expiration": 139906,
  "flags": 0,
  "value": "Nace 24 de febrero de 2012 en Mayag√ºez",
  "valuesize": 39
}
```


[03-Aug-18 09:33 AM] siu#3920
Now notice the change in the value (1 at the end)  and the passphrase (c in the end instead of d)


[03-Aug-18 09:33 AM] siu#3920
```./komodo-cli -ac_name=COQUI kvupdate AURORA "Nace 24 de febrero de 2012 en Mayag√ºez1" azgmvc
{
  "coin": "COQUI",
  "height": 138499,
  "expiration": 139939,
  "flags": 1,
  "key": "AURORA",
  "keylen": 6,
  "value": "Nace 24 de febrero de 2012 en Mayag√ºez1",
  "valuesize": 40,
  "fee": 0.001,
  "txid": "aaa282f2845be3e5eccc493076927cde8b859b9993fceb6df47cf759bfcca930"
}
```


[03-Aug-18 09:33 AM] siu#3920
```./komodo-cli -ac_name=COQUI kvsearch AURORA{
  "coin": "COQUI",
  "currentheight": 138501,
  "key": "AURORA",
  "keylen": 6,
  "height": 138499,
  "expiration": 139939,
  "flags": 0,
  "value": "Nace 24 de febrero de 2012 en Mayag√ºez1",
  "valuesize": 40
}
```


[03-Aug-18 09:33 AM] siu#3920
change did execute anyway


[03-Aug-18 09:40 AM] jl777c#5810
interesting bug. I will investigate


[03-Aug-18 09:53 AM] siu#3920
also, what does expiration do?


[03-Aug-18 10:00 AM] jl777c#5810
it is when the key expires


[03-Aug-18 11:19 AM] siu#3920
is it possible to get a permanent key


[03-Aug-18 11:19 AM] siu#3920
?


[03-Aug-18 11:20 AM] jl777c#5810
just pay a bigger fee and get 500 weeks


[03-Aug-18 12:25 PM] Alright#0419
@siu format is
kvupdate key "value" days passphrase


[03-Aug-18 12:26 PM] Alright#0419
there are help commands in the daemon for it now, not sure if you saw that


[03-Aug-18 12:26 PM] siu#3920
yes... i tested them


[03-Aug-18 12:26 PM] Alright#0419
Yea you can change it because you aren't setting the password properly


[03-Aug-18 12:27 PM] siu#3920
how is it set correctly?


[03-Aug-18 12:27 PM] Alright#0419
kvupdate key "value" days passphrase


[03-Aug-18 12:28 PM] Alright#0419
./komodo-cli -ac_name=COQUI kvupdate AURORA "Nace 24 de febrero de 2012 en Mayag√ºez" <ANUMBER> azgmvd


[03-Aug-18 12:28 PM] siu#3920
ok


[03-Aug-18 12:28 PM] siu#3920
so blank is not an option?


[03-Aug-18 12:29 PM] Alright#0419
if you have a passphrase, no


[03-Aug-18 12:29 PM] Deleted User#0000
"blank" is never an option


[03-Aug-18 12:30 PM] siu#3920
./komodo-cli -ac_name=COQUI kvupdate AURORA "Nace 24 de febrero de 2012 en Mayag√ºez1" 1 azgmvc
{
  "error": "error verifying sig, passphrase is probably wrong"
}


[03-Aug-18 12:31 PM] siu#3920
good


[03-Aug-18 12:31 PM] siu#3920
thanks


[03-Aug-18 12:31 PM] siu#3920
i still dont get the expiration thing


[03-Aug-18 12:31 PM] siu#3920
like, if i want to be able to store info permanently


[03-Aug-18 02:40 PM] siu#3920
Ohh understood


[04-Aug-18 02:52 AM] SHossain#0007
please send some AT1 coins in this address `RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ`


[04-Aug-18 03:02 AM] CHMEX#0686
@SHossain  d6f7721bd0a7e4549803a9e2f5b4d9e47f58a4fc0d377ab334a900754270423a on its way


[04-Aug-18 03:03 AM] CHMEX#0686
there is also a faucet but only 1 at the time


[04-Aug-18 03:28 AM] SHossain#0007
thanks @CHMEX üòÉ


[04-Aug-18 04:43 AM] SHossain#0007
i get 0 connections and blocks. do you have any live peer ip?


[04-Aug-18 04:52 AM] CHMEX#0686
78.47.205.239


[04-Aug-18 04:54 AM] SHossain#0007
thanks. now the chain is syncing


[04-Aug-18 08:48 AM] siu#3920
```e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 winnings 6.00000000 bet 2.00000000 at odds 2:1
```


[04-Aug-18 08:48 AM] siu#3920
i won! üòÇ


[04-Aug-18 10:29 AM] siu#3920
found a bug


[04-Aug-18 10:30 AM] siu#3920
im posting exactly the same input i did and then the output


[04-Aug-18 10:30 AM] siu#3920
```./komodo-cli -ac_name=AT1 dicebet DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 3 1
{
  "result": "success",
  "hex": "0100000002a5c34a45a2fdbf3643d17a6638812a451b0ed8569fad3888b5db75370472e5de000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81406a5630296f3a13205f1671c0c1f065086488e55bea2971e7d4783611002d66c82872c3dfaf4338ae12c0125167177ea4f8751cce28e2ef74d8f384b3723d4ce2a100af038001e6a10001ffffffff178eed110939eeab976273c9fecfa6bd98102cf198e6f264698557a106d8a36e030000004847304402207a1a5c69c359775c6b7e143478b892ea9e9e6e20d2966f27f8cc6a21a3f3e0e902204cbc51b266f2c409cb98c0be2e842fd56dfbe865f803f21026a993555e8c7afc01ffffffff0500da3f10e9000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00a3e11100000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc11270000000000002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9acb99ea430180900002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ac00000000000000006d6a4c6ae64244494333000000002e95904ef8edcdabf471bd90d1bb067e499497c983be8c8a9fdf468d8eca32411db9f146a94cf599b0923ac12ad0f1e0199dad7b3804308fa94dad049144023c000000000000000000000000000000000000000000000000000000000000000000000000"
}
siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT1 diceinfo 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e{
  "result": "success",
  "fundingtxid": "4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e",
  "name": "DIC3",
  "sbits": 860047684,
  "minbet": "1.00000000",
  "maxbet": "10.00000000",
  "maxodds": 7,
  "timeoutblocks": 5,
  "funding": "10010.00000000"
}
```


[04-Aug-18 10:31 AM] siu#3920
notice funding is 10010.00000000


[04-Aug-18 10:31 AM] siu#3920
then


[04-Aug-18 10:31 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT1 sendrawtransaction 0100000002a5c34a45a2fdbf3643d17a6638812a451b0ed8569fad3888b5db75370472e5de000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81406a5630296f3a13205f1671c0c1f065086488e55bea2971e7d4783611002d66c82872c3dfaf4338ae12c0125167177ea4f8751cce28e2ef74d8f384b3723d4ce2a100af038001e6a10001ffffffff178eed110939eeab976273c9fecfa6bd98102cf198e6f264698557a106d8a36e030000004847304402207a1a5c69c359775c6b7e143478b892ea9e9e6e20d2966f27f8cc6a21a3f3e0e902204cbc51b266f2c409cb98c0be2e842fd56dfbe865f803f21026a993555e8c7afc01ffffffff0500da3f10e9000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00a3e11100000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc11270000000000002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9acb99ea430180900002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ac00000000000000006d6a4c6ae64244494333000000002e95904ef8edcdabf471bd90d1bb067e499497c983be8c8a9fdf468d8eca32411db9f146a94cf599b0923ac12ad0f1e0199dad7b3804308fa94dad049144023c000000000000000000000000000000000000000000000000000000000000000000000000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5
siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT1 diceinfo 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e{
  "result": "success",
  "fundingtxid": "4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e",
  "name": "DIC3",
  "sbits": 860047684,
  "minbet": "1.00000000",
  "maxbet": "10.00000000",
  "maxodds": 7,
  "timeoutblocks": 5,
  "funding": "0.00000000"
}
```


[04-Aug-18 10:31 AM] siu#3920
after sending rawtx funding goes to 0


[04-Aug-18 10:32 AM] siu#3920
```dee572043775dbb58838ad9f56d80e1b452a8138667ad14336bffda2454ac3a5.(L 10010.00000000) check first
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2071.99980000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2.00000000
numentropy tx 1: 10010.00000000
dee572043775dbb58838ad9f56d80e1b452a8138667ad14336bffda2454ac3a5.(L 10010.00000000) check first
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2071.99980000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2.00000000
numentropy tx 1: 10010.00000000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
not enough inputs for 3.00010000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2071.99980000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2.00000000
numentropy tx 0: 0.00000000
```


[04-Aug-18 10:32 AM] siu#3920
^output


[04-Aug-18 10:33 AM] siu#3920
`not enough inputs for 3.00010000`


[04-Aug-18 10:33 AM] siu#3920
@jl777c


[04-Aug-18 10:35 AM] jl777c#5810
funds for bets in progress are locked and not available for the total


[04-Aug-18 10:35 AM] jl777c#5810
if you dont have enough utxo, it might not be able to process the bet


[04-Aug-18 10:35 AM] jl777c#5810
make sure to have more than the absolute minimum number of utxo


[04-Aug-18 10:37 AM] siu#3920
` "balance": 13888944.99594979,`


[04-Aug-18 10:37 AM] siu#3920
im pretty sure i have enough funds


[04-Aug-18 10:38 AM] siu#3920
```./komodo-cli -ac_name=AT1 getrawmempool[
]
```


[04-Aug-18 10:38 AM] siu#3920
all tx got confirmed


[04-Aug-18 10:38 AM] siu#3920
```./komodo-cli -ac_name=AT1 diceinfo 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e
{
  "result": "success",
  "fundingtxid": "4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e",
  "name": "DIC3",
  "sbits": 860047684,
  "minbet": "1.00000000",
  "maxbet": "10.00000000",
  "maxodds": 7,
  "timeoutblocks": 5,
  "funding": "0.00000000"
}
```


[04-Aug-18 10:38 AM] siu#3920
funding stayed at 0


[04-Aug-18 10:39 AM] siu#3920
also, it seems like it got stuck between trying to repeat the last 2 bets


[04-Aug-18 10:39 AM] siu#3920
```e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2071.99980000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2.00000000
numentropy tx 0: 0.00000000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
91e890d3288311e1fb43df4dadf8badc64bd06dada1e2ed2e7ed8120019637a9 winnings 0.00000000 bet 2.00000000 at odds 7:1
91e890d3288311e1fb43df4dadf8badc64bd06dada1e2ed2e7ed8120019637a9 winnings 0.00000000 bet 2.00000000 at odds 7:1
AT1 hwmheight.3720 vs pindex->nHeight.3719 t.1533403677 reorg.1
91e890d3288311e1fb43df4dadf8badc64bd06dada1e2ed2e7ed8120019637a9 winnings 0.00000000 bet 2.00000000 at odds 7:1
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
91e890d3288311e1fb43df4dadf8badc64bd06dada1e2ed2e7ed8120019637a9 winnings 0.00000000 bet 2.00000000 at odds 7:1
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
91e890d3288311e1fb43df4dadf8badc64bd06dada1e2ed2e7ed8120019637a9 winnings 0.00000000 bet 2.00000000 at odds 7:1
91e890d3288311e1fb43df4dadf8badc64bd06dada1e2ed2e7ed8120019637a9 winnings 0.00000000 bet 2.00000000 at odds 7:1
91e890d3288311e1fb43df4dadf8badc64bd06dada1e2ed2e7ed8120019637a9 winnings 0.00000000 bet 2.00000000 at odds 7:1
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
```


[04-Aug-18 10:39 AM] siu#3920
both of those txid got confirmed and i los tthe last bet before this happened


[04-Aug-18 10:40 AM] jl777c#5810
maybe AT1 hwmheight.3720 vs pindex->nHeight.3719 t.1533403677 reorg.1
got things confused


[04-Aug-18 10:40 AM] jl777c#5810
what happens if you do a dicestatus


[04-Aug-18 10:42 AM] siu#3920
```./komodo-cli -ac_name=AT1 dicestatus DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5
{
  "result": "success",
  "status": "invalid bet txid"
}
```


[04-Aug-18 10:42 AM] siu#3920
and the last one: ```./komodo-cli -ac_name=AT1 dicestatus DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 91e890d3288311e1fb43df4dadf8badc64bd06dada1e2ed2e7ed8120019637a9
{
  "result": "success",
  "status": "loss"
}
```


[04-Aug-18 10:42 AM] siu#3920
i mean... the last before the invalid bet


[04-Aug-18 10:45 AM] jl777c#5810
if you do dicestatus without the bettxid, it will try to autocomplete any pending


[04-Aug-18 10:48 AM] siu#3920
ok


[04-Aug-18 10:49 AM] siu#3920
``` ./komodo-cli -ac_name=AT1 dicestatus DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e
{
  "result": "success",
  "status": "no pending bets"
}
```


[04-Aug-18 10:49 AM] siu#3920
```Mining when blockchain might not be in sync longest.0 vs 3736
Mining when blockchain might not be in sync longest.0 vs 3736
Mining when blockchain might not be in sync longest.3732 vs 3736
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 winnings 6.00000000 bet 2.00000000 at odds 2:1
not enough inputs for 4.00010000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 winnings 6.00000000 bet 2.00000000 at odds 2:1
not enough inputs for 4.00010000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
not enough inputs for 3.00010000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 winnings 6.00000000 bet 3.00000000 at odds 1:1
not enough inputs for 3.00010000
ENTROPY tx:
010000000105bbb2d0182ea2435b6fe9ff2affdd324342cec6fe038b51f1c2208f33a4dd310000000048473044022026ebde7b3b67d54f9b335c8e9c66c1a9cc882d584d5d298a46dacc56845b9b130220427f1a61c56772acf14266912d312d7c733b2ecece7c117464a077965849f5b401ffffffff0400e1f50500000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc10270000000000002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ace0707c48180900002321028702e30d8465d6aa85f35d2f58c06a6ee17f23f376b56044dadf7b793f2c12b9ac00000000000000006d6a4c6ae64544494333000000002e95904ef8edcdabf471bd90d1bb067e499497c983be8c8a9fdf468d8eca32410719f3e473c7abbcbd6162f591f7bbaf275e9405cefe74d63c8f6d9464a04341000000000000000000000000000000000000000000000000000000000000000000000000
74bec217c9cd5f4fd2129635120bafa260e5efa9d5fe4318d60608dee2d59a47
added to mempool and broadcast

```


[04-Aug-18 10:50 AM] jl777c#5810
can you find where the funds went? it cant have just disappeare


[04-Aug-18 10:51 AM] siu#3920
which was the explorer link? @CHMEX


[04-Aug-18 10:53 AM] siu#3920
@SHossain do you remember the explorer link?


[04-Aug-18 10:53 AM] siu#3920
for AT1?


[04-Aug-18 10:53 AM] SHossain#0007
http://cctest.explorer.dexstats.info/

{Embed}
http://cctest.explorer.dexstats.info/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[04-Aug-18 10:53 AM] siu#3920
üëç


[04-Aug-18 10:59 AM] siu#3920
http://cctest.explorer.dexstats.info/address/REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw


[04-Aug-18 10:59 AM] siu#3920
this is the funding address


[04-Aug-18 10:59 AM] siu#3920
seems like the funds are still there


[04-Aug-18 11:00 AM] jl777c#5810
maybe it is just a bug with diceinfo


[04-Aug-18 11:01 AM] siu#3920
ill try another bet then


[04-Aug-18 11:01 AM] siu#3920
```./komodo-cli -ac_name=AT1 dicebet DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 3 2
error code: -1
error message:
basic_string::_M_construct null not valid
```


[04-Aug-18 11:02 AM] siu#3920
```e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2071.99980000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2.00000000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 B refsbits.33434944 sbits.33434944 nValue 10010.00000000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 B refsbits.33434944 sbits.33434944 nValue 3.00000000
numentropy tx 0: 0.00000000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2071.99980000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2.00000000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 B refsbits.33434944 sbits.33434944 nValue 10010.00000000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 B refsbits.33434944 sbits.33434944 nValue 3.00000000
numentropy tx 0: 0.00000000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2071.99980000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2.00000000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 B refsbits.33434944 sbits.33434944 nValue 10010.00000000
19a5fef592859e6bcd9e49130faed88873b4560aa09f22284bd21610a7dec8f5 B refsbits.33434944 sbits.33434944 nValue 3.00000000
numentropy tx 0: 0.00000000
cant find dice inputs

```


[04-Aug-18 11:02 AM] jl777c#5810
i guess it cant find it... defnitely a bug


[04-Aug-18 11:04 AM] siu#3920
the bug seem to have been introduced in most recent changes, yesterday wins had no issues


[04-Aug-18 11:04 AM] siu#3920
afaik


[04-Aug-18 11:05 AM] jl777c#5810
there were no dice changes recently


[04-Aug-18 11:09 AM] siu#3920
dont know then


[04-Aug-18 11:10 AM] jl777c#5810
maybe it was the exact sequence you did. was it a long sequence from initial funding?


[04-Aug-18 11:11 AM] siu#3920
i did a bet of 2 at 4:1 that won


[04-Aug-18 11:11 AM] siu#3920
after that 5:1 failed because lack of funds


[04-Aug-18 11:11 AM] siu#3920
i added 10000 funds


[04-Aug-18 11:12 AM] siu#3920
then tried bets of 2 at 5:1, 2 at 6:1 then 2 at 7:1


[04-Aug-18 11:12 AM] siu#3920
all loss


[04-Aug-18 11:12 AM] siu#3920
then tried 3 at 1:1 which also lost


[04-Aug-18 11:13 AM] siu#3920
then tried 3 at 2:1 which won and then funding came to 0 again


[04-Aug-18 11:13 AM] siu#3920
thats when i spotted it as a bug


[04-Aug-18 11:13 AM] siu#3920
since i was sure i had funds in the first win that showed 0 afterwards


[04-Aug-18 11:14 AM] siu#3920
im off for the day though. See ya later today or tomorrow.


[04-Aug-18 12:58 PM] Alright#0419
so did that reorg mess up that dice tx?


[04-Aug-18 12:59 PM] Alright#0419
I hadn't consider that reorgs might mess anything up unless there was a double spent tx


[04-Aug-18 01:06 PM] SHossain#0007
updated to the latest source.


[04-Aug-18 01:07 PM] SHossain#0007
```
./komodo-cli -ac_name=AT1 diceinfo 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e
58b2278f0e06e020b6d31c344db5a9e0b27f13f41818e504d135209762568ea9.(L 10008.00000000) check first
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2071.99980000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2.00000000
numentropy tx 1: 10008.00000000
{
  "result": "success",
  "fundingtxid": "4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e",
  "name": "DIC3",
  "sbits": 860047684,
  "minbet": "1.00000000",
  "maxbet": "10.00000000",
  "maxodds": 7,
  "timeoutblocks": 5,
  "funding": "10008.00000000"
}
```


[04-Aug-18 01:38 PM] SHossain#0007
did a bet, probably didn't win. `dicestatus` didin't display result for my bettxid. tried to place a bet again and got this
```
./komodo-cli -ac_name=AT1 dicebet DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 10 5
2d3d71c71e2cba903ad4db20e5f558e4133ff654e0c7d673468522c5322c2d8f B refsbits.33434944 sbits.33434944 nValue 10008.00000000
2d3d71c71e2cba903ad4db20e5f558e4133ff654e0c7d673468522c5322c2d8f B refsbits.33434944 sbits.33434944 nValue 10.00000000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2071.99980000
e772437b77354d9cf4d4d8761f21740d45f91c1f8052accaa802715a12eaaae5 B refsbits.33434944 sbits.33434944 nValue 2.00000000
numentropy tx 0: 0.00000000
cant find dice inputs
error code: -1
error message:
basic_string::_M_construct null not valid
```


[04-Aug-18 01:38 PM] SHossain#0007
dicestatus for the first bet shows this
```
./komodo-cli -ac_name=AT1 dicestatus DIC3 4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e 2d3d71c71e2cba903ad4db20e5f558e4133ff654e0c7d673468522c5322c2d8f
duration 407 (1533414056 - 1533413649) numblocks 11 (3879 - 3868)
not enough inputs for 50.00010000
{
  "result": "success",
  "status": "invalid bet txid"
}
```


[04-Aug-18 01:40 PM] SHossain#0007
created a new token
```
./komodo-cli -ac_name=AT1 tokencreate TTX1 100 "Test Token X1"
{
  "result": "success",
  "hex": "0100000003503aa66cdec4f5fba3d480e3fe790249d90fad2e63b4fe8e2d6c2def498ee1550100000048473044022011d282e6df4f9114dc87aa71dee6b171b04fc8192246fffcb58ef0e64012060f02206857fb61e797d00e43037a38f0b3eeb365e4ac1f104e5e52af500ee3fd7e32a901ffffffff8f2d2c32c522854673d6c7e054f63f13e458f5e520dbd43a90ba2c1ec7713d2d0200000048473044022076bdbca29be54318f9b4a6ad94481d72c741decc48943477c230bda61131430c022021a600df0e5f8e03237c04a82c7141f2d2ba4dada8bf569f371b934d4f4060e801ffffffff8f2d2c32c522854673d6c7e054f63f13e458f5e520dbd43a90ba2c1ec7713d2d0300000049483045022100ac73b9e410c79608a1f2a805c79d9983b90237c216456c5aabe90c5dba610140022015e8da85f436f626e8240696042b3e3592eefe57993ee552d37999611903979401ffffffff0400e40b5402000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cc1027000000000000232102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702acc06c268915090000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0000000000000000396a37e3632103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc04545458310d5465737420546f6b656e20583100000000"
}
```


[04-Aug-18 01:41 PM] SHossain#0007
output txid is 
```
456775c134bf72267c9ff92c4cdbaac977b4c2b727bdab78be775143df93c90d
```


[04-Aug-18 01:42 PM] SHossain#0007
`tokeinfo` call shows supply is 100
```
./komodo-cli -ac_name=AT1 tokeninfo 456775c134bf72267c9ff92c4cdbaac977b4c2b727bdab78be775143df93c90d
{
  "result": "success",
  "tokenid": "456775c134bf72267c9ff92c4cdbaac977b4c2b727bdab78be775143df93c90d",
  "owner": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc",
  "name": "TTX1",
  "supply": "100.00000000",
  "description": "Test Token X1"
}
```
the supply was supposed to be in satoshi ü§î 
also, i now have 100 coins less in my wallet.


[04-Aug-18 01:43 PM] jl777c#5810
it is just a display issue


[04-Aug-18 01:43 PM] jl777c#5810
imagine supply displays the satoshis


[04-Aug-18 01:43 PM] jl777c#5810
then it seems it is all ok


[04-Aug-18 01:43 PM] jl777c#5810
as far as the dice losing tx, i have noticed this too, but cant reliably reproduce


[04-Aug-18 01:43 PM] SHossain#0007
ok. display issue makes sense


[04-Aug-18 01:44 PM] Alright#0419
can I have a node to sync from please


[04-Aug-18 01:44 PM] SHossain#0007
`-addnode=78.47.205.239`


[04-Aug-18 01:45 PM] Alright#0419
Yea we broke it again


[04-Aug-18 01:45 PM] Alright#0419
can't sync from scratch


[04-Aug-18 01:45 PM] Alright#0419
think it was me playing with faucet


[04-Aug-18 01:46 PM] Alright#0419
Hmm, the txs in those blocks seem normal


[04-Aug-18 01:46 PM] Alright#0419
not sure that was me, but I was playing with faucet around that time


[04-Aug-18 01:48 PM] Alright#0419
oh derp, ignore everything I just said. I had changed stuff in faucet contract of this node. Other node synced fine


[04-Aug-18 01:49 PM] Alright#0419
KV is spitting out garbage in stdout it seems 
```
i.1 j.2 KV OPRET len.89 0.00100000
create ht.3498 R opret[89] sp.0x55943872e9a0
fee 0.00100000 vs 0.00100000 flags.3 keylen.8 valuesize.4 height.2112 (4c 41 47) (48 6f 6c)
couldnt find (LAG0654LHolaÔøΩ/gSRÔøΩ%B4ÔøΩ
                                    $YbCEÔøΩHHÔøΩ ßXÔøΩÔøΩnxCÔøΩ\ÔøΩq)
KV add.(LAG0654L) (HolaÔøΩ/gSRÔøΩ%B4ÔøΩ
                                 $YbCEÔøΩHHÔøΩ ßXÔøΩÔøΩnxCÔøΩ\ÔøΩq)
```


[04-Aug-18 01:50 PM] SHossain#0007
@siu added them. i have seen them too


[04-Aug-18 01:50 PM] Alright#0419
That stuff after the value is garbage


[04-Aug-18 01:50 PM] Alright#0419
shouldn't be there


[04-Aug-18 01:51 PM] Alright#0419
or at least that is fairly new, it didn't happen previously


[04-Aug-18 01:52 PM] Alright#0419
@SHossain will you be testing for the next hour or so? I want to hit the chain with reorg and see if it breaks contracts


[04-Aug-18 01:53 PM] Alright#0419
only have two nodes and I need both to selfish mine, so could you just test contracts that work as intended while I do this?


[04-Aug-18 01:55 PM] SHossain#0007
i started a node with mining


[04-Aug-18 01:56 PM] Alright#0419
after I reorg, all the txs should get lumped into a single block


[04-Aug-18 01:56 PM] Alright#0419
thinking that will break some things


[04-Aug-18 01:57 PM] SHossain#0007
i can stay until next half an hour. then, need to have some food


[04-Aug-18 01:58 PM] Alright#0419
ok, should have it set up by then, if not I'll just spin up another VPS


[04-Aug-18 01:59 PM] Alright#0419
leave a node mining when you go please


[04-Aug-18 01:59 PM] SHossain#0007
that mining node is dedicated `94.130.224.11`


[04-Aug-18 01:59 PM] SHossain#0007
```./komodod -ac_cc=1 -ac_name=AT1 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<your_pubkey> -addnode=195.201.137.5 -addnode=195.201.20.230 -addnode=78.47.205.239 -addnode=94.130.224.11 &```


[04-Aug-18 02:00 PM] SHossain#0007
Pinned a message.


[04-Aug-18 02:01 PM] SHossain#0007
This ^^ is the latest test token AT1 start script (added 2 nodes).


[04-Aug-18 02:04 PM] Alright#0419
195.201.137.5 and 195.201.20.230 go offline and online constantly, as I'm rebuilding each time I edit a contract


[04-Aug-18 02:20 PM] SHossain#0007
`tokenbalance` with pubkey works fine


[04-Aug-18 02:21 PM] SHossain#0007
i sent out 10 tokens to all pubkeys listed, thought it will go as millions üòÑ


[04-Aug-18 02:21 PM] SHossain#0007
```
./komodo-cli -ac_name=AT1 tokenbalance 456775c134bf72267c9ff92c4cdbaac977b4c2b727bdab78be775143df93c90d 03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc
{
  "result": "success",
  "CCaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
  "tokenid": "456775c134bf72267c9ff92c4cdbaac977b4c2b727bdab78be775143df93c90d",
  "balance": 9999999950
}
```


[04-Aug-18 02:25 PM] Alright#0419
z-nomp really messing with me atm, won't be reorging chain until I can get it working properly


[04-Aug-18 02:30 PM] SHossain#0007
i have some ask orders up.


[04-Aug-18 02:31 PM] SHossain#0007
```
./komodo-cli -ac_name=AT1 tokenorders 456775c134bf72267c9ff92c4cdbaac977b4c2b727bdab78be775143df93c90d
[
  {
    "funcid": "s",
    "txid": "a8f623f44c7fbe61cc8b6f745bf9305247ba16148b49f75cf842bb1978ac622e",
    "vout": 0,
    "amount": "1000000",
    "askamount": "1000000",
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "456775c134bf72267c9ff92c4cdbaac977b4c2b727bdab78be775143df93c90d",
    "totalrequired": "1000000.00000000",
    "price": "1.00000000"
  },
  {
    "funcid": "s",
    "txid": "4ca4871a258639996a1c7ec51d18062ad2257641c3ee0636908bb8de13422ca6",
    "vout": 0,
    "amount": "10",
    "askamount": "10",
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "456775c134bf72267c9ff92c4cdbaac977b4c2b727bdab78be775143df93c90d",
    "totalrequired": "20.00000000",
    "price": "2.00000000"
  },
  {
    "funcid": "s",
    "txid": "6e16d692890326d25c432c6f9b553e49bd8f4ef762cb7b20e928821fed4b78b7",
    "vout": 0,
    "amount": "100000",
    "askamount": "100000",
    "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
    "tokenid": "456775c134bf72267c9ff92c4cdbaac977b4c2b727bdab78be775143df93c90d",
    "totalrequired": "150000.00000000",
    "price": "1.50000000"
  }
]
```


[04-Aug-18 02:35 PM] SHossain#0007
also couple of `tokenbid`s.


[04-Aug-18 03:33 PM] Alright#0419
ok ready to do reorgs


[04-Aug-18 03:33 PM] Alright#0419
Anyone here? Building a 3rd node to make txs that will be reorged


[04-Aug-18 03:34 PM] Alright#0419
If anyone could just test normal things while I'm selfish mining, that'd help


[04-Aug-18 04:19 PM] Alright#0419
reorged a `tokenfillask` tx and now it's back in the mempool but will not confirm


[04-Aug-18 04:19 PM] Alright#0419
http://cctest.explorer.dexstats.info/tx/0de8936923c37db449602376e3f89ce6c1459fc68d5ca723e6b4f4c8e9592990


[04-Aug-18 04:28 PM] Alright#0419
`tokentransfer` goes back into the mempool and is confirmed as it should be


[04-Aug-18 04:29 PM] Alright#0419
`tokencreate` goes back into the mempool and is confirmed properly


[04-Aug-18 04:29 PM] Alright#0419
just testing these one by one


[04-Aug-18 04:35 PM] Alright#0419
`tokenask` is fine


[04-Aug-18 04:43 PM] Alright#0419
Did another `tokenfillask` and it confirmed after the reorg. I couldn't reproduce it not being able to confirm


[04-Aug-18 04:44 PM] Alright#0419
The one linked above still didn't confirm though


[04-Aug-18 04:45 PM] Alright#0419
Oh it used a reorged input


[04-Aug-18 04:58 PM] Alright#0419
Don't think this is significant, but I was able to get two `faucetget` txs into a single block. 
http://cctest.explorer.dexstats.info/block/00c6593c47e56c3f55d822fa24456def40276c9dc5a2d49450cbed0ea42fd1a4

They were originally in different blocks, but I reorged both blocks and they were both put back into the mempool


[05-Aug-18 01:15 AM] jl777c#5810
if that is the worst effect from reorgs, I think we can live with it


[05-Aug-18 01:17 AM] jl777c#5810
reorgs does open up a lot of possibilities, but I think the typical problem would be some tx wont confirm due to invalid txid being referenced. however i believe all tx that transfer value to another parter is atomic, if it is invalidated, the net result is to have to issue it again. I cant be 100% sure though as there are quite a few possibilities


[05-Aug-18 01:20 AM] jl777c#5810
what is the status of test plans? do we have any idea of how complete the four CC contracts are. it seems like dice does have a few bugs, but havent seen a reliable way to duplicate. the other contracts, might be pretty solid, but not sure of how much of it has been tested


[05-Aug-18 01:21 AM] jl777c#5810
for a test plan, just break it down into a test plan for each rpc call


[05-Aug-18 01:22 AM] jl777c#5810
and then define tests that are quite to determine if an rpc call is braindead or not. if not braindead, then further tests to determine if it is basically working and if so, then the third level of tests, which if those work, then we are very surprised if there are any bugs in it.


[05-Aug-18 01:22 AM] jl777c#5810
so for which rpc calls do we know if it isnt braindead? for the non-braindead rpc, which ones are basically working? and which ones do we have very good confidence as it passed the third level of tests?


[05-Aug-18 02:03 AM] Mylo#8306
test plans in regtest mode can be started once the regtest-address bug is fixed (in regtest mode public addresses have default zcash regtest address starting with tm, this is just a first-looks-familiar-guess by @dukeleto and isValid currently says false, "...something about the base58 prefix of regtest must be incorrect...")


[05-Aug-18 02:04 AM] Mylo#8306
some info in #üíª‚îÉdev-general from a few days ago, not much to scroll up in that channel to see reference if curious.


[05-Aug-18 02:25 AM] jl777c#5810
that is easy fix, pushed to jl777


[05-Aug-18 04:16 AM] SHossain#0007
my balance increased due to some of the orders got filled.


[05-Aug-18 04:30 AM] SHossain#0007
@Alright did you break the faucet? :abusedsmily: 
my first try got me this
```
./komodo-cli -ac_name=AT1 sendrawtransaction 0100000001cca7a5b401bf07396054fe528c05cd7a6505861d9c31bbca0ac347867d5a1ed5000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281409899831f337c5da86ba1b439afdfa842b27e158536f575d9dbc2e4f93549ab2a09b61b413cfec467dc13145db2f24827e88021a639e9a5aeb913af5731b03071a100af038001e4a10001ffffffff02d029e7a014000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc00e1f50500000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000
error code: -25
error message:

```


[05-Aug-18 06:22 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/475654782586191902/Screenshot_from_2018-08-05_14-15-52.png


[05-Aug-18 06:39 AM] siu#3920
morning!

{Reactions}
‚òï 

[05-Aug-18 06:40 AM] siu#3920
ok... so from my testes... in tokens only `tokenfillswap` had issues.


[05-Aug-18 06:40 AM] siu#3920
on dice, there seem to be some incongruent results from some bets.


[05-Aug-18 06:52 AM] SHossain#0007
Working on the rewards calls


[05-Aug-18 06:58 AM] siu#3920
@jl777c do you approve on the layout for testplan that @SHossain did?


[05-Aug-18 07:23 AM] siu#3920
someone is abusing the faucet


[05-Aug-18 07:24 AM] siu#3920
was it drained in minutes??? üòÇ


[05-Aug-18 07:26 AM] SHossain#0007
i can't claim  faucet funds. maybe @Alright is behind this :p


[05-Aug-18 07:26 AM] SHossain#0007
i added a little bit as well for testing an hour ago


[05-Aug-18 07:26 AM] SHossain#0007
that works fine


[05-Aug-18 08:10 AM] dukeleto#7326
@Mylo james' fixed the base58 prefix bug, validateaddress returns true for regtest addresses


[05-Aug-18 08:11 AM] dukeleto#7326
let me know how I can help write some tests


[05-Aug-18 08:17 AM] Alright#0419
Whoops, didn't realize I left that faucet script running


[05-Aug-18 08:27 AM] Alright#0419
That error -25 is just a result of someone else doing it before you at that block height


[05-Aug-18 08:27 AM] Alright#0419
@SHossain


[05-Aug-18 08:41 AM] siu#3920
So its one faucettx per block?


[05-Aug-18 08:51 AM] Alright#0419
yes


[05-Aug-18 09:59 AM] jl777c#5810
shossain's test plan is the best testplan I have ever seen for CC contracts


[05-Aug-18 09:59 AM] jl777c#5810
of course as soon as it is improved, then it is being improved

{Reactions}
üëç (3) üíØ (2) 

[05-Aug-18 10:03 AM] SHossain#0007
Thanks James. I'll get the rest of the RPC calls done along with summary page üòÉ


[05-Aug-18 10:14 AM] jl777c#5810
one easy way to expand a test plan is to make sure each bug found has a specific test point, so if we had the test plan, we are sure to find it. and even if it isnt a bug, what works now might break later, so each bug usually gives an idea to several test points


[05-Aug-18 10:15 AM] jl777c#5810
for each rpc call being tested there is a set of test points, with several different "time to do the test" and "severity of bug", clearly we want to front load the quick to run tests that finds major fatal issues before even starting on tests that take avery long time to find minor bugs


[05-Aug-18 10:15 AM] jl777c#5810
testing is a resource allocation problem


[05-Aug-18 10:16 AM] jl777c#5810
given infinite resources, just test everything with each release.


[05-Aug-18 10:16 AM] jl777c#5810
but this is not practical


[05-Aug-18 10:16 AM] jl777c#5810
so the goal is to get as close to the same result as if we are testing everything with every release


[05-Aug-18 10:16 AM] jl777c#5810
though with automated tests it would be possible to come really close to this


[05-Aug-18 10:16 AM] jl777c#5810
even with manual testing in prioritized order it should be possible to come reasonably close


[05-Aug-18 10:17 AM] jl777c#5810
and the ultimate result is whether we find all the important to fix bugs before it is released


[05-Aug-18 10:51 AM] Alright#0419
Miners can censor faucetget txs other than their own for each block they mine.  I feel as if faucetget will just be dominated by miners.


[05-Aug-18 11:09 AM] Deleted User#0000
isn't it a PoC? surely it can be improved.... but isnt all crypto dominated by miners


[05-Aug-18 11:09 AM] Deleted User#0000
??


[05-Aug-18 11:18 AM] grewalsatinder#9653
yes, the first of these 4 are demo/example CC contracts.


[05-Aug-18 11:18 AM] grewalsatinder#9653
to help newbies like me understand and get started.


[05-Aug-18 11:19 AM] grewalsatinder#9653
I'm not there yet, but I will try to replicate the faucet CC in Go language.


[05-Aug-18 11:19 AM] grewalsatinder#9653
that will be my learning lesson for C++/Go/Blockchain/CC


[05-Aug-18 11:30 AM] Alright#0419
any ideas for preventing it becoming essentially just a second coinbase for miners


[05-Aug-18 11:51 AM] Deleted User#0000
stop miners


[05-Aug-18 11:51 AM] Deleted User#0000
ü§∑


[05-Aug-18 12:04 PM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/475740787972243477/Smart_Contract_Test_Plan_-_rewards.pdf


[05-Aug-18 12:04 PM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/475740984844746772/Screenshot_from_2018-08-05_20-04-31.png


[05-Aug-18 12:05 PM] SHossain#0007
we need to confirm **rewardsunlock** call working properly (unlocks the locked funds and delivers the APR)


[05-Aug-18 12:06 PM] SHossain#0007
Dice and Token is next


[05-Aug-18 12:24 PM] Alright#0419
can you make that into a shared google doc please


[05-Aug-18 12:24 PM] Alright#0419
`getrawmempool`* btw


[05-Aug-18 12:31 PM] SHossain#0007
thanks @Alright . That was a typo carried over üòÉ


[05-Aug-18 12:31 PM] SHossain#0007
here is the link of the test plan https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit?usp=sharing

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit?usp=sharing
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pubkey starts with 02 or 03....
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[05-Aug-18 12:32 PM] SHossain#0007
we can add up more columns if needed for detailed bug reports


[05-Aug-18 12:55 PM] Alright#0419
`rewardscreatefunding` needs minimums.  `./komodo-cli -ac_name=AT1 rewardscreatefunding spam 0 0 0 0 0` works fine


[05-Aug-18 12:55 PM] Alright#0419
could spam the `rewardslist` very cheaply


[05-Aug-18 12:55 PM] Alright#0419
and they'd be there forever


[05-Aug-18 01:02 PM] SHossain#0007
nice find @Alright


[05-Aug-18 01:02 PM] SHossain#0007
üëçüèΩ


[05-Aug-18 01:36 PM] Alright#0419
```
Rewards plan (overdraft) already exists
Rewards plan (overdraf) already exists
```
This is both the same plan. Not sure it really matters, but it cuts off at 8 characters in rewardsinfo


[05-Aug-18 02:04 PM] Alright#0419
Was able to use the same name twice by broadcasting 2 `rewardscreatefunding` txs in 1 block
```
./komodo-cli -ac_name=AT1 rewardsinfo cfc823f1b89f8947918f6454105e2a65d7a71722ac37eba3e5ffd80b8230cfc0
{
  "result": "success",
  "fundingtxid": "cfc823f1b89f8947918f6454105e2a65d7a71722ac37eba3e5ffd80b8230cfc0",
  "name": "double",
  "sbits": 111516182736740,
  "APR": "10000.00000000",
  "minseconds": 86400,
  "maxseconds": 172800,
  "mindeposit": "1.00000000",
  "funding": "100.00000000"
}
~/komodo/src$ ./komodo-cli -ac_name=AT1 rewardsinfo 9d5250b295390e548e57af842c2f19d6e384b9a4d930a8a612eab5d265877481
{
  "result": "success",
  "fundingtxid": "9d5250b295390e548e57af842c2f19d6e384b9a4d930a8a612eab5d265877481",
  "name": "double",
  "sbits": 111516182736740,
  "APR": "10000.00000000",
  "minseconds": 86400,
  "maxseconds": 172800,
  "mindeposit": "1.00000000",
  "funding": "100.00000000"
}
```


[05-Aug-18 02:39 PM] Alright#0419
Just spamed `rewardslist` on another chain. Cost ~0.5 coin for ~4600 zero'd out `rewardscreatefunding` txs


[05-Aug-18 03:43 PM] siu#3920
what does `dicefinish` does different from `dicestatus` without txid?


[05-Aug-18 04:53 PM] Mylo#8306
i ‚ù§ the devs in this ecosystem

{Reactions}
Komodo (3) 

[05-Aug-18 05:10 PM] siu#3920
```APR 5.00000000 minseconds.86400 maxseconds.864000 mindeposit 10.00000000
RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK locktxid/v0 is spent
```


[05-Aug-18 05:10 PM] siu#3920
``` ./komodo-cli -ac_name=AT1 rewardsunlock FREE 1538ed0463d881660a76a47b3a46ea5d93dafb90fc7340a1c5162e4fe04fa009 2f66ebae825e780c15be56d78ff3e8b4e05cc6c156f97149fd8efafcdb50a4a1
error code: -1
error message:
basic_string::_M_construct null not valid
```


[05-Aug-18 05:11 PM] siu#3920
when i tried to unlock some funds i had locked some days ago


[05-Aug-18 05:11 PM] siu#3920
it was from this plan: ``` -ac_name=AT1 rewardsinfo 1538ed0463d881660a76a47b3a46ea5d93dafb90fc7340a1c5162e4fe04fa009
{
  "result": "success",
  "fundingtxid": "1538ed0463d881660a76a47b3a46ea5d93dafb90fc7340a1c5162e4fe04fa009",
  "name": "FREE",
  "sbits": 1162170950,
  "APR": "5.00000000",
  "minseconds": 86400,
  "maxseconds": 864000,
  "mindeposit": "10.00000000",
  "funding": "4210.00000000"
}
```


[05-Aug-18 08:08 PM] dukeleto#7326
I think I can help turn @SHossain 's nice testing doc into Python tests

{Reactions}
üëç (4) 

[05-Aug-18 10:10 PM] dukeleto#7326
i am making some progress, finding lots of bugs

{Reactions}
üòÑ 

[05-Aug-18 10:49 PM] dukeleto#7326
various bits of the kmd test suite still need to learn that they are kmd tests and not zcash tests, some hardcoded paths and such


[05-Aug-18 11:04 PM] dukeleto#7326
i am getting `configure: error: Cannot enable RELRO` on various compilers


[05-Aug-18 11:23 PM] dukeleto#7326
i took a chainsaw to configure.ac


[05-Aug-18 11:24 PM] dukeleto#7326
```diff --git a/configure.ac b/configure.ac
index 7de40ff..33bcf51 100644
--- a/configure.ac
+++ b/configure.ac
@@ -507,8 +507,8 @@ if test x$use_hardening != xno; then

   if test x$TARGET_OS != xwindows; then
     # All windows code is PIC, forcing it on just adds useless compile warnings
-    AX_CHECK_LINK_FLAG([[-Wl,-z,relro]], [HARDENED_LDFLAGS="$HARDENED_LDFLAGS -Wl,-z,relro"],[AC_MSG_ERROR(Cannot enable RELRO)])
-    AX_CHECK_LINK_FLAG([[-Wl,-z,now]], [HARDENED_LDFLAGS="$HARDENED_LDFLAGS -Wl,-z,now"],[AC_MSG_ERROR(Cannot enable BIND_NOW)])
+    # AX_CHECK_LINK_FLAG([[-Wl,-z,relro]], [HARDENED_LDFLAGS="$HARDENED_LDFLAGS -Wl,-z,relro"],[AC_MSG_ERROR(Cannot enable RELRO)])
+    # AX_CHECK_LINK_FLAG([[-Wl,-z,now]], [HARDENED_LDFLAGS="$HARDENED_LDFLAGS -Wl,-z,now"],[AC_MSG_ERROR(Cannot enable BIND_NOW)])
     AX_CHECK_COMPILE_FLAG([-fPIE],[HARDENED_CXXFLAGS="$HARDENED_CXXFLAGS -fPIE"],[AC_MSG_ERROR(Cannot enable -fPIE)])
     AX_CHECK_LINK_FLAG([[-pie]], [HARDENED_LDFLAGS="$HARDENED_LDFLAGS -pie"],[AC_MSG_ERROR(Cannot enable -pie)])
   else``` is required for me to build on OS X, tried gcc 6 and 7


[05-Aug-18 11:42 PM] dukeleto#7326
i am currently testing with a chain like this: ```$ ./komodod -regtest -ac_cc=1 -ac_name=REGTEST -addressindex=1 -spentindex=1 -ac_supply=5555555 -ac_reward=10000000 -pubkey=025c4358730743e77c83f23ddf470f465b34a262837ec0f12f8da7de05fe0e3a35
end.0 blocks, reward 0.10000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
call komodo_args.(./komodod) NOTARY_PUBKEY.(025c4358730743e77c83f23ddf470f465b34a262837ec0f12f8da7de05fe0e3a35)
>>>>>>>>>> REGTEST: p2p.64367 rpc.9869 magic.340962df 873030367 5555555 coins
initialized REGTEST at 1533537484
finished loading blocks REGTEST```


[05-Aug-18 11:45 PM] CryptoWrench#6022
hey is there a komodo.conf example i can use


[05-Aug-18 11:45 PM] CryptoWrench#6022
i didnt see the default rpc port or anthing


[05-Aug-18 11:45 PM] CryptoWrench#6022
i feel like it needs more than addnodes and tx=1 thing lol


[05-Aug-18 11:45 PM] dukeleto#7326
readme.md has it


[05-Aug-18 11:46 PM] dukeleto#7326
or are you talking about specific to CC stuff?


[05-Aug-18 11:46 PM] CryptoWrench#6022
well i didnt read the readme yet


[05-Aug-18 11:46 PM] CryptoWrench#6022
just was looking at git front end


[05-Aug-18 11:46 PM] dukeleto#7326
https://github.com/jl777/komodo/blob/master/README.md#create-komodoconf

{Embed}
https://github.com/jl777/komodo/blob/master/README.md
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[05-Aug-18 11:47 PM] CryptoWrench#6022
```css
cd ~
mkdir .komodo
cd .komodo
pico komodo.conf
#Add the following lines to the komodo.conf file:
rpcuser=dontuseweakusernameoryougetrobbed
rpcpassword=dontuseweakpasswordoryougetrobbed
txindex=1
addnode=5.9.102.210
addnode=78.47.196.146
addnode=178.63.69.164
addnode=88.198.65.74
addnode=5.9.122.241
addnode=144.76.94.38
addnode=89.248.166.91```


[05-Aug-18 11:47 PM] CryptoWrench#6022
see nothing about the default rpcport


[05-Aug-18 11:48 PM] dukeleto#7326
7771 for mainnet and 17771 for testnet and something else for regtest üòÉ


[05-Aug-18 11:49 PM] CryptoWrench#6022
haha okay so you think ill be okay with just above and rpcport= added?


[05-Aug-18 11:50 PM] CryptoWrench#6022
wait nvm lol


[05-Aug-18 11:50 PM] CryptoWrench#6022
i need more since the daemons are not on the same server as znop lol


[05-Aug-18 11:53 PM] dukeleto#7326
you are trying to run things on non-default ports?


[05-Aug-18 11:54 PM] CryptoWrench#6022
nope


[05-Aug-18 11:54 PM] CryptoWrench#6022
wanted the defaults


[05-Aug-18 11:55 PM] CryptoWrench#6022
but the daemons are on 1 server for my yiimp and znomp pools


[05-Aug-18 11:55 PM] CryptoWrench#6022
and the pools them selves are on others


[05-Aug-18 11:55 PM] dukeleto#7326
every asset chain has it's own ports


[05-Aug-18 11:55 PM] CryptoWrench#6022
but all behind the same network


[05-Aug-18 11:55 PM] CryptoWrench#6022
yeah


[05-Aug-18 11:55 PM] CryptoWrench#6022
thats why i wanted to know komodos


[05-Aug-18 11:56 PM] dukeleto#7326
üëç


[05-Aug-18 11:58 PM] CryptoWrench#6022
thanks üòÉ


[05-Aug-18 11:59 PM] dukeleto#7326
```$ ./komodo-cli -ac_name=REGTEST -regtest faucetinfo
error code: -1
error message:
to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet```


[06-Aug-18 12:00 AM] dukeleto#7326
i did start with a valid pubkey, so i guess i am not meeting some other conditions


[06-Aug-18 12:03 AM] CryptoWrench#6022
do i need to do anything special for my deamon to function for mining on znomp?


[06-Aug-18 12:06 AM] dukeleto#7326
@CryptoWrench i think #‚õè‚îÉtalk-mining might be more helpful for you, this channel is for smart contract development. Also, https://github.com/komodoservices/kmd-nomp might be interesting

{Embed}
https://github.com/komodoservices/kmd-nomp
komodoservices/kmd-nomp
kmd-nomp is mining pool software for Komodo/Assetchains so you can mine in your home!
https://images-ext-2.discordapp.net/external/s2ZfUm3b9v7eTfn-9N2bTSPFf0SRcqa-2wbZTzq8ncQ/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/40410867


[06-Aug-18 12:06 AM] CryptoWrench#6022
thanks ill take a look lol


[06-Aug-18 12:07 AM] Mylo#8306
@dukeleto use your notary pubkey if you haven't


[06-Aug-18 12:07 AM] Mylo#8306
the one in ~/SuperNET/iguana/pubkey.txt will be valid


[06-Aug-18 12:08 AM] dukeleto#7326
@Mylo this is for regtest, i should be able to use any pubkey in the wallet, no? I am probably misunderstanding something


[06-Aug-18 12:09 AM] dukeleto#7326
i am pretty close to being able to run cryptoconditions rpc tests in regtest


[06-Aug-18 12:14 AM] Mylo#8306
i haven't tried hard to understand, but just copied shossains lead, and then he said to use my notary pubkey


[06-Aug-18 12:14 AM] dukeleto#7326
that error seems to check that pubkey is defined and addressindex is enabled


[06-Aug-18 12:15 AM] dukeleto#7326

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/475924929594916864/ccreq.png


[06-Aug-18 12:16 AM] Mylo#8306
notary pubkey not there, return -1 ?


[06-Aug-18 12:17 AM] Mylo#8306
nice bright colours!


[06-Aug-18 12:19 AM] dukeleto#7326
yeah, if there is no pubkey defined (0 is the NULL byte, at index 0) or no addressindex, return -1


[06-Aug-18 12:19 AM] dukeleto#7326
the error is shown when it returns -1


[06-Aug-18 12:20 AM] dukeleto#7326
that is vim, i like syntax coloring üåà


[06-Aug-18 12:22 AM] dukeleto#7326
every cc rpc i try gives this same error. and i tried my NN pubkey, still no bueno


[06-Aug-18 12:23 AM] dukeleto#7326
the code doesn't even check that the pubkey is valid really, just if it exists


[06-Aug-18 12:23 AM] dukeleto#7326
or that addressindex has been enabled. But perhaps -regtest disables addressindex. just a guess


[06-Aug-18 12:26 AM] Mylo#8306
my docker image with pubkey=033aceKMDPIONEERS -regtest -cc=1 could return faucetinfo last week.
not sure if it does what you're after though, but it did return "success" from cli


[06-Aug-18 12:26 AM] Mylo#8306
as in real NN pubkey


[06-Aug-18 12:27 AM] dukeleto#7326
where is that repo again?


[06-Aug-18 12:28 AM] Mylo#8306
https://github.com/imylomylo/docker-komodo-smartcontracts

{Embed}
https://github.com/imylomylo/docker-komodo-smartcontracts
imylomylo/docker-komodo-smartcontracts
Contribute to docker-komodo-smartcontracts development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102


[06-Aug-18 12:28 AM] dukeleto#7326
üëç


[06-Aug-18 12:30 AM] Mylo#8306
```/komodo/src/komodod  -ac_cc=1 -ac_name=ATEST -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=033ace50aedf8df70035b962a805431363a61cc4e69d99d90726a2d48fb195f68c -regtest &

komodo-cli -ac_name=ATEST -regtest faucetinfo```
üëÜ is what i used last friday


[06-Aug-18 12:30 AM] Mylo#8306
bunch of jibber in #üíª‚îÉdev-general


[06-Aug-18 12:30 AM] dukeleto#7326
i just copy+pasted your exact command from docker


[06-Aug-18 12:30 AM] dukeleto#7326
and I still get that damn error


[06-Aug-18 12:31 AM] Mylo#8306
in docker or on your build?


[06-Aug-18 12:31 AM] dukeleto#7326
on my build, it's a branch forked from the latest `jl777` branch as of a few hours ago


[06-Aug-18 12:32 AM] Mylo#8306
i'll rebuild the docker now-ish but it'll take 20mins 8 core atom cpu in paris.  let you know


[06-Aug-18 12:35 AM] dukeleto#7326
cool, that will at least give us another data point


[06-Aug-18 12:37 AM] dukeleto#7326
i have this branch going with various fixes to the test suite: https://github.com/letolabs/komodo/tree/cctests

{Embed}
https://github.com/letolabs/komodo/tree/cctests
letolabs/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/STidbfwli6qkMkU8vATD46L8ib5zmeVb7WDB5OpJ4KU/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/648647


[06-Aug-18 12:39 AM] dukeleto#7326
the new test file needs to learn how to create an asset chain in the test suite, where the python tests can interact with it. then we can start to add various unit tests and more complex tests to make sure all the RPCs work as expected. Just a bit more plumbing is needed


[06-Aug-18 12:39 AM] dukeleto#7326
and then we can hook this up to travis CI too


[06-Aug-18 12:41 AM] Mylo#8306
yeah that's 'very efficient' testing - not just rpc calls in a bash script üòÉ


[06-Aug-18 12:43 AM] dukeleto#7326
we can test very complex stuff with the Python test framework. There is also C++ unit tests, but those are kind of annoying to write and annoying to run and therefore less pragmatic for us. We will get more ROI from Python tests


[06-Aug-18 12:44 AM] dukeleto#7326
for instance, in the framework, there is already functions to call so you can spin up N nodes and mine certain amounts of blocks on each and have them be in a very particular state, just before your test runs, things like that


[06-Aug-18 12:46 AM] Mylo#8306
that's handy.  probably easier for someone to pick up python tests than cpp tests just because of language selection as well (hence why ppl have bothered to do handier stuff with py perhaps?)


[06-Aug-18 12:47 AM] dukeleto#7326
C++ are "unit tests" where Python are called "QA" tests which some people would call "integration" tests


[06-Aug-18 12:48 AM] dukeleto#7326
because they test multiple things at once, not just individual functions. the line is blurry


[06-Aug-18 12:49 AM] Mylo#8306
blurry yes but makes sense if higher level stuff has been done in python i guess


[06-Aug-18 12:49 AM] dukeleto#7326
it's easy to describe complex stuff in Python, it's flexible, and easy to write + maintain tests in it. It's considered an additional layer on the c++ unit tests. The c++ unit tests would be like "let's test the foo RPC function with 99 different kinds of function arguments to do the right thing every time"


[06-Aug-18 12:49 AM] dukeleto#7326
where Python is like "make sure this bug doesn't happen when this complex situation arises"


[06-Aug-18 12:49 AM] Mylo#8306
yep gotcha


[06-Aug-18 12:50 AM] dukeleto#7326
we inherited the Zec test suite but many things never got changed that should have been, so now they are üòÉ

{Reactions}
üöÄ 

[06-Aug-18 12:51 AM] dukeleto#7326
holy crap i actually just made the test suite happy


[06-Aug-18 12:51 AM] dukeleto#7326
in the "it actually ran" kind of way


[06-Aug-18 12:51 AM] Mylo#8306
üçª


[06-Aug-18 12:52 AM] dukeleto#7326
it's noisy but i have a test file starting up 4 nodes (that is the default): https://gist.github.com/leto/fbe91e6d95ba0a8c35941115a3d65c96

{Embed}
https://gist.github.com/leto/fbe91e6d95ba0a8c35941115a3d65c96
gist:fbe91e6d95ba0a8c35941115a3d65c96
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[06-Aug-18 12:52 AM] dukeleto#7326
i still need to modify it to add kmd specific arguments to the regtest kmd


[06-Aug-18 12:52 AM] jl777c#5810
CC test suite is bounty worthy


[06-Aug-18 12:53 AM] dukeleto#7326
@jl777c good to know üòÉ


[06-Aug-18 12:53 AM] jl777c#5810
a complete test suite for all 4 of the reference CC would be 5000 KMD

{Reactions}
üî• (3) 

[06-Aug-18 12:54 AM] jl777c#5810
assets especially will be hard to do


[06-Aug-18 12:55 AM] jl777c#5810
but if it can spin up nodes, issue asset, etc. it would be possible


[06-Aug-18 12:55 AM] dukeleto#7326
yes, i have the test suite spinning up nodes already, which is nice


[06-Aug-18 12:56 AM] dukeleto#7326
i am willing to try to do the complete test suite and/or share the bounty. i strangely enjoy writing tests


[06-Aug-18 12:56 AM] Mylo#8306
yeah - how does it 'spin up 4 nodes'?


[06-Aug-18 12:57 AM] Mylo#8306
haha ya weirdo üòõ


[06-Aug-18 12:57 AM] dukeleto#7326
the Python test suite does stuff by default, or you can override


[06-Aug-18 12:58 AM] dukeleto#7326
this is the stub test file i am using: https://github.com/letolabs/komodo/commit/752791ae3dc1c0b1c9f6d6c5179acda189d4d5cb

{Embed}
https://github.com/letolabs/komodo/commit/752791ae3dc1c0b1c9f6d6c5179acda189d4d5cb
Add stub test file for cc tests ¬∑ letolabs/komodo@752791a
https://images-ext-2.discordapp.net/external/NV9OwV-r5qqXnJrqIuC28RKmVRDThBWK6meklXuwe5E/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/30298


[06-Aug-18 12:58 AM] dukeleto#7326
self.nodes[0,1,2,3] are regtest komodo nodes running under the test suite


[06-Aug-18 12:58 AM] dukeleto#7326
and you can run RPC functions on them like `self.nodes[0].getnewaddress()`


[06-Aug-18 12:59 AM] dukeleto#7326
you can override `setup_network` to create your own kinds/numbers of nodes, like the wallet.py test : https://github.com/letolabs/komodo/blob/752791ae3dc1c0b1c9f6d6c5179acda189d4d5cb/qa/rpc-tests/wallet.py#L22

{Embed}
https://github.com/letolabs/komodo/blob/752791ae3dc1c0b1c9f6d6c5179acda189d4d5cb/qa/rpc-tests/wallet.py
letolabs/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/STidbfwli6qkMkU8vATD46L8ib5zmeVb7WDB5OpJ4KU/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/648647


[06-Aug-18 01:02 AM] dukeleto#7326
what i still need to do in my `cctests` branch is teach the test framework about kmd-specific things, like -ac_* params, and a way to control them easily so you can easily create AC's for tests. Right now the test suite only knows how to create regtest `komodod` nodes


[06-Aug-18 01:04 AM] dukeleto#7326
i am going to sleep soon, hopefully tomorrow I can sort out why I get the annoying `to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet` error and get some actual cc tests running


[06-Aug-18 01:05 AM] dukeleto#7326
`./qa/pull-tester/rpc-tests.sh cryptoconditions` is how to run the test in my branch if anybody wants to play with it


[06-Aug-18 01:06 AM] Mylo#8306
validateaddress and stuff works as expected.  regtest mining 150+ blocks to test sending to faucet and stuff.


[06-Aug-18 01:06 AM] Mylo#8306
"to test" <--- like a neanderthal, not an integration test üòÉ


[06-Aug-18 01:07 AM] dukeleto#7326
@Mylo something is weird with my setup, and/or OS X hates me (i had to fix 3 os x bugs in my branch just to compile)


[06-Aug-18 01:08 AM] Mylo#8306
well.... that's why i'm gunning for docker first.  I can't stand installing brew.  and Xcode is unnecessary for my type of deving


[06-Aug-18 01:08 AM] Mylo#8306
komodo doesn't compile on bsd does it?


[06-Aug-18 01:08 AM] dukeleto#7326
zcash doesn't


[06-Aug-18 01:08 AM] dukeleto#7326
and dependencies of it don't


[06-Aug-18 01:08 AM] dukeleto#7326
perhaps grand-dependencies too


[06-Aug-18 01:08 AM] dukeleto#7326
it's a scary world


[06-Aug-18 01:10 AM] Mylo#8306
yeah, i never stuck with anything bsd related 10 years ago.


[06-Aug-18 01:10 AM] Mylo#8306
doesn't surprise me.  back in telephony, bsd was last to get anything


[06-Aug-18 01:13 AM] Mylo#8306
maybe i have to regtest with proper kmd params like 100m supply.  my ATEST chain didn't generate any mining rewards


[06-Aug-18 03:49 AM] jl777c#5810
I added smart utxo selection to the CC tx creation for normal utxos. the CC utxos are usually limited in what they can be so not sure it is worth adding to all the CC specific CCutxo selection


[06-Aug-18 03:50 AM] jl777c#5810
this change should result in smaller rawtx,but there is a chance maybe I broke some things


[06-Aug-18 03:50 AM] jl777c#5810
hopefully not as I want to restrict changes to bug fixes for the 1 million hardfork


[06-Aug-18 04:07 AM] Mylo#8306
```komodod -regtest -ac_supply=100000000 -ac_cc=1 -pubkey=033ace50aedf8df70035b962a805431363a61cc4e69d99d90726a2d48fb195f68c``` seems to break getting a balance after 101 blocks and mining rewards after that.
```
komodod -regtest -ac_supply=100000000
```
has mature 100m coins at block 100+ and mining rewards from 101 onwards no probs.

So i can't fund a faucet on kmd-regtest, nor any other regtest-ACs


[06-Aug-18 04:12 AM] Mylo#8306
addressindex=1 & spentindex=1 when included in that first `komodod` command also have same result.


[06-Aug-18 04:19 AM] jl777c#5810
-regtest mode is needed?


[06-Aug-18 04:19 AM] jl777c#5810
and what does " seems to break " mean?


[06-Aug-18 05:32 AM] Mylo#8306
-regtest is very much needed.  it uses the ~/.komodo/regtest data.  without `-regtest` it doesn't know it's in regtest mode.  regtest mode is handy for app developers because app/front-end developers are not sys.admins or backend architect-types.

yes regtest mode is needed for the python integration testing duke is working on and also for enabling app developers & students to "start kmd and call rpc from their apps in less than 10 minutes without needing to install a full blockchain node on their workstation AND most importantly being able to generate blocks at their own devleopment pace"

`s/seems to break/breaks`.  it breaks the generation of coins in regtest mode - so being broken cannot test AC smart contracts like CCfaucet because no coins to transfer to faucet.

to quote @dukeleto  from about 5 hours earlier
```
we can test very complex stuff with the Python test framework. There is also C++ unit tests, but those are kind of annoying to write and annoying to run and therefore less pragmatic for us. We will get more ROI from Python tests
for instance, in the framework, there is already functions to call so you can spin up N nodes and mine certain amounts of blocks on each and have them be in a very particular state, just before your test runs, things like that
```
and
```
C++ are "unit tests" where Python are called "QA" tests which some people would call "integration" tests
because they test multiple things at once, not just individual functions. the line is blurry

it's easy to describe complex stuff in Python, it's flexible, and easy to write + maintain tests in it. It's considered an additional layer on the c++ unit tests. The c++ unit tests would be like "let's test the foo RPC function with 99 different kinds of function arguments to do the right thing every time"
where Python is like "make sure this bug doesn't happen when this complex situation arises"
```
hope that helps a bit why regtest mode is needed for other type of dev


[06-Aug-18 05:33 AM] Mylo#8306
hopefully duke can clear up any gaps or misinterpretations i may have


[06-Aug-18 07:12 AM] dukeleto#7326
that will require some ‚òï first but I will be around soon to chat


[06-Aug-18 07:44 AM] dukeleto#7326
i am reading the new reddit AMA: ```
ETH has the truffle framework for building contracts, komodo has in built contracts for common use cases. ETH has the ganache tool for test mode so a developer can run their own node in isolation on their computer running at their own pace (e.g. generate a block every second if they want to emulate)

I‚Äôm testing an equivalent for komodo. Further, I‚Äôm testing packaging it up so a new dev at any skill level can be up and running in <10 minutes in their own self contained environment.‚Ää‚Äî‚ÄäMylo Mylo```


[06-Aug-18 07:44 AM] dukeleto#7326
from https://www.reddit.com/r/komodoplatform/comments/93yyqc/ama_on_monday_6th_august_with_our_quality/

{Embed}
https://www.reddit.com/r/komodoplatform/comments/93yyqc/ama_on_monday_6th_august_with_our_quality/
AMA on Monday, 6th August with our Quality Assurance (QA) and Supp...
# ![img](8ctpwbqykod11 " Image used with permission from Daniel McClendon Art http://danielmcclendon.com/ ") # Add this AMA Monday to your...
https://images-ext-1.discordapp.net/external/KwPWO4zLApnsrJzQpqSExiphlQc0mP6Z-Tx_pJdTzes/%3Fw%3D320%26s%3D5163c15e71870c2083a45618ad9390da/https/i.redditmedia.com/AVFu-p7pZI9g7Gt3Y6CS-gwujlgwtO1bicvY0TJtMh0.jpg


[06-Aug-18 07:45 AM] dukeleto#7326
that helps me understand what Mylo is trying to do, you want a way to start up a "personal blockchain" on one computer, for development/QA/testing


[06-Aug-18 08:01 AM] Mylo#8306
Yes.  For app developers to not have to muck around with systems ‚úÖ


[06-Aug-18 08:01 AM] Mylo#8306
When they have most of their app working in private, they can move to a live blockchain.


[06-Aug-18 08:02 AM] Mylo#8306
Give a webdev linux and some install scripts, see you later won't see them again.


[06-Aug-18 08:02 AM] dukeleto#7326
lol


[06-Aug-18 08:03 AM] dukeleto#7326
@Mylo i think we can get some stuff done, where I focus on low level test suite/infrastructure/plumbing and you focus more on the "porcelain"


[06-Aug-18 08:04 AM] Mylo#8306
Yep, sounds good.  All i want is RPC regtest for https://github.com/imylomylo/komodo-cakeshop

{Embed}
https://github.com/imylomylo/komodo-cakeshop
imylomylo/komodo-cakeshop
Contribute to komodo-cakeshop development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102


[06-Aug-18 08:04 AM] Mylo#8306
Should be able to fund a faucet quick enough üò¨


[06-Aug-18 08:04 AM] dukeleto#7326
@mylo tell me your current issue/problem


[06-Aug-18 08:05 AM] Mylo#8306
```komodod -regtest -ac_supply=100000000```
works great past block 150, coins available for spending.
```komodod -regtest -ac_supply=100000000 -ac_cc=1 -pubkey=033ace50aedf8df70035b962a805431363a61cc4e69d99d90726a2d48fb195f68c``` no coins


[06-Aug-18 08:06 AM] Mylo#8306
after you generate 100+ blocks.


[06-Aug-18 08:07 AM] Mylo#8306
`addressindex=1   spentindex=1` makes no difference either.


[06-Aug-18 08:07 AM] dukeleto#7326
ok, good description

{Reactions}
üëå 

[06-Aug-18 08:07 AM] dukeleto#7326
so when you enable CC, you can't get coins to mature


[06-Aug-18 08:07 AM] dukeleto#7326
can you show me outputs of `getwalletinfo` ?


[06-Aug-18 08:09 AM] Mylo#8306
all zeros.  hold on. give you real output


[06-Aug-18 08:10 AM] dukeleto#7326
in theory you should only need to mine 101 blocks to get 1 mature block (100 block maturity rule)


[06-Aug-18 08:11 AM] Mylo#8306
yep, but put a few extra in (120) this time cos it only costs me 10 seconds and i'm just hoping to hit a mining reward /s


[06-Aug-18 08:12 AM] dukeleto#7326
every block you get the mining reward, you are the only miner on your regtest chain üòÉ


[06-Aug-18 08:12 AM] Mylo#8306
yeah i'm being facetious and peculiar.  it's 1am and i've been awake since 6am, waiting for a 2am meeting


[06-Aug-18 08:13 AM] dukeleto#7326
oh gosh. I just got up and having lots of ‚òï üòÉ


[06-Aug-18 08:13 AM] dukeleto#7326
SO


[06-Aug-18 08:13 AM] dukeleto#7326
here are some idea


[06-Aug-18 08:13 AM] dukeleto#7326
are you using -ac_name=FOO ?


[06-Aug-18 08:13 AM] dukeleto#7326
i would like to see your full exact CLI


[06-Aug-18 08:13 AM] dukeleto#7326
because if you are testing multiple times, with the same -ac_name=FOO, the directory already exists, and weird shit might happen


[06-Aug-18 08:14 AM] dukeleto#7326
change your AC name constantly, or keep deleting the directory  it creates


[06-Aug-18 08:14 AM] dukeleto#7326
is one idea


[06-Aug-18 08:14 AM] dukeleto#7326
also, compare the komodo.conf from CC and non-CC nodes, just in case there is something different


[06-Aug-18 08:15 AM] dukeleto#7326
in the test suite, i just fixed a bug where it would not create komodo.confs correctly because it's inherited from zcash which does not require txindex=1


[06-Aug-18 08:15 AM] dukeleto#7326
https://github.com/letolabs/komodo/commit/f4cdde0e85683eada52704d0f292dad4ae90fd50

{Embed}
https://github.com/letolabs/komodo/commit/f4cdde0e85683eada52704d0f292dad4ae90fd50
Enable txindex in regtest komodo.confs and update binary in initia...
‚Ä¶e_chain
https://images-ext-2.discordapp.net/external/NV9OwV-r5qqXnJrqIuC28RKmVRDThBWK6meklXuwe5E/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/30298


[06-Aug-18 08:16 AM] dukeleto#7326
that python code is the test suite infrastructure, that automates starting/stopping/managing regtest komodod's


[06-Aug-18 08:18 AM] dukeleto#7326
i can't even get CC to think i started with -pubkey


[06-Aug-18 08:19 AM] dukeleto#7326
i do a `git init` in my .komodo directories, and it lets you see config files changes/being added/deleted/etc, just an idea for you, if you occasionally commit and make checkpoints


[06-Aug-18 08:20 AM] dukeleto#7326
i usually use git to keep track of all my wallet.dat's and relevant .conf's


[06-Aug-18 08:20 AM] Mylo#8306
ok, will check, here's cli first.  git cloned to /   fs root hence command not in homedir

ok cool, i'll keep an eye on qa dir in future.  might be my turn to learn python 2nd half of 2018!  incidently, explained where the term "bug" comes from to my girlfriend yesterday - she thought it was anecdotally awesome there's a story to it (yoga teacher, totally non-tech)

here's CLI
no -ac_name, so plain old KMD
```
 /komodo/src/komodod  -ac_cc=1 -addressindex=1 -spentindex=1 -ac_supply=100000000  -pubkey=033ace50aedf8df70035b962a805431363a61cc4e69d99d90726a2d48fb195f68c -regtest &
```
then
```
/komodo/src/komodo-cli -regtest generate 120
```
resulting in
```
(tx.0: 3.00000000  KOMODO_LASTMINED.118 -> 119
) KMD ht.119
(tx.0: 3.00000000  KOMODO_LASTMINED.119 -> 120
) KMD ht.120
[
  "9ac0f5c558f46f763a10cc9be08f7054a6e86cb8758cb9b21d877161043b627e",
  "be84cc3033ccd4cfbc8079ba829f00cbaa4a81147df197b64f0bdb78e7e1b53c",
  "9aaa026719cc353faf3f6eb961fcb4409b28a7df5a08b09cc8882543a77f9553",
  snipped
```


[06-Aug-18 08:20 AM] Mylo#8306
getinfo
```
root@a93e406d300c:/# /komodo/src/komodo-cli -regtest getinfo
{
  "version": 1001550,
  "protocolversion": 170003,
  "KMDversion": "0.1.1",
  "notarized": 0,
  "prevMoMheight": 0,
  "notarizedhash": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid_height": "mempool",
  "notarized_confirms": 0,
  "walletversion": 60000,
  "balance": 0.00000000,
  "interest": 0.00000000,
  "blocks": 120,
  "longestchain": 0,
  "timeoffset": 0,
  "tiptime": 1533568356,
  "connections": 0,
  "proxy": "",
  "difficulty": 1.000007093003461,
  "testnet": false,
  "keypoololdest": 1533568209,
  "keypoolsize": 101,
  "paytxfee": 0.00000000,
  "relayfee": 0.00000100,
  "errors": "",
  "CCid": 1,
  "name": "KMD"
}

```
and getwalletinfo
```
root@a93e406d300c:/# /komodo/src/komodo-cli -regtest getwalletinfo
{
  "walletversion": 60000,
  "balance": 0.00000000,
  "unconfirmed_balance": 0.00000000,
  "immature_balance": 0.00000000,
  "txcount": 0,
  "keypoololdest": 1533568209,
  "keypoolsize": 101,
  "paytxfee": 0.00000000
}
```


[06-Aug-18 08:21 AM] dukeleto#7326
very useful


[06-Aug-18 08:21 AM] Mylo#8306
hmmmm... i might pass -conf in then.


[06-Aug-18 08:21 AM] dukeleto#7326
my idea is to use the txids you know, like 9ac0f5c558f46f763a10cc9be08f7054a6e86cb8758cb9b21d877161043b627e, and use RPCs to see what is up


[06-Aug-18 08:22 AM] dukeleto#7326
like `getrawtransaction 9ac0f5c558f46f763a10cc9be08f7054a6e86cb8758cb9b21d877161043b627e 1` or whatever it is


[06-Aug-18 08:22 AM] dukeleto#7326
see if something is wrong with the xtn or something


[06-Aug-18 08:23 AM] dukeleto#7326
@Mylo plz show the output of `listtransactions "*" 1000`


[06-Aug-18 08:23 AM] dukeleto#7326
in a gist or whatev if it's big üòÉ


[06-Aug-18 08:23 AM] dukeleto#7326
or you can sleep, that is always an option


[06-Aug-18 08:23 AM] dukeleto#7326
you seem to be mining correctly, and your logs have txids


[06-Aug-18 08:24 AM] dukeleto#7326
they don't even show up as immature


[06-Aug-18 08:24 AM] dukeleto#7326
that is weird


[06-Aug-18 08:24 AM] Mylo#8306
yeah i'll compare just -regtest because i noticed "longestchain: 0" in the getinfo, and i'll also pass conf file on command line


[06-Aug-18 08:24 AM] Mylo#8306
be about 10 mins


[06-Aug-18 08:27 AM] xRobeSx#5136
@Mylo james said longestchain will be 0 if less than 3 peers

{Reactions}
üôè (2) 

[06-Aug-18 08:27 AM] Mylo#8306
ok thanks - handy to know.  3 is the magic number


[06-Aug-18 08:28 AM] xRobeSx#5136
No problem.  I had wondered this in the past, so I was happy to find out myself üòÉ

{Reactions}
üòÉ 

[06-Aug-18 08:30 AM] Mylo#8306
anyway @dukeleto the `listtransactions "*" 1000` on 105 generated blocks is empty
```
root@4549c288025e:/# /komodo/src/komodo-cli -regtest listtransactions "*" 1000
[
]
```


[06-Aug-18 08:32 AM] Mylo#8306
i'll put it in gist what i'm doing....at least it will be one stream of related info


[06-Aug-18 08:38 AM] Mylo#8306
https://gist.github.com/imylomylo/aa8626835718e25073f55fc9cc71b992

{Embed}
https://gist.github.com/imylomylo/aa8626835718e25073f55fc9cc71b992
regtest generate 105 blocks, no coins
regtest generate 105 blocks, no coins
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102


[06-Aug-18 08:39 AM] Mylo#8306
error code -5 on `gettransaction` from a `getblock` txid listing


[06-Aug-18 08:58 AM] dukeleto#7326
@Mylo try `getrawtransaction`


[06-Aug-18 08:58 AM] dukeleto#7326
and also make sure that your regtest komodo.conf has txindex=1


[06-Aug-18 09:00 AM] Mylo#8306
ok


[06-Aug-18 09:07 AM] Mylo#8306
i had to import my privkey for notary to get coins


[06-Aug-18 09:09 AM] Mylo#8306
getblock->getrawtransaction->decoderawtransaction it had my NN address.
importprivkey and 100,000,027 + 300 immature from mining reward on 110 blocks.
all adds up.


[06-Aug-18 09:09 AM] Mylo#8306
semi pebkac


[06-Aug-18 09:13 AM] Mylo#8306
thanks for hint @dukeleto


[06-Aug-18 09:22 AM] Mylo#8306
that's cool, regtest faucetfund, does fund it.


[06-Aug-18 09:57 AM] dukeleto#7326
@Mylo oh, you used a NN pubkey instead of a locally generated one from `getnewaddress`, that is why üòÉ


[06-Aug-18 09:58 AM] dukeleto#7326
@Mylo if you keep a record of your manual tests somehow, in a gist or something, that will be useful for me writing python tests


[06-Aug-18 10:20 AM] dukeleto#7326
starting it with `./komodod -ac_cc=1 -ac_name=REGTEST -addressindex=1 -spentindex=1 -ac_supply=5555555 -ac_reward=10000000 -pubkey=0381fbd9deab1e6f9b57d6a44308a339ca6f1da9ae03bf0469dca71aea43b25d -regtest`


[06-Aug-18 10:20 AM] dukeleto#7326
```$ ./komodo-cli -ac_name=REGTEST -regtest validateaddress RG1e2oUL8zmS9oXKEHMSm1K5wrp9W8KheS
{
  "isvalid": true,
  "address": "RG1e2oUL8zmS9oXKEHMSm1K5wrp9W8KheS",
  "scriptPubKey": "76a91449d7e3c63d69026af988459e1ace3801960cc8a188ac",
  "segid": 33,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "0381fbd9deab1e6f9b5757d6a44308a339ca6f1da9ae03bf0469dca71aea43b25d",
  "iscompressed": true,
  "account": ""
}```


[06-Aug-18 10:20 AM] dukeleto#7326
BUT ```$ ./komodo-cli -ac_name=REGTEST -regtest faucetinfo
error code: -1
error message:
to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet```


[06-Aug-18 10:20 AM] dukeleto#7326
what am I missing?


[06-Aug-18 10:21 AM] dukeleto#7326
stdout says it loaded the pubkey, i think: ```end.0 blocks, reward 0.10000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
call komodo_args.(./komodod) NOTARY_PUBKEY.(0381fbd9deab1e6f9b57d6a44308a339ca6f1da9ae03bf0469dca71aea43b25d)
>>>>>>>>>> REGTEST: p2p.64367 rpc.64368 magic.340962df 873030367 5555555 coins
initialized REGTEST at 1533576081
finished loading blocks REGTEST```


[06-Aug-18 10:22 AM] dukeleto#7326
do we have a list of new CC RPCs somewhere? Or do I need to regex some .cpp files?


[06-Aug-18 10:22 AM] Mylo#8306
that's the thing, i thought it had to be NN pubkey.  nah i'll get you link


[06-Aug-18 10:23 AM] dukeleto#7326
maybe I am confusing myself. With verus, you can mine to an address with -pubkey


[06-Aug-18 10:23 AM] Mylo#8306
https://github.com/himu007/KMD-CC-Token-Test-Guide

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040

{Reactions}
shexy 

[06-Aug-18 10:23 AM] dukeleto#7326
but maybe with KMD -pubkey is only for valid notaries?


[06-Aug-18 10:23 AM] dukeleto#7326
if so, they we need to have a "fake regtest notary"


[06-Aug-18 10:23 AM] dukeleto#7326
because we can't put a real KMD notary privkey in the test suite or dApp builder stuff


[06-Aug-18 10:25 AM] dukeleto#7326
`to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet` doesn't say it must be a NN pubkey


[06-Aug-18 10:25 AM] dukeleto#7326
but maybe it does need to be


[06-Aug-18 10:25 AM] Mylo#8306
good reading. i thought it was because CC need to have NN pubkey because of the cross-chain-ness?


[06-Aug-18 10:28 AM] SHossain#0007
komodod and any AC can start with `-pubkey` option and mine and do other stuff


[06-Aug-18 10:29 AM] dukeleto#7326
ok, that is what I figured


[06-Aug-18 10:29 AM] SHossain#0007
works with VRSC as it is using komodod


[06-Aug-18 10:29 AM] dukeleto#7326
i can't figure out why CC's RPCs think that I have not enabled pubkey


[06-Aug-18 10:29 AM] SHossain#0007
we are using this `./komodod -ac_cc=1 -ac_name=AT1 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<your_pubkey> -addnode=195.201.137.5 -addnode=195.201.20.230 -addnode=78.47.205.239 -addnode=94.130.224.11 &`


[06-Aug-18 10:30 AM] dukeleto#7326
that is good to know, that is kind of our "official" test chain. I am trying to make it so that we have a test suite that "spins up" a chain like that and runs tests on it


[06-Aug-18 10:32 AM] dukeleto#7326
i am going to try to translate some of the manual tests you do to AT1 into automatic tests, and they can run in Travis on every commit, or on PRs/merges/etc


[06-Aug-18 10:33 AM] dukeleto#7326
i have a bunch of experience with Travis CI, I was the one who helped add Perl support to it in the days when dinosaurs roamed the internet, before cryptocoins

{Reactions}
üòÑ üëåüèΩ (2) üíØ 

[06-Aug-18 10:34 AM] dukeleto#7326
@SHossain your faq.md in the test guide repo is super useful, reading thru it to catch up to speed

{Reactions}
üëçüèΩ 

[06-Aug-18 10:34 AM] siu#3920
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=506594567

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pubkey starts with 02 or 03....
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[06-Aug-18 10:34 AM] dukeleto#7326
i saw all this CC stuff being hacked on but missed some of the beginning fun


[06-Aug-18 10:35 AM] siu#3920
finished adding all the rpc calls for tokens in the test plan


[06-Aug-18 10:35 AM] SHossain#0007
cool. thanks @siu


[06-Aug-18 10:35 AM] dukeleto#7326
in theory, the test suite can test cross-chain stuff too


[06-Aug-18 10:35 AM] SHossain#0007
i'm adding a column for each plan to list the example outputs


[06-Aug-18 10:36 AM] dukeleto#7326
first, i will try to get it to spin up nodes of 1 kind of AC (right now it can only do KMD), and then next will be able to spin up AC's with different parameters in the test, so you can test cross-chain stuff


[06-Aug-18 10:36 AM] dukeleto#7326
all your manual testing helps me understand what kinds of tests are going to be most valuable to run all the time. Like James said, some tests are more valuable, in terms of ROI, than others


[06-Aug-18 10:38 AM] SHossain#0007
cross-chain stuff not ready yet, as i remember. jl777 wanted to make single chain stuff stable first. but, it is good to have it ready.


[06-Aug-18 10:38 AM] dukeleto#7326
sure, i am just saying that it will be possible. Testing all the RPCs on a single chain gives us the most ROI at first


[06-Aug-18 10:39 AM] dukeleto#7326
then we can try to test for bugs that happen in cross-chain scenarios after that

{Reactions}
üëçüèΩ 

[06-Aug-18 10:43 AM] jl777c#5810
pubkey option works all the time, it just sets a change pubkey


[06-Aug-18 10:43 AM] dukeleto#7326
i am going to try this on Linux to see if this is an osx bug


[06-Aug-18 10:43 AM] jl777c#5810
but if it is a notary pubkey, it enables notary mode


[06-Aug-18 10:50 AM] dukeleto#7326
i am trying to determine if ensureCC_requirements is failing because of pubkey or addressindex check


[06-Aug-18 10:55 AM] dukeleto#7326
seeing the same thing on Linux, i must be doing something dumb


[06-Aug-18 11:01 AM] Mylo#8306
i'm copying your steps atm, generating another 50 blocks


[06-Aug-18 11:04 AM] Mylo#8306
i'm doing all my stuff on the REGTEST ac, without needing to put -ac_name=REGTEST


[06-Aug-18 11:04 AM] Mylo#8306
faucetinfo is ok


[06-Aug-18 11:05 AM] Mylo#8306
@dukeleto  https://gist.github.com/imylomylo/00f0dc2234d1a65860e0e4ccdd0298e0

{Embed}
https://gist.github.com/imylomylo/00f0dc2234d1a65860e0e4ccdd0298e0
gist:00f0dc2234d1a65860e0e4ccdd0298e0
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102


[06-Aug-18 11:07 AM] Mylo#8306
komodod to start the chain has -ac_name=REGTEST but every komodo-cli call does not use -ac_name, and faucetinfo returns success.


[06-Aug-18 11:08 AM] dukeleto#7326
hmmm


[06-Aug-18 11:08 AM] dukeleto#7326
not so sure about that


[06-Aug-18 11:09 AM] dukeleto#7326
without -ac_name=REGTEST, you are running against your normal KMD i would think


[06-Aug-18 11:09 AM] dukeleto#7326
without it I get ```$ ./komodo-cli -regtest faucetinfo
Error reading configuration file: Missing komodo.conf```


[06-Aug-18 11:10 AM] dukeleto#7326
because I never made a normal KMD regtest on this machine


[06-Aug-18 11:10 AM] Mylo#8306
i started komodod with -conf=/root/.komodo/komodo.conf


[06-Aug-18 11:10 AM] Mylo#8306
i've only got regtest running.  and the balance and everything are the start up params


[06-Aug-18 11:12 AM] Mylo#8306
if i add -ac_name=REGTEST, i get same as you
```
root@3b3f5bc8b655:/# /komodo/src/komodo-cli -regtest -ac_name=REGTEST validateaddress RWPg8B91kfK5UtUN7z6s6TeV9cHSGtVY8D
error: couldn't connect to server: unknown (code -1)
(make sure server is running and you are connecting to the correct RPC port)


root@3b3f5bc8b655:/# /komodo/src/komodo-cli -regtest validateaddress RWPg8B91kfK5UtUN7z6s6TeV9cHSGtVY8D
{
  "isvalid": true,
  "address": "RWPg8B91kfK5UtUN7z6s6TeV9cHSGtVY8D",
  "scriptPubKey": "76a914e7948c7995f4347f31eb55c8ea77e8f6e97b372c88ac",
  "segid": 32,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf",
  "iscompressed": true,
  "account": ""
}
```


[06-Aug-18 11:13 AM] dukeleto#7326
that is because of your `-conf=/root/.komodo/komodo.conf` trick i think


[06-Aug-18 11:14 AM] Mylo#8306
ok, but i only have rpcuser, rpcpassword and txindex in that conf file.  no rpcports or anything


[06-Aug-18 11:14 AM] Mylo#8306
it's at bottom of that last gist


[06-Aug-18 11:15 AM] dukeleto#7326
thanks


[06-Aug-18 11:20 AM] dukeleto#7326
i am using your exact command from the gist, with the same conf file (changed to my valid pubkey)


[06-Aug-18 11:20 AM] dukeleto#7326
still the same error, arg


[06-Aug-18 11:20 AM] dukeleto#7326
i should be on the latest `jl777` branch, or a different one?


[06-Aug-18 11:22 AM] Mylo#8306
i'm from about 12 hours ago


[06-Aug-18 11:23 AM] dukeleto#7326
just making sure there was/wasn't a CC branch i should be on


[06-Aug-18 11:23 AM] Mylo#8306
commit `79a3b761c234a140b622e24e8307ce0c65627e52`


[06-Aug-18 11:23 AM] Mylo#8306
jl777 branch


[06-Aug-18 11:25 AM] dukeleto#7326
```     if ( NOTARY_PUBKEY33[0] == 0 )
         return(-1);```


[06-Aug-18 11:25 AM] dukeleto#7326
that is the code that making stuff not work for me, it's detecing no pubkey somehow


[06-Aug-18 11:25 AM] dukeleto#7326
```$ ./komodod -conf=/home/dukeleto/.komodo/komodo.conf -ac_cc=1 -ac_name=REGTEST -addressindex=1 -spentindex=1 -ac_supply=5555555 -ac_reward=10000000 -pubkey=02de7795adfe6454844d7991103c97754fb41b71b44db1ac5f30d26b24d13aca30 -regtest
end.0 blocks, reward 0.10000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
call komodo_args.(./komodod) NOTARY_PUBKEY.(y=02de7795adfe6454844d7991103c97754fb41b71b44db1ac5f30d26b24d13aca30)```


[06-Aug-18 11:26 AM] dukeleto#7326
@jl777c how is it that I can start an AC with the above, with NOTARY_PUBKEY recognized, yet the code above returns -1 ?


[06-Aug-18 11:26 AM] dukeleto#7326
i made ensureCC_requirements tell me which reason it is failing, it can't find the pubkey


[06-Aug-18 11:32 AM] jl777c#5810
somehow it is set to y=02de7795adfe6454844d7991103c97754fb41b71b44db1ac5f30d26b24d13aca30


[06-Aug-18 11:32 AM] jl777c#5810
the y= in front is not valid


[06-Aug-18 11:33 AM] jl777c#5810
maybe put -pubkey= in the beginning


[06-Aug-18 11:41 AM] dukeleto#7326
good catch, i didn't see that


[06-Aug-18 11:44 AM] dukeleto#7326
```$ ./komodod -regtest -conf=/home/dukeleto/.komodo/komodo.conf -ac_cc=1 -ac_name=REGTEST -addressindex=1 -spentindex=1 -ac_supply=5555555 -ac_reward=1000000-pubkey=02de7795adfe6454844d7991103c97754fb41b71b44db1ac5f30d26b24d13aca30
end.0 blocks, reward 0.10000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
call komodo_args.(./komodod) NOTARY_PUBKEY.(02de7795adfe6454844d7991103c97754fb41b71b44db1ac5f30d26b24d13aca30)
>>>>>>>>>> REGTEST: p2p.64367 rpc.64368 magic.340962df 873030367 5555555 coins
initialized REGTEST at 1533580994
finished loading blocks REGTEST```

{Reactions}
üëåüèΩ 

[06-Aug-18 11:45 AM] dukeleto#7326
``` ./komodo-cli -regtest faucetaddress
error code: -1
error message:
to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet. ERR=-1
```


[06-Aug-18 11:46 AM] dukeleto#7326
i added the ERR=-1 which means it's the pubkey check, not the addressindex check


[06-Aug-18 11:47 AM] dukeleto#7326
mylo is importing  privkey, then using that as a pubkey. I am using getnewaddress and then using that. Could that cause a difference?


[06-Aug-18 11:48 AM] jl777c#5810
the address is in the wallet? and it is the right pubkey?


[06-Aug-18 11:49 AM] jl777c#5810
getnewaddress from the -regtest instance? otherwise it will be in the wrong wallet.dat


[06-Aug-18 11:50 AM] dukeleto#7326
```dukeleto@myhush02:~/git/komodo/src$ echo $PUBKEY
0273e8525d8e146e8cb8e3035dbcb1e97a768fbac74466b816b3cafea91258bf71
dukeleto@myhush02:~/git/komodo/src$ ./komodod -regtest -conf=/home/dukeleto/.komodo/komodo.conf -ac_cc=1 -ac_name=REGTEST -addressindex=1 -spentindex=1 -ac_supply=5555555 -ac_reward=10000000 -pubkey=$PUBKEY      end.0 blocks, reward 0.10000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
call komodo_args.(./komodod) NOTARY_PUBKEY.(0273e8525d8e146e8cb8e3035dbcb1e97a768fbac74466b816b3cafea91258bf71)
>>>>>>>>>> REGTEST: p2p.64367 rpc.64368 magic.340962df 873030367 5555555 coins
initialized REGTEST at 1533581382
finished loading blocks REGTEST
...
dukeleto@myhush02:~/git/komodo/src$ ./komodo-cli -regtest validateaddress RKTNXQvjxMX8A7n2AkRuSNYqskSCEgTzce
{
  "isvalid": true,
  "address": "RKTNXQvjxMX8A7n2AkRuSNYqskSCEgTzce",
  "scriptPubKey": "76a9146f9e2344289579b150d9275f660e467ee77e3d8788ac",
  "segid": 11,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "0273e8525d8e146e8cb8e3035dbcb1e97a768fbac74466b816b3cafea91258bf71",
  "iscompressed": true,
  "account": ""
}
```


[06-Aug-18 11:51 AM] dukeleto#7326
parses pubkey correctly, i generated it in that wallet, validates correctly


[06-Aug-18 11:52 AM] dukeleto#7326
this is on Linux, on `cctests` branch that I branched from `jl777` last night, if that matters


[06-Aug-18 11:52 AM] jl777c#5810
it might be the other cases being checked for that is giving error


[06-Aug-18 11:52 AM] dukeleto#7326
```diff --git a/src/wallet/rpcwallet.cpp b/src/wallet/rpcwallet.cpp
index 2954606..5dbd374 100644
--- a/src/wallet/rpcwallet.cpp
+++ b/src/wallet/rpcwallet.cpp
@@ -4836,7 +4836,7 @@ int32_t ensure_CCrequirements()
     if ( NOTARY_PUBKEY33[0] == 0 )
         return(-1);
     else if ( GetBoolArg("-addressindex", DEFAULT_ADDRESSINDEX) == 0 )
-        return(-1);
+        return(-2);
     else return(0);
 }

@@ -4923,11 +4923,13 @@ UniValue diceaddress(const UniValue& params, bool fHelp)
 UniValue faucetaddress(const UniValue& params, bool fHelp)
 {
     struct CCcontract_info *cp,C; std::vector<unsigned char> pubkey;
+    int errno;
     cp = CCinit(&C,EVAL_FAUCET);
     if ( fHelp || params.size() > 1 )
         throw runtime_error("faucetaddress [pubkey]\n");
-    if ( ensure_CCrequirements() < 0 )
-        throw runtime_error("to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet\n");
+    errno = ensure_CCrequirements();
+    if ( errno < 0 )
+        throw runtime_error(strprintf("to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet. ERR=%d\n", errno));
     if ( params.size() == 1 )
         pubkey = ParseHex(params[0].get_str().c_str());
     return(CCaddress(cp,(char *)"Faucet",pubkey));```


[06-Aug-18 11:52 AM] dukeleto#7326
i have this commit, which seems to tell me it's the pubkey check from the ERR=-1 output above


[06-Aug-18 11:54 AM] jl777c#5810
very strange....


[06-Aug-18 11:54 AM] jl777c#5810
not sure if anyone else is getting this error


[06-Aug-18 11:58 AM] jl777c#5810
if NOTARY_PUBKEY33 is not null, it really shouldnt give that error


[06-Aug-18 12:34 PM] dukeleto#7326
Mylo doesn't have this problem in his docker stuff, we are doing something slightly different somehow


[06-Aug-18 01:35 PM] dukeleto#7326
@SHossain i would be interested to know the definition of "colored utxo" in https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/faq.md

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/blob/master/faq.md
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[06-Aug-18 01:35 PM] dukeleto#7326
i am not sure what that means


[06-Aug-18 01:39 PM] jl777c#5810
utxo with CC vout


[06-Aug-18 01:41 PM] jl777c#5810
so like p2pk, p2pkh, p2sh there is a CC vout


[06-Aug-18 01:41 PM] jl777c#5810
once it is sent to a CC vout, then it needs to follow the specific CC contract rules to be able to be spent


[06-Aug-18 01:42 PM] dukeleto#7326
ok, thanks for clarifying


[06-Aug-18 01:42 PM] dukeleto#7326
i am still getting up to speed in terminology and all the new RPCs


[06-Aug-18 01:44 PM] dukeleto#7326
```$ ./komodo-cli -regtest faucetaddress
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk",
  "myCCaddress": "RFF4RgW1z2oJuqFLs7dH4ft25Zau53ZUD6",
  "myaddress": "RKTNXQvjxMX8A7n2AkRuSNYqskSCEgTzce"
}```


[06-Aug-18 01:44 PM] dukeleto#7326
i am not even sure what I did but I think it's working now


[06-Aug-18 01:46 PM] dukeleto#7326
so now I can play with CC RPCs and continue on python tests, woot


[06-Aug-18 01:59 PM] dukeleto#7326
making good progress right now


[06-Aug-18 02:02 PM] dukeleto#7326
```$ ./qa/pull-tester/rpc-tests.sh cryptoconditions
=== Running testscript cryptoconditions.py ===
Initializing CC test directory /tmp/test0PvJmS
call komodo_args.(/home/dukeleto/git/komodo/src/komodod) NOTARY_PUBKEY.()
initialized  at 1533589283
finished loading blocks
height.0 slowflag.1 possible.0 cmp.0
[] PASSPORT iteration waiting for KOMODO_INITDONE
Mining blocks...
READY for  RPC calls at 1533589286! done PASSPORT  refid.33
JSONRPC error: to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet. ERR=-1

  File "/home/dukeleto/git/komodo/qa/rpc-tests/test_framework/test_framework.py", line 121, in main
    self.run_test()
  File "/home/dukeleto/git/komodo/qa/rpc-tests/cryptoconditions.py", line 36, in run_test
    faucet  = rpc.faucetaddress()
  File "/home/dukeleto/git/komodo/qa/rpc-tests/test_framework/authproxy.py", line 145, in __call__
    raise JSONRPCException(response['error'])
Stopping nodes
Cleaning up
Failed
!!! FAIL: cryptoconditions.py !!!



Tests completed: 1
successes 0; failures: 1```


[06-Aug-18 02:03 PM] dukeleto#7326
this is good, the test is progressing much further. I still have to teach the test suite to use -pubkey, which probably means always importing a fixed pub/priv key testing pair like Mylo. Otherwise, you have to start daemon, getnewaddress, validateaddress, stop, restart with pubkey


[06-Aug-18 03:35 PM] Mylo#8306
morning!  i've gone to check letolabs commits before notarystats üôÄ


[06-Aug-18 03:38 PM] Mylo#8306
fyi from mm2 chatter
```
Yes, with a Docker release and a core developers can re-enter the same Docker environment that dumped the core and use the gdb to work with  the crash (gdb works well with both the C and the Rust code).
```

{Reactions}
üÜí 

[07-Aug-18 12:06 AM] jl777c#5810
NOTARY_PUBKEY.() <- that indicates -pubkey= wasnt used and is likely the problem of launching komodod via different code paths, some with -pubkey=, others without


[07-Aug-18 05:26 AM] Mylo#8306
faucetfund expects a string, not an integer or decimal/float, is this intentional?
also, from one terminal
```
curl -v --user user   --data-binary '{"jsonrpc": "1.0", "id":"curltest", "method": "faucetfund", "params": ["7"]}' -H 'content-type: text/plain' http://127.0.0.1:7771/
```
and in another terminal this popped up
```
ExtractDestination failed
ExtractDestination failed
```
^^^What does **ExtractDestination failed** mean?

The rpc returned no probs from command line and from curl though
```
{"result":{"result":"success","hex":"<THE HEX STRING GOT SNIPPED HERE"},"error":null,"id":"curltest"}
```


[07-Aug-18 05:28 AM] jl777c#5810
ExtractDestination failed is an error with the scriptPubKey


[07-Aug-18 05:32 AM] Mylo#8306
Is this a me-error or a  you-error?


[07-Aug-18 05:33 AM] Mylo#8306
user error or something that needs your investigation/more-info?


[07-Aug-18 05:34 AM] Mylo#8306
```
root@42c89ffb3431:~/.komodo# komodo-cli faucetaddress
ExtractDestination failed
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk",
  "myaddress": "RWPg8B91kfK5UtUN7z6s6TeV9cHSGtVY8D"
}
root@42c89ffb3431:~/.komodo# komodo-cli  faucetinfo
ExtractDestination failed
{
  "result": "success",
  "name": "Faucet",
  "funding": "0.00000000"
}
```
There's more info in case.


[07-Aug-18 05:48 AM] jl777c#5810
it might be a harmless printout


[07-Aug-18 05:48 AM] jl777c#5810
the faucetinfo is correct


[07-Aug-18 07:50 AM] dukeleto#7326
morning, it's time for ‚òï


[07-Aug-18 07:50 AM] dukeleto#7326
I think I dreamed of CC tests last night


[07-Aug-18 07:53 AM] dukeleto#7326
made lots of progress yesterday, I can now startup a CC AC in the test suite


[07-Aug-18 07:57 AM] dukeleto#7326
TIL is that komodod -server=1 does not mean the same thing as server=1 in the conf file, that is confusing


[07-Aug-18 07:58 AM] dukeleto#7326
@jl777c `unexpected fname.(/tmp/testZ2dPJw/node0) vs REGTEST [REGTEST] n.7 len.21 (w/node0)` how important is that warning?


[07-Aug-18 07:58 AM] dukeleto#7326
i am dealing with a weird bug, i looked at the code that prints it out, but it's hard to tell


[07-Aug-18 07:58 AM] jl777c#5810
there are timing difference between command line vs. .conf file


[07-Aug-18 07:59 AM] jl777c#5810
it looks like some command line stuff is getting confused


[07-Aug-18 07:59 AM] dukeleto#7326
yeah, you could say that üòÉ


[07-Aug-18 07:59 AM] dukeleto#7326
`/home/dukeleto/git/komodo/src/komodod -datadir=/tmp/testZ2dPJw/node0 -keypool=1 -discover=0 -rest -regtest -daemon -rpcport=64368 -conf=/tmp/testZ2dPJw/node0/REGTEST.conf -ac_name=REGTEST -addressindex=1 -spentindex=1 -ac_supply=5555555 -ac_reward=10000000 -pubkey=02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf -ac_cc=1`


[07-Aug-18 08:00 AM] dukeleto#7326
that is how the test suite starts an AC for testing


[07-Aug-18 08:00 AM] dukeleto#7326
Komodo doesn't like the custom datadir that doesn't match the AC name


[07-Aug-18 08:01 AM] dukeleto#7326
```$ PYTHON_DEBUG=1 ./qa/pull-tester/rpc-tests.sh cryptoconditions --tracerpc
=== Running testscript cryptoconditions.py ===
Initializing CC test directory /tmp/testXW56pt
Writing to /tmp/testXW56pt/node0/komodo.conf
RPC port=12342
Setting up network...
start_node: komodod started, calling : /home/dukeleto/git/komodo/qa/pull-tester/run-bitcoin-cli-datadir=/tmp/testXW56pt/node0 -rpcwait getblockcount
end.0 blocks, reward 0.10000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
unexpected fname.(/tmp/testXW56pt/node0) vs REGTEST [REGTEST] n.7 len.21 (t/node0)
Created (/tmp/testXW56pt/node0/REGTEST.conf)
call komodo_args.(/home/dukeleto/git/komodo/src/komodod) NOTARY_PUBKEY.(02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf)
>>>>>>>>>> REGTEST: p2p.64367 rpc.64368 magic.340962df 873030367 5555555 coins
initialized REGTEST at 1533654045
Komodo REGTEST server starting
finished loading blocks REGTEST
height.0 slowflag.1 possible.0 cmp.0```


[07-Aug-18 08:01 AM] jl777c#5810
true, datadir and .conf needs to be aligned


[07-Aug-18 08:01 AM] dukeleto#7326
my current bug is that the server doesn't exit or go into the background, and the test suite hangs


[07-Aug-18 08:02 AM] dukeleto#7326
when it starts it up, the test komodod doesn't exit like it should (I have server=1 in the conf and -daemon on the CLI), so it hangs the test suite


[07-Aug-18 08:04 AM] jl777c#5810
you cant just put it in the background with &


[07-Aug-18 08:05 AM] dukeleto#7326
this is from the Python test suite


[07-Aug-18 08:06 AM] dukeleto#7326
i thought server=1 or -daemon would make it go into the background and allow the python function to return instead of waiting forever for an exit code


[07-Aug-18 08:07 AM] dukeleto#7326
```qa/rpc-tests/test_framework/util.py-            cmd_args = cmd + " -datadir="+datadir + " -rpcwait getblockcount"
qa/rpc-tests/test_framework/util.py-            if os.getenv("PYTHON_DEBUG", ""):
qa/rpc-tests/test_framework/util.py-                print "initialize_chain: komodod started, calling: " + cmd_args
qa/rpc-tests/test_framework/util.py:            subprocess.check_call([ cmd, "-datadir="+datadir,
qa/rpc-tests/test_framework/util.py-                                    "-rpcwait", "getblockcount"]) #, stdout=devnull)```


[07-Aug-18 08:07 AM] dukeleto#7326
that is the line that uses `subprocess.check_call` to execute komodod


[07-Aug-18 08:07 AM] jl777c#5810
did you try just &


[07-Aug-18 08:07 AM] dukeleto#7326
which waits for an exit code


[07-Aug-18 08:07 AM] dukeleto#7326
hey, why not, I will try that now


[07-Aug-18 08:14 AM] dukeleto#7326
this was working before I added various CC params. And when I use the exact same command manually it goes into the background correctly


[07-Aug-18 08:17 AM] dukeleto#7326
i am modifying things to try &, i have to change how it calls check_call


[07-Aug-18 08:25 AM] dukeleto#7326
i think i have discovered the issue


[07-Aug-18 08:25 AM] dukeleto#7326
the server is not hanging like I thought, it's the first RPC command


[07-Aug-18 08:25 AM] dukeleto#7326
`/home/dukeleto/git/komodo/qa/pull-tester/run-bitcoin-cli -datadir=/tmp/test6wK5dA/node0 -rpcwait getblockcount`


[07-Aug-18 08:25 AM] dukeleto#7326
the `-rpcwait` makes it wait forever I think


[07-Aug-18 08:25 AM] dukeleto#7326
and because I don't have -conf it might be getting confused. Feels like I am close to getting this working


[07-Aug-18 08:27 AM] dukeleto#7326
```$ /home/dukeleto/git/komodo/qa/pull-tester/run-bitcoin-cli -datadir=/tmp/test6wK5dA/node0 -conf=/tmp/testPTy9n8/node0/komodo.conf -rpcport=64368 -rpcwait getblockcount
0```


[07-Aug-18 08:27 AM] dukeleto#7326
that works. there was an issue with what rpc port it thought it should use


[07-Aug-18 08:28 AM] dukeleto#7326
at least I know what `-rpcwait` is now, I had not used that before


[07-Aug-18 08:29 AM] dukeleto#7326
i think i will have our first CC tests running in an automated test suite soon, and I will enjoy hooking them up to Travis


[07-Aug-18 08:44 AM] Alright#0419
@jl777c did you read what I said a couple hundred messages ago about `rewardscreatefunding` needing a minimum amount to prevent someone from spamming `rewardslist`


[07-Aug-18 08:45 AM] jl777c#5810
i missed that


[07-Aug-18 08:45 AM] Alright#0419
`./komodo-cli -ac_name=AT1 rewardscreatefunding spam 0 0 0 0 0` for example is valid


[07-Aug-18 08:45 AM] jl777c#5810
will fix


[07-Aug-18 08:47 AM] dukeleto#7326
and that makes a great test, too


[07-Aug-18 08:47 AM] jl777c#5810
pushed fix


[07-Aug-18 08:48 AM] dukeleto#7326
i just started a document of CC tests to write and added that the above should generate an error


[07-Aug-18 09:18 AM] Mylo#8306
`-server` i thought was for json/rpc server, not to go into bg which is `-daemon`.  However the rpc loop - yes i see that when the defaults are applied (e.g. not listed in .conf) and it takes the first `komodo-cli` command for the loop to stop "PASSPORT []....." repeated on cli.  I was lazily trying to allow rpc calls remotely to test my code from home without needing to commit/pull on experimental stuff.


[07-Aug-18 09:41 AM] Alright#0419
does the txid for `rewardsunlock` not matter at all? 
```
./komodo-cli -ac_name=AT1 rewardsunlock over10k fa2501e6d7ae5de7a4c21f237457654af51e979a6b2e34c9f582dc7eac79a49e e4blahblahblahblahb3b74cf0981d71ede17e9a65ad414f813d3eb8b39539229b7351fw2332d32d32garbagegewfewfwefweiepakdoekf
{
  "result": "success",
  "hex": "010000000203604e123d365d38b1eaf920c7a6f783806991a2cbde6728481a881c98824ed7000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140f9abf11f495d110ad728309a3feef365efc59ba53594b2e50e2afba5ffcda1871a8c331346a6ced3f052a258a53b48abae1eb2c574c7ccabd946095414a480dea100af038001e5a10001ffffffff605fe869a6db6ef44b35dc14029e039bffe549919e5d8daecdb3b19dcfd4633e000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981404cf46f88166c1ea415644104731293d927b44bb1bf20ecd1e8007115c304704b686a7b33a25328da18b46d4c118ce1cc5be00dad5721c8e76a01ea7a802ae512a100af038001e5a10001ffffffff030c385a4817000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc76161a5402000000232103ba0a42e46075c475444339605031c846b25f614dbeef2b656abcf67f0592e328ac00000000000000002c6a2ae5556f76657231306b009ea479ac7edc82f5c9342e6b9a971ef54a655774231fc2a4e75daed7e60125fa00000000"
}
```
Broadcasted this just fine, and it confirmed
http://cctest.explorer.dexstats.info/tx/cc58ab8277f7ba4b190752bb40dce570f8b507d2bdfa8f29d974cb0e1a6fb913


[07-Aug-18 09:41 AM] Alright#0419
notice the `blahblahblah` and `garbage` in the second txid


[07-Aug-18 09:41 AM] Alright#0419
It did unlock a previous `rewardslock`


[07-Aug-18 09:43 AM] Alright#0419
`./komodo-cli -ac_name=AT1 rewardsunlock over10k fa2501e6d7ae5de7a4c21f237457654af51e979a6b2e34c9f582dc7eac79a49e completelygarbagedata` worked fine too


[07-Aug-18 09:53 AM] Alright#0419
seems I just unlocked 1 node's `rewardslock` from another node


[07-Aug-18 09:54 AM] Alright#0419
@SHossain @siu do either of you have a `rewardslock` currently? I want to try to unlock it


[07-Aug-18 09:54 AM] jl777c#5810
if the locktxid is null then it picks the first one


[07-Aug-18 09:55 AM] jl777c#5810
anybody should be able to unlock any locked txid


[07-Aug-18 09:55 AM] jl777c#5810
completelygarbage probably just parsed to null txid


[07-Aug-18 09:56 AM] jl777c#5810
if you send in a valid txid that isnt a locked txid it should make an error


[07-Aug-18 09:56 AM] Alright#0419
A little bit confused why anyone can unlock any locked txid


[07-Aug-18 10:02 AM] SHossain#0007
i don't have any locked funds on this chain yet


[07-Aug-18 10:05 AM] Alright#0419
by spamming `./komodo-cli -ac_name=AT1 rewardsunlock FREE 1538ed0463d881660a76a47b3a46ea5d93dafb90fc7340a1c5162e4fe04fa009 $garbage` It seems I'm unlocking txs from other rewards plans


[07-Aug-18 10:13 AM] jl777c#5810
the idea is to allow rewards plans via SPV


[07-Aug-18 10:13 AM] jl777c#5810
that allows a "server" node to unlock all the rewards


[07-Aug-18 10:14 AM] jl777c#5810
this is explained in comments at the top of rewards.cpp


[07-Aug-18 10:15 AM] jl777c#5810
since the unlock address is constrained to being the address specified by whoever locked it, it doesnt seem to matter much that anybody can unlock any matured locked reward


[07-Aug-18 10:19 AM] Alright#0419
`minseconds 86400 maxseconds 172800
duration 159812 (1533662263 - 1533502451) numblocks 2638 (7995 - 5357)
amount 100.00000000 10000000000.00000000 317 -> duration.159812 reward 0.00506760` This reward is off I think


[07-Aug-18 10:19 AM] siu#3920
i dont have locked funds either


[07-Aug-18 10:20 AM] Alright#0419
Plan had 10000% APR


[07-Aug-18 10:20 AM] Alright#0419
locked 100 for a little more than a day


[07-Aug-18 10:20 AM] siu#3920
the last ones i had printed that i had already spent the funds


[07-Aug-18 10:20 AM] siu#3920
so i guess they unlocked automatically somehow


[07-Aug-18 10:20 AM] Alright#0419
```
{
  "result": "success",
  "fundingtxid": "fa2501e6d7ae5de7a4c21f237457654af51e979a6b2e34c9f582dc7eac79a49e",
  "name": "over10k",
  "sbits": 30170811438823023,
  "APR": "10000.00000000",
  "minseconds": 86400,
  "maxseconds": 172800,
  "mindeposit": "1.00000000",
  "funding": "4036699.93415940"
}
```


[07-Aug-18 10:22 AM] Alright#0419
and `rewardunlock` can unlock other plan's `rewardlock`s. I just created a brand new plan and did `rewardunlock` on it and it released txs from a different plan. 
`./komodo-cli -ac_name=AT1 rewardsunlock 1all 677c8d8e02fb20a0fbd4cc23ab6282f5c56f03bb4f72736391eaeedd22181615 garbage`


[07-Aug-18 10:22 AM] Alright#0419
That^ released a tx on that over10k plan


[07-Aug-18 10:24 AM] jl777c#5810
yes rewards can be unlocked by anybody, so it seems no point to restrict it to plans


[07-Aug-18 10:24 AM] jl777c#5810
10000% APR likely overflowed, probably I will need to add a cap to rewards percentage


[07-Aug-18 10:24 AM] jl777c#5810
not sure where the APR overflow starts


[07-Aug-18 10:30 AM] Alright#0419
Not sure if this matters all that much, but you can create 2 or more plans with the same name if you create them in the same block. 
```
./komodo-cli -ac_name=AT1 rewardsinfo cfc823f1b89f8947918f6454105e2a65d7a71722ac37eba3e5ffd80b8230cfc0
{
  "result": "success",
  "fundingtxid": "cfc823f1b89f8947918f6454105e2a65d7a71722ac37eba3e5ffd80b8230cfc0",
  "name": "double",
  "sbits": 111516182736740,
  "APR": "10000.00000000",
  "minseconds": 86400,
  "maxseconds": 172800,
  "mindeposit": "1.00000000",
  "funding": "100.00000000"
}
~/komodo/src$ ./komodo-cli -ac_name=AT1 rewardsinfo 9d5250b295390e548e57af842c2f19d6e384b9a4d930a8a612eab5d265877481
{
  "result": "success",
  "fundingtxid": "9d5250b295390e548e57af842c2f19d6e384b9a4d930a8a612eab5d265877481",
  "name": "double",
  "sbits": 111516182736740,
  "APR": "10000.00000000",
  "minseconds": 86400,
  "maxseconds": 172800,
  "mindeposit": "1.00000000",
  "funding": "100.00000000"
}
```


[07-Aug-18 10:31 AM] Alright#0419
Need to test if that actually causes problems still


[07-Aug-18 10:35 AM] jl777c#5810
that is a good bug!


[07-Aug-18 11:39 AM] Yassin#3685
@Alright sent me your adress kmd, i will sent to you 777 Kmd!! :yassinkomodo:

{Reactions}
üòç Komodo (2) 

[07-Aug-18 11:47 AM] dukeleto#7326
still have some bugs to squash in how regtest ACs are managed in the test suite, but i finally got CC tests running: ```DEBUG:BitcoinRPC:-7-> validateaddress ["RWPg8B91kfK5UtUN7z6s6TeV9cHSGtVY8D"]
DEBUG:BitcoinRPC:<-7- {"account": "", "ismine": true, "isvalid": true, "iscompressed": true, "segid": 32, "iswatchonly": false, "address": "RWPg8B91kfK5UtUN7z6s6TeV9cHSGtVY8D", "pubkey": "02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf", "isscript": false, "scriptPubKey": "76a914e7948c7995f4347f31eb55c8ea77e8f6e97b372c88ac"}
DEBUG:BitcoinRPC:-8-> faucetaddress []
DEBUG:BitcoinRPC:<-8- {"FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC", "myCCaddress": "RCuoYrXABKT6SoReQHCkoBxxgb2aqEs86z", "result": "success", "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk", "myaddress": "RWPg8B91kfK5UtUN7z6s6TeV9cHSGtVY8D"}
Stopping nodes
DEBUG:BitcoinRPC:-9-> stop []
DEBUG:BitcoinRPC:<-9- "REGTEST Komodo server stopping"
Cleaning up
Tests successful
--- Success: cryptoconditions.py ---



Tests completed: 1
successes 1; failures: 0```


[07-Aug-18 11:49 AM] dukeleto#7326
the test suite wants to create it's own foo.conf for the test komodod, but with an AC we want to use the auto-generated one, which has the correct rpc user/pass/etc


[07-Aug-18 11:49 AM] dukeleto#7326
this caused some issues, because the name of an AC determines it's port by default (REGTEST always gets 64368), but the inherited code wanted to use a randomized port and also had different rpc user/pass


[07-Aug-18 11:59 AM] dukeleto#7326
here is a gist of the full output (i have lots of debug stuff printing currently): https://gist.github.com/leto/128eda4ad56f0eed7b1c29a6905516d9

{Embed}
https://gist.github.com/leto/128eda4ad56f0eed7b1c29a6905516d9
CC Tests running!!!
CC Tests running!!!
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[07-Aug-18 12:52 PM] dukeleto#7326
```        # Begin actual CC tests

        # Faucet tests
        faucet  = rpc.faucetaddress()
        assert_equal(faucet['result'], 'success')
        # verify all keys look like valid AC addrs, could be better
        for x in ['myCCaddress', 'FaucetCCaddress', 'Faucetmarker', 'myaddress']:
            assert_equal(faucet[x][0], 'R')

        # Dice tests
        dice  = rpc.diceaddress()
        assert_equal(dice['result'], 'success')
        for x in ['myCCaddress', 'DiceCCaddress', 'Dicemarker', 'myaddress']:
            assert_equal(dice[x][0], 'R')
```


[07-Aug-18 12:53 PM] dukeleto#7326
look how easy it is to write CC tests in python, once all the setup junk is done


[07-Aug-18 12:53 PM] dukeleto#7326
those are our first tests for faucet and dice


[07-Aug-18 12:57 PM] dukeleto#7326
those are from https://github.com/letolabs/komodo/blob/cctests/qa/rpc-tests/cryptoconditions.py

{Embed}
https://github.com/letolabs/komodo/blob/cctests/qa/rpc-tests/cryptoconditions.py
letolabs/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/STidbfwli6qkMkU8vATD46L8ib5zmeVb7WDB5OpJ4KU/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/648647


[07-Aug-18 01:13 PM] Alright#0419
@jl777c can you explain what this means please for `rewardsunlock` 
`vin.1+: funding CC vout.0 from 'F' and 'A' and 'U'`


[07-Aug-18 01:14 PM] jl777c#5810
vins1, 2, 3, .... (however many) are all 'F' 'A' or 'U' outputs


[07-Aug-18 01:15 PM] jl777c#5810
all the vout.0 from the 'F' 'A' 'U' are the CC outputs


[07-Aug-18 01:15 PM] Alright#0419
I'm looking at a `rewardsunlock` tx, and the vin1 seems to be from a different rewards plan. Is that expected?


[07-Aug-18 01:15 PM] jl777c#5810
that would be a bug


[07-Aug-18 01:16 PM] jl777c#5810
is this where 2 plans confirmed the same block?


[07-Aug-18 01:16 PM] Alright#0419
Not the `double` plan, no


[07-Aug-18 01:16 PM] jl777c#5810
oh, then it is a more serious bug


[07-Aug-18 01:17 PM] Alright#0419

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/476483953801297943/rewardsunlockraw


[07-Aug-18 01:17 PM] Alright#0419
unlocked this `./komodo-cli -ac_name=AT1 rewardsunlock FREE 1538ed0463d881660a76a47b3a46ea5d93dafb90fc7340a1c5162e4fe04fa009 830c1c7ff784988e71633700871746719016d5e1f34ba0aac74d4bf58415e06d`


[07-Aug-18 01:17 PM] Alright#0419
The vin1 of it seems to be from my `over10k` plan


[07-Aug-18 01:18 PM] jl777c#5810
seems to be? you can know for sure by looking at opreturn from the vin


[07-Aug-18 01:18 PM] Alright#0419
one moment


[07-Aug-18 01:19 PM] jl777c#5810
it would have 'over10k' in the opreturn data


[07-Aug-18 01:20 PM] Alright#0419
Ah, forget what I said. It has FREE in it. Good to know how to check for that now


[07-Aug-18 01:20 PM] Alright#0419
Didn't think i had funded this plan from the node I was seeing the address for


[07-Aug-18 01:21 PM] jl777c#5810
the fundingtxid should also be in it


[07-Aug-18 01:21 PM] Alright#0419
so I assumed it was from a different plan


[07-Aug-18 01:21 PM] jl777c#5810
for unlock, any valid CC vout can be spent


[07-Aug-18 01:21 PM] jl777c#5810
there are the CC vouts to the rewardsCCaddress


[07-Aug-18 01:22 PM] jl777c#5810
which pays for the rewards


[07-Aug-18 01:22 PM] jl777c#5810
the principal comes back from original locked deposit


[07-Aug-18 01:25 PM] Alright#0419
Did you see what I said about the faucet contract btw? A miner can censor faucetget txs other than their own, so the faucet essentially becomes a second coinbase at that point


[07-Aug-18 01:25 PM] Alright#0419
if you mine the block, you are guaranteed to get the faucet that block


[07-Aug-18 01:28 PM] jl777c#5810
evil miners are not good for faucets


[07-Aug-18 01:50 PM] dukeleto#7326
just realized the test plan gdoc has 4 tabs, mindblown.gif


[07-Aug-18 01:51 PM] dukeleto#7326
this is exactly what I need to write automated python tests


[07-Aug-18 01:51 PM] dukeleto#7326
and is a pretty nice way to learn about CC via the RPC interface


[07-Aug-18 02:03 PM] dukeleto#7326
Pinned a message.


[07-Aug-18 02:06 PM] dukeleto#7326
@jl777c i found a coredump üòÉ


[07-Aug-18 02:06 PM] dukeleto#7326
@jl777c calling `faucetget` without ever funding it seems to dump core


[07-Aug-18 02:11 PM] Alright#0419
```
./komodo-cli -ac_name=AT1 rewardsunlock FREE 1538ed0463d881660a76a47b3a46ea5d93dafb90fc7340a1c5162e4fe04fa009
{
  "result": "success",
  "hex": "0100000002192f6c233219fc5434bb0ae7ab8ce63913af61ccb0d4f0f565d42ec50857063c000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140f2b06dce7d97bf0020868a96c81da3d60d58d0adb2bd0615b5b48fd2ad33e45a33bf8fe27913fbdf02b49aa9ded7a52677653134006a18806467fbba701b24e0a100af038001e5a10001ffffffff7a8095e4d1a60458524ae02f6d2adc789f479ffabd669308d5b56afda1371656000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9814036f3913d0636d97aad80f75e31a9db5892bb7a5e469795988ef70f585060e3b626ab6e6c3e601329b6b4231c77fc0869d746b9fa2573103f489025aa3ddcfcada100af038001e5a10001ffffffff036be84c4817000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc85bc355402000000232103ba0a42e46075c475444339605031c846b25f614dbeef2b656abcf67f0592e328ac00000000000000002c6a2ae555465245450000000009a04fe04f2e16c5a14073fc90fbda935dea463a7ba4760a6681d86304ed381500000000"
}
```
This tx's OP_RETURN has `FREE` in it. It's vin0's OP_RETURN has `over10k` in it. It's vin1's OP_RETURN has `0APR` in it. 3 separate plans ü§î 

http://cctest.explorer.dexstats.info/tx/df16d7b7abc9ee7fd8e96af2cf187576e7bd912a5ac8873c7475472806951df1


[07-Aug-18 02:17 PM] Alright#0419
Problem (I think) is that it's unlocking `over10k` `rewardslock` txs when I do `rewardunlock FREE`


[07-Aug-18 02:17 PM] Alright#0419
not sure how the `0APR` plan came into the equation. I had just created it


[07-Aug-18 02:20 PM] dukeleto#7326
```$ ./komodo-cli -ac_name=AT1 faucetfund 1
error code: -1
error message:
basic_string::_M_construct null not valid```


[07-Aug-18 02:20 PM] dukeleto#7326
what is that about?


[07-Aug-18 02:22 PM] Alright#0419
Strange, just ran that same command and it worked


[07-Aug-18 02:22 PM] Alright#0419
anything in the stdout?


[07-Aug-18 02:22 PM] Alright#0419
do you have the privkey for the pubkey set?


[07-Aug-18 02:23 PM] Alright#0419
oh, do you have coins?


[07-Aug-18 02:29 PM] dukeleto#7326
nope


[07-Aug-18 02:29 PM] dukeleto#7326
i am finding bugs üòÉ


[07-Aug-18 02:30 PM] dukeleto#7326
should the RPC return JSON that explains the error, or throw an exception?


[07-Aug-18 02:32 PM] dukeleto#7326
@jl777c when I give `tokenaddress` a pubkey it gives me an additional key `CCaddress` back, when no pubkey given, it's not there. Is this expected?


[07-Aug-18 02:43 PM] Alright#0419
Guessing it's this ` assetsaddress <pubkey> // all assets end up in a special address for each pubkey`


[07-Aug-18 02:43 PM] Alright#0419
the special address


[07-Aug-18 05:07 PM] Mylo#8306
which gdoc @dukeleto ?


[07-Aug-18 09:22 PM] dukeleto#7326
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=0

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p

{Reactions}
üëç 

[07-Aug-18 09:54 PM] dukeleto#7326
should I mine AT1 coins for testing?


[07-Aug-18 09:55 PM] dukeleto#7326
i can mine some regtest coins but it's also nice to test things on our current live chain


[07-Aug-18 09:58 PM] CHMEX#0686
You can get one per block from the faucet or just your address and I send you a few in 20 mins


[07-Aug-18 10:01 PM] dukeleto#7326
@CHMEX thanks, now it makes sense ` ./komodo-cli -ac_name=AT1 faucetget` gave me some funds


[07-Aug-18 10:02 PM] dukeleto#7326
i have noticed that fauceget coredumps if the faucet has no funding (which I tried on regtest)


[07-Aug-18 10:03 PM] CHMEX#0686
Might be a good testcase


[07-Aug-18 10:04 PM] dukeleto#7326
same for `faucetfund` when there are no funds


[07-Aug-18 10:05 PM] dukeleto#7326
https://github.com/letolabs/komodo/blob/cctests/qa/rpc-tests/cryptoconditions.py#L75 shows the current CC tests i am working on

{Embed}
https://github.com/letolabs/komodo/blob/cctests/qa/rpc-tests/cryptoconditions.py
letolabs/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/STidbfwli6qkMkU8vATD46L8ib5zmeVb7WDB5OpJ4KU/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/648647


[07-Aug-18 10:05 PM] dukeleto#7326
which will get hooked up to Travis CI soon


[07-Aug-18 10:26 PM] dukeleto#7326
`tokencreate` seems to fail hard if there are no funds, as well


[08-Aug-18 01:14 AM] jl777c#5810
I had problems returning error messages, so it usually just returns null if something didnt work and prints to console the details


[08-Aug-18 01:14 AM] jl777c#5810
faucetget without any funding isnt crashing for me


[08-Aug-18 01:15 AM] jl777c#5810
<CC>address <pubkey> returns that pubkey's CC address in addition to the contract's CC address


[08-Aug-18 01:15 AM] jl777c#5810
all contracts have a general CC address for that contract where you can send funds into


[08-Aug-18 01:16 AM] jl777c#5810
also, it is possible for any pubkey to have a CC address, this allows to have 2 forms of locked funds, one in the general fund spendable (under the right conditions) by anybody and a more restrictive one that can only be spent by pubkey's owner AND under the right conditions


[08-Aug-18 01:18 AM] jl777c#5810
@Alright I had a missing check against the sbits/txid for finding CC vins. fixing


[08-Aug-18 01:27 AM] jl777c#5810
pushed fix. this should reject the onchain unlocks that violate the rule about needing to be from the same plan. that is the first test. then it needs to make sure it wasnt made too strict. it is a hardforking change so AT1 wont sync due to the rejection of the violating unlocks


[08-Aug-18 01:28 AM] jl777c#5810
@dukeleto I think you need to handle the case of a null being returned. I think it is the test framework that is crashing due to unhandled null pointer coming back


[08-Aug-18 01:33 AM] jl777c#5810
then again it could be a crash due to not having any coins at all, so you cant pay for the txfee


[08-Aug-18 01:45 AM] jl777c#5810
can someone make sure CC rpc doesnt coredump the komodod for a pubkey without any funds at all


[08-Aug-18 07:06 AM] Alright#0419
AT1 doesn't sync from scratch any more


[08-Aug-18 07:06 AM] Alright#0419
Ready for AT2 everyone? üòõ


[08-Aug-18 07:15 AM] Alright#0419
it syncs up until block ~7800. Should we try to keep it?


[08-Aug-18 07:15 AM] Alright#0419
Feeling like we shouldn't because it might give us problems down the line


[08-Aug-18 07:20 AM] Alright#0419
`Error: Unable to start HTTP server. See debug log for details.`
```
2018-08-08 14:17:43 scheduler thread start
2018-08-08 14:17:43 Loaded verifying key in 0.007389s seconds.
2018-08-08 14:17:43 Binding RPC on address :: port 40950 failed.
2018-08-08 14:17:43 Binding RPC on address 0.0.0.0 port 40950 failed.
2018-08-08 14:17:43 Unable to bind any endpoint for RPC server
2018-08-08 14:17:43 Error: Unable to start HTTP server. See debug log for details.
2018-08-08 14:17:43 scheduler thread interrupt
2018-08-08 14:17:43 Shutdown: In progress...
2018-08-08 14:17:43 StopRPC: waiting for async rpc workers to stop
2018-08-08 14:17:43 StopNode()
2018-08-08 14:17:43 Shutdown: done
```
Getting this while trying to create the new chain. Never saw this before ü§î


[08-Aug-18 07:20 AM] Alright#0419
nothing using that port


[08-Aug-18 07:21 AM] Alright#0419
when I try to start the node without `-gen -genproclimit=4`
```
Error: Unable to start HTTP server. See debug log for details.
komodod: scheduler.cpp:19: CScheduler::~CScheduler(): Assertion `nThreadsServicingQueue == 0' failed.
Aborted (core dumped)
```


[08-Aug-18 07:22 AM] Alright#0419
ok so it core dumps if I already have an AT2 directory from a previous attempt


[08-Aug-18 07:22 AM] Alright#0419
```
Error: Unable to start HTTP server. See debug log for details.
komodod: /home/modo1/komodo/depends/x86_64-unknown-linux-gnu/share/../include/boost/thread/pthread/mutex.hpp:111: boost::mutex::~mutex(): Assertion `!res' failed.
Aborted (core dumped)
```


[08-Aug-18 07:27 AM] Alright#0419
Ah, so I had a zombie process for the same chain running


[08-Aug-18 07:27 AM] Alright#0419
So there *was* something on that port


[08-Aug-18 07:28 AM] Alright#0419
`./komodod -ac_cc=1 -ac_name=AT2 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKKEY> -addnode=195.201.20.230 -addnode=195.201.137.5`


[08-Aug-18 07:29 AM] Alright#0419
Pinned a message.


[08-Aug-18 07:32 AM] Alright#0419
So we keep AT1 or go to AT2? CHMEX's explorer just resynced to the proper AT1 chain after updating, but I'm afraid reorging 1000+ blocks will cause a lot of problems


[08-Aug-18 07:48 AM] dukeleto#7326
@Alright `Unable to start HTTP server` pretty much always means you already have something running on that port


[08-Aug-18 07:49 AM] dukeleto#7326
i run into it a lot when the test suite crashes, sometimes it leaves zombies


[08-Aug-18 09:20 AM] dukeleto#7326
@jl777c would you be ok with me adding some error checking to CC RPC's such that they return something like `{ result: "error", message: "You must fund the faucet before retrieving funds from it"}`


[08-Aug-18 09:21 AM] dukeleto#7326
i can test for the current behavior, but I think from the perspective of app developers using RPC's, it's much friendlier to always be able to check the "result" key and look at "message" if result != "success"


[08-Aug-18 09:25 AM] dukeleto#7326
i am not sure yet if the same bug occurs when a funded faucet goes to 0 funding


[08-Aug-18 10:32 AM] jl777c#5810
yes, please! if you can add error messages I would be most grateful

{Reactions}
üåà 

[08-Aug-18 10:33 AM] jl777c#5810
@Alright did you read what i wrote about fixing the rewards CC, that would make it not sync to the existing chain?


[08-Aug-18 10:33 AM] jl777c#5810
this is expected if the new code is working


[08-Aug-18 10:27 PM] Alright#0419
Can't get `rewardslock` to work at all now


[08-Aug-18 10:27 PM] Alright#0419
```
./komodo-cli -ac_name=AT2 rewardsinfo ccb6af5e5b6bec1611d5e185386c6c6ec6b78b17b611f13e5ad827aa51218521
{
  "result": "success",
  "fundingtxid": "ccb6af5e5b6bec1611d5e185386c6c6ec6b78b17b611f13e5ad827aa51218521",
  "name": "Alright2",
  "sbits": 3635645592554859585,
  "APR": "5.00000000",
  "minseconds": 86400,
  "maxseconds": 432000,
  "mindeposit": "1.00000000",
  "funding": "1000000.00000000"
}
```


[08-Aug-18 10:27 PM] Alright#0419
```
./komodo-cli -ac_name=AT2 rewardslock Alright2 ccb6af5e5b6bec1611d5e185386c6c6ec6b78b17b611f13e5ad827aa51218521 1
error code: -1
error message:
basic_string::_M_construct null not valid
```


[08-Aug-18 10:28 PM] Alright#0419
```
error finding unspent i.1 of 0, 1.00020000 vs 1.00020000
cant find enough inputs 1000000.00000000 note enough for 1.00000000
cant find rewards inputs
```


[08-Aug-18 10:35 PM] Alright#0419
Thought it may have been because I had a single 1M coin UTXO in my wallet, but I split it up and it persists


[08-Aug-18 10:37 PM] Alright#0419
Was able to do it from the node that created the plan ü§î will check this out tomorrow


[08-Aug-18 10:39 PM] Alright#0419
seems this node can't create any cc txs :L


[08-Aug-18 10:39 PM] Alright#0419
pubkey address is imported and funded


[08-Aug-18 10:41 PM] Alright#0419
The only difference between the two nodes was the one failing to create the txs had not yet mined a block on the chain. I made it mine a block, and now it's able to create the txs


[08-Aug-18 10:54 PM] Alright#0419
so after mining a block I had 3 `rewardslock` txs seem to work fine(still need to look at vins/vouts). On the fourth attempt I got this 
```
./komodo-cli -ac_name=AT2 rewardslock Alright2 ccb6af5e5b6bec1611d5e185386c6c6ec6b78b17b611f13e5ad827aa51218521 100| jq -r '.hex'
0100000003e696f6655a6bfb8d363d4ac49c20e84b562b47fba3aaea2193c10917c5ac99f4010000006a47304402207c8917740b7c6389e6bfdab7f12fc7dc452535c75b0ef1bc18bf3b0277d2460802202c6f9f2b0251d4ef55094107b7efe76be628870c104a2744db5d21fa810f444e01210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ffffffff00000000000000000000000000000000000000000000000000000000000000000000000000ffffffffd4c70d896e22207e28802f20da2535da8c1b6875c453e9dbe439e9a420dc9adb000000004847304402207235e01bfd4c5ca6e4cb2f59ff54552351c7d558f243c7c24019d5e0da43c2dc0220206649ef86714942ecec7f186b95d822ef05874f992f7656449cf970bb81c01a01ffffffff0400e40b5402000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc102700000000000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ace051724e1809000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac00000000000000002c6a2ae54c416c72696768743221852151aa27d85a3ef111b6178bb7c66e6c6c3885e1d51116ec6b5b5eafb6cc00000000
```


[08-Aug-18 10:54 PM] Alright#0419
it has a completely blank input


[08-Aug-18 10:54 PM] Deleted User#0000
free money?


[08-Aug-18 10:54 PM] Alright#0419
```
FinalizeCCTx couldnt find 0000000000000000000000000000000000000000000000000000000000000000
```
in stdout


[08-Aug-18 10:55 PM] Alright#0419
```
error code: -25
error message:
Missing inputs
```


[08-Aug-18 10:55 PM] Alright#0419
free money?


[08-Aug-18 10:55 PM] Alright#0419
No, it doesn't send at all


[08-Aug-18 10:55 PM] Deleted User#0000
Outs without ins?


[08-Aug-18 10:55 PM] Deleted User#0000
ahh lol ok


[08-Aug-18 10:59 PM] dukeleto#7326
@Alright i am finding out that many cc RPCs fail hard if there are no mature funds in the wallet. I am testing out some changes now to return a useful json error message

{Reactions}
üëå 

[08-Aug-18 11:02 PM] dukeleto#7326
it feels like mining on regtest is too slow. I must mine 101 blocks to get a mature balance, and that takes about 1.5 minutes


[08-Aug-18 11:03 PM] dukeleto#7326
```02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- origpubkey
fcb1251a331bc3f030373474e0cce4539d2b5905228d75437115c7799e56f204 hash vs 0f0f0a0000000000000000000000000000000000000000000000000000000000 ht.99 special.0 special2.0 flag.0 notaryid.-1 mod.29 error
02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- pubkey
02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- origpubkey
unexpected fname.(/tmp/testzhffx5/node0) vs REGTEST [REGTEST] n.7 len.21 (5/node0)
ab9a39cc4a432ab3f20ab20940c0e09948b1f60939cf8b7a8dc04581f956a695 hash vs 0f0f0a0000000000000000000000000000000000000000000000000000000000 ht.100 special.0 special2.0 flag.0 notaryid.-1 mod.30 error
02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- pubkey
02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- origpubkey```


[08-Aug-18 11:04 PM] dukeleto#7326
@jl777c i get these errors thousands of times, many times for every block in the CC tests, can you explain what is going on?


[08-Aug-18 11:10 PM] dukeleto#7326
as for good news, i can mine regtest blocks of a CC-enable AC that is created in our test suite


[08-Aug-18 11:11 PM] dukeleto#7326
i have mature coins, but `faucetfund` still refuses to work for me


[09-Aug-18 12:04 AM] Mylo#8306
are you using a non-notary pubkey?  seems like it tries to look it up in notary array but returns -1 index (just a guess?)


[09-Aug-18 12:27 AM] dukeleto#7326
yes, i am using a non-notary pubkey


[09-Aug-18 01:25 AM] jl777c#5810
the blockhash fails the diff test


[09-Aug-18 01:26 AM] jl777c#5810
ie, ab9... is bigger than 0f0f....


[09-Aug-18 01:27 AM] jl777c#5810
maybe I need to add an exemptions for blockhash on regtest mode?


[09-Aug-18 04:05 AM] jl777c#5810
@dukeleto latest jl777 branch ignores target difficulty in regtest mode


[09-Aug-18 04:11 AM] jl777c#5810
can someone plz make sure rewards CC still works? I did make a change to utxo selection, so it is possible all of the CC are broken


[09-Aug-18 04:38 AM] jl777c#5810
also does it really crash if there are no funds at all?


[09-Aug-18 05:15 AM] siu#3920
hi!


[09-Aug-18 05:15 AM] siu#3920
how can i test the new stuff @dukeleto is making?


[09-Aug-18 05:30 AM] jl777c#5810
there is no need for you to test that. it is a test suite that you just run. the point is to combine manual testing with automated tests, maybe automate the manual testing. whatever automated tests exists, there is no need to manually test them. just run it when the bugs are fixed in the test suite


[09-Aug-18 06:29 AM] siu#3920
ok.. thanks.


[09-Aug-18 07:05 AM] Mylo#8306
faucet working regtest mode with latest, no speed increase in generating blocks


[09-Aug-18 07:33 AM] dukeleto#7326
mornin'


[09-Aug-18 07:34 AM] dukeleto#7326
@siu the tests I am working on are in `./qa/pull-tester/cryptoconditions.py` if you want to look at them


[09-Aug-18 07:35 AM] dukeleto#7326
`./qa/pull-tester/rpc-tests.sh cryptoconditions` is how to run them


[09-Aug-18 07:36 AM] dukeleto#7326
@Mylo faucetfund is acting weird on me, I have mature funds and I can't make it happy


[09-Aug-18 07:36 AM] dukeleto#7326
and I am not seeing anything useful in stdout/stderr or debug.log


[09-Aug-18 07:37 AM] dukeleto#7326
`$ ./src/komodo-cli -ac_name=AT1 faucetget` works fine for me, when I connect to AT1


[09-Aug-18 07:38 AM] dukeleto#7326
but creating the faucet in tests in regtest mode, I can't get it working. Do I need to run any other RPCs, like creating a token/asset or anything before funding a faucet?


[09-Aug-18 07:39 AM] dukeleto#7326
@jl777c thanks for that, I will merge jl777 branch into cctests branch. I am also adding better JSON errors to faucetget while debugging it.


[09-Aug-18 07:42 AM] jl777c#5810
you need the funds to create the faucet


[09-Aug-18 07:42 AM] jl777c#5810
faucetinfo should show if the faucet is setup


[09-Aug-18 08:17 AM] dukeleto#7326
```DEBUG:BitcoinRPC:-7-> getwalletinfo []
DEBUG:BitcoinRPC:<-7- {"unconfirmed_balance": 0.0, "paytxfee": 0.0, "keypoololdest": 1533827746, "walletversion": 60000, "immature_balance": 0.1, "txcount": 101, "balance": 5555564.90615135, "keypoolsize": 2}
DEBUG:BitcoinRPC:-8-> faucetaddress []
DEBUG:BitcoinRPC:<-8- {"FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC", "myCCaddress": "RCuoYrXABKT6SoReQHCkoBxxgb2aqEs86z", "result": "success", "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk", "myaddress": "RWPg8B91kfK5UtUN7z6s6TeV9cHSGtVY8D"}
DEBUG:BitcoinRPC:-9-> faucetinfo []
DEBUG:BitcoinRPC:<-9- {"funding": "0.00000000", "result": "success", "name": "Faucet"}
DEBUG:BitcoinRPC:-10-> faucetfund [1.0]
faucetfund
DEBUG:BitcoinRPC:<-- {"result":null,"error":{"code":-1,"message":"JSON value is not a string as expected"},"id":10}

JSONRPC error: JSON value is not a string as expected
  File "/home/dukeleto/git/komodo/qa/rpc-tests/test_framework/test_framework.py", line 121, in main
    self.run_test()
  File "/home/dukeleto/git/komodo/qa/rpc-tests/cryptoconditions.py", line 83, in run_test
    result = rpc.faucetfund(1.0)
  File "/home/dukeleto/git/komodo/qa/rpc-tests/test_framework/authproxy.py", line 145, in __call__
    raise JSONRPCException(response['error'])```


[09-Aug-18 08:17 AM] dukeleto#7326
that is the relevant part of my test suite output


[09-Aug-18 08:18 AM] dukeleto#7326
you can see i have a non-zero mature balance


[09-Aug-18 08:18 AM] dukeleto#7326
and my faucet has 0.0 funding, as expected at first


[09-Aug-18 08:18 AM] dukeleto#7326
my newbie thinking tells me I should be able to use `faucetfund 1` to add 1 coin to the faucet


[09-Aug-18 08:19 AM] dukeleto#7326
at this time, it seems that the RPC fails at this line: `funds = atof(params[0].get_str().c_str()) * COIN;`


[09-Aug-18 08:19 AM] dukeleto#7326
my RPC call never gets to the internal `FaucetFund` function


[09-Aug-18 08:20 AM] dukeleto#7326
things work as expected on AT1, which already has funding in the faucet. But maybe I am missing some RPC call that is needed for the first time?


[09-Aug-18 08:20 AM] jl777c#5810
try faucetfund "1"


[09-Aug-18 08:20 AM] jl777c#5810
everything is treated as strings


[09-Aug-18 08:20 AM] dukeleto#7326
i thought it was going to be something like that


[09-Aug-18 08:20 AM] dukeleto#7326
at first I tried 1.0, because I didn't realize it was assetoshis


[09-Aug-18 08:20 AM] jl777c#5810
funds is amount in floating, see the atof


[09-Aug-18 08:20 AM] jl777c#5810
so "1.0"


[09-Aug-18 08:21 AM] jl777c#5810
needs to be a string


[09-Aug-18 08:21 AM] jl777c#5810
not a number


[09-Aug-18 08:21 AM] dukeleto#7326
yes, that error is from the C++ function `.get_str()` I now realize. I wasn't sure where it was coming from


[09-Aug-18 08:21 AM] dukeleto#7326
trying a string now


[09-Aug-18 08:23 AM] dukeleto#7326
@jl777c you were right, of course


[09-Aug-18 08:24 AM] jl777c#5810
it does happen


[09-Aug-18 08:24 AM] dukeleto#7326
```DEBUG:BitcoinRPC:-10-> faucetfund ["1"]
faucetfund
funds=100000000
FaucetFund
DEBUG:BitcoinRPC:<-10- {"hex": "010000000b0037647 ... fac00000000", "result": "success"}```


[09-Aug-18 08:24 AM] dukeleto#7326
now I can run some real faucet tests, very exciting


[09-Aug-18 10:27 AM] Alright#0419
@dukeleto we killed AT1 btw


[09-Aug-18 10:27 AM] Alright#0419
`./komodod -ac_cc=1 -ac_name=AT2 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKKEY> -addnode=195.201.20.230 -addnode=195.201.137.5`


[09-Aug-18 10:28 AM] Alright#0419
it would have reorged 1000+ blocks worth of txs if we kept AT1


[09-Aug-18 10:29 AM] dukeleto#7326
@Alright thanks for the reminder, i was just being lazy by using it still üòÉ


[09-Aug-18 10:29 AM] dukeleto#7326
it's nice to compare what AT1/AT2 gives me versus regtest


[09-Aug-18 11:29 AM] Alright#0419
@jl777c the thing I described yesterday is reproducible. If I start a node from scratch with new wallet and new pubkey and fund the pubkey, the cc commands don't work properly. 
```
./komodo-cli -ac_name=AT2 rewardslock 0time 062211921373a002306628024d2ac0c912b79ace5baed673473b1325e87e7006 100
error code: -1
error message:
basic_string::_M_construct null not valid
```
```
error finding unspent i.1 of 0, 100.00020000 vs 100.00020000
cant find enough inputs 9999.99972528 note enough for 100.00000000
cant find rewards inputs
```


[09-Aug-18 11:29 AM] Alright#0419
once I get this node to mine a block, it works fine


[09-Aug-18 11:30 AM] jl777c#5810
does it have normal inputs?


[09-Aug-18 11:30 AM] Alright#0419
The tx that I funded the pubkey address with?


[09-Aug-18 11:30 AM] Alright#0419
was `sendtoaddress` from my other node


[09-Aug-18 11:30 AM] jl777c#5810
oh, i think I see, it needs p2pk inputs


[09-Aug-18 11:31 AM] jl777c#5810
not p2pkh. i will fix this tomorrow


[09-Aug-18 11:32 AM] dukeleto#7326
my tests only test the mining pathway, not the bug that Alright just found


[09-Aug-18 11:32 AM] jl777c#5810
I think another way, is if you have normal funds received and then send a tx, the change becomes of the right form


[09-Aug-18 11:32 AM] jl777c#5810
so sendtoaddress funds dont work directly?


[09-Aug-18 11:33 AM] Alright#0419
do not


[09-Aug-18 11:33 AM] Alright#0419
will try to send coins from this wallet and use the change


[09-Aug-18 11:33 AM] jl777c#5810
ok, it sort of makes sense


[09-Aug-18 02:36 PM] dukeleto#7326
```DEBUG:BitcoinRPC:-11-> faucetfund ["0"]
funds=0
DEBUG:BitcoinRPC:<-11- {"result": "error", "error": "funding amount must be positive"}
DEBUG:BitcoinRPC:-12-> faucetfund ["-1"]
funds=-100000000
DEBUG:BitcoinRPC:<-12- {"result": "error", "error": "funding amount must be positive"}```


[09-Aug-18 02:37 PM] dukeleto#7326
i have some nice error checking of edge cases added to faucetfund which i will add to other similar rpc's


[09-Aug-18 02:39 PM] dukeleto#7326
i've merged the latest `jl777` branch into `cctests`


[09-Aug-18 02:50 PM] dukeleto#7326
all tests passing with the latest `jl777` changes üëç


[09-Aug-18 02:51 PM] jl777c#5810
i read that rewards CC was having problems with p2pkh utxo


[09-Aug-18 02:53 PM] dukeleto#7326
@jl777c does it make sense to do a check in `faucetfund` that the amount is <= the current wallet mature balance, or maybe not since the xtn can be broadcasted at  a different time when the balance is different?


[09-Aug-18 02:54 PM] jl777c#5810
i figure if you try to fund more than you have, it wont work and get an error


[09-Aug-18 03:09 PM] Mylo#8306
fundamount as a string got me when testing remote rpc


[09-Aug-18 03:09 PM] Mylo#8306
good morning ‚òï

{Reactions}
‚òï (3) 

[09-Aug-18 10:45 PM] dukeleto#7326
i am writing lots of good CC tests, making very good progress

{Reactions}
üëå 

[09-Aug-18 10:47 PM] dukeleto#7326
```DEBUG:BitcoinRPC:-13-> sendrawtransaction ["010000000bfd1.....
DEBUG:BitcoinRPC:<-- {"result":null,"error":{"code":-26,"message":"16: bad-txns-inputs-duplicate"},"id":13}```


[09-Aug-18 10:47 PM] dukeleto#7326
that error is new to me, i get it when i try to broadcast the hex returned by faucetfund


[09-Aug-18 10:49 PM] dukeleto#7326
```1187-        if (vInOutPoints.count(txin.prevout))
1188-            return state.DoS(100, error("CheckTransaction(): duplicate inputs"),
1189:                             REJECT_INVALID, "bad-txns-inputs-duplicate");```


[09-Aug-18 10:49 PM] dukeleto#7326
i almost know what that is trying to do. it's saying that one vout was tried to be used multiple times in 1 transaction?


[09-Aug-18 10:54 PM] jl777c#5810
look at the vins, likely there is a duplicate. how did you create the rawtx?


[09-Aug-18 10:55 PM] jl777c#5810
decode the rawtx to make sure it does have identical vin.i and vin.j


[09-Aug-18 10:57 PM] jl777c#5810
the strange thing is there is a duplicate filter so it shouldnt happen unless there is a bug in the duplicate filter


[09-Aug-18 10:57 PM] jl777c#5810
oh, wait. there is a possibility of this. fixing


[09-Aug-18 11:00 PM] jl777c#5810
pushed fix


[09-Aug-18 11:01 PM] jl777c#5810
it wont fix the already generated rawtx with duplicates, but if the wallet has a duplicate utxo in it, it will filter it out


[09-Aug-18 11:02 PM] dukeleto#7326
all i did was mine blocks in regtest, then call `faucetfund "1"`


[09-Aug-18 11:02 PM] dukeleto#7326
then try to `sendrawtransaction` that hex


[09-Aug-18 11:02 PM] jl777c#5810
@Alright is rewardslock the only one with problems using p2pkh utxo?


[09-Aug-18 11:02 PM] dukeleto#7326
```DEBUG:BitcoinRPC:-7-> getwalletinfo []
DEBUG:BitcoinRPC:<-7- {"unconfirmed_balance": 0.0, "paytxfee": 0.0, "keypoololdest": 1533879887, "walletversion": 60000, "immature_balance": 0.1, "txcount": 101, "balance": 5555564.90615135, "keypoolsize": 2}
DEBUG:BitcoinRPC:-8-> faucetaddress []
DEBUG:BitcoinRPC:<-8- {"FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC", "myCCaddress": "RCuoYrXABKT6SoReQHCkoBxxgb2aqEs86z", "result": "success", "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk", "myaddress": "RWPg8B91kfK5UtUN7z6s6TeV9cHSGtVY8D"}```


[09-Aug-18 11:03 PM] dukeleto#7326
that is the relevant wallet/faucet info


[09-Aug-18 11:03 PM] jl777c#5810
@dukeleto I added duplicate filter for the case where the wallet is returning the same utxo more than once. I assumed that couldnt happen, but apparently it did


[09-Aug-18 11:03 PM] dukeleto#7326
well, these tests are proving useful already


[09-Aug-18 11:03 PM] jl777c#5810
plz try latest version, preferably with the identical chain in the identical test


[09-Aug-18 11:03 PM] dukeleto#7326
i will merge it in right now


[09-Aug-18 11:04 PM] jl777c#5810
your specific utxo set is a bit part of how this bug was exposed, so if that changes, it could be the bug goes away


[09-Aug-18 11:04 PM] jl777c#5810
yes, any automated tests will be very useful


[09-Aug-18 11:05 PM] dukeleto#7326
just merged in jl777 branch, compiled, and waiting for tests to finish üòÉ


[09-Aug-18 11:07 PM] dukeleto#7326
@jl777c your fixed worked, the exact same tests now pass


[09-Aug-18 11:08 PM] dukeleto#7326
```DEBUG:BitcoinRPC:-17-> faucetinfo []
DEBUG:BitcoinRPC:<-17- {"funding": "1.00000000", "result": "success", "name": "Faucet"}
```


[09-Aug-18 11:08 PM] dukeleto#7326
i finally funded a faucet in regtest, now i can test various other RPCs


[09-Aug-18 11:09 PM] jl777c#5810
actually 1 isnt enough


[09-Aug-18 11:09 PM] jl777c#5810
as faucetget needs 1 + txfee


[09-Aug-18 11:09 PM] dukeleto#7326
is that value in assetoshis? if so, should `funding` be an integer?


[09-Aug-18 11:10 PM] jl777c#5810
funding is in coins with 8 decimals


[09-Aug-18 11:10 PM] jl777c#5810
only assets are in satoshis in some cases


[09-Aug-18 11:11 PM] jl777c#5810
all the other CC use floating point (as strings) for amounts


[09-Aug-18 11:11 PM] jl777c#5810
the reason assets are in satoshis is that they are creating colored utxo and tracking each one is critical


[09-Aug-18 11:12 PM] dukeleto#7326
that makes sense


[09-Aug-18 11:12 PM] jl777c#5810
i think some assets rpc calls are using the "wrong" denomination (coins instead of satoshis), mostly because I just cut and pasted the argv[] handling


[09-Aug-18 11:14 PM] jl777c#5810
we are early enough and there are no GUI using CC yet, so feel free to fix things to make it more consistent


[09-Aug-18 11:14 PM] jl777c#5810
these initial CC are just that, the initial ones


[09-Aug-18 11:14 PM] jl777c#5810
reference implementations to show what can be done and how it is done


[09-Aug-18 11:14 PM] jl777c#5810
many mistakes were made as it was the first batch


[09-Aug-18 11:15 PM] jl777c#5810
my goal was minimum viable functionality


[09-Aug-18 11:15 PM] jl777c#5810
which I believe they have


[09-Aug-18 11:15 PM] jl777c#5810
considering assets has most of counterparty functionality


[09-Aug-18 11:16 PM] dukeleto#7326
i will definitely be adding more error checking and friendlier JSON responses for errors, and probably RPC docs


[09-Aug-18 11:16 PM] jl777c#5810
also not sure of any other realtime dice games that are blockchain enforced


[09-Aug-18 11:16 PM] dukeleto#7326
there is a sneaky bug that I had to fix, with uint64_t


[09-Aug-18 11:17 PM] jl777c#5810
what bug with uint64_t?


[09-Aug-18 11:17 PM] dukeleto#7326
when I did a printf(%li), it shows a negative number for it, but foo < 0 returns false, because it's a uint


[09-Aug-18 11:17 PM] dukeleto#7326
```--- a/src/wallet/rpcwallet.cpp
+++ b/src/wallet/rpcwallet.cpp
@@ -5138,7 +5138,7 @@ UniValue faucetinfo(const UniValue& params, bool fHelp)

 UniValue faucetfund(const UniValue& params, bool fHelp)
 {
-    UniValue result(UniValue::VOBJ); uint64_t funds; std::string hex;
+    UniValue result(UniValue::VOBJ); int64_t funds; std::string hex;
     if ( fHelp || params.size() > 1 )
         throw runtime_error("faucetfund amount\n");
     if ( ensure_CCrequirements() < 0 )
@@ -5147,7 +5147,7 @@ UniValue faucetfund(const UniValue& params, bool fHelp)
     LOCK2(cs_main, pwalletMain->cs_wallet);
     funds = atof(params[0].get_str().c_str()) * COIN;
     if (funds > 0) {
-        hex = FaucetFund(0,funds);
+        hex = FaucetFund(0,(uint64_t) funds);```


[09-Aug-18 11:17 PM] dukeleto#7326
without that change, funds > 0 is never true for a uint64_t, or it's undefined behavior


[09-Aug-18 11:17 PM] dukeleto#7326
or compiler-specific


[09-Aug-18 11:17 PM] jl777c#5810
yes, I missed that


[09-Aug-18 11:18 PM] dukeleto#7326
i will fix that as I added error checking for positive amounts in various places


[09-Aug-18 11:19 PM] dukeleto#7326
i am really enjoying working on CC tests, it's a good way to learn the API


[09-Aug-18 11:24 PM] jl777c#5810
yes, actually no better way to fully understand something


[09-Aug-18 11:32 PM] jl777c#5810
updated to use int64_t for all coin values (other than txfee)


[09-Aug-18 11:32 PM] dukeleto#7326
awesome


[09-Aug-18 11:34 PM] dukeleto#7326
just as a heads up to anybody who runs the CC tests, if you CRTL-C the test or it fails very hard (not just a test failure), the regtest komodod will still be running in the background and you must manually kill it


[10-Aug-18 12:14 AM] dukeleto#7326
@jl777c i may have spoke too soon and I am seeing non-deterministic failures, i.e. it only fails sometimes with bad-txns-inputs-duplicate


[10-Aug-18 12:14 AM] dukeleto#7326
i made sure to `make clean` and build from scratch


[10-Aug-18 12:14 AM] jl777c#5810
need to see the failing rawtx


[10-Aug-18 12:14 AM] jl777c#5810
this is why i said your exact utxo set is a key part of the test and any changes to it could change the result


[10-Aug-18 12:15 AM] dukeleto#7326
hmm


[10-Aug-18 12:15 AM] dukeleto#7326
i always seem to get the exact same amount of `balance` from my mined blocks, i haven't changed that


[10-Aug-18 12:16 AM] dukeleto#7326
i assumed that i got the same utxo structure for each test. But I also changed the test to do `faucetfund 2` instead of `1`. I will get a failing output, it seems to fail less then half the time for me


[10-Aug-18 12:18 AM] dukeleto#7326
it takes 2 mins to run the tests and i am trying to generate a failure again


[10-Aug-18 12:19 AM] dukeleto#7326
got it


[10-Aug-18 12:20 AM] dukeleto#7326
https://gist.github.com/leto/b09aac83d21659c69a17f65904778ab3

{Embed}
https://gist.github.com/leto/b09aac83d21659c69a17f65904778ab3
CC tests failure when broadcasting a faucetfund xtn
CC tests failure when broadcasting a faucetfund xtn
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[10-Aug-18 12:20 AM] dukeleto#7326
@jl777c plz let me know if I can give more debug info


[10-Aug-18 12:22 AM] jl777c#5810
definitely a duplicate. investigating


[10-Aug-18 12:24 AM] dukeleto#7326
in case it helps, the test failure comes from this line in the tests: https://github.com/letolabs/komodo/blob/a6a826c625527a21f2953d7642a68a6f8da0f3d1/qa/rpc-tests/cryptoconditions.py#L122

{Embed}
https://github.com/letolabs/komodo/blob/a6a826c625527a21f2953d7642a68a6f8da0f3d1/qa/rpc-tests/cryptoconditions.py
letolabs/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/STidbfwli6qkMkU8vATD46L8ib5zmeVb7WDB5OpJ4KU/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/648647


[10-Aug-18 12:24 AM] jl777c#5810
pushed fix. it was a blatant out of order access bug


[10-Aug-18 12:27 AM] dukeleto#7326
great, i just merged in the latest jl777 and rebuilding


[10-Aug-18 03:06 AM] jl777c#5810
@Alright I just created a rewards plan with just one p2pkh utxo:
01000000014bc959a774d9fdcbd3e57e5de0447fcd411e82d8861cf5d0e2539a2df2ef951e010000006a47304402206f36f57c8da5a8b555ae0ca6773b06fa465f500a182340429031fa399f71027e02206cf180ee1f05cb2050005a7f9de5b38ee29bc236203c2d06438be1f744b58eed012102f5d9c29c1720f244565ec6260b0b87774a3d1ec831282c40d0712fba2aeafe5fffffffff0400e40b5402000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc1027000000000000232103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9ace0b56af414000000232102f5d9c29c1720f244565ec6260b0b87774a3d1ec831282c40d0712fba2aeafe5fac00000000000000002c6a2ae546746573740000000000ca9a3b000000008051010000000000805101000000000000e1f5050000000000000000


[10-Aug-18 03:07 AM] jl777c#5810
rewardsinfo e65f64e01a64d3a85f5e41fb21f14883d30e50ba930c4de2e6c7283382038d79
{
  "result": "success",
  "fundingtxid": "e65f64e01a64d3a85f5e41fb21f14883d30e50ba930c4de2e6c7283382038d79",
  "name": "test",
  "sbits": 1953719668,
  "APR": "10.00000000",
  "minseconds": 86400,
  "maxseconds": 86400,
  "mindeposit": "1.00000000",
  "funding": "100.00000000"
}


[10-Aug-18 03:09 AM] jl777c#5810
also rewards lock is working:
rewardslock test e65f64e01a64d3a85f5e41fb21f14883d30e50ba930c4de2e6c7283382038d79 10
{
  "result": "success",
  "hex": "010000000136b55955c0baa517e46313a4ff58b8a452ece197b2eb15faabce07ee61464419010000006a47304402205a0eacaae5951dd5106906c9e8b393602fe2603fff6df00b4d47cb7350de0c7d02206619c27220a1e311e9a2c522e32c7eff50e9b9bd4cef12b91f4ecbd676af0dc7012102f5d9c29c1720f244565ec6260b0b87774a3d1ec831282c40d0712fba2aeafe5fffffffff0400ca9a3b00000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc1027000000000000232102f5d9c29c1720f244565ec6260b0b87774a3d1ec831282c40d0712fba2aeafe5fac68df701802000000232102f5d9c29c1720f244565ec6260b0b87774a3d1ec831282c40d0712fba2aeafe5fac00000000000000002c6a2ae54c7465737400000000798d03823328c7e6e24d0c93ba500ed38348f121fb415e5fa8d3641ae0645fe600000000"
}


[10-Aug-18 03:09 AM] jl777c#5810
did you have any utxo from listunspent? maybe you forgot to importprivkey?


[10-Aug-18 03:09 AM] jl777c#5810
it all seems to work for me


[10-Aug-18 03:39 AM] jl777c#5810
so at this point I am back to having no reproducible bugs to fix


[10-Aug-18 06:45 AM] siu#3920
i made a reward plan yesterday and locked some coins... will see how it behaves now


[10-Aug-18 07:52 AM] siu#3920
```== FSM ==
FSMaddress [pubkey]

== FSMcreate ==
FSMcreate name states

== FSMinfo ==
FSMinfo fundingtxid

== FSMlist ==
FSMlist
```


[10-Aug-18 07:52 AM] siu#3920
is this related to CC?


[10-Aug-18 07:52 AM] siu#3920
was this here before?


[10-Aug-18 07:57 AM] jl777c#5810
been there for several days but not finished yet


[10-Aug-18 08:06 AM] siu#3920
ok


[10-Aug-18 08:06 AM] siu#3920
what is it?


[10-Aug-18 08:09 AM] jl777c#5810
finite state machine


[10-Aug-18 08:10 AM] jl777c#5810
https://en.wikipedia.org/wiki/Finite-state_machine

{Embed}
https://en.wikipedia.org/wiki/Finite-state_machine
Finite-state machine
A finite-state machine (FSM) or finite-state automaton (FSA, plural: automata), finite automaton, or simply a state machine, is a mathematical model of computation.  It is an abstract machine that can be in exactly one of a finite number of states at any given time.  The FSM ...
https://images-ext-1.discordapp.net/external/U67p_FXhvuMuhiZ04LOaqBGLLzPs9ANQYIVLuZqJZNk/https/upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Automata_theory.svg/1200px-Automata_theory.svg.png

{Reactions}
shexy (3) 

[10-Aug-18 08:16 AM] siu#3920
for a dicefund to work it needs a specific quantity of confirmations?


[10-Aug-18 08:17 AM] jl777c#5810
1


[10-Aug-18 08:20 AM] siu#3920
weird since i did a dicefund


[10-Aug-18 08:20 AM] siu#3920
```./komodo-cli -ac_name=AT2 diceinfo bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14
{
  "result": "success",
  "fundingtxid": "bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 20,
  "timeoutblocks": 5,
  "funding": "100000.00000000"
}
```


[10-Aug-18 08:21 AM] siu#3920
``` ./komodo-cli -ac_name=AT2 dicebet SIU bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14 10 4
error code: -1
error message:
basic_string::_M_construct null not valid
```


[10-Aug-18 08:21 AM] siu#3920
but trying to do a bet is giving me an error


[10-Aug-18 08:21 AM] siu#3920
```numentropy tx 0: 100000.00000000
cant find dice entropy inputs
numentropy tx 0: 100000.00000000
numentropy tx 0: 100000.00000000
cant find dice entropy inputs

```


[10-Aug-18 08:22 AM] siu#3920
```"balance": 3889999.99970000,``` i have more than enough funds


[10-Aug-18 08:27 AM] siu#3920
seems like its not working now


[10-Aug-18 08:29 AM] jl777c#5810
see "cant find dice entropy inputs"


[10-Aug-18 08:29 AM] jl777c#5810
did you create the entropy tx?


[10-Aug-18 08:29 AM] jl777c#5810
diceaddfunds name fundingtxid amount
that creates entropy tx


[10-Aug-18 08:30 AM] jl777c#5810
can be for any amount


[10-Aug-18 08:30 AM] jl777c#5810
it is the hash of the random number that is half the data to determine who wins


[10-Aug-18 09:11 AM] dukeleto#7326
@jl777c is this a good fix to this "bug" ? https://github.com/letolabs/komodo/commit/9b30af9799b6406c87c42a14768cac9561ed47cb

{Embed}
https://github.com/letolabs/komodo/commit/9b30af9799b6406c87c42a14768cac9561ed47cb
Fix bug in FaucetGet where it returns an int instead of a string ...
https://images-ext-2.discordapp.net/external/NV9OwV-r5qqXnJrqIuC28RKmVRDThBWK6meklXuwe5E/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/30298


[10-Aug-18 09:11 AM] dukeleto#7326
the bug is that the function returns 0 instead of std::string, which compiles, but causes issues


[10-Aug-18 09:12 AM] jl777c#5810
yes, that is good


[10-Aug-18 09:12 AM] dukeleto#7326
that kind of fix will be needed in various places


[10-Aug-18 09:12 AM] dukeleto#7326
üëç


[10-Aug-18 09:12 AM] dukeleto#7326
i have basic tests for all faucet RPCs, and they are passing consistently


[10-Aug-18 09:12 AM] dukeleto#7326
the utxo selection bugs from last night seem to be fixed


[10-Aug-18 09:17 AM] jl777c#5810
good. I fixed many return(0)


[10-Aug-18 09:35 AM] siu#3920
chain broke?


[10-Aug-18 09:41 AM] siu#3920
AT2?


[10-Aug-18 09:42 AM] siu#3920
updated and seems to be fine now


[10-Aug-18 10:14 AM] siu#3920
broke again?


[10-Aug-18 11:00 AM] dukeleto#7326
I think I am going to try to spin up 2 nodes in my tests, one that mines all it's balance and another that has funds sent to it, so we can test out the situation where only P2PK utxos or only P2PKH utxos exist. Feels like the right thing to do, wish me luck

{Reactions}
üçÄ (2) 

[10-Aug-18 02:14 PM] Alright#0419
@jl777c 
```
./komodo-cli -ac_name=AT2 listunspent[
  {
    "txid": "fb9d1f11a85ceedad95719163ea77e319e148d7be494d570d4336c5a35e0a22e",
    "vout": 1,
    "generated": false,
    "address": "RXJyD5TeXtkQuxLScTeN3ssHPDZnJm6FpH",
    "account": "",
    "scriptPubKey": "76a914f1a8db2c3322b8e995a3f7a139ea255b68100cde88ac",
    "amount": 10000.00000000,
    "interest": 0.00000000,
    "confirmations": 6,
    "spendable": true
  }
]
~/komodo/src$ ./komodo-cli -ac_name=AT2 validateaddress RXJyD5TeXtkQuxLScTeN3ssHPDZnJm6FpH
{
  "isvalid": true,
  "address": "RXJyD5TeXtkQuxLScTeN3ssHPDZnJm6FpH",
  "scriptPubKey": "76a914f1a8db2c3322b8e995a3f7a139ea255b68100cde88ac",
  "segid": 63,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "02a015eaa1c34d31711b2f2de08c3738e510548a0be6b0247b9c320e4d53c682f7",
  "iscompressed": true,
  "account": ""
}
./komodo-cli -ac_name=AT2 rewardslock Alright2 ccb6af5e5b6bec1611d5e185386c6c6ec6b78b17b611f13e5ad827aa51218521 100
error code: -1
error message:
basic_string::_M_construct null not valid
```


[10-Aug-18 02:14 PM] Alright#0419
```
error finding unspent i.1 of 0, 100.00020000 vs 100.00020000
cant find enough inputs 1000399.00000000 note enough for 100.00000000
cant find rewards inputs
```


[10-Aug-18 02:14 PM] Alright#0419
is imported, is funded


[10-Aug-18 02:15 PM] Alright#0419
```
./komodo-cli -ac_name=AT2 faucetfund 100
error code: -1
error message:
basic_string::_M_construct null not valid
```
```
error finding unspent i.1 of 0, 100.00010000 vs 100.00010000
```


[10-Aug-18 02:16 PM] Alright#0419
to reproduce, create new address, get pubkey, stop node, delete wallet.dat, start with new pubkey, import address, fund address


[10-Aug-18 02:18 PM] jl777c#5810
how to launch AT2


[10-Aug-18 02:18 PM] Alright#0419
./komodod -ac_cc=1 -ac_name=AT2 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKKEY> -addnode=195.201.20.230 -addnode=195.201.137.5


[10-Aug-18 02:27 PM] dukeleto#7326
@Alright `_M_construct null not valid` means "you didn't pass a string"


[10-Aug-18 02:28 PM] dukeleto#7326
Pinned a message.


[10-Aug-18 02:28 PM] dukeleto#7326
try "100" vs 100


[10-Aug-18 02:28 PM] Alright#0419
Seems like it's failing to find a UTXO


[10-Aug-18 02:28 PM] jl777c#5810
that is all fixed oin latest


[10-Aug-18 02:29 PM] dukeleto#7326
and make sure to pull latest jl777 branch


[10-Aug-18 02:29 PM] Alright#0419
Duke it was weird because I'd run the same command exact command after mining a block and it would work


[10-Aug-18 02:29 PM] Alright#0419
wasn't the quotes thing


[10-Aug-18 02:29 PM] dukeleto#7326
oh


[10-Aug-18 02:29 PM] dukeleto#7326
well that sounds like p2pk vs p2pkh utxos


[10-Aug-18 02:29 PM] Alright#0419
Jl, I assumed you hadn't fixed it because you said you couldn't reproduce


[10-Aug-18 02:30 PM] jl777c#5810
ifixed the null return


[10-Aug-18 02:30 PM] jl777c#5810
didnt fix the p2pkh since it worked for me


[10-Aug-18 02:30 PM] Alright#0419
updated and restarted the node and it's working ü§î


[10-Aug-18 02:30 PM] jl777c#5810
maybe i fixed it?


[10-Aug-18 02:30 PM] Alright#0419
let me try this again, ,maybe it's only when you import the address


[10-Aug-18 02:30 PM] dukeleto#7326
it's non-deterministic, it feels


[10-Aug-18 02:31 PM] dukeleto#7326
it depends on the funding amount


[10-Aug-18 02:31 PM] dukeleto#7326
and there were various changes in utxo selection that James made yesterday


[10-Aug-18 02:31 PM] dukeleto#7326
my guess is that maybe the case of having *both* p2pk and p2pkh is not working, but if you have only one or the other, it works


[10-Aug-18 02:32 PM] jl777c#5810
I just iterate throiugh the wallet for utxo


[10-Aug-18 02:33 PM] dukeleto#7326
@Alright the latest code has various error checking from me, so you should see different behavior


[10-Aug-18 02:34 PM] jl777c#5810
found a bug, fixing


[10-Aug-18 02:36 PM] Alright#0419
can't reproduce on latest üëç


[10-Aug-18 02:38 PM] jl777c#5810
pushed fix, it would have created a bad rawtx


[10-Aug-18 02:38 PM] jl777c#5810
i think the vin selection fixes could explain all sorts of bad behavior before


[10-Aug-18 02:46 PM] dukeleto#7326
i've merged the latest changes into cctests and running the tests now


[10-Aug-18 02:53 PM] jl777c#5810
so the p2pkh bugs are fixed, even in the prior release?


[10-Aug-18 02:53 PM] dukeleto#7326
all tests still passing. My tests still only test p2pk, but it will be easy to test the mixed the case. The case of only p2pkh will require spinning up 2 nodes


[10-Aug-18 02:54 PM] dukeleto#7326
@jl777c i am not sure i understand your question


[10-Aug-18 02:54 PM] jl777c#5810
alright said there were some bugs


[10-Aug-18 02:54 PM] jl777c#5810
but then said the latest version didnt have it


[10-Aug-18 02:54 PM] jl777c#5810
latest, prior to the just pushed fix


[10-Aug-18 02:55 PM] dukeleto#7326
i think that he had created AT2 a few days ago, and probably had not recompiled/restarted with the latest changes


[10-Aug-18 02:55 PM] dukeleto#7326
and i have learned that sometimes a `make clean` is required, just doing a `make` does not update all the right things sometimes


[10-Aug-18 02:56 PM] jl777c#5810
so it seems CC is back to no duplicatable bugs, in fact i havent heard of any bugs in recent days


[10-Aug-18 02:57 PM] jl777c#5810
other than what has been fixed


[10-Aug-18 02:57 PM] jl777c#5810
but i  know there must be bugs


[10-Aug-18 02:58 PM] dukeleto#7326
agreed, all known bugs are fixed but we definitely have some more bugs. I have basic tests for all faucet RPCs, I will start working on dice/reward/token RPCs


[10-Aug-18 02:59 PM] jl777c#5810
reward is the next in complexity


[10-Aug-18 03:00 PM] jl777c#5810
then assets is complex but has no realtime tx generation like dice does, so they are likely equivalent for testing difficulty


[10-Aug-18 03:00 PM] dukeleto#7326
very good to know


[10-Aug-18 03:00 PM] dukeleto#7326
@jl777c just to verify, my plan is to do `sendtoaddress` to an address in my regtest node wallet, and that will give my wallet a mix of p2pk and p2pkh utxos, correct?


[10-Aug-18 03:01 PM] jl777c#5810
yes, assuming you also mined with -pubkey


[10-Aug-18 03:01 PM] jl777c#5810
and change will go to p2pk, not p2pkh


[10-Aug-18 03:03 PM] dukeleto#7326
ok


[10-Aug-18 03:04 PM] siu#3920
rebuilding


[10-Aug-18 03:10 PM] Alright#0419
I built yesterday


[10-Aug-18 03:10 PM] Alright#0419
and I know what `make clean` is -_-


[10-Aug-18 03:11 PM] siu#3920
i saw some changes in the git pull


[10-Aug-18 03:17 PM] dukeleto#7326
@Alright i just wanted to point out that `make` itself has trouble sometimes in deciding what needs to be rebuilt and sometimes if I am going crazy debugging something a `make clean` before rebuilding is what was needed. Something I learned from hacking on complex C/C++ projects. Wasn't trying trying to insult your `make` skillz üòÉ


[10-Aug-18 03:18 PM] Alright#0419
lol no worries


[10-Aug-18 03:18 PM] dukeleto#7326
@siu lots of small fixes in the last few days, let us know if you see any weird stuff


[10-Aug-18 03:24 PM] jl777c#5810
make clean and zcutil/build.sh


[10-Aug-18 03:24 PM] jl777c#5810
-j64


[10-Aug-18 03:25 PM] dukeleto#7326
üòÉ


[10-Aug-18 03:27 PM] dukeleto#7326
@jl777c it's not a big concern for me, but I still see a lot of this in our test suite: ```02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- pubkey
02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- origpubkey
7b170de460cd61b1e4c850cb9ea3b6f38b7b5e9f89ff6c5a4c8ce8112b72bb69 hash vs 0f0f0a0000000000000000000000000000000000000000000000000000000000 ht.100 special.0 special2.0 flag.0 notaryid.-1 mod.30 error
02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- pubkey
02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- origpubkey
3e67a178d690748b319e9ccf63c0ae92a0e8c7114bc48ab87de117cf16b78692 hash vs 0f0f0a0000000000000000000000000000000000000000000000000000000000 ht.100 special.0 special2.0 flag.0 notaryid.-1 mod.30 error
02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- pubkey
02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf <- origpubkey
unexpected fname.(/tmp/testVsadvs/node0) vs REGTEST [REGTEST] n.7 len.21 (s/node0)```


[10-Aug-18 03:28 PM] jl777c#5810
quirks of regtest mode... no idea what it could be, the strange fname is especially strange


[10-Aug-18 03:28 PM] dukeleto#7326
i get an especially weird bug that doesn't cause the test suite to fail


[10-Aug-18 03:29 PM] dukeleto#7326
at the end of the test suite running, there is an error about not being able to create the `./regtest` directory somewhere in the datadir


[10-Aug-18 03:29 PM] dukeleto#7326
it's weird, because it doesn't make anything fail, but I figure it's related to the above printouts


[10-Aug-18 03:30 PM] dukeleto#7326
one test run generates about 5000 lines of that output(!)


[10-Aug-18 03:31 PM] dukeleto#7326
it's not blocking me for now


[10-Aug-18 03:32 PM] siu#3920
@dukeleto sure


[10-Aug-18 03:36 PM] dukeleto#7326
I refactored each set of tests (faucet/reward/dice/token) to it's own function, so I can re-use the tests against various wallets scenarios: different amounts of funds, p2pk vs p2kpkh, etc. I think it's better than copying tests around to different files that only have slight changes


[10-Aug-18 03:36 PM] Alright#0419
Can't get a naked `rewardsunlock <fundingtxid>` to work anymore


[10-Aug-18 03:37 PM] dukeleto#7326
more deets plz


[10-Aug-18 03:37 PM] dukeleto#7326
do you have just mined utxos? any errors?


[10-Aug-18 03:37 PM] Alright#0419
Also having trouble unlocking ones while I pass it the rewardslock txid


[10-Aug-18 03:37 PM] Alright#0419
but it may be because I set 0 as minimum lock time for these


[10-Aug-18 03:38 PM] Alright#0419
I have ones eligible to unlock that were 1 day minimum that I can't unlock


[10-Aug-18 03:38 PM] Alright#0419
trying to find the txids for it


[10-Aug-18 03:38 PM] Alright#0419
```
APR 10.00000000 minseconds.0 maxseconds.172800 mindeposit 1.00000000
minseconds 0 maxseconds 172800
duration 351 (1533940508 - 1533940157) numblocks 12 (2349 - 2337)
amount 10.00000000 10000000000.00000000 317 -> duration.351 reward 0.00001113
amount 10.00000000 -> reward 0.00001113
```

```
./komodo-cli -ac_name=AT2 rewardsunlock 0time 062211921373a002306628024d2ac0c912b79ace5baed673473b1325e87e7006 774fd5e18d388c1554a908aadf423b05f298761f7537dc037f537578fc3ceabd
{
  "error": "couldnt create rewards unlock transaction"
}
```


[10-Aug-18 03:39 PM] dukeleto#7326
@Alright does it change if you put quotes around the hex?


[10-Aug-18 03:39 PM] siu#3920
ok...


[10-Aug-18 03:39 PM] siu#3920
yesterday i set a rewards lock


[10-Aug-18 03:39 PM] siu#3920
http://cctest.explorer.dexstats.info/tx/fda4265334bb1a106aff02d4aa03273120241066889f843e58989eb39d3270e8


[10-Aug-18 03:39 PM] Alright#0419
putting quotes around txids does not help


[10-Aug-18 03:39 PM] Alright#0419
same result


[10-Aug-18 03:40 PM] dukeleto#7326
i didn't even know we had a cctest explorer, cool


[10-Aug-18 03:40 PM] siu#3920
yep


[10-Aug-18 03:40 PM] Alright#0419
oh that needs to be rebuilt from latest


[10-Aug-18 03:40 PM] Alright#0419
the explorer


[10-Aug-18 03:40 PM] Alright#0419
going down for a couple minutes


[10-Aug-18 03:40 PM] siu#3920
this is the plan


[10-Aug-18 03:40 PM] dukeleto#7326
@Alright also verify that `0time` is in `rewardslist` ?


[10-Aug-18 03:40 PM] siu#3920
```./komodo-cli -ac_name=AT2 rewardsinfo 30655be8685b93f48c9dfe6d01e4651dffca436778136abffffd006df50df8f3
{
  "result": "success",
  "fundingtxid": "30655be8685b93f48c9dfe6d01e4651dffca436778136abffffd006df50df8f3",
  "name": "SIU",
  "sbits": 5589331,
  "APR": "10.00000000",
  "minseconds": 86400,
  "maxseconds": 2592000,
  "mindeposit": "10.00000000",
  "funding": "112061.00000000"
}
```


[10-Aug-18 03:41 PM] Alright#0419
is


[10-Aug-18 03:41 PM] siu#3920
i tried to unlock ```./komodo-cli -ac_name=AT2 rewardsunlock SIU 30655be8685b93f48c9dfe6d01e4651dffca436778136abffffd006df50df8f3 fda4265334bb1a106aff02d4aa03273120241066889f843e58989eb39d3270e8 
{
  "result": "success",
  "hex": "0100000002e870329db39e98583e849f8866102420312703aad402ff6a101abb345326a4fd000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981407c2c667ab61de82900a727c028aaa35fe9017ab04f34bfb36356ca36ce0d984b607b58f384cc0a4de67fb6769ee4ba29d85c62921dd5f90b004b861f3f6993a2a100af038001e5a10001fffffffff3f80df56d00fdffbf6a13786743caff1d65e4016dfe9d8cf4935b68e85b6530000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981405361954d065375eb0c35e8d5e705437c74a65b1bfe6d9a0e2a23b261df88386850a40cf0916d96898203708630ab5f2ec735598609124db02340e3ab1c3d6c7ea100af038001e5a10001ffffffff03a3ea604e18090000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc4d9eb6d4e800000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000002c6a2ae5555349550000000000f3f80df56d00fdffbf6a13786743caff1d65e4016dfe9d8cf4935b68e85b653000000000"
}
```


[10-Aug-18 03:42 PM] dukeleto#7326
```5060-    hex = RewardsUnlock(0,name,fundingtxid,txid);
5061-    if ( hex.size() > 0 )
5062-    {
5063-        result.push_back(Pair("result", "success"));
5064-        result.push_back(Pair("hex", hex));
5065:    } else result.push_back(Pair("error", "couldnt create rewards unlock transaction"));```


[10-Aug-18 03:42 PM] Alright#0419
try it without the lock txid


[10-Aug-18 03:42 PM] dukeleto#7326
that is the relevant code


[10-Aug-18 03:42 PM] Alright#0419
siu just `./komodo-cli -ac_name=AT2 rewardsunlock SIU 30655be8685b93f48c9dfe6d01e4651dffca436778136abffffd006df50df8f3`


[10-Aug-18 03:42 PM] siu#3920
```./komodo-cli -ac_name=AT2 rewardsunlock SIU 30655be8685b93f48c9dfe6d01e4651dffca436778136abffffd006df50df8f3
{
  "error": "couldnt create rewards unlock transaction"
}
```


[10-Aug-18 03:42 PM] dukeleto#7326
James changed RewardsUnlock yesterday


[10-Aug-18 03:43 PM] Alright#0419
do you have any more locked?


[10-Aug-18 03:43 PM] dukeleto#7326
for it to return "" instead of 0


[10-Aug-18 03:43 PM] siu#3920
oohh wait


[10-Aug-18 03:43 PM] dukeleto#7326
i am not sure if that is related


[10-Aug-18 03:43 PM] siu#3920
```./komodo-cli -ac_name=AT2 sendrawtransaction 0100000002e870329db39e98583e849f8866102420312703aad402ff6a101abb345326a4fd000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981407c2c667ab61de82900a727c028aaa35fe9017ab04f34bfb36356ca36ce0d984b607b58f384cc0a4de67fb6769ee4ba29d85c62921dd5f90b004b861f3f6993a2a100af038001e5a10001fffffffff3f80df56d00fdffbf6a13786743caff1d65e4016dfe9d8cf4935b68e85b6530000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981405361954d065375eb0c35e8d5e705437c74a65b1bfe6d9a0e2a23b261df88386850a40cf0916d96898203708630ab5f2ec735598609124db02340e3ab1c3d6c7ea100af038001e5a10001ffffffff03a3ea604e18090000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc4d9eb6d4e800000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000002c6a2ae5555349550000000000f3f80df56d00fdffbf6a13786743caff1d65e4016dfe9d8cf4935b68e85b653000000000
30803593aa984c67ada966f42b4d775f7c5d835bea30374d9f0f3fa092cbf0ba
```


[10-Aug-18 03:43 PM] siu#3920
got it


[10-Aug-18 03:43 PM] siu#3920
got a typo on the first try


[10-Aug-18 03:43 PM] siu#3920
http://cctest.explorer.dexstats.info/tx/30803593aa984c67ada966f42b4d775f7c5d835bea30374d9f0f3fa092cbf0ba


[10-Aug-18 03:43 PM] Alright#0419
do you have any more locked coins eligible to be unlocked in SIU plan


[10-Aug-18 03:44 PM] siu#3920
got it!


[10-Aug-18 03:44 PM] siu#3920
no


[10-Aug-18 03:44 PM] siu#3920
just that tx


[10-Aug-18 03:44 PM] siu#3920
i just wanted to do a simple test since i had issues before


[10-Aug-18 03:44 PM] Alright#0419
I'm trying to figure out if this is a problem with having 0 as minimum lock time or a problem with `rewardsunlock` itself


[10-Aug-18 03:46 PM] siu#3920
do a rewards plan with 0 days minimun lock?


[10-Aug-18 03:47 PM] Alright#0419
```
{
  "result": "success",
  "fundingtxid": "062211921373a002306628024d2ac0c912b79ace5baed673473b1325e87e7006",
  "name": "0time",
  "sbits": 435627324464,
  "APR": "10.00000000",
  "minseconds": 0,
  "maxseconds": 172800,
  "mindeposit": "1.00000000",
  "funding": "15439.99972528"
}
```


[10-Aug-18 03:47 PM] Alright#0419
try running this `./komodo-cli -ac_name=AT2 rewardsunlock 0time 062211921373a002306628024d2ac0c912b79ace5baed673473b1325e87e7006`


[10-Aug-18 03:48 PM] Alright#0419
for some reason you were able to unlock coins from the SIU plan, but my node was not


[10-Aug-18 03:48 PM] dukeleto#7326
@jl777c found a small bug which raises a question


[10-Aug-18 03:49 PM] dukeleto#7326
@jl777c tokeninfo fails hard if you give it a tokenid that does not exist, i would like to return a nicer error message


[10-Aug-18 03:50 PM] dukeleto#7326
i thought i had to change the return type of that RPC from a single item to JSON, but I see that is not the case. I will just make it return a nice error when there is no tokenid found


[10-Aug-18 04:03 PM] siu#3920
```    "account": "",
    "address": "RKvQKpkJgfMB5CbJQ2p6rUW4CZd7w2heQw",
    "category": "receive",
    "amount": 10000.01150541,
    "vout": 1,
    "confirmations": 5,
    "blockhash": "00e8ec18a6c8b2f9cae68b836be871ce1b806ec525ef20db10138d7077e18f15",
    "blockindex": 1,
    "blocktime": 1533941049,
    "expiryheight": 0,
    "txid": "30803593aa984c67ada966f42b4d775f7c5d835bea30374d9f0f3fa092cbf0ba",
    "walletconflicts": [
    ],
    "time": 1533940990,
    "timereceived": 1533940990,
    "vjoinsplit": [
    ],
    "size": 492
  }
```


[10-Aug-18 04:04 PM] siu#3920
i left the funds for one day


[10-Aug-18 04:04 PM] siu#3920
at 10% APR


[10-Aug-18 04:06 PM] siu#3920
i would think thatr 10% APR for one day on 10000 coins should be 1 or 2 coins reward


[10-Aug-18 04:06 PM] siu#3920
or am i wrong?


[10-Aug-18 04:06 PM] Alright#0419
~2.739726027


[10-Aug-18 04:06 PM] siu#3920
0.10/12=0.0083


[10-Aug-18 04:07 PM] siu#3920
0.0083/30=0.0003


[10-Aug-18 04:07 PM] siu#3920
0.0003*10000=2.77


[10-Aug-18 04:07 PM] siu#3920
so 2.77 coins should have been my reward


[10-Aug-18 04:08 PM] siu#3920
http://cctest.explorer.dexstats.info/tx/fda4265334bb1a106aff02d4aa03273120241066889f843e58989eb39d3270e8


[10-Aug-18 04:08 PM] siu#3920
this is my original deposit of 10000 coins yesterday


[10-Aug-18 04:08 PM] Alright#0419
can you try `./komodo-cli -ac_name=AT2 rewardsunlock 0time 062211921373a002306628024d2ac0c912b79ace5baed673473b1325e87e7006` from the same node you were able to do that `rewardsunlock` from


[10-Aug-18 04:08 PM] Alright#0419
Seems I'm unable to do any `rewardsunlock`s


[10-Aug-18 04:08 PM] siu#3920
and this is the unlock today: http://cctest.explorer.dexstats.info/tx/30803593aa984c67ada966f42b4d775f7c5d835bea30374d9f0f3fa092cbf0ba


[10-Aug-18 04:09 PM] siu#3920
```./komodo-cli -ac_name=AT2 rewardsunlock 0time 062211921373a002306628024d2ac0c912b79ace5baed673473b1325e87e7006
{
  "error": "couldnt create rewards unlock transaction"
}
siu@T460:~/komodo/src$ 
```


[10-Aug-18 04:26 PM] Alright#0419
kind of random, but I found this interesting. Why is this time stamp so far off?


[10-Aug-18 04:27 PM] Alright#0419
after that I got 
```
2018-08-10 23:25:28 ERROR: CheckEquihashSolution(): invalid solution
2018-08-10 23:25:28 ERROR: CheckBlockHeader(): Equihash solution invalid
2018-08-10 23:25:28 CheckBlock header errorKomodoMiner:
```


[10-Aug-18 04:27 PM] Alright#0419
when it thought it found another block that is


[10-Aug-18 04:28 PM] Alright#0419
oh wait I posted the wrong block


[10-Aug-18 04:28 PM] siu#3920
```b3de7107cde5fd97c3217b2b44f0e5f03858be42712ddfc91d8108406d58ee8a winnings 60000.00000000 bet 10000.00000000 at odds 5:1
```


[10-Aug-18 04:28 PM] siu#3920
woot!


[10-Aug-18 04:28 PM] siu#3920
won 6k!


[10-Aug-18 04:30 PM] Alright#0419
```
2018-08-10 23:21:10 generated 100000.0001 height.2362
2018-08-10 23:21:10 UpdateTip: new best=0073a0e93cc207bc26601c303baed4167e72fb95b22e6ce0a15ac26dfe9f61b6  height=2362  log2_work=19.160896  tx=3151  date=2018-08-10 23:12:17 progress=1.000000  cache=0.4MiB(933tx)
```
time stamp off by 9 minutes


[10-Aug-18 04:30 PM] Alright#0419
O.o


[10-Aug-18 04:35 PM] Alright#0419
did someone just add funds to this plan? 
```
./komodo-cli -ac_name=AT2 rewardsinfo 190b57b2b3a145e39cc486304629da630fe8395d47d38986db396bf5c4aa3137
{
  "result": "success",
  "fundingtxid": "190b57b2b3a145e39cc486304629da630fe8395d47d38986db396bf5c4aa3137",
  "name": "time",
  "sbits": 1701669236,
  "APR": "5.00000000",
  "minseconds": 0,
  "maxseconds": 432000,
  "mindeposit": "1.00000000",
  "funding": "1001540.00000000"
}
```


[10-Aug-18 04:35 PM] siu#3920
i didnt


[10-Aug-18 04:38 PM] Alright#0419
@dukeleto ?


[10-Aug-18 04:38 PM] Alright#0419
I didn't add that 1540


[10-Aug-18 04:39 PM] siu#3920
no idea


[10-Aug-18 04:39 PM] siu#3920
can you spot the address it came from?


[10-Aug-18 04:42 PM] Alright#0419
`rewardslock` is adding to the funding


[10-Aug-18 04:42 PM] Alright#0419
Has it always done that?


[10-Aug-18 04:42 PM] Alright#0419
Also, this could be a coincidence, but any time I send something like this `./komodo-cli -ac_name=AT2 rewardscreatefunding ttest1 1000000 5 0.01 5 1` the block timestamp is off by a couple minutes


[10-Aug-18 04:43 PM] Alright#0419
the 0.01 is time, so maybe?


[10-Aug-18 04:46 PM] Alright#0419
I do believe that was just a couple coincidences in row lol


[10-Aug-18 05:25 PM] siu#3920
i think there is something weird in the fundingtx APR math


[10-Aug-18 05:47 PM] siu#3920
i get this ```f14254f63171f8511e989a6ea22aa8cb353d2dc7f5d50fa5c81fbcb2b5d839f5 winnings 60000.00000000 bet 10000.00000000 at odds 5:1
```


[10-Aug-18 05:47 PM] siu#3920
as a winning bet


[10-Aug-18 05:47 PM] siu#3920
http://cctest.explorer.dexstats.info/tx/f14254f63171f8511e989a6ea22aa8cb353d2dc7f5d50fa5c81fbcb2b5d839f5


[10-Aug-18 05:47 PM] siu#3920
but i dont understand what happened in that tx


[10-Aug-18 05:48 PM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT2 sendrawtransaction 01000000020333f4ffd11dc41599c10075dfc3703e8ece6ff83d22cc4a5a4286d4929c5069000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140f6a0e80155960654fc2727b45cdcaa05bfeb3f4a554064e4749503f8f6b1f03367505fd2215abaf4156f60b10bd772352065c52fca3ec3d0ca0339ae137c2f45a100af038001e6a10001ffffffffed624a397accc1116e85bcbd2e2f3be955e79e302fdfa64a46f030ad334f81bb0300000049483045022100946a650ac0e50a99a0e1f13814bc992d8f82cb595a4f9fda4619eec64f246fc302201e2b769be5f1adae59267e404a71d9e1255e4f4c0849f7c5bbf81da51755c4cc01ffffffff05f0f8770248130000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc0010a5d4e8000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac73f45818a301000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae642534955000000000014cab169ccccadf29c6cc3571311508534cd0d8fda6713ab71b59363173bb4bfe3b3ce2ae6ade9077d9091d2cbaf936bde872fdc7c3368bbe94ae63193d66bc7000000000000000000000000000000000000000000000000000000000000000000000000
f14254f63171f8511e989a6ea22aa8cb353d2dc7f5d50fa5c81fbcb2b5d839f5```


[10-Aug-18 05:48 PM] Alright#0419
what command?


[10-Aug-18 05:49 PM] siu#3920
./komodo-cli -ac_name=AT2 dicebet SIU bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14 10000 5


[10-Aug-18 06:00 PM] Alright#0419
```
./komodo-cli -ac_name=AT2 rewardsunlock time 190b57b2b3a145e39cc486304629da630fe8395d47d38986db396bf5c4aa3137 59f423add269276bf3ce33ec6d3fb854e61da0a0adfa4e69bce5e31f28985aff
{
  "result": "success",
  "hex": "0100000002ff5a98281fe3e5bc694efaada0a01de654b83f6dec33cef36b2769d2ad23f459000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9814031598b8349b92d9d828c2f0ae4433b257752008d12e0975dcd63f55bd4f327570bf8196505a2f99a275db537348aeff288b1b1fdc170315597da7797bbd6cc6ba100af038001e5a10001ffffffff3731aac4f56b39db8689d3475d39e80f63da29463086c49ce345a1b3b2570b19000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140bcf858cb5cb77ab6c125ce8dcebf5888a198b8c12934992aa1a90030255e0fb61628b98417bddfbdefd1b61b677575d14ecbcd87d7f8557fe33b1a963429ae3ca100af038001e5a10001ffffffff03a1e27910f35a0000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc4f009b3b0000000023210222ec660d509122a116db32057aa00d9198d806a4bc5443dcb6f3c5fd91de3b8aac00000000000000002c6a2ae55574696d65000000003731aac4f56b39db8689d3475d39e80f63da29463086c49ce345a1b3b2570b1900000000"
}
```
```
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```
```
```
inputs 100000000000000 vs outputs 99999999976097
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx 59f423add269276bf3ce33ec6d3fb854e61da0a0adfa4e69bce5e31f28985aff
inputs 100000000000000 vs outputs 99999999976097
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx 59f423add269276bf3ce33ec6d3fb854e61da0a0adfa4e69bce5e31f28985aff
```


[10-Aug-18 06:03 PM] Alright#0419
Also, `rewardsunlock` without giving it a locked txid always gives 
```
./komodo-cli -ac_name=AT2 rewardsunlock time 190b57b2b3a145e39cc486304629da630fe8395d47d38986db396bf5c4aa3137
{
  "error": "couldnt create rewards unlock transaction"
}
```


[10-Aug-18 06:04 PM] Alright#0419
```
APR 5.00000000 minseconds.0 maxseconds.432000 mindeposit 1.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) fbd465c1d5b39c121f76a31f55c17dc239ae29a6bb51a4e3ece10b8c96400400/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 9e112f04ee9276d4f9b705b82182dd096a72ac9ccf03c90d06e2305904fa2400/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) c9694db21dd46da4665ec6e6e1e1ad80c42234fd16bb540ade0e8b3bd6103700/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) c95ac8227ea085892388f24dfcf9c6560bb2dcd13bbf864ea64026d99a543700/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 293768f8c9616a9950c3735d82c24a7eb3ef2dd4f5017ed9aec026ccffc7e500/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 5d09a49772d794d39cfe4c602749b8e79a4c84fa65edc701db897733dc6e4c01/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) f39d1499f801773bd4b48c9d2f802ebc982540ee7fde258747267affd9c94202/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 29bdd69e8298872846b1c23fd5add6b12467b900cdff024a5d298c3abcf66502/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 8d1859e8cc0982ba91a6612f55112a79a129db24d1656056190c708655967202/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) e96006be3fc8be69150723e2a6f6f44e41557015c94c0f0821efb45ab7c52303/v0 10.00000000
```


[10-Aug-18 06:04 PM] Alright#0419
```
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 8488b5e7a800719b790105e317885b4b60dbf21cec8a665533b7d342defa7703/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 6c2745d60d067b000046e418496502d1452ceaec015a485d4659b41b30d19703/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) c1a5e5432abd6ae89f97ae24abfde051131d6b105a6e49d3e7dd681f336e3a04/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 7a4d5476de5662ffbcfc73d088fb65bab380827dab5bab079445131185f44904/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 83e6d0a95c29ce8957e0de98e16f51b346cfac70ae5729bca5ebf363b8ba5804/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) c38f501c6fdb0c289b9c34941ab88d2c28fb90f268230ada33727f6598bdff04/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 474f932369ce2872b859b9a1e4d272a57ba9a735debb29b45b9683a165c34e05/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) ea1776a56a160fff76e4a1aae94ce4b7391042be973785631066eeb38d0a6105/v0 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) 9df29cbaf4d7687e67f2528903108f0f2793b791
```


[10-Aug-18 06:04 PM] Alright#0419
@jl777c ^


[10-Aug-18 06:07 PM] dukeleto#7326
@Alright i didn't add any funds to anything on AT2


[10-Aug-18 06:07 PM] dukeleto#7326
i haven't touched AT2 yet actually, been staying on regtest


[10-Aug-18 06:07 PM] Alright#0419
yea, I realized that `rewardslock` is adding to the funding value in `rewardsinfo`


[10-Aug-18 06:30 PM] siu#3920
from where?


[10-Aug-18 06:35 PM] Alright#0419
It adds the amount locked to the `"funding"` in rewardsinfo


[10-Aug-18 06:35 PM] Alright#0419
which I don't think is intended, maybe it is though


[10-Aug-18 06:36 PM] siu#3920
i dont think so


[10-Aug-18 06:38 PM] siu#3920
my guess is that it should calculate in a utxo the APR accrued by the rewardslock


[10-Aug-18 06:38 PM] siu#3920
then at  unlock it should release both the rewardslock utxo and the accrued APR utxo


[10-Aug-18 06:39 PM] siu#3920
that is what i always think happens with KMD rewards


[10-Aug-18 06:42 PM] siu#3920
btw, it happened again


[10-Aug-18 06:42 PM] siu#3920
```./komodo-cli -ac_name=AT2 dicebet SIU bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14 100000 5
{
  "error": "couldnt create faucet get transaction"
}
siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT2 dicelist
[
  "bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14"
]
siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT2 diceinfo bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14
{
  "result": "success",
  "fundingtxid": "bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 20,
  "timeoutblocks": 5,
  "funding": "0.00000000"
}
siu@T460:~/komodo/src$ 
```


[10-Aug-18 06:42 PM] siu#3920
diceinfo shows 0 dice funding


[10-Aug-18 06:44 PM] Alright#0419
```
./komodo-cli -ac_name=AT2 dicebet SIU bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14 100000 5
{
  "error": "couldnt create faucet get transaction"
}
```


[10-Aug-18 06:44 PM] Alright#0419
wut


[10-Aug-18 06:45 PM] Alright#0419
>dicebet
>faucetget


[10-Aug-18 06:45 PM] siu#3920
http://cctest.explorer.dexstats.info/address/REabWB7KjFN5C3LFMZ5odExHPenYzHLtVw


[10-Aug-18 06:45 PM] siu#3920
yeah


[10-Aug-18 06:45 PM] siu#3920
something weird is happening


[10-Aug-18 06:45 PM] siu#3920
dice funds should still be in the address


[10-Aug-18 06:47 PM] siu#3920
I made a higher bet instead of 10000 i did 100000


[10-Aug-18 06:47 PM] siu#3920
it was almost as big as the funding


[10-Aug-18 06:49 PM] siu#3920
if this is the funding address, then it means that a bet with odds that the resulting win would be higher than the funding balance instead of printing an error, its breaking the contract


[10-Aug-18 06:49 PM] siu#3920
what does `./komodo-cli -ac_name=AT2 diceinfo bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14` prints for you?


[10-Aug-18 06:49 PM] siu#3920
@Alright


[10-Aug-18 06:50 PM] Alright#0419
```
{
  "result": "success",
  "fundingtxid": "bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 20,
  "timeoutblocks": 5,
  "funding": "0.00000000"
}
```


[10-Aug-18 06:51 PM] siu#3920
`  "funding": "0.00000000"
`


[10-Aug-18 06:51 PM] siu#3920
ye√†h, it broke the contract


[10-Aug-18 06:51 PM] Alright#0419
Haven't touched the dice contract at all yet, still poking at rewards


[10-Aug-18 06:52 PM] siu#3920
dice has had a bug where at some point the fundingtx in diceinfo stops priting a balance and the dicebet calls return an error


[10-Aug-18 06:53 PM] siu#3920
new thing is that now the error refers to faucet üòÇ


[10-Aug-18 06:53 PM] siu#3920
before it refered to a null string


[10-Aug-18 09:26 PM] dukeleto#7326
interesting


[10-Aug-18 10:20 PM] dukeleto#7326
@jl777c you may want to cherry-pick this commit to jl777 branch, which fixes various return 0/"" values in assets: https://github.com/letolabs/komodo/commit/03fb3946a109df5b9d5dd57e717bf4127a9da299

{Embed}
https://github.com/letolabs/komodo/commit/03fb3946a109df5b9d5dd57e717bf4127a9da299
Fix various return values which should be std::string ¬∑ letolabs/...
https://images-ext-2.discordapp.net/external/NV9OwV-r5qqXnJrqIuC28RKmVRDThBWK6meklXuwe5E/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/30298


[11-Aug-18 12:49 AM] jl777c#5810
I already changed all return(0) to ""


[11-Aug-18 12:57 AM] jl777c#5810
pushed fix for the rewardsunlock being rejected, at least I think I did


[11-Aug-18 12:57 AM] jl777c#5810
locked amounts shouldnt increase the funding, but that isnt major for now, added to list to fix


[11-Aug-18 12:58 AM] jl777c#5810
i think before it crashed on null return, now it returns generic error messages that say faucet in them


[11-Aug-18 12:59 AM] jl777c#5810
dice should check there is enough funding for a bet to be created, but i guess some bugs. but I am not seeing specific steps to reproduce the bug so cant fix it


[11-Aug-18 01:09 AM] jl777c#5810
it is not clear how many dicebets were made, it sounds like more than 1. that makes is much harder to isolate. at this stage we need isolated bug causing rpc calls with a short a sequence as possible


[11-Aug-18 01:11 AM] jl777c#5810
certainly after doing a bunch of things it could end up in a bad state and that is not good, but it doesnt really help me fix it. If I have to setup all the tests and isolate the case, then I am doing all the testing myself. The idea is for bugs to be isolated to their purest form. Do X, bug happens is ideal, along with rawtx, rpc call and setup details.


[11-Aug-18 01:11 AM] jl777c#5810
I have seen things work at least once, so i dont thing we have bugs that happen in all scenarios anymore


[11-Aug-18 01:11 AM] jl777c#5810
thanks


[11-Aug-18 01:11 AM] jl777c#5810
at least these bugs give duke ideas on what test points to add to the automated tests


[11-Aug-18 04:23 AM] siu#3920
Try dicebet until it breaks.


[11-Aug-18 04:23 AM] siu#3920
Mine broke on the second win now


[11-Aug-18 04:24 AM] siu#3920
Will try to reproduce again


[11-Aug-18 06:05 AM] siu#3920
ok, im on latest


[11-Aug-18 06:05 AM] siu#3920
funded dicefund


[11-Aug-18 06:05 AM] siu#3920
```./komodo-cli -ac_name=AT2 diceinfo bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14
{
  "result": "success",
  "fundingtxid": "bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 20,
  "timeoutblocks": 5,
  "funding": "1000000.00000000"
}
```


[11-Aug-18 06:05 AM] siu#3920
will try a bet now


[11-Aug-18 06:05 AM] siu#3920
```./komodo-cli -ac_name=AT2 dicebet SIU bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14 1000 5
{
  "result": "success",
  "hex": "0100000002eb6dab6f9dc686a4ba955a24226ab3e1ce28e2869550427c63e1c64dd2b4f992000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814010f597153890a12d51e656e27b4f8bf8714c672d8c1288f44820284386477c50696e6a7e49c0c36b8def01867bb7284f57aef8dcac3af21a760203d4c1717a4ca100af038001e6a10001fffffffff539d8b5b2bc1fc8a50fd5f5c72d3d35cba82aa26e9a981e51f87131f65442f1030000004847304402206ca4057a1aaea5765316647f83088c92d3604d6af899e00617a9a258c3e1a79a022051cfff4bccc47d300c50b48c5e4cc446c8f0215df83071e443210b89c79f8ea101ffffffff0500407a10f35a0000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac4ebee1cf8b01000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae642534955000000000014cab169ccccadf29c6cc3571311508534cd0d8fda6713ab71b59363173bb4bf87c497730ebc42b86aa95db006e3484a0336c1c98ae2a571b8fa3717ead6add9000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[11-Aug-18 06:06 AM] siu#3920
```numentropy tx 1: 1000000.00000000
f377f4b7a0b550cdbe75db92e5ecb664687faaeb8d5ecb54d6d65a65094ae3e4 winnings 0.00000000 bet 1000.00000000 at odds 5:1
f377f4b7a0b550cdbe75db92e5ecb664687faaeb8d5ecb54d6d65a65094ae3e4 winnings 0.00000000 bet 1000.00000000 at odds 5:1
f377f4b7a0b550cdbe75db92e5ecb664687faaeb8d5ecb54d6d65a65094ae3e4 winnings 0.00000000 bet 1000.00000000 at odds 5:1
01000000030333f4ffd11dc41599c10075dfc3703e8ece6ff83d22cc4a5a4286d4929c50690100000048473044022017ad5a5e44f487e8be3c8c560d1c5ce184d43b58b354724ea09eab5cc1ec979702201d5135971d3bf24621b67dbdd1bb2aa5acc883b34ec2282ebba11afd1e06c7b801ffffffffe4e34a09655ad6d654cb5e8debaa7f6864b6ece592db75becd50b5a0b7f477f3000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814041a0842f4df8aa5831441a538afa193522d119f8fce080c3683079cd81acf0ee0f705e8f611b8c33e5a5a1b6a487f23494cb4ebc4de7f4513356d92b96d7735aa100af038001e6a10001ffffffffe4e34a09655ad6d654cb5e8debaa7f6864b6ece592db75becd50b5a0b7f477f3010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81401549be97370cc86fd6dfea2128813fb4d8877278f2fd5e5fcbaff7e231940e5277b4b0293d07c43b1f6e1e70aabdcadd8f2680db6f8ca27703b98049775ab762a100af038001e6a10001ffffffff030028f1580a5b0000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae64c534955000000000014cab169ccccadf29c6cc3571311508534cd0d8fda6713ab71b59363173bb4bf93414e67f0f68245c24caa2abe612cd335a7ed03cb955e4b1caa7d917a28f391a96121e0cf10c7f1c4924ef3685c80d5298d55977efd7e4998044cbfdda62d6a00000000
0c0a6147c49a877c33b69d1f20d28782f39cfbacd729c5440791f4f2309a390f
added to mempool and broadcast
f377f4b7a0b550cdbe75db92e5ecb664687faaeb8d5ecb54d6d65a65094ae3e4 winnings 0.0000```


[11-Aug-18 06:06 AM] siu#3920
lost


[11-Aug-18 06:07 AM] siu#3920
```./komodo-cli -ac_name=AT2 diceinfo bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14
{
  "result": "success",
  "fundingtxid": "bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 20,
  "timeoutblocks": 5,
  "funding": "1001000.00000000"
}
```


[11-Aug-18 06:07 AM] siu#3920
dice info now shows 1001000 funding


[11-Aug-18 06:07 AM] siu#3920
which is correct


[11-Aug-18 06:08 AM] siu#3920
``` ./komodo-cli -ac_name=AT2 dicebet SIU bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14 1000 5{
  "result": "success",
  "hex": "01000000020f399a30f2f4910744c529d7acfb9cf38287d2201f9db6337c879ac447610a0c000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140b9439608a74aa17fda03e6ad4c3bb5258509ffa2d33f61e4b5ab5df71070a2ad1dfae89caf1d21c9868b0d77def775b25aa3ac505aecd5ca8686576eb73a8865a100af038001e6a10001ffffffffe4e34a09655ad6d654cb5e8debaa7f6864b6ece592db75becd50b5a0b7f477f30300000048473044022058b78d1734f97d523794db3a73b740114da98e48ce75d50ab9d502a4276f301a02206dc5fd21bf369cfcb83d60db4bc0a07f20a21d6143d3aa919e4f9dd3abd1e65c01ffffffff050028f1580a5b0000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac29886a877401000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae642534955000000000014cab169ccccadf29c6cc3571311508534cd0d8fda6713ab71b59363173bb4bff88c3faae7e0f98c2b70f902c82dc840f6475d47d00ea7952bc1c26630fa5a95000000000000000000000000000000000000000000000000000000000000000000000000"
}
``` tried the same bet again


[11-Aug-18 06:09 AM] siu#3920
```numentropy tx 1: 1001000.00000000
1ad02de9e062b57b22e30eeaab53e321dbdb310551b0f57c7f58c6a1e38091e2 winnings 0.00000000 bet 1000.00000000 at odds 5:1
1ad02de9e062b57b22e30eeaab53e321dbdb310551b0f57c7f58c6a1e38091e2 winnings 0.00000000 bet 1000.00000000 at odds 5:1
1ad02de9e062b57b22e30eeaab53e321dbdb310551b0f57c7f58c6a1e38091e2 winnings 0.00000000 bet 1000.00000000 at odds 5:1
01000000030f399a30f2f4910744c529d7acfb9cf38287d2201f9db6337c879ac447610a0c010000004847304402203a8ba070562cba397a42e2df26bc0bea71af9f32053f5d31e2655e9e17db861502206223975bac6287706a47ee98d7339ec7da58b53bed894b920dddafd2569d1b6101ffffffffe29180e3a1c6587f7cf5b0510531dbdb21e353abea0ee3227bb562e0e92dd01a000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81401826057b2cb59725a6852df935640faa6956d2f0afb85ecaefc2cb6798df7a4523691b73bbbe25e21a0e3f95d0a7e7addfd373d0209d4e9445eec69e8adfc491a100af038001e6a10001ffffffffe29180e3a1c6587f7cf5b0510531dbdb21e353abea0ee3227bb562e0e92dd01a010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814038e72342fcbbae08af77a21aa41eac0f325d74ab7a6a465f626daf29fd1875032cdec58dfce11146101e4a70ea47fdec8d83bf121fb56493115e01aeb0cbecdba100af038001e6a10001ffffffff03001068a1215b0000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae64c534955000000000014cab169ccccadf29c6cc3571311508534cd0d8fda6713ab71b59363173bb4bfa2e27135eb32e7db6eae885bdfa30092d937903c860b38a4ea8a1cb257698e5ae3b3ce2ae6ade9077d9091d2cbaf936bde872fdc7c3368bbe94ae63193d66bc700000000
0cdecf053d6944b6e1843e8ae0fe23ffca81877ca933ffd51e5b1c9c8f3c5a1f
added to mempool and broadcast
1ad02de9e062b57b22e30eeaab53e321dbdb310551b0f57c7f58c6a1e38091e2 winnings 0.00000000 bet 1000.00000000 at odds 5:1
```


[11-Aug-18 06:09 AM] siu#3920
anoither loss


[11-Aug-18 06:11 AM] siu#3920
```./komodo-cli -ac_name=AT2 diceinfo bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14{
  "result": "success",
  "fundingtxid": "bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 20,
  "timeoutblocks": 5,
  "funding": "1002000.00000000"
}
```


[11-Aug-18 06:11 AM] siu#3920
again funding updated successfully


[11-Aug-18 06:11 AM] siu#3920
```./komodo-cli -ac_name=AT2 dicebet SIU bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14 1000 5{
  "result": "success",
  "hex": "01000000021f5a3c8f9c1c5b1ed5ff33a97c8781caff23fee08a3e84e1b644693d05cfde0c000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140d7a8f16f5692aa36f09ab10f395997c74a18fb8038cd88715cf0b2e2eccddab362c5a3377b2570cab2b1ed519fe7849a063383479a07ef28fa477b7cae966088a100af038001e6a10001ffffffffe29180e3a1c6587f7cf5b0510531dbdb21e353abea0ee3227bb562e0e92dd01a03000000494830450221009ae08278634b9e2b963ce3d6cb7df2db86bd38d29baba62596c0b7ad88086bbd022069eeb38782a0363f86213067f7200b1cfcf37709d8059146fd6c7af50b8fa82601ffffffff05001068a1215b0000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac0452f33e5d01000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae642534955000000000014cab169ccccadf29c6cc3571311508534cd0d8fda6713ab71b59363173bb4bf0daa321dbf361fb233c896427825338c0f4aac77c12f3fb24af74aef9117d251000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[11-Aug-18 06:11 AM] siu#3920
again


[11-Aug-18 06:13 AM] siu#3920
```numentropy tx 1: 1002000.00000000
c77e92c02f95c668a97c5551ee6a8ae342d3e7923c987ef5866d3921d1287837 winnings 0.00000000 bet 1000.00000000 at odds 5:1
c77e92c02f95c668a97c5551ee6a8ae342d3e7923c987ef5866d3921d1287837 winnings 0.00000000 bet 1000.00000000 at odds 5:1
c77e92c02f95c668a97c5551ee6a8ae342d3e7923c987ef5866d3921d1287837 winnings 0.00000000 bet 1000.00000000 at odds 5:1
01000000031f5a3c8f9c1c5b1ed5ff33a97c8781caff23fee08a3e84e1b644693d05cfde0c0100000049483045022100afbef50dc71ec2083469775a534087e5c19e3420ac62da2332a8bf1c211d76ee022076bae83b0f2feae48fdc7e74b40a9cff6bd05034c27ac1568ff9f9bbb324ab6901ffffffff377828d121396d86f57e983c92e7d342e38a6aee51557ca968c6952fc0927ec7000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81402a536c904d1abda87b60eb648395638ee9cd81541130538c02a7c9c440c9e63b32fce0c07f7d8bf2266e801030baecec47140412afc9d08ddb930872f0898843a100af038001e6a10001ffffffff377828d121396d86f57e983c92e7d342e38a6aee51557ca968c6952fc0927ec7010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814034618cc962c7ebcfe1731e925071196f5dd724194c5b58d29f4125ca1e9e05b54ea4848983b93521d2c7719923e019326176469734ea7ac8032574f0fed075b2a100af038001e6a10001ffffffff0300f8dee9385b0000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae64c534955000000000014cab169ccccadf29c6cc3571311508534cd0d8fda6713ab71b59363173bb4bf15a4b0c9c122d4b679501e4f9882226e2b08d5d383757a054b8d4c32e9606ebaf88c3faae7e0f98c2b70f902c82dc840f6475d47d00ea7952bc1c26630fa5a9500000000
14588ed8ebc245640c082f9e9c7a9673fe6dcd75b1f0612abca17399167051e9
added to mempool and broadcast
c77e92c02f95c668a97c5551ee6a8ae342d3e7923c987ef5866d3921d1287837 winnings 0.00000000 bet 1000.00000000 at odds 5:1
``` another loss


[11-Aug-18 06:13 AM] siu#3920
```./komodo-cli -ac_name=AT2 diceinfo bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14{
  "result": "success",
  "fundingtxid": "bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 20,
  "timeoutblocks": 5,
  "funding": "1003000.00000000"
}

``` diceinfo updated


[11-Aug-18 06:14 AM] siu#3920
```./komodo-cli -ac_name=AT2 dicebet SIU bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14 1000 5{
  "result": "success",
  "hex": "0100000002e95170169973a1bc2a61f0b175cd6dfe73967a9c9e2f080c6445c2ebd88e5814000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140c4dfd95acec5e683172bb336c37b43c3382a89f59e9f7c50d4e0c0e2ba21e0b451243bef4f25b4f491925a0439a69d1df515359e28d784e98c1335e4da229299a100af038001e6a10001ffffffff377828d121396d86f57e983c92e7d342e38a6aee51557ca968c6952fc0927ec70300000049483045022100f7ad1e559cf42e0504549bdcefd6dab2d9cde447fd00410ba5e4c744d591041c0220066990230961681fe0f317e2a6b9ba80830f10014025ed404bf0858cd39c3a8f01ffffffff0500f8dee9385b0000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6acdf1b7cf64501000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae642534955000000000014cab169ccccadf29c6cc3571311508534cd0d8fda6713ab71b59363173bb4bf234be70797018a2c1c7e55f5ed15519c43b81e8f873338ed374db893124ac156000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[11-Aug-18 06:14 AM] siu#3920
4th try


[11-Aug-18 06:19 AM] siu#3920
and i think i hit the issue:


[11-Aug-18 06:19 AM] siu#3920
```numentropy tx 1: 1003000.00000000
14588ed8ebc245640c082f9e9c7a9673fe6dcd75b1f0612abca17399167051e9.(L 1003000.00000000) check first
f14254f63171f8511e989a6ea22aa8cb353d2dc7f5d50fa5c81fbcb2b5d839f5 B refsbits.554953 sbits.554953 nValue 211999.99990000
f14254f63171f8511e989a6ea22aa8cb353d2dc7f5d50fa5c81fbcb2b5d839f5 B refsbits.554953 sbits.554953 nValue 10000.00000000
numentropy tx 1: 1003000.00000000
9a07d76114670f6c39e2afc1dd6919043b1602804d2c6c036cee7e7ee185082e winnings 6000.00000000 bet 1000.00000000 at odds 5:1
9a07d76114670f6c39e2afc1dd6919043b1602804d2c6c036cee7e7ee185082e winnings 6000.00000000 bet 1000.00000000 at odds 5:1
9a07d76114670f6c39e2afc1dd6919043b1602804d2c6c036cee7e7ee185082e winnings 6000.00000000 bet 1000.00000000 at odds 5:1
not enough inputs for 5000.00010000
9a07d76114670f6c39e2afc1dd6919043b1602804d2c6c036cee7e7ee185082e winnings 6000.00000000 bet 1000.00000000 at odds 5:1
```


[11-Aug-18 06:19 AM] siu#3920
i had a win


[11-Aug-18 06:19 AM] siu#3920
but : `not enough inputs for 5000.00010000`


[11-Aug-18 06:19 AM] siu#3920
now i have: ```./komodo-cli -ac_name=AT2 diceinfo bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14{
  "result": "success",
  "fundingtxid": "bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 20,
  "timeoutblocks": 5,
  "funding": "0.00000000"
}
```


[11-Aug-18 06:19 AM] siu#3920
0 funding on diceinfo


[11-Aug-18 06:20 AM] siu#3920
i never got the: `added to mempool and broadcast
`


[11-Aug-18 06:20 AM] siu#3920
message


[11-Aug-18 06:23 AM] siu#3920
also got this from `dicefinish`: ```./komodo-cli -ac_name=AT2 dicefinish SIU bfb43b176393b571ab1367da8f0dcd348550111357c36c9cf2adcccc69b1ca14 9a07d76114670f6c39e2afc1dd6919043b1602804d2c6c036cee7e7ee185082e{
  "error": "couldnt create dicefinish transaction"
}
```


[11-Aug-18 06:24 AM] siu#3920
and console print of `dicefinish was`: ```numentropy tx 0: 0.00000000
9a07d76114670f6c39e2afc1dd6919043b1602804d2c6c036cee7e7ee185082e winnings 6000.00000000 bet 1000.00000000 at odds 5:1
not enough inputs for 5000.00010000
```


[11-Aug-18 06:24 AM] siu#3920
@jl777c hope all this is enough for the bug report.


[11-Aug-18 07:51 AM] dukeleto#7326
@siu i will try to reproduce the bug in python tests


[11-Aug-18 07:53 AM] siu#3920
great!


[11-Aug-18 07:59 AM] dukeleto#7326
i wrote a bunch of rewards tests last night, just starting on dice tests today


[11-Aug-18 08:00 AM] siu#3920
cool, thanks


[11-Aug-18 08:10 AM] dukeleto#7326
@jl777c the commit i asked you to cherry-pick fixes these "return(0)" statements which are still in jl777 branch: https://github.com/jl777/komodo/blob/jl777/src/cc/CCassetstx.cpp#L64

{Embed}
https://github.com/jl777/komodo/blob/jl777/src/cc/CCassetstx.cpp
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[11-Aug-18 08:10 AM] dukeleto#7326
and there are more üòÉ


[11-Aug-18 08:10 AM] dukeleto#7326
I just fixed the ones relevant to my tests


[11-Aug-18 08:11 AM] dukeleto#7326
i can also do a PR from cctests to jl777 soon, i just have various small hacks that I want to fix before doing that. Which is why I mentioned the cherry-pick


[11-Aug-18 10:39 AM] dukeleto#7326
@jl777c https://github.com/jl777/komodo/pull/810

{Embed}
https://github.com/jl777/komodo/pull/810
First cryptoconditions sync by leto ¬∑ Pull Request #810 ¬∑ jl777/...
This is a good time to sync the cctests branch to jl777.

All tests pass
Basic tests for faucet, rewards, dice and token
Various fixed to the Zcash test suite we inherited to make it work correctly...
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[11-Aug-18 10:40 AM] dukeleto#7326
46 commits of testing goodness


[11-Aug-18 12:15 PM] jl777c#5810
thanks @siu i didnt know just doing the same bet repeatedly causes this! i guess using higher odds is the key. also imagine that diceinfo is not correct and that there are actually funds there. likely you can see it in the dice CC address. of course, why it complains of not enough when there is clearly more than enough, that is the bug


[11-Aug-18 12:15 PM] jl777c#5810
@dukeleto merged your pull request! thanks

{Reactions}
Komodo 

[11-Aug-18 12:32 PM] jl777c#5810
actually the dicefunds did disappear! not sure where they ended up. there seem to be several dice plans and maybe it got confused and sent it to the wrong one. maybe if there is only one dice plan it wont have this problem


[11-Aug-18 12:33 PM] jl777c#5810
the very strange thing is that each dicebet that finished should end up with either 'W', 'L' or 'T' and each of those should be valid entropy and dicefunds. this seems to not be happening at all...


[11-Aug-18 12:34 PM] jl777c#5810
until I fix this, dice testing will just break when the funds get lost. this will take a while to fix. for now please test the other CC contracts


[11-Aug-18 12:39 PM] jl777c#5810
@siu are you dicebetting on the same node that created the dicefund? if so plz test when dicebet is done from a different node


[11-Aug-18 12:40 PM] siu#3920
Ok. Will try this later or tomorrow.


[11-Aug-18 12:40 PM] siu#3920
Yes. it was the same node


[11-Aug-18 12:41 PM] jl777c#5810
that might explain how it gets confused. it is much rarer real world case and I was testing with dicbet from a different node, with the dice funding node online


[11-Aug-18 12:42 PM] jl777c#5810
i will look into the same node betting issue, likely I assumed it was a different node somewhere


[11-Aug-18 12:48 PM] siu#3920
Yes. that might be the issue.


[11-Aug-18 01:10 PM] jl777c#5810
isolated the problem


[11-Aug-18 01:11 PM] jl777c#5810
a winning bet tx takes funds from a different dice plan.


[11-Aug-18 01:11 PM] jl777c#5810
no need to test until I fix this, not sure how it is doing it, but it is very bad behavior


[11-Aug-18 01:16 PM] Alright#0419
```
./komodo-cli -ac_name=AT2 rewardsunlock time 190b57b2b3a145e39cc486304629da630fe8395d47d38986db396bf5c4aa3137

modo0@ubuntu-16gb-nbg1-2:~/komodo/src$ ./rawsend 0100000002063c890bd4c217e2c3b138bccdc64be751e5a9256aab47e48ab3db72ec657fa8000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981409cffc9dcda8b7a351368c7c8a0a9c702a49a998a3b8b52151e2a5d6d2b5c17ac28f75bd9a13d7266342588f9df67469daf54d3b348204fe44e6fa941d294c001a100af038001e5a10001ffffffff3731aac4f56b39db8689d3475d39e80f63da29463086c49ce345a1b3b2570b19000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981402e675f0cbb13c919a75c27ec84d388a3b829e3e3a1b00fd68c245da5924b07f32c4653890d0ab7fca9a0b2549cb351feebad906bae1bd52f97a59a453ba9ef14a100af038001e5a10001ffffffff036b4a7810f35a0000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc85989c3b0000000023210222ec660d509122a116db32057aa00d9198d806a4bc5443dcb6f3c5fd91de3b8aac00000000000000002c6a2ae55574696d65000000003731aac4f56b39db8689d3475d39e80f63da29463086c49ce345a1b3b2570b1900000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[11-Aug-18 01:16 PM] Alright#0419
```
2018-08-11 20:14:09 ERROR: CScriptCheck(): de931e3606b0d7513dcce977dd021f9c51955078bd329b2e311f56da966500ae:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-11 20:14:09 ERROR: CScriptCheck(): de931e3606b0d7513dcce977dd021f9c51955078bd329b2e311f56da966500ae:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-11 20:14:09 ERROR: AcceptToMemoryPool: ConnectInputs failed de931e3606b0d7513dcce977dd021f9c51955078bd329b2e311f56da966500ae
```


[11-Aug-18 01:16 PM] Alright#0419

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/477933427803553792/rewardsunlockstdout


[11-Aug-18 01:17 PM] Alright#0419
The plan was created with 0 minimum time, not sure if that's the problem


[11-Aug-18 01:17 PM] jl777c#5810
@siu pushed fix for dicebet win stealing funds from a different plan. maybe there are more bugs but it should be a lot more stable now


[11-Aug-18 01:17 PM] Alright#0419
also locked a couple hundred `rewardslock` in it


[11-Aug-18 01:18 PM] Alright#0419
same result if I give `rewardsunlock` a specific txid to unlock 
```
minseconds 0 maxseconds 432000
duration 78277 (1534018441 - 1533940164) numblocks 1287 (3625 - 2338)
amount 10.00000000 5000000000.00000000 158 -> duration.78277 reward 0.00124107
inputs 100000000000000 vs outputs 99999999865893
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx c95ac8227ea085892388f24dfcf9c6560bb2dcd13bbf864ea64026d99a543700
minseconds 0 maxseconds 432000
duration 78277 (1534018441 - 1533940164) numblocks 1287 (3625 - 2338)
amount 10.00000000 5000000000.00000000 158 -> duration.78277 reward 0.00124107
inputs 100000000000000 vs outputs 99999999865893
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx c95ac8227ea085892388f24dfcf9c6560bb2dcd13bbf864ea64026d99a543700
```


[11-Aug-18 01:19 PM] Alright#0419
```
./komodo-cli -ac_name=AT2 rewardsunlock time 190b57b2b3a145e39cc486304629da630fe8395d47d38986db396bf5c4aa3137 c95ac8227ea085892388f24dfcf9c6560bb2dcd13bbf864ea64026d99a543700
{
  "result": "success",
  "hex": "01000000020037549ad92640a64e86bf3bd1dcb20b56c6f9fc4df288238985a07e22c85ac9000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140aed360ced672c912ffc092d2dff0e9ae065ca7f7d1ee515571aa2ff22ce7b55d3c074bc318c36a2ec519dec990491102c490211292cf6a8442c6262ae6e2fa18a100af038001e5a10001ffffffff3731aac4f56b39db8689d3475d39e80f63da29463086c49ce345a1b3b2570b19000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9814099d5214482b3b4e5a809c3e8d51e0b963c0aebdec4a4583a5024d9189bbae41006ec51e11a3457ab09da09158a4b266c23b8d1cc3689585ca39f86439eba303ba100af038001e5a10001ffffffff0325347810f35a0000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cccbae9c3b0000000023210222ec660d509122a116db32057aa00d9198d806a4bc5443dcb6f3c5fd91de3b8aac00000000000000002c6a2ae55574696d65000000003731aac4f56b39db8689d3475d39e80f63da29463086c49ce345a1b3b2570b1900000000"
}
```


[11-Aug-18 01:19 PM] jl777c#5810
is de931e3606b0d7513dcce977dd021f9c51955078bd329b2e311f56da966500ae/v0 valid


[11-Aug-18 01:20 PM] Alright#0419
./komodo-cli -ac_name=AT2 getrawtransaction de931e3606b0d7513dcce977dd021f9c51955078bd329b2e311f56da966500ae
error code: -5
error message:
No information available about transaction


[11-Aug-18 01:20 PM] Alright#0419
ü§î


[11-Aug-18 01:21 PM] Alright#0419
Oh right >.<


[11-Aug-18 01:21 PM] Alright#0419
that's the txid of the raw tx that failed to send


[11-Aug-18 01:21 PM] Alright#0419
looking at it now


[11-Aug-18 01:22 PM] jl777c#5810
pushed fix for rewardsunlock


[11-Aug-18 01:22 PM] jl777c#5810
new version should accept the above tx, but of course will fork the chain


[11-Aug-18 01:27 PM] Alright#0419
vin0 10 AT2 from `rewardslock`
vin1 1000000 AT2 from `rewardscreatingfunding`

vout0 999999.99871595 change to plan 
vout1 10.00118405 output to vin0 address
vout2 0 AT2 OP_RETURN


[11-Aug-18 01:27 PM] Alright#0419
why was it saying `inputs 100000000000000 vs outputs 99999999865893`


[11-Aug-18 01:27 PM] Alright#0419
that number for outputs is off


[11-Aug-18 01:28 PM] Alright#0419
inputs - outputs is 0.0001


[11-Aug-18 01:30 PM] Alright#0419
inputs number was off also


[11-Aug-18 01:31 PM] Alright#0419
@siu update please, going to hard fork when you're ready


[11-Aug-18 01:45 PM] Alright#0419
ok, just going to do it, you'll probably have to resync, both my nodes and explorer updated


[11-Aug-18 01:47 PM] Alright#0419
```
./komodo-cli -ac_name=AT2 rewardsunlock time 190b57b2b3a145e39cc486304629da630fe8395d47d38986db396bf5c4aa3137
...

modo0@ubuntu-16gb-nbg1-2:~/komodo/src$ ./rawsend 0100000002063c890bd4c217e2c3b138bccdc64be751e5a9256aab47e48ab3db72ec657fa8000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9814080b835229b0003eb935f2dd8596d00069d1c947aa894be17ef9f3be8cd813a543669551c7e183699dcc5f890e33255c9f8b31f355b43182a16eb764e530427baa100af038001e5a10001ffffffff3731aac4f56b39db8689d3475d39e80f63da29463086c49ce345a1b3b2570b19000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140ac31db22545cb01cfa6780361862af715984400b80330273bc18e4a926cceb287124fc76cbbc4aa737a1ad8cfa0ff0bb4e25740579b9109ec61199047b4998ffa100af038001e5a10001ffffffff03d33d7810f35a0000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc1da59c3b0000000023210222ec660d509122a116db32057aa00d9198d806a4bc5443dcb6f3c5fd91de3b8aac00000000000000002c6a2ae55574696d65000000003731aac4f56b39db8689d3475d39e80f63da29463086c49ce345a1b3b2570b1900000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[11-Aug-18 01:47 PM] Alright#0419
```
2018-08-11 20:46:24 ERROR: CScriptCheck(): d2e0288cfaed6239354b3f4f7947f55dc60acaa58dc1e606f73253af2811e240:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-11 20:46:24 ERROR: CScriptCheck(): d2e0288cfaed6239354b3f4f7947f55dc60acaa58dc1e606f73253af2811e240:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-11 20:46:24 ERROR: AcceptToMemoryPool: ConnectInputs failed d2e0288cfaed6239354b3f4f7947f55dc60acaa58dc1e606f73253af2811e240
```


[11-Aug-18 01:48 PM] Alright#0419

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/477941293536772116/rewardsunlockstdout


[11-Aug-18 01:51 PM] Alright#0419
vin0 10 AT2 from `rewardslock`
vin1 1000000 AT2 from `rewardscreatefunding`

vout0 999999.99868371 AT2 change to CC address
vout1 10.00121629 AT2 to `rewardslock` address
vout2 0 AT2 OP_RETURN


[11-Aug-18 01:51 PM] siu#3920
Im out with the family. Will come back later


[11-Aug-18 01:53 PM] Alright#0419
outputs 999999.99868371+10.00121629 =  1000009.9999
inputs 1000010


[11-Aug-18 01:54 PM] Alright#0419
inputs 100001000000000 vs outputs 99999999868371 txfee 131629


[11-Aug-18 01:55 PM] Alright#0419
That^ isn't counting vout1


[11-Aug-18 02:05 PM] jl777c#5810
it is adding up ONLY the CC inputs and outputs


[11-Aug-18 02:06 PM] jl777c#5810
but it counts the reward that went to the normal output as that came from the CC input


[11-Aug-18 02:06 PM] jl777c#5810
i just pass in the "txfee" to be the actual txfee + reward


[11-Aug-18 02:06 PM] jl777c#5810
so the inputs and outputs, with the corrections add up correctly.


[11-Aug-18 02:06 PM] jl777c#5810
but it still got an error?


[11-Aug-18 02:08 PM] jl777c#5810
ConnectInputs failed  means one of the vins isnt confirmed


[11-Aug-18 02:22 PM] Alright#0419
strange


[11-Aug-18 02:22 PM] Alright#0419
./komodo-cli -ac_name=AT2 getrawtransaction a87f65ec72dbb38ae447ab6a25a9e551e74bc6cdbc38b1c3e217c2d40b893c06

works


[11-Aug-18 02:22 PM] Alright#0419
but the explorer can't find it


[11-Aug-18 02:23 PM] Alright#0419
that's the rewardslock vin


[11-Aug-18 02:25 PM] Alright#0419
Ah crap, explorer synced to the wrong chain


[11-Aug-18 02:25 PM] Alright#0419
or stopped syncing


[11-Aug-18 02:25 PM] Alright#0419
maybe the chain can't sync from scratch any more, let me check


[11-Aug-18 02:26 PM] Alright#0419
```
2018-08-11 21:26:13 Misbehaving: 195.201.20.230:40949 (0 -> 100)
2018-08-11 21:26:13 InvalidChainFound: invalid block=004f5cb21f31be76dc00f5630a68f1922c645868a064bc9f69042b6620a3305d  height=1739  log2_work=18.954389  date=2018-08-09 18:13:26
2018-08-11 21:26:13 InvalidChainFound:  current best=0023e81a76ff989f6f8e5f2210099a1ddaf90bfbc79fe9ae115e4dda9af6c9ee  height=1738  log2_work=18.953352  date=2018-08-09 18:13:22
2018-08-11 21:26:13 ERROR: ConnectTip(): ConnectBlock 004f5cb21f31be76dc00f5630a68f1922c645868a064bc9f69042b6620a3305d failed
2018-08-11 21:26:13 InvalidChainFound: invalid block=004f5cb21f31be76dc00f5630a68f1922c645868a064bc9f69042b6620a3305d  height=1739  log2_work=18.954389  date=2018-08-09 18:13:26
2018-08-11 21:26:13 InvalidChainFound:  current best=0023e81a76ff989f6f8e5f2210099a1ddaf90bfbc79fe9ae115e4dda9af6c9ee  height=1738  log2_work=18.953352  date=2018-08-09 18:13:22
```


[11-Aug-18 02:26 PM] Alright#0419
AT3 in bound


[11-Aug-18 02:27 PM] CHMEX#0686
"blocks": 1738,
  "longestchain": 3655,


[11-Aug-18 02:27 PM] CHMEX#0686
the explorer does not go past 1738 anymore


[11-Aug-18 02:32 PM] Alright#0419
`./komodod -ac_cc=1 -ac_name=AT3 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKEY> -addnode=195.201.20.230 -addnode=195.201.137.5 -addnode=195.201.20.230`


[11-Aug-18 02:32 PM] Alright#0419
Pinned a message.


[11-Aug-18 02:32 PM] Alright#0419
don't mine blocks yet, very young chain, could fork it


[11-Aug-18 02:41 PM] CHMEX#0686
explorer is now on new chain - no mining


[11-Aug-18 02:41 PM] Alright#0419
thanks üòÑ


[11-Aug-18 02:42 PM] CHMEX#0686
np


[11-Aug-18 03:06 PM] Alright#0419
seems `faucetget` is no longer limited to 1 per block rather limited to how many faucetfund UTXOs there are


[11-Aug-18 03:06 PM] Alright#0419
http://cctest.explorer.dexstats.info/block/019d3efc45c6ab2b349ef5b54fb08d30e81250a7ba3f0e1ab92dd28d474a9007


[11-Aug-18 03:07 PM] Alright#0419
http://cctest.explorer.dexstats.info/block/01673feec50f0c7bf271f31f78b3c629a712eca9849d6e01e53263e365c34853


[11-Aug-18 03:07 PM] Alright#0419
All the txs in those blocks are `faucetget`s


[11-Aug-18 04:26 PM] Alright#0419
still getting `rewardsunlock` errors


[11-Aug-18 04:26 PM] Alright#0419
```
minseconds 0 maxseconds 172800
duration 5863 (1534029809 - 1534023946) numblocks 124 (174 - 50)
amount 10.00000000 20000000000.00000000 634 -> duration.5863 reward 0.00037182
inputs 1001000000000 vs outputs 999999952818 txfee 47182
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx 6261033818c1ce97a86e9223a2f67873d5d52bf2ed5997bb4eb3336bd81b6600
minseconds 0 maxseconds 172800
duration 5863 (1534029809 - 1534023946) numblocks 124 (174 - 50)
amount 10.00000000 20000000000.00000000 634 -> duration.5863 reward 0.00037182
inputs 1001000000000 vs outputs 999999952818 txfee 47182
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx 6261033818c1ce97a86e9223a2f67873d5d52bf2ed5997bb4eb3336bd81b6600
```


[11-Aug-18 04:27 PM] Alright#0419
`./komodo-cli -ac_name=AT3 rewardsunlock 0time 088a9d869faaea88858a8e2e22015955111916c83d7f78bd9fe807649a1e9f81`
```
./rawsend 010000000200661bd86b33b34ebb9759edf22bd5d57378f6a223926ea897cec11838036162000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140a366fe73fdd6b363322e17963275e814ce3f3ea8d3119bf6553708cb330985174286bbb9d1fadf476dcd5d8b210ad2c084e5596372036838a15ddd6ba9c917a7a100af038001e5a10001ffffffff819f1e9a6407e89fbd787f3dc8161911555901222e8e8a8588eaaa9f869d8a08000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140495f5c6b75761404203d8f257c59107df3ae11cc9c7b41df35f46284e61fe8261bb35369a7230c5a62a4efecaf9c8535533aba0de2bdda16e1b54e647be78051a100af038001e5a10001ffffffff03b257a4d4e8000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc3e5b9b3b0000000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac00000000000000002c6a2ae5553074696d65000000819f1e9a6407e89fbd787f3dc8161911555901222e8e8a8588eaaa9f869d8a0800000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[11-Aug-18 04:27 PM] Alright#0419
```
2018-08-11 23:24:26 ERROR: CScriptCheck(): d2af746aeffb78f31b899c92e4c88ffb0c0bd7af620fecc5ba1f7bb2760b18bd:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-11 23:24:26 ERROR: CScriptCheck(): d2af746aeffb78f31b899c92e4c88ffb0c0bd7af620fecc5ba1f7bb2760b18bd:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-11 23:24:26 ERROR: AcceptToMemoryPool: ConnectInputs failed d2af746aeffb78f31b899c92e4c88ffb0c0bd7af620fecc5ba1f7bb2760b18bd0
```


[11-Aug-18 04:28 PM] Alright#0419
d2af746aeffb78f31b899c92e4c88ffb0c0bd7af620fecc5ba1f7bb2760b18bd0 is the txid of that raw tx


[11-Aug-18 04:29 PM] Alright#0419
both of it's inputs are confirmed


[11-Aug-18 07:38 PM] jl777c#5810
I will need to duplicate and fix this


[11-Aug-18 07:42 PM] jl777c#5810
faucetget was always limited by the number of faucetutxos


[11-Aug-18 07:48 PM] jl777c#5810
duplicated, but too tired to fix


[11-Aug-18 07:49 PM] jl777c#5810
any bugs other than this rewardsunlock?


[11-Aug-18 10:08 PM] dukeleto#7326
I don't have any for you right now. And also, sleep is always a good investment üòÉ


[12-Aug-18 07:14 AM] siu#3920
morning!

{Reactions}
‚òï (2) 

[12-Aug-18 07:14 AM] siu#3920
i just noticed we have a new chain


[12-Aug-18 07:16 AM] siu#3920
how do i get the address from a pubkey?


[12-Aug-18 07:16 AM] siu#3920
pubkey to address conversion


[12-Aug-18 07:16 AM] siu#3920
??


[12-Aug-18 07:21 AM] SHossain#0007
sorry, i won't be able to tell.


[12-Aug-18 07:22 AM] dukeleto#7326
@siu you want to go from pubkey to address?


[12-Aug-18 07:22 AM] siu#3920
@SHossain hello  üòÉ

{Reactions}
üëãüèΩ 

[12-Aug-18 07:22 AM] dukeleto#7326
hmmm


[12-Aug-18 07:22 AM] siu#3920
yes


[12-Aug-18 07:23 AM] dukeleto#7326
well, you simply hash160 the pubkey in C++, but i don't think any rpc's will do that for you


[12-Aug-18 07:23 AM] siu#3920
like validateaddress


[12-Aug-18 07:23 AM] dukeleto#7326
üòâ


[12-Aug-18 07:23 AM] siu#3920
ohh


[12-Aug-18 07:23 AM] siu#3920
ok, didnt know


[12-Aug-18 07:23 AM] siu#3920
i thought there was an rpc for validating pubkey


[12-Aug-18 07:23 AM] dukeleto#7326
validateaddress only takes addresses


[12-Aug-18 07:24 AM] dukeleto#7326
but I think James told me a trick of using marketmaker, it will print the address of a pubkey to stdout somehow


[12-Aug-18 07:24 AM] dukeleto#7326
i forgot exactly how to do it


[12-Aug-18 07:24 AM] dukeleto#7326
@siu if you have a guess of which address the key has, you can try a few addresses with validateaddress


[12-Aug-18 07:25 AM] siu#3920
yeah. i just setgenerate true and see where the coins go

{Reactions}
‚òù 

[12-Aug-18 07:25 AM] dukeleto#7326
oh, good trick too


[12-Aug-18 07:25 AM] siu#3920
but i was thinking there should be a method.


[12-Aug-18 07:25 AM] siu#3920
Seems like there isnt


[12-Aug-18 07:30 AM] SHossain#0007
i didn't find anything using `help` call either


[12-Aug-18 07:35 AM] dukeleto#7326
some coins have `importpubkey`


[12-Aug-18 07:35 AM] dukeleto#7326
i think only CHIPs and newer btc's, it might print out the address when it imports, but that doesn't help us much


[12-Aug-18 07:36 AM] dukeleto#7326
it would be pretty useful to have an RPC like `validatepubkey` that returns an address, and false for invalid pubkeys


[12-Aug-18 07:37 AM] dukeleto#7326
@jl777c would you want something like that for kmd? I think I could do it


[12-Aug-18 07:53 AM] ComputerGenie#7004
@siu simething like http://gobittest.appspot.com/Address ? <- gives the BTC addy and then it's just a simple conversion from there to any other

{Embed}
http://gobittest.appspot.com/Address
TP's Go Bitcoin Tests
Bitcoin Go Unit Tester


[12-Aug-18 07:59 AM] siu#3920
thanks


[12-Aug-18 08:17 AM] jl777c#5810
validatepubkey or something like that would indeed be useful


[12-Aug-18 08:31 AM] dukeleto#7326
I already ported `importpubkey` from CHIPs in my dpow branch for Hush (was trying to use it for debugging), so I think I have a good start on it already from that


[12-Aug-18 09:06 AM] SHossain#0007
please send me some AT3 coins here `RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ`


[12-Aug-18 09:13 AM] siu#3920
Ill send some when i get back from lunch


[12-Aug-18 09:14 AM] siu#3920
I tested dice earlier and got a win without issues.


[12-Aug-18 09:33 AM] SHossain#0007
thanks @siu


[12-Aug-18 09:59 AM] siu#3920
@SHossain sent 56691318cf527b5942cf9bcfedae910a6e8f15345c3fd6f8c9662ea1db94364a

{Reactions}
üëçüèΩ 

[12-Aug-18 10:01 AM] siu#3920
```da9c2a8b0096237688988a6524de9f9e7503b47629507c6c831d1be56cdd61d4.(L 195999.99990000) check first
numentropy tx 1: 195999.99990000
19d911879d79aa3b7726a87d585fbed8c5b20f6919c67e5a4d6ba5095b340ee4 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
19d911879d79aa3b7726a87d585fbed8c5b20f6919c67e5a4d6ba5095b340ee4 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
19d911879d79aa3b7726a87d585fbed8c5b20f6919c67e5a4d6ba5095b340ee4 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
not enough inputs for 5000.00010000
numentropy tx 0: 0.00000000
```


[12-Aug-18 10:01 AM] siu#3920
dicefund broke again


[12-Aug-18 10:01 AM] siu#3920
same node betting


[12-Aug-18 10:02 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT3 diceinfo 5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43{
  "result": "success",
  "fundingtxid": "5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "1000000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "0.00000000"
}
```


[12-Aug-18 10:20 AM] SHossain#0007
locked max 1001 funds to this rewards plan `a7a191374899c94df6e465e168a14d96e33a3662e5dab32f16dbc677d2e26b5f`


[12-Aug-18 11:10 AM] dukeleto#7326
are we onto AT3 already?


[12-Aug-18 11:10 AM] Alright#0419
yes


[12-Aug-18 11:10 AM] Alright#0419
params for it are pinned here


[12-Aug-18 11:10 AM] Alright#0419
the `rewardslock` fix wouldn't allow AT2 to sync from 0


[12-Aug-18 11:18 AM] Alright#0419
Still can't tell if `rewardslock` is broken or if setting 0 for minimum lock time is what causes this. I have a couple hundred 1 day `rewardslock` txs that I can try to unlock in a couple hours


[12-Aug-18 11:19 AM] Alright#0419
```
minseconds 0 maxseconds 172800
duration 73355 (1534097301 - 1534023946) numblocks 1265 (1315 - 50)
amount 10.00000000 20000000000.00000000 634 -> duration.73355 reward 0.00465214
inputs 1001000000000 vs outputs 999999524786 txfee 475214
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx 6261033818c1ce97a86e9223a2f67873d5d52bf2ed5997bb4eb3336bd81b6600
minseconds 0 maxseconds 172800
duration 73355 (1534097301 - 1534023946) numblocks 1265 (1315 - 50)
amount 10.00000000 20000000000.00000000 634 -> duration.73355 reward 0.00465214
inputs 1001000000000 vs outputs 999999524786 txfee 475214
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx 6261033818c1ce97a86e9223a2f67873d5d52bf2ed5997bb4eb3336bd81b6600
```


[12-Aug-18 11:19 AM] Alright#0419
```
./komodo-cli -ac_name=AT3 rewardsunlock 0time 088a9d869faaea88858a8e2e22015955111916c83d7f78bd9fe807649a1e9f81
```
```
./rawsend 010000000200661bd86b33b34ebb9759edf22bd5d57378f6a223926ea897cec11838036162000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140577716fc2b4549d9e4a23bd7f3c95f13b9dd3298b6d67eb3d3dd69ba26c4c2a33ed04a8cf1729e8956c5caef32f7b5ca689237f88709276b6b2435f9c7f43cc9a100af038001e5a10001ffffffff819f1e9a6407e89fbd787f3dc8161911555901222e8e8a8588eaaa9f869d8a08000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9814096897016637189516a55a93769be4861ba4e06bdc75f88382c58e0e908b768440c47f05ecf75c30f5e919433cec1a4294d902b4f93f1547828cdab1d11ea8e8fa100af038001e5a10001ffffffff03b2cf9dd4e8000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc3ee3a13b0000000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac00000000000000002c6a2ae5553074696d65000000819f1e9a6407e89fbd787f3dc8161911555901222e8e8a8588eaaa9f869d8a0800000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[12-Aug-18 11:20 AM] Alright#0419
```
2018-08-12 18:19:49 ERROR: CScriptCheck(): 82b4bb3707ad53fc8a7f44376f6bdfdfb0851afcfe26eba56b002f10ef6d337d:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-12 18:19:49 ERROR: CScriptCheck(): 82b4bb3707ad53fc8a7f44376f6bdfdfb0851afcfe26eba56b002f10ef6d337d:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-12 18:19:49 ERROR: AcceptToMemoryPool: ConnectInputs failed 82b4bb3707ad53fc8a7f44376f6bdfdfb0851afcfe26eba56b002f10ef6d337d
```


[12-Aug-18 11:23 AM] Alright#0419
both inputs are on chain, looking at each input to make sure they're both properly formed, couple minutes


[12-Aug-18 11:30 AM] dukeleto#7326
```DEBUG:BitcoinRPC:-33-> rewardsunlock ["STUFF", "0100000001f888039938279c55b0fe17ecb2b02df26e2349f8951ca7ddd48101af1d0e3def0200000049483045022100aedd78b308574cc885d51ec31d842bdba5bcc050e81d6c1c46217085b75e79fe0220500e40acdd3872501d552ea9cdb47a734de637a60e7adc7f9e7aba7bf6509ae501ffffffff0300e40b5402000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc9f3bd5af2cf90100232102676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cfac00000000000000002c6a2ae5415354554646000000f888039938279c55b0fe17ecb2b02df26e2349f8951ca7ddd48101af1d0e3def00000000"]
APR 5.00000000 minseconds.86400 maxseconds.864000 mindeposit 10.00000000
(RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK) ef3d0e1daf0181d4dda71c95f849236ef22db0b2ec17feb0559c2738990388f8/v0 1000.00000000
amount 0.00000000 -> reward 0.00000000
DEBUG:BitcoinRPC:<-33- {"error": "couldnt create rewards unlock transaction"}```


[12-Aug-18 11:30 AM] dukeleto#7326
can't tell if that is the same rewardsunlock bug


[12-Aug-18 11:31 AM] dukeleto#7326
```DEBUG:BitcoinRPC:-30-> rewardsinfo ["ef3d0e1daf0181d4dda71c95f849236ef22db0b2ec17feb0559c2738990388f8"]
DEBUG:BitcoinRPC:<-30- {"minseconds": 86400, "sbits": 301827707987, "fundingtxid": "ef3d0e1daf0181d4dda71c95f849236ef22db0b2ec17feb0559c2738990388f8", "mindeposit": "10.00000000", "name": "STUFF", "APR": "5.00000000", "maxseconds": 864000, "result": "success", "funding": "1000.00000000"}
```


[12-Aug-18 11:31 AM] Alright#0419
Have you been able to do any `rewardsunlock` in the past day or so?


[12-Aug-18 11:32 AM] Alright#0419
since AT3 started


[12-Aug-18 11:32 AM] dukeleto#7326
no, but I have never done one successfully, i hadn't gotten to rewards stuff yet


[12-Aug-18 12:09 PM] SHossain#0007
i have locked funds for AT3 from few hours ago


[12-Aug-18 02:53 PM] SHossain#0007
i unlocked my funds, got rewards


[12-Aug-18 02:53 PM] SHossain#0007
wanted to create a new plan with 100% APR, but the system told me `25% APR is maximum`


[12-Aug-18 02:55 PM] jl777c#5810
hyper inflation is frowned upon

{Reactions}
abusedsmily 

[12-Aug-18 02:55 PM] jl777c#5810
also is the unlock problem only for unspecified locktxid?


[12-Aug-18 02:55 PM] jl777c#5810
that is a totally different code path


[12-Aug-18 02:55 PM] jl777c#5810
and could explain the troubles


[12-Aug-18 02:58 PM] SHossain#0007
new rewards plan is live with 25% APR. Anyone want to lock funds here?
```
{
  "result": "success",
  "fundingtxid": "2ada07db98f2e161239df1c4210f163fe7cc8dfdfd06c027d349c6aaf7156fb7",
  "name": "Plan1",
  "sbits": 212305275984,
  "APR": "25.00000000",
  "minseconds": 0,
  "maxseconds": 604800,
  "mindeposit": "1000.00000000",
  "funding": "100000.00000000"
}
```


[12-Aug-18 03:05 PM] SHossain#0007
```
./komodo-cli -ac_name=AT3 getblockhash 1497
00435886f765e5fe78fbf3f56a39a64a0f6a4fcc8840576757bf1c432caf3750
```


[12-Aug-18 03:06 PM] SHossain#0007
can anyone confirm if this is the longest block?


[12-Aug-18 03:12 PM] SHossain#0007
i'm on fork. üòÖ


[12-Aug-18 03:16 PM] SHossain#0007
i'm getting stuck at 1497
```
  "blocks": 1497,
  "longestchain": 0,
  "timeoffset": 0,
  "tiptime": 1534111250,
  "connections": 2,
```


[12-Aug-18 03:18 PM] SHossain#0007
even after deleting the contents of data dir


[12-Aug-18 04:41 PM] Alright#0419
@SHossain once you get on the real chain, can you try `rewardsunlock` on other plans from the node you were able to do it from previously


[12-Aug-18 04:42 PM] Alright#0419
try this please `./komodo-cli -ac_name=AT3 rewardsunlock 0time 088a9d869faaea88858a8e2e22015955111916c83d7f78bd9fe807649a1e9f81`


[12-Aug-18 04:43 PM] Alright#0419
Also, do you have any info on why it forked? No txs in 1498


[12-Aug-18 04:43 PM] Alright#0419
are you getting errors on that node


[12-Aug-18 04:44 PM] Alright#0419
can you find the block it forked at and see what caused it to fork


[12-Aug-18 04:53 PM] Deleted User#0000
What size will the premine and distributed coins be?


[12-Aug-18 04:55 PM] Alright#0419
for STAKED?


[12-Aug-18 04:56 PM] Deleted User#0000
Lol wrong chat lol ye


[12-Aug-18 04:56 PM] Alright#0419
naming convention will just be STAKED1(week1), STAKED2(week2), STAKED3(week3), ... until we land on STAKED


[12-Aug-18 04:56 PM] Deleted User#0000
Dunno how that posted here sorry


[12-Aug-18 04:56 PM] Alright#0419
wait and see üòõ


[12-Aug-18 04:57 PM] Deleted User#0000
Coins sent before it starts?


[12-Aug-18 04:57 PM] Alright#0419
When I announce the params, the coins will already be in your wallet


[12-Aug-18 04:57 PM] Deleted User#0000
My distribution script is hard coded for 3million, having to change it will slow me down :(


[12-Aug-18 04:57 PM] Deleted User#0000
But ok


[12-Aug-18 04:58 PM] Alright#0419
add an address btw


[12-Aug-18 04:58 PM] Deleted User#0000
Will do


[12-Aug-18 04:59 PM] siu#3920
hi guys, whats up!


[12-Aug-18 05:00 PM] siu#3920
```./komodo-cli -ac_name=AT3 tokenorders
[
  {
    "funcid": "s",
    "txid": "4e2c5e62b8c13fa9fb6c778f3d5f0da931d359fd3c054836773b73bb1d91d547",
    "vout": 0,
    "amount": "10000",
    "askamount": "10000",
    "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
    "tokenid": "259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf",
    "totalrequired": "20.00000000",
    "price": "0.00200000"
  },
  {
    "funcid": "s",
    "txid": "b0a6a9d81ba4e35552b6dea568a93a727d871963cb54ea83567c5ad54a997673",
    "vout": 0,
    "amount": "1000",
    "askamount": "1000",
    "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
    "tokenid": "259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf",
    "totalrequired": "2.00000000",
    "price": "0.00200000"
  },
  {
    "funcid": "s",
    "txid": "e7468a60052fb4362fc61c77e18cbda8e1f086ab3e702522d21752aec9cc5ceb",
    "vout": 0,
    "amount": "12300",
    "askamount": "12300",
    "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
    "tokenid": "259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf",
    "totalrequired": "24.60000000",
    "price": "0.00200000"
  }
]
```


[12-Aug-18 05:00 PM] siu#3920
i have some orders set for a token i created


[12-Aug-18 05:00 PM] siu#3920
can anyone of you try to fill these asks?


[12-Aug-18 05:01 PM] Alright#0419
üëå


[12-Aug-18 05:05 PM] Alright#0419
filled 
```
  {
    "funcid": "s",
    "txid": "e7468a60052fb4362fc61c77e18cbda8e1f086ab3e702522d21752aec9cc5ceb",
    "vout": 0,
    "amount": "12300",
    "askamount": "12300",
    "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
    "tokenid": "259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf",
    "totalrequired": "24.60000000",
    "price": "0.00200000"
  }
```
with 
```
./komodo-cli -ac_name=AT3 tokenfillask 259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf e7468a60052fb4362fc61c77e18cbda8e1f086ab3e702522d21752aec9cc5ceb 24.6
```


[12-Aug-18 05:06 PM] Alright#0419
```
./rawsend 0100000003007a5016e5ec3f3fd5e0cced5abb35c46ca8d01a14ffff38cb4e213541308fd0010000004847304402203e1b8e97f4546a536376d353bf31fe33972c64bb24315734d7759ca9995688e4022054b7f30dccdcd75d8290bc209acf173ec93d40133bed7abdb395da3f2d277e2101ffffffffeb5cccc9ae5217d22225703eab86f0e1a8bd8ce1771cc62f36b42f05608a46e7000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140698ae6f7a66a82ed4d6ce651d64f513901a15eb8fa7bd2bf1db50ec351b548f8207ba8a78c47c2e9c880613b0873fa666e5cb2eb8dd7aab6e30f3fdd687efa9ca100af038001e3a10001ffffffff2f58430b257d7c79519126b764c36f95a824a0b1bda6244a5a3cabafa58b21bf0100000048473044022012474d87d16764b66543c47e67bd2568d8403fcfd55b3b7c05cfa5d4528da0b8022021a07342ed3344ff8e5cdee5a51220458cecc53f14526087094da85e73ae15e101ffffffff05f42f000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc1800000000000000302ea22c8020a480be1cec6d9cab424b1576571e09f3a381ad090668a146f02340a498f009b38103120c008203000401cc003e49000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac708bb1020000000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac00000000000000004f6a4c4ce353259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf0061579200000000210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f600000000
d179986d121c658b9cbe7d2bcbca0d309eb52f0bcfff650170c2960adb50f920
```


[12-Aug-18 05:06 PM] Alright#0419
now my ask tokenfillask in on the books with 
```
  {
    "funcid": "S",
    "txid": "d179986d121c658b9cbe7d2bcbca0d309eb52f0bcfff650170c2960adb50f920",
    "vout": 0,
    "amount": "12276",
    "askamount": "12276",
    "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
    "tokenid": "259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf",
    "totalrequired": "24.55200000",
    "price": "0.00200000"
  },
``` 
and I have 
```
./komodo-cli -ac_name=AT3 tokenbalance 259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf
{
  "result": "success",
  "CCaddress": "R9sDyKt2kW5uJaoZT6GF9e3WRbGioBuhoZ",
  "tokenid": "259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf",
  "balance": 24
}
```


[12-Aug-18 05:07 PM] Alright#0419
Ahh, ok the fillamount is in assetoshis


[12-Aug-18 05:07 PM] Alright#0419
But my fillask shouldn't there, right?


[12-Aug-18 05:08 PM] siu#3920
you need to check tokenbalance


[12-Aug-18 05:08 PM] Alright#0419
look up üòõ


[12-Aug-18 05:08 PM] siu#3920
oh lol


[12-Aug-18 05:09 PM] siu#3920
ok, that is cool!


[12-Aug-18 05:09 PM] Alright#0419
well maybe not lol


[12-Aug-18 05:09 PM] siu#3920
why?


[12-Aug-18 05:09 PM] Alright#0419
I don't think my fillask should be in the order books now


[12-Aug-18 05:09 PM] siu#3920
it filled and the quantities are right?


[12-Aug-18 05:09 PM] Alright#0419
The decimal in for `fillamount` may have messed with that


[12-Aug-18 05:09 PM] Alright#0419
need to look at the rawtxs, hold on


[12-Aug-18 05:10 PM] Alright#0419
so your tokenask should still be there because I only partially filled it


[12-Aug-18 05:10 PM] siu#3920
the original volume of the ask was 12300 tokens


[12-Aug-18 05:10 PM] Alright#0419
but instead it shows as an tokenfillask now


[12-Aug-18 05:12 PM] siu#3920
ohh i understand. true


[12-Aug-18 05:13 PM] siu#3920
although i guess since its a new utxo it was moved to S


[12-Aug-18 05:26 PM] Alright#0419
Shouldn't do that


[12-Aug-18 05:26 PM] Alright#0419
it's wonky


[12-Aug-18 05:26 PM] Alright#0419
it turned the rest of your `tokenask` into a `tokenfillask`


[12-Aug-18 05:27 PM] siu#3920
right


[12-Aug-18 05:32 PM] siu#3920
```inputs 200100000000 vs outputs 99999559710 txfee 624437
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx 7fb47b7e8e6081d4071b408c9b9f36d062d57f19aee4526f153f72f58c8e4834
AssetValidate (s)
vin1 99999999989000, vout0 12300, vout1 99999999976700, AssetValidate (s)
vin1 99999999989000, vout0 12300, vout1 99999999976700, AssetValidate (s)
vin1 99999999989000, vout0 12300, vout1 99999999976700, AssetValidate (S)
vin1 12300, vout0 12276, vout1 24, AssetValidateSellvin
Got 0.00012300 to origaddr.(RKvQKpkJgfMB5CbJQ2p6rUW4CZd7w2heQw)
got recvunitprice 0.00200000 >= 0.00200000 unitprice, new unitprice 0.00200000
fill validated
AssetValidate (S)
vin1 12300, vout0 12276, vout1 24, AssetValidateSellvin
Got 0.00012300 to origaddr.(RKvQKpkJgfMB5CbJQ2p6rUW4CZd7w2heQw)
got recvunitprice 0.00200000 >= 0.00200000 unitprice, new unitprice 0.00200000
fill validated
AssetValidate (S)
vin1 12300, vout0 12276, vout1 24, AssetValidateSellvin
Got 0.00012300 to origaddr.(RKvQKpkJgfMB5CbJQ2p6rUW4CZd7w2heQw)
got recvunitprice 0.00200000 >= 0.00200000 unitprice, new unitprice 0.00200000
fill validated

```


[12-Aug-18 05:42 PM] Alright#0419
?


[12-Aug-18 05:44 PM] siu#3920
just the printouts from my node regarding the swap


[12-Aug-18 07:41 PM] Alright#0419
@jl777c read above about `tokenfillask` turning a `tokenask` order into `tokenfillask`


[13-Aug-18 12:44 AM] dukeleto#7326
has anybody gotten `rewardsunlock` to work recently?


[13-Aug-18 12:48 AM] dukeleto#7326
some of the error checking about minseconds and if the reward is > txfee makes it challenging to test. I must set mindays=0 in the test suite, and I think maybe it's failing because less than txfee has accrued before my test runs


[13-Aug-18 12:49 AM] dukeleto#7326
going to sleep and think on this


[13-Aug-18 01:14 AM] jl777c#5810
i read the discussion about tokenfillask but not sure what the issue is


[13-Aug-18 01:54 AM] siu#3920
@jl777c i posted an ask for 12300 tokens. @Alright partially filled it


[13-Aug-18 01:55 AM] siu#3920
After he partially filled it, the (s) became a (S). Is this expected behaviour?


[13-Aug-18 02:00 AM] jl777c#5810
yes


[13-Aug-18 02:00 AM] jl777c#5810
as long as the S has the fraction amount that was unfilled and no assets were lost


[13-Aug-18 02:01 AM] jl777c#5810
S with assets left looks a lot like an s, just that it is a remainder of a partial fill


[13-Aug-18 02:01 AM] jl777c#5810
so no actual bug, just confusion over what was supposed to happen?


[13-Aug-18 02:10 AM] siu#3920
yes... my thought too


[13-Aug-18 02:10 AM] siu#3920
@Alright was wondering why it happened. But my guess is that since its a partial fill and a new utxo gets formed, then status changes to (S)


[13-Aug-18 02:10 AM] siu#3920
so no bug to chase there.


[13-Aug-18 02:11 AM] siu#3920
I did get the dicefunding goes to 0 issues again though


[13-Aug-18 02:11 AM] siu#3920
betting from the same node as the dicedund


[13-Aug-18 02:18 AM] jl777c#5810
any troubles if not betting from the same node as did the dicefund?


[13-Aug-18 02:21 AM] siu#3920
im testing that today


[13-Aug-18 02:28 AM] jl777c#5810
and can you find where the dice rfunds ended up? just need the last dicebet transaction before it couldnt find it


[13-Aug-18 02:28 AM] jl777c#5810
it must have gotten lost due to the last one that worked


[13-Aug-18 02:40 AM] siu#3920
this one was a first try on that session


[13-Aug-18 02:41 AM] SHossain#0007
yesterday i was in a fork when i unlocked reward. today with main chain did it
```
./komodo-cli -ac_name=AT3 rewardsunlock 0time1 a7a191374899c94df6e465e168a14d96e33a3662e5dab32f16dbc677d2e26b5f 7fb47b7e8e6081d4071b408c9b9f36d062d57f19aee4526f153f72f58c8e4834
```


[13-Aug-18 02:41 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 sendrawtransaction 010000000234488e8cf5723f156f52e4ae197fd562d0369f9b8c401b07d481608e7e7bb47f000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9814082b3543426f6f2db63e1927543ab9ab6ffdff261ae39d4bac7ef4f0ef47066f203d7f4b92e6ce187dbc8808adc3c6ae52326eacfe7c09a5a35697eb4d23696e2a100af038001e5a10001ffffffff5f6be2d277c6db162fb3dae562363ae3964da168e165e4f64dc999483791a1a7000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9814030791dbeb91323dbd3105deaa7af1517c456028d5b221a7b99950afd8c728e201cc384f161435eae7837459f08a3bd7206c79f4f4ccbafa781f1e4a51e61ac54a100af038001e5a10001ffffffff03684c514817000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc883d924e17000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000002c6a2ae5553074696d653100005f6be2d277c6db162fb3dae562363ae3964da168e165e4f64dc999483791a1a700000000
```


[13-Aug-18 02:41 AM] SHossain#0007
```
minseconds 0 maxseconds 86400
duration 58899 (1534153202 - 1534094303) numblocks 868 (2134 - 1266)
amount 1001.00000000 500500000000.00000000 4171 -> duration.58899 reward 0.02457208
inputs 200100000000 vs outputs 99997535336 txfee 2467208
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx 7fb47b7e8e6081d4071b408c9b9f36d062d57f19aee4526f153f72f58c8e4834
minseconds 0 maxseconds 86400
duration 58899 (1534153202 - 1534094303) numblocks 868 (2134 - 1266)
amount 1001.00000000 500500000000.00000000 4171 -> duration.58899 reward 0.02457208
inputs 200100000000 vs outputs 99997535336 txfee 2467208
CC Eval EVAL_REWARDS Invalid: mismatched inputs != outputs + txfee spending tx 7fb47b7e8e6081d4071b408c9b9f36d062d57f19aee4526f153f72f58c8e4834
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[13-Aug-18 02:43 AM] SHossain#0007
locked funds with APR didn't appear in wallet


[13-Aug-18 02:51 AM] jl777c#5810
CC Eval EVAL_REWARDS Invalid: <- that means ts was rejected


[13-Aug-18 02:56 AM] SHossain#0007
do i have to wait for maxtime to reach


[13-Aug-18 02:56 AM] SHossain#0007
?


[13-Aug-18 02:57 AM] jl777c#5810
no, it is an overly strict error checking. i will try to reproduce


[13-Aug-18 03:00 AM] jl777c#5810
it is definitely a bug, the unlock rpc should not create a tx that doesnt validate


[13-Aug-18 03:02 AM] jl777c#5810
duplicated


[13-Aug-18 03:04 AM] jl777c#5810
investigating

{Reactions}
üëåüèΩ 

[13-Aug-18 03:08 AM] jl777c#5810
pushed fix, but it is a hardforking change so all nodes need to update


[13-Aug-18 03:11 AM] SHossain#0007
triggered the explorer build update and updating locally


[13-Aug-18 03:18 AM] jl777c#5810
pushed another fix for dicebet validation


[13-Aug-18 03:18 AM] SHossain#0007
```
minseconds 0 maxseconds 86400
duration 60966 (1534155269 - 1534094303) numblocks 933 (2199 - 1266)
amount 1001.00000000 500500000000.00000000 4171 -> duration.60966 reward 0.02543442
minseconds 0 maxseconds 86400
duration 60966 (1534155269 - 1534094303) numblocks 933 (2199 - 1266)
amount 1001.00000000 500500000000.00000000 4171 -> duration.60966 reward 0.02543442
minseconds 0 maxseconds 86400
duration 60966 (1534155269 - 1534094303) numblocks 933 (2199 - 1266)
amount 1001.00000000 500500000000.00000000 4171 -> duration.60966 reward 0.02543442
minseconds 0 maxseconds 86400
duration 60966 (1534155269 - 1534094303) numblocks 933 (2199 - 1266)
amount 1001.00000000 500500000000.00000000 4171 -> duration.60966 reward 0.02543442
105dacf201e41adb1a8bc1030fd691f3162cef2f0fba3f5427d6fd93d4f052b3
```


[13-Aug-18 03:18 AM] SHossain#0007
look like it worked


[13-Aug-18 03:18 AM] jl777c#5810
I didnt see the actual rawtx from siu's lost dice funds so cant do anything other than randomly guess what the tx was...


[13-Aug-18 03:19 AM] jl777c#5810
how many times to I have to repeat that without the rawtx, a report that " i did X and Y happened" doesnt allow me to fix it


[13-Aug-18 03:23 AM] jl777c#5810
pushed fix for display error of rewardinfo's funding that used to count locked funds


[13-Aug-18 03:23 AM] SHossain#0007
updating again


[13-Aug-18 03:26 AM] SHossain#0007
i've this new rewards plan up. will lock some funds in there along with some other plans


[13-Aug-18 03:32 AM] SHossain#0007
```{
  "result": "success",
  "fundingtxid": "0b5aee13ce2f7499664e0c5dd429415d31d07c9d92512b14e3e193a32714ca16",
  "name": "Plan1",
  "sbits": 212305275984,
  "APR": "25.00000000",
  "minseconds": 0,
  "maxseconds": 604800,
  "mindeposit": "10000.00000000",
  "funding": "10000.00000000"
}
```


[13-Aug-18 03:46 AM] siu#3920
```administrator@FLSVR1:~/komodo/src$ ./komodo-cli -ac_name=AT3 sendrawtransaction 01000000026d79c37dd72519eae3b329c5c2c14c1bd0cc0c2ee190fe4d1c6122de199599a2000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814028be8b31ceb2ab115196af197640bbd07b5de18c7a1a58c04592b02f93eb83f54ae784bb4ea998adaecbc84a63994e58170f9f6d3fc569e9905034b9c80154bfa100af038001e6a10001ffffffff08fc8605241ac0d13b9eca3504ef427cbc1fbb89ab4c227645aac8b573bed2a90000000048473044022038808b18ff2ffede30f32f9cea0975443a5d9f5ead03386297159b86d76ab690022051b2a3b2f682381a29b6493627b658d2dc81a22ccb9a1d4843d5ddd3dd2bc3fe01ffffffff0500a0724e18090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1527000000000000232102a57ef116483d33d2f9c77885ab748bc3b95907d9095f3b284c0c54c3475162a7acdb69fb0501090000232102a57ef116483d33d2f9c77885ab748bc3b95907d9095f3b284c0c54c3475162a7ac00000000000000006d6a4c6ae642534955000000000043ddba6688de6fa1d14c2a12924e8ad526aeb65e0296c7fe34e92ac6f6d1bd5d9a8affb3a741ff3381bfb12c2c173a20436789a4777b0ffee8012328898b41c5000000000000000000000000000000000000000000000000000000000000000000000000
error code: -2
error message:
Safe mode: Warning: We do not appear to fully agree with our peers! You may need to upgrade, or other nodes may need to upgrade.
```


[13-Aug-18 03:46 AM] siu#3920
what happened?


[13-Aug-18 03:46 AM] siu#3920
ahh i see


[13-Aug-18 03:47 AM] siu#3920
need to update


[13-Aug-18 03:48 AM] siu#3920
@jl777c here is the rawtx from the winning bid that dissapeared the funds


[13-Aug-18 03:48 AM] siu#3920
``` ./komodo-cli -ac_name=AT3 dicebet SIU 5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43 1000 5
 1943  ./komodo-cli -ac_name=AT3 sendrawtransaction 

0100000002d461dd6ce51b1d836c7c502976b403759e9fde24658a9888762396008b2a9cda000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140918dc93e7c635b9d30500348e10efaaa73f8e8e9d4c60a2faf7830f36368b93c5eb95ce47b7f8c4313edb4c8bd270b0fffc7b89f78b5a1799fc18768518c7dc1a100af038001e6a10001ffffffff4a3694dba12e66c9f8d63f5c34158f6e0a91aeedcf9bcf42597b52cf18136956000000004847304402200f54c0817480886fb8f23697b720efe999332f60aaa82d7ed299118aea14146302202dac8bdd353884139bbc921dac591eae2fc191d88c423040318fed734571f70301ffffffff05f078097bd3110000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac2ef0da215d00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae642534955000000000043ddba6688de6fa1d14c2a12924e8ad526aeb65e0296c7fe34e92ac6f6d1bd5d1fb598ec1507912fb7d361db0a668b8cb81eb3278e8eeae998b6a26e17d015b7000000000000000000000000000000000000000000000000000000000000000000000000
```


[13-Aug-18 03:49 AM] SHossain#0007
@siu Please check my last bug report structure and paste info like that. It will be easier for James to reproduce the bugs and fix quickly.
1. The command
2. HEX value
3. Output


[13-Aug-18 03:49 AM] jl777c#5810
thanks! that helps a lot


[13-Aug-18 03:51 AM] jl777c#5810
but there are funds in 5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43 now


[13-Aug-18 03:52 AM] siu#3920
i just added more funds to test from different nodes


[13-Aug-18 03:52 AM] jl777c#5810
well how am I supposed to fix the bug of it not able to fund funds?


[13-Aug-18 03:52 AM] jl777c#5810
if you add funds


[13-Aug-18 03:52 AM] siu#3920
i can reproduce it again.


[13-Aug-18 03:52 AM] jl777c#5810
once a bug is created, then let me duplicate it and fix it


[13-Aug-18 03:52 AM] jl777c#5810
you can make new plans for other bugs


[13-Aug-18 03:53 AM] siu#3920
ok... ill take a shot at reproducing it again now


[13-Aug-18 03:53 AM] siu#3920
ill forget about different node testing


[13-Aug-18 03:53 AM] jl777c#5810
i didnt say that


[13-Aug-18 03:53 AM] jl777c#5810
what I am saying is this is inefficient


[13-Aug-18 03:53 AM] jl777c#5810
now you have to reproduce the bug that was already there


[13-Aug-18 03:54 AM] jl777c#5810
there is no reason many diceplans cant exist at the same time and in fact it is a good test to make sure we dont have cross plan bugs


[13-Aug-18 03:54 AM] jl777c#5810
so you can test the different node testing on a new plan


[13-Aug-18 03:54 AM] siu#3920
yes... im going to replicate the bug now to have all the data first


[13-Aug-18 03:55 AM] siu#3920
then after i got that for you, ill test different nodes with different plan


[13-Aug-18 03:55 AM] jl777c#5810
ok, great. pretty sure there are more than this lost funds bugs left


[13-Aug-18 03:58 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 getblockhash 2231
00c2d058a05d1aea7af70c7b193e0278fdc830672a2332e34ea38b81d984f8fa
```


[13-Aug-18 03:58 AM] SHossain#0007
explorer looks broken


[13-Aug-18 03:59 AM] siu#3920
seems like there was a hard fork change


[13-Aug-18 04:01 AM] SHossain#0007
yes


[13-Aug-18 04:01 AM] SHossain#0007
@Alright please update your seed and mining nodes


[13-Aug-18 04:02 AM] SHossain#0007
@siu what block you are in now?


[13-Aug-18 04:02 AM] siu#3920
stuck at 2219


[13-Aug-18 04:02 AM] siu#3920
i think i need to reindex


[13-Aug-18 04:03 AM] SHossain#0007
let's do that. i'll try my node as well


[13-Aug-18 04:04 AM] SHossain#0007
back at 2231


[13-Aug-18 04:04 AM] siu#3920
now im good


[13-Aug-18 04:07 AM] jl777c#5810
any CC validation change is a consensus change, that is why it is extremely critical we find any and all bugs, sooner than later and the clock is ticking for 1 million update. currently CC testing is all that remains and it needs to be finished soon or I will have to disable the contracts that are not fully tested


[13-Aug-18 04:08 AM] jl777c#5810
as of now, I am not even sure how many bugs there are


[13-Aug-18 04:09 AM] siu#3920
That i can name, we have the winning dicebet bug, and the rewards not accruing correctly


[13-Aug-18 04:09 AM] siu#3920
those are the most critial bugs i know of.


[13-Aug-18 04:09 AM] jl777c#5810
what rewards not accruing correctly bug? I have not seen that one


[13-Aug-18 04:09 AM] siu#3920
@Alright is the one working on it


[13-Aug-18 04:10 AM] jl777c#5810
you mean the one I just fixed?


[13-Aug-18 04:10 AM] siu#3920
might be. yes.


[13-Aug-18 04:10 AM] siu#3920
need to test that again.


[13-Aug-18 04:10 AM] siu#3920
the problem with rewards is that to test it you need 24h


[13-Aug-18 04:10 AM] siu#3920
at least


[13-Aug-18 04:11 AM] jl777c#5810
why?


[13-Aug-18 04:12 AM] siu#3920
because you lock funds and need at least 24h to unlock them


[13-Aug-18 04:12 AM] jl777c#5810
why?


[13-Aug-18 04:12 AM] jl777c#5810
minimum can be set to 0


[13-Aug-18 04:12 AM] siu#3920
ok


[13-Aug-18 04:13 AM] SHossain#0007
```
{
  "result": "success",
  "fundingtxid": "0b5aee13ce2f7499664e0c5dd429415d31d07c9d92512b14e3e193a32714ca16",
  "name": "Plan1",
  "sbits": 212305275984,
  "APR": "25.00000000",
  "minseconds": 0,
  "maxseconds": 604800,
  "mindeposit": "10000.00000000",
  "funding": "10000.00000000"
}
```
this one has 0 min time


[13-Aug-18 04:13 AM] SHossain#0007
25% APR to give you boost in short time


[13-Aug-18 04:13 AM] siu#3920
forked again


[13-Aug-18 04:14 AM] siu#3920
be back in an hour


[13-Aug-18 04:17 AM] SHossain#0007
locked 10000 coins for the above plan
```
./komodo-cli -ac_name=AT3 rewardslock Plan1 0b5aee13ce2f7499664e0c5dd429415d31d07c9d92512b14e3e193a32714ca16 10000
```


[13-Aug-18 04:17 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 sendrawtransaction 010000000116ca1427a393e1e3142b51929d7cd0315d4129d45d0c4e6699742fce13ee5a0b02000000484730440220251abd63be08f672d4a5b7cc8a9cadaaed2e6dd21b992a0a3ea612523bda55ea022064d00de90d2696daca63d4d6128e2cc9a39f1883f8b98bd40b35a9e52aa7775101ffffffff040010a5d4e8000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcaca0ccba562f070000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000002c6a2ae54c506c616e3100000016ca1427a393e1e3142b51929d7cd0315d4129d45d0c4e6699742fce13ee5a0b00000000
3a732aa39eb1a6440ca3bbb747085529e7f98413c0b61e265ee65faee5576f90
```
hope i'm on mainchain


[13-Aug-18 04:34 AM] Alright#0419
need a node to sync from


[13-Aug-18 04:34 AM] Alright#0419
UpdateTip: new best=00d2efd5122ca562880e7678ddf458eee65924013cee1fc2776e961ee6507ce3  height=2233


[13-Aug-18 04:34 AM] Alright#0419
ü§î did the explorer update?


[13-Aug-18 04:35 AM] Alright#0419
Is telling me the longer chain is invalid, but I'm not sure if that's true or not


[13-Aug-18 04:37 AM] Alright#0419
UpdateTip: new best=014148b29ba5cd507044a8c635550a644bc84110b345fe090b1f8855c1c07a19  height=2272


[13-Aug-18 04:37 AM] Alright#0419
seems this is the correct chain, yes?


[13-Aug-18 04:43 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 getblockhash 2285
0030cb19b9bba37f0e287dc92404f3eae598fd9ce1777f0af88a523e985f4707
```


[13-Aug-18 04:44 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 getblockhash 2272
014148b29ba5cd507044a8c635550a644bc84110b345fe090b1f8855c1c07a19```


[13-Aug-18 05:03 AM] SHossain#0007
this dice plan has a lot of utxo if anywant want to bet
```
{
  "result": "success",
  "fundingtxid": "7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1",
  "name": "Dice1",
  "sbits": 212154411332,
  "minbet": "1.00000000",
  "maxbet": "100.00000000",
  "maxodds": 77,
  "timeoutblocks": 2,
  "funding": "12388.00000000"
}
```


[13-Aug-18 05:04 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 dicebet Dice1 7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1 3.5 2
```
```
30f9f51ea8bba663341224948e897f7c777789f8bf270d3c78d642283ae30211.(E 2.00000000) check first
7b9f8c4e4ae2b4bbb07ff5de09e327c0482b732e1aed5236637f9b9523288e18.(E 10.00000000) 3d6fcc61a80cab3c2ff71e87ac84827de492745c1df9603a70d575c764051619.(E 50.00000000) 34c2665bcb5d3f03020f789695da495b8eb8d31c8da5d1ebe77ed8b9fe560f55.(E 500.00000000) 273a85671a99a3e23e89adfa360b9ad34fc254c5831aed1eb5dbfe1e19b09f7d.(E 50.00000000) c073a9cc0bb59de46ee53d22dcacee37168db2a79b5bb3855c3d4af37dd1e182.(E 777.00000000) 641c68efc7ccf1877d5737aa37762e05d453038067f9c27bb33e19786120f583.(E 7.00000000) 6c375ddaecfb86c7cec821377ba221dfdda0c48bbc06e261112d6added01ed88.(E 10.00000000) bf769d59012deeebb469f3976eb31d460512756a11005b9ff1508b2dff7bc196.(E 77.00000000) 7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1.(F 10000.00000000) f0f3c1082d86de1bdde8d0f3c73e6649632c6072fc7fd4e98367b2128ab0a2c9.(E 5.00000000) 71a6e03360d6d7a75f2b76861b70e1d3c6676b9fcc0992deb998bd330a6457d3.(E 3.00000000) ca2385812dd06e4a5389c46e0ceb2e86816a080a56e928f903620a52b707d1e6.(E 120.00000000) 3fe81ea98111881faf28f9d7681f68f5d287c17d207120114f0fb25975c54ef2.(E 777.00000000) numentropy tx 13: 12388.00000000
```


[13-Aug-18 05:04 AM] SHossain#0007
```
{
  "result": "success",
  "hex": "01000000021102e33a2842d6783c0d27bff88977777c7f898e9424123463a6bba81ef5f930000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814014b7681decb884f09a8c06c5ae1ed50896fa29298ac8393d701004640a51db3f2334fa480e41a66031634db7207d4303baa8318ee5f752665f3342116a8bfdf3a100af038001e6a10001ffffffff7aafb3d20e67f3a489b35074fc0ac8835adbcfa1d460cdae09f8764707db6447020000004847304402204f77f5b9ac012edc38c4e75141fe6af5a0dac71e280c12a19b5207c996d56f330220147cecca90867c4d1296534a243065d337f7310aab20083b8215ad667e75fccd01ffffffff0500c2eb0b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc8093dc1400000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1227000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0ec4a83903000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6424469636531000000c17804445b6577e3fd12de4ccb4b5d72a5c9335345d7187e5a6e67a96d58da7c458abb5616077318bdb48b7b35892f9d56dded9738ff694507b45461913bd23b000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[13-Aug-18 05:06 AM] SHossain#0007
```
8c8e2929017a9944d485fde3028b2b7ab04c4b225e21f55f90c8ebc21a5e652b winnings 10.50000000 bet 3.50000000 at odds 2:1
8c8e2929017a9944d485fde3028b2b7ab04c4b225e21f55f90c8ebc21a5e652b winnings 10.50000000 bet 3.50000000 at odds 2:1
8c8e2929017a9944d485fde3028b2b7ab04c4b225e21f55f90c8ebc21a5e652b
8c8e2929017a9944d485fde3028b2b7ab04c4b225e21f55f90c8ebc21a5e652b winnings 10.50000000 bet 3.50000000 at odds 2:1
0c0c1e64a7c230baee11aaccfc7c9aa577c32253e7fb1fd28a5f579b243c0837
added to mempool and broadcast
8c8e2929017a9944d485fde3028b2b7ab04c4b225e21f55f90c8ebc21a5e652b winnings 10.50000000 bet 3.50000000 at odds 2:1
```


[13-Aug-18 05:10 AM] SHossain#0007
minining node even seen this broadcast
```
01000000041102e33a2842d6783c0d27bff88977777c7f898e9424123463a6bba81ef5f9300100000048473044022041d805b941466d9d98119dbf12c88293e35291d09422aea49cf24b022f163d8902200808a76ecbd8ef3d9c9c1c937087d3f204b9c8732a72d2d2f63cef78d988d14701ffffffff2b655e1ac2ebc8905ff5215e224b4cb07a2b8b02e3fd85d444997a0129298e8c000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81401624720c2c151b5b52b6b9ee4a49ef85791556d61212aa1ded0d3e6b7642fef6224e4d3d2dae2970b190f90f6554cf32e277d84961990f587ee12fa58309d2e5a100af038001e6a10001ffffffff2b655e1ac2ebc8905ff5215e224b4cb07a2b8b02e3fd85d444997a0129298e8c010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140c723805cab6fa3215fc5525b82847f1a9e60d7463da7ad6375a80362ef2fedf2376e3e7f89ebf6a0cae3812d6ab343269f90c1b03b39f3054b5037c49c43ca97a100af038001e6a10001ffffffff188e2823959b7f633652ed1a2e732b48c027e309def57fb0bbb4e24a4e8c9f7b000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140882db222043673172c2812b390ecaa7be86bf83cc3022e5be349cb8b6ddf783f6053d2c0f887053b7f662ed6e5e7bed060abbff3a76f97f9e1fc877e257e6142a100af038001e6a10001ffffffff04f03dcd1d00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac80ba953e00000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6574469636531000000c17804445b6577e3fd12de4ccb4b5d72a5c9335345d7187e5a6e67a96d58da7c59db2674b51d8cab732b4c6006c1b80f0cdb70026e6e9b4b8358d95084e45b66f41b43d407d02f90c88f0e3b5c3d4382c40cb1c3f08eec25f7cc5c39e9c24e8e00000000
0c0c1e64a7c230baee11aaccfc7c9aa577c32253e7fb1fd28a5f579b243c0837
```


[13-Aug-18 05:13 AM] SHossain#0007
similar bet again didn't win
```
556622cc769c56be4ee720e492a2e3763dc0ae781349f2491f3ca08abd7a077c winnings 0.00000000 bet 3.50000000 at odds 2:1
```


[13-Aug-18 05:16 AM] SHossain#0007
winner
```
c69e84bdce387166f7144618e67ee0b133b7ece6486b1a258b44dc9fa118d87b winnings 15.00000000 bet 5.00000000 at odds 2:1
```


[13-Aug-18 05:25 AM] SHossain#0007
funds added to wallet


[13-Aug-18 05:26 AM] SHossain#0007
another one no win
```
e9f298ba13ee3d76023b40bd3545243eb65ba59e3b0f37a80279570f2095280e winnings 0.00000000 bet 7.00000000 at odds 11:1
```


[13-Aug-18 05:27 AM] siu#3920
hi guys im back


[13-Aug-18 05:31 AM] siu#3920
@SHossain seems like you reproduced the bug of dissapearing funds from dice plan


[13-Aug-18 05:34 AM] SHossain#0007
which one is that?


[13-Aug-18 05:35 AM] siu#3920
```./komodo-cli -ac_name=AT3 diceinfo 5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43
{
  "result": "success",
  "fundingtxid": "5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "1000000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "0.00000000"
}
siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT3 diceinfo 5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43
{
  "result": "success",
  "fundingtxid": "5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "1000000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "104010.00000000"
}
```


[13-Aug-18 05:35 AM] siu#3920
this is weird


[13-Aug-18 05:35 AM] siu#3920
chain was synced already


[13-Aug-18 05:35 AM] siu#3920
dice info showed 0 balance


[13-Aug-18 05:35 AM] siu#3920
tried again a second time... funding shows correct balance


[13-Aug-18 05:53 AM] siu#3920
reproduced the bug.... on first win


[13-Aug-18 05:53 AM] siu#3920
```./komodo-cli -ac_name=AT3 dicebet SIU 5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43 1000 5```


[13-Aug-18 05:53 AM] siu#3920
commnad


[13-Aug-18 05:53 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT3 sendrawtransaction 0100000002f2267333a40f51dfa7283c0e390dfa2e7afb0e487e7fa780f8238db27dd0b3f1000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81402e16e76b448382d6205e150eda5268fd72332c5da38d0848b6db48ad775338696929c2757abd6c0935b05913475c05f4edda2cad2a756e40f04ae50c630fc198a100af038001e6a10001ffffffff7a3a5d3f10e48ebd40f28bc75684fd28ce4ad414b640f8424183b7e848ef6214030000004847304402202af3b28abfe2d6bfdc1db9264d771a21f37a2026cf9863805f872a950b5cada1022038f5ba96ec11382dc0cb9f29422b9b6834b043c1ef92fbca8b421a7c49e31bef01ffffffff0500923b16ea090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac882bb80a5e08000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae642534955000000000043ddba6688de6fa1d14c2a12924e8ad526aeb65e0296c7fe34e92ac6f6d1bd5dd3fe912f73d37c1d42e1e0566218f96dfff5b48827e3b1dca362a4628f6ab8ea000000000000000000000000000000000000000000000000000000000000000000000000
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385
``` HEX with txid of the bet


[13-Aug-18 05:54 AM] siu#3920
```19d911879d79aa3b7726a87d585fbed8c5b20f6919c67e5a4d6ba5095b340ee4 B refsbits.554953 sbits.554953 nValue 195999.99990000
19d911879d79aa3b7726a87d585fbed8c5b20f6919c67e5a4d6ba5095b340ee4 B refsbits.554953 sbits.554953 nValue 1000.00000000
f1b3d07db28d23f880a77f7e480efb7a2efa0d390e3c28a7df510fa4337326f2.(L 109010.00000000) check first
numentropy tx 1: 109010.00000000
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
not enough inputs for 5000.00010000
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
```


[13-Aug-18 05:54 AM] siu#3920
output


[13-Aug-18 05:54 AM] siu#3920
``` ./komodo-cli -ac_name=AT3 diceinfo 5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43{
  "result": "success",
  "fundingtxid": "5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "1000000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "0.00000000"
}
``` diceinfo with funding 0.000


[13-Aug-18 05:56 AM] SHossain#0007
i see funding 0 for this dice plan as well


[13-Aug-18 05:56 AM] SHossain#0007
try betting on this one 7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1


[13-Aug-18 05:57 AM] SHossain#0007
see if you can breat it


[13-Aug-18 05:57 AM] siu#3920
ok


[13-Aug-18 05:58 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 diceinfo 5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 B refsbits.554953 sbits.554953 nValue 109010.00000000
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 B refsbits.554953 sbits.554953 nValue 1000.00000000
19d911879d79aa3b7726a87d585fbed8c5b20f6919c67e5a4d6ba5095b340ee4 B refsbits.554953 sbits.554953 nValue 195999.99990000
19d911879d79aa3b7726a87d585fbed8c5b20f6919c67e5a4d6ba5095b340ee4 B refsbits.554953 sbits.554953 nValue 1000.00000000
numentropy tx 0: 0.00000000
{
  "result": "success",
  "fundingtxid": "5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "1000000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "0.00000000"
}
```


[13-Aug-18 05:59 AM] SHossain#0007
seems like the `numentropy tx 0: 0.00000000` goes missing


[13-Aug-18 05:59 AM] SHossain#0007
you just won 600 from Dice1


[13-Aug-18 06:00 AM] SHossain#0007
funding before your win
`"funding": "12396.49980000"`
funding after your win
`"funding": "11569.49980000"`


[13-Aug-18 06:01 AM] siu#3920
```c073a9cc0bb59de46ee53d22dcacee37168db2a79b5bb3855c3d4af37dd1e182.(E 777.00000000) 641c68efc7ccf1877d5737aa37762e05d453038067f9c27bb33e19786120f583.(E 7.00000000) 6c375ddaecfb86c7cec821377ba221dfdda0c48bbc06e261112d6added01ed88.(E 10.00000000) bf769d59012deeebb469f3976eb31d460512756a11005b9ff1508b2dff7bc196.(E 77.00000000) f77fbd7f4083638196f9ded0b7e61fab7cc0e80d23bb973cde868206d247889a.(L 22.00000000) 2bab6a364335de460269b91d8834239f15e8710e2e3f992466cb791075666eb2.(W 494.99980000) d91d04e4bf81b6c7443a61879ea78a1d86055036953b74c6fde87b928615a4b2.(L 53.50000000) 7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1.(F 10000.00000000) f0f3c1082d86de1bdde8d0f3c73e6649632c6072fc7fd4e98367b2128ab0a2c9.(E 5.00000000) 71a6e03360d6d7a75f2b76861b70e1d3c6676b9fcc0992deb998bd330a6457d3.(E 3.00000000) ca2385812dd06e4a5389c46e0ceb2e86816a080a56e928f903620a52b707d1e6.(E 120.00000000) 3fe81ea98111881faf28f9d7681f68f5d287c17d207120114f0fb25975c54ef2.(E 777.00000000) numentropy tx 12: 12396.49980000
273a85671a99a3e23e89adfa360b9ad34fc254c5831aed1eb5dbfe1e19b09f7d.(E 50.00000000) check first
c073a9cc0bb59de46ee53d22dcacee37168db2a79b5bb3855c3d4af37dd1e182.(E 777.00000000) 641c68efc7ccf1877d5737aa37762e05d453038067f9c27bb33e19786120f583.(E 7.00000000) 6c375ddaecfb86c7cec821377ba221dfdda0c48bbc06e261112d6added01ed88.(E 10.00000000) bf769d59012deeebb469f3976eb31d460512756a11005b9ff1508b2dff7bc196.(E 77.00000000) f77fbd7f4083638196f9ded0b7e61fab7cc0e80d23bb973cde868206d247889a.(L 22.00000000) 2bab6a364335de460269b91d8834239f15e8710e2e3f992466cb791075666eb2.(W 494.99980000) d91d04e4bf81b6c7443a61879ea78a1d86055036953b74c6fde87b928615a4b2.(L 53.50000000) 7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1.(F 10000.00000000) ```


[13-Aug-18 06:01 AM] siu#3920
```f0f3c1082d86de1bdde8d0f3c73e6649632c6072fc7fd4e98367b2128ab0a2c9.(E 5.00000000) 71a6e03360d6d7a75f2b76861b70e1d3c6676b9fcc0992deb998bd330a6457d3.(E 3.00000000) ca2385812dd06e4a5389c46e0ceb2e86816a080a56e928f903620a52b707d1e6.(E 120.00000000) 3fe81ea98111881faf28f9d7681f68f5d287c17d207120114f0fb25975c54ef2.(E 777.00000000) numentropy tx 12: 12396.49980000
```


[13-Aug-18 06:01 AM] siu#3920
i got some different outputs from this plan


[13-Aug-18 06:02 AM] SHossain#0007
i have multiple utxo there


[13-Aug-18 06:02 AM] siu#3920
ok


[13-Aug-18 06:03 AM] siu#3920
but i dont see the `winnings` printout


[13-Aug-18 06:03 AM] SHossain#0007
the last bet you didn't win


[13-Aug-18 06:03 AM] SHossain#0007
`73596cc96ae8d9175766635cb02cae8439155dd5d69e3f48a92c16b443f8b4a5 winnings 0.00000000 bet 100.00000000 at odds 5:1`


[13-Aug-18 06:04 AM] siu#3920
ohh, so the output of winnings doesnt get printed in the users console? just in the plan holder node?


[13-Aug-18 06:06 AM] SHossain#0007
i saw it in my console


[13-Aug-18 06:06 AM] SHossain#0007
`449dc267e508475abf67e23048a1818ad2eb0467def7c6eb80e615be3ed95266 winnings 0.00000000 bet 100.00000000 at odds 5:1`


[13-Aug-18 06:07 AM] SHossain#0007
mempool now has 3 txs pending. i'm mining with 1 core


[13-Aug-18 06:07 AM] SHossain#0007
in  my mining node


[13-Aug-18 06:09 AM] siu#3920
they went through


[13-Aug-18 06:09 AM] siu#3920
did i win?


[13-Aug-18 06:10 AM] SHossain#0007
yep. the fundings are showing house win
```
{
  "result": "success",
  "fundingtxid": "7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1",
  "name": "Dice1",
  "sbits": 212154411332,
  "minbet": "1.00000000",
  "maxbet": "100.00000000",
  "maxodds": 77,
  "timeoutblocks": 2,
  "funding": "12096.49970000"
}
```


[13-Aug-18 06:10 AM] SHossain#0007
`winnings 0.00000000` means you didn't win


[13-Aug-18 06:10 AM] siu#3920
but that doesnt show in my console


[13-Aug-18 06:10 AM] SHossain#0007
are you using latest


[13-Aug-18 06:10 AM] SHossain#0007
?


[13-Aug-18 06:11 AM] siu#3920
yes


[13-Aug-18 06:11 AM] siu#3920
siu@T460:~/komodo/src$ git pull
Already up-to-date.
siu@T460:~/komodo/src$


[13-Aug-18 06:11 AM] SHossain#0007
./komodo-cli -ac_name=AT3 getblockhash 2353
00386431f37f524dcf075c58c952b16a168e9ccf58bce287265a2dd8e5167b37


[13-Aug-18 06:11 AM] SHossain#0007
probably, only the dealer node see the winning and lost bets


[13-Aug-18 06:12 AM] siu#3920
./komodo-cli -ac_name=AT3 getblockhash 2353
00386431f37f524dcf075c58c952b16a168e9ccf58bce287265a2dd8e5167b37


[13-Aug-18 06:12 AM] SHossain#0007
I see these stdouts in my console where i originally started the chain

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/478551518442815508/Screenshot_from_2018-08-13_14-11-52.png


[13-Aug-18 06:12 AM] siu#3920
yes... seem like it


[13-Aug-18 06:13 AM] siu#3920

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/478551580426371072/unknown.png


[13-Aug-18 06:13 AM] siu#3920
would be nice for the user to get a print of win or loss


[13-Aug-18 06:16 AM] SHossain#0007
how may terminal windows you are using for this test?


[13-Aug-18 06:17 AM] SHossain#0007
do you have the first console running where you used the start command of the AT3 chain?


[13-Aug-18 06:17 AM] siu#3920
two


[13-Aug-18 06:17 AM] siu#3920
one for console, one for commands.


[13-Aug-18 06:18 AM] SHossain#0007
console doesn't print out similar image that i posted?


[13-Aug-18 06:18 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/478552914189746216/Screenshot_from_2018-08-13_14-18-12.png


[13-Aug-18 06:19 AM] siu#3920
no, it showed similar to yours when i was the owner of the dice fund


[13-Aug-18 06:19 AM] siu#3920
but since im betting on your dicefund now it shows different messages


[13-Aug-18 06:20 AM] SHossain#0007
maybe use dicestatus


[13-Aug-18 06:22 AM] siu#3920
yes... that shows it


[13-Aug-18 06:25 AM] SHossain#0007
my dicefund still shows non 0 balance


[13-Aug-18 06:25 AM] siu#3920
?


[13-Aug-18 06:25 AM] SHossain#0007
your one showed 0 a while ago


[13-Aug-18 06:26 AM] siu#3920
yes, yours is still up?


[13-Aug-18 06:26 AM] SHossain#0007
```
{
  "result": "success",
  "fundingtxid": "7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1",
  "name": "Dice1",
  "sbits": 212154411332,
  "minbet": "1.00000000",
  "maxbet": "100.00000000",
  "maxodds": 77,
  "timeoutblocks": 2,
  "funding": "12396.49970000"
}
```


[13-Aug-18 06:26 AM] siu#3920
can you try betting from your own node until you have a win?


[13-Aug-18 06:26 AM] SHossain#0007
i did


[13-Aug-18 06:26 AM] SHossain#0007
i won, i lost


[13-Aug-18 06:26 AM] SHossain#0007
multiple times


[13-Aug-18 06:26 AM] siu#3920
can you try until you break it?


[13-Aug-18 06:27 AM] SHossain#0007
i can try....not sure it will break.


[13-Aug-18 06:28 AM] siu#3920
how many wins you got?


[13-Aug-18 06:28 AM] SHossain#0007
min 2 wins


[13-Aug-18 06:29 AM] siu#3920
keep trying


[13-Aug-18 06:29 AM] SHossain#0007
another win
`8c341ed7b2003937f9ff4f2f731afb140397e3507dd842bb1d0e7bf454ec53a3 winnings 84.00000000 bet 7.00000000 at odds 11:1`


[13-Aug-18 06:30 AM] SHossain#0007
lost
```
2826c06d1dfe6a8522e1cdcfb9e3b5e129b1ddf5395c2e1e5a74f6257a94dc4d winnings 0.00000000 bet 5.00000000 at odds 11:1
```


[13-Aug-18 06:30 AM] SHossain#0007
lost
`a572ac3882062181984b49fe901b1bf5da7d3490ecb53bc014b9456a615bf7cc winnings 0.00000000 bet 10.00000000 at odds 11:1`


[13-Aug-18 06:31 AM] SHossain#0007
`aa807c0b480a623c48d0148847ad7730e6d9cbde47bfc9215ede5d4b4e280f25 winnings 0.00000000 bet 7.00000000 at odds 11:1`


[13-Aug-18 06:33 AM] siu#3920
```/komodo-cli -ac_name=AT3 sendrawtransaction 010000000209fb604a4c40cdd4fc063eaf23f011f1546c929f78e1484a4afa62b2e1d41253000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81406a6094a9b4db1652496cd51748220b8f5302fa22624d138667acf1f4057a8a5f479a45be62eb4a57907f5de432bc08baa09e04079f03ed140765c97e852cc970a100af038001e6a10001ffffffff5933fa5cc53693df81f4db0aa716fbd56d582370bfff4e079c3288790e606e0102000000484730440220788cf98af4946912b7565d858168718af8e243b7ad178c4eb1cdd7dc4647f58302202c16bb9caf12d805d2911cf9ab65af7972fc6081705f6f31712cdb7823e407b701ffffffff05008c864700000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e40b5402000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6acdb253ba40b00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6424469636531000000c17804445b6577e3fd12de4ccb4b5d72a5c9335345d7187e5a6e67a96d58da7c4791e18fe278358e4da831909f2170657c044446e02a91bb4cb4c2214d611fc5000000000000000000000000000000000000000000000000000000000000000000000000
error code: -25
error message:
```


[13-Aug-18 06:34 AM] siu#3920
im getting this now


[13-Aug-18 06:34 AM] SHossain#0007
i have done 4 more. lost


[13-Aug-18 06:35 AM] siu#3920
seems like my bets fail when yours are being processed


[13-Aug-18 06:37 AM] siu#3920
i dont get any output about why the tx fails.


[13-Aug-18 06:38 AM] siu#3920
i can only guess its because there are other txs in the mempool


[13-Aug-18 06:39 AM] SHossain#0007
i don't think so. now i'm mining with 2 nodes.


[13-Aug-18 06:39 AM] SHossain#0007
mempools get cleared fast


[13-Aug-18 06:39 AM] siu#3920
why the blank error message then?


[13-Aug-18 06:40 AM] siu#3920
im mining too


[13-Aug-18 06:41 AM] siu#3920
now it worked, with an empty mempool


[13-Aug-18 06:41 AM] SHossain#0007
try again


[13-Aug-18 06:48 AM] SHossain#0007
now i could duplicate, my sendrawtransaction got same error as yours
```
./komodo-cli -ac_name=AT3 sendrawtransaction 010000000204eaf18a3014e4e27874914a64197b152790cb0e5a1db7adc3856e4065e61cf7000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81406f834dfe3e7d771f11d1c711b42ad7ac40438f5ae6b1ebbf7f19e74ad9bba8517342df862c10a0705fcdf706f300c48d0ddd1bb2c6e61544955494a0d78b3408a100af038001e6a10001ffffffff5317ea51d995d75d92e8e4eff1a406b2fa94f5f5d0b4ec8f2551791b696938860300000049483045022100b45911afe1c06dee5b4b19afa7182790018b396c33a90ef0798da72041680aa50220214c91433db0f2d994e4536931fa397d845af534b0320c98cbc73336c618b6aa01ffffffff05e0473ce213000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc0065cd1d00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1227000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac2b0ae92000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6424469636531000000c17804445b6577e3fd12de4ccb4b5d72a5c9335345d7187e5a6e67a96d58da7ccb6197fee24374d9375678408cd61eacc6fe820fa0cff802491f81f1d7befa6d000000000000000000000000000000000000000000000000000000000000000000000000
error code: -25
error message:

```


[13-Aug-18 06:49 AM] SHossain#0007
i used it promptly after your one


[13-Aug-18 06:49 AM] siu#3920
yeah... seems like sendrawtransaction fails when there are others in the mempool for the same dicefund node


[13-Aug-18 06:49 AM] SHossain#0007
when i tried again, i got 
```
error code: -25
error message:
Missing inputs
```


[13-Aug-18 06:49 AM] siu#3920
yes, do you see in the console if something did go through?


[13-Aug-18 06:50 AM] SHossain#0007
not for my bets


[13-Aug-18 06:50 AM] SHossain#0007
i saw your lost bets


[13-Aug-18 06:50 AM] jl777c#5810
likely your node is creating tx that use the same vins? plz check the vin inputs in each to see if there are conflicts


[13-Aug-18 06:51 AM] jl777c#5810
not sure I can fix all such competition for utxo.  i can make it less likely to happen, but it should already be checking the mempool to avoid using the already in the mempool utxo


[13-Aug-18 06:53 AM] siu#3920
so the trick for not getting the node show 0 funding is to send multiple utxos first?


[13-Aug-18 06:54 AM] jl777c#5810
like the faucet, it can only do 1 action per utxo


[13-Aug-18 06:55 AM] jl777c#5810
and only the dice plan creating node processes the bets in realtime, the other nodes will see it in the mempool and when confirmed, if it was responded to


[13-Aug-18 06:55 AM] jl777c#5810
dicestatus is for finding out if your dicebet won or lost


[13-Aug-18 06:57 AM] siu#3920
still... why do the funds dissapear ?


[13-Aug-18 06:58 AM] jl777c#5810
maybe they are unconfirmed?


[13-Aug-18 06:58 AM] jl777c#5810
after a dicebet if it is all included in the tx, it wont appear in the total until it confirms


[13-Aug-18 06:58 AM] siu#3920
but it stays in 0


[13-Aug-18 06:58 AM] jl777c#5810
so maybe this is not a bug


[13-Aug-18 06:59 AM] jl777c#5810
oh, the funds never come back?


[13-Aug-18 06:59 AM] jl777c#5810
i need to get a valid tx that confirmed on the chain and where the funds are disappeared


[13-Aug-18 06:59 AM] siu#3920
```./komodo-cli -ac_name=AT3 diceinfo 5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43
{
  "result": "success",
  "fundingtxid": "5dbdd1f6c62ae934fec796025eb6ae26d58a4e92122a4cd1a16fde8866badd43",
  "name": "SIU",
  "sbits": 5589331,
  "minbet": "1.00000000",
  "maxbet": "1000000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "0.00000000"
}
```


[13-Aug-18 06:59 AM] siu#3920
@SHossain can you try to do a fund with just one utxo and try to win?


[13-Aug-18 06:59 AM] siu#3920
see if you can reproduce this


[13-Aug-18 07:00 AM] jl777c#5810
so what was the last dicebet tx that confirmed?


[13-Aug-18 07:00 AM] jl777c#5810
where did the funds go?


[13-Aug-18 07:00 AM] siu#3920
i posted earlier the outputs for the tx that made the funds dissapear


[13-Aug-18 07:00 AM] SHossain#0007
```
{
  "result": "success",
  "fundingtxid": "7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1",
  "name": "Dice1",
  "sbits": 212154411332,
  "minbet": "1.00000000",
  "maxbet": "100.00000000",
  "maxodds": 77,
  "timeoutblocks": 2,
  "funding": "12433.49950000"
}
```
i'll add more utxo in there after some food


[13-Aug-18 07:00 AM] jl777c#5810
yes, but you added funds afterwards


[13-Aug-18 07:01 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT3 sendrawtransaction 0100000002f2267333a40f51dfa7283c0e390dfa2e7afb0e487e7fa780f8238db27dd0b3f1000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81402e16e76b448382d6205e150eda5268fd72332c5da38d0848b6db48ad775338696929c2757abd6c0935b05913475c05f4edda2cad2a756e40f04ae50c630fc198a100af038001e6a10001ffffffff7a3a5d3f10e48ebd40f28bc75684fd28ce4ad414b640f8424183b7e848ef6214030000004847304402202af3b28abfe2d6bfdc1db9264d771a21f37a2026cf9863805f872a950b5cada1022038f5ba96ec11382dc0cb9f29422b9b6834b043c1ef92fbca8b421a7c49e31bef01ffffffff0500923b16ea090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac882bb80a5e08000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae642534955000000000043ddba6688de6fa1d14c2a12924e8ad526aeb65e0296c7fe34e92ac6f6d1bd5dd3fe912f73d37c1d42e1e0566218f96dfff5b48827e3b1dca362a4628f6ab8ea000000000000000000000000000000000000000000000000000000000000000000000000
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385```


[13-Aug-18 07:01 AM] siu#3920
no, this is a new occurence


[13-Aug-18 07:01 AM] jl777c#5810
the idea is to break it, know exactly what broke it so I can reproduce the failure and then not change it until it is fixed


[13-Aug-18 07:01 AM] siu#3920
i left it at 0 again


[13-Aug-18 07:01 AM] jl777c#5810
ok, so the above tx lost the funds?


[13-Aug-18 07:02 AM] siu#3920
yes


[13-Aug-18 07:02 AM] siu#3920
```19d911879d79aa3b7726a87d585fbed8c5b20f6919c67e5a4d6ba5095b340ee4 B refsbits.554953 sbits.554953 nValue 195999.99990000
19d911879d79aa3b7726a87d585fbed8c5b20f6919c67e5a4d6ba5095b340ee4 B refsbits.554953 sbits.554953 nValue 1000.00000000
f1b3d07db28d23f880a77f7e480efb7a2efa0d390e3c28a7df510fa4337326f2.(L 109010.00000000) check first
numentropy tx 1: 109010.00000000
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
null funcid
not enough inputs for 5000.00010000
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
3dc640cdb83fa8bb2345fee1ea7edcc21ff30309d4d90351b21a2e368fd0d385 winnings 6000.00000000 bet 1000.00000000 at odds 5:1```


[13-Aug-18 07:02 AM] siu#3920
and these where the outputs


[13-Aug-18 07:04 AM] jl777c#5810
ok duplicating. plz dont use this diceplan


[13-Aug-18 07:05 AM] siu#3920
ok


[13-Aug-18 07:09 AM] SHossain#0007
@siu probably create another diceplan and see if it gets reproduced.


[13-Aug-18 07:15 AM] jl777c#5810
problem was not enough dice funds and with multiple betting going on, they got all used up at the time when there were 2 bets outstanding


[13-Aug-18 07:15 AM] jl777c#5810
without any utxo left, it couldnt construct a winning payment


[13-Aug-18 07:17 AM] siu#3920
but there where 100000 funds


[13-Aug-18 07:17 AM] jl777c#5810
do you understand about utxo?


[13-Aug-18 07:18 AM] siu#3920
i do


[13-Aug-18 07:18 AM] jl777c#5810
if there is 1 utxo and 2 bets


[13-Aug-18 07:18 AM] jl777c#5810
does it matter than the utxo is 100,000?


[13-Aug-18 07:18 AM] siu#3920
there where about 3 or 4 more utxos


[13-Aug-18 07:18 AM] siu#3920
there where actually more


[13-Aug-18 07:18 AM] siu#3920
`numentropy tx 1: 109010.00000000`


[13-Aug-18 07:19 AM] siu#3920
that was the balance before it broke


[13-Aug-18 07:19 AM] jl777c#5810
i pushed a fix that should reduce the appetite for utxo, but it will still run into problems if there are more active bets than utxo


[13-Aug-18 07:19 AM] jl777c#5810
the bet used the ONLY remaining utxo


[13-Aug-18 07:19 AM] jl777c#5810
then when it tried to do a payout 2 seconds later, there were no utxo left


[13-Aug-18 07:20 AM] jl777c#5810
anyway new version should work a bit better in sparse utxo conditions, but ultimately if you dont have enough utxo to handle all the bets to process in a block, you will not be able to process all the bets in a block


[13-Aug-18 07:20 AM] jl777c#5810
and can end up where there are 1 or more bets pending that cant be paid out


[13-Aug-18 07:21 AM] jl777c#5810
that is how the funds reappear at tims


[13-Aug-18 07:21 AM] jl777c#5810
when more funds are added, it allows the bets to be process and the change becomes available


[13-Aug-18 07:22 AM] jl777c#5810
this is only an issue when running out of utxo with a winning bet to be paid out


[13-Aug-18 07:25 AM] dukeleto#7326
wow, y'all have been busy


[13-Aug-18 07:25 AM] siu#3920
updating


[13-Aug-18 07:25 AM] dukeleto#7326
just merged the latest changes in and testing them now


[13-Aug-18 07:35 AM] dukeleto#7326
all tests still passing


[13-Aug-18 07:37 AM] dukeleto#7326
Here is a fun math question: Given a max APR of 25%, how large do I need to fund a rewards such that I can wait a few seconds and do an unlock? There is a check that the rewards are larger than 1 txfee, which is preventing my test from passing, since not enough time is passing in the test suite


[13-Aug-18 07:37 AM] dukeleto#7326
gonna make ‚òï before calculating that


[13-Aug-18 07:38 AM] dukeleto#7326
I will also add the reason an unlock fails to our error JSON, because there are at least 4 or 5 reasons it can fail and it's not fun debugging why


[13-Aug-18 07:38 AM] jl777c#5810
but it does make you learn a lot more how the code works üòÉ


[13-Aug-18 07:39 AM] jl777c#5810
the CC contracts are by and large not so complex, just need to get all the details on utxo constraints correct


[13-Aug-18 07:39 AM] dukeleto#7326
This is the best way for me to learn about CC, glad I can be useful


[13-Aug-18 07:43 AM] jl777c#5810
yes very helpful and creates a template for what new CC news


[13-Aug-18 07:46 AM] jl777c#5810
needs


[13-Aug-18 08:35 AM] dukeleto#7326
I am thinking of the best way to pass error messages/conditions from internals CC functions in src/cc/* to the RPC wrappers, going to have to think harder and drink more ‚òï


[13-Aug-18 08:42 AM] jl777c#5810
since rpc calls are single threaded, you could have a std::string CCerror that is set if there is an error


[13-Aug-18 09:26 AM] dukeleto#7326
üëç


[13-Aug-18 09:39 AM] SHossain#0007
rewardsunlock worked fine again
```
minseconds 0 maxseconds 604800
duration 19108 (1534178200 - 1534159092) numblocks 220 (2470 - 2250)
amount 10000.00000000 25000000000000.00000000 3072 -> duration.19108 reward 0.00587100
minseconds 0 maxseconds 604800
duration 19108 (1534178200 - 1534159092) numblocks 220 (2470 - 2250)
amount 10000.00000000 25000000000000.00000000 3072 -> duration.19108 reward 0.00587100
minseconds 0 maxseconds 604800
duration 19108 (1534178200 - 1534159092) numblocks 220 (2470 - 2250)
amount 10000.00000000 25000000000000.00000000 3072 -> duration.19108 reward 0.00587100
minseconds 0 maxseconds 604800
duration 19108 (1534178200 - 1534159092) numblocks 220 (2470 - 2250)
amount 10000.00000000 25000000000000.00000000 3072 -> duration.19108 reward 0.00587100
363fcf6bc2bfc6035a5542d5a8948802c7294cff7c1597843fc48bcddef5dc64
```


[13-Aug-18 09:39 AM] siu#3920
now i got the error, the  balance is not 0 but the utxo that was used for the bet win dissapeared


[13-Aug-18 09:39 AM] siu#3920
```./komodo-cli -ac_name=AT3 sendrawtransaction 01000000022087a0ec7d8bb8feb64660f63e8b07fa2bafcf116ee20074087d0ade176490c0000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81404c7ba40b92eca6791f3941ccb143d2e309e8b5ef7050db7885ed61d8223ee84c6b2d2e44e8b6789a58788bebaa92f6128e7bd83eefee87782d2b35d6ecada44fa100af038001e6a10001ffffffff1fd15c381f5ef0c50939527ca567e39d45b7de11f5ffd3fde1268b0419957a9c0300000049483045022100d3bb904178dc8f81929d7b2ae8c46ae865425419c91894254232a283b3f6eabf02207ca882f7f5612b3014c20ba0b7c39e9dde88e4c0ae14a05ea7fc4ebfc37f253601ffffffff05007060df46090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc152700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac198952311808000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6425349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdcccf7ab7304723174b0671b03f7937819c6842075b1090196b5b1570bb17fb9f838000000000000000000000000000000000000000000000000000000000000000000000000
```


[13-Aug-18 09:43 AM] siu#3920
```c0906417de0a7d087400e26e11cfaf2bfa078b3ef66046b6feb88b7deca08720.(L 102000.00000000) check first
ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4.(F 1000000.00000000) numentropy tx 1: 1102000.00000000
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
```


[13-Aug-18 09:43 AM] siu#3920
```01000000032087a0ec7d8bb8feb64660f63e8b07fa2bafcf116ee20074087d0ade176490c00100000049483045022100cec5aed498a609ab6a51793f4853659c6d76eec5f2403bd958fe645c450e879902206cc98832fae8fac212baa86a15f7131376c2e2ed0df88a5bc089e5f47456af9401ffffffffb3d7078aeec41663db7f2f0a18efc2ee00324579c82243e8a10ef391274f9ed4000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140bc6b37208f6e316bc38f20f2f56629b75dc117055247a2155cf645134bc6b3c96486bfc1781e5c26cfbec4439cb80bb809aafd8b6e57d44d3db82825db24a3c2a100af038001e6a10001ffffffffb3d7078aeec41663db7f2f0a18efc2ee00324579c82243e8a10ef391274f9ed4010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140a8438b3d843fd41730d51f708537e8bfa5d14ab6dfbea29b8e7b5f6e94325f5d2aba8a314f071ea9e8b3b7e314ded17240f048c4106bfee416b06a8e10b61b91a100af038001e6a10001ffffffff04007060df46090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac0070c9b28b00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccca85d919e33c20a961acf90abed34f43f58d55f29292155857337976dae9719b1078d1a785df6cc1de186aad90c62ae616a57913d8c322b33d72b8c40bcdc27c000000000
6fd749e7f1e3cdc0a2ece7c517550c9b2cf93f48794fec38e3f6131a5fcbb123
spentheight.2454 valuein 103000.0001 vs 108000.0001 error
error adding to mempool
ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4.(F 1000000.00000000) numentropy tx 0: 1000000.00000000
```


[13-Aug-18 09:44 AM] siu#3920
I did the fund with 1000000 funding


[13-Aug-18 09:44 AM] siu#3920
then added with diceaddfunding 100000 more in a new utxo


[13-Aug-18 09:45 AM] siu#3920
loss 2 swaps which made a final balance of 1102000


[13-Aug-18 09:45 AM] siu#3920
won a bet which was supposed to be a 6000 win


[13-Aug-18 09:46 AM] siu#3920
but it showed this `error adding to mempool`


[13-Aug-18 09:46 AM] jl777c#5810
pushed non-consensus changing fix


[13-Aug-18 09:46 AM] siu#3920
ok


[13-Aug-18 09:46 AM] jl777c#5810
but not sure it applies for your case, but it would have possible created an invalid tx


[13-Aug-18 09:48 AM] siu#3920
updating


[13-Aug-18 09:49 AM] jl777c#5810
@SHossain plz work with siu to isolate what is going wrong.it could seems the funds cant just disappear so it must still be around


[13-Aug-18 09:50 AM] jl777c#5810
and siu, plz make like 20 diceaddfunds tx so we can test basic operations without running into this all the time, once it is reproducible with some specfiic plan


[13-Aug-18 09:55 AM] siu#3920
ok


[13-Aug-18 09:55 AM] siu#3920
would be nice if someone could try to reproduce the same issue on their computer


[13-Aug-18 09:55 AM] siu#3920
just make a dicefund and try to bet with it.


[13-Aug-18 10:08 AM] SHossain#0007
@siu did you try creating a new plan?


[13-Aug-18 10:08 AM] SHossain#0007
I have tried in my computer. even added more funds. didn't seem to run into that issue yet?


[13-Aug-18 10:11 AM] SHossain#0007
i see this new plan. but, doesn't seem to have enough utxos in there 
```
./komodo-cli -ac_name=AT3 diceinfo ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 B refsbits.31554953 sbits.31554953 nValue 102000.00000000
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 B refsbits.31554953 sbits.31554953 nValue 1000.00000000
ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4.(F 1000000.00000000) numentropy tx 0: 1000000.00000000
{
  "result": "success",
  "fundingtxid": "ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4",
  "name": "SIU1",
  "sbits": 827672915,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "1000000.00000000"
}
```


[13-Aug-18 10:11 AM] SHossain#0007
`numentropy tx 0: 1000000.00000000`


[13-Aug-18 10:19 AM] siu#3920
I did a new plan. Yes


[13-Aug-18 10:19 AM] siu#3920
Sent 2 utxos


[13-Aug-18 10:21 AM] SHossain#0007
what were the commands?


[13-Aug-18 10:21 AM] SHossain#0007
i still see 0 entropy tx in there


[13-Aug-18 10:22 AM] SHossain#0007
i had 12. added 3 more and now it is showing `numentropy tx 15: 12532.49950000` for my diceplan


[13-Aug-18 10:25 AM] siu#3920
For making the diceplan?


[13-Aug-18 10:27 AM] SHossain#0007
for adding utxo


[13-Aug-18 10:32 AM] SHossain#0007
the commands you used to send those 2 tuxos


[13-Aug-18 10:45 AM] siu#3920
First one was using dicefund the other was done using diceaddfunding


[13-Aug-18 10:48 AM] SHossain#0007
what were the actual commands?


[13-Aug-18 10:49 AM] SHossain#0007
it doesn't look like the funds were added


[13-Aug-18 10:49 AM] SHossain#0007
how much funding did you do for the initial contact creation?


[13-Aug-18 10:59 AM] siu#3920
```./komodo-cli -ac_name=AT3 dicefund SIU1 1000000 1 100000 15 2
```


[13-Aug-18 11:00 AM] siu#3920
```./komodo-cli -ac_name=AT3 diceaddfunds SIU1 ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4 100000
```


[13-Aug-18 11:04 AM] SHossain#0007
your diceplan funding showing only the initial funding when you created the plan.
```
./komodo-cli -ac_name=AT3 diceinfo ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 B refsbits.31554953 sbits.31554953 nValue 102000.00000000
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 B refsbits.31554953 sbits.31554953 nValue 1000.00000000
ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4.(F 1000000.00000000) numentropy tx 0: 1000000.00000000
{
  "result": "success",
  "fundingtxid": "ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4",
  "name": "SIU1",
  "sbits": 827672915,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "1000000.00000000"
}
```


[13-Aug-18 11:04 AM] SHossain#0007
do you have the HEX value or txid from the `diceaddfunds` call?


[13-Aug-18 11:05 AM] SHossain#0007
@siu ^^


[13-Aug-18 11:07 AM] SHossain#0007
This is the example of diceplan with 15 utxos
```
./komodo-cli -ac_name=AT3 diceinfo 7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1
778bd30bf502584df6fb884d09d8fdd7d3e1bea9e6352f64a4b389e44529930f.(E 10.00000000) check first
caf326c8d74143070d21ee6371326bfc58d3e7fb6250042b614aa3944043bf2a.(L 960.99980000) 1031e70565e1649c6ddc1fe7ebdc4e5e522cb0d54a471237203baa21c990d439.(E 10.00000000) cec544959d892c49c9fee974f8c33302916f6f7379661b0f6a9b4180cdbcf947.(E 10.00000000) 1bbc42021757465f7fffdbabac48a8a69c69f86ab9a050eacf48cb796eeab552.(E 10.00000000) ae3490367cd16b957a93eb95d0891073b768a39ca39376cf0f2c71ba5acfaa79.(E 20.00000000) 08becaa768ea8f5be67499f2fc2fb57b221e03ff0c470a7722576499137eeb9e.(E 30.00000000) 96a62c69d1b3c86772388225723888ebba4a43063598494ff06f903ec16e47a3.(E 2.00000000) 71a6e03360d6d7a75f2b76861b70e1d3c6676b9fcc0992deb998bd330a6457d3.(E 3.00000000) 0b815584cc0d12f7594e1783d09ffc07f7557e4c1d10a388ab47c3bc2e3ba2d4.(L 79.00000000) 37e5e4fccd64b76938ad081020b081dba9bde4abe18e632844eb78264211ade6.(L 110.00000000) ca2385812dd06e4a5389c46e0ceb2e86816a080a56e928f903620a52b707d1e6.(E 120.00000000) 3fe81ea98111881faf28f9d7681f68f5d287c17d207120114f0fb25975c54ef2.(E 777.00000000) 8e4d998105be11e3c6226a81c28f1e1e9b3be6d7294c8906160c0c76611faafc.(L 10283.49970000) ece6125f7bc3a00c5217f393eb11c557d9298f257e76fe354ef641eeade72eff.(L 107.00000000) numentropy tx 15: 12532.49950000
{
  "result": "success",
  "fundingtxid": "7cda586da9676e5a7e18d7455333c9a5725d4bcb4cde12fde377655b440478c1",
  "name": "Dice1",
  "sbits": 212154411332,
  "minbet": "1.00000000",
  "maxbet": "100.00000000",
  "maxodds": 77,
  "timeoutblocks": 2,
  "funding": "12532.49950000"
}
```


[13-Aug-18 11:10 AM] siu#3920
https://pastebin.com/JXWNKt7T

{Embed}
https://pastebin.com/JXWNKt7T
./komodo-cli -ac_name=AT3 sendrawtransaction 010000000a3bd4a65e884...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[13-Aug-18 11:16 AM] SHossain#0007
look like the tx is already in blockchain but doesn't show in your dicefunds http://cctest.explorer.dexstats.info/tx/ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4


[13-Aug-18 11:17 AM] SHossain#0007
please add more small szie utxos for the plan


[13-Aug-18 11:17 AM] SHossain#0007
like 10, 20 50, 7, 15...


[13-Aug-18 11:17 AM] SHossain#0007
and check if the funding increases or not


[13-Aug-18 11:21 AM] SHossain#0007
The pastebin HEX value was to create the diceplan or to add funds?


[13-Aug-18 11:22 AM] siu#3920
i added 100000 more


[13-Aug-18 11:22 AM] siu#3920
then did a couple of bets that lost


[13-Aug-18 11:23 AM] siu#3920
and added with that like 4 or 5 utxos more


[13-Aug-18 11:23 AM] SHossain#0007
after you added funds, was it reflected on dice funds balance?


[13-Aug-18 11:24 AM] siu#3920
yes


[13-Aug-18 11:25 AM] siu#3920
```sendrawtransaction 01000000023f2cd881677355192da68be3c95d9a31c6becf37bc48893eadb124700ae6d02400000000494830450221008c5affed9177060980dcaba72f0ccdcfcac07c8c798afeb979d29e29cf1748b202200ba80ccdd0becf9aa69a20764135f6b22a6ce00e3dd8f40cb42c408306ed1fa101ffffffffd4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc010000004847304402205484b4e47de43d7c468aa590404ca2c57a83d7235f808f00fadfd27a30478ca002203b9a93e957710419b9f4ce7a623066473d9bf9244d8a6b11c064ce37b1815c3101ffffffff0300a0724e18090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6455349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc3ec522d81b8e4a70cfb749e9f7f0a8fbd20edec2e35a7e01e10e58c4a2482b59000000000000000000000000000000000000000000000000000000000000000000000000```


[13-Aug-18 11:25 AM] SHossain#0007
add funds of 20 now


[13-Aug-18 11:25 AM] siu#3920
this is the hex for the second deposit i made of 100k


[13-Aug-18 11:25 AM] siu#3920
those where the ones that got lost when i won


[13-Aug-18 11:25 AM] SHossain#0007
use smaller size utxo


[13-Aug-18 11:26 AM] SHossain#0007
post the hex value and output txid


[13-Aug-18 11:26 AM] siu#3920
```./komodo-cli -ac_name=AT3 diceaddfunds SIU1 ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4 20```


[13-Aug-18 11:27 AM] siu#3920
im using SIU1 since james is working on SIU afaik


[13-Aug-18 11:27 AM] siu#3920
```./komodo-cli -ac_name=AT3 sendrawtransaction 0100000001b83a73670b5f9a0fe2029ba8302bd49bd316c9c0d25c286b3f8bf35b8b70aef30300000049483045022100c0dd7d505cc7c9eb4122e5c07dab664eb0cba68390c9614c42235b50aa3aca460220047576a892f956d83a6f4db16116ce2349e762bdd450982f98c142ce231cc1e201ffffffff040094357700000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac277bd4dc0100000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6455349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc5fc323bbaa38ff382101676a33bb69df353a562680dca22d4bfc7e9acb840ee7000000000000000000000000000000000000000000000000000000000000000000000000
```


[13-Aug-18 11:27 AM] siu#3920
http://cctest.explorer.dexstats.info/tx/1f0b8811df059387cac67fb174794a98a94f539b0f0b9ca9f0dd578ae807320c


[13-Aug-18 11:27 AM] SHossain#0007
1f0b8811df059387cac67fb174794a98a94f539b0f0b9ca9f0dd578ae807320c


[13-Aug-18 11:29 AM] SHossain#0007
now, it worked! funds changed by 20, `numentropy tx 1`
```
./komodo-cli -ac_name=AT3 diceinfo ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4
1f0b8811df059387cac67fb174794a98a94f539b0f0b9ca9f0dd578ae807320c.(E 20.00000000) check first
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 B refsbits.31554953 sbits.31554953 nValue 102000.00000000
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 B refsbits.31554953 sbits.31554953 nValue 1000.00000000
ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4.(F 1000000.00000000) numentropy tx 1: 1000020.00000000
{
  "result": "success",
  "fundingtxid": "ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4",
  "name": "SIU1",
  "sbits": 827672915,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "1000020.00000000"
}
```


[13-Aug-18 11:29 AM] SHossain#0007
you need to add over 10 utxos like this and make sure funds were added to the plan


[13-Aug-18 11:30 AM] SHossain#0007
or even 20 more


[13-Aug-18 11:30 AM] SHossain#0007
then, check if your funding goes to 0


[13-Aug-18 11:30 AM] siu#3920
ok... that makes sense in a technical way


[13-Aug-18 11:31 AM] siu#3920
i wont expect anyone to do this.


[13-Aug-18 11:31 AM] jl777c#5810
this isnt end user testing


[13-Aug-18 11:31 AM] jl777c#5810
we need to get the cli solid and then the GUI can do what needs to be done


[13-Aug-18 11:32 AM] SHossain#0007
for our testing we need to do everything manually using the CLI. GUI wil make it easier for end users


[13-Aug-18 11:33 AM] SHossain#0007
i'm positive that once you have 10 or 20 utxos, funding goes to 0 issue should go away


[13-Aug-18 11:34 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 diceinfo ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4
1f0b8811df059387cac67fb174794a98a94f539b0f0b9ca9f0dd578ae807320c.(E 20.00000000) check first
38ee8b63e8e23d10a7e0ee8fbe8f9449444a27a4babfc291fa9e5192fdd52c17.(E 20.00000000) 3848f95f665cf38985c7ccf654997ebb5f8f358098abd8cf13574d6ef0338923.(E 50.00000000) 6c417dd33ec5de8faf9569e46443e29b177c1f6683a42d245d1f02e51152b96a.(E 20.00000000) d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 B refsbits.31554953 sbits.31554953 nValue 102000.00000000
d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 B refsbits.31554953 sbits.31554953 nValue 1000.00000000
ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4.(F 1000000.00000000) numentropy tx 4: 1000110.00000000
{
  "result": "success",
  "fundingtxid": "ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4",
  "name": "SIU1",
  "sbits": 827672915,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "1000110.00000000"
}
```


[13-Aug-18 11:34 AM] SHossain#0007
it is working fine now üòÉ


[13-Aug-18 11:34 AM] SHossain#0007
`numentropy tx 4`


[13-Aug-18 11:39 AM] SHossain#0007
i'll be off for now. can't keep my eyes open anymore. excessive screen time.


[13-Aug-18 11:45 AM] siu#3920
ill keep testing dice


[13-Aug-18 12:31 PM] siu#3920
12 tries without a win üò¢


[13-Aug-18 12:55 PM] siu#3920
like 20 tries and no win üò¶


[13-Aug-18 01:03 PM] jl777c#5810
use lower odds


[13-Aug-18 01:22 PM] dukeleto#7326
sweet, my code to pass errors from internals CC functions is working: `DEBUG:BitcoinRPC:<-37- {"result": "error", "error": "Rewards plan does not exist"}`


[13-Aug-18 01:23 PM] siu#3920
5:1 is not that high right?


[13-Aug-18 01:23 PM] dukeleto#7326
this should help us in developing tests as well as devs using this API for dapps


[13-Aug-18 01:23 PM] siu#3920
1 in five times i should win


[13-Aug-18 01:27 PM] siu#3920
rewardsunlock seems to have worked as it should.


[13-Aug-18 01:52 PM] jl777c#5810
probability doesnt ensure that every 5th one wins


[13-Aug-18 01:52 PM] jl777c#5810
only after a large number does it converge


[13-Aug-18 01:55 PM] ComputerGenie#7004
@siu did you ever find or make a pubkey to address script? and if not, do you want one?


[13-Aug-18 01:57 PM] siu#3920
No, didnt work on it. Would be good to have one for testers


[13-Aug-18 01:59 PM] ComputerGenie#7004
https://pastebin.com/PgvraCf6
That's for Bitcoin, I'm not sure what exactly to change in the Base58 for Komodo or other coins

{Embed}
https://pastebin.com/PgvraCf6
[Bash] Pubkey to BTC address - Pastebin.com
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[13-Aug-18 02:05 PM] jl777c#5810
prefix of 60


[13-Aug-18 02:08 PM] siu#3920
@ComputerGenie cool! L


[13-Aug-18 02:13 PM] ComputerGenie#7004
"prefix of 60"
I don't really understand the encodeBase58() function that I found, so I wouldn't know how to change that


[13-Aug-18 06:12 PM] grewalsatinder#9653
where do I start with asset CC testing?


[13-Aug-18 06:12 PM] grewalsatinder#9653
@SHossain you have any docs already ?


[13-Aug-18 06:12 PM] grewalsatinder#9653
@jl777c


[13-Aug-18 06:12 PM] grewalsatinder#9653
@siu


[13-Aug-18 06:13 PM] grewalsatinder#9653
need to test the API, get the JSON outputs, then think of how I can shape it to UI elements.


[13-Aug-18 06:13 PM] grewalsatinder#9653
then code it to UI and backend.


[13-Aug-18 06:14 PM] siu#3920
You can compile latest komodo on jl777 branch


[13-Aug-18 06:14 PM] siu#3920
Loom for dice, rewards and tokens


[13-Aug-18 06:14 PM] grewalsatinder#9653
alright, on to it in ubuntu vm then üôÇ


[13-Aug-18 06:14 PM] grewalsatinder#9653
I just need to test assets contract


[13-Aug-18 06:14 PM] grewalsatinder#9653
only making it's gui for now


[13-Aug-18 06:14 PM] siu#3920
Should start by tokens since its the most finished right now


[13-Aug-18 06:14 PM] grewalsatinder#9653
tokens?


[13-Aug-18 06:14 PM] siu#3920
Yes


[13-Aug-18 06:15 PM] siu#3920
Like nxt/colored coins tokens


[13-Aug-18 06:15 PM] grewalsatinder#9653
I am assigned a task to make assets exchange gui


[13-Aug-18 06:15 PM] siu#3920
Yep


[13-Aug-18 06:15 PM] siu#3920
Under tokens i  the help menu youll find the rpc calls


[13-Aug-18 06:16 PM] grewalsatinder#9653
let me compile the jl777 branch. coming back in a moment.


[13-Aug-18 06:16 PM] siu#3920
Ok


[13-Aug-18 06:17 PM] siu#3920
Im about to go to bed


[13-Aug-18 06:17 PM] siu#3920
But write to me anything you need


[13-Aug-18 06:17 PM] grewalsatinder#9653
alright mate. sure will do. thanks üôÇ


[13-Aug-18 06:59 PM] Mylo#8306
@grewalsatinder 
1.  https://github.com/imylomylo/komodo-rpc-lib/
 - bug needs fixing with my promise return (i have fix here)
 - it's got all the rpc for all of kmd
 - port to go if you want

2. I will add (1) to https://github.com/imylomylo/komodo-cakeshop front end for testing

3.  docs by @SHossain https://github.com/himu007/KMD-CC-Token-Test-Guide

{Embed}
https://github.com/imylomylo/komodo-rpc-lib/
imylomylo/komodo-rpc-lib
komodo-rpc-lib - ES6 komodo platform rpc for use in gui or nodejs
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102

{Embed}
https://github.com/imylomylo/komodo-cakeshop
imylomylo/komodo-cakeshop
Contribute to komodo-cakeshop development by creating an account on Github.
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[13-Aug-18 07:01 PM] Mylo#8306
simple contract testing done from command line using (3).  the gui in (2) has a contracts page - i'm thinking to flip through contracts with tabs, similar to this PoC basketball scoring tab between teams http://149.28.170.40/scoring/


[13-Aug-18 07:04 PM] Mylo#8306
and if you wanna test with docker https://github.com/imylomylo/docker-komodo-smartcontracts

{Embed}
https://github.com/imylomylo/docker-komodo-smartcontracts
imylomylo/docker-komodo-smartcontracts
Contribute to docker-komodo-smartcontracts development by creating an account on Github.
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102


[13-Aug-18 07:05 PM] Mylo#8306
using regtest


[13-Aug-18 07:05 PM] Mylo#8306
otherwise use the main test chains the testers are using üòÉ


[13-Aug-18 07:06 PM] Mylo#8306
i'm using vuetify because it's quick and easy vuejs with google material design baked into it


[13-Aug-18 07:08 PM] grewalsatinder#9653
awesome! thanks for the good links. üôÇ exploriung them right now


[13-Aug-18 07:08 PM] grewalsatinder#9653
exploring*


[13-Aug-18 07:10 PM] Mylo#8306
rpc lib currently broken, will fix later today.  docker one is handy


[13-Aug-18 07:16 PM] grewalsatinder#9653
@Mylo your work on kmdrpc is really interesting mate! awesome work! üëç üëè


[13-Aug-18 07:16 PM] grewalsatinder#9653
can def use it in my react.js project


[13-Aug-18 07:20 PM] Mylo#8306
thanks mate, can't wait to fill all the blanks but basic tx & cc stuff will come first and leave the rest for a junior janitor project if i don't get around to it in coming weeks -

if you need better docs for the docker stuff (the workflow) if you're going to use that today/tomorrow lmk.  i can prioritise.  i just have to c+p a few commands to explain in better detail.  i use it on an 8 core atom server and open up rpc for testing in regtest mode.  if it was a live node, ca wouldn't be able to sleep üòâ


[13-Aug-18 07:21 PM] grewalsatinder#9653
I will not touch docker stuff yet


[13-Aug-18 07:22 PM] Deleted User#0000
its only better for very specific things IMO


[13-Aug-18 07:22 PM] Deleted User#0000
for normal testing and playing with RPC calls its just overkill.. if you want to replicate something a heap of times then its perfect.


[13-Aug-18 07:22 PM] grewalsatinder#9653
It's in my study material to code and use it with Golang stuff. when I'll get to that point then will use docker with golang project.

{Reactions}
üëç 

[13-Aug-18 07:23 PM] grewalsatinder#9653
for now I need to get sorted with react ui for assets exchange


[13-Aug-18 07:23 PM] grewalsatinder#9653
it's my first react.js project üòÑ


[13-Aug-18 07:24 PM] grewalsatinder#9653
so apologies in advance for being naive development for assets exchange gui


[13-Aug-18 07:24 PM] Deleted User#0000
nice. The tokens CC is something I am interested in, I might have a play with it on the STAKED1 chain in the coming days.


[13-Aug-18 07:24 PM] grewalsatinder#9653
it is just for reference and playground anyway.


[13-Aug-18 07:25 PM] Deleted User#0000
yes, any GUI is better than none for most people to see what is happening


[13-Aug-18 07:25 PM] grewalsatinder#9653
yep


[13-Aug-18 07:25 PM] Deleted User#0000
CLI calls take a bit of getting used to


[13-Aug-18 07:30 PM] Mylo#8306
front end devs just wanna "press play", load up an rpc lib and start making front end stuff.  they generally don't like doing sys admin stuff and wiring a backend together.  no gratification!  so remove the ungratifying part hopefully more gui dev.  same with testing lightning-chips, docker is cheap to replicate to 100 users instead of wire it up, download + "press play".   <--- so on both counts __it's perfect__ "if you want to replicate something a heap of times then its perfect." üòâ

{Reactions}
üê≥ (2) Komodo (2) üíØ 

[13-Aug-18 10:01 PM] dukeleto#7326
To run the CC automated test suite, you can run `./qa/pull-tester/rpc-tests.sh cryptoconditions --tracerpc` from the root of the komodo repo


[13-Aug-18 10:02 PM] Deleted User#0000
this just tests all RPC calls?


[13-Aug-18 10:07 PM] dukeleto#7326
they are Python tests that use the RPC interface, which uses the CC internals code


[13-Aug-18 10:08 PM] dukeleto#7326
they are QA/integration tests, testing common scenarios. it mines blocks on regtest and has found lots of bugs so far and suggested improvements

{Reactions}
üî• 

[13-Aug-18 10:08 PM] dukeleto#7326
if you change C++ code, run the test and remember: don't break the test suite üòÉ


[13-Aug-18 10:08 PM] dukeleto#7326
Travis also knows how to run the tests, ca333 set it up

{Reactions}
üéâ 

[13-Aug-18 10:11 PM] dukeleto#7326
i have a bunch of changes coming down the pipe that will nicely render why various RPCs fail into a JSON error message, instead of printouts to stdout/stderr


[13-Aug-18 10:17 PM] dukeleto#7326
or crazy C++ explosions


[13-Aug-18 10:22 PM] Deleted User#0000
nice yeah better errors would be very helpful. Still yet to test much of this, so far I worked out that if you stick `faucetget` onto blocknotify it stalls the deamon after a while and becomes unuesable. But that would be considered spammig the faucet by any means.


[13-Aug-18 10:23 PM] dukeleto#7326
i haven't been able to do a `rewardsunlock` in the test suite yet


[13-Aug-18 10:24 PM] dukeleto#7326
all faucet RPCs are tested, most rewards, only a few dice/token


[13-Aug-18 10:25 PM] Deleted User#0000
next one I will test is tokens, as I have a use for that later down the track and want to know how it works better. Faucet gets mega slow or *is* mega slow on STAKED1 ... like it hangs for 20s after calling it every time. need to check on another node and see if its the same..
It seem after its made heaps of TX's it starts to limp.


[13-Aug-18 10:26 PM] Deleted User#0000
but the point of STAKED1 is to try and delibratly break things.. not jsut test if they are working.


[13-Aug-18 10:27 PM] dukeleto#7326
there is also an AT3 chain I think, where can connect


[13-Aug-18 10:28 PM] dukeleto#7326
it's pinned


[13-Aug-18 10:28 PM] Deleted User#0000
yeah.. there are ppl testing that already, I decided not to get in the way


[13-Aug-18 10:28 PM] Deleted User#0000
We activated everything on STAKED1


[13-Aug-18 10:28 PM] dukeleto#7326
it has to be recreated constantly, because consensusy code keeps changing


[13-Aug-18 10:28 PM] Deleted User#0000
we get free STAKED for fiding bugs, even if it is a worthless coin


[13-Aug-18 10:28 PM] Deleted User#0000
we hardfork STAKED each 6 days


[13-Aug-18 10:29 PM] Deleted User#0000
so far PoS/PoW is borken... Genie is profit switching it with minis and keeping it at 50-80% PoS... meant ot be 99% üòÇ


[13-Aug-18 10:30 PM] Deleted User#0000
eg...
```and my mining node that is using setgenerate false just staked this block PoS:
http://staked.explorer.dexstats.info/block/02f2ceb5ca642f9fcd4a893f0f9c11a61cf4255862e759b4ae3cb1a3cc617bef```


[14-Aug-18 03:11 AM] jl777c#5810
I did not see any reproducible bugs. let me know if there are any


[14-Aug-18 03:13 AM] SHossain#0007
@siu did you find the 0 fund balance issue anymore with dice?


[14-Aug-18 03:14 AM] jl777c#5810
there is a 0 fund issue, I have seen it. just cant reproduce it


[14-Aug-18 03:14 AM] SHossain#0007
rewards unlock is working fine on my end with APR being added to balance


[14-Aug-18 03:16 AM] jl777c#5810
any assets bugs?


[14-Aug-18 03:22 AM] SHossain#0007
not that i'm aware of


[14-Aug-18 03:22 AM] siu#3920
I tried like 25 bets yesterday after depositing more utxo and lost all of them üòÇ üòÇ


[14-Aug-18 03:24 AM] jl777c#5810
try 1:1 odds, the issue is not with odds, but with winning bets


[14-Aug-18 03:24 AM] jl777c#5810
also, a way to isolate the problem is to create just one funding utxo and do ONLY one bet at a time


[14-Aug-18 03:24 AM] jl777c#5810
that should never run out and should never lose the funds


[14-Aug-18 03:25 AM] jl777c#5810
i need a chain and a rawtx that shows it cant find funds that are there


[14-Aug-18 03:25 AM] SHossain#0007
updating to latest and will try out the following:
1. create a new dice plan
2. add same amount of funds in 1 utxo as the initial funds


[14-Aug-18 03:26 AM] SHossain#0007
```
end.0 blocks, reward 100000.00000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
call komodo_args.(./komodod) NOTARY_PUBKEY.(03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc)
>>>>>>>>>> AT3: p2p.60511 rpc.60512 magic.68acd06b 1756156011 1000 coins
initialized AT3 at 1534242356
Error: Unable to start HTTP server. See debug log for details.
```


[14-Aug-18 03:26 AM] jl777c#5810
yes and keep bettng at 1:1 odds until you win. you actually shouldnt need to do 2


[14-Aug-18 03:27 AM] jl777c#5810
I have seen that http error too, only time seems to clear the problem, or likely a reset of system or networking


[14-Aug-18 03:27 AM] siu#3920
ok


[14-Aug-18 03:27 AM] siu#3920
will start new plan


[14-Aug-18 03:29 AM] siu#3920
@SHossain maybe if you try with a brand new plan with only one UTXO you might encounter the issue.


[14-Aug-18 03:29 AM] SHossain#0007
1 utxo will show 0 balance when it is being used or not confirmed


[14-Aug-18 03:30 AM] siu#3920
yes, but it should come back


[14-Aug-18 03:30 AM] siu#3920
not stay at 0


[14-Aug-18 03:30 AM] SHossain#0007
updating the mining node, then will restart my computer


[14-Aug-18 03:30 AM] siu#3920
ok


[14-Aug-18 03:31 AM] siu#3920
im starting a new plan


[14-Aug-18 03:31 AM] siu#3920
let me try a winning bet first


[14-Aug-18 03:39 AM] jl777c#5810
one thing I have mentioned but not sure it is documented is that for a production environment, the diceplan creator needs to be running dicestatus in a crontask or some regular frequency. this finishes any unfinished bets and also creates entropy tx, so the lost funds issue seems to be due to testing the case where things are operated in a mode not following the recommendations. like running a car without engine oil


[14-Aug-18 03:44 AM] siu#3920
hmm, that might be it too


[14-Aug-18 03:46 AM] jl777c#5810
but it should work gracefully instead of locking up funds


[14-Aug-18 03:46 AM] siu#3920
im setting a server for dice


[14-Aug-18 03:46 AM] jl777c#5810
it just needs to be a normal node


[14-Aug-18 03:55 AM] siu#3920
btw, this is the rewards unlock i did yesterday


[14-Aug-18 03:55 AM] siu#3920
http://cctest.explorer.dexstats.info/tx/6a12d9ba03fbd9a2d5999470890f3b9eed6fc511fa1a10874106095ea8b86899


[14-Aug-18 03:55 AM] siu#3920
that is the unlocking txid


[14-Aug-18 03:56 AM] siu#3920
This is the lock txid: http://cctest.explorer.dexstats.info/tx/7c88b26725602ec83d99bacb9604d8dcbca4614e15a99565a87b54cdb3c860bf


[14-Aug-18 03:56 AM] siu#3920
i deposited 100000 at 20% apr for one day


[14-Aug-18 03:56 AM] siu#3920
i only got back 100000.01140669


[14-Aug-18 03:57 AM] siu#3920
seems like too little for 20% APR


[14-Aug-18 03:58 AM] jl777c#5810
any chance you have the console printouts from the claim? that has the details on the reward calc


[14-Aug-18 03:59 AM] siu#3920
no, but i have the rawtx


[14-Aug-18 03:59 AM] siu#3920
```./komodo-cli -ac_name=AT3 sendrawtransaction 0100000002bf60c8b3cd547ba86595a9154e61a4bcdcd80496cbba993dc82e602567b2887c000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981401919c0e9c305277769daa36ee198c62926102c672fcffd3b08f5b9711b458e245b87e492aaf1e4d512437632945e9d4c6f5511b85d2a15c4203dfafd3c260911a100af038001e5a10001ffffffff43796d748cc4090d605c428b2b2a7d649711dc52785a9bb3ef08ceae7d56eb9a000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140627705175984efbe86db4a068b2580404fc54025b4060a15e68bcd18d0f02e3c7db4ac34fa030ac7778990f595e59afa72197bf8155fd4b0ff0e6800b9f2f379a100af038001e5a10001ffffffff033311614e18090000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401ccbd07844e1809000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000002c6a2ae555534955000000000043796d748cc4090d605c428b2b2a7d649711dc52785a9bb3ef08ceae7d56eb9a00000000
```


[14-Aug-18 03:59 AM] SHossain#0007
updated https://github.com/himu007/KMD-CC-Token-Test-Guide/tree/master/rpc/dice

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/tree/master/rpc/dice
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[14-Aug-18 04:02 AM] SHossain#0007
created new dice plan
```
./komodo-cli -ac_name=AT3 dicefund Dice2 100000 0.1 10000 77 2
{
  "result": "success",
  "hex": "010000000140f7b0303e59e4b5541d792953511b6cb66b343dad727baf41b414a5a6bfaea4000000004847304402204a1244dba1cc660c4e96aa84172fa3bbf94becd24f664087f9063194b89e238202206d1aea994b9aba700d8edb2e330177d9c5a8c293767bba8f6753a52292a0c2e401ffffffff0500a0724e18090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac10270000000000002321039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94eac1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000002c6a2ae646446963653200000080969800000000000010a5d4e80000004d00000000000000020000000000000000000000"
}
```


[14-Aug-18 04:02 AM] SHossain#0007
output:
```
9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2
```


[14-Aug-18 04:04 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 diceinfo 9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2
9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2.(F 100000.00000000) numentropy tx 0: 100000.00000000
{
  "result": "success",
  "fundingtxid": "9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2",
  "name": "Dice2",
  "sbits": 216449378628,
  "minbet": "0.10000000",
  "maxbet": "10000.00000000",
  "maxodds": 77,
  "timeoutblocks": 2,
  "funding": "100000.00000000"
}
```


[14-Aug-18 04:06 AM] SHossain#0007
after creating a plan, without adding any utxo the dicebet doesn't work. need to create txids with hashed entropy
```
./komodo-cli -ac_name=AT3 dicebet Dice2 9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2 10 1
9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2.(F 100000.00000000) numentropy tx 0: 100000.00000000
cant find dice entropy inputs
{
  "error": "couldnt create faucet get transaction"
}
```


[14-Aug-18 04:07 AM] siu#3920
```fc.(L 2020.00000000) numentropy tx 6: 1027150.00000000
fa9c727633394345b011b886cb87dc4d7001ee7075d539d0d1269ffa878269b3 winnings 2000.00000000 bet 1000.00000000 at odds 1:1
fa9c727633394345b011b886cb87dc4d7001ee7075d539d0d1269ffa878269b3 winnings 2000.00000000 bet 1000.00000000 at odds 1:1
fa9c727633394345b011b886cb87dc4d7001ee7075d539d0d1269ffa878269b3 winnings 2000.00000000 bet 1000.00000000 at odds 1:1
01000000036eda2eaa8ec9964798569cf325404b79889d391c182989614d141ba176076739010000004948304502210080fdbfb1d4fa5c6658ccd6ffdca1c0adeca5cba3f852e9ed9234c7bfd26555fb02200535f05bad90e4e78eb20e5482e783bbf4974f61359061658f8c89fd59ce489801ffffffffb3698287fa9f26d1d039d57570ee01704ddc87cb86b811b04543393376729cfa000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81409f0642f6bcdd0604684651f13c0ad97582f176f12d8342a426571d1fae4b14a2347809f57a904d30fc72cad729ba659fc6cd3e3e18fa4eff2c04611e4c568988a100af038001e6a10001ffffffffb3698287fa9f26d1d039d57570ee01704ddc87cb86b811b04543393376729cfa010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814051e80e5ee79d8c267c10d80a89ceeedd6bb0e1dffec2a4c9e48993f5c88521ff14fcb7e0b786da245f158cc9bf0f93cf46c0ad55fc7a5615dff305ced46cad4ea100af038001e6a10001ffffffff0400bc6303d2000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc436f27143ca94ab227bb7b8518432668de2c191c60139d484f9007e722573f82b5ea6ce1ffdebfbe25a8b44a9d01d56b456a2705b11fd021a7231ce28df1413600000000
254a963e8f15845bdc997db13caf222d59c76149032d6673ba5219d30fba0d0a
spentheight.3484 valuein 10020.0001 vs 11020.0001 error
error adding to mempool
```


[14-Aug-18 04:07 AM] siu#3920
this is the output of a winning bet i just did


[14-Aug-18 04:08 AM] siu#3920
balance didnt get to 0 but i still get this "error adding to mempool"


[14-Aug-18 04:08 AM] siu#3920
rawtx: ```./komodo-cli -ac_name=AT3 sendrawtransaction 01000000026eda2eaa8ec9964798569cf325404b79889d391c182989614d141ba176076739000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140325ced67faa18cd2e374785583645ea366c3ab5a043defdd819a59b2e820ad500870bb806c2adb2b8c9995872e9a31cdc76293dede820ae01eb106184afd25e1a100af038001e6a10001ffffffff41d472e4dae269971daea0e077c8ccb6d7c2eb71724af0e931eb4acf2b01dc670300000048473044022035af06e5f3b095520b0b6b484a09f50a4a96a924c418c8a8300ce9fc6e2954de02204f9950f82dcdafe530ddba4af52d0f22ada548ad54b9d3a59315374b39faa2e801ffffffff0500bc6303d2000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc112700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac119d48448c05000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6425349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdcccd3f0c52f96fd83d1ccab1566a540c8799fdedd0f82c56182298ba7cb7e5862de000000000000000000000000000000000000000000000000000000000000000000000000
fa9c727633394345b011b886cb87dc4d7001ee7075d539d0d1269ffa878269b3
```


[14-Aug-18 04:18 AM] SHossain#0007
winning dice bet
```
./komodo-cli -ac_name=AT3 dicebet Dice2 9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2 10 1
```
```
fd2c22940ca2eb7cb1b505b16758eb32c43711b4b80b25193f9675789d5a9364.(E 10.00000000) check first
1ab745bb47c2763002b46c6eef7c7488704bbdd14f4b8e75c6dcf88809684f6e.(E 20.00000000) 6aa10c80531f01437f12fec35a7419387782f13a93e20eea548a855903478974.(E 10.00000000) 4f61b884c5199a62a50e9bb82d169f83e9cb8e2ea60baa641e8fc16d9ce09ea3.(E 10.00000000) ea9498a2e161ddd9a9c9f334a7b9db642b34f7b6886b0f4d2fcde108424f9cae.(E 20.00000000) 48f48337aefde217f4278814456f8a684bc27cb7f254c92974d2585651bc3ccf.(E 10.00000000) 9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2.(F 100000.00000000) 4f2bc7488af2774c0f8224827aae5556e40c41a566b7171b9f4cb840309483f0.(E 10.00000000) numentropy tx 7: 100090.00000000
```


[14-Aug-18 04:18 AM] SHossain#0007
```
c0497a33e696da732c505d78dc0d04d08eda83ebefc45e1901e5aa4f6e4473b2 winnings 20.00000000 bet 10.00000000 at odds 1:1
c0497a33e696da732c505d78dc0d04d08eda83ebefc45e1901e5aa4f6e4473b2 winnings 20.00000000 bet 10.00000000 at odds 1:1
c0497a33e696da732c505d78dc0d04d08eda83ebefc45e1901e5aa4f6e4473b2
```


[14-Aug-18 04:19 AM] SHossain#0007
```
01000000040f932945e489b3a4642f35e6a9bee1d3d7fdd8094d88fbf64d5802f50bd38b770100000049483045022100f21eba3ae3f8952b552f044ae174995480458576f2611a35ec64d2240b04d8a302207b18dd3ae59171086a7649265f08ad0290d9ff71ab92dc0f1b6b8de67d92b01a01ffffffffb273446e4faae501195ec4efeb83da8ed0040ddc785d502c73da96e6337a49c0000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81400b8e4ceace451a5ef1c18eb4816eae45e17ada5d98d4a73ff61451f9cd64db073b932fddfb9f482d7f877c7209ebb2d0c222aafc1282328c31b053c2c6b39461a100af038001e6a10001ffffffffb273446e4faae501195ec4efeb83da8ed0040ddc785d502c73da96e6337a49c0010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140eedb23a66d777f75f0a8c3e1eed87228944b38a9fcd1ef0f2436093d861b2969466bcc714e12932d193641ac70b09bd71fd2785bde57eba6ec6b6bc080fc7754a100af038001e6a10001ffffffff6e4f680988f8dcc6758e4b4fd1bd4b7088747cef6e6cb4023076c247bb45b71a000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140c6a8cc36159fa946fddfdae1aeb57fe4d026fd14996ad5110cc33c7de02e076f4b81f909056a7bbcb0a77c96ca44a8b822d3ce531f8f8132952cd5ed13f5b0aaa100af038001e6a10001ffffffff04f06c357700000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0094357700000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6574469636532000000e26d2f6bfd5763cbb5324cd355a58e099127c74dcf167cf11af0fc497110019d56acb1b5b3d0235ec3199b3b112670d6e1f394a385bc92e35db4f65ec1f039ec3965a96fcc7c2a6d58e0c6ad37ea68666599cb5a2af8f9761e3ace8ff3c8a48d00000000
882f824de7bed5ea0819b703ae2ede5ad32c3c002c20af0bfc51a1e8ba5ae8f2
added to mempool and broadcast
```


[14-Aug-18 04:26 AM] SHossain#0007
lost bet
```
abc286858d7cf49a7d58d51d61ad28eae12203e781e500f0eb71991811b39671 winnings 0.00000000 bet 10.00000000 at odds 1:1
```


[14-Aug-18 04:37 AM] SHossain#0007
2 more lost bet


[14-Aug-18 04:37 AM] SHossain#0007
another winning bet, but this one has similar issue like @siu had
```
a195b46a5bd1c3704d59fd584acd5d44a07d321f90803369772ad3a3a1baf284 winnings 20.00000000 bet 10.00000000 at odds 1:1
a195b46a5bd1c3704d59fd584acd5d44a07d321f90803369772ad3a3a1baf284 winnings 20.00000000 bet 10.00000000 at odds 1:1
a195b46a5bd1c3704d59fd584acd5d44a07d321f90803369772ad3a3a1baf284
```


[14-Aug-18 04:38 AM] SHossain#0007
```
010000000302f296a64793858bfa84e5663b484678d9c721839e21bfbd54d7edef7919248d010000004847304402207608fa911be226be277240d795f0f3a5eab0f26a36b3fc4337af76cc6071f075022045e709fc58d6244904172a7c7e3a1b9fccc8c626426270d2bbf4a1eb674cfb1001ffffffff84f2baa1a3d32a77693380901f327da0445dcd4a58fd594d70c3d15b6ab495a1000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140e2a4ef00afb7c5831ce7be7215aecd8d2a85d881d27f81af510bd0aed0bde2c631bcbca7f4aefff65d52d38fdb0a4a21c4a44c3c700ab00498c318d95c892492a100af038001e6a10001ffffffff84f2baa1a3d32a77693380901f327da0445dcd4a58fd594d70c3d15b6ab495a1010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814043eb0b095111d9e0db8cc0dff66474616155e998d4fd7c03e7e917b9796a0dff2d373123e862cf7858a8ed1f65ce38b8f6c524cf1677eca1eb4c13c54fdeed52a100af038001e6a10001ffffffff0400f9029500000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0094357700000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6574469636532000000e26d2f6bfd5763cbb5324cd355a58e099127c74dcf167cf11af0fc497110019d9ce60e3a2a9f387981f1317cba8d5ed56e9b18ac72f51d98bcb6eac657a6523dd02c7d41dc3a132ddd7764ad4a7c37ddf213eaf59474c699f0e062e82643249000000000
3987f813022a28d131a7f23fc7ebdb670dee35d606741e3253939604040e4de6
spentheight.3533 valuein 35.0001 vs 45.0001 error
error adding to mempool
```


[14-Aug-18 04:42 AM] SHossain#0007
diceplan funding remains the same


[14-Aug-18 04:56 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/478894612279328789/dicebet-winning-error


[14-Aug-18 04:57 AM] SHossain#0007
i have included the full console output ^^ for this `error adding to mempool`


[14-Aug-18 05:17 AM] siu#3920
üëç


[14-Aug-18 05:27 AM] siu#3920
```
1ecad706be2b57b6449512244dba5e59bf168ff6426402e9f339dbe79b18780d winnings 2000.00000000 bet 1000.00000000 at odds 1:1
1ecad706be2b57b6449512244dba5e59bf168ff6426402e9f339dbe79b18780d winnings 2000.00000000 bet 1000.00000000 at odds 1:1
1ecad706be2b57b6449512244dba5e59bf168ff6426402e9f339dbe79b18780d winnings 2000.00000000 bet 1000.00000000 at odds 1:1
0100000003116dfdd955d023dcc2504ecd331498c84ed495a9edf17dd95726aa34383c6cbf010000004948304502210099785b6c0803a5836a967ccff5520df21b3c15a2520f519e917848f0cb38cb8602207e72accb2d39c009a08a46108565030d1090f9c4bcc88e64d884b020db051c9501ffffffff0d78189be7db39f3e9026442f68f16bf595eba4d24129544b6572bbe06d7ca1e000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81404ff40dd2469424a5d9cdfab1a30f597ed96b7bee105ca9fadaa3c25a62ef4efb3bfac6cebb9bf280aba8435f3e1bd000b38c7982dd3b1e13451fce3219bd3ffca100af038001e6a10001ffffffff0d78189be7db39f3e9026442f68f16bf595eba4d24129544b6572bbe06d7ca1e010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140b888708a2cf5de4bc33d94f10f706ecc9a1036cb24dd8b2868734ff424416e66036dfa81f3583e32c0e40af32bccff2097bb99c19608625c2fbd9e0c8d1c02b6a100af038001e6a10001ffffffff0400ea214701010000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc821c737eef723a573b7be3acfe3bef083d9d03934b25e5b340bb98fc053065f323a883e8b7c4292c76109beeaacb75a7ed62789a8e69c1183c617ec5f605e50100000000
e528d317158de803e6f26715b6e44cd0d2b2d4ee6b638a5c4471040d85e3bfdf
spentheight.3563 valuein 12050.0001 vs 13050.0001 error
error adding to mempool

```


[14-Aug-18 05:27 AM] siu#3920
another error adding to mempool


[14-Aug-18 05:27 AM] siu#3920
mempool was empty though


[14-Aug-18 05:28 AM] siu#3920
rawtx```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT3 sendrawtransaction 0100000002116dfdd955d023dcc2504ecd331498c84ed495a9edf17dd95726aa34383c6cbf000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81401704e41b99ba9829c15bca1e5fb568854b12f710f1a0b2cfdbc344e8e83650c934b04bf1a6c750633d69cd0016de29e221e66561c158f7f79647c61dbcb1e6c2a100af038001e6a10001ffffffff5e2ece80fb716b3705adf2f4c23824d7c219eac2ee81ac529776575e1558d4e20300000048473044022052022078b8d4c42df04ed239627c76f33742769924cbe74f3f1e78efd731951502205fd8bf21aad428224fd73ba41dfc5f38b1b370ac1e9339123c6ae8aa4a33890701ffffffff0500ea214701010000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc112700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac6d66c64d4604000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6425349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc94366a67d8037a2d248b5c55afc729facf7aa082ec8642d64b0ea32cc59a75ef000000000000000000000000000000000000000000000000000000000000000000000000
1ecad706be2b57b6449512244dba5e59bf168ff6426402e9f339dbe79b18780d
```


[14-Aug-18 05:37 AM] siu#3920
also, diceinfo before this bet: ```./komodo-cli -ac_name=AT3 diceinfo ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4{
  "result": "success",
  "fundingtxid": "ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4",
  "name": "SIU1",
  "sbits": 827672915,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "19110.00000000"
}
```


[14-Aug-18 05:37 AM] siu#3920
vs. diceinfo after the bet: ```./komodo-cli -ac_name=AT3 diceinfo ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4{
  "result": "success",
  "fundingtxid": "ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4",
  "name": "SIU1",
  "sbits": 827672915,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "8060.00000000"
}
```


[14-Aug-18 05:39 AM] siu#3920
it was supposed to be 2000 win... not 11050.


[14-Aug-18 06:03 AM] jl777c#5810
so it gets errors adding to mempool, but it works if manually sent?


[14-Aug-18 06:04 AM] jl777c#5810
and the amounts might be wrong, but did it think it was the right amount?


[14-Aug-18 06:06 AM] siu#3920
```e67f3168d0e50cdf196009d1fb501ed1b0b53e1b3ba5472f2fa6185b36b51ef6.(L 4020.00000000) 5f237b870d800dd28463a043ceedb61eade3b9db8e5d73910dfb4f9e9a5dcafc.(L 2020.00000000) numentropy tx 3: 8060.00000000
1ecad706be2b57b6449512244dba5e59bf168ff6426402e9f339dbe79b18780d winnings 2000.00000000 bet 1000.00000000 at odds 1:1
spentheight.3601 valuein 12050.0001 vs 13050.0001 error

```


[14-Aug-18 06:06 AM] siu#3920
```./komodo-cli -ac_name=AT3 sendrawtransaction 0100000003116dfdd955d023dcc2504ecd331498c84ed495a9edf17dd95726aa34383c6cbf010000004948304502210099785b6c0803a5836a967ccff5520df21b3c15a2520f519e917848f0cb38cb8602207e72accb2d39c009a08a46108565030d1090f9c4bcc88e64d884b020db051c9501ffffffff0d78189be7db39f3e9026442f68f16bf595eba4d24129544b6572bbe06d7ca1e000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81404ff40dd2469424a5d9cdfab1a30f597ed96b7bee105ca9fadaa3c25a62ef4efb3bfac6cebb9bf280aba8435f3e1bd000b38c7982dd3b1e13451fce3219bd3ffca100af038001e6a10001ffffffff0d78189be7db39f3e9026442f68f16bf595eba4d24129544b6572bbe06d7ca1e010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140b888708a2cf5de4bc33d94f10f706ecc9a1036cb24dd8b2868734ff424416e66036dfa81f3583e32c0e40af32bccff2097bb99c19608625c2fbd9e0c8d1c02b6a100af038001e6a10001ffffffff0400ea214701010000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc821c737eef723a573b7be3acfe3bef083d9d03934b25e5b340bb98fc053065f323a883e8b7c4292c76109beeaacb75a7ed62789a8e69c1183c617ec5f605e50100000000
error code: -26
error message:
16: bad-txns-in-belowout
```


[14-Aug-18 06:07 AM] siu#3920
outputs for dicefinish of that bet


[14-Aug-18 06:14 AM] jl777c#5810
it seems the tx construction is broken, investigating


[14-Aug-18 06:19 AM] jl777c#5810
pushed fix, not a consensus change. hopefully dicefinish will work now


[14-Aug-18 06:26 AM] SHossain#0007
updating


[14-Aug-18 06:56 AM] SHossain#0007
lost bet
`d39810bf2781cbfaabe6a1501a7492b6d905fcb9da65399f8b3bb22a7e80f32f winnings 0.00000000 bet 5.00000000 at odds 2:1`


[14-Aug-18 06:57 AM] jl777c#5810
did the tx confirm?


[14-Aug-18 06:58 AM] SHossain#0007
yes. rawmempool is empty


[14-Aug-18 06:58 AM] SHossain#0007
`e9d66cd7f704e5974786b5d2cc012a8207d56a026cdbd48e9b7193568577a859 winnings 30.00000000 bet 10.00000000 at odds 2:1`


[14-Aug-18 06:58 AM] SHossain#0007
winning ^^ bet


[14-Aug-18 06:58 AM] jl777c#5810
good so that bug is fixed and it wasnt consensus changing


[14-Aug-18 06:58 AM] jl777c#5810
lets hope the win confirms


[14-Aug-18 06:59 AM] SHossain#0007
diceinfo shows accurate balance for the plan funding
```
./komodo-cli -ac_name=AT3 diceinfo 9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2
a195b46a5bd1c3704d59fd584acd5d44a07d321f90803369772ad3a3a1baf284 B refsbits.3265636944 sbits.3265636944 nValue 25.00000000
a195b46a5bd1c3704d59fd584acd5d44a07d321f90803369772ad3a3a1baf284 B refsbits.3265636944 sbits.3265636944 nValue 10.00000000
30ae87147011d73a1e64d7811e0c7f26300ac47f4091bdfaf443490e2893c497.(W 100009.99990000) check first
7a15f3abc7f9073bdae74251fbef468bb754ca4af33a8c2e488fc610ff080be6.(L 25.00000000) 4f2bc7488af2774c0f8224827aae5556e40c41a566b7171b9f4cb840309483f0.(E 10.00000000) 882f824de7bed5ea0819b703ae2ede5ad32c3c002c20af0bfc51a1e8ba5ae8f2.(W 19.99990000) numentropy tx 4: 100064.99980000
{
  "result": "success",
  "fundingtxid": "9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2",
  "name": "Dice2",
  "sbits": 216449378628,
  "minbet": "0.10000000",
  "maxbet": "10000.00000000",
  "maxodds": 77,
  "timeoutblocks": 2,
  "funding": "100064.99980000"
}
```


[14-Aug-18 06:59 AM] jl777c#5810
did you collect the proper winnings?


[14-Aug-18 07:01 AM] SHossain#0007
yes. my balance is reflecting the new winning funds - lost funds.


[14-Aug-18 07:02 AM] SHossain#0007
before
`"balance": 134577248.53600542,`
after lost 5 and won 30, balance is
`"balance": 135377263.53610542,`


[14-Aug-18 07:02 AM] SHossain#0007
playing on same node


[14-Aug-18 07:03 AM] jl777c#5810
ok, so keep playing and make sure funds are properly handled and you dont getinto a situation of no more utxo


[14-Aug-18 07:05 AM] SHossain#0007
another win
`4ff522613af091cb0a4ce8a3b72fd250e4fbd909c2486e6a3875f8a68cdd29bc winnings 30.00000000 bet 10.00000000 at odds 2:1`


[14-Aug-18 07:05 AM] SHossain#0007
but
```
18dae961011c0faa3c856cc6e80241fab64c2b6727febdc9602314a5f217c690
inputs 100019.99990000 != outputs 99979.99980000 + 30.00000000
CC Eval EVAL_DICE Invalid: CC funds mismatch for win/timeout spending tx 4ff522613af091cb0a4ce8a3b72fd250e4fbd909c2486e6a3875f8a68cdd29bc
inputs 100019.99990000 != outputs 99979.99980000 + 30.00000000
CC Eval EVAL_DICE Invalid: CC funds mismatch for win/timeout spending tx 4ff522613af091cb0a4ce8a3b72fd250e4fbd909c2486e6a3875f8a68cdd29bc
error adding to mempool
```


[14-Aug-18 07:05 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 getrawmempool
[
  "4ff522613af091cb0a4ce8a3b72fd250e4fbd909c2486e6a3875f8a68cdd29bc"
]
```


[14-Aug-18 07:08 AM] SHossain#0007
`dicefinish` call shows
```
./komodo-cli -ac_name=AT3 dicefinish Dice1 9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2 4ff522613af091cb0a4ce8a3b72fd250e4fbd909c2486e6a3875f8a68cdd29bc
Dice plan (Dice1) already exists cmpflag.1
Diceinit error
{
  "error": "couldnt create dicefinish transaction"
}
```


[14-Aug-18 07:09 AM] SHossain#0007
`dicestatus` output
```
./komodo-cli -ac_name=AT3 dicestatus Dice1 9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2 4ff522613af091cb0a4ce8a3b72fd250e4fbd909c2486e6a3875f8a68cdd29bc
Dice plan (Dice1) already exists cmpflag.1
Diceinit error
{
  "result": "success",
  "status": "loss"
}
```


[14-Aug-18 07:09 AM] jl777c#5810
CC Eval EVAL_DICE Invalid: that is a bug I need to fix with rawtx


[14-Aug-18 07:10 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 sendrawtransaction 010000000297c493280e4943f4fabd91407fc40a30267f0c1e81d7641e3ad711701487ae30000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140969f02c1787276c40bd0a0a443db9147d6f91f9473ff90dc42dab4c6badbecd702d886497d487876097a6400b8d3e5e5600e45144d67c4ebdfd9dce933655cfea100af038001e6a10001ffffffff97c493280e4943f4fabd91407fc40a30267f0c1e81d7641e3ad711701487ae30020000004847304402202f4fdf42a29bbe74cdcec4d76f7d3ed15643cb62e71505c346220d859e2eed1402202d73c0c99e1058f91aa7e0ada2d1418347379f5ca16531f3d7db7b0797eab75d01ffffffff05f0420d8a18090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1227000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcacde45357700000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6424469636532000000e26d2f6bfd5763cbb5324cd355a58e099127c74dcf167cf11af0fc497110019d3e72aa655ed9bfeb34cdd3067dde2e8fb6a1a93113b805e018a72c6063e0d9e2000000000000000000000000000000000000000000000000000000000000000000000000
```


[14-Aug-18 07:10 AM] jl777c#5810
ok, stop using that diceplan, let me try to reproduce


[14-Aug-18 07:10 AM] SHossain#0007
ok


[14-Aug-18 07:11 AM] jl777c#5810
I need the dicefinish that failed


[14-Aug-18 07:13 AM] SHossain#0007
this one?
```
4ff522613af091cb0a4ce8a3b72fd250e4fbd909c2486e6a3875f8a68cdd29bc winnings 30.00000000 bet 10.00000000 at odds 2:1
010000000364935a9d7875963f19250bb8b41137c432eb5867b105b5b17ceba20c94222cfd01000000484730440220739b53f10dc49f11cb3ab0062c247e338e1d1b7d09c6b89b81f897001091b35602207e5225ee43c93c17b5a2a9ab5aa647e07f72fe8f7ebf751eede7d69bcbfde51601ffffffffbc29dd8ca6f875386a6e48c209d9fbe450d22fb7a3e84c0acb91f03a6122f54f000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140860a9a4edf0aaa266ed27a64d8c973e1da0797ad5df99b07dcae58a023e3e8f93745dd4834f5078b792aa1aa085d9ca598a3443f2dc0761ed6d4e6d356faac96a100af038001e6a10001ffffffffbc29dd8ca6f875386a6e48c209d9fbe450d22fb7a3e84c0acb91f03a6122f54f010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814059a6f10c32625f3a09579353d6b5d0ddd823f0f402a3945aad7fba6bca8e5e2e53b2019a49040b119772512e8e1dc8f51c081c4b7f032439929c0df5e8bcdb0fa100af038001e6a10001ffffffff05e0bd3cd717090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac005ed0b200000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00ca9a3b00000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6574469636532000000e26d2f6bfd5763cbb5324cd355a58e099127c74dcf167cf11af0fc497110019db002f221a54b918fdb7cc5886e55fb7bebaa8f8e22d93814e248efc8345696c4d6a8b5a0a7c052cb965fee45cb8aecd2bc68809d67ea14f2610649c3861007dc00000000
18dae961011c0faa3c856cc6e80241fab64c2b6727febdc9602314a5f217c690
inputs 100019.99990000 != outputs 99979.99980000 + 30.00000000
```


[14-Aug-18 07:13 AM] jl777c#5810
yes, the one with the error for me to fix


[14-Aug-18 07:14 AM] jl777c#5810
reproducedd


[14-Aug-18 07:14 AM] jl777c#5810
as easily as broadcasting the tx. that is the efficient way. you make bugs I can reproduce by broadcasting


[14-Aug-18 07:15 AM] SHossain#0007
Discord has character limit on posting üò¶


[14-Aug-18 07:17 AM] siu#3920
so the bug got identified?


[14-Aug-18 07:18 AM] dukeleto#7326
@SHossain that is when I switch to a gist üòÉ


[14-Aug-18 07:18 AM] SHossain#0007
Thanks for the idea @dukeleto . i'll do that next time.


[14-Aug-18 07:18 AM] siu#3920
```inputs 3020.00000000 != outputs 19.99990000 + 2000.00000000
CC Eval EVAL_DICE Invalid: CC funds mismatch for win/timeout spending tx 2cc509ad0f8f8d7ae144386a6105b14fb35256461c5c91ff90efaa5e22fd2316
inputs 3020.00000000 != outputs 19.99990000 + 2000.00000000
CC Eval EVAL_DICE Invalid: CC funds mismatch for win/timeout spending tx 2cc509ad0f8f8d7ae144386a6105b14fb35256461c5c91ff90efaa5e22fd2316
error adding to mempool
```


[14-Aug-18 07:18 AM] siu#3920
got this in my dice plan too.


[14-Aug-18 07:19 AM] SHossain#0007
@siu  post the raw hex value as well. that helps to reproduce the issue faster


[14-Aug-18 07:20 AM] siu#3920
```./komodo-cli -ac_name=AT3 sendrawtransaction 0100000002e862fdc647e044d2aba01708bd0d44117cdc398df572d3df56ae35d5390fa1e8000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814099583c62ae72db7f0cf1e2bc26e4d0c87b26881b12dbfe51fa38cfc434d12fdf700549042d47abcaaf15cd5a10e9dbe4a98078bf14bf2fdb73ec503771586f9fa100af038001e6a10001ffffffff0d78189be7db39f3e9026442f68f16bf595eba4d24129544b6572bbe06d7ca1e0300000049483045022100c76dec440c64e7e38016ccf62e729be86b6a00c306896f07a37b930d58e5ed7e022048ad58f95c1bd515e6fde949c5f7579b7943223b162594ca6ce201b2a92008e701ffffffff05006423082f000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc112700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac4c304f052f04000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6425349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc181da404a33339016c8d64f81d5b18645ece4cbc4db0bc5219b58afcd891022b000000000000000000000000000000000000000000000000000000000000000000000000
2cc509ad0f8f8d7ae144386a6105b14fb35256461c5c91ff90efaa5e22fd2316
```


[14-Aug-18 07:20 AM] SHossain#0007
the raw hex before those errors as well


[14-Aug-18 07:20 AM] siu#3920
this was the first try after the update


[14-Aug-18 07:21 AM] siu#3920
you mean this? : ```
0100000003116dfdd955d023dcc2504ecd331498c84ed495a9edf17dd95726aa34383c6cbf010000004847304402203040e00adbc38a86dfc2b74864175ff2006a85b8f51f1c63c08f90b6849b591c02206f7a27884fac24c0254bda4452fb7404a5c5fe7dbd5e5d5f184b9f78968c701701ffffffff1623fd225eaaef90ff915c1c465652b34fb105616a3844e17a8d8f0fad09c52c000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140c424fb9031d234d27670cc2150db7dd2cd829f299d42fbd5e94cd48bcf6c084e05d1ccebf8fd219270c7b9f6036bddf1805143b91cba3fa1a9bcae64fdf9791ca100af038001e6a10001ffffffff1623fd225eaaef90ff915c1c465652b34fb105616a3844e17a8d8f0fad09c52c010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81409e5c2d5b020610408cbeb7b8444feb36658f3221b07e88a318bdf0cf8c4d0e1c1530812ea546360348621629b2aa6084ff726de74323c065ce25fbf86b3d195ca100af038001e6a10001ffffffff05f06c357700000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00e876481700000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc821c737eef723a573b7be3acfe3bef083d9d03934b25e5b340bb98fc053065f3e1860a53df1f5d73b7944995811d48c935a3c842bb2b4bf89c1f12be29e4000c00000000
5aca6a15db414d5208d5f86bc17f0020abb4f8c36d569c534a9949541df4b99f
inputs 3020.00000000 != outputs 19.99990000 + 2000.00000000

```


[14-Aug-18 07:21 AM] SHossain#0007
yes


[14-Aug-18 07:22 AM] SHossain#0007
thanks


[14-Aug-18 07:22 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/478931475237175297/Screenshot_from_2018-08-14_15-21-26.png


[14-Aug-18 07:23 AM] SHossain#0007
just an example screenshot.


[14-Aug-18 07:36 AM] SHossain#0007
created new dice plan. just waiting for the tx to confirm


[14-Aug-18 07:37 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 diceinfo 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f
48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f.(F 100000.00000000) numentropy tx 0: 100000.00000000
{
  "result": "success",
  "fundingtxid": "48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f",
  "name": "Dice3",
  "sbits": 220744345924,
  "minbet": "1.00000000",
  "maxbet": "10000.00000000",
  "maxodds": 777,
  "timeoutblocks": 2,
  "funding": "100000.00000000"
}
```


[14-Aug-18 07:41 AM] SHossain#0007
added few utxos


[14-Aug-18 07:45 AM] jl777c#5810
pushed fix. it is not consensus affecting, so just update and try to do a dicefinish and hopeflly it will confirm


[14-Aug-18 07:47 AM] SHossain#0007
ok. updating


[14-Aug-18 07:56 AM] SHossain#0007
win
`0c47242b1bedd537591136c9dcc313cc4696f64392a411dac95b50dc11ab4fef winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 07:56 AM] SHossain#0007
```
0100000003018a160673202efc363c7b2a27f44db2c3ac0c164e867bc533a37b80bbef0dcb01000000484730440220389ccedda47729b4fe4dc967bc80ddcf4e0811f9ed2be4c338a74bc8c4e2f3380220710e4e6be8311551cffea84008472e28db7e2ed4970477789c2b623b3dcb274a01ffffffffef4fab11dc505bc9da11a49243f69646cc13c3dcc936115937d5ed1b2b24470c000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140b0c6fa83cf0faddf53232812f3a1058319f7c98804dec597a1a0aea33351cb5177ab002650dd897c930fa5245ce5ad9792cae00350c2888b2f46d3f74985f1d6a100af038001e6a10001ffffffffef4fab11dc505bc9da11a49243f69646cc13c3dcc936115937d5ed1b2b24470c010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140d6f20d3cbb330004d61b0c76437f5a68c02ae6243b41b4e73c538068e20958634ba30c700540521bce8984b039d380e4733fe63ae40a09ad38ad072ef63a364aa100af038001e6a10001ffffffff04f007685900000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0094357700000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6574469636532000000e26d2f6bfd5763cbb5324cd355a58e099127c74dcf167cf11af0fc497110019d4ca836cb217e5e1aac5f8d1688ea65ec91df1e201593ca73606c3fcb4c5cf32fdcae22ed5a79a7b920cd683cbe8679cee740d1afa453dca0dbd7cdcaff41296a00000000
a9a19875ced1ba0485e3d51fd1e7f40614ef479b50f6ab12963055c03ad62fa4
added to mempool and broadcast
```


[14-Aug-18 07:58 AM] jl777c#5810
worked!


[14-Aug-18 07:58 AM] siu#3920
updating


[14-Aug-18 07:58 AM] SHossain#0007
another
`9d34e5efc8900e8d3c0cb629698bce494105ecd990bdbca72d3773a6e51885db winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 07:58 AM] SHossain#0007
```
0100000003478de52842ec08e6670d9de241fca0767793f1677b166d0c4c3b64677fcd60ad010000004847304402202d0af90755dde36b2a6b496e2ea242a8626692648cf94e3a0bd8761c98544c4a02205476dea589a5057537a0c04da4943505f0773c46cef816c0ec17a8bd0abf17a101ffffffffdb8518e5a673372da7bcbd90d9ec054149ce8b6929b60c3c8d0e90c8efe5349d000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140b7a810e1573d8d823747a48e874684a1ab7ac380c5f1a8263cc4a197f4e069da093198cf92d741321173f993ea4f8f8a77f5e1ee10ab8457a07946048860642da100af038001e6a10001ffffffffdb8518e5a673372da7bcbd90d9ec054149ce8b6929b60c3c8d0e90c8efe5349d010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140387ba19220516ff0afb1a3aa3e04c32ee2ed91f5237c1d80463320633220d67e0bf547f74bd63ae6f6abd3c47ba7a1c7f1edd722adcc3e4726ab77210bfab92da100af038001e6a10001ffffffff04e016cd1d00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac0094357700000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae6574469636532000000e26d2f6bfd5763cbb5324cd355a58e099127c74dcf167cf11af0fc497110019d8b63c3e61ac5f4cba8e0d43d1f979768235f5f2e6d325b5a0f1ec1dfc5a0d17b8a8877ebf2a4bee5a1d8b14f66a64f96838470a841ac40cdae8c1f0a9265ca9100000000
de58506abbcaa415bc84a03143a928f8692b0d79b541c0f360fd4309cc32a03a
added to mempool and broadcast
```


[14-Aug-18 07:59 AM] SHossain#0007
diceinfo output:
```
diceinfo 9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2
a195b46a5bd1c3704d59fd584acd5d44a07d321f90803369772ad3a3a1baf284 B refsbits.3265636944 sbits.3265636944 nValue 25.00000000
a195b46a5bd1c3704d59fd584acd5d44a07d321f90803369772ad3a3a1baf284 B refsbits.3265636944 sbits.3265636944 nValue 10.00000000
4ff522613af091cb0a4ce8a3b72fd250e4fbd909c2486e6a3875f8a68cdd29bc B refsbits.3265636944 sbits.3265636944 nValue 100009.99990000
4ff522613af091cb0a4ce8a3b72fd250e4fbd909c2486e6a3875f8a68cdd29bc B refsbits.3265636944 sbits.3265636944 nValue 10.00000000
4f2bc7488af2774c0f8224827aae5556e40c41a566b7171b9f4cb840309483f0.(E 10.00000000) check first
882f824de7bed5ea0819b703ae2ede5ad32c3c002c20af0bfc51a1e8ba5ae8f2.(W 19.99990000) numentropy tx 2: 29.99990000
{
  "result": "success",
  "fundingtxid": "9d01107149fcf01af17c16cf4dc72791098ea555d34c32b5cb6357fd6b2f6de2",
  "name": "Dice2",
  "sbits": 216449378628,
  "minbet": "0.10000000",
  "maxbet": "10000.00000000",
  "maxodds": 77,
  "timeoutblocks": 2,
  "funding": "29.99990000"
}
```


[14-Aug-18 07:59 AM] jl777c#5810
are the totals matching exact?


[14-Aug-18 08:00 AM] SHossain#0007
numbers matches, except the initial 100,000 funding is now not showing in diceinfo call


[14-Aug-18 08:00 AM] jl777c#5810
where did it go?


[14-Aug-18 08:00 AM] siu#3920
give it a break and try again


[14-Aug-18 08:01 AM] siu#3920
it can take some seconds to reappear if everything is ok


[14-Aug-18 08:01 AM] jl777c#5810
each time all the utxo are listed, at some point if it permanent disappeared we an find the tx


[14-Aug-18 08:04 AM] SHossain#0007
https://gist.github.com/himu007/e66cc728ae08d02dbf4702e10a4317f0

{Embed}
https://gist.github.com/himu007/e66cc728ae08d02dbf4702e10a4317f0
All the commands i used after updating to latest
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[14-Aug-18 08:04 AM] SHossain#0007
all the commands i used after updating and their output


[14-Aug-18 08:07 AM] SHossain#0007
will test using this one now
```
./komodo-cli -ac_name=AT3 diceinfo 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f
cb0defbb807ba333c57b864e160cacc3b24df4272a7b3c36fc2e207306168a01.(E 7777.00000000) check first
ad60cd7f67643b4c0c6d167b67f1937776a0fc41e29d0d67e608ec4228e58d47.(E 777.00000000) 8a971c2129d42a673c36fe3b80584e68bbbc1e297db35c78145e5013a629de48.(E 50.00000000) fb8072964cbdb2f95be1da2f0d6cd25d19096861de1d29628153ae0e80e1794a.(E 777.00000000) 43abf49489d161de25ebe0bfd707f646c558e24c1d69e167aaff28bb1d2be163.(E 500.00000000) b0eb10e7c106fa75fdf2dafc8f321f77e73a6a9392dbb16352d0364c1172ca72.(E 20.00000000) 982ba88257fa334a0630a4e264b805bc913262890b81eaf572ff81ec3408d473.(E 20.00000000) 1dd730410f3226e976a8a223f585cacc5cabc12e4b7f4c32538038f1eecc0e83.(E 1000.00000000) 6fb37e71ec3a17c4840146d154b498bf8d8f128417c4cbdea1e7b6fa15137985.(E 100.00000000) 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f.(F 100000.00000000) bef0cc12cbd0a373720d9ac8d3778c77c28e14f5cd65e62640b8dbcfafdc32c9.(E 50.00000000) 1fc258794c857ee2383d99955c458b043eddf06f269c70dee8d95323214f30d0.(E 10.00000000) 8c02359cff943ef6e7ab1a2a04c52c39a5b593b3110b68bc1d54723a0978e9ef.(E 77.00000000) 54f0740be852f305625643885d56101a8c2caaebed23279269087a5a62b64ff9.(E 10.00000000) numentropy tx 13: 111168.00000000
{
  "result": "success",
  "fundingtxid": "48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f",
  "name": "Dice3",
  "sbits": 220744345924,
  "minbet": "1.00000000",
  "maxbet": "10000.00000000",
  "maxodds": 777,
  "timeoutblocks": 2,
  "funding": "111168.00000000"
}
```


[14-Aug-18 08:08 AM] jl777c#5810
keep very careful track of utxo and totals and stop as soon as something goes wrong


[14-Aug-18 08:08 AM] SHossain#0007
first one win
`06132eb5245c9e32e9febbf87f0a50f79349127156af70474c2958da71edb21d winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 08:09 AM] SHossain#0007
will wait until tx confirms and checking diceinfo again


[14-Aug-18 08:10 AM] siu#3920
```053d18bf2c1ae4a3f553120d37b7cad6c8dc32a27e037e246c738ced32bc47d3 winnings 2000.00000000 bet 1000.00000000 at odds 1:1
010000000373d5d66b3a1b42a235b4446a313587baead5adfced3510ceefdc55bab55c287f0100000048473044022053bb378f63e695d14273b4290ded93cb72ec660ddc4cf2db98c8e68bed87904502202ee85aa885d63af4916ba55720414bf41c7a68fead1d2bb7a969f800faf5037201ffffffffd347bc32ed8c736c247e037ea232dcc8d6cab7370d1253f5a3e41a2cbf183d05000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140aa3107102f22afdf44788c5b9394ccd8b2ffec8d9ecf093a2776d12ddeecbb9b3ffeef0bc5d41668e4e37305d279c258dd6789c8d47cc8146b35c5066ef429f8a100af038001e6a10001ffffffffd347bc32ed8c736c247e037ea232dcc8d6cab7370d1253f5a3e41a2cbf183d05010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814062a9b750e7ef81658feeb62250a2a358784f4008b9fe03a885bab753a8ca7214229015458bafe6f3695cc5397899fad9fac43bb8c7d078afc4c63f9f61d24f49a100af038001e6a10001ffffffff04f00c11995d000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdcccd836614214251c8717798a9ebd7a3b0e3a969cc8dafbdb735c6d736f4bd6d2f894366a67d8037a2d248b5c55afc729facf7aa082ec8642d64b0ea32cc59a75ef00000000
556825de18a3517a16a8a34124cc5a0d96d0666dc178390e57ba64961a8dacea
added to mempool and broadcast
053d18bf2c1ae4a3f553120d37b7cad6c8dc32a27e037e246c738ced32bc47d3 winnings 2000.00000000 bet 1000.00000000 at odds 1:1
```


[14-Aug-18 08:10 AM] siu#3920
worked!


[14-Aug-18 08:10 AM] siu#3920
balances are ok


[14-Aug-18 08:11 AM] SHossain#0007
updated diceinfo after tx was confirmed!
```
./komodo-cli -ac_name=AT3 diceinfo 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f
ad60cd7f67643b4c0c6d167b67f1937776a0fc41e29d0d67e608ec4228e58d47.(E 777.00000000) check first
8a971c2129d42a673c36fe3b80584e68bbbc1e297db35c78145e5013a629de48.(E 50.00000000) fb8072964cbdb2f95be1da2f0d6cd25d19096861de1d29628153ae0e80e1794a.(E 777.00000000) 43abf49489d161de25ebe0bfd707f646c558e24c1d69e167aaff28bb1d2be163.(E 500.00000000) b0eb10e7c106fa75fdf2dafc8f321f77e73a6a9392dbb16352d0364c1172ca72.(E 20.00000000) 982ba88257fa334a0630a4e264b805bc913262890b81eaf572ff81ec3408d473.(E 20.00000000) 1dd730410f3226e976a8a223f585cacc5cabc12e4b7f4c32538038f1eecc0e83.(E 1000.00000000) 6fb37e71ec3a17c4840146d154b498bf8d8f128417c4cbdea1e7b6fa15137985.(E 100.00000000) 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f.(F 100000.00000000) 0f9664911f71ae84b1c801eae1f77880dd0b08772f9fc312eaac0225092424bb.(W 7766.99990000) bef0cc12cbd0a373720d9ac8d3778c77c28e14f5cd65e62640b8dbcfafdc32c9.(E 50.00000000) 1fc258794c857ee2383d99955c458b043eddf06f269c70dee8d95323214f30d0.(E 10.00000000) 8c02359cff943ef6e7ab1a2a04c52c39a5b593b3110b68bc1d54723a0978e9ef.(E 77.00000000) 54f0740be852f305625643885d56101a8c2caaebed23279269087a5a62b64ff9.(E 10.00000000) numentropy tx 13: 111157.99990000
{
  "result": "success",
  "fundingtxid": "48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f",
  "name": "Dice3",
  "sbits": 220744345924,
  "minbet": "1.00000000",
  "maxbet": "10000.00000000",
  "maxodds": 777,
  "timeoutblocks": 2,
  "funding": "111157.99990000"
}
```

{Reactions}
shexy 

[14-Aug-18 08:12 AM] SHossain#0007
same bet lost again
`842d1111c31148229ff935d930e3a92cf7cfbadd4ae3448a50013572e4d05ed1 winnings 0.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 08:13 AM] dukeleto#7326
@SHossain it would help me in writing rewards tests if you could document the exact commands you use to correctly do a `rewardsunlock`. Your docs have been extremely helpful in me writing tests


[14-Aug-18 08:13 AM] dukeleto#7326
rewardsunlock is being challenging in regtest


[14-Aug-18 08:14 AM] siu#3920
another win with good balances


[14-Aug-18 08:14 AM] siu#3920
```d0e705f740790375f4de16e464e53e287f787194541a3da7025d7ecd62cf6167 winnings 2000.00000000 bet 1000.00000000 at odds 1:1
0100000003bd4ef9f220b6596440ede4f5e515c30916305559a0bdfbeb322b867f09008a8d010000004847304402202516b07bc710cbe2921dd6095e775f50e08dd46623febc95a9a77aa3d1a93daa02203efd95a8bbf7e32db2566b4a341b4a02ff65b2545c6c6c019024748fa75a29ba01ffffffff6761cf62cd7e5d02a73d1a549471787f283ee564e416def475037940f705e7d0000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140196b350584a7ac5cee6e9f79d3e5ccb62fd13536c47fac3b2a3a6c6baabe00f652d1a02ffc4297a9e47b4b5072d326a10d6fe0af7e790e22273e9dfb07f19c41a100af038001e6a10001ffffffff6761cf62cd7e5d02a73d1a549471787f283ee564e416def475037940f705e7d0010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140b68762fb93cd49c754b1fa3dc316f87bb3cb7681dc72f151653efb2bd58055cd4b73a5ede0e9669c89a493296b17a773692fe051f7d140d6132790c609008e48a100af038001e6a10001ffffffff04f0249a5046000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc20c5443be5c87c3694bab5eec31dcfdfea82f24b4d88b4d99a60af38aeeea5ca2d7bcb5d60a5ff8f1184b7b19b43ed3016a206090ae0c982a9ae5d6a369b27a300000000
5690e35dd9317cfcf2020ae78c8c051b9f78997aaafd0a17ad81858ce6b56424
added to mempool and broadcast
d0e705f740790375f4de16e464e53e287f787194541a3da7025d7ecd62cf6167 winnings 2000.00000000 bet 1000.00000000 at odds 1:1
```


[14-Aug-18 08:14 AM] dukeleto#7326
I want to make sure the way I am writing the tests is correct, if I am doing rewards* RPCs in the correct order/etc


[14-Aug-18 08:14 AM] siu#3920
seems like you hit the right line of code this time @jl777c


[14-Aug-18 08:14 AM] SHossain#0007
@dukeleto this is the example

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/478944602007666698/Screenshot_from_2018-08-14_16-14-08.png


[14-Aug-18 08:14 AM] jl777c#5810
it needed to be 100% precise


[14-Aug-18 08:15 AM] SHossain#0007
@dukeleto you need to keep the txid from `rewardslock` call and use that for `rewardsunlock`


[14-Aug-18 08:16 AM] SHossain#0007
i'm glad to be in help üòÉ


[14-Aug-18 08:17 AM] dukeleto#7326
@SHossain i am doing that, but i need to verify all the RPC functions up to that, the order


[14-Aug-18 08:17 AM] dukeleto#7326
to see if I am doing something dumb


[14-Aug-18 08:18 AM] dukeleto#7326
@SHossain this is the test: https://github.com/letolabs/komodo/blob/cctests/qa/rpc-tests/cryptoconditions.py#L227

{Embed}
https://github.com/letolabs/komodo/blob/cctests/qa/rpc-tests/cryptoconditions.py
letolabs/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/STidbfwli6qkMkU8vATD46L8ib5zmeVb7WDB5OpJ4KU/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/648647


[14-Aug-18 08:19 AM] dukeleto#7326
rewardscreatefunding, broadcast xtn, rewardsaddfunding broadcast xtn, rewardsunlock


[14-Aug-18 08:19 AM] dukeleto#7326
that sequence should work?


[14-Aug-18 08:20 AM] SHossain#0007
diceinfo updated after i lost the bet
```
diceinfo 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce1
e1657800b3856acbe0b106595d34cbab31ae2032629599dcffe757fe207df009.(L 787.00000000) check first
8a971c2129d42a673c36fe3b80584e68bbbc1e297db35c78145e5013a629de48.(E 50.00000000) fb8072964cbdb2f95be1da2f0d6cd25d19096861de1d29628153ae0e80e1794a.(E 777.00000000) 43abf49489d161de25ebe0bfd707f646c558e24c1d69e167aaff28bb1d2be163.(E 500.00000000) b0eb10e7c106fa75fdf2dafc8f321f77e73a6a9392dbb16352d0364c1172ca72.(E 20.00000000) 982ba88257fa334a0630a4e264b805bc913262890b81eaf572ff81ec3408d473.(E 20.00000000) 1dd730410f3226e976a8a223f585cacc5cabc12e4b7f4c32538038f1eecc0e83.(E 1000.00000000) 6fb37e71ec3a17c4840146d154b498bf8d8f128417c4cbdea1e7b6fa15137985.(E 100.00000000) 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f.(F 100000.00000000) 0f9664911f71ae84b1c801eae1f77880dd0b08772f9fc312eaac0225092424bb.(W 7766.99990000) bef0cc12cbd0a373720d9ac8d3778c77c28e14f5cd65e62640b8dbcfafdc32c9.(E 50.00000000) 1fc258794c857ee2383d99955c458b043eddf06f269c70dee8d95323214f30d0.(E 10.00000000) 8c02359cff943ef6e7ab1a2a04c52c39a5b593b3110b68bc1d54723a0978e9ef.(E 77.00000000) 54f0740be852f305625643885d56101a8c2caaebed23279269087a5a62b64ff9.(E 10.00000000) numentropy tx 13: 111167.99990000
{
  "result": "success",
  "fundingtxid": "48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f",
  "name": "Dice3",
  "sbits": 220744345924,
  "minbet": "1.00000000",
  "maxbet": "10000.00000000",
  "maxodds": 777,
  "timeoutblocks": 2,
  "funding": "111167.99990000"
}
```


[14-Aug-18 08:20 AM] dukeleto#7326
in the process of this, i have added nice error messages to rewards*, so you understand why your RPC failed in a nice json blob


[14-Aug-18 08:20 AM] SHossain#0007
@dukeleto you need `rewardslock` before `rewardsunlock`


[14-Aug-18 08:21 AM] dukeleto#7326
addfunding is not required, that is only to add funding after it's created? I could just do createfunding, rewardslock, rewardsunlock ?


[14-Aug-18 08:21 AM] SHossain#0007
so, the steps could be
1. Create new rewards plan
2. Add funding
3. Lock funds
4. Unlock funds


[14-Aug-18 08:22 AM] SHossain#0007
if you are not using your own rewards plan, then, you can't add funds in there. you can only lock and unlock


[14-Aug-18 08:22 AM] SHossain#0007
your own plan needs funding

{Reactions}
‚ù§ 

[14-Aug-18 08:22 AM] dukeleto#7326
i was confusing addfunding and lock i think


[14-Aug-18 08:23 AM] siu#3920
im now on a streak! 3 straight wins!


[14-Aug-18 08:23 AM] jl777c#5810
also anybody is able to unlock anybody elses funds, but it goes back to the same place it was locked from


[14-Aug-18 08:24 AM] jl777c#5810
the dice game is actually pretty fun, even when for test coins


[14-Aug-18 08:24 AM] siu#3920
yeah.... my vicious better is getting out


[14-Aug-18 08:25 AM] SHossain#0007
@dukeleto I have updated the test plan spreadsheet. please let me know if this make sense now.

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/478947258981679104/Screenshot_from_2018-08-14_16-24-28.png


[14-Aug-18 08:25 AM] jl777c#5810
one thng about the dice I didnt really write much about is the entropy source. each bet has 2 entropy sources


[14-Aug-18 08:26 AM] jl777c#5810
the one from the house account, which has the hash of it added to the opreteurn and the dicebet that adds it directly to the opreturn. this allows the hous account to immediately know if it wins or loses and it processes it in realtime


[14-Aug-18 08:26 AM] dukeleto#7326
@SHossain awesome, thanks! that gdoc made it very straightforward to write tests when I didn't really know much about CC, well done üëç

{Reactions}
üòÉ 

[14-Aug-18 08:27 AM] jl777c#5810
in the event a house account tries to cheat by not dicefinish for winning bets, ie. trying to not payout. when the dice plan's expiration happens, it is treated as a win and anybody can complete the dicefinish


[14-Aug-18 08:29 AM] jl777c#5810
when the dicefinish completes a bet for either win or loss, it attaches the original entropy value so the hash of it can be verified. in other words it is provably fair and random for each and every bet. the dicebet is the one that chooses what house entropy to use, so that alone gives the power to determine the outcome to the dicebettoer. and as long as the bettor's entropy is a high entropy value, the outcome is totally random


[14-Aug-18 08:31 AM] jl777c#5810
technically I generate 2 256 bit numbers from the two entropy values. I just SHA256(house entropy + bettor entropy) for the house and SHA256(bettor entropy + house entropy) for the bettor. Then for odds of > 1, the entropy value is divided by the odds and the two numbers compared. the bettor value adjusted by odds needs to be bigger than the house value


[14-Aug-18 08:31 AM] jl777c#5810
I think the payout matches the risk. for a 1:1, the two values are directly compared and a win is 2x what was bet


[14-Aug-18 08:32 AM] siu#3920
damn... 5 straight wins


[14-Aug-18 08:32 AM] jl777c#5810
since there is a 50% chance, the expected result is 50% of 2x or 1x


[14-Aug-18 08:32 AM] jl777c#5810
at what odds, 5 times in a row?


[14-Aug-18 08:32 AM] siu#3920
1:1


[14-Aug-18 08:32 AM] jl777c#5810
still, that is a good run


[14-Aug-18 08:32 AM] siu#3920
broke it üò¶


[14-Aug-18 08:33 AM] siu#3920
```(W) 4019.99990000 SIU1 556825de18a3517a16a8a34124cc5a0d96d0666dc178390e57ba64961a8dacea
0100000004d553a827094eab73157bf1ee3dfd2687a71697533a5c6f0beb8b90f24ad2a80a0100000049483045022100adf453e72104ef0fbde9368c00b7bb2f85557c5e27e5a3fe3dba970186b2abbc022025918dd9d1662b025cc90162e82825c922253540058bd135dfe83bffc4c4484d01ffffffff1f2c00020d715cfdbed699f6d6e1efe28cc9b0b32b9734848080074dc0bcfab2000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140d85b2811a3c76a66e6faa5f75e3d4657829410df4dc3513b238f10441a06f09a78aa8405225d96e09c4039d0db39ccf5ff3feafb986f3580d34256e18b53dfe7a100af038001e6a10001ffffffff1f2c00020d715cfdbed699f6d6e1efe28cc9b0b32b9734848080074dc0bcfab2010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81408a2fdb1a07a967fc9bb39c1ae321b2e07c8e24f53ea42fee4455168ec7bca6720be38eebfd9f5409a6de6b9e30edc6544e86736ccd447e57d86d49126a48062ea100af038001e6a10001ffffffffeaac8d1a9664ba570e3978c16d66d0960d5acc2441a3a8167a51a318de256855000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140f9f1e5ec3de4e92e1f09a7e473cac9a84a041e1f0c4f1c1f4a01adf0d4f9ec6505304313c5b79ddb8a37f5e6d1bc83a6ea6cc7efe64300fb0c4816508503b1caa100af038001e6a10001ffffffff04a0dd45105e000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc6b5215ee6036dec78e653e5a80f13b8e6894ffe6fdd6cd371e43682f9a1f6334223f8a456be1da9f5eb87837e3f793fa3a1873fcc063d29f9f8b4ff4763ed0ef00000000
6aa57f070766c5acfe03047ac052224f15df6905472c7b897e8571ec78049c28
spentheight.3757 valuein 5039.9996 vs 6039.9995 error
error adding to mempool
```


[14-Aug-18 08:33 AM] jl777c#5810
at 2:1 odds, the hash value is divided in 2, so it seems that the odds of winning are 1 out of 3 and a win is 3x, so it seems to work


[14-Aug-18 08:34 AM] SHossain#0007
i have a lost bet
`6dbf148468d46aba8911c02bf89f84c59ffdfb6393ee72d75af0929b60489399 winnings 0.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 08:34 AM] jl777c#5810
need the dicefinish for  the above bet


[14-Aug-18 08:34 AM] siu#3920
on it


[14-Aug-18 08:34 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT3 sendrawtransaction 0100000004d553a827094eab73157bf1ee3dfd2687a71697533a5c6f0beb8b90f24ad2a80a0100000049483045022100adf453e72104ef0fbde9368c00b7bb2f85557c5e27e5a3fe3dba970186b2abbc022025918dd9d1662b025cc90162e82825c922253540058bd135dfe83bffc4c4484d01ffffffff1f2c00020d715cfdbed699f6d6e1efe28cc9b0b32b9734848080074dc0bcfab2000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140d85b2811a3c76a66e6faa5f75e3d4657829410df4dc3513b238f10441a06f09a78aa8405225d96e09c4039d0db39ccf5ff3feafb986f3580d34256e18b53dfe7a100af038001e6a10001ffffffff1f2c00020d715cfdbed699f6d6e1efe28cc9b0b32b9734848080074dc0bcfab2010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81408a2fdb1a07a967fc9bb39c1ae321b2e07c8e24f53ea42fee4455168ec7bca6720be38eebfd9f5409a6de6b9e30edc6544e86736ccd447e57d86d49126a48062ea100af038001e6a10001ffffffffeaac8d1a9664ba570e3978c16d66d0960d5acc2441a3a8167a51a318de256855000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140f9f1e5ec3de4e92e1f09a7e473cac9a84a041e1f0c4f1c1f4a01adf0d4f9ec6505304313c5b79ddb8a37f5e6d1bc83a6ea6cc7efe64300fb0c4816508503b1caa100af038001e6a10001ffffffff04a0dd45105e000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc6b5215ee6036dec78e653e5a80f13b8e6894ffe6fdd6cd371e43682f9a1f6334223f8a456be1da9f5eb87837e3f793fa3a1873fcc063d29f9f8b4ff4763ed0ef00000000
error code: -26
error message:
16: bad-txns-in-belowout
```


[14-Aug-18 08:35 AM] siu#3920
`spentheight.3759 valuein 5039.9996 vs 6039.9995 error
`


[14-Aug-18 08:36 AM] jl777c#5810
i need the console output of dicefinish


[14-Aug-18 08:37 AM] siu#3920
https://pastebin.com/xub2Rdqn

{Embed}
https://pastebin.com/xub2Rdqn
(W) 4019.99990000 SIU1 556825de18a3517a16a8a34124cc5a0d96d0666dc17...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[14-Aug-18 08:38 AM] SHossain#0007
i used dicefinish on the lsot txid 
```
./komodo-cli -ac_name=AT3 dicefinish Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f 6dbf148468d46aba8911c02bf89f84c59ffdfb6393ee72d75af0929b60489399
6dbf148468d46aba8911c02bf89f84c59ffdfb6393ee72d75af0929b60489399 winnings 0.00000000 bet 10.00000000 at odds 1:1
{
  "result": "success",
  "hex": "01000000034a79e1800eae538162291dde616809195dd26c0d2fdae15bf9b2bd4c967280fb0100000049483045022100e88f470630b43ee978614196ce2171775bc484038e9f52355d2d70aab6de45fa022033cadbe25350949461f89e6a0f9907ae68c9068ca275a674898eca165d49c7ac01ffffffff999348609b92f05ad772ee9363fbfd9fc5849ff82bc01189ba6ad4688414bf6d000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140380b3c9b43daca647d35a183584beb50de88fba2e119efccec9b45d1e7e370654b4f8136d0f66b33f2e02c181dc0f12a486a61d81953aae6ee2205f7c2378ec1a100af038001e6a10001ffffffff999348609b92f05ad772ee9363fbfd9fc5849ff82bc01189ba6ad4688414bf6d010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814088df703b21234aa6564121ca2470fefde8154584b3ddac5ab0cd93aaaecfd6710b17a23cd0b69005e1bbd9679c02248507b1451883da7ec01d2e34dc6f1c53f7a100af038001e6a10001ffffffff03007d7d8e12000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae64c44696365330000008f7dd394e12c425e7cf7cf2e4ff77a29ab2afb95a52747bf02727dc0747c9348a7591e10e8ee88a5647d57e4eb71d800054ee72bd3c5dc85aeb99aa7b657e9d074281e822d15ea87877a0793c76787b50737cf4c6b5e336c2560663052cb048500000000"
```
output
```
error code: -26
error message:
18: bad-txns-inputs-spent
```


[14-Aug-18 08:39 AM] siu#3920
this time balances are not affected  in dicedund though


[14-Aug-18 08:39 AM] SHossain#0007
house got 10 more coins from me and reflected on it's funding balance


[14-Aug-18 08:39 AM] jl777c#5810
do another dicefinish for the failed one


[14-Aug-18 08:40 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 sendrawtransaction 01000000034a79e1800eae538162291dde616809195dd26c0d2fdae15bf9b2bd4c967280fb0100000049483045022100e88f470630b43ee978614196ce2171775bc484038e9f52355d2d70aab6de45fa022033cadbe25350949461f89e6a0f9907ae68c9068ca275a674898eca165d49c7ac01ffffffff999348609b92f05ad772ee9363fbfd9fc5849ff82bc01189ba6ad4688414bf6d000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140380b3c9b43daca647d35a183584beb50de88fba2e119efccec9b45d1e7e370654b4f8136d0f66b33f2e02c181dc0f12a486a61d81953aae6ee2205f7c2378ec1a100af038001e6a10001ffffffff999348609b92f05ad772ee9363fbfd9fc5849ff82bc01189ba6ad4688414bf6d010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814088df703b21234aa6564121ca2470fefde8154584b3ddac5ab0cd93aaaecfd6710b17a23cd0b69005e1bbd9679c02248507b1451883da7ec01d2e34dc6f1c53f7a100af038001e6a10001ffffffff03007d7d8e12000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00000000000000006d6a4c6ae64c44696365330000008f7dd394e12c425e7cf7cf2e4ff77a29ab2afb95a52747bf02727dc0747c9348a7591e10e8ee88a5647d57e4eb71d800054ee72bd3c5dc85aeb99aa7b657e9d074281e822d15ea87877a0793c76787b50737cf4c6b5e336c2560663052cb048500000000
error code: -26
error message:
18: bad-txns-inputs-spent
```


[14-Aug-18 08:41 AM] jl777c#5810
so losses are getting errors now?


[14-Aug-18 08:41 AM] jl777c#5810
plz check the vins, which ine is already spent


[14-Aug-18 08:43 AM] siu#3920
https://pastebin.com/sPNNndTs

{Embed}
https://pastebin.com/sPNNndTs
1ecad706be2b57b6449512244dba5e59bf168ff6426402e9f339dbe79b18780d B...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[14-Aug-18 08:43 AM] siu#3920
tried dice finish again


[14-Aug-18 08:43 AM] siu#3920
funny part is that the funds i had lost in the last days show up in the console output of dicefinish


[14-Aug-18 08:44 AM] siu#3920
``` ./komodo-cli -ac_name=AT3 sendrawtransaction 0100000004d553a827094eab73157bf1ee3dfd2687a71697533a5c6f0beb8b90f24ad2a80a0100000049483045022100adf453e72104ef0fbde9368c00b7bb2f85557c5e27e5a3fe3dba970186b2abbc022025918dd9d1662b025cc90162e82825c922253540058bd135dfe83bffc4c4484d01ffffffff1f2c00020d715cfdbed699f6d6e1efe28cc9b0b32b9734848080074dc0bcfab2000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140d85b2811a3c76a66e6faa5f75e3d4657829410df4dc3513b238f10441a06f09a78aa8405225d96e09c4039d0db39ccf5ff3feafb986f3580d34256e18b53dfe7a100af038001e6a10001ffffffff1f2c00020d715cfdbed699f6d6e1efe28cc9b0b32b9734848080074dc0bcfab2010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81408a2fdb1a07a967fc9bb39c1ae321b2e07c8e24f53ea42fee4455168ec7bca6720be38eebfd9f5409a6de6b9e30edc6544e86736ccd447e57d86d49126a48062ea100af038001e6a10001ffffffffeaac8d1a9664ba570e3978c16d66d0960d5acc2441a3a8167a51a318de256855000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140f9f1e5ec3de4e92e1f09a7e473cac9a84a041e1f0c4f1c1f4a01adf0d4f9ec6505304313c5b79ddb8a37f5e6d1bc83a6ea6cc7efe64300fb0c4816508503b1caa100af038001e6a10001ffffffff04a0dd45105e000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc6b5215ee6036dec78e653e5a80f13b8e6894ffe6fdd6cd371e43682f9a1f6334223f8a456be1da9f5eb87837e3f793fa3a1873fcc063d29f9f8b4ff4763ed0ef00000000
error code: -26
error message:
16: bad-txns-in-belowout
```


[14-Aug-18 08:45 AM] siu#3920
this is the rawtx of my second try at dicefinish


[14-Aug-18 08:46 AM] jl777c#5810
ok, dont change anything. fix coming up


[14-Aug-18 08:46 AM] siu#3920
```1ecad706be2b57b6449512244dba5e59bf168ff6426402e9f339dbe79b18780d B refsbits.31554953 sbits.31554953 nValue 11050.00000000```


[14-Aug-18 08:47 AM] siu#3920
```2e594f77aabd14f3edd0beecdd63f73ec99215085f7ca25386e9730a71e29344 B refsbits.31554953 sbits.31554953 nValue 1000019.99990000```


[14-Aug-18 08:47 AM] siu#3920
```d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 B refsbits.31554953 sbits.31554953 nValue 102000.00000000```


[14-Aug-18 08:47 AM] siu#3920
these are missed utxos i can identify


[14-Aug-18 08:48 AM] SHossain#0007
finally, you found them.


[14-Aug-18 08:48 AM] jl777c#5810
it was a different case. pushed fix not consensus change it should just make valid dicefinish


[14-Aug-18 08:48 AM] jl777c#5810
yes the dicefinish errors are the root of all evil


[14-Aug-18 08:49 AM] jl777c#5810
it leaves the B tx unfinished, with all its funds


[14-Aug-18 08:49 AM] jl777c#5810
once dicefinish is 100% solid I think the funds disappearing bug will disappear


[14-Aug-18 08:50 AM] jl777c#5810
if you didnt change the state of utxo at all from when the bug was, updating and doing dicefinish will verify the bug is fixed


[14-Aug-18 08:52 AM] siu#3920
ok


[14-Aug-18 08:52 AM] siu#3920
updating


[14-Aug-18 08:52 AM] siu#3920
so i just go straight to dicefinish now?


[14-Aug-18 08:53 AM] SHossain#0007
just in case, before doing so, you can use `getinfo` and `diceinfo fundingtxid` to record the balance


[14-Aug-18 08:54 AM] jl777c#5810
dicefinish theone that got an error when doing the dicefinish so we can see if i fixed the dicefinish bug


[14-Aug-18 08:57 AM] SHossain#0007
be back soon. need some food


[14-Aug-18 08:58 AM] siu#3920
```./komodo-cli -ac_name=AT3 sendrawtransaction 0100000004d553a827094eab73157bf1ee3dfd2687a71697533a5c6f0beb8b90f24ad2a80a01000000484730440220443e3a517a785ca7bba4e230f7094eb6424dd473a6d71dd4b0ffe4f4635e0f7c0220268ceb532c3a0246d9f1a6fef0459df7bcee80228dd926f60f835c7255a9a8e901ffffffff1f2c00020d715cfdbed699f6d6e1efe28cc9b0b32b9734848080074dc0bcfab2000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140c1b82ff4e2033f9e17cf0f6317b09a2a8fa6c33d581f03be4522c6c7108410b143fa3704865c7ad595418599523412fff99cf6e45c3d0a7abbd33dc8f35756d2a100af038001e6a10001ffffffff1f2c00020d715cfdbed699f6d6e1efe28cc9b0b32b9734848080074dc0bcfab2010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140b26abd66af7988014b139ac563910165d769b36718e5cb8ea95474ba4e817a4c3343c83f2abaa119e7dcfa520fea82c0f86b8fba386f8ca47c758c9a99c10d41a100af038001e6a10001ffffffffeaac8d1a9664ba570e3978c16d66d0960d5acc2441a3a8167a51a318de256855000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140d5563f3126c48446d1337d393545fe00fa62f92e967979e13bb12a23ef1dda9e68113b7840b2c693ac20f28ed608408bf36190997c4e8958e30eec3aedc08939a100af038001e6a10001ffffffff04a0f5cec746000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00d0ed902e00000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc6b5215ee6036dec78e653e5a80f13b8e6894ffe6fdd6cd371e43682f9a1f6334223f8a456be1da9f5eb87837e3f793fa3a1873fcc063d29f9f8b4ff4763ed0ef00000000
49de76f70f13d8fe7dcfb0677d304b50c05dc7765046cd3ab9f5045c4a7c65c3
```


[14-Aug-18 08:58 AM] siu#3920
no error this time


[14-Aug-18 08:59 AM] siu#3920
```/komodo-cli -ac_name=AT3 diceinfo ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4
{
  "result": "success",
  "fundingtxid": "ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4",
  "name": "SIU1",
  "sbits": 827672915,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "0.00000000"
}
```


[14-Aug-18 08:59 AM] siu#3920
but now balance went to 0


[14-Aug-18 09:00 AM] siu#3920
ohh, its back


[14-Aug-18 09:00 AM] siu#3920
ok... seems like i did resolve the issue with the last stuc bet


[14-Aug-18 09:00 AM] jl777c#5810
did you wait for the confirmation


[14-Aug-18 09:00 AM] siu#3920
let me see if i can get the other bets i saw in the output unlocked


[14-Aug-18 09:00 AM] jl777c#5810
funding is CONFIRMED funding


[14-Aug-18 09:00 AM] siu#3920
yep. now orries


[14-Aug-18 09:00 AM] jl777c#5810
a discestatus will unlock all


[14-Aug-18 09:00 AM] siu#3920
noticed it was still not confirmed


[14-Aug-18 09:00 AM] jl777c#5810
that can be


[14-Aug-18 09:01 AM] jl777c#5810
which should be all from the diceplan creator's node


[14-Aug-18 09:01 AM] jl777c#5810
dicestatus with just the plan txid


[14-Aug-18 09:01 AM] jl777c#5810
it seems we are close to being able to make a GUI for this


[14-Aug-18 09:09 AM] siu#3920
its working!!!


[14-Aug-18 09:09 AM] siu#3920
getting my funds back!


[14-Aug-18 09:10 AM] siu#3920
```./komodo-cli -ac_name=AT3 dicestatus SIU1 ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4
{
  "result": "success",
  "status": "finalized",
  "n": 3
}
```


[14-Aug-18 09:10 AM] siu#3920
```d49e4f2791f30ea1e84322c879453200eec2ef180a2f7fdb6316c4ee8a07d7b3 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
bettxid already spent
Dice plan (SIU1) already exists cmpflag.1
Diceinit error
Dice plan (SIU1) already exists cmpflag.1
Diceinit error
Dice plan (SIU1) already exists cmpflag.1
Diceinit error
Dice plan (SIU1) already exists cmpflag.1
Diceinit error
Dice plan (SIU1) already exists cmpflag.1
ENTROPY tx:
Dice plan (SIU1) already exists cmpflag.1
ENTROPY tx:
Dice plan (SIU1) already exists cmpflag.1
ENTROPY tx:
Dice plan (SIU1) already exists cmpflag.1
ENTROPY tx:
8936c095f1b994c8669144253da2d576152ebba8aadb26f3e4df4c9fd9a7f003.(W 10049.99990000) check first
309015bc3cc460ae99bb82462148297baaf29a6ec7a887cbbd9e3d7861e553c3.(W 999019.99980000) 49de76f70f13d8fe7dcfb0677d304b50c05dc7765046cd3ab9f5045c4a7c65c3.(W 3039.99940000) numentropy tx 3: 1012109.99910000

```


[14-Aug-18 09:13 AM] siu#3920
```./komodo-cli -ac_name=AT3 diceinfo ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4
{
  "result": "success",
  "fundingtxid": "ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4",
  "name": "SIU1",
  "sbits": 827672915,
  "minbet": "1.00000000",
  "maxbet": "100000.00000000",
  "maxodds": 15,
  "timeoutblocks": 2,
  "funding": "1118149.99880000"
}
```


[14-Aug-18 09:13 AM] siu#3920
i think i got everything back!


[14-Aug-18 09:14 AM] siu#3920
and im getting the utxos of the first dice plan too


[14-Aug-18 09:16 AM] jl777c#5810
it prints utxos from all plans for debug, but should only count and use the ones from the right plan, otherwise it is a bug


[14-Aug-18 09:16 AM] jl777c#5810
but is sounds like things are working much better


[14-Aug-18 09:16 AM] siu#3920
i did a call for the other diceplan too


[14-Aug-18 09:16 AM] siu#3920
it was two separate commands


[14-Aug-18 09:19 AM] siu#3920
this is a breakthrough


[14-Aug-18 09:19 AM] siu#3920
if this is fixed, dice is pretty much complete imo


[14-Aug-18 09:20 AM] jl777c#5810
is it fixed? what is broken?


[14-Aug-18 09:20 AM] Alright#0419
((lock_amount`*`APR%)/365)*days locked would be the formula for rewards, yes?


[14-Aug-18 09:20 AM] jl777c#5810
something like that


[14-Aug-18 09:20 AM] jl777c#5810
could have some overflows


[14-Aug-18 09:21 AM] jl777c#5810
though I thought I calculated the interest 64 bit safe


[14-Aug-18 09:21 AM] Alright#0419
and is 1 day 1440 blocks or based on timestamp


[14-Aug-18 09:23 AM] jl777c#5810
i use timestamp of the block the tx is in to the current chaintip's nTime


[14-Aug-18 09:26 AM] Alright#0419
minseconds 0 maxseconds 172800
duration 239658 (1534263604 - 1534023946) numblocks 3750 (3800 - 50)
amount 10.00000000 20000000000.00000000 634 -> duration.172800 reward 0.01095890

239658 seconds = 2.77423611 days
20% APR, 10 coins, locked for 3750 blocks

((10`*`0.2)/365)*2.77423611
=0.015201294


[14-Aug-18 09:27 AM] Alright#0419
```
{
  "result": "success",
  "fundingtxid": "088a9d869faaea88858a8e2e22015955111916c83d7f78bd9fe807649a1e9f81",
  "name": "0time",
  "sbits": 435627324464,
  "APR": "20.00000000",
  "minseconds": 0,
  "maxseconds": 172800,
  "mindeposit": "1.00000000",
  "funding": "10000.00000000"
}
```


[14-Aug-18 09:27 AM] Alright#0419
```
./komodo-cli -ac_name=AT3 rewardsunlock 0time 088a9d869faaea88858a8e2e22015955111916c83d7f78bd9fe807649a1e9f81{
  "result": "success",
  "hex": "0100000002007fd48e818fe235df22961247adb97cb1eed74c31eb704e31c981233842340d000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140fe5018001358bb24b385c14c1030f8cf501c6b6d20df0ce4705605b5aae073ca204f7a06824845b91ea7e828e434fb5a2899cb8dc6fba0008887eea93bd551ffa100af038001e5a10001fffffffffa2623354792f01c5b551e6a82ad39ba2d460d1d8fab2726dea42f619e21be12000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981407c4edd95b803b2f124c83c7d544654df544acb1cdc9e120a973ef94502f4d0ce2784c235cba0e7c5fdfebb2a8ead50ab8168863c4259744149ebcaa23466317ea100af038001e5a10001ffffffff035a7072d4e8000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401ccd282ab3b0000000023210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac00000000000000002c6a2ae5553074696d65000000819f1e9a6407e89fbd787f3dc8161911555901222e8e8a8588eaaa9f869d8a0800000000"
}
```


[14-Aug-18 09:34 AM] jl777c#5810
so it is close, but the dureation seems to be reduced


[14-Aug-18 09:35 AM] Alright#0419
Also, can the vout0 of rewardsunlock be spent from the mempool?


[14-Aug-18 09:35 AM] jl777c#5810
oh,it just went above maxseconds


[14-Aug-18 09:35 AM] jl777c#5810
it is correct, it got clipped due to maxseconds


[14-Aug-18 09:36 AM] Alright#0419
ahh sorry


[14-Aug-18 09:36 AM] Alright#0419
If the CC change of a rewardsunlock tx can't be spent from mempool, someone could lock tons of small amounts in a plan then spam  rewardsunlock similar to what people are doing to the faucet on STAKED1


[14-Aug-18 09:36 AM] jl777c#5810
there was an anectdotal report of wrong reward for very large amount locked


[14-Aug-18 09:37 AM] Alright#0419
stop people from claiming rewards


[14-Aug-18 09:37 AM] siu#3920
i locked 100000


[14-Aug-18 09:37 AM] jl777c#5810
i didnt put any restructions on mempool spending


[14-Aug-18 09:37 AM] siu#3920
one day at 20% APR


[14-Aug-18 09:37 AM] siu#3920
only got 100000.011 back


[14-Aug-18 09:37 AM] jl777c#5810
without the printout,
minseconds 0 maxseconds 172800
duration 239658 (1534263604 - 1534023946) numblocks 3750 (3800 - 50)
amount 10.00000000 20000000000.00000000 634 -> duration.172800 reward 0.01095890


[14-Aug-18 09:38 AM] jl777c#5810
I canomnly guess what it calculated


[14-Aug-18 09:38 AM] jl777c#5810
I put the printouts there to help debug


[14-Aug-18 09:38 AM] siu#3920
i didnt get that :/


[14-Aug-18 09:38 AM] Alright#0419
getting 
```
fundsflag.1 (L) 10.00000000 10.00000000
cant find enough rewards inputs
amount 10.00000000 -> reward 0.01095890
```
when I try to claim more than a couple rewardsunlock in a single block


[14-Aug-18 09:38 AM] jl777c#5810
without all the data, we dont have all the data


[14-Aug-18 09:38 AM] Alright#0419
seems I can only do 2-3 in each block


[14-Aug-18 09:38 AM] siu#3920
i locked another one, will let you know when its unlocked


[14-Aug-18 09:39 AM] jl777c#5810
i guess it isnt looking in the mempool for utxo


[14-Aug-18 09:39 AM] jl777c#5810
I will have to specifially add that


[14-Aug-18 09:41 AM] siu#3920
```3aade9fcb14c2cdac22c2c4f255719811ec6744a79fd6f94595630f2aee7ac18 winnings 16000.00000000 bet 1000.00000000 at odds 15:1
3aade9fcb14c2cdac22c2c4f255719811ec6744a79fd6f94595630f2aee7ac18 winnings 16000.00000000 bet 1000.00000000 at odds 15:1
3aade9fcb14c2cdac22c2c4f255719811ec6744a79fd6f94595630f2aee7ac18 winnings 16000.00000000 bet 1000.00000000 at odds 15:1
01000000031062ec90b1bcbe3478b827cb1422623f8a3a68da9f967c0cb329dd4d7dd394e901000000494830450221009cb02be87828aa27349954eb313fb5b09f5334c82fc65457e120566498798d6a02201a8ce7da897be98a689b454b7309fea9353dec280e1e47790bc343a913ad42fe01ffffffff18ace7aef2305659946ffd794a74c61e811957254f2c2cc2da2c4cb1fce9ad3a000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81409eb8266a1e06991f92cdc253ff78947ac13264b5500e5c543cb0348e6e9061d419b4e64523268987ac5f69769e7be55dd8775ba11a0bdfd318a2e924d4d6ddf0a100af038001e6a10001ffffffff18ace7aef2305659946ffd794a74c61e811957254f2c2cc2da2c4cb1fce9ad3a010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81407b94e6bad05df63d11beebaac9f7488e3619b8bb0f161c7dc36d5fed3e1e37585f26ede919d94b848a76a7d3883500d1a3e6b11237dcd0835625b9a07f0ee70ba100af038001e6a10001ffffffff04e0b97a0fbb070000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00806e877401000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000006d6a4c6ae6575349553100000000d4074e546a5585f354201980e38597a1382741b863af8df76993a1d4472fdccc0f5c7333954121d8e55246d5c3e449b15a87a833929ac7017bcff851db924aa3e1490b5afc8275c1ea66d40832a763f0afd8df146a2febbb4f3f7dc16022c19100000000
0dc699fb8be106b486513b63719371f6b0dd549834c64e3141ef56474c4af550
```


[14-Aug-18 09:41 AM] siu#3920
i got this printout in dice


[14-Aug-18 09:41 AM] siu#3920
``` ./komodo-cli -ac_name=AT3 dicestatus SIU1 ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4 3aade9fcb14c2cdac22c2c4f255719811ec6744a79fd6f94595630f2aee7ac18
{
  "result": "success",
  "status": "loss"
}
```


[14-Aug-18 09:41 AM] siu#3920
but dice status says i lost üò¶


[14-Aug-18 09:42 AM] jl777c#5810
attention to detail will help you


[14-Aug-18 09:43 AM] jl777c#5810
0dc699fb8be106b486513b63719371f6b0dd549834c64e3141ef56474c4af550 <- winning txid


[14-Aug-18 09:43 AM] jl777c#5810
3aade9fcb14c2cdac22c2c4f255719811ec6744a79fd6f94595630f2aee7ac18 <- dicestatus


[14-Aug-18 09:43 AM] jl777c#5810
not sure why a losing 3aade9fcb14c2cdac22c2c4f255719811ec6744a79fd6f94595630f2aee7ac18 should match  result of 0dc699fb8be106b486513b63719371f6b0dd549834c64e3141ef56474c4af550


[14-Aug-18 09:43 AM] jl777c#5810
this is what I deduce from what you posted


[14-Aug-18 09:44 AM] siu#3920
both show loss


[14-Aug-18 09:44 AM] siu#3920
but the output says winning 16000


[14-Aug-18 09:46 AM] siu#3920
i did get the 16000 though


[14-Aug-18 09:46 AM] jl777c#5810
?


[14-Aug-18 09:47 AM] jl777c#5810
do you understand that when you ask dicestatus for a different txid, it returns in fo on a different txid


[14-Aug-18 09:47 AM] jl777c#5810
what if you do a dicestatus on the winning txid? does it say losing?


[14-Aug-18 09:48 AM] jl777c#5810
oh it was the dicefinish txid?


[14-Aug-18 09:48 AM] jl777c#5810
dicestatus was run on which node?


[14-Aug-18 09:51 AM] SHossain#0007
6 bets, all lost...will keep betting


[14-Aug-18 09:59 AM] SHossain#0007
one win after 9 lost
`b67f76011c37c3c611031301cca97bd4e208e06eafb811884c1500a3a6d64221 winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 10:02 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 dicestatus Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f b67f76011c37c3c611031301cca97bd4e208e06eafb811884c1500a3a6d64221
{
  "result": "success",
  "status": "loss"
}
```


[14-Aug-18 10:02 AM] SHossain#0007
dicestatus with winning tx on dealer node.


[14-Aug-18 10:06 AM] SHossain#0007
another win
`6e050826a11ebf4917b7d8bcaed7b29e2e75372f4ba9f3dc675e81fcfbed87ec winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 10:10 AM] SHossain#0007
```
before winning 20 on bet:
"balance": 151265941.53900542
"funding": 111381.99980000
numentropy tx 13: 111381.99980000

after winning 20
"balance": 151265951.53890542
"funding": "111371.99970000"
numentropy tx 13: 111371.99970000
```
numbers matches up


[14-Aug-18 10:15 AM] SHossain#0007
another win
`c468422ac8007803588a20da47b20d1c1286e6340201646317d8a08cc3fe50a4 winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 10:17 AM] SHossain#0007
house funding is now 10 less


[14-Aug-18 10:17 AM] SHossain#0007
`"funding": "111361.99960000"`


[14-Aug-18 10:18 AM] SHossain#0007
another win
`cefdb3fd7b7f702d698975282d634f6523734f98c1e9709146fc3e0c3407ef2c winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 10:19 AM] SHossain#0007
antoher win
`efaf2ae2d18927fa728986179114e8785884fe850040fefd7df89f1d7bdc4354 winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 10:21 AM] SHossain#0007
another win
`b63429627bdc101ea499b78a056f60fce097397ddd967ce5856daba8b1fb2364 winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 10:22 AM] SHossain#0007
another win
`b3361bc0e58d3b6c66e4d725f292a3ca638bfee9dd6d85374b96b09b8491ac13 winnings 20.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 10:22 AM] SHossain#0007
let's see how many more i win with same bet üòÑ


[14-Aug-18 10:23 AM] SHossain#0007
luck ran out. a lost bet
`62b09c27ee5915937a97235b18f2c22a755689b1d3bfcffc1eae4b626cc88ad6 winnings 0.00000000 bet 10.00000000 at odds 1:1`


[14-Aug-18 10:25 AM] SHossain#0007
so far, i see winning and lost bets are debited or credited automatically without calling dicestatus or dicefinish


[14-Aug-18 10:30 AM] dan.#2473
side note, martingale theory would be fun to test with dice


[14-Aug-18 10:31 AM] dan.#2473
tl;dr: if you lose, double your bet, if you lose, double your bet, if you win, go back to original 1x bet and repeat


[14-Aug-18 10:32 AM] dan.#2473
gaurentee bankruptcy but its fun to have at least 20x of original bets on hand


[14-Aug-18 10:33 AM] SHossain#0007
ok. testing this


[14-Aug-18 10:33 AM] siu#3920
@jl777c i checked dicestatus for both txids, both show `status:loss`


[14-Aug-18 10:34 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT3 dicestatus SIU1 ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4 0dc699fb8be106b486513b63719371f6b0dd549834c64e3141ef56474c4af550
{
  "result": "success",
  "status": "loss"
}
```


[14-Aug-18 10:34 AM] dan.#2473
i made a simulator for martingale betting, sometimes you got filthy rich, but with time, always go bankrupt


[14-Aug-18 10:34 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT3 dicestatus SIU1 ccdc2f47d4a19369f78daf63b8412738a19785e380192054f385556a544e07d4 3aade9fcb14c2cdac22c2c4f255719811ec6744a79fd6f94595630f2aee7ac18
{
  "result": "success",
  "status": "loss"
}
```


[14-Aug-18 10:42 AM] SHossain#0007
did 10, 20, 40, 80, 160...lost


[14-Aug-18 10:43 AM] dan.#2473
üòÇ  its fun.. as long as you have enough to cover yourself until you win


[14-Aug-18 10:43 AM] SHossain#0007
but 320 is winner
`3ea7451a32ccbe80e4d46edd83348604b51b5e1fe0af09c7392563c0cb6dd550 winnings 640.00000000 bet 320.00000000 at odds 1:1`


[14-Aug-18 10:43 AM] SHossain#0007
going back to 160 now


[14-Aug-18 10:44 AM] SHossain#0007
another winner
`80906511b935b21619d94b19cedc5ba373a050f1ed9b947ee7cf958adb943dfd winnings 320.00000000 bet 160.00000000 at odds 1:1`


[14-Aug-18 10:44 AM] dan.#2473
with martingale after you win you should go back to 10- its a slow process but doing that way keeps you a float, until youre not


[14-Aug-18 10:44 AM] SHossain#0007
interesting


[14-Aug-18 10:44 AM] dan.#2473
the chance of losing x in a row is `.5*.5*.5*.5` etc


[14-Aug-18 10:45 AM] dan.#2473
so .25 chance of losing 2x in a row, .125 of 3x in a row, etc


[14-Aug-18 10:45 AM] dan.#2473
(at 50/50 odds)


[14-Aug-18 10:46 AM] dan.#2473
the problem with martingale, losing 20x in a row will happen eventually


[14-Aug-18 10:46 AM] dan.#2473
albeit might takes ages


[14-Aug-18 10:46 AM] dan.#2473
and then you broked


[14-Aug-18 10:47 AM] Alright#0419
@jl777c a rewards plan with minimum time as 0 doesn't work properly. I had a separate plan that I just claimed after a couple days that had 0 minimum and was able to claim it. Just created a new one, and tried to claim it a couple minutes later and it fails.


[14-Aug-18 10:47 AM] Alright#0419

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/478982992346349579/0timefail


[14-Aug-18 10:48 AM] SHossain#0007
@jl777c here is an observation https://gist.github.com/himu007/34c127cf89acdaefead96b379eb37935

{Embed}
https://gist.github.com/himu007/34c127cf89acdaefead96b379eb37935
gist:34c127cf89acdaefead96b379eb37935
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[14-Aug-18 10:52 AM] dan.#2473
yes, it could work with a bit of luck and perseverance.


[14-Aug-18 10:52 AM] dan.#2473
in my simulator i always liked to have at LEAST X^10 the original bet on hand


[14-Aug-18 10:52 AM] dan.#2473
i could last a long time with that


[14-Aug-18 10:52 AM] dan.#2473
as .5^10 is pretty low


[14-Aug-18 10:53 AM] dan.#2473
`0.0009765625` = .5^10


[14-Aug-18 10:53 AM] dan.#2473
but, it always happens üòõ


[14-Aug-18 10:54 AM] dan.#2473
what do you mean as a self-assurance fund? money set aside?

{Reactions}
üíØ 

[14-Aug-18 10:54 AM] dan.#2473
gotcha


[14-Aug-18 10:54 AM] jl777c#5810
@SHossain could it be the tx confirmed so it got an error as it was already onchain


[14-Aug-18 10:54 AM] SHossain#0007
yes. i was thinking the same. just wanted to confirm


[14-Aug-18 10:55 AM] jl777c#5810
it would be good to have a proven neutral betting algo to test that dice odds are working properly


[14-Aug-18 10:55 AM] jl777c#5810
these dicestatus that show loss when it waas a win is either a display error or a win/loss evaluation error


[14-Aug-18 10:56 AM] jl777c#5810
@Alright mintime of 0 is maybe only working if you are lucky. but does the interest calc properly with large numbrs?


[14-Aug-18 10:57 AM] SHossain#0007
lost 2160 on last bet. after the last 2 winnings, i was losing


[14-Aug-18 10:58 AM] jl777c#5810
so the current bugs are a possible problem with large rewards, and winning dicebet displayed as loss. any others?


[14-Aug-18 11:00 AM] SHossain#0007
i didn't notice any other yet


[14-Aug-18 11:01 AM] Alright#0419
@jl777c it worked after being locked for 2.5 days


[14-Aug-18 11:01 AM] Alright#0419
not sure when it would have started working properly


[14-Aug-18 11:01 AM] Alright#0419
Will test large `rewardslock`


[14-Aug-18 11:01 AM] Alright#0419
The being able to spend rewardsunlock CC change from mempool if you consider that a bug


[14-Aug-18 11:02 AM] jl777c#5810
that is enhancement, but yes on my list


[14-Aug-18 11:04 AM] SHossain#0007
lost 8640. could it make difference if i have more of larger utxos?


[14-Aug-18 11:04 AM] Alright#0419
and the faucet maxing out CPU cores?


[14-Aug-18 11:04 AM] Alright#0419
not sure that's considered a bug either


[14-Aug-18 11:05 AM] Alright#0419
@SHossain could you sync STAKED1 on your server from the future and try to abuse the faucet


[14-Aug-18 11:06 AM] SHossain#0007
i actually didn't try yet. was testing here all day


[14-Aug-18 11:06 AM] jl777c#5810
when you say lost, you mean dicebet lost, or the funds went missing?


[14-Aug-18 11:07 AM] SHossain#0007
sorry, my bad. lost bet


[14-Aug-18 11:07 AM] jl777c#5810
does faucetget maxout cores for everyone? it shouldnt


[14-Aug-18 11:07 AM] SHossain#0007
funds didn't go missing


[14-Aug-18 11:07 AM] jl777c#5810
it is instant for me, the faucetget


[14-Aug-18 11:07 AM] Alright#0419
on STAKED1?


[14-Aug-18 11:07 AM] Alright#0419
It's instant on AT3 for some reason


[14-Aug-18 11:08 AM] jl777c#5810
AT3


[14-Aug-18 11:08 AM] Alright#0419
hangs on STAKED1


[14-Aug-18 11:08 AM] jl777c#5810
ok I will try


[14-Aug-18 11:08 AM] Alright#0419
not sure if it's everyone, but 4-5 people have reported that same thing


[14-Aug-18 11:09 AM] Deleted User#0000
I think it's after its done thousands of txs


[14-Aug-18 11:09 AM] Deleted User#0000
It was fine at the start


[14-Aug-18 11:09 AM] jl777c#5810
yes, faucetget is slow and inefficient when lots of uxo


[14-Aug-18 11:09 AM] jl777c#5810
utxo


[14-Aug-18 11:09 AM] jl777c#5810
i think that is ol


[14-Aug-18 11:09 AM] jl777c#5810
ok


[14-Aug-18 11:09 AM] jl777c#5810
i need a new cat, keeps messing the kepoard

{Reactions}
üòπ (2) 

[14-Aug-18 11:09 AM] Deleted User#0000
Lol


[14-Aug-18 11:11 AM] SHossain#0007
got myself one of this and fingers are in less pain
https://www.scan.co.uk/products/corsair-gaming-k95-rgb-platinum-rapidfire-mechanical-keyboard-backlit-rgb-led-cherry-mx-speed

{Embed}
https://www.scan.co.uk/products/corsair-gaming-k95-rgb-platinum-rapidfire-mechanical-keyboard-backlit-rgb-led-cherry-mx-speed
Corsair K95 RGB Platinum Cherry MX Speed Mechanical Gaming Keyboard
https://images-ext-2.discordapp.net/external/bUsDB6mw1SOoWP8cwV25HriRmhpUMIsGvaiADDHjIR4/https/www.scan.co.uk/images/products/2812111-a.jpg

{Reactions}
üÜí 

[14-Aug-18 11:13 AM] SHossain#0007
won 20,000 with a bet of 10,000
`9aff27dbf4185b488f68f27fbf0f4831590abf7f8d3c894f84ed794a0fa89d77 winnings 20000.00000000 bet 10000.00000000 at odds 1:1`


[14-Aug-18 11:13 AM] SHossain#0007
didn't have to add any large utxo in the dice plan


[14-Aug-18 11:15 AM] jl777c#5810
but the diceplan had sufficient funding? also you won 10,000 as half of that is just your money coming back


[14-Aug-18 11:19 AM] SHossain#0007
yes, dice has sufficient funding


[14-Aug-18 11:19 AM] SHossain#0007
won another one
`4876fabf92ac0fe466f07924fcadcffe553dc425c99c1725b930b363f4c83289 winnings 20000.00000000 bet 10000.00000000 at odds 1:1`


[14-Aug-18 11:22 AM] SHossain#0007
my diceplan now has `"funding": "108551.99880000"`


[14-Aug-18 11:22 AM] jl777c#5810
if this was on KMD...


[14-Aug-18 11:23 AM] jl777c#5810
can you check the dicestatus for allthe tx. I have a feeling a recent change just broke dicestatus for winners


[14-Aug-18 11:23 AM] jl777c#5810
one other testpoint is to take the dice plan creator node offline and do a dicebet


[14-Aug-18 11:23 AM] jl777c#5810
this wont automatically finish as the only node that can do it is offline


[14-Aug-18 11:24 AM] jl777c#5810
but after the timeout blocks you should be able to dicefinish and collect it as if it iwas a dice win


[14-Aug-18 11:24 AM] jl777c#5810
plz make 100% sure about all the totals being correct


[14-Aug-18 11:27 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 dicestatus Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f 4876fabf92ac0fe466f07924fcadcffe553dc425c99c1725b930b363f4c83289
{
  "result": "success",
  "status": "loss"
}
```


[14-Aug-18 11:27 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 dicestatus Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f 9aff27dbf4185b488f68f27fbf0f4831590abf7f8d3c894f84ed794a0fa89d77
{
  "result": "success",
  "status": "loss"
}
```


[14-Aug-18 11:29 AM] jl777c#5810
it seems  I just broke dicestatus...


[14-Aug-18 11:29 AM] jl777c#5810
too tired today to fix, lots of little issues to fix for tomorrow, but I hope to get close to a release candidate


[14-Aug-18 11:34 AM] SHossain#0007
took the dice creator node offline


[14-Aug-18 11:34 AM] SHossain#0007
started using a new pubkey


[14-Aug-18 11:34 AM] SHossain#0007
did a bet


[14-Aug-18 11:34 AM] SHossain#0007
bettxid `9d371f8e7df6ecdd6abafdd15684e390d9efa6217efe0694a4e0bca53b583a46`


[14-Aug-18 11:35 AM] SHossain#0007
this was the bet `./komodo-cli -ac_name=AT3 dicebet Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f 1000 1`


[14-Aug-18 11:36 AM] SHossain#0007
aftrer 1 more block i'll try the `dicestatus` and `dicefinish`


[14-Aug-18 11:37 AM] SHossain#0007
tried once and it showed
```
./komodo-cli -ac_name=AT3 dicestatus Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f 9d371f8e7df6ecdd6abafdd15684e390d9efa6217efe0694a4e0bca53b583a46
duration 87 (1534271668 - 1534271581) numblocks 1 (4020 - 4019)
{
  "result": "success",
  "status": "invalid bet txid"
}
```


[14-Aug-18 11:37 AM] SHossain#0007
```
duration 247 (1534271828 - 1534271581) numblocks 3 (4022 - 4019)
0100000003463a583ba5bce0a49406fe7e21a6efd990e38456d1fdba6addecf67d8e1f379d0200000048473044022071df97d70faf52807b31a199c0113c69df805aebab7f8a3ae1d2b8409551baa202202c206d80ce1630b77c1c0b280138fecb2a017584bc73058825cd95237a51e8a901ffffffff463a583ba5bce0a49406fe7e21a6efd990e38456d1fdba6addecf67d8e1f379d000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81407fdfb69ef82cf5c6c22773dca6de42cf2df6665f2f114da21c48e3b55fc1fbaf5812fbf65ad7b969f70459c55ee464a9ba5a051faf818ebd7da9454d8c79fdc2a100af038001e6a10001ffffffff463a583ba5bce0a49406fe7e21a6efd990e38456d1fdba6addecf67d8e1f379d010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81403146ace8a52f2ae1055e47588989527f329012fafa214dbbe65fda486045121d096ce96bfb4c9d95a9df5f05b5f04ddb01a64381146ba9b8d7442897f45b0b91a100af038001e6a10001ffffffff04f090fb0501090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00d0ed902e00000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae65444696365330000008f7dd394e12c425e7cf7cf2e4ff77a29ab2afb95a52747bf02727dc0747c93480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d91488525f85888eb9248cb95e0ac50fb59a1bd5387895d51b78d07ac508bc23
duration 247 (1534271828 - 1534271581) numblocks 3 (4022 - 4019)
duration 247 (1534271828 - 1534271581) numblocks 3 (4022 - 4019)
duration 247 (1534271828 - 1534271581) numblocks 3 (4022 - 4019)
duration 247 (1534271828 - 1534271581) numblocks 3 (4022 - 4019)
added to mempool and broadcast
{
  "result": "success",
  "status": "win",
  "won": 2000
}
```


[14-Aug-18 11:38 AM] SHossain#0007
same call got me win after 2 blocks which is the timeout block


[14-Aug-18 11:39 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 dicefinish Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f 9d371f8e7df6ecdd6abafdd15684e390d9efa6217efe0694a4e0bca53b583a46
bettxid already spent
{
  "error": "couldnt create dicefinish transaction"
}
```
dicefinish couldn't create tx as it was already created by dicestatus


[14-Aug-18 11:40 AM] jl777c#5810
yes, dicestatus calls dicefinish in some cases


[14-Aug-18 11:40 AM] jl777c#5810
basically it worked


[14-Aug-18 11:40 AM] SHossain#0007
yes, it worked


[14-Aug-18 11:40 AM] SHossain#0007
funding address has 1000 less balance and my balance increased by 1000 after the tx was confirmed


[14-Aug-18 11:41 AM] SHossain#0007
but, this time, dicestatus showed winner
```
{
  "result": "success",
  "status": "win",
  "won": 2000
}
```


[14-Aug-18 11:41 AM] siu#3920
@jl777c isn't it a bit too risky for the diceplan creator node to lose too mant funds if the node goes down for some unexpected reason?


[14-Aug-18 11:42 AM] jl777c#5810
then set timeoutblocks to something you are able to meet


[14-Aug-18 11:42 AM] jl777c#5810
it can be set to 1440 blocks


[14-Aug-18 11:43 AM] jl777c#5810
of course if a competitive plan has a 10 block timeout, then most players would use the faster one. but I dont have profit margin built into the dice game. i guess most of the funds are won from drunken betting that any house edge anyway


[14-Aug-18 11:46 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/478997898647044117/Screenshot_from_2018-08-14_19-46-21.png


[14-Aug-18 11:47 AM] SHossain#0007
updated the test plan with explanation.


[14-Aug-18 11:53 AM] siu#3920
Profit margin for dice plan sounds sexy.


[14-Aug-18 11:57 AM] jl777c#5810
what are the typical profit percentages?


[14-Aug-18 11:58 AM] Alright#0419
could you add a `locked_funds` value to `rewardsinfo`?


[14-Aug-18 11:58 AM] jl777c#5810
I can just reduce all wins by some percentage and that will automatically take care of the dealer percentage


[14-Aug-18 11:58 AM] jl777c#5810
could you add a locked_funds value to rewardsinfo? <- yes


[14-Aug-18 11:59 AM] jl777c#5810
get all the requests in as I will make revised CC contracts with new features to get them to produciton usable state


[14-Aug-18 12:05 PM] SHossain#0007
@n2okpride @Audo @Mylo @benohanlon here is the current smart contract test plan that contains all the function that the current codebase can handle. https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=0
if you guys want to suggest any feature that is not listed there in any contract,  now is the time to request.

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[14-Aug-18 12:06 PM] SHossain#0007
@Bitcoin Benny ^^


[14-Aug-18 12:17 PM] SHossain#0007
dicefinish with creator node offline
```
./komodo-cli -ac_name=AT3 dicefinish Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f 44e907a312592349d0c46cec71f8be8de818523266e1d796a47e7892b7a4a8d0
duration 129 (1534274090 - 1534273961) numblocks 2 (4053 - 4051)
{
  "result": "success",
  "hex": "0100000003d0a8a4b792787ea496d7e166325218e88dbef871ec6cc4d049235912a307e9440200000048473044022045e3563d173063038bbc41a55c265ee076f43b1316c1fc3ffef59c1a5c3310d402206db0a69a04c6781b2395d82129a1c8c8203bba3407c5678b0ca8fe6532d73c9d01ffffffffd0a8a4b792787ea496d7e166325218e88dbef871ec6cc4d049235912a307e944000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140ba20e52659bc8650729683bfefae7d3e38546e91e45686a77ed60c3d65237f872f0b90798dfea522fbd086c21cb5e3d046733430f1e4693afc1906ce91f746e3a100af038001e6a10001ffffffffd0a8a4b792787ea496d7e166325218e88dbef871ec6cc4d049235912a307e944010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814075e4913bd8ff9ca06fe388782c1d23139aafedf1cce0e86a47def3ef3a23dfb9413c27ce0a85ea69e2a23915e328a6320e3469a7d3c55819e4440813149c9eaca100af038001e6a10001ffffffff04f008d53b0a5a0000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00204aa9d101000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae65444696365330000008f7dd394e12c425e7cf7cf2e4ff77a29ab2afb95a52747bf02727dc0747c93480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[14-Aug-18 12:17 PM] SHossain#0007
sendrawtransaction output:
```
duration 252 (1534274213 - 1534273961) numblocks 4 (4055 - 4051)
duration 252 (1534274213 - 1534273961) numblocks 4 (4055 - 4051)
duration 252 (1534274213 - 1534273961) numblocks 4 (4055 - 4051)
duration 252 (1534274213 - 1534273961) numblocks 4 (4055 - 4051)
679993f8027f2ee50a75dea40cfeee8967aa24664aae04ad4cfa47b55f75aacc
```


[14-Aug-18 12:19 PM] SHossain#0007
100% win üòÉ


[14-Aug-18 12:19 PM] SHossain#0007
after the tx confirmed, balances were added


[14-Aug-18 12:21 PM] SHossain#0007
dice creator node online and testing from local node using different pubkey


[14-Aug-18 12:21 PM] SHossain#0007
2 bets lost
```
90ca53f7b6e3cb01819f8d057474b37091f1b1cb15d4875c3ee7f887306bccaa winnings 0.00000000 bet 1000.00000000 at odds 1:1
87ff6444fa8ef80f73c001acfcfc05e2b9f2bcb8b80e30e6c488b8b89c692334 winnings 0.00000000 bet 1000.00000000 at odds 1:1
```


[14-Aug-18 12:23 PM] SHossain#0007
after the 3rd one lost in a row, 4th one win


[14-Aug-18 12:24 PM] SHossain#0007
14ef98e2eafa3a6769d944ed9ce1122f628b5fd2217940764f752586fa3baacf7 winnings 2000.00000000 bet 1000.00000000 at odds 1:11


[14-Aug-18 12:30 PM] SHossain#0007
anyone available to test beting from multiple nodes? i'll have the dice creator node monitoring and place bets from another node. if we have more nodes betting at the same time we could see how the dealer node behaves.


[14-Aug-18 12:48 PM] SHossain#0007
we did multiple bets at the same time and all entropy tx finished
```numentropy tx 0: 989999.99990000
cant find dice entropy inputs```


[14-Aug-18 12:50 PM] SHossain#0007
after all txs confirmed, we have `numentropy tx 3`


[14-Aug-18 12:51 PM] SHossain#0007
as long as the dealer node has utxo, it will allow multiple bets at the same block


[14-Aug-18 12:56 PM] allbits#5898
I think the sexiest proof of concept for dice and ponzi would be no house fee at all. Chain transaction fees only


[14-Aug-18 12:57 PM] jl777c#5810
that is what we have now


[14-Aug-18 12:58 PM] allbits#5898
Yes


[14-Aug-18 01:38 PM] siu#3920
https://satoshidice.com/


[14-Aug-18 01:40 PM] siu#3920
i dont see if satoshi dice takes a profit margin from every tx.


[14-Aug-18 01:45 PM] siu#3920
https://bitcoinplay.net/bitcoin-dice/

{Embed}
https://bitcoinplay.net/bitcoin-dice/
10 Best Bitcoin Dice Sites USA 2018 - Experts' Reviewed - Bitcoinp...
Expert Reviews Of 10 Best Bitcoin Dice Sites USA | Site of the month --> Fortunejack - 100% welcome bonus and free spins.


[14-Aug-18 01:45 PM] siu#3920
from this site i see many services have a 1% house edge


[14-Aug-18 02:12 PM] jl777c#5810
it could also skew the odds in house favor to collect the 1%


[14-Aug-18 03:38 PM] allbits#5898
The point of no house edge is to draw attention to the uniqueness of what has been developed here. Of course, blockchain enforced, no house edge, has been deployed on ethereum, but it's been effectively useless for gas cost reasons.


[14-Aug-18 05:53 PM] siu#3920
True


[14-Aug-18 05:55 PM] siu#3920
But what is the incentive for the fund creator?


[14-Aug-18 05:56 PM] siu#3920
Afterall its someones money that is being used. There should be some incentive for that person or group


[14-Aug-18 05:57 PM] siu#3920
Just my guess though.


[14-Aug-18 06:00 PM] allbits#5898
Same incentive as the player, no? Because they're a degenerate gambler lol


[14-Aug-18 06:00 PM] Alright#0419
I think I've locked enough coins in this plan to empty it's funding tomorrow 
```
{
  "result": "success",
  "fundingtxid": "b2ad75209ba8016ee0a9ca183cbce1a1984e29addc72433fe869c98b4699fe48",
  "name": "overdraf",
  "sbits": 7377303440351131247,
  "APR": "20.00000000",
  "minseconds": 86400,
  "maxseconds": 172800,
  "mindeposit": "1.00000000",
  "funding": "1000.00000000"
}
```
I try locking more and I get 
```
funcid.76 L skipped 100.00000000
funcid.76 L skipped 10.00000000
funcid.76 L skipped 10.00000000
funcid.76 L skipped 1000.00000000
funcid.76 L skipped 10.00000000
funcid.76 L skipped 10.00000000
cant find enough inputs 1000.00000000 note enough for 100.00000000
cant find rewards inputs
```
in the stdout


[14-Aug-18 06:00 PM] Alright#0419
but then if I wait a couple blocks, I can lock more coins


[14-Aug-18 06:12 PM] Alright#0419
Hmmm, maybe I didn't lock enough after all


[14-Aug-18 06:17 PM] Alright#0419
locked 917800 coins, so if I wait 2 days on each, the rewards will be more than the funding. What happens when i start claiming it all?


[14-Aug-18 06:22 PM] Alright#0419
Ah I think it was only failing because the raw tx was trying to use up all the 0.0001 UTXOs in the wallet


[14-Aug-18 07:37 PM] siu#3920
Lol @allbits  üòÇ


[14-Aug-18 11:06 PM] Mylo#8306
OK @SHossain thanks.  i've got my rpc-lib to a state where i can use it for gui dev so will be working in tandem with gui/rpc dev with this new contract stuff as well as the pos64test stuff happening in chips.   also have some marketing content stuff to do as priority when they need me because it's to feed the agency with first batch of jobs


[15-Aug-18 12:13 AM] jl777c#5810
the chain creator would offer noedge dice to promote their chain. they could make it a -ac_commission based chain so get a percentage of all tx volumes. or just premine more and allocate it to rewards/faucet/dice


[15-Aug-18 12:14 AM] jl777c#5810
note that via faucet -> dice -> rewards anybody that is lucky can bootstrap into whalehood


[15-Aug-18 12:14 AM] jl777c#5810
without any manual effort reqired other than running a node and a cron task with dicestatus


[15-Aug-18 01:35 AM] allbits#5898
Nice


[15-Aug-18 02:32 AM] SHossain#0007
lost first bet of the day


[15-Aug-18 02:36 AM] siu#3920
üò≠ üò≠ üò≠


[15-Aug-18 02:36 AM] siu#3920
Surely a bug :trollface:


[15-Aug-18 02:44 AM] SHossain#0007
2nd one win

{Reactions}
üéâ 

[15-Aug-18 02:44 AM] jl777c#5810
I am making breaking changes to the CC validation, so dont update yet. I want to get all the consensu changes in the next round of updating


[15-Aug-18 02:44 AM] SHossain#0007
ok.


[15-Aug-18 02:45 AM] jl777c#5810
keep finding bugs with existing


[15-Aug-18 02:46 AM] jl777c#5810
consideering the number of bugs in the simpler contracts, i think assets must have more bugs


[15-Aug-18 02:47 AM] siu#3920
yesterday i did many other bets and no matter if it won or loss, the dicestatus always printed `lost`


[15-Aug-18 02:47 AM] siu#3920
ill test assets today


[15-Aug-18 02:48 AM] SHossain#0007
ok. let's attack on assests today üòõ


[15-Aug-18 02:48 AM] siu#3920
cool


[15-Aug-18 02:48 AM] SHossain#0007
creating a new one


[15-Aug-18 02:48 AM] siu#3920
btw, i started using insomnia for testing


[15-Aug-18 02:55 AM] SHossain#0007
that's great! i should start using as well.


[15-Aug-18 02:56 AM] siu#3920

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479226825353199616/unknown.png


[15-Aug-18 02:56 AM] SHossain#0007
do you mind exporting the settings and upload here please?


[15-Aug-18 02:56 AM] siu#3920
feels a bit better


[15-Aug-18 02:56 AM] SHossain#0007
yes, it should.


[15-Aug-18 02:56 AM] SHossain#0007
makes testing easier


[15-Aug-18 02:56 AM] siu#3920
although i dont know if i can add a `broadcast` parameter to broadcast the hex withouth doing the whole `sendrawtransaction` thing


[15-Aug-18 02:58 AM] siu#3920
```siu@T460:~/komodo/src$ ./komodo-cli -ac_name=AT3 tokencreate CCTEST 100000000 "CC Testing Token"
{
  "error": "couldnt create transaction"
}```


[15-Aug-18 02:58 AM] siu#3920
am i doing anything wrong here?


[15-Aug-18 02:58 AM] SHossain#0007
the amount perhaps?


[15-Aug-18 02:59 AM] siu#3920
yes, was the ammount


[15-Aug-18 02:59 AM] siu#3920
reduced to 1,000,000 and it worked


[15-Aug-18 03:00 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 tokeninfo 05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d{
  "result": "success",
  "tokenid": "05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d",
  "owner": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc",
  "name": "TT1",
  "supply": "10000.00000000",
  "description": "Test Token 1 on AT3 Chain"
}
```


[15-Aug-18 03:00 AM] siu#3920
```{
    "result": {
        "result": "success",
        "tokenid": "9e38df0a17bf154c7cf35073e38be41858e71781bc56e74c18da88812349f4ae",
        "owner": "0225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6",
        "name": "CCTEST",
        "supply": "1000000.00000000",
        "description": "CC testing token"
    },
    "error": null,
    "id": null
}```


[15-Aug-18 03:00 AM] siu#3920
did one too :p


[15-Aug-18 03:00 AM] grewalsatinder#9653
@SHossain the command to sync the test chain for cc is up to date on wiki ?


[15-Aug-18 03:00 AM] SHossain#0007
nope


[15-Aug-18 03:00 AM] grewalsatinder#9653
can you please keep it updated üôÇ


[15-Aug-18 03:00 AM] SHossain#0007
./komodod -ac_cc=1 -ac_name=AT3 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6 -addnode=195.201.20.230 -addnode=195.201.137.5 -addnode=195.201.20.230 -addnode=94.130.224.11


[15-Aug-18 03:01 AM] siu#3920
hard to keep up sometimes


[15-Aug-18 03:01 AM] SHossain#0007
we had multiple chain update since


[15-Aug-18 03:01 AM] grewalsatinder#9653
heh üòÑ


[15-Aug-18 03:01 AM] grewalsatinder#9653
okay


[15-Aug-18 03:01 AM] grewalsatinder#9653
thanks for this command. now I hope it will sync


[15-Aug-18 03:01 AM] siu#3920
this one will get broken in a couple of minutes when james says to update


[15-Aug-18 03:02 AM] SHossain#0007
@grewalsatinder updated the wiki


[15-Aug-18 03:02 AM] grewalsatinder#9653
hmm.... what you suggest to do with testing tokens contract?


[15-Aug-18 03:02 AM] grewalsatinder#9653
use existing or make own?


[15-Aug-18 03:02 AM] siu#3920
{
    "result": [
        "259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf",
        "05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d",
        "9e38df0a17bf154c7cf35073e38be41858e71781bc56e74c18da88812349f4ae"
    ],
    "error": null,
    "id": null
}


[15-Aug-18 03:02 AM] siu#3920
we created a couple right now


[15-Aug-18 03:02 AM] SHossain#0007
i have 1, that i'll distribute to you, siu and anyone else want


[15-Aug-18 03:02 AM] siu#3920
but you can always create your own


[15-Aug-18 03:03 AM] grewalsatinder#9653
@SHossain thanks for updating üëç


[15-Aug-18 03:03 AM] SHossain#0007
we can keep testing that. test to break


[15-Aug-18 03:03 AM] siu#3920
post your pubkey so i can send you some


[15-Aug-18 03:03 AM] grewalsatinder#9653
in a moment....


[15-Aug-18 03:03 AM] SHossain#0007
@siu please upload the insomnia export json file


[15-Aug-18 03:04 AM] SHossain#0007
(if you don't mind)


[15-Aug-18 03:04 AM] siu#3920
sure


[15-Aug-18 03:05 AM] siu#3920
give me a second that i was just about to create the json for tokentransfer


[15-Aug-18 03:07 AM] siu#3920
you need to change auth to basic and add your rpcuser and rpcpasword there


[15-Aug-18 03:08 AM] SHossain#0007
thanks very much


[15-Aug-18 03:09 AM] Kuusha17#8302
Hiho, quick question. Airdrop snapshot is in two hours?


[15-Aug-18 03:09 AM] SHossain#0007
what airdrop?


[15-Aug-18 03:10 AM] Kuusha17#8302
Chainzilla


[15-Aug-18 03:10 AM] SHossain#0007
please ask in #chainzilla . this is a testing channel


[15-Aug-18 03:10 AM] Kuusha17#8302
Oh, ok sry, Just joined discord group


[15-Aug-18 03:14 AM] grewalsatinder#9653
here's my AT3 new address:

RHKDckrv35Fpbzs7gQ7o7yHacLYuPKarDW


[15-Aug-18 03:14 AM] grewalsatinder#9653
pubkey: 03488c733bd9b8fcef7076aadd5501089516d59f4cba4771370efb14faa31dcad3


[15-Aug-18 03:20 AM] SHossain#0007
sent 100,000 tokens to your address @siu @grewalsatinder


[15-Aug-18 03:21 AM] SHossain#0007
you need only pubkey to transfer token


[15-Aug-18 03:22 AM] grewalsatinder#9653
oh cool! üòÉ


[15-Aug-18 03:22 AM] grewalsatinder#9653
thanks


[15-Aug-18 03:23 AM] grewalsatinder#9653
where do I need to check this?
is that AT3 funds or something else?

```satinder@ubuntu:~/komodo/src$ ./komodo-cli -ac_name=AT3 getwalletinfo
{
  "walletversion": 60000,
  "balance": 0.00000000,
  "unconfirmed_balance": 0.00000000,
  "immature_balance": 0.00000000,
  "txcount": 0,
  "keypoololdest": 1534327948,
  "keypoolsize": 101,
  "paytxfee": 0.00000000
}
```


[15-Aug-18 03:24 AM] SHossain#0007
this will show you yoru AT3 balance. i sent you 1,000,000 AT3 - 2cfbfb3092c8dbb1932a0567222b6a1c0150309b1a765ad43acb9c40503e3042


[15-Aug-18 03:25 AM] SHossain#0007
use `tokenbalance tokenid [pubkey]` for token balance


[15-Aug-18 03:25 AM] SHossain#0007
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=506594567

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[15-Aug-18 03:26 AM] SHossain#0007
this ^^ spreadsheet has the examples


[15-Aug-18 03:27 AM] grewalsatinder#9653
perfect bookmared this link too. 
thanks üëç


[15-Aug-18 03:30 AM] grewalsatinder#9653
tokenid is `2cfbfb3092c8dbb1932a0567222b6a1c0150309b1a765ad43acb9c40503e3042` ?


[15-Aug-18 03:30 AM] grewalsatinder#9653
```satinder@ubuntu:~/komodo/src$ ./komodo-cli -ac_name=AT3 tokenaddress 03488c733bd9b8fcef7076aadd5501089516d59f4cba4771370efb14faa31dcad3
{
  "result": "success",
  "AssetsCCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "Assetsmarker": "RFYE2yL3KknWdHK6uNhvWacYsCUtwzjY3u",
  "CCaddress": "RWhQ9ttzCv9PnY3TZkrNgarFSz25LR5V8p",
  "myCCaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
  "myaddress": "RRFHykmhREKvJi6gRdccNbKt7572QaDgjZ"
}
satinder@ubuntu:~/komodo/src$ ./komodo-cli -ac_name=AT3 tokenbalance 03488c733bd9b8fcef7076aadd5501089516d59f4cba4771370efb14faa31dcad3
{
  "result": "success",
  "CCaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
  "tokenid": "03488c733bd9b8fcef7076aadd5501089516d59f4cba4771370efb14faa31dcad3",
  "balance": 0
}
satinder@ubuntu:~/komodo/src$ ./komodo-cli -ac_name=AT3 help | less
satinder@ubuntu:~/komodo/src$ ./komodo-cli -ac_name=AT3 tokenbalance 2cfbfb3092c8dbb1932a0567222b6a1c0150309b1a765ad43acb9c40503e3042 03488c733bd9b8fcef7076aadd5501089516d59f4cba4771370efb14faa31dcad3
{
  "result": "success",
  "CCaddress": "RWhQ9ttzCv9PnY3TZkrNgarFSz25LR5V8p",
  "tokenid": "2cfbfb3092c8dbb1932a0567222b6a1c0150309b1a765ad43acb9c40503e3042",
  "balance": 0
}
```


[15-Aug-18 03:31 AM] grewalsatinder#9653
@SHossain what is tokenid value ?


[15-Aug-18 03:32 AM] SHossain#0007
`05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d`


[15-Aug-18 03:32 AM] SHossain#0007
`tokenlist` call will show you all listed tokens
```
./komodo-cli -ac_name=AT3 tokenlist
[
  "259f242234cc0d5ce5156b4173e1b5a5d7dbeefe664864ea118623c71c5ebcbf",
  "05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d",
  "9e38df0a17bf154c7cf35073e38be41858e71781bc56e74c18da88812349f4ae"
]
```


[15-Aug-18 03:32 AM] grewalsatinder#9653
```satinder@ubuntu:~/komodo/src$ ./komodo-cli -ac_name=AT3 tokenbalance 05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d 03488c733bd9b8fcef7076aadd5501089516d59f4cba4771370efb14faa31dcad3
{
  "result": "success",
  "CCaddress": "RWhQ9ttzCv9PnY3TZkrNgarFSz25LR5V8p",
  "tokenid": "05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d",
  "balance": 100000
}
```
üòé cool! I'm rich!


[15-Aug-18 03:33 AM] grewalsatinder#9653
oh super... gocha


[15-Aug-18 03:33 AM] SHossain#0007
then use `tokeninfo` call with `tokenid` to know more about the token


[15-Aug-18 03:35 AM] grewalsatinder#9653
balance showing in tokenbalance is in satoshies ?


[15-Aug-18 03:35 AM] SHossain#0007
```
./komodo-cli -ac_name=AT3 tokeninfo 05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d
{
  "result": "success",
  "tokenid": "05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d",
  "owner": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc",
  "name": "TT1",
  "supply": "10000.00000000",
  "description": "Test Token 1 on AT3 Chain"
}
```


[15-Aug-18 03:35 AM] grewalsatinder#9653
and balance showing in tokeninfo is in what?


[15-Aug-18 03:36 AM] SHossain#0007
tokeninfo supply is tied up with coins rather than satoshi. token balance on the other hand is is actual tokens which were based on satoshi


[15-Aug-18 03:37 AM] SHossain#0007
if you use 1 AT3 coin to create your token, you will get 100000000 tokens


[15-Aug-18 03:38 AM] grewalsatinder#9653
so if I need to show all total TT1 token supply then it would be 10,000 * 100,000,000 = 1000,000,000,000.00000000 ?


[15-Aug-18 03:40 AM] SHossain#0007
yes. by theory


[15-Aug-18 03:40 AM] SHossain#0007
@jl777c please correct me if i'm wrong


[15-Aug-18 03:40 AM] SHossain#0007
@grewalsatinder check @siu 's token
```
./komodo-cli -ac_name=AT3 tokeninfo 9e38df0a17bf154c7cf35073e38be41858e71781bc56e74c18da88812349f4ae
{
  "result": "success",
  "tokenid": "9e38df0a17bf154c7cf35073e38be41858e71781bc56e74c18da88812349f4ae",
  "owner": "0225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6",
  "name": "CCTEST",
  "supply": "1000000.00000000",
  "description": "CC testing token"
}
```


[15-Aug-18 03:42 AM] SHossain#0007
@grewalsatinder this is the token balance of the main contract address 
```
./komodo-cli -ac_name=AT3 tokenbalance 05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d
{
  "result": "success",
  "CCaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
  "tokenid": "05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d",
  "balance": 999999800000
}
```
i sent 200,000 tokens to you and siu in total. now, check the balance


[15-Aug-18 03:43 AM] grewalsatinder#9653
so it means we are burning the AT3 funds to make these tokens ?


[15-Aug-18 03:43 AM] SHossain#0007
yes


[15-Aug-18 03:43 AM] grewalsatinder#9653
okay


[15-Aug-18 03:44 AM] siu#3920
@grewalsatinder sent you some tokens cc6f9b528d6aa0f9d473a3a41925c742f519a5011fd869708b94266b12b631ad


[15-Aug-18 03:44 AM] grewalsatinder#9653
your google excel sheet is exactly what I need. thanks for that. will help me with example JSON to play with. will keep asking questions here as I got more.


[15-Aug-18 03:45 AM] siu#3920
im on the morning rutine taking my daughters to school and stuff


[15-Aug-18 03:45 AM] siu#3920
be back in a couple of hours.

{Reactions}
üëçüèΩ (2) 

[15-Aug-18 03:45 AM] grewalsatinder#9653
thanks siu


[15-Aug-18 03:47 AM] grewalsatinder#9653
is that txid siu posted?


[15-Aug-18 03:48 AM] grewalsatinder#9653
cc6f9b528d6aa0f9d473a3a41925c742f519a5011fd869708b94266b12b631ad
not a txid....


[15-Aug-18 03:48 AM] grewalsatinder#9653
not my pubkey, not a tokenlist output string


[15-Aug-18 03:48 AM] grewalsatinder#9653
what is it?


[15-Aug-18 03:49 AM] grewalsatinder#9653
@SHossain


[15-Aug-18 03:49 AM] SHossain#0007
it is a txid


[15-Aug-18 03:49 AM] siu#3920
yes that the txid


[15-Aug-18 03:49 AM] grewalsatinder#9653
```$ ./komodo-cli -ac_name=AT3 gettransaction "cc6f9b528d6aa0f9d473a3a41925c742f519a5011fd869708b94266b12b631ad"
error code: -5
error message:
Invalid or non-wallet transaction id
```


[15-Aug-18 03:50 AM] siu#3920
http://cctest.explorer.dexstats.info/tx/cc6f9b528d6aa0f9d473a3a41925c742f519a5011fd869708b94266b12b631ad


[15-Aug-18 03:51 AM] grewalsatinder#9653
yes, just did listunspent and found it there... üòÖ


[15-Aug-18 03:51 AM] grewalsatinder#9653
üëç


[15-Aug-18 03:51 AM] siu#3920
{
    "result": {
        "result": "success",
        "CCaddress": "RWhQ9ttzCv9PnY3TZkrNgarFSz25LR5V8p",
        "tokenid": "9e38df0a17bf154c7cf35073e38be41858e71781bc56e74c18da88812349f4ae",
        "balance": 100000
    },
    "error": null,
    "id": null
}


[15-Aug-18 03:51 AM] siu#3920
üòõ


[15-Aug-18 03:51 AM] siu#3920
ok


[15-Aug-18 03:53 AM] SHossain#0007
https://github.com/himu007/KMD-CC-Token-Test-Guide/tree/master/rpc/token

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide/tree/master/rpc/token
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[15-Aug-18 03:53 AM] SHossain#0007
1 AT3 coin will make 100 Million tokens


[15-Aug-18 03:55 AM] SHossain#0007
if you lock more AT3 coins, you get n times 100 Million


[15-Aug-18 03:55 AM] siu#3920
yeah, and tokencreate amount is in the underlying asset


[15-Aug-18 04:10 AM] jl777c#5810
the coins arent burned, they are converted into assets. I will change the tokeninfo return to be in satoshis

{Reactions}
üëçüèΩ (2) 

[15-Aug-18 04:10 AM] grewalsatinder#9653
clear üëç


[15-Aug-18 04:11 AM] grewalsatinder#9653
what is the size of description field ?


[15-Aug-18 04:11 AM] grewalsatinder#9653
max size*


[15-Aug-18 04:12 AM] jl777c#5810
whatever fits in opreturn


[15-Aug-18 04:12 AM] grewalsatinder#9653
I guess that is about 4kb ?


[15-Aug-18 04:12 AM] grewalsatinder#9653
not sure where I remember this from.... that's why just a guess...


[15-Aug-18 04:13 AM] grewalsatinder#9653
will test by filling up the description with big example test


[15-Aug-18 04:14 AM] jl777c#5810
I set it to 4096


[15-Aug-18 04:14 AM] grewalsatinder#9653
ok üëç


[15-Aug-18 04:18 AM] jl777c#5810
pushed a larget set of changes to jl777, breaks backward compatibility, but when debugged should get us close to production level features for all the CC contracts


[15-Aug-18 04:18 AM] SHossain#0007
updating


[15-Aug-18 04:19 AM] jl777c#5810
not yet


[15-Aug-18 04:19 AM] jl777c#5810
it doesnt even compile, I just coded it. next need to get it to compile


[15-Aug-18 04:19 AM] jl777c#5810
then you can test. needs a new chain


[15-Aug-18 04:19 AM] jl777c#5810
here are the changes:
Assets:
change tokeninfo to return "supply" in satoshis
Max description length to 4096

Rewards:
Fix  rewardsunlock without giving it a locked txid always gives error
Fix (nonconsensus) allow anybody to unlock only AFTER maxtime
Fix rewards unlock to use mempool
fix could you add a locked_funds value to rewardsinfo?
Fix i deposited 100000 at 20% apr for one day i only got back
100000.01140669 seems like too little for 20% APR

Faucet:
Fix txid with 0x00 at beginning and end required for faucetget txid
(65536 average iterations needed)
Change reduce faucet get to 0.1 coins
Can‚Äôt reproduce: it seems that if you re-run faucetget twice in the
same block is when it pegs the cpu to max

Dice:
fix Dice status always returning loss
Wont fix Profit margin for dice plan sounds good. -> use -ac_commission


[15-Aug-18 04:22 AM] grewalsatinder#9653
yep, got error compiling. will wait for go signal to compile.


[15-Aug-18 04:23 AM] grewalsatinder#9653
just confirming. 4096 bytes ?


[15-Aug-18 04:28 AM] jl777c#5810
Max description length to 4096
builds now


[15-Aug-18 04:29 AM] SHossain#0007
updating


[15-Aug-18 04:31 AM] grewalsatinder#9653
compiled üëç


[15-Aug-18 04:33 AM] grewalsatinder#9653
thanks for help today guys. will be back tomorrow. g'night üôÇ

{Reactions}
üëçüèΩ üí§ 

[15-Aug-18 04:41 AM] SHossain#0007
new token supply in satoshis working
```
{
    "result": {
        "result": "success",
        "tokenid": "05d8c7f56f4875d7ebc24bd4b46f2a85df4a47285bd68c43eae07537eaa0aa0d",
        "owner": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc",
        "name": "TT1",
        "supply": 1000000000000,
        "description": "Test Token 1 on AT3 Chain"
    },
```


[15-Aug-18 04:46 AM] jl777c#5810
I cant find a winning dicebet with the actual dicestatus rpc call that returns error. also need the dicefinish txid for the dice winner to debug the dicestate. i have spent 30 minutes trying to find a bug report with all the details, but cant find it


[15-Aug-18 04:51 AM] SHossain#0007
ok. i'll play with dice and post the reports here


[15-Aug-18 04:56 AM] SHossain#0007
2 bets lost
```
09f547043d759e8e9a483aff957a435ef27151ff62b9a0e2109e73141ba84e63 winnings 0.00000000 bet 1000.00000000 at odds 4:1
60365bc874156398111460904dc4a7291f7897ac7154d170b5e14b52f33e3b8e winnings 0.00000000 bet 1000.00000000 at odds 1:1
```


[15-Aug-18 04:58 AM] jl777c#5810
i need a win with the dicefinish txid and the dicestatus call


[15-Aug-18 04:59 AM] SHossain#0007
sure. just to confirm i tested dicestatus call for the last lost txid on both dealer and player node and got the following
```
{
  "result": "success",
  "status": "loss"
}
```


[15-Aug-18 04:59 AM] SHossain#0007
this looks accurate


[15-Aug-18 05:00 AM] SHossain#0007
won bet 1000 odds 1
```
0100000002c7bee4f346b9e6add7a61d30733ba52317ce42eef1d0cb72f50d27a7113178f7000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140a246e59ed3b98ca32366a4c13282dd897c631adcd55705cab11927cab7803d8574e990a4dc5700f55ba93c4823c2b990c8fff929ba3e8ce4a7b823ced970512ea100af038001e6a10001ffffffff8e3b3ef3524be1b570d15471ac97781f29a7c44d9060141198631574c85b3660030000004847304402201e94f8b225c653aefa02bf552194fe5b02df34f4388d2ed551e7bc73d38cbdc80220476378c4566cae8e843f71faa32f9b831093f032690242f56cb5bac0c2dbea0401ffffffff05e085209deb040000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e8764817000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc112700000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac7496b343ba00000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae64244696365330000008f7dd394e12c425e7cf7cf2e4ff77a29ab2afb95a52747bf02727dc0747c934848b6570cb934bf29266630074d1327400c9d034a325d2be5494dfcfa08d91916000000000000000000000000000000000000000000000000000000000000000000000000"
```


[15-Aug-18 05:01 AM] SHossain#0007
`a4f8191c29357d0562b7beb1d132c5e57fbe1444e9e1ee039600eaddf63a02e0 winnings 2000.00000000 bet 1000.00000000 at odds 1:1`


[15-Aug-18 05:02 AM] SHossain#0007
dicestatus  shows loss on both nodes
```
./komodo-cli -ac_name=AT3 dicestatus Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f a4f8191c29357d0562b7beb1d132c5e57fbe1444e9e1ee039600eaddf63a02e0
{
  "result": "success",
  "status": "loss"
}
```


[15-Aug-18 05:04 AM] SHossain#0007
dicefinish with the txid
```
/komodo-cli -ac_name=AT3 dicefinish Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f a4f8191c29357d0562b7beb1d132c5e57fbe1444e9e1ee039600eaddf63a02e0
a4f8191c29357d0562b7beb1d132c5e57fbe1444e9e1ee039600eaddf63a02e0 winnings 2000.00000000 bet 1000.00000000 at odds 1:1
{
  "result": "success",
  "hex": "010000000350d25c17c49ddb49d7aa0b40c4e5824d2d6da3a3841f5bf9b2b615c45d3b09680200000048473044022010460c7ce0f3fdaabb830dba6498f368dc3d9086bf5acca3b83f4fcf85c967fd022041fb3a2ba3086c30aabec8870ffa7dc936320360097560c6bb23b1d747e5605e01ffffffffe0023af6ddea009603eee1e94414be7fe5c532d1b1beb762057d35291c19f8a4000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140022e3aabf7f63b412f8c3e5a299fe4878db77ca41e02f19082b1af276035ae2430ca129fad39a8bce33a0bfb28dacbc4e55f9086dbb3b49b65bbe9404a380478a100af038001e6a10001ffffffffe0023af6ddea009603eee1e94414be7fe5c532d1b1beb762057d35291c19f8a4010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140a14cb99c05f0c695cf3bc759f8b38619bb79a0b309460da5621fa563583dbd0e7896a08e125946ac0225efd9d2d64c419774865d1469fed1680e53cdea743481a100af038001e6a10001ffffffff04d076a954d4040000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00d0ed902e00000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae65744696365330000008f7dd394e12c425e7cf7cf2e4ff77a29ab2afb95a52747bf02727dc0747c934855088e3cacbe45797eb04041082fcf35082d57ac1a83dbdc4e7791abb226c8149adddb54cdec797ceaf3658704133a543537970fdaa0ba349772cec101cc74b200000000"
}
```


[15-Aug-18 05:04 AM] SHossain#0007
sendrawtransaction output shows
```
error code: -26
error message:
18: bad-txns-inputs-spent
```


[15-Aug-18 05:12 AM] jl777c#5810
if the dealer node autoresponded then you cant finish it again need the txid of the autocompleted dicefinish


[15-Aug-18 05:18 AM] SHossain#0007
ok. betting for another win using player node and will ask you step once i have win


[15-Aug-18 05:36 AM] jl777c#5810
i verified latest version faucetget takes about 30 seconds (will be random) to get a valid txid

{Reactions}
üëç 

[15-Aug-18 05:37 AM] Deleted User#0000
not valid for STAKED1 though right?


[15-Aug-18 05:37 AM] Deleted User#0000
will fork?


[15-Aug-18 05:42 AM] jl777c#5810
will fork, jl777 branch, not dev


[15-Aug-18 05:42 AM] jl777c#5810
pushed fix for dicestatus


[15-Aug-18 05:45 AM] SHossain#0007
dealer node offline. did a bet. waited for timeout block. used 
```
./komodo-cli -ac_name=AT3 dicefinish Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f ba9001005638c45a59a09a25704722987a6135cabc1c8291c61c7337eb3cce1e
```


[15-Aug-18 05:45 AM] SHossain#0007
output:
```
duration 244 (1534337059 - 1534336815) numblocks 19 (4988 - 4969)
{
  "result": "success",
  "hex": "01000000031ece3ceb37731cc691821cbcca35617a98224770259aa0595ac43856000190ba02000000494830450221008c786869b0e2cf51ba84c33a98c03cd22a85a9f41b601a0e5225713aa6c988c602207600682a6b2bb7507fde259b859c45681702f890420eb9f103af68235426330801ffffffff1ece3ceb37731cc691821cbcca35617a98224770259aa0595ac43856000190ba000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e814060a27fe9390cc1e4b471588c94c3ab03203e3153a44823cfd16bc131258e48225299a3b9f54fa0e9c9ee00d492936cda58e31b2fb1b7ce3d85a007b92bf61fcba100af038001e6a10001ffffffff1ece3ceb37731cc691821cbcca35617a98224770259aa0595ac43856000190ba010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81403b8945bac7329efa3358020747f844d272796d33512c874f72a24d97e1cda042598f1306d8c904fc7b79ad771e27cbf936a5dd4beec3c48ff9b43670eacbedd4a100af038001e6a10001ffffffff04b040320cbd040000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac00d0ed902e00000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae65444696365330000008f7dd394e12c425e7cf7cf2e4ff77a29ab2afb95a52747bf02727dc0747c93480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[15-Aug-18 05:46 AM] SHossain#0007
tx output:
```
796cc72a4a03611ba811724a90a2392d674ef88f0b532bd2a1098099ee42b34f
```


[15-Aug-18 05:47 AM] SHossain#0007
console also showed
```
duration 299 (1534337114 - 1534336815) numblocks 23 (4992 - 4969)
duration 299 (1534337114 - 1534336815) numblocks 23 (4992 - 4969)
duration 299 (1534337114 - 1534336815) numblocks 23 (4992 - 4969)
duration 299 (1534337114 - 1534336815) numblocks 23 (4992 - 4969)
CCduration no hashBlock for txid 796cc72a4a03611ba811724a90a2392d674ef88f0b532bd2a1098099ee42b34f
duration 299 (1534337114 - 1534336815) numblocks 23 (4992 - 4969)
duration 299 (1534337114 - 1534336815) numblocks 23 (4992 - 4969)
```


[15-Aug-18 05:47 AM] jl777c#5810
needs to be moned


[15-Aug-18 05:47 AM] jl777c#5810
mined


[15-Aug-18 05:49 AM] jl777c#5810
verified new rewards calc is sane and should be more resistant to overflow issues


[15-Aug-18 05:50 AM] jl777c#5810
of course if you lock some crazy big number of coins, then it will overflow and not sure what would happen


[15-Aug-18 05:51 AM] jl777c#5810
capped max reward to a doubling. of course if there is some bug, even limited to doubling of locked amount will drain all funds very rapidly


[15-Aug-18 05:52 AM] SHossain#0007
using the dicefinish txid it shows
```
./komodo-cli -ac_name=AT3 dicestatus Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f 796cc72a4a03611ba811724a90a2392d674ef88f0b532bd2a1098099ee42b34f
duration 215 (1534337396 - 1534337181) numblocks 2 (4995 - 4993)
illegal odds.-1863472912 vs maxodds.777
{
  "result": "success",
  "status": "bet still pending"
}
```
using the bettxid 
```
./komodo-cli -ac_name=AT3 dicestatus Dice3 48937c74c07d7202bf4727a595fb2aab297af74f2ecff77c5e422ce194d37d8f ba9001005638c45a59a09a25704722987a6135cabc1c8291c61c7337eb3cce1e
{
  "result": "success",
  "status": "loss"
}
```


[15-Aug-18 05:52 AM] SHossain#0007
new block height 4997


[15-Aug-18 05:53 AM] SHossain#0007
mempool cleared


[15-Aug-18 05:53 AM] jl777c#5810
verified rewardsunlock without locktxid at least finds something to unlock and using that mode only locked funds past maxtime should be able to be unlocked


[15-Aug-18 05:53 AM] jl777c#5810
dicestatus is only for the bet txid, not the finish txid


[15-Aug-18 05:54 AM] jl777c#5810
all these things likely needs to be documented?


[15-Aug-18 05:55 AM] jl777c#5810
from what I can tell all my fixes seem to be working, so unless bugs reported, I dont think  there will be an update


[15-Aug-18 05:55 AM] jl777c#5810
a hard one to test will be rewardsunlock that uses funds from the mempool


[15-Aug-18 05:55 AM] jl777c#5810
i didnt test that


[15-Aug-18 05:56 AM] SHossain#0007
@Alright maybe you can test that one ^^


[15-Aug-18 05:57 AM] jl777c#5810
faucet now returns 0.1 coins and requires about 30 seconds of CPU time


[15-Aug-18 05:57 AM] SHossain#0007
documenting that


[15-Aug-18 05:57 AM] jl777c#5810
I havent broadcast tested any of the tx to prevent forking of AT3


[15-Aug-18 05:58 AM] jl777c#5810
but at somepoint it seems we will need an AT4


[15-Aug-18 06:06 AM] SHossain#0007
AT4 Chain is up
```
./komodod -ac_cc=1 -ac_name=AT4 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<your_pubkey> -addnode=195.201.20.230 -addnode=195.201.137.5 -addnode=94.130.224.11 &
```


[15-Aug-18 06:06 AM] SHossain#0007
Pinned a message.


[15-Aug-18 06:17 AM] jl777c#5810
how long does faucetget take? it prints start and end timestamps


[15-Aug-18 06:18 AM] SHossain#0007
added some fudns to the faucet of this chain


[15-Aug-18 06:18 AM] SHossain#0007
will test now


[15-Aug-18 06:21 AM] SHossain#0007
```start at 1534339248
found valid txid after 22551 iterations 1534339253```


[15-Aug-18 06:22 AM] SHossain#0007
5 seconds?


[15-Aug-18 06:24 AM] SHossain#0007
next one about 40 sec
```
start at 1534339419
found valid txid after 194417 iterations 1534339463
```


[15-Aug-18 06:27 AM] jl777c#5810
yes, that's good


[15-Aug-18 06:28 AM] SHossain#0007
i'm also trying to get the commands coverted to insomnia.


[15-Aug-18 06:30 AM] SHossain#0007
24.2 seconds latest faucetget command


[15-Aug-18 06:31 AM] jl777c#5810
what is important is the time per 65536 iterations


[15-Aug-18 06:31 AM] jl777c#5810
on your system it is about 15 seconds


[15-Aug-18 06:31 AM] Deleted User#0000
will sync AT4 on a slow system and test in a second


[15-Aug-18 06:32 AM] SHossain#0007
yes. let me test on a slow system as well


[15-Aug-18 06:33 AM] jl777c#5810
it could take a few minutes ona slow system. this will make people reconsider putting it in blocknotify, especially as each faucetget will be a race against all the others


[15-Aug-18 06:35 AM] SHossain#0007
78 seconds in a slow system


[15-Aug-18 06:35 AM] SHossain#0007
```
start at 1534339968
found valid txid after 89883 iterations 1534340046
```


[15-Aug-18 06:36 AM] Deleted User#0000
putting it in locknotify was definatly an exploit. What do you class as slow system?


[15-Aug-18 06:36 AM] Deleted User#0000
lol


[15-Aug-18 06:37 AM] siu#3920
@SHossain im working on insomnia commands too... if you want i can set everything up and then pass it forward


[15-Aug-18 06:38 AM] siu#3920
whats up?


[15-Aug-18 06:38 AM] SHossain#0007
@Deleted User  it is a VPS with 4 cores and 16GB RAM and some SSD. mining with all threads
@siu it would be lovely


[15-Aug-18 06:38 AM] SHossain#0007
though i have the faucet integrated in there


[15-Aug-18 06:38 AM] siu#3920
do i update chain?


[15-Aug-18 06:38 AM] siu#3920
or are we still working on AT3?


[15-Aug-18 06:38 AM] SHossain#0007
AT4


[15-Aug-18 06:39 AM] SHossain#0007
@siu next time please remove your user and pass from the json file before sharing... üòÉ


[15-Aug-18 06:41 AM] siu#3920
yeah... sorry. didnt realize it got exported too until i uploaded it


[15-Aug-18 06:41 AM] siu#3920
deleted the file


[15-Aug-18 06:45 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479284581170806784/Screenshot_from_2018-08-15_14-45-31.png


[15-Aug-18 06:46 AM] siu#3920
im working the token commands


[15-Aug-18 06:46 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479284731951841292/Screenshot_from_2018-08-15_14-46-09.png


[15-Aug-18 06:46 AM] SHossain#0007
7.34 seconds this time


[15-Aug-18 06:47 AM] jl777c#5810
pushed another faucet change, this one prevents getting faucetget to an address with prior activity


[15-Aug-18 06:47 AM] jl777c#5810
it is a hardforking change


[15-Aug-18 06:48 AM] SHossain#0007
updating


[15-Aug-18 06:48 AM] Deleted User#0000
ok


[15-Aug-18 06:48 AM] jl777c#5810
with this I think it makes it painful enough to get the 0,1 coins


[15-Aug-18 06:48 AM] Deleted User#0000
13s and 48s 2 timesI tried


[15-Aug-18 06:49 AM] jl777c#5810
I guess if the mining ROI of the faucet is mor than normal mining, people might still try to mine it


[15-Aug-18 06:49 AM] Deleted User#0000
lol


[15-Aug-18 06:49 AM] jl777c#5810
but now you need to restart the daemon for each 0.1


[15-Aug-18 06:49 AM] Deleted User#0000
the main issue was that if you spam faucet it locked the deamon, if its not worth spamming the faucet then that is no issue. Restarting th deamon seems fair I think.


[15-Aug-18 06:50 AM] SHossain#0007
insomnia is also great for history of time it took

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479285660675735552/Screenshot_from_2018-08-15_14-49-19.png

{Reactions}
üëå 

[15-Aug-18 06:50 AM] jl777c#5810
of course someone really determined could make a special faucet miner, but that would just make the faucet not so useful. hopefully we dont run into this issue


[15-Aug-18 06:55 AM] SHossain#0007
anyone need balance of AT4, just use `./komodo-cli -ac_name=AT4 setgenerate true 1` for few minutes and then turn off mining using `./komodo-cli -ac_name=AT4 setgenerate false`


[15-Aug-18 06:55 AM] SHossain#0007
or let me know. i'm mining with 1 node


[15-Aug-18 06:57 AM] SHossain#0007
```
start at 1534341389
found valid txid after 6647 iterations 1534341391
check faucetget txid 00733ab19a385056e2f699dad269875ce8eac97ebc99df1555b094f35b25ec00 00/00
CC Eval EVAL_FAUCET Invalid: faucet is only for unused addresses spending tx 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00
check faucetget txid 00733ab19a385056e2f699dad269875ce8eac97ebc99df1555b094f35b25ec00 00/00
CC Eval EVAL_FAUCET Invalid: faucet is only for unused addresses spending tx 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00
```


[15-Aug-18 06:57 AM] SHossain#0007
```
./komodo-cli -ac_name=AT4 faucetget
start at 1534341452
found valid txid after 6647 iterations 1534341454
{
  "result": "success",
  "hex": "0100000001003a6c6f58410bb37a9a879aaa3b462df76932cda8862bcdcb50cff6df8b9800000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe128140d07fa7c772eff06bf9a72a80a940010fe2b090c800f4b64c36e745b5f654d1e669738169efbb425697fc64ed07e5d73ed307c833b564903a851ac3ddccb71198a100af038001e4a10001ffffffff03e09473d3e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc809698000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000002a6a28e447210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6f719000000000000"
}
```


[15-Aug-18 06:58 AM] SHossain#0007
output of sendrawtransaction 
```
check faucetget txid 00733ab19a385056e2f699dad269875ce8eac97ebc99df1555b094f35b25ec00 00/00
CC Eval EVAL_FAUCET Invalid: faucet is only for unused addresses spending tx 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00
check faucetget txid 00733ab19a385056e2f699dad269875ce8eac97ebc99df1555b094f35b25ec00 00/00
CC Eval EVAL_FAUCET Invalid: faucet is only for unused addresses spending tx 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[15-Aug-18 06:58 AM] SHossain#0007
funded the faucet again to see if there is any difference


[15-Aug-18 07:00 AM] Deleted User#0000
if the faucet has multiple UTXO you *used* to be able to claim against it more than once per block.


[15-Aug-18 07:00 AM] Deleted User#0000
I guess with restart deemon required this wont happen now


[15-Aug-18 07:00 AM] Deleted User#0000
but will test it


[15-Aug-18 07:00 AM] jl777c#5810
yes, but now the faucetget needs to be the first txid to an address


[15-Aug-18 07:01 AM] Deleted User#0000
so you need a new address and -pubkey every time?


[15-Aug-18 07:01 AM] jl777c#5810
requiring a restart of daemon to change -pubkey, yes


[15-Aug-18 07:01 AM] siu#3920
im doing  a generic insomnia template

{Reactions}
üëåüèΩ 

[15-Aug-18 07:01 AM] Deleted User#0000
cool got it


[15-Aug-18 07:01 AM] jl777c#5810
combined with 20 seconds calcs, I think people will just mine normally and not mine the faucet


[15-Aug-18 07:02 AM] jl777c#5810
unless the 0,1 coins become worth a lot


[15-Aug-18 07:02 AM] Deleted User#0000
yes sounds good. STAKED1 was a huge early advantage mining the faucet.


[15-Aug-18 07:05 AM] Deleted User#0000
hmmm got a faucetget in 4s


[15-Aug-18 07:06 AM] jl777c#5810
as usual luck happens


[15-Aug-18 07:06 AM] jl777c#5810
how many iterations


[15-Aug-18 07:06 AM] SHossain#0007
if user need unused address and pubkey and need to restart daemon each time, i guess dispensing more than 0.1 coin would be better...


[15-Aug-18 07:06 AM] SHossain#0007
just a thought


[15-Aug-18 07:06 AM] Deleted User#0000
not sure... I piped the hex directly to sendrawtx


[15-Aug-18 07:06 AM] SHossain#0007
otherwise, there would be too much hassle to get small amount for a normal user


[15-Aug-18 07:06 AM] jl777c#5810
it is the time per 65536 iterations that matters


[15-Aug-18 07:06 AM] Deleted User#0000
second on is taking ages


[15-Aug-18 07:07 AM] jl777c#5810
isnt 0.1 coins enough to do stuff with?


[15-Aug-18 07:07 AM] jl777c#5810
thinking about real coins that will enable CC contracts


[15-Aug-18 07:07 AM] Deleted User#0000
I think 0.1 is fine, it depsnds on chain, this amount could be changed on any chain that wanted to right?


[15-Aug-18 07:07 AM] jl777c#5810
curently there is only one faucet plan, so it is a universal number


[15-Aug-18 07:08 AM] Deleted User#0000
ok


[15-Aug-18 07:08 AM] jl777c#5810
it is 1000 txfees


[15-Aug-18 07:08 AM] jl777c#5810
you can create assets


[15-Aug-18 07:08 AM] Deleted User#0000
1m 52 for second and tx failed as I already used it


[15-Aug-18 07:11 AM] Deleted User#0000
~1300 interations a second here.


[15-Aug-18 07:12 AM] Deleted User#0000
8 year old CPU.


[15-Aug-18 07:14 AM] jl777c#5810
good, that is a good range from old to alien


[15-Aug-18 07:14 AM] Deleted User#0000
max about 50s


[15-Aug-18 07:15 AM] jl777c#5810
with these changes, maybe faucet is ready for production use?


[15-Aug-18 07:15 AM] Deleted User#0000
takes longer than that to restart with new pubkey, you could automate that, but its unlikely to be worth it... staking 0.1 UTXO cant be done anyway


[15-Aug-18 07:40 AM] SHossain#0007
@TonyL when you have some time, please test the faucet contarct on your end using new address and pubkey each time


[15-Aug-18 07:40 AM] SHossain#0007
let me know if you need info


[15-Aug-18 07:40 AM] SHossain#0007
i'm diving into dice


[15-Aug-18 07:42 AM] TonyL#3577
@SHossain Roger that


[15-Aug-18 07:47 AM] SHossain#0007
new dice contract in town
```
    "result": {
        "result": "success",
        "fundingtxid": "b9f942c312aa5877de59935a6ebb1aa69e2a4ba1e50c913dc1b116932c84fe06",
        "name": "Dice1AT4",
        "sbits": 3770710468426164548,
        "minbet": "10.00000000",
        "maxbet": "100000.00000000",
        "maxodds": 777,
        "timeoutblocks": 1,
        "funding": "1000000.00000000"
    },
```


[15-Aug-18 07:47 AM] siu#3920 (pinned)

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479300130009382912/KOMODO-CC_2018-08-15.json


[15-Aug-18 07:47 AM] siu#3920
ok, now i got all the calls ready


[15-Aug-18 07:47 AM] siu#3920
you need to add your rpcuser and password to each request though


[15-Aug-18 07:48 AM] SHossain#0007
thank you very much @siu


[15-Aug-18 07:48 AM] siu#3920
and also change the rpcport for the new chain


[15-Aug-18 07:48 AM] Alright#0419
Will continue to test rewards today. @jl777c Is there some mechanism for preventing too many coins from being locked in a plan?


[15-Aug-18 07:48 AM] Alright#0419
On AT3 I locked enough coins to empty the funding on the plan plus some


[15-Aug-18 07:48 AM] siu#3920
ok, so today we play with faucet or with tokens?


[15-Aug-18 07:49 AM] SHossain#0007
i will put dice creator node offline and get auto win txid to jl777. that is needed


[15-Aug-18 07:49 AM] jl777c#5810
not really. it just checks to see that there is enough coins to pay the rewards for what you are locking, actually just compare to the amount being locked, but there is no check for all the pending locks, when they expired and predicting how much is left when you unlock at some random time between minseconds and maxseconds


[15-Aug-18 07:50 AM] jl777c#5810
if you use a plan that ends up having not enough funds when unlocking... i guess is it locker beware?


[15-Aug-18 07:51 AM] Alright#0419
Will test how rewardsunlock behaves when plan is out of funds


[15-Aug-18 07:51 AM] SHossain#0007
```
./komodo-cli -ac_name=AT4 dicebet Dice1AT4 b9f942c312aa5877de59935a6ebb1aa69e2a4ba1e50c913dc1b116932c84fe06 10 1
```


[15-Aug-18 07:51 AM] SHossain#0007
```
b9f942c312aa5877de59935a6ebb1aa69e2a4ba1e50c913dc1b116932c84fe06.(F 1000000.00000000) 6c22c97c4d3ede91dc4821f4b6b60a00b4b714762198f1f99a4c06237846ff55.(E 20.00000000) check first
d6c9651c080849dabd6ea001c3b1faf92b00ae81a7e3865e38ccd46bc7457feb.(E 10.00000000) 3ae8179ac3cd0ad4b045132b26304b0816487ee768433940c1d3e32c144b0ef2.(E 10.00000000) numentropy tx 3: 1000040.00000000
{
  "result": "success",
  "hex": "010000000255ff467823064c9af9f198217614b7b4000ab6b6f42148dc91de3e4d7cc9226c000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140f6973157e8fe40560c5e36c7e2d6368f8d7eaa4f2810ed34b22b655197ee7b2c65b84155a791c07bef88f07ac11e0df71d318be7f293f71f06ed889c0c909aa0a100af038001e6a10001ffffffffda8e89789e92f9844a7fc054cfe3ed7d8e33d8466bd567b1ecedf6eb6bab897400000000494830450221009070bd6fa3860a95ab2cb0a76fdd75f15138d86c4c9c26a11e374f8b7f8aa05b02202c61a12659240643742ecb87b9ad95a4adae7ed83eaaaf432e68dd8288c8891501ffffffff050094357700000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc112700000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6aca715a40d1700000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae642446963653141543406fe842c9316b1c13d910ce5a14b2a9ea61abb6e5a9359de7758aa12c342f9b9c347f83f824c32bd7a57083c1890d11603754952074a2f2f1248b2cf5a67e072000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[15-Aug-18 07:52 AM] SHossain#0007
output txid
```
e9baf6b66e9aedfabb85ed5349362b6c25a958b3d46f63f30c6a85aa3d1da28d
```


[15-Aug-18 07:52 AM] jl777c#5810
@Alright most important rewards test is the spending a mempool output as if that is not possible, it can be spam attacked to prevent others from unlocking


[15-Aug-18 07:52 AM] SHossain#0007
timeout block is 1. will try dicefinish and then dicestatus


[15-Aug-18 07:52 AM] Alright#0419
Will test that also


[15-Aug-18 07:53 AM] jl777c#5810
the no-locktxid form of rewards unlock should only work with >maxseconds locked txid. this way there can be a cron task that runs (on any node) to payout fully matured locked rewards


[15-Aug-18 07:53 AM] SHossain#0007
@Alright we need more connection to AT4 and the explorer needs updating as well


[15-Aug-18 07:54 AM] Alright#0419
getting nodes up right now


[15-Aug-18 07:54 AM] SHossain#0007
```
./komodo-cli -ac_name=AT4 getblockhash 119
025e45521e880095262a788666bfd3bcdb0d24b523d0a20d39c0ef37a3e25ba8
```


[15-Aug-18 07:54 AM] jl777c#5810
it is still possible to specify a specific locktxid and unlock it by anybody, but that is just the nature of things


[15-Aug-18 07:54 AM] jl777c#5810
if someone is willing to use the txfee to unlock, it seems they can


[15-Aug-18 07:55 AM] CHMEX#0686
ok I can move the explorer to AT4 if 3 is not longer needed


[15-Aug-18 07:55 AM] SHossain#0007
@CHMEX please update to AT4


[15-Aug-18 07:59 AM] SHossain#0007
```
./komodo-cli -ac_name=AT4 dicefinish Dice1AT4 b9f942c312aa5877de59935a6ebb1aa69e2a4ba1e50c913dc1b116932c84fe06 e9baf6b66e9aedfabb85ed5349362b6c25a958b3d46f63f30c6a85aa3d1da28d
duration 162 (1534345120 - 1534344958) numblocks 10 (130 - 120)
{
  "result": "success",
  "hex": "01000000038da21d3daa856a0cf3636fd4b358a9256c2b364953ed85bbfaed9a6eb6f6bae90200000048473044022071c5b64fb980d45952f6f51d37391e4cc80e1c502c6f0e8200acab213a4e5fb4022058c93633e8d822fcf47dc2da73b7517bca205747d91f0b8d6ed601290dcdde4501ffffffff8da21d3daa856a0cf3636fd4b358a9256c2b364953ed85bbfaed9a6eb6f6bae9000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81402334270e087aa856586a802f1ee2833be1f1a80bf9c9a3656e4fb0a40daf298671ff93bee01bffd599db2463fc6ae667a084a341b4e60ee174293f24a717a136a100af038001e6a10001ffffffff8da21d3daa856a0cf3636fd4b358a9256c2b364953ed85bbfaed9a6eb6f6bae9010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140f0ce95698dfa1e743a8de0313d3734c589be760f830ff8990591dc169c746bf96704408af6c35c5b445934d31198e19127d01b06a7a87d48b12d1d02cccfbfefa100af038001e6a10001ffffffff04f0a29a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1027000000000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcac009435770000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae654446963653141543406fe842c9316b1c13d910ce5a14b2a9ea61abb6e5a9359de7758aa12c342f9b90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[15-Aug-18 07:59 AM] SHossain#0007
output
```
duration 162 (1534345120 - 1534344958) numblocks 10 (130 - 120)
duration 162 (1534345120 - 1534344958) numblocks 10 (130 - 120)
duration 162 (1534345120 - 1534344958) numblocks 10 (130 - 120)
duration 162 (1534345120 - 1534344958) numblocks 10 (130 - 120)
5fb06068488ec95665145054b4e089769c4e2ec69836e1f7ec46201e4a3cdde5
```


[15-Aug-18 08:00 AM] SHossain#0007
```
./komodo-cli -ac_name=AT4 dicestatus Dice1AT4 b9f942c312aa5877de59935a6ebb1aa69e2a4ba1e50c913dc1b116932c84fe06 e9baf6b66e9aedfabb85ed5349362b6c25a958b3d46f63f30c6a85aa3d1da28d
{
  "result": "success",
  "status": "win",
  "won": 20
}
```


[15-Aug-18 08:00 AM] siu#3920
yey


[15-Aug-18 08:01 AM] SHossain#0007
now bringing back the creator node online and will bet


[15-Aug-18 08:06 AM] CHMEX#0686
syncing from dev or jl777?


[15-Aug-18 08:06 AM] SHossain#0007
jl777


[15-Aug-18 08:06 AM] CHMEX#0686
hmm ok not getting past "blocks": 38,
  "longestchain": 134,


[15-Aug-18 08:07 AM] SHossain#0007
134 is good


[15-Aug-18 08:07 AM] SHossain#0007
```
./komodo-cli -ac_name=AT4 getblockhash 134
010b8ca4b5b47979a23fa522ad6dd6acc55060aa32c3e7e9edeb250ecd0e4e61
```


[15-Aug-18 08:08 AM] CHMEX#0686
meaning it only synced up to 38 and than stopps


[15-Aug-18 08:08 AM] Alright#0419
yea it's rejecting blocks


[15-Aug-18 08:10 AM] Alright#0419
scratch that, I didn't `git pull` properly


[15-Aug-18 08:11 AM] CHMEX#0686
I got the same but let me retry


[15-Aug-18 08:12 AM] SHossain#0007
WIN `0cf4faa0108771d386c29b8eebdacdd2d7e8b2809523f6d6cba86c59ac7e7ae2 winnings 2000.00000000 bet 1000.00000000 at odds 1:1`


[15-Aug-18 08:15 AM] Alright#0419
Yea you need to restart AT4


[15-Aug-18 08:15 AM] CHMEX#0686
looks to be this chain is not working anymore with latest jl777 does not sync


[15-Aug-18 08:15 AM] CHMEX#0686
yyep


[15-Aug-18 08:15 AM] Alright#0419
^


[15-Aug-18 08:15 AM] Alright#0419
what's in block 38


[15-Aug-18 08:15 AM] CHMEX#0686
i think it's in 39


[15-Aug-18 08:16 AM] CHMEX#0686
I got 38


[15-Aug-18 08:16 AM] Alright#0419
```
2018-08-15 15:15:05 ERROR: CScriptCheck(): 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-15 15:15:05 ERROR: CScriptCheck(): 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-15 15:15:05 ERROR: AcceptToMemoryPool: ConnectInputs failed 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00
2018-08-15 15:15:05 ERROR: CScriptCheck(): 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-15 15:15:05 ERROR: CScriptCheck(): 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-15 15:15:05 ERROR: AcceptToMemoryPool: ConnectInputs failed 00988bdff6cf50cbcd2b86a8cd3269f72d463baa9a879a7ab30b41586f6c3a00
```


[15-Aug-18 08:16 AM] siu#3920
did i break AT4?


[15-Aug-18 08:16 AM] Alright#0419
```
2018-08-15 15:15:05 Misbehaving: 94.130.224.11:57200 (0 -> 100)
2018-08-15 15:15:05 InvalidChainFound: invalid block=05e06c83d13fa189f79b17cac21841fc51d0f8cd3d1047c001fb301adb9a6593  height=39  log2_work=9.6257088  date=2018-08-15 13:21:32
2018-08-15 15:15:05 InvalidChainFound:  current best=0138cb24e01185d353ae2cb774a73f8c576119162edb053c7e9a9a46428dbc3e  height=38  log2_work=9.5793159  date=2018-08-15 13:18:49
```


[15-Aug-18 08:17 AM] Alright#0419
Check out what happened in 39 so we don't do this again immediately


[15-Aug-18 08:17 AM] siu#3920
james did some hardforking change just after shossain announced he made a new chain


[15-Aug-18 08:17 AM] siu#3920
could have been that


[15-Aug-18 08:17 AM] jl777c#5810
I did a hardforking change


[15-Aug-18 08:17 AM] jl777c#5810
probably need to clear AT4


[15-Aug-18 08:18 AM] jl777c#5810
or make AT5


[15-Aug-18 08:18 AM] Alright#0419
well that was short lived


[15-Aug-18 08:18 AM] Alright#0419
AT5 in bound


[15-Aug-18 08:18 AM] siu#3920
we all need to kill AT4 and start over


[15-Aug-18 08:18 AM] CHMEX#0686
do AT5


[15-Aug-18 08:18 AM] siu#3920
ok


[15-Aug-18 08:18 AM] Alright#0419
on it


[15-Aug-18 08:18 AM] siu#3920
./komodod -ac_cc=1 -ac_name=AT5 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6 -addnode=195.201.20.230 -addnode=195.201.137.5 -addnode=94.130.224.11 &


[15-Aug-18 08:18 AM] siu#3920
?


[15-Aug-18 08:21 AM] Alright#0419
`./komodod -ac_cc=1 -ac_name=AT5 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<PUBKEY> -addnode=195.201.137.5 -addnode=195.201.20.230`


[15-Aug-18 08:21 AM] Alright#0419
if you need coins asap, I'll send them to you


[15-Aug-18 08:22 AM] Alright#0419
don't mine blocks until it's past ~100 or so


[15-Aug-18 08:25 AM] SHossain#0007
getting AT5


[15-Aug-18 08:26 AM] CHMEX#0686
explorer is now on AT5


[15-Aug-18 08:26 AM] CHMEX#0686
not mining


[15-Aug-18 08:27 AM] jl777c#5810
can we next time make a chain with -ac_perc? it seems that is a not very used ac param and it would be useful for the 0 cost dice use ase


[15-Aug-18 08:27 AM] jl777c#5810
use case


[15-Aug-18 08:28 AM] jl777c#5810
i think a 0.1% type of override on all tx will create a nice amount of income to any actively used chain, especially with the way change works


[15-Aug-18 08:29 AM] Alright#0419
STAKED2 will have ac_perc


[15-Aug-18 08:30 AM] Alright#0419
with commission going to whoever can break it or a contract on STAKED3


[15-Aug-18 08:43 AM] Alright#0419
Just tried to `rewardsunlock` a `rewardslock` with 0 minimum time after a couple blocks 
```
./komodo-cli -ac_name=AT5 rewardsunlock 0time 977f375ec1d16ce17a63316e741fed5910099e1d460f5d2645ad7d1de67ad490
{
  "result": "success",
  "hex": "0100000002e24930cc3da4e056cea0ace90fbb55628b825d94a3a01cdade9a7d9d99ad839a000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140e5598146fa307de2a6c5bbeb0c9925bcfdcd091fff1ba9173fae7b40cbe7172642763e12fd174d1d9f37b15fd5d7bafdb1cb3d2b413c9a48993d730ffc0aa400a100af038001e5a10001ffffffff90d47ae61d7dad45265d0f461d9e091059ed1f746e31637ae16cd1c15e377f97000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981407053d8c738bf1ec6cab61cb0db85ca7fb66f928f0238607e1f981a3d0567d8b27463df0b5ce09830f1f70079c2e65e5c5e45bc46db53236647d3d05bdbbe4a75a100af038001e5a10001ffffffff035360764817000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc9d487748170000002321027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392ac00000000000000002c6a2ae5553074696d6500000090d47ae61d7dad45265d0f461d9e091059ed1f746e31637ae16cd1c15e377f9700000000"
}
```


[15-Aug-18 08:44 AM] Alright#0419
```
minseconds 0 maxseconds 86400
duration 39 (1534347671 - 1534347632) numblocks 4 (65 - 61)
amount 1000.00000000 2000000000000.00000000 4925 -> duration.39 reward 0.00024733 vals 0.00123668 2.47336000
minseconds 0 maxseconds 86400
duration 39 (1534347671 - 1534347632) numblocks 4 (65 - 61)
amount 1000.00000000 2000000000000.00000000 4925 -> duration.39 reward 0.00024733 vals 0.00123668 2.47336000
minseconds 0 maxseconds 86400
duration 39 (1534347671 - 1534347632) numblocks 4 (65 - 61)
amount 1000.00000000 2000000000000.00000000 4925 -> duration.39 reward 0.00024733 vals 0.00123668 2.47336000
minseconds 0 maxseconds 86400
duration 39 (1534347671 - 1534347632) numblocks 4 (65 - 61)
amount 1000.00000000 2000000000000.00000000 4925 -> duration.39 reward 0.00024733 vals 0.00123668 2.47336000
```


[15-Aug-18 08:44 AM] Alright#0419
seemed to work fine from the node I sent it from, but I got this on the other node


[15-Aug-18 08:44 AM] Alright#0419
```
2018-08-15 15:41:21 ERROR: CScriptCheck(): 6f2f8e0c9f038a3cbfaf2418560fe8128430cc2077f6f3f5bb83b398e1faa0d8:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-15 15:41:21 ERROR: CScriptCheck(): 6f2f8e0c9f038a3cbfaf2418560fe8128430cc2077f6f3f5bb83b398e1faa0d8:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-15 15:41:21 ERROR: AcceptToMemoryPool: ConnectInputs failed 6f2f8e0c9f038a3cbfaf2418560fe8128430cc2077f6f3f5bb83b398e1faa0d8
2018-08-15 15:41:21 Misbehaving: 195.201.20.230:21362 (0 -> 100)
```


[15-Aug-18 08:49 AM] SHossain#0007
@Alright if you have any AT5 coins, please fund the faucet


[15-Aug-18 08:49 AM] SHossain#0007
```
./komodo-cli -ac_name=AT5 faucetget
cant find faucet inputs
{
  "result": "error",
  "error": "couldnt create faucet get transaction"
}
```


[15-Aug-18 08:50 AM] Alright#0419
done


[15-Aug-18 08:51 AM] Alright#0419
you should be fine to mine now btw


[15-Aug-18 08:52 AM] SHossain#0007
cool


[15-Aug-18 08:52 AM] SHossain#0007
will start mining. but, as i don't have any funds, i'd be able to claim faucet funds first üòÉ


[15-Aug-18 08:52 AM] jl777c#5810
were the inputs valid for the rewards tx? did it confirme?


[15-Aug-18 08:53 AM] Alright#0419
did not confirm, the first input was the rewardscreatefunding, need to figure out if the other was fine too


[15-Aug-18 08:54 AM] SHossain#0007
```
start at 1534348388
found valid txid after 73012 iterations 1534348449
```


[15-Aug-18 08:55 AM] Alright#0419
```
2018-08-15 15:54:56 ERROR: CScriptCheck(): 008bed88b2dfee149a1798744cb9408b56a6b60d04da5cbc746f643d55e8b500:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-15 15:54:56 ERROR: CScriptCheck(): 008bed88b2dfee149a1798744cb9408b56a6b60d04da5cbc746f643d55e8b500:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-15 15:54:56 ERROR: AcceptToMemoryPool: ConnectInputs failed 008bed88b2dfee149a1798744cb9408b56a6b60d04da5cbc746f643d55e8b500
2018-08-15 15:54:56 Misbehaving: 94.130.224.11:65079 (100 -> 200) BAN THRESHOLD EXCEEDED
```


[15-Aug-18 08:55 AM] siu#3920
can i get some AT5 here? 0225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6


[15-Aug-18 08:55 AM] Alright#0419
need address


[15-Aug-18 08:55 AM] siu#3920
RKvQKpkJgfMB5CbJQ2p6rUW4CZd7w2heQw


[15-Aug-18 08:55 AM] SHossain#0007
@siu for AT5 you need Address not pubkey üòÉ


[15-Aug-18 08:55 AM] siu#3920
lol


[15-Aug-18 08:55 AM] siu#3920
sorry


[15-Aug-18 08:55 AM] Alright#0419
is that your node SHo?


[15-Aug-18 08:55 AM] Alright#0419
that I just banned


[15-Aug-18 08:55 AM] SHossain#0007
no idea if i'm banned or not.


[15-Aug-18 08:56 AM] SHossain#0007
please DM me the ip


[15-Aug-18 08:56 AM] SHossain#0007
oh..ok


[15-Aug-18 08:56 AM] SHossain#0007
yes, that is my node


[15-Aug-18 08:56 AM] SHossain#0007
aside from sync, i didn't do anything on that node


[15-Aug-18 08:56 AM] Alright#0419
was when you did the faucet tx I'm guessing


[15-Aug-18 08:57 AM] SHossain#0007
oh and the faucetget


[15-Aug-18 08:58 AM] SHossain#0007
and, yes. that is my faucetget txid


[15-Aug-18 08:58 AM] SHossain#0007
still sitting in mempool for me


[15-Aug-18 08:59 AM] SHossain#0007
```
./komodo-cli -ac_name=AT5 getrawmempool
[
  "008bed88b2dfee149a1798744cb9408b56a6b60d04da5cbc746f643d55e8b500"
]
```


[15-Aug-18 08:59 AM] jl777c#5810
i think it is a timing issue


[15-Aug-18 09:00 AM] jl777c#5810
you did some tx to that address


[15-Aug-18 09:00 AM] jl777c#5810
so now the faucet tx is invalid


[15-Aug-18 09:00 AM] jl777c#5810
but the moment you submitted to mempool it wasnt invalid


[15-Aug-18 09:00 AM] jl777c#5810
i think you need to restart that node


[15-Aug-18 09:00 AM] SHossain#0007
restarting


[15-Aug-18 09:00 AM] jl777c#5810
not sure how easy it is to get into such a situation


[15-Aug-18 09:01 AM] SHossain#0007
```
./komodo-cli -ac_name=AT5 faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "0.00000000"
}
```
on other node, it doesn't see faucet funds


[15-Aug-18 09:02 AM] jl777c#5810
my node has that in the mempool also...


[15-Aug-18 09:02 AM] SHossain#0007
after restart it shows
```
check faucetget txid 008bed88b2dfee149a1798744cb9408b56a6b60d04da5cbc746f643d55e8b500 00/00
faucetget validated
check faucetget txid 008bed88b2dfee149a1798744cb9408b56a6b60d04da5cbc746f643d55e8b500 00/00
faucetget validated
```


[15-Aug-18 09:03 AM] jl777c#5810
if this isnt a one-off situation, i need to rethink the last constraint of unused address


[15-Aug-18 09:03 AM] SHossain#0007
the tx is in my mempool also


[15-Aug-18 09:04 AM] SHossain#0007
now confirmed


[15-Aug-18 09:04 AM] jl777c#5810
somehow it was in th emempool, but when restarted it is processed...


[15-Aug-18 09:04 AM] SHossain#0007
./komodo-cli -ac_name=AT5 faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "9999.89990000"
}


[15-Aug-18 09:04 AM] jl777c#5810
very strange. we need to see if this happens again


[15-Aug-18 09:04 AM] SHossain#0007
faucet has funds now


[15-Aug-18 09:04 AM] jl777c#5810
the funding went to 0 as it was in the mempool


[15-Aug-18 09:04 AM] Alright#0419
```
CC Eval EVAL_FAUCET Invalid: mismatched inputs != outputs + COIN + txfee spending tx 6bf880a14e46564390486e444d671736ca7cad1bf12718d3c056c41a13b0c4f5
inputs 1000000000000 vs outputs 999989990000
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: mismatched inputs != outputs + COIN + txfee spending tx 6bf880a14e46564390486e444d671736ca7cad1bf12718d3c056c41a13b0c4f5
inputs 1000000000000 vs outputs 999989990000
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: mismatched inputs != outputs + COIN + txfee spending tx 6bf880a14e46564390486e444d671736ca7cad1bf12718d3c056c41a13b0c4f5
inputs 1000000000000 vs outputs 999989990000
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: mismatched inputs != outputs + COIN + txfee spending tx 6bf880a14e46564390486e444d671736ca7cad1bf12718d3c056c41a13b0c4f5
inputs 1000000000000 vs outputs 999989990000
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: mismatched inputs != outputs + COIN + txfee spending tx 6bf880a14e46564390486e444d671736ca7cad1bf12718d3c056c41a13b0c4f5
inputs 1000000000000 vs outputs 999989990000
faucetget invalid amount
CC Eval EVAL_FAUCET Invalid: mismatched inputs != outputs + COIN + txfee spending tx 6bf880a14e46564390486e444d671736ca7cad1bf12718d3c056c41a13b0c4f
```


[15-Aug-18 09:04 AM] Alright#0419
not my tx


[15-Aug-18 09:05 AM] jl777c#5810
similar to the dice funding disappearing


[15-Aug-18 09:05 AM] SHossain#0007
tx went back to mempool and faucetfund is 0 again
```
./komodo-cli -ac_name=AT5 faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "0.00000000"
}
lpx@dex:~/komodo/src$ ./komodo-cli -ac_name=AT5 getrawmempool
[
  "008bed88b2dfee149a1798744cb9408b56a6b60d04da5cbc746f643d55e8b500"
]
```


[15-Aug-18 09:06 AM] jl777c#5810
I think I know what is going on


[15-Aug-18 09:07 AM] SHossain#0007
glad i tested the fauce before starting dice on new chain üòÉ


[15-Aug-18 09:07 AM] Alright#0419
I was able to lock then unlock 1000 coins from this plan, but now I am unable to lock any. 
```
{
  "result": "success",
  "fundingtxid": "977f375ec1d16ce17a63316e741fed5910099e1d460f5d2645ad7d1de67ad490",
  "name": "0time",
  "sbits": 435627324464,
  "APR": "20.00000000",
  "minseconds": 0,
  "maxseconds": 86400,
  "mindeposit": "1.00000000",
  "funding": "999.99956311",
  "locked": "0.00000000"
}
```
```
./komodo-cli -ac_name=AT5 rewardslock 0time 977f375ec1d16ce17a63316e741fed5910099e1d460f5d2645ad7d1de67ad490 1000
{
  "error": "couldnt create rewards lock transaction"
}
```
`cant find rewards inputs`


[15-Aug-18 09:07 AM] siu#3920
who wants some WEED? :trollface:


[15-Aug-18 09:08 AM] siu#3920
```{
    "result": {
        "result": "success",
        "tokenid": "94b5dd0c386916b8e09c1f66bdf7a66f9fe43561c0876578bceaa9b5bb106cba",
        "owner": "0225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6",
        "name": "WEED",
        "supply": 420000000,
        "description": "pass the dutchy to the left hand side"
    },
    "error": null,
    "id": null
}```

{Reactions}
üòÇ 

[15-Aug-18 09:08 AM] jl777c#5810
pushed fix for mempool zombie


[15-Aug-18 09:09 AM] jl777c#5810
it shouldnt change consensus


[15-Aug-18 09:09 AM] SHossain#0007
updating


[15-Aug-18 09:09 AM] Alright#0419
any amount under 1000 I get 
```
cant find enough inputs 999.99956311 note enough for 999.00000000
cant find rewards inputs
```
in the stdout 
1000 or above I just get 
```
cant find rewards inputs
```


[15-Aug-18 09:10 AM] jl777c#5810
investigating


[15-Aug-18 09:11 AM] siu#3920
updating


[15-Aug-18 09:11 AM] SHossain#0007
superfast faucetget
```
start at 1534349476
found valid txid after 3730 iterations 1534349477
```


[15-Aug-18 09:13 AM] jl777c#5810
superlucke: found valid txid after 3730 iterations 1534349477


[15-Aug-18 09:13 AM] jl777c#5810
@Alright it checks for enough rewards funding to match the deposit, this is arbitrary value but seems reaosnable


[15-Aug-18 09:14 AM] jl777c#5810
and are you sure it has enough normal inputs for 1000 ?


[15-Aug-18 09:14 AM] Alright#0419
```
cant find enough inputs 999.99956311 note enough for 2.00000000
cant find rewards inputs
```


[15-Aug-18 09:14 AM] Alright#0419
that's trying to lock 2 coins when the plan has 999 coins funding


[15-Aug-18 09:14 AM] jl777c#5810
how much do you have in normal inputs?


[15-Aug-18 09:15 AM] Alright#0419
didn't import the key üòê sorry


[15-Aug-18 09:16 AM] jl777c#5810
sometimes the error messages are correct


[15-Aug-18 09:16 AM] Alright#0419
üòÉ


[15-Aug-18 09:17 AM] jl777c#5810
added prints to make it easier to remember


[15-Aug-18 09:18 AM] SHossain#0007
who flooded the mempool i wonder


[15-Aug-18 09:18 AM] jl777c#5810
no needto update just for this if you have imported the privkey


[15-Aug-18 09:18 AM] Alright#0419
locking coins


[15-Aug-18 09:18 AM] SHossain#0007
i was waiting for a faucetget tx to confirm


[15-Aug-18 09:19 AM] SHossain#0007
```
./komodo-cli -ac_name=AT5 sendrawtransaction 0100000001f5c4b0131ac456c0d31827f11bad7cca3617674d446e48904356464ea180f86b000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe128140b217f1b83cdccfcd7aba193123a7144dbacd73783205bad7f73f0e31269ad164308e804a9d129bd7fdd73b47642dafbb9cc6cad95f406853ed7bc7baf6456a4aa100af038001e4a10001ffffffff0370520cd4e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc809698000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000002a6a28e447210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6920e000000000000
check faucetget txid 001d49dd75c6af0aff5983506e6daa6ae5b0d30101687cc22771c432e074be00 00/00
faucetget validated
check faucetget txid 001d49dd75c6af0aff5983506e6daa6ae5b0d30101687cc22771c432e074be00 00/00
faucetget validated
001d49dd75c6af0aff5983506e6daa6ae5b0d30101687cc22771c432e074be00
```


[15-Aug-18 09:20 AM] jl777c#5810
it isnt going back into mempool for me anymore


[15-Aug-18 09:20 AM] jl777c#5810
but maybe if you do another faucetget it will. need to solve it more properly


[15-Aug-18 09:20 AM] SHossain#0007
this is a new faucetget on a different node


[15-Aug-18 09:20 AM] SHossain#0007
tx cleared from mempool but didn't come to my account


[15-Aug-18 09:20 AM] SHossain#0007
./komodo-cli -ac_name=AT5 faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "9999.89990000"
}


[15-Aug-18 09:21 AM] jl777c#5810
where did the faucetget 0.1 coins go?


[15-Aug-18 09:21 AM] SHossain#0007
no idea


[15-Aug-18 09:22 AM] SHossain#0007
```
./komodo-cli -ac_name=AT5 faucetget
start at 1534349476
found valid txid after 3730 iterations 1534349477
{
  "result": "success",
  "hex": "0100000001f5c4b0131ac456c0d31827f11bad7cca3617674d446e48904356464ea180f86b000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe128140b217f1b83cdccfcd7aba193123a7144dbacd73783205bad7f73f0e31269ad164308e804a9d129bd7fdd73b47642dafbb9cc6cad95f406853ed7bc7baf6456a4aa100af038001e4a10001ffffffff0370520cd4e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc809698000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000002a6a28e447210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6920e000000000000"
}
```


[15-Aug-18 09:22 AM] jl777c#5810
RRFHykmhREKvJi6gRdccNbKt7572QaDgjZ is your address?


[15-Aug-18 09:22 AM] SHossain#0007
yes


[15-Aug-18 09:22 AM] jl777c#5810
ismine: true?


[15-Aug-18 09:22 AM] SHossain#0007
yes


[15-Aug-18 09:22 AM] jl777c#5810
what does addressbalance return?


[15-Aug-18 09:22 AM] jl777c#5810
or listunspent


[15-Aug-18 09:22 AM] SHossain#0007
```
./komodo-cli -ac_name=AT5 validateaddress RRFHykmhREKvJi6gRdccNbKt7572QaDgjZ
{
  "isvalid": true,
  "address": "RRFHykmhREKvJi6gRdccNbKt7572QaDgjZ",
  "scriptPubKey": "76a914af261b339b1c79d808bc066be5201eb990d02a9e88ac",
  "segid": 2,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "0304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6",
  "iscompressed": true,
  "account": ""
}
```


[15-Aug-18 09:24 AM] SHossain#0007
```
./komodo-cli -ac_name=AT5 listunspent
[
  {
    "txid": "00ef167e1ca3182d504e8b8fa52fbaa86a2c71cc710095e7ae3afb5b7d54a800",
    "vout": 1,
    "generated": false,
    "address": "RRFHykmhREKvJi6gRdccNbKt7572QaDgjZ",
    "account": "",
    "scriptPubKey": "210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac",
    "amount": 0.10000000,
    "confirmations": 1,
    "spendable": true
  }
]
```
i did another faucetget tx after the first one and listunspent shows details of 2nd one and only showing balance for 1 faucet claim


[15-Aug-18 09:24 AM] Alright#0419
spending rewardsunlock change from mempool works


[15-Aug-18 09:25 AM] jl777c#5810
were they both in the mempool at the same time for the faucet? if so I think I can prevent this


[15-Aug-18 09:25 AM] jl777c#5810
glad the change spending works!


[15-Aug-18 09:25 AM] SHossain#0007
they weren't in the mempool at the the same time


[15-Aug-18 09:25 AM] SHossain#0007
after the first one cleared and i didn't see balance, i initiated the 2nd


[15-Aug-18 09:25 AM] jl777c#5810
resync and see what happens, you shouldnt just lose a utxo


[15-Aug-18 09:26 AM] jl777c#5810
but I think it could end up with an error...


[15-Aug-18 09:27 AM] SHossain#0007
faucetinfo balance shows only 2 tx left out of it total, not 3.
```
./komodo-cli -ac_name=AT5 faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "9999.79980000"
}
```


[15-Aug-18 09:27 AM] SHossain#0007
1 tx missing


[15-Aug-18 09:27 AM] Alright#0419
@SHossain can you run `./komodo-cli -ac_name=AT5 rewardsunlock 0time 977f375ec1d16ce17a63316e741fed5910099e1d460f5d2645ad7d1de67ad490` not sure if I just broke my node's wallet or what


[15-Aug-18 09:28 AM] SHossain#0007
i'll resync


[15-Aug-18 09:28 AM] SHossain#0007
@Alright 
```
./komodo-cli -ac_name=AT5 rewardsunlock 0time 977f375ec1d16ce17a63316e741fed5910099e1d460f5d2645ad7d1de67ad490
APR 20.00000000 minseconds.0 maxseconds.86400 mindeposit 1.00000000
maxseconds.86400 (L) 2.00000000 2.00000000
minseconds 0 maxseconds 86400
duration 641 (1534350424 - 1534349783) numblocks 15 (135 - 120)
amount 2.00000000 4000000000.00000000 126 -> duration.641 reward 0.00000813 vals 0.00004065 0.08130000
amount 2.00000000 -> reward 0.00000813
{
  "error": "couldnt create rewards unlock transaction"
}
```


[15-Aug-18 09:28 AM] Alright#0419
I unlocked a lot of `rewardslock`s in the same block but then eventually got that ^


[15-Aug-18 09:29 AM] Alright#0419
did 194 `rewardsunlock`s in a single block


[15-Aug-18 09:29 AM] SHossain#0007
after full resync balane is `"balance": 0.10000000,`


[15-Aug-18 09:30 AM] SHossain#0007
which accounts for only 1 tx


[15-Aug-18 09:30 AM] Alright#0419
seems to have messed up being able to do any more `rewardsunlock`s ü§î


[15-Aug-18 09:30 AM] Alright#0419
Still have a couple hundred `rewardlocks` seemingly stuck


[15-Aug-18 09:31 AM] Alright#0419
```
APR 20.00000000 minseconds.0 maxseconds.86400 mindeposit 1.00000000
maxseconds.86400 (L) 2.00000000 2.00000000
minseconds 0 maxseconds 86400
duration 861 (1534350644 - 1534349783) numblocks 24 (144 - 120)
amount 2.00000000 4000000000.00000000 126 -> duration.861 reward 0.00001092 vals 0.00005460 0.10920000
amount 2.00000000 -> reward 0.00001092
```


[15-Aug-18 09:32 AM] SHossain#0007
@Alright are you mining with any node?


[15-Aug-18 09:32 AM] Alright#0419
just one


[15-Aug-18 09:34 AM] SHossain#0007
ok. i have one too


[15-Aug-18 09:34 AM] SHossain#0007
mined few blocks with the 3rd one and now i have enough funds


[15-Aug-18 09:38 AM] siu#3920
no one wants some weed?? üò¶


[15-Aug-18 09:40 AM] SHossain#0007
what is that? token?


[15-Aug-18 09:40 AM] SHossain#0007
send some on my way (don't tell anyone üòõ )


[15-Aug-18 09:40 AM] Alright#0419
will be back in ~2 hours


[15-Aug-18 09:42 AM] siu#3920
```{
    "result": [
        {
            "funcid": "s",
            "txid": "aa73c027fd44739df44aef7fbd4f471dbfe8fa5bb0bcdd220f9ca32844c7e0bf",
            "vout": 0,
            "amount": "1000",
            "askamount": "1000",
            "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
            "tokenid": "94b5dd0c386916b8e09c1f66bdf7a66f9fe43561c0876578bceaa9b5bb106cba",
            "totalrequired": "4200.00000000",
            "price": "4.20000000"
        }
    ],
    "error": null,
    "id": null
}```


[15-Aug-18 09:42 AM] siu#3920
üòÇ


[15-Aug-18 09:42 AM] siu#3920
i wont say anything about you buying some WEED


[15-Aug-18 09:44 AM] siu#3920
seems like some help mining is needed


[15-Aug-18 09:44 AM] SHossain#0007
i'm mining with 2 nodes now


[15-Aug-18 09:44 AM] SHossain#0007
can increase threads in my local node


[15-Aug-18 09:44 AM] TonyL#3577
```./komodo-cli -ac_name=AT5 faucetget

{
  "result": "success",
  "hex": "010000000100fb98f71ad5c12783a636c4ffdbad12e0994161fe2324df386c3c651f990400000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe128140a7f8d5341aa1a4ae286926ce54c88f350c1f0d02442e19e7958dbb7924e5f38f69dbfceb5885a2eb53c804ced85bbd3c9e317a890911415422a0867654dfa06aa100af038001e4a10001ffffffff03c01942d2e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc80969800000000002321023049603997216a25787312df4dab5a2699fb07115032b128ed68c1d53c9866f8ac00000000000000002a6a28e44721023049603997216a25787312df4dab5a2699fb07115032b128ed68c1d53c9866f82be5010000000000"
}
```
What I have to do next to get coins into the balance?


[15-Aug-18 09:45 AM] SHossain#0007
use
`./komodo-cli -ac_name=AT5 sendrawtransaction 010000000100fb98f71ad5c12783a636c4ffdbad12e0994161fe2324df386c3c651f990400000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe128140a7f8d5341aa1a4ae286926ce54c88f350c1f0d02442e19e7958dbb7924e5f38f69dbfceb5885a2eb53c804ced85bbd3c9e317a890911415422a0867654dfa06aa100af038001e4a10001ffffffff03c01942d2e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc80969800000000002321023049603997216a25787312df4dab5a2699fb07115032b128ed68c1d53c9866f8ac00000000000000002a6a28e44721023049603997216a25787312df4dab5a2699fb07115032b128ed68c1d53c9866f82be5010000000000`


[15-Aug-18 09:45 AM] TonyL#3577
Tried already. Getting:
```error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```


[15-Aug-18 09:45 AM] SHossain#0007
everytime you have HEX value or raw transaction you need to broadcast it using `sendrawtransaction`


[15-Aug-18 09:46 AM] SHossain#0007
if you already claimed once using a fresh address, you will not get it twice


[15-Aug-18 09:46 AM] SHossain#0007
one block serves only one faucet claim


[15-Aug-18 09:46 AM] siu#3920
got some asks up for WEED


[15-Aug-18 09:46 AM] SHossain#0007
try again for the next block


[15-Aug-18 09:47 AM] SHossain#0007
i have a winning tx
```
./komodo-cli -ac_name=AT5 sendrawtransaction 01000000029a17ff74ccacf0c3d4859abd0925f0dababca1103b74c7710764f5cb249dcb35000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140181efa6ab415931e729ee089136f526a0de4d3f13d06ffbee8b4f114c6762fec2ae044ff46f7ebd2007061a6b71a447b978a6a7caec232d0fb69c954ffadc67ca100af038001e6a10001ffffffffe16075d051bd980f3b332dbaf238139d7a3f294fafd4d55d2023a621bd02dc3f0300000049483045022100ba2247b21e670041d914fa81425a51ddae5de0ff0c7f577f30b5bc6403dda7fb02202a59822d1e7cb3cbd0106b2f003914ab18aca6a6456741c320b93bb6418a893b01ffffffff0500f2052a01000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc112700000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac3a0fd0e81609000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae642446963653100000084af321b4e8c9129f1075f5a5f693b5573a3c1e094ca8c1dc0837ab6d621dd5e3c98d00b96e5628192696a99a5d06df70fbb2e1ec6cc2b333d7196eb848fed15000000000000000000000000000000000000000000000000000000000000000000000000
6cdc1a42949968b5c37b37cb8b2fcfff7ec37cfaf1b1739f2c36e28eae7eca2b
```

{Reactions}
üèÜ 

[15-Aug-18 09:47 AM] SHossain#0007
won 20


[15-Aug-18 09:47 AM] SHossain#0007
`6cdc1a42949968b5c37b37cb8b2fcfff7ec37cfaf1b1739f2c36e28eae7eca2b winnings 20.00000000 bet 10.00000000 at odds 1:1`


[15-Aug-18 09:47 AM] SHossain#0007
with dealer node online


[15-Aug-18 09:48 AM] TonyL#3577
Hmm I didn't get any before. Will try more ok )

{Reactions}
üëçüèΩ 

[15-Aug-18 09:48 AM] SHossain#0007
@jl777c dicestatus now showing correct info
```
./komodo-cli -ac_name=AT5 dicestatus Dice1 5edd21d6b67a83c01d8cca94e0c1a373553b695f5a5f07f129918c4e1b32af84 6cdc1a42949968b5c37b37cb8b2fcfff7ec37cfaf1b1739f2c36e28eae7eca2b
{
  "result": "success",
  "status": "win",
  "won": 20
}
```


[15-Aug-18 09:54 AM] SHossain#0007
Pinned a message.


[15-Aug-18 09:55 AM] siu#3920
i dont want shossain betting on my dicefund üòÇ


[15-Aug-18 09:57 AM] TonyL#3577
@SHossain I'm getting same HEX each time for `./komodo-cli -ac_name=AT5 faucetget` don't think it's ok :/


[15-Aug-18 10:01 AM] SHossain#0007
try with a different address and pubkey


[15-Aug-18 10:01 AM] SHossain#0007
didn't realise 8 hours has passed. need some food. be back later.


[15-Aug-18 10:13 AM] siu#3920
can the dicefund owner withdraw funds?


[15-Aug-18 10:19 AM] TonyL#3577
```./komodo-cli -ac_name=AT5 faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "0.00000000"
}
```
No more party?


[15-Aug-18 10:19 AM] siu#3920
jjmm seems like you emptied it :p


[15-Aug-18 10:25 AM] TonyL#3577
Could someone please send coins to RUKApviqTQ3mWAt1T6BCFtXLrZ7vkeASa8 ? I wanna gamble a lil bit too)


[15-Aug-18 10:31 AM] Alright#0419
if you do `./komodo-cli -ac_name=AT5 setgenerate true $(nproc)` you'll start mining


[15-Aug-18 10:31 AM] Alright#0419
block reward is 100k coins


[15-Aug-18 10:33 AM] TonyL#3577
100k should be enough) Thanks!


[15-Aug-18 10:51 AM] siu#3920
```{
    "result": null,
    "error": {
        "code": -26,
        "message": "16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)"
    },
    "id": null
}```


[15-Aug-18 10:55 AM] siu#3920
what is happening here?


[15-Aug-18 11:05 AM] SHossain#0007
what did you want to do?


[15-Aug-18 11:22 AM] 0x03#8822
@SHossain here i am


[15-Aug-18 11:22 AM] SHossain#0007
Great!


[15-Aug-18 11:23 AM] SHossain#0007
Welcome to the future development of Komodo.

{Reactions}
Komodo 

[15-Aug-18 11:25 AM] SHossain#0007
Whenever you are ready, you can start with the Komodo CC enabled smart contract testing. Find bugs, report, wait for fix, test fix, find more bugs üòÉ 
https://github.com/himu007/KMD-CC-Token-Test-Guide
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=211514340

{Embed}
https://github.com/himu007/KMD-CC-Token-Test-Guide
himu007/KMD-CC-Token-Test-Guide
KMD-CC-Token-Test-Guide - Komodo CC Token testing description, setup & how-to
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[15-Aug-18 11:25 AM] 0x03#8822
alright üëç

{Reactions}
üëã (3) 

[15-Aug-18 11:32 AM] jl777c#5810
any reproducible bug? ie raw tx that when broadcast gets an error it shouldnt


[15-Aug-18 11:38 AM] SHossain#0007
starting to test again.


[15-Aug-18 11:44 AM] SHossain#0007
raw tx is being broadcasted fine


[15-Aug-18 11:45 AM] SHossain#0007
jsut did a bet, lost and created a new token


[15-Aug-18 11:45 AM] SHossain#0007
```
./komodo-cli -ac_name=AT5 tokeninfo 6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e
{
  "result": "success",
  "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
  "owner": "03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc",
  "name": "Alien",
  "supply": 100000000000000,
  "description": "Alien test tokens created on AT3 chain"
}
```


[15-Aug-18 11:53 AM] jl777c#5810
update with a slightly more lenient faucetget, this new method should be consensus stable and not have weird zombie mempools things happening. the new rule is if you have any past tx more than 3 blocks in the past, it is invalid. so you can go wild for 3 blocks before being cutoff. this needs to be validated with new build


[15-Aug-18 11:53 AM] jl777c#5810
no need to resync


[15-Aug-18 11:55 AM] SHossain#0007
updating


[15-Aug-18 11:56 AM] SHossain#0007
i have distributed some tokens to the pubkeys of Siu, jl777, alright


[15-Aug-18 11:56 AM] SHossain#0007
let me know if anyone else wants some Alien tokens


[15-Aug-18 11:59 AM] jl777c#5810
@Alright you were saying something about rewards bugs, but not sure what exactly is wrong


[15-Aug-18 12:00 PM] Alright#0419
Sorry, got a little side tracked with something else. I was able to do ~200 `rewardsunlock`s in a single block, but then was getting errors trying more


[15-Aug-18 12:01 PM] Alright#0419
just tried `rewardsunlock` again and it worked fine


[15-Aug-18 12:03 PM] Alright#0419
did it again


[15-Aug-18 12:04 PM] Alright#0419
just unlocked ~400 in the same block, all were confirmed but I'm getting 
```
./komodo-cli -ac_name=AT5 rewardsunlock 0time 977f375ec1d16ce17a63316e741fed5910099e1d460f5d2645ad7d1de67ad490
{
  "error": "couldnt create rewards unlock transaction"
}
```
```
APR 20.00000000 minseconds.0 maxseconds.86400 mindeposit 1.00000000
CCduration backwards timestamps 1534359795 1534359795 for txid 675c842fa484f4133dee9f0222821367a85a3dd29ac3be98910f7c89ea573ce7 hts.(333 333)
amount 0.00000000 -> reward 0.00000000
```


[15-Aug-18 12:04 PM] jl777c#5810
there is a limit to the number of chained mempool tx


[15-Aug-18 12:04 PM] Alright#0419
different error now


[15-Aug-18 12:04 PM] Alright#0419
yes, but they are confirmed


[15-Aug-18 12:04 PM] jl777c#5810
need another confirmation


[15-Aug-18 12:04 PM] Alright#0419
ahhh


[15-Aug-18 12:06 PM] jl777c#5810
i cant get faucetget to get accepted now. anybody able to do a faucetgetnow?


[15-Aug-18 12:08 PM] Alright#0419
```
amount 0.00000000 -> reward 0.00000000
APR 20.00000000 minseconds.0 maxseconds.86400 mindeposit 1.00000000
duration 14 (1534359809 - 1534359795) numblocks 1 (334 - 333)
amount 0.00000000 -> reward 0.00000000
```
I didn't make a new `rewardslock` just now


[15-Aug-18 12:08 PM] Alright#0419
trying faucet now


[15-Aug-18 12:09 PM] Alright#0419
```
 ./rawsend 010000000100fb98f71ad5c12783a636c4ffdbad12e0994161fe2324df386c3c651f990400000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281402fbfbb4288e953b5b13ff1afa2cab498d7eda5215af614fa9b54542b7678163046e0c73a831f9cccb85aca166fff0fc0b95af42db62cac8e9c77f64340b8f0eaa100af038001e4a10001ffffffff03c01942d2e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc80969800000000002321027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392ac00000000000000002a6a28e44721027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e3303927928000000000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[15-Aug-18 12:09 PM] Alright#0419
```
found valid txid after 10361 iterations 1534360131
check faucetget txid 005d4e04f5e7e2e111e49e2efec53f28183a2f8daaec7e64a91629519c984c00 00/00
CC Eval EVAL_FAUCET Invalid: faucet is only for unused addresses spending tx 0004991f653c6c38df2423fe614199e012addbffc436a68327c1d51af798fb00
check faucetget txid 005d4e04f5e7e2e111e49e2efec53f28183a2f8daaec7e64a91629519c984c00 00/00
CC Eval EVAL_FAUCET Invalid: faucet is only for unused addresses spending tx 0004991f653c6c38df2423fe614199e012addbffc436a68327c1d51af798fb00
```


[15-Aug-18 12:09 PM] Alright#0419
Oh need to try a new pubkey?


[15-Aug-18 12:09 PM] jl777c#5810
yes


[15-Aug-18 12:13 PM] siu#3920
i keep getting this: ```{
    "result": null,
    "error": {
        "code": -26,
        "message": "16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)"
    },
    "id": null
}```


[15-Aug-18 12:13 PM] siu#3920
with the faucet


[15-Aug-18 12:13 PM] siu#3920
```{
    "method":"sendrawtransaction",
"params": ["010000000100fb98f71ad5c12783a636c4ffdbad12e0994161fe2324df386c3c651f990400000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281400974a6dd2e0448b23984c436513242c17e7af3dcba9a42f475b411df6129ae4700c2dc751521db0492d1645bac42ecfb0fa5047af55c018cfbafd82a4b8abe24a100af038001e4a10001ffffffff03c01942d2e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc809698000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000002a6a28e447210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ce3d000000000000"]
}
```


[15-Aug-18 12:14 PM] jl777c#5810
hint if you send rawtransactions to the wrong chain, it doesnt work too well


[15-Aug-18 12:14 PM] siu#3920
??


[15-Aug-18 12:14 PM] siu#3920
but this is AT5


[15-Aug-18 12:14 PM] jl777c#5810
yes, I was sending to AT4 and it didnt work


[15-Aug-18 12:14 PM] Alright#0419
```
found valid txid after 47707 iterations 1534360466
check faucetget txid 00b42c0a0cc185123f5d3da3e516cb3ae67118b087a89236bcd2facb691da800 00/00
faucetget validated
check faucetget txid 00b42c0a0cc185123f5d3da3e516cb3ae67118b087a89236bcd2facb691da800 00/00
faucetget validated
```


[15-Aug-18 12:15 PM] Alright#0419
```
./rawsend 010000000100fb98f71ad5c12783a636c4ffdbad12e0994161fe2324df386c3c651f990400000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281407ba3dce6aba5b1b12babdf99357e462e1069fc50b3598978e9aa5411dca0ac9b0cc5b28786d79870a4822c79802fe2e837ff4d2f80e482923f3efe2d563026fba100af038001e4a10001ffffffff03c01942d2e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc8096980000000000232103b962b36ed2b2b87f60718a295eee2a20ffb52f2cecb67758e3bd46542678ee44ac00000000000000002a6a28e4472103b962b36ed2b2b87f60718a295eee2a20ffb52f2cecb67758e3bd46542678ee445bba000000000000
error code: -25
error message:
```


[15-Aug-18 12:15 PM] siu#3920
i dont get it


[15-Aug-18 12:15 PM] siu#3920
im not sending it to AT4


[15-Aug-18 12:15 PM] jl777c#5810
I had an error I asked about above,


[15-Aug-18 12:15 PM] jl777c#5810
I did it


[15-Aug-18 12:15 PM] jl777c#5810
faucetget worked when i sent to the right chain


[15-Aug-18 12:16 PM] SHossain#0007
```
./komodo-cli -ac_name=AT5 faucetget
start at 1534360539
found valid txid after 23634 iterations 1534360545
{
  "result": "success",
  "hex": "010000000100a81d69cbfad2bc3692a887b01871e63acb16e5a33d5d3f1285c10c0a2cb400000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe128140f6b4c53ed399ef565e018435e98a2281d6709a6ce5be799f805b57ce1fc80e6624367f89e80b6cc3834142dfea7f70bfd98f033e9ebde01e960282163945eabaa100af038001e4a10001ffffffff03305ca9d1e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc809698000000000023210270a382fbf608e3d2033c069238cb3061eb3125bb6c5210074fa85eeead16590dac00000000000000002a6a28e447210270a382fbf608e3d2033c069238cb3061eb3125bb6c5210074fa85eeead16590d525c000000000000"
}
```


[15-Aug-18 12:16 PM] jl777c#5810
but now I used the faucet utxo so it needs to confirm


[15-Aug-18 12:16 PM] SHossain#0007
```
check faucetget txid 00bd9b7e61ed29833853aef5c8a5685c9cda8ca637a407fdc3c3b9cbc1a55400 00/00
duration 7 (1534360532 - 1534360525) numblocks 1 (338 - 337)
CCduration backwards timestamps 1534360532 1534360532 for txid b67116d8d710bb5ff72d4c944e9a3d5560bc083037eb3ce74d5469211badb810 hts.(338 338)
faucetget validated
check faucetget txid 00bd9b7e61ed29833853aef5c8a5685c9cda8ca637a407fdc3c3b9cbc1a55400 00/00
duration 7 (1534360532 - 1534360525) numblocks 1 (338 - 337)
CCduration backwards timestamps 1534360532 1534360532 for txid b67116d8d710bb5ff72d4c944e9a3d5560bc083037eb3ce74d5469211badb810 hts.(338 338)
faucetget validated
00bd9b7e61ed29833853aef5c8a5685c9cda8ca637a407fdc3c3b9cbc1a55400
```


[15-Aug-18 12:16 PM] Alright#0419
did someone just lock coins in the 0time plan


[15-Aug-18 12:16 PM] Alright#0419
couple blocks ago


[15-Aug-18 12:17 PM] siu#3920
i did


[15-Aug-18 12:17 PM] siu#3920
about 30 min ago


[15-Aug-18 12:17 PM] siu#3920
or one hour


[15-Aug-18 12:18 PM] SHossain#0007
@jl777c i got faucetget working. balance 0.1 received


[15-Aug-18 12:19 PM] siu#3920
i guess that it is becuase my pubkey is old?


[15-Aug-18 12:19 PM] siu#3920
but not old in this chain


[15-Aug-18 12:19 PM] siu#3920
```./komodo-cli -ac_name=AT5 sendrawtransaction 01000000010054a5c1cbb9c3c3fd07a437a68cda9c5c68a5c8f5ae53388329ed617e9bbd00000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe128140410b026965216fa7c7f05f3113d4fbbb97cda8ecb8fe98cb0543edd96dcaff4c2d28ec6fdc022bf1a302a7ddd3bf7ecc07aa0185c93eb8407d04f362f82ffa35a100af038001e4a10001ffffffff03a09e10d1e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc809698000000000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000002a6a28e447210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f68ad5000000000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[15-Aug-18 12:20 PM] jl777c#5810
what prints in the console?


[15-Aug-18 12:20 PM] jl777c#5810
error -26 means some CC constraint was violated


[15-Aug-18 12:20 PM] jl777c#5810
can be any of 100+ different errors


[15-Aug-18 12:20 PM] siu#3920
```check faucetget txid 00bd9b7e61ed29833853aef5c8a5685c9cda8ca637a407fdc3c3b9cbc1a55400 00/00
duration 7 (1534360532 - 1534360525) numblocks 1 (338 - 337)
CCduration backwards timestamps 1534360532 1534360532 for txid b67116d8d710bb5ff72d4c944e9a3d5560bc083037eb3ce74d5469211badb810 hts.(338 338)
faucetget validated
start at 1534360675
found valid txid after 54666 iterations 1534360697
check faucetget txid 00b806ccc9a5fd2d84c06d305f4183fbc1093735af3ad2ed0eeaa4a342762f00 00/00
duration 12099 (1534360680 - 1534348581) numblocks 244 (341 - 97)
CC Eval EVAL_FAUCET Invalid: faucet is only for brand new addresses spending tx 00bd9b7e61ed29833853aef5c8a5685c9cda8ca637a407fdc3c3b9cbc1a55400
check faucetget txid 00b806ccc9a5fd2d84c06d305f4183fbc1093735af3ad2ed0eeaa4a342762f00 00/00
duration 12099 (1534360680 - 1534348581) numblocks 244 (341 - 97)
CC Eval EVAL_FAUCET Invalid: faucet is only for brand new addresses spending tx 00bd9b7e61ed29833853aef5c8a5685c9cda8ca637a407fdc3c3b9cbc1a55400

```


[15-Aug-18 12:21 PM] Alright#0419
```
./komodo-cli -ac_name=AT5 rewardsunlock 0time 977f375ec1d16ce17a63316e741fed5910099e1d460f5d2645ad7d1de67ad490
{
  "error": "couldnt create rewards unlock transaction"
}
```
```
APR 20.00000000 minseconds.0 maxseconds.86400 mindeposit 1.00000000
duration 737 (1534360532 - 1534359795) numblocks 5 (338 - 333)
amount 0.00000000 -> reward 0.00000000
```
pretty sure this is trying to unlock a `rewardsunlock` transaction. Don't think anyone made a `rewardslock` 5 blocks ago


[15-Aug-18 12:21 PM] Alright#0419
both my nodes just banned 2 nodes


[15-Aug-18 12:23 PM] Alright#0419

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479369504993050652/banned


[15-Aug-18 12:24 PM] jl777c#5810
@siu the error message in  the console "CC Eval EVAL_FAUCET Invalid: faucet is only for brand new addresses spending tx 00bd9b7e61ed29833853aef5c8a5685c9cda8ca637a407fdc3c3b9cbc1a55400" explains the reason for error -26


[15-Aug-18 12:25 PM] siu#3920
weird since none of my tries worked


[15-Aug-18 12:25 PM] siu#3920
and this chain is new


[15-Aug-18 12:25 PM] siu#3920
i had done faucetget on other chains, not on this one


[15-Aug-18 12:25 PM] jl777c#5810
new address <- that means new without any transactions


[15-Aug-18 12:25 PM] jl777c#5810
3 or more blocks old


[15-Aug-18 12:25 PM] jl777c#5810
faucetget, mining, normal, etc.


[15-Aug-18 12:25 PM] jl777c#5810
tx


[15-Aug-18 12:26 PM] siu#3920
ohh


[15-Aug-18 12:26 PM] siu#3920
ok


[15-Aug-18 12:26 PM] jl777c#5810
any tx, not just faucet


[15-Aug-18 12:26 PM] jl777c#5810
after all if you have a 100,000 coinbase, why would you need a 0.1 faucet?


[15-Aug-18 12:27 PM] siu#3920
will try with new key then

{Reactions}
üëçüèΩ 

[15-Aug-18 12:30 PM] SHossain#0007
@siu insomnia needs this format for `tokenbalance` to work
```
{
    "method":"tokenbalance",
"params": ["6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e","03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc"]
}
```


[15-Aug-18 12:30 PM] siu#3920
there is a typo on my end?


[15-Aug-18 12:31 PM] SHossain#0007
yes, i guess


[15-Aug-18 12:32 PM] SHossain#0007
it was like this, and the balance was showing 0 for any pubkey
```
{
    "method":"tokenbalance",
"params": ["6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e","[03fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc]"]
}
```


[15-Aug-18 12:32 PM] SHossain#0007
removing [] from pubkey part makes it work


[15-Aug-18 12:37 PM] siu#3920
ahh, sorry... may have been a quick copy paste


[15-Aug-18 12:37 PM] siu#3920
thanks for the heads up


[15-Aug-18 12:38 PM] SHossain#0007
no problem üòÉ


[15-Aug-18 12:44 PM] SHossain#0007
```
./komodo-cli -ac_name=AT5 getblockhash 348
008b2c2c44ce6cdd43d0c4b5550efeefe0fae241a70b3c754cf143b75ddd14dc
```


[15-Aug-18 12:45 PM] SHossain#0007
explorer seems to be behind us


[15-Aug-18 12:45 PM] SHossain#0007
@Alright @siu what is the longest chain you have?


[15-Aug-18 12:45 PM] siu#3920
for AT5?


[15-Aug-18 12:46 PM] SHossain#0007
yes


[15-Aug-18 12:46 PM] siu#3920
0 üòÇ


[15-Aug-18 12:46 PM] siu#3920
just noticed... it forked.


[15-Aug-18 12:46 PM] Alright#0419
UpdateTip: new best=00bc17d0ce3994bacccd1718f75bf421b3be610a88ce43dabcc02e379dc4298e


[15-Aug-18 12:47 PM] Alright#0419
delete your `blocks chainstate and notaizations` directories and resync from 195.201.137.5 and 195.201.20.230


[15-Aug-18 12:47 PM] Alright#0419
someone broadcasted bad blocks somehow


[15-Aug-18 12:47 PM] siu#3920
me? trying to trick the faucet?


[15-Aug-18 12:47 PM] Alright#0419
` new best=00bc17d0ce3994bacccd1718f75bf421b3be610a88ce43dabcc02e379dc4298e  height=339`


[15-Aug-18 12:48 PM] Alright#0419
Well unless you removed checks, your node shouldn't have put invalid txs into blocks


[15-Aug-18 12:48 PM] Alright#0419
look at the `banned` file I upload above


[15-Aug-18 12:48 PM] Alright#0419
those your nodes?


[15-Aug-18 12:49 PM] SHossain#0007
yes, you banned me


[15-Aug-18 12:51 PM] siu#3920
nope


[15-Aug-18 12:51 PM] siu#3920
not me


[15-Aug-18 12:53 PM] SHossain#0007
deleted data dir except the conf and dat file. start the chain, synced to 348 straight


[15-Aug-18 12:54 PM] siu#3920
everything ok then?


[15-Aug-18 12:55 PM] siu#3920
im off for the afternoon. Ill try to comeback later at night


[15-Aug-18 01:02 PM] SHossain#0007
also with -reindex i'm ending up on `  "blocks": 348,
  "longestchain": 0,`


[15-Aug-18 01:03 PM] SHossain#0007
`AT5 hwmheight.341 vs pindex->nHeight.339 t.1534360597 reorg.2`


[15-Aug-18 01:04 PM] SHossain#0007
@Alright what would happen if you sync the longest chain from this node? `94.130.224.11`


[15-Aug-18 01:06 PM] Alright#0419
just a minute


[15-Aug-18 01:08 PM] SHossain#0007
not sure if i broke the chain while putting tokenorders


[15-Aug-18 01:10 PM] jl777c#5810
"blocks": 348,


[15-Aug-18 01:10 PM] SHossain#0007
i have the same


[15-Aug-18 01:10 PM] jl777c#5810
getblockhash 348
008b2c2c44ce6cdd43d0c4b5550efeefe0fae241a70b3c754cf143b75ddd14dc


[15-Aug-18 01:10 PM] jl777c#5810
7 connections


[15-Aug-18 01:10 PM] Alright#0419
failed to sync from that node SHo


[15-Aug-18 01:10 PM] SHossain#0007
./komodo-cli -ac_name=AT5 getblockhash 348
008b2c2c44ce6cdd43d0c4b5550efeefe0fae241a70b3c754cf143b75ddd14dc


[15-Aug-18 01:11 PM] jl777c#5810
you have latest jl777?


[15-Aug-18 01:11 PM] SHossain#0007
i see there were some updates
```
   8d13c0e..59e96a4  jl777      -> origin/jl777
Updating 8d13c0e..59e96a4
Fast-forward
 src/cc/faucet.cpp  | 4 ++++
 src/cc/rewards.cpp | 2 +-
 2 files changed, 5 insertions(+), 1 deletion(-)
```


[15-Aug-18 01:12 PM] jl777c#5810
it synced rightup with latest


[15-Aug-18 01:13 PM] SHossain#0007
updating now


[15-Aug-18 01:18 PM] jl777c#5810
the network does seem a bit forked as I have 5 connections but no longest chain


[15-Aug-18 01:18 PM] jl777c#5810
probably due to my faucetget change


[15-Aug-18 01:19 PM] jl777c#5810
not sure where the fork is, but as long as the latest version is the longest chain , it should fix itself


[15-Aug-18 01:19 PM] SHossain#0007
i got this after i restarted 1 node `AT5 hwmheight.343 vs pindex->nHeight.339 t.1534360597 reorg.4`


[15-Aug-18 01:20 PM] SHossain#0007
```
  "blocks": 350,
  "longestchain": 350,
  "timeoffset": 0,
  "tiptime": 1534364128,
  "connections": 3,
```


[15-Aug-18 01:20 PM] jl777c#5810
00d1001199536d5d4b042a1d7732517c4e5429541dad3cd5847ca5716084743c


[15-Aug-18 01:20 PM] jl777c#5810
i am on 350 also, it seems the right chain


[15-Aug-18 01:20 PM] SHossain#0007
other node says
```
  "blocks": 350,
  "longestchain": 0,
  "timeoffset": 0,
  "tiptime": 1534364128,
  "connections": 8,
```


[15-Aug-18 01:21 PM] jl777c#5810
if the fork is at 339, then we just need to mine this chain 20 blocks or so more


[15-Aug-18 01:21 PM] SHossain#0007
```
./komodo-cli -ac_name=AT5 getblockhash 350
00d1001199536d5d4b042a1d7732517c4e5429541dad3cd5847ca5716084743c
```


[15-Aug-18 01:21 PM] SHossain#0007
ok. i'll start mining with 8 threads


[15-Aug-18 01:28 PM] jl777c#5810
longestchain got set now


[15-Aug-18 01:28 PM] jl777c#5810
8 connections


[15-Aug-18 01:29 PM] SHossain#0007
mine not set yet with 8 connections


[15-Aug-18 01:29 PM] SHossain#0007
with 2 connections have longest chain set in another node


[15-Aug-18 01:31 PM] SHossain#0007
```
  "blocks": 371,
  "longestchain": 0,
  "timeoffset": 0,
  "tiptime": 1534364989,
  "connections": 10,
```


[15-Aug-18 01:31 PM] SHossain#0007
```
  "blocks": 371,
  "longestchain": 371,
  "timeoffset": 0,
  "tiptime": 1534364989,
  "connections": 5,
```


[15-Aug-18 01:36 PM] SHossain#0007
ok


[15-Aug-18 01:36 PM] jl777c#5810
spun up a few more nodes across geo region

{Reactions}
üíØ 

[15-Aug-18 01:36 PM] SHossain#0007
now it is set on both nodes


[15-Aug-18 01:37 PM] SHossain#0007
thank you very much


[15-Aug-18 01:37 PM] SHossain#0007
i see 11 and 6 connections


[15-Aug-18 01:38 PM] SHossain#0007
i have 2 token orders
```
        {
            "funcid": "s",
            "txid": "cd72be13a30bb1405004462b34aa5e9a4d733b5c1e6a4f924c8e8ac8b5767c1e",
            "vout": 0,
            "amount": "10000000",
            "askamount": "10000000",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": "10000000.00000000",
            "price": "1.00000000"
        },
        {
            "funcid": "s",
            "txid": "ec17a9cc71fc869f95d4dd6495bccb41e3933e8c4a375ba0c1d66de8b1153c4b",
            "vout": 0,
            "amount": "10000000",
            "askamount": "10000000",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": "1000000.00000000",
            "price": "0.10000000"
        },
```


[15-Aug-18 01:38 PM] jl777c#5810
I hope for no more hardforking changes!

{Reactions}
ü§ûüèΩ 

[15-Aug-18 01:53 PM] siu#3920
Did you break the chain trying to buy WEED?? :trollface:


[15-Aug-18 01:55 PM] jl777c#5810
other than chain sync issues due to hardfork changes, not sure there were any actual bugs after the faucetget was fixed and it seems dice is working better than it ever has and even rewards had it confirmed it can spend mempool, which makes it resistant to a spam attack. so we now seem to have not only the initial level functionality working, but also defenses against the simple attacks


[15-Aug-18 01:56 PM] jl777c#5810
plz let me know of any bugs that would affect consensus ASAP, we are fast approaching 980,000 which is the latest to start the 1 million block update


[15-Aug-18 02:02 PM] SHossain#0007
@siu i have bids, asks in orderbook now. please test partial fill, full fill etc...


[15-Aug-18 02:11 PM] SHossain#0007
did a partial fillask
```
remaining_nValue 9999000.00000000 (10000000.00000000 - 1000.00000000)
unitprice 1.00000000 received_assetoshis 1000 orig 10000000
got recvunitprice 1.00000000 >= 1.00000000 unitprice, new unitprice 1.00000000
AssetValidate (S)
vin1 10000000, vout0 9999000, vout1 1000, AssetValidateSellvin
Got 0.10000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
got recvunitprice 1.00000000 >= 1.00000000 unitprice, new unitprice 1.00000000
fill validated
AssetValidate (S)
vin1 10000000, vout0 9999000, vout1 1000, AssetValidateSellvin
Got 0.10000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
got recvunitprice 1.00000000 >= 1.00000000 unitprice, new unitprice 1.00000000
fill validated
```


[15-Aug-18 02:13 PM] SHossain#0007
```
{
    "result": {
        "result": "success",
        "CCaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
        "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
        "balance": 100001000
    },
    "error": null,
    "id": null
}
```
token balance reflects the `tokenfillask`


[15-Aug-18 02:15 PM] siu#3920
Will get to it when i get home


[15-Aug-18 02:16 PM] SHossain#0007
full `tokenfillask` worked.


[15-Aug-18 02:16 PM] SHossain#0007
new token balance `"balance": 100001100`


[15-Aug-18 02:26 PM] Alright#0419
I just have 1 more thing I want to confirm with rewards. Want to make sure once there isn't enough funding, `rewardsunlock` will still work properly


[15-Aug-18 02:26 PM] Alright#0419
Going to take a bit for the rewards to accrue though


[15-Aug-18 02:28 PM] SHossain#0007
```
        {
            "funcid": "s",
            "txid": "c8a09e1bbeb3e30ea244f7bf4e99b57a7bfd7a237ff72d70348cc1ce9985be6a",
            "vout": 0,
            "amount": "1000",
            "askamount": "1000",
            "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
            "tokenid": "94b5dd0c386916b8e09c1f66bdf7a66f9fe43561c0876578bceaa9b5bb106cba",
            "totalrequired": "4200.00000000",
            "price": "4.20000000"
        },
```
tried to overfill this order with the following command
```
{
    "method":"tokenfillask",
"params": ["94b5dd0c386916b8e09c1f66bdf7a66f9fe43561c0876578bceaa9b5bb106cba","c8a09e1bbeb3e30ea244f7bf4e99b57a7bfd7a237ff72d70348cc1ce9985be6a","1000001"]
}
```


[15-Aug-18 02:28 PM] SHossain#0007
sendrawtransaction output:
`61caa55bd365023b2edcd8e07f23ca6311c3f942d111c577e4ef77a5fd26bffb`


[15-Aug-18 02:30 PM] SHossain#0007
i got the token in my account and the order disappeared from orderbook after it got filled


[15-Aug-18 02:33 PM] SHossain#0007
@cipi are you around for some chaotic token testing? üòõ


[15-Aug-18 02:34 PM] Alright#0419
Oh just remembered this. Did the `tokenfillask` turning a `tokenfill` into a `tokenfillask` get fixed?


[15-Aug-18 02:34 PM] jl777c#5810
what do you mean?


[15-Aug-18 02:37 PM] SHossain#0007
@Alright that is supposed to be normal


[15-Aug-18 02:37 PM] Alright#0419
someone do a tokenask please


[15-Aug-18 02:38 PM] Alright#0419
Don't think it's normal


[15-Aug-18 02:38 PM] SHossain#0007
```
        {
            "funcid": "s",
            "txid": "e79f9f329152f1f82dd64008ffdb2e6c2d5024c322993e34b13c9a219e4ac496",
            "vout": 0,
            "amount": "10",
            "askamount": "10",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": "10.00000000",
            "price": "1.00000000"
        },
```


[15-Aug-18 02:38 PM] Alright#0419
ok filling this one 
```
  {
    "funcid": "s",
    "txid": "477502248677649554cb06031e1cd472181e2ff81ea6ce05a0f8c354d16919f8",
    "vout": 0,
    "amount": "10000",
    "askamount": "10000",
    "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
    "tokenid": "94b5dd0c386916b8e09c1f66bdf7a66f9fe43561c0876578bceaa9b5bb106cba",
    "totalrequired": "42000.00000000",
    "price": "4.20000000"
  }
]
```


[15-Aug-18 02:39 PM] Alright#0419
```
./komodo-cli -ac_name=AT5 tokenfillask 94b5dd0c386916b8e09c1f66bdf7a66f9fe43561c0876578bceaa9b5bb106cba 477502248677649554cb06031e1cd472181e2ff81ea6ce05a0f8c354d16919f8 100
{
  "result": "success",
  "hex": "0100000003e24930cc3da4e056cea0ace90fbb55628b825d94a3a01cdade9a7d9d99ad839a0100000049483045022100a869984634ceb44c716a74c953f119ef61589a88a3a1aaf4eb7f0faf922c4a8502200583c8bde1abd13f0a86a360823c097fc5a7742edf69c0084c86b689e25818b301fffffffff81969d154c3f8a005cea61ef82f1e1872d41c1e0306cb549564778624027547000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281402d7a13e2962d5899d9ea0ad91ab7b9d6c03345130ec3b6122323f05dafa0264f13f36fc2cf19df2664c8e226473e1d87d9cfd71a2ebd39189be14485f863d586a100af038001e3a10001ffffffff43db85871a4de1da66be071ce875f91231c09d8e78ff298dfb4f09af853bdb4b0100000049483045022100c90644f9b68ba62e610cad06bf99a16e2a62e48764b26ff7fae12ea6c3938b5c022078bfadd65980c6a1112dfe50cdbe793ea7534aed4f6e97fdf884269155f61e7001ffffffff05ac26000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc6400000000000000302ea22c8020329d8a3e0e89b68e469d087203351d16856e699e043838d45c2efbb170b87cca8103120c008203000401cc002465c70900000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac994712810d0000002321027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392ac00000000000000004f6a4c4ce35394b5dd0c386916b8e09c1f66bdf7a66f9fe43561c0876578bceaa9b5bb106cba00ec1c1cc8030000210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f600000000"
}
```


[15-Aug-18 02:40 PM] siu#3920
I have asks for weed @alright


[15-Aug-18 02:41 PM] Alright#0419
```
  {
    "funcid": "S",
    "txid": "85ff070447fabd24848f753ee8c9d186ea437581abd109941ae665e657bede9d",
    "vout": 0,
    "amount": "9900",
    "askamount": "9900",
    "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
    "tokenid": "94b5dd0c386916b8e09c1f66bdf7a66f9fe43561c0876578bceaa9b5bb106cba",
    "totalrequired": "41580.00000000",
    "price": "4.20000000"
  },
```


[15-Aug-18 02:41 PM] Alright#0419
changed it ^


[15-Aug-18 02:42 PM] SHossain#0007
ok. got it. the order was for 10,000. you filled 100. it was supposed to show `s` with the remaining required balance 9900


[15-Aug-18 02:43 PM] SHossain#0007
but it was changed to `S`


[15-Aug-18 02:43 PM] jl777c#5810
yes an initial sell is 's', a partial fill changes it is 'S' as that came as change from a fillask


[15-Aug-18 02:43 PM] jl777c#5810
that is the way it works


[15-Aug-18 02:43 PM] jl777c#5810
same for 'b'


[15-Aug-18 02:44 PM] Alright#0419
How can we tell if it's a tokenfillask or tokenask?


[15-Aug-18 02:45 PM] Alright#0419
`s` means someone is offering tokens for native coins, `S` means the opposite no?


[15-Aug-18 02:46 PM] Alright#0419
`S` would be an overfilled `tokenfillask`, right?


[15-Aug-18 02:46 PM] SHossain#0007
yes, that was my understanding too


[15-Aug-18 02:46 PM] SHossain#0007
overfill would make the change


[15-Aug-18 02:47 PM] SHossain#0007
i fulfilled this order
```
        {
            "funcid": "S",
            "txid": "36da1dd6a7eec6b8c4de3621b982fa146dc5bd111992a73fd34fedb317c09ff2",
            "vout": 0,
            "amount": "9800",
            "askamount": "9800",
            "origaddress": "RLSgpvHqCYpkuHmSESZHqoDD2ssZrVtu1m",
            "tokenid": "94b5dd0c386916b8e09c1f66bdf7a66f9fe43561c0876578bceaa9b5bb106cba",
            "totalrequired": "41160.00000000",
            "price": "4.20000000"
        }
```


[15-Aug-18 02:47 PM] SHossain#0007
using tokenfillask


[15-Aug-18 02:48 PM] SHossain#0007
this entry now disappeared from orderbook


[15-Aug-18 02:49 PM] jl777c#5810
overfill would leave no sell left


[15-Aug-18 02:49 PM] jl777c#5810
partial fill leaves some left and so 's' -> 'S" or 'S' -> 'S;


[15-Aug-18 02:50 PM] jl777c#5810
once it is overfilled or exactly filled, it disappears


[15-Aug-18 02:50 PM] jl777c#5810
if there is any left, it needs to stay on the orderbook


[15-Aug-18 02:50 PM] jl777c#5810
and I made both 's' and 'S' tx be mostly alike


[15-Aug-18 02:51 PM] jl777c#5810
so the same logic to fill an 's' can be used for 'S'


[15-Aug-18 02:51 PM] Alright#0419
Ah the way I was looking at it, if I saw `s` I needed to do `tokenfillask` and if I saw `S`, I needed to do `tokenask`


[15-Aug-18 02:54 PM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479407570486951940/Screenshot_from_2018-08-15_22-54-13.png


[15-Aug-18 02:59 PM] SHossain#0007
fillbid worked fine


[15-Aug-18 02:59 PM] SHossain#0007
putting more bid orders


[15-Aug-18 03:05 PM] SHossain#0007
@Alright there are some bid orders now


[15-Aug-18 03:06 PM] SHossain#0007
please test partial fill, full fill, over fill


[15-Aug-18 03:06 PM] SHossain#0007
full fill worked for me


[15-Aug-18 03:07 PM] SHossain#0007
did a partial fill of 50 on this one
```
        {
            "funcid": "b",
            "txid": "2b0bed2aea7cb895fa95b7aa7828c5d5a347206ea33a0976ba8d9a6e1dd9f452",
            "vout": 0,
            "amount": "1000000.00000000",
            "bidamount": "1000000.00000000",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 100000,
            "price": "10.00000000"
        },
```


[15-Aug-18 03:09 PM] SHossain#0007
this popped out in my console
```
total.100000 - paid.50, remaining 99999990676440 <- 99999990676440 (100000000000000 - 9323560)
error recvunitprice 0.0018647120000000 < 0.0018647120494230 unitprice, new unitprice 0.0018647120494477
remaining 99950 -> origpubkey
```


[15-Aug-18 03:13 PM] SHossain#0007
order now changed to 
```
        {
            "funcid": "B",
            "txid": "19c703e973844819f35fdb7de3bf0d54251a0dd5de6753aec141516c3f07ccf8",
            "vout": 0,
            "amount": "999999.90676440",
            "bidamount": "999999.90676440",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 99950,
            "price": "10.00500157"
        }
```


[15-Aug-18 03:14 PM] SHossain#0007
don't know how there is fraction in the price. i placed round figured price on my order


[15-Aug-18 03:18 PM] Alright#0419
`./komodo-cli -ac_name=AT5 tokenfillbid 6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e 9f761556931adee75c2db8dcf545f628eea1cf7dfa5216dbadae900a05bdd2fd 12000000`


[15-Aug-18 03:18 PM] Alright#0419
was what I did


[15-Aug-18 03:19 PM] Alright#0419
Is that the same order )O.o


[15-Aug-18 03:19 PM] SHossain#0007
did a new fillbid order on the above `B` order for 50
the following showed up in console after/while displaying the HEX
```
total.99950 - paid.50, remaining 99999981352880 <- 99999981352880 (99999990676440 - 9323560)
error recvunitprice 0.0018647120000000 < 0.0018647120494477 unitprice, new unitprice 0.0018647120494724
remaining 99900 -> origpubkey
```
these were after the HEX was broadcaster
```
AssetValidate (B)
vin2 100, vout2 50, vout3 50, Got 999999.90676440 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 100, vout2 50, vout3 50, Got 999999.90676440 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 100, vout2 50, vout3 50, Got 999999.90676440 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 100, vout2 50, vout3 50, Got 999999.90676440 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 100, vout2 50, vout3 50, Got 999999.90676440 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 100, vout2 50, vout3 50, Got 999999.90676440 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
```


[15-Aug-18 03:21 PM] SHossain#0007
this is the new order now from the remaining
```
        {
            "funcid": "B",
            "txid": "fd77ca6ca796554ea0a76537a9219e5981663577784adae2a1c29de756dfed9c",
            "vout": 0,
            "amount": "999999.81352880",
            "bidamount": "999999.81352880",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 99900,
            "price": "10.01000814"
        },
```


[15-Aug-18 03:21 PM] Alright#0419
was:
```
  {
    "funcid": "b",
    "txid": "9f761556931adee75c2db8dcf545f628eea1cf7dfa5216dbadae900a05bdd2fd",
    "vout": 0,
    "amount": "1000000.00000000",
    "bidamount": "1000000.00000000",
    "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
    "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
    "totalrequired": 10000,
    "price": "100.00000000"
  }
```


[15-Aug-18 03:27 PM] SHossain#0007
what was the result?


[15-Aug-18 03:28 PM] Alright#0419
Not even sure lol


[15-Aug-18 03:28 PM] Alright#0419
txid of the tokenfillbid was ecf94c0bf0b7e86ddcfbfabc9f279498247c5696b02f60638e4e2bf6abd1dff7


[15-Aug-18 03:28 PM] SHossain#0007
did you get the tokens in your balance?


[15-Aug-18 03:29 PM] Alright#0419
I'm not sure if it's gone from the orderbook or what


[15-Aug-18 03:29 PM] SHossain#0007
http://cctest.explorer.dexstats.info/tx/ecf94c0bf0b7e86ddcfbfabc9f279498247c5696b02f60638e4e2bf6abd1dff7


[15-Aug-18 03:29 PM] SHossain#0007
i don't see the order in orderbook


[15-Aug-18 03:29 PM] Alright#0419
```
./komodo-cli -ac_name=AT5 tokenbalance 6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b4
{
  "result": "success",
  "CCaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
  "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b4",
  "balance": 0
}

```


[15-Aug-18 03:30 PM] Alright#0419
Oh wait I didn't have any of that token previously >.<


[15-Aug-18 03:30 PM] SHossain#0007
use `tokenbalance pubkey` perhaps?


[15-Aug-18 03:30 PM] SHossain#0007
you are checking different tokenid


[15-Aug-18 03:30 PM] Alright#0419
tokenfillbid gives tokens for native coins, yes?


[15-Aug-18 03:31 PM] Alright#0419
Ah copying from discord cut it short


[15-Aug-18 03:31 PM] Alright#0419
```
 ./komodo-cli -ac_name=AT5 tokenbalance 6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e
{
  "result": "success",
  "CCaddress": "RPbmcj1sJqh3K1RXSx6ftbvAMAiEoxNG1R",
  "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
  "balance": 990000
}
```


[15-Aug-18 03:33 PM] SHossain#0007
```        {
            "funcid": "b",
            "txid": "9a7702c40080a2825e8a587c25e8ecfbab2148c59dad8c13c8c5f8f0d9b22115",
            "vout": 0,
            "amount": "100000.00000000",
            "bidamount": "100000.00000000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 10000,
            "price": "10.00000000"
        },
        {
            "funcid": "b",
            "txid": "aa15532f0c963ad627805ed603eeda8c007e622351cd3a4f7f1b1ab94b31354e",
            "vout": 0,
            "amount": "100000.00000000",
            "bidamount": "100000.00000000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 1000,
            "price": "100.00000000"
        },```


[15-Aug-18 03:33 PM] SHossain#0007
you may have filled the order fully and it is now gone. from the same account there are 2 more bids


[15-Aug-18 03:34 PM] SHossain#0007
in the orderbook


[15-Aug-18 03:35 PM] SHossain#0007
try again. now we know there are only 2 orders from this origaddress. we can track


[15-Aug-18 03:39 PM] Alright#0419
just did `./komodo-cli -ac_name=AT5 tokenfillbid 6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e 9a7702c40080a2825e8a587c25e8ecfbab2148c59dad8c13c8c5f8f0d9b22115 100001`


[15-Aug-18 03:39 PM] Alright#0419
Will be back in ~30 minutes, need some food


[15-Aug-18 03:39 PM] SHossain#0007
let the mempool get cleared, and will see result


[15-Aug-18 03:39 PM] SHossain#0007
sure


[15-Aug-18 03:39 PM] SHossain#0007
go ahead


[15-Aug-18 03:40 PM] SHossain#0007
i'll take off as well. almost 13 hours here. need some sleep


[15-Aug-18 03:42 PM] SHossain#0007
you filled the order and now it is gone from orderbook


[15-Aug-18 03:43 PM] SHossain#0007
Thanks to all testers who participated today üòÉ


[15-Aug-18 03:43 PM] SHossain#0007
A lot of progress and testing done in a day üëèüèΩ


[15-Aug-18 03:51 PM] SHossain#0007
i have created plenty orders to play with, if anyone is feeling like playing with them


[15-Aug-18 04:10 PM] Alright#0419
@SHossain orderbook is pretty cluttered, could you cancel anything possible


[15-Aug-18 04:10 PM] Alright#0419
Oh forgot I can do tokenorders <txid>


[15-Aug-18 04:20 PM] Alright#0419
just going to play around with my own tokens and bids/asks for now


[15-Aug-18 04:27 PM] siu#3920
Token orders should add token name if possible


[15-Aug-18 04:27 PM] siu#3920
i know token id is the real name, but for eyes sake it should also have the token name


[15-Aug-18 04:33 PM] SHossain#0007
> Token orders should add token name if possible
i guess GUI will have to do that based on `tokenid`


[15-Aug-18 04:41 PM] Alright#0419
Please no one test `rewardsunlock` on the first plan on AT5


[15-Aug-18 04:41 PM] Alright#0419
if you have to test it, test it on your own plan please


[15-Aug-18 04:42 PM] siu#3920
@SHossain but that would make a once call process a 2 call process.... wont it?


[15-Aug-18 04:43 PM] Alright#0419
I think it would help to add the name of the coin after each amount that is denominated in native coins for assets


[15-Aug-18 04:44 PM] Alright#0419
still confusing coins and assetoshis sometimes


[15-Aug-18 04:46 PM] siu#3920
me too


[15-Aug-18 05:29 PM] siu#3920
did this fillask: ```{
    "method":"tokenfillask",
"params": ["6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e","3fc9b68f77986b56cfcd050430455b470eee47219bab58262a286af072c8086a","1234"]
}
```


[15-Aug-18 05:30 PM] siu#3920
all worked


[15-Aug-18 05:30 PM] siu#3920
balances are as expected


[15-Aug-18 05:37 PM] siu#3920
```
```{
    "result": {
        "result": "success",
        "hex": "0100000003147f3927ef4ac3cf2414ba820d1debadd7ba9d5393d8ebc9dac19776374ea86f0200000049483045022100b7044cd0d35686ecf32a8a8ba85d44b5a84e91388b8e149616d4585d408d38050220419e127bb3b4ffb9d16e69b992015c2398f9a1ff23e71428e6570410183b84cb01ffffffff9dd614f37433a89137b2719f0b4e0912c27a2c25be33203d43425a824174ba76000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140e68e3fc7802e57af8fa25ebedb744f88f69252ae8e4d0453d1c66e90a44ce713242473c15d0d99c4edc53e1047b5c5293a77c1d754fb89ca7e6173b8daeee244a100af038001e3a10001ffffffff9dd614f37433a89137b2719f0b4e0912c27a2c25be33203d43425a824174ba7603000000484730440220557f5d16520316a5585c45e22f04dcd5e7cf9e222a9134b504efec646921a75102202f2845bf9b4fb2bd90371768ba72bf32fa906004a19c32f49beeb6bde46d90f201ffffffff05fc7c010000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccd204000000000000302ea22c8020a6d6b6e4597fcd444d6a28c4dbcfc7ec344b6cd33a7c371c09fd7c44899749658103120c008203000401cc0084a8909c05000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6acd77ebfaf6b06000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac00000000000000004f6a4c4ce3536d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e0038123186bb0100210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000"
    },
    "error": null,
    "id": null
}```


[15-Aug-18 05:38 PM] siu#3920
```
AssetValidate (S)
vin1 98766, vout0 97532, vout1 1234, AssetValidateSellvin
Got 0.00098766 to origaddr.(RRFHykmhREKvJi6gRdccNbKt7572QaDgjZ)
got recvunitprice 50.00000000 >= 50.00000000 unitprice, new unitprice 50.00000000
fill validated

```


[15-Aug-18 08:42 PM] Alright#0419
One thing I found is that if you try to do `tokenaskfill` on a `tokenbid` you get a `dust` error


[15-Aug-18 08:42 PM] Alright#0419
@dukeleto could you add an error message for that?


[15-Aug-18 10:47 PM] dukeleto#7326
@Alright sure, what would you prefer is returned?


[15-Aug-18 10:47 PM] dukeleto#7326
@Alright is that where you are using the wrong txid for the RPC function?


[15-Aug-18 11:40 PM] jl777c#5810
the GUI will have to remember tokenid ->name


[15-Aug-18 11:59 PM] jl777c#5810
i didnt see any bugs posted, formal or anecdotal. I guess I will start working on the next round of CC contracts. have some pretty crazy ideas, not sure all of them will work

{Reactions}
üëå (6) 

[16-Aug-18 12:36 AM] Deleted User#0000
Crazy ideas are the best ones üòÑ


[16-Aug-18 01:56 AM] grewalsatinder#9653
let the wild family or lizards grow! üéâ 
ü¶é


[16-Aug-18 01:58 AM] jl777c#5810
ok, I figured out how to do micropayments, well actually mempool based payments that is secure


[16-Aug-18 01:58 AM] jl777c#5810
I think that will be the next one to do


[16-Aug-18 01:59 AM] jl777c#5810
and really, it isnt limited to small payments, it can work with any size


[16-Aug-18 02:00 AM] jl777c#5810
but I think I will limit it to 32-bits of 0.0001 denomination -> 4 billion  / 10000 -> 400,000 would be the max payment


[16-Aug-18 02:07 AM] grewalsatinder#9653
üò± I want micropayments!!!!


[16-Aug-18 02:49 AM] jl777c#5810
seems in Sept timeframe I can get it ready, barring bug barrage from existing codes


[16-Aug-18 03:00 AM] grewalsatinder#9653
can you explain a bit on difference between your idea of micropayments and lightening network ?


[16-Aug-18 03:00 AM] grewalsatinder#9653
from your point of view ?


[16-Aug-18 03:04 AM] jl777c#5810
mine is a simple approach that most people should be able to understand. no crazy complicated bidirectional channel scripts. it is also a direct p2p approach, so you need to specifically reserve funds for specific payee


[16-Aug-18 03:04 AM] jl777c#5810
seems a good tradeoff as I dont have 3 years to get a micropayments system working, I want to be done in 3 weeks


[16-Aug-18 03:05 AM] jl777c#5810
The way it will work is you lock funds into a payments address. this can be added to whenever, using similar concepts to the faucetfunding/rewardsfunding


[16-Aug-18 03:06 AM] grewalsatinder#9653
I need micropayments for MESH blockchain. to use directly this assetchain token for micropayments, instead of converting it to CHIPS and back.


[16-Aug-18 03:06 AM] jl777c#5810
once you have funds, you then reserve a portion of it for a specific payee pubkey this doesnt send anything, but reserves the stated amount for paying just that one pubkey


[16-Aug-18 03:07 AM] jl777c#5810
once that reserve is notarized (or enough confirms) then it can be used for sending a mempool based payment. even if the chain is reorged, the mempool transaction just gets processed again, so there is assurance that a payment made, will in fact be valid


[16-Aug-18 03:08 AM] jl777c#5810
final piece is to release funds that are reserved for paying a specific pubkey. this has a delayed effect until notarized or enough confirms. thus mempool payment is assured as the funds for the payment are locked in the CC contract and even if the chain is reorged, the tx will still have the funds from the reserved amounts


[16-Aug-18 03:09 AM] jl777c#5810
in a sense it simulates account balances, even though it is fundamentally utxo based


[16-Aug-18 03:11 AM] grewalsatinder#9653
so mempools will work like a per second/mil second micropayments?


[16-Aug-18 03:11 AM] jl777c#5810
more like a couple of seconds, but yes, as soon as it arrives in the mempool (or via whatever side channel), the payment is not reversible


[16-Aug-18 03:12 AM] grewalsatinder#9653
okay


[16-Aug-18 03:12 AM] jl777c#5810
I can also have any unallocated funds used toward payments to pubkeys payee that is not specfically reserved. this might get double spent,but for small amounts it would be convenient to not have to setup a reserve


[16-Aug-18 03:13 AM] jl777c#5810
for such, the normal "until its notarized it isnt permanent" rules would be in effect, but really unless you are transacting with the actual attacker, it will be valid


[16-Aug-18 03:14 AM] jl777c#5810
so I think for most people most of the time, the unreserved locked funds can serve the purpose for quick instant payments to any destination

{Reactions}
üôè 

[16-Aug-18 03:15 AM] siu#3920
i think the token contract needs an `orderdetails tokenid [txid]` call


[16-Aug-18 03:15 AM] siu#3920
good morning btw

{Reactions}
‚òï (2) 

[16-Aug-18 03:20 AM] siu#3920
right now i did a fillbid but im not sure what it did. I know it substracted tokens, but im not sure if i send the equivalent quantity of coins.


[16-Aug-18 03:21 AM] SHossain#0007
i did a full fillbid, worked fine. now doing half fill bid


[16-Aug-18 03:22 AM] siu#3920
i did a partialfill and i dont see the rest of the order that should be reposted


[16-Aug-18 03:23 AM] siu#3920
i guess its just that i cant find it, it should have worked fine


[16-Aug-18 03:23 AM] siu#3920
the thing is that finding these details is almost imposible if you are not keeping track of your balances


[16-Aug-18 03:25 AM] jl777c#5810
do you have the txid?


[16-Aug-18 03:25 AM] jl777c#5810
look at the outputs of the fill txid


[16-Aug-18 03:25 AM] jl777c#5810
that seems to be the orderdetails, this is for the GUI


[16-Aug-18 03:25 AM] siu#3920
http://cctest.explorer.dexstats.info/tx/a910e6c8c43e5b31292dc6f95fd4c8e8b4e060b3195c8fa78ced65ccc5c7341d


[16-Aug-18 03:25 AM] siu#3920
ok


[16-Aug-18 03:27 AM] jl777c#5810
assets.cpp details the exact purpose of the various vins/vouts


[16-Aug-18 03:27 AM] jl777c#5810
you need to understand things at that level to understand what is going on


[16-Aug-18 03:28 AM] SHossain#0007
Before:
```
        {
            "funcid": "b",
            "txid": "7c0ae154bae2ccf097d098073002ac0ed69a6983b0dd3fb298a66bbdadf0b456",
            "vout": 0,
            "amount": "1000000.00000000",
            "bidamount": "1000000.00000000",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 100000,
            "price": "10.00000000"
        },
```

command used to fill 50,000
```
{
    "method":"tokenfillbid",
"params": ["6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e","7c0ae154bae2ccf097d098073002ac0ed69a6983b0dd3fb298a66bbdadf0b456","50000"]
}
```


[16-Aug-18 03:28 AM] SHossain#0007
HEX
```
{
"0100000003450d182711d7219a7426bfa918d44a8c98157656c9a5ee99d4670f5a942be0c504000000484730440220467a92886cca30cbdc7f09375f06e8ce66c8e73ff2b372ace67282fe91bbd17c022066191392cde8f14a6afbeef06a5209f73785df9df7596b9adba0839d6bae13fa01ffffffff56b4f0adbd6ba698b23fddb083699ad60eac02300798d097f0cce2ba54e10a7c000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702814037a79c3b24b2f0982d2af7023b8d7e9a5a32bb93adb896954c2727e1119ff6f85c52a06128520de95b6f02d731af50672a0d18d4f2af8785572355120acc0ebda100af038001e3a10001ffffffff450d182711d7219a7426bfa918d44a8c98157656c9a5ee99d4670f5a942be0c5030000007b4c79a276a072a26ba067a56580210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a681406d9eebcd835c25381e300e7d357a9a4371034a6a95c411902e7fee240c4d7538570704147ef34034c9ed00a4ceae47f8e96cd5289f0aaee3e6c26d6b8bcbcb22a100af038001e3a10001ffffffff06c902c0e4f05a0000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc373dba2b0200000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac50c3000000000000302ea22c8020bc485b86ffd067abe520c078b74961f6b25e4efca6388c6bfd599ca3f53d8dae8103120c008203000401cced8ff30500000000302ea22c802096195e66e99913358dbfc3cda384e43511843822f90c5fd7c1950e2224963ac08103120c008203000401cca80b8d000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000004f6a4c4ce3426d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e50c30000000000002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
},
```
Output:
```
c5e02b945a0f67d499eea5c9567615988c4ad418a9bf26749a21d71127180d45
```


[16-Aug-18 03:28 AM] SHossain#0007
After:
```
        {
            "funcid": "B",
            "txid": "c5e02b945a0f67d499eea5c9567615988c4ad418a9bf26749a21d71127180d45",
            "vout": 0,
            "amount": "999906.76439753",
            "bidamount": "999906.76439753",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 50000,
            "price": "19.99813529"
        },
```


[16-Aug-18 03:28 AM] jl777c#5810
price seems wrong


[16-Aug-18 03:28 AM] SHossain#0007
yes


[16-Aug-18 03:29 AM] siu#3920
yes


[16-Aug-18 03:29 AM] siu#3920
that i think is the same that happens to me


[16-Aug-18 03:29 AM] SHossain#0007
noticed it last night. but, the change of price was low


[16-Aug-18 03:29 AM] SHossain#0007
now, almost double


[16-Aug-18 03:29 AM] siu#3920
```        {
            "funcid": "B",
            "txid": "fd77ca6ca796554ea0a76537a9219e5981663577784adae2a1c29de756dfed9c",
            "vout": 0,
            "amount": "999999.81352880",
            "bidamount": "999999.81352880",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 99900,
            "price": "10.01000814"
        },```


[16-Aug-18 03:29 AM] jl777c#5810
i think this is a display issue? is the price actually changed to 19.998 or does old price of 10 still work


[16-Aug-18 03:30 AM] SHossain#0007
i can try using 10 again


[16-Aug-18 03:30 AM] siu#3920
i bout sold 123 ALIEN for 10 coins a piece


[16-Aug-18 03:30 AM] jl777c#5810
what printed in the console about prices?


[16-Aug-18 03:30 AM] siu#3920
but got less than that if i follow this order that formed afterwards, and the price changed


[16-Aug-18 03:30 AM] jl777c#5810
what printed in the console about prices?


[16-Aug-18 03:31 AM] SHossain#0007
```
total.100000 - paid.50000, remaining 99990676439753 <- 99990676439753 (100000000000000 - 9323560247)
error recvunitprice 0.0018647120494000 < 0.0018647120494230 unitprice, new unitprice 0.0018647120494460
remaining 50000 -> origpubkey
total.100000 - paid.50000, remaining 99990676439753 <- 99990676439753 (100000000000000 - 9323560247)
error recvunitprice 0.0018647120494000 < 0.0018647120494230 unitprice, new unitprice 0.0018647120494460
remaining 50000 -> origpubkey
AssetValidate (B)
vin2 99948173, vout2 50000, vout3 99898173, Got 1000000.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 99948173, vout2 50000, vout3 99898173, Got 1000000.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 99948173, vout2 50000, vout3 99898173, Got 1000000.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 99948173, vout2 50000, vout3 99898173, Got 1000000.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 99948173, vout2 50000, vout3 99898173, Got 1000000.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
AssetValidate (B)
vin2 99948173, vout2 50000, vout3 99898173, Got 1000000.00000000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
fillbuy validated
total.100000 - paid.50000, remaining 99990676439753 <- 99990676439753 (100000000000000 - 9323560247)
error recvunitprice 0.0018647120494000 < 0.0018647120494230 unitprice, new unitprice 0.0018647120494460
remaining 50000 -> origpubkey
```


[16-Aug-18 03:32 AM] siu#3920
on my side for my order it printed this: ```fill validated
total.1000 - paid.123, remaining 990447476054 <- 990447476054 (1000000000000 - 9552523946)
error recvunitprice 0.7766279630894308 < 0.7766279631452241 unitprice, new unitprice 0.7766279631530492
remaining 877 -> origpubkey
```


[16-Aug-18 03:32 AM] jl777c#5810
is fillsell acting strange prices too?


[16-Aug-18 03:33 AM] siu#3920
no


[16-Aug-18 03:33 AM] siu#3920
i only noticed in fillbid


[16-Aug-18 03:33 AM] jl777c#5810
just with some fillbid or all?


[16-Aug-18 03:34 AM] SHossain#0007
let me test fillask


[16-Aug-18 03:34 AM] siu#3920
this is the first one i did


[16-Aug-18 03:34 AM] siu#3920
need to test more


[16-Aug-18 03:34 AM] jl777c#5810
ok, i would expect it to fail all the time and not just occasional ones


[16-Aug-18 03:35 AM] siu#3920
ill test another


[16-Aug-18 03:35 AM] SHossain#0007
choosing this order
```
        {
            "funcid": "S",
            "txid": "9e869765d5bbd10d76ad4a633acec1a52c4f9d61575f3087a8d8509b3b1fb966",
            "vout": 0,
            "amount": "9999000",
            "askamount": "9999000",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": "9999000.00000000",
            "price": "1.00000000"
        },
```


[16-Aug-18 03:37 AM] SHossain#0007
```
"method":"tokenfillask",
"params": ["6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e","9e869765d5bbd10d76ad4a633acec1a52c4f9d61575f3087a8d8509b3b1fb966","777"]
```


[16-Aug-18 03:37 AM] SHossain#0007
HEX
``` "0100000003450d182711d7219a7426bfa918d44a8c98157656c9a5ee99d4670f5a942be0c5040000004847304402200d7261dfa9f704af01e251a07873a2f2fda857bebab24616deae7d778702ed0202200a83357b0e30be92107addcb1375e5c7dff03f46d6ed99cb11bf3f11375dcc3e01ffffffff66b91f3b9b50d8a887305f57619d4f2ca5c1ce3a634aad760dd1bbd56597869e000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702814023d6583ca3224ac6346fb8fec4502b05009c6208462c0794d8842bc400c732a96d19530f30f5d83d1e805160471542b541490ba6df99d89cb4d0fb10b08d095fa100af038001e3a10001ffffffffb7f55bdaf31c6570e455ebfaee07db6b259b246092aceea73e8bfe9b8c977a990100000049483045022100bdcca05dea8417c8adccd4b8d9527af3123ca62118f992040ac5e9fb03b25f5802204d9029b0174582005ebdc54a18205730c3efa9d4b4362b46498d95a79f5e76be01ffffffff058f8f980000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0903000000000000302ea22c802096195e66e99913358dbfc3cda384e43511843822f90c5fd7c1950e2224963ac08103120c008203000401cc00e9471712000000232103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abcacfe3f8a84d400000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000004f6a4c4ce3536d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e00af0745558d03002103fe754763c176e1339a3f62ee6b9484720e17ee4646b65a119e9f6370c7004abc00000000"
```


[16-Aug-18 03:38 AM] SHossain#0007
output
```
"result": "1e4909c88b42c0dc93f79564f2209cf84415d02a370dbbd6dea102f65e4cddf4",
```


[16-Aug-18 03:38 AM] siu#3920
yes... happened again


[16-Aug-18 03:38 AM] siu#3920
this time balances make sense


[16-Aug-18 03:39 AM] siu#3920
but new price doesnt


[16-Aug-18 03:39 AM] siu#3920
```fillbuy validated
total.100 - paid.12, remaining 9995349015977 <- 9995349015977 (10000000000000 - 4650984023)
error recvunitprice 3.8758200191666665 < 3.8758200196842130 unitprice, new unitprice 3.8758200197547872
remaining 88 -> origpubkey
```


[16-Aug-18 03:39 AM] siu#3920
terminal output


[16-Aug-18 03:39 AM] siu#3920
```{
    "method":"tokenfillbid",
"params": ["6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e","cb71909237ee349bbaa9e24f398bbe2dfbc2bf7b16a5a141a1abc0c2b897cf23","12"]
}
```


[16-Aug-18 03:39 AM] siu#3920
commnad


[16-Aug-18 03:39 AM] SHossain#0007
this is the after order:
```
        {
            "funcid": "S",
            "txid": "1e4909c88b42c0dc93f79564f2209cf84415d02a370dbbd6dea102f65e4cddf4",
            "vout": 0,
            "amount": "9998223",
            "askamount": "9998223",
            "origaddress": "RRPpWbVdxcxmhx4xnWnVZFDfGc9p1177ti",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": "9998223.00000000",
            "price": "1.00000000"
        }
```


[16-Aug-18 03:39 AM] siu#3920
```{
    "result": {
        "result": "success",
        "hex": "010000000391d2355e8046bf7a61a2c2a84592416bc10725462d14e29618b925a61078c1300200000049483045022100d40c23c59c30b7a3e053401dc0a3b4bcb4bec7d9d72ca50d39f45da49425dd2a022026114297b5e61c335bdda10fca69bb74350db058d4cff742a5c08f66e7a676d701ffffffff23cf97b8c2c0aba141a1a5167bbfc2fb2dbe8b394fe2a9ba9b34ee37929071cb000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281408559942797baf6910f0256198735de89722d9977517c28bf72e3894d6a6ec63c3dea46d611b657b093b2bf96e5ebc7f694c1f76fdb55e311c303ef1b5a54649da100af038001e3a10001ffffffff1d34c7c5cc65ed8ca78f5c19b360e0b4e8c8d45ff9c62d29315b3ec4c8e610a9030000007b4c79a276a072a26ba067a56580210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f681404ef42f720e8c2759a25130cde4c308a57da0420b930e3507e9f5b0cc39737eb65ced04296215f3aee183c6ef82b45c5d15959bc0f058999a5063cb891c7c16b9a100af038001e3a10001ffffffff05a93d3a3917090000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc576238150100000023210225583e18a48116c4c9571f530240f22affe00f95804f1947d59fbc7b825763f6ac0c00000000000000302ea22c802096195e66e99913358dbfc3cda384e43511843822f90c5fd7c1950e2224963ac08103120c008203000401cc4b04000000000000302ea22c8020a6d6b6e4597fcd444d6a28c4dbcfc7ec344b6cd33a7c371c09fd7c44899749658103120c008203000401cc00000000000000004f6a4c4ce3426d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e5800000000000000210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000"
    },
    "error": null,
    "id": null
}```


[16-Aug-18 03:39 AM] siu#3920
HEX


[16-Aug-18 03:39 AM] siu#3920
```{
    "result": "0ea7339b5bc7cfd5a7140aee3b0e78d879c039fa077895f1ba858737fbe54230",
    "error": null,
    "id": null
}```


[16-Aug-18 03:40 AM] siu#3920
TXID


[16-Aug-18 03:40 AM] SHossain#0007
```
AssetValidate (B)
vin2 1111, vout2 12, vout3 1099, Got 100000.00000000 to origaddr.(RRFHykmhREKvJi6gRdccNbKt7572QaDgjZ)
fillbuy validated
remaining_nValue 9998223.00000000 (9999000.00000000 - 777.00000000)
unitprice 1.00000000 received_assetoshis 777 orig 9999000
got recvunitprice 1.00000000 >= 1.00000000 unitprice, new unitprice 1.00000000
AssetValidate (S)
vin1 9999000, vout0 9998223, vout1 777, AssetValidateSellvin
Got 0.09999000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
got recvunitprice 1.00000000 >= 1.00000000 unitprice, new unitprice 1.00000000
fill validated
AssetValidate (S)
vin1 9999000, vout0 9998223, vout1 777, AssetValidateSellvin
Got 0.09999000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
got recvunitprice 1.00000000 >= 1.00000000 unitprice, new unitprice 1.00000000
fill validated
AssetValidate (S)
vin1 9999000, vout0 9998223, vout1 777, AssetValidateSellvin
Got 0.09999000 to origaddr.(RANyPgfZZLhSjQB9jrzztSw66zMMYDZuxQ)
got recvunitprice 1.00000000 >= 1.00000000 unitprice, new unitprice 1.00000000
fill validated
```


[16-Aug-18 03:40 AM] siu#3920
```
```{
            "funcid": "B",
            "txid": "0ea7339b5bc7cfd5a7140aee3b0e78d879c039fa077895f1ba858737fbe54230",
            "vout": 0,
            "amount": "99953.49015977",
            "bidamount": "99953.49015977",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 88,
            "price": "1135.83511545"
        },```


[16-Aug-18 03:40 AM] siu#3920
new order


[16-Aug-18 03:41 AM] jl777c#5810
ok, so price is stable for sell, but unstable for buy, i think I know why. it is the satoshis vs coins difference


[16-Aug-18 03:41 AM] jl777c#5810
investigating. plz test other areas till this is fixed


[16-Aug-18 03:42 AM] SHossain#0007
testing cancelask and cancel bid


[16-Aug-18 03:43 AM] siu#3920
@jl777c i think this is similar to the issue in barterdex


[16-Aug-18 03:43 AM] siu#3920
1/price seems to fix it if i remember correctly


[16-Aug-18 03:45 AM] SHossain#0007
will cancel this messy priced order
```
        {
            "funcid": "B",
            "txid": "0ea7339b5bc7cfd5a7140aee3b0e78d879c039fa077895f1ba858737fbe54230",
            "vout": 0,
            "amount": "99953.49015977",
            "bidamount": "99953.49015977",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e",
            "totalrequired": 88,
            "price": "1135.83511545"
        },
```


[16-Aug-18 03:47 AM] SHossain#0007
Command:
```
{
"method":"tokencancelbid",
"params": ["6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e","0ea7339b5bc7cfd5a7140aee3b0e78d879c039fa077895f1ba858737fbe54230"]
}
```
HEX:
```
"01000000029ceddf56e79dc2a1e2da4a7877356681599e21a93765a7a04e5596a76cca77fd010000004847304402207c8fd59a6967e4a023f443e1764d9e6f863ef4106898ef07132575ddd0d1fed802205dc204361f2db7b1b00c0ed8945564f3aceafd963c9975410306108949e31bf501ffffffff3042e5fb378785baf1957807fa39c079d8780e3bee0a14a7d5cfc75b9b33a70e000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281409a6bc3a847c8ff509629b2dfe2b7df7faee9c711d137931a0a172812a6a93eb201ff5f83359ec2f304db82ed27c8a34807a8c6f874cb6fd8a898353254562ce2a100af038001e3a10001ffffffff03a93d3a391709000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac181d8e000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac0000000000000000246a22e36f6d53bcf2c18438368abb1467bc2f8fb7e0a66bd08efaa903705d2b44392c719e00000000"
```
Output:
```
9489cdfe7139d110be03bdc040dbc0011986ff8fc68aa59211a98466d172092a
```


[16-Aug-18 03:47 AM] siu#3920
its not that crazy priced if you make the calculation


[16-Aug-18 03:48 AM] siu#3920
but it is not the original price afaik


[16-Aug-18 03:48 AM] SHossain#0007
Result:
Success!


[16-Aug-18 03:48 AM] jl777c#5810
pushed a possible fix. i suggest to test on a brand new chain just for this as it wil lhardfork and will take a few iterations to get right. just test with a 2 node chain, no need to propagate it to all until we get the fillbid stable


[16-Aug-18 03:49 AM] siu#3920
ok


[16-Aug-18 03:49 AM] siu#3920
@SHossain can you get one running, ill mine it


[16-Aug-18 03:49 AM] SHossain#0007
yes


[16-Aug-18 03:49 AM] SHossain#0007
i'll do it after updating


[16-Aug-18 03:49 AM] jl777c#5810
with the first fillbid it will be obvious if it is fixed or not


[16-Aug-18 03:50 AM] jl777c#5810
I think the resulting assets amounts are ok, but the price is messed up and that then messes up the 2nd fill and beyond


[16-Aug-18 03:55 AM] SHossain#0007
@siu while we test this new chain and we will have address without prior tx and balance, let's also quickly check the faucetget call


[16-Aug-18 03:56 AM] siu#3920
ok


[16-Aug-18 04:01 AM] SHossain#0007
@siu chain params. you dont need to mine. i'm mining with 2 nodes


[16-Aug-18 04:01 AM] SHossain#0007
```
./komodod -ac_cc=1 -ac_name=ATX -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6 -addnode=94.130.224.11 &
```


[16-Aug-18 04:02 AM] SHossain#0007
faucet already funded


[16-Aug-18 04:04 AM] siu#3920
ok.


[16-Aug-18 04:04 AM] siu#3920
im back


[16-Aug-18 04:04 AM] SHossain#0007
@jl777c if the privkey is not present in wallet, `faucetget` command floods the terminal and keep showing this message continuously.

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479606472901394443/Screenshot_from_2018-08-16_12-03-40.png


[16-Aug-18 04:05 AM] SHossain#0007
it stops after a while


[16-Aug-18 04:05 AM] jl777c#5810
best to have privkey in the wallet


[16-Aug-18 04:08 AM] siu#3920
``` ./komodo-cli -ac_name=ATX sendrawtransaction 010000000189cf5e86cf15bfcb88ab4c78e1e515a1b1906dfb74ebe08ede4d8226109b5b3d000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe12814031ade559eba5d2f72f876881588e8d5ab0dd771e625580df7acdc3ac3b696d156ba4e0d8f1e433013b593e555917e5562a3c2a6e1b44fb0aa38ac3e99f130a20a100af038001e4a10001ffffffff03702ade4717000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc8096980000000000232102151e1227c67ba596fe87047e6e58e088d8fc89eeee5ca7927e02c4df88b6d775ac00000000000000002a6a28e4472102151e1227c67ba596fe87047e6e58e088d8fc89eeee5ca7927e02c4df88b6d7750f35010000000000
002b7f8b5510f3cf73075bc1cf42e61cc43c5ae781d306244f1b88803cc15500
```


[16-Aug-18 04:08 AM] siu#3920
faucetget worked


[16-Aug-18 04:08 AM] siu#3920
i have 0.1 balance!

{Reactions}
üëçüèΩ 

[16-Aug-18 04:13 AM] SHossain#0007
create a new token without description 
```
{
  "result": "success",
  "tokenid": "6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303",
  "owner": "0304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6",
  "name": "Token",
  "supply": 100000000,
  "description": ""
}
```


[16-Aug-18 04:14 AM] siu#3920
can you send me a couple to get a bid filled?


[16-Aug-18 04:14 AM] SHossain#0007
sure. already preparing to send


[16-Aug-18 04:15 AM] siu#3920
02151e1227c67ba596fe87047e6e58e088d8fc89eeee5ca7927e02c4df88b6d775


[16-Aug-18 04:15 AM] SHossain#0007
b7ce6d5185d3c231999e0c35a39d371ab70526b86a724f1d7c1a90f30d3fc575


[16-Aug-18 04:16 AM] siu#3920
thanks


[16-Aug-18 04:17 AM] SHossain#0007
1 bid order in progress. waiting for mempool to be cleared


[16-Aug-18 04:17 AM] SHossain#0007
```
./komodo-cli -ac_name=ATX tokenbid Token 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 1000
{
  "result": "success",
  "hex": "010000000175c53f0df3901a7c1d4f726ab82605b71a379da3350c9e9931c2d385516dceb70200000049483045022100f82be308742d5d84b6800e360a74b0f10886503d98a0346a64702ae7c3f534a50220040347780705eb3403c9fea597912a00c05d29a118ec6e8bb4ccd5a791249dae01ffffffff030000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc7bd34c431700000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000004f6a4c4ce3626515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f8383030000000000000000210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000"
}
```


[16-Aug-18 04:18 AM] SHossain#0007
```
./komodo-cli -ac_name=ATX sendrawtransaction 010000000175c53f0df3901a7c1d4f726ab82605b71a379da3350c9e9931c2d385516dceb70200000049483045022100f82be308742d5d84b6800e360a74b0f10886503d98a0346a64702ae7c3f534a50220040347780705eb3403c9fea597912a00c05d29a118ec6e8bb4ccd5a791249dae01ffffffff030000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc7bd34c431700000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000004f6a4c4ce3626515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f8383030000000000000000210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000
46d5254df2d33408c6d1abe2cc64888425a5acc05be57d94aa741528f3128214
```


[16-Aug-18 04:18 AM] siu#3920
i dont see the order


[16-Aug-18 04:18 AM] SHossain#0007
mempool cleared,  but `tokenorders` showing empty orderbook


[16-Aug-18 04:19 AM] SHossain#0007
@siu please create a new `tokenbid` and see if this appears in orderbook


[16-Aug-18 04:20 AM] jl777c#5810
./komodo-cli -ac_name=ATX tokenbid Token 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 1000
that is invalid


[16-Aug-18 04:20 AM] SHossain#0007
sorry. yes


[16-Aug-18 04:20 AM] SHossain#0007
now i see


[16-Aug-18 04:20 AM] jl777c#5810
tokenbid numtokens tokenid price


[16-Aug-18 04:20 AM] jl777c#5810
seems need more error checking


[16-Aug-18 04:20 AM] siu#3920
its tokenbid  numtokens tokenid price


[16-Aug-18 04:21 AM] siu#3920
more coffee for shossain! :p


[16-Aug-18 04:21 AM] SHossain#0007
yes, i need more coffee. instead of using numtokens, i used token name


[16-Aug-18 04:21 AM] SHossain#0007
üòÖ


[16-Aug-18 04:22 AM] siu#3920
would happen to me any day üòÇ


[16-Aug-18 04:22 AM] siu#3920
it should have promted an error though


[16-Aug-18 04:22 AM] SHossain#0007
this is a good find as well by making mistake. the system should restrict this invalid command


[16-Aug-18 04:22 AM] SHossain#0007
```
./komodo-cli -ac_name=ATX tokenbid 1000 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 10
{
  "result": "success",
  "hex": "01000000010038c6c8aec2a154aae2c33d80f30221e6f73574a9a4f1ab2369e0ffec6b90a50000000049483045022100ea02daa9f57e1c319e7a2c0ca9b5bf74b06df65e7ff2653cb5609b4581ff4389022052acc09118e8d3bd39cb7e4208aeffca69eba01b47c516ad2ee12e0c7ea379e801ffffffff030010a5d4e8000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccf068cd792f08000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000004f6a4c4ce3626515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303e803000000000000210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000"
}
```


[16-Aug-18 04:22 AM] SHossain#0007
```
./komodo-cli -ac_name=ATX sendrawtransaction 01000000010038c6c8aec2a154aae2c33d80f30221e6f73574a9a4f1ab2369e0ffec6b90a50000000049483045022100ea02daa9f57e1c319e7a2c0ca9b5bf74b06df65e7ff2653cb5609b4581ff4389022052acc09118e8d3bd39cb7e4208aeffca69eba01b47c516ad2ee12e0c7ea379e801ffffffff030010a5d4e8000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401ccf068cd792f08000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000004f6a4c4ce3626515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303e803000000000000210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000
faa8da76392fe057e95af0b400d23d16d8b9eec0f1273df453bf84b74a1e3a4e
```


[16-Aug-18 04:23 AM] SHossain#0007
@siu order is up
```
  {
    "funcid": "b",
    "txid": "faa8da76392fe057e95af0b400d23d16d8b9eec0f1273df453bf84b74a1e3a4e",
    "vout": 0,
    "amount": "10000.00000000",
    "bidamount": "10000.00000000",
    "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
    "tokenid": "6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303",
    "totalrequired": 1000,
    "price": "10.00000000"
  }
```


[16-Aug-18 04:23 AM] siu#3920
ok


[16-Aug-18 04:23 AM] jl777c#5810
just get me a list of commands that should have gotten an error but didnt


[16-Aug-18 04:24 AM] SHossain#0007
will try invalid commands after we isolate this current bid price mismatch issue


[16-Aug-18 04:25 AM] siu#3920
fillbid on the way


[16-Aug-18 04:25 AM] SHossain#0007
hope it is partial fill üòÉ


[16-Aug-18 04:25 AM] siu#3920
yes it is


[16-Aug-18 04:26 AM] SHossain#0007
cool. your tx is in mempool


[16-Aug-18 04:27 AM] siu#3920
seems fixed


[16-Aug-18 04:28 AM] SHossain#0007
yep.


[16-Aug-18 04:28 AM] SHossain#0007
did you do 52 order?


[16-Aug-18 04:28 AM] siu#3920
yes


[16-Aug-18 04:28 AM] SHossain#0007
```
  {
    "funcid": "B",
    "txid": "dc6e939aa52a33bb66db2e6de3273d987bf0dfc40550da313825ced1758ef34b",
    "vout": 0,
    "amount": "9480.00000000",
    "bidamount": "9480.00000000",
    "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
    "tokenid": "6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303",
    "totalrequired": 948,
    "price": "10.00000000"
  }
```


[16-Aug-18 04:28 AM] SHossain#0007
new order


[16-Aug-18 04:28 AM] siu#3920
will try a decimal

{Reactions}
üëçüèΩ 

[16-Aug-18 04:31 AM] jl777c#5810
definitely try strange prices, not ones that evenly divide


[16-Aug-18 04:31 AM] SHossain#0007
```
  {
    "funcid": "B",
    "txid": "38fad0de6c1cc490a16992487cd9a163eef1d4b570c91904604e075abadf4ae4",
    "vout": 0,
    "amount": "8960.00000000",
    "bidamount": "8960.00000000",
    "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
    "tokenid": "6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303",
    "totalrequired": 896,
    "price": "10.00000000"
  }
```


[16-Aug-18 04:32 AM] siu#3920
didnt take into account the decimal


[16-Aug-18 04:32 AM] siu#3920
the fill was: ```./komodo-cli -ac_name=ATX tokenfillbid 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 dc6e939aa52a33bb66db2e6de3273d987bf0dfc40550da313825ced1758ef34b 52.13
```


[16-Aug-18 04:33 AM] SHossain#0007
HEX?


[16-Aug-18 04:33 AM] SHossain#0007
no HEX, no fix üòõ


[16-Aug-18 04:33 AM] siu#3920
```./komodo-cli -ac_name=ATX sendrawtransaction 01000000034bf38e75d1ce253831da5005c4dff07b983d27e36d2edb66bb332aa59a936edc040000004847304402200cb2ad9ccddb64bf23b4f30a12b611cd874d780384ef665a12c15ef632d6fa5902203eb91aea370133f689ee9f4fd6a368308fb04aedd03f09daff57125efb322dbf01ffffffff4bf38e75d1ce253831da5005c4dff07b983d27e36d2edb66bb332aa59a936edc000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140db7d50c4e2190f2973cd6300233b00219f08b99049db569eb037a4dd4c7ef2514863ab367fc824d41b52eef20cfce38d5a2397eb52b50edd4bc365c7a49c2787a100af038001e3a10001ffffffff4bf38e75d1ce253831da5005c4dff07b983d27e36d2edb66bb332aa59a936edc030000007b4c79a276a072a26ba067a565802102151e1227c67ba596fe87047e6e58e088d8fc89eeee5ca7927e02c4df88b6d775814015a4f70e2beb2577bf668d97bce02ffc4b9322bcf0b5ef426c715f21450f0ee1267cd35c91ed3081d3b0805e8945e17795d3bc4da2b68edb993c0e1bbf45355aa100af038001e3a10001ffffffff060000c39dd0000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0008711b0c000000232102151e1227c67ba596fe87047e6e58e088d8fc89eeee5ca7927e02c4df88b6d775ac3400000000000000302ea22c802096195e66e99913358dbfc3cda384e43511843822f90c5fd7c1950e2224963ac08103120c008203000401cc3886010000000000302ea22c8020770a8ce02b3cc31eefd05fe4a2670a7c21d18298354f414df79d73e851d3416b8103120c008203000401cc6048980000000000232102151e1227c67ba596fe87047e6e58e088d8fc89eeee5ca7927e02c4df88b6d775ac00000000000000004f6a4c4ce3426515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f8383038003000000000000210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000
38fad0de6c1cc490a16992487cd9a163eef1d4b570c91904604e075abadf4ae4
```


[16-Aug-18 04:34 AM] siu#3920
but i think @jl777c has said before there is no decimals for tokens... only one complete token can be moved


[16-Aug-18 04:34 AM] siu#3920
is this correct?


[16-Aug-18 04:35 AM] SHossain#0007
full token matches the new order and filled volume


[16-Aug-18 04:40 AM] jl777c#5810
only integer number of tokens allowed

{Reactions}
üëç 

[16-Aug-18 04:46 AM] SHossain#0007
```
Placing order without amount:
./komodo-cli -ac_name=ATX tokenfillask Token 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 100
./komodo-cli -ac_name=ATX tokenask Token 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 100
./komodo-cli -ac_name=ATX tokenbid Token 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 100

Any non-numeric character should be invalid price `a`
./komodo-cli -ac_name=ATX tokenask 10 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 a
./komodo-cli -ac_name=ATX tokenbid 10 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 a
./komodo-cli -ac_name=ATX tokenfillask 10 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 a
```


[16-Aug-18 04:46 AM] SHossain#0007
all these commands returns HEX value


[16-Aug-18 04:46 AM] SHossain#0007
these should be invalid


[16-Aug-18 04:50 AM] SHossain#0007
should this error message mention `couldn't cancel ask` ?
```
./komodo-cli -ac_name=ATX tokencancelask 6515feded0f8df0a5429b26e1ca05a639a4d654a6b7cde9f970156db0f838303 a
{
  "error": "couldnt cancel bid"
}
```


[16-Aug-18 04:54 AM] SHossain#0007
invalid command
```
./komodo-cli -ac_name=ATX tokencreate Token a
{
  "result": "success",
  "hex": "0100000001148212f3281574aa947de55bc0aca525848864cce2abd1c60834d3f24d25d54601000000484730440220373c5a88cb4bf270fcfc1a9fa06563426e1f5b858ad74120c77a9b493a50baa302201f6018298c67540c74e935487c6f5a473ad73b8b913bf0eb482cd143e35547e901ffffffff040000000000000000302ea22c802096195e66e99913358dbfc3cda384e43511843822f90c5fd7c1950e2224963ac08103120c008203000401cc1027000000000000232102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa2702ac5b854c431700000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000002d6a2be363210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a605546f6b656e0000000000"
}
```


[16-Aug-18 04:54 AM] SHossain#0007
i'm curious what would this token show in `tokeninfo` call


[16-Aug-18 04:55 AM] SHossain#0007
output for the above call
`81ef14cdac4c66e44f1647d31e5377d97c3072e627bb9da9eb9b9536e76a16ae`


[16-Aug-18 04:57 AM] jl777c#5810
cancelask returns cancel ask now, instead of bid,but havent pushed it yet


[16-Aug-18 04:57 AM] jl777c#5810
a token name can be a number...


[16-Aug-18 04:58 AM] jl777c#5810
will check for non-zero amounts


[16-Aug-18 04:58 AM] SHossain#0007
```
./komodo-cli -ac_name=ATX tokeninfo 81ef14cdac4c66e44f1647d31e5377d97c3072e627bb9da9eb9b9536e76a16ae
{
  "result": "success",
  "tokenid": "81ef14cdac4c66e44f1647d31e5377d97c3072e627bb9da9eb9b9536e76a16ae",
  "owner": "0304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6",
  "name": "Token",
  "supply": 0,
  "description": ""
}
```


[16-Aug-18 04:59 AM] SHossain#0007
@siu please create a new token on this ATX chain


[16-Aug-18 04:59 AM] SHossain#0007
i'd like to test one thing


[16-Aug-18 05:00 AM] siu#3920
ok


[16-Aug-18 05:00 AM] siu#3920
anything particular?


[16-Aug-18 05:01 AM] SHossain#0007
anything you like


[16-Aug-18 05:02 AM] SHossain#0007
@jl777c `tokenbalance` is accepting anything as `tokenid`, even non existing ones.```
./komodo-cli -ac_name=ATX tokenbalance test
{
  "result": "success",
  "CCaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
  "tokenid": "test",
  "balance": 0
}
```


[16-Aug-18 05:08 AM] siu#3920
```./komodo-cli -ac_name=ATX tokeninfo 512828b8c94b808eaafa1bbc20f63d20d64d927e268a320dded69264d95c1683
{
  "result": "success",
  "tokenid": "512828b8c94b808eaafa1bbc20f63d20d64d927e268a320dded69264d95c1683",
  "owner": "02151e1227c67ba596fe87047e6e58e088d8fc89eeee5ca7927e02c4df88b6d775",
  "name": "WEED",
  "supply": 420000000,
  "description": "Pass the dutchy to the left hand side"
}
```


[16-Aug-18 05:08 AM] siu#3920
@jl777c is the owner field new?


[16-Aug-18 05:09 AM] jl777c#5810
pushed version with more error checking. some errors like non-existing tokenid isnt known until the lookup is done


[16-Aug-18 05:09 AM] jl777c#5810
owner has been there for a while


[16-Aug-18 05:09 AM] SHossain#0007
updating


[16-Aug-18 05:10 AM] siu#3920
can that ownership be transfered?


[16-Aug-18 05:11 AM] jl777c#5810
so the bid fill is fixed?


[16-Aug-18 05:11 AM] siu#3920
yes.


[16-Aug-18 05:12 AM] jl777c#5810
the owner cant really do anything that anybody else cant do


[16-Aug-18 05:12 AM] jl777c#5810
what would it mean to transfer ownership?


[16-Aug-18 05:12 AM] jl777c#5810
it is just the creator of the asset


[16-Aug-18 05:13 AM] siu#3920
its ETH stuff


[16-Aug-18 05:14 AM] siu#3920
ive been said:  "in ETH the creator of the contract can transfer ownership to the owner"


[16-Aug-18 05:15 AM] siu#3920
but i guess that by just transfering the tokens to someone else its enough üòÇ


[16-Aug-18 05:16 AM] SHossain#0007
branded projects could buyout startups and with change of ownership to the branded project may be beneficial for the small startup token project?


[16-Aug-18 05:16 AM] SHossain#0007
i'm not sure, not an expert on those things :abusedsmily:


[16-Aug-18 05:17 AM] siu#3920
its just stuff people say


[16-Aug-18 05:17 AM] jl777c#5810
since there are no special rights the owner has, i dont feel it is needed to implement a function to transfer this non-existent ability to another


[16-Aug-18 05:18 AM] jl777c#5810
in ETH it seems you can create zillons of new tokens out of thin air


[16-Aug-18 05:18 AM] siu#3920
like the "liquid" tokenization sidechain blockstream made


[16-Aug-18 05:18 AM] siu#3920
how is the federated nodes made accountable?!


[16-Aug-18 05:19 AM] siu#3920
"dont worry, federated nodes are in legal jurisdictions and each will be accountable on it own jurisdiction"


[16-Aug-18 05:19 AM] siu#3920
üòÇ


[16-Aug-18 05:20 AM] jl777c#5810
there has never been a single instance of anybody in the fiat world ever doing anything wrong


[16-Aug-18 05:20 AM] jl777c#5810
because their identity is known


[16-Aug-18 05:20 AM] siu#3920
never


[16-Aug-18 05:20 AM] jl777c#5810
once you know someone's photoshopped chicken, it is impossible for them to do anything wrong


[16-Aug-18 05:20 AM] siu#3920
specially the ones people vote for... politicians...


[16-Aug-18 05:21 AM] siu#3920
public identities of saints that never do anything wrong.... because if they do, people vote them out!


[16-Aug-18 05:21 AM] siu#3920
:trollface:


[16-Aug-18 05:21 AM] jl777c#5810
they are a special case as they can change the rules as needed


[16-Aug-18 05:21 AM] siu#3920
yeah, like Block Producers in EOS


[16-Aug-18 05:26 AM] siu#3920
did we abandon AT4?


[16-Aug-18 05:26 AM] siu#3920
or do we keep testing that one?


[16-Aug-18 05:27 AM] SHossain#0007
i'm not using AT4


[16-Aug-18 05:27 AM] SHossain#0007
now on ATX


[16-Aug-18 05:28 AM] SHossain#0007
@jl777c is there any validation in place for pubkey?


[16-Aug-18 05:29 AM] jl777c#5810
some basic error check, ie. length


[16-Aug-18 05:30 AM] jl777c#5810
it seems latest change is good, but likely it is hardforking to AT4


[16-Aug-18 05:40 AM] SHossain#0007
just ovservation
```
./komodo-cli -ac_name=ATX tokenbalance deadbeef deadbeef
{
  "result": "success",
  "CCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "tokenid": "deadbeef",
  "balance": 0
}
```


[16-Aug-18 05:40 AM] SHossain#0007
```
./komodo-cli -ac_name=ATX tokencreate Token a
{
  "error": "invalid parameter"
}
```


[16-Aug-18 05:44 AM] jl777c#5810
well deadbeef is valid hex


[16-Aug-18 05:45 AM] jl777c#5810
and its true that balance is 0


[16-Aug-18 05:47 AM] SHossain#0007
ok. makes sense.


[16-Aug-18 05:50 AM] siu#3920
Is there a way to set new pubkey running in a node without restart?


[16-Aug-18 05:50 AM] SHossain#0007
nope


[16-Aug-18 05:51 AM] SHossain#0007
created exactly same token as @siu 
```
./komodo-cli -ac_name=ATX tokeninfo 4d8f3c05e823c56c2561a49e78ecf001cdc88adad025273cae31740a33b3ab3f
{
  "result": "success",
  "tokenid": "4d8f3c05e823c56c2561a49e78ecf001cdc88adad025273cae31740a33b3ab3f",
  "owner": "0304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6",
  "name": "WEED",
  "supply": 420000000,
  "description": "Pass the dutchy to the left hand side"
}
```


[16-Aug-18 05:51 AM] SHossain#0007
same name, description, supply


[16-Aug-18 05:51 AM] siu#3920
not same owner


[16-Aug-18 05:52 AM] SHossain#0007
except the owner and tokenid


[16-Aug-18 05:52 AM] siu#3920
but sound scammy to me :p


[16-Aug-18 05:52 AM] siu#3920
that aint the real WEED!


[16-Aug-18 05:52 AM] SHossain#0007
yes, that was my point to ask you to create one


[16-Aug-18 05:52 AM] SHossain#0007
people can create fake tokens and scam people


[16-Aug-18 05:52 AM] siu#3920
but i think this is like that in ETH too and other token implementations im not wrong


[16-Aug-18 05:52 AM] SHossain#0007
we need to prevent that somehow?


[16-Aug-18 05:53 AM] SHossain#0007
or, can we prevent this?


[16-Aug-18 05:53 AM] siu#3920
@jl777c is the one that should know


[16-Aug-18 05:53 AM] SHossain#0007
My WEED is real. Your one is FAKE! :trollface:


[16-Aug-18 05:54 AM] jl777c#5810
and not the same tokenid, which is what is actually used


[16-Aug-18 05:55 AM] jl777c#5810
if we made names unique, it would allow squatting.


[16-Aug-18 05:55 AM] jl777c#5810
the issuer of the asset is critical. the tokenid


[16-Aug-18 05:55 AM] jl777c#5810
not the name


[16-Aug-18 05:56 AM] SHossain#0007
i remember someone created fake SUPERNET token on NXT


[16-Aug-18 05:56 AM] SHossain#0007
feels long ago though üòÉ


[16-Aug-18 05:56 AM] jl777c#5810
yes


[16-Aug-18 05:57 AM] siu#3920
how was it handled?


[16-Aug-18 05:57 AM] jl777c#5810
people had to learn that the asset id was what mattered, not the name


[16-Aug-18 05:58 AM] jl777c#5810
or at least the issuing account


[16-Aug-18 05:58 AM] SHossain#0007
be back after some food.


[16-Aug-18 05:59 AM] siu#3920
im going to be out for some time too


[16-Aug-18 06:00 AM] jl777c#5810
it would be like locking funds in a reward plan without funds


[16-Aug-18 06:10 AM] siu#3920
can tokens be burned? how?


[16-Aug-18 06:11 AM] siu#3920
the same way you burn a coin?


[16-Aug-18 06:11 AM] siu#3920
how do you give proof about a burning address being a real burning address?


[16-Aug-18 06:15 AM] CHMEX#0686
RD6GgnrMpPaTSMn8vai6yiGA7mN4QGPVMY 
is the only burn adress I know of


[16-Aug-18 06:15 AM] CHMEX#0686
it's the null priv key


[16-Aug-18 06:16 AM] jl777c#5810
yes, that is the only way to burn assets


[16-Aug-18 06:16 AM] jl777c#5810
unless there is a bug. every satoshi for assets are supposed to be preserved


[16-Aug-18 06:23 AM] siu#3920
so a burn address is an address with no pubkey?


[16-Aug-18 06:23 AM] siu#3920
sorry, privkey


[16-Aug-18 06:31 AM] jl777c#5810
yes


[16-Aug-18 06:31 AM] jl777c#5810
all 0 is invalid privkey so you cant sign using it


[16-Aug-18 06:35 AM] siu#3920
but then youll need to move the underlying coins to the burn address instead of the tokens?


[16-Aug-18 06:35 AM] siu#3920
since there is no pubkey for that address


[16-Aug-18 06:37 AM] jl777c#5810
?


[16-Aug-18 06:37 AM] jl777c#5810
what do you mean "underlying coins"?


[16-Aug-18 06:37 AM] jl777c#5810
the tokens are the underlying coins


[16-Aug-18 06:38 AM] jl777c#5810
each token satoshi comes from the original supply


[16-Aug-18 06:55 AM] siu#3920
If i want to burn a token, what should i do?


[16-Aug-18 06:58 AM] jl777c#5810
transfer to all 0's pubkey


[16-Aug-18 06:58 AM] jl777c#5810
it should work but havent verified it


[16-Aug-18 06:59 AM] jl777c#5810
It would end up having a different CC address than the normal burn address


[16-Aug-18 06:59 AM] siu#3920
ok


[16-Aug-18 06:59 AM] jl777c#5810
but the CC vout would have all 0's in the pubkey


[16-Aug-18 07:00 AM] jl777c#5810
i guess you can also send it to the assets CC address. i think once it gets there, it cant be spent as it wont be associated with a sell


[16-Aug-18 07:36 AM] SHossain#0007
i'm back


[16-Aug-18 07:42 AM] SHossain#0007
the last update fixed the invalid command issues


[16-Aug-18 07:43 AM] SHossain#0007
all of those invalid commands now returns
```
{
  "error": "invalid parameter"
}
```


[16-Aug-18 07:44 AM] SHossain#0007
@jl777c should we go back to AT5 or continue testing on ATX?


[16-Aug-18 08:11 AM] dukeleto#7326
i have a new PR coming soon, with lots of tests and error checking

{Reactions}
üëåüèΩ 

[16-Aug-18 08:16 AM] dukeleto#7326
i really need to make these tests run faster, 2 minutes is too long to wait!


[16-Aug-18 08:21 AM] dukeleto#7326
oy, got some merge conflicts


[16-Aug-18 08:27 AM] dukeleto#7326
https://gist.github.com/leto/f131a4ea7375911dbe4f78a24b732e4b

{Embed}
https://gist.github.com/leto/f131a4ea7375911dbe4f78a24b732e4b
RewardsUnlock merge conflict
RewardsUnlock merge conflict
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[16-Aug-18 08:27 AM] dukeleto#7326
there must have been a slight change/bugfix in there but it is hard to see


[16-Aug-18 08:31 AM] dukeleto#7326
easiest thing was to modify James' latest code with my changes again, instead of searching for a tiny change in that merge conflict


[16-Aug-18 08:34 AM] dukeleto#7326
it's really nice to run a test suite to see if you broke something


[16-Aug-18 08:35 AM] dukeleto#7326
@jl777c i got some interesting new failures from merging in your latest `jl777` branch


[16-Aug-18 08:36 AM] dukeleto#7326
damn discord character limits


[16-Aug-18 08:37 AM] dukeleto#7326
@jl777c these CC tests passed before merging your latest branch: https://gist.github.com/leto/4065169f26bed30f45c889c04a929d41

{Embed}
https://gist.github.com/leto/4065169f26bed30f45c889c04a929d41
CC test failures
CC test failures
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[16-Aug-18 08:37 AM] dukeleto#7326
now they fail


[16-Aug-18 08:37 AM] dukeleto#7326
I need to understand, did behavior change? are my tests incorrect? or is there a genuine bug in the implementation


[16-Aug-18 08:38 AM] dukeleto#7326
@jl777c also, faucetget took a very long time. I thought my tests were in an infinite loop, i can get you a more accurate number, but it's usually instant and now it seems much slower


[16-Aug-18 08:39 AM] siu#3920
james did some hardforking changes today


[16-Aug-18 08:39 AM] dukeleto#7326
`CC Eval EVAL_FAUCET Invalid: faucet is only for brand new addresses spending tx 14122140941428c409bcd3de6267079539af7dee6e2a9b3ff90eacf7bcf597c5`


[16-Aug-18 08:39 AM] siu#3920
not sure if you emplemented those


[16-Aug-18 08:39 AM] dukeleto#7326
well this is all running on regtest


[16-Aug-18 08:39 AM] dukeleto#7326
the above error seems new


[16-Aug-18 08:39 AM] dukeleto#7326
and is why the tests fail


[16-Aug-18 08:39 AM] siu#3920
ahh yes... you need a brand new address to get a faucetget


[16-Aug-18 08:39 AM] dukeleto#7326
the address that receives from a faucet must have no utxos?


[16-Aug-18 08:39 AM] dukeleto#7326
is that what you are saying?


[16-Aug-18 08:40 AM] dukeleto#7326
also, the tests catching something like this is a good sign they are useful. When behavior changes, the tests notice


[16-Aug-18 08:42 AM] dukeleto#7326
also means that nobody else is running the tests and we don't have good indicators from travis CI


[16-Aug-18 08:42 AM] dukeleto#7326
we could have a little badge that shows pass/fail status, and even CC tests notify discord


[16-Aug-18 08:43 AM] dukeleto#7326
but these are new tests, so nobody else had access to them yet. Still, I would like to make test pass/failure easier to see/visualize


[16-Aug-18 08:45 AM] jl777c#5810
faucetget now does a custom PoW to prevent leechers

{Reactions}
abusedsmily 

[16-Aug-18 08:46 AM] dukeleto#7326
not quite sure how to modify my tests to support this, mostly because i just woke up


[16-Aug-18 08:46 AM] dukeleto#7326
i will send in a PR for review, even tho I still have this test failure


[16-Aug-18 08:46 AM] dukeleto#7326
it's turned into a lot of code and I would like some feedback


[16-Aug-18 08:49 AM] dukeleto#7326
@jl777c https://github.com/jl777/komodo/pull/813

{Embed}
https://github.com/jl777/komodo/pull/813
WIP More CC tests by leto ¬∑ Pull Request #813 ¬∑ jl777/komodo
Do not merge this yet, still have a test failure from latest jl777 merge:
CC Eval EVAL_FAUCET Invalid: faucet is only for brand new addresses spending tx 14122140941428c409bcd3de6267079539af7dee6e2...
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[16-Aug-18 08:50 AM] dukeleto#7326
@jl777c if you want to merge that, you can, if you are happy with C++ changes. I would prefer to not deal with more merge conflicts, since I can barely keep up with you üòÉ


[16-Aug-18 08:50 AM] dukeleto#7326
a failing python test in the `jl777` branch is ok, we should strive for tests passing in `dev` and `master` always


[16-Aug-18 08:51 AM] dukeleto#7326
i must go for a bit but i will check back in soon


[16-Aug-18 08:54 AM] jl777c#5810
looks good


[16-Aug-18 08:59 AM] siu#3920
made a new dice plan... ```{
    "result": {
        "result": "success",
        "fundingtxid": "8b14684433e12f6aab16063008162119e30231c60b1e20e1c5d9edf9b8394046",
        "name": "VEGAS",
        "sbits": 357577475414,
        "minbet": "1.00000000",
        "maxbet": "10000.00000000",
        "maxodds": 25,
        "timeoutblocks": 2,
        "funding": "100000.00000000"
    },
    "error": null,
    "id": null
}```


[16-Aug-18 08:59 AM] siu#3920
VEGAS, baby.


[16-Aug-18 09:00 AM] siu#3920
if anyone wants to abuse it


[16-Aug-18 09:03 AM] jl777c#5810
@SHossain CHIPS testers are saying osx does not like CC contracts


[16-Aug-18 09:04 AM] SHossain#0007
created a rewards plan with 10 and added 5 more, total 15 coins in fund. will try locking funds more that the rewards plan funding balance can distribute. 
```
./komodo-cli -ac_name=ATX rewardsinfo 288df341df135d1f2137f6940f586c084314c22aadbf9aa835a61b16c23637c4
{
  "result": "success",
  "fundingtxid": "288df341df135d1f2137f6940f586c084314c22aadbf9aa835a61b16c23637c4",
  "name": "RW",
  "sbits": 22354,
  "APR": "25.00000000",
  "minseconds": 0,
  "maxseconds": 86400,
  "mindeposit": "10000.00000000",
  "funding": "10.00000000",
  "locked": "0.00000000"
}
```


[16-Aug-18 09:04 AM] siu#3920
ugh


[16-Aug-18 09:04 AM] SHossain#0007
i'll get my mac up with jl777 branch to test in a moment.


[16-Aug-18 09:07 AM] SHossain#0007
```
./komodo-cli -ac_name=ATX rewardslock RW 288df341df135d1f2137f6940f586c084314c22aadbf9aa835a61b16c23637c4 21190000
cant find rewards inputs funding 15.00000000 locked 0.00000000 vs deposit 21190000.00000000
{
  "error": "couldnt create rewards lock transaction"
}
```


[16-Aug-18 09:08 AM] jl777c#5810
it is set to require deposit amount of funding in rewards plan as assurance it will have the funds needed to pay


[16-Aug-18 09:09 AM] SHossain#0007
thanks. this is what i wanted to test üòÉ


[16-Aug-18 09:11 AM] SHossain#0007
so, if i set the plan with mindeposit 10000, i need to have minimum 10000 funding available in the plan?


[16-Aug-18 09:13 AM] jl777c#5810
yes


[16-Aug-18 09:13 AM] jl777c#5810
+txfees


[16-Aug-18 09:14 AM] SHossain#0007
thanks. i'll add this up in the documentation


[16-Aug-18 09:21 AM] jl777c#5810
is anybody testing windows build


[16-Aug-18 09:24 AM] siu#3920
i can. is there a latest latest build?


[16-Aug-18 09:26 AM] siu#3920
@SHossain


[16-Aug-18 09:27 AM] SHossain#0007
i haven't seen any binaries for jl777 branch yet.


[16-Aug-18 09:27 AM] SHossain#0007
you need to manually compile it


[16-Aug-18 09:27 AM] SHossain#0007
i'm getting OSX up now and will compile there


[16-Aug-18 09:38 AM] SHossain#0007
@ca333 is there any way we can cross-compile komodo using Ubuntu?


[16-Aug-18 09:38 AM] dukeleto#7326
is it an OSX compile error?


[16-Aug-18 09:38 AM] dukeleto#7326
or run-time error?


[16-Aug-18 09:38 AM] dukeleto#7326
@SHossain travis ci tries to build all platforms, we just don't have a useful interface to get notified


[16-Aug-18 09:38 AM] SHossain#0007
compiler in OSX running for me


[16-Aug-18 09:39 AM] dukeleto#7326
https://travis-ci.org/KomodoPlatform/komodo/builds


[16-Aug-18 09:39 AM] SHossain#0007
KP repo doesn't have jl777 branch


[16-Aug-18 09:39 AM] dukeleto#7326
oh, travis isn't running the jl777 branch


[16-Aug-18 09:40 AM] dukeleto#7326
https://travis-ci.org/KomodoPlatform/komodo/builds/414710896


[16-Aug-18 09:40 AM] dukeleto#7326
that shows it running linux + osx tests, but it only does it on dev, master and maybe cctests


[16-Aug-18 09:40 AM] ComputerGenie#7004
`is it an OSX compile error?
or run-time error?`
if you mean what the CHIPS testers are seeing, the answer is neither


[16-Aug-18 09:41 AM] dukeleto#7326
@ComputerGenie good to know. i have fixed a few osx compile errors recently and some more might be around, which is why i asked


[16-Aug-18 09:41 AM] ComputerGenie#7004
`2018-08-16 15:51:25 ERROR: AcceptToMemoryPool: nonstandard transaction: scriptpubkey
2018-08-16 15:51:25 f5f35af0bb4a2adac84641c57f1d0b038044b08d3cd36a7465b56406c3c69277 from peer=2 /MagicBean:1.0.15/ was not accepted into the memory pool: scriptpubkey`
Mac isn't accepting CC faucet transactions


[16-Aug-18 09:43 AM] SHossain#0007
Thanks @ComputerGenie . I'll test once my compiler finishes compiling


[16-Aug-18 09:43 AM] SHossain#0007
i'm using fresh clone


[16-Aug-18 09:43 AM] dukeleto#7326
that is a funky error


[16-Aug-18 09:44 AM] dukeleto#7326
@ComputerGenie do you know if people are running with -pubkey when they get that error, and it's value?


[16-Aug-18 09:44 AM] ComputerGenie#7004
as far as I know, they are just trying to sync the client as a new user


[16-Aug-18 09:53 AM] ComputerGenie#7004
xRobeSxToday at 11:49 AM
no pubkey, nothing in .conf
NabobToday at 11:52 AM
with or without pubkey both fails to load blocks


[16-Aug-18 09:58 AM] SHossain#0007
compiled in OSX, started the ATX chain and i get this 
```
initialized ATX at 1534438612
finished loading blocks ATX
height.0 slowflag.1 possible.0 cmp.0
Unknown ASN type: 32ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc non-standard scriptPubKey
>>>>>>>>>>>>>>> vout.0 nDataout.0
AcceptToMemoryPool reject nonstandard transaction: scriptpubkey
Unknown ASN type: 32ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc non-standard scriptPubKey
>>>>>>>>>>>>>>> vout.0 nDataout.0
AcceptToMemoryPool reject nonstandard transaction: scriptpubkey
Unknown ASN type: 32ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc non-standard scriptPubKey
>>>>>>>>>>>>>>> vout.0 nDataout.0
AcceptToMemoryPool reject nonstandard transaction: scriptpubkey
Unknown ASN type: 3Unknown ASN type: 32ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc non-standard scriptPubKey
>>>>>>>>>>>>>>> vout.0 nDataout.0
AcceptToMemoryPool reject nonstandard transaction: scriptpubkey
Unknown ASN type: 32ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc non-standard scriptPubKey
>>>>>>>>>>>>>>> vout.0 nDataout.0
AcceptToMemoryPool reject nonstandard transaction: scriptpubkey
Unknown ASN type: 32ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc non-standard scriptPubKey
>>>>>>>>>>>>>>> vout.0 nDataout.0
AcceptToMemoryPool reject nonstandard transaction: scriptpubkey
Unknown fulfillment type: 3
```


[16-Aug-18 09:58 AM] ComputerGenie#7004
yes, that's what they are getting too


[16-Aug-18 09:58 AM] SHossain#0007
start command
```
./komodod -ac_cc=1 -ac_name=ATX -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458 -addnode=94.130.224.11 &
```


[16-Aug-18 10:01 AM] SHossain#0007
importprivkey shows
```
./komodo-cli -ac_name=ATX importprivkey <PRIVKEY_DELETED>
Unknown ASN type: 3RSw5pTExp2acawNXuSY45m93SXN5ARiq8B```


[16-Aug-18 10:14 AM] jl777c#5810
the problem is that the Isstandard check is returning false. I added code to make CC a standard output


[16-Aug-18 10:14 AM] jl777c#5810
i dont see any osx specific #ifdef, so no idea why it works on unix, but not mac.


[16-Aug-18 10:14 AM] jl777c#5810
windows result will shed some light on it. hopefully it works there and it is just a mattter of some include files from the wrong place


[16-Aug-18 10:15 AM] SHossain#0007
let me check if i can compile in windows


[16-Aug-18 10:44 AM] SHossain#0007
@Decker any chance you can help us providing a guide for cross-compiling or native compiling for win, pelase?


[16-Aug-18 10:54 AM] Alright#0419
AT5 deded? What's ATX


[16-Aug-18 10:57 AM] jl777c#5810
i fixed fillbid, hardfork change


[16-Aug-18 10:57 AM] Alright#0419
can you guys keep your AT5 nodes up until later today


[16-Aug-18 10:57 AM] Alright#0419
need to test something with rewards on it


[16-Aug-18 11:14 AM] SHossain#0007
will update soon.


[16-Aug-18 11:14 AM] SHossain#0007
working on cross-compiling for win ü§ûüèΩ


[16-Aug-18 11:19 AM] siu#3920
@SHossain do you have a guide?


[16-Aug-18 11:20 AM] SHossain#0007
not yet. just following the official README.md file


[16-Aug-18 11:20 AM] SHossain#0007
https://github.com/jl777/komodo#windows

{Embed}
https://github.com/jl777/komodo
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[16-Aug-18 11:24 AM] SHossain#0007
ok. getting this error
```
echo Configuring librustzcash...
Configuring librustzcash...
rm -rf /home/user/test/komodo/depends/x86_64-w64-mingw32; mkdir -p /home/user/test/komodo/depends/x86_64-w64-mingw32/lib; cd /home/user/test/komodo/depends/x86_64-w64-mingw32;  tar xf /home/user/test/komodo/depends/built/x86_64-w64-mingw32/rust/rust-1.16.0-91087dbc000.tar.gz; 
mkdir -p /home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/.
cd /home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/.;     PKG_CONFIG_LIBDIR=/home/user/test/komodo/depends/x86_64-w64-mingw32/lib/pkgconfig PKG_CONFIG_PATH=/home/user/test/komodo/depends/x86_64-w64-mingw32/share/pkgconfig PATH="/home/user/test/komodo/depends/x86_64-w64-mingw32/native/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin" 
touch /home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/./.stamp_configured
echo Building librustzcash...
Building librustzcash...
mkdir -p /home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/.
cd /home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/.; PATH="/home/user/test/komodo/depends/x86_64-w64-mingw32/native/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin"  ~/.cargo/bin/cargo build --release --target=x86_64-pc-windows-gnu --verbose
/bin/sh: 1: /home/user/.cargo/bin/cargo: not found
funcs.mk:242: recipe for target '/home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/./.stamp_built' failed
make: *** [/home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/./.stamp_built] Error 127
+ ./autogen.sh
./zcutil/build-win.sh: line 13: ./autogen.sh: No such file or directory
```


[16-Aug-18 11:33 AM] ca333#0333
@SHossain install cargo/rustup with `curl https://sh.rustup.rs -sSf | sh` - also keep in mind that with Ubuntu its a complex setup. Use debian for the mingw32 setup


[16-Aug-18 11:33 AM] SHossain#0007
don't have debian üòÖ


[16-Aug-18 11:33 AM] SHossain#0007
installing


[16-Aug-18 11:33 AM] SHossain#0007
thank you very much


[16-Aug-18 11:33 AM] ca333#0333
which ubuntu version are you using?


[16-Aug-18 11:34 AM] ca333#0333
you can still try it


[16-Aug-18 11:35 AM] SHossain#0007
18.04


[16-Aug-18 11:35 AM] SHossain#0007
yep. trying


[16-Aug-18 11:36 AM] SHossain#0007
i used  `sudo apt-get install mingw-w64`


[16-Aug-18 11:36 AM] SHossain#0007
```

  stable installed - rustc 1.28.0 (9634041f0 2018-07-30)


Rust is installed now. Great!

To get started you need Cargo's bin directory ($HOME/.cargo/bin) in your PATH 
```


[16-Aug-18 11:38 AM] SHossain#0007
```
     Running `rustc --crate-name libc /home/user/.cargo/registry/src/github.com-1ecc6299db9ec823/libc-0.2.21/src/lib.rs --crate-type lib --emit=dep-info,link -C opt-level=3 --cfg 'feature="default"' --cfg 'feature="use_std"' -C metadata=15671f96b80f570c -C extra-filename=-15671f96b80f570c --out-dir /home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/target/x86_64-pc-windows-gnu/release/deps --target x86_64-pc-windows-gnu -L dependency=/home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/target/x86_64-pc-windows-gnu/release/deps -L dependency=/home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/target/release/deps --cap-lints allow`
error[E0463]: can't find crate for `std`
  |
  = note: the `x86_64-pc-windows-gnu` target may not be installed

error: aborting due to previous error

For more information about this error, try `rustc --explain E0463`.
error: Could not compile `libc`.
```


[16-Aug-18 11:38 AM] SHossain#0007
```
Caused by:
  process didn't exit successfully: `rustc --crate-name libc /home/user/.cargo/registry/src/github.com-1ecc6299db9ec823/libc-0.2.21/src/lib.rs --crate-type lib --emit=dep-info,link -C opt-level=3 --cfg feature="default" --cfg feature="use_std" -C metadata=15671f96b80f570c -C extra-filename=-15671f96b80f570c --out-dir /home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/target/x86_64-pc-windows-gnu/release/deps --target x86_64-pc-windows-gnu -L dependency=/home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/target/x86_64-pc-windows-gnu/release/deps -L dependency=/home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/target/release/deps --cap-lints allow` (exit code: 101)
funcs.mk:242: recipe for target '/home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/./.stamp_built' failed
make: *** [/home/user/test/komodo/depends/work/build/x86_64-w64-mingw32/librustzcash/0.1-b76936e7da1/./.stamp_built] Error 101
+ ./autogen.sh
./zcutil/build-win.sh: line 13: ./autogen.sh: No such file or directory
```


[16-Aug-18 11:38 AM] ca333#0333
`rustup target add x86_64-pc-windows-gnu`


[16-Aug-18 11:39 AM] ca333#0333
@SHossain ^

{Reactions}
üëçüèΩ 

[16-Aug-18 11:49 AM] SHossain#0007 (pinned)
**Komodo cross-compile for Windows using Debian/Ubuntu**
```
sudo apt-get install build-essential pkg-config libc6-dev m4 g++-multilib autoconf libtool ncurses-dev unzip git python python-zmq zlib1g-dev wget libcurl4-openssl-dev bsdmainutils automake curl cmake mingw-w64
curl https://sh.rustup.rs -sSf | sh
source $HOME/.cargo/env
rustup target add x86_64-pc-windows-gnu
git clone https://github.com/jl777/komodo --branch jl777 --single-branch
cd komodo
./zcutil/fetch-params.sh
# -j8 = using 8 threads for the compilation - replace 8 with number of threads you want to use
./zcutil/build-win.sh -j8
#This can take some time.
```

{Reactions}
üëç (2) 

[16-Aug-18 11:50 AM] SHossain#0007
Pinned a message.


[16-Aug-18 11:50 AM] SHossain#0007
mine is still compiling ü§ûüèΩ


[16-Aug-18 11:57 AM] SHossain#0007
compiled successfully! thanks @ca333


[16-Aug-18 11:57 AM] SHossain#0007
will test now in my win


[16-Aug-18 11:57 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479725442992177163/Screenshot_from_2018-08-16_19-57-02.png


[16-Aug-18 12:05 PM] SHossain#0007
i'm having different issue on windows. daemon dies after start
```
C:\win64>komodod.exe -ac_cc=1 -ac_name=ATX -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458 -addnode=94.130.224.11
end.0 blocks, reward 100000.00000000 halving.0 blocks, decay.0 perc 0.0000% ac_pub=[00...]
call komodo_args.(komodod.exe) NOTARY_PUBKEY.(0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458)
>>>>>>>>>> ATX: p2p.56603 rpc.56604 magic.b2cc68bb 2999740603 1000 coins
finished loading blocks ATX
processing C:\Users\user\AppData\Roaming\Komodo\ATX\komodostate 1KB, validated.-1
inds.000001e92aeef560 validate C:\Users\user\AppData\Roaming\Komodo\ATX\komodostate.ind fsize.372 datalen.1196 n.93 lastfpos.0
took 0 seconds to process C:\Users\user\AppData\Roaming\Komodo\ATX\komodostate 1KB
```


[16-Aug-18 12:05 PM] SHossain#0007
```
C:\win64>komodo-cli.exe -ac_name=ATX getinfo
error: couldn't connect to server: EOF reached (code 1)
(make sure server is running and you are connecting to the correct RPC port)
```


[16-Aug-18 12:06 PM] Alright#0419
does curl work?


[16-Aug-18 12:08 PM] SHossain#0007
i didn't copy those files. i already had those libs


[16-Aug-18 12:08 PM] SHossain#0007
will check, after i test few things in mac


[16-Aug-18 12:13 PM] ComputerGenie#7004
maybe need to build win in win and not cross-compile under Ubuntu?


[16-Aug-18 12:18 PM] SHossain#0007
our current builds are cross-compiled and been working


[16-Aug-18 12:18 PM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/479730665966010369/debug.log


[16-Aug-18 12:18 PM] SHossain#0007
the full debug.log file


[16-Aug-18 12:27 PM] SHossain#0007
on windows, normal komodo daemon is working with the binaries i compiled
```
C:\win64>komodo-cli.exe getinfo
{
  "version": 1001550,
  "protocolversion": 170003,
  "KMDversion": "0.1.1",
  "notarized": 966390,
  "prevMoMheight": 0,
  "notarizedhash": "0933cc8b03ed422fc807e6351ed3f5881458a1ea7b7b871c58b5cfe5a3cbcfd7",
  "notarizedtxid": "2ca69e23d214fad4b8fd0936d5276d9463c67a02d17df4792dc407f2b331d0ae",
  "notarizedtxid_height": "mempool",
  "notarized_confirms": 0,
  "walletversion": 60000,
  "balance": 48.67227015,
  "interest": 0.03371059,
  "blocks": 966408,
  "longestchain": 968223,
  "timeoffset": 2,
  "tiptime": 1534338217,
  "connections": 8,
  "proxy": "",
  "difficulty": 16547289.83210208,
  "testnet": false,
  "keypoololdest": 1506769472,
  "keypoolsize": 101,
  "paytxfee": 0.00000000,
  "relayfee": 0.00000100,
  "errors": "",
  "name": "KMD"
}
```


[16-Aug-18 12:28 PM] SHossain#0007
`took 115 seconds to process C:\Users\user\AppData\Roaming\Komodo\komodostate 116311KB`


[16-Aug-18 12:29 PM] Alright#0419
Pinned a message.


[16-Aug-18 12:33 PM] Alright#0419
That rewards plan RW is broken on ATX


[16-Aug-18 12:34 PM] Alright#0419
Min deposit shouldn't be able to be above funding amount, no?


[16-Aug-18 12:34 PM] Alright#0419
Or well I guess it shouldn't be specifically prevented because someone could add funds to it later


[16-Aug-18 12:34 PM] SHossain#0007
i didn't continue with that any more


[16-Aug-18 12:34 PM] SHossain#0007
it just needs more funding


[16-Aug-18 12:35 PM] Alright#0419
Going to create my own and overdraft it


[16-Aug-18 12:35 PM] Alright#0419
I still have rewards accruing on AT5, but I need to wait longer


[16-Aug-18 12:35 PM] SHossain#0007
i have both AT5 and ATX chain mining with 2 threads each


[16-Aug-18 12:35 PM] Alright#0419
pretty sure someone forked AT5


[16-Aug-18 12:36 PM] Alright#0419
banned a bunch of nodes on it


[16-Aug-18 12:36 PM] siu#3920
AT5 didnt last long


[16-Aug-18 12:36 PM] Alright#0419
I'll be testing the AT5 stuff privately, as I already unlocked all of them on the public chain. Going to rewind the chain and firewall my node


[16-Aug-18 12:36 PM] Alright#0419
AT4 lasted about 10 minutes üòõ


[16-Aug-18 12:36 PM] siu#3920
jl777 did a forking change at about 38 blocks in


[16-Aug-18 12:36 PM] Alright#0419
Also X? What are we apple?


[16-Aug-18 12:37 PM] SHossain#0007
just spin up as many as you need privately. no one needs to know üòõ


[16-Aug-18 12:37 PM] siu#3920
ATX is the current one


[16-Aug-18 12:37 PM] siu#3920
AT4 lasted a night at least


[16-Aug-18 12:37 PM] siu#3920
üòÇ


[16-Aug-18 12:39 PM] SHossain#0007
ATX was supposed to mean AT chain but Xtended or extra


[16-Aug-18 12:43 PM] Alright#0419
please no one do `rewardsunlock`s on the overdraf plan on ATX


[16-Aug-18 12:44 PM] SHossain#0007
why don't you put that on the description or in name?


[16-Aug-18 12:44 PM] Alright#0419
have 8 characters to work with


[16-Aug-18 12:44 PM] SHossain#0007
like 
name: Private
description: Don't touch except @Alright


[16-Aug-18 12:45 PM] SHossain#0007
üòÉ


[16-Aug-18 12:45 PM] Alright#0419
can you set a description for a rewards plan?


[16-Aug-18 12:45 PM] SHossain#0007
oh...my bad.


[16-Aug-18 12:46 PM] SHossain#0007
i mixed it with token


[16-Aug-18 12:49 PM] siu#3920
@SHossain ```libbitcoin_server.a(libbitcoin_server_a-asyncrpcqueue.o): could not read symbols: Invalid operation
collect2: error: ld returned 1 exit status
Makefile:2051: recipe for target 'komodod.exe' failed
make: *** [komodod.exe] Error 1
```


[16-Aug-18 12:50 PM] SHossain#0007
which os and version? do you have all deps and everything updated?


[16-Aug-18 12:50 PM] SHossain#0007
i used Ubuntu 18.04


[16-Aug-18 12:50 PM] siu#3920
ubuntu 16.04


[16-Aug-18 12:50 PM] siu#3920
yes


[16-Aug-18 12:51 PM] SHossain#0007
post few more line above error or post a screenshot


[16-Aug-18 12:51 PM] SHossain#0007
maybe @ca333 can help


[16-Aug-18 12:51 PM] siu#3920
i had not pulled latest


[16-Aug-18 12:52 PM] siu#3920
give me a break. trying again


[16-Aug-18 12:52 PM] SHossain#0007
i can upload my build, but it doesn't work with contracts chains


[16-Aug-18 12:52 PM] SHossain#0007
KMD is fine


[16-Aug-18 12:52 PM] siu#3920
ok


[16-Aug-18 12:52 PM] siu#3920
so contracts not working either in OSX or Windows?


[16-Aug-18 12:53 PM] SHossain#0007
nope


[16-Aug-18 12:53 PM] SHossain#0007
not working


[16-Aug-18 12:53 PM] SHossain#0007
i'm testing some fixes on mac


[16-Aug-18 12:54 PM] siu#3920
```libtool: link: /home/siu/komodo/depends/x86_64-w64-mingw32/share/../native/bin/ccache x86_64-w64-mingw32-g++-posix -std=c++11 -Wformat -Wformat-security -Wstack-protector -fstack-protector-all -pipe -std=c11 -std=c++11 -O2 -DPTW32_STATIC_LIB -DCURL_STATICLIB -DCURVE_ALT_BN128 -fopenmp -pthread -fopenmp -fwrapv -fno-strict-aliasing -Wno-builtin-declaration-mismatch -pthread -Wl,--dynamicbase -Wl,--nxcompat -Wl,--high-entropy-va -static -o komodod.exe komodod-bitcoind.o bitcoind-res.o  -L/home/siu/komodo/depends/x86_64-w64-mingw32/share/../lib libbitcoin_server.a libbitcoin_common.a univalue/.libs/libunivalue.a -L/home/siu/komodo/depends/x86_64-unknown-linux-gnu/share/../lib libbitcoin_util.a libzcash.a /home/siu/komodo/depends/x86_64-w64-mingw32/lib/libcurl.a -lwldap32 snark/libsnark.a ./leveldb/libleveldb.a ./leveldb/libmemenv.a secp256k1/.libs/libsecp256k1.a cryptoconditions/.libs/libcryptoconditions_core.a libbitcoin_wallet.a -lboost_filesystem -lboost_program_options -lboost_thread -lboost_chrono -ldb_cxx-6.2 -lssl /home/siu/komodo/depends/x86_64-w64-mingw32/lib/libevent.a -L/home/siu/komodo/depends/x86_64-w64-mingw32/lib crypto/libbitcoin_crypto.a /home/siu/komodo/depends/x86_64-w64-mingw32/lib/libgmpxx.a /home/siu/komodo/depends/x86_64-w64-mingw32/lib/libgmp.a -lboost_system -lcrypto /home/siu/komodo/depends/x86_64-w64-mingw32/lib/libsodium.a -lrustzcash -lssp -lcrypt32 -liphlpapi -lshlwapi -lmswsock -lws2_32 -ladvapi32 -lrpcrt4 -luuid -loleaut32 -lole32 -lcomctl32 -lshell32 -lwinmm -lwinspool -lcomdlg32 -lgdi32 -luser32 -lkernel32 -lmingwthrd -pthread -fopenmp
libbitcoin_server.a(libbitcoin_server_a-asyncrpcqueue.o): could not read symbols: Invalid operation
collect2: error: ld returned 1 exit status
Makefile:2051: recipe for target 'komodod.exe' failed
make: *** [komodod.exe] Error 1
```


[16-Aug-18 01:00 PM] siu#3920
trying again


[16-Aug-18 01:02 PM] SHossain#0007
make clean is always good idea for testing


[16-Aug-18 01:02 PM] SHossain#0007
i used fresh clone


[16-Aug-18 01:02 PM] siu#3920
nope that didint do it


[16-Aug-18 01:02 PM] siu#3920
let me try a new user


[16-Aug-18 01:31 PM] Alright#0419
@CHMEX when you have a minute, could you change the cctest explorer to `./komodod -ac_cc=1 -ac_name=ATX -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458 -addnode=94.130.224.11` please


[16-Aug-18 01:34 PM] siu#3920
this win build takes forever üòì


[16-Aug-18 01:44 PM] SHossain#0007
i'll check next time how long exactly it takes


[16-Aug-18 01:44 PM] SHossain#0007
it does take long


[16-Aug-18 01:44 PM] SHossain#0007
same with macOS


[16-Aug-18 01:46 PM] CHMEX#0686
@Alright  explorer is repointed now


[16-Aug-18 01:46 PM] Alright#0419
üòò

{Reactions}
‚ò∫ (2) 

[16-Aug-18 02:05 PM] SHossain#0007
`tokeninfo` shows information about the token straight after creation, without being cleared off from mempool


[16-Aug-18 02:06 PM] SHossain#0007
new token on ATX chain
```
{
    "result": {
        "result": "success",
        "tokenid": "0b585dfb5a56df02b9ed1f9bfabc8cce4f1659cefc2951a5274cd98b025ffdab",
        "owner": "0304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6",
        "name": "Tokens4U",
        "supply": 100000000,
        "description": "Test to break"
    },
}
```


[16-Aug-18 02:20 PM] jl777c#5810
its a feature?


[16-Aug-18 02:20 PM] jl777c#5810
it is just finding the txid you send in as it is in the mempool and displaying the info from it


[16-Aug-18 02:21 PM] SHossain#0007
that make sense


[16-Aug-18 02:22 PM] SHossain#0007
i have distributed this token to the known pubkeys from the spreadsheet


[16-Aug-18 02:25 PM] SHossain#0007
i have few bids and ask for this coin on orderbook now


[16-Aug-18 02:42 PM] SHossain#0007
using fillbid 50 for this order
```
        {
            "funcid": "b",
            "txid": "27ba3bec3a24e00679f07da14604b91c5a80c63d6c2102dd0f186e5f9c7d1929",
            "vout": 0,
            "amount": "1000.00000000",
            "bidamount": "1000.00000000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "0b585dfb5a56df02b9ed1f9bfabc8cce4f1659cefc2951a5274cd98b025ffdab",
            "totalrequired": 100,
            "price": "10.00000000"
        },
```


[16-Aug-18 02:43 PM] SHossain#0007
it became
```
        {
            "funcid": "B",
            "txid": "e93f751f9e06e8a9fe6d66c9ca0fbc212849b2639a8558c419f83d596c6bca00",
            "vout": 0,
            "amount": "490.00000000",
            "bidamount": "490.00000000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "0b585dfb5a56df02b9ed1f9bfabc8cce4f1659cefc2951a5274cd98b025ffdab",
            "totalrequired": 49,
            "price": "10.00000000"
        },
```


[16-Aug-18 02:43 PM] SHossain#0007
sorry, it was fillbid 51


[16-Aug-18 02:44 PM] SHossain#0007
numbers matches


[16-Aug-18 02:48 PM] SHossain#0007
doing another fillbid of 49, filled the full order and cleared from orderbook


[16-Aug-18 03:17 PM] siu#3920
got it!


[16-Aug-18 03:18 PM] siu#3920
got the windows bins!

{Reactions}
üï∫ shexy 

[16-Aug-18 03:31 PM] SHossain#0007
`./src/komodo-test --gtest_filter='*CCTest*'`


[16-Aug-18 03:32 PM] SHossain#0007
```
sudo apt-get install build-essential pkg-config libc6-dev m4 g++-multilib autoconf libtool ncurses-dev unzip git python python-zmq zlib1g-dev wget libcurl4-openssl-dev bsdmainutils automake curl cmake mingw-w64
curl https://sh.rustup.rs -sSf | sh
rustup target add x86_64-pc-windows-gnu
git clone https://github.com/jl777/komodo --branch jl777 --single-branch
cd komodo
./zcutil/fetch-params.sh
# -j8 = using 8 threads for the compilation - replace 8 with number of threads you want to use
./zcutil/build-win.sh -j8
#This can take some time.```


[16-Aug-18 03:33 PM] SHossain#0007
oh...i haven't either


[16-Aug-18 03:51 PM] siu#3920
i think its broken in windows


[16-Aug-18 03:52 PM] siu#3920
it loads only until block 92


[16-Aug-18 03:52 PM] siu#3920
ATX


[16-Aug-18 03:55 PM] SHossain#0007
same on my node


[16-Aug-18 03:55 PM] SHossain#0007
i posted full debug.log earlier


[16-Aug-18 03:56 PM] siu#3920
but it doesnt output any relevant error msg


[16-Aug-18 04:04 PM] SHossain#0007
installing win 10 sdk


[16-Aug-18 04:05 PM] SHossain#0007
didn't know that


[16-Aug-18 04:07 PM] SHossain#0007
which one you guys have in your system? `libcurl3` or `libcurl4`?


[16-Aug-18 04:08 PM] siu#3920
you mean the linux compile system?


[16-Aug-18 04:09 PM] SHossain#0007
yes, @siu


[16-Aug-18 04:10 PM] SHossain#0007
@webworker01 do i need to set argument while opening komodod.exe file?


[16-Aug-18 04:10 PM] SHossain#0007
please tell me the process. first time using win debugger


[16-Aug-18 04:10 PM] siu#3920
im not sure which i have


[16-Aug-18 04:11 PM] SHossain#0007
@siu try `sudo apt-get install libcurl3`


[16-Aug-18 04:11 PM] SHossain#0007
this will tell if you already have it or not


[16-Aug-18 04:11 PM] siu#3920
i have libcurl3

{Reactions}
üëçüèΩ 

[16-Aug-18 04:12 PM] siu#3920
i dont have libcurl4


[16-Aug-18 04:15 PM] SHossain#0007
```
ModLoad: 00007ff8`60ad0000 00007ff8`60adb000   C:\WINDOWS\SYSTEM32\CRYPTBASE.DLL
(2ae8.215c): Break instruction exception - code 80000003 (first chance)
ntdll!LdrpDoDebuggerBreak+0x30:
00007ff8`64efcd9c cc              int     3
```


[16-Aug-18 04:16 PM] SHossain#0007
that was when i loaded the exe file


[16-Aug-18 04:17 PM] SHossain#0007
pressing go button gave me this


[16-Aug-18 04:17 PM] SHossain#0007
```
(2ae8.215c): Break instruction exception - code 80000003 (first chance)
ntdll!LdrpDoDebuggerBreak+0x30:
00007ff8`64efcd9c cc              int     3
0:000> g
ModLoad: 00007ff8`62420000 00007ff8`6244d000   C:\WINDOWS\System32\IMM32.DLL
ModLoad: 00007ff8`60d10000 00007ff8`60d27000   C:\WINDOWS\SYSTEM32\CRYPTSP.dll
ModLoad: 00007ff8`60560000 00007ff8`60593000   C:\WINDOWS\system32\rsaenh.dll
ModLoad: 00007ff8`60ce0000 00007ff8`60d05000   C:\WINDOWS\SYSTEM32\bcrypt.dll
(2ae8.215c): Unknown exception - code 20474343 (first chance)
ModLoad: 00007ff8`60970000 00007ff8`609d6000   C:\WINDOWS\system32\mswsock.dll
ModLoad: 00007ff8`5a530000 00007ff8`5a53a000   C:\Windows\System32\rasadhlp.dll
ModLoad: 00007ff8`54ba0000 00007ff8`54bb6000   C:\WINDOWS\system32\napinsp.dll
ModLoad: 00007ff8`5ad60000 00007ff8`5ad7a000   C:\WINDOWS\system32\pnrpnsp.dll
ModLoad: 00007ff8`5c590000 00007ff8`5c5a9000   C:\WINDOWS\system32\NLAapi.dll
ModLoad: 00007ff8`60740000 00007ff8`607fe000   C:\WINDOWS\SYSTEM32\DNSAPI.dll
ModLoad: 00007ff8`64720000 00007ff8`64728000   C:\WINDOWS\System32\NSI.dll
ModLoad: 00007ff8`60700000 00007ff8`60738000   C:\WINDOWS\SYSTEM32\IPHLPAPI.DLL
ModLoad: 00007ff8`5c900000 00007ff8`5c90e000   C:\WINDOWS\System32\winrnr.dll
ModLoad: 00007ff8`5bbc0000 00007ff8`5bc32000   C:\WINDOWS\System32\fwpuclnt.dll
(2ae8.e14): Stack overflow - code c00000fd (first chance)
First chance exceptions are reported before any exception handling.
This exception may be expected and handled.
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for komodod.exe - 
komodod!secp256k1_ecdsa_recover+0x337056:
00000000`01759f26 488509          test    qword ptr [rcx],rcx ds:000000f6`1ba037e8=0000000000000000
```


[16-Aug-18 04:18 PM] SHossain#0007
2nd run gave exact same error


[16-Aug-18 04:47 PM] SHossain#0007
not sure what else to test üòõ


[16-Aug-18 04:53 PM] Alright#0419
Should rewards be limited to how much a plan can actually pay out? For example, I will empty this tomorrow and most `rewardslock`s won't receive any additional coins. 
```
./komodo-cli -ac_name=ATX rewardsinfo e960de2c4261736291127e9ebfe7b29bd31c6678ec39b17d90f710b0e200e523
{
  "result": "success",
  "fundingtxid": "e960de2c4261736291127e9ebfe7b29bd31c6678ec39b17d90f710b0e200e523",
  "name": "overdraf",
  "sbits": 7377303440351131247,
  "APR": "25.00000000",
  "minseconds": 0,
  "maxseconds": 864000,
  "mindeposit": "1.00000000",
  "funding": "1000.00000000",
  "locked": "7214000.00000000"
}
```
Could locked coins be limited to max seconds and funding? As in it assumes all `rewardslock` will be locked for the maximum of time. If the plan doesn't have enough to cover that, it rejects new `rewardslock`s


[16-Aug-18 04:53 PM] Alright#0419
Also, `rewardslock` is limited to the funding amount, but I don't think it should be


[16-Aug-18 04:56 PM] siu#3920
definitively win and osx will need further testing


[16-Aug-18 04:57 PM] Alright#0419
Can begin testing windows builds tomorrow. I don't have access to a OSX machine though


[16-Aug-18 05:05 PM] siu#3920
me neither


[16-Aug-18 07:07 PM] xRobeSx#5136
I have a Mac to test building/CC stuff once the build is ready. Just ping me.


[16-Aug-18 10:53 PM] jl777c#5810
@Alright "Could locked coins be limited to max seconds and funding? As in it assumes all rewardslock will be locked for the maximum of time. If the plan doesn't have enough to cover that, it rejects new rewardslocks
Also, rewardslock is limited to the funding amount, but I don't think it should be" <- yes your way is better


[16-Aug-18 10:53 PM] jl777c#5810
added to my todo list


[17-Aug-18 04:42 AM] TonyL#3577
Found this tool https://x64dbg.com/ good for Windows debugging
Have to download it and run something like a:
```x96dbg.exe "C:\Users\rigdirector\Desktop\komodowin\komodod.exe" -ac_cc=1 -ac_name=ATX -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=02ff7c1e7e4060f3815478944e3907ff722366da1e6453e008ebd779e5e162779b -addnode=94.130.224.11``` which initiate GUI

{Embed}
https://x64dbg.com/
x64dbg
An open-source x64/x32 debugger for windows.

{Reactions}
üëçüèΩ (2) 

[17-Aug-18 06:04 AM] siu#3920
hello, good morning

{Reactions}
‚òï (2) 

[17-Aug-18 06:04 AM] siu#3920
how are things?


[17-Aug-18 06:08 AM] jl777c#5810
osx and win waiting for fix


[17-Aug-18 06:08 AM] jl777c#5810
VRSC fork excitement so i dont think much more CC testing


[17-Aug-18 06:08 AM] jl777c#5810
last I heard there might have been a rewards bug, at least an optimization in the non consensus code, but no other issues I have seen


[17-Aug-18 06:30 AM] siu#3920
will try to unlock a reward now.


[17-Aug-18 06:50 AM] dukeleto#7326
there are much better JSON errors now for rewards internals, fyi


[17-Aug-18 06:53 AM] dukeleto#7326
I saw my name mentioned but there is a lot of backscroll, let me know how i can help


[17-Aug-18 06:53 AM] dukeleto#7326
mornin'

{Reactions}
‚òï 

[17-Aug-18 08:12 AM] dukeleto#7326
@webworker01 you could ask @radix42 who has dealt with zmq+windows issues in maintaining the winzec wallet


[17-Aug-18 08:53 AM] dukeleto#7326
i think he disabled zmq sometimes


[17-Aug-18 08:53 AM] dukeleto#7326
since it's an optional dependency


[17-Aug-18 08:54 AM] dukeleto#7326
but i am not sure if it's optional in all cases or what you are doing


[17-Aug-18 08:54 AM] dukeleto#7326
you can try `--disable-zmq` or whatever it's called


[17-Aug-18 08:55 AM] dukeleto#7326
you can disable some tests, some tests require zmq


[17-Aug-18 08:55 AM] dukeleto#7326
what is your end goal here?


[17-Aug-18 08:55 AM] dukeleto#7326
oh gosh


[17-Aug-18 08:56 AM] dukeleto#7326
@webworker01 which file is failing? you mean cryptoconditions.py test?


[17-Aug-18 08:56 AM] dukeleto#7326
James changed some consensus code and I haven't updated my faucet tests yet to reflect his changes


[17-Aug-18 08:57 AM] dukeleto#7326
oh, i saw talk of that flying by


[17-Aug-18 08:58 AM] dukeleto#7326
a segfault in validating a block, only on certain operating systems


[17-Aug-18 08:59 AM] dukeleto#7326
that sounds like maybe a big/small endian issue, or maybe a compiler that has different undefined behavior


[17-Aug-18 08:59 AM] jl777c#5810
just test on unix for now

{Reactions}
üëç 

[17-Aug-18 08:59 AM] jl777c#5810
osx and windows dont pass low level tests and until there is a release that fixes it, it wont work


[17-Aug-18 08:59 AM] jl777c#5810
but on unix there are no known CC bugs


[17-Aug-18 09:01 AM] SHossain#0007
we are progressing slowly with macOS debugging


[17-Aug-18 09:11 AM] SHossain#0007
hopefully, we are getting closer with each test
```
Making all in doc/man
make[1]: Nothing to be done for `all'.
Makefile:1129: warning: overriding commands for target `Bitcoin-Core.dmg'
Makefile:1119: warning: ignoring old commands for target `Bitcoin-Core.dmg'
make[1]: Nothing to be done for `all-am'.
Note: Google Test filter = *testCustom
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from CCTest
[ RUN      ] CCTest.testCustom
cc_new @ src/cryptoconditions.c:315
cc_new @ src/cryptoconditions.c:317
5, 0
TypeRegLen: 0
src/cryptoconditions.c:321
5381    
src/cryptoconditions.c:322
Segmentation fault: 11
```


[17-Aug-18 09:12 AM] dukeleto#7326
wow, so my tests are even useful to help debug this segfault, very nice üòÉ


[17-Aug-18 09:12 AM] dukeleto#7326
@SHossain which compiler are you using? gcc or clang?


[17-Aug-18 09:12 AM] dukeleto#7326
that determines if you need to use gdb or lldb


[17-Aug-18 09:12 AM] SHossain#0007
sorry. @libscott is writing the tests and i'm running them


[17-Aug-18 09:13 AM] dukeleto#7326
on your core file


[17-Aug-18 09:13 AM] SHossain#0007
these are from his repo


[17-Aug-18 09:13 AM] dukeleto#7326
oh, that is cryptoconditions.c, i thought it said cryptoconditions.py


[17-Aug-18 09:13 AM] dukeleto#7326
have you generated a backtrace from a coredump yet?


[17-Aug-18 09:13 AM] SHossain#0007
https://github.com/libscott/komodo/tree/fixosx

{Embed}
https://github.com/libscott/komodo/tree/fixosx
libscott/komodo
komodo - Komodo with Interledger Crypto-Conditions
https://images-ext-1.discordapp.net/external/xQ3CIVE2GBhL5WuUaIMVHaBPrnt9S48QhsBG6GLEetM/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/125019


[17-Aug-18 09:14 AM] libscott#8867
found the issue I think üòÉ


[17-Aug-18 09:14 AM] libscott#8867
its stupid (can you imagine?)


[17-Aug-18 09:14 AM] SHossain#0007
after more than 10 tests :trollface:


[17-Aug-18 09:14 AM] dukeleto#7326
undefined behavior being different?


[17-Aug-18 09:14 AM] dukeleto#7326
or the layout of memory, can often cause these platform-dependent issues


[17-Aug-18 09:15 AM] SHossain#0007
@libscott compiling latest


[17-Aug-18 09:15 AM] dukeleto#7326
üçø üçø


[17-Aug-18 09:15 AM] libscott#8867
I think it's just due to something being defined twice, once in a header file and then again in the .cpp file


[17-Aug-18 09:15 AM] libscott#8867
so I changed the header definition to an `extern` and now hopefully itll work


[17-Aug-18 09:15 AM] dukeleto#7326
is it CCerror ?


[17-Aug-18 09:16 AM] libscott#8867
it appears to be an issue with the CC code


[17-Aug-18 09:16 AM] dukeleto#7326
i just added the CCerror extern


[17-Aug-18 09:16 AM] dukeleto#7326
specifically, `std::string CCerror`


[17-Aug-18 09:16 AM] libscott#8867
nono


[17-Aug-18 09:16 AM] jl777c#5810
it has been there all along, not anything new


[17-Aug-18 09:16 AM] libscott#8867
it's in libcryptoconditions


[17-Aug-18 09:16 AM] dukeleto#7326
yay, it wasn't me!


[17-Aug-18 09:16 AM] libscott#8867
üòÉ


[17-Aug-18 09:16 AM] jl777c#5810
plz make pull request to jl777 branch when it is fixed


[17-Aug-18 09:17 AM] libscott#8867
i will


[17-Aug-18 09:17 AM] libscott#8867

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/480047574217129994/Screenshot_from_2018-08-17_13-17-27.png


[17-Aug-18 09:18 AM] SHossain#0007
https://pastebin.com/JxN9t9Kq

{Embed}
https://pastebin.com/JxN9t9Kq
Making all in doc/man  make[1]: Nothing to be done for `all'.  Mak...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[17-Aug-18 09:18 AM] SHossain#0007
output is over Discord upload limit ^^


[17-Aug-18 09:18 AM] libscott#8867
Yay! üòÉ


[17-Aug-18 09:19 AM] libscott#8867
@jl777c we might as well try to debug the windows issue using this branch


[17-Aug-18 09:19 AM] libscott#8867
whos testing it?


[17-Aug-18 09:19 AM] dukeleto#7326
this channel is better than Netflix


[17-Aug-18 09:19 AM] jl777c#5810
great! if you can pull request now we can trigger the builds for the win


[17-Aug-18 09:19 AM] dukeleto#7326
üçø :Komodo:


[17-Aug-18 09:19 AM] libscott#8867
ok (y)


[17-Aug-18 09:19 AM] SHossain#0007
@libscott you will get more users for win testing including me


[17-Aug-18 09:19 AM] libscott#8867
ok great


[17-Aug-18 09:20 AM] SHossain#0007
i'll just need to get some food. already 5pm here


[17-Aug-18 09:26 AM] libscott#8867
@jl777c https://github.com/jl777/komodo/pull/814

{Embed}
https://github.com/jl777/komodo/pull/814
Fix crash1 osx by libscott ¬∑ Pull Request #814 ¬∑ jl777/komodo
Don't define variables in header files! use extern.
Replace malloc with calloc(1, for a bit of additonal sanity
https://images-ext-1.discordapp.net/external/xQ3CIVE2GBhL5WuUaIMVHaBPrnt9S48QhsBG6GLEetM/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/125019

{Reactions}
üëç (2) 

[17-Aug-18 09:51 AM] SHossain#0007
compiling jl777 branch on macOS


[17-Aug-18 09:57 AM] SHossain#0007
@webworker01 @siu please try the win build now


[17-Aug-18 09:58 AM] SHossain#0007
i'll test that once i'm done with macOS testing


[17-Aug-18 09:58 AM] SHossain#0007
latest source in jl777 branch


[17-Aug-18 10:03 AM] siu#3920
ok!


[17-Aug-18 10:06 AM] SHossain#0007
ATX  sync stuck at block 92


[17-Aug-18 10:06 AM] SHossain#0007
this could be due to old data dir


[17-Aug-18 10:09 AM] SHossain#0007
daemon crashes or exits after start
```
call komodo_args.(./komodod) NOTARY_PUBKEY.(0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458)
>>>>>>>>>> ATX: p2p.56603 rpc.56604 magic.b2cc68bb 2999740603 1000 coins
initialized ATX at 1534525659
finished loading blocks ATX
height.0 slowflag.1 possible.0 cmp.0

[1]+  Bus error: 10```


[17-Aug-18 10:09 AM] SHossain#0007
with cleaned data dir


[17-Aug-18 10:10 AM] libscott#8867
In computing, a bus error is a fault raised by hardware, notifying an operating system (OS) that a process is trying to access memory that the CPU cannot physically address


[17-Aug-18 10:11 AM] SHossain#0007
@libscott 
```
(gdb) run
Starting program: /Users/user/komodo/src/komodod -ac_cc=1 -ac_name=ATX -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458 -addnode=94.130.224.11
[New Thread 0x2803 of process 31732]
During startup program terminated with signal ?, Unknown signal.
(gdb) backtrace
No stack.
(gdb) 
```


[17-Aug-18 10:11 AM] SHossain#0007
will restart my mac now


[17-Aug-18 10:11 AM] SHossain#0007
and try again


[17-Aug-18 10:15 AM] SHossain#0007
same after restart


[17-Aug-18 10:15 AM] SHossain#0007
```
[New Thread 0x2703 of process 584]
During startup program terminated with signal ?, Unknown signal.```


[17-Aug-18 10:21 AM] libscott#8867
hmm


[17-Aug-18 10:21 AM] libscott#8867
What does `src/komodo-test --gtest_filter='*CCTest*'` give?


[17-Aug-18 10:22 AM] SHossain#0007
```
./komodo-test --gtest_filter='*CCTest*'
Note: Google Test filter = *CCTest*
[==========] Running 6 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 6 tests from CCTest
[ RUN      ] CCTest.testIsPayToCryptoCondition
[       OK ] CCTest.testIsPayToCryptoCondition (0 ms)
[ RUN      ] CCTest.testMayAcceptCryptoCondition
[       OK ] CCTest.testMayAcceptCryptoCondition (7 ms)
[ RUN      ] CCTest.testVerifyCryptoCondition
[       OK ] CCTest.testVerifyCryptoCondition (18 ms)
[ RUN      ] CCTest.testVerifyEvalCondition
[       OK ] CCTest.testVerifyEvalCondition (9 ms)
[ RUN      ] CCTest.testCryptoConditionsDisabled
[       OK ] CCTest.testCryptoConditionsDisabled (9 ms)
[ RUN      ] CCTest.testLargeCondition
[       OK ] CCTest.testLargeCondition (85 ms)
[----------] 6 tests from CCTest (128 ms total)

[----------] Global test environment tear-down
[==========] 6 tests from 1 test case ran. (128 ms total)
[  PASSED  ] 6 tests.
```


[17-Aug-18 10:25 AM] libscott#8867
trying the branch


[17-Aug-18 10:25 AM] SHossain#0007
üëç


[17-Aug-18 10:25 AM] libscott#8867
Seems to work here


[17-Aug-18 10:25 AM] SHossain#0007
have you tested on OSX?


[17-Aug-18 10:26 AM] libscott#8867
I dont have OSX


[17-Aug-18 10:26 AM] libscott#8867
haha


[17-Aug-18 10:26 AM] libscott#8867
but im running ATX branch on my machine


[17-Aug-18 10:26 AM] SHossain#0007
Linux  works fine


[17-Aug-18 10:26 AM] SHossain#0007
macOS and Win had issues


[17-Aug-18 10:28 AM] libscott#8867
Maybe try it with a non CC chain?


[17-Aug-18 10:28 AM] SHossain#0007
non CC chain works fine


[17-Aug-18 10:29 AM] SHossain#0007
KMD and other existing AC works ok


[17-Aug-18 10:29 AM] SHossain#0007
only these new chains with contracts doesn't work


[17-Aug-18 10:32 AM] libscott#8867
Maybe dukeleto's tests will help?


[17-Aug-18 10:32 AM] libscott#8867
can you run them?


[17-Aug-18 10:34 AM] SHossain#0007
i haven't tried @dukeleto 's tests yet.


[17-Aug-18 10:35 AM] SHossain#0007
@dukeleto how do i run them?


[17-Aug-18 10:38 AM] libscott#8867
how do we build with symbols?


[17-Aug-18 10:39 AM] SHossain#0007
not sure if this one helps https://stackoverflow.com/questions/17487891/libtool-undefined-symbols-not-allowedin-i686-pc-mingw32-shared

{Embed}
https://stackoverflow.com/questions/17487891/libtool-undefined-symbols-not-allowedin-i686-pc-mingw32-shared
libtool: undefined symbols not allowed	in i686-pc-mingw32 shared
I'm using autotools as build system for a library of mine. Recently library is ported to Windows. Library compiles and links successfully though I encountered a strange error. There is only static
https://images-ext-1.discordapp.net/external/dP07hBXxuorGcvXU609uJ_e6ZgPlIdBxqG8OjQQiAyY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon%402.png


[17-Aug-18 10:40 AM] libscott#8867
**compiling for debugging**                                                   
                                                                              
Run configure with the --enable-debug option, then make. Or run configure with
CXXFLAGS="-g -ggdb -O0" or whatever debug flags you need.


[17-Aug-18 10:41 AM] SHossain#0007
which file to change?


[17-Aug-18 10:41 AM] libscott#8867
@webworker01 can you try adding those flags to `zcutil/build-win.sh:14`


[17-Aug-18 10:41 AM] libscott#8867
or shossain

{Reactions}
üëçüèΩ 

[17-Aug-18 10:41 AM] libscott#8867
Might also be worth trying that with the mac build if it's still failing; not sure if it'll produce any more info


[17-Aug-18 10:42 AM] libscott#8867
but, @SHossain if gdb is working now we can get a trace out of it if we can make a debug build


[17-Aug-18 10:43 AM] libscott#8867
it doesnt seem like it! windows tries to be helpful but it says there's no debugging symbols...


[17-Aug-18 10:48 AM] libscott#8867
üëç


[17-Aug-18 10:56 AM] libscott#8867
what debugger are you using? gdb?


[17-Aug-18 10:57 AM] libscott#8867
I suppose try with those cxxflags


[17-Aug-18 10:58 AM] libscott#8867
can you also try: `src\komodo-test --gtest_filter='*CCTest'` ?


[17-Aug-18 10:59 AM] SHossain#0007
@libscott gdb didn't give me any backtrace of the crash


[17-Aug-18 11:00 AM] SHossain#0007
i'll compile with the debug flags now


[17-Aug-18 11:00 AM] libscott#8867
@SHossain did you run inside GDB?


[17-Aug-18 11:00 AM] SHossain#0007
yes


[17-Aug-18 11:00 AM] libscott#8867
`gdb -batch -ex run -ex bt --args {komodo-args}`


[17-Aug-18 11:00 AM] SHossain#0007
`gdb -args ./komodod......`


[17-Aug-18 11:01 AM] libscott#8867
@webworker01 not sure.. doesnt it build multiple executables by default?


[17-Aug-18 11:02 AM] SHossain#0007
aha...testing your commandset. do i need to compile with the flags you posted above?


[17-Aug-18 11:02 AM] libscott#8867
ie komodod, komodo-cli, komodo-tx, komodo-test


[17-Aug-18 11:02 AM] libscott#8867
@SHossain im hoping that those flags would make gdb give output


[17-Aug-18 11:03 AM] libscott#8867
@webworker01 oh, is there an error when building?


[17-Aug-18 11:03 AM] SHossain#0007
cool


[17-Aug-18 11:03 AM] SHossain#0007
on it


[17-Aug-18 11:03 AM] libscott#8867
@SHossain are you testing win atm or osx?


[17-Aug-18 11:04 AM] Alright#0419
Just did a couple hundred `rewardsunlock`s on a node, and now it's failing to unlock anymore. 
```
APR 25.00000000 minseconds.0 maxseconds.864000 mindeposit 1.00000000
maxseconds.864000 (L) 1000.00000000 1000.00000000
duration 79796 (1534528955 - 1534449159) numblocks 1290 (1940 - 650)
amount 1000.00000000 2500000000000.00000000 3231 -> duration.79796 reward 0.63257864 vals 2.53031456 6325.78640000
search mempool for unlocked and unspent CC rewards output for 0.63267864
found 'U' 54859faee5d15372197f4086bb47a3d94f29bbfe89357f61e32161b6ac32bb7a 757.83157555 in unspent in mempool
added mempool vout for 757.83157555
inputs 757.83157555 CCchange 757.19889691 amount 1000.00000000 reward 0.63257864
```


[17-Aug-18 11:04 AM] Alright#0419
```
./komodo-cli -ac_name=ATX rewardsunlock overdraf e960de2c4261736291127e9ebfe7b29bd31c6678ec39b17d90f710b0e200e523
{
  "result": "error",
  "error": "Rewards plan does not exist"
}
```


[17-Aug-18 11:04 AM] Alright#0419
works fine on another node though


[17-Aug-18 11:04 AM] SHossain#0007
@libscott i'll be doing the OSX


[17-Aug-18 11:04 AM] Alright#0419
sorry to interrupt üòõ


[17-Aug-18 11:05 AM] libscott#8867
@Alright welcome to the fiesta!


[17-Aug-18 11:07 AM] libscott#8867
`CXXFLAGS='-arch x86_64 -I/usr/local/Cellar/gcc\@6/6.4.0_2/include/c++/6.4.0/ -I$PREFIX/include -fwrapv -fno-strict-aliasing -Werror -g -Wl,-undefined -Wl,dynamic_lookup -g -ggdb -O0' \
./configure --prefix="${PREFIX}" --with-gui=no "$HARDENING_ARG" "$LCOV_ARG" --enable-debug
`


[17-Aug-18 11:08 AM] SHossain#0007
@libscott does this look ok?
```./autogen.sh
CPPFLAGS="-I$PREFIX/include -arch x86_64" LDFLAGS="-L$PREFIX/lib -arch x86_64 -Wl,-no_pie" \
CXXFLAGS='-arch x86_64 -I/usr/local/Cellar/gcc\@6/6.4.0_2/include/c++/6.4.0/ -I$PREFIX/include -fwrapv -fno-strict-aliasing -Werror -g -ggdb -OO -Wl,-undefined -Wl,dynamic_lookup' \```


[17-Aug-18 11:08 AM] libscott#8867
for debugging

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/480075399460683776/build-mac.sh


[17-Aug-18 11:08 AM] libscott#8867
i think so...


[17-Aug-18 11:08 AM] libscott#8867
add --enable-debug to the configure command too


[17-Aug-18 11:09 AM] SHossain#0007
i didn't use extra `-g` that you have


[17-Aug-18 11:09 AM] SHossain#0007
ok. i'll use your uploaded file for mac


[17-Aug-18 11:09 AM] SHossain#0007
rather than messing up myself


[17-Aug-18 11:09 AM] libscott#8867
that extra -g is probably reduntant haha


[17-Aug-18 11:09 AM] libscott#8867
not on purpose


[17-Aug-18 11:10 AM] SHossain#0007
ok


[17-Aug-18 11:11 AM] SHossain#0007
compile started ü§ûüèΩ


[17-Aug-18 11:25 AM] SHossain#0007
```
gdb -batch -ex run -ex bt --args ./komodod -ac_cc=1 -ac_name=ATX -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458 -addnode=94.130.224.11
[New Thread 0x2903 of process 33135]
During startup program terminated with signal ?, Unknown signal.
No stack.
```


[17-Aug-18 11:26 AM] SHossain#0007
@libscott with the debug version


[17-Aug-18 11:26 AM] SHossain#0007
in mac


[17-Aug-18 11:31 AM] libscott#8867
aw damn.


[17-Aug-18 11:31 AM] libscott#8867
During startup it dies!


[17-Aug-18 11:31 AM] libscott#8867
how is that?


[17-Aug-18 11:32 AM] libscott#8867
what if you run it without the ` -batch -ex run -ex bt`


[17-Aug-18 11:32 AM] libscott#8867
so just `gdb --args ...`


[17-Aug-18 11:32 AM] libscott#8867
i guess it'll do the same thing


[17-Aug-18 11:32 AM] libscott#8867
ah


[17-Aug-18 11:32 AM] libscott#8867
"If you're on Sierra , that's expected. GDB isn't compatible with macOS Sierra , even the last release (7.12)."


[17-Aug-18 11:33 AM] libscott#8867
https://stackoverflow.com/a/42034771/81557

{Embed}
https://stackoverflow.com/a/42034771/81557
Unknown ending signal when using debugger gdb
I have installed GDB on Mac OS X and to test that it works I have used this following C program. 

#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {

    int *
https://images-ext-1.discordapp.net/external/dP07hBXxuorGcvXU609uJ_e6ZgPlIdBxqG8OjQQiAyY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon%402.png


[17-Aug-18 11:33 AM] libscott#8867
Might be worth a shot?


[17-Aug-18 11:36 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/480082426584891403/Screen_Shot_2018-08-17_at_19.35.48.png


[17-Aug-18 11:42 AM] SHossain#0007
gdb seems running in my mac


[17-Aug-18 11:42 AM] SHossain#0007
https://gist.github.com/danisfermi/17d6c0078a2fd4c6ee818c954d2de13c

{Embed}
https://gist.github.com/danisfermi/17d6c0078a2fd4c6ee818c954d2de13c
Setup gdb on Mac OS Sierra/High Sierra
Setup gdb on Mac OS Sierra/High Sierra
https://images-ext-1.discordapp.net/external/lsnui-hk0_dACRUzlNXXIHshiNI8EBvDisTlcyz9fFA/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/33509082


[17-Aug-18 11:56 AM] SHossain#0007
latest run
```
gdb -batch -ex run -ex bt --args ./komodod -ac_cc=1 -ac_name=ATX -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458 -addnode=94.130.224.11
[New Thread 0x1803 of process 533]
[New Thread 0x1a03 of process 533]
During startup program terminated with signal SIGTRAP, Trace/breakpoint trap.
No stack.
```


[17-Aug-18 11:58 AM] SHossain#0007
same using `gdb --args ...`


[17-Aug-18 11:59 AM] SHossain#0007
@libscott previously it was `unknown signal`. now we know it was terminated with signal `SIGTRAP`


[17-Aug-18 12:10 PM] libscott#8867
Still seems like a gdb issue tbh


[17-Aug-18 12:11 PM] libscott#8867
Theres no log outputs from komodod which there are if you run it without gdb


[17-Aug-18 12:17 PM] SHossain#0007
let me get the debug.log


[17-Aug-18 12:24 PM] SHossain#0007
https://pastebin.com/QUNQhqGM


[17-Aug-18 12:24 PM] SHossain#0007
@libscott debug.log file contents ^^


[17-Aug-18 12:24 PM] SHossain#0007
when i ran the daemon without gdb i got this
```
call komodo_args.(./komodod) NOTARY_PUBKEY.(0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458)
>>>>>>>>>> ATX: p2p.56603 rpc.56604 magic.b2cc68bb 2999740603 1000 coins
initialized ATX at 1534533545
finished loading blocks ATX
height.0 slowflag.1 possible.0 cmp.0
Bus error: 10
```


[17-Aug-18 12:30 PM] libscott#8867
hm


[17-Aug-18 12:30 PM] libscott#8867
so it crashes at block 92?


[17-Aug-18 12:30 PM] SHossain#0007
yes


[17-Aug-18 12:30 PM] libscott#8867
every time?


[17-Aug-18 12:30 PM] SHossain#0007
same on win


[17-Aug-18 12:31 PM] SHossain#0007
every time


[17-Aug-18 12:31 PM] libscott#8867
same on win!


[17-Aug-18 12:31 PM] libscott#8867
ok! let me check what it might be


[17-Aug-18 12:31 PM] libscott#8867
because i can see what transactions are in there


[17-Aug-18 12:31 PM] SHossain#0007
i posted the win debug.log file yesterday


[17-Aug-18 12:31 PM] libscott#8867
have you got a seed IP?


[17-Aug-18 12:31 PM] SHossain#0007
94.130.224.11


[17-Aug-18 12:31 PM] libscott#8867
thx


[17-Aug-18 12:34 PM] SHossain#0007
with the same parameters you can also try to sync `AT5` coin


[17-Aug-18 12:52 PM] libscott#8867
@SHossain can you try the fixosx branch?


[17-Aug-18 12:55 PM] SHossain#0007
üëçüèΩ


[17-Aug-18 12:57 PM] SHossain#0007
compiling fresh clone


[17-Aug-18 01:02 PM] SHossain#0007
```
Fetching libevent...
curl: (3) <url> malformed
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
curl: (22) The requested URL returned error: 404 Not Found
make: *** [/Users/user/komodo/depends/sources/download-stamps/.stamp_fetched-libevent-libevent-2.1.8.tar.gz.hash] Error 22
```


[17-Aug-18 01:03 PM] libscott#8867
just try again I guess


[17-Aug-18 01:03 PM] libscott#8867
unless you still have the same checkout we were using before


[17-Aug-18 01:05 PM] SHossain#0007
tried again. i'm using fresh clone


[17-Aug-18 01:09 PM] SHossain#0007
few lines above it shows `https://github.com/libevent/libevent/archive//release-2.1.8-stable.tar.gz`


[17-Aug-18 01:09 PM] SHossain#0007
could `//` be the reason for error?


[17-Aug-18 01:11 PM] libscott#8867
i guess so!


[17-Aug-18 01:11 PM] SHossain#0007
i already have libevent 2.1.8 installed in my mac


[17-Aug-18 01:16 PM] libscott#8867
you can try modifying line 3 in depends/packages/libevent.mk


[17-Aug-18 01:17 PM] libscott#8867
but its strange...


[17-Aug-18 01:17 PM] SHossain#0007
it seems the compile configs weren't changed and they were working earlier


[17-Aug-18 01:22 PM] libscott#8867
maybe github changed lol


[17-Aug-18 01:22 PM] libscott#8867
no more broken url redirects!


[17-Aug-18 01:22 PM] SHossain#0007
https://github.com/libevent/libevent/releases/download/release-2.1.8-stable/libevent-2.1.8-stable.tar.gz


[17-Aug-18 01:22 PM] libscott#8867
still... when I tried that url with curl here it didnt give me a 404


[17-Aug-18 01:26 PM] SHossain#0007
very strange indeed


[17-Aug-18 04:14 PM] Alright#0419
The way `rewardsunlock` works currently is that if the plan doesn't have enough funding, the remaining coins are stuck in the contract.


[17-Aug-18 04:16 PM] Alright#0419
```
./komodo-cli -ac_name=ATX rewardsinfo e960de2c4261736291127e9ebfe7b29bd31c6678ec39b17d90f710b0e200e523
{
  "result": "success",
  "fundingtxid": "e960de2c4261736291127e9ebfe7b29bd31c6678ec39b17d90f710b0e200e523",
  "name": "overdraf",
  "sbits": 7377303440351131247,
  "APR": "25.00000000",
  "minseconds": 0,
  "maxseconds": 864000,
  "mindeposit": "1.00000000",
  "funding": "0.15298333",
  "locked": "5842000.00000000"
}
```
```
./komodo-cli -ac_name=ATX rewardsunlock overdraf e960de2c4261736291127e9ebfe7b29bd31c6678ec39b17d90f710b0e200e523

./rawsend 01000000022fd29cb80ea93d2072b9cac2c0e2ddfb20dfec3b9c5eca7fa07ff4cec709ae3c000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9814054ad67cc4900c2155d7ac8a0f3ce864bee485b3196ffa2d639463a3df898d2cd0f0e268091d8cec0bce721518c0f1dac06ae8013aeb705aa35edbc5baf18f41da100af038001e5a10001ffffffffa99d730733404eba55611ba0f498aac071e0a37bf839eae686e7c489b90ce83d000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140b47675e5eec042d6d93c3cc03f2376d4a4b894f740cea88c3e05d3af83b3ab1525c279328cd609d20719a71aab47709d7bc61a737bb9a5db80249a8a6280855ba100af038001e5a10001ffffffff030000000000000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc192c264d170000002321027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392ac00000000000000002c6a2ae5556f7665726472616623e500e2b010f7907db139ec78661cd39bb2e7bf9e7e1291627361422cde60e900000000
error code: -26
error message:
16: bad-txns-in-belowout
```


[17-Aug-18 04:16 PM] Alright#0419
```
APR 25.00000000 minseconds.0 maxseconds.864000 mindeposit 1.00000000
maxseconds.864000 (L) 1000.00000000 1000.00000000
duration 99143 (1534547700 - 1534448557) numblocks 1664 (2286 - 622)
amount 1000.00000000 2500000000000.00000000 3231 -> duration.99143 reward 0.78595097 vals 3.14380390 7859.50975000
maxseconds.0 (U) 0.15298333 0.15298333
search mempool for unlocked and unspent CC rewards output for 0.63306764
inputs 0.15298333 CCchange 0.00000000 amount 1000.00000000 reward 0.78595097
spentheight.2287 valuein 1000.15298333 vs 1000.78595097 error
```


[17-Aug-18 04:16 PM] Alright#0419
```
2018-08-17 23:16:31 ERROR: CheckInputs(): e9980cf4691b5aa831dd46addbf8260c1a44ff4e4c5774a8a72fbde0ecdc062f value in (1000.15298333) < value out (1000.78595097) diff -0.63296764
2018-08-17 23:16:31 ERROR: AcceptToMemoryPool: ConnectInputs failed e9980cf4691b5aa831dd46addbf8260c1a44ff4e4c5774a8a72fbde0ecdc062f
```


[18-Aug-18 12:02 AM] dukeleto#7326
should it work a different way?


[18-Aug-18 01:21 AM] jl777c#5810
maybe I can just allow it to be redeemed without any rewards so it can never be stuck


[18-Aug-18 03:09 AM] jl777c#5810
@Alright pushed a change, it will be rejected by the old versions, but it solves the various issues with rewards. basically if there isnt enough funds at the time of unlock, it goes into recover mode and allows a simple tx with the locked funds as vin.0 and a single output to the unlock address. it can be for less than the locked amount so people can effectively donate funds into the rewards fund if they want.


[18-Aug-18 03:10 AM] jl777c#5810
the issue is there is no way to know ahead of time when locking whether there will be enough funds when unlocking. The hueristic I use is to make sure there is enough rewards to cover the deposit amount. Not that 100% return will be expected, just that if there isnt enough in the rewards funds to cover the deposit amount, it seems likely that there wont be enough when time comes to unlock


[18-Aug-18 03:10 AM] jl777c#5810
with the recover mode tx, at least the funds are not stuck

{Reactions}
üëçüèΩ 

[18-Aug-18 04:20 AM] SHossain#0007
@dukeleto please let me know if you have a fix for this


[18-Aug-18 04:20 AM] SHossain#0007
```
rm -f /Users/user/komodo/depends/sources/download-stamps/.stamp_fetched-libevent-libevent-2.1.8.tar.gz.hash
touch /Users/user/komodo/depends/sources/download-stamps/.stamp_fetched-libevent-libevent-2.1.8.tar.gz.hash
cd /Users/user/komodo/depends/sources/download-stamps; (test -f /Users/user/komodo/depends/sources/libevent-2.1.8.tar.gz || ( mkdir -p /Users/user/komodo/depends/work/download/libevent-2.1.8 && echo Fetching libevent... && ( curl --connect-timeout 10 --retry 3 -L -f -o "/Users/user/komodo/depends/work/download/libevent-2.1.8/libevent-2.1.8.tar.gz.temp" "/libevent-2.1.8.tar.gz" || curl --connect-timeout 10 --retry 3 -L -f -o "/Users/user/komodo/depends/work/download/libevent-2.1.8/libevent-2.1.8.tar.gz.temp" "https://github.com/libevent/libevent/archive//release-2.1.8-stable.tar.gz" ) && echo "316ddb401745ac5d222d7c529ef1eada12f58f6376a66c1118eee803cb70f83d  /Users/user/komodo/depends/work/download/libevent-2.1.8/libevent-2.1.8.tar.gz.temp" > /Users/user/komodo/depends/work/download/libevent-2.1.8/.libevent-2.1.8.tar.gz.hash && shasum -a 256 -c /Users/user/komodo/depends/work/download/libevent-2.1.8/.libevent-2.1.8.tar.gz.hash && mv /Users/user/komodo/depends/work/download/libevent-2.1.8/libevent-2.1.8.tar.gz.temp /Users/user/komodo/depends/sources/libevent-2.1.8.tar.gz && rm -rf /Users/user/komodo/depends/work/download/libevent-2.1.8 ))
Fetching libevent...
curl: (3) <url> malformed
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
curl: (22) The requested URL returned error: 404 Not Found
make: *** [/Users/user/komodo/depends/sources/download-stamps/.stamp_fetched-libevent-libevent-2.1.8.tar.gz.hash] Error 22
```


[18-Aug-18 04:42 AM] SHossain#0007
fixed. please ignore my message above


[18-Aug-18 07:21 AM] SHossain#0007
@jl777c fixed the issues for macOS. requires further testing. i'll be compiling and testing the Win builds


[18-Aug-18 07:21 AM] jl777c#5810
best to post a version without all the debugs


[18-Aug-18 07:21 AM] grewalsatinder#9653
@SHossain  if you have a github repo, I think best is to post there.


[18-Aug-18 07:22 AM] grewalsatinder#9653
less chances an imposter can scam ppl here.


[18-Aug-18 07:23 AM] SHossain#0007
Thanks @grewalsatinder


[18-Aug-18 07:23 AM] SHossain#0007
will do.


[18-Aug-18 07:24 AM] grewalsatinder#9653
üëç


[18-Aug-18 07:39 AM] SHossain#0007
took 12 minutes to cross-compile for Windows


[18-Aug-18 07:39 AM] SHossain#0007
using 8 threads

{Reactions}
üëå 

[18-Aug-18 07:50 AM] SHossain#0007
Here is the CCFix-OSX verion of komodo binaries with sha256 and virustotal checked https://github.com/himu007/komodo/releases/tag/ccfix-18082018

{Embed}
https://github.com/himu007/komodo/releases/tag/ccfix-18082018
himu007/komodo
komodo - Komodo
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[18-Aug-18 07:54 AM] Alright#0419
going to hard fork ATX in a couple minutes


[18-Aug-18 08:02 AM] Alright#0419
oh maybe not üòõ


[18-Aug-18 08:02 AM] Alright#0419
@jl777c should recovery mode work with an existing overdrafted plan?


[18-Aug-18 08:03 AM] jl777c#5810
yes, as long as latest version is used


[18-Aug-18 08:04 AM] jl777c#5810
also make sure you cant unlock funds to a different address than locked it, that would be a bad bug


[18-Aug-18 08:04 AM] Alright#0419
```
./komodo-cli -ac_name=ATX rewardsunlock overdraf e960de2c4261736291127e9ebfe7b29bd31c6678ec39b17d90f710b0e200e523
{
  "result": "success",
  "hex": "01000000022fd29cb80ea93d2072b9cac2c0e2ddfb20dfec3b9c5eca7fa07ff4cec709ae3c000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981407bd333f4b04d5f2840ff3d2b0405325ecf2f35679c000b6225c25b0856c0592314e633754164ec802b960f74e6f92f38209467342745cc745d2eb290e1fed348a100af038001e5a10001ffffffffa99d730733404eba55611ba0f498aac071e0a37bf839eae686e7c489b90ce83d000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981409b711ed4367d0f0259a8587262f89de14004e8be75a02c3a77209a855bf69fcd41a46a0c83404bed1f69c56c75ec3d3747178fbc75edfce8c5e42ff928ebf766a100af038001e5a10001ffffffff030000000000000000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc65ffd34f170000002321027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392ac00000000000000002c6a2ae5556f7665726472616623e500e2b010f7907db139ec78661cd39bb2e7bf9e7e1291627361422cde60e900000000"
}
```
```
APR 25.00000000 minseconds.0 maxseconds.864000 mindeposit 1.00000000
maxseconds.864000 (L) 1000.00000000 1000.00000000
duration 155840 (1534604397 - 1534448557) numblocks 2599 (3221 - 622)
amount 1000.00000000 2500000000000.00000000 3231 -> duration.155840 reward 1.23541349 vals 4.94165398 12354.13495000
maxseconds.0 (U) 0.15298333 0.15298333
search mempool for unlocked and unspent CC rewards output for 1.08253016
inputs 0.15298333 CCchange 0.00000000 amount 1000.00000000 reward 1.23541349
spentheight.3223 valuein 1000.15298333 vs 1001.23541349 error
```


[18-Aug-18 08:05 AM] Alright#0419
vin0 is 1000 coins from a `rewardslock`
vin1 is  0.15298333 coins from a `rewardsunlock` change


[18-Aug-18 08:06 AM] Alright#0419
vout0 is 0 coin change to CC 
vout1 is 1001.23541349 coins to `rewardslock` address
vout2 is OP_RETURN


[18-Aug-18 08:07 AM] jl777c#5810
it seems it tried to spend a lot more than it should have


[18-Aug-18 08:08 AM] jl777c#5810
or maybe the vin was too small


[18-Aug-18 08:08 AM] Alright#0419
I'll fund the plan a small amount then try a couple more `rewardsunlock`s


[18-Aug-18 08:08 AM] jl777c#5810
no


[18-Aug-18 08:08 AM] jl777c#5810
this is a bug I want to fix while it is reproducing


[18-Aug-18 08:08 AM] jl777c#5810
I think i know the reason


[18-Aug-18 08:09 AM] Alright#0419
the output is too large


[18-Aug-18 08:09 AM] jl777c#5810
pushed fix. it should now generate the recover funds path


[18-Aug-18 08:10 AM] jl777c#5810
1.23541349 seems like a resonable size rewared for the time and APR


[18-Aug-18 08:10 AM] jl777c#5810
it just found some funds, butnot enough and it tried to make a normal tx, which is underfunded


[18-Aug-18 08:10 AM] Alright#0419
yep


[18-Aug-18 08:10 AM] Alright#0419
building


[18-Aug-18 08:19 AM] Alright#0419
```
01000000022fd29cb80ea93d2072b9cac2c0e2ddfb20dfec3b9c5eca7fa07ff4cec709ae3c000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981406a59d48ff895728a7641686b8c75616a903752b71d207642108d7b937544893e79bfa7328378229c7b315ab5c830efc025a9a5e2df8c335cb3b77b7452db387da100af038001e5a10001ffffffffa99d730733404eba55611ba0f498aac071e0a37bf839eae686e7c489b90ce83d000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140952fd645dd64c742666760dafbe347f15e16837929af9e64776cd0767618450b0e3b54379483673866c01c92d96076c262319e4a37bcf8f59059b5cd7651fe00a100af038001e5a10001ffffffff02f0c07648170000002321027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392ac1d6fe90000000000232102c43473c970e24f37f7d351ea4c3d208c40ec4e7cbfe344a81a2de2d4ffdbbb22ac00000000
```


[18-Aug-18 08:19 AM] Alright#0419
was confirmed, but something may be off here


[18-Aug-18 08:20 AM] Alright#0419
the address that locked 1000 coins, RNv5ppQ2G7BLA2EFhFj86upZJr9tzwuuvi, received 999.9999


[18-Aug-18 08:20 AM] Alright#0419
another address, RH95ci4FtxMRj7iXBdgjB3ZtyNe4jpJqP9 received 0.15298333, the rest of the funding


[18-Aug-18 08:21 AM] Alright#0419
RH95ci4FtxMRj7iXBdgjB3ZtyNe4jpJqP9 is the `-pubkey=` address of the node that created the tx


[18-Aug-18 08:22 AM] Alright#0419
Although, once the funding is 0, it works as expected


[18-Aug-18 08:24 AM] jl777c#5810
yes, my bad. I forgot to reset the mtx. fixing


[18-Aug-18 08:25 AM] jl777c#5810
it shouldnt have been confirmed...


[18-Aug-18 08:26 AM] jl777c#5810
it wasnt a proper recover tx and it shouldnt have passed the test for being a valid unlock. investigatint


[18-Aug-18 08:27 AM] Alright#0419
http://cctest.explorer.dexstats.info/tx/9fe25426176579f62d9afe70ca1bc4e42244618a88e3c2911b52a65bd9fca770


[18-Aug-18 08:28 AM] jl777c#5810
what console prints did you get when you broadcast that?


[18-Aug-18 08:33 AM] jl777c#5810
pushed fix for having some rewards funds but not enough and tightened the error checking. a 2 vin/2 vout tx should have been rejected before. no idea how it got confirmed


[18-Aug-18 08:36 AM] Alright#0419
```
APR 25.00000000 minseconds.0 maxseconds.864000 mindeposit 1.00000000
maxseconds.864000 (L) 1000.00000000 1000.00000000
duration 156697 (1534605254 - 1534448557) numblocks 2623 (3245 - 622)
amount 1000.00000000 2500000000000.00000000 3231 -> duration.156697 reward 1.24220731 vals 4.96882927 12422.07317500
maxseconds.0 (U) 0.15298333 0.15298333
search mempool for unlocked and unspent CC rewards output for 1.08932398
not enough rewards funds to payout 1.24230731, recover mode tx
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
not enough opret.[0]
```


[18-Aug-18 08:37 AM] Alright#0419
nothing in debug.log


[18-Aug-18 08:40 AM] jl777c#5810
pushed fix


[18-Aug-18 08:40 AM] TonyL#3577
Just wonder - are these warnings normal during Windows build?

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/480400667442413588/unknown.png


[18-Aug-18 08:42 AM] jl777c#5810
its boost. seems possible but not sure


[18-Aug-18 08:50 AM] SHossain#0007
```
C:\win64>komodo-cli.exe -ac_name=ATX faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "999.69970000"
}

C:\win64>komodo-cli.exe -ac_name=ATX faucetget
error: couldn't connect to server: EOF reached (code 1)
(make sure server is running and you are connecting to the correct RPC port)
```


[18-Aug-18 08:50 AM] SHossain#0007
stdout
```
start at 1534607332
Could not read 32 bytes entropy from system
```


[18-Aug-18 08:51 AM] SHossain#0007
faucetget crashed the daemon


[18-Aug-18 08:51 AM] SHossain#0007
syncd 100%


[18-Aug-18 08:51 AM] jl777c#5810
actually it seems windows RNG needs some work


[18-Aug-18 08:53 AM] SHossain#0007
with these crashes, db gets corrupted and start syncing from 0 upon next start


[18-Aug-18 08:54 AM] jl777c#5810
pushed a patch, but libscott will need to make a proper fix


[18-Aug-18 08:55 AM] SHossain#0007
updating


[18-Aug-18 09:01 AM] Alright#0419
```
./komodo-cli -ac_name=ATX rewardsunlock overdraf e960de2c4261736291127e9ebfe7b29bd31c6678ec39b17d90f710b0e200e523
./rawsend 01000000012fded29822345dd437d31bbc1a04d86751274bc94e590d6f9dda765a4f822750000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb98140d65fccbcc6b4bd2fe0306f01fba9a0033e7f51ce02052aa3b686def65a4b42c76e9a7d74fffa15508020cfc0af7d37ae9d60d0c5e6cdf681af10af4fba6a44b8a100af038001e5a10001ffffffff02f0c0764817000000232103941584892cf2399715553f4d5a30406b3ddca65cea5c967c4cd367f4ee7e9271ac00000000000000002c6a2ae5556f7665726472616623e500e2b010f7907db139ec78661cd39bb2e7bf9e7e1291627361422cde60e900000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[18-Aug-18 09:01 AM] Alright#0419
```
APR 25.00000000 minseconds.0 maxseconds.864000 mindeposit 1.00000000
maxseconds.864000 (L) 1000.00000000 1000.00000000
duration 156706 (1534607758 - 1534451052) numblocks 2614 (3296 - 682)
amount 1000.00000000 2500000000000.00000000 3231 -> duration.156706 reward 1.24227866 vals 4.96911466 12422.78665000
search mempool for unlocked and unspent CC rewards output for 1.24237866
not enough rewards funds to payout 1.24237866, recover mode tx
CC Eval EVAL_REWARDS Invalid: unlock tx wrong number of vouts spending tx 5027824f5a76da9d6f0d594ec94b275167d8041abc1bd337d45d342298d2de2f
CC Eval EVAL_REWARDS Invalid: unlock tx wrong number of vouts spending tx 5027824f5a76da9d6f0d594ec94b275167d8041abc1bd337d45d342298d2de2f
```


[18-Aug-18 09:01 AM] Alright#0419
```
2018-08-18 15:58:44 ERROR: CScriptCheck(): 85d3ec0670606f3efd79a978726b3a90eaa1a5ac0e9d9fa38476867f67596eaf:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-18 15:58:44 ERROR: CScriptCheck(): 85d3ec0670606f3efd79a978726b3a90eaa1a5ac0e9d9fa38476867f67596eaf:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-18 15:58:44 ERROR: AcceptToMemoryPool: ConnectInputs failed 85d3ec0670606f3efd79a978726b3a90eaa1a5ac0e9d9fa38476867f67596eaf
```


[18-Aug-18 09:01 AM] Alright#0419
the inputs/outputs add up correctly and the input is not spent


[18-Aug-18 09:04 AM] jl777c#5810
fixing. at least it is detecting it is not good


[18-Aug-18 09:04 AM] Alright#0419
Is trying to pay the correct address also


[18-Aug-18 09:04 AM] Alright#0419
that's with 0 funding in the plan


[18-Aug-18 09:04 AM] jl777c#5810
yes it violated the 1 vout rule, as I added opreturn to get pas the prior error


[18-Aug-18 09:05 AM] Alright#0419
I can rollback my chain to test the same scenario of ~.15 left funded in it


[18-Aug-18 09:05 AM] Alright#0419
or just add funding


[18-Aug-18 09:06 AM] jl777c#5810
ok, new version there. hopefully will work


[18-Aug-18 09:09 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/480407918999765004/calling-libscott.png


[18-Aug-18 09:10 AM] jl777c#5810
i removed that print in the latest version


[18-Aug-18 09:10 AM] jl777c#5810
but it should be working other than the annoying print


[18-Aug-18 09:10 AM] SHossain#0007
it did work


[18-Aug-18 09:11 AM] SHossain#0007
```
C:\win64>komodo-cli.exe -ac_name=ATX faucetget
{
  "result": "success",
  "hex": "01000000010028b09e72b4fca90632f100986a328d2262aa0e7feecdcafeec88db428bbc00000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281405529238058a245b87d4dd5e48210888c4fe53fa955c1ce78592b287e19c05491085bd9e60ced519b8e6338ea919ad9028f89c955d8847114ef0c6904be04bf7aa100af038001e4a10001ffffffff03c0f1134617000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc809698000000000023210343ce7e622e3865cabfbac21814fe6c8d87ddfe7a52d786fa078b75b88a56983fac0000000000000000086a06e447986a000000000000"
}
```


[18-Aug-18 09:11 AM] SHossain#0007
```
C:\win64>komodo-cli.exe -ac_name=ATX sendrawtransaction 01000000010028b09e72b4fca90632f100986a328d2262aa0e7feecdcafeec88db428bbc00000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281405529238058a245b87d4dd5e48210888c4fe53fa955c1ce78592b287e19c05491085bd9e60ced519b8e6338ea919ad9028f89c955d8847114ef0c6904be04bf7aa100af038001e4a10001ffffffff03c0f1134617000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc809698000000000023210343ce7e622e3865cabfbac21814fe6c8d87ddfe7a52d786fa078b75b88a56983fac0000000000000000086a06e447986a000000000000
00324ee372d4241bb91cf00dc51f30316e746fcd23b1805bd4f889a472d12b00
```


[18-Aug-18 09:11 AM] SHossain#0007
`found valid txid after 27247 iterations 1534608544`


[18-Aug-18 09:12 AM] SHossain#0007
waiting for mempool to be cleared to verify 0.1 ATX received


[18-Aug-18 09:13 AM] SHossain#0007
```
C:\win64>komodo-cli.exe -ac_name=ATX rewardslist
[
  "288df341df135d1f2137f6940f586c084314c22aadbf9aa835a61b16c23637c4",
  "e960de2c4261736291127e9ebfe7b29bd31c6678ec39b17d90f710b0e200e523",
  "449e41341b20ead8a84191880b350af5bcc13c8cac0541ebb46229b9bb679dd2"
]

C:\win64>komodo-cli.exe -ac_name=ATX rewardsinfo 288df341df135d1f2137f6940f586c084314c22aadbf9aa835a61b16c23637c4
{
  "result": "success",
  "fundingtxid": "288df341df135d1f2137f6940f586c084314c22aadbf9aa835a61b16c23637c4",
  "name": "RW",
  "sbits": 22354,
  "APR": "25.00000000",
  "minseconds": 0,
  "maxseconds": 86400,
  "mindeposit": "10000.00000000",
  "funding": "15.00000000",
  "locked": "0.00000000"
}
```


[18-Aug-18 09:16 AM] Alright#0419
Can I unlock that?


[18-Aug-18 09:16 AM] Alright#0419
Wanted to test that a normal rewardsunlock still works properly


[18-Aug-18 09:16 AM] Alright#0419
Oh not, that one


[18-Aug-18 09:16 AM] Alright#0419
the IRA one


[18-Aug-18 09:17 AM] Alright#0419
That RW is broken becuasse mindeposit is above funding


[18-Aug-18 09:17 AM] SHossain#0007
normal functions seems to be working


[18-Aug-18 09:17 AM] SHossain#0007
i didn't want to lock funds. just checking if the values are being returned correctly in windows


[18-Aug-18 09:19 AM] SHossain#0007
anyone mining ATX?


[18-Aug-18 09:19 AM] SHossain#0007
i'm updating my seednode


[18-Aug-18 09:20 AM] Alright#0419
just started again


[18-Aug-18 09:20 AM] Alright#0419
this chain isn't likely to sync from scratch


[18-Aug-18 09:21 AM] SHossain#0007
ATX sync is ok. tried few times in linux and mac


[18-Aug-18 09:21 AM] Alright#0419
recently?


[18-Aug-18 09:21 AM] SHossain#0007
how recent @Alright ?


[18-Aug-18 09:22 AM] Alright#0419
~50 blocks


[18-Aug-18 09:22 AM] Alright#0419
http://cctest.explorer.dexstats.info/tx/9fe25426176579f62d9afe70ca1bc4e42244618a88e3c2911b52a65bd9fca770


[18-Aug-18 09:22 AM] SHossain#0007
yes, i believe so


[18-Aug-18 09:23 AM] SHossain#0007
based on my getinfo call history
```
  "blocks": 3297,
  "longestchain": 3297,
```


[18-Aug-18 09:24 AM] Alright#0419
UpdateTip: new best=00464d47af34414fab4e9e5cb34481965e8c41f73f14b07c1ada1f47525c433e  height=3301


[18-Aug-18 09:25 AM] SHossain#0007
explorer on http://cctest.explorer.dexstats.info/block/006b32ad340e190975d7e23b2fa6761096d617862428985ac1a41c2928594ce5


[18-Aug-18 09:25 AM] SHossain#0007
3297


[18-Aug-18 09:25 AM] SHossain#0007
same as seednode, my local node


[18-Aug-18 09:25 AM] SHossain#0007
maybe we have a fork


[18-Aug-18 09:25 AM] jl777c#5810
there were hardforking changes,


[18-Aug-18 09:31 AM] SHossain#0007
new chain
```
./komodod -ac_cc=1 -ac_name=BOLT -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0205989c644cc045bffca3a7bdb845106fe8d2e119515893e70b656ed937ec6458 -addnode=94.130.224.11 -gen -genproclimit=1 &
```


[18-Aug-18 09:34 AM] SHossain#0007
updated source removed those printouts for win build
```
start at 1534610054
found valid txid after 13153 iterations 1534610060
```


[18-Aug-18 09:35 AM] SHossain#0007
Pinned a message.


[18-Aug-18 09:36 AM] SHossain#0007
```
C:\win64>komodo-cli.exe -ac_name=BOLT getinfo
{
  "version": 1001550,
  "protocolversion": 170003,
  "KMDversion": "0.1.1",
  "notarized": 0,
  "prevMoMheight": 0,
  "notarizedhash": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid_height": "mempool",
  "KMDnotarized_height": 0,
  "notarized_confirms": 0,
  "walletversion": 60000,
  "balance": 0.10000000,
  "blocks": 58,
  "longestchain": 0,
  "timeoffset": 0,
  "tiptime": 1534610130,
  "connections": 2,
  "proxy": "",
  "difficulty": 2.364573624651686,
  "testnet": false,
  "keypoololdest": 1534609603,
  "keypoolsize": 101,
  "paytxfee": 0.00000000,
  "relayfee": 0.00000100,
  "errors": "",
  "CCid": 1,
  "name": "BOLT",
  "p2pport": 57850,
  "rpcport": 57851,
  "magic": -831657946,
  "premine": 1000,
  "reward": 10000000000000
}
```


[18-Aug-18 09:36 AM] SHossain#0007
faucetget worked in win


[18-Aug-18 09:39 AM] SHossain#0007
probably try restarting your pc


[18-Aug-18 09:39 AM] SHossain#0007
i'm running in 3 different nodes


[18-Aug-18 09:39 AM] SHossain#0007
2 nodes mining


[18-Aug-18 09:44 AM] SHossain#0007
üëçüèΩ


[18-Aug-18 09:45 AM] SHossain#0007
over 100 blocks now, mining with only 1 node


[18-Aug-18 09:46 AM] CHMEX#0686
want the explorer on bolt?


[18-Aug-18 09:48 AM] SHossain#0007
please. that would be nice


[18-Aug-18 09:49 AM] SHossain#0007
this chain is using latest source and is still clean


[18-Aug-18 09:49 AM] SHossain#0007
i funded faucet


[18-Aug-18 09:49 AM] SHossain#0007
created a dice game and funded with entropy tx


[18-Aug-18 09:50 AM] SHossain#0007
```
C:\win64>komodo-cli.exe -ac_name=BOLT dicelist
[
  "66ff863ef398b12a1ef4c9edfec276872dfb591673da88df9d8340844d8e65a4"
]

C:\win64>komodo-cli.exe -ac_name=BOLT diceinfo 66ff863ef398b12a1ef4c9edfec276872dfb591673da88df9d8340844d8e65a4
{
  "result": "success",
  "fundingtxid": "66ff863ef398b12a1ef4c9edfec276872dfb591673da88df9d8340844d8e65a4",
  "name": "WinDice",
  "sbits": 28538276418578775,
  "minbet": "10.00000000",
  "maxbet": "10000.00000000",
  "maxodds": 777,
  "timeoutblocks": 1,
  "funding": "105070.00000000"
}
```


[18-Aug-18 09:52 AM] SHossain#0007
first dicebet from windows, lost


[18-Aug-18 09:54 AM] SHossain#0007
2nd bet, lost


[18-Aug-18 09:54 AM] CHMEX#0686
explorer is running


[18-Aug-18 09:55 AM] SHossain#0007
@CHMEX Thank you very much


[18-Aug-18 09:55 AM] CHMEX#0686
np


[18-Aug-18 09:55 AM] SHossain#0007
yes, it is live


[18-Aug-18 09:58 AM] SHossain#0007
first win on WIN
```
ec2fd35541210c985d4a6d70fe20c183c9848aabd9bcf0c7bf62a0f08ec48bd0 winnings 30.00000000 bet 10.00000000 at odds 2:1
```


[18-Aug-18 10:04 AM] SHossain#0007
```
check faucetget txid 0003ad81718b9370d729e8557fab0802fc998b7269e617c16c4f331b13b32800 00/00
CCduration backwards timestamps 1534611783 1534611783 for txid d7c79e44f12a3f2997871df4f5aa5b0c463132b9ee4d0f261ab7e220a18c04aa hts.(128 128)
faucetget validated
```


[18-Aug-18 10:16 AM] TonyL#3577
No luck :/
```  "result": "success",
  "status": "loss"```


[18-Aug-18 10:17 AM] SHossain#0007
how many times did you loose?


[18-Aug-18 10:17 AM] SHossain#0007
this can be normal


[18-Aug-18 10:17 AM] TonyL#3577
Was just my first bet. Sure it can)


[18-Aug-18 10:18 AM] TonyL#3577
Just was happy by fact that I finally placed it

{Reactions}
üëçüèΩ 

[18-Aug-18 10:28 AM] TonyL#3577
```./komodo-cli -ac_name=BOLT -ac_name=BOLT dicestatus WinDice 66ff863ef398b12a1ef4c9edfec276872dfb591673da88df9d8340844d8e65a4 0bbabd33386be90d7dfff43b08293446052815dd54f959782221dc1b547edd20
{
  "result": "success",
  "status": "win",
  "won": 30000
}
```

Hmm, how can I win 30000 if I placed a 10000 bet with 2 odds (I guess it means 1/2)?
Or is 2 means that I place bet on two numbers of hexahedral dice?

```./komodo-cli -ac_name=BOLT dicebet WinDice 66ff863ef398b12a1ef4c9edfec276872dfb591673da88df9d8340844d8e65a4 10000 2```


[18-Aug-18 10:38 AM] jl777c#5810
you bet 1 unit at 2:1 odds, since you won you win 2 and get back the 1 you put in


[18-Aug-18 10:39 AM] jl777c#5810
1:1 odds is even money bet, you bet 1 and get back 0 or 2


[18-Aug-18 10:40 AM] TonyL#3577
Got it, thanks @jl777c 
Just thought about classic bookmaker formula: Bet * Odds  = Payout, thats why was a lil bit confused


[18-Aug-18 10:40 AM] jl777c#5810
maybe I got it wrong?


[18-Aug-18 10:41 AM] jl777c#5810
i dont use dice games, so someone familar with satoshi dice should let us know if this is wrong


[18-Aug-18 10:41 AM] TonyL#3577
If you're using bookmaker and placing a 1000 bet with 2 odds you're assume to get back 2000 if won


[18-Aug-18 10:41 AM] jl777c#5810
also is the payout percentage correct with the way things are setup? i guess would need to automate making many bets to get a statistical average of results


[18-Aug-18 10:42 AM] TonyL#3577
Oh yeah some monte-carlo tests would be great to proof RNG


[18-Aug-18 10:45 AM] TonyL#3577
Let me play a little with different bets to determine whether the current payout model is correct. I was a poker-pro in past so perceive all things critically when I see the word "bet" üòÇ


[18-Aug-18 11:45 AM] jl777c#5810
so things are working like they should?


[18-Aug-18 12:26 PM] TonyL#3577
It's quite problematic to test bets with higher odds since less probability to win. Started to write bet-placing script


[18-Aug-18 01:12 PM] jl777c#5810
probably best to start with 1:1 then 2:1, then 3:1 and we can see if it is changing as it should


[18-Aug-18 01:12 PM] jl777c#5810
probably best to start with 1:1 then 2:1, then 3:1 and we can see if it is changing as it should


[18-Aug-18 01:12 PM] jl777c#5810
probably best to start with 1:1 then 2:1, then 3:1 and we can see if it is changing as it should


[18-Aug-18 01:15 PM] jl777c#5810
probably best to start with 1:1 then 2:1, then 3:1 and we can see if it is changing as it should


[18-Aug-18 01:15 PM] jl777c#5810
but definitely needs to be automated

{Reactions}
ü§ñ 

[18-Aug-18 01:34 PM] SHossain#0007
@dukeleto it would be nice you can have  an automated test script of dice contract using the above example test

{Reactions}
üëçüèΩ 

[18-Aug-18 01:36 PM] TonyL#3577
I just wrote such scripts (quite raw). Testing now with different probabilities

{Reactions}
üëåüèΩ 

[18-Aug-18 01:41 PM] SHossain#0007
great


[18-Aug-18 01:41 PM] SHossain#0007
let me know if you need BOLT funds.

{Reactions}
üëå 

[18-Aug-18 01:41 PM] SHossain#0007
i mined about 10 Million


[18-Aug-18 01:42 PM] SHossain#0007
hope we can use this chain for a bit longer before starting another chain


[18-Aug-18 02:07 PM] TonyL#3577
Hmm, I can't make a new `dicebet` before finish previous game by `dicefinish` (I think would be good to note it somewhere)
Have to re-write my stuff in such case. Before I wanted just to collect  all sendrawtransaction outputs from dicebet for X bets to array and initiate dicefinish for all these bets after.


[18-Aug-18 02:14 PM] SHossain#0007
create a new dice plan


[18-Aug-18 02:15 PM] SHossain#0007
then use `diceaddfunds` using 10, 20 , 50. 70, 25 1000, ... to be used as entropy tx


[18-Aug-18 02:15 PM] SHossain#0007
i didn't have much utxos in there


[18-Aug-18 02:16 PM] jl777c#5810
there needs to be more entropy tx. one per block per entropy tx


[18-Aug-18 02:16 PM] SHossain#0007
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=211514340

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[18-Aug-18 02:16 PM] SHossain#0007
use this spreadsheet for the call params


[18-Aug-18 02:17 PM] TonyL#3577
So, for let's say 1000 test bets have I make 1000 UTXO first?


[18-Aug-18 02:17 PM] SHossain#0007
when you create a plan, you add funds already in there (starting funds)


[18-Aug-18 02:18 PM] SHossain#0007
use more for that, just for the testing


[18-Aug-18 02:18 PM] SHossain#0007
then, add utxos, about 20-30 is a good idea to have


[18-Aug-18 02:23 PM] jl777c#5810
if you want to do 1000 bets in a single block, yes

{Reactions}
üëå 

[18-Aug-18 02:23 PM] jl777c#5810
100 utxo can do 1000 bets in 10 blocks


[18-Aug-18 02:23 PM] jl777c#5810
1 bet per utxo per block


[18-Aug-18 02:26 PM] SHossain#0007
i'll create a new dice plan and fund with a lot of utxos in 30 minutes from my Linux


[18-Aug-18 02:27 PM] SHossain#0007
for me without automation, it is bit hard to do these in Windows.


[18-Aug-18 02:28 PM] SHossain#0007
Insomnia is best solution for me


[18-Aug-18 02:28 PM] SHossain#0007
it's faster to test the calls


[18-Aug-18 02:32 PM] TonyL#3577
I've made a dice plan TONY and filled by 10 transactions. Gonna stress-test it now


[18-Aug-18 02:41 PM] jl777c#5810
if the dice plan node doesnt respond immediately to a dicebet, then a dicestatus call is needed to complete the bet. if it isnt before the timeout blocks happen, the diceplan loses! so best to run a dicestatus call every so often


[18-Aug-18 02:44 PM] TonyL#3577
Yep, can't send more than two `dicebet -> sendrawtransaction` per block. Starting to receive `couldnt create faucet get transaction`


[18-Aug-18 02:45 PM] jl777c#5810
you should be able to do more than 2 per block, but maybe the utxo selection is getting conflicts.


[18-Aug-18 02:45 PM] TonyL#3577
This execution sent 8. Have to set some timeout maybe


[18-Aug-18 02:45 PM] jl777c#5810
maybe try different bet sizes


[18-Aug-18 02:45 PM] jl777c#5810
matched to different sized utxo


[18-Aug-18 02:59 PM] TonyL#3577
Looks fair for now with odds 2

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/480496110163591168/unknown.png


[18-Aug-18 03:00 PM] TonyL#3577
Will continue with test tomorrow. Just realized it's 5 AM already lol

{Reactions}
üëçüèΩ (2) üí§ (3) 

[19-Aug-18 12:03 AM] CHMEX#0686
The other day I got some Coffe there was a link to lattessocoin.com ; inside the coffe you get a code like MY-CODE-123 which you enter on the website.
After entering the email and personal data (which is used for marketing) they tell you if you won or not. The way it's done there is no blockchain behind. it's just a marketing gag.
I was wondering how to build a CC for that. It's basicly is 'faucet' with 'lotto'? Would the eligible codes be stored as KV and somehow encrypted? They should only be redeemable once.


[19-Aug-18 04:24 AM] bartwr#6773
@SHossain What was your fix for `Fetching libevent... curl: (3) <url> malformed` yesterday, for running the `./zcutil/build.sh -j8` succesfully?


[19-Aug-18 04:25 AM] SHossain#0007
remove trailing slash `/` from 3rd line of `~/komodo/depends/packages/libevent.mk` file

{Reactions}
üëç 

[19-Aug-18 04:25 AM] SHossain#0007
the fix is now in the repo


[19-Aug-18 04:26 AM] bartwr#6773
Thanks, that works! üòÉ


[19-Aug-18 04:29 AM] bartwr#6773
> the fix is now in the repo.

In what repo this fix is applied? I checked in https://github.com/komodoplatform/komodo the `master` branch as well as `dev`. I don't see other recently updated branches there. https://github.com/KomodoPlatform/komodo/branches . Do I have to look in an other komodo repository?

{Embed}
https://github.com/komodoplatform/komodo
KomodoPlatform/komodo
komodo - Komodo
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Embed}
https://github.com/KomodoPlatform/komodo/branches
KomodoPlatform/komodo
komodo - Komodo
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[19-Aug-18 04:31 AM] SHossain#0007
they are now in jl777's repo


[19-Aug-18 04:32 AM] SHossain#0007
soon will be in KP repo after testing a bit longer


[19-Aug-18 05:33 AM] bartwr#6773
Ok. That's good to know. Related commit: https://github.com/jl777/komodo/commit/007cc1f99686876edf97c481135836a20b690016

I'd apply the hotfix asap to `KomodoPlatform/komodo` I think, so people that follow https://github.com/KomodoPlatform/komodo#linux . Installation process seems to work well with the trailing slashes removed üòÉ

{Embed}
https://github.com/jl777/komodo/commit/007cc1f99686876edf97c481135836a20b690016
Remove trailing / in depends ¬∑ jl777/komodo@007cc1f
https://images-ext-1.discordapp.net/external/auDSZ7eLIqbPui1Im3X2Jr_UCM3F6Kpn3qdIKcJWxBA/%3Fs%3D200%26v%3D4/https/avatars0.githubusercontent.com/u/5962559

{Embed}
https://github.com/KomodoPlatform/komodo
KomodoPlatform/komodo
komodo - Komodo
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[19-Aug-18 06:45 AM] jl777c#5810
@CHMEX you could make a faucet type of CC where it has a set of codes (hardcoded or algo generated)


[19-Aug-18 06:50 AM] siu#3920
hi guys, been busy with the family this weekend :/


[19-Aug-18 06:52 AM] SHossain#0007
i have 32 entropy tx for this dice plan
```
{
    "result": {
        "result": "success",
        "fundingtxid": "3a7253aaae2b4cda2ea0b1b10adc996f1740f26d6017d46328b6abccf6dc44a3",
        "name": "DiceX",
        "sbits": 379658135876,
        "minbet": "10.00000000",
        "maxbet": "10000.00000000",
        "maxodds": 50,
        "timeoutblocks": 1,
        "funding": "1059908.00000000"
    },
    "error": null,
    "id": null
}
```


[19-Aug-18 06:53 AM] CHMEX#0686
Ok thanks I will try that specially the hardcoded should be possible with my level of c üòî


[19-Aug-18 09:07 AM] TonyL#3577
https://goo.gl/9hzwaZ my current gambling results. Losing more than expected when increasing the odds. But distance is not big for sure.

{Embed}
https://goo.gl/9hzwaZ
Bets SC testing
–õ–∏—Å—Ç1

 Odds, Bets Placed, Bets Won, Bets won expected, Bets won delta,% Won,% Won expected,% Delta
 1, 102, 55, 51, 4, 0, 5392156863, 0, 5, 0, 03921568627
 2, 109, 31, 36, 33333333,- 5, 333333333, 0, 2844036697, 0, 3333333333,- 0, 04892966361
 3, 110, 19, 27, 5,- 8, 5, 0...
https://images-ext-2.discordapp.net/external/1VSKkDnHmGi9iUtIbT6bwHWuTnP9IZcHN86gDRJw4gk/https/lh5.googleusercontent.com/T6TVqrlvHNvyI_5CgwF6v8ph3FoR5gv7W_a6r0-H9RFvvXuawh7k_JMiD90SSkf42f4_Zw%3Dw1200-h630-p


[19-Aug-18 09:14 AM] SHossain#0007
i had 6 bets.
Lost: 2
Win: 4


[19-Aug-18 09:17 AM] TonyL#3577
I've placed almost 700 (~110 with each odd from 1 to 6)


[19-Aug-18 09:31 AM] SHossain#0007
@TonyL post your pubkey, i'll send you some TKX tokens ```{
    "result": {
        "result": "success",
        "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
        "owner": "0304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6",
        "name": "TKX",
        "supply": 100000000,
        "description": "Test to break"
    },
    "error": null,
    "id": null
}```


[19-Aug-18 09:33 AM] TonyL#3577
@SHossain 0286d6bba9aec67d5b23357e6906f8a1689fdffc98355911050461a76f93ae14ef


[19-Aug-18 09:34 AM] SHossain#0007
sent


[19-Aug-18 09:34 AM] SHossain#0007
i have 1 bid and 1 ask. please test fillbid and fillask


[19-Aug-18 09:35 AM] SHossain#0007
```
        {
            "funcid": "s",
            "txid": "f8b772cf92a11bd0daa2351cdd204f17b3c960c9adf89f1699b1e55a38043d3a",
            "vout": 0,
            "amount": "10000",
            "askamount": "10000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
            "totalrequired": "50000.00000000",
            "price": "5.00000000"
        },
        {
            "funcid": "b",
            "txid": "ff224db078de75c38fbb274d4a6bcb52fde4174000962db8ba46c34231db8fe6",
            "vout": 0,
            "amount": "1000.00000000",
            "bidamount": "1000.00000000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
            "totalrequired": 100,
            "price": "10.00000000"
        }
```


[19-Aug-18 09:35 AM] SHossain#0007
try smaller amount first for partial fill


[19-Aug-18 09:36 AM] SHossain#0007
only 2 orders for now to keep the orderbook clean


[19-Aug-18 09:37 AM] SHossain#0007
once you send the raw tx, wait for the mempool to get cleared


[19-Aug-18 09:38 AM] SHossain#0007
and check your token balance and coin balance to verify


[19-Aug-18 09:40 AM] TonyL#3577
@SHossain trying to find some doc regards operating with tokens


[19-Aug-18 09:41 AM] SHossain#0007
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=506594567

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[19-Aug-18 09:41 AM] SHossain#0007
this spreadsheet has all 4 contract test plans


[19-Aug-18 09:41 AM] TonyL#3577
Oh there is a few sheets. My bad


[19-Aug-18 09:50 AM] TonyL#3577
@SHossain Filled ask for 10
```{
  "result": "success",
  "CCaddress": "RFj6qwBPo4zJYXCotLPd81Uqv2kUBFYYeL",
  "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
  "balance": 100010
}
```


[19-Aug-18 09:50 AM] SHossain#0007
yep. orderbook changed
```
        {
            "funcid": "S",
            "txid": "e55092ce5e39c66a777ac7ba0981a9a8593bd46665763da60d859ed2241fd510",
            "vout": 0,
            "amount": "9990",
            "askamount": "9990",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
            "totalrequired": "49950.00000000",
            "price": "5.00000000"
        },
```


[19-Aug-18 09:51 AM] TonyL#3577
Have I fill it totally now? Will look closely my coin balance this time also


[19-Aug-18 09:52 AM] SHossain#0007
you can


[19-Aug-18 10:02 AM] TonyL#3577
@SHossain done ```{
  "result": "success",
  "CCaddress": "RFj6qwBPo4zJYXCotLPd81Uqv2kUBFYYeL",
  "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
  "balance": 110000
}
```
Token balance have changed on 50050 which is correct + .0001 txfee


[19-Aug-18 10:05 AM] SHossain#0007
what would happen when we both want to fill this order?
```
        {
            "funcid": "s",
            "txid": "82b87f5787a2b5b0011a001cf91d45fbe8b81d4ec4ec45512a92292cd5311d4c",
            "vout": 0,
            "amount": "10000",
            "askamount": "10000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
            "totalrequired": "10000.00000000",
            "price": "1.00000000"
        },```


[19-Aug-18 10:05 AM] DG#6934
Hi guys are you testing BOLT I Think I jumped into some old chains that are not on testing curently


[19-Aug-18 10:06 AM] SHossain#0007
you had old BOLT chain @DG ?


[19-Aug-18 10:06 AM] TonyL#3577
@SHossain filled bid for 100
Balances changed as expected


[19-Aug-18 10:06 AM] SHossain#0007
i started it yesterday after the latest hardfork change to test


[19-Aug-18 10:07 AM] DG#6934
ok is TEST got it


[19-Aug-18 10:07 AM] DG#6934
i will close this one


[19-Aug-18 10:08 AM] DG#6934
"blocks": 1583,
  "longestchain": 1583,
  "timeoffset": 0,
  "tiptime": 1534698299,
  "connections": 6,
  "proxy": "",
  "difficulty": 14.02357404723335,
  "testnet": false,


[19-Aug-18 10:08 AM] SHossain#0007
``` 
"blocks": 1586,
"longestchain": 1586,```


[19-Aug-18 10:10 AM] TonyL#3577
Looks like someone else testing or @SHossain cancelled bid order. (there was a 1000 amount and I filled only for 100 but don't see it in tokenorders anymore)


[19-Aug-18 10:11 AM] SHossain#0007
i see only this order left
```
        {
            "funcid": "s",
            "txid": "82b87f5787a2b5b0011a001cf91d45fbe8b81d4ec4ec45512a92292cd5311d4c",
            "vout": 0,
            "amount": "10000",
            "askamount": "10000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
            "totalrequired": "10000.00000000",
            "price": "1.00000000"
        }
```


[19-Aug-18 10:11 AM] TonyL#3577
Same


[19-Aug-18 10:12 AM] SHossain#0007
collect a HEX value to fill this ^^ order and wait for me. i will get HEX too. we can try broadcasting together


[19-Aug-18 10:12 AM] SHossain#0007
`fillask`


[19-Aug-18 10:12 AM] TonyL#3577
Alright


[19-Aug-18 10:13 AM] TonyL#3577
I'm on position


[19-Aug-18 10:13 AM] SHossain#0007
i have hex and ready


[19-Aug-18 10:13 AM] SHossain#0007
go in 5 sec


[19-Aug-18 10:14 AM] SHossain#0007
`707c1ab3564afc778b61f5ec6d0364a98e3d223ba061728b395f5c33d992225c`


[19-Aug-18 10:14 AM] TonyL#3577
Got an error


[19-Aug-18 10:14 AM] SHossain#0007
please post the error


[19-Aug-18 10:14 AM] TonyL#3577
```error code: -25
error message:```


[19-Aug-18 10:14 AM] TonyL#3577
```fillbuy validated
totally filled!```


[19-Aug-18 10:14 AM] TonyL#3577
In daemon logs


[19-Aug-18 10:14 AM] SHossain#0007
that would be me


[19-Aug-18 10:15 AM] SHossain#0007
my one got accepts before your one. that may be the reason you got error


[19-Aug-18 10:16 AM] SHossain#0007
let's get this one filled
```
        {
            "funcid": "b",
            "txid": "84fa46d67a286ca2e5283cd389f39021ab6ce1914981750e8d1a34bcff2a8054",
            "vout": 0,
            "amount": "1000.00000000",
            "bidamount": "1000.00000000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
            "totalrequired": 100,
            "price": "10.00000000"
        }
```
you get HEX first and let me know


[19-Aug-18 10:16 AM] SHossain#0007
`tokenfillbid`


[19-Aug-18 10:16 AM] SHossain#0007
i will generate the hex after you and broadcast it after you


[19-Aug-18 10:17 AM] TonyL#3577
@SHossain Just to be sure - have I use 100 as an amount?


[19-Aug-18 10:17 AM] SHossain#0007
```
{
"method":"tokenfillbid",
"params": ["4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f","84fa46d67a286ca2e5283cd389f39021ab6ce1914981750e8d1a34bcff2a8054","100"]
```


[19-Aug-18 10:17 AM] SHossain#0007
yes


[19-Aug-18 10:18 AM] TonyL#3577
I'm ready @SHossain


[19-Aug-18 10:18 AM] SHossain#0007
broadcast it please


[19-Aug-18 10:19 AM] TonyL#3577
```error code: -25
error message:```


[19-Aug-18 10:19 AM] SHossain#0007
i generated HEX after you and broadcasted it after you


[19-Aug-18 10:20 AM] SHossain#0007
my one got accepted http://cctest.explorer.dexstats.info/tx/5f774c49115a1887f1afab1f4fddb22dfc5ed2537d97e1a034dbf6407e361f3f


[19-Aug-18 10:20 AM] TonyL#3577
```./komodo-cli -ac_name=BOLT tokenfillbid 4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f 84fa46d67a286ca2e5283cd389f39021ab6ce1914981750e8d1a34bcff2a8054 100
{
  "result": "success",
  "hex": "010000000384cabce9390d10a266cb6a0f690fbffc3cb58f7fce17eb5591d10fc8e2442a1a0200000048473044022075235a4b90d28424f5ad0f47d0e6cc30399a326948cc8fd48bd9dcb469c70139022079d4b75667e3b11e4d30619f395871aadaa7b11e784ca039bd31e36c2798b40501ffffffff54802affbc341a8d0e75814991e16cab2190f389d33c28e5a26c287ad646fa84000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281402f5664a9428bcc4d53b7fde79f4c0ecf1fa53337aecbab63adb7421bb893023249c29e36aa94b75c9fe009f2a34bf19632360ca6711ee5f345de746cc668ce56a100af038001e3a10001ffffffffaeb9c7ff9c7e5239d3e8f75b294625d819935df4926d38dac8927de6474948a9030000007b4c79a276a072a26ba067a56580210286d6bba9aec67d5b23357e6906f8a1689fdffc98355911050461a76f93ae14ef814072e3dee4c6e404adc18df415aaa93d102220067622cf5fb8982a61b5c413a1790f476c8800ee1ecda122482d0ccf2873680783993a589a933ec60c470aaaea6fa100af038001e3a10001ffffffff050000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00e876481700000023210286d6bba9aec67d5b23357e6906f8a1689fdffc98355911050461a76f93ae14efac6400000000000000302ea22c802096195e66e99913358dbfc3cda384e43511843822f90c5fd7c1950e2224963ac08103120c008203000401cc4826000000000000302ea22c80203fdf184dc0482613b4b3084a6ff4a5608fb7a55d482548ae2635bd6f4fc3e9c38103120c008203000401cc00000000000000004f6a4c4ce3424253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f0000000000000000210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000"
}
```


[19-Aug-18 10:21 AM] TonyL#3577
```./komodo-cli -ac_name=BOLT sendrawtransaction 010000000384cabce9390d10a266cb6a0f690fbffc3cb58f7fce17eb5591d10fc8e2442a1a0200000048473044022075235a4b90d28424f5ad0f47d0e6cc30399a326948cc8fd48bd9dcb469c70139022079d4b75667e3b11e4d30619f395871aadaa7b11e784ca039bd31e36c2798b40501ffffffff54802affbc341a8d0e75814991e16cab2190f389d33c28e5a26c287ad646fa84000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa270281402f5664a9428bcc4d53b7fde79f4c0ecf1fa53337aecbab63adb7421bb893023249c29e36aa94b75c9fe009f2a34bf19632360ca6711ee5f345de746cc668ce56a100af038001e3a10001ffffffffaeb9c7ff9c7e5239d3e8f75b294625d819935df4926d38dac8927de6474948a9030000007b4c79a276a072a26ba067a56580210286d6bba9aec67d5b23357e6906f8a1689fdffc98355911050461a76f93ae14ef814072e3dee4c6e404adc18df415aaa93d102220067622cf5fb8982a61b5c413a1790f476c8800ee1ecda122482d0ccf2873680783993a589a933ec60c470aaaea6fa100af038001e3a10001ffffffff050000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00e876481700000023210286d6bba9aec67d5b23357e6906f8a1689fdffc98355911050461a76f93ae14efac6400000000000000302ea22c802096195e66e99913358dbfc3cda384e43511843822f90c5fd7c1950e2224963ac08103120c008203000401cc4826000000000000302ea22c80203fdf184dc0482613b4b3084a6ff4a5608fb7a55d482548ae2635bd6f4fc3e9c38103120c008203000401cc00000000000000004f6a4c4ce3424253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f0000000000000000210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000
error code: -25
error message:
```


[19-Aug-18 10:21 AM] SHossain#0007
my HEX
```
010000000357ce104f81ec542fb86a889d9df0b2323bf0961256a638b7a1e6b3f40a10e02d0100000049483045022100843f1f940e16f02f69cc873c28c2c3ed6f549fa48012dd6460a7ddc4f4f476e7022036230e5fed76a9cf2ce2445a8f2841fd90aa4e49b4236cbb38216843b8b0a8f601ffffffff54802affbc341a8d0e75814991e16cab2190f389d33c28e5a26c287ad646fa84000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140ae7f55e83968e09ff98b22278aecfdb04c4bb6fcc687a41fd8519e6e36f8075a4fc1629497af74a7273b58533d1cb3fc84911287ea7302179e41fe8aa70a6211a100af038001e3a10001ffffffff5c2292d9335c5f398b7261a03b223d8ea964036decf5618b77fc4a56b31a7c70010000007b4c79a276a072a26ba067a56580210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a681401f23b43f9f693d3390e9e88c8703478acb8c5988f16afabce77eb9c0396885546777372fd0fc1779ee4b5ba3e2ee7b68a5760e7c31f9e0784c6e865b6834a606a100af038001e3a10001ffffffff050000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc00e876481700000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac6400000000000000302ea22c802096195e66e99913358dbfc3cda384e43511843822f90c5fd7c1950e2224963ac08103120c008203000401ccac26000000000000302ea22c802096195e66e99913358dbfc3cda384e43511843822f90c5fd7c1950e2224963ac08103120c008203000401cc00000000000000004f6a4c4ce3424253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f0000000000000000210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a600000000
```


[19-Aug-18 10:21 AM] SHossain#0007
```
{
    "result": "5f774c49115a1887f1afab1f4fddb22dfc5ed2537d97e1a034dbf6407e361f3f",
    "error": null,
    "id": null
}
```


[19-Aug-18 10:22 AM] SHossain#0007
generate a HEX and broadcast for this one please
```
        {
            "funcid": "s",
            "txid": "4b3fe11d168b24ce5eb616731cbb963b55b47989434a4d4dc5d5f7abf72e774b",
            "vout": 0,
            "amount": "1000",
            "askamount": "1000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
            "totalrequired": "1000.00000000",
            "price": "1.00000000"
        }
```


[19-Aug-18 10:23 AM] TonyL#3577
`2dd9d56460409d614c7b0e09921aacaf2d4e57720ea78f648cb936075c971428`


[19-Aug-18 10:24 AM] TonyL#3577
@SHossain Maybe it's working only for person whom first generated hex?


[19-Aug-18 10:24 AM] SHossain#0007
is it the first person or the latest person to do it?


[19-Aug-18 10:24 AM] SHossain#0007
hold on please. next test coming


[19-Aug-18 10:24 AM] SHossain#0007
just need the mempool to be cleared


[19-Aug-18 10:25 AM] TonyL#3577
Working for a first one - just guess have to recheck. @SHossain ok I'm here


[19-Aug-18 10:25 AM] jl777c#5810
the utxo selection is sharing the same utxo pool, no double spends


[19-Aug-18 10:25 AM] jl777c#5810
first one to get it into mempool will get it confirmed, unless you mine the block and override it


[19-Aug-18 10:25 AM] jl777c#5810
but you still cant doublespend


[19-Aug-18 10:26 AM] SHossain#0007
thanks for clarifying üòÉ


[19-Aug-18 10:27 AM] SHossain#0007
look like the test passed?


[19-Aug-18 10:27 AM] TonyL#3577
```error code: -25
error message:```
This error message is quite abstract üòÉ


[19-Aug-18 10:27 AM] SHossain#0007
we couldn't doublespend.


[19-Aug-18 10:28 AM] TonyL#3577
Yes I understood. I meant that it's not reflected in message


[19-Aug-18 10:30 AM] SHossain#0007
try this last one please. i have already generated HEX and didn't broadcast it yet. 
```
        {
            "funcid": "s",
            "txid": "448bf40763234ca7a6a254f8c7f7dd460e821df5bba5b4636e45c7a7da9ac32a",
            "vout": 0,
            "amount": "100",
            "askamount": "100",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "4253e24022871adbeba1dfaad2cb4a4bef82c01f4de4431f6e67dcf11831578f",
            "totalrequired": "100.00000000",
            "price": "1.00000000"
        }
```


[19-Aug-18 10:31 AM] SHossain#0007
get the HEX and broadcast


[19-Aug-18 10:31 AM] TonyL#3577
`a65d180c2163e098773b33b603349450d195855f5fdecf535134beb17837ef1c`


[19-Aug-18 10:31 AM] SHossain#0007
perfect! thanks.

{Reactions}
üëç 

[19-Aug-18 10:33 AM] SHossain#0007
a new reward plan coming soon to lock funds
```
91f7d78ec3b4218a8e0babd3dec4dc74dc944d50b1ebcb1d9073832c5dbc6ef6
```


[19-Aug-18 10:34 AM] SHossain#0007
```
        "result": "success",
        "fundingtxid": "91f7d78ec3b4218a8e0babd3dec4dc74dc944d50b1ebcb1d9073832c5dbc6ef6",
        "name": "RWX",
        "sbits": 5789522,
        "APR": "25.00000000",
        "minseconds": 0,
        "maxseconds": 432000,
        "mindeposit": "100000.00000000",
        "funding": "50.00000000",
        "locked": "0.00000000"
```


[19-Aug-18 10:37 AM] SHossain#0007
i have started with 50 funding


[19-Aug-18 10:37 AM] SHossain#0007
will increated when needed


[19-Aug-18 10:38 AM] TonyL#3577
@SHossain I'll  try to put some money now


[19-Aug-18 10:38 AM] SHossain#0007
üëçüèΩ


[19-Aug-18 10:38 AM] SHossain#0007
i'll add some as well


[19-Aug-18 10:39 AM] SHossain#0007
tried to lock 500000, coulldn't create tx


[19-Aug-18 10:40 AM] TonyL#3577
```./komodo-cli -ac_name=BOLT rewardsaddfunding RWX 91f7d78ec3b4218a8e0babd3dec4dc74dc944d50b1ebcb1d9073832c5dbc6ef6 100000
{
  "result": "success",
  "hex": "01000000011b41e1e0ab11d9f6943fbf8f8b50eb986432623cd0e3a5777f6e18fb6a4ec51b000000004847304402202e4ca72ca902b3fe5a11b87cf76e2545eff98de6811587778e2c944921efe44802202db88ad5fac2b5aa013c4d93505f02bb0c50ac0b907d9c621586e7592ee7f61701ffffffff0200a0724e18090000302ea22c802065686d47a4049c2c845a71895a915eb84c04445896eec5dc0be40df0b31372da8103120c008203000401cc00000000000000002c6a2ae5415257580000000000f66ebc5d2c8373901dcbebb1504d94dc74dcc4ded3ab0b8e8a21b4c38ed7f79100000000"
}
```


[19-Aug-18 10:41 AM] SHossain#0007
i added 100000 more funding


[19-Aug-18 10:41 AM] SHossain#0007
frogot the rule


[19-Aug-18 10:43 AM] SHossain#0007
Did you notice any issues with the Dice contract?


[19-Aug-18 10:44 AM] TonyL#3577
I noticed that I win less than expected when increase the odds. For example for odds 5 I get result not fit the 3 sigmas which have a 0.3% probability


[19-Aug-18 10:45 AM] TonyL#3577
There are two options as I think: 1) I'm a super unlucky guy 2) Win probability calculating not totally as we expected for a such model


[19-Aug-18 10:48 AM] TonyL#3577
But I'll collect at least 500 bets for each odds to be more sure

{Reactions}
üëçüèΩ 

[19-Aug-18 03:06 PM] TonyL#3577
Collected more data for dice CC bets: https://goo.gl/9hzwaZ 
Can confirm now that RNG working not correct for current payout scheme with odds > 1

{Embed}
https://goo.gl/9hzwaZ
Bets SC testing
–õ–∏—Å—Ç1

 Odds, Bets Placed, Bets Won, Bets won expected, Bets won delta,% Won,% Won expected,% Delta, Standart deviation( sigma), 3 sigmas
 1, 505, 267, 252, 5, 14, 5, 0, 5287128713, 0, 5, 0, 02871287129, 11, 23610253, 33, 70830758
 2, 502, 127, 167, 3333333,- 40, 33333333...
https://images-ext-2.discordapp.net/external/1VSKkDnHmGi9iUtIbT6bwHWuTnP9IZcHN86gDRJw4gk/https/lh5.googleusercontent.com/T6TVqrlvHNvyI_5CgwF6v8ph3FoR5gv7W_a6r0-H9RFvvXuawh7k_JMiD90SSkf42f4_Zw%3Dw1200-h630-p

{Reactions}
üëçüèΩ 

[19-Aug-18 09:21 PM] if(!destiny){return slave}#0736
@jusoaresf  how are you doing?


[20-Aug-18 12:23 AM] jl777c#5810
@TonyL very good data! The algo I use is:
    if ( odds > 1 )
        bettor = (bettor / arith_uint256(odds));
which I guess leads to some sort of binomial decay. I will need to research a bit how to get hash compares to map to odds


[20-Aug-18 12:33 AM] TonyL#3577
thanks for a feedback @jl777c I'll also try to understand where problem in algo might be


[20-Aug-18 12:34 AM] jl777c#5810
pretty sure the reason is that each bit is independent


[20-Aug-18 12:35 AM] jl777c#5810
and dividing linearly doesnt match the odds.


[20-Aug-18 12:35 AM] jl777c#5810
I have two hash values of 256 bits each. where each bit is high entropy random


[20-Aug-18 12:37 AM] jl777c#5810
i think it has to do with diff calculation: https://en.bitcoin.it/wiki/Difficulty

{Embed}
https://en.bitcoin.it/wiki/Difficulty
Difficulty


[20-Aug-18 12:38 AM] TonyL#3577
Just add more 0 in case of increased odds?


[20-Aug-18 12:38 AM] jl777c#5810
i think to convert the hash to a difficulty and then divide one by the odds will do the trick


[20-Aug-18 12:38 AM] TonyL#3577
I can test this version, feel free to buzz me


[20-Aug-18 12:39 AM] Koste#9861
guys question i have but not sure where to drop it


[20-Aug-18 12:40 AM] Koste#9861
lol i sund like joda


[20-Aug-18 12:40 AM] Koste#9861
yoda*


[20-Aug-18 12:40 AM] TonyL#3577
@Koste Hi!) If it's related to CC testing you can drop it there I guess


[20-Aug-18 12:40 AM] Koste#9861
well not really tho


[20-Aug-18 12:41 AM] Koste#9861
but beffor i ask i going to run google first


[20-Aug-18 12:43 AM] Koste#9861
well you can make it easer for my just by link to api if there is one


[20-Aug-18 12:43 AM] Koste#9861
wrong channel sorry


[20-Aug-18 12:44 AM] TonyL#3577
If you need an advice / have a trouble with one of the products (cli, wallets, dex etc.) feel free to drop your question in #ü§ù‚îÇgeneral-support , also there is separate chats for each of the products. If you have kinda deep/conceptual question or something related to main komodo codebase you can address your question to JL in #üé∞‚îÉask-jl777


[20-Aug-18 12:45 AM] Koste#9861
thanks

{Reactions}
üëç 

[20-Aug-18 12:48 AM] TonyL#3577
@Koste  You're welcome! P.S. Here:
https://support.supernet.org/support/home 
and here: https://komodoplatform.atlassian.net/wiki/spaces/KPSD/pages
you can find a lot of articles/docs which may help you


[20-Aug-18 12:49 AM] Koste#9861
yes it is ..


[20-Aug-18 02:57 AM] dukeleto#7326
@SHossain i saw your comment about automated dice tests, can you explain a bit more about what you would like to see tested?


[20-Aug-18 03:09 AM] jl777c#5810
@TonyL new dice algo should to better for odds > 1, plz verify.
@dukeleto tony created https://docs.google.com/spreadsheets/d/1hkEmwtQ1Jw5UOXnVHMfo3qo9k83PF8tJls7NbbJADXA/edit#gid=0

{Embed}
https://docs.google.com/spreadsheets/d/1hkEmwtQ1Jw5UOXnVHMfo3qo9k83PF8tJls7NbbJADXA/edit
Bets SC testing
–õ–∏—Å—Ç1

 Odds, Bets Placed, Bets Won, Bets won expected, Bets won delta,% Won,% Won expected,% Delta, Standart deviation( sigma), 3 sigmas
 1, 505, 267, 252, 5, 14, 5, 0, 5287128713, 0, 5, 0, 02871287129, 11, 23610253, 33, 70830758
 2, 502, 127, 167, 3333333,- 40, 33333333...
https://images-ext-2.discordapp.net/external/1VSKkDnHmGi9iUtIbT6bwHWuTnP9IZcHN86gDRJw4gk/https/lh5.googleusercontent.com/T6TVqrlvHNvyI_5CgwF6v8ph3FoR5gv7W_a6r0-H9RFvvXuawh7k_JMiD90SSkf42f4_Zw%3Dw1200-h630-p


[20-Aug-18 03:09 AM] jl777c#5810
it is a hard forking change, so best to test on a new chain


[20-Aug-18 03:14 AM] TonyL#3577
@jl777c üëç  will collect data tonight


[20-Aug-18 03:35 AM] dukeleto#7326
very nice document @TonyL

{Reactions}
üëç (2) 

[20-Aug-18 03:37 AM] dukeleto#7326
@TonyL are you assuming a gaussian distribution of bets to come up with your "probability to get out of 3 sigmas" ?


[20-Aug-18 03:38 AM] TonyL#3577
@dukeleto I assume binomial distribution


[20-Aug-18 03:38 AM] jl777c#5810
the variation seems to be way off. i changed to match what dice sites use


[20-Aug-18 03:39 AM] jl777c#5810
take 20 bits of hex, if less than a million mod with 10000 and compare against that


[20-Aug-18 03:39 AM] jl777c#5810
if >= million, use the next 20 bits


[20-Aug-18 03:39 AM] TonyL#3577
Which with high n -> to normal (or Gaussian) distribution


[20-Aug-18 03:39 AM] TonyL#3577
So yes in general üòÉ


[20-Aug-18 03:43 AM] dukeleto#7326
I think i can cook up some automated tests that we can run and calculate these stats, and the tests will fail unless results are within a specified number of sigmas

{Reactions}
üëåüèΩ 

[20-Aug-18 03:45 AM] TonyL#3577
It would be great I think


[20-Aug-18 03:45 AM] SHossain#0007
Thanks @TonyL and @dukeleto üòÉ


[20-Aug-18 03:46 AM] dukeleto#7326
they will probably be pretty slow, just gonna say. Because I will need to broadcast and mine a regtest block for each bet,unless I can create 500 betting raw transactions, broadcast them all, and mine them in one block. Not sure if that's possible


[20-Aug-18 03:47 AM] TonyL#3577 (pinned)
https://github.com/tonymorony/kmd_bets_tests I wrote mine stuff pretty straight

{Embed}
https://github.com/tonymorony/kmd_bets_tests
tonymorony/kmd_bets_tests
Contribute to kmd_bets_tests development by creating an account on Github.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[20-Aug-18 03:48 AM] dukeleto#7326
oh, that is useful. looks like i don't need to do a sendrawtransaction for each bet


[20-Aug-18 03:48 AM] TonyL#3577
Now have one more script which pushing ./place_bets every every X minutes, so I've prepared dice CC with ~50 UTXO, just left this pushing script for a 2-3 hours or so, then changing .txt and odds in ./placebets


[20-Aug-18 03:48 AM] SHossain#0007
Pinned a message.


[20-Aug-18 03:49 AM] dukeleto#7326
oh, actually I see it here: https://github.com/tonymorony/kmd_bets_tests/blob/master/place_bets.sh#L5

{Embed}
https://github.com/tonymorony/kmd_bets_tests/blob/master/place_bets.sh
tonymorony/kmd_bets_tests
Contribute to kmd_bets_tests development by creating an account on Github.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[20-Aug-18 03:49 AM] dukeleto#7326
this BOLT chain, what is it?


[20-Aug-18 03:50 AM] TonyL#3577
Oh yes, actually I found that confirm_bets.sh script not needed since you're getting bet result immediately after rawtransaction broadcasting without dicefinish


[20-Aug-18 03:50 AM] SHossain#0007
@dukeleto i moved away from ATx prefiex just thought it was more solid (after a lot of hardforking changes)


[20-Aug-18 03:50 AM] dukeleto#7326
life has been keeping me very busy and I haven't kept up with all the backlog in this channel üçø


[20-Aug-18 03:50 AM] SHossain#0007
and started **BOLT**


[20-Aug-18 03:51 AM] dukeleto#7326
cool


[20-Aug-18 03:51 AM] SHossain#0007
in hope that it will survive a longer than the earlier onces before we hardfork again


[20-Aug-18 03:52 AM] SHossain#0007
and tried a different name üòÉ


[20-Aug-18 03:52 AM] TonyL#3577
And this is a pushing monkey.sh script which I've used: 
```
BANANA=0
while [ $BANANA -lt 60 ]; do
./place_bets.sh
sleep 60
let BANANA=BANANA+1
done
```


[20-Aug-18 03:53 AM] TonyL#3577
It's better to combine all in one script for sure I think üòÉ


[20-Aug-18 03:54 AM] dukeleto#7326
@TonyL i have python tests


[20-Aug-18 03:54 AM] dukeleto#7326
just a few basic dice tests right now: https://github.com/letolabs/komodo/blob/cctests/qa/rpc-tests/cryptoconditions.py#L132

{Embed}
https://github.com/letolabs/komodo/blob/cctests/qa/rpc-tests/cryptoconditions.py
letolabs/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/STidbfwli6qkMkU8vATD46L8ib5zmeVb7WDB5OpJ4KU/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/648647


[20-Aug-18 03:55 AM] dukeleto#7326
and also James made a change that made my tests fail and I haven't fixed that yet


[20-Aug-18 03:55 AM] dukeleto#7326
i need to fix: ```CC Eval EVAL_FAUCET Invalid: faucet is only for brand new addresses spending tx 94f50b0c9e0e86a4889382386ddb9e0b040828bf66d9256a1d04b6f08e28b70d
DEBUG:BitcoinRPC:<-- {"result":null,"error":{"code":-26,"message":"16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)"},"id":19}

```


[20-Aug-18 03:56 AM] TonyL#3577
Great, I advice first to run some script which increase entropy by sending transaction to dice CC each block


[20-Aug-18 03:56 AM] TonyL#3577
In such case you'll able to collect data much much faster


[20-Aug-18 03:56 AM] dukeleto#7326
nothing fast about the tests


[20-Aug-18 03:56 AM] dukeleto#7326
üòÉ


[20-Aug-18 03:56 AM] dukeleto#7326
needs to be fixed, but we must mine test blocks in our tests to do a xtn, that makes stuff slow


[20-Aug-18 03:57 AM] dukeleto#7326
randomness may be an issue


[20-Aug-18 04:00 AM] TonyL#3577
Alright, I'll send my monkey to gamble a little anyway and then we'll be able to compare our results for this new dice code @dukeleto


[20-Aug-18 04:04 AM] dukeleto#7326
keep the monkey happy üëç

{Reactions}
üçå (2) 

[20-Aug-18 04:33 AM] dukeleto#7326
@jl777c if you have advice to avoid the `EVAL_FAUCET Invalid: faucet is only for brand new addresses` error in my tests, that would be helpful. I read the code that generates the error but I don't quite understand


[20-Aug-18 04:34 AM] dukeleto#7326
the üåÖ is coming, so I should probably sleep


[20-Aug-18 04:34 AM] SHossain#0007
only way i know is, you need to restart the daemon with different pubkey and imprort the privkey (make sure your address has 0 tx of any kind) and use `faucetget`


[20-Aug-18 04:35 AM] dukeleto#7326
that seems pretty inconvenient


[20-Aug-18 04:35 AM] dukeleto#7326
both manually and in our tests


[20-Aug-18 04:36 AM] SHossain#0007
this was to discourage faucet leechers


[20-Aug-18 04:38 AM] dukeleto#7326
well, we could turn off that check in regtest mode, is one option. which has pros and cons

{Reactions}
üëçüèΩ 

[20-Aug-18 04:40 AM] dukeleto#7326
it made my passing test suite fail, and getting around it requires a lot of work


[20-Aug-18 04:41 AM] dukeleto#7326
best ROI is to disable that check in regtest mode. Which makes sense, in regtest, we control all nodes => no need to worry about evil faucet leeches


[20-Aug-18 04:41 AM] SHossain#0007
yes, you are right


[20-Aug-18 04:42 AM] dukeleto#7326
some pedantic testing person might argue "then it makes it hard to test that particular evil faucet leech condition in regtest mode"


[20-Aug-18 04:42 AM] dukeleto#7326
they are correct


[20-Aug-18 05:27 AM] siu#3920
hello

{Reactions}
‚òï 

[20-Aug-18 05:32 AM] SHossain#0007
Hey @siu


[20-Aug-18 05:41 AM] SHossain#0007
can anyone test fresh sync for BOLT please? i'm getting stuck at 1791


[20-Aug-18 05:41 AM] SHossain#0007
```1791 - http://cctest.explorer.dexstats.info/block/00e1f18456119bc8911ba29041840a8db13c476463d38c7914b1235dfca66f37
1792 - http://cctest.explorer.dexstats.info/block/01210a194d60b315d04e823e86aa29205b1475ea1d2dc59606a85a20f3cf4138```


[20-Aug-18 05:44 AM] SHossain#0007
these stdout in terminal before getting stuck
```
addtomempool for CC checking: n.21 rejects.20 last.0
addtomempool for CC checking: n.27 rejects.26 last.0
addtomempool for CC checking: n.21 rejects.20 last.0
addtomempool for CC checking: n.26 rejects.25 last.0
addtomempool for CC checking: n.24 rejects.23 last.0
addtomempool for CC checking: n.21 rejects.20 last.0
addtomempool for CC checking: n.20 rejects.19 last.0
addtomempool for CC checking: n.26 rejects.25 last.0
addtomempool for CC checking: n.13 rejects.12 last.0
addtomempool for CC checking: n.23 rejects.22 last.0
addtomempool for CC checking: n.23 rejects.22 last.0
addtomempool for CC checking: n.17 rejects.16 last.0
addtomempool for CC checking: n.26 rejects.25 last.0
addtomempool for CC checking: n.2 rejects.1 last.0
addtomempool for CC checking: n.4 rejects.3 last.0
addtomempool for CC checking: n.21 rejects.20 last.0
addtomempool for CC checking: n.25 rejects.24 last.0
```


[20-Aug-18 06:04 AM] TonyL#3577
@SHossain 
``` ./komodo-cli -ac_name=BOLT getinfo
{
  "version": 1001550,
  "protocolversion": 170003,
  "KMDversion": "0.1.1",
  "notarized": 0,
  "prevMoMheight": 0,
  "notarizedhash": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid_height": "mempool",
  "KMDnotarized_height": 0,
  "notarized_confirms": 0,
  "walletversion": 60000,
  "balance": 109630580.93988799,
  "blocks": 2711,
  "longestchain": 2711,
  "timeoffset": 0,
  "tiptime": 1534770175,
  "connections": 3,
  "proxy": "",
  "difficulty": 2.592058055670829,
  "testnet": false,
  "keypoololdest": 1534610470,
  "keypoolsize": 101,
  "paytxfee": 0.00000000,
  "relayfee": 0.00000100,
  "errors": "",
  "CCid": 1,
  "name": "BOLT",
  "p2pport": 57850,
  "rpcport": 57851,
  "magic": -831657946,
  "premine": 1000,
  "reward": 10000000000000
}
```


[20-Aug-18 06:04 AM] SHossain#0007
did you delete data dir before that?


[20-Aug-18 06:04 AM] TonyL#3577
Nope, let me try


[20-Aug-18 06:06 AM] jl777c#5810
that is perfect! I was trying to get that bug duplicated


[20-Aug-18 06:06 AM] jl777c#5810
the issue is complex and likely you wont be able to sync from scratch


[20-Aug-18 06:06 AM] jl777c#5810
dont change it!


[20-Aug-18 06:06 AM] SHossain#0007
ok


[20-Aug-18 06:06 AM] jl777c#5810
make sure there are some nodes with the full chain, I need to fix this. how to launch it?


[20-Aug-18 06:06 AM] SHossain#0007
```
./komodod -ac_cc=1 -ac_name=BOLT -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=0304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6 -addnode=94.130.224.11 &
```


[20-Aug-18 06:07 AM] SHossain#0007
this 94.x node has full chain


[20-Aug-18 06:07 AM] TonyL#3577
Synced after removal as well


[20-Aug-18 06:07 AM] SHossain#0007
did you update komodod?


[20-Aug-18 06:08 AM] SHossain#0007
i pulled latest and compiled shortly before launching today


[20-Aug-18 06:08 AM] TonyL#3577
Tried to run BOLT on previous version.
On new version trying to run new chain but no luck with sync


[20-Aug-18 06:09 AM] SHossain#0007
jl777 is trying to reproduce now. that is a bug


[20-Aug-18 06:09 AM] SHossain#0007
```
KOMODO_CONNECTING.1792 mempool.1
modval 9679 vs 2000
KOMODO_CONNECTING.1792 mempool.1
modval 9679 vs 2000
KOMODO_CONNECTING.1792 mempool.1
modval 6162 vs 2000
CC Eval EVAL_DICE Invalid: DiceCalc mismatch for win/loss spending tx c6aee74b8acc776a92234134ec01c53ea714f416c6ad1f61d462464e4285ac7b
addtomempool for CC checking: n.20 rejects.18 last.0
KOMODO_CONNECTING.1792 mempool.1
modval 6162 vs 2000
CC Eval EVAL_DICE Invalid: DiceCalc mismatch for win/loss spending tx c6aee74b8acc776a92234134ec01c53ea714f416c6ad1f61d462464e4285ac7b
KOMODO_CONNECTING.1792 mempool.1
modval 6162 vs 2000
CC Eval EVAL_DICE Invalid: DiceCalc mismatch for win/loss spending tx c6aee74b8acc776a92234134ec01c53ea714f416c6ad1f61d462464e4285ac7b
addtomempool for CC checking: n.20 rejects.18 last.0
KOMODO_CONNECTING.1792 mempool.1
modval 6162 vs 2000
CC Eval EVAL_DICE Invalid: DiceCalc mismatch for win/loss spending tx c6aee74b8acc776a92234134ec01c53ea714f416c6ad1f61d462464e4285ac7b
KOMODO_CONNECTING.1792 mempool.1
addtomempool for CC checking: n.23 rejects.21 last.0
```


[20-Aug-18 06:09 AM] SHossain#0007
some more stdout that may help


[20-Aug-18 06:10 AM] jl777c#5810
dicecalc is new, so it is not compatible, i cante get past 125


[20-Aug-18 06:13 AM] SHossain#0007
yes. i get 125 now as well


[20-Aug-18 06:14 AM] SHossain#0007
block 126 - http://cctest.explorer.dexstats.info/block/00f0e461a2151f35ba809535e67ba29e4c99944a36b6b08a3bdc44516b3165b5


[20-Aug-18 06:14 AM] TonyL#3577
@SHossain can you please run the new chain? I wonder maybe I'm doing something wrong since it's my first attempt.


[20-Aug-18 06:15 AM] SHossain#0007
seed node is running with mining. i am stuck at 125 like jl777


[20-Aug-18 06:18 AM] TonyL#3577
Just run BOLT node with mining on new version and it's synced


[20-Aug-18 06:25 AM] TonyL#3577
Please ignore my message above, messed with servers.
When starting new software node with maining on BOLT from scratch getting similar errors with invalid blocks mining as on secondary node when trying to run new chain:
```
notaryid.-1 Mining.BOLT with tromp
try BOLT Mining with tromp
Mining when blockchain might not be in sync longest.0 vs 2729
537235799 block.nBits vs. calc 537230236
00c784c2c04d0782225e39acac14b30ce2d2f94d5ee0bb838b39b5e35b43913f Invalid block mined, try again
```


[20-Aug-18 06:27 AM] SHossain#0007
mining invalid block is normal


[20-Aug-18 06:27 AM] SHossain#0007
other nodes submitted it before your node


[20-Aug-18 06:32 AM] jl777c#5810
latest verson with the dice algo reverted synced right up, so cant duplicate the bug


[20-Aug-18 06:32 AM] jl777c#5810
i think time to make a new chain and try to break it


[20-Aug-18 06:34 AM] SHossain#0007
ok. will make one now and mine 100 blocks before making public


[20-Aug-18 07:03 AM] SHossain#0007
new chain up
```
./komodod -ac_cc=1 -ac_name=BRK -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<your_pubkey> -addnode=94.130.224.11 &
```

{Reactions}
üëç 

[20-Aug-18 07:03 AM] SHossain#0007
@TonyL @siu @Alright @webworker01 @dukeleto @grewalsatinder


[20-Aug-18 07:03 AM] grewalsatinder#9653
cool, thanks for tagging me üëç


[20-Aug-18 07:04 AM] SHossain#0007
@CHMEX please update the explorer when you have time üòÉ


[20-Aug-18 07:04 AM] CHMEX#0686
ok

{Reactions}
üëåüèΩ 

[20-Aug-18 07:04 AM] Alright#0419
STAKED2 starts in ~1 hour if anyone wants to join in

{Reactions}
üëçüèΩ 

[20-Aug-18 07:04 AM] SHossain#0007
BRK could be BRICK or BREAK üòõ

{Reactions}
trollface 

[20-Aug-18 07:04 AM] Alright#0419
#private-staked


[20-Aug-18 07:06 AM] SHossain#0007
i already have faucet funded with 100 coins


[20-Aug-18 07:07 AM] siu#3920
im finally at my pc

{Reactions}
üñ• 

[20-Aug-18 07:12 AM] siu#3920
ok, ran BRK


[20-Aug-18 07:12 AM] siu#3920
synced without issues.


[20-Aug-18 07:13 AM] CHMEX#0686
explorer is ready


[20-Aug-18 07:13 AM] SHossain#0007
thanks


[20-Aug-18 07:14 AM] SHossain#0007
@siu BRK is a brand new chain. not many things done yet


[20-Aug-18 07:14 AM] SHossain#0007
be back soon


[20-Aug-18 07:14 AM] siu#3920
ok


[20-Aug-18 09:16 AM] siu#3920
im unable to do a dicebet in the new chain


[20-Aug-18 09:23 AM] dukeleto#7326
Pinned a message.


[20-Aug-18 11:08 AM] siu#3920
is something broken in the dice contract?


[20-Aug-18 11:45 AM] siu#3920
```negative parameter or invalid maxodds error (limit 9999)
0e602feb3c3f870930cc10201e5a450d5da48d5affa22a91ac563a6a7769dcc5.(F 100000.00000000) numentropy tx 0: 100000.00000000
negative parameter or invalid maxodds error (limit 9999)
ENTROPY tx:
0e602feb3c3f870930cc10201e5a450d5da48d5affa22a91ac563a6a7769dcc5.(F 100000.00000000) numentropy tx 0: 100000.00000000
cant find dice entropy inputs```


[20-Aug-18 11:57 AM] SHossain#0007
i'm getting issues adding funds to dice plan as well
```
./komodo-cli -ac_name=BRK diceaddfunds DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 100
negative parameter or invalid maxodds error (limit 9999)
{
  "result": "error",
  "error": "couldnt create dice addfunding transaction"
}
```


[20-Aug-18 11:57 AM] SHossain#0007
```
./komodo-cli -ac_name=BRK diceinfo 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6
9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6.(F 1000000.00000000) numentropy tx 0: 1000000.00000000
{
  "result": "success",
  "fundingtxid": "9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6",
  "name": "DiceX",
  "sbits": 379658135876,
  "minbet": "5.00000000",
  "maxbet": "10000.00000000",
  "maxodds": 50,
  "timeoutblocks": 1,
  "funding": "1000000.00000000"
}
```


[20-Aug-18 12:15 PM] dukeleto#7326
@SHossain try using a string "100"


[20-Aug-18 12:16 PM] SHossain#0007
```
./komodo-cli -ac_name=BRK diceaddfunds DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 "100"
negative parameter or invalid maxodds error (limit 9999)
{
  "result": "error",
  "error": "couldnt create dice addfunding transaction"
}
```


[20-Aug-18 12:20 PM] dukeleto#7326
hmm


[20-Aug-18 12:20 PM] dukeleto#7326
you are on the latest jl777 branch?


[20-Aug-18 12:21 PM] dukeleto#7326
```880-    if ( amount < 0 || maxodds < 1 || maxodds > 9999 )
881-    {
882:        fprintf(stderr,"negative parameter or invalid maxodds error (limit 9999)\n");
883-        return("");
884-    }```


[20-Aug-18 12:21 PM] dukeleto#7326
there might be a precedence bug there


[20-Aug-18 12:21 PM] SHossain#0007
yes. on latest jl777 branch


[20-Aug-18 12:22 PM] dukeleto#7326
I think `||` binds tigher than `<`


[20-Aug-18 12:23 PM] SHossain#0007
i have used `100000` to try as well. returned same error


[20-Aug-18 12:23 PM] dukeleto#7326
and I need to update that code to pass back the error to the json response


[20-Aug-18 12:31 PM] siu#3920
dice plans are not working for me either


[20-Aug-18 12:32 PM] dukeleto#7326
that check for maxodds I pasted above is recent code, I think that might be why


[20-Aug-18 12:32 PM] SHossain#0007
i wanted to add entropy tx to my dice plan before starting to play


[20-Aug-18 12:34 PM] jl777c#5810
pushing fix


[20-Aug-18 12:34 PM] jl777c#5810
but internet problems


[20-Aug-18 12:37 PM] SHossain#0007
thanks. will wait.


[20-Aug-18 12:37 PM] jl777c#5810
its there


[20-Aug-18 12:38 PM] SHossain#0007
compiling


[20-Aug-18 12:42 PM] SHossain#0007
started after update. stdout:
```
>>>>>>>>>> BRK: p2p.35102 rpc.35103 magic.626e30ba 1651388602 1000 coins
initialized BRK at 1534794116
finished loading blocks BRK
processing /home/lpx/.komodo/BRK/komodostate 6KB, validated.-1
inds.0x55bfb76cb180 validate /home/lpx/.komodo/BRK/komodostate.ind fsize.1916 datalen.6162 n.479 lastfpos.0
/home/lpx/.komodo/BRK/komodostate.ind validated fpos.6162
took 0 seconds to process /home/lpx/.komodo/BRK/komodostate 6KB
addtomempool for CC checking: n.4 rejects.3 last.0
addtomempool for CC checking: n.2 rejects.1 last.0
addtomempool for CC checking: n.2 rejects.1 last.0
addtomempool for CC checking: n.2 rejects.1 last.0
addtomempool for CC checking: n.2 rejects.1 last.0
addtomempool for CC checking: n.2 rejects.1 last.0
addtomempool for CC checking: n.2 rejects.1 last.0
```


[20-Aug-18 12:43 PM] SHossain#0007
```
./komodo-cli -ac_name=BRK diceaddfunds DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 100000
negative parameter
{
  "result": "error",
  "error": "couldnt create dice addfunding transaction"
}
```


[20-Aug-18 12:44 PM] jl777c#5810
investigating


[20-Aug-18 12:46 PM] jl777c#5810
fixed for real this time

{Reactions}
üëçüèΩ 

[20-Aug-18 12:52 PM] siu#3920
ok


[20-Aug-18 12:52 PM] siu#3920
updating


[20-Aug-18 12:53 PM] SHossain#0007
```
./komodo-cli -ac_name=BRK diceaddfunds DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 100000
{
  "result": "success",
  "hex": "01000000027e9dc0c43a1235ac2d52131b9c5907a44d114d7d816dc02e819db5617798d13a000000004948304502210088488bad5ddc509d3052fa9933a314016be3217fcead093a12b8ebe7d45d820102204a50f5cd2d69b9d0d47287f12bc14d9ff0eceb6e489e33feb1752104c014a90e01ffffffffc6ecc7a864c640988509fe7d836a9ab36a8aeb3e25411f9a9245d934020f9d9b01000000494830450221009e7677010226a0f2ad430065d4c3b53b6a283f57f420d941353fa09dd1c389a1022020f1679bcbc003c7603f670ffabb8df2d396b8b8e79607093ca65ee3f63f609901ffffffff0300a0724e18090000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae6454469636558000000c6ecc7a864c640988509fe7d836a9ab36a8aeb3e25411f9a9245d934020f9d9b26cc8477fa62ca8de03bcf956ace32b8ad9a516469f4275c305a138de6c5e855000000000000000000000000000000000000000000000000000000000000000000000000"
```


[20-Aug-18 12:53 PM] SHossain#0007
fixed


[20-Aug-18 12:53 PM] SHossain#0007
`83d385f01f7676ea2752d925c5d302452d06b9e4fdc34ad6c4950a562e0764a9`


[20-Aug-18 12:54 PM] SHossain#0007
stdout of startup
```
>>>>>>>>>> BRK: p2p.35102 rpc.35103 magic.626e30ba 1651388602 1000 coins
initialized BRK at 1534794852
finished loading blocks BRK
processing /home/lpx/.komodo/BRK/komodostate 6KB, validated.-1
inds.0x55d6fb1709a0 validate /home/lpx/.komodo/BRK/komodostate.ind fsize.1924 datalen.6188 n.481 lastfpos.0
/home/lpx/.komodo/BRK/komodostate.ind validated fpos.6188
took 0 seconds to process /home/lpx/.komodo/BRK/komodostate 6KB
addtomempool ht.436 for CC checking: n.4 rejects.3 last.0
addtomempool ht.424 for CC checking: n.2 rejects.1 last.0
addtomempool ht.265 for CC checking: n.2 rejects.1 last.0
addtomempool ht.258 for CC checking: n.2 rejects.1 last.0
addtomempool ht.253 for CC checking: n.2 rejects.1 last.0
addtomempool ht.247 for CC checking: n.2 rejects.1 last.0
addtomempool ht.204 for CC checking: n.2 rejects.1 last.0
```


[20-Aug-18 01:02 PM] SHossain#0007
added a lot of utxos for this plan
```
        "fundingtxid": "9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6",
        "name": "DiceX",
        "sbits": 379658135876,
        "minbet": "5.00000000",
        "maxbet": "10000.00000000",
        "maxodds": 50,
        "timeoutblocks": 1,
        "funding": "1113688.00000000"
```


[20-Aug-18 01:09 PM] SHossain#0007
first bet won
```
KOMODO_CONNECTING.494 mempool.1
4c114f4da866beee38916c2d3a0e74b4fc6d6b0524ad2a886f55fe7602023fb5 winnings 20.00000000 bet 10.00000000 at odds 1:1
```


[20-Aug-18 01:10 PM] ComputerGenie#7004
How do you know if you won or lost (other than stdout)?


[20-Aug-18 01:10 PM] SHossain#0007
`dicestatus`

{Reactions}
üëçüèø 

[20-Aug-18 01:10 PM] SHossain#0007
only dealer node prints out win or losses


[20-Aug-18 01:11 PM] siu#3920
i still cant dicebet


[20-Aug-18 01:11 PM] siu#3920
```{
    "result": {
        "result": "error",
        "error": "couldnt create faucet get transaction"
    },
    "error": null,
    "id": null
}```


[20-Aug-18 01:11 PM] siu#3920
```ddtomempool ht.436 for CC checking: n.4 rejects.3 last.0
addtomempool ht.424 for CC checking: n.2 rejects.1 last.0
addtomempool ht.265 for CC checking: n.2 rejects.1 last.0
addtomempool ht.258 for CC checking: n.2 rejects.1 last.0
addtomempool ht.253 for CC checking: n.2 rejects.1 last.0
addtomempool ht.247 for CC checking: n.2 rejects.1 last.0
addtomempool ht.204 for CC checking: n.2 rejects.1 last.0
KOMODO_CONNECTING.494 mempool.1
KOMODO_CONNECTING.494 mempool.1
KOMODO_CONNECTING.494 mempool.1
KOMODO_CONNECTING.494 mempool.0
KOMODO_CONNECTING.494 mempool.0
KOMODO_CONNECTING.494 mempool.0
0e602feb3c3f870930cc10201e5a450d5da48d5affa22a91ac563a6a7769dcc5.(F 100000.00000000) numentropy tx 0: 100000.00000000
Dice plan (VEGAS) already exists cmpflag.1
ENTROPY tx:
0e602feb3c3f870930cc10201e5a450d5da48d5affa22a91ac563a6a7769dcc5.(F 100000.00000000) numentropy tx 0: 100000.00000000
cant find dice entropy inputs
    ```


[20-Aug-18 01:12 PM] SHossain#0007
did you use `diceaddfunds` to create entropy tx?


[20-Aug-18 01:12 PM] SHossain#0007
my dicebet command for the last best
```
{
    "method":"dicebet",
"params": ["DiceX","9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6","10", "1" ]
}
```


[20-Aug-18 01:13 PM] siu#3920
ok


[20-Aug-18 01:13 PM] SHossain#0007
same bet lost
```
38c21761102c355ace78faa71b2233bc1ee44e955cd9768c45c561ff4c8fee87 winnings 0.00000000 bet 10.00000000 at odds 1:1
```


[20-Aug-18 01:13 PM] siu#3920
right.


[20-Aug-18 01:14 PM] SHossain#0007
dealer need to add entropy tx to their dice plan


[20-Aug-18 01:16 PM] SHossain#0007
```
dffabeea5f1e9c609561a34f50d3db72789288d310cfd45c659e24831049b99c winnings 20.00000000 bet 10.00000000 at odds 1:1
```


[20-Aug-18 01:17 PM] SHossain#0007
another win


[20-Aug-18 01:19 PM] SHossain#0007
```
modval 2194 vs 3333
098191216c728fc69ff3b84a696be30edb41362bad9092ff5b2a39e620171f6d winnings 30.00000000 bet 10.00000000 at odds 2:1
```


[20-Aug-18 01:19 PM] SHossain#0007
`addtomempool ht.498 for CC checking: n.4 rejects.3 last.0`


[20-Aug-18 01:22 PM] siu#3920
got it


[21-Aug-18 12:49 AM] jl777c#5810
any bugs?


[21-Aug-18 01:22 AM] TonyL#3577
@jl777c new dice CC algo testing is in progress


[21-Aug-18 04:16 AM] siu#3920
hello


[21-Aug-18 04:16 AM] siu#3920
going to test master now


[21-Aug-18 04:35 AM] siu#3920
we are still using BRK?


[21-Aug-18 04:41 AM] siu#3920
Question... does every user that will bet on dice need to do a diceaddfunding entropy tx ?


[21-Aug-18 04:41 AM] siu#3920
in other words... the contract basically asks for payment in order to bet?


[21-Aug-18 05:01 AM] jl777c#5810
only the once who created the diceplan can create entropy tx


[21-Aug-18 05:01 AM] jl777c#5810
it can be for any amount


[21-Aug-18 05:01 AM] jl777c#5810
diceaddfunding by someone that didnt create the diceplan should fail


[21-Aug-18 05:01 AM] jl777c#5810
otherwise they can cheat by putting in entropy values that lets them win


[21-Aug-18 05:02 AM] jl777c#5810
just like faucet, each entropy utxo allows one dicebet per block


[21-Aug-18 05:28 AM] siu#3920
ok, understood.


[21-Aug-18 06:57 AM] TonyL#3577
@jl777c collected part of data. I already think that algo is pretty fair now.


[21-Aug-18 06:58 AM] jl777c#5810
good to hear! as I already pushed it to master üòÉ

{Reactions}
trollface 

[21-Aug-18 06:58 AM] TonyL#3577
üòÉ


[21-Aug-18 07:05 AM] SHossain#0007
testeda BRK full sync. working fine. no stuck block


[21-Aug-18 07:08 AM] jl777c#5810
potential new set of CC contracts
        EVAL(EVAL_MOFN, 0xea) \
        EVAL(EVAL_CHANNELS, 0xeb) \
        EVAL(EVAL_ORACLES, 0xec) \
        EVAL(EVAL_PRICES, 0xed) \
        EVAL(EVAL_PEGS, 0xee) \
        EVAL(EVAL_TRIGGERS, 0xef) \
        EVAL(EVAL_PAYMENTS, 0xf0) \
        EVAL(EVAL_GATEWAYS, 0xf1)

{Reactions}
üëçüèΩ (3) üòª (2) üëè (2) üòÉ (2) Komodo (2) shexy (2) 

[21-Aug-18 07:18 AM] grewalsatinder#9653
MOFN? Mother of Financial Networks ?? :trollface:


[21-Aug-18 07:22 AM] grewalsatinder#9653
Nice to see miss Peggy in list. üòÅ


[21-Aug-18 07:22 AM] dukeleto#7326
wow, lots more stuff to test


[21-Aug-18 07:24 AM] dukeleto#7326
@jl777c is there a way to do something like "If you provide the plaintext to this hash, coins are sent to you" ?


[21-Aug-18 07:25 AM] grewalsatinder#9653
I understand almost all what they'll do, except few.
MOFN and TRIGGERS


[21-Aug-18 07:25 AM] dukeleto#7326
the plaintext could be in op_return or maybe KV, and would allow people to get a bounty/prize/payment for proof they know the hash to something. Sounds like it could be useful in general


[21-Aug-18 07:26 AM] TonyL#3577
It's like a TV series: little spoiler and "all interesting you'll see in the next series"


[21-Aug-18 07:26 AM] dukeleto#7326
plaintext would need to be stored encrypted in KV, where person who created the contract could claim the rewards to end the bounty for the hash


[21-Aug-18 07:26 AM] jl777c#5810
MofN as in 2of3 multisig, but where M and N can be up to 255


[21-Aug-18 07:27 AM] jl777c#5810
TRIGGERS would be able to be triggered upon a variety of things. reveal on secret could be one, but that is subject to MITM attack


[21-Aug-18 07:27 AM] grewalsatinder#9653
why would we need multisig as contract ? ü§î


[21-Aug-18 07:27 AM] dukeleto#7326
the user also puts a lot of trust storing sensitive strings/files in the blockchain, so some use cases would not work


[21-Aug-18 07:28 AM] jl777c#5810
try doing any multisig with more than 15 signers using bitcoin


[21-Aug-18 07:29 AM] grewalsatinder#9653
okay, sure will do. I really need to do that and learn too.... üòÅ 
think I got what you saying....


[21-Aug-18 07:29 AM] jl777c#5810
you cant have more than 15 multisig signers with bitcoin


[21-Aug-18 07:29 AM] jl777c#5810
also it is very inefficient as you need to include the pubkeys for all signers for all transactions


[21-Aug-18 07:30 AM] jl777c#5810
also it could be that it is information that is being unlocked with MofN, not just payments


[21-Aug-18 07:32 AM] dukeleto#7326
proving you know the scriptPubkey that corresponds to a hash of the inputs (p2sh) is how bitcoin works internally, it would be a more generalized version at the CC level. Constraining the data to only fit inside kmd op_return is reasonable, it's not meant for supporting 4GB files. But for instance, I could prove to you that I know the private key to the SSL cert of komodoplatform.com, by giving you a hash, and I could be paid a security bounty automagically via the blockchain. It's like all these popular bug bounty programs, automated on the blockchain *and* transparent to all parties. It prevents the black market of selling 0days for 200k-1M+ USD, which some might see as a bug


[21-Aug-18 07:33 AM] grewalsatinder#9653
clearer. thanks üëç


[21-Aug-18 07:33 AM] jl777c#5810
I want to make mutlisig non-interactive like it is now where you need to pass around the tx to all the signers


[21-Aug-18 07:33 AM] jl777c#5810
so the blockchain will be used to gather the M signatures and when complete, it is released


[21-Aug-18 07:34 AM] dukeleto#7326
there is something called PSBT (partially signed bitcoin transactions) coming soon in BTC core, seems to do the same


[21-Aug-18 07:34 AM] jl777c#5810
this will make multisig much easier to use. at most an "approve txid" tx would be submitted by the signer


[21-Aug-18 07:34 AM] jl777c#5810
after all these years, it is strange multisig is still so hard to use


[21-Aug-18 07:34 AM] dukeleto#7326
my guess is James will be done before btc core has started to bikeshed the merge of PSBT


[21-Aug-18 07:35 AM] grewalsatinder#9653
think I get you on multisig. The most easiest way of creating multisig address/wallet for me was trying out NEM's first iteration of their GUI wallet.


[21-Aug-18 07:35 AM] grewalsatinder#9653
Your explanation matches their GUI that I experienced then.


[21-Aug-18 08:32 AM] SHossain#0007
i have few ask and bid orders in orderbook now


[21-Aug-18 09:02 AM] SHossain#0007
i put an ask order of 5025 tokens, the following displayed on stdout terminal
```
AssetValidate (s)
vin1 99994975, vout0 5025, vout1 99989950, total.10000 - paid.5055, remaining 4945000000000 <- 4945000000000 (10000000000000 - 5055000000000)
orig 10000000000000 total 10000, recv 5055000000000 paid 5055,recvunitprice 10.0000000000000000 >= 10.0000000000000000 unitprice, new unitprice 10.0000000000000000
```
showing 16 digits after the `.` for price


[21-Aug-18 09:02 AM] SHossain#0007
`tokenorders` not showing 16 digits after the decimal though


[21-Aug-18 09:05 AM] SHossain#0007
actually that was a `fillbid`


[21-Aug-18 09:08 AM] jl777c#5810
i will change to 8 digits


[21-Aug-18 09:09 AM] SHossain#0007
thank you


[21-Aug-18 09:09 AM] SHossain#0007
fillask is displaying 8 digits


[21-Aug-18 09:10 AM] jl777c#5810
so printout resolution having too many 0's is the most horrible bug found so far?


[21-Aug-18 09:10 AM] SHossain#0007
yes. this is not even a bug. just a small display issue


[21-Aug-18 09:10 AM] SHossain#0007
doesn't affect operation


[21-Aug-18 09:11 AM] SHossain#0007
i have done few trades and no issues so far


[21-Aug-18 09:34 AM] SHossain#0007
actually, issues was on my command. `tokenfillask` doesn't have issues


[21-Aug-18 10:36 AM] SHossain#0007
```
        "3c67a025d0b9df49d73715b650c993ad1350e6061f86fc5d8c02ed2991f19c54",
        "faafdc0573f0825105b012161370695434f4dbd9a62325300e8ff141d7e1091e",
        "a4862b282c3ad1191614dc11818dcb3f6e58a6dbb4bb4373292e81e41739ff94",
        "a8d48a5a7bb18e4ddef6526d58a3e9d7634ee622d7306dbbd8fa0e0bde4207b7",
        "13b383b638992c01386f4ce68300bb4c360e046da67aad9d083d7f2971974bb5",
        "be0dcda29aebd1fbb3f5573c5e6bfd56625fb85c74720c0dd40c641e9a771570",
        "b2dd9b3b2b5c07154a439f4f75b6d8dd37193b5e470bdfbbf7db7d4c1fb90a0b",
        "093308e017eb92ec715c34cd128b516cb3118c510d651c2f2edbd9a3adcbe216",
        "6ffe7e7b066935a7f003a5dc5e718f2cbd23fa6d5a90c5647fc70246ed2e355b",
        "af789fa9a7601cd42ef79b5e12432e6ef51efe8a85ac94af05cc25b27c301098",
        "1d6ef0bcca47bf8455fc75148e7e1c33d41b945fdd404bafc4aa6acb395f4fc2"
```


[21-Aug-18 10:36 AM] SHossain#0007
a lot of tokens üòÉ


[21-Aug-18 10:55 AM] TonyL#3577
@SHossain  It's me - testing tokens creation functionality of my new CC program :trollface:


[21-Aug-18 10:57 AM] SHossain#0007
i guessed that and started mining with another node to get all the txs cleared from the mempool

{Reactions}
üôå 

[21-Aug-18 05:44 PM] TonyL#3577
https://github.com/tonymorony/kmd_cc_qa I've started to write some auto-tests for Token CC
For this CC testing I'm planning two modes: 1) Tests itself 2) Kinda CLI exchange based on Token CC -  in case if someone will want to have fun manually 
For now made auto-test for token adding process and in CLI possible to add tokens and list all available tokens.
Trading features of this CC I want to cover until the weekend.

{Embed}
https://github.com/tonymorony/kmd_cc_qa
tonymorony/kmd_cc_qa
kmd_cc_qa - Tests for Komodo CC
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[21-Aug-18 07:01 PM] Alright#0419
@dukeleto @jl777c trying `dicebet` with more than the maximum bet amount gives this 
```
./komodo-cli -ac_name=BRK dicebet VEGAS 0e602feb3c3f870930cc10201e5a450d5da48d5affa22a91ac563a6a7769dcc5 11000 1
{
  "result": "error",
  "error": "couldnt create faucet get transaction"
}
```


[21-Aug-18 07:02 PM] Alright#0419
same thing going over max odds 
```
./komodo-cli -ac_name=BRK dicebet VEGAS 0e602feb3c3f870930cc10201e5a450d5da48d5affa22a91ac563a6a7769dcc5 10000 26
{
  "result": "error",
  "error": "couldnt create faucet get transaction"
}
```


[21-Aug-18 07:04 PM] TonyL#3577
@Alright Also same error you'll receive if   Payout sum (odds * bet + bet)  > Funding


[21-Aug-18 07:05 PM] Alright#0419
same thing for bet amount between 0 and 1


[21-Aug-18 07:05 PM] TonyL#3577
Also same error when not enough entropy


[21-Aug-18 07:05 PM] TonyL#3577
Actually it's only error as I found


[21-Aug-18 07:05 PM] Alright#0419
Ahh, likely just a catch all then for when it can't create a transaction


[21-Aug-18 07:06 PM] Alright#0419
shouldn't say faucetget though


[21-Aug-18 07:18 PM] TonyL#3577
@Alright Can send you my exclusive token instead :trollface: : 
```
  "name": "VERFAN",
  "supply": 77700000000,
  "description": "Roger's Ver fanclub token"
```


[21-Aug-18 07:26 PM] Alright#0419
Just found this a bit interesting


[21-Aug-18 07:26 PM] Alright#0419
unicode works for names, but if you use too much of it it breaks it


[21-Aug-18 07:27 PM] Alright#0419
```
./komodo-cli -ac_name=BRK diceinfo 2d37e10b5b841663d52bf2b3c01c4451b23f7c16261e65570878dd91ffd8919f
{
  "result": "success",
  "fundingtxid": "2d37e10b5b841663d52bf2b3c01c4451b23f7c16261e65570878dd91ffd8919f",
  "name": "‚ò†",
  "sbits": 10524898,
  "minbet": "0.00000000",
  "maxbet": "100.00000000",
  "maxodds": 10,
  "timeoutblocks": 10,
  "funding": "10000.00000000"
}
```


[21-Aug-18 07:27 PM] Alright#0419
`./komodo-cli -ac_name=BRK diceinfo f4cd21ec120b8125fdde2d6af7b4da4255c9969d6d09d9e92958d2e4c88fe0f2
error: couldn't parse reply from server`


[21-Aug-18 07:27 PM] Alright#0419
second one is from adding *a lot* of unicode to the name


[21-Aug-18 07:28 PM] Alright#0419
doesn't do anything negative though


[21-Aug-18 07:28 PM] Alright#0419
was hoping for a crash üòÖ


[21-Aug-18 07:30 PM] Alright#0419
@jl777c dicefund amount has no minimum. Can spam the crap out of `dicelist`


[21-Aug-18 08:07 PM] Alright#0419
@TonyL could you test that the above plan works properly?


[21-Aug-18 08:07 PM] Alright#0419
seems to, right? Want to spam it with 1 sat `diceaddfunds` then try again


[21-Aug-18 08:11 PM] TonyL#3577
@Alright I don't have auto-tests for dice SC's yet, since it was manually tested and it's algo checking was in priority. May set my spam scripts to place some bets/confirm if needed.


[21-Aug-18 08:12 PM] Alright#0419
I *think* it works just fine, but I only placed a couple bets on it


[21-Aug-18 08:12 PM] Alright#0419
was just hoping someone who had more experience placing bets could confirm


[21-Aug-18 08:13 PM] Alright#0419
No worries, can always just reproduce it afterwards if this 1 sat spam does seem to break it


[21-Aug-18 08:13 PM] TonyL#3577
I can run bet script after you fill it by UTXOs


[21-Aug-18 08:14 PM] Alright#0419
spamming now


[21-Aug-18 08:16 PM] Alright#0419
could you place a single bet on it right now? My nodes are tied up spamming


[21-Aug-18 08:19 PM] Alright#0419
Hmmm, I broke it, right?


[21-Aug-18 08:19 PM] TonyL#3577
Oh nope


[21-Aug-18 08:19 PM] TonyL#3577
```./komodo-cli -ac_name=BRK tokeninfo 2d37e10b5b841663d52bf2b3c01c4451b23f7c16261e65570878dd91ffd8919f
{
  "result": "error",
  "error": "assetid isnt assetcreation txid",
  "result": "success",
  "tokenid": "2d37e10b5b841663d52bf2b3c01c4451b23f7c16261e65570878dd91ffd8919f",
  "owner": "",
  "name": "",
  "supply": 1000000000000,
  "description": ""
}
```


[21-Aug-18 08:19 PM] TonyL#3577
I just put address of dice contract to call for info for token contract


[21-Aug-18 08:20 PM] Alright#0419
not sure if dicebet is broken for that because my nodes are still spamming it or if it's actually broken globally


[21-Aug-18 08:22 PM] TonyL#3577
```
./komodo-cli -ac_name=BRK dicestatus ‚ò† 2d37e10b5b841663d52bf2b3c01c4451b23f7c16261e65570878dd91ffd8919f f77b29570c9b021f68b7eded98d546b8bfc3807b0dbadb18ba6a836b0dd6cd4a
{
  "result": "success",
  "status": "loss"
}
```


[21-Aug-18 08:23 PM] Alright#0419
cool, didn't seem to affect it at all


[21-Aug-18 08:24 PM] Alright#0419
even if it did, it doesn't make sense for a dice creator to spam his own plan


[21-Aug-18 08:27 PM] TonyL#3577
Bottleneck in real case which I see:  It may be spammed by transactions with lowest bet amount and lowest risk odds in each block so real players will not able to play because of no UTXO's


[21-Aug-18 08:28 PM] TonyL#3577
So there should be some separate highstakes contract, but it's a question of technology implementation, not of technology itself  üòÉ


[21-Aug-18 08:29 PM] Alright#0419
solution is to set a higher minimum bet üòõ


[21-Aug-18 08:37 PM] TonyL#3577
Yeah wrote about it above) Actually real casinos doing totally same way: open high stakes tables so whales have space to play anytime. 
Pff so much gambling ICO promised RNG on blockchain - nobody delivered, but looks like we're actually have it - open-sourced fair RNG connected to blockchain. 
From first  touch this CC seems like a just demonstration but such concept is really mindblowig for gambling industry since here is a problem of lack of trust to soft providers.
But in product like this you can check source code, fork it, test and play, it's a real destination of blockchain - such proofs.


[21-Aug-18 08:38 PM] Alright#0419
@jl777c you can do `diceaddfunds` without actually owning the address you have set with -pubkey


[21-Aug-18 08:39 PM] TonyL#3577
Like a create ac_chain, notarize it by main KMD chain , gambling CC on top, tons of fast transactions - most fair and transparent casino in the world ready üòÉ


[21-Aug-18 08:40 PM] Alright#0419
Tony, can you give me the pubkey for this address RATbnvPHv7nWond3PppizJchP981tb6nAo


[21-Aug-18 08:40 PM] Alright#0419
```
{
  "result": "success",
  "fundingtxid": "4f645adc10c934412515f881d8caa286a511a2b8a94c55f6041a608a73ae810b",
  "name": "TONY",
  "sbits": 1498304340,
  "minbet": "1.00000000",
  "maxbet": "10.00000000",
  "maxodds": 10,
  "timeoutblocks": 5,
  "funding": "13314.97290000"
}
```
You used it here^


[21-Aug-18 08:41 PM] TonyL#3577
@Alright  sure. I'll try to fund yours dice as well


[21-Aug-18 08:41 PM] Alright#0419
pubkey for the skull one posted above is 0298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560


[21-Aug-18 08:41 PM] TonyL#3577
`020f7bf3d13e17b18b49c99f423b57f424795ccac8809e990cc3a09c26d354b4fc`


[21-Aug-18 08:41 PM] Alright#0419
deleted my wallet and was still able to fund it


[21-Aug-18 08:42 PM] TonyL#3577
Have I just start daemon with yours pubkey to test?


[21-Aug-18 08:42 PM] Alright#0419
yes


[21-Aug-18 08:45 PM] Alright#0419
http://cctest.explorer.dexstats.info/tx/8acc6bd8700827c4a0bda300c903c3c43618b1c4de66c234c1a766fec46f79a2
That's me funding TONY


[21-Aug-18 08:49 PM] TonyL#3577
http://cctest.explorer.dexstats.info/tx/df85cabd2de317167ae071ea128ee6bc03738c08a2b8a04fb18f28c00c77433b
That's me funding ‚ò†


[21-Aug-18 08:50 PM] Alright#0419
...and it confirmed


[21-Aug-18 08:51 PM] TonyL#3577
Meanwhile in daemon when generating transaction I've received `privkey for the -pubkey= address is not in the wallet, importprivkey!`


[21-Aug-18 08:51 PM] TonyL#3577
But get hex output anyway


[21-Aug-18 08:51 PM] Alright#0419
Entropy is based on these txs, yes?


[21-Aug-18 08:52 PM] TonyL#3577
Yup


[21-Aug-18 08:52 PM] Alright#0419
how is mine still sitting in the mempool?


[21-Aug-18 08:52 PM] Alright#0419
seriously, 4 blocks mined since i sent it


[21-Aug-18 08:54 PM] TonyL#3577
Yours confirmed as well


[21-Aug-18 09:01 PM] Alright#0419
how long does it typically take for `bet still pending` to stop?


[21-Aug-18 09:01 PM] Alright#0419
is that based on the timeoutblocks value?


[21-Aug-18 09:02 PM] TonyL#3577
Sometimes 1 bet in batch stucked but in a few blocks unlocked


[21-Aug-18 09:03 PM] Alright#0419
try a bet on üíÄ now

{Reactions}
üòÇ 

[21-Aug-18 09:03 PM] Alright#0419
restart with a different pubkey though


[21-Aug-18 09:03 PM] Alright#0419
did a bet on TONY and it's pending 5 blocks after the `dicebet` tx


[21-Aug-18 09:03 PM] TonyL#3577
@Alright I guess you may be right regards `timeoutblocks` and stucking bet, my bets stucked in your dice on STAKED2 for a long time, and as I remember you have very big timeout here


[21-Aug-18 09:04 PM] Alright#0419
think it was 10 blocks on STAKED2


[21-Aug-18 09:05 PM] Alright#0419
Ah ok, TONY still worked fine


[21-Aug-18 09:05 PM] TonyL#3577
I am üòÇ


[21-Aug-18 09:10 PM] Alright#0419
Can we do -ac_name=‚ò† next? üòõ


[21-Aug-18 09:11 PM] TonyL#3577
I can create token also


[21-Aug-18 09:11 PM] Alright#0419
I'm surprised no coin has used unicode in their ticker yet


[21-Aug-18 09:12 PM] TonyL#3577
I'm surprised that someone tried to do it üòÉ


[21-Aug-18 09:15 PM] TonyL#3577
But it allows to use Chinese and etc.


[21-Aug-18 09:16 PM] Alright#0419
we could adopt a unicode character similar to ‡∏ø

{Reactions}
Komodo 

[21-Aug-18 09:16 PM] Alright#0419
just a thought


[21-Aug-18 09:46 PM] ph03nix#3115
http://blockchainpi.co/

{Embed}
http://blockchainpi.co/
Blockchain Pi
A demonstration of the use of a public blockchain to conduct a global experiment


[21-Aug-18 10:56 PM] dukeleto#7326
@Alright i fixed that wrong error message (should be dice but says faucet) and will submit a PR soon


[22-Aug-18 12:50 AM] jl777c#5810
@Alright I think you can create a diceaddfund, but a dicebet that uses it should be rejected. to test this, make a new plan and create a fake entropy tx. then dicebet, the only entropy tx available is the fake one, so it should fail at the dicebet stage. which is still a bug, I should prevent the dicebet from using the fake entropy tx


[22-Aug-18 12:51 AM] jl777c#5810
@TonyL yes, there have been many projects and even ICO promising blockchained gambling, yet with 1000 lines of dice CC code, we do it first


[22-Aug-18 01:02 AM] Alright#0419
```
c2c9517087264adff05663e173c5e1b7d6bf5bc104e000270af9857927795af0.(E 10.00000000) check first
2102fe5d00bf295402c0a3e5e40ec9b902849da864bffbc4e46afff5c7788de5baa4ac script vs 210298b7c53af97ae93d7ad7c93ca39aa651ccb458e6109f3eb11258120fdf41b560ac (E) entropy vin.0 fundingPubKey mismatch 456260f57f6b37080fc450e68030e52a46e0990011da18f5612906c831ee9610
numentropy tx 10: 1100.00000000
cant find dice entropy inputs
```


[22-Aug-18 01:02 AM] Alright#0419
üëç


[22-Aug-18 01:05 AM] Alright#0419
@TonyL pretty sure you're mining to my pubkey right now


[22-Aug-18 01:05 AM] Alright#0419
doesn't matter, just thought I was going crazy for a minute


[22-Aug-18 01:20 AM] jl777c#5810
@Alright aha! so there is no bug. it cant be stopped to create the addfunding as it is just a normal tx, but as long as the dicebet doesnt use them, no harm is done. of course the would be cheater will end up with funds locked that cant be unlocked


[22-Aug-18 01:20 AM] Alright#0419
counts towards `funding` in diceinfo


[22-Aug-18 01:20 AM] Alright#0419
don't see why anyone would ever do it though


[22-Aug-18 01:22 AM] jl777c#5810
well cheating at 100:1 odds is a good financial incentive


[22-Aug-18 01:23 AM] jl777c#5810
so we need to make sure such cheating is rightly punished by locking the funds. i dont consider this a must fix bug to fix the display as it is unlikely to happen


[22-Aug-18 01:26 AM] jl777c#5810
So, this was a false positive and I guess there are no bugs? I saw some sort of problem reported in #private-staked with spamming of dicebets. is that a reproducible problem, if so, what was the problem?


[22-Aug-18 01:26 AM] jl777c#5810
is there a nice report of the odds >1 bet results?


[22-Aug-18 01:27 AM] Alright#0419
not sure it was actually a problem


[22-Aug-18 01:27 AM] Alright#0419
was getting spammed with this on one of my nodes while joker was testing dice 
```
TX_PUBKEY invalid pubkey
ExtractDestination failed
TX_PUBKEY invalid pubkey
ExtractDestination failed
TX_PUBKEY invalid pubkey
ExtractDestination failed
TX_PUBKEY invalid pubkey
ExtractDestination failed
```


[22-Aug-18 01:30 AM] Alright#0419
I got that on my personal node, but wasn't getting it on the node that funded the plan


[22-Aug-18 01:40 AM] jl777c#5810
seems a malformed tx, which would be a bug if normal rpc process was used


[22-Aug-18 01:47 AM] Alright#0419
Think I may have just broken every dice plan on BRK by spamming a single plan with 1 sat `diceaddfunds` from the wrong address


[22-Aug-18 01:47 AM] Alright#0419
getting different results on different plans atm though


[22-Aug-18 01:48 AM] Alright#0419
`./komodo-cli -ac_name=BRK dicebet TONY 4f645adc10c934412515f881d8caa286a511a2b8a94c55f6041a608a73ae810b 10 1`
```
./rawsend 0100000002d2a3a488a1eef0d87f649c863a21b63798c02080f4ed9d441a572ceb5554165f000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81403d19dba87a4627a4caa9949690890d8d1374a5da26df3634beb38dbb06f31ff139d46312ff74aa70012b6c245d87ec8d17493e2e42602551eeef8385146b903ca100af038001e6a10001ffffffffb1bac02689184eb4474d94b25a10abc0bae920c39acaa2c24eab922473029811010000006a47304402202920e5ec274bb7e3005762be7a8226cadd88b06a5e7be256bee766c4ff75d7e702205cb19a4214dee2e08bc05ec415c3b3bdcb8f3dcc1c2bea2c0a8cd56d2aa223ee0121038f4ae9e395d7149b0fce7bd2b96c14e1f6438c97bd88d4171b6dd9980ee64700ffffffff0520f682740b000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc11270000000000002321038f4ae9e395d7149b0fce7bd2b96c14e1f6438c97bd88d4171b6dd9980ee64700acdf27dfd4f25a00002321038f4ae9e395d7149b0fce7bd2b96c14e1f6438c97bd88d4171b6dd9980ee64700ac00000000000000006d6a4c6ae642544f4e59000000000b81ae738a601a04f6554ca9b8a211a586a2cad881f815254134c910dc5a644f17c515e1a01ef089963ada1eecf9f87091f65459d3412449725653d555a1ed3c000000000000000000000000000000000000000000000000000000000000000000000000
error code: -25
error message:
Missing inputs
```


[22-Aug-18 01:49 AM] Alright#0419
```
./komodo-cli -ac_name=BRK dicebet VEGAS 0e602feb3c3f870930cc10201e5a450d5da48d5affa22a91ac563a6a7769dcc5 100 1
{
  "result": "error",
  "error": "couldnt create faucet get transaction"
}
```

```
2cfa4fcc0022ed4fd8f23807f95e0a20aa00d4858b56d8448aa6416386375683 B refsbits.5341474556 sbits.5341474556 nValue 1599.99970000
2cfa4fcc0022ed4fd8f23807f95e0a20aa00d4858b56d8448aa6416386375683 B refsbits.5341474556 sbits.5341474556 nValue 10000.00000000
0e602feb3c3f870930cc10201e5a450d5da48d5affa22a91ac563a6a7769dcc5.(F 100000.00000000) numentropy tx 0: 100000.00000000
cant find dice entropy inputs
```


[22-Aug-18 01:50 AM] Alright#0419
TONY plan was working previously


[22-Aug-18 01:52 AM] Alright#0419
to be clear, I didn't spam the TONY plan


[22-Aug-18 01:57 AM] Alright#0419
same thing on a brand new plan 
```
./rawsend 01000000020385bf8b2ea3b24bfc9aa95b56f31c1cc2f45607658f1887f94ad60db1e99e23000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140c89c216581383aba7ca37ef3c47538c4164976082b07e6f19a015fbf30c553713d1a204052c5f843623a993202d5b189ee6b1d98fdd3df4da99dc5f57702c5c2a100af038001e6a10001ffffffff38a4261e28d59c3c96fc3c0e670ddb5f796a0d4710d90d10be0f25ff359dacca0000000049483045022100daa67217c6559ea12668595706f7d8d375ae76efeb2ebf7b5a4f5885fb4fdc4602207c9692d84ee4269a0f7a1bfec273886e4c3cfe34c5c7c9e1af83af484ed74d0401ffffffff0500e40b5402000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00e40b5402000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc11270000000000002321038f4ae9e395d7149b0fce7bd2b96c14e1f6438c97bd88d4171b6dd9980ee64700ac8f6e6ffa150900002321038f4ae9e395d7149b0fce7bd2b96c14e1f6438c97bd88d4171b6dd9980ee64700ac00000000000000006d6a4c6ae642424f524b45440000c95dfe1a947414af9f59b3d6bdd64fd71c64824601ad9687b6cbf79db89360fd93a92de6ca022a642971676c1829c520ca6f98930abe3457b603fa9af3d34ee4000000000000000000000000000000000000000000000000000000000000000000000000
error code: -25
error message:
Missing inputs
```


[22-Aug-18 01:57 AM] jl777c#5810
can you look at the rawtx vins and see if they are valid or not?


[22-Aug-18 01:57 AM] Alright#0419
yea one moment


[22-Aug-18 01:57 AM] jl777c#5810
this could be a bug with CC vin selection


[22-Aug-18 01:58 AM] Deleted User#0000
I am now getting lots of errors on dice on STAKED1, I nede to take a little time to make a proper report for it though as I was playing with a script that does all the raw TX stuff behind the scenes.


[22-Aug-18 02:08 AM] Alright#0419
vin0 100 BRK from `diceaddfunds` tx
vin1 100000 normal input
vout0 100 BRK cc vout to contract address
vout1 57 BRK cc vout(dicebet amount) to contract address
vout2 0.00010001 normal vout to pubkey address
vout3 99942.99979999 change to pubkey address
vout4 OP_RETURN


[22-Aug-18 02:08 AM] Alright#0419
that's for `./komodo-cli -ac_name=BRK dicebet BORKED fd6093b89df7cbb68796ad014682641cd74fd6bdd6b3599faf1474941afe5dc9 57 1`


[22-Aug-18 02:08 AM] Alright#0419
isn't vout2 typically .0001?


[22-Aug-18 02:09 AM] Alright#0419
inputs and outputs add up correctly


[22-Aug-18 02:13 AM] Alright#0419
Ah I see vout2 is odds+tx fee


[22-Aug-18 02:14 AM] Alright#0419
Doesn't seem to be the raw tx that is the problem


[22-Aug-18 02:22 AM] jl777c#5810
both the vins are unspent?


[22-Aug-18 02:23 AM] Alright#0419
Hmm, I just deleted my BRK directory, wallet included, made a new address, funded it and did a dicebet. Got the missing inputs error, but then I tried the same exact command on my other node and it worked


[22-Aug-18 02:24 AM] Alright#0419
did it twice with a fresh node, but the node that created the plan was able to do a dicebet


[22-Aug-18 02:26 AM] Alright#0419
both inputs unspent


[22-Aug-18 02:28 AM] Alright#0419
on the node it works on, it used the same vin0 as the one it failed on


[22-Aug-18 02:29 AM] jl777c#5810
the node that creates the plan has some different codepaths


[22-Aug-18 02:39 AM] Alright#0419
Now I'm utterly confused. I deleted the wallet of the node that created, made a new pubkey and ran the same command and it worked


[22-Aug-18 02:39 AM] Alright#0419
I tried 3 fresh nodes on my other VPS and it failed every time


[22-Aug-18 02:39 AM] CrisF#3405
Hi, can I run BRK on the same server, at the same time, as STAKED2?


[22-Aug-18 02:40 AM] Alright#0419
yep


[22-Aug-18 02:41 AM] Alright#0419
@CrisF once you sync, could you run this please? `./komodo-cli -ac_name=BRK dicebet BORKED fd6093b89df7cbb68796ad014682641cd74fd6bdd6b3599faf1474941afe5dc9 57 1`


[22-Aug-18 02:42 AM] Alright#0419
it'll output some hex, copy that hex and do `./komodo-cli -ac_name=BRK sendrawtransaction <pasteHEXhere>`


[22-Aug-18 02:44 AM] CrisF#3405
So with STAKED2 running I `./komodod -ac_cc=1 -ac_name=BRK -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -pubkey=<your_pubkey> -addnode=94.130.224.11` to sync?


[22-Aug-18 02:44 AM] Alright#0419
yep,


[22-Aug-18 02:44 AM] Alright#0419
then import the private key for that pubkey's address


[22-Aug-18 02:44 AM] Alright#0419
and post address here and I'll send some coins


[22-Aug-18 02:45 AM] CrisF#3405
OK,I'll do it now...


[22-Aug-18 02:49 AM] Alright#0419
ty ty


[22-Aug-18 02:55 AM] CrisF#3405
I got an address and `dumpprivkey`ed, also getting the pubkey.  Is that the same as `import the private key for that pubkey's address`?


[22-Aug-18 02:58 AM] CrisF#3405
Either way, I'll do `./komodo-cli -ac_name=BRK dicebet BORKED fd6093b89df7cbb68796ad014682641cd74fd6bdd6b3599faf1474941afe5dc9 57 1` now...


[22-Aug-18 03:00 AM] Alright#0419
do `validateaddress <address>` for that address


[22-Aug-18 03:00 AM] Alright#0419
it will give you the pubkey for it


[22-Aug-18 03:00 AM] Alright#0419
start the daemon with `-pubkey=<pubkey>`


[22-Aug-18 03:00 AM] CrisF#3405
I got the pubkey and added it.


[22-Aug-18 03:01 AM] CrisF#3405
ran `./komodo-cli -ac_name=BRK dicebet BORKED fd6093b89df7cbb68796ad014682641cd74fd6bdd6b3599faf1474941afe5dc9 57 1`


[22-Aug-18 03:01 AM] CrisF#3405
and got


[22-Aug-18 03:01 AM] CrisF#3405
`"result": "error",
  "error": "couldnt create faucet get transaction"`


[22-Aug-18 03:02 AM] Alright#0419
need to send you some coins


[22-Aug-18 03:03 AM] CrisF#3405
RGJaaXiEXpVj1SJvnoGqVmmJ8CrNf1sKKg


[22-Aug-18 03:04 AM] Alright#0419
sent


[22-Aug-18 03:06 AM] CrisF#3405
THanks, I'm rich!!


[22-Aug-18 03:07 AM] CrisF#3405
hmmm. same error.


[22-Aug-18 03:07 AM] Alright#0419
anything in the stdout?


[22-Aug-18 03:07 AM] Alright#0419
or debug.log


[22-Aug-18 03:07 AM] CrisF#3405
how can I find that?


[22-Aug-18 03:08 AM] Alright#0419
stdout is the log that shows up in the terminal you started the daemon in


[22-Aug-18 03:08 AM] Alright#0419
you can do `tail -f ~/.komodo/BRK/debug.log` for the debug.log


[22-Aug-18 03:09 AM] CrisF#3405
stdout```Dice plan (BORKED) already exists cmpflag.1
```


[22-Aug-18 03:10 AM] Alright#0419
you're getting a completely different error than me


[22-Aug-18 03:10 AM] Alright#0419
I get the `missing inputs` error on 1 VPS on a fresh node and it works on the other VPS on a fresh node


[22-Aug-18 03:10 AM] Alright#0419
pretty confused about that


[22-Aug-18 03:11 AM] CrisF#3405
Ahh...  debug.log ```2018-08-22 10:10:21 connect() to 103.18.58.150:35102 failed after select(): No route to host (113)```


[22-Aug-18 03:11 AM] Alright#0419
can ignore that


[22-Aug-18 03:11 AM] Alright#0419
that's your node trying to connect to peers it got from the DNS seeder


[22-Aug-18 03:11 AM] Alright#0419
which aren't running BRK


[22-Aug-18 03:11 AM] CrisF#3405
I see.


[22-Aug-18 03:14 AM] Alright#0419
building komodod on a third VPS to see what happens >.<


[22-Aug-18 03:17 AM] CrisF#3405
I didn't build, only ran `./komodo-cli -ac_name=BRK dicebet BORKED fd6093b89df7cbb68796ad014682641cd74fd6bdd6b3599faf1474941afe5dc9 57 1`


[22-Aug-18 03:17 AM] CrisF#3405
after syncing.


[22-Aug-18 03:19 AM] Alright#0419
fresh VPS and it worked fine üò£


[22-Aug-18 03:20 AM] Alright#0419
I don't understand how spamming completely broke my komodod build's ability to do `dicebet`


[22-Aug-18 03:20 AM] Alright#0419
deleted the entire data directory *3* times, tested from scratch each time


[22-Aug-18 03:23 AM] jl777c#5810
but a fresh node worked?


[22-Aug-18 03:23 AM] jl777c#5810
clearly something is broken, need to isolate what


[22-Aug-18 03:34 AM] Alright#0419
Christ, it's time for bed üò£ my rawsend script was trying to send it on the wrong chain


[22-Aug-18 03:34 AM] Alright#0419
sorry :/


[22-Aug-18 03:36 AM] SHossain#0007
i just did a dicebet of `BORKED` and won
```
        "result": "success",
        "status": "win",
        "won": 114
```


[22-Aug-18 03:42 AM] jl777c#5810
dice plan's dealer node needs to run dicestatus call in a cron task, or if anything happens to his node's realtime responses, all the dicebets will timeout and payout as winners and consume entropy tx


[22-Aug-18 03:44 AM] CrisF#3405
I have this in stdout ```CC Eval EVAL_DICE Invalid: DiceCalc mismatch for win/loss spending tx 098191216c728fc69ff3b84a696be30edb41362bad9092ff5b2a39e620171f6d```
before this came up
```Dice plan (BORKED) already exists cmpflag.1```


[22-Aug-18 03:44 AM] CrisF#3405
Not sure if useful...


[22-Aug-18 03:45 AM] SHossain#0007
what is your command?
HEX value?


[22-Aug-18 03:45 AM] jl777c#5810
how did you get that error?


[22-Aug-18 03:45 AM] jl777c#5810
it is an invalid dicebet completion


[22-Aug-18 03:45 AM] CrisF#3405
It came up on startup it seems.


[22-Aug-18 03:45 AM] CrisF#3405
Then ran 
`./komodo-cli -ac_name=BRK dicebet BORKED fd6093b89df7cbb68796ad014682641cd74fd6bdd6b3599faf1474941afe5dc9 57 1`


[22-Aug-18 03:46 AM] CrisF#3405
and this came up 
`Dice plan (BORKED) already exists cmpflag.1
`


[22-Aug-18 03:48 AM] SHossain#0007
i haven't seen that. but, i'll test a fresh sync now and lookout for the above error.
btw, which branch you are using?


[22-Aug-18 03:49 AM] CrisF#3405
Same as I'm running for STAKED2 - `dev`


[22-Aug-18 03:50 AM] Alright#0419
Ah, forgot to mention that


[22-Aug-18 03:51 AM] Alright#0419
dice contract differs between dev and jl777 branches


[22-Aug-18 03:51 AM] Alright#0419
you'll want to build from jl777 for BRK


[22-Aug-18 03:52 AM] CrisF#3405
Will jl777 be OK with STAKED2 also?

{Reactions}
üëé 

[22-Aug-18 03:52 AM] SHossain#0007
dev branch is old now. beta branch even would work.

{Reactions}
üòõ 

[22-Aug-18 03:54 AM] SHossain#0007
alternatively, you can copy compilied binaries from different branch into different directory and issue calls from there.


[22-Aug-18 03:58 AM] CrisF#3405
Would jl777 branch effect VerusCoin staking?  I have another vps doing that.


[22-Aug-18 03:58 AM] SHossain#0007
VRSC using completely different daemon


[22-Aug-18 03:59 AM] CrisF#3405
So no problem to use that then?


[22-Aug-18 03:59 AM] SHossain#0007
nope


[22-Aug-18 04:00 AM] CrisF#3405
Great, that's what I'll try.  (Not sure how to `copy compilied binaries from different branch into different directory and issue calls from there` yet.


[22-Aug-18 04:04 AM] SHossain#0007
Example:
After compiling komodo using jl777 branch, use:
```
cd ~
mkdir jl777
cp ~/komodo/src/komodod ~/jl777/komodod
cp ~/komodo/src/komodo-cli ~/jl777/komodo-cli
cd jl777
./komodod ........
```
After compiling komodo using dev branch, use:
```
cd ~
mkdir dev
cp ~/komodo/src/komodod ~/dev/komodod
cp ~/komodo/src/komodo-cli ~/dev/komodo-cli
cd dev
./komodod ........
```
just basic copy-paste


[22-Aug-18 04:07 AM] CrisF#3405
Thanks, @SHossain !  That is very useful üòÉ

{Reactions}
üëçüèΩ 

[22-Aug-18 04:14 AM] Alright#0419
@jl777c not sure if you saw above but `dicefund` needs a minimum to prevent `dicelist` spam


[22-Aug-18 04:14 AM] Alright#0419
will be back later today


[22-Aug-18 04:16 AM] jl777c#5810
ok, I will add a constraint for that


[22-Aug-18 04:16 AM] jl777c#5810
actually I cant


[22-Aug-18 04:17 AM] jl777c#5810
diceaddfund is not spending CC, so what I do is ignore anything that is too small


[22-Aug-18 04:17 AM] Alright#0419
Could you add something like `dicelist <pubkey>`?


[22-Aug-18 04:28 AM] jl777c#5810
what would it do?


[22-Aug-18 05:39 AM] CrisF#3405
@Alright  I'm on jl777 branch now.


[22-Aug-18 05:40 AM] CrisF#3405
```./komodo-cli -ac_name=BRK dicebet BORKED fd6093b89df7cbb68796ad014682641cd74fd6bdd6b3599faf1474941afe5dc9 57 1```
gives 
```"result": "success",
  "hex": "0100000002419084cdfd254285e9cf89ba6984d7901d4df7ea607b2b18aa049327791ef817000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140bc8dc581ff9c18a93f73e7fb3c8d9b908666d66b7b97bfe3364288523e46fee76980b775e96f003ae7da7ad8540e4ef2b6c2bb176db764d58982d496deef031aa100af038001e6a10001ffffffff53ecc6862ed4607e34c4d24ed93f386f0bfe0a3746d15011fd454a2aa3c84306010000006a473044022062d988500cc82ce8f003938de5f8825cec816f953f2d9fc48271241ed7ce9b5702205826420830e20dfc393658502042ca39e5537063d90b71c6298296920fec7087012102c633f3d8266a316ad1aa40c1531b6ab4b567c1ebf97cdbc7ac0a5e5da2391cf4ffffffff0500e1f50500000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc0019bf5301000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1127000000000000232102c633f3d8266a316ad1aa40c1531b6ab4b567c1ebf97cdbc7ac0a5e5da2391cf4acdfd8babcf15a0000232102c633f3d8266a316ad1aa40c1531b6ab4b567c1ebf97cdbc7ac0a5e5da2391cf4ac00000000000000006d6a4c6ae642424f524b45440000c95dfe1a947414af9f59b3d6bdd64fd71c64824601ad9687b6cbf79db89360fdb24d8e79eaf574752dfa7f286a9af133a88acd41bda35d46f00d065076dccb75000000000000000000000000000000000000000000000000000000000000000000000000"```


[22-Aug-18 05:42 AM] CHMEX#0686
now you need to send the hex to the network with
./komodo-cli -ac_name=BRK sendrawtransaction <pasteHEXhere>


[22-Aug-18 05:42 AM] CrisF#3405
```./komodo-cli -ac_name=BRK sendrawtransaction <I pasted HEXhere>```


[22-Aug-18 05:42 AM] CHMEX#0686
yes


[22-Aug-18 05:45 AM] CrisF#3405
My balance went down 57 + fee.


[22-Aug-18 05:46 AM] CrisF#3405
Anything else I need to do?


[22-Aug-18 05:46 AM] jl777c#5810
did you win or lose?


[22-Aug-18 05:59 AM] CrisF#3405
How can I check?


[22-Aug-18 06:07 AM] CrisF#3405
Ahh, `dicestatus` and those hexs.


[22-Aug-18 06:07 AM] CrisF#3405
```"result": "success",
  "status": "win",
  "won": 1```


[22-Aug-18 06:09 AM] CrisF#3405
Is @Alright the dealer on a table named `BORKED` ?


[22-Aug-18 06:10 AM] CrisF#3405
And I bet `57` with odds of `1`?


[22-Aug-18 06:26 AM] CrisF#3405
```"status": "win",
  "won": 4662```


[22-Aug-18 06:28 AM] CrisF#3405
Now getting ```  "result": "error",
  "error": "couldnt create faucet get transaction"```


[22-Aug-18 06:28 AM] CrisF#3405
Maybe empty?


[22-Aug-18 06:29 AM] Deleted User#0000
there is a few conditions where it creates an error


[22-Aug-18 06:29 AM] Deleted User#0000
I am trying to find all them on STAKED2 atm, but we are on an older version so not sure whats been changed


[22-Aug-18 06:30 AM] Deleted User#0000
What you need to do, is have the terminal where you started `komodod` open and monitor what it prints out there, as they have more info on what is going on.


[22-Aug-18 06:31 AM] CrisF#3405
Didn't see anything starnge there, but I probably wouldn't know, haha.


[22-Aug-18 06:31 AM] CrisF#3405
`diceinfo` shows ```diceinfo fd6093b89df7cbb68796ad014682641cd74fd6bdd6b3599faf1474941afe5dc9
{
  "result": "success",
  "fundingtxid": "fd6093b89df7cbb68796ad014682641cd74fd6bdd6b3599faf1474941afe5dc9",
  "name": "BORKED",
  "sbits": 75064407117634,
  "minbet": "1.00000000",
  "maxbet": "1000.00000000",
  "maxodds": 5,
  "timeoutblocks": 5,
  "funding": "904.00000000"```


[22-Aug-18 06:31 AM] CrisF#3405
That wouldn't cover my payout if I won.


[22-Aug-18 06:32 AM] CrisF#3405
(I think)


[22-Aug-18 06:32 AM] Deleted User#0000
that might be the issue then. I saw on STAKED2 that it would print for minbet/maxbet if you went under/over those


[22-Aug-18 06:33 AM] Deleted User#0000
but I havent had it have less funding than the max bet yet


[22-Aug-18 06:33 AM] Deleted User#0000
its going to be hard to do that, as its 50/50 odds and max bet is 2, and it has 500 coins in it.. so like impossible to happen lol


[22-Aug-18 06:38 AM] CrisF#3405
@Deleted User  Yeah


[22-Aug-18 06:38 AM] CrisF#3405
In this case though it's not maxbet.


[22-Aug-18 06:39 AM] CrisF#3405
I'm under the max bet, but with the odds I was betting it would need to payout more than the 904 funds available if I won.


[22-Aug-18 06:41 AM] CrisF#3405
It would need to pay out 4662 again if I won.


[22-Aug-18 06:42 AM] CrisF#3405
g2g


[22-Aug-18 07:49 AM] siu#3920
tried a rewards that worked perfectly as intended.


[22-Aug-18 08:12 AM] dukeleto#7326
@jl777c https://github.com/jl777/komodo/pull/820

{Embed}
https://github.com/jl777/komodo/pull/820
cctests sync by leto ¬∑ Pull Request #820 ¬∑ jl777/komodo
Enable cc=2 in our regtest chain
Fix one uint64_t bug
Improve and add some new error messages to make JSON responses more useful. All prints to stderr have been kept so the current workflow of test...
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298

{Reactions}
üëå 

[22-Aug-18 08:14 AM] dukeleto#7326
that PR passes lots of dice RPC internal errors back into the JSON response, hopefully will make dice testing easier. Some of the errors had no error message  previously. hopefully makes testing/debugging easier


[22-Aug-18 08:19 AM] jl777c#5810
merged. thanks!


[22-Aug-18 08:26 AM] dukeleto#7326
no problem, happy to help the CC revolution üëç


[22-Aug-18 08:43 AM] jl777c#5810
there are only a very few types in bitcoin. pay to pubkey, pay to pubkey hash and pay to script hash
p2pk, p2pkh, p2sh
there are actually more that are possible, but those three are 99%+ of bitcoin transactions
so you can pay to a pubkey, or to its hash. or to a script's hash. the last is how most of the more complex scripts are invoked. to spend a p2sh vout, you need to provide the redeemscript, this script's hash is what the p2sh address was.
all of the above are the standard bitcoin vout types and there should be plenty of materials about it
Encrypted by a verified device
what I did with the CC contracts is created a fourth type of vout, the CC vout. this is using the cryptoconditions standard and it is even a different signature mechanism. ed25519 instead of secp256k1. it is basically a big extension to the bitcoin script. There is a special opcode that is added that says it is a CC script.
but it gets more interesting


[22-Aug-18 08:43 AM] jl777c#5810
each CC script has an evalcode
this is just an arbitrary number. but what it does is allows to create a self-contained universe of CC utxo that all have the same evalcode and that is how a faucet CC differentiates itself from a dice CC, the eval code is different

one effect from using a different eval code is that even if the rest of the CC script is the same, the bitcoin address that is calculated is different. what this means is that for each pubkey, there is a unique address for each different eval code!
and this allows efficient segregation of one CC contracts transactions from another


[22-Aug-18 08:44 AM] jl777c#5810
the final part that will make it all clear how the funds can be locked inside the contract. this is what makes a contract, a contract. I put both the privkey and pubkey for a randomly chosen address and associate it with each CC contract. That means anybody can sign outputs for that privkey. However, it is a CC output, so in addition to the signature, whatever constraints a CC contract implements must also be satistifed. This allows funds to be locked and yet anybody is able to spend it, assuming they satisfy the CC's rules

one other technical note is that komodod has the insight-explorer extensions built in. so it can lookup directly all transactions to any address. this is a key performance boosting thing as if it wasnt there, trying to get all the utxo for an address not in the wallet is quite time consuming

{Reactions}
üíØ üëç (2) üëè (2) üá® ¬© Komodo (5) 

[22-Aug-18 09:32 AM] SHossain#0007
dicebet with non round numbers works fine
```
d4dfce9b597b9653679b0835fe8ce01e566fc3d522fe326558a0b0b3d8818b82 winnings 31.54000000 bet 15.77000000 at odds 1:1
835f4f502bafd57e550db4515b8980b7e43dd0c146078604f1a20d86cdeb63ae winnings 35.59751562 bet 17.79875781 at odds 1:1
86ac79842c26d9ffcd79b70be10ad0dbbf9eb94a6878a54773e46eff517bd5f2 winnings 35.59751562 bet 17.79875781 at odds 1:1
```


[22-Aug-18 09:34 AM] SHossain#0007
the last 2 i tried with odds 1.25 and 1.82, the contract used only 1 as odds instead of the full amount.


[22-Aug-18 09:35 AM] jl777c#5810
odds are integer

{Reactions}
üëçüèΩ 

[22-Aug-18 09:41 AM] SHossain#0007
`f593650df34e7c36503c8a9e4a421a88509d20da2423006f629d44eea7470912 winnings 376.95942564 bet 94.23985641 at odds 3:1`


[22-Aug-18 10:03 AM] SHossain#0007
wondering what i have done wrong. dicestatus returning error
```
"method":"dicestatus",
"params": ["DiceX","9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6","c707dee2e4f66bca7b8a84ff71b9704f649dc56158429639e6f0cc4acd040468"]
```
```
    "result": {
        "result": "error",
        "error": "Diceinit error"
    },
```


[22-Aug-18 10:04 AM] SHossain#0007
both dealer node and player node online


[22-Aug-18 10:04 AM] SHossain#0007
after placing a bet, dealer node showed the bet was lost. used dicestatus on player node and it is returning error


[22-Aug-18 10:06 AM] SHossain#0007
this output is from dealernode showing the txid
```
c707dee2e4f66bca7b8a84ff71b9704f649dc56158429639e6f0cc4acd040468 winnings 0.00000000 bet 94.23985641 at odds 7:1
```


[22-Aug-18 10:06 AM] SHossain#0007
using latest code from jl777 branch


[22-Aug-18 10:08 AM] TonyL#3577
@SHossain just tried to check your bet, but I didn't compile it from last today's source yet:
```
./komodo-cli -ac_name=BRK dicestatus DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 c707dee2e4f66bca7b8a84ff71b9704f649dc56158429639e6f0cc4acd040468
{
  "result": "success",
  "status": "loss"
}
```


[22-Aug-18 10:09 AM] SHossain#0007
please test from today's update. Dukeleto pushed some update today


[22-Aug-18 10:09 AM] TonyL#3577
Let me try to compile latest one and check again yep

{Reactions}
üëçüèΩ 

[22-Aug-18 10:14 AM] TonyL#3577
```./komodo-cli -ac_name=BRK dicestatus DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 c707dee2e4f66bca7b8a84ff71b9704f649dc56158429639e6f0cc4acd040468
{
  "result": "success",
  "status": "loss"
}
``` 
Work as well


[22-Aug-18 10:22 AM] SHossain#0007
strange


[22-Aug-18 10:23 AM] SHossain#0007
i stopped the daemon, restarted with `-reindex` option and now getting this
```
    "result": {
        "result": "error",
        "error": "couldnt find bettx or entropytx"
    },
```


[22-Aug-18 10:24 AM] SHossain#0007
placed a new bet and same with the txid i received


[22-Aug-18 10:25 AM] SHossain#0007
do you mind to try compiling again with `make clean` and data dir cleaned up?

{Reactions}
üëå 

[22-Aug-18 10:25 AM] SHossain#0007
leave the wallet.dat and BRK.conf file and delete other data


[22-Aug-18 10:31 AM] siu#3920
```./komodod -ac_name=COQUITEST2  -ac_supply=72000000 -ac_ccactivate=140 -addnode=24.54.206.138  &```


[22-Aug-18 10:31 AM] siu#3920
hi guys


[22-Aug-18 10:31 AM] siu#3920
can you take a look at this chain?


[22-Aug-18 10:32 AM] siu#3920
its a test of a fork from a non-cc chain to activated cc chain.


[22-Aug-18 10:32 AM] siu#3920
sync and  test


[22-Aug-18 10:34 AM] jl777c#5810
need it use FSM branch for that one


[22-Aug-18 10:34 AM] siu#3920
oh right


[22-Aug-18 10:34 AM] siu#3920
FSM branch


[22-Aug-18 10:37 AM] TonyL#3577
Hi @siu I'll setup this build and chain after check this bet status issue


[22-Aug-18 10:38 AM] siu#3920
ok


[22-Aug-18 10:45 AM] TonyL#3577
@SHossain I've totally deleted `~/.komodod`, rebuild from other directory from scratch but still able to get bet status. Let me try to place mine


[22-Aug-18 10:55 AM] dukeleto#7326
@SHossain you should see a `couldnt find bettx or entropytx` in stderr and perhaps more information to help debug


[22-Aug-18 10:55 AM] TonyL#3577
@SHossain New bet to yours contract  was placed but cannot get it's status:
```./komodo-cli -ac_name=BRK dicestatus DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 9e760e4cf18b54de2084c000059cb95c941595e51e27f0ac64bacc8efe783cf9
{
  "result": "error",
  "error": "cant find dice entropy inputs"
}
```


[22-Aug-18 10:56 AM] dukeleto#7326
both of those are new errors that are not only printed to stderr, but also returned as JSON


[22-Aug-18 10:56 AM] dukeleto#7326
look at stderr to see more details


[22-Aug-18 10:56 AM] dukeleto#7326
"new" as in they haven't been in json results before


[22-Aug-18 10:57 AM] dukeleto#7326
and you can do getrawtransaction to verify your txid's


[22-Aug-18 11:00 AM] TonyL#3577
```
./komodo-cli -ac_name=BRK dicestatus DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 9e760e4cf18b54de2084c000059cb95c941595e51e27f0ac64bacc8efe783cf9
{
  "result": "success",
  "status": "loss"
}
```
But when I run daemon in previous build I'm able to get info about bet


[22-Aug-18 11:00 AM] TonyL#3577
So it should be a bug hmm. UPD re-switched daemon back and can get status. Maybe there is just some delay. But transaction wasnt in rawmemorypool already when I've received `can't find entropy inputs`


[22-Aug-18 11:03 AM] jl777c#5810
it only looks in confirmed tx for entropy


[22-Aug-18 11:04 AM] dukeleto#7326
the new error messages in dice results should help debug various edge cases in test plans


[22-Aug-18 11:08 AM] TonyL#3577
Now I'm receiving ```./komodo-cli -ac_name=BRK dicestatus DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 c707dee2e4f66bca7b8a84ff71b9704f649dc56158429639e6f0cc4acd040468
{
  "result": "error",
  "error": "Diceinit error"
}
```
Same as @SHossain 
And in daemon logs
```Dice plan (DiceX) already exists cmpflag.1
Diceinit error
```
But actually I'm not trying to create a dice plan. I'm just trying to check status of my bet


[22-Aug-18 11:10 AM] jl777c#5810
so the latest version broke dicestatus?


[22-Aug-18 11:11 AM] TonyL#3577
And on same call in previous build right now I'm getting:
```
{
  "result": "success",
  "status": "loss"
}
```
So yes, dicestatus looks broken @jl777c


[22-Aug-18 11:18 AM] jl777c#5810
pushed version with some debug prints. plz post console result


[22-Aug-18 11:19 AM] TonyL#3577
Ok


[22-Aug-18 11:21 AM] SHossain#0007
updating


[22-Aug-18 11:21 AM] SHossain#0007
Thanks @TonyL for confirming

{Reactions}
üëç 

[22-Aug-18 11:27 AM] TonyL#3577
@jl777c 
```
./komodo-cli -ac_name=BRK dicestatus 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 4061e91d1427bb9c260b14af26d1aa2fd7d0dd98f6c1267b44591834dd8b5594
{
  "result": "error",
  "error": "Diceinit error in status"
}
```
```
Dice plan (9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6) already exists cmpflag.1
Diceinit error in status
```


[22-Aug-18 11:28 AM] jl777c#5810
on jl777 branch?


[22-Aug-18 11:28 AM] TonyL#3577
Yes


[22-Aug-18 11:29 AM] TonyL#3577
```git pull

remote: Counting objects: 15, done.
remote: Compressing objects: 100% (7/7), done.
remote: Total 15 (delta 12), reused 11 (delta 8), pack-reused 0
Unpacking objects: 100% (15/15), done.
From https://github.com/jl777/komodo
   4a6cad3a5..6843837cd  jl777      -> origin/jl777
   d7a84c745..90c811557  FSM        -> origin/FSM
Updating 4a6cad3a5..6843837cd
Fast-forward
 src/cc/dice.cpp | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)
``` 
With these changes


[22-Aug-18 11:30 AM] jl777c#5810
try again


[22-Aug-18 11:30 AM] SHossain#0007
it is working fine on my end now
```
    "result": {
        "result": "success",
        "status": "loss"
    },
```


[22-Aug-18 11:31 AM] SHossain#0007
```
"method":"dicestatus",
"params": ["DiceX","9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6","59d0e4616910d3578f13b75ca99ed64e8be29e35480c26081648255f143451c0"]
```


[22-Aug-18 11:31 AM] TonyL#3577
It's working fine for me for bet when I tested before


[22-Aug-18 11:31 AM] TonyL#3577
But when I'm placing new bet and trying to check it's status getting this error


[22-Aug-18 11:31 AM] SHossain#0007
i placed a new bet and used the txid


[22-Aug-18 11:33 AM] jl777c#5810
i think (hope) latest version fixes this


[22-Aug-18 11:34 AM] jl777c#5810
it should work for new or old txid


[22-Aug-18 11:34 AM] SHossain#0007
```
Updating 6843837..692b653
Fast-forward
 src/cc/dice.cpp | 6 +++---
```


[22-Aug-18 11:40 AM] jl777c#5810
so latest works?


[22-Aug-18 11:40 AM] SHossain#0007
yes


[22-Aug-18 11:40 AM] TonyL#3577
I'm getting same but daemon error changed
```
error decoding opret or sbits mismatch 5865636944 vs 3230663064396239
Dice plan (9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6) exists.0 vs cmpflag.1
Diceinit error in status
```


[22-Aug-18 11:40 AM] SHossain#0007
when i used dicestatus, got result `loss` and terminal output is
```
check fundingtxid
```


[22-Aug-18 11:41 AM] jl777c#5810
@TonyL pull latest


[22-Aug-18 11:41 AM] jl777c#5810
you should see:         fprintf(stderr,"check fundingtxid\n");
if not it isnt latest


[22-Aug-18 11:41 AM] TonyL#3577
I've build from this pull:
```
From https://github.com/jl777/komodo
   6843837cd..692b653d7  jl777      -> origin/jl777
Updating 6843837cd..692b653d7
Fast-forward
 src/cc/dice.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)
```


[22-Aug-18 11:42 AM] TonyL#3577
Will try to rebuild


[22-Aug-18 11:42 AM] jl777c#5810
no


[22-Aug-18 11:42 AM] jl777c#5810
sometimes git has a minute delay


[22-Aug-18 11:42 AM] jl777c#5810
and i made 5 different changes


[22-Aug-18 11:43 AM] jl777c#5810
if the check fundingtxid print didnt show in console, it was the wrong version and a git pull; make is needed


[22-Aug-18 11:47 AM] SHossain#0007
i'm getting `check fundingtxid` output in console


[22-Aug-18 11:47 AM] jl777c#5810
and it works properly?


[22-Aug-18 11:47 AM] jl777c#5810
for both old and new bettxid?


[22-Aug-18 11:53 AM] SHossain#0007
there is a bit wired behaviour
```
./komodo-cli -ac_name=BRK dicestatus DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 d4dfce9b597b9653679b0835fe8ce01e566fc3d522fe326558a0b0b3d8818b82
check fundingtxid
{
  "result": "error",
  "error": "bettxid already spent"
}
```


[22-Aug-18 11:53 AM] SHossain#0007
`dicestatus` showing result of `dicefinish`


[22-Aug-18 11:54 AM] SHossain#0007
another one. this is a new bettxid
```
./komodo-cli -ac_name=BRK dicestatus DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 d0480239102c6efc546835c97123dcc21c3b3da9185f19a671aeb050275c2aef
check fundingtxid
{
  "result": "error",
  "error": "bettxid already spent"
}
```


[22-Aug-18 11:55 AM] jl777c#5810
it seems CCerror isnt being cleared prior to the call


[22-Aug-18 11:56 AM] SHossain#0007
i tested once `dicefinish` call in the meantime and now getting same result everytime i use `dicestatus`


[22-Aug-18 11:58 AM] jl777c#5810
pushed fix


[22-Aug-18 11:58 AM] jl777c#5810
@dukeleto I added a CCerror = ""; in ensure_CCrequirements


[22-Aug-18 11:59 AM] jl777c#5810
basically it would have gotten stuck returning same CCerror after the first error


[22-Aug-18 12:02 PM] SHossain#0007
updating


[22-Aug-18 12:04 PM] TonyL#3577
When I'm trying to place bet from 0 balance  account:
A little bit off-topic but quite confusing as I think
```
  "result": "error",
  "error": "couldnt create dice bet transaction"
```
```
cant find enough inputs 1115445.59277016 note enough for 10.00000000
cant find dice input
```


[22-Aug-18 12:06 PM] SHossain#0007
`couldnt create dice bet transaction` is due to having 0 balance perhaps. and, the 2nd one due to minimum bet is 10


[22-Aug-18 12:06 PM] jl777c#5810
changed message to: couldnt create dice bet transaction. make sure your address has funds


[22-Aug-18 12:08 PM] jl777c#5810
@TonyL did you ever finish the tallies for the odds > 1 bets


[22-Aug-18 12:08 PM] jl777c#5810
for the latest version


[22-Aug-18 12:08 PM] jl777c#5810
after I changed the algo


[22-Aug-18 12:09 PM] TonyL#3577
@jl777c yes I did - results are in the same file https://docs.google.com/spreadsheets/d/1hkEmwtQ1Jw5UOXnVHMfo3qo9k83PF8tJls7NbbJADXA/edit?usp=sharing

{Embed}
https://docs.google.com/spreadsheets/d/1hkEmwtQ1Jw5UOXnVHMfo3qo9k83PF8tJls7NbbJADXA/edit?usp=sharing
Bets SC testing
Old algo

 Old algo
 Odds, Bets Placed, Bets Won, Bets won expected, Bets won delta,% Won,% Won expected,% Delta, Standart deviation( sigma), 3 sigmas
 1, 505, 267, 252, 5, 14, 5, 0, 5287128713, 0, 5, 0, 02871287129, 11, 23610253, 33, 70830758
 2, 502, 127, 167, 3333333,- 40,...
https://images-ext-2.discordapp.net/external/1VSKkDnHmGi9iUtIbT6bwHWuTnP9IZcHN86gDRJw4gk/https/lh5.googleusercontent.com/T6TVqrlvHNvyI_5CgwF6v8ph3FoR5gv7W_a6r0-H9RFvvXuawh7k_JMiD90SSkf42f4_Zw%3Dw1200-h630-p


[22-Aug-18 12:10 PM] jl777c#5810
good results! some higher, some lower, looks random but at the right odds


[22-Aug-18 12:10 PM] TonyL#3577
Yeah results looks very fair


[22-Aug-18 12:10 PM] jl777c#5810
did latest version fix the earlier errors


[22-Aug-18 12:12 PM] TonyL#3577
I still can't understand what's going on on my side. I've rebuilded once again from scratch, deleted `~/.komodod ` folder but not able to do anything. Even create a dicefund


[22-Aug-18 12:12 PM] TonyL#3577
```./komodo-cli -ac_name=BRK dicefund TONY2 10000 1 10000 10 5
{
  "result": "error",
  "error": "Diceinit error in create funding"
}
```


[22-Aug-18 12:12 PM] TonyL#3577
Oh was my fault. There was already fund with such name


[22-Aug-18 12:13 PM] SHossain#0007
this is latest result from my node
```
    "result": {
        "result": "success",
        "status": "win",
        "won": 40
    },
```


[22-Aug-18 12:13 PM] SHossain#0007
```
"method":"dicestatus",
"params": ["DiceX","9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6","f744d93879c8ba86139ab8a62aa63fe0e995648b5701a634b64e5bb70d414141"]
}
```


[22-Aug-18 12:13 PM] TonyL#3577
So get correct error in daemon logs
```
Dice plan (TONY2) exists.1 vs cmpflag.0
Diceinit error in create funding
```


[22-Aug-18 12:13 PM] SHossain#0007
this was a new bet


[22-Aug-18 12:14 PM] SHossain#0007
console didn't return `check fundingtxid` while displaying the result


[22-Aug-18 12:16 PM] TonyL#3577
Yes, getting result of bet right after transaction sending as before. So fixed on my side 
```
{
  "result": "success",
  "status": "win",
  "won": 20
}
```


[22-Aug-18 12:18 PM] SHossain#0007
did your console print `check fundingtxid`?


[22-Aug-18 12:18 PM] SHossain#0007
after issuing `dicestatus` call


[22-Aug-18 12:18 PM] TonyL#3577
Output above is only which I get


[22-Aug-18 12:19 PM] jl777c#5810
oh, sorry i removed that printout


[22-Aug-18 12:19 PM] SHossain#0007
ok


[22-Aug-18 12:19 PM] jl777c#5810
it seems it is working now anyway


[22-Aug-18 12:19 PM] SHossain#0007
yep. checked old and new and getting correct answer


[22-Aug-18 12:21 PM] jl777c#5810
I pushed a new version that has -ac_ccactivate=height implemented


[22-Aug-18 12:21 PM] jl777c#5810
the idea is that an existing chain can update to activate the CC contracts


[22-Aug-18 12:21 PM] jl777c#5810
however all instances need to run the same -ac_ccactivate=height value or nodes will fork. also, the first time it will reindex


[22-Aug-18 12:22 PM] jl777c#5810
siu and i verified it worked in at least one case, but if you do CC tx before the activate height, it seems strange things can happen

{Reactions}
Komodo 

[22-Aug-18 12:22 PM] TonyL#3577
Maybe we have to try activate it for BRK?


[22-Aug-18 12:23 PM] SHossain#0007
BRK already using CC


[22-Aug-18 12:23 PM] TonyL#3577
Oh right)))


[22-Aug-18 12:23 PM] SHossain#0007
has to be existing chain. list of current chains can be found in `assetchains.old` file


[22-Aug-18 12:26 PM] jl777c#5810
what we did was to make a test chain, start it without CC, then update all nodes using a specific activate height


[22-Aug-18 12:29 PM] SHossain#0007
`./komodod -ac_name=COQUITEST2 -ac_supply=72000000 -ac_ccactivate=140 -addnode=24.54.206.138 &`


[22-Aug-18 12:30 PM] jl777c#5810
on a chain that didnt do any CC before the activation height, it worked fine


[22-Aug-18 12:30 PM] jl777c#5810
also syncing after it is past activate height also worked


[22-Aug-18 12:30 PM] jl777c#5810
but having a chain with 2 or 3 nodes is one thing


[22-Aug-18 12:31 PM] siu#3920
@SHossain  that chain already passed the activatde height


[22-Aug-18 12:31 PM] siu#3920
maybe would be good to try another example


[22-Aug-18 12:31 PM] jl777c#5810
one that is notarized and having many user nodes, all needing to be updated with same -ac_ccactivate height...


[22-Aug-18 12:32 PM] siu#3920
coqui? :trollface:


[22-Aug-18 12:32 PM] xRobeSx#5136
If you have an existing non cc assetchain and want to add it, do you add `ac_ccactivate=x` and `ac_cc=2` ? and then after the activation block can you just use `ac_cc=2` since its already a cc chain?


[22-Aug-18 12:33 PM] siu#3920
it will only need -ac_ccactivate=blockcheight


[22-Aug-18 12:33 PM] siu#3920
forever


[22-Aug-18 12:38 PM] jl777c#5810
it defaults to using -ac_cc=2


[22-Aug-18 12:39 PM] jl777c#5810
you cant add -ac_cc=2 on the command line and still connect to the same chain, so itis a bit tricky


[22-Aug-18 12:39 PM] jl777c#5810
that is why I made the -ac_ccactivate option to take care of this trickiness


[22-Aug-18 12:39 PM] jl777c#5810
also addressindex=1 and spentindex=1 is needed, but it does that automatic

{Reactions}
üëç (3) 

[22-Aug-18 01:00 PM] SHossain#0007
**How to Activate CC (-ac_cc) on Existing Chain?**

If you have an existing assetchain on Komodo platform without CryptoConditions enabled, you can activate it any time. Komodo supports `-ac_ccactivate=height` call, using which you can activate CC on a non-CC enabled chain in a future block height.

## Example

The first existing chain which doesn't have CC enabled, the startup command looks like this
```
./komodod -ac_name=COQUITEST2 -ac_supply=72000000 -addnode=24.54.206.138 &
```
It was a very easy way to start a chain using Komodo technology, with very few parameters. In order to activate CC in this chain, all we have to do is the following:
```
./komodod -ac_name=COQUITEST2 -ac_supply=72000000 -ac_ccactivate=140 -addnode=24.54.206.138 &
```
`-ac_ccactivate=140` means, the CC activation will happen in block 140. You can set that to any block height you want the CC to be activated.

In order for this to happen, all nodes must update. If the chain was being notarized, Notary Nodes need to update as well with the same param for everyone.

Once CC is confirmed working, do not change the startup script. If you do, that will create a new fork.

By default, `-ac_ccactivate=height` uses `-ac_cc=2`. But, you cant add `-ac_cc=2` on the command line, as this will create a new fork. `-ac_ccactivate=height` will take care of those things automagically.

Also `addressindex=1` and `spentindex=1` is needed, but it does that automatic with `-ac_ccactivate=height`.


[22-Aug-18 01:01 PM] SHossain#0007
Pinned a message.


[22-Aug-18 01:01 PM] SHossain#0007
@gcharang please create a new wiki doc with the above info ‚òùüèΩ

{Reactions}
üëç 

[22-Aug-18 01:09 PM] jl777c#5810
we do need to test to make sure it works reliably. so far it has been limited testing


[22-Aug-18 01:12 PM] SHossain#0007
i can create a new chain now and let it run with normal parameteres tonight. once more testers joins and has the availablility tomorrow, or day after tomorrow we can try activating together.


[22-Aug-18 01:13 PM] jl777c#5810
yes and do things wrong to make sure even users that dont follow instructions can have a path to the new mainchain


[22-Aug-18 01:16 PM] SHossain#0007
@Alright @siu @TonyL Let's do this üòÉ

{Reactions}
üç¥ 

[22-Aug-18 01:16 PM] jl777c#5810
but higher priority are to find CC contract bugs


[22-Aug-18 01:17 PM] jl777c#5810
no point to have activation work for buggy CC contract

{Reactions}
üëçüèΩ 

[22-Aug-18 01:18 PM] jl777c#5810
i want to have a release candidate made based on bugs found by tomorrow, I fix them Friday and it can update up to master branch over the weekend


[22-Aug-18 01:18 PM] jl777c#5810
then one final test and push out to the field


[22-Aug-18 01:18 PM] siu#3920
let me know the parameters ill leave a node running


[22-Aug-18 01:19 PM] siu#3920
tomorrow i can be all day testing


[22-Aug-18 01:19 PM] siu#3920
so far, on my test of the cc i have not found any other bug recently


[22-Aug-18 01:22 PM] jl777c#5810
it does seem to have become pretty hard to find bugs with CC


[22-Aug-18 01:23 PM] jl777c#5810
surprised assets are working so solid


[22-Aug-18 01:24 PM] siu#3920
would be nice to do a stress test of some kind


[22-Aug-18 01:25 PM] SHossain#0007
with asset/token buy or sell, i didn't find issues while doing  manual trades. very fast experince.


[22-Aug-18 01:25 PM] siu#3920
yep


[22-Aug-18 01:26 PM] SHossain#0007
@TonyL is creating some auto testing script for Token trading.


[22-Aug-18 01:26 PM] SHossain#0007
those tests i assume will be helpful with further info


[22-Aug-18 01:28 PM] TonyL#3577
Yep, this stuff, dropped yesterday here: 
https://github.com/tonymorony/kmd_cc_qa I've started to write some auto-tests for Token CC
For this CC testing I'm planning two modes: 1) Tests itself 2) Kinda CLI exchange based on Token CC -  in case if someone will want to have fun manually 
For now made auto-test for token adding process and in CLI possible to add tokens and list all available tokens.
Trading features of this CC I want to cover until the weekend.

Want to make something similar for dice contract and others to make 2 in 1: tests and some interactive demonstration of possibilities

{Embed}
https://github.com/tonymorony/kmd_cc_qa
tonymorony/kmd_cc_qa
kmd_cc_qa - Tests for Komodo CC
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[22-Aug-18 01:29 PM] TonyL#3577
Since I'm very new in auto-tests and python - any feedback/advices are highly appreciated üòÉ


[22-Aug-18 01:31 PM] siu#3920
see ya tomorrow.


[22-Aug-18 01:35 PM] Alright#0419
@jl777c my point earlier is that if you can't prevent `dicelist` from being spammed, could you add some way to sort through it? Maybe by the pubkey of creator?


[22-Aug-18 01:36 PM] jl777c#5810
the DB is not indexed by sender


[22-Aug-18 01:38 PM] Alright#0419
Sorry, what?


[22-Aug-18 01:39 PM] Alright#0419
Can you imagine what `dicelist` will look like on KMD after a year though?


[22-Aug-18 01:40 PM] jl777c#5810
dicelist as in a zillion dice plans?


[22-Aug-18 01:40 PM] Alright#0419
yes


[22-Aug-18 01:41 PM] jl777c#5810
why would people be doing this?


[22-Aug-18 01:41 PM] Alright#0419
lulz? It costs 1 coin for ~1000 dice plans


[22-Aug-18 01:42 PM] Alright#0419
It's something I can seriously see myself doing üòÇ


[22-Aug-18 01:43 PM] jl777c#5810
not much can be done about evil spammers


[22-Aug-18 01:47 PM] Alright#0419
I just think `dicelist` will be virtually unusable after some time.


[22-Aug-18 01:52 PM] Alright#0419
I imagine if that were to happen, services could use KV for their funding txids


[22-Aug-18 01:58 PM] jl777c#5810
or people will just say, use this diceplan and people use it direct without using dicelist


[22-Aug-18 01:59 PM] jl777c#5810
or a more efficient rpc call can be made. it isnt a consensus issue so can always have some custom solution if it becomes a problem that needs to be solved


[22-Aug-18 02:04 PM] TonyL#3577
Am I understand correct that `"funcid"` in `tokenorders` declaring is it bid or ask?


[22-Aug-18 02:05 PM] TonyL#3577
```  {
    "funcid": "S",
    "txid": "96d7be2297c8e0f1a299a05e30164c1d566d9d1d5a52b8edebede1981f625023",
    "vout": 0,
    "amount": "4915",
    "askamount": "4915",
    "origaddress": "RSb8Zzayh2gW9VFTxAYahXYNMuwCAJaEdv",
    "tokenid": "a4862b282c3ad1191614dc11818dcb3f6e58a6dbb4bb4373292e81e41739ff94",
    "totalrequired": "4915.00000000",
    "price": "1.00000000"
  }
```
In this output


[22-Aug-18 02:06 PM] jl777c#5810
s/S is sell (ask)


[22-Aug-18 02:06 PM] jl777c#5810
b/B is bid (buy)


[22-Aug-18 02:13 PM] SHossain#0007
@siu a very basic chain `./komodod -ac_cc=1 -ac_name=CCT -ac_supply=100000000 -addnode=94.130.224.11 &`


[22-Aug-18 02:16 PM] Alright#0419
we can try `-ac_ccactivate` on STAKED3

{Reactions}
üëå 

[22-Aug-18 02:19 PM] SHossain#0007
good idea.


[22-Aug-18 02:19 PM] SHossain#0007
we will not actively test this feature for now. it can be tested throughly after the next hardfork activation


[22-Aug-18 02:20 PM] SHossain#0007
current high priority, all 4 CC contracts. to find the remaining bugs (if any)

{Reactions}
üëå (2) 

[22-Aug-18 02:30 PM] siu#3920
Part of the test is to activate cc and be sure they work afterwards


[22-Aug-18 02:30 PM] siu#3920
Most important changes will be when already existing chains hard fork


[22-Aug-18 04:12 PM] TonyL#3577
I think I just found strange behaviour in token CC:

1)  Created ask offer ```./komodo-cli -ac_name=BRK tokenask 1000 2d36de839217cc8245d8a4db0723859f53ef93fdd0735c9fe47af3c7edaeb6e9 1```
```  {
    "funcid": "s",
    "txid": "56265459d4390305b94688f88d0d3789b18568bce237338ffbe64fb798f6e9d0",
    "vout": 0,
    "amount": "1000",
    "askamount": "1000",
    "origaddress": "RTLfdpVPhgGygeExTJhvsdbBf6rwvHs5FY",
    "tokenid": "2d36de839217cc8245d8a4db0723859f53ef93fdd0735c9fe47af3c7edaeb6e9",
    "totalrequired": "1000.00000000",
    "price": "1.00000000"
  }
```
2) Send transaction on sum > then ask amount 
```./komodo-cli -ac_name=BRK tokenfillask 2d36de839217cc8245d8a4db0723859f53ef93fdd0735c9fe47af3c7edaeb6e9 56265459d4390305b94688f88d0d3789b18568bce237338ffbe64fb798f6e9d0 1999```
`"result": "success"`

After transaction confirmation ask order disappeared from `tokenorders`
My tokens balance remained the same. Coin balance reduced on transactions fee.


[22-Aug-18 04:16 PM] TonyL#3577
Oh, false alarm. I guess I just sold my tokens to myself actually lol. Dunno what I've expected.

Yes, everything work correct and I've received my change when tried to fill someones ask with sum more than ask amount


[22-Aug-18 04:47 PM] TonyL#3577
Don't think it's issue but: 
When I fulfil ask/bid (it's not in`tokenorders` anymore) I can call again fillask/fillbid for same order txid and get `"result": "success"` + hex + `fillbuy validated`. 
On raw transaction sending stage I'm getting ```error code: -26
error message:
18: bad-txns-inputs-spent```
+ `totally filled!`

Expected result for me was kinda `totally filled` when I call for fillask\fillbid

Also have same scenario when trying to cancel order not belonging to me.


[23-Aug-18 01:31 AM] CrisF#3405
@SHossain  Thanks for your help before!


[23-Aug-18 01:31 AM] CrisF#3405
Could you tell me the best way to update when using ```After compiling komodo using jl777 branch, use:

cd ~
mkdir jl777
cp ~/komodo/src/komodod ~/jl777/komodod
cp ~/komodo/src/komodo-cli ~/jl777/komodo-cli
cd jl777
./komodod ........```?


[23-Aug-18 02:16 AM] siu#3920
git pull


[23-Aug-18 02:59 AM] SHossain#0007
@CrisF you need to update manually


[23-Aug-18 04:18 AM] CrisF#3405
Thanks @siu @SHossain I wasn't able to git anything inside ~/jl777.  I'll do it outside and re-cp `komodod` and `komodo-cli` back in.


[23-Aug-18 04:19 AM] SHossain#0007
you can't git anything inside that directory. you have to compile in the directory where you originally compiled them in the first place


[23-Aug-18 04:19 AM] SHossain#0007
jl777 directory is an example that you created manually, not by git clone command. so, git won't work there

{Reactions}
üôè 

[23-Aug-18 04:20 AM] SHossain#0007
@Alright i see 21,000 dice plan available in BRK chain now. took about 550ms to load in my end.


[23-Aug-18 04:23 AM] Deleted User#0000
can you make a bet on those dice plans?


[23-Aug-18 04:23 AM] SHossain#0007
you can't without entropy tx and funds


[23-Aug-18 04:23 AM] Deleted User#0000
ü§î


[23-Aug-18 04:24 AM] Deleted User#0000
maybe you shouldnt be able to make a diceplan without sending some funds... te it wouldnt be so easy to make 20,000 of them


[23-Aug-18 04:24 AM] Deleted User#0000
I also found problems with dice, that makes it give me a heaps of  "free" coins if I resync my node. I assume my node just didnt see them as it bugged out...


[23-Aug-18 04:25 AM] Deleted User#0000
and resync made them "reappear" in my wallet


[23-Aug-18 04:25 AM] SHossain#0007
You need funds to create a dice plan. Currently, it allows 0.0001 to create a dice plan


[23-Aug-18 04:25 AM] Deleted User#0000
I think its mostly Alrights fault for putting 1000 entropy TX into the DICE fund on STAKED2 when he was tired, and it allowed me to just kep playing fo r8H straight


[23-Aug-18 04:26 AM] Deleted User#0000
and it timed out the creator node and all the bets timed out and claimed to me.


[23-Aug-18 04:26 AM] Deleted User#0000
Well... yes, there are a lot of people who would do such thiings


[23-Aug-18 04:26 AM] Deleted User#0000
so you should not be able to do it.


[23-Aug-18 04:26 AM] Deleted User#0000
üòÑ


[23-Aug-18 04:27 AM] Deleted User#0000
I dont see it as a mustfix before hardfork.... but its a bug none the less.


[23-Aug-18 04:28 AM] SHossain#0007
ok. my bad. i see funds in my diceplan along with entropy tx


[23-Aug-18 04:28 AM] SHossain#0007
```
        "result": "success",
        "fundingtxid": "9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6",
        "name": "DiceX",
        "sbits": 379658135876,
        "minbet": "5.00000000",
        "maxbet": "10000.00000000",
        "maxodds": 50,
        "timeoutblocks": 1,
        "funding": "1115425.59257016"
    },
```


[23-Aug-18 04:28 AM] SHossain#0007
```
numentropy tx 25: 1115425.59257016
```


[23-Aug-18 04:29 AM] siu#3920
hello guys

{Reactions}
‚òï (2) 

[23-Aug-18 04:29 AM] siu#3920
where are we?


[23-Aug-18 04:30 AM] SHossain#0007
we are trying to find the remaining bugs (if any) and help polish the code before releasing


[23-Aug-18 04:32 AM] siu#3920
ok, from jl777 branch?


[23-Aug-18 04:32 AM] SHossain#0007
yes


[23-Aug-18 04:33 AM] SHossain#0007
i updated my nodes this morning


[23-Aug-18 04:33 AM] siu#3920
ok


[23-Aug-18 04:34 AM] SHossain#0007
btw, `dicelist` used to return value within 2ms. now it is over 500ms


[23-Aug-18 04:37 AM] siu#3920
what chain is being used?


[23-Aug-18 04:38 AM] Deleted User#0000
how do you find a diceplan that has funds if the dicelist is so long?


[23-Aug-18 04:39 AM] siu#3920
i guess gui will need to work on that.

{Reactions}
üòÜ 

[23-Aug-18 04:39 AM] SHossain#0007
yes. i guess GUI will be able to filter


[23-Aug-18 04:40 AM] SHossain#0007
also, stdout shows how many entropy tx the plan has when you query diceinfo


[23-Aug-18 04:41 AM] SHossain#0007
dealer node is not showing winning or lost bet live like it used to do before


[23-Aug-18 04:41 AM] siu#3920
hmm


[23-Aug-18 04:43 AM] siu#3920
holy crap... how did so many plans got created!


[23-Aug-18 04:44 AM] SHossain#0007
Alright created them


[23-Aug-18 04:44 AM] CrisF#3405
Who (or what) am I playing against when I play dice?  (Where did the coins I won come from?)


[23-Aug-18 04:44 AM] siu#3920
the person who funded the plan

{Reactions}
üëç 

[23-Aug-18 04:45 AM] Deleted User#0000
I dont think you get how long it takes to call `diceinfo` for 20,000 dice plans to check ... no GUI is going to fix that!


[23-Aug-18 04:46 AM] Deleted User#0000
the only way around it is to have a 3rd party service that knows what dice plan has what.


[23-Aug-18 04:46 AM] Deleted User#0000
which seems counter productive to what your trying to do here.


[23-Aug-18 04:46 AM] Deleted User#0000
which is decentralsie and remove poitns of faliure


[23-Aug-18 04:47 AM] siu#3920
an option is to add some paramters to dicelist call


[23-Aug-18 04:47 AM] Deleted User#0000
I would add 'entropy1 to `diceinfo` for a start


[23-Aug-18 04:47 AM] Deleted User#0000
and also make it much more expensive to creat a dice plan


[23-Aug-18 04:47 AM] Deleted User#0000
that removes 99% of this issue


[23-Aug-18 04:48 AM] Deleted User#0000
quite easily..


[23-Aug-18 04:48 AM] Deleted User#0000
entropy is already printed in stdout... add it to the JSON


[23-Aug-18 04:49 AM] siu#3920
im with you... we need more info on the plans to filter them


[23-Aug-18 04:50 AM] Deleted User#0000
Im not trying to create more work... I am tryign to finds bugs/problems, that is the point of STAKED


[23-Aug-18 04:50 AM] Deleted User#0000
you can test it, with an exact specific set of commands, and it will laways work..


[23-Aug-18 04:50 AM] Deleted User#0000
but no user ever does that


[23-Aug-18 04:51 AM] Deleted User#0000
once the core logic works, make it unbreakable as best as humanly possible.


[23-Aug-18 04:52 AM] siu#3920
at least afaik adding more info to the command is not a hard fork change, so its not priority to fix before the fork


[23-Aug-18 04:53 AM] siu#3920
what we need to be sure is that no hardforking change needs to be done after the fork.

{Reactions}
üëç 

[23-Aug-18 04:53 AM] Deleted User#0000
yes but changing the dicefund cost is a hardforking change... as if its a soft fork, any person can change the code, and remove the fund limit.


[23-Aug-18 04:54 AM] siu#3920
yep


[23-Aug-18 04:54 AM] siu#3920
true


[23-Aug-18 04:54 AM] Deleted User#0000
either way, I will just keep doing what I am supposed to be doing and break STAKED and tell you guys how I did it.


[23-Aug-18 05:04 AM] CrisF#3405
Is it OK if I keep playing around with dice here?


[23-Aug-18 05:06 AM] SHossain#0007
you can. it is OK.


[23-Aug-18 05:06 AM] CrisF#3405
Great, thanks.


[23-Aug-18 05:11 AM] SHossain#0007
actually live win or loss is being displayed in dealer node
```
72d3d7ac0c9517738dc8337c3ce2d4291c3acab35bf98f6aacddc8d96999fff1 winnings 40.00000000 bet 20.00000000 at odds 1:1
```


[23-Aug-18 05:13 AM] SHossain#0007
@CrisF use this dice plan `9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6`


[23-Aug-18 05:14 AM] CrisF#3405
Ok, I'll try there.


[23-Aug-18 05:14 AM] CrisF#3405
I think I just made a plan myself.


[23-Aug-18 05:15 AM] CrisF#3405
What is the dealer node?


[23-Aug-18 05:20 AM] SHossain#0007
the node where you create the diceplan from


[23-Aug-18 05:21 AM] SHossain#0007
basically associated with the pubkey and privkey you use

{Reactions}
üëÜ 

[23-Aug-18 05:21 AM] CrisF#3405
```"fundingtxid": "9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6",
  "name": "DiceX",
  "sbits": 379658135876,
  "minbet": "5.00000000",
  "maxbet": "10000.00000000",
  "maxodds": 50,
  "timeoutblocks": 1,
  "funding": "0.00000000"```
Seems no funds in DiceX?


[23-Aug-18 05:22 AM] SHossain#0007
there are funds
```
        "result": "success",
        "fundingtxid": "9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6",
        "name": "DiceX",
        "sbits": 379658135876,
        "minbet": "5.00000000",
        "maxbet": "10000.00000000",
        "maxodds": 50,
        "timeoutblocks": 1,
        "funding": "1115345.59217016"
 ```


[23-Aug-18 05:22 AM] TonyL#3577
@CrisF Maybe all UTXO used now - in such case funding showing as 0 by my experience

{Reactions}
üëç 

[23-Aug-18 05:22 AM] SHossain#0007
i have entropy tx (UTXO) `umentropy tx 22: 1115345.59217016`
this is the reason, i advised you to use this plan


[23-Aug-18 05:23 AM] CrisF#3405
Yes, that's the one I tried.


[23-Aug-18 05:23 AM] SHossain#0007
are you using latest source from jl777 branch?


[23-Aug-18 05:23 AM] CrisF#3405
Yes, just updated.


[23-Aug-18 05:24 AM] CrisF#3405
```./komodo-cli -ac_name=BRK dicebet DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 777 50
{
  "result": "error",
  "error": "couldnt create dice bet transaction. make sure your address has funds"```


[23-Aug-18 05:24 AM] SHossain#0007
which block you are synced until?


[23-Aug-18 05:24 AM] CrisF#3405
```"blocks": 4302,
  "longestchain": 4302,```


[23-Aug-18 05:25 AM] SHossain#0007
restart the daemon and try again


[23-Aug-18 05:25 AM] SHossain#0007
i see fundings in there using a player node


[23-Aug-18 05:25 AM] CrisF#3405
Ok.


[23-Aug-18 05:26 AM] SHossain#0007
just did a bet using player node and dealer node showed info as lost bet
```
d74cd86fa0ccd60256efa1ca367190f9e016413399f315f3cd61f8f9a45cd4ce winnings 0.00000000 bet 20.00000000 at odds 1:1
0100000003a2a4613819e21acfdee7b34e9a61bd817cf65478b2ab20565fcba8571863261901000000484730440220289bef1c925109d4078622d5143d8a1f95bf131944f3a0c790a4b525c6686a990220193ee9f4c66b086394172e289c049f109a7ef9701540ba3575ed8b2f79f0935a01ffffffffced45ca4f9f861cdf315f399334116e0f9907136caa1ef5602d6cca06fd84cd7000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81406697edc918a5b7035b137028f4a0df90baf7123ef6d9d413b4142c98dab760302865c8cc0ca1ce6202127848b39908a4770fed6f1f5260040d25a2df4afd4746a100af038001e6a10001ffffffffced45ca4f9f861cdf315f399334116e0f9907136caa1ef5602d6cca06fd84cd7010000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81405b55b3e0b51e44bd94b4321a010ac84555134de97781a586dc12e8df88a464d901587141b03509773f9eb3118e87f575290d154bfc4627a0193bafd4d69d4c51a100af038001e6a10001ffffffff03f0344d1f05000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc102700000000000023210304b1f0ba82cb8e064a32e093e2319ff6f886523d4c910204169353529c7669a6ac00000000000000006d6a4c6ae64c4469636558000000c6ecc7a864c640988509fe7d836a9ab36a8aeb3e25411f9a9245d934020f9d9ba3f5d3a7ff0707cf256bface611f221a556d3e76b0e730fd8f6009a65f74ebd02c272e85bca12b43229524ba26d6fa1949b79212b767c25a25e2925b71b747c700000000
74275712c523522152ce6ed7896a786b97957c3077a75c86c3db48240e26fcb6
KOMODO_CONNECTING.4305 mempool.1
KOMODO_CONNECTING.4305 mempool.1
added to mempool and broadcast
```


[23-Aug-18 05:27 AM] SHossain#0007
and dicestatus from player node shows lost
```
"method":"dicestatus",
"params": ["DiceX","9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6","d74cd86fa0ccd60256efa1ca367190f9e016413399f315f3cd61f8f9a45cd4ce"]
```
```
        "result": "success",
        "status": "loss"
```


[23-Aug-18 05:35 AM] CrisF#3405
It worked and I placed a bet.


[23-Aug-18 05:36 AM] CrisF#3405
`dicestatus` shows `"error": "Diceinit error in status"`


[23-Aug-18 05:36 AM] SHossain#0007
did you send the rawtransaction?


[23-Aug-18 05:36 AM] CrisF#3405
yes.


[23-Aug-18 05:36 AM] SHossain#0007
what is the txid?


[23-Aug-18 05:37 AM] SHossain#0007
```
cf70ca83d1282f04d06540353d64b1a71b7f0692d4e6a522c74f929d92aa3377 winnings 0.00000000 bet 777.00000000 at odds 50:1
```


[23-Aug-18 05:37 AM] CrisF#3405
`cf70ca83d1282f04d06540353d64b1a71b7f0692d4e6a522c74f929d92aa3377`


[23-Aug-18 05:37 AM] CrisF#3405
Yes.


[23-Aug-18 05:37 AM] SHossain#0007
you lost


[23-Aug-18 05:37 AM] Deleted User#0000
```#!/bin/bash
#use like --- $ ./dice.sh 0.5
cecho() {
  local code="\033["
  case "$1" in
    red    |  r) color="${code}1;31m";;
    green  |  g) color="${code}1;32m";;
    yellow |  y) color="${code}1;33m";;
    blue   |  b) color="${code}1;34m";;
    purple |  p) color="${code}1;35m";;
    cyan   |  c) color="${code}1;36m";;
    gray   | gr) color="${code}0;37m";;
    *) local text="$1"
  esac
  [ -z "$text" ] && local text="$color$2${code}0m"
  echo -n -e "$text"
}

check () {
  check=$($checkcmd | jq -r '.')
  result=$(jq -r ".status" <<<"${check}")
}

wager=$1
cecho b "Wager: "
cecho g $wager
echo ""
odds=1
cecho b "Odds: "
cecho g $odds
echo ""
fundingtxid="e05c2964c1f63890579d5485953d7d70145e691f2120be857f4647981797286a"
AssetChain="STAKED2"
bet=$(komodo-cli -ac_name=$AssetChain dicebet DICE $fundingtxid $wager $odds | jq -r '.')
bethex=$(jq -r ".hex" <<<"${bet}")
if [[ $bethex = null ]]; then
        cecho r "ERROR CREATING TX! \n"
        exit
fi
sendbet=$(komodo-cli -ac_name=$AssetChain sendrawtransaction $bethex)
outcome=$?
if [[ $outcome != 0 ]]; then
        exit
        echo $bethex >> ERRORLOG
fi
cecho b "Sent "
cecho c $sendbet
echo ""
echo $sendbet >> txids_dice100
sleep 5
checkcmd="komodo-cli -ac_name=$AssetChain dicestatus DICE $fundingtxid $sendbet"
check
outcome=0
while [[ $outcome = 0 ]]; do
  if [[ $result = *pending* ]]; then
    sleep 60
    check
  else
    outcome=1
  fi
done
if [[ $result = "win" ]]; then
  cecho g "YOU WON!"
  echo win >> wins
elif [[ $result = "loss" ]]; then
  cecho r "YOU LOST!"
  echo loss >> losses
else
  cecho c "result: $result"
fi
echo ""```


[23-Aug-18 05:37 AM] Deleted User#0000
Try that to play dice üòÑ

{Reactions}
üòÉ (2) 

[23-Aug-18 05:37 AM] Deleted User#0000
much easier


[23-Aug-18 05:38 AM] CrisF#3405
stdout```modval 6544 vs 3333
error decoding opret or sbits mismatch 5865636944 vs 3230663064396239
Dice plan (9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6) exists.0 vs cmpflag.1
Diceinit error in status```


[23-Aug-18 05:38 AM] SHossain#0007
@CrisF did you use dicestatus or diceinfo?


[23-Aug-18 05:38 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/482166771432816650/Screenshot_from_2018-08-23_13-38-23.png


[23-Aug-18 05:38 AM] SHossain#0007
using dicestatus for your txid, i see the result


[23-Aug-18 05:38 AM] CrisF#3405
`status`


[23-Aug-18 05:40 AM] SHossain#0007
what is the actual command you used?


[23-Aug-18 05:40 AM] CrisF#3405
```./komodo-cli -ac_name=BRK dicestatus 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 cf70ca83d1282f04d06540353d64b1a71b7f0692d4e6a522c74f929d92aa3377
{
  "result": "error",
  "error": "Diceinit error in status"```


[23-Aug-18 05:41 AM] SHossain#0007
this was supposed to be fixed yesterday. jl777 pushed fix. i can't reproduce it using 2 ndoes


[23-Aug-18 05:41 AM] SHossain#0007
```
./komodo-cli -ac_name=BRK dicestatus DiceX 9b9d0f0234d945929a1f41253eeb8a6ab39a6a837dfe09859840c664a8c7ecc6 cf70ca83d1282f04d06540353d64b1a71b7f0692d4e6a522c74f929d92aa3377
{
  "result": "success",
  "status": "loss"
}
```


[23-Aug-18 05:41 AM] SHossain#0007
ah, i see. you need the diceplan name


[23-Aug-18 05:41 AM] SHossain#0007
in your command


[23-Aug-18 05:42 AM] SHossain#0007
`DiceX` is missing


[23-Aug-18 05:43 AM] SHossain#0007
@CrisF ^^


[23-Aug-18 05:43 AM] CrisF#3405
Ahhh! TY


[23-Aug-18 05:47 AM] SHossain#0007
did it work for you now?


[23-Aug-18 05:47 AM] CrisF#3405
Yes, it's good!


[23-Aug-18 05:48 AM] CrisF#3405
How do I create `entropy`?


[23-Aug-18 05:49 AM] SHossain#0007
cool. try more. i'll add entropy.


[23-Aug-18 05:49 AM] SHossain#0007
dealer has to do that


[23-Aug-18 05:50 AM] CrisF#3405
OK.


[23-Aug-18 05:53 AM] SHossain#0007
i can see the lost bets üòÉ


[23-Aug-18 05:54 AM] SHossain#0007
adding more entropy tx as well


[23-Aug-18 05:54 AM] CrisF#3405
Haha


[23-Aug-18 05:55 AM] CrisF#3405
```numentropy tx 22: 1132673.59217016```


[23-Aug-18 05:56 AM] SHossain#0007
now 27 or 29


[23-Aug-18 05:56 AM] Mark81#4505
Eth has rock and scissors betting  smartcontract. How easily could that be done in cc?


[23-Aug-18 05:56 AM] SHossain#0007
i see token trading happening as well


[23-Aug-18 05:56 AM] siu#3920
thats me


[23-Aug-18 05:57 AM] SHossain#0007
@Mark81 this is our dice contract https://github.com/jl777/komodo/blob/jl777/src/cc/dice.cpp

{Embed}
https://github.com/jl777/komodo/blob/jl777/src/cc/dice.cpp
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[23-Aug-18 05:57 AM] SHossain#0007
only 1177 lines of code


[23-Aug-18 05:58 AM] SHossain#0007
with this CC stuff, developers can code a lot of different types of contract


[23-Aug-18 05:59 AM] SHossain#0007
the 4 contracts we have, didn't take long time for jl777 to code them.


[23-Aug-18 06:07 AM] siu#3920
there are like 6 more in the works


[23-Aug-18 06:07 AM] SHossain#0007
yes.


[23-Aug-18 06:07 AM] siu#3920
including payment channels, lotto, multigateway... etc.


[23-Aug-18 06:07 AM] SHossain#0007
FSM


[23-Aug-18 06:08 AM] siu#3920
Also this is the first time smart contracts have been applied to a UTXO based blockchain.


[23-Aug-18 06:09 AM] SHossain#0007
First on-chain dice game


[23-Aug-18 06:10 AM] siu#3920
for utxo, i believe so, yes.


[23-Aug-18 06:13 AM] Mark81#4505
Fsm?


[23-Aug-18 06:14 AM] Deleted User#0000
FSM is Finite State Machine


[23-Aug-18 06:14 AM] CrisF#3405
@Deleted User  If I try and run your script, how ccould I stop it?


[23-Aug-18 06:14 AM] Deleted User#0000
you dont stop it.


[23-Aug-18 06:14 AM] Deleted User#0000
you will need to change STAKED2 to the name of the chain your using and the FUNDTXID to the correct one


[23-Aug-18 06:15 AM] Deleted User#0000
then just run it... it uses odds of 1, and the size of bet is $1


[23-Aug-18 06:15 AM] CrisF#3405
Yeahm I changed a few things.


[23-Aug-18 06:15 AM] Deleted User#0000
so if you saved it as dice


[23-Aug-18 06:15 AM] Deleted User#0000
`./dice 1` is bet 1 at 50/50 odds


[23-Aug-18 06:15 AM] Deleted User#0000
it will just go until it gets a result


[23-Aug-18 06:15 AM] CrisF#3405
Just modified it, not yet saved.


[23-Aug-18 06:15 AM] Deleted User#0000
yep, save it and `chmod +x <filename>`


[23-Aug-18 06:15 AM] Deleted User#0000
so you can run it


[23-Aug-18 06:16 AM] Deleted User#0000
I have done over 2000 dice bets on STAKED2 with that script nearly.


[23-Aug-18 06:16 AM] CrisF#3405
Oh, so it only plays one game_


[23-Aug-18 06:16 AM] Deleted User#0000
it works fun until the TX get backed up in the mempool..


[23-Aug-18 06:16 AM] Deleted User#0000
they dont seem to mine out as fast as normal TX's


[23-Aug-18 06:16 AM] Deleted User#0000
yes


[23-Aug-18 06:16 AM] Deleted User#0000
I have anohter script that will start heaps of them, but that cna get dangerous unles you know what your doing.


[23-Aug-18 06:16 AM] Deleted User#0000
play with 1 first lol


[23-Aug-18 06:17 AM] CrisF#3405
Ok, thanks!


[23-Aug-18 06:17 AM] Deleted User#0000
no worries, hope it works for you.


[23-Aug-18 06:17 AM] Deleted User#0000
as long as the fiunding txid is right and the AC name is right it *shuld* work


[23-Aug-18 06:17 AM] CrisF#3405
I*ll try it now.


[23-Aug-18 06:38 AM] CrisF#3405
@Deleted User It worked!!


[23-Aug-18 06:38 AM] Deleted User#0000
nice üòÑ


[23-Aug-18 06:38 AM] CrisF#3405
```Wager: 777
Odds: 37
Sent e1e2610870beb060fc2ddda104da235cdfc1dd1da493b906997f3cd609dd54c7
YOU WON```


[23-Aug-18 06:38 AM] Deleted User#0000
sweet glad it works for you. Its much easier


[23-Aug-18 06:38 AM] Deleted User#0000
quite a fun game actualy


[23-Aug-18 06:39 AM] CrisF#3405
And figured out (basically) how to run a script!  Thanks a lot!


[23-Aug-18 06:40 AM] Deleted User#0000
great gald to help man üòÑ


[23-Aug-18 06:41 AM] CrisF#3405
Really happy.  Using scripts is my goal for this week in STAKED2. üòÉ

{Reactions}
üëç 

[23-Aug-18 06:47 AM] Deleted User#0000
its worth it. they make things so mcuh faster


[23-Aug-18 06:47 AM] SHossain#0007
```
e1e2610870beb060fc2ddda104da235cdfc1dd1da493b906997f3cd609dd54c7 winnings 29526.00000000 bet 777.00000000 at odds 37:1
```

{Reactions}
üòÉ 

[23-Aug-18 06:48 AM] SHossain#0007
you took a lot of profits üòÉ


[23-Aug-18 06:48 AM] CrisF#3405
Haha, up a little.


[23-Aug-18 06:48 AM] SHossain#0007
i have 2.3 Million more coins left in there...


[23-Aug-18 06:49 AM] SHossain#0007
take all if you can üòÉ


[23-Aug-18 06:49 AM] CrisF#3405
Well, now I have Blackjok3r's new script you might have to add some more...


[23-Aug-18 06:49 AM] CrisF#3405
üòâ


[23-Aug-18 06:50 AM] SHossain#0007
no worries. i have 120 Million more that i can add if needed üòõ


[23-Aug-18 06:50 AM] SHossain#0007
the seednode has been mining most of the blocks


[23-Aug-18 06:51 AM] CrisF#3405
Haha, rigged in favor of the house ü§ë


[23-Aug-18 06:53 AM] CrisF#3405
Heading out now.  I'll try out the script tomorrow.

{Reactions}
üëçüèΩ (2) 

[23-Aug-18 06:53 AM] SHossain#0007
i have just added few more millions for you


[23-Aug-18 06:54 AM] CrisF#3405
That must be from mining with your future computer!


[23-Aug-18 06:56 AM] SHossain#0007
actually, just a 4 core VPS setup is the seednode and mining. in the beginning i used future computer to mine some blocks to get some blocks for testing


[23-Aug-18 06:56 AM] SHossain#0007
about 15 million in the local node üòõ


[23-Aug-18 06:59 AM] CrisF#3405
Nice!


[23-Aug-18 07:23 AM] SHossain#0007
`ea82dcfa567bdc679779f75bbdfb87cbdd18705551597bc979de95c8db3ebd4b winnings 80000.00000000 bet 10000.00000000 at odds 7:1`


[23-Aug-18 07:39 AM] SHossain#0007
if anyone puts odds over the max limit, stdout will warn you
`Dice plan DiceX illegal bet 10000.00000000: minbet 5.00000000 maxbet 10000.00000000 or odds 70 vs max.50`


[23-Aug-18 08:05 AM] SHossain#0007
same will happen if anyone try over the max bet
`Dice plan DiceX illegal bet 50000.00000000: minbet 5.00000000 maxbet 10000.00000000 or odds 50 vs max.50`

{Reactions}
üëç 

[23-Aug-18 08:05 AM] Deleted User#0000
it would be nice to get an error msg in console for these, but I noticed this yesterday testing, that hte error is there, just "hidden" lol


[23-Aug-18 08:06 AM] Deleted User#0000
the onyl one I found that had no error was when there was no entropy TX left, it created a malformed TX, but james fixed that already


[23-Aug-18 08:06 AM] Deleted User#0000
wasnt able to test  yet though... maybe you can


[23-Aug-18 08:06 AM] SHossain#0007
those are from stdout
the command replies
```
        "result": "error",
        "error": "couldnt create dice bet transaction. make sure your address has funds"
```

{Reactions}
üíØ (2) 

[23-Aug-18 08:06 AM] Deleted User#0000
cool seems jl777 is bettre than dev üòÑ


[23-Aug-18 08:07 AM] SHossain#0007
yes. dev is slightly old for the last few days

{Reactions}
üëç 

[23-Aug-18 08:09 AM] Deleted User#0000
I am still trying to drain Alrights DICE fund on STAKED2 to test if when the entropy runs out if the fix works :abusedsmily:

{Reactions}
üëçüèΩ 

[23-Aug-18 09:18 AM] TonyL#3577
Added some more token CC auto tests: https://github.com/tonymorony/komodo/commit/f3b2377d34bb03bae58a558c5beff4bb3b9e37dc
Going to cover more dice features and will make pull request then.

{Embed}
https://github.com/tonymorony/komodo/commit/f3b2377d34bb03bae58a558c5beff4bb3b9e37dc
more TokenCC tests ¬∑ tonymorony/komodo@f3b2377
https://images-ext-1.discordapp.net/external/_FZ-6atALXBjBvMLVC1JBeWG05jXc2w_TXrppH7V6kE/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/24797699


[23-Aug-18 09:21 AM] TonyL#3577
Invalid tokentransfer not return status
```tokentransfer d853d6147b7fa64603d44ebab7227bee8bd59db3117870f6cdd65bb12c552b08 021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96 -1
{
  "error": "invalid parameter"
}
```


[23-Aug-18 09:28 AM] SHossain#0007
Testers, please update to latest jl777 branch. There was an update recently.


[23-Aug-18 09:30 AM] SHossain#0007
dice now requires minimum 100 coins to be created with.
```
        "result": "error",
        "error": "dice plan needs at least 100 coins"
```


[23-Aug-18 09:31 AM] SHossain#0007
This should discourage someone to create spam dice plans.


[23-Aug-18 09:40 AM] siu#3920
is it a forking change?


[23-Aug-18 09:42 AM] TonyL#3577
I think similar rule should be for tokens creation


[23-Aug-18 09:42 AM] TonyL#3577
Possible to spam as well


[23-Aug-18 09:42 AM] siu#3920
and rewards plans


[23-Aug-18 09:55 AM] TonyL#3577
I think might be very useful to add  some `owner=pubkey` parameter to `info` call of each CC or ability to list CCs owned by user.
Maybe I'm missing something, but now I'm able to find which CCs I've created only by calls history. (dices, orders, tokens and etc.).
Like a CC which manages and standardise CC protocol.


[23-Aug-18 10:18 AM] Alright#0419
@siu rewards plans require 1 coin minimum


[23-Aug-18 10:18 AM] siu#3920
ok


[23-Aug-18 10:41 AM] Alright#0419
@TonyL What can you spam with assets?


[23-Aug-18 10:41 AM] Alright#0419
You can sort the orderbook by token, so I don't think it's a problem


[23-Aug-18 10:41 AM] Alright#0419
and creating single sat tokens could be used for some pretty cool things


[23-Aug-18 10:53 AM] TonyL#3577
@Alright I can create tons of new tokens for example


[23-Aug-18 10:54 AM] Alright#0419
Right, forgot their was `tokenlist`


[23-Aug-18 10:54 AM] Alright#0419
although I feel `dicelist` and `rewardslist` is more important than `tokenlist` in that you wouldn't just be browsing through `tokenlist`


[23-Aug-18 10:55 AM] TonyL#3577
I have to find my token in millions of. It's possible to create tokens with same name so only txid will be different.


[23-Aug-18 10:55 AM] TonyL#3577
I spammed some to BRK for demonstration :trollface: üòÉ


[23-Aug-18 10:56 AM] Alright#0419
Had a conversation about this last night actually. Just thinking of the future. Can you imagine a single satoshi that is the "deed" to your house?


[23-Aug-18 10:56 AM] Alright#0419
want to put your house on the market? `tokenask` üòõ


[23-Aug-18 10:57 AM] Alright#0419
only problem is there needs to be some authority to enforce that whoever owns that satoshi owns the house


[23-Aug-18 10:57 AM] TonyL#3577
Tokenisation is future thing yeah. And there is a lot of projects at the moment who doing tokenisation of real stocks for example. I'm even helped with WP to one of such


[23-Aug-18 10:58 AM] SHossain#0007
@siu it is not hardforking change.


[23-Aug-18 10:58 AM] siu#3920
ok, cool


[23-Aug-18 10:59 AM] siu#3920
already updated without issues

{Reactions}
üëåüèΩ 

[23-Aug-18 11:07 AM] TonyL#3577
@Alright Yeah, it's a very deep matter. Identity and real-world connection / proofing questions aren't resolved yet, so only real usage for now are crowdsales üòÇ  But it's mostly because of tons limitations in Ethereum smarts as I think. UTXO CC's have to pump this party. üòÉ

{Reactions}
ü§ûüèΩ (2) 

[23-Aug-18 11:10 AM] SHossain#0007
i tried the maxbet and maxodd together for 30 bets. all lost üò¶

{Reactions}
üò• üôÑ 

[23-Aug-18 11:13 AM] SHossain#0007
10000:50


[23-Aug-18 11:47 AM] TonyL#3577
@SHossain Dispersion is very high with such odds. It's normal to lose even 100 a row)


[23-Aug-18 11:47 AM] SHossain#0007
yes. seems like that


[23-Aug-18 01:33 PM] TonyL#3577
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing
Described some basic tested cases for Token CC in this list and reflected it's coverage in auto-tests
Tomorrow I'm going to fill the gaps in autotests and think on more exotic cases.

If anyone from community or team want to contribute - feel free to drop your test cases ideas in comments to doc, I'll check all of them and add to list the result.

{Embed}
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing
Token CC testing Test Plan
–õ–∏—Å—Ç1

 Case, Call, Expected result, Passed, Is autotests covered, Stage
 Check token addresses for wallet without pubkey declaration, tokenaddress," result":" success", all addresses start from" R", Initialization
 Check token addresses for a specific pubkey, tokenaddres...
https://images-ext-1.discordapp.net/external/82hQbeigfuGNKqJrcGqcuqy1txzvSr9KYRh85xxywao/https/lh4.googleusercontent.com/9yeKWoEVtVvujIgExr4kwbRrCe3JBbDGkoWm0bJ8RVRKjuX0Wd3LIWIq-QK1nEmqiu1vNg%3Dw1200-h630-p

{Reactions}
üíØ (2) üëçüèΩ 

[23-Aug-18 02:08 PM] dukeleto#7326
@TonyL what does autotests mean? your tests repo or the python tests I have written?


[23-Aug-18 02:08 PM] TonyL#3577
@dukeleto extacly your python tests)
https://github.com/tonymorony/komodo/commit/f3b2377d34bb03bae58a558c5beff4bb3b9e37dc I've started to add some on top

{Embed}
https://github.com/tonymorony/komodo/commit/f3b2377d34bb03bae58a558c5beff4bb3b9e37dc
more TokenCC tests ¬∑ tonymorony/komodo@f3b2377
https://images-ext-1.discordapp.net/external/_FZ-6atALXBjBvMLVC1JBeWG05jXc2w_TXrppH7V6kE/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/24797699


[23-Aug-18 02:10 PM] TonyL#3577
I've realised that I started to build bicycles on this point when we're lack of time  üòÉ


[23-Aug-18 02:17 PM] dukeleto#7326
very nice


[23-Aug-18 02:17 PM] dukeleto#7326
wow!


[23-Aug-18 02:18 PM] dukeleto#7326
@TonyL submit a PR for that, looks very nice. We don't want to create merge conflicts for each other üòÉ


[23-Aug-18 02:18 PM] dukeleto#7326
i just spent a long time trying to stop and restart our daemon in Python tests, to get faucet tests working .... and it just don't work


[23-Aug-18 02:19 PM] dukeleto#7326
`wait_bitcoinds()` is supposed to wait for all your processes to exit cleanly, but it doesn't work


[23-Aug-18 02:19 PM] dukeleto#7326
you made lots of good changes, using my custom assert that I realized we needed üòÉ


[23-Aug-18 02:20 PM] TonyL#3577
@dukeleto Thanks for a feedback! Oh yeah, I've noticed you added very useful method but forgot to implement it üòÉ


[23-Aug-18 02:20 PM] dukeleto#7326
no, it's just that I wrote the method later on, I used it in a few places üòÉ


[23-Aug-18 02:21 PM] TonyL#3577
To where have I PR?


[23-Aug-18 02:21 PM] dukeleto#7326
i have a tiny PR to make the faucet tests pass


[23-Aug-18 02:21 PM] TonyL#3577
@dukeleto please note that I've temporary commented faucet  tests execution in my commit


[23-Aug-18 02:21 PM] dukeleto#7326
make a github PR to the jl777 branch of https://github.com/jl777/komodo

{Embed}
https://github.com/jl777/komodo
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[23-Aug-18 02:22 PM] dukeleto#7326
@TonyL yes, commenting them out in your PR is fine


[23-Aug-18 02:22 PM] dukeleto#7326
very cool to see others working on the Python tests!


[23-Aug-18 02:23 PM] dukeleto#7326
faucet stuff is really annoying to test right now, so i will probably focus on other stuff


[23-Aug-18 02:24 PM] TonyL#3577
There is a very wide space in dice betting to cover


[23-Aug-18 02:24 PM] dukeleto#7326
i would like to turn some of your manual tests into Python tests, maybe we can work on that together


[23-Aug-18 02:24 PM] dukeleto#7326
we need dice tests, there are almost none. I got stuck on faucet stuff a bit


[23-Aug-18 02:24 PM] TonyL#3577
Dicebet was a CC with most of the issues during the manual testing


[23-Aug-18 02:25 PM] dukeleto#7326
and i had to fight lots of test infrastructure bugs in making this a kmd test suite, versus the zcash one we inherited


[23-Aug-18 02:25 PM] TonyL#3577
Yeah, very cool will be work together on it. I'm definitely looking to get some experience in python test writing


[23-Aug-18 02:25 PM] dukeleto#7326
i was thinking, should we have cryptoconditions_dice.py, _faucet.py, etc...


[23-Aug-18 02:26 PM] dukeleto#7326
so you can run just the tests for that CC? I can see running 100 dice tests to check randomness/etc, and our 1 file will get very very slow


[23-Aug-18 02:26 PM] TonyL#3577
I though about such dividing for each CC as well. It will be easier to collaborate in such case


[23-Aug-18 02:26 PM] dukeleto#7326
also reduces potential of merge conflicts if people are working on different CC tests


[23-Aug-18 02:27 PM] TonyL#3577
This dice test was very specific. Goal was only check RNG


[23-Aug-18 02:27 PM] dukeleto#7326
@TonyL your PR is much larger than the edits I have, so best for you to get a PR in, and I will integrate my faucet changes that make the tests pass


[23-Aug-18 02:28 PM] dukeleto#7326
i think it's very valuable to run some basic RNG tests, to make sure our dice contract doesn't have crazy improbable behavior


[23-Aug-18 02:28 PM] dukeleto#7326
also, just going thru the motions of the most common operations+contracts will find 80% of bugs


[23-Aug-18 02:28 PM] Alright#0419
Can someone help me understand `dicebet` a bit better please? When I do `dicebet` on a plan with a 1 block timeout, will a transaction always immediately follow it that spends it's outputs?


[23-Aug-18 02:29 PM] dukeleto#7326
sounds like a James question


[23-Aug-18 02:29 PM] Alright#0419
heh


[23-Aug-18 02:30 PM] Alright#0419
just trying to wrap my head around it now


[23-Aug-18 02:30 PM] TonyL#3577
@dukeleto https://github.com/jl777/komodo/pull/821

{Embed}
https://github.com/jl777/komodo/pull/821
Added more tests for tokens CC by tonymorony ¬∑ Pull Request #821 ...
Added more tests for token CC.
Temporarily commented faucet tests.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[23-Aug-18 02:30 PM] Alright#0419
just did this dicebet fd7a0fb8e61dbf25f29af2c455a53bcd6a0e0a1c15af5d40e31bd5aaa327d649

and in the same block, a tx appeared that spent it's outputs


[23-Aug-18 02:30 PM] Alright#0419
and I'm trying to understand where that tx came from


[23-Aug-18 02:30 PM] Alright#0419
creator node sent it?


[23-Aug-18 02:30 PM] dukeleto#7326
@TonyL small issue


[23-Aug-18 02:30 PM] TonyL#3577
Oh yes


[23-Aug-18 02:30 PM] dukeleto#7326
you must have branched from dev or master


[23-Aug-18 02:31 PM] dukeleto#7326
when you submit to jl777, it messes stuff up


[23-Aug-18 02:31 PM] dukeleto#7326
best would be to branch from jl777 branch, cherry pick your commit or patch or whatever onto that


[23-Aug-18 02:32 PM] dukeleto#7326
then resubmit PR to the same jl777 branch you did


[23-Aug-18 02:32 PM] dukeleto#7326
you might be able to just send it to the dev branch, but I am not sure. James is doing a lot of work for the hardfork coming up and he might not be merging branches as often


[23-Aug-18 02:33 PM] dukeleto#7326
my `cctests` branch is a branch off of `jl777`


[23-Aug-18 02:33 PM] dukeleto#7326
and I submit PR's to jl777 branch


[23-Aug-18 02:33 PM] dukeleto#7326
then when James feels it's right, he merges jl777 branch to dev. The dev gets merged to master occasionally. so code flows from jl777 -> dev -> master


[23-Aug-18 02:34 PM] dukeleto#7326
there is a beta branch in there too üòÉ


[23-Aug-18 02:34 PM] Alright#0419
between master and dev


[23-Aug-18 02:34 PM] xRobeSx#5136
we used to use beta as more stable as dev üòÉ not much recently


[23-Aug-18 02:34 PM] dukeleto#7326
jl777 -> dev -> beta -> master


[23-Aug-18 02:34 PM] Alright#0419
jl777 -> dev -> beta -> master


[23-Aug-18 02:34 PM] dukeleto#7326
üòâ


[23-Aug-18 02:35 PM] dukeleto#7326
When I was just a boy, I used master. Then when I became a notary I started using dev. Now I live on jl777 branch

{Reactions}
abusedsmily 

[23-Aug-18 02:36 PM] dukeleto#7326
@TonyL if you create a new branch from jl777 branch, then cherry-pick the commit id(s) from your code, that is one way to do it


[23-Aug-18 02:36 PM] dukeleto#7326
if you had a lot of commits, then sometimes just a diff/patch is easier


[23-Aug-18 02:37 PM] TonyL#3577
Ok give me few minutes to understand the flow :))


[23-Aug-18 02:37 PM] dukeleto#7326
i don't expect merge conflicts, but you will see that your PR on github has a bajillion unrelated commits in it


[23-Aug-18 02:37 PM] dukeleto#7326
because of cross-branch merging confusion


[23-Aug-18 02:37 PM] dukeleto#7326
I am here if you have questions, git broke my brain a long time ago and it just seems to make sense to me

{Reactions}
üôå 

[23-Aug-18 02:39 PM] Alright#0419
Ah i think i understand what is happening


[23-Aug-18 02:39 PM] Alright#0419
does `dicestatus` trigger sending a tx after timeout?


[23-Aug-18 02:40 PM] dukeleto#7326
hmmm


[23-Aug-18 02:41 PM] dukeleto#7326
oh gosh it's a lot of code


[23-Aug-18 02:41 PM] dukeleto#7326
but also, yes, it seems to sendraw xtns sometimes


[23-Aug-18 02:43 PM] dukeleto#7326
@Alright it sends xtns in various circumstances


[23-Aug-18 02:45 PM] siu#3920
yes


[23-Aug-18 02:45 PM] dukeleto#7326
@Alright i can't tell if it's based on timeouts tho. Not directly


[23-Aug-18 02:45 PM] dukeleto#7326
but it could in some nested function


[23-Aug-18 02:45 PM] siu#3920
if executed without pubkey


[23-Aug-18 02:45 PM] siu#3920
just tokenid


[23-Aug-18 02:45 PM] siu#3920
sorry, dice plan id


[23-Aug-18 02:45 PM] dukeleto#7326
it can call dicebetfinish internally, and diceaddfunding


[23-Aug-18 02:46 PM] dukeleto#7326
and it creates + sends raw xtns in 2 or 3 different circumstances. timeoutblocks doesn't seem to be used tho


[23-Aug-18 02:46 PM] TonyL#3577
@dukeleto https://github.com/jl777/komodo/pull/822 looks more legit now

{Embed}
https://github.com/jl777/komodo/pull/822
more TokenCC tests by tonymorony ¬∑ Pull Request #822 ¬∑ jl777/komodo
(cherry picked from commit f3b2377)
Added more Token CC tests.
Temporarily disabled faucet tests.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[23-Aug-18 02:48 PM] dukeleto#7326
awesome, James is pretty quick to merge stuff


[23-Aug-18 02:48 PM] dukeleto#7326
@TonyL nice work, glad to see `send_and_mine` come in handy too üòÉ


[23-Aug-18 02:49 PM] dukeleto#7326
a bare minimum goal is to have every CC RPC function tested at least once, not sure where we are with that


[23-Aug-18 02:49 PM] TonyL#3577
I've realised that in some illegal cases hex generating but error receiving on transaction broadcast stage. So `send_and_mine` is a must have tool ))


[23-Aug-18 02:50 PM] dukeleto#7326
üëç


[23-Aug-18 02:50 PM] dukeleto#7326
i have a way to test those exceptions, too


[23-Aug-18 02:50 PM] dukeleto#7326
```+        # try to broadcast the xtn, but we will get 'faucet is only for brand new addresses'
+        assert_raises(JSONRPCException, rpc.sendrawtransaction, [ result['hex'] ])
+
+        newaddr = rpc.getnewaddress()
+        assert newaddr, "got a new address"
+        result  = rpc.validateaddress(newaddr)
+        newpubkey = result['pubkey']
+        assert newpubkey, "got a pubkey for new address"```


[23-Aug-18 02:50 PM] dukeleto#7326
will submit that once your PR is merged


[23-Aug-18 02:51 PM] dukeleto#7326
we could use some custom asserts that better test for valid hex and valid addresses, stuff like that


[23-Aug-18 02:53 PM] TonyL#3577
@dukeleto 
```
Mining blocks...
unexpected fname.(/tmp/testLjGpmJ/node0) vs REGTEST [REGTEST] n.7 len.21 (J/node0)
unexpected fname.(/tmp/testLjGpmJ/node0) vs REGTEST [REGTEST] n.7 len.21 (J/node0)
unexpected fname.(/tmp/testLjGpmJ/node0) vs REGTEST [REGTEST] n.7 len.21 (J/node0)
...
```
Have I fix it?


[23-Aug-18 02:53 PM] dukeleto#7326
i don't have a good fix for that warning


[23-Aug-18 02:53 PM] dukeleto#7326
it's just a warning


[23-Aug-18 02:53 PM] dukeleto#7326
and it prints once per block


[23-Aug-18 02:53 PM] TonyL#3577
Yeah I got it. Just looks scary if someone will use it)


[23-Aug-18 02:53 PM] dukeleto#7326
at least i fixed the 5000 lines of warnings about hashes mismatching üòÉ

{Reactions}
üòÇ 

[23-Aug-18 02:54 PM] dukeleto#7326
i think the test suite uses combinations of CLI arguments that nobody has ever used


[23-Aug-18 02:55 PM] dukeleto#7326
and it confuses some parts of the code. Stuff seems to work, so i just ignore that warning. that code doesn't understand that sometimes the filename is an absolute filename ( starting with / ) from the CLI, not a relative filename. Something like that


[23-Aug-18 02:56 PM] dukeleto#7326
if you have a nice fix, go for it. For the other warning, i just turned it off in regtest mode, maybe the same should be done

{Reactions}
üëå 

[23-Aug-18 02:57 PM] dukeleto#7326
if you want, wrap the code that makes that printout in `if ( Params().NetworkIDString() != "regtest" )`, and submit a PR üòÉ


[23-Aug-18 02:58 PM] TonyL#3577
Great, I have a python tests mentor now üòÉ

{Reactions}
üòÉ 

[23-Aug-18 03:01 PM] siu#3920
any command line program to get these contracts running more smoothly?


[23-Aug-18 03:01 PM] siu#3920
at least auto propagation of rawtx?


[23-Aug-18 03:03 PM] TonyL#3577
@siu As one of solutions to simplify live a lil bit: you can make an aliases like a 
```alias raw="komodo-cli -ac_name=BRK sendrawtransaction"```

{Reactions}
üôè 

[23-Aug-18 03:04 PM] siu#3920
im not much of a coder... üò¶ sorry


[23-Aug-18 03:05 PM] siu#3920
i guess that is a python function, right?


[23-Aug-18 03:05 PM] TonyL#3577
It's a Linux alias - you assign some execution to some text call


[23-Aug-18 03:05 PM] TonyL#3577
So when you next time will call `raw` will be executed `komodo-cli -ac_name=BRK sendrawtransaction`


[23-Aug-18 03:06 PM] siu#3920
ohh


[23-Aug-18 03:06 PM] siu#3920
wow, that is nice... will try it

{Reactions}
üëç 

[23-Aug-18 03:07 PM] TonyL#3577
http://www.linfo.org/alias.html

{Reactions}
üòÄ 

[23-Aug-18 03:08 PM] siu#3920
```siu@T460:~/komodo/src$ alias raw="komodo-cli -ac_name=BRK sendrawtransaction"
siu@T460:~/komodo/src$ raw 010000000230db7f33c2f3e0e8e928c7a53d9d090b15f5c68f3b32aad869dfece885633453000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e81409a09ef6a2d713ef6662e1771b02c787644368c3e6f61200ea2048ceade9b4eee6db31b572d2f6f0fad2be268a48def712df5b0ef0586cf81eb148e86dcbbbc8ca100af038001e6a10001ffffffffaec5d23ef3aff615b8cca50d6484bfd08d001df6f99649637ef1c180fc5f6de102000000494830450221009541fcac1d703953b41f2ef78cbbb37ad752093802d04bd470d94a7d91a938700220718edbc8c87b0cc7be26c101fab92e5391d6be2ade928cfb9130eaab1d7aad3901ffffffff05f0ca052a01000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1227000000000000232103584dcd150c1b314f4ff7173ac39186cc1753f8dc948541c7abae084792d0ffedacde45357700000000232103584dcd150c1b314f4ff7173ac39186cc1753f8dc948541c7abae084792d0ffedac00000000000000006d6a4c6ae64246414b450000000027e8318775511d7aa20583015638b29019a4ad5d6ccb1c2a1c3a7e3ca69b5f40dbfa486725d80df24fe748ca2af8f4a966eb4b3bb2cab80f2ee9cd7c08ed7592000000000000000000000000000000000000000000000000000000000000000000000000
2c9d10f0e6490ac977fb93894c6f6a3eb7947833d64a4ca22b8c8271384e5d08
```

{Reactions}
üî• 

[23-Aug-18 03:08 PM] siu#3920
cool!


[23-Aug-18 03:11 PM] siu#3920
are you using insomnia?


[23-Aug-18 03:11 PM] siu#3920
it does make it a lot easier too


[23-Aug-18 03:12 PM] siu#3920
but it would be awesome to just execute `dicebet` and then get the win/lose result.


[23-Aug-18 03:12 PM] Alright#0419
ü§î never actually used aliases, do you have to set them for each shell session?


[23-Aug-18 03:12 PM] Alright#0419
I typically make one line scripts to do the same


[23-Aug-18 03:13 PM] Alright#0419
```
#!/bin/bash
./komodo-cli -ac_name=BRK sendrawtransaction $1
```


[23-Aug-18 03:13 PM] siu#3920

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/482311423670747137/unknown.png


[23-Aug-18 03:13 PM] siu#3920
insomnia is great


[23-Aug-18 03:13 PM] TonyL#3577
@Alright you can declare it in ~/.bash_aliases

{Reactions}
üëç 

[23-Aug-18 03:13 PM] siu#3920

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/482311538846466050/unknown.png


[23-Aug-18 03:14 PM] Alright#0419
good to know


[23-Aug-18 03:14 PM] TonyL#3577
@siu I'm using POSTMAN usually for POST calls but this one looks cool as well


[23-Aug-18 03:15 PM] xRobeSx#5136
you can also do things like `TADDR=‚ÄùyourAddress‚Äù` and then `$TADDR` to use it


[23-Aug-18 03:15 PM] xRobeSx#5136
`./src/komodo-cli z_sendmany "$TADDR" "[{\"amount\": 1.0, \"address\": \"$ZADDR\"}]"`


[23-Aug-18 03:15 PM] TonyL#3577
It's an environment variable


[23-Aug-18 03:16 PM] TonyL#3577
Important stuff )


[23-Aug-18 03:16 PM] xRobeSx#5136
that's what that's called @TonyL ?


[23-Aug-18 03:16 PM] xRobeSx#5136
environment variable üòÉ thanks learned something new ha

{Reactions}
üëç 

[23-Aug-18 03:20 PM] TonyL#3577
Is it something like you looking for?)) @siu

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/482313236897726484/unknown.png


[23-Aug-18 03:35 PM] dukeleto#7326
I have been keeping track of bash alias in git for a few years now, if you want to see some crazy/old/weird aliases: https://github.com/leto/Util/blob/master/config/.bash/aliases.bash

{Embed}
https://github.com/leto/Util/blob/master/config/.bash/aliases.bash
leto/Util
Util - Duke Leto's utilities
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298

{Reactions}
üôÄ (2) 

[23-Aug-18 03:40 PM] TonyL#3577
Nice collection @dukeleto


[23-Aug-18 07:18 PM] Mylo#8306
damn...why'd i never bother with something like this!!  alias mentor!


[23-Aug-18 07:22 PM] Deleted User#0000
using a fair few alias's here aswell, one letter commands are great üòâ


[23-Aug-18 08:57 PM] dukeleto#7326
`alias g=git` changed my life


[23-Aug-18 10:08 PM] dukeleto#7326
@jl777c right now, only the first 8 chars of a plan name are used, the rest is ignored. So if a user/developer writes code for SOMEPLAN, SOMEPLAN1 and SOMEPLAN2,  all that code silently uses SOMEPLAN, which I imagine would be surprising and hard-to-debug to a newcomer. How do you feel about me adding error checking code, and returning an error immediately if plan names exceed 8 chars?


[24-Aug-18 02:47 AM] jl777c#5810
yes, good idea to limit plan len to 8

{Reactions}
üëçüèΩ 

[24-Aug-18 02:48 AM] jl777c#5810
the txid is also used so the plan name is sort of a redundant shorthand but best to prevent this confusion


[24-Aug-18 02:55 AM] siu#3920
@TonyL that looks like what i would like to have


[24-Aug-18 02:58 AM] jl777c#5810
@Alright the behavior of the dice rpc calls are a bit different depending on if it is from the dealer or player


[24-Aug-18 02:59 AM] jl777c#5810
if you understand the entropy sources, it will make more sense. the dicebet includes the actual entropy value, so all know what it is. the diceentropy tx only the dealer knows. So only the dealer can do an instant dicefinish that completes the dicebet with win/loss


[24-Aug-18 02:59 AM] jl777c#5810
non-dealers can do a timeout claim, only after it is timed out


[24-Aug-18 02:59 AM] jl777c#5810
dicestatus without bettxid, invokes a special loop to dicefinish all that can be for the dealer


[24-Aug-18 03:13 AM] SHossain#0007 (pinned)
https://docs.komodoplatform.com/cc/activate-cc-independent-chain.html

{Reactions}
üëç (3) 

[24-Aug-18 03:13 AM] SHossain#0007
Pinned a message.


[24-Aug-18 08:36 AM] TonyL#3577
@dukeleto Hi! My PR (I made one more commit today with Token CC tests) was merged to dev. Waiting for yours faucet fix ^^
Did you start with bet CC? I want to proceed to this one and afraid of conflicts? I'm thinking also about adding second node to test moments when you trying to cancel other people node, for cases when one pubkey create SC and second pubkey place bets and etc. Could you please advice what is the best way to implement it?


[24-Aug-18 08:38 AM] jl777c#5810
why not have bettestsT and bettestsD or some naming like that to keep things separated?


[24-Aug-18 08:41 AM] TonyL#3577
Yeah, sounds like a very good idea @jl777c


[24-Aug-18 08:44 AM] jl777c#5810
until we get a Tom also writing CC tests, we will be collision free


[24-Aug-18 08:45 AM] TonyL#3577
He'll be a T1 üòÇ


[24-Aug-18 08:47 AM] dukeleto#7326
@TonyL don't wait on me, I was actually looking for the code in the `jl777` branch because that is what my `cctests` is branched from

{Reactions}
üëå 

[24-Aug-18 08:49 AM] dukeleto#7326
i am about to grab your changes into my branch


[24-Aug-18 08:49 AM] TonyL#3577
@dukeleto Just thinking how to make a process of this `cryptoconditions.py` separating onto the `bettestsT` `bettestsD` `faucettests` and etc smooth


[24-Aug-18 08:49 AM] dukeleto#7326
i have been submitting PR's to the jl777 branch


[24-Aug-18 08:52 AM] dukeleto#7326
@TonyL start a new file, cryptoconditions_dice.py, it's probably a good time


[24-Aug-18 08:53 AM] TonyL#3577
Ok I'll make `cryptoconditions_dice_T.py` to avoid the collisions as JL adviced


[24-Aug-18 08:53 AM] dukeleto#7326
i am not sure if that was a joke or not üòÉ

{Reactions}
üò≥ 

[24-Aug-18 08:54 AM] jl777c#5810
lets use dev branch, instead of jl777


[24-Aug-18 08:54 AM] dukeleto#7326
git is made to deal with this stuff, just that a bit of communication will help reduce unnecessary work


[24-Aug-18 08:54 AM] dukeleto#7326
@jl777c sure, i can submit to dev


[24-Aug-18 08:55 AM] jl777c#5810
now the 1 million Release Candidate is out, jl777 will become the rapidly changing repo and dev the semi-stable one, likely weekly


[24-Aug-18 08:55 AM] dukeleto#7326
makes sense


[24-Aug-18 09:24 AM] SHossain#0007
i'll update my nodes to dev branch now


[24-Aug-18 09:36 AM] dukeleto#7326
@jl777c https://github.com/jl777/komodo/pull/830

{Embed}
https://github.com/jl777/komodo/pull/830
cctests sync by leto ¬∑ Pull Request #830 ¬∑ jl777/komodo
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[24-Aug-18 09:36 AM] dukeleto#7326
for some reason that is also showing tony's changes when I send the PR to dev


[24-Aug-18 09:41 AM] dukeleto#7326
my changes were just adding some better error handling to dice and fixing a faucet test


[24-Aug-18 09:42 AM] dukeleto#7326
i see why


[24-Aug-18 09:43 AM] dukeleto#7326
#822 was merged into master


[24-Aug-18 09:45 AM] SHossain#0007
BRK chain fully synced with dev branch from block 0


[24-Aug-18 09:50 AM] TonyL#3577
@dukeleto I've left some marks in my tests like a `have to add status to CC code!`. Could you please fix in contracts code? Or I can do it by myself by your commits analogy but review is appreciated since I'm afraid to brake something.


[24-Aug-18 10:32 AM] siu#3920
changing to dev branch


[24-Aug-18 10:38 AM] dukeleto#7326
@TonyL you change the code and I can review


[24-Aug-18 10:39 AM] dukeleto#7326
TLDR: use the ERR_RESULT() macro to put an error message into a json result


[24-Aug-18 10:39 AM] dukeleto#7326
and if you are in the internals, assign to CCerror, like CCerror = "this messed up"; , to make the error get used in json error results


[24-Aug-18 10:39 AM] dukeleto#7326
you will see a common pattern in the code

{Reactions}
üëå 

[24-Aug-18 11:26 AM] TonyL#3577
@dukeleto few .sh are missing atm in `/qa/pull-tester/`
`qa/pull-tester/rpc-tests.sh: line 6: /root/unit_tests_build/komodo/qa/pull-tester/tests-config.sh: No such file or directory`

UPD: Oh they are building, false alarm sorry


[24-Aug-18 11:34 AM] siu#3920
dev branch is not building for me


[24-Aug-18 11:34 AM] siu#3920
```cc1plus: error: unrecognized command line option ‚Äò-Wno-builtin-declaration-mismatch‚Äô [-Werror]
cc1plus: all warnings being treated as errors
Makefile:2995: recipe for target 'cc/libbitcoin_server_a-dice.o' failed
make[2]: *** [cc/libbitcoin_server_a-dice.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f test-komodo/.deps/komodo_test-test_coinimport.Tpo test-komodo/.deps/komodo_test-test_coinimport.Po
make[2]: Leaving directory '/home/siu/komodo/src'
Makefile:4482: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/siu/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
siu@T460:~/komodo$ 
```


[24-Aug-18 11:36 AM] TonyL#3577
@siu let me check. I'm building right now from `dev`


[24-Aug-18 11:36 AM] siu#3920
did a make clean and still get the error:


[24-Aug-18 11:37 AM] siu#3920
```Makefile:2995: recipe for target 'cc/libbitcoin_server_a-dice.o' failed
make[2]: *** [cc/libbitcoin_server_a-dice.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f .deps/libbitcoin_server_a-timedata.Tpo .deps/libbitcoin_server_a-timedata.Po
make[2]: Leaving directory '/home/siu/komodo/src'
Makefile:4482: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/siu/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
siu@T460:~/komodo$ 
```


[24-Aug-18 11:42 AM] TonyL#3577
```c/dice.cpp: In function ‚ÄòUniValue DiceInfo(uint256)‚Äô:
cc/dice.cpp:821:9: error: ‚ÄòERR_RESULT‚Äô was not declared in this scope
         ERR_RESULT("error","cant find fundingtxid");
         ^~~~~~~~~~
Makefile:2995: recipe for target 'cc/libbitcoin_server_a-dice.o' failed
make[2]: *** [cc/libbitcoin_server_a-dice.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f cc/.deps/libbitcoin_server_a-rewards.Tpo cc/.deps/libbitcoin_server_a-rewards.Po
mv -f cc/.deps/libbitcoin_server_a-lotto.Tpo cc/.deps/libbitcoin_server_a-lotto.Po
mv -f cc/.deps/libbitcoin_server_a-fsm.Tpo cc/.deps/libbitcoin_server_a-fsm.Po
make[2]: Leaving directory '/root/unit_tests_build/komodo/src'
Makefile:4482: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/root/unit_tests_build/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
```


[24-Aug-18 11:42 AM] jl777c#5810
i guess the new test code cant compile?


[24-Aug-18 11:43 AM] jl777c#5810
@dukeleto how to define ERR_RESULT


[24-Aug-18 11:43 AM] jl777c#5810
if it is in CCinclude.h all the CC contracts will see it


[24-Aug-18 11:47 AM] TonyL#3577
https://github.com/jl777/komodo/blob/dev/src/cc/dice.cpp#L19 I guess it's defined here

{Embed}
https://github.com/jl777/komodo/blob/dev/src/cc/dice.cpp
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[24-Aug-18 11:50 AM] jl777c#5810
pushed fix


[24-Aug-18 11:50 AM] jl777c#5810
@dukeleto you are using 2 types of ERR_RESULT, please split to ERR_RESULT and ERR_RESULT2


[24-Aug-18 11:57 AM] TonyL#3577
`dev` builded now. I guess it's better to move ERR_RESULT to CCinclude.h since all CC's will use it. 
I can do it in my next PR @dukeleto


[24-Aug-18 11:58 AM] jl777c#5810
but there are 2 forms of it, apparently


[24-Aug-18 11:58 AM] jl777c#5810
one with one parameter, another with 2


[24-Aug-18 11:59 AM] jl777c#5810
that is why it didnt compile, so we need to standardize on which form to use, when and get them in CCinclude.h


[24-Aug-18 01:03 PM] Alright#0419
BRK deded please update to latest jl777 and use 
`./komodod -ac_cc=1 -ac_name=ADUF -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -addnode=195.201.20.230 -addnode=195.201.137.5 -pubkey=<PUBKEY>`


[24-Aug-18 01:07 PM] Alright#0419
Pinned a message.


[24-Aug-18 01:08 PM] Alright#0419
@CHMEX when you have a moment could you update the explorer


[24-Aug-18 01:11 PM] TonyL#3577
@Alright Is `ADUF` some abbreviation?


[24-Aug-18 01:12 PM] Alright#0419
that's me smacking my keyboard :trollface:

{Reactions}
üëå 

[24-Aug-18 01:12 PM] Alright#0419
since we gave up on the ATX standard üòÇ


[24-Aug-18 01:13 PM] dukeleto#7326
@jl777c there should only be one kind of ERR_RESULT, and best would be for it do be defined once in CCinclude.h


[24-Aug-18 01:14 PM] jl777c#5810
ok, but you seem to be using one type in rpcwallet and another in dice.cpp


[24-Aug-18 01:14 PM] dukeleto#7326
i lazily defined the same thing in 2 different files


[24-Aug-18 01:14 PM] dukeleto#7326
since i wasn't sure of the right place for it


[24-Aug-18 01:15 PM] dukeleto#7326
at least in my `cctests` branch


[24-Aug-18 01:15 PM] dukeleto#7326
```(myhush02)(~/git/komodo cctests $%= )$ ack 'define ERR_RESULT'
src/wallet/rpcwallet.cpp
41:#define ERR_RESULT(x) result.push_back(Pair("result", "error")) , result.push_back(Pair("error", x));

src/cc/dice.cpp
19:#define ERR_RESULT(x) result.push_back(Pair("result", "error")) , result.push_back(Pair("error", x));```


[24-Aug-18 01:15 PM] dukeleto#7326
@TonyL please move that definition to CCinclude.h, thanks üëç

{Reactions}
üëå 

[24-Aug-18 01:22 PM] TonyL#3577
@dukeleto Hmm, but JL said that declaration in CCinclude.h will work for all CC's. Will it work for wallet?


[24-Aug-18 01:23 PM] jl777c#5810
CCinclud.h has #include "../wallet/wallet.h"
so maybe put it in wallet.h

{Reactions}
üëçüèΩ 

[24-Aug-18 01:25 PM] Alright#0419
Anyone sync ADUF?


[24-Aug-18 01:37 PM] SHossain#0007
```
  "blocks": 125,
  "longestchain": 125,
  "timeoffset": 0,
  "tiptime": 1535143006,
  "connections": 2,
```


[24-Aug-18 02:33 PM] TonyL#3577
https://github.com/jl777/komodo/blob/dev/src/cc/assets.cpp#L275 @jl777c Can I temporary place here some text success message like a `sell offer validated` and left this comment?

{Embed}
https://github.com/jl777/komodo/blob/dev/src/cc/assets.cpp
jl777/komodo
komodo - Komodo
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[24-Aug-18 03:27 PM] jl777c#5810
in which branch?


[24-Aug-18 03:27 PM] jl777c#5810
the CC contracts are currently pretty chatty as it is, dont see much harm in making one more print


[24-Aug-18 03:40 PM] TonyL#3577
`dev` branch. Alright üëç


[24-Aug-18 10:49 PM] CHMEX#0686
@Alright explorer is now on ADUF


[25-Aug-18 08:42 AM] dukeleto#7326
doing my best to spread the message: https://twitter.com/dukeleto/status/1033378966793404417

{Embed}
Duke Leto (@dukeleto)
https://twitter.com/dukeleto/status/1033378966793404417
Cryptoconditions are UTXO-based smart contracts + draft IETF standard implemented by jl777 on $KMD. First blockchain to do so!
Read docs about it here:
https://t.co/2RIpwDU1MD and please join us in writing Python tests   https://t.co/4evGaLybeB
and more kinds of contracts
...
https://images-ext-1.discordapp.net/external/5E8NHz0bg-5fm_OoLDxuk1pKJ8HRQXHZ7QuOxUmF7AM/https/pbs.twimg.com/media/DldMFT0U0AIqi2K.jpg%3Alarge
Twitter

{Reactions}
üëçüèΩ (2) 

[25-Aug-18 01:58 PM] Alright#0419 (pinned)
ADUF deded 
`./komodod -ac_cc=1 -ac_name=AT7 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -addnode=195.201.20.230 -addnode=195.201.137.5`

{Reactions}
abusedsmily üç¥ 

[25-Aug-18 01:58 PM] Alright#0419
Pinned a message.


[25-Aug-18 02:09 PM] Alright#0419
@jl777c tried to unlock a `rewardsaddfunding` doesn't work üëç 
```
2018-08-25 21:08:13 ERROR: CScriptCheck(): 00f5236c30b3a085d7cedbe5e2cbb2f9eb5e91800ed2f3439ae4b71274922728:0 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-08-25 21:08:13 ERROR: AcceptToMemoryPool: BUG! PLEASE REPORT THIS! ConnectInputs failed against MANDATORY but not STANDARD flags 00f5236c30b3a085d7cedbe5e2cbb2f9eb5e91800ed2f3439ae4b71274922728
```
```
CC Eval EVAL_REWARDS Invalid: can only unlock locktxid spending tx 10b83ec6dd9c7e1b11dac6899dbccec8df94415fcba0d1efaf5b770b95bcc613
```


[25-Aug-18 02:09 PM] Alright#0419
will continue to test different situations


[25-Aug-18 02:10 PM] Alright#0419
Also, just realized you can do `rewardsaddfunding` with the wrong plan name for the txid


[25-Aug-18 02:10 PM] Alright#0419
not sure that would do anything negative, but I'll test some things based on that


[25-Aug-18 02:25 PM] jl777c#5810
at worse it would make it unspendable, so maybe a non-consensus error checking needs to be added


[25-Aug-18 02:33 PM] Alright#0419
no one touch my `fakefund` plan please


[25-Aug-18 02:33 PM] Alright#0419
I'll be back later today ‚úå


[25-Aug-18 02:40 PM] TonyL#3577
Confused a little: I've transferred 10 tokens choose same id as this token have:
```./komodo-cli -ac_name=AT7 tokentransfer 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 10```
When I'm requesting balance with one argument I see my issuance pubkey balance:
```
./komodo-cli -ac_name=AT7 tokenbalance 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2
{
  "result": "success",
  "CCaddress": "RNYNzPBDYPVHQcZHeVKeQhVLRZkneW4NEj",
  "tokenid": "35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2",
  "balance": 9999980
}
```
But when I initiate tokenbalance with any input as second argument I see balance of tokens on tokens contract pubkey:
```
./komodo-cli -ac_name=AT7 tokenbalance 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 trololo
{
  "result": "success",
  "CCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "tokenid": "35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2",
  "balance": 10
}
```
Why it's working this way and do I have an access to these 10 tokens technically?
I've expected to see  tokens balance on tokens pubkey by execute `./komodo-cli -ac_name=AT7 tokenbalance tokenid tokenid` but it's giving me it on any second argument input


[25-Aug-18 02:43 PM] TonyL#3577
And looks like there is no any validity check for the [pubkey] argument


[25-Aug-18 02:54 PM] TonyL#3577
Also in smartcontract sourcecoude transfer is described as ``` assetbalance <pubkey> <assetid>```
But in smartcontract test plan which pinned on top of this channel arguments placed vice versa `tokenaddress [pubkey]` (now it's working as described in a test plan)


[25-Aug-18 03:40 PM] Alright#0419
@TonyL pretty sure `tokenbalance <tokenid>` will show you the balance of the pubkey you have set


[25-Aug-18 03:41 PM] TonyL#3577
@Alright yes, I've reflected it above


[25-Aug-18 03:41 PM] Alright#0419
and you did `tokentransfer <tokenid> <tokenid>` which I assume sent the tokens to a different address


[25-Aug-18 03:41 PM] TonyL#3577
I'm most confused regards `tokentbalance <tokenid> trololo`


[25-Aug-18 03:41 PM] Alright#0419
Hmmm, need to read what you said again


[25-Aug-18 03:42 PM] TonyL#3577
I'm getting output expected for `tokenbalance <tokenid> <tokenid>` in case of any input as second parameter


[25-Aug-18 03:42 PM] Alright#0419
A bit confused


[25-Aug-18 03:43 PM] Alright#0419
it should be `tokentransfer <tokenid> <pubkey_to_send_tokens_to>`


[25-Aug-18 03:43 PM] Alright#0419
why are you doing `tokentransfer <tokenid> <tokenid>`


[25-Aug-18 03:44 PM] TonyL#3577
`tokenbalance`, not `tokentransfer`


[25-Aug-18 03:45 PM] TonyL#3577
`tokentransfer <tokenid> <tokenid>` - was just interesting


[25-Aug-18 03:45 PM] Alright#0419
What's the tokenid?


[25-Aug-18 03:45 PM] TonyL#3577
But `tokenbalance <tokenid> trololo` confused me with output of <tokenid> balance.


[25-Aug-18 03:45 PM] Alright#0419
for the token you're doing this on


[25-Aug-18 03:45 PM] TonyL#3577
`35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2`


[25-Aug-18 03:46 PM] Alright#0419
Ok, I see what you mean


[25-Aug-18 03:47 PM] TonyL#3577
I can even input symbols as second argument


[25-Aug-18 03:49 PM] Alright#0419
or nothing with `""`


[25-Aug-18 03:49 PM] Alright#0419
can you give me a pubkey you have some of these tokens at?


[25-Aug-18 03:50 PM] TonyL#3577
```./komodo-cli -ac_name=AT7 tokenbalance da06a3a4d6088ba5e26ad42bb0a3198a988ed9a47a5ce2dbb39f09e82e135f38 da06a3a4d6088ba5e26ad42bb0a3198a988ed9a47a5ce2dbb39f09e82e135f38
{
  "result": "success",
  "CCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "tokenid": "da06a3a4d6088ba5e26ad42bb0a3198a988ed9a47a5ce2dbb39f09e82e135f38",
  "balance": 10
}
``` 
Oo


[25-Aug-18 03:50 PM] Alright#0419
yea did you send tokens to that "pubkey"


[25-Aug-18 03:50 PM] TonyL#3577
On this one I didnt


[25-Aug-18 03:50 PM] TonyL#3577
but it output same CCaddress and balance


[25-Aug-18 03:51 PM] Alright#0419
didn't send 10 of those tokens anywhere?


[25-Aug-18 03:51 PM] TonyL#3577
`da06a3a4d6088ba5e26ad42bb0a3198a988ed9a47a5ce2dbb39f09e82e135f38` this one nope


[25-Aug-18 03:52 PM] TonyL#3577
I'll try to create new token to be sure


[25-Aug-18 04:03 PM] TonyL#3577
No, I think I'm just mistaked with these 10. Not repeated. 
@Alright Could you please send yours pubkey? I'll try to send you some tokens and check balance then


[25-Aug-18 04:03 PM] Alright#0419
v


[25-Aug-18 04:03 PM] Alright#0419
-pubkey=03f609d34f8670ab86f4e3ef79fe8a0ddf38143efc8c5835217fd3a84c8f866b74


[25-Aug-18 04:09 PM] TonyL#3577
@Alright could you please try now `./komodo-cli -ac_name=AT7 tokenbalance 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2` and `./komodo-cli -ac_name=AT7 tokenbalance 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 trololo` ?


[25-Aug-18 04:10 PM] Alright#0419
yep same thing


[25-Aug-18 04:10 PM] Alright#0419
no idea why it shows 10


[25-Aug-18 04:13 PM] TonyL#3577
These 10 are on balance of `35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2` itself. It's like a `35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2` have 10 `35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2` tokens
So strange behaviour is  that you see it when input ```./komodo-cli -ac_name=AT7 tokenbalance 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 trololo```
So it's execute tokenbalance <tokenid> <tokenid> for any second parameter illegal input

{Reactions}
ü§ï 

[25-Aug-18 04:22 PM] TonyL#3577
First parameter not validate as well and not checking if such tokenid exists:
```
./komodo-cli -ac_name=AT7 tokenbalance trololo trololo
{
  "result": "success",
  "CCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "tokenid": "trololo",
  "balance": 0
}
```


[25-Aug-18 04:26 PM] Alright#0419
hmmm  thought maybe if I emptied RFYE2yL3KknWdHK6uNhvWacYsCUtwzjY3u that it would stop showing 10 as the balance


[25-Aug-18 04:26 PM] Alright#0419
nope


[25-Aug-18 04:30 PM] TonyL#3577
Easy way for tokens burning lol:
`./komodo-cli -ac_name=AT7 tokentransfer 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 trololo 10`


[25-Aug-18 04:31 PM] TonyL#3577
`vin1 9999880, vout0 10, vout1 9999870, transfer validated 0.09999880 -> 0.09999880`


[25-Aug-18 04:33 PM] Alright#0419
Can I see the raw tx from that?


[25-Aug-18 04:39 PM] TonyL#3577
```./komodo-cli -ac_name=AT7 tokentransfer 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 trololo 10
{
  "result": "success",
  "hex": "0100000002453b3f19daf9dcc2c3f68b74cc170b5aa7646e903b7777415054854489a9503b0200000049483045022100dc84aaad690382e75d6c8a5f770320bc40a5f046bceb9da65c85e51a0987f53102207faa4bec47d7481055b710b164b87336267f158045b80f2658f858253c329cbe01ffffffff453b3f19daf9dcc2c3f68b74cc170b5aa7646e903b7777415054854489a9503b010000007b4c79a276a072a26ba067a5658021026ac46e0a523819521355b22118d7c78800fb50721c13301d38fd427bef5cc7c48140185ad512d7f15b0a8eb94b1e7efbafa8846d7f534a67d9eee3fe207cf3088f7b1444227028d979cea9ee8279a352ff6a884bebc607b31507a85056276264733ba100af038001e3a10001ffffffff040a00000000000000302ea22c8020caea5fa9a8c672d1399b38d4522fec186c51c140617e3a3015138bbdde3f3e7b8103120c008203000401ccfe95980000000000302ea22c80205ae199495feb5044ad403857314795bf8b6e1d3246a0eb47e3d298feba3ff4f98103120c008203000401cc803a404d180900002321026ac46e0a523819521355b22118d7c78800fb50721c13301d38fd427bef5cc7c4ac0000000000000000246a22e37435587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea200000000"
}
```


[25-Aug-18 04:40 PM] TonyL#3577
```./komodo-cli -ac_name=AT7 sendrawtransaction 0100000002453b3f19daf9dcc2c3f68b74cc170b5aa7646e903b7777415054854489a9503b0200000049483045022100dc84aaad690382e75d6c8a5f770320bc40a5f046bceb9da65c85e51a0987f53102207faa4bec47d7481055b710b164b87336267f158045b80f2658f858253c329cbe01ffffffff453b3f19daf9dcc2c3f68b74cc170b5aa7646e903b7777415054854489a9503b010000007b4c79a276a072a26ba067a5658021026ac46e0a523819521355b22118d7c78800fb50721c13301d38fd427bef5cc7c48140185ad512d7f15b0a8eb94b1e7efbafa8846d7f534a67d9eee3fe207cf3088f7b1444227028d979cea9ee8279a352ff6a884bebc607b31507a85056276264733ba100af038001e3a10001ffffffff040a00000000000000302ea22c8020caea5fa9a8c672d1399b38d4522fec186c51c140617e3a3015138bbdde3f3e7b8103120c008203000401ccfe95980000000000302ea22c80205ae199495feb5044ad403857314795bf8b6e1d3246a0eb47e3d298feba3ff4f98103120c008203000401cc803a404d180900002321026ac46e0a523819521355b22118d7c78800fb50721c13301d38fd427bef5cc7c4ac0000000000000000246a22e37435587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea200000000
KOMODO_CONNECTING.256 mempool.1
AssetValidate (t)
vin1 9999880, vout0 10, vout1 9999870, transfer validated 0.09999880 -> 0.09999880
e58c0d4aac1f4eee36fa82353fdd4ba7d0d440583e6d46d737b48110a5e13e94
```


[25-Aug-18 05:07 PM] TonyL#3577
And UTXO with these 10 tokens gone to this random pubkey instead of trololo :/
```
./komodo-cli -ac_name=AT7 gettxout e58c0d4aac1f4eee36fa82353fdd4ba7d0d440583e6d46d737b48110a5e13e94 0
{
  "bestblock": "00c78c909eac0d48558bb3b13f5d142c39ce8343110355b7d7cbb7328bfd6b99",
  "confirmations": 42,
  "value": 0.00000010,
  "scriptPubKey": {
    "asm": "a22c8020caea5fa9a8c672d1399b38d4522fec186c51c140617e3a3015138bbdde3f3e7b8103120c008203000401 OP_CHECKCRYPTOCONDITION",
    "hex": "2ea22c8020caea5fa9a8c672d1399b38d4522fec186c51c140617e3a3015138bbdde3f3e7b8103120c008203000401cc",
    "reqSigs": 1,
    "type": "cryptocondition",
    "addresses": [
      "RAHy48Q4jkSyZUUuY6GqKkKu9bRenrTT2w"
    ]
  },
  "version": 1,
  "coinbase": false
}
```
```./komodo-cli -ac_name=AT7 tokenbalance 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 76a9149178fbab0f424aef806f3b8fe1534cfb449b5f7088ac
{
  "result": "success",
  "CCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "tokenid": "35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2",
  "balance": 10
}
```

{Reactions}
trollface 

[25-Aug-18 05:10 PM] TonyL#3577
So if to summarise all my fud:
1) `./komodo-cli -ac_name=AT7 tokenbalance 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 trololo`
2) `./komodo-cli -ac_name=AT7 tokenbalance trololo trololo`
3) `./komodo-cli -ac_name=AT7 tokentransfer 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 trololo 10
`


[25-Aug-18 07:57 PM] Alright#0419
@TonyL bought this token from the order book and it doesn't happen to it
```
./komodo-cli -ac_name=AT7 tokenbalance da06a3a4d6088ba5e26ad42bb0a3198a988ed9a47a5ce2dbb39f09e82e135f38 trolol
{
  "result": "success",
  "CCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "tokenid": "da06a3a4d6088ba5e26ad42bb0a3198a988ed9a47a5ce2dbb39f09e82e135f38",
  "balance": 0
}
```


[25-Aug-18 07:59 PM] TonyL#3577
@Alright try to `tokentransfer da06a3a4d6088ba5e26ad42bb0a3198a988ed9a47a5ce2dbb39f09e82e135f38 da06a3a4d6088ba5e26ad42bb0a3198a988ed9a47a5ce2dbb39f09e82e135f38 10` hmm


[25-Aug-18 07:59 PM] TonyL#3577
I guess I broke it this way before


[25-Aug-18 08:01 PM] Alright#0419
sent 5 to it and it still shows 0

{Reactions}
ü§î 

[25-Aug-18 08:04 PM] Alright#0419
fresh token doesn't do it 
```
./komodo-cli -ac_name=AT7 tokenbalance 224d0521a2483cf0663b1430ec01153ddc48a71de3771526d9361a81aa690242 trolol
{
  "result": "success",
  "CCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "tokenid": "224d0521a2483cf0663b1430ec01153ddc48a71de3771526d9361a81aa690242",
  "balance": 0
}
```


[25-Aug-18 08:05 PM] TonyL#3577
I made troll token somehow :/

{Reactions}
trollface 

[25-Aug-18 08:13 PM] TonyL#3577
@Alright for this one still the same
```./komodo-cli -ac_name=AT7 tokenbalance 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 troll
{
  "result": "success",
  "CCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "tokenid": "35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2",
  "balance": 10
}
```


[25-Aug-18 08:13 PM] Alright#0419
are you on latest jl777 branch?


[25-Aug-18 08:14 PM] TonyL#3577
yep


[25-Aug-18 08:29 PM] TonyL#3577
I even created these two tokens from different VPS with different keys right after build with all latest jl777 commits


[25-Aug-18 11:09 PM] CHMEX#0686
explorer moved to AT7

{Reactions}
üëçüèΩ (2) 

[26-Aug-18 03:31 AM] SHossain#0007
this diceplan has plenty of entropy tx (utxos)...if anyone is interested
```
        "fundingtxid": "56078ccc837f82a6a0f62a05306e113aa01739a5cde45431e93bee7a0afa8e7f",
        "name": "JD",
        "sbits": 17482,
        "minbet": "10.00000000",
        "maxbet": "1000.00000000",
        "maxodds": 50,
        "timeoutblocks": 1,
        "funding": "782947.00000000"
```


[26-Aug-18 03:37 AM] SHossain#0007
`numentropy tx 27: 782947.00000000`


[26-Aug-18 03:49 AM] SHossain#0007
```
b7fa67a6068250cf036eed7f609e4f41edd81236ecbc862e02c548f447e24c14 winnings 0.00000000 bet 1000.00000000 at odds 50:1
KOMODO_CONNECTING.959 mempool.1
modval 457 vs 1666
e27015461270ead40663dc8e9f304669d2b8aa505e055d0bc9e7bfd5da89b9b6 winnings 6000.00000000 bet 1000.00000000 at odds 5:1
modval 457 vs 1666
```


[26-Aug-18 04:28 AM] jl777c#5810
it seems there are some issues, but it looks like non-consensus level or not reproducible


[26-Aug-18 04:36 AM] SHossain#0007
with the rewards? or dice?


[26-Aug-18 04:40 AM] jl777c#5810
i read some issues about assets calls acting wonky


[26-Aug-18 08:27 AM] siu#3920
i have not detected any wonkiness on the asset calls.


[26-Aug-18 08:27 AM] siu#3920
Might need to try latest to be sure.


[26-Aug-18 08:39 AM] siu#3920
seems like BRK broke


[26-Aug-18 08:39 AM] siu#3920
```..finished loading blocks BRK
processing /home/siu/.komodo/BRK/komodostate 98KB, validated.-1
inds.0x555c9d464960 validate /home/siu/.komodo/BRK/komodostate.ind fsize.24888 datalen.100889 n.6222 lastfpos.0
/home/siu/.komodo/BRK/komodostate.ind validated fpos.100889
took 0 seconds to process /home/siu/.komodo/BRK/komodostate 98KB
: Corrupted block database detected.

```


[26-Aug-18 08:57 AM] CHMEX#0686
AT7 is the current the rest are dead I believe


[26-Aug-18 10:04 AM] siu#3920
yep... ded


[26-Aug-18 12:15 PM] SHossain#0007
created a token and placed couple of bid and ask orders.


[26-Aug-18 12:15 PM] SHossain#0007
will fill them


[26-Aug-18 12:17 PM] SHossain#0007
`tokencreate`, `tokenlist`, `tokeninfo`, `tokentransfer`, `tokenbid`, `tokenask`, `tokenbalance`, `tokenfillbid` worked as expected


[26-Aug-18 12:18 PM] SHossain#0007
testing `tokenfillask`


[26-Aug-18 12:27 PM] SHossain#0007
worked as expected with valid params. the orders changed from `b`, `s` to `B` & `S` after using partial fill
```
        {
            "funcid": "S",
            "txid": "abc1a0d494a4cc7e70e863ff082151c4d9eee50c787e160c04862bcf99f53d35",
            "vout": 0,
            "amount": "9999",
            "askamount": "9999",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "ff8aae1ab041bc576c2ff3d0014febcb07f468dfff1e5aac6f0f951e784cf063",
            "totalrequired": "99990.00000000",
            "price": "10.00000000"
        },
        {
            "funcid": "B",
            "txid": "07fd6a535ef410cd7b0ca340f8028f0459c09970841adbf7e29c2f8fe6f5fe7e",
            "vout": 0,
            "amount": "99990.00000000",
            "bidamount": "99990.00000000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "ff8aae1ab041bc576c2ff3d0014febcb07f468dfff1e5aac6f0f951e784cf063",
            "totalrequired": 9999,
            "price": "10.00000000"
        }
```


[26-Aug-18 12:57 PM] SHossain#0007
testing complete fill of this order
```
        {
            "funcid": "s",
            "txid": "fd4f99c9788361db30a0dcf586f362979bb8eb5fffefa26736e222edbcd0ba1a",
            "vout": 0,
            "amount": "10",
            "askamount": "10",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "ff8aae1ab041bc576c2ff3d0014febcb07f468dfff1e5aac6f0f951e784cf063",
            "totalrequired": "10.00000000",
            "price": "1.00000000"
        },
```


[26-Aug-18 01:04 PM] SHossain#0007
worked as intended, full fill completed


[26-Aug-18 01:18 PM] SHossain#0007
someone filled another order


[26-Aug-18 01:46 PM] SHossain#0007
@siu did you fill this order earlier on?
```
        {
            "funcid": "B",
            "txid": "ff8e53ecf4cb551eebb6a7f406e82d453fec834c23896437831ec2df8f3e9e75",
            "vout": 0,
            "amount": "99910.00000000",
            "bidamount": "99910.00000000",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "ff8aae1ab041bc576c2ff3d0014febcb07f468dfff1e5aac6f0f951e784cf063",
            "totalrequired": 9991,
            "price": "10.00000000"
        }
```


[26-Aug-18 01:47 PM] siu#3920
yes


[26-Aug-18 01:48 PM] siu#3920
but its weird i think, now that i see it.


[26-Aug-18 01:49 PM] siu#3920
well... not exactly


[26-Aug-18 01:49 PM] siu#3920
that is not the order i filled


[26-Aug-18 01:49 PM] siu#3920
it was this: ```        {
            "funcid": "S",
            "txid": "abc1a0d494a4cc7e70e863ff082151c4d9eee50c787e160c04862bcf99f53d35",
            "vout": 0,
            "amount": "9999",
            "askamount": "9999",
            "origaddress": "REmii1C2bWCkDU4EA21rz7M4T3uG7MG3me",
            "tokenid": "ff8aae1ab041bc576c2ff3d0014febcb07f468dfff1e5aac6f0f951e784cf063",
            "totalrequired": "99990.00000000",
            "price": "10.00000000"
        },```


[26-Aug-18 01:50 PM] SHossain#0007
sorry. my bad


[26-Aug-18 01:50 PM] SHossain#0007
you are right


[26-Aug-18 01:51 PM] SHossain#0007
ok. at least you filled the order. i was beginning to think it just disappeared. was it wonky enough? :trollface:

{Reactions}
trollface (2) 

[26-Aug-18 01:52 PM] TonyL#3577
btw did you try to use the auto-tests?


[26-Aug-18 01:52 PM] SHossain#0007
i have not.


[26-Aug-18 01:59 PM] siu#3920
i felt it went through just fine.


[26-Aug-18 02:01 PM] SHossain#0007
it did


[26-Aug-18 02:01 PM] TonyL#3577
In tests for Token CC covered most of the basic cases such as token creating, bid/ask creating and filling and a lot of other manual stuff (https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing). 
Just execute ```PYTHON_DEBUG=1  qa/pull-tester/rpc-tests.sh cryptoconditions --tracerpc``` from `komodo` folder to start the cryptoconditions auto-tests.
There is a tests for faucet and rewards also. Now I'm writing tests for dice and will create same document with covered cases in auto-tests

{Embed}
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing).
Token CC Test Plan
–õ–∏—Å—Ç1

 Case, Call, Expected result, Passed, Is autotests covered, Stage
 Check token addresses for wallet without pubkey declaration, tokenaddress," result":" success", all addresses start from" R", Initialization
 Check token addresses for a specific pubkey, tokenaddres...
https://images-ext-1.discordapp.net/external/82hQbeigfuGNKqJrcGqcuqy1txzvSr9KYRh85xxywao/https/lh4.googleusercontent.com/9yeKWoEVtVvujIgExr4kwbRrCe3JBbDGkoWm0bJ8RVRKjuX0Wd3LIWIq-QK1nEmqiu1vNg%3Dw1200-h630-p


[26-Aug-18 02:02 PM] jl777c#5810
i rebased jl777 to dev, you still need to do different things for jl777 branch vs dev


[26-Aug-18 02:05 PM] TonyL#3577
Oh yes, there is actual auto-test version in `jl777` so no manipulations needed


[26-Aug-18 02:08 PM] jl777c#5810
were you able to isolate the strange behaviors? not sure if there was any bug there or no


[26-Aug-18 02:11 PM] TonyL#3577
I still can execute things like this `./komodo-cli -ac_name=AT7 tokenbalance trololo trololo` or this `./komodo-cli -ac_name=AT7 tokentransfer 35587106afb08dafa224ca0ef9e3bb7250c35f2080a46ad0481040afaa072ea2 trololo 10` about which I wrote yesterday


[26-Aug-18 02:12 PM] jl777c#5810
it seems non-consensus issues can can be fixed with rpc error checks


[26-Aug-18 02:13 PM] TonyL#3577
Yes, it looks not critical. Just expected different answer when tested so reported


[26-Aug-18 02:15 PM] jl777c#5810
plz make sure the docs are updated so the answer is expected


[26-Aug-18 02:19 PM] TonyL#3577
Alright, I'll add these cases to Token CC test plan doc so later we'll able to add more parameters checks.


[26-Aug-18 03:19 PM] dukeleto#7326
@TonyL where are you writing your tests?


[26-Aug-18 03:19 PM] dukeleto#7326
i have a bunch of changes coming down the line


[26-Aug-18 03:26 PM] TonyL#3577
@dukeleto locally for now in `run_dice_tests`


[26-Aug-18 03:27 PM] dukeleto#7326
i will submit a PR soon that you can rebase/merge


[26-Aug-18 03:27 PM] TonyL#3577
Wanted to commit when cover all basic functionality


[26-Aug-18 03:27 PM] TonyL#3577
Alright


[26-Aug-18 03:29 PM] TonyL#3577
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing I've created second page `BETS CC ` in this doc where reflecting added tests

{Embed}
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing
CCs Test Plan
TOKEN CC

 Case, Call, Expected result, Current behaviour, Passed, Is autotests covered, Stage
 Check token addresses for wallet without pubkey declaration, tokenaddress," result":" success", all addresses start from" R", Initialization
 Check token addresses for a specific p...
https://images-ext-1.discordapp.net/external/82hQbeigfuGNKqJrcGqcuqy1txzvSr9KYRh85xxywao/https/lh4.googleusercontent.com/9yeKWoEVtVvujIgExr4kwbRrCe3JBbDGkoWm0bJ8RVRKjuX0Wd3LIWIq-QK1nEmqiu1vNg%3Dw1200-h630-p


[26-Aug-18 03:29 PM] dukeleto#7326
i have modified the c++ code to return status codes for dice rpcs


[26-Aug-18 03:29 PM] dukeleto#7326
and also have added code to validate plan names and token names


[26-Aug-18 03:30 PM] dukeleto#7326
improved error messages in a few places


[26-Aug-18 03:30 PM] dukeleto#7326
it was only returning status codes for successful results, made all the error cases also return that


[26-Aug-18 03:31 PM] TonyL#3577
I think it would be good to fill same tables for faucet/rewards test to give a picture what actually testing to whom who will use these tests


[26-Aug-18 03:32 PM] TonyL#3577
So manual job can be done with these test and time can be spend on more exotic cases trying


[26-Aug-18 03:33 PM] dukeleto#7326
if you want to, nobody will stop you üòÉ


[26-Aug-18 03:33 PM] TonyL#3577
Yeah, true üòÉ


[26-Aug-18 03:35 PM] TonyL#3577
@dukeleto  So I'll wait for your PR, will grab changes and doublecheck if I have to change something in my bets tests according to new statuses and then PR my new tests  üëç


[26-Aug-18 03:35 PM] dukeleto#7326
it should make it easier for you


[26-Aug-18 03:36 PM] dukeleto#7326
because you can use `assert_(error|success)(result)`


[26-Aug-18 03:36 PM] dukeleto#7326
please also add some tests for invalid names, i.e. dice plans longer than 8 characters


[26-Aug-18 03:36 PM] dukeleto#7326
i only added it a few places, you will see an example test that you can apply to all rpc's

{Reactions}
üëå 

[26-Aug-18 03:38 PM] dukeleto#7326
also, for invalid token names, which are allowed to be 32 chars


[26-Aug-18 03:40 PM] dukeleto#7326
i am thinking that splitting the tests into 4 files might be  a good idea, but one downside is that it will take about 4 times as long to run all tests, because each test has to mine 101 blocks, which take roughly 1 sec/each.


[26-Aug-18 03:40 PM] dukeleto#7326
so I guess I am still on the fence


[26-Aug-18 03:40 PM] dukeleto#7326
also, I don't think Travis CI is actually running our cctests, it's just making sure stuff builds


[26-Aug-18 03:41 PM] TonyL#3577
Looks like nobody using it atm üòÉ


[26-Aug-18 03:42 PM] TonyL#3577
And looks like it's very good to place such 8 chars limitation for dice plan name, since I can create 0 blocks timeout plan in case of long name usage


[26-Aug-18 03:48 PM] dukeleto#7326
gonna make that PR now, stuff finally passes


[26-Aug-18 03:48 PM] dukeleto#7326
and compiles üòÉ

{Reactions}
üçª (2) 

[26-Aug-18 03:50 PM] dukeleto#7326
ugh, my cctests is branched from jl777 branch


[26-Aug-18 03:50 PM] dukeleto#7326
and when I try to submit to dev branch now, it's including all kinds of weird stuff


[26-Aug-18 03:58 PM] dukeleto#7326
cherry-picking 2 commits onto a new branch based on `dev` saved me


[26-Aug-18 03:58 PM] dukeleto#7326
making sure stuff compiles and tests are still happy, then PR


[26-Aug-18 04:03 PM] dukeleto#7326
```DEBUG:BitcoinRPC:<-111- "REGTEST Komodo server stopping"
Cleaning up
Tests successful
--- Success: cryptoconditions.py ---



Tests completed: 1
successes 1; failures: 0

real    2m22.840s
user    0m0.100s
sys     0m0.016s```


[26-Aug-18 04:06 PM] dukeleto#7326
@jl777c https://github.com/jl777/komodo/pull/849

{Embed}
https://github.com/jl777/komodo/pull/849
Improve cc error checking by leto ¬∑ Pull Request #849 ¬∑ jl777/komodo
Return error if plan names are >= 8 chars
Return improved error earlier if token names are >= 32
New macro VALID_PLAN_NAME still probably needs to be used in various other RPCs
Improve dicefu...
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[26-Aug-18 04:08 PM] dukeleto#7326
@jl777c before I forget, I want to mention something about atol/atoi + related functions: I have seen that BTC core and now ZEC has/is removing these functions, because they have undefined behavior depending on locale and certain sentinel values, which can lead to potential consensus issues or hard-to-debug problems. Wondering what your thoughts are


[26-Aug-18 04:10 PM] dukeleto#7326
https://github.com/zcash/zcash/pull/3471

{Embed}
https://github.com/zcash/zcash/pull/3471
Replace most calls to atoi[64] with calls to ParseInt[32|64] by La...
Addresses #2075, do not use atoi and variants because they have undefined behavior for some inputs. Includes changes from upstream:

bitcoin/bitcoin#13603
bitcoin/bitcoin#8164
https://images-ext-2.discordapp.net/external/ZMPR4yCl8ONSl1iFNp5Ztw3mo1VLl_OIbY9Uz5KRni4/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/8321330


[26-Aug-18 04:11 PM] dukeleto#7326
I ask, because cc contracts have a lot of uses of them


[26-Aug-18 04:12 PM] TonyL#3577
@dukeleto oh you've also fixed responses for my notes in Token tests.  Thanks!


[26-Aug-18 04:15 PM] TonyL#3577
Just wonder - is `;` needed in `assert_error(result);` ?


[26-Aug-18 04:52 PM] dukeleto#7326
nope, just accidentally added it. muscle memory from C/C++ and Perl


[26-Aug-18 04:53 PM] dukeleto#7326
`;` is optional in Python


[26-Aug-18 11:24 PM] grewalsatinder#9653
@SHossain I couldn't find the spreadsheet for tokens API tests


[26-Aug-18 11:25 PM] grewalsatinder#9653
can you please give me the link again ?


[27-Aug-18 12:00 AM] dukeleto#7326
@grewalsatinder this? https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=506594567

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[27-Aug-18 12:01 AM] grewalsatinder#9653
thanks @dukeleto üòÉ

{Reactions}
üëçüèΩ 

[27-Aug-18 12:17 AM] jl777c#5810
if atol and atoi are not safe, we should #define it to a function that is safe


[27-Aug-18 01:47 AM] CrisF#3405
Hi,```jl777c
i rebased jl777 to dev, you still need to do different things for jl777 branch vs dev```Should I still use jl777 branch to try things out then?


[27-Aug-18 01:55 AM] TonyL#3577
Hi @CrisF If you want to participate in CC testing on AT7 ac_chain you have to use jl777 branch since it'll be most updatable these days.


[27-Aug-18 01:56 AM] CrisF#3405
@TonyL  Great, thanks a lot!

{Reactions}
üëå 

[27-Aug-18 01:57 AM] TonyL#3577
I advice you to check Test Plan Test plan: https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=211514340 which might be a very good kickstart

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[27-Aug-18 02:01 AM] CrisF#3405
Very helpful, thanks.


[27-Aug-18 04:42 AM] benohanlon#7045
Please share this AMA on crypto-conditions with any dev / blockchain communities that you're involved with if you'd like to help me spread awareness. JL777 will be answering questions. https://www.reddit.com/r/komodoplatform/comments/9ahddj/ama_monday_27th_august_to_talk_about/

{Embed}
https://www.reddit.com/r/komodoplatform/comments/9ahddj/ama_monday_27th_august_to_talk_about/
r/komodoplatform - AMA Monday, 27th August to talk about Crypto-Co...
18 votes and 17 comments so far on Reddit
https://images-ext-2.discordapp.net/external/EwGEfQkt_jl_5zL9ESyqAS7J7YJQ0BiBMAeKZBbzGAo/%3Fs%3D13f5a66f4039932e2349b9b89dd2ce36/https/i.redditmedia.com/bIlwGoHtZVTkYJrFbO5WZ80fEyHAFKM8APPrtSDNLTs.jpg


[27-Aug-18 05:08 AM] Alright#0419
@Anthony


[27-Aug-18 05:11 AM] Anthony#6143
Per crypto conditions, wondering if inheritance will be or perhaps is implemented? Where functions can be preserved and called on later.


[27-Aug-18 05:12 AM] jl777c#5810
what exactly do you mean. "inheritance" does not exist in the crypto conditions standard


[27-Aug-18 05:28 AM] Anthony#6143
Solidity is built with inheritance, calling on the properties of a parent contract without having to redefine them all.


[27-Aug-18 05:29 AM] Anthony#6143
The question is if with crypto conditions, if it will be built with the ability to inherit properties or functions from other cc contracts


[27-Aug-18 05:31 AM] jl777c#5810
please keep in mind that utxo based CC contracts are a totally different animal than solidity. That being said, you can write one CC contract that knows about another CC contract and in essence be invoking it


[27-Aug-18 05:32 AM] jl777c#5810
for example there is the assets CC that allows to issue and trade tokens. Another contract could issue tokens and then use the newly issued token as trigger conditions for invoking the payments CC contract.


[27-Aug-18 05:32 AM] jl777c#5810
I think the way to view it is that each CC contract adds more functionality to a blockchain, which in turn can be used by users directly or by other contracts


[27-Aug-18 05:33 AM] jl777c#5810
it is not direct source level inheritance


[27-Aug-18 05:35 AM] jl777c#5810
I have explained in detail how the CC contracts work. It is a good idea to not have preconceptions and start with a fresh mind: https://github.com/jl777/komodo/blob/FSM/src/cc/CC%20made%20easy

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/CC%20made%20easy
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[27-Aug-18 05:35 AM] Anthony#6143
It is about 1300 lines of code to roll the dice in your example with CC, with solidity you can do it in 200 lines because you can call on the function that was written prior about rolling dice by someone else


[27-Aug-18 05:36 AM] jl777c#5810
yes, solidity is a higher level language than the C code I wrote


[27-Aug-18 05:36 AM] Anthony#6143
So I was asking if it is or will be possible to consolidate code and preserve code already written so it can be called on by someone in the future


[27-Aug-18 05:36 AM] jl777c#5810
that is not to say a less line count CC contract cant be done by ahigher level language


[27-Aug-18 05:36 AM] jl777c#5810
the way for that is to make reusable functions, like in CCutils.cpp, and eventually we should have a library of functions to do standard things


[27-Aug-18 05:37 AM] Anthony#6143
So what I see is that crypto conditions is in addition to blockchain consensus


[27-Aug-18 05:37 AM] Anthony#6143
the code is programmed into the blockchain etc


[27-Aug-18 05:37 AM] jl777c#5810
plz keep in mind these are the initial 4 CC contracts, very early in the lifecycle and rather than try to reduce the lines of code, I made each one have no dependencies on any other, that way the entirety of what is needed is seen


[27-Aug-18 05:37 AM] jl777c#5810
yes, CC is in addition to standard utxo


[27-Aug-18 05:38 AM] Anthony#6143
this is why I'm asking now in an early stage before things are cemented down


[27-Aug-18 05:38 AM] Anthony#6143
I think that it will be possible to have crypto condition programmer be a real profession


[27-Aug-18 05:38 AM] jl777c#5810
most definitely!

{Reactions}
üòé (4) 

[27-Aug-18 05:38 AM] Anthony#6143
and that it would be util if ode can be inherited


[27-Aug-18 05:38 AM] jl777c#5810
it is quite a specialized thing that most wont be able to do effectively at first


[27-Aug-18 05:38 AM] jl777c#5810
code can be reused


[27-Aug-18 05:39 AM] Anthony#6143
for example from this dice example all dice related contracts can stem


[27-Aug-18 05:39 AM] jl777c#5810
C++ inheritance can be used but my expertise is not C++


[27-Aug-18 05:40 AM] jl777c#5810
I would welcome a C++ expert to make things more reusable and to have things like inheritance. These are all matters of the lamguage, rather than CC contracts specifically. CC contracts ultimately just needs to return a boolean true/false for a transaction


[27-Aug-18 05:40 AM] jl777c#5810
the current CC contracts are just my specific implementation, which due to my using C exclusively is more verbose and C based


[27-Aug-18 05:41 AM] Anthony#6143
because your calling the cc code into libbitcoin_server.a


[27-Aug-18 05:42 AM] Anthony#6143
What if one had the desire to remove the dice code, youd have to have everyone update their wallets?


[27-Aug-18 05:44 AM] Anthony#6143
Im trying to see how it would be possible to have an on/off switch perhaps like a spork


[27-Aug-18 05:51 AM] jl777c#5810
It would be possible to allow the creator of a diceplan to turn it off, but to prevent the blockchain from allowing new diceplans to be created, then some height activated disabling would be needed


[27-Aug-18 05:52 AM] jl777c#5810
we are working on a way to have runtime liked modules, but that opens up a new set of issues


[27-Aug-18 10:49 AM] Alright#0419
@jl777c can you change either the help info for `tokencreate` to reflect that supply is *1000000000


[27-Aug-18 10:49 AM] Alright#0419
or make it take a value in assets instead


[27-Aug-18 10:50 AM] Alright#0419
so divide the value the user gives by 100000000 or just change the help info for it


[27-Aug-18 10:52 AM] jl777c#5810
can you propose specific help text?


[27-Aug-18 10:53 AM] Alright#0419
ü§î


[27-Aug-18 10:53 AM] Alright#0419
`tokencreate name coins description`? Even this doesn't seem right


[27-Aug-18 10:54 AM] Alright#0419
just keep `tokencreate name supply description` and I'll add something to clarify that it's *100000000


[27-Aug-18 10:56 AM] Alright#0419
Will be back in a couple hours, will do it then


[27-Aug-18 12:04 PM] Mylo#8306
@Anthony thanks for your questions.  Yes, it looks like being familiar with how (Crypto Conditions) UTXO Smart Contracts work will be a specialised field in the future.   Libraries of utility functions in specific (business etc.) domains will probably eventuate.  Let's see how it goes!!!


[27-Aug-18 03:22 PM] TonyL#3577
I've faced a problem:  receiving  `"status":"loss"` in RPC for all bets :

```
BitcoinRPC:-100-> dicebet ["LUCKY", "1ccc51ae397912693ab0f664eb8b2482f6a9fc29caff134c0df0015a22b8bacb", "1", "1"]
BitcoinRPC:-101-> sendrawtransaction
BitcoinRPC:<-101- "b280beb39715d40b42c2d9267697459af60216afa1d7adf99467b3856421e304"
b280beb39715d40b42c2d9267697459af60216afa1d7adf99467b3856421e304 winnings 2.00000000 bet 1.00000000 at odds 1:1
DEBUG:BitcoinRPC:-105-> dicestatus ["LUCKY", "1ccc51ae397912693ab0f664eb8b2482f6a9fc29caff134c0df0015a22b8bacb", "b280beb39715d40b42c2d9267697459af60216afa1d7adf99467b3856421e304"]
BitcoinRPC:<-105- {"status": "loss", "result": "success"}
```


[27-Aug-18 03:22 PM] TonyL#3577
Builded from latest `dev` branch


[27-Aug-18 03:26 PM] TonyL#3577
Faced it first on this version, when needed to count win/loss bets in betting auto-test.:
```
git log -1
commit 144c599ea012cf87add707d0d0de60a1cc782b0b (HEAD, upstream/dev)
Merge: 470f3b4e1 292a9a717
Author: jl777 <jl777@users.noreply.github.com>
Date:   Sat Aug 25 21:54:19 2018 -1100

    Merge pull request #848 from libscott/rpcScanNotarisationsDB
    
    RPC methods to scan notarisations DB
```

Then re-checked on latest

```
commit 5fda0f8eb6b558b2163eee3a2003efcbf22d241c (HEAD -> dev, origin/dev)
Merge: 6e3dc787c 1a5b40c2e
Author: jl777 <jl777@users.noreply.github.com>
Date:   Mon Aug 27 09:53:52 2018 -1100

    Merge pull request #852 from jl777/jl777
    
    Jl777
```

I'm comparing plan funding before/after bets and part of bets actually won according to balance, but dicestatus status is loss for all


[28-Aug-18 12:02 AM] jl777c#5810
@TonyL what chain, how to invoke it? need more details


[28-Aug-18 12:03 AM] jl777c#5810
if you have a bettxid that won it would help immensely


[28-Aug-18 12:06 AM] TonyL#3577
@jl777c it's a chain which creating in test-framework
```
                    '-ac_name=REGTEST',
                    '-conf='+self.options.tmpdir+'/node0/REGTEST.conf',
                    '-port=64367',
                    '-rpcport=64368',
                    '-regtest',
                    '-addressindex=1',
                    '-spentindex=1',
                    '-ac_supply=5555555',
                    '-ac_reward=10000000',
                    '-pubkey=' + self.pubkey,
                    '-ac_cc=2',
                    '-whitelist=127.0.0.1',
                    '-debug',
                    '-daemon',
                    '-rpcuser=rt',
                    '-rpcpassword=rt'
```


[28-Aug-18 12:06 AM] jl777c#5810
oh... does it work on normal chains?


[28-Aug-18 12:07 AM] jl777c#5810
what i need is the spenttx details


[28-Aug-18 12:07 AM] jl777c#5810
latest version prints out the txid for the spenttx


[28-Aug-18 12:08 AM] jl777c#5810
given the bettx details and spenttx details, i need to make sure it knows if it is a win or loss


[28-Aug-18 12:11 AM] TonyL#3577
Alright let me check for these details. On normal chain I receive both win/loss results when manually testing


[28-Aug-18 12:11 AM] jl777c#5810
i updated it so if it cant find the spenttxid, it returns timeout. it could be the bettx is still pending


[28-Aug-18 12:12 AM] TonyL#3577
I tried to count other to `status: loss or status: win` response as win but receive only losses


[28-Aug-18 12:13 AM] jl777c#5810
you are sure the dicefinish is called and confirmed on chain


[28-Aug-18 12:14 AM] TonyL#3577
Yes, there is one block timeout after finish and one after dicefinish sending


[28-Aug-18 12:15 AM] jl777c#5810
need more details. if it works on normal chain, the issue is the regtest chain is behaving differently


[28-Aug-18 12:15 AM] TonyL#3577
Running the tests, will provide it asap


[28-Aug-18 12:26 AM] TonyL#3577
Thats how I'm placing bets:        
 ``` 
         while (betcounter < 5):
              placebet = rpc.dicebet(dicename,diceid,"1","1")
              betid = self.send_and_mine(placebet["hex"])
              finish = rpc.dicefinish(dicename,diceid,betid)
              rpc.generate(1)
              betresult = rpc.dicestatus(dicename,diceid,betid)
              betcounter = betcounter + 1
              if betresult["status"] == "loss":
                  losscounter = losscounter + 1
              elif betresult["status"]  == "win":
                  wincounter = wincounter + 1
```

Placing bet:
`DEBUG:BitcoinRPC:-106-> dicebet ["LUCKY", "e99184d8c5a8160fd070e4450f8b533977c91c797eae71893ebdd166c0092254", "1", "1"]`
Receiving hex:
`DEBUG:BitcoinRPC:<-106- {"hex":`
Sending rawtx:
`DEBUG:BitcoinRPC:-107-> sendrawtransaction`
Receiving betid:
`DEBUG:BitcoinRPC:<-107- "ef3e58b3e91a2d2fbc6b0fd04baac0837a5b01f50a633fde287db3683933820a"`
Meanwhile receiving printout that bet won:
`ef3e58b3e91a2d2fbc6b0fd04baac0837a5b01f50a633fde287db3683933820a winnings 2.00000000 bet 1.00000000 at odds 1:1`
Mining block:
`DEBUG:BitcoinRPC:-108-> generate [1]`
Finish bet:
`
DEBUG:BitcoinRPC:-109-> dicefinish ["LUCKY", "e99184d8c5a8160fd070e4450f8b533977c91c797eae71893ebdd166c0092254", "ef3e58b3e91a2d2fbc6b0fd04baac0837a5b01f50a633fde287db3683933820a"]`
Receiving hex:
`DEBUG:BitcoinRPC:<-109- {"hex":`
Generating block (have to mine here hex from previous step, just noticed):
`DEBUG:BitcoinRPC:-110-> generate [1]`
Run dice status:
`DEBUG:BitcoinRPC:-111-> dicestatus ["LUCKY", "e99184d8c5a8160fd070e4450f8b533977c91c797eae71893ebdd166c0092254", "ef3e58b3e91a2d2fbc6b0fd04baac0837a5b01f50a633fde287db3683933820a"]` 
Receive that bet is lost in status (it's same for all bets which I run in this tests) :
`DEBUG:BitcoinRPC:<-111- {"status": "loss", "result": "success"}`


[28-Aug-18 12:28 AM] TonyL#3577
I'm not receiving any other printouts


[28-Aug-18 12:33 AM] jl777c#5810
nothing in console?


[28-Aug-18 12:34 AM] dukeleto#7326
does dicefinish give some hex that needs to be sent?


[28-Aug-18 12:34 AM] jl777c#5810
what does is the spent status for ef3e58b3e91a2d2fbc6b0fd04baac0837a5b01f50a633fde287db3683933820a vout.2


[28-Aug-18 12:34 AM] dukeleto#7326
i think there is a missing `sendrawtransaction` from the result of `dicefinish`


[28-Aug-18 12:35 AM] jl777c#5810
yes, dicefinish needs to be broadcast


[28-Aug-18 12:35 AM] dukeleto#7326
@TonyL use `send_and_mine(finish["hex"])`


[28-Aug-18 12:35 AM] dukeleto#7326
you did generate() but forgot to send the xtn


[28-Aug-18 12:35 AM] TonyL#3577
Yes I've noticed it when wrote post above, just ran version with send_and_mine


[28-Aug-18 12:35 AM] dukeleto#7326
that is exactly why i wrote that little helper that makes writing tests easier üòÉ


[28-Aug-18 12:35 AM] TonyL#3577
But I receive status loss straight


[28-Aug-18 12:35 AM] jl777c#5810
ok, so this is not a bug?


[28-Aug-18 12:37 AM] jl777c#5810
do you know the txid that spent the bettxid?


[28-Aug-18 12:38 AM] TonyL#3577
I'll add now printout to script to track it


[28-Aug-18 12:38 AM] jl777c#5810
you can use the rpc call


[28-Aug-18 12:38 AM] jl777c#5810
getspentinfo


[28-Aug-18 12:38 AM] jl777c#5810
> komodo-cli getspentinfo '{"txid": "0437cd7f8525ceed2324359c2d0ba26006d92d856a9c20fa0241106ee5a597c9", "index": 0}'


[28-Aug-18 12:39 AM] jl777c#5810
then can find the spenttxid for bettxid and see if there is a bug


[28-Aug-18 12:55 AM] TonyL#3577
DEBUG:BitcoinRPC:-96-> getspentinfo ["e0a6afd8cc5b28579a84ef3f07af875f75c59f06671294f93d5bea6230ef6c61", "0"]
JSONRPC error: getspentinfo

DEBUG:BitcoinRPC:-96-> getspentinfo ["a0f7c105a7ab869720880922b5e021285ba0867bae29ad765dd1d5dae74850a8", 0]
JSONRPC error: getspentinfo

Confused a little bit


[28-Aug-18 12:56 AM] jl777c#5810
i think the syntax is a bit strange


[28-Aug-18 12:56 AM] jl777c#5810
does it work via command line


[28-Aug-18 12:56 AM] jl777c#5810
use help output as a guide


[28-Aug-18 12:56 AM] jl777c#5810
but dont trust it to be 100% correct


[28-Aug-18 01:03 AM] TonyL#3577
Work in console
`./komodo-cli -ac_name=AT7 getspentinfo '{"txid": "e343ce51cbc0518651fb101bf0ae09db4e18ce2d5f25c82db1dbde1938fcb561", "index": 0}'
{
  "txid": "5c80a817128ff843c2e899a24f2dde954eae47ae205cdb0d60edc9c2a3cc06d0",
  "index": 1,
  "height": -1
}
`


[28-Aug-18 01:04 AM] jl777c#5810
so it was spent!


[28-Aug-18 01:04 AM] jl777c#5810
plz decode 5c80a817128ff843c2e899a24f2dde954eae47ae205cdb0d60edc9c2a3cc06d0


[28-Aug-18 01:04 AM] jl777c#5810
assuming it is confirmed


[28-Aug-18 01:06 AM] TonyL#3577
This command?
`/komodo-cli -ac_name=AT7 decodescript b6467e457c3894c030dbb9271453cf8e7b910808fb1174972b062ead0720e181
{
  "asm": "OP_NOP7 [error]",
  "type": "nonstandard",
  "p2sh": "bNZsLbQHxgfRFt9ozSfcrVWB1RGxf41W3n"
}
`


[28-Aug-18 01:07 AM] jl777c#5810
getrawtransaction 5c80a817128ff843c2e899a24f2dde954eae47ae205cdb0d60edc9c2a3cc06d0 1


[28-Aug-18 01:07 AM] jl777c#5810
there is a " 1" at the end


[28-Aug-18 01:08 AM] jl777c#5810
it gets the rawtransaction and decodes it


[28-Aug-18 01:09 AM] TonyL#3577
Yes, received output: hex + vin + vout + vjoinsplit


[28-Aug-18 01:11 AM] jl777c#5810
my remote viewer is broken. can you post it here so I can see it?


[28-Aug-18 01:12 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/483911744780238850/unknown.png


[28-Aug-18 01:12 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/483911786572152832/unknown.png


[28-Aug-18 01:12 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/483911825734500365/unknown.png


[28-Aug-18 01:13 AM] jl777c#5810
that is a loss


[28-Aug-18 01:14 AM] jl777c#5810
when it printed that it won, it should have printed rawhex and txid


[28-Aug-18 01:14 AM] jl777c#5810
does it match


[28-Aug-18 01:19 AM] TonyL#3577
I can't call `getspentinfo` in test-framework atm due to JSONRPC error (tried to input parameters different ways)
Will try to arrange it and get back with results


[28-Aug-18 02:10 AM] TonyL#3577
Aha, I caught it. I'm receiving all `losses` when I'm not broadcast `dicefinish` transaction. If broadcast `dicefinish` results are correct.

Case of not correct status receiving: 

`41e087a3311bf89e395ae1fb60f756dc443b1a0d2e31a653313d094357c58516 winnings 2.00000000 bet 1.00000000 at odds 1:1`

`DEBUG:BitcoinRPC:-125-> dicestatus ["LUCKY", "2700b034a071e0b407c25be5e0c5ee4b91e562ddf31ce3b30bcd4410abc2064a", "41e087a3311bf89e395ae1fb60f756dc443b1a0d2e31a653313d094357c58516"]`

`DEBUG:BitcoinRPC:<-125- {"status": "loss", "result": "success"}`

`DEBUG:BitcoinRPC:-126-> getspentinfo [{"index": 0, "txid": "41e087a3311bf89e395ae1fb60f756dc443b1a0d2e31a653313d094357c58516"}]`

`DEBUG:BitcoinRPC:<-126- {"index": 1, "height": -1, "txid": "dff3814f8438bf3cc45b5388a8ec4981afa14c4adf25ca8b3766478ba2803247"}`

`DEBUG:BitcoinRPC:-127-> getrawtransaction ["dff3814f8438bf3cc45b5388a8ec4981afa14c4adf25ca8b3766478ba2803247", 1]`


[28-Aug-18 02:10 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/483926270514692096/unknown.png


[28-Aug-18 03:51 AM] TonyL#3577
@dukeleto https://github.com/jl777/komodo/pull/855 I've made a PR with new Dice CC tests, please have a look when you'll have some time

{Embed}
https://github.com/jl777/komodo/pull/855
Added more Dice CC tests by tonymorony ¬∑ Pull Request #855 ¬∑ jl7...
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[28-Aug-18 04:30 AM] jl777c#5810
merged


[28-Aug-18 04:30 AM] jl777c#5810
I can only really read C code

{Reactions}
trollface 

[28-Aug-18 04:52 AM] CrisF#3405
Hi, does DICE always send more than bet amount then return some?
In STAKED3 I bet `5`. `getbalance` showed `10` sent and later `5` returned.
The second time I didn't catch it happening.


[28-Aug-18 04:57 AM] jl777c#5810
change?


[28-Aug-18 05:00 AM] CrisF#3405
I didn't see double the amount sent the second time I did it.


[28-Aug-18 05:00 AM] CrisF#3405
Maybe due to timing of the `getbalance`?


[28-Aug-18 05:01 AM] CrisF#3405
Is doulble the bet always sent and I just didn't catch it the second time I tried?


[28-Aug-18 05:02 AM] CrisF#3405
Oh, sorry you mean was change returned?  Yes, it was.


[28-Aug-18 05:07 AM] jl777c#5810
i dont really understand what you are saying happened and why it was wrong


[28-Aug-18 05:07 AM] jl777c#5810
need to get a specific bug that can be demonstrated


[28-Aug-18 05:12 AM] SHossain#0007
@CrisF post the command you used, the HEX value and the output of the hex value


[28-Aug-18 05:12 AM] SHossain#0007
along with your findings.


[28-Aug-18 05:13 AM] SHossain#0007
this will help identify or understand the matter further.


[28-Aug-18 05:15 AM] CrisF#3405
STAKED3```
getbalance
xx91.01827860
staked dicebet LOW 8bd9aa43fa252472aaf1afb9898112074f826da4b119af5b56d2a5f83f6e2159 5 37
{
  "result": "success",
  "hex": "01000000020779390fb395990d26f1bb40fd343ece8b451fc4de7dc85569675c798c6cbc0a000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140db3b30c70859748f53ff01bfe303f31683648ef386f5dcd06f8824414f784d0343b20826d0149182af813fc1e9533dd37af9950163602e6f4d2e269a8b53fd02a100af038001e6a10001ffffffff8155c049028722502165d0aabc497d0ff8230b0725a1493ce6d2f9aed22dfe310000000049483045022100c571cd7afcc3824b735c08414a4779126489fd4db49396ea3a85f40e30857168022004acd2cc56269efea760b358da718ecde1b3a8376f3cc8f7f23d4a1ead428e9f01ffffffff0500e1f50500000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc0065cd1d00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc3527000000000000232102d639dbf28b22fde9d76dcb5fdde4fa2c23b32a1d9dc1d2be0da8af30bbee83f2acbb16cd1d00000000232102d639dbf28b22fde9d76dcb5fdde4fa2c23b32a1d9dc1d2be0da8af30bbee83f2ac00000000000000006d6a4c6ae6424c4f57000000000059216e3ff8a5d2565baf19b1a46d824f07128189b9aff1aa722425fa43aad98b483d07bd64bdfdc465d62e2981433fb248d63a102be67d56fca89476fd085588000000000000000000000000000000000000000000000000000000000000000000000000"
sendrawtransaction
...
022446898f364ffa5f77a55f1d4c458bb2963e21ef4f5f340398d82fb2c6d516
getbalance
xx81.01827860
```


[28-Aug-18 05:17 AM] CrisF#3405
Bet 5
`getbalance` down 10
5 later returned.


[28-Aug-18 05:17 AM] CrisF#3405
Is that always the case?


[28-Aug-18 05:18 AM] CrisF#3405
(STAKED3)


[28-Aug-18 05:21 AM] SHossain#0007
that can mean, you had 1 utxo of 10. When you sent 5 out of the wallet, that used the utxo and showed 10 gone, until the next block where it was confirmed. so, you could see 5 came back.


[28-Aug-18 05:22 AM] CrisF#3405
Great, thanks!


[28-Aug-18 07:11 AM] dukeleto#7326
@TonyL you need to send a hash of arguments to `getspentinfo` and it looks like you are sending an array of arguments


[28-Aug-18 07:12 AM] dukeleto#7326
`rpc.getspentinfo( { ... } )` instead of `rpc.getspentinfo( ... )`


[28-Aug-18 07:13 AM] dukeleto#7326
you are sending a hash on the CLI, with key/value pairs, but looks like trying to use an array of values via your paste above


[28-Aug-18 08:27 AM] siu#3920
why im getting ```{
    "result": {
        "result": "error",
        "error": "Diceinit error in status"
    },
    "error": null,
    "id": null
}```


[28-Aug-18 08:27 AM] siu#3920
in dic status?


[28-Aug-18 09:01 AM] dukeleto#7326
because DiceInit() function failed


[28-Aug-18 09:01 AM] dukeleto#7326
and it's a bug the way it returns that JSON


[28-Aug-18 09:01 AM] dukeleto#7326
i've noticed it but not fixed it yet


[28-Aug-18 09:02 AM] dukeleto#7326
@siu exactly how do you trigger that issue?


[28-Aug-18 09:03 AM] dukeleto#7326
maybe @TonyL can write a test üòÉ


[28-Aug-18 09:03 AM] siu#3920
do dicebet


[28-Aug-18 09:03 AM] siu#3920
sendrawtransaction


[28-Aug-18 09:03 AM] dukeleto#7326
it is a sign of an actual problem


[28-Aug-18 09:03 AM] siu#3920
and when i check dicestatus that is the response


[28-Aug-18 09:03 AM] dukeleto#7326
previoiusly, you would get a null json response or some crazy c++ error


[28-Aug-18 09:03 AM] dukeleto#7326
now it tells you vaguely why


[28-Aug-18 09:03 AM] dukeleto#7326
so something is not quite right


[28-Aug-18 09:03 AM] siu#3920
ok


[28-Aug-18 09:03 AM] siu#3920
im rebuilding and will try again


[28-Aug-18 09:04 AM] dukeleto#7326
if you can create a gist of the exact full commands + responses to generate that error, that helps James to debug and me + Tony to write automated tests


[28-Aug-18 09:04 AM] dukeleto#7326
and specify which chain you are running it against, because we have a lot of chains going around


[28-Aug-18 09:13 AM] Deleted User#0000
DICE is playing up on STAKED3 aswell.


[28-Aug-18 09:13 AM] Deleted User#0000
Found a few issues aleady.


[28-Aug-18 09:13 AM] Deleted User#0000
99% of the issue seems to be back logged mempool


[28-Aug-18 09:15 AM] siu#3920
ok


[28-Aug-18 09:16 AM] Deleted User#0000
``` ./pos-cli getrawmempool | jq length
132
```


[28-Aug-18 09:16 AM] Deleted User#0000
lol


[28-Aug-18 09:16 AM] Deleted User#0000
blocks are not even full üòï


[28-Aug-18 09:58 AM] dukeleto#7326
some cc rpc's must have confirmed xtns to work, if a funding xtn is in the mempool still for whatever reason, things will fail


[28-Aug-18 10:05 AM] jl777c#5810
only rewards spending is able to spend from mempool


[28-Aug-18 11:19 AM] siu#3920
ohh... it was a typo i had.


[28-Aug-18 11:19 AM] siu#3920
dicestatus is working as expected


[28-Aug-18 03:44 PM] siu#3920
how long can the description of a token can be?


[28-Aug-18 04:10 PM] TonyL#3577
@dukeleto `getspentinfo` not parsing hash of arguments at the moment


[28-Aug-18 05:34 PM] Deleted User#0000
Its not funding txs, its dice bet txs... Trying to send 10 per block and my mempool was just piling up to over 100 transactions, only on the node dice bet is called BTW, my other nodes don't have such a huge mempool. Will look further into this today it was super late so just left it spamming while I slept.


[28-Aug-18 06:01 PM] Alright#0419
@Deleted User are the ones not being accepted to the other nodes being spent from the mempool?


[28-Aug-18 06:05 PM] Deleted User#0000
I need to check this properly, all I know is that the mempool was longer on one node thatn on my others. Then I went to sleep


[28-Aug-18 06:06 PM] Deleted User#0000
I have wuite a few thigns to get through today, but will do this first.


[28-Aug-18 06:10 PM] Alright#0419
Have a feeling that's what is happening


[28-Aug-18 06:10 PM] Alright#0419
had the same experience on POSTEST a couple weeks ago when I was trying to fill blocks


[28-Aug-18 06:51 PM] dukeleto#7326
@TonyL show me a failing test for `getspentinfo`, of how you expect it to work


[28-Aug-18 06:54 PM] TonyL#3577
@dukeleto 
I've tried:
rpc.getspentinfo(betid, 0)
rpc.getspentinfo(betid,"0")

```
DEBUG:BitcoinRPC:-96-> getspentinfo ["e0a6afd8cc5b28579a84ef3f07af875f75c59f06671294f93d5bea6230ef6c61", "0"]
JSONRPC error: getspentinfo
```
```
DEBUG:BitcoinRPC:-96-> getspentinfo ["a0f7c105a7ab869720880922b5e021285ba0867bae29ad765dd1d5dae74850a8", 0]
JSONRPC error: getspentinfo
```


[28-Aug-18 06:55 PM] TonyL#3577
In cli such command not work as well because of JSON parcing: `komodo-cli getspentinfo e0a6afd8cc5b28579a84ef3f07af875f75c59f06671294f93d5bea6230ef6c61 0`
error: Error JSON:e0a6afd8cc5b28579a84ef3f07af875f75c59f06671294f93d5bea6230ef6c61


[28-Aug-18 06:56 PM] TonyL#3577
So just to get this printout when troubleshooted I used it like a:
```
    json = {'txid' : "", 'index' : 0}
    json['txid'] = betid
    spentinfo = rpc.getspentinfo(json)
```


[29-Aug-18 02:23 AM] grewalsatinder#9653
@jl777c can `tokenlist` api reflect name of the token too?


[29-Aug-18 02:25 AM] grewalsatinder#9653
I'm going to show tokenlist output on default page in the GUI


[29-Aug-18 02:25 AM] grewalsatinder#9653
I think of displaying the name just like we see our usernames here on discord


[29-Aug-18 02:26 AM] grewalsatinder#9653
like:
name: TESTTOKEN
tokenid: 012d1e11dd98e5963c49895640d6cc6ed5d24a30cbe07fa4aeaf45618cbaa9c9

will display it like:
TESTTOKEN:a9c9


[29-Aug-18 02:27 AM] grewalsatinder#9653
with different color


[29-Aug-18 02:27 AM] grewalsatinder#9653
just a quick thought on how to differentiate a duplicate named token


[29-Aug-18 02:27 AM] grewalsatinder#9653
we had such issues on NXT


[29-Aug-18 02:32 AM] jl777c#5810
tokenlist would need to do an extra call for each, the idea is that the GUI will issue a tokeninfo call for new tokenids it sees


[29-Aug-18 02:32 AM] TonyL#3577
@grewalsatinder I've initialised such list of tokens with names this way:
```
    tokens_ids = json.loads(check_output(
    ["komodo-cli","-ac_name="+ac_name,"tokenlist"]))
    tokens_list = {}

    for token_id in tokens_ids:
        tokens_info = json.loads(check_output(
        ["komodo-cli","-ac_name="+ac_name,"tokeninfo",token_id]))
        tokens_list[tokens_info["name"]] = tokens_info["tokenid"]
    return tokens_list
```
Worked pretty fast. I guess it's possible to implement something similar to sync only server each X seconds and clients will get output from this static list


[29-Aug-18 02:32 AM] grewalsatinder#9653
hmm... in that case it'll be multiple API calls case to single refresh button or refresh call.


[29-Aug-18 02:33 AM] grewalsatinder#9653
if 1000 tokens then 1000 API calls


[29-Aug-18 02:33 AM] grewalsatinder#9653
1 tokenlist call + 1000 tokeninfo calls


[29-Aug-18 02:33 AM] grewalsatinder#9653
1001


[29-Aug-18 02:34 AM] jl777c#5810
why?


[29-Aug-18 02:34 AM] jl777c#5810
you cant remember which tokenid you already have?


[29-Aug-18 02:34 AM] jl777c#5810
and then it would just be a call for any new ones


[29-Aug-18 02:34 AM] grewalsatinder#9653
coz I'm displaying the list of tokens with names or other info in table view on default load.


[29-Aug-18 02:35 AM] jl777c#5810
you cant remember which tokenid you already have? along with its info
and then it would just be a call for any new ones


[29-Aug-18 02:35 AM] TonyL#3577
You can keep the list of existing tokens and call token info only for new ones which appeared in tokenlist I guess


[29-Aug-18 02:35 AM] jl777c#5810
this is what I keep saying


[29-Aug-18 02:35 AM] jl777c#5810
is that a problem to do for the GUI?


[29-Aug-18 02:36 AM] jl777c#5810
we need to burden the api to do extra calls for every tokenlist call made?


[29-Aug-18 02:36 AM] grewalsatinder#9653

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/484295207974600705/Screen_Shot_2018-08-29_at_9.35.58_PM.png


[29-Aug-18 02:36 AM] grewalsatinder#9653
@jl777c it not the matter of I can remember or not.
it's how a user know which token the user wants to go with


[29-Aug-18 02:36 AM] jl777c#5810
cant you create a map of txid to display data


[29-Aug-18 02:36 AM] grewalsatinder#9653
I'm thinking of user's ui flow


[29-Aug-18 02:37 AM] jl777c#5810
then given a txid, you look up the tokeninfo data from cache, if not there, then issue call and add to cache


[29-Aug-18 02:37 AM] jl777c#5810
but tokeninfo call is very fast anyway


[29-Aug-18 02:37 AM] jl777c#5810
not sure how this impacts ui flow in any way at all


[29-Aug-18 02:38 AM] jl777c#5810
making the tokenlist rpc call issue N txid lookups for every time it is called, forever, to make it more convenient for gui is not a good tradeoff


[29-Aug-18 02:38 AM] jl777c#5810
this is something the GUI side needs to deal with


[29-Aug-18 02:38 AM] TonyL#3577
What if GUI app server side call tokenlist -> tokeinfo for new tokens each few minutes, save this data, and user on refresh just getting this saved data without any additional calls to API


[29-Aug-18 02:38 AM] jl777c#5810
store the tokeninfo associated with the tokenid


[29-Aug-18 02:38 AM] jl777c#5810
and just use the stored data


[29-Aug-18 02:39 AM] jl777c#5810
if the user refreshes, then it takes 2 seconds and does all the rpc calls again


[29-Aug-18 02:39 AM] jl777c#5810
what is the problem?


[29-Aug-18 02:41 AM] grewalsatinder#9653
okay, will do it that way then.
will think of using the custom UI side cache


[29-Aug-18 02:42 AM] grewalsatinder#9653
on refresh user won't get any api calls triggered. API calls will triggered on blocknotify call in backend.


[29-Aug-18 02:42 AM] grewalsatinder#9653
thanks for both of your replies üëç


[29-Aug-18 02:43 AM] TonyL#3577
Hmm, guess there might be a problem in case of millions tokens existing, maybe will be good to separate stored data by alphabet letters or something like that for faster backends calls.
Like a if token name start from A he go straight to search in a smaller file which contains only A tokens


[29-Aug-18 02:43 AM] grewalsatinder#9653
sorting can be taken care by JS, that shouldn't be issue.


[29-Aug-18 02:44 AM] grewalsatinder#9653
but on startup loading time the app will call all the tokenlist and tokeninfo calls. no matter if 4 or 1000 or mil. will save those in UI's cache system


[29-Aug-18 02:45 AM] grewalsatinder#9653
will use blocknotify feature to trigger update to the API call to only get update of new tokenid and add it to existing


[29-Aug-18 02:46 AM] grewalsatinder#9653
either I have to keep this info also saved on local storage for next quick start or may be the next restart will also fetch the same data again to get updates


[29-Aug-18 02:47 AM] jl777c#5810
reprocessing every block seems like overkill


[29-Aug-18 02:48 AM] jl777c#5810
maybe just once per hour is enough, so 59 of 60 blocknotifies can be skipped


[29-Aug-18 02:48 AM] jl777c#5810
as long as there is a button for the user to trigger a new processing that should keep the load to a minimum


[29-Aug-18 02:48 AM] grewalsatinder#9653
okay, can do. üôÇ üëç


[29-Aug-18 05:34 AM] siu#3920
@grewalsatinder if you need some testing , let me know


[29-Aug-18 05:36 AM] grewalsatinder#9653
will do mate.... üôÇ


[29-Aug-18 05:37 AM] grewalsatinder#9653
consider my work a student level work this time. It's not gonna be end user anyway. all a testers area... so will let you guys know soon


[29-Aug-18 05:47 AM] siu#3920
sure,no problem. We can later work on taking it further.


[29-Aug-18 05:47 AM] grewalsatinder#9653
agree


[29-Aug-18 06:00 AM] siu#3920
i just had an idea of how to use tokens and oracles.


[29-Aug-18 06:00 AM] siu#3920
for example a BTC value based token could be done.


[29-Aug-18 06:01 AM] siu#3920
people lock 100btc in an address and the token can use oracles to follow btc market value of those tokens based on the price of btc


[29-Aug-18 06:01 AM] siu#3920
a decentralized BTC etf or something similar


[29-Aug-18 06:02 AM] siu#3920
mutual fund of sorts.


[29-Aug-18 06:04 AM] jl777c#5810
yes, i had the similar idea


[29-Aug-18 06:09 AM] siu#3920
that way a shorting token could be done too


[29-Aug-18 06:09 AM] siu#3920
just create a token to track the inverse value of that other btc fund.


[29-Aug-18 06:13 AM] siu#3920
```{
    "result": {
        "result": "success",
        "tokenid": "b2be0097c0c5597501ab1652618f37aa35573acf7fc83eaa993ad1d14147a1fc",
        "owner": "02bc4c43e24873cf223bee487d78605ec631380940713c6779963018ec711f5dde",
        "name": "BTCF",
        "supply": 21000000,
        "description": "Bitcoin Fund, a decentralized Smart contract enforced fund for tracking bitcoin price. This fund will hold X quantity of bitcoin in a locked address. The token generated will track the value of the bitcoins locked in the address using oracle smart contracts to track global average of bitcoin price."
    },
    "error": null,
    "id": null
}```


[29-Aug-18 06:13 AM] jl777c#5810
yes, bitmex can be done, but need the foundational CC in place first


[29-Aug-18 06:20 AM] siu#3920
which is the oracle?


[29-Aug-18 06:20 AM] jl777c#5810
external data -> blockchain


[29-Aug-18 06:22 AM] siu#3920
that is some big milestone


[29-Aug-18 06:23 AM] grewalsatinder#9653
I guess with oracles activated the potential value will 10x more than smart contract enabled chain, which is already 10x of current in my views :abusedsmily:


[29-Aug-18 06:26 AM] siu#3920
we need a billion dollar investment on KMD.... :p


[29-Aug-18 06:27 AM] siu#3920
if btc is https and zcash is https then kmd cc contracts are like PHP


[29-Aug-18 06:27 AM] siu#3920
is this a correct assertion?


[29-Aug-18 06:33 AM] jorian#4555
btc is silver, zcash is gold then kmd is platinum :p


[29-Aug-18 06:33 AM] jorian#4555
https vs php is not a real comparison :p


[29-Aug-18 06:35 AM] siu#3920
lol


[29-Aug-18 06:35 AM] siu#3920
oh well


[29-Aug-18 06:41 AM] jl777c#5810
mapping currencies to protocols and language, this is like comparing mammals to reptiles to chopsticks

{Reactions}
üçú 

[29-Aug-18 06:44 AM] siu#3920
cc contracts are not a currency


[29-Aug-18 07:36 AM] dukeleto#7326
@TonyL can you show me a use of `getspentinfo` from the CLI that works?


[29-Aug-18 08:27 PM] TonyL#3577
@dukeleto ```./komodo-cli -ac_name=AT7 getspentinfo '{"txid": "e343ce51cbc0518651fb101bf0ae09db4e18ce2d5f25c82db1dbde1938fcb561", "index": 0}'```


[30-Aug-18 05:43 AM] TonyL#3577
@dukeleto 
Just started to write some new tests for reward CC.  I wonder if we have to set some length check for reward plan name?
I saw your implementation for dice:
```#define PLAN_NAME_MAX   8
#define VALID_PLAN_NAME(x)  (strlen(x) <= PLAN_NAME_MAX)```

8 might be to small for this one since there is no description field. Is there some logic which making non reasonable names > 8 chars as in dice plans? (i'm sank in C code lol)


[30-Aug-18 08:51 AM] dukeleto#7326
@TonyL that VALID_PLAN_NAME should go into a header file where all CC stuff can access it


[30-Aug-18 08:51 AM] dukeleto#7326
@TonyL plan names are actually constrained to 8 chars, that data is stored in transactions as 1 byte, so it can't be larger


[30-Aug-18 08:52 AM] dukeleto#7326
@TonyL and I don't quite understand what you mean by ` Is there some logic which making non reasonable names > 8 chars as in dice plans?`


[30-Aug-18 04:45 PM] TonyL#3577
@dukeleto It's in rpcwallet.cpp atm but using only for dice plan name validation.
I meant: is 1 byte limitation same for dice and rewards plans names?
Because for token for example there is 32 chars name limitation.


[30-Aug-18 06:08 PM] dukeleto#7326
token names are different than plan names


[30-Aug-18 06:09 PM] dukeleto#7326
plan names, in all CC's, can be at most 8chars, because they are stored as 1 byte in op_return data


[30-Aug-18 06:09 PM] dukeleto#7326
token names can be 32 chars and descriptions 4096 chars


[30-Aug-18 08:25 PM] TonyL#3577
@dukeleto  Thanks, so we have to set limitation for rewards plan as well.


[30-Aug-18 11:57 PM] jl777c#5810
it is stored in sbits, uint64_t


[31-Aug-18 03:02 AM] TonyL#3577
@dukeleto I've added same validation for rewards CC (compiled and tested): https://github.com/tonymorony/komodo/commit/bad5d1c3bde49ab14d8436d040020ba340d147b3
If it's ok I'll add it to my next PR with rewards tests

{Embed}
https://github.com/tonymorony/komodo/commit/bad5d1c3bde49ab14d8436d040020ba340d147b3
Validate plan name for Rewards CC ¬∑ tonymorony/komodo@bad5d1c
https://images-ext-1.discordapp.net/external/_FZ-6atALXBjBvMLVC1JBeWG05jXc2w_TXrppH7V6kE/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/24797699


[31-Aug-18 05:41 AM] jl777c#5810
I dont have it actually doing anything other than creating a channel and some info calls, but channels CC rpc set is mostly set:
channelsaddress destpubkey
channelscollect paytxid origtxid n amount
channelsinfo
channelsopen destpubkey numpayments payment
channelspayment prevtxid origtxid n amount
channelsrefund stoptxid origtxid
channelsstop destpubkey origtxid


[31-Aug-18 06:17 AM] siu#3920
that is in FSM?


[31-Aug-18 06:17 AM] siu#3920
can it be tested?


[31-Aug-18 07:25 AM] siu#3920
anyone here to test channels?


[31-Aug-18 07:30 AM] siu#3920
im confused on how it should work


[31-Aug-18 07:31 AM] siu#3920
opened a channel ```{
    "method":"channelsopen",
"params": ["02bc4c43e24873cf223bee487d78605ec631380940713c6779963018ec711f5dde","2","1"]
}```


[31-Aug-18 07:31 AM] siu#3920
```{
    "method":"sendrawtransaction",
"params": ["0100000001fca14741d1d13a99aa3ec87fcf3a5735aa378f615216ab017559c5c09700beb20200000049483045022100d8fd252501961f707dbd5bfd74e0355b9c09599248f044ad176f040573a0d4e002200b7b7c304410b0f8bffbd50c71d1ba3e47725b9bcf651a854106deab4e8060d401ffffffff050200000000000000302ea22c8020e5dd27eb50c57d2775708000d01d1d808138f585b3c49684f81e6b0adb67f66781031210008203000401cc1027000000000000302ea22c8020e1c3391369695ca664ea0a37b7df5b3d501aafcaa4c8fac6d8906391392953f08103120c008203000401cc1027000000000000302ea22c8020e1c3391369695ca664ea0a37b7df5b3d501aafcaa4c8fac6d8906391392953f08103120c008203000401cc6e97593a00000000232102bc4c43e24873cf223bee487d78605ec631380940713c6779963018ec711f5ddeac0000000000000000756a4c72eb4f2102bc4c43e24873cf223bee487d78605ec631380940713c6779963018ec711f5dde2102bc4c43e24873cf223bee487d78605ec631380940713c6779963018ec711f5dde020000000100000000000000d3fcf3c5809ad486207ec5e663f8da7cff1dfc3f36d9893a1f50bbe3195fe36200000000"]
}
```


[31-Aug-18 07:31 AM] siu#3920
got his txid: ```{
    "result": "56bf4bdba9852fe24883a38a35b2d2d963544f327ef14554651825619ebfa389",
    "error": null,
    "id": null
}```


[31-Aug-18 07:31 AM] siu#3920
now what?


[31-Aug-18 07:43 AM] jl777c#5810
"I dont have it actually doing anything other than creating a channel and some info calls"


[31-Aug-18 07:44 AM] jl777c#5810
what would you expect to happen?


[31-Aug-18 07:44 AM] jl777c#5810
channelsinfo and channelsaddress is about it


[31-Aug-18 07:44 AM] jl777c#5810
for now


[31-Aug-18 07:47 AM] dukeleto#7326
i can start writing tests for channel stuff


[31-Aug-18 07:50 AM] jl777c#5810
dont start until all the other CC are done. The rpc calls are still subject to some changes, especially the parameters


[31-Aug-18 07:50 AM] jl777c#5810
that being said, I think having the rpc calls listed allows to start thinking about how to test them


[31-Aug-18 07:50 AM] jl777c#5810
also, feel free to ask questions as to what the calls do


[31-Aug-18 07:52 AM] dukeleto#7326
@jl777c you are right, I should concentrate on the 4 main ones. I have no idea exactly how close to "100% coverage of all 4 main CC rpcs" but my guess is somewhere near 50%


[31-Aug-18 07:57 AM] siu#3920
i already did the insomnia setup for the calls.


[01-Sep-18 01:08 AM] TonyL#3577
https://github.com/jl777/komodo/pull/858 some work around rewards CC
@jl777c @dukeleto rewrote current rewards tests (there was misinterpretation of  some of this CC methods) + added some new

{Embed}
https://github.com/jl777/komodo/pull/858
Added more rewards CC tests by tonymorony ¬∑ Pull Request #858 ¬∑ ...
fixed existing tests (were very strange things like an attempt to call funds adding transaction instead of fundslock transaction, or calling some methods without add funding txid instead of funding...
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[01-Sep-18 01:16 AM] TonyL#3577
@dukeleto you named and calling `rewardsaddfunding` txid as `fundingtxid` but  `fundingtxid`  is a `rewardscreatefunding` txid


[01-Sep-18 01:17 AM] TonyL#3577
`rewardsaddfunding` just adding more rewards payouts funds to plan


[01-Sep-18 01:18 AM] dukeleto#7326
@TonyL awesome, nice work üëç

{Reactions}
üëç (2) 

[01-Sep-18 01:21 AM] TonyL#3577
@dukeleto  Thanks! 
Thinking now how to test properly rewards unlock :/ looks like only manual way is good for it since `rewards amount` should be > than `tx fee` and if add timeout before claiming - auto-tests will take to much time


[02-Sep-18 07:28 AM] TonyL#3577
@grewalsatinder https://github.com/KomodoPlatform/Mastering_CryptoConditions/pull/3 please merge when you'll have a time. There is a mentioning of Russian translation in your ReadMe now, so I'll try to speedup üòÉ

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/pull/3
Translated first 3 chapters by tonymorony ¬∑ Pull Request #3 ¬∑ Ko...
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[02-Sep-18 07:30 AM] grewalsatinder#9653
merged. thanks @TonyL üëç

{Reactions}
üëç 

[02-Sep-18 08:38 AM] jl777c#5810 (pinned)
implemented oracles CC (without validation yet) and still some bugs, but I have the rpc interface mostly done:
oraclesaddress [pubkey]
oraclescreate name description format
oraclesdata oracletxid hexstr
oraclesinfo oracletxid
oracleslist
oraclesregister oracletxid datafee
oraclessubscribe oracletxid publisher datafee


[02-Sep-18 08:39 AM] jl777c#5810
I ended up using the oracle CC to allow people to create data subscription services


[02-Sep-18 08:40 AM] jl777c#5810
anybody can create a new oracle data description, and this txid is used for most of the other rpc calls.
given an oracletxid, a pubkey will register as a data provider with a datafee for each data post. I guess I need to allow a data provider to make a post without payment, so they can develop their own reputation.


[02-Sep-18 08:42 AM] jl777c#5810
given a data provider, anybody can then pay them to provide data for everybody else. this allows the data provider to post data and get paid the datafee per post. Likely this CC can support an entire data sub-economy, but there is no point to point data subscription that is directly supported. However, even this is possible by having the data that is posted being encrypted to the subscriber. in this case, you need to create a different oracletxid per subscriber


[02-Sep-18 08:44 AM] jl777c#5810
this rpc interface is pretty much set, just might change due to bugs found. It will act as a data source for higher level CC, like prices and pegs CC

{Reactions}
üòÉ (3) üëèüèΩ (3) üíØ (3) üëçüèΩ (4) üöÄ (2) üî• (2) Komodo (3) 

[02-Sep-18 10:19 AM] Alright#0419 (pinned)
`./komodod -ac_cc=1 -ac_name=ORACLE -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -addnode=195.201.20.230 -addnode=195.201.137.5`
build from FSM branch


[02-Sep-18 10:19 AM] Alright#0419
Pinned a message.


[02-Sep-18 10:19 AM] Alright#0419
Pinned a message.


[02-Sep-18 10:22 AM] jl777c#5810
there will definitely be bugs with oracles, as I didnt bother to test it at all


[02-Sep-18 10:22 AM] jl777c#5810
and no datapost will work as validation is disabled still, but all the other rpc calls could actually work


[02-Sep-18 10:32 AM] Alright#0419
are the vins/vouts for different txs documented somewhere?


[02-Sep-18 10:33 AM] SHossain#0007
i'll update the testplan in few hours


[02-Sep-18 10:35 AM] TonyL#3577
@Alright As I remember it's documented as commentaries to CCs smarts code


[02-Sep-18 10:35 AM] Alright#0419
yea I see the CCOracle file, but there isn't much in it


[02-Sep-18 10:36 AM] Alright#0419
https://github.com/jl777/komodo/blob/FSM/src/cc/oracles.cpp

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/oracles.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[02-Sep-18 10:36 AM] Alright#0419
ahh looking in the wrong place üòõ


[02-Sep-18 10:37 AM] jl777c#5810
oracles CC is less than 500 lines so far


[02-Sep-18 10:37 AM] jl777c#5810
but it is quite simple so i doubt it will need much more


[02-Sep-18 10:38 AM] jl777c#5810
it is like a jigsaw puzzle to define the rpc calls for the second set of CC contracts


[02-Sep-18 11:02 AM] Alright#0419
```
./komodo-cli -ac_name=ORACLE oraclesdata 9d353ee9f6f729c3f383b0bed2c2bb9e829c4b44ae52141844bae5c1166455bf FFFFFFFFFFFFFFFFFFFFFFFFF
{
  "result": "error",
  "error": "couldnt publish data with oracle txid"
}
```
```
datafee 0.00000000 is illegal
```


[02-Sep-18 11:03 AM] Alright#0419
what is the "format" for oraclescreate


[02-Sep-18 11:06 AM] Alright#0419
did an oraclecreate an it has an additional vout than what the doc specifies 
```
  "vout": [
    {
      "value": 0.00010000,
      "valueSat": 10000,
      "n": 0,
      "scriptPubKey": {
        "asm": "038c1d42db6a45a57eccb8981b078fb7857b9b496293fe299d2b8d120ac5b5691a OP_CHECKSIG",
        "hex": "21038c1d42db6a45a57eccb8981b078fb7857b9b496293fe299d2b8d120ac5b5691aac",
        "reqSigs": 1,
        "type": "pubkey",
        "addresses": [
          "RHkFKzn1csxA3fWzAsxsLWohoCgBbirXb5"
        ]
      }
    },
    {
      "value": 1000.04284175,
      "valueSat": 100004284175,
      "n": 1,
      "scriptPubKey": {
        "asm": "022dd04a2f452838f8c047e6260e798c67559e4e73e93b0794340075fb4ed6204d OP_CHECKSIG",
        "hex": "21022dd04a2f452838f8c047e6260e798c67559e4e73e93b0794340075fb4ed6204dac",
        "reqSigs": 1,
        "type": "pubkey",
        "addresses": [
          "RKh32vqEgmGrK68iTXAo1ey5yyYLbnPeZ1"
        ]
      }
    },
    {
      "value": 0.00000000,
      "valueSat": 0,
      "n": 2,
      "scriptPubKey": {
        "asm": "OP_RETURN ec4307416c7269676874026f6b05776861742e",
        "hex": "6a13ec4307416c7269676874026f6b05776861742e",
        "type": "nulldata"
      }
    }
  ]
```


[02-Sep-18 11:09 AM] Alright#0419
sent way too many coins to the marker address


[02-Sep-18 11:09 AM] jl777c#5810
change output


[02-Sep-18 11:10 AM] Alright#0419
Oh sorry, that's not the marker addresss


[02-Sep-18 11:10 AM] Alright#0419
the change


[02-Sep-18 11:11 AM] Alright#0419
what is the `format` value for `oraclescreate`


[02-Sep-18 11:11 AM] jl777c#5810
updated docs


[02-Sep-18 11:11 AM] jl777c#5810
format is just a string for now, I havent bothered to define it yet as oraclesdata is not yet


[02-Sep-18 11:11 AM] jl777c#5810
just getting the basics in place first


[02-Sep-18 11:12 AM] Alright#0419
`./komodo-cli -ac_name=ORACLE oraclesdata 9d353ee9f6f729c3f383b0bed2c2bb9e829c4b44ae52141844bae5c1166455bf FFFFFFFFFFFFFFFFFFFFFFFFF` is this the proper format for oraclesdata?


[02-Sep-18 11:12 AM] jl777c#5810
format is just a string for now, I havent bothered to define it yet as oraclesdata is not yet


[02-Sep-18 11:13 AM] Alright#0419
So I created one, and now I'm trying to add data to it


[02-Sep-18 11:13 AM] jl777c#5810
oraclesdata is not yet


[02-Sep-18 11:13 AM] jl777c#5810
that means it wont work


[02-Sep-18 11:13 AM] Alright#0419
but i'm getting `datafee 0.00000000 is illegal`


[02-Sep-18 11:13 AM] jl777c#5810
since it isnt really implemented yet


[02-Sep-18 11:13 AM] jl777c#5810
how many times do I have to repeat that it is not yet working


[02-Sep-18 11:13 AM] jl777c#5810
as I have not completed it yet


[02-Sep-18 11:13 AM] jl777c#5810
not yet


[02-Sep-18 11:13 AM] jl777c#5810
not working yet


[02-Sep-18 11:13 AM] Alright#0419
heh üòÖ sorry


[02-Sep-18 11:13 AM] jl777c#5810
nope, still not working


[02-Sep-18 11:13 AM] jl777c#5810
time passes


[02-Sep-18 11:13 AM] jl777c#5810
still not working


[02-Sep-18 11:14 AM] jl777c#5810
even more time passes


[02-Sep-18 11:14 AM] TonyL#3577
Guys, I just checked it and it's not working ü§î


[02-Sep-18 11:14 AM] Alright#0419
so anything worthwhile to test for it yet?


[02-Sep-18 11:14 AM] jl777c#5810
most everything OTHER than oraclesdata could work


[02-Sep-18 11:14 AM] Alright#0419
üëå


[02-Sep-18 11:14 AM] jl777c#5810
but oraclesdata will not work


[02-Sep-18 11:15 AM] jl777c#5810
even if you got it to work, it wont be validated


[02-Sep-18 11:15 AM] jl777c#5810
since validation is not yet done


[02-Sep-18 11:15 AM] jl777c#5810
even after another 12 seconds....


[02-Sep-18 11:15 AM] jl777c#5810
still not yet done


[02-Sep-18 11:15 AM] jl777c#5810
I defined and implemented most of the oracles CC, but oraclesdata is not done yet


[02-Sep-18 11:15 AM] jl777c#5810
next time I wont bother to announce until it is all done?


[02-Sep-18 11:16 AM] jl777c#5810
but i thought it would be useful for some to know the type of rpc that will be there, when it is all done


[02-Sep-18 11:17 AM] Alright#0419
yea will be useful, I'll get familiar with the vins/vouts of the other commands


[02-Sep-18 11:37 AM] TonyL#3577
IoT on UTXO ü§î Looks like it's a very good time to finally buy Raspberry PI


[02-Sep-18 11:37 AM] jl777c#5810
IoT on UTXO?


[02-Sep-18 11:38 AM] TonyL#3577
Just thinking about different types of oracles - physical devices which sending data to this CC


[02-Sep-18 11:39 AM] jl777c#5810
oh, yes, most of the data services would just need to run some simple price polling software


[02-Sep-18 11:39 AM] jl777c#5810
i plan to port most of the pax pricing into some standalone datafeeds


[02-Sep-18 11:40 AM] TonyL#3577
First idea was to connect it with Amazon IOT button for most basic demo making - it's using now for shopping, clicked button -> lambda function -> ordered good


[02-Sep-18 11:40 AM] jl777c#5810
for that, maybe the triggers CC would be better


[02-Sep-18 11:41 AM] TonyL#3577
Yep, but then I've recognised so better to start from let's say temperature sending from thermometer


[02-Sep-18 11:41 AM] TonyL#3577
Like a data which can affect on some financial agreement conditions


[02-Sep-18 11:41 AM] jl777c#5810
yes, oracle CC can do custom things, like some arbiter determining one outcome vs.another


[02-Sep-18 11:42 AM] jl777c#5810
it is to allow converting (any) offchain event into an onchain one


[02-Sep-18 11:42 AM] jl777c#5810
you do need to trust the pubkeys to provide good data


[02-Sep-18 11:42 AM] jl777c#5810
however, there will be correlation functionality that will treat a bundle of data providers for the same numerical values


[02-Sep-18 11:43 AM] jl777c#5810
it is all evolving together, so now is the time for specific requests


[02-Sep-18 12:03 PM] TonyL#3577
Most interesting is how data from oracle CC can be used in other CCs.
Let's say I made a payment CC for some goods delivery. Receiver locked a payment in CC which connected to oracle, and oracle connected to GPS tracker. Let's say it's just one of contract conditions but to simplify I'll think that's the only. GPS tracker sent data that truck is on place (in simplification it means that goods are in it and we have a good arbitrary system). So now payment CC should unlock payment of buyer to goods deliver.
Have I use this payment CC as a subscriber on oracle CC to get some kind of boolean if condition met (received or not)?
Maybe it's good idea to add some logic for conditions creating to oracle CC


[02-Sep-18 12:05 PM] TonyL#3577
And maybe there should be some labels for data providers (e.g. names) and some data structures (like a data-sets). One data provider can provide different types of data, if there will be a data sets he'll not need to proof that he is trustable and that he is he each time when he want to provide different type of data (e.g. gps coordinates except of temperature).  Perhaps this will make the system easier to understand. Not sure about it, it's after midnight already and brains work not crystal.
But most interesting question for me is how to use data from oracle CC in other CCs for sure.


[02-Sep-18 12:06 PM] jl777c#5810
i dont want to conflate oracle with anything else, it will get complex enough to handle the mapping of all the possible offchain -> onchain


[02-Sep-18 12:07 PM] jl777c#5810
there will be other CC that will be able to specific oracltxid and some sort of evaluation of the data, with funds that could be released based on that, or maybe an asset transferred


[02-Sep-18 12:08 PM] TonyL#3577
Got it üëç


[02-Sep-18 12:08 PM] jl777c#5810
like the assets CC, oracles CC is a level0 contract


[02-Sep-18 12:09 PM] jl777c#5810
meaning it does what it does and other things will use its outputs


[02-Sep-18 12:09 PM] jl777c#5810
i have triggers CC and payments CC and FSM CC the ones that are higher level to use the other CC contract values


[02-Sep-18 12:25 PM] TonyL#3577
Looks like only this CC opening possibilities for more than 256 new ones. Books, documents, contracts, science researches data, .... -> everything will be possible to move on chain. Even Cardi B songs lyrics can became immutable and trustable if needed.


[02-Sep-18 12:26 PM] jl777c#5810
yes, but one oracles CC can create unlimited number of data subscriptions


[02-Sep-18 12:27 PM] TonyL#3577
Aha, I meant new ways of data usage by these 256 - like a much much more possibilities to the whole system


[02-Sep-18 12:27 PM] jl777c#5810
yes, that is why I am deferring on app specific CC for now


[02-Sep-18 12:28 PM] jl777c#5810
also, the 256 limit is not set in stone, it is easily expandable to 65536 or 2^64


[02-Sep-18 12:28 PM] jl777c#5810
but I think with just 32, we can get a lot of possible dapps via rpc only


[02-Sep-18 12:29 PM] TonyL#3577
are you considering voting/arbitrary contracts as a cores?


[02-Sep-18 12:30 PM] jl777c#5810
some basic voting will be part of prices, maybe even triggers CC


[02-Sep-18 12:37 PM] TonyL#3577
great, now my now my subconscious will work on new types of oracles application while sleeping üòÉ . thanks for sharing @jl777c !


[02-Sep-18 07:32 PM] grewalsatinder#9653
Wasn't expecting Oracle so soon from kmd!! Amazing... üòÉ


[02-Sep-18 09:32 PM] PTYX#6840
When atomic swaps with Cc?

{Reactions}
üòÉ (2) shexy (2) 

[03-Sep-18 01:05 AM] jl777c#5810
that doesnt make sense. atomic swaps are independent from CC


[03-Sep-18 07:09 AM] siu#3920
So. Will it he possible to pull barterdex price feeds using oracle?


[03-Sep-18 07:22 AM] jl777c#5810
oracle can be any data


[03-Sep-18 07:22 AM] jl777c#5810
oracles in FSM is now feature complete, but not tested yet:
 An oracles CC has the purpose of converting offchain data into onchain data
 simplest would just be to have a pubkey(s) that are trusted to provide such data, but this wont need to have a CC involved at all and can just be done by convention
 
 That begs the question, "what would an oracles CC do?"
 A couple of things come to mind, ie. payments to oracles for future offchain data and maybe some sort of dispute/censoring ability
 
 first step is to define the data that the oracle is providing. A simple name:description tx can be created to define the name and description of the oracle data.
 linked to this txid would be two types of transactions:
    a) oracle providers
    b) oracle data users
 
 In order to be resistant to sybil attacks, the feedback mechanism needs to have a cost. combining with the idea of payments for data, the oracle providers will be ranked by actual payments made to each oracle for each data type.


[03-Sep-18 07:23 AM] jl777c#5810
Implementation notes:
  In order to maintain good performance even under heavy usage, special market utxo are used. Actually a pair of them. When a provider registers to be a data provider, a special unspendable normal output is created to allow for quick scanning. Since the marker is based on the oracletxid, it becomes a single address where all the providers can be found. 
 
  A convention is used so that the datafee can be changed by registering again. it is assumed that there wont be too many of these datafee changes. if more than one from the same provider happens in the same block, the lower price is used.
 
  The other efficiency issue is finding the most recent data point. We want to create a linked list of all data points, going back to the first one. In order to make this efficient, a special and unique per provider/oracletxid baton utxo is used. This should have exactly one utxo, so the search would be a direct lookup and it is passed on from one data point to the next. There is some small chance that the baton utxo is spent in a non-data transaction, so provision is made to allow for recreating a baton utxo in case it isnt found. The baton utxo is a convenience and doesnt affect validation
 
 Required transactions:
 0) create oracle description -> just needs to create txid for oracle data
 1) register as oracle data provider with price -> become a registered oracle data provider
 2) pay provider for N oracle data points -> lock funds for oracle provider
 3) publish oracle data point -> publish data and collect payment


[03-Sep-18 07:23 AM] jl777c#5810
The format string is a set of chars with the following meaning:
  's' -> <256 char string
  'S' -> <65536 char string
  'c' -> 1 byte signed little endian number, 'C' unsigned
  't' -> 2 byte signed little endian number, 'T' unsigned
  'i' -> 4 byte signed little endian number, 'I' unsigned
  'l' -> 8 byte signed little endian number, 'L' unsigned
  uppercase is unsigned, lowercase is a signed number
 
 create:
 vins.*: normal inputs
 vout.0: txfee tag to oracle normal address
 vout.1: change, if any
 vout.n-1: opreturn with name and description and format for data
 
 register:
 vins.*: normal inputs
 vout.0: txfee tag to normal marker address
 vout.1: baton CC utxo
 vout.2: change, if any
 vout.n-1: opreturn with createtxid, pubkey and price per data point
 
 subscribe:
 vins.*: normal inputs
 vout.0: subscription fee to publishers CC address
 vout.1: change, if any
 vout.n-1: opreturn with createtxid, registered provider's pubkey, amount
 
 data:
 vin.0: normal input
 vin.1: baton CC utxo (most of the time)
 vin.1+: subscription vout.0
 vout.0: change to publishers CC address
 vout.1: baton CC utxo
 vout.2: payment for dataprovider
 vout.3: change, if any
 vout.n-1: opreturn with prevbatontxid and data in proper format
 
 data (without payment)
 vin.0: normal input
 vin.1: baton CC utxo
 vout.0: txfee to publishers normal address
 vout.1: baton CC utxo
 vout.2: change, if any
 vout.n-1: opreturn with prevbatontxid and data in proper format


[03-Sep-18 07:24 AM] jl777c#5810
Oracles creates a market for blockchain external data


[03-Sep-18 07:26 AM] jl777c#5810
the data can be anything at all


[03-Sep-18 07:26 AM] jl777c#5810
it does require prepaying for data to the provider


[03-Sep-18 07:27 AM] jl777c#5810
but as long as the initial payments are small, then the risk is limited and over time, the reliable publishers will become known


[03-Sep-18 07:27 AM] jl777c#5810
there is nothing that uses the Oracles CC (yet), that is next on my list


[03-Sep-18 07:27 AM] jl777c#5810
after debugging it

{Reactions}
Komodo (2) 

[03-Sep-18 08:08 AM] Mark81#4505
Sometimes for a just "simple C coder" you feel so much more....... Just wondering where all that talent comes from. All respect to you! @jl777c


[03-Sep-18 08:10 AM] jl777c#5810
I just try to make the simplest solution for the task at hand, but in this case a bit more complexity and it creates the possibilty of data markets. so it seemed worth supporting that


[03-Sep-18 08:10 AM] jl777c#5810
and making simple solutions to complex problems is the most difficult


[03-Sep-18 08:47 AM] jl777c#5810
if it fits the model of Oracles CC, then it does

{Reactions}
üôÇ 

[03-Sep-18 09:02 PM] grewalsatinder#9653
Will add that oracle description to mastering crypto conditions notes/docs repo


[03-Sep-18 09:03 PM] grewalsatinder#9653
@jl777c it‚Äôs good to add it to ur text file. I haven‚Äôt checked if u done already. Hope u add it there too. üòÅüëçüôÇ


[03-Sep-18 09:06 PM] grewalsatinder#9653
Will add Foundational CC Section in that repo üôÇand add oracle cc under that


[04-Sep-18 12:56 AM] TonyL#3577
@jl777c Is there / or will be there any way to check if I'm subscribed for oracles plan after `oraclessubscribe`  or check a list of my subscribtions?


[04-Sep-18 01:59 AM] jl777c#5810
well it works such that everyone sees the data, even if you didnt pay


[04-Sep-18 01:59 AM] jl777c#5810
there is oraclessamples that is supposed to display the formatted data


[04-Sep-18 02:00 AM] jl777c#5810
only if the data provider is sending encrypted data is there a point to point delivery


[04-Sep-18 02:01 AM] jl777c#5810
I forgot to add an binary data type, will add that. if you can think of any other data types that format should support, let me know


[04-Sep-18 04:02 AM] siu#3920
so payments and oracle are testable ? or not yet?


[04-Sep-18 04:15 AM] jl777c#5810
oracle is testable, but I havent yet done a "make sure it at least works in one case" so likely it wont work


[04-Sep-18 04:16 AM] jl777c#5810
doing that today, but need to write a dapp to test it properlt


[04-Sep-18 04:49 AM] TonyL#3577
@jl777c Is oraclesdata not implemented yet as you said before?
```
./komodo-cli -ac_name=ORACLE oraclesdata 5a7693ea0d0d88c27acca03ddb90d2906bd0ce29f882499435214eea0505523a "Tony"
{
  "result": "error",
  "error": "couldnt publish data with oracle txid"
}
```
```
set datafee 0.00000001 height.2372
ThreadSendAlert() : key.SetPrivKey failed
warning: couldnt find baton utxo
```


[04-Sep-18 04:53 AM] TonyL#3577
```
./komodo-cli -ac_name=ORACLE oraclesinfo 5a7693ea0d0d88c27acca03ddb90d2906bd0ce29f882499435214eea0505523a
{
  "result": "success",
  "txid": "5a7693ea0d0d88c27acca03ddb90d2906bd0ce29f882499435214eea0505523a",
  "name": "Oracle1",
  "description": "testing oracle",
  "format": "test",
  "marker": "RNZ98e7SnaCVQbN3aPU5XuisWMqtq55vX7",
  "registered": [
    {
      "provider": "03d97c08b59b49ffbda2f6741e3514b1615d0cd22b13f16434c2f0977b9334a07c",
      "baton": "RDiKHmkg4yVfFxgnJs6SG5YX9U5g8EjDN7",
      "batontxid": "f1797a3a68927ef2ee62dcfb4f8948b1c2eba1bd98215909fbbeb6b8baaa6521",
      "lifetime": "0.00000001",
      "funds": "0.00000000",
      "datafee": "0.00000001"
    }
  ]
}
```


[04-Sep-18 05:13 AM] jl777c#5810
oracle is testable, but I havent yet done a "make sure it at least works in one case" so likely it wont work

{Reactions}
üëå (3) 

[04-Sep-18 05:14 AM] jl777c#5810
however, the oraclesdata must be passed in a hex string


[04-Sep-18 05:14 AM] jl777c#5810
oraclesdata oracletxid hexstr


[04-Sep-18 05:21 AM] jl777c#5810
also format is an encoded string with the sizes/types for each data element, see the comments inside oracles.cpp

{Reactions}
üëç 

[04-Sep-18 05:36 AM] jl777c#5810
ThreadSendAlert() : key.SetPrivKey failed
above is a definite bug, investigatig


[04-Sep-18 12:41 PM] jl777c#5810
pushed fixes (hardforking)


[04-Sep-18 12:41 PM] jl777c#5810
oraclescreate "BTCUSD" "coindeskpricedata" "L" -> 4895f631316a649e216153aee7a574bd281686265dc4e8d37597f72353facac3
 oraclesregister 4895f631316a649e216153aee7a574bd281686265dc4e8d37597f72353facac3 1000000 -> 11c54d4ab17293217276396e27d86f714576ff55a3300dac34417047825edf93
 oraclessubscribe 4895f631316a649e216153aee7a574bd281686265dc4e8d37597f72353facac3 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92 1.5 -> ce4e4afa53765b11a74543dacbd3174a93f33f12bb94cdc080c2c023726b5838
 oraclesdata 4895f631316a649e216153aee7a574bd281686265dc4e8d37597f72353facac3 000000ff00000000 -> e8a8c897e97389dcac31d81b617ab73a829110bd5c6f99f9f533b9c0e22700d0
 oraclessamples 4895f631316a649e216153aee7a574bd281686265dc4e8d37597f72353facac3 e8a8c897e97389dcac31d81b617ab73a829110bd5c6f99f9f533b9c0e22700d0 1 ->
{
"result": "success",
"samples": [
            [
             "4278190080"
             ]
            ]
}


[04-Sep-18 12:42 PM] jl777c#5810
above is an example of creating an oracle txid, then registering, subscribing (you can subscribe to your own), posting data and then extracting it via oraclessamples


[04-Sep-18 12:43 PM] jl777c#5810
the oraclesdata is passed a hexstring that needs to match the format, there isnt much error checking now, so dont make mistakes when issuing the rpc calls


[04-Sep-18 01:24 PM] jl777c#5810
other than lack of error checking, it should work with high performance, regardless of the number of active oracles, or the number of data publishers publishing data. of course there could be some bugs in the massively active scenarios, but I am using special utxo to instantly find the datatip (most recent data published) for any of the potentially thousands of oracle sources.


[04-Sep-18 01:24 PM] jl777c#5810
That is why it took so long to code this, getting a high performance solution.


[04-Sep-18 01:25 PM] jl777c#5810
so after the basics are working, it would be good to verify that it indeed can handle hundreds, or thousands of data publishers. there is an inherent limit of one oraclesdata per block per publisher/oracletxid


[04-Sep-18 01:26 PM] TonyL#3577
üëå  scripting time


[04-Sep-18 01:27 PM] jl777c#5810
if you have an incrementing number as the data source, we can see any bugs with the oraclessamples by scanning the data for gaps


[04-Sep-18 01:30 PM] TonyL#3577
So scheme should looks like this:
Input file A with X records -> Publish to blockchain -> Output file B grabbed from blockchain (should be equivalent to file A)


[04-Sep-18 01:32 PM] jl777c#5810
keep in mind the data needs to fit the format

{Reactions}
üëå 

[04-Sep-18 01:32 PM] jl777c#5810
but yes, as long as it is encoded properly, that should work


[04-Sep-18 01:33 PM] jl777c#5810
there is format 's', which is a string less than 256 bytes long


[04-Sep-18 01:33 PM] jl777c#5810
but it all needs to be converted to hex so the oraclesdata just gets a hexstring blob


[04-Sep-18 01:35 PM] TonyL#3577
Is the 'S' have principal differences over 's' except of length size?


[04-Sep-18 01:40 PM] jl777c#5810
'S' is for strings longer than 256 bytes


[04-Sep-18 01:40 PM] jl777c#5810
i need to know how many length bytes there will be in the hexstring


[04-Sep-18 01:40 PM] jl777c#5810
you need to put the little endian length first, then the exact number of chars for the string


[04-Sep-18 01:41 PM] jl777c#5810
also, oraclesinfo will show a batontxid, that should be the most recent (confirmed) data point. so it starts from there and goes backwards


[04-Sep-18 01:47 PM] TonyL#3577
Aha, so most recent batontxid like a hook/state to jump into this oracle data, in current batontxid hashed previous one and so on?


[04-Sep-18 01:48 PM] jl777c#5810
each data tx has the previous batontxid


[04-Sep-18 01:48 PM] jl777c#5810
yes, it creates a backwards linked list


[04-Sep-18 01:49 PM] jl777c#5810
oraclessamples traverses this list


[04-Sep-18 01:49 PM] TonyL#3577
More clear now how it's work, thanks üëç


[04-Sep-18 02:55 PM] Alright#0419 (pinned)
`./komodod -ac_cc=1 -ac_name=ORCL -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -addnode=195.201.20.230 -addnode=195.201.137.5`
build from FSM branch


[04-Sep-18 02:55 PM] Alright#0419
@TonyL


[04-Sep-18 02:55 PM] Alright#0419
Pinned a message.


[04-Sep-18 10:56 PM] jl777c#5810
oraclefeed.c now works, you do need to customize it a bit:
#define ORACLETXID "4895f631316a649e216153aee7a574bd281686265dc4e8d37597f72353facac3"
#define MYPUBKEY "02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92"


[04-Sep-18 10:56 PM] jl777c#5810
it gets the bitcoin price and writes it out


[04-Sep-18 10:56 PM] jl777c#5810
format of "L"


[04-Sep-18 10:57 PM] jl777c#5810
yo have to manually create an oracle txid, register and subscribe


[04-Sep-18 10:57 PM] jl777c#5810
then it just loops every minute. it might get an error if the prior one isnt confirmed


[04-Sep-18 10:59 PM] jl777c#5810
FSM branch


[05-Sep-18 12:15 AM] TonyL#3577
Thanks @Alright ! 
@jl777c Will test this one after basic calls test and text data I/O test


[05-Sep-18 12:40 AM] TonyL#3577
```
root@ubuntu-16gb-nbg1-1 ~/fsm_branch/komodo/src # ./komodo-cli -ac_name=ORCL oraclesinfo 4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf
{
  "result": "success",
  "txid": "4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf",
  "name": "Oracle1",
  "description": "testing oracle",
  "format": "s",
  "marker": "RYDQVjt3XR4EW8uqDpKZ28pTAjmhFouZ3m",
  "registered": [
    {
      "provider": "02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7",
      "baton": "RSHvgCPCPMwJbH7SmzRPWUoDrBtufjyvKQ",
      "batontxid": "d81df6fb18e3e19bbae27b3b97775e7243a2277aaffddafbcab702984f04625f",
      "lifetime": "0.00000000",
      "funds": "0.00000000",
      "datafee": "0.00000001"
    }
  ]
}
```
```
./komodo-cli -ac_name=ORCL oraclesdata 4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf 4B6F6D6F646F20726F636B73
{
  "result": "error",
  "error": "couldnt publish data with oracle txid"
}
```
```
commit 912c8a4d3ded45fe080ddcc38afe1546ca921667 (HEAD -> FSM, origin/FSM)
Author: jl777 <jameslee777@yahoo.com>
Date:   Tue Sep 4 18:59:05 2018 -1100

    -print
```
Nothing in daemon logs @jl777c


[05-Sep-18 12:42 AM] jl777c#5810
"funds": "0.00000000",


[05-Sep-18 12:42 AM] jl777c#5810
without funds from subscriber, no data


[05-Sep-18 12:42 AM] TonyL#3577
Ohh


[05-Sep-18 12:43 AM] TonyL#3577
So only option to top-up it for creator is subscribe on itself plan with some payment?


[05-Sep-18 01:01 AM] TonyL#3577
@jl777c  After ```./komodo-cli -ac_name=ORCL oraclessubscribe 4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf 02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7 100```

I can generate hex for:
```
./komodo-cli -ac_name=ORCL oraclesdata 4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf 4B6F6D6F646F20726F636B73{
  "result": "success",
  "hex": "0100000003b4b52688cf8633926ec3a22d2f84342bef7c580771286856d66a3ffd101665f7020000004847304402200a03a293181c2ac50d4bc92f2ba3a560eacac7e7242128a8a671d345db540d91022001ddb311cc81bcd873045e809e20337fe094783e2eb448d9d542e08246b33fd101ffffffff5f62044f9802b7cafbdafdaf7a27a243725e77973b7be2ba9be1e318fbf61dd8010000007b4c79a276a072a26ba067a5658021032fb43bcd5a6b1589dc8f58128decc2785e3d89f16faade72402425c8cc5860078140feb2edfa9de8880f1c4dd6d2cb9fbc8ff1df8dbdfa8c308e7e0be3d3fd6875f207fde8e1100708b0949c7a8691c07b618a7a4e4e3864b6dceebb040da2486aa7a100af038001eca10001ffffffffb4b52688cf8633926ec3a22d2f84342bef7c580771286856d66a3ffd101665f7000000007b4c79a276a072a26ba067a565802102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7814057bc2dbd37f492406f4b06b2c3842b62912dd69c9f56daaad1ad20ba9370c9803b64fc5517545bdd5341caf751b46cc5cf54a8f6cf2c593b9fdce06f986cb8f9a100af038001eca10001ffffffff05ffe30b5402000000302ea22c80202e544ca5c4202011efa857eca6df079eb098e336608bd1022f1102f4d7430df48103120c008203000401cc1027000000000000302ea22c802071bd0bc7052c1159d0b54369ff284e9f5757ffa3dec19454c5edb3cd548812f78103120c008203000401cc0100000000000000232102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7ac808365fa15090000232102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7ac0000000000000000746a4c71ec44cf6e9526f28a4353e0bee3dafc21520716f976a0d23f80e05eba64626773114a5f62044f9802b7cafbdafdaf7a27a243725e77973b7be2ba9be1e318fbf61dd82102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e70c4b6f6d6f646f20726f636b7300000000"
}
```


[05-Sep-18 01:02 AM] TonyL#3577
But then:
```
./komodo-cli -ac_name=ORCL sendrawtransaction 0100000003b4b52688cf8633926ec3a22d2f84342bef7c580771286856d66a3ffd101665f7020000004847304402200a03a293181c2ac50d4bc92f2ba3a560eacac7e7242128a8a671d345db540d91022001ddb311cc81bcd873045e809e20337fe094783e2eb448d9d542e08246b33fd101ffffffff5f62044f9802b7cafbdafdaf7a27a243725e77973b7be2ba9be1e318fbf61dd8010000007b4c79a276a072a26ba067a5658021032fb43bcd5a6b1589dc8f58128decc2785e3d89f16faade72402425c8cc5860078140feb2edfa9de8880f1c4dd6d2cb9fbc8ff1df8dbdfa8c308e7e0be3d3fd6875f207fde8e1100708b0949c7a8691c07b618a7a4e4e3864b6dceebb040da2486aa7a100af038001eca10001ffffffffb4b52688cf8633926ec3a22d2f84342bef7c580771286856d66a3ffd101665f7000000007b4c79a276a072a26ba067a565802102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7814057bc2dbd37f492406f4b06b2c3842b62912dd69c9f56daaad1ad20ba9370c9803b64fc5517545bdd5341caf751b46cc5cf54a8f6cf2c593b9fdce06f986cb8f9a100af038001eca10001ffffffff05ffe30b5402000000302ea22c80202e544ca5c4202011efa857eca6df079eb098e336608bd1022f1102f4d7430df48103120c008203000401cc1027000000000000302ea22c802071bd0bc7052c1159d0b54369ff284e9f5757ffa3dec19454c5edb3cd548812f78103120c008203000401cc0100000000000000232102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7ac808365fa15090000232102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7ac0000000000000000746a4c71ec44cf6e9526f28a4353e0bee3dafc21520716f976a0d23f80e05eba64626773114a5f62044f9802b7cafbdafdaf7a27a243725e77973b7be2ba9be1e318fbf61dd82102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e70c4b6f6d6f646f20726f636b7300000000
error code: -26
error message:
64: dust
```

```
2018-09-05 07:59:41 ERROR: AcceptToMemoryPool: nonstandard transaction: dust
```


[05-Sep-18 01:02 AM] jl777c#5810
"datafee": "0.00000001"
too small


[05-Sep-18 01:03 AM] jl777c#5810
I will add error check to prevent too low datafee


[05-Sep-18 01:03 AM] TonyL#3577
Have to set > than tx fee?


[05-Sep-18 01:04 AM] jl777c#5810
>= yes

{Reactions}
üëå 

[05-Sep-18 01:24 AM] TonyL#3577
@jl777c  Registered same oracle again with more datafee:
```
./komodo-cli -ac_name=ORCL oraclesinfo 4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf
{
  "result": "success",
  "txid": "4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf",
  "name": "Oracle1",
  "description": "testing oracle",
  "format": "s",
  "marker": "RYDQVjt3XR4EW8uqDpKZ28pTAjmhFouZ3m",
  "registered": [
    {
      "provider": "02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7",
      "baton": "RSHvgCPCPMwJbH7SmzRPWUoDrBtufjyvKQ",
      "batontxid": "be4c58176abb92a2b0b0e12ce2ca0a34937e8af65947e0ec3d23d67762f568f1",
      "lifetime": "100.00000000",
      "funds": "99.99000000",
      "datafee": "0.00000001"
    },
    {
      "provider": "02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7",
      "baton": "RSHvgCPCPMwJbH7SmzRPWUoDrBtufjyvKQ",
      "batontxid": "be4c58176abb92a2b0b0e12ce2ca0a34937e8af65947e0ec3d23d67762f568f1",
      "lifetime": "100.00000000",
      "funds": "99.99000000",
      "datafee": "0.00000001",
      "provider": "02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7",
      "baton": "RSHvgCPCPMwJbH7SmzRPWUoDrBtufjyvKQ",
      "batontxid": "be4c58176abb92a2b0b0e12ce2ca0a34937e8af65947e0ec3d23d67762f568f1",
      "lifetime": "100.00000000",
      "funds": "99.99000000",
      "datafee": "0.01000000"
    }
  ]
}
```
Published this data:
```./komodo-cli -ac_name=ORCL oraclesdata 4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf 4B6F6D6F646F20726F636B73```

Receiving empty data for batonid of data published above:
```
./komodo-cli -ac_name=ORCL oraclessamples 4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf be4c58176abb92a2b0b0e12ce2ca0a34937e8af65947e0ec3d23d67762f568f1 100
{
  "result": "success",
  "samples": [
    [
    ]
  ]
}
```


[05-Sep-18 01:27 AM] jl777c#5810
be4c58176abb92a2b0b0e12ce2ca0a34937e8af65947e0ec3d23d67762f568f1 is the original register txid, which has no data


[05-Sep-18 01:27 AM] jl777c#5810
the batontxid should change to the txid of the oraclesdata


[05-Sep-18 01:27 AM] TonyL#3577
No, it's changed, I just used above output of oraclesinfo after data publishing


[05-Sep-18 01:28 AM] TonyL#3577
It's changed on txid which I've received after data publishing rawtransaction broadcast


[05-Sep-18 01:29 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/486815113186115584/unknown.png


[05-Sep-18 01:30 AM] jl777c#5810
until it confirms, it doesnt change in oraclesinfo


[05-Sep-18 01:30 AM] jl777c#5810
do oraclesinfo, it should update to latest CONFIRMED oraclesdata txid


[05-Sep-18 01:30 AM] jl777c#5810
use that for the oraclessamples


[05-Sep-18 01:31 AM] TonyL#3577
Thats what I did


[05-Sep-18 01:31 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/486815628007571456/unknown.png


[05-Sep-18 01:32 AM] jl777c#5810
format of 's' makes data of 4B6F6D6F646F20726F636B73 invalid


[05-Sep-18 01:32 AM] jl777c#5810
first byte needs to be length of string, that means 0x4B chars needed


[05-Sep-18 01:32 AM] jl777c#5810
when I said you cant make mistakes with the rpc calls, this is what I meant


[05-Sep-18 01:32 AM] jl777c#5810
hexstring for oraclesdata MUST match the format exactly


[05-Sep-18 01:36 AM] TonyL#3577
In `oracles.cpp` format described just as a ` 's' -> <256 char string`
Confused a little bit with what actually I have to input. Will read the doc and your posts above carefully again and back to it.


[05-Sep-18 01:37 AM] jl777c#5810
0440404040 would be a string of length 4, repeating ASCII value 64


[05-Sep-18 01:38 AM] jl777c#5810
first byte is length, the next bytes is the string.


[05-Sep-18 01:38 AM] TonyL#3577
Oh, thanks got it


[05-Sep-18 03:33 AM] TonyL#3577
Still receive only empty data from `oraclessamples`. Tried `0440404040` from your example or some simple like a `011`
```./komodo-cli -ac_name=ORCL oraclesdata e322fd9cf98e15f7a243fc4021875289f2cfd42a1b2125c1ee35bd6b48e08d25 011 <- hex```

```sendrawtransaction hex <- 00de8780cadf011f80df88b84aa182b004988544550bf4a9f4dffbf8eec01993```
```getrawmempool <- []```
```./komodo-cli -ac_name=ORCL oraclesinfo e322fd9cf98e15f7a243fc4021875289f2cfd42a1b2125c1ee35bd6b48e08d25 <-
{
  "result": "success",
  "txid": "e322fd9cf98e15f7a243fc4021875289f2cfd42a1b2125c1ee35bd6b48e08d25",
  "name": "Oracle2",
  "description": "testing oracle two",
  "format": "s",
  "marker": "RFtWpBCymm7XaxJvaKhoNeaCF5b6jHp3PE",
  "registered": [
    {
      "provider": "02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7",
      "baton": "RSHvgCPCPMwJbH7SmzRPWUoDrBtufjyvKQ",
      "batontxid": "00de8780cadf011f80df88b84aa182b004988544550bf4a9f4dffbf8eec01993",
      "lifetime": "0.00000000",
      "funds": "99.65000000",
      "datafee": "0.10000000"
    }
  ]
}
```

```
./komodo-cli -ac_name=ORCL oraclessamples e322fd9cf98e15f7a243fc4021875289f2cfd42a1b2125c1ee35bd6b48e08d25 00de8780cadf011f80df88b84aa182b004988544550bf4a9f4dffbf8eec01993 10
{
  "result": "success",
  "samples": [
    [
    ],
    [
    ],
    [
    ]
  ]
}
```


[05-Sep-18 05:03 AM] jl777c#5810
it could be a bug with 's' type, see if 'L' works for you, or the other numerical types


[05-Sep-18 05:27 AM] siu#3920
damn... i dont think i get this format thing or how do i convert data to the format intended.


[05-Sep-18 05:27 AM] siu#3920
also just tried to compile latest and it failed


[05-Sep-18 05:27 AM] siu#3920
```                                                      ^
At global scope:
cc1plus: error: unrecognized command line option ‚Äò-Wno-builtin-declaration-mismatch‚Äô [-Werror]
cc1plus: all warnings being treated as errors
Makefile:3091: recipe for target 'cc/libbitcoin_server_a-oracles.o' failed
make[2]: *** [cc/libbitcoin_server_a-oracles.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f cc/.deps/libbitcoin_server_a-prices.Tpo cc/.deps/libbitcoin_server_a-prices.Po
make[2]: Leaving directory '/home/siu/komodo/src'
Makefile:4634: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/siu/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
```


[05-Sep-18 05:29 AM] siu#3920
my guess is that jl777 is working on it


[05-Sep-18 05:45 AM] jl777c#5810
fixed


[05-Sep-18 06:55 AM] siu#3920
publisher is the same as provider?


[05-Sep-18 06:55 AM] siu#3920
`oraclessubscribe oracletxid publisher amount`


[05-Sep-18 06:55 AM] siu#3920
oracle subscribe asks for a `publisher` parameter


[05-Sep-18 06:56 AM] siu#3920
but on the oraclesinfo output i only find `provider`


[05-Sep-18 07:10 AM] jl777c#5810
sorry, yes they are the same


[05-Sep-18 07:11 AM] jl777c#5810
pushed fix


[05-Sep-18 07:11 AM] jl777c#5810
but it just changed the field name


[05-Sep-18 07:20 AM] siu#3920
ok


[05-Sep-18 07:24 AM] siu#3920
Also i guess that in `oraclessamples oracletxid batonutxo num`, `batonutxo` refers to `batontxid`


[05-Sep-18 07:25 AM] siu#3920
I  subscribed to ```./komodo-cli -ac_name=ORCL oraclesinfo e322fd9cf98e15f7a243fc4021875289f2cfd42a1b2125c1ee35bd6b48e08d25
{
  "result": "success",
  "txid": "e322fd9cf98e15f7a243fc4021875289f2cfd42a1b2125c1ee35bd6b48e08d25",
  "name": "Oracle2",
  "description": "testing oracle two",
  "format": "s",
  "marker": "RFtWpBCymm7XaxJvaKhoNeaCF5b6jHp3PE",
  "registered": [
    {
      "provider": "02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7",
      "baton": "RSHvgCPCPMwJbH7SmzRPWUoDrBtufjyvKQ",
      "batontxid": "1824a83a2b81992f792bb7f19cb678741eb4d1f038e7803e645579f29c30fa25",
      "lifetime": "0.00000000",
      "funds": "100.45000000",
      "datafee": "0.10000000"
    }
  ]
}
```


[05-Sep-18 07:26 AM] siu#3920
```./komodo-cli -ac_name=ORCL sendrawtransaction 01000000013e1a9da64c8841772b99e20715319e9cf41c2c8d80d999539fd5ef2ec16c758f0000000049483045022100aa124ed0cd41a556acf645236507b737de7aed1b66d113a6439d598a5c7a573a02204704cf22af1aaa80cc819151a0535ea64dd64fe329ca9925cef1ce0cce828de301ffffffff0400e1f50500000000302ea22c80202e544ca5c4202011efa857eca6df079eb098e336608bd1022f1102f4d7430df48103120c008203000401cc1027000000000000232102258de0486bbd35eec125211b2ad4cff28952872140fc43a2f7158ef99cfd22e3ace0707c481809000023210229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60dac00000000000000004f6a4c4cec53258de0486bbd35eec125211b2ad4cff28952872140fc43a2f7158ef99cfd22e3210229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60d00e1f5050000000000000000
1fc561b4484e022e083daff5293ed642b0e4d3980c86a3fb59c5a5531c637456
```


[05-Sep-18 07:26 AM] siu#3920
oracle samples prints this: ```./komodo-cli -ac_name=ORCL oraclessamples e322fd9cf98e15f7a243fc4021875289f2cfd42a1b2125c1ee35bd6b48e08d25 1824a83a2b81992f792bb7f19cb678741eb4d1f038e7803e645579f29c30fa25 1
{
  "result": "success",
  "samples": [
    [
    ]
  ]
}
```


[05-Sep-18 07:26 AM] siu#3920
am i doing this right?


[05-Sep-18 07:27 AM] siu#3920
there is no data in the feed, hence it prints blank?


[05-Sep-18 07:27 AM] jl777c#5810
if there is no data, it would be blank


[05-Sep-18 07:27 AM] jl777c#5810
there might be a problem with format of s


[05-Sep-18 08:42 AM] TonyL#3577
@jl777c Is it a hardforking fix for 's' type?


[05-Sep-18 08:43 AM] Alright#0419
if there are any hard forks for ORCL please ping me

{Reactions}
üëå 

[05-Sep-18 09:19 AM] jl777c#5810
i didnt fix the s bug, havent had a chance to duplicate it.


[05-Sep-18 09:19 AM] jl777c#5810
i want to make sure it works with L field for others


[05-Sep-18 09:19 AM] jl777c#5810
depends on the bug if it is a hardforking change or not


[05-Sep-18 09:19 AM] TonyL#3577
Ok, I'll check with 'L' type now, just reached PC


[05-Sep-18 10:00 AM] TonyL#3577
@jl777c latest FSM not building:
```rpcblockchain.cpp: In function ‚ÄòUniValue getblockchaininfo(const UniValue&, bool)‚Äô:
rpcblockchain.cpp:1302:59: error: ‚ÄòchainParams‚Äô was not declared in this scope
         progress = Checkpoints::GuessVerificationProgress(chainParams.Checkpoints(), chainActive.LastTip());
                                                           ^~~~~~~~~~~
rpcblockchain.cpp:1302:59: note: suggested alternative: ‚ÄòCChainParams‚Äô
         progress = Checkpoints::GuessVerificationProgress(chainParams.Checkpoints(), chainActive.LastTip());
                                                           ^~~~~~~~~~~
                                                           CChainParams
rpcblockchain.cpp:1304:29: error: ‚Äòkomodo_longestchain‚Äô was not declared in this scope
      int32_t longestchain = komodo_longestchain();
                             ^~~~~~~~~~~~~~~~~~~
rpcblockchain.cpp:1304:29: note: suggested alternative: ‚Äòlongestchain‚Äô
      int32_t longestchain = komodo_longestchain();
                             ^~~~~~~~~~~~~~~~~~~
                             longestchain
Makefile:3497: recipe for target 'libbitcoin_server_a-rpcblockchain.o' failed
make[2]: *** [libbitcoin_server_a-rpcblockchain.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f .deps/libbitcoin_server_a-rest.Tpo .deps/libbitcoin_server_a-rest.Po
mv -f .deps/libbitcoin_server_a-main.Tpo .deps/libbitcoin_server_a-main.Po
mv -f .deps/libbitcoin_server_a-rpccrosschain.Tpo .deps/libbitcoin_server_a-rpccrosschain.Po
make[2]: Leaving directory '/home/rigdirector/fsm_branch/komodo/src'
Makefile:4634: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/rigdirector/fsm_branch/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
```


[05-Sep-18 10:02 AM] jl777c#5810
fixing


[05-Sep-18 10:06 AM] jl777c#5810
fixe


[05-Sep-18 10:06 AM] jl777c#5810
fixed


[05-Sep-18 10:49 AM] TonyL#3577
builded now


[05-Sep-18 11:36 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL oraclesinfo eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf
{
  "result": "success",
  "txid": "eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf",
  "name": "OracleL",
  "description": "testing oracle",
  "format": "L",
  "marker": "RJtXpavwX2tWdkvrj9pyrbfG8QudqW9ha2",
  "registered": [
    {
      "publisher": "03885cc6bccd8da41e202da6f8184fd4cb821c3377fcb6fdcbe5e9927ff16fe959",
      "baton": "RXWoWDffBLsBPBS2WupwgDVJMYhDdf4qLN",
      "batontxid": "e44a10d291abe43ea1ddffba257eea0fb3e73e28a48fe6bf651576d0b69e68cb",
      "lifetime": "10000.00000000",
      "funds": "9999.80000000",
      "datafee": "0.10000000"
    }
  ]
}
```

``` ./komodo-cli -ac_name=ORCL oraclesdata eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf 0x41
{
  "result": "success",
  "hex": "hex..."
}
```

```./komodo-cli -ac_name=ORCL sendrawtransaction hex
e7525ec4f97207a809fb76303398bef8f3989655fb9e8a7e7c9b6f5f4eb9bba0```

```./komodo-cli -ac_name=ORCL oraclessamples eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf e7525ec4f97207a809fb76303398bef8f3989655fb9e8a7e7c9b6f5f4eb9bba0 1
{
  "result": "success",
  "samples": [
    [
    ]
  ]
}
```


[05-Sep-18 11:38 AM] TonyL#3577
Get an empty value "L" oracle after `0x41` data input. Am I input data correct way for this format @jl777c ?


[05-Sep-18 11:43 AM] jl777c#5810
did you look at dapps/oraclefeed.c


[05-Sep-18 11:43 AM] jl777c#5810
oraclesdata 4895f631316a649e216153aee7a574bd281686265dc4e8d37597f72353facac3 000000ff00000000


[05-Sep-18 11:43 AM] jl777c#5810
hexstring needs to be a string of just hex


[05-Sep-18 11:44 AM] jl777c#5810
0x41 is not a purehex string


[05-Sep-18 11:44 AM] jl777c#5810
41 would be


[05-Sep-18 11:45 AM] jl777c#5810
but L means it needs 8 bytes


[05-Sep-18 11:45 AM] jl777c#5810
so 8 bytes of hex


[05-Sep-18 11:52 AM] TonyL#3577
Ouch I've used 8 bits numbers not 8 bytes 
```
./komodo-cli -ac_name=ORCL oraclessamples eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf 9a2dc1e3b28bd089662fa3a6e4e854bfcf038c0864c80550884cb232cb10e48e 2
{
  "result": "success",
  "samples": [
    [
    ],
    [
      "4278190080"
    ]
  ]
}
```
Finally have output. Thank you for your patience @jl777c :/


[05-Sep-18 11:54 AM] jl777c#5810
plz test the other numerical sizes


[05-Sep-18 11:54 AM] jl777c#5810
4 bytes means half the length of 8

{Reactions}
trollface 

[05-Sep-18 11:55 AM] TonyL#3577
Yep, sure


[05-Sep-18 11:56 AM] jl777c#5810
there are numerical sizes 1, 2, 4, 8


[05-Sep-18 11:56 AM] jl777c#5810
signed and unsigned as described in the oracles.cpp comments


[05-Sep-18 11:56 AM] TonyL#3577
```
" The format string is a set of chars with the following meaning:
  's' -> <256 char string
  'S' -> <65536 char string
  'c' -> 1 byte signed little endian number, 'C' unsigned
  't' -> 2 byte signed little endian number, 'T' unsigned
  'i' -> 4 byte signed little endian number, 'I' unsigned
  'l' -> 8 byte signed little endian number, 'L' unsigned
  uppercase is unsigned, lowercase is a signed number
"```
Using this table


[05-Sep-18 11:58 AM] jl777c#5810
yes


[05-Sep-18 07:55 PM] grewalsatinder#9653
Kim dot com had an idea of a file sharing site
There ppl upload files, it gives encrypted link etc
Downloaders have to pay btc to get the link and download files
Uploaders earn btc through this service and kim being middle person earns percent of these earnings.


[05-Sep-18 07:55 PM] grewalsatinder#9653
I wonder how can this be done via CC


[05-Sep-18 07:59 PM] grewalsatinder#9653
Bitcache, bitcontent
https://news.bitcoin.com/kim-dotcom-bitcache-megaupload-2-bitcontent/

{Embed}
Kevin Helms
https://news.bitcoin.com/kim-dotcom-bitcache-megaupload-2-bitcontent/
Kim Dotcom Previews Bitcache, Introduces Megaupload 2's Bitcontent...
Kim Dotcom has recently tweeted a preview of the long-rumored, much anticipated Bitcache system. He also introduced Bitcontent, a sales platform based on
https://images-ext-1.discordapp.net/external/uZhgmsyVSuuY7jH4cn9NDrQSZ_H_ZANX3StL6tUgKxI/https/news.bitcoin.com/wp-content/uploads/2017/04/Kim-Dotcom-Previews-Bitcache-Introduces-Megaupload-2s-Bitcontent.png


[05-Sep-18 08:05 PM] grewalsatinder#9653
Channel CC can be used for text content I think. ü§î


[05-Sep-18 08:05 PM] grewalsatinder#9653
Text content saved in the tx


[05-Sep-18 08:06 PM] grewalsatinder#9653
So, it‚Äôs a reveal a partial secret based on payment


[05-Sep-18 09:53 PM] jl777c#5810
channel CC is for the payments side, content storage requires a different CC


[05-Sep-18 10:05 PM] grewalsatinder#9653
okay


[05-Sep-18 11:44 PM] jl777c#5810
Chapter 11 - oracles example
Oracles CC is an example where it ended up being simpler than I first expected, but at the same time a lot more powerful. It is one of the smaller CC, but it enables creation of an arbitrary number of data markets, in a performant way.

In order to gain the performance, some clever usage of special addresses was needed. It was a bit tricky to generate a special address to keep track of the latest data.

Let's back up to the beginning. Just what is an oracle? In this context it is something that puts data that is not on the blockchain, onto the blockchain. Since everything other than the transactions and blocks are not in the blockchain, there is a very large universe of data that can be oracle-ized. It can be literally anything, from the obvious like prices to specific results relative to an arbitrary description.

The most difficult issue about oracles is that they need to be trusted to various degree to provide accurate and timely data. The danger is that if a trusted node is used to write data to the blockchain, it creates a trust point and a single point of attack. Ultimately there is nothing that can ensure only valid data is written to the blockchain, so what is done is to reinforce good behavior via pay per datapoint. However, for critical data, higher level processing is needed that combines multiple data providers into a validated signal.

At the oracles CC level, it is enough that there is financial incentive to provide good data. Also it is needed to allow multiple vendors for each data that is required and to enable efficient ways to update and query the data.


[05-Sep-18 11:44 PM] jl777c#5810
The following are the rpc calls:
oraclescreate name description format
oracleslist
oraclesinfo oracletxid
oraclesregister oracletxid datafee
oraclessubscribe oracletxid publisher amount
oraclesdata oracletxid hexstr
oraclessamples oracletxid batonutxo num

The first step is to create a specific data description with oraclescreate, which also defines the format of the binary data. This creates an oracletxid, which is used in the other rpc calls. name and description are just arbitrary strings, with name preferably being a short name used to access the data. The format is a string comprised of a single character per data element:

  's' -> <256 char string
  'S' -> <65536 char string
  'd' -> <256 binary data
  'D' -> <65536 binary data
  'c' -> 1 byte signed little endian number, 'C' unsigned
  't' -> 2 byte signed little endian number, 'T' unsigned
  'i' -> 4 byte signed little endian number, 'I' unsigned
  'l' -> 8 byte signed little endian number, 'L' unsigned
  'h' -> 32 byte hash

For example, if the datapoint is comprised of a 4byte timestamp and an 8byte number the format string would be: "IL"

oracleslist displays a list of all the oraclestxid and oraclesinfo displays information about the specific oracletxid. Each oracletxid deterministically generates a marker address and a small amount is sent to that address to mark a transaction's relation to the oracltxid.


[05-Sep-18 11:45 PM] jl777c#5810
{
  "result": "success",
  "txid": "4895f631316a649e216153aee7a574bd281686265dc4e8d37597f72353facac3",
  "name": "BTCUSD",
  "description": "coindeskpricedata",
  "format": "L",
  "marker": "RVqJCSrdBm1gYJZS1h7dgtHioA5TEYzNRk",
  "registered": [
    {
      "publisher": "02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92",
      "baton": "RKY4zmHJZ5mNtf6tfKE5VMsKoV71Euej3i",
      "batontxid": "4de10b01242ce1a5e29d5fbb03098b4519976879e05ad0458ef7174ed9127f18",
      "lifetime": "1.50000000",
      "funds": "0.01000000",
      "datafee": "0.01000000"
    }
  ]
}

A data publisher needs to register a datafee and their pubkey for a specific oracletxid. datafee needs to be at least as big as a txfee. Using oraclesregister the current datafee can be updated so a publisher can adapt to market conditions. Once registered, subscribers can prepay for some number of datapoints to a specific publisher using the oraclessubscribe rpc. At first, it is likely that the publisher would pay themselves to enable the posting of initial data points so the potential subscribers can evaluate the quality and consistency of the data.

The one final rpc is oraclessamples, which returns the most recent samples of data from a specific publisher. In order to have a performant solution to track all the potential data streams from all the publishers for all the oracletxid, a baton utxo is used. This is an output sent to a specific address and expected to have just a single utxo at any given time to allow for direct lookup. oraclessamples requires a starting txid to use and with each datapoint having the prior batontxid, there is a reverse linked list to traverse the most recent data.


[05-Sep-18 11:45 PM] jl777c#5810
In order to implement this, the following vin/vout contraints are used:

 create:
 vins.*: normal inputs
 vout.0: txfee tag to oracle normal address
 vout.1: change, if any
 vout.n-1: opreturn with name and description and format for data
 
 register:
 vins.*: normal inputs
 vout.0: txfee tag to normal marker address
 vout.1: baton CC utxo
 vout.2: change, if any
 vout.n-1: opreturn with oracletxid, pubkey and price per data point
 
 subscribe:
 vins.*: normal inputs
 vout.0: subscription fee to publishers CC address
 vout.1: change, if any
 vout.n-1: opreturn with oracletxid, registered provider's pubkey, amount
 
 data:
 vin.0: normal input
 vin.1: baton CC utxo (most of the time)
 vin.2+: subscription or data vout.0
 vout.0: change to publishers CC address
 vout.1: baton CC utxo
 vout.2: payment for dataprovider
 vout.3: change, if any
 vout.n-1: opreturn with oracletxid, prevbatontxid and data in proper format
 
The oraclesdata transaction is the most complex as it needs to find and spend the baton utxo, use the correct datafee and spend funds from the locked subscription funds. With the above, the oracles CC is complete and allows the creations of massively parallel data streams from multiple vendors that uses free market feedback via payments, ie. poorly performing providers wont get renewals.

I expect that at first, the data providers will just be dapp developers deploying a working system including the required data, but its structure allows open market competition. Of course, specific dapps could restrict themselves to using only publishers from a whitelist of pubkeys. The potential usecases for oracles CC is quite varied and limited only by the imagination.


[06-Sep-18 12:14 AM] grewalsatinder#9653
added to repo:
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/all_chapters.md#chapter-11---oracles-example

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/all_chapters.md
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[06-Sep-18 12:23 AM] grewalsatinder#9653
@jl777c I see you replaced chapter 11 channels with oracles üôÇ


[06-Sep-18 12:23 AM] jl777c#5810
yes, oracles is much more important


[06-Sep-18 12:24 AM] grewalsatinder#9653
yep, so no channels cc example text?


[06-Sep-18 12:24 AM] jl777c#5810
no promises


[06-Sep-18 12:24 AM] grewalsatinder#9653
okay üëç


[06-Sep-18 12:24 AM] grewalsatinder#9653
thanks for the oracles text James üôÇ üëç


[06-Sep-18 12:24 AM] jl777c#5810
it is mostly coded, waiting for a prospective CC coder to debug it


[06-Sep-18 12:24 AM] jl777c#5810
if not, then I will


[06-Sep-18 12:24 AM] grewalsatinder#9653
great!


[06-Sep-18 12:26 AM] grewalsatinder#9653
want to tweet the timeframe it took to write the so far oracles cc


[06-Sep-18 12:26 AM] grewalsatinder#9653
can you please give estimate time it took you?


[06-Sep-18 12:27 AM] jl777c#5810
4 days


[06-Sep-18 12:27 AM] grewalsatinder#9653
okay üëå


[06-Sep-18 12:27 AM] jl777c#5810
but I have been doing other things too


[06-Sep-18 12:28 AM] jl777c#5810
@TonyL 's' format worked for me:
oraclescreate test testsformat s -> 17a841a919c284cea8a676f34e793da002e606f19a9258a3190bed12d5aaa3ff
oraclesregister -> 7825ad75ba854ab12868f7d2e06b4061903687fe93f41a2a99202a6b9ca3c029
oraclessubscribe 17a841a919c284cea8a676f34e793da002e606f19a9258a3190bed12d5aaa3ff 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92 1.5 -> faf8a6676f6389abad9e7f397015d200395c9f8a24c4ded291d83e6265b2f4d1
oraclesdata 17a841a919c284cea8a676f34e793da002e606f19a9258a3190bed12d5aaa3ff 03404040 -> e8a8c897e97389dcac31d81b617ab73a829110bd5c6f99f9f533b9c0e22700d0


[06-Sep-18 12:28 AM] jl777c#5810
./c oraclessamples 17a841a919c284cea8a676f34e793da002e606f19a9258a3190bed12d5aaa3ff 25060231e92388345da890cb12b2778f855ad495a5bb1623c1054e74565f814a 3
{
  "result": "success",
  "samples": [
    [
      "@@@"
    ]
  ]
}


[06-Sep-18 12:28 AM] TonyL#3577
@jl777c great!


[06-Sep-18 12:29 AM] TonyL#3577
Testing other formats atm, will share results as soon as finish

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/487162328350195712/unknown.png


[06-Sep-18 12:30 AM] TonyL#3577
And will recheck string as well. Is it worked with current codebase @jl777c ?


[06-Sep-18 12:31 AM] jl777c#5810
i did push a few bugfixes


[06-Sep-18 12:31 AM] jl777c#5810
there are a few new format types


[06-Sep-18 12:44 AM] jl777c#5810
I tested L and s format, pretty sure the other formats should work too and so far not seeing any bugs


[06-Sep-18 12:44 AM] jl777c#5810
so oracles CC is ready for testing


[06-Sep-18 12:45 AM] TonyL#3577
Am I expect wrong output for L and l in my cases? @jl777c

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/487166425434292244/unknown.png


[06-Sep-18 12:46 AM] jl777c#5810
yes, how can you be expecting the same values for 4 bytes and 8 bytes?


[06-Sep-18 12:46 AM] jl777c#5810
that is like expecting the same value for 10000 and 100000000


[06-Sep-18 12:46 AM] TonyL#3577
But there is 8 zeros


[06-Sep-18 12:47 AM] jl777c#5810
do you understand how hex numbers work?


[06-Sep-18 12:47 AM] jl777c#5810
just use a hex to decimal converter


[06-Sep-18 12:47 AM] jl777c#5810
it is little endian, maybe that is your confusion?


[06-Sep-18 12:47 AM] jl777c#5810
lowest byte is first


[06-Sep-18 12:48 AM] jl777c#5810
so 0xffffffff00000000 vs 0xffffffff


[06-Sep-18 12:48 AM] jl777c#5810
one is 0x100000000 times bigger


[06-Sep-18 12:48 AM] TonyL#3577
Yes it was a confusion


[06-Sep-18 02:42 AM] TonyL#3577
@jl777c 
```  'd' -> <256 binary data
  'D' -> <65536 binary data
```
Is length declaration on beginning needed for these types (same as for strings)?


[06-Sep-18 02:45 AM] jl777c#5810
yes


[06-Sep-18 02:45 AM] jl777c#5810
the same


[06-Sep-18 02:57 AM] siu#3920
what format would plain text be?


[06-Sep-18 02:58 AM] siu#3920
in the oracle format categories


[06-Sep-18 02:58 AM] TonyL#3577
You have to convert text to hex first and use 's' or 'S' oracle type with length declaration in first byte/s of data which you sending


[06-Sep-18 03:01 AM] siu#3920
üò¨


[06-Sep-18 03:01 AM] siu#3920
ok


[06-Sep-18 03:01 AM] siu#3920
let me see what i can do


[06-Sep-18 03:04 AM] TonyL#3577
Finally, I'm on blockchain
```./komodo-cli -ac_name=ORCL oraclessamples 5e2aa55209ea37de1bce2a98dc8a985a12cb8caff6cfd8780a953c884b698298 b376842afe8e8f6401f210106b92f74edf822ab679be0c78ce07b66b75ea0aa1 1
{
  "result": "success",
  "samples": [
    [
      "Anton"
    ]
  ]
}
```


[06-Sep-18 03:13 AM] siu#3920
how was the original command to get that sample?


[06-Sep-18 03:14 AM] TonyL#3577
`./komodo-cli -ac_name=ORCL oraclesdata 5e2aa55209ea37de1bce2a98dc8a985a12cb8caff6cfd8780a953c884b698298 05416e746f6e`


[06-Sep-18 03:14 AM] siu#3920
can you link me the hex converter you used?


[06-Sep-18 03:14 AM] TonyL#3577
https://codebeautify.org/string-hex-converter

{Embed}
https://codebeautify.org/string-hex-converter
Best String to Hex Converter Online to Convert Text to Hex.
Convert String to Hex (Text to Hex) Online and Save and Share. String to Hexadecimal
https://images-ext-2.discordapp.net/external/KkWo2FUQWZENS9eLa88-RIra7SmV314xWwhUAGqSGDk/https/codebeautify.org/img/cb/string-to-hex.png


[06-Sep-18 03:15 AM] siu#3920
thanks!


[06-Sep-18 03:15 AM] TonyL#3577
üëç


[06-Sep-18 03:17 AM] siu#3920

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/487204640824229903/unknown.png


[06-Sep-18 03:17 AM] siu#3920
what is that little square infront of anton?


[06-Sep-18 03:17 AM] TonyL#3577
`with length declaration in first byte/s of data which you sending`


[06-Sep-18 03:17 AM] TonyL#3577
05 is 5 actually


[06-Sep-18 03:18 AM] siu#3920
ok


[06-Sep-18 03:18 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/487204964326965249/unknown.png


[06-Sep-18 03:19 AM] actionslacks#4072
LSB, MSB?


[06-Sep-18 03:21 AM] TonyL#3577
I put this table just to show hex numeration not binary


[06-Sep-18 03:23 AM] actionslacks#4072
So whats the incentive to prioritize the most accurate oracle?


[06-Sep-18 03:23 AM] actionslacks#4072
or am I not understanding at all wtf this means?


[06-Sep-18 03:27 AM] TonyL#3577
Not sure if I get your question. Do you mean correlation with real data by "most accurate"? 
There is a subscription model so trustable/reputable oracle can get some revenue


[06-Sep-18 03:27 AM] actionslacks#4072
is it just a popularity contest?


[06-Sep-18 03:28 AM] TonyL#3577
But you just told about accuracy. I think they are interrelated.


[06-Sep-18 03:29 AM] siu#3920
It can be a popularity contest. Yes.


[06-Sep-18 03:29 AM] siu#3920
It can also be technical data from a corporation


[06-Sep-18 03:29 AM] actionslacks#4072
"in a world, where accuracy and popularity are interrelated..."


[06-Sep-18 03:29 AM] actionslacks#4072
sry I'm just shitposting now


[06-Sep-18 03:30 AM] siu#3920
If you do some kind of steemit application then popularity is important


[06-Sep-18 03:30 AM] TonyL#3577
If you provide accurate data you're popular as oracle data provider for your niche. Why not?


[06-Sep-18 03:30 AM] actionslacks#4072
No I think i'm getting it. thanks for the explanation


[06-Sep-18 03:30 AM] siu#3920
But if for example you are an airport publishing flight schedules. Then its not about popularity but accuracy


[06-Sep-18 03:31 AM] actionslacks#4072
So the most consistently accurate oracle will earn the most fees


[06-Sep-18 03:32 AM] actionslacks#4072
in that case most likely


[06-Sep-18 03:33 AM] actionslacks#4072
AI and blockchain, machine learning integrated with data parsing and posted to an immutable ledger


[06-Sep-18 03:35 AM] actionslacks#4072
sounds like the old NXT asset skynet


[06-Sep-18 03:37 AM] TonyL#3577
As medical company I can put data for drugs serial numbers so I can check if it's fake (not matter am I reseller, hospital or consumer), or as hardware manufacturer I can put my devices ID's and so on


[06-Sep-18 03:38 AM] TonyL#3577
But it's not a competition cases


[06-Sep-18 03:38 AM] actionslacks#4072
and as a manufacturer you can track serial numbers and cross reference BOM's with suppliers


[06-Sep-18 03:39 AM] actionslacks#4072
quality problem? check the oracle


[06-Sep-18 03:39 AM] TonyL#3577
Yeah, there is a lot of cool cases and scenarios + possible to combine/connect CCs. As I think it's a most natural way of blockchain usage - immutable distributed database to proof important things


[06-Sep-18 03:40 AM] TonyL#3577
So oracles cc looks like the key one


[06-Sep-18 03:41 AM] TonyL#3577
A lot of space for IOT stuff as well


[06-Sep-18 03:42 AM] actionslacks#4072
everyone or everything running a synced chain can be a portal to the oracle


[06-Sep-18 03:44 AM] TonyL#3577
Dat would be future - you have GUI implementation mobile app, you're in drugstore, input number to app, it's matching data with blockchain oracle - you see is it fake drug or not


[06-Sep-18 03:44 AM] TonyL#3577
trust boundary extension protocol over the internet


[06-Sep-18 03:45 AM] siu#3920
So basically the oracle is a big OP_RETURN poster?


[06-Sep-18 03:46 AM] actionslacks#4072
well hopefully at some point by paying for the electricity to run the chain the internet would be free to all synced portals


[06-Sep-18 03:47 AM] actionslacks#4072
sry meta


[06-Sep-18 03:47 AM] TonyL#3577
Aha and your electricity consumption counter will send data about consumption automatically to oracle as a part of IOT


[06-Sep-18 03:47 AM] TonyL#3577
And you'll pay it by rates declared in a smart-contract


[06-Sep-18 03:48 AM] actionslacks#4072
time to launch the cubesats


[06-Sep-18 03:49 AM] TonyL#3577
There is so much wide space for really interesting implementations, but read ERC-20 token sellers whitepapers... üò¶


[06-Sep-18 03:50 AM] actionslacks#4072
yeah I am thinking CC will be the death knell for ETH's Gas model


[06-Sep-18 03:50 AM] siu#3920
So a chain can create tokens for each device(charge controller) and the oracle can then import data regarding consumption from that device


[06-Sep-18 03:51 AM] siu#3920
Which would trigger a payments contract


[06-Sep-18 03:51 AM] siu#3920
Which would make you pay for the consumption or get paid for extra energy sold


[06-Sep-18 03:52 AM] siu#3920
I think i dont need the token part


[06-Sep-18 03:52 AM] actionslacks#4072
The hardware and software for realtime hex processing is ubiquitous thanks to MIDI but I'm not sure if that protocol has the data bandwidth


[06-Sep-18 03:53 AM] actionslacks#4072
It definitely has the speed though


[06-Sep-18 03:58 AM] actionslacks#4072
kmd is a chains only platform fortunately


[06-Sep-18 04:00 AM] actionslacks#4072
so where to start? decentralized twitter where everyone with the app syncs the chain to get the feed?


[06-Sep-18 04:00 AM] actionslacks#4072
and psot


[06-Sep-18 04:00 AM] actionslacks#4072
post


[06-Sep-18 04:01 AM] TonyL#3577
Not sure if it's possible to use now for something very close to "realtime" data publishing <- getting. Since you have to wait till data will be mined at least


[06-Sep-18 04:02 AM] actionslacks#4072
I guess it boils down to chain speed then for social media applications


[06-Sep-18 04:02 AM] TonyL#3577
Proof of constancy of constitution document


[06-Sep-18 04:02 AM] TonyL#3577
:trollface:


[06-Sep-18 04:05 AM] actionslacks#4072
I mean, smart meters? for power consumption? its already a thing and I'm assuming its just a database application logging it


[06-Sep-18 04:05 AM] actionslacks#4072
what if you could apply the oracle to power consumption?


[06-Sep-18 04:06 AM] TonyL#3577
I don't know how it's worldwide but in Russia you have to manually input your data on website and then each few months guy from this company coming to physically proof it


[06-Sep-18 04:08 AM] actionslacks#4072
they deregulated energy in here in texas and trade it on an exchange. we have the only independent  power grid in this country.


[06-Sep-18 04:09 AM] actionslacks#4072
anyone can start a power company with enough money and sell to consumers


[06-Sep-18 04:09 AM] actionslacks#4072
but usage data is most likely proprietary on a local scale


[06-Sep-18 04:11 AM] actionslacks#4072
there are co-ops though that are citizen owned, I imagine that data could be polled somehow...


[06-Sep-18 04:11 AM] TonyL#3577
Hmmm, that's very new concept for me üòÉ


[06-Sep-18 04:18 AM] actionslacks#4072
electricity yes, but internet providers still rule with the proverbial iron fist


[06-Sep-18 04:19 AM] actionslacks#4072
na zdorovje, or something like that. I dont come here as often as I should but thanks for the sharing of ideas


[06-Sep-18 04:21 AM] TonyL#3577
Haha thank you for Russian speaking trying! Would be great to discuss more real applications of different CC's and assetchains - come more often üòÉ


[06-Sep-18 04:23 AM] actionslacks#4072
I hope maybe through this tech we can somehow transcend govt and wars and reach for the stars again


[06-Sep-18 04:25 AM] TonyL#3577
Technocracy society - thats what I dream about, that dream motivated me to degree in Nuclear physics and drives me to dive into the new technologies. Azimov's worlds...


[06-Sep-18 04:26 AM] actionslacks#4072
a republic of ideas as opposed to ideology

{Reactions}
üíØ 

[06-Sep-18 04:35 AM] actionslacks#4072
I think the main problem is that people have been so indoctrinated to follow a centralized authority that a world without it is unimaginable.


[06-Sep-18 04:35 AM] actionslacks#4072
or anarchy


[06-Sep-18 04:37 AM] actionslacks#4072
but through trustless consensus that anarchy becomes entirely boring and stable. And also perfectly equitable. we are the architects of  this future. That is why I am here.


[06-Sep-18 04:38 AM] actionslacks#4072
Goodnight all.


[06-Sep-18 04:38 AM] TonyL#3577
Sleep tight!


[06-Sep-18 05:27 AM] siu#3920
I created an oracle


[06-Sep-18 05:27 AM] siu#3920
```{
    "method":"oraclescreate",
"params": ["Mensajes Ma√±aneros","Morning messages","s"]
}```


[06-Sep-18 05:27 AM] siu#3920
```{
    "result": {
        "result": "success",
        "txid": "2779956270435350ef49a4f4f600150b1cb4c266c67312e0f910aba1dae9e01b",
        "name": "Mensajes Ma√±aneros",
        "description": "Morning messages",
        "format": "s",
        "marker": "RKbBatcX4M4ghwdSrw9LHC5WQns37uPujK",
        "registered": []
    },
    "error": null,
    "id": null
}```


[06-Sep-18 05:28 AM] siu#3920
biut when i try to register i get an error:


[06-Sep-18 05:28 AM] siu#3920
```{
    "method":"oraclesregister",
"params": ["2779956270435350ef49a4f4f600150b1cb4c266c67312e0f910aba1dae9e01b","1"]
}
```


[06-Sep-18 05:28 AM] siu#3920
```{
    "result": {
        "result": "error",
        "error": "couldnt register with oracle txid"
    },
    "error": null,
    "id": null
}```


[06-Sep-18 05:28 AM] TonyL#3577
You have to use datafee amount > than tx fee


[06-Sep-18 05:29 AM] siu#3920
1 is not enough?


[06-Sep-18 05:29 AM] TonyL#3577
It's in satoshis


[06-Sep-18 05:29 AM] siu#3920
ohh


[06-Sep-18 05:29 AM] siu#3920
got it


[06-Sep-18 05:35 AM] siu#3920
```{
    "method":"oraclesdata",
"params": ["2779956270435350ef49a4f4f600150b1cb4c266c67312e0f910aba1dae9e01b","C4275656e6f732064ed617321"]
}```


[06-Sep-18 05:35 AM] siu#3920
now this: ```{
    "result": {
        "result": "error",
        "error": "couldnt publish data with oracle txid"
    },
    "error": null,
    "id": null
}```


[06-Sep-18 05:35 AM] TonyL#3577
Did you subscribe?


[06-Sep-18 05:35 AM] siu#3920
yes


[06-Sep-18 05:36 AM] TonyL#3577
Which printout do you receive in daemon log?


[06-Sep-18 05:37 AM] siu#3920
```datafee must be txfee or more```


[06-Sep-18 05:37 AM] siu#3920
but oraclesdata doesnt ask for fee or amount


[06-Sep-18 05:38 AM] TonyL#3577
Could you please share printout of `oraclesinfo youroracleid`?


[06-Sep-18 05:39 AM] siu#3920
```{
    "result": {
        "result": "success",
        "txid": "2779956270435350ef49a4f4f600150b1cb4c266c67312e0f910aba1dae9e01b",
        "name": "Mensajes Ma√±aneros",
        "description": "Morning messages",
        "format": "s",
        "marker": "RKbBatcX4M4ghwdSrw9LHC5WQns37uPujK",
        "registered": [
            {
                "publisher": "0229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60d",
                "baton": "RPqiDqCYXyZtjsGDCAx3HPKeSaHnCNjbzX",
                "batontxid": "89bdc8801a97dd0dc79954b5e2ab0053374706a4e787c6266b5076dd70655a84",
                "lifetime": "0.00000000",
                "funds": "0.00000000",
                "datafee": "0.00100000"
            }
        ]
    },
    "error": null,
    "id": null
}```


[06-Sep-18 05:40 AM] TonyL#3577
`"funds": "0.00000000",` - that's the point


[06-Sep-18 05:40 AM] TonyL#3577
you have to subscribe first


[06-Sep-18 05:40 AM] siu#3920
ohh, not just register...


[06-Sep-18 05:40 AM] siu#3920
ok


[06-Sep-18 05:40 AM] TonyL#3577
`oraclessubscribe oracletxid publisher datafee`


[06-Sep-18 05:41 AM] siu#3920
ok


[06-Sep-18 05:41 AM] siu#3920
what is the difference between register and subscribe?


[06-Sep-18 05:44 AM] TonyL#3577
Register is on the data publisher side - you're setting txfee and registering as the publisher
subscribe is on the data consumer side - you're subscribing for getting the data from this oracle publisher


[06-Sep-18 05:45 AM] TonyL#3577
There is a more proper and clear explanation in a JL article above in this channel


[06-Sep-18 05:46 AM] TonyL#3577
```A data publisher needs to register a datafee and their pubkey for a specific oracletxid. datafee needs to be at least as big as a txfee. Using oraclesregister the current datafee can be updated so a publisher can adapt to market conditions. Once registered, subscribers can prepay for some number of datapoints to a specific publisher using the oraclessubscribe rpc. At first, it is likely that the publisher would pay themselves to enable the posting of initial data points so the potential subscribers can evaluate the quality and consistency of the data.```


[06-Sep-18 05:48 AM] siu#3920
thanks


[06-Sep-18 05:49 AM] siu#3920
but now it seems like i didnt publish anything: ```{
    "method":"oraclessamples",
"params": ["2779956270435350ef49a4f4f600150b1cb4c266c67312e0f910aba1dae9e01b","9e1b592b15afbefa0e391ac7746d030e3a3ca28c602058634c1be81becc891bf","1"]
}```


[06-Sep-18 05:49 AM] siu#3920
```{
    "result": {
        "result": "success",
        "samples": [
            []
        ]
    },
    "error": null,
    "id": null
}```


[06-Sep-18 05:56 AM] TonyL#3577
It's sensitive to data input. `C4275656e6f732064ed617321` not looks like a valid data for 's'


[06-Sep-18 05:56 AM] siu#3920
hmm, this really confuses me.


[06-Sep-18 05:57 AM] siu#3920
im no binary or hex or any other format expert


[06-Sep-18 05:58 AM] TonyL#3577
you have to convert your string to hex + amount of symbols in first byte for 's'


[06-Sep-18 05:58 AM] TonyL#3577
which text are you trying to send?


[06-Sep-18 05:59 AM] siu#3920
symbols after being converted to hex?


[06-Sep-18 05:59 AM] siu#3920
or symbols in the original text?


[06-Sep-18 05:59 AM] TonyL#3577
Symbols in the original text


[06-Sep-18 05:59 AM] siu#3920
ok


[06-Sep-18 05:59 AM] siu#3920
so original text is 12 characters


[06-Sep-18 05:59 AM] siu#3920
i added C for that...


[06-Sep-18 05:59 AM] siu#3920
took it from your chart heheheh


[06-Sep-18 06:00 AM] TonyL#3577
It should be `0c` since it's a 1 byte declaration


[06-Sep-18 06:01 AM] TonyL#3577
1 hex representing 4 binary (bits), 2 bits (1 byte) - 2 hex


[06-Sep-18 06:02 AM] siu#3920
you just talked math to a dog üòÇ


[06-Sep-18 06:04 AM] siu#3920
```{
    "method":"oraclesdata",
"params": ["2779956270435350ef49a4f4f600150b1cb4c266c67312e0f910aba1dae9e01b","oc4275656e6f732064ed617321"]
}
```


[06-Sep-18 06:05 AM] siu#3920
submitted this


[06-Sep-18 06:05 AM] siu#3920
still nothing in samples


[06-Sep-18 06:05 AM] jl777c#5810
not letter o


[06-Sep-18 06:05 AM] jl777c#5810
0c


[06-Sep-18 06:05 AM] siu#3920
ahh


[06-Sep-18 06:05 AM] siu#3920
typo


[06-Sep-18 06:05 AM] siu#3920
trying again


[06-Sep-18 06:05 AM] jl777c#5810
hex is 0,1,2,...9,a,b,c,d,e,f


[06-Sep-18 06:05 AM] jl777c#5810
only those


[06-Sep-18 06:05 AM] jl777c#5810
16 different hex chars


[06-Sep-18 06:06 AM] jl777c#5810
takes 4 bits to encode it, since 2*2*2*2 is 16


[06-Sep-18 06:06 AM] jl777c#5810
that is 2 times 2 times 2 times 2


[06-Sep-18 06:06 AM] jl777c#5810
a byte has 8 bits


[06-Sep-18 06:06 AM] jl777c#5810
4+4 is 8


[06-Sep-18 06:06 AM] jl777c#5810
i know it is really complex stuff, sorry


[06-Sep-18 06:06 AM] jl777c#5810
2 hex chars -> one byte since 4+4 equals 8


[06-Sep-18 06:07 AM] jl777c#5810
for strings each character is represented by ASCII,some standard from the past


[06-Sep-18 06:07 AM] jl777c#5810
it is usually shown in decimal, but probably can find a hex encoding for ASCII


[06-Sep-18 06:07 AM] jl777c#5810
each letter -> one byte -> 2 hex chars


[06-Sep-18 06:07 AM] siu#3920
so in `s` format only 8 characters are possible?


[06-Sep-18 06:07 AM] jl777c#5810
255


[06-Sep-18 06:08 AM] siu#3920
ok


[06-Sep-18 06:08 AM] jl777c#5810
16 times 16 is 256


[06-Sep-18 06:08 AM] TonyL#3577
https://cdn.cs50.net/2016/x/psets/0/pset0/bulbs.html nice demonstration to understand decimal -> binary

{Embed}
https://cdn.cs50.net/2016/x/psets/0/pset0/bulbs.html
CS50 Binary Bulbs
Learn to count in binary with CS50's Binary Bulbs!


[06-Sep-18 06:13 AM] TonyL#3577
@jl777c I'm receiving empty output after input to 'd' (tried just 011) and 'S' (tried 1000 symbols input)


[06-Sep-18 06:16 AM] TonyL#3577
03e84416e746f6e (200 times 416e746f6e = 1000 symbols)


[06-Sep-18 06:17 AM] siu#3920
i need a ELI5 or something... not getting it yet :/


[06-Sep-18 06:26 AM] TonyL#3577
@siu I'm adding examples of inputs and outputs for different data formats to my testing files (put it to file with autotests since I'll make it on this table basis later): https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing
Maybe it'll help to interact

{Embed}
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing
CCs Test Plan
ORACLE CC

 Oracles type, Type description, Data input, Expected output, Output, Oracles id( ORCL chain)
 L, 8 byte unsigned little endian, 00000000ffffffff, 18446744069414584000, 18446744069414584320, eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf
 l, 8 byt...
https://images-ext-1.discordapp.net/external/82hQbeigfuGNKqJrcGqcuqy1txzvSr9KYRh85xxywao/https/lh4.googleusercontent.com/9yeKWoEVtVvujIgExr4kwbRrCe3JBbDGkoWm0bJ8RVRKjuX0Wd3LIWIq-QK1nEmqiu1vNg%3Dw1200-h630-p


[06-Sep-18 06:35 AM] jl777c#5810
what was exact 'd' oraclesdata rpc call that failed?


[06-Sep-18 06:36 AM] TonyL#3577
`./komodo-cli -ac_name=ORCL oraclesdata a31286453124ee7b60c838c1ee681a26ce9553b98bc8593b45fad6ffc87effe2 011`


[06-Sep-18 06:37 AM] jl777c#5810
011 has odd number of chars, immediately illegal


[06-Sep-18 06:37 AM] jl777c#5810
you wanted 0101 ?


[06-Sep-18 06:37 AM] TonyL#3577
I wanted to put just 1 bit of binary


[06-Sep-18 06:37 AM] jl777c#5810
must always be even number of chars, otherwise will have a half a byte


[06-Sep-18 06:37 AM] jl777c#5810
1 byte is the least you can have


[06-Sep-18 06:38 AM] jl777c#5810
that is 8 bites


[06-Sep-18 06:38 AM] jl777c#5810
8 bits


[06-Sep-18 06:39 AM] TonyL#3577
Aha, so length in case of binary format means not the amount of chars but amount of bytes?


[06-Sep-18 06:39 AM] jl777c#5810
just like for 's'


[06-Sep-18 06:39 AM] jl777c#5810
you cant write half a byte out to the blockchain


[06-Sep-18 06:40 AM] TonyL#3577
I thought 'd' format can parse 1 and 0 as bits somehow so possible to make boolean by 1 bit input


[06-Sep-18 06:40 AM] TonyL#3577
But it's operating with bytes


[06-Sep-18 06:41 AM] jl777c#5810
well it could, but ultimately one byte is the smallest amount that can be written to the blockchain, so there is no point for higher resolution


[06-Sep-18 06:41 AM] TonyL#3577
Great, now clear


[06-Sep-18 06:41 AM] TonyL#3577
So what is the most elegant way to implement boolean as data type?


[06-Sep-18 06:42 AM] jl777c#5810
the 'S' issue could be a bug as it looked ok from your description, so need the actual rpc call


[06-Sep-18 06:42 AM] jl777c#5810
boolean would be 00 or 01


[06-Sep-18 06:42 AM] jl777c#5810
with 7 bits wasted


[06-Sep-18 06:42 AM] jl777c#5810
you could pack 8 booleans into a single byte


[06-Sep-18 06:42 AM] jl777c#5810
but that is up to the caller of the rpc to encode it


[06-Sep-18 06:43 AM] jl777c#5810
with 'd' you can put encrypted data in the hex


[06-Sep-18 06:53 AM] TonyL#3577
@jl777c https://docs.google.com/document/d/1z2br1U5yfZZFU67tkSloLQwoFro9HM2RW1e59LYsv6k/edit?usp=sharing my call (there is a symbol limit in Discord)

{Embed}
https://docs.google.com/document/d/1z2br1U5yfZZFU67tkSloLQwoFro9HM2RW1e59LYsv6k/edit?usp=sharing
/komodo-cli -ac_name=ORCL oraclesdata 80bff8a8314196581cfca97e0d24...
./komodo-cli -ac_name=ORCL oraclesdata 80bff8a8314196581cfca97e0d244946fc3453cf63b9648698a1f10bcf559ccb 03e84416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746f6e416e746...
https://images-ext-1.discordapp.net/external/S1hypXVCeQYwND-Aq3iVILbKi5swuol9O5HwcCXuE5Y/https/lh6.googleusercontent.com/GmlwfEBBkyGIEm_cMxtAKiwpHpoz1gVeS9pK26ZoGZADyjj-Fh2WVBEOa4K0shYxRBHg1Q%3Dw1200-h630-p


[06-Sep-18 06:54 AM] jl777c#5810
03e8


[06-Sep-18 06:54 AM] jl777c#5810
what value is that?


[06-Sep-18 06:55 AM] jl777c#5810
59395


[06-Sep-18 06:55 AM] jl777c#5810
plz understand little endian


[06-Sep-18 06:55 AM] TonyL#3577
03e8 planned  as 1000


[06-Sep-18 06:55 AM] jl777c#5810
from google: https://chortle.ccsu.edu/AssemblyTutorial/Chapter-15/ass15_3.html


[06-Sep-18 06:59 AM] jl777c#5810
e803 is the little endian 1000, 03e8 is big endian, which is opposite of little endian


[06-Sep-18 07:02 AM] TonyL#3577
Thanks @jl777c ! Was clear what is it - didn't know that same logic using when declaring length


[06-Sep-18 07:02 AM] TonyL#3577
Have to understand better how CC working with data


[06-Sep-18 07:02 AM] jl777c#5810
it is arbitrary


[06-Sep-18 07:03 AM] jl777c#5810
but it is simpler to always use little endian


[06-Sep-18 07:03 AM] jl777c#5810
instead of randomly picking little vs big for every possible case


[06-Sep-18 07:03 AM] jl777c#5810
bitcoin protocol has big endian and little endian depending on, well, random decisions made at the time


[06-Sep-18 07:04 AM] jl777c#5810
so that means you need to guess which endian-ness is used for every number bigger than 1 byte


[06-Sep-18 07:04 AM] jl777c#5810
I chose to avoid that by always using little endian


[06-Sep-18 07:07 AM] TonyL#3577
Oh I see


[06-Sep-18 07:08 AM] TonyL#3577
@jl777c After send data with little endian length (same data as in my doc but e803):
```
./komodo-cli -ac_name=ORCL oraclessamples 80bff8a8314196581cfca97e0d244946fc3453cf63b9648698a1f10bcf559ccb 991cc689c2522448b41bbb2d8cf4a4bd8722d5c53ef5b6f368776959b6dfed2a 1
error: couldn't parse reply from server
```


[06-Sep-18 07:09 AM] jl777c#5810
ok, try with 256 bytes


[06-Sep-18 07:10 AM] jl777c#5810
or did it crash?


[06-Sep-18 07:10 AM] TonyL#3577
`2018-09-06 14:05:55 ERROR: ContextualCheckBlockHeader: incorrect proof of work`
And was only this error in daemon (I guess after I broadcast)


[06-Sep-18 07:12 AM] TonyL#3577
256 bytes type ('s') I've tested already and it worked as expected. 
There was only 1 byte in length so was not possible to miss the order :trollface:


[06-Sep-18 07:12 AM] jl777c#5810
but 256 doesnt fit in 1 byte?


[06-Sep-18 07:12 AM] TonyL#3577
*255


[06-Sep-18 07:13 AM] TonyL#3577
Oh I have to rest a lil bit, lost concentration lol


[06-Sep-18 07:13 AM] jl777c#5810
that is why i asked to test 256, smallest of the 2 byte

{Reactions}
üëå 

[06-Sep-18 07:13 AM] jl777c#5810
0001


[06-Sep-18 07:13 AM] jl777c#5810
in little endian


[06-Sep-18 07:22 AM] TonyL#3577
@jl777c  worked with 256


[06-Sep-18 07:22 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL oraclesdata 80bff8a8314196581cfca97e0d244946fc3453cf63b9648698a1f10bcf559ccb 000161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161```


[06-Sep-18 07:23 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL oraclessamples 80bff8a8314196581cfca97e0d244946fc3453cf63b9648698a1f10bcf559ccb e8623888ed02dd23c518bddfdf4500a9309f2197472fe9134035dc97c17615fe 1
{
  "result": "success",
  "samples": [
    [
      "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
    ]
  ]
}
```


[06-Sep-18 07:33 AM] TonyL#3577
ü§î 
```./komodo-cli -ac_name=ORCL oraclesdata a31286453124ee7b60c838c1ee681a26ce9553b98bc8593b45fad6ffc87effe2 0101 ```
```
./komodo-cli -ac_name=ORCL oraclessamples a31286453124ee7b60c838c1ee681a26ce9553b98bc8593b45fad6ffc87effe2 f796405f8761430b712482f045a71a761e2e874c858af3f777e8a2a8c072df6f 1
{
  "result": "success",
  "samples": [
    [
      "0"
    ]
  ]
```
```
./komodo-cli -ac_name=ORCL oraclesdata a31286453124ee7b60c838c1ee681a26ce9553b98bc8593b45fad6ffc87effe2 0100
 ```
One more 0 
```./komodo-cli -ac_name=ORCL oraclessamples a31286453124ee7b60c838c1ee681a26ce9553b98bc8593b45fad6ffc87effe2 18226ede80a22d6aef996697243cb3c153bf8c5aa76c466e4f9427e2d81d1d27 2
{
  "result": "success",
  "samples": [
    [
      "0"
    ],
    [
      "0"
    ]
  ]
}
```


[06-Sep-18 07:34 AM] TonyL#3577
Shouldn't I get 1 in first case? (it's a 'd' oracle already)


[06-Sep-18 07:42 AM] jl777c#5810
you should have gotten "01" and "00" seems a bug, investigating


[06-Sep-18 11:44 AM] SHossain#0007
```
komodo-cli -ac_name=ORCL oraclesinfo 4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf
{
  "result": "success",
  "txid": "4a1173676264ba5ee0803fd2a076f916075221fcdae3bee053438af226956ecf",
  "name": "Oracle1",
  "description": "testing oracle",
  "format": "s",
  "marker": "RYDQVjt3XR4EW8uqDpKZ28pTAjmhFouZ3m",
  "registered": [
    {
      "publisher": "02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7",
      "baton": "RSHvgCPCPMwJbH7SmzRPWUoDrBtufjyvKQ",
      "batontxid": "38c61f66ba9afc172d36b33d2d892596bb945ee41fe2839a8140ba13bb6bdb56",
      "lifetime": "100.00000000",
      "funds": "100.35000000",
      "datafee": "0.00000001"
    },
    {
      "publisher": "02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7",
      "baton": "RSHvgCPCPMwJbH7SmzRPWUoDrBtufjyvKQ",
      "batontxid": "38c61f66ba9afc172d36b33d2d892596bb945ee41fe2839a8140ba13bb6bdb56",
      "lifetime": "100.00000000",
      "funds": "100.35000000",
      "datafee": "0.00000001",
      "publisher": "02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7",
      "baton": "RSHvgCPCPMwJbH7SmzRPWUoDrBtufjyvKQ",
      "batontxid": "38c61f66ba9afc172d36b33d2d892596bb945ee41fe2839a8140ba13bb6bdb56",
      "lifetime": "100.00000000",
      "funds": "100.35000000",
      "datafee": "0.01000000"
    }
  ]
}
```


[06-Sep-18 11:45 AM] SHossain#0007
oracleslist, oraclesinfo, oraclesaddress is working


[06-Sep-18 11:45 AM] SHossain#0007
testing the oraclescreate next


[06-Sep-18 11:59 AM] TonyL#3577
@SHossain when you'll reach `oraclesdata` there is a table: https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing which may help if needed samples

{Embed}
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing
CCs Test Plan
ORACLE CC

 Oracles type, Type description, Data input, Expected output, Output, Oracles id( ORCL chain)
 L, 8 byte unsigned little endian, 00000000ffffffff, 18446744069414584000, 18446744069414584320, eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf
 l, 8 byt...
https://images-ext-1.discordapp.net/external/82hQbeigfuGNKqJrcGqcuqy1txzvSr9KYRh85xxywao/https/lh4.googleusercontent.com/9yeKWoEVtVvujIgExr4kwbRrCe3JBbDGkoWm0bJ8RVRKjuX0Wd3LIWIq-QK1nEmqiu1vNg%3Dw1200-h630-p


[06-Sep-18 12:01 PM] SHossain#0007
Thanks @TonyL

{Reactions}
üëç 

[06-Sep-18 12:03 PM] TonyL#3577 (pinned)
CC's Automated tests coverage list:
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing

{Embed}
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing
CCs Test Plan
ORACLE CC

 Oracles type, Type description, Data input, Expected output, Output, Oracles id( ORCL chain)
 L, 8 byte unsigned little endian, 00000000ffffffff, 18446744069414584000, 18446744069414584320, eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf
 l, 8 byt...
https://images-ext-1.discordapp.net/external/82hQbeigfuGNKqJrcGqcuqy1txzvSr9KYRh85xxywao/https/lh4.googleusercontent.com/9yeKWoEVtVvujIgExr4kwbRrCe3JBbDGkoWm0bJ8RVRKjuX0Wd3LIWIq-QK1nEmqiu1vNg%3Dw1200-h630-p


[06-Sep-18 12:03 PM] TonyL#3577
Pinned a message.


[06-Sep-18 12:04 PM] TonyL#3577
Pinned since I often refer to it )


[06-Sep-18 12:53 PM] siu#3920
A PGP keys server oracle


[06-Sep-18 12:54 PM] siu#3920
That would be cool


[07-Sep-18 12:25 AM] TonyL#3577
```oraclefeed.c now works, you do need to customize it a bit:
#define ORACLETXID "4895f631316a649e216153aee7a574bd281686265dc4e8d37597f72353facac3"
#define MYPUBKEY "02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92"
it gets the bitcoin price and writes it out
format of "L"
yo have to manually create an oracle txid, register and subscribe
then it just loops every minute. it might get an error if the prior one isnt confirmed
FSM branch
```

Also have to change assetchain ID to needed in daemon calls (AT5 at the moment). Maybe make asset chain name as definable variable as well?

@jl777c How to compile it properly? I've tried  `gcc -Wall oraclefeed.c -o oraclefeed` but receiving errors:


[07-Sep-18 12:25 AM] TonyL#3577
```In file included from oraclefeed.c:20:0:
cJSON.c: In function ‚ÄòcJSON_strcasecmp‚Äô:
cJSON.c:52:2: warning: this ‚Äòif‚Äô clause does not guard... [-Wmisleading-indentation]
  if (!s1) return (s1==s2)?0:1;if (!s2) return 1;
  ^~
cJSON.c:52:31: note: ...this statement, but the latter is misleadingly indented as if it were guarded by the ‚Äòif‚Äô
  if (!s1) return (s1==s2)?0:1;if (!s2) return 1;
                               ^~
In file included from oraclefeed.c:20:0:
cJSON.c: In function ‚Äòprint_object‚Äô:
cJSON.c:572:3: warning: this ‚Äòif‚Äô clause does not guard... [-Wmisleading-indentation]
   if (fmt) *ptr++='\n';*ptr=0;
   ^~
cJSON.c:572:24: note: ...this statement, but the latter is misleadingly indented as if it were guarded by the ‚Äòif‚Äô
   if (fmt) *ptr++='\n';*ptr=0;
                        ^
cJSON.c: In function ‚ÄòcJSON_DetachItemFromArray‚Äô:
cJSON.c:600:2: warning: this ‚Äòif‚Äô clause does not guard... [-Wmisleading-indentation]
  if (c->prev) c->prev->next=c->next;if (c->next) c->next->prev=c->prev;if (c==array->child) array->child=c->next;c->prev=c->next=0;return c;}
  ^~
cJSON.c:600:37: note: ...this statement, but the latter is misleadingly indented as if it were guarded by the ‚Äòif‚Äô
  if (c->prev) c->prev->next=c->next;if (c->next) c->next->prev=c->prev;if (c==array->child) array->child=c->next;c->prev=c->next=0;return c;}
                                     ^~
oraclefeed.c: In function ‚Äòbntn‚Äô:
oraclefeed.c:330:61: warning: unused variable ‚Äòcmdstr‚Äô [-Wunused-variable]
     long fsize; int32_t i,n; cJSON *item,*retjson = 0; char cmdstr[32768],*jsonstr,*addr; double val;
                                                             ^~~~~~
/tmp/ccZxQFi4.o: In function `parse_number':
oraclefeed.c:(.text+0x5d8): undefined reference to `pow'
/tmp/ccZxQFi4.o: In function `print_number':
oraclefeed.c:(.text+0x6e0): undefined reference to `floor'
collect2: error: ld returned 1 exit status
```


[07-Sep-18 01:32 AM] jl777c#5810
gcc -c oraclefeed.c -lm


[07-Sep-18 01:33 AM] jl777c#5810
i plan to make all the things like acname, txid, etc. command line args.


[07-Sep-18 02:20 AM] TonyL#3577
@jl777c And then I should use object file as executable?


[07-Sep-18 02:21 AM] TonyL#3577
```./oraclefeed.o 
-bash: ./oraclefeed.o: cannot execute binary file: Exec format error``` I've tried this way but no luck


[07-Sep-18 02:23 AM] TonyL#3577
Or it's kinda library which will connect when I'll re-compile whole komodo?


[07-Sep-18 02:41 AM] jl777c#5810
a.out


[07-Sep-18 02:41 AM] jl777c#5810
assuming unix


[07-Sep-18 02:41 AM] jl777c#5810
if you add -o name then it generates file called "name"


[07-Sep-18 02:42 AM] jl777c#5810
sorry shouldnt have put the -c


[07-Sep-18 02:42 AM] jl777c#5810
gcc oraclefeed.c -lm


[07-Sep-18 02:44 AM] TonyL#3577
Thanks üëç  Created executable this way


[07-Sep-18 03:04 AM] TonyL#3577
@jl777c Wow!
```BTC/USD 6452.1113
txid.(cb8a910e13e36b9d260e91d3741efa92a6e0b493e2f2f05e903823e4e802fc36
)```
```./komodo-cli -ac_name=ORCL oraclessamples eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf cb8a910e13e36b9d260e91d3741efa92a6e0b493e2f2f05e903823e4e802fc36 10
{
  "result": "success",
  "samples": [
    [
      "645211130000"
    ]```


[07-Sep-18 03:05 AM] TonyL#3577
First oracles CC dAPP working üëç

{Reactions}
üëç (9) üí™ (5) Komodo (3) yassinkomodo (5) 

[07-Sep-18 03:06 AM] Deleted User#0000
üëå


[07-Sep-18 05:50 AM] TonyL#3577
@jl777c https://github.com/jl777/komodo/pull/863/files I've made a little bash script for app initialisation to make the process more interactive

{Embed}
https://github.com/jl777/komodo/pull/863/files
added dapp setup script by tonymorony ¬∑ Pull Request #863 ¬∑ jl77...
Added script to make oracle dapp first run more fun
Defined ACNAME variable in dapp source
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[07-Sep-18 05:54 AM] jl777c#5810
I merged it, but now I am moved back to jl777 branch


[07-Sep-18 05:54 AM] TonyL#3577
Oh, roger that


[08-Sep-18 10:03 AM] TonyL#3577
Just made a cli tool for  interactive oracle preparation for data publishing (creation, registration, subscribtion): https://github.com/tonymorony/kmd_cc_qa/blob/master/oracle.py
Next step is tests of transferring different amount of various data types from/to files to/from blockchain

{Embed}
https://github.com/tonymorony/kmd_cc_qa/blob/master/oracle.py
tonymorony/kmd_cc_qa
Tests for Komodo CC. Contribute to tonymorony/kmd_cc_qa development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Reactions}
üëç (5) shexy (2) 

[08-Sep-18 10:03 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/488031716536090644/oracle_init.png

{Reactions}
üÜí 

[09-Sep-18 07:52 AM] dukeleto#7326
@TonyL awesome work on oracles testing lately, I have been watching all your progress


[09-Sep-18 09:34 AM] siu#3920
@TonyL i got this output from your script: ```siu@T460:~/kmd_cc_qa$ ./oracle.py 
Input AC name with which you want to work (exmp: ORCL): ORCL
Do you want to create a new oracle? (y/n): y
Set your oracle name: BTCUSD
Set your oracle description: BTCUSD data feed
Set your oracle type (e.g. d): s
Set registration datafee >= txfee (in satoshis): 10000
Set subscribtion datafee >= txfee (in satoshis): 1000
Traceback (most recent call last):
  File "./oracle.py", line 19, in <module>
    oracle_id = oracle_create(ac_name, name, description, type)
  File "/home/siu/kmd_cc_qa/test_modules.py", line 93, in oracle_create
    ["komodo-cli","-ac_name="+ac_name,"oraclescreate",name,description,type]))
  File "/usr/lib/python3.5/json/__init__.py", line 312, in loads
    s.__class__.__name__))
TypeError: the JSON object must be str, not 'bytes'
```


[09-Sep-18 09:44 AM] siu#3920
is there anything im doing wrong or that i have to change?


[09-Sep-18 09:56 AM] TonyL#3577
@dukeleto thanks for a feedback! @siu let me check, maybe pushed something wrong hehe


[09-Sep-18 10:00 AM] TonyL#3577
@siu are you using daemon version with oracles support and is ORCL daemon runned? Just tested version from github and worked ok for me.


[09-Sep-18 10:04 AM] siu#3920
i did had an issue with the script because of python3.6


[09-Sep-18 10:04 AM] siu#3920
i changed it to python3 and it executed


[09-Sep-18 10:04 AM] siu#3920
but then fails


[09-Sep-18 10:05 AM] siu#3920
i do have ORCL running and yes, im running a FSM  branch compile


[09-Sep-18 10:06 AM] TonyL#3577
Can you try to execute `komodo-cli -ac_name=ORCL oraclescreate "BTCUSD" "BTCUSD data feed" "s"` from directory where script locating?


[09-Sep-18 10:06 AM] siu#3920
ohh... right, that might be the issue.


[09-Sep-18 10:06 AM] siu#3920
i only have that komodo version on the komodo/src folder


[09-Sep-18 10:07 AM] siu#3920
not in /usr/local/bin/ directory


[09-Sep-18 10:07 AM] TonyL#3577
Execute `export PATH=$PATH:~/komodo/src`


[09-Sep-18 10:07 AM] TonyL#3577
With path to your FSM komodod


[09-Sep-18 10:11 AM] siu#3920
nope... didnt work


[09-Sep-18 10:12 AM] TonyL#3577
But is this call working `komodo-cli -ac_name=ORCL oraclescreate "BTCUSD" "BTCUSD data feed"  "s"` if execute from same directory with script?


[09-Sep-18 10:13 AM] siu#3920
```~/kmd_cc_qa$ komodo-cli -ac_name=ORCL oraclescreate "BTCUSD" "BTCUSD data feed"  "s"
{
  "result": "success",
  "hex": "01000000014ad4233e3b091510d704a8b7b0425a9f4dceb2fbde85b6b3921105a07eb76d1b020000004847304402205571a185579635b2620d14c2a3b4d22a31b7b45ed9dd0d8e11a6af69409faa44022076350d493a0aca95506f62cca2e188fb157d8d9673b99a1f1aa922cd96c4f52b01ffffffff0310270000000000002321038c1d42db6a45a57eccb8981b078fb7857b9b496293fe299d2b8d120ac5b5691aac803801000000000023210229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60dac00000000000000001e6a1cec43064254435553440173104254435553442064617461206665656400000000"
}
siu@T460:~/kmd_cc_qa$ 
```


[09-Sep-18 10:13 AM] siu#3920
yes... it does work when i execute it from the same directory as where the script is.


[09-Sep-18 10:16 AM] TonyL#3577
`sudo apt-get install python3.6` my last hope hehe


[09-Sep-18 10:21 AM] siu#3920
ok


[09-Sep-18 10:21 AM] siu#3920
```sudo apt-get install python3.6 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package python3.6
E: Couldn't find any package by glob 'python3.6'
E: Couldn't find any package by regex 'python3.6'```


[09-Sep-18 10:22 AM] siu#3920
seems like i can only install python3


[09-Sep-18 10:22 AM] siu#3920
not specific version of 3


[09-Sep-18 10:24 AM] TonyL#3577
@siu thank you for testing! I've declared 3.6 strict in my code, guess it was a mistake. Let me try to change it.
Just started with Python few weeks ago. Didn't think much about compatibility...


[09-Sep-18 10:31 AM] siu#3920
sure, that is what im here for üòÉ


[09-Sep-18 10:48 AM] TonyL#3577
From python3.6 changelog:
```json
json.load() and json.loads() now support binary input. Encoded JSON should be represented using either UTF-8, UTF-16, or UTF-32. (Contributed by Serhiy Storchaka in bpo-17909.)```
So Python version is actually is an issue why it's not running on your side @siu
Please try:
```sudo add-apt-repository ppa:jonathonf/python-3.6
sudo apt-get update
sudo apt-get install python3.6 libpython3.6```
To install python3.6. I'll try to rewrite these places without 3.6 specifics usage to make it more compatible.


[09-Sep-18 12:15 PM] TonyL#3577
@Deleted User Nope, it's just a CLI tools for existing CCs usage


[09-Sep-18 12:17 PM] jl777c#5810
wrote most of the deposit side of the gateway CC and half the withdraw side. once this is done, it wont take more than a week to get a prices CC that allows doing a decentralized bitmex.

{Reactions}
üÜí (9) üöÄ (8) Komodo (8) 

[09-Sep-18 12:17 PM] jl777c#5810
gateway CC is the first one that does multiple CC transactions as it combines both the asset CC and oracles CC

{Reactions}
üòÉ (3) üôå (3) 

[09-Sep-18 12:18 PM] jl777c#5810
600 lines of code, but somewhat tricky so could take a few days to get debugged


[09-Sep-18 12:19 PM] jl777c#5810
its kind of crazy that a multigateway can be created in 600 lines, (say 1000 lines total)

{Reactions}
üòÆ (5) 1M (3) 

[09-Sep-18 12:19 PM] TonyL#3577
@Deleted User Processes like a: -> create oracle -> sendrawtx -> wait mining ->  register -> sendrawtx -> wait mining -> subscribe -> sendrawtx -> wait mining can be quite boring when playing by hands -> so that's why i made it)) + some python learning in action

{Reactions}
üÜí 

[09-Sep-18 01:25 PM] siu#3920
@TonyL will update python, thanks!


[09-Sep-18 01:32 PM] jspook16#3059
with CC contracts would it be possible to display the UTXOs  on barterdex that are up for trade instead of whole orders? something to make it easier to see what is actually available for trade


[09-Sep-18 01:51 PM] jl777c#5810
CC is not needed for that


[09-Sep-18 01:59 PM] jspook16#3059
copy. @siu are you still the barterdex dev?


[09-Sep-18 04:50 PM] TonyL#3577
Tool which transfer files into blockchain) Time to run tons of publishings simultaneously

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/488496528516972554/unknown.png

{Reactions}
üòé üé∞ 

[09-Sep-18 11:01 PM] tolken#2655
https://image.slidesharecdn.com/matrixanalysis-nomovies-090623051556-phpapp02/95/matrix-analysis-no-movies-21-728.jpg?cb=1245734238

{Embed}
https://image.slidesharecdn.com/matrixanalysis-nomovies-090623051556-phpapp02/95/matrix-analysis-no-movies-21-728.jpg?cb=1245734238
https://images-ext-2.discordapp.net/external/V2MwFj0531QN_40UUnmPxXLAKKGnfdO-re7bRjBbpdg/%3Fcb%3D1245734238/https/image.slidesharecdn.com/matrixanalysis-nomovies-090623051556-phpapp02/95/matrix-analysis-no-movies-21-728.jpg

{Reactions}
üíä (3) 

[10-Sep-18 07:02 AM] jl777c#5810 (pinned)
In order to create a new gateway it is necessary to follow some strict steps.
 1. create a token with the max possible supply that will be issued
 2. transfer 100% of them to the gateways CC's global pubkey's asset CC address. (yes it is a bit confusing)
 3. create an oracle with the identical name, ie. KMD and format must start with Ihh (height, blockhash, merkleroot)
 4. register a publisher and fund it with a subscribe. there will be a special client app that will automatically publish the merkleroots.
 5. Now a gatewaysbind can bind an external coin to an asset, along with the oracle for the merkleroots. the txid from the bind is used in most of the other gateways CC calls
 
 usage:
  ./c tokencreate KMD 1000000 KMD_equivalent_token_for_gatewaysCC
 a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a
 
 transfer to gateways pubkey: 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 RDMqGyREkP1Gwub1Nr5Ye8a325LGZsWBCb


[10-Sep-18 07:02 AM] jl777c#5810
./c tokentransfer a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 100000000000000
 2206fc39c0f384ca79819eb491ddbf889642cbfe4d0796bb6a8010ed53064a56
 
 ./c oraclescreate KMD blockheaders Ihh
 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808
 
 ./c oraclesregister 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808 1000000
 83b59eac238cbe54616ee13b2fdde85a48ec869295eb04051671a1727c9eb402
 
 ./c oraclessubscribe 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92 1000
 f9499d8bb04ffb511fcec4838d72e642ec832558824a2ce5aed87f1f686f8102
 
 ./c gatewaysbind a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808 KMD 100000000000000 1 1 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92
 e6c99f79d4afb216aa8063658b4222edb773dd24bb0f8e91bd4ef341f3e47e5e


[10-Sep-18 07:02 AM] jl777c#5810
./c gatewaysinfo e6c99f79d4afb216aa8063658b4222edb773dd24bb0f8e91bd4ef341f3e47e5e
 {
 "result": "success",
 "name": "Gateways",
 "pubkey": "02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92",
 "coin": "KMD",
 "oracletxid": "1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808",
 "taddr": 0,
 "prefix": 60,
 "prefix2": 85,
 "deposit": "",
 "tokenid": "a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a",
 "totalsupply": "1000000.00000000",
 "remaining": "1000000.00000000",
 "issued": "0.00000000"
 }


[10-Sep-18 07:05 AM] Alright#0419
Pinned a message.


[10-Sep-18 07:05 AM] jl777c#5810
now there is a gateway for KMD that will automatically issue a token when it is deposited, at least when I get it debugged. the commands up to gatewaysbind appear to work, so at least you can get ready to get gateways setup. I need to get the deposit processing and merkleroot posting done, then it can be automatically issuing a KMD deposit to the gateway address and then it will transfer a matching amount of locked assets.


[10-Sep-18 07:06 AM] jl777c#5810
if you are familiar with multigateway, this is a slightly improved and more flexible form


[10-Sep-18 07:08 AM] jl777c#5810
there is trust needed that the merkle data from the oracles are correct and also that the gateway deposit address signers wont steal the coins. For now I will debug a non-msig just to simplify the debugging, but ultimately it will be a multisig among several trusted community members. as long as they dont majority collude and keep the special gateway publisher app, the withdraws will be automated. even without this being run, the deposits are automated as long as the merkle data is there


[10-Sep-18 07:08 AM] jl777c#5810
at least, that is the design of what I coded yesterday. yes, it is all of one day since I started the coding for this


[10-Sep-18 07:10 AM] Alright#0419
Ok, pretty excited to test this. I'm not at all familiar with MGW. What this does is allow someone to deposit some coin, claim those coins as assets on KMD/assetchain, trade them from there for the native coin? Am I understanding that correctly?


[10-Sep-18 07:11 AM] jl777c#5810
not quite


[10-Sep-18 07:13 AM] jl777c#5810
https://99bitcoins.com/nxt-multigateway-service/

{Embed}
Coinbrief
https://99bitcoins.com/nxt-multigateway-service/
Release of Nxt Multigateway service: trade BTC within Nxt! - CoinBrief
Nxt Multigateway allows trustless trading of cryptocurrencies into the Nxt blockchain, where they can be traded on Nxt's fully-decentralized asset exchange.
https://images-ext-1.discordapp.net/external/IIIOCv05t1xmcOe4unGr5IGZx7_ssL5zvqVzhj-OR1Q/https/99bitcoins.com/wp-content/uploads/2014/07/MGWdescription1.jpg


[10-Sep-18 07:13 AM] Alright#0419
üëå


[10-Sep-18 07:14 AM] jl777c#5810
the deposit side for MGW also relied on the signing nodes to be online


[10-Sep-18 07:14 AM] jl777c#5810
with gateways CC, the deposit side uses the "standard" SPV validation/crosschain method to validate a coin deposit


[10-Sep-18 07:16 AM] jl777c#5810
that is why an oracle is needed, to post the merkleroots of the coin (in this case KMD) to the localchain


[10-Sep-18 07:17 AM] jl777c#5810
another improvement over MGW was that before the assets representing the coin had no way to restrict its transfer


[10-Sep-18 07:17 AM] jl777c#5810
however with CC, only a valid deposit will release any of the locked coins


[10-Sep-18 07:17 AM] jl777c#5810
this eliminates a significant trust point, and something that none of the other proxy based DEX solves


[10-Sep-18 07:18 AM] jl777c#5810
maintaining a 1:1 backing of the asset with the coin is critical and until now, this wasnt CC enforced


[10-Sep-18 07:23 AM] jl777c#5810
I am assuming we will get a DEX for assets and if I can figure out how to do a 1:1 KMD <-> assetchain peg, then we can have a KMD equivalent DEX for whatever other coins there is a gateway for. onchain DEX, like all the rest, but it seems what people are willing to use due to performance issues

{Reactions}
üëå (3) 

[10-Sep-18 07:53 AM] siu#3920
@TonyL the script worked this time! thanks!


[10-Sep-18 07:56 AM] siu#3920
Wow, this is evolving faster than i thought possible.


[10-Sep-18 07:57 AM] siu#3920
@TonyL to transfer files, what format your recommend for the oracle?


[10-Sep-18 07:57 AM] siu#3920
Also, do i just post the path to the file? or how is this supposed to be linked?


[10-Sep-18 07:59 AM] siu#3920
``` ./oracle.py 
Input AC name with which you want to work (exmp: ORCL): ORCL
Do you want to create a new oracle? (y/n): n
Do you want to display oracles availiable on this AC? (y/n): n
Do you want to transfer file to oracle? (y/n): y
Input ID of Oracle to which you want to put the data: f65bd1387adb3d4e4578958eba40c906b5f2c38538c5ab78f95fdda74b7467af
Input the filename which you want to transfer: saludos
Traceback (most recent call last):
  File "./oracle.py", line 48, in <module>
    file_oraclize(ac_name, oracle_id, filename)
  File "/home/siu/kmd_cc_qa/test_modules.py", line 202, in file_oraclize
    lines_count = len(open(filename).readlines(  ))
FileNotFoundError: [Errno 2] No such file or directory: 'saludos'
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/apport_python_hook.py", line 63, in apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
  File "/usr/lib/python3/dist-packages/apport/__init__.py", line 5, in <module>
    from apport.report import Report
  File "/usr/lib/python3/dist-packages/apport/report.py", line 30, in <module>
    import apport.fileutils
  File "/usr/lib/python3/dist-packages/apport/fileutils.py", line 23, in <module>
    from apport.packaging_impl import impl as packaging
  File "/usr/lib/python3/dist-packages/apport/packaging_impl.py", line 23, in <module>
    import apt
  File "/usr/lib/python3/dist-packages/apt/__init__.py", line 23, in <module>
    import apt_pkg
ModuleNotFoundError: No module named 'apt_pkg'

Original exception was:
Traceback (most recent call last):
  File "./oracle.py", line 48, in <module>
    file_oraclize(ac_name, oracle_id, filename)
  File "/home/siu/kmd_cc_qa/test_modules.py", line 202, in file_oraclize
    lines_count = len(open(filename).readlines(  ))
FileNotFoundError: [Errno 2] No such file or directory: 'saludos'
```


[10-Sep-18 08:00 AM] TonyL#3577
@siu great that it's worked!
For file transfer file content at the moment should be strictly match the oracle valid input (eg if it's text it should be hex with length in each line). Later I want to make some converter - from text to hex let's say (converting string to hex + adding length bytes). So you'll able to transfer texts to blockchain on fly.
I've tested it only when file locating in the same directory with script


[10-Sep-18 08:01 AM] TonyL#3577
`FileNotFoundError: [Errno 2] No such file or directory: 'saludos'`
I guess there is no such file üòÉ


[10-Sep-18 08:01 AM] siu#3920
ok, will try again


[10-Sep-18 08:13 AM] siu#3920
finally got it working! :p


[10-Sep-18 08:13 AM] siu#3920
{
    "result": {
        "result": "success",
        "samples": [
            [
                "$6312.87"
            ]
        ]
    },
    "error": null,
    "id": null
}


[10-Sep-18 08:14 AM] siu#3920
i would recommend for a print of the oracles sample when the transactions is done


[10-Sep-18 08:14 AM] TonyL#3577
Yahoo!


[10-Sep-18 08:14 AM] TonyL#3577
Yes it'll be done, since tool will also compare input and output


[10-Sep-18 08:15 AM] TonyL#3577
Pushed yesterday version which can only publish data to blockchain - didn't think someone will play with it üòÉ


[10-Sep-18 08:15 AM] siu#3920
üòÇ


[10-Sep-18 08:15 AM] siu#3920
anything that can simplify this would be nice


[10-Sep-18 08:15 AM] siu#3920
I would like to start doing a hurricane forecast feed :p


[10-Sep-18 08:15 AM] siu#3920
and a bitcoi price feed :p


[10-Sep-18 08:16 AM] TonyL#3577
In this repo one more tool  `trading.py` - can create token if needed üòÉ


[10-Sep-18 08:16 AM] siu#3920
for example i would like to find a way to feed the info on this website to a blockchain http://spaghettimodels.com/


[10-Sep-18 08:17 AM] TonyL#3577
You have to make some dapp - there is an very good example in `cc/dapps` - JL's dAPP which grab BTC price and oraclize


[10-Sep-18 08:19 AM] siu#3920
would html code be oraclelizable?


[10-Sep-18 08:19 AM] siu#3920
(or however oracle as a verb is written)


[10-Sep-18 08:25 AM] TonyL#3577
If data is in html I think it's better to parse it first to take only part which you need


[10-Sep-18 08:37 AM] siu#3920
i mean to somehow "host" a static website on the blockchain.


[10-Sep-18 08:38 AM] siu#3920
I would like to see how this oracle contract can be applied to do some kind of steemit social media


[10-Sep-18 08:39 AM] TonyL#3577
I think why not


[10-Sep-18 08:40 AM] TonyL#3577
Posts data can be oraclized


[10-Sep-18 09:02 AM] siu#3920
the oracle price feed app is printing an error: ```BTC/USD 6288.5050
error code: -25
error message:

loadfile null size.(/tmp/komodocli)
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   673  100   673    0     0   4129      0 --:--:-- --:--:-- --:--:--  4154
BTC/USD 6291.4488
error code: -25
error message:

loadfile null size.(/tmp/komodocli)
```


[10-Sep-18 09:13 AM] jl777c#5810
do you have write privs to /tmp


[10-Sep-18 11:03 AM] siu#3920
oh... no, didnt run it with sudo


[10-Sep-18 11:05 AM] Bryan_Beus#6442
@Alright saw your post about needing notary nodes for staked. 

I might be interested. Could be good for the documentation effort. What does it require?


[10-Sep-18 11:57 AM] siu#3920
damn, i forgot that part.


[10-Sep-18 01:12 PM] siu#3920
@jl777c i think something broke on the oracles CC on the latest compile


[10-Sep-18 01:12 PM] siu#3920
I got the btcusd price feed dapp to work


[10-Sep-18 01:12 PM] siu#3920
but i just recompiled to latest code to try the gateway CC and now it seems like nothing gets posted.


[10-Sep-18 01:13 PM] TonyL#3577
@jl777c Actually string types stopped to work since some commit (blank output again). Bytes inputs working fine


[10-Sep-18 01:14 PM] siu#3920
yes, the price feed does still work


[10-Sep-18 01:18 PM] siu#3920
this for example is not working for me: ```{
    "method":"oraclesdata",
"params": ["d7b8d4f10da4f00a47fabab6d561e8941dd5d459b707ab4a1eb3e858bd199aa1","67224c6120726573706f6e736162696c69646164206465206c61732074617265617320646f6de973746963617320656e20656c20686f676172206465626520736572206571756974617469766173207061726120746f646f73206c6f73206d69656d62726f732e22"]
}
```


[10-Sep-18 01:18 PM] siu#3920
```{
    "result": {
        "result": "success",
        "hex": "0100000003e1da6daebdbcec2a7e9840688d91e75f2e47a91f6f5a9b95d6e187628969012c0300000048473044022064885102760b8bec1bfa11d13e9b48cb110a400db9cd979fa1ab7d14c9501e3a02201cd90a990986263c2f465d176583b3cb95d80337cae5dd23161f0ef3ca96819901ffffffffc0fe2519d6c1bd7f7d0eca5e8fc3b6b457d1a7254403341749184bf246a9891f010000007b4c79a276a072a26ba067a56580210324215eaf7b0117c613ed07cb5b74db1f0d343d4db4e35d4a8d00037d6f32c76381403ec0d81eb12fe7684b5be1ef6139cb73703c61a920aa170f0724a7e33fc71daf19312328667bd2f01dd3b9a85623f9832e53e776bfcbf020f56bd4ce76cac03ba100af038001eca10001ffffffff8ba1d5c14ab227fdb3bcdc28663382777e11503ca0d9739e1cb31864f167421e000000007b4c79a276a072a26ba067a56580210229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60d81405d8e22c152253253cb5d3218b02abef8de497625ad95bc55b7ef80dd5e3846381df9f51880d1293f48d19af66b1cc1168ebaa29e76db98e5be7f5dd31afa1e92a100af038001eca10001ffffffff05c04b764817000000302ea22c8020533f80d2c3b67946d926e2036fceb72dc4689ad38758517af5f79228b60559848103120c008203000401cc1027000000000000302ea22c8020eeae402ff9d71efd4c690633bac908045bf75cd9265287933e8c8c6c8da6816d8103120c008203000401cc102700000000000023210229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60dac7cbce8302c00000023210229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60dac0000000000000000d06a4ccdec44a19a19bd58e8b31e4aab07b759d4d51d94e861d5b6bafa470af0a40df1d4b8d7c0fe2519d6c1bd7f7d0eca5e8fc3b6b457d1a7254403341749184bf246a9891f210229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60d6867224c6120726573706f6e736162696c69646164206465206c61732074617265617320646f6de973746963617320656e20656c20686f676172206465626520736572206571756974617469766173207061726120746f646f73206c6f73206d69656d62726f732e2200000000"
    },
    "error": null,
    "id": null
}```


[10-Sep-18 01:18 PM] siu#3920
```{
    "method":"oraclessamples",
"params": ["d7b8d4f10da4f00a47fabab6d561e8941dd5d459b707ab4a1eb3e858bd199aa1","4c6344defe468c95cb655edbd7a9232f5ee31f97560be0515423d081f89841e8","1"]
}```


[10-Sep-18 01:18 PM] siu#3920
```{
    "result": {
        "result": "success",
        "samples": [
            []
        ]
    },
    "error": null,
    "id": null
}```


[10-Sep-18 01:58 PM] jl777c#5810
I will fix all the reproducible oracle bugs when i write the gateways oraclizer

{Reactions}
üëå (2) 

[11-Sep-18 03:43 AM] actionslacks#4072
github link?


[11-Sep-18 03:53 AM] jl777c#5810
jl777/komodo jl777 branch


[11-Sep-18 04:19 AM] siu#3920
did we changed from FSM branch?


[11-Sep-18 04:22 AM] jl777c#5810
FSM is subject to being broken. jl777 I will try to keep stable


[11-Sep-18 04:23 AM] siu#3920
ok


[11-Sep-18 06:38 AM] TonyL#3577
@siu just pushed new features to the test tools:
- Now it's possible to grab data from oracle to file with needed depth
- Convert file from int to hex on fly (Should work correct only for `C ` data type atm) 
- Compare files with data which input to blockchain and output data which you get from blockchain


[11-Sep-18 06:39 AM] siu#3920
nice!


[11-Sep-18 06:39 AM] TonyL#3577
Tested with `C` data type oracle and input file with data:
```
ff
ff
ff
ff
ff
ff
ff
ff
ff
ff
```


[11-Sep-18 06:41 AM] TonyL#3577
Now it's possible to build a flood test with `test_modules.py` functions  at least for a `C` data type with automatically input/output comparison


[11-Sep-18 06:41 AM] siu#3920
so it matches the data from a file to what already is in the chain?


[11-Sep-18 06:43 AM] TonyL#3577
It can grab data from oracle to file and then compare two files


[11-Sep-18 06:43 AM] TonyL#3577
But if you put `ff` to `C` oracle you'll get `255` so there is a method to convert `255` back to `ff` first


[11-Sep-18 06:44 AM] TonyL#3577
If some data missing - files will not match and you'll see message about it


[11-Sep-18 06:49 AM] TonyL#3577
Hmm just noticed that there should be an inversion in comparison to original when reading from oracle - since first data entry in oracle will be the last string of file actually. Have to re-write a little bit for non-symmetric data examples.


[11-Sep-18 06:50 AM] siu#3920
im here trying to grasp my head around all this still... at least i got a better idea on how to use oracle for basic stuff

{Reactions}
üëç 

[11-Sep-18 08:08 AM] siu#3920
gateway is still not ready to be tested?


[11-Sep-18 08:16 AM] jl777c#5810
actually it can be tested, but it isnt so easy yet


[11-Sep-18 08:17 AM] jl777c#5810
To make a gateway deposit, send the funds to the "deposit" address, along with any amount to the same pubkey address you want to get the assetized KMD to appear in.
 
 0223d114dededb04f253816d6ad0ce78dd08c617c94ce3c53bf50dc74a5157bef8 pubkey for RFpxgqff7FDHFuHa3jSX5NzqqWCcELz8ha
 ./komodo-cli z_sendmany "<funding addr>" '[{"address":"RFpxgqff7FDHFuHa3jSX5NzqqWCcELz8ha","amount":0.0001},{"address":"RHV2As4rox97BuE3LK96vMeNY8VsGRTmBj","amount":7.6999}]'
 bc41a00e429db741c3199f17546a48012fd3b7eea45dfc6bc2f5228278133009 height.1003776 merkle.90aedc2f19200afc9aca2e351438d011ebae8264a58469bf225883045f61917f
 
 ./komodo-cli gettxoutproof '["bc41a00e429db741c3199f17546a48012fd3b7eea45dfc6bc2f5228278133009"]'
 <big proof>


[11-Sep-18 08:17 AM] jl777c#5810
./komodo-cli getrawtransaction bc41a00e429db741c3199f17546a48012fd3b7eea45dfc6bc2f5228278133009
 010000000149964cdcd17fe9b1cae4d0f3b5f5db301d9b4f54099fdf4d34498df281757094010000006a4730440220594f3a630dd73c123f44621aa8bb9968ab86734833453dd479af6d79ae6f584202207bb5e35f13b337ccc8a88d9a006c8c5ddb016c0a6f4f2dc44357a8128623d85d01210223154bf53cd3a75e64d86697070d6437c8f0010a09c1df35b659e31ce3d79b5dffffffff0310270000000000001976a91447d2e323a14b0c3be08698aa46a9b91489b189d688ac701de52d000000001976a91459fdba29ea85c65ad90f6d38f7a6646476b26b1688acb0a86a00000000001976a914f9a9daf5519dae38b8b61d945f075da895df441d88ace18d965b

 gatewaysdeposit bindtxid height coin cointxid claimvout deposithex proof destpub amount numpks oraclepks
./komodo-cli -ac_name=AT5 gatewaysdeposit e6c99f79d4afb216aa8063658b4222edb773dd24bb0f8e91bd4ef341f3e47e5e 1003776 KMD bc41a00e429db741c3199f17546a48012fd3b7eea45dfc6bc2f5228278133009 0 010000000149964cdcd17fe9b1cae4d0f3b5f5db301d9b4f54099fdf4d34498df281757094010000006a4730440220594f3a630dd73c123f44621aa8bb9968ab86734833453dd479af6d79ae6f584202207bb5e35f13b337ccc8a88d9a006c8c5ddb016c0a6f4f2dc44357a8128623d85d01210223154bf53cd3a75e64d86697070d6437c8f0010a09c1df35b659e31ce3d79b5dffffffff0310270000000000001976a91447d2e323a14b0c3be08698aa46a9b91489b189d688ac701de52d000000001976a91459fdba29ea85c65ad90f6d38f7a6646476b26b1688acb0a86a00000000001976a914f9a9daf5519dae38b8b61d945f075da895df441d88ace18d965b <bigproof>  0223d114dededb04f253816d6ad0ce78dd08c617c94ce3c53bf50dc74a5157bef8 7.6999 1 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92
 -> 9d80ea79a65aaa0d464f8b762356fa01047e16e9793505a22ca04559f81a6eb6


[11-Sep-18 08:17 AM] jl777c#5810
gatewaysclaim bindtxid coin deposittxid destpub amount
./c gatewaysclaim e6c99f79d4afb216aa8063658b4222edb773dd24bb0f8e91bd4ef341f3e47e5e KMD 9d80ea79a65aaa0d464f8b762356fa01047e16e9793505a22ca04559f81a6eb6 0223d114dededb04f253816d6ad0ce78dd08c617c94ce3c53bf50dc74a5157bef8 7.6999


[11-Sep-18 08:18 AM] jl777c#5810
after the initial steps are done, then the deposit is made on the KMD to get txid, the proof obtained and all of it submitted with a gatewaysdeposit


[11-Sep-18 08:18 AM] jl777c#5810
then a gatewaysclaim to get the coins


[11-Sep-18 08:19 AM] siu#3920
ahh, i think that since i moved to the jl777 branch, it is still not available there.


[11-Sep-18 08:19 AM] jl777c#5810
just pushed it there


[11-Sep-18 08:20 AM] siu#3920
ok


[11-Sep-18 08:20 AM] jl777c#5810
but for now you need to manually add merkle data to oracle and I doubt you will be able to do that. that is my next step to make a dapp that does the merkle data


[11-Sep-18 08:20 AM] jl777c#5810
then it would be much easier to get a working deposit


[11-Sep-18 08:20 AM] jl777c#5810
but it is ready for getting a gateway configured


[11-Sep-18 08:21 AM] jl777c#5810
deposit addr can be 1 to MofN pubkeys
 1:1 gateway with native coin
 
 In order to create a new gateway it is necessary to follow some strict steps.
 1. create a token with the max possible supply that will be issued
 2. transfer 100% of them to the gateways CC's global pubkey's asset CC address. (yes it is a bit confusing)
 3. create an oracle with the identical name, ie. KMD and format must start with Ihh (height, blockhash, merkleroot)
 4. register a publisher and fund it with a subscribe. there will be a special client app that will automatically publish the merkleroots.
 5. Now a gatewaysbind can bind an external coin to an asset, along with the oracle for the merkleroots. the txid from the bind is used in most of the other gateways CC calls
 
 usage:
  ./c tokencreate KMD 1000000 KMD_equivalent_token_for_gatewaysCC
 a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a
 
 transfer to gateways pubkey: 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 RDMqGyREkP1Gwub1Nr5Ye8a325LGZsWBCb
 ./c tokentransfer a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 100000000000000
 2206fc39c0f384ca79819eb491ddbf889642cbfe4d0796bb6a8010ed53064a56


[11-Sep-18 08:21 AM] jl777c#5810
./c oraclescreate KMD blockheaders Ihh
 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808
 
 ./c oraclesregister 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808 1000000
 83b59eac238cbe54616ee13b2fdde85a48ec869295eb04051671a1727c9eb402
 
 ./c oraclessubscribe 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92 1000
 f9499d8bb04ffb511fcec4838d72e642ec832558824a2ce5aed87f1f686f8102
 
 ./c gatewaysbind a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808 KMD 100000000000000 1 1 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92
 e6c99f79d4afb216aa8063658b4222edb773dd24bb0f8e91bd4ef341f3e47e5e
 
 ./c gatewaysinfo e6c99f79d4afb216aa8063658b4222edb773dd24bb0f8e91bd4ef341f3e47e5e
 {
 "result": "success",
 "name": "Gateways",
 "pubkey": "02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92",
 "coin": "KMD",
 "oracletxid": "1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808",
 "taddr": 0,
 "prefix": 60,
 "prefix2": 85,
 "deposit": "",
 "tokenid": "a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a",
 "totalsupply": "1000000.00000000",
 "remaining": "1000000.00000000",
 "issued": "0.00000000"
 }


[11-Sep-18 08:21 AM] jl777c#5810
if you can get a gatewaysinfo like above, it is ready for the deposit


[11-Sep-18 08:22 AM] siu#3920
``` 2. transfer 100% of them to the gateways CC's global pubkey's asset CC address. (yes it is a bit confusing)```so this is not the normal pubkey with which we run the node... this is another one?


[11-Sep-18 08:23 AM] jl777c#5810
do a gatewaysaddress command, it will display the global gateways asset address


[11-Sep-18 08:23 AM] jl777c#5810
this is a global address so it locks the assets there


[11-Sep-18 08:24 AM] jl777c#5810
the only way it is allowed to come out is via a valid claim


[11-Sep-18 08:24 AM] siu#3920
ok, updating first


[11-Sep-18 08:24 AM] jl777c#5810
which requires a valid deposit


[11-Sep-18 08:25 AM] jl777c#5810
gatewaysaddress [pubkey]
gatewaysbind tokenid oracletxid coin tokensupply M N pubkey(s)
gatewayslist
gatewaysinfo bindtxid
gatewaysdeposit bindtxid height coin cointxid claimvout deposithex proof destpub amount numpks oraclepks
gatewaysclaim bindtxid coin deposittxid redeemscript amount


[11-Sep-18 08:25 AM] jl777c#5810
as you can see gatewaysbind needs a tokenid, oracletix, coin, pubkeys for the key holders all in place


[11-Sep-18 08:34 AM] siu#3920
```./komodo-cli -ac_name=ORCL gatewaysaddress
{
  "result": "success",
  "GatewaysCCaddress": "RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33",
  "Gatewaysmarker": "RGJKV97ZN1wBfunuMt1tebiiHENNEq73Yh",
  "GatewaysCCassets": "RXeCwa6SVubZ7NbANDT3JNc9PzcwXm5Gwu",
  "myCCaddress": "RGEjf1UmvS78nJWyGfRREnNDDkcbBBC7qD",
  "myaddress": "RMrGSingGy3qDg6tjfZnFUhrzzoktWkfuV"
}
```


[11-Sep-18 08:34 AM] siu#3920
gatewaysCCassets is the one i need for step 2?


[11-Sep-18 08:44 AM] jl777c#5810
no, its the wrong address. in any case you need to send to pubkey


[11-Sep-18 08:44 AM] jl777c#5810
03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40


[11-Sep-18 08:47 AM] siu#3920
ohh, so this pubkey is universal?


[11-Sep-18 08:52 AM] siu#3920
```{
    "method":"sendrawtransaction",
"params": ["01000000020009d0f48322c085dbb838e6afcf55d31a9a5f967f2ce2659905b0c977b2ebc8020000004948304502210098b87aa8d642cf1997cede3e3cd9ba989071e0f58a66faafc4a2bb131501b4fd02207f8a405f422a532dfdf7a03c4658c49566a7cfa635c36a69743082f6515cd3cf01ffffffffb5ee2fca2ece0e7cbd0f848c440cb3bba369d72a7b1ef833ed7730df8723e19d000000007b4c79a276a072a26ba067a56580210229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60d8140fc645a6c6965e7c1a6136fd5b3629817915ebb172e45b00af381e4cd6df690e82b3fd945b9eb228c112d27162bd59e14805604a356ae16377f2c9f517950ae9da100af038001e3a10001ffffffff0200e1f50500000000302ea22c8020a9a95026a211454d61e89c7c48ef6e431f7c3af40eaaf48727bc0c356195466b8103120c008203000401cc0000000000000000246a22e3749de12387df3077ed33f81e7b2ad769a3bbb30c448c840fbd7c0ece2eca2feeb500000000"]
}
```


[11-Sep-18 08:52 AM] siu#3920
ac5a14229cced23cb20c2e73e5c0621f4087d87f86b7f57362206b2b23cf0989


[11-Sep-18 08:52 AM] siu#3920
tokens sent to that pubkey


[11-Sep-18 08:53 AM] siu#3920
created oracle: ```{
    "method":"sendrawtransaction",
"params": ["0100000001a8e2b2aa461121594ac6ed30a863372e04511c45a7d6ec22db3d77472dec3e230300000049483045022100e445ba35315af401e3626e07d1321fa9555e8843812ad8cdc8a2002f380f0d7c02206b4b236e8f9d47f6a92f2d56e3852c3f9e99ddf065c2b6ce7ff52fee10dda0e701ffffffff0310270000000000002321038c1d42db6a45a57eccb8981b078fb7857b9b496293fe299d2b8d120ac5b5691aacdc35e7302c00000023210229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60dac0000000000000000196a17ec43034b4d44034968680c626c6f636b6865616465727300000000"]
}```


[11-Sep-18 08:54 AM] siu#3920
e4787a70ad99e721b1cad39b00897aa4187d4f91af2be399819531b22f86543d


[11-Sep-18 09:00 AM] siu#3920
what do `M N pubkey(s)` stand for?


[11-Sep-18 09:00 AM] siu#3920
i see in your example you used 1 1


[11-Sep-18 09:00 AM] siu#3920
and the pubkeys are my pubkeys or the universal pubkey again?


[11-Sep-18 09:01 AM] jl777c#5810
there needs to be trusted nodes to hold the funds


[11-Sep-18 09:01 AM] jl777c#5810
to avoid any multisig issues I used M=1, N=1 and my pubkey


[11-Sep-18 09:01 AM] jl777c#5810
once I get the single signer case working, I will debug the multisig


[11-Sep-18 09:01 AM] jl777c#5810
for now, just use 1 1 <trustedpubkey>


[11-Sep-18 09:01 AM] jl777c#5810
the external coins will go into an address controlled by the trusted pubkeys


[11-Sep-18 09:02 AM] siu#3920
and coin stands for the coin im going to deposit?


[11-Sep-18 09:04 AM] siu#3920
```./komodo-cli -ac_name=ORCL gatewaysinfo 72fc4dd67ed3904f13abb03bca6224f9a508c3ac1ad368e98cbaeb385390fc4c
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "0229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60d",
  "coin": "KMD",
  "oracletxid": "e4787a70ad99e721b1cad39b00897aa4187d4f91af2be399819531b22f86543d",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RMrGSingGy3qDg6tjfZnFUhrzzoktWkfuV",
  "tokenid": "9de12387df3077ed33f81e7b2ad769a3bbb30c448c840fbd7c0ece2eca2feeb5",
  "totalsupply": "1.00000000",
  "remaining": "1.00000000",
  "issued": "0.00000000"
}
```


[11-Sep-18 09:04 AM] siu#3920
supply for the bind command is in satoshis?


[11-Sep-18 09:09 AM] jl777c#5810
yes, it looks like it worked!


[11-Sep-18 09:09 AM] jl777c#5810
so now KMD deposits to RMrGSingGy3qDg6tjfZnFUhrzzoktWkfuV can generate a gatewaysdeposit tx, which can then be claimed and the assets appear in the claiming address


[11-Sep-18 09:10 AM] jl777c#5810
you do need to specify the destination address via a claimvout in the KMD deposit


[11-Sep-18 09:11 AM] siu#3920
ok, so it doesnt matter that im doing this on ORCL chain, the gateway is for KMD


[11-Sep-18 09:13 AM] jl777c#5810
once a gateway is created, then KMD -> assetchain is in place


[11-Sep-18 09:14 AM] jl777c#5810
every assetchain can have its own gateway


[11-Sep-18 09:14 AM] jl777c#5810
and there can be a gateway for any bitcoin protocol coin


[11-Sep-18 09:14 AM] jl777c#5810
the multiplicative effect is quite powerful


[11-Sep-18 09:15 AM] jl777c#5810
so, even with 1of1, it will end up fragmenting the deposits across many providers, a single hack wont have any large amount at risk. of course 1of1 is a centralized proxy token! but that seems to be what all the other proxy DEX are using


[11-Sep-18 09:16 AM] jl777c#5810
the worst case security, test only scenario, is what all the other platforms have


[11-Sep-18 09:16 AM] jl777c#5810
and this is 4 years after I did MGW. sigh...


[11-Sep-18 09:46 AM] siu#3920
they are waiting for you to get the solution :trollface:


[11-Sep-18 09:51 AM] jl777c#5810
well the deposit side is basically done, just need to update the dapp to write the merkle data


[11-Sep-18 11:47 AM] jl777c#5810
updated oraclefeed.c to have cli params and support Ihh for (height, blockhash, merkleroot)


[11-Sep-18 11:48 AM] jl777c#5810
that is what is needed to get the gatewaysdeposit validated


[11-Sep-18 11:49 AM] jl777c#5810
with this, I think gateways CC is ready for full loop deposit testing. I still need to verify the oracle data isnt endian reversed and it working ok. there is still a mempool conflict that isnt checked and there is no validation, so no attacking it yet, just being nice to it and making sure it works


[11-Sep-18 11:50 AM] jl777c#5810
the last step is the withdraw, which will make it actually quite useful


[11-Sep-18 11:50 AM] jl777c#5810
then adding validation and verifying multisig, so on track of a feature complete release this week


[11-Sep-18 11:51 AM] jl777c#5810
as soon as we have a working gateways CC, I allocate one week o get the bitmex (prices) CC for KMD cash settled PriceBet (long and short)

{Reactions}
üò≤ (6) üöÄ (14) üëçüèΩ (11) üíØ (10) üçª (10) ü§∏ (3) yassinkomodo (6) Komodo (10) 

[12-Sep-18 12:25 AM] jl777c#5810
not sure if people realize how much time it usually takes to create an automated crypto gateway, let alone one that is protected by multisig and locked funds


[12-Sep-18 12:26 AM] jl777c#5810
I would think 6 to 12 months would be a fast pace for such a thing. To have one coming together in days... it is orders of magnitude faster, primarily due to the CC architecture


[12-Sep-18 12:27 AM] grewalsatinder#9653
you spoilt KMD peeps around here James üòÑ

{Reactions}
yassinkomodo (4) 

[12-Sep-18 03:35 AM] siu#3920
@jl777c so withdraw is ready?


[12-Sep-18 03:35 AM] siu#3920
i have not deposited any komodo to the gateway i made to not lose it :p


[12-Sep-18 03:36 AM] jl777c#5810
working on withdraw today, but still need to validate other things


[12-Sep-18 03:36 AM] jl777c#5810
as long as you control the deposit address your KMD will be safe though. still just use small amounts


[12-Sep-18 03:38 AM] jl777c#5810
sorry its taking so long


[12-Sep-18 03:38 AM] siu#3920
Long? Lol


[12-Sep-18 03:38 AM] siu#3920
Its not even been 24h


[12-Sep-18 03:38 AM] jl777c#5810
been distracted training new CC devs

{Reactions}
üöÄ (3) 

[12-Sep-18 03:39 AM] siu#3920
Oh, that is great!


[12-Sep-18 04:09 AM] TonyL#3577
@jl777c I've noticed that it's possible to subscribe/register on oracle even if oracle creation txid isn't mined yet (in mempool). Should I consider it as an expected behaviour?


[12-Sep-18 04:10 AM] jl777c#5810
as long as no ill effect, it seems ok

{Reactions}
üëå 

[12-Sep-18 05:36 AM] jl777c#5810
update oraclesdata so more than one oraclesdata can be posted each block, if there are enough utxos


[12-Sep-18 05:37 AM] jl777c#5810
i had to get this working so that assetchains can keep up with posting one merkleroot per block, as it was both KMD and assetchains are on a one minute per block, but if any delay error, the posting side falls behind, so gradually it ended up being way behind


[12-Sep-18 05:43 AM] jl777c#5810
gateways CC is now ready for automated deposits, there now is a working oraclefeed to write the KMD merkleroots onchain


[12-Sep-18 05:43 AM] jl777c#5810
to get the merkleroots onchain, from the multisig signers nodes run the oraclefeed program with acname oracletxid pubkey Ihh
 ./oraclefeed AT5 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92 Ihh


[12-Sep-18 05:44 AM] jl777c#5810
run that from the node(s) that are able to sign the multisig/only gateway deposit address


[12-Sep-18 05:44 AM] jl777c#5810
once it is running, it will write the (height, blockhash, merkleroot) each block (for now 10 blocks behind)


[12-Sep-18 05:47 AM] TonyL#3577
Oh just wrote script to send only one oraclesdata per block and no limitation now so now may try to send the all file lines in one block , yahooo


[12-Sep-18 05:50 AM] jl777c#5810
you will need 1 utxo per pending oraclesdata


[12-Sep-18 05:52 AM] TonyL#3577
utxo on oraclescontract or my wallet?


[12-Sep-18 05:52 AM] jl777c#5810
oraclessubscribe utxos


[12-Sep-18 05:53 AM] TonyL#3577
Thanks! Will add utxos creation to oracles preparation step. Can I send as much as I want `oraclessubscribe` in one block?


[12-Sep-18 05:56 AM] jl777c#5810
yes, well limited by blocksize


[12-Sep-18 05:57 AM] TonyL#3577
Is blocksize allows to send ~1000 txs atm in one block?


[12-Sep-18 05:58 AM] TonyL#3577
Used this num as a limit when tested


[12-Sep-18 06:03 AM] jl777c#5810
5000 or so


[12-Sep-18 06:03 AM] jl777c#5810
depends on tx size


[12-Sep-18 06:03 AM] jl777c#5810
2MB blocksize


[12-Sep-18 06:03 AM] jl777c#5810
the oraclefeed was updated so it stays 10 blocks behind KMD


[12-Sep-18 06:04 AM] jl777c#5810
which is in lieu of checking for notarization. for now good enough which means until 10 blocks after the KMD deposit, the gatewaysdeposit will get an error as it wont be able to find the merkleroot


[12-Sep-18 07:51 AM] TonyL#3577
@jl777c Still can't send two `oraclesdata` in same block - no matters how many `oraclessubscribe` creating.
For a second data broadcasting (rawtransaction sending) receiving:
```error code: -25
error message:``` 
(nothing in daemon logs)


[12-Sep-18 07:53 AM] jl777c#5810
you need to wait for the first oraclesdata to get into mempool before calling the second oraclesdata


[12-Sep-18 07:53 AM] TonyL#3577
Yes it's in mempool when I'm calling second one


[12-Sep-18 07:53 AM] TonyL#3577
I'm testing just manually in cli now


[12-Sep-18 07:57 AM] TonyL#3577
```komodo-cli -ac_name=ORCL oraclesdata c4b9823149bb8cd616a961ef95303aa2c9f70c0ba9ea39cfa4d81d1006bf0852 ff
{
  "result": "success",
  "hex":
```
```komodo-cli -ac_name=ORCL sendrawtransaction hex
a2a1b038edcb7019e26a1130d045cbb53296186e878fb4fedcba86a5188a8f08```
```komodo-cli -ac_name=ORCL getrawmempool
[
  "a2a1b038edcb7019e26a1130d045cbb53296186e878fb4fedcba86a5188a8f08"
]
```
``` komodo-cli -ac_name=ORCL oraclesdata c4b9823149bb8cd616a961ef95303aa2c9f70c0ba9ea39cfa4d81d1006bf0852 ff
 "result": "success",
  "hex":```
```komodo-cli -ac_name=ORCL sendrawtransaction hex 
error code: -25
error message:
```


[12-Sep-18 07:58 AM] TonyL#3577
```git log -1
commit ac903b5e7eb0d3d284845b7959860ca98fb761b7 (HEAD -> jl777, origin/jl777)
Merge: 4147936c2 02df0dce6
Author: jl777 <jl777@users.noreply.github.com>
Date:   Wed Sep 12 01:58:57 2018 -1100

    Merge pull request #877 from jl777/FSM
    
    10 block setback
```


[12-Sep-18 08:02 AM] jl777c#5810
look at the vins for the tx that is getting error -25


[12-Sep-18 08:02 AM] jl777c#5810
find which one is already spent and let me know


[12-Sep-18 08:03 AM] jl777c#5810
oraclefeed.c is doing oraclesdata with the baton in the mempool


[12-Sep-18 08:04 AM] jl777c#5810
maybe try FSM branch, it is slightlymore recent


[12-Sep-18 08:04 AM] jl777c#5810
also FSM branch now has gatewayswithdraw and gatewayspending


[12-Sep-18 08:04 AM] jl777c#5810
the only thing left is for the signing nodes to process the withdraws, without double withdrawing


[12-Sep-18 08:19 AM] TonyL#3577
```"vin": [
    {
      "txid": "a2a1b038edcb7019e26a1130d045cbb53296186e878fb4fedcba86a5188a8f08",
      "vout": 3,
      "scriptSig": {
        "asm": "3044022013668bb8829073d82e834642b08563c06762dd42089e7548f5f70adf8c7b738a0220467a3a425548187cbcc7e830a5ff5b0887621d75fe0f2d27068491e08cc681cf01",
        "hex": "473044022013668bb8829073d82e834642b08563c06762dd42089e7548f5f70adf8c7b738a0220467a3a425548187cbcc7e830a5ff5b0887621d75fe0f2d27068491e08cc681cf01"
      },
      "sequence": 4294967295
    },
    {
      "txid": "45e49e330fb4e11131ce9b78c0d7847ef0ecdfdc45e61b94aa9017f5044acd42",
      "vout": 1,
      "scriptSig": {
        "asm": "a276a072a26ba067a5658021032fb43bcd5a6b1589dc8f58128decc2785e3d89f16faade72402425c8cc5860078140dd01510c10d6a67d1b570dc49cc2e7bce4b191fe4880a7e04e5f10b87dc86ac54061b64553b8c15929555fc7013f5b852cec6b58a530624e694f2c188845dcdaa100af038001eca10001",
        "hex": "4c79a276a072a26ba067a5658021032fb43bcd5a6b1589dc8f58128decc2785e3d89f16faade72402425c8cc5860078140dd01510c10d6a67d1b570dc49cc2e7bce4b191fe4880a7e04e5f10b87dc86ac54061b64553b8c15929555fc7013f5b852cec6b58a530624e694f2c188845dcdaa100af038001eca10001"
      },
      "sequence": 4294967295
    },
    {
      "txid": "cbcc407e97fac43db25968a26782aec75bdfb0f9460c78bfdca15adb1e856e66",
      "vout": 0,
      "scriptSig": {
        "asm": "a276a072a26ba067a565802102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e781409c337aff20bc50a1e888cea9931563aee065f554356f0a67f325621f30b05243081eee64c80ecf6dbfa6aa484c88825d2049d92e88ec16cce6b3ed6ada32e9a5a100af038001eca10001",
        "hex": "4c79a276a072a26ba067a565802102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e781409c337aff20bc50a1e888cea9931563aee065f554356f0a67f325621f30b05243081eee64c80ecf6dbfa6aa484c88825d2049d92e88ec16cce6b3ed6ada32e9a5a100af038001eca10001"
      },
      "sequence": 4294967295
    }
  ],```


[12-Sep-18 08:19 AM] TonyL#3577
There is a 3 vins for this transaction with error.
First vin is a previous oraclesdata transaction which in mempool
Second vin is a current oracle batontxid
Third vin is a previously successfully published data
`gettxout 0` returns data for all of these 3 vins. 
Is it correct way to check is it spent?


[12-Sep-18 08:33 AM] TonyL#3577
Will build latest FSM and try the same


[12-Sep-18 08:55 AM] jl777c#5810
then that is not the reason for error. what does the console print


[12-Sep-18 08:56 AM] TonyL#3577
there is nothing except of ```error code: -25
error message:```


[12-Sep-18 08:58 AM] jl777c#5810
does oraclefeed work for you?


[12-Sep-18 08:59 AM] TonyL#3577
Let me try `oraclesfeed`


[12-Sep-18 09:18 AM] jl777c#5810
the c program in dapps


[12-Sep-18 09:18 AM] TonyL#3577
Yep I've tested it before. Now it's just hangs and don't do any printouts after I input parameters


[12-Sep-18 09:18 AM] TonyL#3577
So trying to troubleshoot


[12-Sep-18 09:19 AM] TonyL#3577
```./oracle_dapp 
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   673    0   673    0     0  23206      0 --:--:-- --:--:-- --:--:-- 23206
BTC/USD 6271.1825
usage: oraclefeed $ACNAME $ORACLETXID $MYPUBKEY $FORMAT
Powered by CoinDesk (https://www.coindesk.com/price/) 6271.18250000```

```./oracle_dapp ORCL eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fbf 02a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7 L
``` - just hangs


[12-Sep-18 09:22 AM] TonyL#3577
`gcc oraclefeed.c -lm -o oracle_dapp` built it this way and placed with same folder with komodo-cli since it's trying to execute it like it's in same folder with it


[12-Sep-18 09:28 AM] jl777c#5810
I only tested Ihh mode


[12-Sep-18 09:28 AM] jl777c#5810
maybe L mode is broken


[12-Sep-18 09:28 AM] siu#3920
i think there are a couple of modes broken.


[12-Sep-18 09:29 AM] siu#3920
s and S too


[12-Sep-18 09:29 AM] jl777c#5810
oraclefeed only has 2 mode


[12-Sep-18 09:29 AM] TonyL#3577
Before tested on `L` (worked for me) now used same oracle/pubkey with which tested before.
Let me try `lhh`


[12-Sep-18 09:29 AM] TonyL#3577
On latest FSM branch oraclesfeed with same parameters as above hangs as well


[12-Sep-18 09:29 AM] jl777c#5810
Ihh <- uppercase i


[12-Sep-18 09:31 AM] TonyL#3577
Oh, yep `if ( strncmp(format,"Ihh",3) != 0 && format[0] != 'L' )`


[12-Sep-18 09:31 AM] TonyL#3577
Missed this format announcement


[12-Sep-18 09:33 AM] TonyL#3577
What is the correct data input format for Ihh ? 
Didn't find info there https://github.com/jl777/komodo/blob/jl777/src/cc/oracles.cpp

{Embed}
https://github.com/jl777/komodo/blob/jl777/src/cc/oracles.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[12-Sep-18 09:35 AM] TonyL#3577
Oh, found pinned post about gateways, will research it


[12-Sep-18 09:35 AM] jl777c#5810
Ihh

{Reactions}
üòÇ 

[12-Sep-18 09:36 AM] TonyL#3577
Typo sry


[12-Sep-18 09:48 AM] TonyL#3577
@jl777c For `Ihh` it seems working but extacly same behaviour when have tx in mempool:
```txid.(ba2d3154cef53a4e81fe9e111d5c2e2a6c0b14fc59f186d7cb72322a518c2c1f)
ht.1006700 <- 6c5c0f002fe67f508fb837f15e88e98df1a5617011d59e486b90127a19c16e7d010000002511629bf9547d1620f7dccfa346575a1ca99da48c74692eacc316969def5f4f
error code: -25
error message:
error code: -25
error message:
```
Then successful transaction:
```txid.(db28ca813a1c62569c461bc6b16be5d76e1fb36c86bbd6dc06d999b4b8dc63bd)
ht.1006701 <- 6d5c0f0034c77c92e75b8ac57ab31247ff5a9470d4054352a034835d79c268e1296a00043d4a27c7cb33edbdd9f380e501e7b64539433a9af67913a9ad7f884d7c381669```
Then again:
```error code: -25
error message:```
While transaction is on mempool


[12-Sep-18 09:49 AM] jl777c#5810
how many utxo does the subscription address have?


[12-Sep-18 09:49 AM] jl777c#5810
needs to be created via oraclessubscribe


[12-Sep-18 09:49 AM] TonyL#3577
This one just 2


[12-Sep-18 09:49 AM] jl777c#5810
make more

{Reactions}
üëå 

[12-Sep-18 10:01 AM] TonyL#3577
Made 100 more `oraclessubscribe` - same behaviour


[12-Sep-18 10:02 AM] jl777c#5810
ok, for now stay with one per block. i cant duplicate it and still debugging withdraw processing

{Reactions}
üò¶ 

[12-Sep-18 12:57 PM] jl777c#5810
@siu i verified that gatewayCC does deposit and withdraw, you do need to have KMD with addressindex=1 and spentindex=1


[12-Sep-18 12:58 PM] siu#3920
the komodo daemon needs to also be run with addressindex and spentindex?


[12-Sep-18 12:58 PM] jl777c#5810
running oraclefeed.c as a standalone with the appropriate params takes care of all the processing needed by the non-msig deposit address owner


[12-Sep-18 12:58 PM] jl777c#5810
yes KMD itself needs to be fully cross indexed


[12-Sep-18 12:59 PM] jl777c#5810
once you setup a gateway, you will have all the parameters needed for oraclefeed


[12-Sep-18 12:59 PM] jl777c#5810
it will write the merkleroots and also process withdraws


[12-Sep-18 12:59 PM] siu#3920
hmm that might make me require a new setup


[12-Sep-18 01:00 PM] jl777c#5810
validation is not done yet, so you have to be nice to it


[12-Sep-18 01:00 PM] siu#3920
this is in FSM branch?


[12-Sep-18 01:04 PM] jl777c#5810
jl777


[12-Sep-18 01:08 PM] siu#3920
ok


[12-Sep-18 01:14 PM] siu#3920
no need to run komodo with pubkey too?


[12-Sep-18 01:14 PM] siu#3920
o do i need to run KMD as if im going to use cc with it?


[12-Sep-18 01:16 PM] jl777c#5810
no need on the KMD side, but the privkey for the deposit address needs to be in the wallet


[12-Sep-18 01:17 PM] jl777c#5810
it just finally got working in a single case, so clearly can still have bugs


[12-Sep-18 01:17 PM] jl777c#5810
its only 3 days since I started coding it, so plz be nice to it


[12-Sep-18 01:17 PM] jl777c#5810
once we get it working solid in the simple cases, we can start trying to abuse it and steal from it


[12-Sep-18 01:18 PM] jl777c#5810
the asset that is gatewaysbind to the KMD represents KMD 1:1


[12-Sep-18 01:18 PM] jl777c#5810
so if any of the assets can be obtained without depositing KMD, that is a bad bug needs to be fixed


[12-Sep-18 01:18 PM] siu#3920
the komodo daemon and the gateway CC assetchain need to be in the same server?


[12-Sep-18 01:19 PM] siu#3920
i just started reindexing komodo daemon in my test server


[12-Sep-18 01:20 PM] jl777c#5810
no


[12-Sep-18 01:20 PM] jl777c#5810
it can be anywhere


[12-Sep-18 01:20 PM] siu#3920
ok


[12-Sep-18 01:20 PM] jl777c#5810
the gatewaysdeposit is the big ugly rpc that proves the KMD deposit was made


[12-Sep-18 01:21 PM] jl777c#5810
you need to use the KMD daemon to get the txproof and then submit it on the assetchain


[12-Sep-18 01:21 PM] jl777c#5810
so it is more convenient on a single node


[12-Sep-18 01:21 PM] jl777c#5810
but you can copy/paste, getting the right values is what matters


[12-Sep-18 01:21 PM] Mihailo#5902
@jl777c In channel CC , validation of secret should be done to see does it reach the final hashchain or else funds will be unspendable, but in usual cases the initial secret will only be revealed after sender release all the payments. So  we should rely on ChannelOpen RPC that it has done the correct job?


[12-Sep-18 01:23 PM] siu#3920
im just getting out of the office... will test once the daemon syncs.


[12-Sep-18 01:23 PM] Mihailo#5902
For ChannelPayment we can iterate the secret n amount of times and compare with hashchain


[12-Sep-18 01:25 PM] jl777c#5810
yes, channelopen must be bugfree


[12-Sep-18 01:25 PM] jl777c#5810
acually all the CC must be bugfree!

{Reactions}
üëÜ (3) 

[12-Sep-18 01:26 PM] jl777c#5810
since if channel open is messed up, only the one who did the channelopen suffers, it limits the risk exposure

{Reactions}
üëç 

[12-Sep-18 01:26 PM] jl777c#5810
and yes, payment must validate the revealed secret and track how many more iterations are left


[12-Sep-18 01:28 PM] Mihailo#5902
Yes, but I meant we cannot validate on other nodes that channelopen is correct as somebody can modify code of his node and mess for example channelopen, but there is no way to validate hashchain param on that tx


[12-Sep-18 01:29 PM] jl777c#5810
as long as the channelopen has the proper opreturn data formats, we just need to assume it is correct


[12-Sep-18 01:30 PM] jl777c#5810
it is like with dice. if the secret ends up being wrong, the dealer node will not be able to claim a win


[12-Sep-18 01:30 PM] jl777c#5810
that is bad for the dealer node, but as long as there is no bug in the dice CC, then it is not an issue


[12-Sep-18 01:31 PM] jl777c#5810
so, plz make sure channelopen doesnt have any bugs


[12-Sep-18 01:39 PM] Mihailo#5902
Ok


[12-Sep-18 01:43 PM] jl777c#5810
gatewaysCC ended up at 800 lines, but after validation, likely around 1000, and the oraclefeed app another 800 lines, still quite a bit smaller than the original MGW


[12-Sep-18 01:43 PM] jl777c#5810
with more features and better security model


[13-Sep-18 12:47 AM] jl777c#5810
i think i can make it so addressindex is not needed for the KMD side, which is something that I need to get working for it to work with legacy coins like BTC


[13-Sep-18 02:06 AM] jl777c#5810
updated oraclefeed.c to be able to handle non-KMD as the reference coin, you just need to pass in the way to invoke the cli at the end


[13-Sep-18 02:07 AM] jl777c#5810
not verified yet, but any bitcoin protocol coin should now be able to be tokenized


[13-Sep-18 02:07 AM] jl777c#5810
and addressindex mode is not needed for the external reference coin!


[13-Sep-18 02:07 AM] jl777c#5810
multisig is still not validated, so just test with a single signing pubkey for deposits


[13-Sep-18 03:37 AM] KomodoWorld#8282
This start sounding as if it will be possible to do sidechains for BTC (or other coins) by locking a certain amount and creating a 1:1 peg on an assetchain


[13-Sep-18 03:40 AM] jl777c#5810
that is what it already does


[13-Sep-18 03:40 AM] jl777c#5810
but at the token level


[13-Sep-18 03:41 AM] jl777c#5810
I would need to change it so the actual coins are locked/redeemed for a sidechain, but for BTC that would make the txfees an issue


[13-Sep-18 03:44 AM] KomodoWorld#8282
Cool, still useful for large amounts or other coins


[13-Sep-18 03:44 AM] jl777c#5810
tokenized BTC wont have the txfee issue


[13-Sep-18 03:45 AM] jl777c#5810
for example, I will support PriceBet using tokens


[13-Sep-18 03:45 AM] jl777c#5810
so you can win/lose tokens based on real world prices, and where the tokens represent real crypto


[13-Sep-18 03:46 AM] jl777c#5810
but that is for next week. first need to get the multisig debugged


[13-Sep-18 05:03 AM] siu#3920
ok, morning


[13-Sep-18 05:03 AM] siu#3920
im going to get into testing the gateway

{Reactions}
üëç 

[13-Sep-18 05:21 AM] jorian#4555
go siu!


[13-Sep-18 05:31 AM] siu#3920
ok, so this is the gateway i had created: ```./komodo-cli -ac_name=ORCL gatewaysinfo 72fc4dd67ed3904f13abb03bca6224f9a508c3ac1ad368e98cbaeb385390fc4c
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "0229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60d",
  "coin": "KMD",
  "oracletxid": "e4787a70ad99e721b1cad39b00897aa4187d4f91af2be399819531b22f86543d",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RMrGSingGy3qDg6tjfZnFUhrzzoktWkfuV",
  "tokenid": "9de12387df3077ed33f81e7b2ad769a3bbb30c448c840fbd7c0ece2eca2feeb5",
  "totalsupply": "1.00000000",
  "remaining": "1.00000000",
  "issued": "0.00000000"
}```


[13-Sep-18 05:35 AM] siu#3920
ok, so i send KMD to the deposit address and then execute gatewaysdeposit?


[13-Sep-18 05:57 AM] siu#3920
damn this command needs so muchc stuff: ```gatewaysdeposit bindtxid height coin cointxid claimvout deposithex proof destpub amount
```

{Reactions}
üòÑ 

[13-Sep-18 06:39 AM] TonyL#3577
@jl777c latest `jl777` not building for me. FSM building ok:
```libtool: warning: library '/root/latest_jl777/komodo/depends/x86_64-unknown-linux-gnu/share/../lib/libgmpxx.la' was moved.
libtool: warning: library '/root/latest_jl777/komodo/depends/x86_64-unknown-linux-gnu/share/../lib/libgmp.la' was moved.
libtool:   error: cannot find the library '/root/fsm_branch/komodo/depends/x86_64-unknown-linux-gnu/lib/libgmp.la' or unhandled argument '/root/fsm_branch/komodo/depends/x86_64-unknown-linux-gnu/lib/libgmp.la'
Makefile:2079: recipe for target 'komodo-tx' failed
make[2]: *** [komodo-tx] Error 1
make[2]: *** Waiting for unfinished jobs....```

```
make[3]: Leaving directory '/root/latest_jl777/komodo/src/leveldb'
make[2]: Leaving directory '/root/latest_jl777/komodo/src'
Makefile:4634: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/root/latest_jl777/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
```

```
git log -1
commit 8dc419675a4deb723ed961412dc2dc3ba859239f (HEAD -> jl777, origin/jl777)
Merge: ac903b5e7 b9de8352c
Author: jl777 <jl777@users.noreply.github.com>
Date:   Wed Sep 12 08:55:26 2018 -1100

    Merge pull request #878 from jl777/FSM
    
    FSM```


[13-Sep-18 06:46 AM] TonyL#3577
@siu are you testing gateways on latest `jl777` atm?


[13-Sep-18 06:46 AM] siu#3920
i tried but got stuck, im waiting for jl777 to help


[13-Sep-18 06:47 AM] TonyL#3577
Hmm, so it built for you without issues?


[13-Sep-18 06:53 AM] siu#3920
yep

{Reactions}
ü§î 

[13-Sep-18 06:53 AM] siu#3920
like 2 hours ago


[13-Sep-18 06:58 AM] jl777c#5810
you need to be running oraclefeed (properly)


[13-Sep-18 06:58 AM] jl777c#5810
then do a deposit


[13-Sep-18 06:58 AM] jl777c#5810
and then get all the required parameters and submit a gatewaysdeposit


[13-Sep-18 06:58 AM] jl777c#5810
then you can do a gatewaysclaim


[13-Sep-18 06:58 AM] jl777c#5810
it is all shown, step by step at the top of gateways.cpp


[13-Sep-18 07:00 AM] siu#3920
ok


[13-Sep-18 07:01 AM] jl777c#5810
jl777 built fine for me


[13-Sep-18 07:02 AM] TonyL#3577
looking for issues in my local configuration so. thanks!


[13-Sep-18 07:25 AM] siu#3920
```./oraclefeed.c
./oraclefeed.c: line 1: /bin: Is a directory
./oraclefeed.c: line 2: cJSON.c: command not found
./oraclefeed.c: line 3: cJSON.c: command not found
./oraclefeed.c: line 4: cJSON.c: command not found
./oraclefeed.c: line 5: cJSON.c: command not found
./oraclefeed.c: line 6: cJSON.c: command not found
./oraclefeed.c: line 7: cJSON.c: command not found
./oraclefeed.c: line 8: cJSON.c: command not found
./oraclefeed.c: line 9: cJSON.c: command not found
./oraclefeed.c: line 10: cJSON.c: command not found
./oraclefeed.c: line 11: cJSON.c: command not found
./oraclefeed.c: line 12: cJSON.c: command not found
./oraclefeed.c: line 13: cJSON.c: command not found
./oraclefeed.c: line 14: ******************************************************************************/: No such file or directory
./oraclefeed.c: line 22: syntax error near unexpected token `('
./oraclefeed.c: line 22: `char hexbyte(int32_t c)'
```


[13-Sep-18 07:25 AM] siu#3920
seems like i have something missing to run oraclefeed


[13-Sep-18 07:27 AM] TonyL#3577
Problem was on my side - messed with local variables. Can even send now more than 1 `oraclesdata` in block  :trollface:

{Reactions}
trollface 

[13-Sep-18 07:29 AM] TonyL#3577
@siu you have to build dAPP first like this
`gcc oraclefeed.c -lm -o oracle_dapp`


[13-Sep-18 07:29 AM] TonyL#3577
Then put binary to same directory with `komodod`


[13-Sep-18 07:31 AM] siu#3920
i did that command, still get the same error.


[13-Sep-18 07:31 AM] TonyL#3577
You trying to execute file with code. But you have to execute output binary


[13-Sep-18 07:32 AM] TonyL#3577
In my example binary is `oracle_dapp` so have to execute `./oracle_dapp`


[13-Sep-18 07:33 AM] siu#3920
im lost... oracle_dapp is just for a btc pricefeed, i dont know if its related to oraclefeed.c

{Reactions}
ü§î 

[13-Sep-18 07:37 AM] TonyL#3577
I'm not about `oracle_dapp.sh` script (which I have to delete since it was a temporary solution when oraclefeed didn't accept the cli arguments)
Ok to make things more clear, run:
1) Compile oraclefeed sourcecode
`gcc oraclefeed.c -lm -o oraclefeed`
2) Execute oraclefeed binary
`./oraclefeed`


[13-Sep-18 07:45 AM] jl777c#5810
oracle_dapp is NOT only for btcprice feed. I used it for posting merkleroots and processing withdraws


[13-Sep-18 07:49 AM] siu#3920
```siu@T460:~/komodo/src/cc/dapps$ gcc oraclefeed.c -lm -o oraclefeed
siu@T460:~/komodo/src/cc/dapps$ ./oraclefeed
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   672  100   672    0     0    119      0  0:00:05  0:00:05 --:--:--   163
BTC/USD 6499.9375
usage: oraclefeed $ACNAME $ORACLETXID $MYPUBKEY $FORMAT $BINDTXID
Powered by CoinDesk (https://www.coindesk.com/price/) 6499.93750000
```


[13-Sep-18 07:50 AM] siu#3920
ok, now i got ti


[13-Sep-18 07:56 AM] jl777c#5810
pushed a new update


[13-Sep-18 07:56 AM] jl777c#5810
rebuild oraclefeed


[13-Sep-18 08:02 AM] siu#3920
ok


[13-Sep-18 08:15 AM] siu#3920
```./oraclefeed ORCL e4787a70ad99e721b1cad39b00897aa4187d4f91af2be399819531b22f86543d 0229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60d Ihh 72fc4dd67ed3904f13abb03bca6224f9a508c3ac1ad368e98cbaeb385390fc4c
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   673    0   673    0     0    104      0 --:--:--  0:00:06 --:--:--   171
BTC/USD 6483.6475
Powered by CoinDesk (https://www.coindesk.com/price/) 6483.64750000
sh: 1: ./komodo-cli: not found
loadfile null size.(/tmp/oraclefeed.oraclesinfo)
```


[13-Sep-18 08:16 AM] TonyL#3577
Put `oraclefeed` to the same folder with `komodo-cli` or set path to `komodo-cli` as a PATH environment variable


[13-Sep-18 08:16 AM] TonyL#3577
Symlink is possible solution as well


[13-Sep-18 08:18 AM] siu#3920
ok


[13-Sep-18 08:19 AM] siu#3920
```./oraclefeed ORCL e4787a70ad99e721b1cad39b00897aa4187d4f91af2be399819531b22f86543d 0229919363523629835e13a1be644fbdace5e75a9b18728d998440f0366c44d60d Ihh 72fc4dd67ed3904f13abb03bca6224f9a508c3ac1ad368e98cbaeb385390fc4c
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   673    0   673    0     0    114      0 --:--:--  0:00:05 --:--:--   201
BTC/USD 6477.0338
Powered by CoinDesk (https://www.coindesk.com/price/) 6477.03380000
set refcoin <- KMD [./komodo-cli]
broadcast ORCL txid.(aa584de467ae3830d22af28a2522c64aec63ccc855354f7560b1dc91a99cde0c)
KMD ht.30616 <- 98770000e8fc31f35e5d2a98a7c2e701e07c64064346517a4eb910710db27adba6995d02872e06c8e4ef96e5610bca53b2e74149d2945f6f45e825e6f5cf08379e30086f
```


[13-Sep-18 08:19 AM] siu#3920
ok, now i use the height and the merkelroot it prints?


[13-Sep-18 08:27 AM] jl777c#5810
no


[13-Sep-18 08:27 AM] jl777c#5810
that is just a continuous process of getting this data onchain


[13-Sep-18 08:27 AM] jl777c#5810
when you do a gatewaysdeposit, one of the things you need is the txproof


[13-Sep-18 08:27 AM] jl777c#5810
that generates a merkleroot, which is then compared to the oracle data


[13-Sep-18 09:36 AM] siu#3920
my node started a resync unexpectedly, not sure why.


[13-Sep-18 09:36 AM] siu#3920
waiting to sync on my locak pc


[14-Sep-18 03:56 AM] jl777c#5810
Chapter 10 - channels example
It might be hard to believe, but channels CC implements an instant payment mechanism that is secured by dPoW in a way that is backward compatible with the existing wallets, explorers, etc. and channels CC does not require both nodes to be online. Its usecases are all the usecases for Lightning Network, it is just more secure, less expensive and backward compatible! The one aspect which some might consider a downside (and others another benefit) is that all payments are onchain. This means it would increase blockchain size, but the idea is for channels CC to be used on blockchains with relatively lower value coins, so a txfee of 0.0001 is not anything significant.

Warning: very confusing blockchain reorganization issues described below. Will be confusing to most people

From a distance, the blockchain is a chain of blocks. One block after the next, each referencing all the prior blocks. Each block containing a group of transactions. Prior to getting into a block, the transactions are broadcast to the network and if it is valid, it enters the memory pool. Each miner then constructs a valid block from these memory pool transactions and when a transaction gets mined (confirmed), it is removed from the memory pool.

That is the simple version!


[14-Sep-18 03:56 AM] jl777c#5810
The reality is quite a bit more complex, but the critical aspect is that the blockchain can (and is) reorganized as part of the expected protocol. This can happen even when there is no 51% attack happening and it is important to understand this process in detail, so here goes.

What happens if two miners find a valid block at the same time? In this case the "same time" means within the time it takes for a block to propagate to the network. When a miner finds a new block, it is broadcast to the network and nodes update and start waiting for the next block. When there are two different (and valid) blocks propagating at the same time, some nodes update with one of the blocks and some the other, lets call it blockA and blockB. Now the nodes will know about both blockA and blockB, but some will consider blockA to be the chaintip and others will consider blockB to be the chaintip. 

This is where it gets confusing. Which is the correct chaintip (latest block?). It turns out that both blockA and blockB are valid at this moment in time. So there are actuall two blockchains. We have what is called a small fork! Now dont worry, the protocol will help us converge to a single chain, but in order to do that, we need the next block.

Some miners will be mining from blockA and others from blockB. In most all cases, when the next block is found, it wont be at the "same time" again. So we will end up with a chain that is blockA+blockA2 or blockB+blockB2. Here comes the small reorg! Let's assuming blockA2 was found before blockB2, so that means all nodes that had blockB as the chaintip now see a longer chain blockA+blockA2, which trumps blockB. When that happens, it reorgs the chain so it is on blockA+blockA2. To do this properly, all the transactions that were in blockB are put back into the mempool and blockA is added, then blockA2.


[14-Sep-18 03:57 AM] jl777c#5810
Of course, when blockB2 arrives, the nodes see it but blockB+blockB2 is the same length as blockA+blockA2, so no reorg happens. Since we postulated that blockAs arrived "before" blockB2, that means all nodes are on the same chaintip, including all the miners and the next block found would be blockA3, without any complications.

Believe it or not, this sort of thing is happening all the time, one all blockchains. The chaintip is a volatile thing and that is why more than one confirmation is needed to avoid the small reorgs invalidating blockhash. However, it is possible for more than just the blockhash to change. When the reorg happens, all the transactions in the block are put back into the mempool and then the new blocks are processed in order. So what happens if one of the inputs to a transaction that happened in blockB, gets spent in blockA2? Based on random utxo allocation by wallets this is not impossible if an address has a lot of activity, but if it is part of a 51% attack, then this remote chance of an utxo being spent becomes a certainity! In fact, that is what a 51% attack is.

The attack can go much deeper than just one block. For chains that use the longest chain rule, it can go quite deep indeed. So as all the reorged transactions are put back into the mempool, we feel good that it will get confirmed again. Unfortunately, there is no enforcement of a miner needing to mine any specific transaction in the mempool. And the 51% attacker is intent on mining the transaction that spends an already spent utxo in the reorganized chain. it is called a double spend, but in the reorganized chain, it is spent only once. So it is a bit of a misnomer.


[14-Sep-18 03:57 AM] jl777c#5810
The important thing to understand is that if any transaction has inputs that are signed by a node, it is possible when the chain reorganizes for that transaction to become invalid. This is why dPoW is important as it doesnt strictly use the longest chain rule, but rather the longest notarized chain rule. Once a block is notarized, then it will refuse to reorganize that block (or any block before). So the risk is still there, but only until a notarization. Please see more detailed information about dPoW <here>.

Given the above, if you are wondering how can it be possible to have a mempool payment be secured by dPoW. Since it is explained how the reorgs can make valid transactions disappear, it seems unlikely any such solution is possible. However, the CC is very powerful and it can make unlikely things possible.

The following describes how.

We know that any payment that is utxo based can be invalidated via 51% attack, or even an unlikely but not impossible random utxo allocation from a busy wallet. Which means the payment cant be via a utxo. Since the CC system is utxo based, you might think that it means CC cant solve this. However, CC is very powerful and can implement payments that are not utxo based. But before this non-utxo payment method is explained, first we need to solve the mechanics of payment.


[14-Sep-18 03:57 AM] jl777c#5810
At a high level, we want to lock funds into a channel, have this lock notarized so it cant be reorganized. Then payments can unlock funds. Additionally, if we are restricting the payment to just one destination, we also need a way for the sender to reclaim the unused funds. So there needs a way for a close channel notification, which when notarized allows the sender to reclaim all funds. After the channel close is notarized, then the only action possible should be a reclaim of sender funds.

We need to assume that any payment, channel close, reclaim can be reorganized until it is notarized so great care needs to be made that a payment that is made will always be valid. With some allowances for blocks after a channelclose is notarized, we can protect the payments using the logic of "stop accepting payments after a channelclose is seen". It might be that a full notarization of wait time after the channelclose is notarized is needed to provide sufficient time for all the payments to be reprocessed.

Now we can finally describe the requirements for the CC. The locked funds need to be able to be spent by either the sender or receiver, the former only after sufficient time after a channelclose and the latter only after a payment is seen (not just confirmed, but just seeing it should be enough). The protection from reorgs is that the payment itself reveals a secret that is needed for the payment and only the secret would be needed, so it wont matter what utxo is used. To lock funds into a CC address that can handle this we need a 1of2 CC address, which can accept a signature from either of two pubkeys. The additional CC constraints would be enforced to make sure payments are made until the channel is closed.


[14-Sep-18 03:57 AM] jl777c#5810
A hashchain has the nice property of being able to encode a lot of secrets with a single hash. You can hash the hash, over and over and the final hash is the public value. By revealing the next to last hash, it can be verified that it hashes to the final hash. There is a restriction that a hashchain needs to be of reasonable maximum depth, say 1000. That means each iteration of the hashchain that is revealed is worth 1/1000th the total channelfunds. In fact, if the 500th hash value is revealed, half the channelfunds are released. this allows 1/1000th resolution that can be released with a single hash value.

Now we can make the payment based on the hashvalue revealed at a specified depth before the prior released hashchain value. Both the sender and receiver can make a payment to the destination by attaching a hashchain secret. This means even if the sender's payment is reorganized, if the destination has the revealed secret, a replacement payment can be made that is valid. If the destination account isnt monitoring the blockchain, then it wont see the revealed secret, but in this case there shouldnt be value released for the payments that are reorganized. So it would be a case of no harm, no foul. In any event, all the payments end up verifiable on the blockchain to provide verifiability.

Payments at the speed of the mempool, protected by dPoW!

<details of rpc calls, vin/vout allocations, etc>


[14-Sep-18 03:57 AM] jl777c#5810
@Mihailo hopefully useful for you too

{Reactions}
üÜí (4) üöÄ (6) ‚òï (4) üëå (5) üìå (4) üëì (4) üéÇ (2) üëç (2) Komodo (6) 

[14-Sep-18 03:58 AM] Mihailo#5902
Great, I'll read it right away üòâ


[14-Sep-18 04:00 AM] jl777c#5810
@grewalsatinder I updated my FSM branch with the above text


[14-Sep-18 04:08 AM] jl777c#5810
@Mihailo plz update the last part when you are ready with all the <details of rpc calls, vin/vout allocations, etc>


[14-Sep-18 04:10 AM] Mihailo#5902
@jl777c From my point of view it is not confusing and well explained (but this can be because I already know part of this stuff) I would only suggest in the end where CC channels explanation starts to first explain how it works normally and then to focus on channel close, reogrs ... So just reverse order of explaining from this one üòâ


[14-Sep-18 04:11 AM] Mihailo#5902
@jl777c I'll add it, np.


[14-Sep-18 04:11 AM] jl777c#5810
feel free to improve it as you see fit, I just wanted to fill the gap about the blockchain mechanics

{Reactions}
üëç 

[14-Sep-18 04:55 AM] sœÜldat#8733
My brain just blew up. In other terms , CC channel is a scalable and programmable atomic instant payment secure by bitcoin ?


[14-Sep-18 04:56 AM] Yassin#3685
üëç :yassinkomodo: :Komodo:


[14-Sep-18 04:59 AM] jl777c#5810
channels CC can run on all the different chains, so it is indeed scalable. using an rpc call similar to sendtoaddress, you can make a payment (once a channel is open)


[14-Sep-18 04:59 AM] jl777c#5810
not sure about the programmable part, it is just a transaction


[14-Sep-18 04:59 AM] jl777c#5810
atomic is not really applicable but all single blockchain transactions are atomic, in that the inputs are either spent to the outputs, or nothing happens

{Reactions}
üëå 

[14-Sep-18 05:00 AM] jl777c#5810
it is instant, as fast as it takes to propagate to the mempool and dPoW secures it


[14-Sep-18 05:01 AM] sœÜldat#8733
programmable in the sense that it can be "compatible with existing portfolios, explorers, etc."


[14-Sep-18 05:02 AM] sœÜldat#8733
but I understand that this is not the right term for a transaction.


[14-Sep-18 05:14 AM] jl777c#5810
no need to create an entire new set of tools, websites, etc. existing explorers, wallets, etc will just work with these transactions. just some minor changes to display them separately


[14-Sep-18 05:43 AM] sœÜldat#8733
wow ok, impressive


[14-Sep-18 05:54 AM] jl777c#5810
yes, all the benefits of LN, none of the drawbacks


[14-Sep-18 05:54 AM] jl777c#5810
also, fully decentralized with direct p2p channels


[14-Sep-18 05:55 AM] jl777c#5810
so no need for centralizing hubs


[14-Sep-18 05:55 AM] jl777c#5810
no need to solve complex routing issues


[14-Sep-18 05:55 AM] jl777c#5810
no need to have nodes always on


[14-Sep-18 05:55 AM] jl777c#5810
or to recreate wallets, explorers, etc.


[14-Sep-18 06:02 AM] sœÜldat#8733
in addition to being an extremely scalable technology it is a huge time saving while simplifying protocols of compatibility


[14-Sep-18 06:03 AM] jorian#4555
can we secretly sell this to Lightning Labs? fool all those core dudes?


[14-Sep-18 06:03 AM] grewalsatinder#9653
added to repo: https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/all_chapters.md#chapter-10---channels-example

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/all_chapters.md
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[14-Sep-18 06:03 AM] grewalsatinder#9653
thanks üôÇ


[14-Sep-18 06:03 AM] grewalsatinder#9653
üëç


[14-Sep-18 06:04 AM] jl777c#5810
LN labs will claim that not being onchain, it is not a scaling solution


[14-Sep-18 06:04 AM] jl777c#5810
in the universe where there is only one blockchain, it would be true and indeed channels CC is NOT a scaling solution, it is an instant payment solution


[14-Sep-18 06:05 AM] jorian#4555
yeh, but who wants that


[14-Sep-18 06:05 AM] jorian#4555
üòÖ


[14-Sep-18 06:05 AM] sœÜldat#8733
LN labs üòÉ


[14-Sep-18 06:07 AM] jl777c#5810
solving gateways multisig has been a bit tricky and other things have been taking time. However I think I have a way to automate the partial signatures so hopefully by next week I can get it debugged. sorry for the delay


[14-Sep-18 06:10 AM] grewalsatinder#9653
in old version of multigateway the admins had control of the multisig wallets. 
like for btc, if there are 3 servers, 3 admins, then example 3to2 multisig address holding original btc was under these admin's control.
so in this case these 3 parties were risk.

can you please tell me how this part is secured in new gateway CC ?


[14-Sep-18 06:10 AM] grewalsatinder#9653
I missed a lot of reading. pardon me if you answered already.


[14-Sep-18 06:14 AM] jl777c#5810
the funds still need to be secured by MofN


[14-Sep-18 06:14 AM] jl777c#5810
but MofN up to 15 is supported


[14-Sep-18 06:14 AM] jl777c#5810
also the BTC token is protected via CC, so it can only be released when there is a validated deposit


[14-Sep-18 06:15 AM] jl777c#5810
and deposits are fully automated, no need for the multisig signers to process the deposit, the depositor can submit the gatewaysdeposit and gatewaysclaim


[14-Sep-18 06:15 AM] jl777c#5810
anyway, best to wait for my documentation of gatewaysCC


[14-Sep-18 06:16 AM] jl777c#5810
the BTC token is protected fully by the CC, the actual BTC requires the multisig signers to safekeep the BTC


[14-Sep-18 06:16 AM] grewalsatinder#9653
okay, will wait for gatewaysCC doc üôÇ üëç


[14-Sep-18 06:18 AM] grewalsatinder#9653
so in older model the tokens were also managed by the actual btc multisig singers ?


[14-Sep-18 06:19 AM] grewalsatinder#9653
anyway, not important now since we are on new... will wait for doc.


[14-Sep-18 06:19 AM] grewalsatinder#9653
thanks for answering


[14-Sep-18 06:25 AM] jl777c#5810
in the old one, the issuer usually held most of the MGW tokens and sent enough to each node to process deposits


[14-Sep-18 06:25 AM] jl777c#5810
so that entire process is eliminated and streamlined and made secure


[14-Sep-18 08:12 PM] Alright#0419
Each address has a separate address for each contract


[14-Sep-18 08:12 PM] Alright#0419
along with the contract having two addresses itself


[14-Sep-18 08:13 PM] Alright#0419
one normal address that has it's private key in the source code and the corresponding CC address for that address

{Reactions}
üëç 

[15-Sep-18 12:35 AM] jl777c#5810
channels CC address has an address for pair of addresses, ie. N*N


[15-Sep-18 12:35 AM] jl777c#5810
there are many addresses


[15-Sep-18 03:35 AM] jl777c#5810 (pinned)
gateways CC
gateways CC is the first CC that combines multiple CC into a single one. In order to achieve its goals, both the assets CC and the oracles CC is used, in addition to a dapp that issues regular transactions. This general approach can be used to solve quite a few different use cases, so it is important to understand how a multi-CC solution is put together. There are some tricky issues that only arise when using more than one CC at a time.

Before the implementation details, first lets understand what the gateways CC does. At a high level it is similar to the old multigateway (from NXT AE 2014), but with improvements. The basic idea is to tokenize other crypto coins (like BTC) and then use the assets CC to transact/swap against the tokenized crypto. By enforcing a 1:1 peg between a specific token and BTC and an automated deposit/withdraw mechanism, it is possible to transact in the virtual BTC without the delay or expensive txfees. Then anybody that ends up having any of the BTC token would be able to withdraw actual BTC by redeeming the token.

BTC -> deposit to special address -> receive token that represents BTC onchain
do onchain transactions with the BTC token
anybody who obtains the BTC token can redeem the token and get actual BTC in the withdraw address


[15-Sep-18 03:36 AM] jl777c#5810
By bringing the operations onchain, it avoids the need for crosschain complications for each trade. The crosschain does still have to happen on the deposit and withdraw, but that is all. There is just one aspect that makes it not fully decentralized, which is the reliance on MofN multisig. However, with N trusted community members and a reasonable M value, it is not expected to be a big barrier. Since all operations are automated, the only trust needed is that M of the N multisig signers are running their nodes with the gateways dapp active and also that M of them wont collude to steal the funds locked in the multisig. In three years of operations, the MGW multigateway didnt have any incident of multisig signer misbehavior and it was only 2of3 multisig.

How can the gatewaysCC work? First, it needs a dedicated token that can be used to represent the external crypto coin. In order to avoid any issues with misplaced tokens, it is simplest to require that 100% of all the tokens are all locked in the gatewaysCC address. We want to make it so that the only way the tokens can be released from the locked address is when a verified deposit is made. So, we also need a deposit address, which means there needs to be a set of pubkeys that control the deposit address. It turns out, we also need to post merkleroot data from the external coin so that the information is onchain to be able to validate the external deposit. Since we are already trusting the deposit address signers to safekeep the external coins via MofN multisig, trusting them to post the merkleroots doesnt increase the trust footprint needed.


[15-Sep-18 03:36 AM] jl777c#5810
Now we have all the ingredients needed, a dedicated token, a set of multisig pubkeys and an oracle for merkleroots.

gatewaysbind tokenid oracletxid coin tokensupply M N pubkey(s)

With a gatewaysbind, a new gateway is defined. the pubkeys are for the custodians of the multisig funds and they also need to be posting merkleroots to the chain, so the oracle needs to be setup and funded and each of the signers needs to run the oraclefeed dapp. That posts each new merkleroot via oraclesdata and also responds to withdraw requests.

The MofN pubkeys generates a deposit address and when funds are sent to that address along with a small amount to the claim address. With the txid from this external coin, along with the txproof and the rawtransaction, all is submitted with a gatewaysdeposit. This adds a special baton output which is a gateways CC output to invoke gateways validation and also prevents double claims by using the unspent status of the baton.

gatewaysdeposit bindtxid height coin cointxid claimvout deposithex proof destpub amount
gatewaysclaim bindtxid coin deposittxid destpub amount

Once the gatewaysdeposit is validated, it can be claimed and now the token is sent to the claim address. A 1:1 pegging of the external crypto to the token is established. And as long as one of the deposit address signers is running the oraclefeed, then the deposit/claim process is fully automatic and under the control of the depositor. Nothing needs to be signed by any other party! Also by using the utxo from the deposittxid, double claims are prevented.


[15-Sep-18 03:36 AM] jl777c#5810
On the withdraw side, the tokens are sent back to the address where the tokens are locked and this needs to create a redemption right that can only be used once.

gatewayswithdraw bindtxid coin withdrawpub amount


And with a bit more magic in the oraclefeed, this is achieved. To be continued...


[15-Sep-18 03:36 AM] jl777c#5810
####


[15-Sep-18 03:36 AM] jl777c#5810
not complete yet, but I got a start on the gateways CC docs

{Reactions}
üíØ (13) üòÄ (9) üëçüèº (13) üëèüèº (8) üí∏ (4) Komodo (10) 

[15-Sep-18 04:21 AM] sœÜldat#8733
So you can combine something like a dice system with instant payment "channel CC" on a gambling Dapp platform with deposit/withdraw with an specific asset CC pegged on any crypto or "fiat maybe" without the delay or expensive txfees of the pegged cuurency ?


[15-Sep-18 04:47 AM] jl777c#5810
it would require extending the dice CC to bet with tokens, but that should be possible


[15-Sep-18 04:49 AM] jl777c#5810
currently the assets CC is assuming token rpc is used, but i think all that is needed is to extend token transfer to allow other CC to do it. then all the other CC can do whatever they do using assets


[15-Sep-18 04:49 AM] jl777c#5810
now that I am getting into multi-cc environment, i  do see the need for this more and more


[15-Sep-18 04:50 AM] jl777c#5810
the one after gateways is prices and that will definitely alllow betting via assets, so I plan to solve this issue then


[15-Sep-18 04:51 AM] jl777c#5810
not sure of most of you realize the true power of CC. Each CC is extending the consensus rules and in some ways every CC is the same level of utility as entire other projects. I seem to be able to do about one per week, mixed in with the other things I am doing. And now we are getting more CC devs to help out

{Reactions}
üöÄ (7) 

[15-Sep-18 04:53 AM] jl777c#5810
another way to allow betting in external currencies is to make a 1:1 pegged chain, ie. the normal definition of sidechain via the gatewayCC. Then there wont be any need to be changing all the other CC and this might be the most efficient way in general

{Reactions}
üôè üëåüèª 

[15-Sep-18 05:34 AM] grewalsatinder#9653
Plz tag me once gateway CC text is done.
I will pick the text from FSM repo.
Thanks üôÇüôèüèº


[15-Sep-18 10:38 AM] TonyL#3577
Hi! If somebody playing with oracles CCs - I've created 3 new tools in https://github.com/tonymorony/kmd_cc_qa :

1) `oracle_mass_creation.py` - creating as much oracles as you need with needed type, creating as much UTXOs as you need.  Creating 3 files:
 a) `oracles_list` (list of oracles txids) 
 b) `register_list` (list of registration txids)
 c) `subscriptions_list` (list of subscription txids)
Have to wait for mempool cleaning to run next.

2) `oracle_mass_datapublish.py` - using `oracles_list` and `data_sample` as inputs. Put data string by sting from `data_sample` to each oracle from `oracles_list`. As output creating `data_batonids` with latest `batontxid` for each oracle.
Have to wait for mempool cleaning to run next.

3) `oracle_mass_dataread.py` - using `oracles_list`, `data_batonids` and `data_sample` (just to get depth). Reading data from each oracle baton by baton and put it to files like `data_%oracletxid%`)

{Embed}
https://github.com/tonymorony/kmd_cc_qa
tonymorony/kmd_cc_qa
CLI Tools for Komodo CC. Contribute to tonymorony/kmd_cc_qa development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Reactions}
üëè (3) üëç 

[15-Sep-18 11:16 AM] Alright#0419
Pinned a message.


[16-Sep-18 12:37 AM] jl777c#5810
The CC vout is hashed, similar to p2sh address


[16-Sep-18 12:38 AM] jl777c#5810
but it cant do any error checking as any valid address could be a CC address, so it will accept RmyContractAddress123 but you wont be able to spend it


[16-Sep-18 12:38 AM] jl777c#5810
used the <CCname>address rpc call to get your CC address for a specific contract

{Reactions}
üëç 

[16-Sep-18 02:28 PM] Mihailo#5902
Hi all, I want to proudly present the first CC channel payment done successfully on chain üòé I have opened a channel with 1000000sat (100 payments of 10000sat) on CC channel address that is made as 1of2 address from source pubkey and destination pubkey. Then I released a payment of 1 increment of 10000sat to destination address and it reached the other side üòÉ


[16-Sep-18 02:28 PM] Mihailo#5902
This is vout from channel open:
```
"vout": [
    {
      "value": 0.01000000,
      "valueZat": 1000000,
      "valueSat": 1000000,
      "n": 0,
      "scriptPubKey": {
        "asm": "a22c80208ba398731d5a1cdf4e4bc0d9a25470bcaded3133ed3d9f0c712cff2310870f6a81031210008203000401 OP_CHECKCRYPTOCONDITION",
        "hex": "2ea22c80208ba398731d5a1cdf4e4bc0d9a25470bcaded3133ed3d9f0c712cff2310870f6a81031210008203000401cc",
        "reqSigs": 1,
        "type": "cryptocondition",
        "addresses": [
          "RUvLQUzJaVU8nbSBMYp1iZbsHBUMiQHZBV"
        ]
      },
      "spentTxId": "a989208477823140d4659cedbed538c4c4985738a7d3cf716569b09d35e7963d",
      "spentIndex": 1,
      "spentHeight": 612
    },
```

vout from payment tx
```
{
      "value": 0.00010000,
      "valueSat": 10000,
      "n": 1,
      "scriptPubKey": {
        "asm": "0336d6de5ef9eba1f9b43310a91d5b62ca512a186ba3ccd04112c430ad01a7e127 OP_CHECKSIG",
        "hex": "210336d6de5ef9eba1f9b43310a91d5b62ca512a186ba3ccd04112c430ad01a7e127ac",
        "reqSigs": 1,
        "type": "pubkey",
        "addresses": [
          "RNJiZEC1YYYJHEryKtXR4mtVxx911rLtpC"
        ]
      }
    },
```

and destination address balance
```
[
  {
    "address": "RNJiZEC1YYYJHEryKtXR4mtVxx911rLtpC",
    "account": "",
    "amount": 0.00010000,
    "confirmations": 1,
    "txids": [
      "a989208477823140d4659cedbed538c4c4985738a7d3cf716569b09d35e7963d"
    ]
  }
]
```

{Reactions}
üëè (11) 

[16-Sep-18 02:37 PM] jl777c#5810
congratulations to @Mihailo who is the first one, other than me to make a working CC! It just happens to be a better way to make micropayments than LN

{Reactions}
üéâ 

[16-Sep-18 02:39 PM] jl777c#5810
@Alright when the channels CC is more complete, the ultimate test is to reorg the channel payments, invalidating them (by spending the normal input used for the txfee) and then see if the receiver can still reclaim the payment that was double spent

{Reactions}
üëå (11) üëèüèΩ (10) Komodo (12) 

[16-Sep-18 02:40 PM] jl777c#5810
it took a while to make a design that would be able to survive a total reorg of all the payments with the original payment invalidated with a double spend

{Reactions}
üíØ (2) 

[16-Sep-18 10:57 PM] jorian#4555
```It just happens to be a better way to make micropayments than LN``` i sense a CHIPS funeral coming

{Reactions}
üòá (2) üò© (3) 

[17-Sep-18 01:33 AM] jl777c#5810
CHIPS usage of LN sidesteps its weaknesses, plus channels CC is all onchain so the poker capacity of CHIPS is much much larger


[17-Sep-18 01:36 AM] jl777c#5810
additionally the realtime RNG in CHIPS is unique


[17-Sep-18 01:37 AM] jl777c#5810
The LN aspect of CHIPS was not the only part, so even if it is totally deprecated (it isnt) wouldnt mean that much for CHIPS.

{Reactions}
üòé (2) üé∞ (2) 

[17-Sep-18 01:53 AM] sœÜldat#8733
what is the realtime RNG ?


[17-Sep-18 02:01 AM] jl777c#5810
there is an entire CHIP paper on it


[17-Sep-18 02:03 AM] jl777c#5810
but we improved if from what is in the paper and the CHIPS daemon will automatically run the special nodes needed to enable the realtime Random Number Generator that can be deterministically determined, so usable for blockchain


[17-Sep-18 02:17 AM] sœÜldat#8733
in the paper you say "random scalar values" no difference with RNG ?


[17-Sep-18 02:21 AM] jl777c#5810
correct


[17-Sep-18 08:26 AM] dukeleto#7326
scalar holds one number, vector can hold multiple numbers. it's a math/physics term


[17-Sep-18 09:41 AM] jl777c#5810
The first four CC: assets, faucet, rewards and dice appear to be fairly solid
The next four: oracles, gateways, channels and prices are in various stages of completion
I want to start thinking about the next four: auctions, pegs, triggers and payments

if you have any musthave functionality for the third set, plz post ideas


[17-Sep-18 09:42 AM] jl777c#5810
or maybe there is a higher priority one that can become part of the third set


[17-Sep-18 09:50 AM] jusoaresf#3291
auctions could cover public tenders too or this would need to be a separate contract?


[17-Sep-18 09:51 AM] jl777c#5810
what is a public tender?


[17-Sep-18 09:52 AM] jusoaresf#3291
Like a company wants to buy 50 tables and ask sellers to bid


[17-Sep-18 09:53 AM] jusoaresf#3291
like a reverse auction


[17-Sep-18 09:54 AM] jusoaresf#3291
But if it is a government (public company) buying goods or services for instance the rules would need to be public but the bids would be kept secret to the day of the "auction"


[17-Sep-18 09:55 AM] jusoaresf#3291
Concorrencia Publica in Portuguese... dont; know in English...


[17-Sep-18 09:56 AM] jusoaresf#3291
Public Procurement ?


[17-Sep-18 10:03 AM] jl777c#5810
ok, i see


[17-Sep-18 10:03 AM] jl777c#5810
secret bids is interesting


[17-Sep-18 10:06 AM] jusoaresf#3291
In these no one want the concurrency to know your hand


[17-Sep-18 10:08 AM] jl777c#5810
yes, secret bidding will require the buyer to come back online during a specific claiming window


[17-Sep-18 10:08 AM] jl777c#5810
but it can be done


[17-Sep-18 10:11 AM] jusoaresf#3291
yes, they wouldn't want to miss the envelopes opening (or would be disqualified)
or it could keep your oracle to keep their bid encrypted until a time X when the buyer Private key would be all that is needed to complete fulfillment?


[17-Sep-18 10:11 AM] jl777c#5810
the problem is that the entire blockchain will need to be able to decrypt


[17-Sep-18 10:11 AM] jl777c#5810
and if it had that data before time X, it would allow people to decrypt at any time


[17-Sep-18 10:12 AM] jl777c#5810
that is why the buyers need to come back after the deadline to post their actual price that they committed to


[17-Sep-18 10:12 AM] jl777c#5810
if they dont, they would lose their deposit


[17-Sep-18 10:12 AM] jusoaresf#3291
yes


[17-Sep-18 10:13 AM] jl777c#5810
ok, I will try to have secret bid auctions supported in addition to open auction


[17-Sep-18 10:14 AM] jusoaresf#3291
But what of that address where the prived key is exposed but the condition itself need to be fulfilled before anyone can decrypt despite the privkey?


[17-Sep-18 10:14 AM] jusoaresf#3291
great!


[17-Sep-18 10:15 AM] jl777c#5810
yes, payment can be prevented, but in such a case the price bid wont be secret


[17-Sep-18 10:16 AM] jusoaresf#3291
yes... I am mixing up tx with data encryption... üò¶


[17-Sep-18 10:17 AM] jusoaresf#3291
And are triggers like if some block chain "events" would launch Trigger CCs ?
Like reaching a block height or a specific utxo consumption for instance?
I seems I didn't get this one right...


[17-Sep-18 10:18 AM] jl777c#5810
my high level concept for trigger is to be able to create a standardized trigger from various internal and external things, that then allows the payments CC to have a standardized event that triggers payment actions


[17-Sep-18 10:19 AM] jl777c#5810
so triggers is sort of a "connector" CC


[17-Sep-18 10:20 AM] jusoaresf#3291
hum... I better wait for when you are ready to write it in more dept üòÉ


[17-Sep-18 10:21 AM] jl777c#5810
it is still a rough concept, but something like payments CC would allow to create a payment based on an eventtxid


[17-Sep-18 10:21 AM] jl777c#5810
so maybe the triggers CC is better named as events, but I didnt do that for some reason


[17-Sep-18 10:21 AM] jl777c#5810
lilkely becuase there are internal blockchain events that doesnt need a CC


[17-Sep-18 10:22 AM] jl777c#5810
so the concept is to make a dapp with some specific control flow:
1. define the triggers
2. define the payments
3. define the frequency, min/max, etc


[17-Sep-18 10:23 AM] jl777c#5810
and the FSM would tie things together so you can define initial state, intermediate states and the final completed state


[17-Sep-18 10:23 AM] jl777c#5810
each having a set of payments defined


[17-Sep-18 10:23 AM] jl777c#5810
so I am working my way up to FSM, which will use most of the other CC


[17-Sep-18 10:23 AM] jl777c#5810
no need for a programming language using the FSM CC


[17-Sep-18 10:24 AM] jl777c#5810
just create the various required txid via rpc


[17-Sep-18 10:25 AM] jl777c#5810
all the various pieces dont quite fit together yet... but as each one is completed there are less and less undefined things so at some point I can just ask @Mihailo to just debug it all üòÉ


[17-Sep-18 10:25 AM] jusoaresf#3291
These new 4 still work "standalone" too?


[17-Sep-18 10:28 AM] jusoaresf#3291
language free FSM üéÉ


[17-Sep-18 10:31 AM] jl777c#5810
they will work standalone, but maybe it wont have much direct usecases. not sure what you can do with a trigger that doesnt have any actions. though I guess I can build in some basic actions


[17-Sep-18 10:36 AM] jusoaresf#3291
I see. Perhaps. But they will be very important for future dapps like cherry picking CCs...


[17-Sep-18 10:41 AM] jl777c#5810
it is like the oracles CC, in and of itself, it doesnt really give you much more than looking up a URL directly


[17-Sep-18 10:41 AM] jl777c#5810
but the fact it is onchain and there is consensus, it can be an input to blockchain operations


[17-Sep-18 10:43 AM] TonyL#3577
@jl777c on which stage it's planning to make RPC more strict for a new CCs? (asking in spot of auto-tests coverage)


[17-Sep-18 10:45 AM] jl777c#5810
once a CC is deemed to be feature complete, then go ahead and go caveman on all its parameters. we can track reproducible bugs via github issues and fix them

{Reactions}
üëå (3) üçó (3) 

[17-Sep-18 08:59 PM] Mylo#8306
I had trouble yesterday with GUI faucet.   Btcpubkey at komodod start and import kmdprivkey came back with errors.
`ExtractDestination failed`
Was notary keys in `-regtest` mode.
Then when using unused/new keys, also in regtest `to use CC contracts you need to launch daemon with valid -pubkey for an address in your wallet. ERR=-1`
Will move onto other first 4 GUIs today and revisit faucet after ‚Äúother‚Äù successes


[17-Sep-18 09:01 PM] Mylo#8306
@SHossain probably best to ask you later today.   As long as it doesn‚Äôt have to be NN keys.  I used to be able to use it only with NN.
Also tested AC in `-regtest` with same result.


[18-Sep-18 01:27 AM] jl777c#5810
CC have no concept of notaries


[18-Sep-18 01:28 AM] jl777c#5810
though for some special cases we will likely use the concept of notarized height


[18-Sep-18 01:36 AM] Mylo#8306
Ok thanks for clarification James


[18-Sep-18 06:54 AM] Mylo#8306
@jl777c @Mihailo 
Is this a very basic way of explaining ChannelsCC?

The very basic explanation in four steps is:
 - Set up a payment channel with your denominations (10k satoshi in this case)
 - Provide a secret to spend each of those denominations
 - Have the channel notarized for bitcoin level security
 - Send out authorizations for those payment channels to be spent, one at a time.

If you need to send 50k satoshi, authorize the release of 5 of those 10k payments by sending the the payment details to the person‚Äôs destination address.


[18-Sep-18 06:58 AM] Mihailo#5902
@Mylo That is it basically, with two modifications:
- the secrete does need to be defined, it is done by RPC. You basically open the channel with one tx (and that lock funds in the channel), and then with payment tx you release payments in number of denominations you want. Everything is done by RPC (even if it is used by wild generated TX the secrete generation must be followed as it is done in RPC calls for tx to be valid)
- second modification to your explanation is just that it is not necessary to have notarized chain for channels CC, but it is always more secure that way.


[18-Sep-18 07:02 AM] jl777c#5810
2 of the 4 steps above are not anything the user needs to do.


[18-Sep-18 07:02 AM] jl777c#5810
you fund a payment channel to a destination


[18-Sep-18 07:02 AM] jl777c#5810
then you release payments


[18-Sep-18 07:02 AM] jl777c#5810
that's it as far as user is concerned


[18-Sep-18 07:04 AM] Mihailo#5902
the 2nd and 3rd üòâ


[18-Sep-18 07:28 AM] Mylo#8306
OK - cool.  The user doesn't need to know the details yep understood.
So the release of funds is just a normal transaction, compatible with all existing infrastructure.

ChannelPayment in channels.cpp doesn't have the RPC help command stuff, where's some RPC command info kept?   Been looking in jl777 FSM branch.

Explanation is for tech article, will note that notarization is not needed but nice to have for bitcoin level security.

Congrats btw @Mihailo üëç


[18-Sep-18 07:30 AM] jl777c#5810
Mihailo hasnt made a pull request into FSM yet


[18-Sep-18 07:32 AM] Mylo#8306
oh ok thanks


[19-Sep-18 02:50 AM] jl777c#5810
multisig support via partial signatures is coded, but not verified yet. I want to verify some things about the prices (bitmex) CC first


[19-Sep-18 06:17 AM] jl777c#5810
coded half the prices CC, but stuck on normalizing bet amount to leveraged price. more progress tomorrow

{Reactions}
üí™ (4) üçÑ 

[19-Sep-18 09:24 AM] gcharang#6833 (pinned)
CC made easy by jl777 in our official docs: https://docs.komodoplatform.com/cc-jl/introduction.html\
Source text: https://github.com/jl777/komodo/blob/FSM/src/cc/CC%20made%20easy
A non-technical introduction: https://komodoplatform.com/crypto-conditions-utxo-based-smart-contracts/

{Embed}
https://komodoplatform.com/crypto-conditions-utxo-based-smart-contracts/
Crypto-Conditions: UTXO-Based Smart Contracts on Komodo Platform
Komodo Platform is the world's leading innovator of blockchain technology. Now, Komodo is implementing Crypto-Conditions and UTXO-based smart contracts.
https://images-ext-2.discordapp.net/external/HQSHUCxgkeR_RB-10E01rWYcg23YOXiFKiUxG-FRYlY/https/komodoplatform.com/wp-content/uploads/2018/08/smart-contracts-image.jpg

{Reactions}
üÜí (7) Komodo (4) 1M (4) 

[19-Sep-18 09:24 AM] gcharang#6833
Pinned a message.


[20-Sep-18 12:45 AM] jl777c#5810
need to change things around a bit with gateways CC to be able to properly validate it. this was a bit unexpected, but then again combining multiple CC together is the first time with gateways CC, so not exactly surprising there are some issues doing that

{Reactions}
üôå (2) ‚úç 

[20-Sep-18 12:47 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/492240436618985472/test_200.png


[20-Sep-18 12:50 AM] TonyL#3577
Doing oracles mass data publishing tests. 200 oracles with 2 data entries to each in one block - passed.
For ~more than 500 data publishings in same block `oraclesdata` generating hex which broadcasting returns ```error code: -26
error message:
18: bad-txns-inputs-spent```


[20-Sep-18 12:51 AM] TonyL#3577
Such hex have one of `vins` spent


[20-Sep-18 12:51 AM] jl777c#5810
is it just one thread that is doing all this?


[20-Sep-18 12:52 AM] TonyL#3577
Yup, but it's doing one by one, not simultaneously


[20-Sep-18 12:52 AM] jl777c#5810
i think there is some limit to chaining mempool tx


[20-Sep-18 12:52 AM] jl777c#5810
what about 300? 400?


[20-Sep-18 12:52 AM] jl777c#5810
257?


[20-Sep-18 12:53 AM] TonyL#3577
I thought so but I'm starting with clear mempool and getting such hex on random place each time


[20-Sep-18 12:53 AM] TonyL#3577
Sending same data


[20-Sep-18 12:53 AM] jl777c#5810
random between 200 and 500?


[20-Sep-18 12:53 AM] TonyL#3577
One time I can get it on 350 transactions, second time on 450


[20-Sep-18 12:53 AM] TonyL#3577
Yes, I think in this range


[20-Sep-18 12:53 AM] TonyL#3577
Approximately


[20-Sep-18 12:54 AM] jl777c#5810
ok, lets find a reasonably safe limit and document that that is the practical limit


[20-Sep-18 12:54 AM] jl777c#5810
200 in one block is 3+ per second. seems plenty fast


[20-Sep-18 12:54 AM] TonyL#3577
I'll make more tests and some spreadsheet


[20-Sep-18 12:54 AM] jl777c#5810
any usage of oracles for faster than 1 minute data, will have some issues


[20-Sep-18 12:55 AM] jl777c#5810
the question is how many issues and if we can sidestep them


[20-Sep-18 12:55 AM] TonyL#3577
Btw surprised how fast is `oraclessamples` works. Possible to get and write to separate files 500+ data entries from blockchain for less than in 0.1 sec in one thread.


[20-Sep-18 12:57 AM] TonyL#3577
@jl777c As I see problem is that this hex is not valid even mempool is clear next block. So dAPP devs have to keep in mind that transaction re-creating needed, not just re-broadcast attempt


[20-Sep-18 12:58 AM] jl777c#5810
yes if inputs are already spent, then need to make a new one


[20-Sep-18 12:58 AM] jl777c#5810
what is happening is that the prior tx isnt getting into the mempool yet and you ask for another datasample


[20-Sep-18 12:59 AM] jl777c#5810
what you could do is call a lockunspent call for all vins in the tx that comes back


[20-Sep-18 12:59 AM] jl777c#5810
that should work around this problem


[20-Sep-18 12:59 AM] jl777c#5810
at the CC level, I dont know what the plan for broadcasting the tx is, so this belongs at the dapp layer


[20-Sep-18 01:01 AM] TonyL#3577
I'm using now very simple data (just `ff`).  Is it significant difference in spot of blocksize fit if I'll broadcast let's say `ffff` or `ffffff` ?


[20-Sep-18 01:01 AM] jl777c#5810
no


[20-Sep-18 01:01 AM] jl777c#5810
overhead for tx is about 300 bytes


[20-Sep-18 01:01 AM] jl777c#5810
3 byte difference is 1%


[20-Sep-18 01:02 AM] jl777c#5810
do you know how to iterate through the vins and locking the utxo?


[20-Sep-18 01:03 AM] jl777c#5810
decode the tx, for each txid/vout in the vin[] array, call the lockunspent that makes it so the listunspent wont return it


[20-Sep-18 01:03 AM] jl777c#5810
which will prevent the oraclesdata from issuing it


[20-Sep-18 01:04 AM] jl777c#5810
i mean using it


[20-Sep-18 01:05 AM] TonyL#3577
Have to try it. So I have just get vins array before the `oraclesdata` transaction broadcast and call `lockunspent` for each vin and then broadcast?


[20-Sep-18 01:10 AM] TonyL#3577
@jl777c is it ok if I'll execute for all `oraclesdata` transactions, not just failed?


[20-Sep-18 01:11 AM] jl777c#5810
yes, when the rawtx comes back, lock all its vins, then broadcast it


[20-Sep-18 01:12 AM] jl777c#5810
i think if you do that, then even without broadcasting it will make valid tx


[20-Sep-18 01:14 AM] TonyL#3577
Thanks @jl777c ! Will try this trick


[20-Sep-18 02:16 AM] TonyL#3577
@jl777c still can't broadcast tx after locking all vins. Am I doing something not correct?

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/492262837742469131/unknown.png


[20-Sep-18 02:17 AM] TonyL#3577
vins

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/492263035222622209/unknown.png


[20-Sep-18 02:18 AM] TonyL#3577
First screenshot not correct since `true` is unlock according to doc, tried this way first with `false`

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/492263345907564544/unknown.png


[20-Sep-18 02:20 AM] jl777c#5810
why are all the vout 0 in the locks, but in the tx it is non-zero values a lot


[20-Sep-18 02:20 AM] TonyL#3577
I've tried 0,1,2 vouts as well but same result


[20-Sep-18 02:21 AM] jl777c#5810
also, if the tx is wrong, it is wrong with or without locks. the vins in the bad tx is reusing vin from prior


[20-Sep-18 02:21 AM] jl777c#5810
you shouldnt be using random vouts!


[20-Sep-18 02:21 AM] jl777c#5810
use the one specifically from the rawtx


[20-Sep-18 02:21 AM] jl777c#5810
get things to a stable situation


[20-Sep-18 02:21 AM] TonyL#3577
Aha so I broke it on first call


[20-Sep-18 02:22 AM] jl777c#5810
possibly


[20-Sep-18 02:23 AM] TonyL#3577
Will be gentle next time with vouts, thanks


[20-Sep-18 02:23 AM] d3n#0940
Hi.
I've been reading about the Komodo CryptoConditions. Congratulations! It looks to me like a very powerful technology. My question, which I've not found answered in any of the current texts, is: How a zk-snark transactions can be used with UTXO based smart contracts? Is there any way with the current implementation?

Of course I'm thinking on privacy powered Voting system. For such thing we need mainly:
+ A way to sign claims (like address X is able to vote). This might be achieved by just adding a signed claim to a blockchain  block
+ A way to create a temporary assetchain. This seems that can be avhieved using CryptoConditions
+ A way to use this temporary assetchain tokens from a Zk-snark transactions which will have the voting option encapsuled in MeMo field


[20-Sep-18 02:27 AM] jl777c#5810
the problem with using ztransactions as inputs to CC is that they are private


[20-Sep-18 02:28 AM] jl777c#5810
i think some sort of homomorphic tech is needed to be put in opreturns to have a chance to use z-inputs


[20-Sep-18 02:30 AM] jl777c#5810
maybe you can just use tokens from assets CC for voting, no need for a dedicated chain


[20-Sep-18 02:44 AM] d3n#0940
"maybe you can just use tokens from assets CC for voting, no need for a dedicated chain"
Sure! When I said "AssetChain" I meant a CC asset token


[20-Sep-18 02:45 AM] d3n#0940
So I'm thinking about doing all required stuff that right now we are doing in Ethereum + komodo-temporary-asset-chains in Komodo MainNet


[20-Sep-18 02:46 AM] d3n#0940
But... we still need CC+Zk-snarks


[20-Sep-18 02:56 AM] jl777c#5810
you can use the ztx using the assetchain as a voting mechanism. we did that with VOTE2018 for notary election


[20-Sep-18 03:01 AM] d3n#0940
Yes, this is what we've already done: https://github.com/vocdoni/documentation
But after reading about CC I'm thinking about using only the Komodo MainNet, for signing claims to users and to vote


[20-Sep-18 08:01 AM] jl777c#5810
@TonyL gatewaysCC requires tokens that are converted to gateways CC out, there is a new token rpc tokenconvert rpc that can do this


[20-Sep-18 08:01 AM] jl777c#5810
also before redeeming, it also needs to be converted


[20-Sep-18 08:02 AM] jl777c#5810
the reason for this is vin enforcement. if it isnt changed to gateways vout, then only assets enforcement is done and it would just allow a simple transfer from the "locked" funds as the locking is done by the gateways CC


[20-Sep-18 08:03 AM] jl777c#5810
the gateways CC automatically converts to assets vout on a gatewaysclaim


[20-Sep-18 08:08 AM] jl777c#5810
this trick of converting tokens to a different CC appears to be the way to allow adding additional rules to another CC (assets). I will make sure the same method will work for prices CC. I think it will as the idea is there are freely tradeable tokens, which when converted become subject to the new rules. Great care is needed for all conversions to and from normal tokens as any bug will affect basic token function


[20-Sep-18 11:21 PM] TonyL#3577
@jl777c Is converted token can be used same way as non converted outside of gateways CC (e.g. trades, transfers)? And also is anybody can convert any token or it should do owner of token creation privkey?


[21-Sep-18 01:08 AM] jl777c#5810
you need to be able to spend the token, so it needs to be in an address you have privkey for


[21-Sep-18 01:09 AM] jl777c#5810
once it is converted, technically it isnt a valid token as far as assets CC goes, it is the wrong evalcode


[21-Sep-18 01:09 AM] jl777c#5810
so it is only subject to the rules of the new CC


[21-Sep-18 02:44 AM] TonyL#3577
Thanks for clarification! Asked because wondered about the case when somebody can "spoil" all the tokens available on AC


[21-Sep-18 02:53 AM] jl777c#5810
yes, we need to worry about such hacks! it is possible for such bugs to still exist


[21-Sep-18 05:10 AM] TonyL#3577
@jl777c Have I use `FSM` branch for `tokencovert` ?


[21-Sep-18 05:39 AM] TonyL#3577
upd: found commits in FSM
`tokenconvert evalcode tokenid pubkey amount`
Which `pubkey` have I use - GatewaysPubkey as well? (found info about EVAL_GATEWAYS evalcode of 251)
Also should I "convert" tokens before or after transfer to gateway pubkey or it's not principal?


[21-Sep-18 05:44 AM] TonyL#3577
Also I've noticed that `GatewaysPubkey` is the same in guide here: https://github.com/jl777/komodo/blob/FSM/src/cc/gateways.cpp and in AC which I'm using. Is it means that it's constant for any AC in Komodo cluster?

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/gateways.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[21-Sep-18 06:43 AM] jl777c#5810
tokenconvert destpubkey


[21-Sep-18 06:44 AM] jl777c#5810
so you send the tokens and change the evalcode in the same operation


[21-Sep-18 06:44 AM] jl777c#5810
gatewayspubkey is global across all chains, yes


[21-Sep-18 06:48 AM] TonyL#3577
Oh, great. So this step ` transfer to gateways pubkey:` by `tokentransfer` from your guide no needed anymore to setup gateway


[21-Sep-18 06:54 AM] jl777c#5810
you need to tokenconvert it instead of tokentransfer

{Reactions}
üëå 

[21-Sep-18 06:55 AM] jl777c#5810
tokenconvert is basically tokentransfer with an evalcode convert added


[21-Sep-18 06:56 AM] TonyL#3577
I see. And when I'll want to convert it back it'll transfer it to token CC pubkey with evalcode of assetsCC?


[21-Sep-18 06:57 AM] jl777c#5810
the gatewaysclaim automatically does an evalcode convert to assets CC, so after the claim it is freely tradeable asset


[21-Sep-18 06:57 AM] jl777c#5810
you do need to do a tokenconvert before doing a withdraw as withdraw is a gatewaysCC


[21-Sep-18 06:58 AM] TonyL#3577
Withdraw - means usage of tokens not in gatewaysCC ?
upd oh `gatewayswithdraw` got it


[21-Sep-18 07:03 AM] jl777c#5810
withdraw means to send tokens to the withdraw address to get back real coins


[21-Sep-18 07:04 AM] TonyL#3577
And these tokens will be secondary tradable by `price` CC or it's possible to use `assetsCC` calls like a `tokenbid`/`tokenask` ? Trying to finish the puzzle in my head  üòÇ


[21-Sep-18 07:05 AM] xRobeSx#5136
@Deleted User I found: https://github.com/interledger/python-crypto-conditions

{Embed}
https://github.com/interledger/python-crypto-conditions
interledger/python-crypto-conditions
Python implementation of Crypto-conditions. Contribute to interledger/python-crypto-conditions development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/w8Gag95wtZI7V7DGO_V_Pt6_AHz1OM9Np0MKtZK8BU0/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/14062960

{Reactions}
üëå 

[21-Sep-18 07:06 AM] TonyL#3577
Hmm  @xRobeSx here ^^ is only Readme.md with one line


[21-Sep-18 07:07 AM] xRobeSx#5136
yea I saw there isn't anything really there, but maybe someone's working on it?


[21-Sep-18 07:07 AM] TonyL#3577
Looks like someone wanted to 2 years ago but no luck üòÇ

{Reactions}
üòÇ 

[21-Sep-18 07:10 AM] TonyL#3577
https://github.com/bigchaindb/cryptoconditions

{Embed}
https://github.com/bigchaindb/cryptoconditions
bigchaindb/cryptoconditions
Multi-algorithm, multi-level, multi-signature format for expressing conditions and fulfillments - bigchaindb/cryptoconditions
https://images-ext-2.discordapp.net/external/wWw1QkW8NA9DQfbDb770ULUC0u5vcsUjqIj0K2OAPxc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/17097586


[21-Sep-18 07:10 AM] TonyL#3577
`Python implementation of Crypto-Conditions.` maybe thats it


[21-Sep-18 07:12 AM] xRobeSx#5136
nice @TonyL , now there you go @Deleted User

{Reactions}
üêç (2) üçû 

[21-Sep-18 07:21 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL tokenconvert 251 2aee23c469b8d9f06d810e118cf0af4d013be43507692304b718337314eb1bdf 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 1000000
error code: -1
error message:
tokenconvert evalcode tokenid pubkey amount```
@jl777c what I'm doing wrong? (tried to send evalcode as hex also, also tried to send different params as string in "")


[21-Sep-18 07:23 AM] jl777c#5810
that looks good


[21-Sep-18 07:24 AM] jl777c#5810
I will try to duplicate


[21-Sep-18 07:24 AM] jl777c#5810
a CC vout has an evalcode


[21-Sep-18 07:24 AM] jl777c#5810
when an evalcode is spent, its validation is triggered


[21-Sep-18 07:24 AM] jl777c#5810
coverting to gateways CC lets you use tokens for gateway


[21-Sep-18 07:24 AM] jl777c#5810
converting to TBD CC lets you use tokens for TBD


[21-Sep-18 07:25 AM] jl777c#5810
converting back to assets CC lets you do assets CC things, like tokenbid


[21-Sep-18 07:25 AM] TonyL#3577
I did just `./komodo-cli -ac_name=ORCL tokencreate KMD 1000000 KMD_equivalent_token_for_gatewaysCC` and then after transaction mined call this `tokenconvert` above


[21-Sep-18 07:26 AM] TonyL#3577
```git log -1
commit 44d8e00a25fbd877d06594eecde90cee56dfec4a (HEAD -> FSM, origin/FSM)
Author: jl777 <jameslee777@yahoo.com>
Date:   Thu Sep 20 07:52:46 2018 -1100

    +print
```


[21-Sep-18 07:34 AM] jl777c#5810
@TonyL pushed fix


[21-Sep-18 07:41 AM] TonyL#3577
@jl777c thanks, will check in ~40 mins


[21-Sep-18 07:41 AM] TonyL#3577
Dinner time hehe üçù

{Reactions}
üç¥ üç∫ 

[21-Sep-18 07:42 AM] jl777c#5810
üåª

{Reactions}
üòä üåº 

[21-Sep-18 09:11 AM] TonyL#3577
@jl777c tokenconvert call worked for last build
Hmm there is a tricky thing: 
```./komodo-cli -ac_name=ORCL tokencreate KMD 1000000 ```
Creates token with ` "supply": 100000000000000`
But ```./komodo-cli -ac_name=ORCL tokenconvert 251 2aee23c469b8d9f06d810e118cf0af4d013be43507692304b718337314eb1bdf 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 1000000 ```
Transfers actually `1000000`

Not touched tokensCC for a week so forgot this specifics üòÉ


[21-Sep-18 09:19 AM] TonyL#3577
Created new token, trying to convert whole balance this time but receive this error

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/492731510110289930/unknown.png


[21-Sep-18 09:37 AM] TonyL#3577
```"hex": "01000000020170cd01de80659f4c238cf55915d824666f699b78f19fc3317654430f7502ec01000000484730440220508ac0817caf806d5f9f99878915e3a1c921b8efdd0329f580e49fa8eb2c25dc0220451f01135996522375d1d6715af7a15148dcf28cba018924d67c2eef7a1b886c01ffffffffb802b0f5cf6de692850e0e977710833fd322f69cd403bca8522147afebe95b24000000007b4c79a276a072a26ba067a565802102a6fccee9503330091a2a2d92741cea93fa0157688406e2c755cbcce7e96b30e7814023c37cf0620178500ffa4d5751b519e303d0fcd5998c63bd26c38d25ec60c9a0451e3a23c16d82e6ceef135a2a935317c9b1fb4ce0df0d1d570f2acfad03a612a100af038001e3a10001ffffffff030000000000000000302ea22c8020a0069246c7a984a2a867280233bed518dfae2d7097c62e2978cd901465dd95078103120c008203000401cc00407a10f35a0000302ea22c80207041859fe1a7919dd625cfa8f479a74a825c41d24283946e8a7544d5e3ba1c058103120c008203000401cc0000000000000000246a22e374245be9ebaf472152a8bc03d49cf622d33f831077970e0e8592e66dcff5b002b800000000"```


[21-Sep-18 10:18 AM] jl777c#5810
what chain are you on?


[21-Sep-18 10:38 AM] SHossain#0007
ORCL


[21-Sep-18 10:39 AM] jl777c#5810
params?


[21-Sep-18 10:44 AM] SHossain#0007
`./komodod -ac_cc=1 -ac_name=ORCL -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -addnode=195.201.20.230 -addnode=195.201.137.5`


[21-Sep-18 11:10 AM] jl777c#5810
@TonyL pushed fix. it is a hardforking change

{Reactions}
üëå 

[21-Sep-18 11:18 AM] TonyL#3577
@Alright You can shutdown ORCL

{Reactions}
üëå 

[21-Sep-18 10:16 PM] TonyL#3577 (pinned)
AC on latest FSM
`./komodod -ac_cc=1 -ac_name=ORCL1 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -addnode=159.69.45.70 -addnode=159.69.201.122`


[21-Sep-18 10:16 PM] TonyL#3577
Pinned a message.


[22-Sep-18 02:07 AM] CMaurice#1685
http://diyhpl.us/wiki/transcripts/baltic-honeybadger/2018/the-future-of-bitcoin-smart-contracts/


[22-Sep-18 02:07 AM] CMaurice#1685
Are links frowned upon in general around here? People seem to be much more sensitive about links than I have ever been


[22-Sep-18 02:08 AM] CMaurice#1685
the talk was given a few minutes ago


[22-Sep-18 02:08 AM] jl777c#5810
seems like very old info


[22-Sep-18 02:09 AM] CMaurice#1685
well, there's nothing new to the information, sure


[22-Sep-18 02:10 AM] CMaurice#1685
but I think it gives some realistic ideas about what the state of the smart contract market is right now


[22-Sep-18 02:10 AM] TonyL#3577
https://github.com/KomodoPlatform/Mastering_CryptoConditions hmm there is more realistic ideas as I think

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[22-Sep-18 02:11 AM] jl777c#5810
how does 4 year old stuff give any relevant idea about current smart contracts?


[22-Sep-18 02:15 AM] TonyL#3577
@jl777c after ``` ./komodo-cli -ac_name=ORCL1 tokenconvert 251 68f27842af628985bb5602f5d03475311ea75ab572ee3d9a6600f28f936b6142 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 100000000000000```
tokenbalance return 0 for both gateways pubkey and my pubkey:

```./komodo-cli -ac_name=ORCL1 tokenbalance 68f27842af628985bb5602f5d03475311ea75ab572ee3d9a6600f28f936b6142 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40
{
  "result": "success",
  "CCaddress": "RBF65sz1K1QzJyzzrz8ZQHMJjn1ES2E3DG",
  "tokenid": "68f27842af628985bb5602f5d03475311ea75ab572ee3d9a6600f28f936b6142",
  "balance": 0
}
```
```
./komodo-cli -ac_name=ORCL1 tokenbalance 68f27842af628985bb5602f5d03475311ea75ab572ee3d9a6600f28f936b6142 03d82cb358ef7cb1d89becbba3ab1a1805ab4921984066c57e18a278de8f1a43cd
{
  "result": "success",
  "CCaddress": "RCQAWQUKCa5MFnbbrG6st6YDfi8qNNRDy8",
  "tokenid": "68f27842af628985bb5602f5d03475311ea75ab572ee3d9a6600f28f936b6142",
  "balance": 0
}
```
Where are my tokens now technically?


[22-Sep-18 02:16 AM] jl777c#5810
they are not assets CC tokens anymore, they are in limbo, but you want to gatewaysbind them

{Reactions}
üëå 

[22-Sep-18 02:19 AM] CMaurice#1685
@jl777c  the speaker explains that there are no real services for even unsophisticated multisig technologies yet. Real world stuff, like escrow with solicitors for home sales and the like.


[22-Sep-18 02:21 AM] jl777c#5810
it will be a while before real world things are integrated with the blockchain. oracles is an enabling step for that. within a blockchain, there are plenty of things a lot more complex than multisig


[22-Sep-18 05:59 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewaysbind f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d 1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 KMD 100000000000000 1 1 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 038daf51be54f97f90c21028fb989a53f1fc98bdf1a6cdc65fb265ddfd20a0be05
{
  "result": "error",
  "error": "couldnt gatewaysbind"
}
```
```
Gateway bind.KMD (f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d) globaladdr.RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 token balance 0.00000000 != 1000000.00000000
```
Before I did `tokenconvert` for this token. Is it because this token not a token anymore? Have I do bind before convert?


[22-Sep-18 06:00 AM] jl777c#5810
seems a bug


[22-Sep-18 06:00 AM] TonyL#3577
Also found this in daemon logs:
```2018-09-22 12:41:50 ERROR: CScriptCheck(): 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-09-22 12:41:50 ERROR: AcceptToMemoryPool: BUG! PLEASE REPORT THIS! ConnectInputs failed against MANDATORY but not STANDARD flags 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9
2018-09-22 12:41:50 Misbehaving: 159.69.201.122:47382 (0 -> 100)
2018-09-22 12:42:03 ERROR: CScriptCheck(): 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-09-22 12:42:03 ERROR: AcceptToMemoryPool: BUG! PLEASE REPORT THIS! ConnectInputs failed against MANDATORY but not STANDARD flags 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9
2018-09-22 12:42:03 ERROR: CScriptCheck(): 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-09-22 12:42:03 ERROR: AcceptToMemoryPool: BUG! PLEASE REPORT THIS! ConnectInputs failed against MANDATORY but not STANDARD flags 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9
2018-09-22 12:42:03 ERROR: CScriptCheck(): 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
```
Investigating now what I did at this moment. Error message asked to report a lot


[22-Sep-18 06:01 AM] jl777c#5810
you converted all f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d ?


[22-Sep-18 06:01 AM] jl777c#5810
this code is unvalidated, each step could have a bug


[22-Sep-18 06:01 AM] TonyL#3577
Yes, converted all supply


[22-Sep-18 06:02 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenconvert 251 f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 100000000000000
check RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f 1000000.00000000
{
  "result": "success",
  "hex": "01000000027de0bd511f57e4ef7242a0640ee8a573754527e7344ba85fbf53a3f2546b43f2020000004948304502210096870b1c3664ba6a95a5adebcf994a8e68c2b1d4e973370f92152d2360c12fd40220011fe6ba2ce30a7af991c83e58b0fcccdaa1ed15c3d1c87a3977e5b914ef3e6901ffffffff7de0bd511f57e4ef7242a0640ee8a573754527e7344ba85fbf53a3f2546b43f2000000007b4c79a276a072a26ba067a565802103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff259081400bbb41c147ab2ccc4c70273081045891256ea733713224bc2bd4c70c77d6e3480b6bbe5b82e1041e886689464e145041a6ed44f82678bf19594138a33bebc53ea100af038001e3a10001ffffffff030000000000000000302ea22c80208eb0bbd9c4cd4e66c80b3873149532b451a9ef1490301ff6b4d956ce15a287388103120c008203000401cc00407a10f35a0000302ea22c80207041859fe1a7919dd625cfa8f479a74a825c41d24283946e8a7544d5e3ba1c058103120c008203000401cc0000000000000000246a22e374f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d00000000"
}
```


[22-Sep-18 06:02 AM] jl777c#5810
bug is that gatewaysbind is looking for wrong place


[22-Sep-18 06:03 AM] TonyL#3577
@jl777c Transaction which cased this ```2018-09-22 12:41:50 ERROR: CScriptCheck(): 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-09-22 12:41:50 ERROR: AcceptToMemoryPool: BUG! PLEASE REPORT THIS! ConnectInputs failed against MANDATORY but not STANDARD flags 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9
2018-09-22 12:41:50 Misbehaving: 159.69.201.122:47382 (0 -> 100)
2018-09-22 12:42:03 ERROR: CScriptCheck(): 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-09-22 12:42:03 ERROR: AcceptToMemoryPool: BUG! PLEASE REPORT THIS! ConnectInputs failed against MANDATORY but not STANDARD flags 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9
2018-09-22 12:42:03 ERROR: CScriptCheck(): 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-09-22 12:42:03 ERROR: AcceptToMemoryPool: BUG! PLEASE REPORT THIS! ConnectInputs failed against MANDATORY but not STANDARD flags 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9
2018-09-22 12:42:03 ERROR: CScriptCheck(): 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
``` error is actually broadcasting of `tokencovert`


[22-Sep-18 06:03 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 sendrawtransaction 01000000027de0bd511f57e4ef7242a0640ee8a573754527e7344ba85fbf53a3f2546b43f2020000004948304502210096870b1c3664ba6a95a5adebcf994a8e68c2b1d4e973370f92152d2360c12fd40220011fe6ba2ce30a7af991c83e58b0fcccdaa1ed15c3d1c87a3977e5b914ef3e6901ffffffff7de0bd511f57e4ef7242a0640ee8a573754527e7344ba85fbf53a3f2546b43f2000000007b4c79a276a072a26ba067a565802103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff259081400bbb41c147ab2ccc4c70273081045891256ea733713224bc2bd4c70c77d6e3480b6bbe5b82e1041e886689464e145041a6ed44f82678bf19594138a33bebc53ea100af038001e3a10001ffffffff030000000000000000302ea22c80208eb0bbd9c4cd4e66c80b3873149532b451a9ef1490301ff6b4d956ce15a287388103120c008203000401cc00407a10f35a0000302ea22c80207041859fe1a7919dd625cfa8f479a74a825c41d24283946e8a7544d5e3ba1c058103120c008203000401cc0000000000000000246a22e374f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d00000000
AssetValidate (t)
vin1 100000000000000, vout0 0 special case, vout1 100000000000000, transfer validated 1000000.00000000 -> 1000000.00000000 (-1 -1)
4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9```


[22-Sep-18 06:04 AM] TonyL#3577
So maybe bug is on this stage


[22-Sep-18 06:04 AM] jl777c#5810
4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9 indicates it accepted the tokenconvert


[22-Sep-18 06:05 AM] TonyL#3577
```2018-09-22 12:42:03 ERROR: AcceptToMemoryPool: BUG! PLEASE REPORT THIS! ConnectInputs failed against MANDATORY but not STANDARD flags 4acc648488e3416f84e9793335bfab97d5e6d35bb189a1d31f2af6c6a6d668a9```
Looks scary af))


[22-Sep-18 06:06 AM] jl777c#5810
it is already in the blockchain


[22-Sep-18 06:16 AM] jl777c#5810
./komodo-cli -ac_name=ORCL1 gatewaysbind f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d 1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 KMD 100000000000000 1 1 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 038daf51be54f97f90c21028fb989a53f1fc98bdf1a6cdc65fb265ddfd20a0be05
why are there 2 pubkeys at the end?


[22-Sep-18 06:16 AM] TonyL#3577
Pubkeys of my nodes


[22-Sep-18 06:18 AM] jl777c#5810
but you said 1 1 for M and N


[22-Sep-18 06:19 AM] jl777c#5810
and for now best to get things working with a single pubkey as there are so many moving parts


[22-Sep-18 06:19 AM] TonyL#3577
Hmm I followed yours example:
``` ./c gatewaysbind a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808 KMD 100000000000000 1 1 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92
 e6c99f79d4afb216aa8063658b4222edb773dd24bb0f8e91bd4ef341f3e47e5e```


[22-Sep-18 06:19 AM] TonyL#3577
There 2 different pubkeys at the end


[22-Sep-18 06:19 AM] TonyL#3577
Will try with single now


[22-Sep-18 06:21 AM] jl777c#5810
my example has just 1 pubkey:
 ./c gatewaysbind a7398a8748354dd0a3f8d07d70e65294928ecc3674674bb2d9483011ccaa9a7a 1f1aefcca2bdea8196cfd77337fb21de22d200ddea977c2f9e8742c55829d808 KMD 100000000000000 1 1 02ebc786cb83de8dc3922ab83c21f3f8a2f3216940c3bf9da43ce39e2a3a882c92


[22-Sep-18 06:21 AM] TonyL#3577
Oh it's an output

{Reactions}
‚ò∫ 

[22-Sep-18 06:22 AM] jl777c#5810
all pubkeys start with 02 or 03


[22-Sep-18 06:22 AM] TonyL#3577
Got it now, I thought that `gatewayid` output is a second pubkey


[22-Sep-18 06:29 AM] jl777c#5810
plz try with latest version it has debug prints


[22-Sep-18 06:29 AM] TonyL#3577
üëç Ok


[22-Sep-18 06:32 AM] jl777c#5810
FSM branch

{Reactions}
‚úî 

[22-Sep-18 06:33 AM] TonyL#3577
@jl777c 
```cc/CCtx.cpp: In function ‚Äòint64_t CCtoken_balance(char*, uint256)‚Äô:
cc/CCtx.cpp:261:58: error: ‚Äòstr‚Äô was not declared in this scope
             fprintf(stderr,"check %s %.8f\n",uint256_str(str,txid),(double)it->second.satoshis/COIN);
                                                          ^~~
Makefile:2965: recipe for target 'cc/libbitcoin_server_a-CCtx.o' failed
make[2]: *** [cc/libbitcoin_server_a-CCtx.o] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f cc/.deps/libbitcoin_server_a-faucet.Tpo cc/.deps/libbitcoin_server_a-faucet.Po
mv -f cc/.deps/libbitcoin_server_a-assets.Tpo cc/.deps/libbitcoin_server_a-assets.Po
mv -f cc/.deps/libbitcoin_server_a-CCutils.Tpo cc/.deps/libbitcoin_server_a-CCutils.Po
make[2]: Leaving directory '/root/komodo/src'
Makefile:4634: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/root/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
```


[22-Sep-18 06:34 AM] jl777c#5810
try again


[22-Sep-18 06:38 AM] TonyL#3577
Builded now


[22-Sep-18 06:42 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewaysbind f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d 1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 KMD 100000000000000 1 1 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590

Gateway bind.KMD (f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d) destaddr.RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 globaladdr.RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 token balance 0.00000000 != 1000000.00000000
{
  "result": "error",
  "error": "couldnt gatewaysbind"
}
```
Will try to create and convert new token


[22-Sep-18 06:42 AM] jl777c#5810
i think the bug could be the tokenconvert is sending to the wrong address


[22-Sep-18 06:43 AM] jl777c#5810
oh, what pubkey did you convert the tokens to?


[22-Sep-18 06:43 AM] jl777c#5810
it will only work if you converted to pubkey 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40


[22-Sep-18 06:43 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenconvert 251 f2436b54f2a353bf5fa84b34e727457573a5e80e64a04272efe4571f51bde07d 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 100000000000000
``` 
GatewaysPubkey


[22-Sep-18 06:44 AM] jl777c#5810
my bad, it should be 241

{Reactions}
üëå 

[22-Sep-18 06:44 AM] jl777c#5810
not 251


[22-Sep-18 06:46 AM] jl777c#5810
it should end up in RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33


[22-Sep-18 06:46 AM] TonyL#3577
I've looked on hex evalcodes table but didn't check... so my bad as well üòÉ


[22-Sep-18 06:47 AM] jl777c#5810
I am only correct 97% of the time, so 3% chance I am wrong


[22-Sep-18 06:48 AM] TonyL#3577
Ok at least you're not robot. Or maybe it's a part of deep plan to make people think that you're not a robot ü§î


[22-Sep-18 06:55 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewaysbind 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8 1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 KMD 100000000000000 1 1 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590
check 6a0d9fb9e5e799f3182b501c3dec363ba8b3347d8b215c8595bf3291ec0da5b2 1000000.00000000
bind markeraddr.(RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33) need to scan mempool also
error decoding bind opret
{
  "result": "success",
  "hex": "0100000001b2a50dec9132bf95855c218b7d34b3a83b36ec3d1c502b18f399e7e5b99f0d6a0200000048473044022032f50f776a71df1a8895d7109a6c6fd4f0209bcaca876cabb52110bec0df67df022073ab62a798f0b40b6db1d90b2f1d858f0234e8b08c419ac531e2fac5d23759ca01ffffffff031027000000000000302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc6009cc792f080000232103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590ac0000000000000000796a4c76f142034b4d443c5500a82e37285eb87bc401a2afb95f2eb57a431461d1de498f7527c94bb2e1b3523800407a10f35a00000101012103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff259029f8431f66b573ab0464654826768a2974ceaffc635883f909b95e759d29a71f00000000"
}
```

Is this `error decoding bind opret` not a problem?


[22-Sep-18 06:55 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewaysinfo 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590",
  "coin": "KMD",
  "oracletxid": "1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd",
  "tokenid": "3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8",
  "totalsupply": "1000000.00000000",
  "remaining": "1000000.00010000",
  "issued": "-0.00010000"
}
```
Looks like I have a gateway now


[22-Sep-18 06:55 AM] jl777c#5810
seems some past bind gone wrong


[22-Sep-18 06:55 AM] jl777c#5810
now you have a gateway, run oraclefeed with the right params

{Reactions}
üëå 

[22-Sep-18 06:58 AM] TonyL#3577
oraclefeed not building now

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493058435999334400/unknown.png


[22-Sep-18 06:58 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493058499669000192/unknown.png


[22-Sep-18 06:58 AM] jl777c#5810
build when you are in src


[22-Sep-18 06:58 AM] jl777c#5810
gcc cc/dapps/oraclefeed.c -lm


[22-Sep-18 07:05 AM] TonyL#3577
Same behaviour

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493060281271058432/unknown.png


[22-Sep-18 07:06 AM] TonyL#3577
Do you need full printout?


[22-Sep-18 07:06 AM] jl777c#5810
ah, i seem to have broken it. fixing

{Reactions}
üëå 

[22-Sep-18 07:14 AM] jl777c#5810
pushed fix


[22-Sep-18 07:16 AM] TonyL#3577
` src/cc/gateways.cpp       |  2 +-`
so rebuild is needed? 
Sorry for a rhetorical question, rebuilding üòÇ


[22-Sep-18 07:19 AM] jl777c#5810
it is like asking if it is needed to breathe. Technically not for 5 minutes


[22-Sep-18 07:19 AM] TonyL#3577
hahahahaha üòÇ


[22-Sep-18 07:24 AM] TonyL#3577
Have I use txid of convertation as $BINDTXID ?


[22-Sep-18 07:24 AM] TonyL#3577
Oh it's gateway ID actually


[22-Sep-18 07:24 AM] jl777c#5810
use the bindtxid as the $BINDTXID


[22-Sep-18 07:25 AM] jl777c#5810
txid of the gatewaysbind

{Reactions}
üëç 

[22-Sep-18 07:28 AM] TonyL#3577
```~/komodo/src # ./oraclefeed ORCL1 1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 Ihh 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   673  100   673    0     0  28041      0 --:--:-- --:--:-- --:--:-- 28041
BTC/USD 6675.4738
Powered by CoinDesk (https://www.coindesk.com/price/) 6675.47380000
coin.KMD vs KMD
Error reading configuration file: Missing komodo.conf
loadfile null size.(/tmp/oraclefeed.importaddress)
set refcoin  <- KMD [./komodo-cli] M.1 of N.1
Error reading configuration file: Missing komodo.conf
loadfile null size.(/tmp/oraclefeed.getblockchaininfo)
Error reading configuration file: Missing komodo.conf```


[22-Sep-18 07:29 AM] TonyL#3577
I'm root


[22-Sep-18 07:32 AM] jl777c#5810
maybe komodo-cli needs to work?


[22-Sep-18 07:32 AM] TonyL#3577
I have no problems with it

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493067125523611648/unknown.png


[22-Sep-18 07:35 AM] TonyL#3577
Oh I think I get you


[22-Sep-18 07:36 AM] TonyL#3577
Nope, after I set path to komodo-cli 
` export PATH=$PATH:~/komodo/src` same behaviour :/ (komodo-cli now possible to execute from any place)


[22-Sep-18 07:39 AM] TonyL#3577
Oh, problem is that I don't have KMD daemon on this server


[22-Sep-18 07:40 AM] jl777c#5810
um... that is indeed a problem


[22-Sep-18 07:40 AM] TonyL#3577
```        sprintf(cmdstr,"./komodo-cli %s %s %s %s %s > %s\n",method,arg0,arg1,arg2,arg3,fname);
``` 
And it's calling for it


[22-Sep-18 07:40 AM] jl777c#5810
pushed more fixes


[22-Sep-18 07:40 AM] jl777c#5810
how can you have a KMD gateway without KMD running?


[22-Sep-18 07:43 AM] TonyL#3577
Added condition of synced and running KMD daemon to my how-to guide


[22-Sep-18 07:43 AM] TonyL#3577
It's scary to imagine what's been fixed since problem is on my side üòÉ


[22-Sep-18 07:49 AM] jl777c#5810
for making a gateway for a COIN, the deamon for COIN needs to be running on the node that creates the gateway


[22-Sep-18 11:07 AM] TonyL#3577
@jl777c synced KMD chain. oraclesfeed seems works now but at start failing `importaddress` call

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493121155809411072/unknown.png


[22-Sep-18 11:08 AM] TonyL#3577
```./oraclefeed ORCL1 1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 Ihh 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   672    0   672    0     0  16000      0 --:--:-- --:--:-- --:--:-- 16000
BTC/USD 6687.9650
Powered by CoinDesk (https://www.coindesk.com/price/) 6687.96500000
coin.KMD vs KMD
error code: -1
error message:
importaddress "address" ( "label" rescan )
```


[22-Sep-18 11:09 AM] jl777c#5810
it fails as the address being set is "" for some reason


[22-Sep-18 11:10 AM] TonyL#3577
I made all setup calls before without "" ü§î


[22-Sep-18 11:10 AM] jl777c#5810
set refcoin RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd <- KMD [./komodo-cli] M.1 of N.1


[22-Sep-18 11:10 AM] jl777c#5810
did you build the latest oraclefeed?


[22-Sep-18 11:12 AM] TonyL#3577
Rebuild - now everything seems smooth


[22-Sep-18 11:12 AM] jl777c#5810
it should print out merkle data every block being written to the chain


[22-Sep-18 11:13 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493122596846698507/unknown.png


[22-Sep-18 11:13 AM] jl777c#5810
and oraclesamples should return this data


[22-Sep-18 11:13 AM] jl777c#5810
yes


[22-Sep-18 11:13 AM] TonyL#3577
Let me check oraclesamples now


[22-Sep-18 11:14 AM] TonyL#3577
All seems legit

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493122990268088321/unknown.png


[22-Sep-18 11:14 AM] jl777c#5810
once oraclesamples is working, you are ready for a deposit. you need to make a small vout to the same address you want the tokens to go to, and a deposit of the KMD. use a separate pubkey's for this


[22-Sep-18 11:15 AM] jl777c#5810
the comments detail all the steps needed to make a gatewaysdeposit call, but it will be quite involved


[22-Sep-18 11:15 AM] jl777c#5810
first you need to make a KMD deposit with the 2 vouts (and change)


[22-Sep-18 11:21 AM] TonyL#3577
` To make a gateway deposit, send the funds to the "deposit" address, along with any amount to the same pubkey address you want to get the assetized KMD to appear in.`
Means I have to send it in the same transaction?


[22-Sep-18 11:21 AM] jl777c#5810
yes, needs to be atomic


[22-Sep-18 11:21 AM] jl777c#5810
use sendmany


[22-Sep-18 11:21 AM] jl777c#5810
as I show in the gateways.cpp


[22-Sep-18 11:22 AM] jl777c#5810
./komodo-cli z_sendmany "<funding addr>" '[{"address":"RFpxgqff7FDHFuHa3jSX5NzqqWCcELz8ha","amount":0.0001},{"address":"RHV2As4rox97BuE3LK96vMeNY8VsGRTmBj","amount":7.6999}]'
or plain sendmany


[22-Sep-18 11:22 AM] jl777c#5810
making opreturn is hard on some chains, so the claim address is encoded in a vout


[22-Sep-18 11:49 AM] TonyL#3577
https://kmdexplorer.io/tx/79fb11011d83a851429833ccaca581c1b94ea665673a793d5f668335f045e8aa made  a transaction:
RE1RNNvGi4GXas9gwUDUdEmgLd6YxqLc6v   - ORCL1 wallet for pubkey different to gateway creator
RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd  - gateway deposit address


[22-Sep-18 11:49 AM] TonyL#3577
```gatewaysdeposit bindtxid height coin cointxid claimvout deposithex proof destpub amount
gatewaysclaim bindtxid coin deposittxid destpub amount```
Time for these calls?


[22-Sep-18 11:50 AM] jl777c#5810
yes


[22-Sep-18 11:51 AM] jl777c#5810
gatewaysdeposit proves the the KMD tx is valid and gets it onchain


[22-Sep-18 11:51 AM] jl777c#5810
then the claim finally gets the token into your address as normal asssets CC tokens


[22-Sep-18 11:56 AM] TonyL#3577
Ouch, manipulated with keys and on fork now in my chain :/
Will arrange it tomorrow with some third komodod instance as a wallet + 2 chain nodes
Now I have all the needed information to proceed to this step fast


[22-Sep-18 11:57 AM] TonyL#3577
Was really bad idea to touch main AC node since I'm only peer in this chain üò¶


[22-Sep-18 12:02 PM] Alright#0419
try `invalidateblock`?


[22-Sep-18 12:06 PM] TonyL#3577
Trying to change pacemaker now - one node have someones connection. Erased blocks on unhealthy node but getting `"connections": 0` now


[22-Sep-18 12:08 PM] TonyL#3577
@Alright Could you please try to start: `./komodod -ac_cc=1 -ac_name=ORCL1 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -addnode=159.69.201.122` ?


[22-Sep-18 12:09 PM] Alright#0419
FSM branch?


[22-Sep-18 12:09 PM] TonyL#3577
Yup


[22-Sep-18 12:19 PM] Alright#0419
@TonyL UpdateTip: new best=009a6d18e67bbb283082c0cdf51cc9ce9faf32ec5c3913a18afe5b4db5195050  height=693


[22-Sep-18 12:19 PM] Alright#0419
have one node on it


[22-Sep-18 12:19 PM] Alright#0419
you need more than that?


[22-Sep-18 12:19 PM] TonyL#3577
`"blocks": 694,` have same state on healthy node cooool


[22-Sep-18 12:22 PM] TonyL#3577
thanks a lot!


[23-Sep-18 01:54 AM] Cl√©ment#1337
Hello guys!


[23-Sep-18 02:00 AM] jl777c#5810
Hello


[23-Sep-18 02:16 AM] Cl√©ment#1337
I'm joining this server following @KomodoWorld post about the making of a CC Solidity interpreter

{Reactions}
üëç 

[23-Sep-18 02:17 AM] Cl√©ment#1337
I'm a Solidity developer and I'm really curious about how this can be achieved üòÉ


[23-Sep-18 02:24 AM] jl777c#5810
https://github.com/KomodoPlatform/Mastering_CryptoConditions explains how CC are made

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[23-Sep-18 02:25 AM] jl777c#5810
I think for a solidity one, it would create a contract by posting the script in an opreturn with a soliditycreate rpc call


[23-Sep-18 02:25 AM] jl777c#5810
then it can be invoked via its txid


[23-Sep-18 02:51 AM] Cl√©ment#1337
Thank you!


[23-Sep-18 04:45 AM] KomodoWorld#8282
Hello @Cl√©ment welcome


[23-Sep-18 05:03 AM] dexter#2263
Hi,


[23-Sep-18 05:05 AM] jl777c#5810
Hi,


[23-Sep-18 10:13 AM] dukeleto#7326
CCs + Solidity? Very interesting


[23-Sep-18 11:35 PM] TonyL#3577
@jl777c On gatewaysdeposit I'm receiving only: 
 {
  "result": "error",
  "error": "couldnt gatewaysdeposit"
}
There are 9 parameters in gatewaysdeposit - is there any chance to get some hint from rpc why it couldn't gatewaysdeposit?

Transaction:
```./komodo-cli z_sendmany "RDq35xPs6ynKbWVuVy8j8WhThadSkseAK7" '[{"address":"RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv","amount":0.0001},{"address":"RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd","amount":0.1}]'``` RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv wallet belongs to 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 pubkey

http://pad.supernet.org/gatewaysdeposit - what I'm trying to execute


[23-Sep-18 11:52 PM] TonyL#3577
Gateway:
```./komodo-cli -ac_name=ORCL1 gatewaysinfo 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590",
  "coin": "KMD",
  "oracletxid": "1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd",
  "tokenid": "3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8",
  "totalsupply": "1000000.00000000",
  "remaining": "1000000.00010000",
  "issued": "-0.00010000"
}
```
And oraclefeed put merkleroots for this heigh: KMD ht.1023320 <- (can't find txid now because printouts messed in my cli)


[24-Sep-18 01:24 AM] jl777c#5810
what was the actual cli that got error? there should be fprintf for most errors


[24-Sep-18 01:24 AM] TonyL#3577
http://pad.supernet.org/gatewaysdeposit


[24-Sep-18 01:25 AM] TonyL#3577
```commit 3a9b6817573d3e949b09a8d929b106df4e6fea5b (HEAD -> FSM, origin/FSM)
Author: jl777 <jameslee777@yahoo.com>
Date:   Sat Sep 22 03:39:18 2018 -1100

    Test
```


[24-Sep-18 01:26 AM] TonyL#3577
Have no any printouts instead of ```{
  "result": "error",
  "error": "couldnt gatewaysdeposit"
}```


[24-Sep-18 01:26 AM] jl777c#5810
it appears to be on more than one line


[24-Sep-18 01:26 AM] jl777c#5810
should only be space between args


[24-Sep-18 01:27 AM] TonyL#3577
It's how this superpad pasted it. Original is in one line


[24-Sep-18 01:27 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493700080143171585/unknown.png


[24-Sep-18 01:31 AM] jl777c#5810
can you post a file with the EXACT invokation so I can try to reproduce it?


[24-Sep-18 01:32 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493701247153602560/gatewaysdeposit.txt


[24-Sep-18 01:34 AM] jl777c#5810
thanks, reproduced the behavior. will investigate

{Reactions}
üëç 

[24-Sep-18 01:38 AM] jl777c#5810
i got console prints


[24-Sep-18 01:38 AM] jl777c#5810
pubkeys[0] 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590
reverse scan c9a84fd9fa34f0c029b48b17ac4538b0650105b090a3c0b1d4213814501d6166
reverse scan c9a84fd9fa34f0c029b48b17ac4538b0650105b090a3c0b1d4213814501d6166
m.0 of n.1
couldnt find merkleroot for ht.1023320 KMD oracle.1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 m.0 vs n.1


[24-Sep-18 01:39 AM] jl777c#5810
was pubkey 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 running oraclefeed?


[24-Sep-18 01:41 AM] TonyL#3577
Yep:
```./oraclefeed ORCL1 1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 Ihh 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55 &```


[24-Sep-18 01:42 AM] TonyL#3577
And this height seems to be oraclized, but can't get txid because printouts messed

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/493703758119960576/unknown.png


[24-Sep-18 01:58 AM] jl777c#5810
[
      "1023320",
      "01b6c6c1cf79b3ba517ea16baf1e1b1d968234471ff5de4ce1eb386550146da7",
      "e7c3eb155d508cc3bbc91375f187bfa6b33dc1b9ab2bd92001a63d92322740c2"
    ],

from oraclessamples its there, but the samples seems to have gaps. the problem is that it isnt finding it. investigating


[24-Sep-18 02:17 AM] TonyL#3577
I've executed oraclesfeed only to get the desired height for my transaction thats why there are gaps I guess


[24-Sep-18 02:19 AM] jl777c#5810
ok, that makes sense


[24-Sep-18 02:20 AM] jl777c#5810
isolating the problem, something about iterating is messed up, so it is a bug not anything you did wrong

{Reactions}
üëå 

[24-Sep-18 02:46 AM] jl777c#5810
@TonyL pushed fix,not hardforking


[24-Sep-18 02:46 AM] jl777c#5810
but your cointxid is wrong bc9bdd776ef8c2a7039ac669145bca7d1ddc720951bb49905c1636c467d3ecb9 is the correct one


[24-Sep-18 02:47 AM] jl777c#5810
not sure what 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8 is? without the actual KMD txid it cant verify


[24-Sep-18 02:50 AM] TonyL#3577
@jl777c hmm should be a brainlag - `cointxid` interpreted as a something connected with token, not coin


[24-Sep-18 02:50 AM] TonyL#3577
Let me try with fix and correct `cointxid`


[24-Sep-18 02:58 AM] TonyL#3577
```pubkeys[0] 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590
found merkleht.1023320 len.36 len2.68 01b6c6c1cf79b3ba517ea16baf1e1b1d968234471ff5de4ce1eb386550146da7 e7c3eb155d508cc3bbc91375f187bfa6b33dc1b9ab2bd92001a63d92322740c2
cointxid.bc9bdd776ef8c2a7039ac669145bca7d1ddc720951bb49905c1636c467d3ecb9 m.1 of n.1
verified proof for cointxid in merkleroot``` 
Yahoooo


[24-Sep-18 02:59 AM] jl777c#5810
it confirmed?


[24-Sep-18 02:59 AM] TonyL#3577
In mempool now


[24-Sep-18 03:00 AM] jl777c#5810
since there is no validation active for gateways yet, it should confirm, then you can do a claim


[24-Sep-18 03:04 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewaysclaim 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55 KMD bc9bdd776ef8c2a7039ac669145bca7d1ddc720951bb49905c1636c467d3ecb9 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 0.1
cant find deposittxid 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55```


[24-Sep-18 03:05 AM] TonyL#3577
` gatewaysclaim bindtxid coin deposittxid destpub amount` in github instruction but rpc telling about `deposittxid` hmm


[24-Sep-18 03:10 AM] jl777c#5810
bc9bdd776ef8c2a7039ac669145bca7d1ddc720951bb49905c1636c467d3ecb9 is not found on ORCL1


[24-Sep-18 03:10 AM] jl777c#5810
deposittxid is the txid for the deposit, on the ORCL1 chain


[24-Sep-18 03:10 AM] TonyL#3577
Ahhh


[24-Sep-18 03:10 AM] TonyL#3577
I see


[24-Sep-18 03:11 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewaysclaim 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55 KMD b96e16f807feb49779848e00b3142cd51527afd6d035df7acaf4e91776c770c0 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 0.1
need to validate deposittxid more
cant find enough inputs or mismatched total```


[24-Sep-18 03:11 AM] jl777c#5810
this clearly needs some automation as a layer on top as i doubt anyone but coders would be able to make it all work


[24-Sep-18 03:11 AM] jl777c#5810
do you have ORCL1 ?


[24-Sep-18 03:12 AM] TonyL#3577
This time I put gatewaysdeposit txid as a deposittxid


[24-Sep-18 03:12 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 getbalance
500000.00000000
```


[24-Sep-18 03:17 AM] jl777c#5810
plz send a few ORCL1 to RHV2As4rox97BuE3LK96vMeNY8VsGRTmBj


[24-Sep-18 03:18 AM] TonyL#3577
`9b7dccee8d62105fb80ad82fe51150e8367ed85668c7aafb356eea466a0f4c79`


[24-Sep-18 03:34 AM] jl777c#5810
pushed fix


[24-Sep-18 03:39 AM] jl777c#5810
let me know if it works. after this you should have 0.1 worth of the bind assetid in a freely tradeable form


[24-Sep-18 03:39 AM] jl777c#5810
so you can do all the assets CC rpc with it


[24-Sep-18 03:39 AM] TonyL#3577
Ok, I'll able to check in a hour or so (Burger Kings time üòÉ )


[24-Sep-18 05:59 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewaysclaim 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55 KMD b96e16f807feb49779848e00b3142cd51527afd6d035df7acaf4e91776c770c0 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 0.1
need to validate deposittxid more
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 for gateway inputs
vini.2 has unknown CC address.(RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar)
{
  "result": "success",
  "hex": "0100000003794c0f6a46ea6e35fbaac76856d87e36e85011e52fd80ab85f10628deecc7d9b0000000049483045022100ceafe836cbff1559ff4898d9a81766946e2ede4a7333f0f88a0c8a86c6e1ccfb022022e7f90230ac8be91053cb896d9fab55ccd76b538652079d24f190113ebbdf0d01ffffffffb2a50dec9132bf95855c218b7d34b3a83b36ec3d1c502b18f399e7e5b99f0d6a010000007b4c79a276a072a26ba067a565802103ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb408140ccccf022adc4b2439a9dae1813cd87a2e277b20e1e313dfdaaddc15def76fdf04003fdf80378aea6b3cac58cbf0346b2c163e61909e1dede258968d34226c1eca100af038001f1a10001ffffffffc070c77617e9f4ca7adf35d0d6af2715d52c14b3008e847997b4fe07f8166eb90000000000ffffffff048096980000000000302ea22c8020d16c2544f3f6e66f8f5d0af8ebcefafbb3cc1ba2c2fa9cbb009d10d47572e33b8103120c008203000401cc80a9e10ff35a0000302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc788c724e180900002321030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647ac0000000000000000246a22e3743852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea800000000"
}
```


[24-Sep-18 05:59 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 sendrawtransaction 0100000003794c0f6a46ea6e35fbaac76856d87e36e85011e52fd80ab85f10628deecc7d9b0000000049483045022100ceafe836cbff1559ff4898d9a81766946e2ede4a7333f0f88a0c8a86c6e1ccfb022022e7f90230ac8be91053cb896d9fab55ccd76b538652079d24f190113ebbdf0d01ffffffffb2a50dec9132bf95855c218b7d34b3a83b36ec3d1c502b18f399e7e5b99f0d6a010000007b4c79a276a072a26ba067a565802103ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb408140ccccf022adc4b2439a9dae1813cd87a2e277b20e1e313dfdaaddc15def76fdf04003fdf80378aea6b3cac58cbf0346b2c163e61909e1dede258968d34226c1eca100af038001f1a10001ffffffffc070c77617e9f4ca7adf35d0d6af2715d52c14b3008e847997b4fe07f8166eb90000000000ffffffff048096980000000000302ea22c8020d16c2544f3f6e66f8f5d0af8ebcefafbb3cc1ba2c2fa9cbb009d10d47572e33b8103120c008203000401cc80a9e10ff35a0000302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc788c724e180900002321030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647ac0000000000000000246a22e3743852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea800000000
error code: -25
error message:
```


[24-Sep-18 06:01 AM] TonyL#3577
@jl777c not sure from where it's get `RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar` this address


[24-Sep-18 06:08 AM] TonyL#3577
Worked from node on which I've created oracle and gateway bind


[24-Sep-18 06:08 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 sendrawtransaction 010000000302ba924e1435b83ea6200c55ac439c60de72321e34b4a238e12782601fc7eb590300000049483045022100a56dd6e34dd7bee2bf1186b5ca6df0b430ef734ccc60d9363a9d28ddc869d6a6022020470306776c4f538c5149e2ff11b638e6528a84d3b3fc089a3c2a8b0f25161601ffffffffb2a50dec9132bf95855c218b7d34b3a83b36ec3d1c502b18f399e7e5b99f0d6a010000007b4c79a276a072a26ba067a565802103ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb408140824a8253018146cd47e35124d844899ab7b7520c04f027e89d2477a5bbbae30073f3cd3364989137f9d3a72141a9baba99c0fe5b2b73d95f52897c5d499df8b6a100af038001f1a10001ffffffffc070c77617e9f4ca7adf35d0d6af2715d52c14b3008e847997b4fe07f8166eb9000000007b4c79a276a072a26ba067a565802103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff25908140cfc8a7dcd660533cb9dda30c3f92c58db230d802858fc9f3c2d166ab26e7f8a460ed8f09c536fc6179b2565a1d3c77797984a82be3a749ff550c0b68d505fe7ea100af038001f1a10001ffffffff048096980000000000302ea22c80208eb0bbd9c4cd4e66c80b3873149532b451a9ef1490301ff6b4d956ce15a287388103120c008203000401cc80a9e10ff35a0000302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc1027000000000000232103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590ac0000000000000000246a22e3743852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea800000000
return true without gateways validation
return true without gateways validation
9763c5fe8a4cc337b8dd6ad6ecd3e37386b5bcc559161cae6b33d9dd9ab55b84```


[24-Sep-18 06:11 AM] jl777c#5810
which node is receiving the deposit?


[24-Sep-18 06:11 AM] TonyL#3577
On node which receiving the deposit I've received an error


[24-Sep-18 06:12 AM] jl777c#5810
seems a bug... at least the asset is now where it should be?


[24-Sep-18 06:12 AM] jl777c#5810
does it behave like a normal asset?


[24-Sep-18 06:12 AM] TonyL#3577
Transaction just mined - checking now


[24-Sep-18 06:17 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenbalance 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8
check RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f 0.10000000
check RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f 0.00000000
check RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f 0.00000000
{
  "result": "success",
  "CCaddress": "RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f",
  "tokenid": "3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8",
  "balance": 10000000
}
```
Nope, it's on gateway creating node now


[24-Sep-18 06:17 AM] TonyL#3577
And I get 10000000 tokens for 0.1 KMD


[24-Sep-18 06:18 AM] jl777c#5810
yes tokens are in satoshis, so that is correct. did it end up in the right address?


[24-Sep-18 06:19 AM] jl777c#5810
if not, it seems a bug with the deposit or claim


[24-Sep-18 06:19 AM] TonyL#3577
Let me doublecheck and match gateways deposit pubkey


[24-Sep-18 06:20 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenbalance 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8
check RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f 0.10000000
check RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f 0.00000000
check RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f 0.00000000
{
  "result": "success",
  "CCaddress": "RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f",
  "tokenid": "3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8",
  "balance": 10000000
}
```
```
./komodo-cli -ac_name=ORCL1 validateaddress RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f
{
  "isvalid": true,
  "address": "RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f",
  "scriptPubKey": "76a914eb769f1c05040b635542079c87637a40658b8e8588ac",
  "segid": 61,
  "ismine": false,
  "iswatchonly": false,
  "isscript": false
}
```


[24-Sep-18 06:21 AM] TonyL#3577
It showing me balance for this wallt but at the same time it's not belongs to this node


[24-Sep-18 06:21 AM] jl777c#5810
the claimvout in the cointxid is what defines where the claimed tokens go to


[24-Sep-18 06:21 AM] jl777c#5810
what was the claimvout and value of the cointxid?


[24-Sep-18 06:23 AM] TonyL#3577
as a claimvout I've used 0
bc9bdd776ef8c2a7039ac669145bca7d1ddc720951bb49905c1636c467d3ecb9 cointxid with amount 0.1


[24-Sep-18 06:24 AM] TonyL#3577
`030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647` - destpub


[24-Sep-18 06:24 AM] TonyL#3577
Which is belongs to node on which I got error on claiming (just doublechecked that it's valid pubkey for this node)


[24-Sep-18 06:25 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenbalance 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647
{
  "result": "success",
  "CCaddress": "RCzphxaf2ZMRLJRZaLdyKVuAfqUANKmUi8",
  "tokenid": "3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8",
  "balance": 0
}
```


[24-Sep-18 06:27 AM] jl777c#5810
what is the token address for the RML address


[24-Sep-18 06:27 AM] TonyL#3577
what is RML?


[24-Sep-18 06:28 AM] jl777c#5810
in the cointxid: https://kmdexplorer.ru/tx/bc9bdd776ef8c2a7039ac669145bca7d1ddc720951bb49905c1636c467d3ecb9


[24-Sep-18 06:28 AM] jl777c#5810
vout 0 goes to RML... address


[24-Sep-18 06:28 AM] jl777c#5810
that is the pubkey that will get the tokens


[24-Sep-18 06:29 AM] jl777c#5810
so using the pubkey for the RML address do a tokensaddress <pubkey for RML...>


[24-Sep-18 06:29 AM] TonyL#3577
./komodo-cli -ac_name=ORCL1 validateaddress RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv
{
  "isvalid": true,
  "address": "RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv",
  "scriptPubKey": "76a914843225a463dbc46d1cc4baa2ec797ca77a20a09288ac",
  "segid": 9,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647",
  "iscompressed": true,
  "account": ""


[24-Sep-18 06:29 AM] TonyL#3577
030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 - pubkey which I've set as a `destpub`


[24-Sep-18 06:29 AM] jl777c#5810
yes


[24-Sep-18 06:29 AM] jl777c#5810
what is the tokensaddress for 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647


[24-Sep-18 06:30 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenaddress 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647
{
  "result": "success",
  "AssetsCCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "Assetsmarker": "RFYE2yL3KknWdHK6uNhvWacYsCUtwzjY3u",
  "GatewaysPubkey": "03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40",
  "AssetsCCassets": "RCzphxaf2ZMRLJRZaLdyKVuAfqUANKmUi8",
  "CCaddress": "RCzphxaf2ZMRLJRZaLdyKVuAfqUANKmUi8",
  "myCCaddress": "RCzphxaf2ZMRLJRZaLdyKVuAfqUANKmUi8",
  "myaddress": "RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv"
}
```


[24-Sep-18 06:32 AM] jl777c#5810
so RCzphxaf2ZMRLJRZaLdyKVuAfqUANKmUi8 should have gotten the tokens...


[24-Sep-18 06:32 AM] jl777c#5810
where did the claim send them to?


[24-Sep-18 06:32 AM] TonyL#3577
To `RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f` which not belongs to pubkey of any of my 2 nodes


[24-Sep-18 06:33 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenaddress 
{
  "result": "success",
  "AssetsCCaddress": "RGKRjeTBw4LYFotSDLT6RWzMHbhXri6BG6",
  "Assetsmarker": "RFYE2yL3KknWdHK6uNhvWacYsCUtwzjY3u",
  "GatewaysPubkey": "03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40",
  "AssetsCCassets": "RD19dLga2Hi2Qw9JxuTxMPjhscDnpE33dm",
  "myCCaddress": "RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f",
  "myaddress": "RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd"
}
```


[24-Sep-18 06:34 AM] TonyL#3577
Oh no, it's CC address of node which is not claiming


[24-Sep-18 06:34 AM] jl777c#5810
"myCCaddress": "RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f",


[24-Sep-18 06:34 AM] TonyL#3577
Not destination node CC address yup


[24-Sep-18 06:34 AM] jl777c#5810
ok, i seem to have sent the claim to the wrong address


[24-Sep-18 06:34 AM] jl777c#5810
will investigate this, but you can continue testing now you found the tokens


[24-Sep-18 06:35 AM] TonyL#3577
Aha will try to transfer it now and bid/ask


[24-Sep-18 06:35 AM] TonyL#3577
Afraid to do gatewayswithdraw tbh üòÇ


[24-Sep-18 06:36 AM] jl777c#5810
oraclefeed must be running for gatewayswithdraw to work


[24-Sep-18 06:37 AM] jl777c#5810
well, so far there were a bunch of bugs all but one fixed


[24-Sep-18 06:38 AM] jl777c#5810
you just need to tokencovert before doing a withdraw


[24-Sep-18 06:41 AM] TonyL#3577
Noted regards oraclesfeed and tokenconvert as well


[24-Sep-18 06:47 AM] TonyL#3577
Asset tokens successfully transferred


[24-Sep-18 06:51 AM] jl777c#5810
yes now it is a normal asset, basically gatewaysCC is not involved at all


[24-Sep-18 06:51 AM] jl777c#5810
so the only thing left is the withdraw, which should be automatically noticed and processed by the bindtxid signing node


[24-Sep-18 06:55 AM] TonyL#3577
I put these tokens to ask and can't fill it now:
```./komodo-cli -ac_name=ORCL1 tokenfillask 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8 6a12581b549b88772510e7e280b1cf9dbe85e89a2e7a5b36ac551a1e44f41ab2 10000000
filltx not enough utxos
{
  "result": "error",
  "error": "filltx not enough utxos"
}
```


[24-Sep-18 06:58 AM] jl777c#5810
that is nothing to do with gatewaysCC


[24-Sep-18 06:59 AM] TonyL#3577
btw don't know if it's important but on some step looks like it starting to count not in satoshis: ```ssetValidate (t)
vin1 10000000, vout0 10000000, transfer validated 0.10000000 -> 0.10000000 (-1 -1)```


[24-Sep-18 07:00 AM] jl777c#5810
just displays


[24-Sep-18 07:01 AM] TonyL#3577
Should I try to cancel this stucked ask?


[24-Sep-18 07:02 AM] TonyL#3577
I can create other token and compare behaviour for trades with this converted one


[24-Sep-18 07:04 AM] jl777c#5810
yes, good to make sure it behaves as normal


[24-Sep-18 07:04 AM] jl777c#5810
cant think of how it would remember its origins


[24-Sep-18 07:19 AM] TonyL#3577
Created a new token with 100000000 supply - put whole supply to ask, got same error. So clue isn't in that this one is converted. Maybe it's just not possible to sell whole supply in one order. Checking this moment
```{
  "result": "error",
  "error": "filltx not enough utxos"
}```


[24-Sep-18 07:38 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenfillask 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8  3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8 100
{
  "result": "success",
  "hex": "010000000303efc0eb88a3ae2a5abacdd10502f3b4e8f4bdb53a35a30bd8b22b900f8749400300000049483045022100b907ce4a609fe191ac45f31b805c57cd4068cc693ec5445c7508e33d3f76fada022060f65d6df408cc79c33624d1061c4ec92ad5811626334b017caab695d2e7764101ffffffffa82e37285eb87bc401a2afb95f2eb57a431461d1de498f7527c94bb2e1b35238000000007b4c79a276a072a26ba067a565802103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590814062effc253c9326eba1bfe1afbd6903137a8a4f6abcef5e7ef425c4b2f6364000210b54836adf6f71e8762ca359eb86669446b365294d026355e134449174af2fa100af038001e3a10001ffffffff170a3bfff4f8284aa374d7e2a2bc79b06688ec0c642f7e9b2b056e4880f95d31030000004948304502210099c8bad55882debc77b34211072fccf9546ea589d9aa46dd8abdc5aa9998543c022021d50c02cc10349cc658819dc905c73f04bcf90ee212fbb8fe358eba2bb1583b01ffffffff0500407a10f35a0000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0000000000000000302ea22c80208eb0bbd9c4cd4e66c80b3873149532b451a9ef1490301ff6b4d956ce15a287388103120c008203000401cc00000000000000000200ac1027000000000000232103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590ac00000000000000002d6a2be3533852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea800000000000000000000000000"
}
```


[24-Sep-18 07:38 AM] TonyL#3577
```
./komodo-cli -ac_name=ORCL1 sendrawtransaction 010000000303efc0eb88a3ae2a5abacdd10502f3b4e8f4bdb53a35a30bd8b22b900f8749400300000049483045022100b907ce4a609fe191ac45f31b805c57cd4068cc693ec5445c7508e33d3f76fada022060f65d6df408cc79c33624d1061c4ec92ad5811626334b017caab695d2e7764101ffffffffa82e37285eb87bc401a2afb95f2eb57a431461d1de498f7527c94bb2e1b35238000000007b4c79a276a072a26ba067a565802103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590814062effc253c9326eba1bfe1afbd6903137a8a4f6abcef5e7ef425c4b2f6364000210b54836adf6f71e8762ca359eb86669446b365294d026355e134449174af2fa100af038001e3a10001ffffffff170a3bfff4f8284aa374d7e2a2bc79b06688ec0c642f7e9b2b056e4880f95d31030000004948304502210099c8bad55882debc77b34211072fccf9546ea589d9aa46dd8abdc5aa9998543c022021d50c02cc10349cc658819dc905c73f04bcf90ee212fbb8fe358eba2bb1583b01ffffffff0500407a10f35a0000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0000000000000000302ea22c80208eb0bbd9c4cd4e66c80b3873149532b451a9ef1490301ff6b4d956ce15a287388103120c008203000401cc00000000000000000200ac1027000000000000232103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590ac00000000000000002d6a2be3533852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea800000000000000000000000000
error code: -26
error message:
64: scriptpubkey
```


[24-Sep-18 07:38 AM] TonyL#3577
Ask for a not whole supply can not fill as well


[24-Sep-18 07:39 AM] TonyL#3577
Oh nevermind I executed not correct transaction


[24-Sep-18 07:40 AM] TonyL#3577
For 100 tokens it's worked as expected. So looks like `tokefillask` not works when  you trying to sell whole token supply in one order. But possible to cancel this order. Not connected to gatewaysCC at all


[24-Sep-18 07:45 AM] jl777c#5810
pushed fix for gatewaysclaim


[24-Sep-18 07:45 AM] jl777c#5810
it used to not check the claimpubkey


[24-Sep-18 07:46 AM] jl777c#5810
now it makes sure the claimpubkey matches your pubkey, so that should prevent what happened


[24-Sep-18 07:46 AM] jl777c#5810
strange thing is that you got an error on the node it was supposed to go to?


[24-Sep-18 08:07 AM] TonyL#3577
Yes I've got an error on node which supposed to claim


[24-Sep-18 08:07 AM] TonyL#3577
But no error on "illegal" node


[24-Sep-18 08:07 AM] TonyL#3577
"illegal" in spot of rights to claim depo


[24-Sep-18 08:11 AM] jl777c#5810
next time dont broadcast the claim


[24-Sep-18 08:11 AM] jl777c#5810
I need to reproduce it and fix it


[24-Sep-18 08:23 AM] TonyL#3577
Ok, so in test checklist:
- test of gatewayswithdraw
- re-test of gatewaysclaim process with latest fix (have to not broadcast tx if get same error for valid for claim node )


[24-Sep-18 08:28 AM] jl777c#5810
yes and it should fail on all nodes that arent for the claimpubkey

{Reactions}
üëå 

[24-Sep-18 09:39 PM] TonyL#3577
@jl777c just wonder how handling gatewayswithdraw cases in spot of txfee? If lets say initially were deposited 100 KMD but gatewayswithdraw using a lot of times by secondary traders. Is transaction fee spending from gateway balance? If yes on some moment might be a situation when gateways coins balance significantly not match issued tokens amount.


[24-Sep-18 09:45 PM] TonyL#3577
After secondary trading have 100 KMD tokens:
```./komodo-cli -ac_name=ORCL1 tokenbalance 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8
{
  "result": "success",
  "CCaddress": "RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f",
  "tokenid": "3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8",
  "balance": 100
}
```


[24-Sep-18 09:45 PM] TonyL#3577
Converted it:
```./komodo-cli -ac_name=ORCL1 tokenconvert 241 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 100
{
  "result": "success",
  "hex": "0100000002170a3bfff4f8284aa374d7e2a2bc79b06688ec0c642f7e9b2b056e4880f95d310300000049483045022100b1063ba3a27eceb83ee8a08aeb4d8e926f071f1ef67a0a18642126c80471f0f1022079c7dc51f6becc3e6dce38564b08d72615cfb5cb759e32e967703681c24cd63701ffffffff8e124f3a8d0665adc800aac15e38ee59b546856f69af9b86e744363131b43ed6010000007b4c79a276a072a26ba067a565802103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff259081408d6552c07b7ca92d3e6d9a2316fab0dc7a457fc4b8de98aefce7ede86c90f00f1971ae74f4e0818f0e1b2710983599f91372530d1f2389a256b88ad4907e6352a100af038001e3a10001ffffffff030000000000000000302ea22c80208eb0bbd9c4cd4e66c80b3873149532b451a9ef1490301ff6b4d956ce15a287388103120c008203000401cc6400000000000000302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc0000000000000000246a22e3743852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea800000000"
}
```


[24-Sep-18 09:47 PM] TonyL#3577
No luck with withdraw (tried different number pow), I think I definitely doing something wrong but don't have any printouts 
```./komodo-cli -ac_name=ORCL1 gatewayswithdraw 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55 KMD 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 0.0000000000000001
{
  "result": "error",
  "error": "couldnt gatewayswithdraw"
}
```


[24-Sep-18 09:50 PM] TonyL#3577
What is the logic for `tokencovert` execution in case of `gatewayswithdraw`? Is anybody who owns some token allowed to convert some/all tokens which belongs to him or tokens creator have to convert whole supply before each withdraw?


[25-Sep-18 12:21 AM] jl777c#5810
tokens should never be used up for txfees, the txfees come from whoever is doing the transactions


[25-Sep-18 12:21 AM] jl777c#5810
0.0000000000000001 that is a very suspicious number


[25-Sep-18 12:22 AM] jl777c#5810
it would end up as 0, as nothing has more precision than 0.00000001 and that is illegal param


[25-Sep-18 12:24 AM] TonyL#3577
Oh yes, it should be like this I guess: 100 * 10^(-8)
```./komodo-cli -ac_name=ORCL1 gatewayswithdraw 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55 KMD 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 0.000001
{
  "result": "error",
  "error": "couldnt gatewayswithdraw"
}
```


[25-Sep-18 12:38 AM] jl777c#5810
let me look at the code, this is something you should do also. rpcwallet.cpp gatewayswithdraw


[25-Sep-18 12:38 AM] jl777c#5810
yes, the 0.000001 is matching the 100 that was converted


[25-Sep-18 12:39 AM] jl777c#5810
you are doing the withdraw from the node with -pubkey= 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 ?


[25-Sep-18 12:39 AM] jl777c#5810
I get printouts:
check RGT2bWyMAYGr1teAbzYXSvGhFqkuVqcXQ3 for gateway inputs
cant find enough inputs or mismatched total


[25-Sep-18 12:40 AM] jl777c#5810
you need to find the console for that instance! without console prints it is like being blind


[25-Sep-18 12:40 AM] jl777c#5810
check the balance of RGT2bWyMAYGr1teAbzYXSvGhFqkuVqcXQ3 (use addressbalance)


[25-Sep-18 12:41 AM] TonyL#3577
`-pubkey=03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590` for node on which I'm calling `gatewyswithdraw`


[25-Sep-18 12:42 AM] jl777c#5810
but you did: ./komodo-cli -ac_name=ORCL1 tokenconvert 241 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 100


[25-Sep-18 12:42 AM] TonyL#3577
I want to withdraw to other pubkey


[25-Sep-18 12:42 AM] jl777c#5810
that converts the tokens and sends it to pubkey 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40


[25-Sep-18 12:42 AM] TonyL#3577
Ohh


[25-Sep-18 12:42 AM] jl777c#5810
so now the assets are in that pubkey


[25-Sep-18 12:42 AM] jl777c#5810
do a tokenbalance to make sure


[25-Sep-18 12:42 AM] jl777c#5810
sorry addressbalance


[25-Sep-18 12:43 AM] TonyL#3577
It's a  "GatewaysPubkey"


[25-Sep-18 12:43 AM] jl777c#5810
if you dont own the tokens you cant withdraw them, for obvious reasons


[25-Sep-18 12:43 AM] TonyL#3577
Shouldn't I convert to GatewaysPubkey before performing the withdrawal?


[25-Sep-18 12:44 AM] jl777c#5810
if you dont mind random strangers on the internet racing to do the withdraw for those tokens


[25-Sep-18 12:44 AM] jl777c#5810
it would be a cool game


[25-Sep-18 12:44 AM] jl777c#5810
but if you want to keep your tokens, it is best to convert to your own pubkey and then withdraw from that pubkey


[25-Sep-18 12:45 AM] jl777c#5810
this is an extra step that was added due to the need for enforcement of gateways validation rules


[25-Sep-18 12:45 AM] TonyL#3577
Got the concept now. Bye bye 100 tokens


[25-Sep-18 12:45 AM] jl777c#5810
well i think they are still there


[25-Sep-18 12:46 AM] jl777c#5810
you could start an instance with -pubkey=<gatewayspubkey> but that probably gets into the territory of breaking things and is for after things are working stable, ie. the trying to break it phase


[25-Sep-18 12:46 AM] TonyL#3577
It's worth to pay 100 tokens to not get this scary place atm


[25-Sep-18 12:47 AM] TonyL#3577
Let me try to withdraw with correct convert


[25-Sep-18 01:03 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenconvert 241 3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 100```

```./komodo-cli -ac_name=ORCL1 gatewayswithdraw 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55 KMD 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 0.000001
check RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar for gateway inputs
cant find enough inputs or mismatched total
{
  "result": "error",
  "error": "couldnt gatewayswithdraw"
}
```
Should it be an address which belongs to recipient pubkey? I checked and it's not belongs to both sending and receiving node pubkey


[25-Sep-18 01:07 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 getreceivedbyaddress RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar
0
```


[25-Sep-18 01:16 AM] jl777c#5810
what address did the tokenconvert send the assets to?


[25-Sep-18 01:17 AM] jl777c#5810
txid will help me look too


[25-Sep-18 01:17 AM] TonyL#3577
`d3e37e2ba83cfc0191189ba3316079157c513845d01e9c30253c59ec10e7921f`


[25-Sep-18 01:18 AM] jl777c#5810
RBrAQDMJrWf6b7dqsNg8CmHL6ePTPkxzs8


[25-Sep-18 01:18 AM] jl777c#5810
investigating why the address is different


[25-Sep-18 01:18 AM] jl777c#5810
for now maybe you can start making automated stuff to help make this a more sane process


[25-Sep-18 01:18 AM] jl777c#5810
from deposit


[25-Sep-18 01:19 AM] jl777c#5810
and you are doing withdraw from -pubkey= 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 node?


[25-Sep-18 01:19 AM] TonyL#3577
Yes, sounds like a very good idea. Anyway have to doublecheck it


[25-Sep-18 01:20 AM] TonyL#3577
Nope, from this one `-pubkey=03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590`


[25-Sep-18 01:20 AM] TonyL#3577
Oh I'm able to convert


[25-Sep-18 01:20 AM] TonyL#3577
But not able to withdraw I guess


[25-Sep-18 01:20 AM] TonyL#3577
Because now it's not on my pubkey


[25-Sep-18 01:20 AM] jl777c#5810
but you converted to 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647


[25-Sep-18 01:20 AM] jl777c#5810
now 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 owns them


[25-Sep-18 01:20 AM] jl777c#5810
it is a convert and transfer


[25-Sep-18 01:20 AM] TonyL#3577
Yes I want to allow let's say my customer to withdraw


[25-Sep-18 01:21 AM] TonyL#3577
Like a SPV model


[25-Sep-18 01:21 AM] TonyL#3577
So now I have to claim withdraw from `pubkey= 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647`


[25-Sep-18 01:21 AM] jl777c#5810
not sure where these customers came from, for now you are converting to different pubkey and so cant withdraw


[25-Sep-18 01:21 AM] jl777c#5810
only the one that owns the coins can withdraw


[25-Sep-18 01:21 AM] jl777c#5810
tokenconvert changes who owns it


[25-Sep-18 01:21 AM] jl777c#5810
unless you send to your own pubkey


[25-Sep-18 01:22 AM] TonyL#3577
So in theory I should able to gatewayswithdraw these 100 tokens now from node with pubkey= 030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647 ?


[25-Sep-18 01:22 AM] jl777c#5810
yes


[25-Sep-18 01:23 AM] TonyL#3577
Ok, let me rebuild komodod on these node from latest and test (can take a while since this node is Macbook air :trollface: )


[25-Sep-18 01:24 AM] jl777c#5810
or can just convert another 100 tokens


[25-Sep-18 01:24 AM] TonyL#3577
All fun killed :/


[25-Sep-18 01:25 AM] jl777c#5810
you can recover the KMD as it is controlled by single address. just for testing, so dont do KMD tx from that same pubkey that is the gateway deposit address


[25-Sep-18 01:28 AM] jl777c#5810
I think on the automation side, it would be possible to make the gatewaysdeposit and gatewaysclaim be able to be done by anybody as it is hardcoded into the cointxid where the funds must end up. so the users would only have to do the sendmany and then automatically the tokens appear. I will look into adding this automated deposit processing into oraclefeed. however we need to make sure there is a way to manually process any deposits that are missed by oraclefeed


[25-Sep-18 01:29 AM] jl777c#5810
ultimately it should be user makes cointxid using sendmany, tokens appear. for withdraw a similar process of doing a redeem of token and the rest should be automatically processed now


[25-Sep-18 01:31 AM] TonyL#3577
Sounds clear - I'll just ask params for sendmany with explanation. Then ask let's say how many they want to withdraw and convert it, hardcode the needed pubkey and claim gatewaywithdraw with some notification if it's not evaluated automatically by node in some period of time


[25-Sep-18 01:32 AM] TonyL#3577
All these `gettxoutproof` and `getrawtransaction` will grab automatically so should be quite easy to operate if compare with manual playing


[25-Sep-18 01:33 AM] TonyL#3577
Can log everything also to separate files


[25-Sep-18 01:33 AM] jl777c#5810
yes, i guess that is the next step of automation. really it is best to be done on the user node


[25-Sep-18 01:34 AM] jl777c#5810
tl:dr no known bugs at the moment, withdraw needs to be tested

{Reactions}
üëå 

[25-Sep-18 01:37 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewayswithdraw 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55 KMD 0.000001
check RBrAQDMJrWf6b7dqsNg8CmHL6ePTPkxzs8 for gateway inputs
cant find enough inputs or mismatched total
{
  "result": "error",
  "error": "couldnt gatewayswithdraw"
}
```
Same on node with `pubkey=030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647` but looking for a different address this time


[25-Sep-18 01:39 AM] TonyL#3577
It's same try with tokens converted on different node for node with `pubkey=030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647`
With txid of tokenconvert d3e37e2ba83cfc0191189ba3316079157c513845d01e9c30253c59ec10e7921f


[25-Sep-18 01:40 AM] jl777c#5810
RBrAQDMJrWf6b7dqsNg8CmHL6ePTPkxzs8 is the correct address


[25-Sep-18 01:40 AM] jl777c#5810
what does addressbalance for RBrAQDMJrWf6b7dqsNg8CmHL6ePTPkxzs8 return?


[25-Sep-18 01:41 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 addressbalance RBrAQDMJrWf6b7dqsNg8CmHL6ePTPkxzs8
error code: -32601
error message:
Method not found```


[25-Sep-18 01:41 AM] TonyL#3577
Is this call not works for ACs?


[25-Sep-18 01:41 AM] jl777c#5810
getaddressbalance

{Reactions}
üòä 

[25-Sep-18 01:43 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 getaddressbalance '{"addresses": ["RBrAQDMJrWf6b7dqsNg8CmHL6ePTPkxzs8"]}'
{
  "balance": 0,
  "received": 0
}
```


[25-Sep-18 01:46 AM] jl777c#5810
did d3e37e2ba83cfc0191189ba3316079157c513845d01e9c30253c59ec10e7921f confirm?


[25-Sep-18 01:46 AM] jl777c#5810
i guess not yet


[25-Sep-18 01:46 AM] jl777c#5810
which tokenconvert to RBrAQDMJrWf6b7dqsNg8CmHL6ePTPkxzs8 has confirmed?


[25-Sep-18 01:49 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 getrawmempool
[
]
```


[25-Sep-18 01:49 AM] jl777c#5810
maybe broadcast it again, mining node maybe didnt see it


[25-Sep-18 01:52 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 getrawmempool
[
  "d3e37e2ba83cfc0191189ba3316079157c513845d01e9c30253c59ec10e7921f"
]
``` in mempool now


[25-Sep-18 01:53 AM] TonyL#3577
First withdrawal broadcasted:
```return true without gateways validation
47132762ff6a679c2c9d3310dc4bf323b1f614309e5b468eaa207ba168761888
```


[25-Sep-18 01:53 AM] TonyL#3577
But oraclefeed wasn't up ouch


[25-Sep-18 01:54 AM] TonyL#3577
Nice case for manual confirmation so


[25-Sep-18 01:56 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewayspending 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55 KMD
{
  "coin": "KMD",
  "pending": [
    {
      "txid": "47132762ff6a679c2c9d3310dc4bf323b1f614309e5b468eaa207ba168761888",
      "txidaddr": "RCC5dA5a4ZZV6kQgHKprxcYcoRgBodPsjo",
      "withdrawaddr": "RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv",
      "amount": "0.00000100",
      "depositaddr": "RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd",
      "signeraddr": "RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd"
    }
  ],
  "queueflag": 1
}
```


[25-Sep-18 01:56 AM] TonyL#3577
gatewayspending worked as expected


[25-Sep-18 01:58 AM] TonyL#3577
`withdrawaddr` bind is correct https://kmdexplorer.io/address/RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv


[25-Sep-18 01:59 AM] TonyL#3577
So should it proceed now from pending if I enable `oraclefeed` ?


[25-Sep-18 02:06 AM] jl777c#5810
yes


[25-Sep-18 02:06 AM] TonyL#3577
```Powered by CoinDesk (https://www.coindesk.com/price/) 6409.98000000
coin.KMD vs KMD
loadfile null size.(/tmp/oraclefeed.importaddress)
set refcoin RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd <- KMD [./komodo-cli] M.1 of N.1
broadcast ORCL1 txid.(96604224e4c4c40e90338fe4782d3b2ae27da3f7345b3be88c6ab365965e7814)
KMD ht.1024899 <- 83a30f009a3d2382eb7c538d48c7f77ff8cfc2143f921a1ec0e981c24f2bcc7eefe9b40a0d6bac98753f8aad48ed4d4acf7400982fba060d595e211feb77096791c85336
sendtoaddress RCC5dA5a4ZZV6kQgHKprxcYcoRgBodPsjo 0.00010000 txid.(401c83f369c1cdebd1b84c9799b1f309fa6254aab5de91ab424c13405248d3c3)
error code: -6
error message:
Insufficient funds
```
Is it taking funds from node wallet instead of gatewayswallet address?


[25-Sep-18 02:06 AM] jl777c#5810
oraclefeed needs to be running with a wallet having the gateway deposit address


[25-Sep-18 02:07 AM] jl777c#5810
RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd


[25-Sep-18 02:08 AM] TonyL#3577
Yes it's gateways deposit address, have 0.2 KMD on it:
```
./komodo-cli -ac_name=ORCL1 gatewaysinfo 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590",
  "coin": "KMD",
  "oracletxid": "1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd",
  "tokenid": "3852b3e1b24bc927758f49ded16114437ab52e5fb9afa201c47bb85e28372ea8",
  "totalsupply": "1000000.00000000",
  "remaining": "999999.90010200",
  "issued": "0.09989800"
}```


[25-Sep-18 02:11 AM] TonyL#3577
```    if ( (retjson= get_komodocli(refcoin,&retstr,acname,"gatewaysmarkdone",bits256_str(str,withtxid),coin,bits256_str(str2,cointxid),"")) != 0 )
    {
        komodobroadcast(refcoin,acname,retjson);
        free_json(retjson);
    }```
Isn't it should broadcast in komodo main chain instead of AC ? Just wondering.


[25-Sep-18 02:13 AM] TonyL#3577
Oh there is ` update_gatewayspending` also sorry


[25-Sep-18 02:17 AM] jl777c#5810
why did 401c83f369c1cdebd1b84c9799b1f309fa6254aab5de91ab424c13405248d3c3 get insufficient funds?


[25-Sep-18 02:20 AM] TonyL#3577
Should node have some KMD ?


[25-Sep-18 02:20 AM] TonyL#3577
I guess it's may be the reason


[25-Sep-18 02:20 AM] jl777c#5810
?\


[25-Sep-18 02:20 AM] jl777c#5810
?


[25-Sep-18 02:20 AM] jl777c#5810
RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd needs to have funds


[25-Sep-18 02:20 AM] jl777c#5810
wallet needs to be able to spend those funds


[25-Sep-18 02:20 AM] jl777c#5810
how else could it work?


[25-Sep-18 02:21 AM] TonyL#3577
I thought same, just wondering now


[25-Sep-18 02:21 AM] TonyL#3577
RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd have 0.2 KMD


[25-Sep-18 02:22 AM] jl777c#5810
validateaddress on that node?


[25-Sep-18 02:23 AM] jl777c#5810
the node running oraclefeed


[25-Sep-18 02:23 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 validateaddress RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd
{
  "isvalid": true,
  "address": "RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd",
  "scriptPubKey": "76a91456297e9af2eeafc349acb2056e3115419eb4c64e88ac",
  "segid": 43,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590",
  "iscompressed": true,
  "account": ""
```


[25-Sep-18 02:23 AM] jl777c#5810
listunspent


[25-Sep-18 02:31 AM] TonyL#3577
@jl777c there are 3476 entries


[25-Sep-18 02:31 AM] TonyL#3577
Are we looking for something specific?


[25-Sep-18 02:57 AM] jl777c#5810
RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd


[25-Sep-18 02:58 AM] TonyL#3577
`./komodo-cli -ac_name=ORCL1 listunspent 1 9999999 "[\"RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd\"]"` yes I  called for this address


[25-Sep-18 02:58 AM] TonyL#3577
Got 3000+ entries


[25-Sep-18 03:07 AM] jl777c#5810
how can there be 3000+ entries?


[25-Sep-18 03:08 AM] jl777c#5810
what address is that? it should have been a fresh address and have only the deposits made!


[25-Sep-18 03:08 AM] jl777c#5810
otherwise funds are all mixed together and makes a big mess


[25-Sep-18 03:12 AM] TonyL#3577
It's an GatewayDeposit address - not used for anything else

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/494088805842812938/listunspent.txt


[25-Sep-18 03:13 AM] jl777c#5810
you were mining to it?


[25-Sep-18 03:13 AM] TonyL#3577
Yes mining was enabled on this node for some time I think


[25-Sep-18 03:14 AM] jl777c#5810
well, it is not any good idea to do that, but it should still work


[25-Sep-18 03:14 AM] jl777c#5810
what happens when you run the oraclefeed now?


[25-Sep-18 03:17 AM] TonyL#3577
```BTC/USD 6398.9525
Powered by CoinDesk (https://www.coindesk.com/price/) 6398.95250000
coin.KMD vs KMD
loadfile null size.(/tmp/oraclefeed.importaddress)
set refcoin RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd <- KMD [./komodo-cli] M.1 of N.1``` 
Now it's only output I get from oraclefeed


[25-Sep-18 03:18 AM] TonyL#3577
Execution just ends after it


[25-Sep-18 03:19 AM] jl777c#5810
it crashes?


[25-Sep-18 03:19 AM] jl777c#5810
goes back to commandline?


[25-Sep-18 03:19 AM] TonyL#3577
Just back to commandline


[25-Sep-18 03:20 AM] jl777c#5810
I am assuming the RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd doesnt have a lot of actual money in it


[25-Sep-18 03:20 AM] jl777c#5810
if so, DM me the passphrase and I will troubleshoot


[25-Sep-18 03:20 AM] jl777c#5810
you can continue on the automation side while I isolate the proble,


[25-Sep-18 03:20 AM] TonyL#3577
Ok, thanks and sorry for stucking üòÉ


[25-Sep-18 03:21 AM] jl777c#5810
likely it is a bug in oraclefeed


[25-Sep-18 03:21 AM] jl777c#5810
need the exact way you start oraclefeed


[25-Sep-18 03:22 AM] TonyL#3577
```./oraclefeed ORCL1 1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 Ihh 1023f2c31f8d5e06854cd8c3ef103679b8d2af2c4ba14ea16646dd2a10332c55````


[25-Sep-18 03:23 AM] TonyL#3577
Before automation have to check also if tokens crediting to correct pubkey now after `gatewaysclaim`


[25-Sep-18 03:24 AM] jl777c#5810
ok, plz stop it on your node


[25-Sep-18 03:24 AM] TonyL#3577
terminated `oraclefeed`


[25-Sep-18 04:31 AM] jl777c#5810
on my node it created: https://kmdexplorer.ru/tx/7562ae27c01b98609f6bc7e6fdd586a0f3c8f2ea3955bd30aab89ec1c8453dc4


[25-Sep-18 04:37 AM] jl777c#5810
it did get an error trying to spend the marker vout, forgot to importprivkey for the gateway address


[25-Sep-18 04:45 AM] jl777c#5810
@TonyL pushed fix to gatewaysmarkdone, also you need to import the wif for the gateways normal address in the oraclefeed node. it is also needing more funds as oracledata is not finding any funds, so do an oraclessubscribe


[25-Sep-18 04:45 AM] jl777c#5810
from what I can tell, the withdraw worked


[25-Sep-18 04:45 AM] jl777c#5810
it automatically detected the withdraw


[25-Sep-18 04:45 AM] jl777c#5810
processed it


[25-Sep-18 04:45 AM] jl777c#5810
marked it as done


[25-Sep-18 06:15 AM] Mylo#8306
```
Business case how to:
 1 - Create your blockchain using Komodo‚Äôs Assetchain
 2 - Create tokens for on-chain representation of real world assets
 3 - Convert tokens to gateway enforcement (so they can be redeemed when ‚Äúcashed out‚Äù)
 4 - Create an oracle (used to maintain the price feed of the real world asset onto the blockchain)
 5 - Bind the token and gateway to the oracle so prices reflect accurate data on-chain when fed updates
 6 - Use the sample ‚ÄúOracle Feed‚Äù dApp to feed the accurate pricing from the real world to on-chain data
 7 - Use the gateway to redeem (cashout) the token value when customer requests
```
@jl777c @TonyL üëÜ does this simplify the "Token, Gateway & Oracle" solution for tradeable and cash-out-able  tokens.  Whether they are other crypto, real world assets etc.   i used tony's pad notes.


[25-Sep-18 06:19 AM] jl777c#5810
gateways CC requires a bitcoin protocol coin


[25-Sep-18 06:20 AM] jl777c#5810
but given a manual gateway, the same effect can be achieved. There can be a chicken gateway, where tokens are issued when chickens are deposited. and chickens are delivered when the tokens are delivered


[25-Sep-18 06:24 AM] Mylo#8306
cool i was hoping to stretch it to chickens or chicken-representatives, thanks!


[25-Sep-18 07:34 AM] TonyL#3577
I've bought a Raspberri PI  - now thinking which "IOT like" stuff better to connect to make some dope demonstration for oracles - can make some custom oraclesfeed which will just grab data from my device/file. But all my ideas so far got not much practical sense. @Mylo If you have some ideas on this matter - I may try to implement). I think I may start from temperature to chain or try to implement some cases with data transfer/proofing from IP cameras


[25-Sep-18 07:37 AM] TonyL#3577
@jl777c  great that it's work! Looks like it's possible now to make all or almost all flow if be gentle. Just came home - will re-test deposit now and proceed to automation


[25-Sep-18 09:46 AM] Mylo#8306
With temperature, there‚Äôs your telemetry info for supply chain.
GPS coordinates for fishing cross reference data.  Motion sensor for fallen over alarm for healthcare or fence/perimeter for prison.
Maybe gauge for electricity supply/use is better and you can make your own crypto electric bills which would work well for an off-grid economy using PoS.


[25-Sep-18 09:48 AM] TonyL#3577
@Mylo Great! Had same idea with motion sensor - wanna call it "proof of penetration", may be usable in pornography as well üòÇ


[25-Sep-18 09:48 AM] Mylo#8306
But for your PC (not Pi) use `dmidecode` and get fan RPM and oracle-ize it !


[25-Sep-18 09:48 AM] Mylo#8306
New consensus üòÉ


[25-Sep-18 09:49 AM] TonyL#3577
Or/also network bandwidth  ü§î


[25-Sep-18 09:52 AM] Mylo#8306
Ok oracle ideas have worn off.  Need a new CC


[25-Sep-18 09:52 AM] Mylo#8306
üòÉ


[25-Sep-18 09:54 AM] TonyL#3577
Each new CC is more interesting than previous one. I had a blockgasm after dice, but then boom oracle and then booom gateways

{Reactions}
üëÜ (3) üòÖ (2) 

[25-Sep-18 09:55 AM] jl777c#5810
my next one is prices CC, decentralized bitmex using gateway CC tokens

{Reactions}
üíØ (3) üòÆ 

[25-Sep-18 09:55 AM] jl777c#5810
this will allow any -ac_cc chain to do real KMD betting


[25-Sep-18 10:27 AM] Mylo#8306
shame there's not a "holy shishkebab!" emoji.


[25-Sep-18 10:32 AM] jl777c#5810
also we figured out how to do channels CC with gateways assets


[25-Sep-18 10:32 AM] jl777c#5810
so BTC token mempool tx secured by dPoW!


[25-Sep-18 03:11 PM] Mylo#8306
Oh gosh...that‚Äôs a non doublespendable instant payment channel for any bitcoin protocol coin (or anything gateway-able, including chickens) and it is arguably ‚Äústreamable‚Äù using existing infrastructure like explorers.


[25-Sep-18 03:14 PM] jl777c#5810
yes


[25-Sep-18 03:14 PM] jl777c#5810
not bad for a couple months work on CC


[25-Sep-18 11:04 PM] TonyL#3577
@jl777c is it ok that for a new gateway (but created from the same pubkey) deposit address is the same - means it's const on AC for pubkey?

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/494388656635904000/unknown.png


[25-Sep-18 11:22 PM] TonyL#3577
I've enabled `oraclefeed` for a brandnew oracle and bindtxid (on node with same pubkey) but it's still trying to proceed old withdraw for other oracle/bindtxid which was succesfully proceed yesterday


[25-Sep-18 11:22 PM] TonyL#3577
```./oraclefeed ORCL1 0b36a2a9d4298993f345de5bcce3f6ae5c81cac5eca6993a6536893b3ceda0e3 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 Ihh aa7772268babec6b65555b242a6b0e3eadbfd641b5ef9120a9de446e4e3db2c1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   673    0   673    0     0  23206      0 --:--:-- --:--:-- --:--:-- 23206
BTC/USD 6435.7975
Powered by CoinDesk (https://www.coindesk.com/price/) 6435.79750000
coin.KMD vs KMD
loadfile null size.(/tmp/oraclefeed.importaddress)
set refcoin RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd <- KMD [./komodo-cli] M.1 of N.1
broadcast ORCL1 txid.(0aee6f71a654861c2ec15fead7620c9caeb0b5dfe717a19d4915d15ea9f1982d)
KMD ht.1026173 <- 7da80f00577cad144a306d46abdab45b5d0d67204daed37f5f4438ce9421fcf7d4c9d802b5694033ca21e2928f1b1949c1c4cc9da48c8253a3fb637e4822d8c939e6bd76
already did withdraw KMD RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv 0.00000100 processed
spend ORCL1 47132762ff6a679c2c9d3310dc4bf323b1f614309e5b468eaa207ba168761888/v2 as marker
error code: -25
error message:
```


[25-Sep-18 11:46 PM] TonyL#3577
```end of loop
cointxid.fbff4f068786fd124bb5e5e36462573811dbc1123f70350ce124693032dfe00b m.0 of n.1
couldnt find merkleroot for ht.1026189 KMD oracle.0b36a2a9d4298993f345de5bcce3f6ae5c81cac5eca6993a6536893b3ceda0e3 m.0 vs n.1```

Also - what is the best solution in situation like this? (can't gatewaysdeposit because no height in oracle) Have I revoke deposit somehow or add merkleroot data manually? 

I just wonder that might be very useful to add some argument/parameter to `oraclefeed` to get merkleroot for "desired" height. It's quite easy to miss one height let's say because of network instability which can cause some missed deposits


[25-Sep-18 11:53 PM] TonyL#3577
By some reason have a gap right on needed place, guess restarted the tool this moment :/

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/494401037843562497/unknown.png


[26-Sep-18 01:05 AM] TonyL#3577
Hackerman next level coming

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/494419169165705227/unknown.png

{Reactions}
üòÇ (2) üò≤ (2) shexy (3) üí™ 

[26-Sep-18 01:06 AM] jl777c#5810
oraclefeed should be kept running


[26-Sep-18 01:06 AM] jl777c#5810
I guess it is good to be able to specify to it a specific height to add to oracledata

{Reactions}
üëç 

[26-Sep-18 01:21 AM] TonyL#3577
@SHossain  I think I'll combine this how-to guide draft (will finish gateway operating related parts on fly) http://pad.supernet.org/cc_gateways_guide with this automation tool - will implement as printout hints  / man for each part


[26-Sep-18 01:31 AM] SHossain#0007
Sure. Thanks.


[26-Sep-18 01:32 AM] TonyL#3577
http://coingeek.com/bitcoin-bch-secured-file-storage-available-through-bitcoin-files-protocol/ while we have oracles ...

{Embed}
http://coingeek.com/bitcoin-bch-secured-file-storage-available-through-bitcoin-files-protocol
Bitcoin BCH secured file storage available through Bitcoin Files P...
A new feature for the Bitcoin BCH network has been added this past weekend, continuing the development of the world‚Äôs leading retail-driven cryptocurrency.
https://images-ext-1.discordapp.net/external/InkMZCJjaYrDLT1U9DPUoL3K-fjHSbDJZ0OlPjRYrdE/https/coingeek.com/app/uploads/2018/09/bitcoin-bch-secured-file-storage-available-bitcoin-files-protocol.jpg


[26-Sep-18 01:39 AM] Mylo#8306
hey @TonyL you want another ridiculous locking utxo product to make?  i'll give you an idea.   first one is free.... an IDE where each character in a source file can be locked, so the escaped backslash \ in a curl script can't be deleted.  it will save devops engineers loads of cumulative hours worldwide.


[26-Sep-18 01:40 AM] Mylo#8306
then we port it to DNA molecules.


[26-Sep-18 01:40 AM] TonyL#3577
Heey @Mylo I'm in love with DevOps culture but not sure if my coding skills are enough for IDE making on this stage üòÇ


[26-Sep-18 01:42 AM] TonyL#3577
Like a symbol locking as an `oraclesdata` and `batontxid` encoding as some service data and then have to get `oraclesamples` as a proof for this symbol on execution?


[26-Sep-18 01:44 AM] TonyL#3577
Proof of source link consensus ü§î Or just "proof of source code"


[26-Sep-18 01:51 AM] Mylo#8306
proof of vim.  yeah i don't mind reading ridiculous implementation potential.   the bch files and 5kB is interesting and ridiculous considering kmd has 8kB to offer to any AC.  

so are there any docs on `oraclesdata` `batontxid` and `oraclesamples`?


[26-Sep-18 01:56 AM] jl777c#5810
cryptoconditions.info has a section on oracles

{Reactions}
üôè (2) üëç üòé 

[26-Sep-18 02:07 AM] Mylo#8306
it's nicer to read in that format.  i already wrote about batontx, just not familiar the naming .... 1st section https://komodoplatform.com/tech-tuesday-update/

{Reactions}
üî• 

[26-Sep-18 02:07 AM] Mylo#8306
have to do a monthly recap in the community site methinks


[26-Sep-18 02:22 AM] jl777c#5810
just ask any questions if unclear


[27-Sep-18 03:40 AM] sœÜldat#8733
The ARK team has already developed a Smartbridge for BTC, LTC and ETH https://marketplace.arkaces.com/ https://github.com/ark-aces, (v2 in 2 months) maybe they can use CC to implement 2 Smartbridge (KMD-ARK then ARK-ETH) to create a CC soldity interpreter. 
The problem is that ARK does not have UTXO, so they have to adapt the logic by making a Hash timelock contract or a sub-chain UTXO. 
What do you think of that ?


[27-Sep-18 04:00 AM] jl777c#5810
sure, why not!


[27-Sep-18 04:18 AM] sœÜldat#8733
Okay, so you think it's achievable


[27-Sep-18 07:29 AM] Buddz1993  HYPEBEARS FAN üêª‚ùÑ#5380
then lets set a meet up , I also think that Ark is extremely a good project overall if thats possible why not do it?


[27-Sep-18 07:55 AM] TonyL#3577
First 7 menu items seems working. So if follow guide now possible to setup gateway (but not make transactions yet). All created stuff (oracles, tokens, gateways) it store in separate files and printout as lists as kindly reminder where needed. 

Need few more days to make setup more smooth and arrange gw transactions + make this stuff crash less than 1 time per 5 calls...

Also in further plans is kinda monitoring tool for gateway node operator where he can see pending/successful transactions, health status of `oraclefeed` instances and lists of oraclized/missed heights

https://github.com/tonymorony/kmd_cc_qa/blob/master/gateways_cc_cli.py
http://pad.supernet.org/cc_gateways_guide

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/494884887711449098/unknown.png

{Embed}
https://github.com/tonymorony/kmd_cc_qa/blob/master/gateways_cc_cli.py
tonymorony/kmd_cc_qa
CLI Tools for Komodo CC. Contribute to tonymorony/kmd_cc_qa development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Reactions}
üëçüèΩ (7) üòÉ (6) rum (4) Komodo (6) 

[27-Sep-18 07:57 AM] jl777c#5810
our first GUI!!

{Reactions}
Komodo (5) 

[27-Sep-18 07:58 AM] TonyL#3577
Disclaimer: I have only few weeks experience with Python and programs making so code may shock you üòÇ


[27-Sep-18 07:59 AM] SHossain#0007
nice job @TonyL


[27-Sep-18 07:59 AM] TonyL#3577
Thanks @SHossain ! Most important part (transactions) only have to make


[27-Sep-18 08:00 AM] Mihailo#5902
We should create CLI for all CCs, looks great üëç


[27-Sep-18 08:01 AM] jl777c#5810
yes


[27-Sep-18 08:01 AM] TonyL#3577
@Mihailo Thanks! I have some scripts in same repo (for tokensCC and oraclesCC) it's possible to make it with same menus and additional functionality and/or combine as one super mega CLI tool

{Reactions}
üëå 

[27-Sep-18 08:05 AM] grewalsatinder#9653
We have a CC TUI !!! :realpirate: :rum: :abusedsmily:


[27-Sep-18 08:05 AM] grewalsatinder#9653
looks good in screen shot @TonyL üëè


[27-Sep-18 08:06 AM] grewalsatinder#9653
yes, make it a mega TUI üòâ


[27-Sep-18 08:07 AM] grewalsatinder#9653
beautify our terminals üòÑ


[27-Sep-18 08:07 AM] TonyL#3577
Thanks @grewalsatinder ! 90s are back üòÉ Reminding me these times when played first Prince of Persia

{Reactions}
realpirate (2) abusedsmily 

[27-Sep-18 08:08 AM] grewalsatinder#9653
win95 days.... yes


[27-Sep-18 08:08 AM] SHossain#0007
i actually read `Pirates of Persia` first üòÑ

{Reactions}
üòÇ (2) pirate realpirate abusedsmily 

[27-Sep-18 08:08 AM] grewalsatinder#9653
@SHossain is absolutely like this now:


[27-Sep-18 08:08 AM] grewalsatinder#9653
:abusedsmily:


[27-Sep-18 08:08 AM] TonyL#3577
@grewalsatinder oh used DOS üòä


[27-Sep-18 08:09 AM] grewalsatinder#9653
üòÑ nice... I first touched a computer when win95 was there


[27-Sep-18 08:09 AM] grewalsatinder#9653
in about a month got hands on Linux....

{Reactions}
ü§ì 

[27-Sep-18 08:09 AM] TonyL#3577
My dad even had computers on tapes


[27-Sep-18 08:09 AM] TonyL#3577
Remember playing the game about robots from audio tape lol

{Reactions}
üòÖ 

[27-Sep-18 08:41 AM] TonyL#3577
@grewalsatinder made a PR https://github.com/KomodoPlatform/Mastering_CryptoConditions/pull/4 for more CC doc chapters translated onto Russian. Hope will finish this raw translation version in next PR

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/pull/4
Translated more chapters by tonymorony ¬∑ Pull Request #4 ¬∑ Komod...
Want to sync on this point
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Reactions}
üëçüèª 

[27-Sep-18 08:42 AM] grewalsatinder#9653
merged


[27-Sep-18 08:42 AM] grewalsatinder#9653
thanks üôÇ


[27-Sep-18 08:43 AM] TonyL#3577
It's just in case if someone will see this translation in main repo so to not do double job in case if someone will want to contribute because I think next PR will not be very soon üòÉ  Thanks!


[27-Sep-18 11:40 AM] SHossain#0007
```
python3 -m unittest -v oracle.py
Input AC name with which you want to work (exmp: ORCL): ORCL1
Do you want to create a new oracle? (y/n): n
Do you want to display oracles availiable on this AC? (y/n): y
1fa7299d755eb909f9835863fcafce74298a762648656404ab73b5661f43f829 KMD
0b36a2a9d4298993f345de5bcce3f6ae5c81cac5eca6993a6536893b3ceda0e3 KMD
4950611022e7b28f90616b748366a983213848143baf835ba192e985973b0e91 Testing
c1a04d36e606b4bff9e02393e7cb01475e96f056aacae8e289624dd806c0858f Test
53a77d30340afe4ec74b462e09949600d282c4c187eed45da138bf28c9d32f37 Test
af9ac230b282bf1bed7e8d3757d5f26fbcc6c8a76a6c8d3859a08993b5da1900 TEst
a2cd853fb8b4f62fe9dd240d3cbc18ef1f27e395e5ae52db2d08ab12efd51e7d Test
cafaa03b15468147285f4d35d54dac793a40ea7f17711e82f29fa4f9f6d15763 KMD
38868bf21d487ff9eb0bfcf7440ddfb80a728498632c4d4656ee183f8a724ce6 Test
a2bd1e7d7e32cc50cd42e3cc729e1f1e25f14ea3947451029c5b34a59917d70c KMD
6f32e414c566467cf41f47faf4a71f874956e49c4c08b4108c59c3c7d1e43a88 KMD
Do you want to transfer file to oracle? (y/n): 
```


[27-Sep-18 11:47 AM] SHossain#0007
@TonyL i get this
```
python3 -m unittest -v gateways_cc_cli.py

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK
```


[27-Sep-18 11:49 AM] TonyL#3577
@SHossain oh it's some template from tests from which I've start this repo (will deprecate in next commit) but now auto-tests performing in RPC framework.
To use gateways CLI you need to execute `gateways_cc_cli.py`  (will update readme in next commit as well)


[27-Sep-18 11:50 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/494944005738463250/Screenshot_from_2018-09-27_19-50-34.png


[27-Sep-18 11:50 AM] SHossain#0007
Thanks i see it now. python noob


[27-Sep-18 11:51 AM] TonyL#3577
Yeah that's what you need :realpirate:


[27-Sep-18 11:52 AM] SHossain#0007
```
>> 1
Input AC name with which you want to work (exmp: ORCL1): ORCL1
Traceback (most recent call last):
  File "gateways_cc_cli.py", line 231, in <module>
    main()
  File "gateways_cc_cli.py", line 226, in main
    list(menuItems[int(choice)].values())[0]()
  File "gateways_cc_cli.py", line 47, in token_list_gw
    ac_name = str(input("Input AC name with which you want to work (exmp: ORCL1): "))
  File "<string>", line 1, in <module>
NameError: name 'ORCL1' is not defined
```


[27-Sep-18 11:53 AM] TonyL#3577
Let me check

{Reactions}
üëåüèΩ 

[27-Sep-18 11:54 AM] SHossain#0007
i have ORCL1 running


[27-Sep-18 11:56 AM] TonyL#3577
Hmmm

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/494945355310563329/unknown.png


[27-Sep-18 11:59 AM] TonyL#3577
@SHossain could you please try to execute it as `python3 gateways_cc_cli.py` just to be sure that it's running in python3 ?


[27-Sep-18 12:00 PM] SHossain#0007
thanks. using `python3` fixed it

{Reactions}
üî• 

[27-Sep-18 12:04 PM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/494947391670190091/Screenshot_from_2018-09-27_20-04-02.png


[27-Sep-18 12:04 PM] TonyL#3577
In this version all the steps for gateway preparing are separated to demonstrate more and kinda educate but in general it's possible to make it as a wizard - you input all needed params for token/oracle and receive  a gatewaybind txid as reasult


[27-Sep-18 12:17 PM] TonyL#3577
Layout is hardcoded üòÄ  :realpirate: if screenshot above related to it


[27-Sep-18 12:19 PM] SHossain#0007
```
>> 7
Provide me path to your komodo directory. E.g. /home/komodo/ : /home/komodo/
gcc: error: /home/komodo/src/cc/dapps/oraclefeed.c: No such file or directory
oraclefeed is compiled and ready to call as oraclefeed
Press [Enter] to continue...
```


[27-Sep-18 12:19 PM] TonyL#3577
@SHossain do you have `oraclefeed.c` in this location?


[27-Sep-18 12:20 PM] SHossain#0007
yes i have


[27-Sep-18 12:21 PM] SHossain#0007
~/komodo/src/dapps/oraclefeed.c


[27-Sep-18 12:21 PM] TonyL#3577
What is the output of `pwd` when you in `~/komodo` ?


[27-Sep-18 12:21 PM] SHossain#0007
ok


[27-Sep-18 12:21 PM] SHossain#0007
fixed


[27-Sep-18 12:21 PM] SHossain#0007
used `/home/user/komodo/`


[27-Sep-18 12:22 PM] TonyL#3577
Oh yes, looks like I gave bad example in app )


[27-Sep-18 12:28 PM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/494953383011024927/Screenshot_from_2018-09-27_20-27-37.png


[27-Sep-18 12:28 PM] SHossain#0007
creating oracle


[27-Sep-18 12:31 PM] TonyL#3577
@SHossain Please note that in case of real usage oracle name should be the same as asset which you want to tokenize (e.g. KMD)


[27-Sep-18 12:31 PM] SHossain#0007
i see.


[27-Sep-18 12:32 PM] SHossain#0007
it would be nice if you can put the messae in there


[27-Sep-18 12:33 PM] TonyL#3577
üëç  Yep, I'll make prinouts as parts from the pad guide to this tool as soon as finish initial functionality and guide itself

{Reactions}
üëçüèΩ 

[27-Sep-18 12:35 PM] TonyL#3577
Also will grab more stuffs automatically which is requested now (like an option to automatically grab token supply if you use converter for gateway setup but not to withdraw, option to automatically grab yours pubkey and so on)


[27-Sep-18 12:36 PM] TonyL#3577 (pinned)
Drop this release run instruction here in case if somebody will want to join you in testing  üòÉ  : 

How to create very own gateway with gateways_cc_cli.py tool:
Guide for cli calls usage: http://pad.supernet.org/cc_gateways_guide
0) clone https://github.com/tonymorony/cryptoconditions_tui and run `gateways_cc_cli.py` (it should be run by python3)
Be sure that system knows path to your komodod and daemon for desired assetchain is up
1) Press `0` to create token (Use name same as name of asset you want to tokenize e.g. KMD. Please note that supply setting in 10e-8 pow)
2) Press  `2` to create oracle (Use Ihh type and name of asset as well) It will also automatically register it and subscribe once
3) if you'll need to broadcast height more than once in one block it might be a good idea to create some more subscribe UTXOs for your oracle by pressing `3` and use `Oracle subscription UTXOs generator`
4) Then you have to convert your tokens for usage with gatewayCC (for this use the `[5] Tokens converter tool`)
Just follow the steps, input all the needed details and your transaction should get to rawmempool (and you'll get back to menu without any notification, sorry about that)
5) Wait till transaction from `step 4` mined and you have everything now to finally bind the gateway by `[6] Bind gateway`
Just use the txids which you get from previous steps where needed and read the hinds and your gatewaybind transaction should get to rawmempool (and you'll get back to menu without any notification, sorry about that). 
! Please note that you have to input real token supply here (you can get it from tokeninfo it's what you used on step 1 but with 8 zeros)
After this transaction mined your gateway should be ready and you'll able to check it by `gatewaysinfo transactionidfromstep5`
6) Compile `oraclefeed dAPP` and wait for the next update üòÉ

{Embed}
https://github.com/tonymorony/cryptoconditions_tui
tonymorony/cryptoconditions_tui
Terminal user interfaces for Komodo CryptoConditions smart-contracts - tonymorony/cryptoconditions_tui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Reactions}
üëçüèΩ üëåüèΩ 

[27-Sep-18 12:54 PM] SHossain#0007
```
>> 0
Input AC name with which you want to work (exmp: ORCL1): ORCL1
Set your token name: LTC
Set your token supply: 20000000
Set your token description: LTC Test Token
Traceback (most recent call last):
  File "gateways_cc_cli.py", line 231, in <module>
    main()
  File "gateways_cc_cli.py", line 226, in main
    list(menuItems[int(choice)].values())[0]()
  File "gateways_cc_cli.py", line 40, in token_create_gw
    token_txid = create_token(ac_name, name, supply, description)
  File "/home/alien/kmdqa/test_modules.py", line 65, in create_token
    ["komodo-cli","-ac_name="+ac_name,"sendrawtransaction",new_token["hex"]])
KeyError: 'hex'
```


[27-Sep-18 12:55 PM] TonyL#3577
Supply is to much I think


[27-Sep-18 12:55 PM] TonyL#3577
This method not handling exceptions yet


[27-Sep-18 12:55 PM] TonyL#3577
As well as all others :trollface: üòÉ


[27-Sep-18 12:57 PM] TonyL#3577
I'm just learning exceptions handling üòä 
`KeyError: 'hex'` in spot of my tool means that you get not success + hex from `komodod` but some error


[27-Sep-18 12:57 PM] TonyL#3577
20000000 means 2000000000000000 supply for `tokencreate`


[27-Sep-18 12:59 PM] TonyL#3577
I'm usually use `Set your token supply: 1` in my tests


[27-Sep-18 12:59 PM] SHossain#0007
i will use only 1


[27-Sep-18 01:00 PM] SHossain#0007
i didn't have balance for that


[27-Sep-18 01:00 PM] SHossain#0007
:p


[27-Sep-18 01:02 PM] TonyL#3577
I'm sorry that you didn't get any printouts from komodod, have definitely work on it to make this tool usable

{Reactions}
Komodo üëèüèΩ 

[27-Sep-18 01:10 PM] SHossain#0007
will be back soon to test more.


[28-Sep-18 02:55 AM] CMaurice#1685
so I'd be grateful for any directions to get up and running with assisting in testing this stuff, without unnecessarily interrupting flow ofc, I have a server ready. Thanks in advance for any pointers


[28-Sep-18 02:58 AM] jl777c#5810
check pinned posts, there is a test guide. start with easy things like faucet, then move to higher difficulty


[28-Sep-18 02:58 AM] CMaurice#1685
thanks


[28-Sep-18 03:24 AM] CMaurice#1685
yeh, back in a few days probs <- just lauging at myself


[28-Sep-18 05:04 AM] actionslacks#4072
this is new to the whole world. don't be intimidated. practically no one understands how to use this yet.

{Reactions}
üíØ (4) 

[29-Sep-18 11:17 PM] TonyL#3577
Some updates if somebody playing with Gateways CC TUI (https://github.com/tonymorony/kmd_cc_qa/blob/master/gateways_cc_cli.py):
- Fixed `tokens converter` and  `bind gateway` so now have printouts as well
- Also made initial implementation for `Run oraclefeed dAPP` and made implementation of `z_sendmany` so now possible to made "right" transaction to fund gateway and tokens receiver addresses

Next but not the last in todo list:
- implementation of auto `gatewaysdeposit` and `gatewaysclaim` 
- implementation of `gatewayswithdraw`
- more info printouts adding
- new readme creation

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/495841532075835393/unknown.png

{Reactions}
üíØ üòÉ Komodo üëèüèΩ 

[30-Sep-18 07:20 AM] TonyL#3577
@jl777c I lost in numbers a little bit.
I'm creating a token:
`./komodo-cli -ac_name=ORCL1 tokencreate KMD 1 Test`
Getting token with `"supply": 100000000`
Then doing tokenconvert and gatewaysbind, for both  as supply put `100000000`
Getting such gateway:
```./komodo-cli -ac_name=ORCL1 gatewaysinfo 25d44838bad71592c2a8ffb1bb31e7a17e10fa34631df8246846ccf7fe72d470
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590",
  "coin": "KMD",
  "oracletxid": "8bea86f9c6cbf35cb3f443dcb39dd84b499871a86a40f26f8abdd1e4b198c07f",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd",
  "tokenid": "4b29e94e74e9a903a9fedb18755cc64c6df9af1ffa04394e8c91bf6f95a1aa55",
  "totalsupply": "1.00000000",
  "remaining": "3000019.90100200",
  "issued": "-3000018.90100200"
}
```
Is everything converting as expected - just wonder why such conversion for gateway was chosen? 
Keeping in mind exponent for different CCs is really mindblowing - for oracle everything in satoshis, token I have to create with supply in 10^-8 pow, but bind with real supply ü§ï 
 And also - what means "remaining" and "issued"  with these scary numbers üòÉ ?


[30-Sep-18 07:28 AM] TonyL#3577
And also here:
```./komodo-cli -ac_name=ORCL1 gatewayspending 25d44838bad71592c2a8ffb1bb31e7a17e10fa34631df8246846ccf7fe72d470 KMD
{
  "coin": "KMD",
  "pending": [
    {
      "txid": "47132762ff6a679c2c9d3310dc4bf323b1f614309e5b468eaa207ba168761888",
      "txidaddr": "RCC5dA5a4ZZV6kQgHKprxcYcoRgBodPsjo",
      "withdrawaddr": "RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv",
      "amount": "0.00000100"
    }
  ],
  "queueflag": 0
}
```
Is this pending sum in tokens? I've used `z_sendmany` and `gatewaysdeposit` for 0.01 KMD to gatewasdeposit address. 
If   "totalsupply": "1.00000000" for gateway is in -8 pow of token supply in case of 0.01 KMD pending `amount` should be less I think - 
0.0000000001 . Is it because I've reached "minimal" limit? If yes - it's looks like an easy way to abuse gateway in case of real asset big cost (when worth to burn chain tx fee, to get some more asset tokens)


[30-Sep-18 07:42 AM] jl777c#5810
there can easily be bugs. keep in mind the display is just displaying the internal numbers is whatever format it is displaying it in


[30-Sep-18 07:42 AM] jl777c#5810
but a total supply being less than remaining is not good. likely due to you using an active address, this is called a bug


[30-Sep-18 07:42 AM] jl777c#5810
you seem to be assuming the gateways CC has no bugs...


[30-Sep-18 07:42 AM] jl777c#5810
but it doesnt even have validation active yet, so bugs there will be many


[30-Sep-18 08:23 AM] TonyL#3577
@jl777c Thanks! Have I note such things as Github issues?
Sometimes tbh I'm even don't know is it a bug or feature since of complexity when all this stuff working together üòÉ

{Reactions}
abusedsmily (2) 

[30-Sep-18 08:24 AM] jl777c#5810
yes, need to drill down into cli commands to isolate the bug so I can fix it

{Reactions}
üëå 

[30-Sep-18 08:24 AM] jl777c#5810
usually I fix the bugs fast enough as soon as they are reproducible and clearly described

{Reactions}
üôå 

[30-Sep-18 08:24 AM] jl777c#5810
if I dont, then make a github issue out of it

{Reactions}
üëå 

[30-Sep-18 08:29 AM] TonyL#3577
Thanks for clarification! I'll provide cli commands tomorrow since not with PC already


[30-Sep-18 12:20 PM] MoldyLunchbox#5734
Hello, I'm learning about Crypto-Conditions and UTXO tx. I see this image but I'm confused about a detail. Why do some transactions appear to cost 1 KMD while others appear to cost none?


[30-Sep-18 12:20 PM] MoldyLunchbox#5734
https://komodoplatform.com/wp-content/uploads/2018/07/UTXO-2.jpg

{Embed}
https://komodoplatform.com/wp-content/uploads/2018/07/UTXO-2.jpg
https://images-ext-1.discordapp.net/external/5zoP0fasK1V604ksQsEz9QXPRJ5tJpmehZb2t_-ifTM/https/komodoplatform.com/wp-content/uploads/2018/07/UTXO-2.jpg


[30-Sep-18 12:20 PM] MoldyLunchbox#5734
Such as OUTPUT1 on TX2


[30-Sep-18 12:30 PM] jl777c#5810
txfees are usually 0.0001


[30-Sep-18 12:31 PM] MoldyLunchbox#5734
I'm a bit confused as to why there are 8 missing KMD at the end though.


[30-Sep-18 12:32 PM] jl777c#5810
not sure who made that graphic, it does appear to be technically correct


[30-Sep-18 12:33 PM] jl777c#5810
which means the graphic is wrong about the amounts


[30-Sep-18 12:35 PM] MoldyLunchbox#5734
Perfect. Thank you for taking the time.
I'm working on the infographic competition and was confused regarding this issue. I'm glad that's clarified.


[30-Sep-18 06:12 PM] TonyL#3577
@jl777c Strange gateway `totalsupply` `remaining` about which I wrote yesterday (pls let me know if you need hexes as well) :
1) Creating token with supply 1 (*10^8):
```./komodo-cli -ac_name=ORCL1 tokencreate KMD 1 Testing <- hex
./komodo-cli -ac_name=ORCL1 sendrawtransaction hex <- 339c3c1d131a20a3670605a0506979a178745bbef0f6464c07eb592ee295e251
./komodo-cli -ac_name=ORCL1 tokeninfo 339c3c1d131a20a3670605a0506979a178745bbef0f6464c07eb592ee295e251
{
  "result": "success",
  "tokenid": "339c3c1d131a20a3670605a0506979a178745bbef0f6464c07eb592ee295e251",
  "owner": "03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590",
  "name": "KMD",
  "supply": 100000000,
  "description": "Testing"
}
```

2) Converting token supply (since `tokenconvert` using  tokentransfer I assume that I have to declare supply as 1 * 10^8): 
```./komodo-cli -ac_name=ORCL1 tokenconvert 241 339c3c1d131a20a3670605a0506979a178745bbef0f6464c07eb592ee295e251 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 100000000 <- hex
./komodo-cli -ac_name=ORCL1 sendrawtransaction hex <- ecb8e0e49288b0b9eefa52e82497aa60704eabd4820accd8fdd968228f714b30```


[30-Sep-18 06:12 PM] TonyL#3577
3) Binding gateway (using pre-created oracle with Ihh data type):
```./komodo-cli -ac_name=ORCL1 gatewaysbind 339c3c1d131a20a3670605a0506979a178745bbef0f6464c07eb592ee295e251 8bea86f9c6cbf35cb3f443dcb39dd84b499871a86a40f26f8abdd1e4b198c07f KMD 100000000 1 1 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 <- hex
./komodo-cli -ac_name=ORCL1 sendrawtransaction hex <- 1bc88a3ece1e385d5ff504ad445254d90505cfbbd1ad85350e5c8ef132c586c7
./komodo-cli -ac_name=ORCL1 gatewaysinfo 1bc88a3ece1e385d5ff504ad445254d90505cfbbd1ad85350e5c8ef132c586c7
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590",
  "coin": "KMD",
  "oracletxid": "8bea86f9c6cbf35cb3f443dcb39dd84b499871a86a40f26f8abdd1e4b198c07f",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd",
  "tokenid": "339c3c1d131a20a3670605a0506979a178745bbef0f6464c07eb592ee295e251",
  "totalsupply": "1.00000000",
  "remaining": "3000020.90110200",
  "issued": "-3000019.90110200"
}
```


[30-Sep-18 06:15 PM] TonyL#3577
@jl777c Also I noticed that I can broadcast more than one `gatewaysbind` with same parameters in one block and as result can have more than one gateway with same token/oracle binded. Should I consider it as expected behaviour? 
A lil bit scary to imagine what will happen if multiply gateway will use same token for back and forth converts üòÉ


[30-Sep-18 06:23 PM] TonyL#3577
Also as I've reported before `oraclesfeed` keep trying to broadcast withdrawal which was successfully completed for another gateway. 
To reproduce just have to complete tokens withdrawal (with successful KMD receiving) and run `oraclefeed` to oraclize for any oracle/gateway on same pubkey node as which made successful withdrawal:
```./oraclefeed ORCL1 8bea86f9c6cbf35cb3f443dcb39dd84b499871a86a40f26f8abdd1e4b198c07f 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 Ihh 25d44838bad71592c2a8ffb1bb31e7a17e10fa34631df8246846ccf7fe72d470
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   672    0   672    0     0  29217      0 --:--:-- --:--:-- --:--:-- 29217
BTC/USD 6622.5563
Powered by CoinDesk (https://www.coindesk.com/price/) 6622.55630000
coin.KMD vs KMD
loadfile null size.(/tmp/oraclefeed.importaddress)
set refcoin RH8mu756oZMoYWLKKUh3GXJfvHizEhyFEd <- KMD [./komodo-cli] M.1 of N.1
broadcast ORCL1 txid.(44394abf3f6a081309a2619bd0ac8c3aeaa547dc367c2f9b0c8c790bbceb47af)
KMD ht.1032371 <- b3c00f00059dfcfca55713a663486f119acb104355af4292143519f54737917d02000000209c269806d628b422e2f0c35c5e775b51c4efa8c28adb619ae4051bc6eea9aa
already did withdraw KMD RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv 0.00000100 processed
spend ORCL1 47132762ff6a679c2c9d3310dc4bf323b1f614309e5b468eaa207ba168761888/v2 as marker
error code: -25
error message:

loadfile null size.(/tmp/oraclefeed.sendrawtransaction)
broadcast ORCL1 txid.(018e0f5edc72114a412412fb725a7b15ef80aef0fc4b81ba5884989749af10f0)
KMD ht.1032372 <- b4c00f0026e71294ba478a2b3889da40ab6b7093df2f4a0fcc4e4aa8cde88b4b1ef04801a9c52f452f2fdc559cc7b1caf895fd68dcee4b5049d8479aa044704dc0ae3695
already did withdraw KMD RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv 0.00000100 processed
spend ORCL1 47132762ff6a679c2c9d3310dc4bf323b1f614309e5b468eaa207ba168761888/v2 as marker
error code: -25
error message:
```


[30-Sep-18 06:23 PM] TonyL#3577
Looks like a minor thing since it's just a dAPP issue - not consensus one but In case of big completed withdrawals amount it will be a huuge mess-up in `oraclesfeed` printouts and RPC spam.


[30-Sep-18 11:07 PM] gcharang#6833
@MoldyLunchbox here is a good explanation of UTXO: https://docs.komodoplatform.com/whitepaper/chapter6.html#the-utxo-an-elusive-yet-fundamental-concept


[01-Oct-18 12:58 AM] jl777c#5810
@TonyL these are good bugs. will investigate

{Reactions}
üî• 

[01-Oct-18 02:28 AM] gcharang#6833
@SHossain  @TonyL I am starting to document the rpc calls of cc contracts. Can you correct me if  any of the below statements are false:
1) dice, token, faucet, rewards are all currently active on the komodo mainchain
2) https://github.com/KomodoPlatform/Mastering_CryptoConditions/tree/master/docs this location has the most uptodate info on these
3)https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=821923243 -- this doc has latest explanations

Please post links to any other docs/guides that have been written for these contracts

Once I have the docs for the above contracts ready, I will start working on the next ones

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/tree/master/docs
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[01-Oct-18 02:50 AM] TonyL#3577
@gcharang if I understand correct CCs working only on ACs within the Komodo cluster atm but not mainchain itself


[01-Oct-18 02:54 AM] gcharang#6833
Thanks tony. Can you link me to any other guides/docs that you have used/written while testing these?


[01-Oct-18 02:57 AM] TonyL#3577
http://pad.supernet.org/cc_gateways_guide I've almost finished how-to for gatewaysCC (it's using tokens, oracles, gateways CCs + oraclefeed dAPP). But it's just an adoption of James github hints.
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing - in this doc I've reflected coverage of CCs by autotests + some examples of oracle data input

{Embed}
https://docs.google.com/spreadsheets/d/1AWSepYrKM-TYGtfVmXN-rwUMSjnuFeTAqhG64vxyvfw/edit?usp=sharing
CCs Test Plan
ORACLE CC Data input

 Oracles type, Type description, Data input, Expected output, Output, Oracles id( ORCL chain)
 L, 8 byte unsigned little endian, 00000000ffffffff, 18446744069414584000, 18446744069414584320, eb79c3b6ec1cde314c19e8fbb2f9627ad7d8469d8536335794286c4eb68c9fb...
https://images-ext-1.discordapp.net/external/82hQbeigfuGNKqJrcGqcuqy1txzvSr9KYRh85xxywao/https/lh4.googleusercontent.com/9yeKWoEVtVvujIgExr4kwbRrCe3JBbDGkoWm0bJ8RVRKjuX0Wd3LIWIq-QK1nEmqiu1vNg%3Dw1200-h630-p


[01-Oct-18 02:58 AM] TonyL#3577
Not sure if there any other docs


[01-Oct-18 03:00 AM] TonyL#3577
@gcharang https://github.com/jl777/komodo/tree/FSM/src/cc atm most relevant info usually can be found here in James comments

{Embed}
https://github.com/jl777/komodo/tree/FSM/src/cc
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Reactions}
üëç 

[01-Oct-18 03:03 AM] gcharang#6833
Got it.


[01-Oct-18 03:06 AM] TonyL#3577
Feel free to buzz me if you'll encounter some difficulties/doubts with RPC calls - always glad to help üëç


[01-Oct-18 03:09 AM] jl777c#5810
a chain with -ac_cc=N with N > 0, will have CC active


[01-Oct-18 03:09 AM] jl777c#5810
if N > 100, then it forms a cluster and all other chains in that cluster are fungible


[01-Oct-18 03:10 AM] jl777c#5810
if N is 1, then it just enables CC


[01-Oct-18 03:10 AM] jl777c#5810
if N is > 1 and <= 100, it allows for non-fungible cross chain within the cluster


[01-Oct-18 03:16 AM] TonyL#3577
Oh looks like this info not documented anywhere but it's like a most important `step 0` when architecting asset chain / cluster with CCs support


[01-Oct-18 03:19 AM] TonyL#3577
https://docs.komodoplatform.com/komodo/example-asset-chains.html 
https://docs.komodoplatform.com/komodo/create-Komodo-Assetchain.html
there is no even parameter `ac_cc` in these docs - I guess it's have to be refreshed with taking into account the possibility of creating a CC


[01-Oct-18 03:21 AM] Mylo#8306
Some info in second section here i found one week https://komodoplatform.com/tech-tuesday-update/

{Embed}
https://komodoplatform.com/tech-tuesday-update
Tech Tuesday Update: A Summary Of Last Week's Development - Komodo
Komodo Platform is starting a weekly briefing on the progress the Komodo Dev Team is making. It's called Tech Tuesday Update. Here's the first one.
https://images-ext-1.discordapp.net/external/5mM-oiRXPZqjXgvgfZbbafJQt6TUjYRR-YWovzFebXc/https/komodoplatform.com/wp-content/uploads/2018/09/tech-tuesday-update.jpg


[01-Oct-18 03:21 AM] Mylo#8306
yes it is a step 0 üòÉ


[01-Oct-18 03:22 AM] TonyL#3577
https://docs.komodoplatform.com/komodo/assetchain-params.html#ac-cc oh it's here


[01-Oct-18 03:22 AM] TonyL#3577
not very noticeable place üòÉ


[01-Oct-18 03:22 AM] Mylo#8306
yeah not very üòÉ


[01-Oct-18 03:28 AM] TonyL#3577
Maybe write some handbook like a `Hands-on Komodo blockchain infrastructure architecting with crypto-conditions Turing-complete smart-contracts`

We can start from advices on servers choosing, asset chain requirements for CCs support and include how-to usage guide for each CC with thoughts on real-life / business cases application


[01-Oct-18 03:29 AM] TonyL#3577
If it's a good idea - I may create some initial draft as soon as finish with gatewaysCC automation


[01-Oct-18 03:32 AM] TonyL#3577
Something like an adoption of James CCs development WP but targeting on architects and users (more wide audience in general and with aim on usage description rather then development/creation) with examples and pictures to fill the gap in mass-understanding


[01-Oct-18 03:35 AM] jl777c#5810
yes Alright would be the most familiar with this topic


[01-Oct-18 05:29 AM] jl777c#5810
@jl777c Also I noticed that I can broadcast more than one gatewaysbind with same parameters in one block and as result can have more than one gateway with same token/oracle binded. Should I consider it as expected behaviour? 
part of the gatewaysbind process should be to make sure no other with the same name was created in the same block
since no economic activity is done the moment of bind, it is a matter to do a bind, verify not duplicate, if there was, do anotherbind, etc.


[01-Oct-18 05:30 AM] jl777c#5810
tokenconvert operates on tokens, so specify the total satoshis


[01-Oct-18 05:30 AM] jl777c#5810
I realized different rpc are using different convention, I try to keep it so when doing tokens it is at the satoshi level, when dealing with the native coin, then it is float


[01-Oct-18 05:31 AM] jl777c#5810
if I violate that rule, then it is a bug


[01-Oct-18 05:31 AM] jl777c#5810
@SHossain plz try to duplicate tony bugs via cli and let me know which ones are confirmed

{Reactions}
üëçüèΩ (2) 

[01-Oct-18 06:32 AM] SHossain#0007
@jl777c 1 bug reproduced
```
./komodo-cli -ac_name=ORCL1 gatewaysinfo ee319aa3f1eda1b7ee4ea8c50306a6f9d616c4b2ad013f8266d3bd6d2b9700aa
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "036fe66a54d40b0146bcbf6627064cf023be5bfbb7a4bd5fd390007e5ddb801d13",
  "coin": "KMD",
  "oracletxid": "47f317d9d140eb622d22b352cea1b0f531ee0a477d560acc885432b167f61ee6",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "REF8a789UoCKtZcH6XYW5StnXE5XDWBYfK",
  "tokenid": "17386850e7530ac9b2f569345fd6934c5fe869ca084d63dcb52d686e88f5b67e",
  "totalsupply": "1.00000000",
  "remaining": "3000021.90120200",
  "issued": "-3000020.90120200"
}
```


[01-Oct-18 06:32 AM] SHossain#0007
remaining supply is > than totalsupply by some reason


[01-Oct-18 06:33 AM] SHossain#0007
we will work on the next one after 15-20 minutes


[01-Oct-18 06:33 AM] jl777c#5810
how is that created? my guess is that it is due to having other funds in the same address


[01-Oct-18 06:34 AM] TonyL#3577
@SHossain Followed cli calls from my post above


[01-Oct-18 06:34 AM] SHossain#0007
if you want, i can post all the exact calls i've used to get to this step


[01-Oct-18 06:34 AM] jl777c#5810
it is displaying the balance in the gateways address


[01-Oct-18 06:34 AM] jl777c#5810
so I need to add a check for the assetid too. fixing

{Reactions}
üëçüèΩ (2) 

[01-Oct-18 06:38 AM] jl777c#5810
pushed fix. I was calling the wrong function


[01-Oct-18 06:41 AM] TonyL#3577
@jl777c Great! Will re-test.
Which sum reflect "oraclesinfo funds"?
I've noticed now when SHossain created gateway that   "funds": "150000.00000000", but he called `oraclesregister 10000` and `oraclessubscribe 10000` both once. Just wonder from where these `150000.00000000`
```
 ./komodo-cli -ac_name=ORCL1 oraclesinfo 47f317d9d140eb622d22b352cea1b0f531ee0a477d560acc885432b167f61ee6
{
  "result": "success",
  "txid": "47f317d9d140eb622d22b352cea1b0f531ee0a477d560acc885432b167f61ee6",
  "name": "KMD",
  "description": "blockheaders",
  "format": "Ihh",
  "marker": "RMjyWM1BMG3pVkeX39Bx5qAFw1dJsT2YMy",
  "registered": [
    {
      "publisher": "036fe66a54d40b0146bcbf6627064cf023be5bfbb7a4bd5fd390007e5ddb801d13",
      "baton": "RCvvusXLaN4iS18QVcYuioFg4cWu9vJgTe",
      "batontxid": "c5ff210e5962830696afe455af520139d4344150433bd89bec823c9ffc3a4ac4",
      "lifetime": "0.00000000",
      "funds": "150000.00000000",
      "datafee": "0.00010000"
    }
  ]```


[01-Oct-18 06:41 AM] jl777c#5810
it should just be funds in the oracles address


[01-Oct-18 06:42 AM] jl777c#5810
use addressbalance to crosscheck


[01-Oct-18 06:43 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 getaddressbalance '{"addresses": ["RMjyWM1BMG3pVkeX39Bx5qAFw1dJsT2YMy"]}'
{
  "balance": 20000,
  "received": 20000
}
```


[01-Oct-18 06:43 AM] TonyL#3577
Not match


[01-Oct-18 06:44 AM] jl777c#5810
ok, seems a bug. will check


[01-Oct-18 06:48 AM] jl777c#5810
the address with funds is: addoracleinputs from (RHq9UmGoTzmPgQRDUTAmjquiMwm13t8N1E)


[01-Oct-18 06:48 AM] jl777c#5810
check address balance of RHq9UmGoTzmPgQRDUTAmjquiMwm13t8N1E


[01-Oct-18 06:49 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 getaddressbalance '{"addresses": ["RHq9UmGoTzmPgQRDUTAmjquiMwm13t8N1E"]}'
{
  "balance": 16000000000000,
  "received": 16000000000000
}
```


[01-Oct-18 06:50 AM] jl777c#5810
which is what oracles info is returning


[01-Oct-18 06:50 AM] jl777c#5810
not a bug


[01-Oct-18 06:52 AM] TonyL#3577
Just interesting on which step oracle getting this balance - when I'm creating it?
```./komodo-cli -ac_name=ORCL oraclesregister 47f317d9d140eb622d22b352cea1b0f531ee0a477d560acc885432b167f61ee6 10000
./komodo-cli -ac_name=ORCL1 oraclessubscribe 47f317d9d140eb622d22b352cea1b0f531ee0a477d560acc885432b167f61ee6 036fe66a54d40b0146bcbf6627064cf023be5bfbb7a4bd5fd390007e5ddb801d13 10000
```
Seems like a 20000 which have `maker` wallet:
```./komodo-cli -ac_name=ORCL1 getaddressbalance '{"addresses": ["RMjyWM1BMG3pVkeX39Bx5qAFw1dJsT2YMy"]}'
{
  "balance": 20000,
  "received": 20000
}```


[01-Oct-18 06:53 AM] SHossain#0007
updating both my nodes


[01-Oct-18 06:56 AM] jl777c#5810
you can always look at the rawtx to answer such questions

{Reactions}
üëå 

[01-Oct-18 06:56 AM] jl777c#5810
you dont need me for that


[01-Oct-18 06:57 AM] TonyL#3577
Yeah, I think I got the point - UTXO is an answer üòÉ


[01-Oct-18 06:57 AM] jl777c#5810
if you need to know what the code is trying to do, there are the code comments


[01-Oct-18 07:01 AM] SHossain#0007
@TonyL Let's get the 2nd bug reproduced üòÉ

{Reactions}
üôå 

[01-Oct-18 07:06 AM] TonyL#3577
"I have no idea what I'm doing dog"

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/496322071291363331/2j4g8c.png

{Reactions}
üëçüèΩ ü§ì üëÆüèΩ abusedsmily 

[01-Oct-18 07:17 AM] siu#3920
@TonyL will try to test your gatewayscc app today üòÉ


[01-Oct-18 07:26 AM] TonyL#3577
@siu  great! I'm glad to help if you'll have troubles with it. Please keep in mind that's prototype release to check the direction üòÉ  I'm working on new now  to cover all flow and make more user-friendly (for example my local version handle Ctrl + C  üòÉ  :trollface: )


[01-Oct-18 07:26 AM] siu#3920
where is the link?


[01-Oct-18 07:27 AM] TonyL#3577
Pinned a message.


[01-Oct-18 07:27 AM] TonyL#3577
@siu  Pinned post with link and some guide


[01-Oct-18 07:38 AM] siu#3920
thanks!

{Reactions}
üëç 

[01-Oct-18 07:39 AM] siu#3920
what chain is the latest test chain? sorry, ive been out of the look for some days


[01-Oct-18 07:40 AM] TonyL#3577
@jl777c bug with gateway supply fixed :
```
./komodo-cli -ac_name=ORCL1 gatewaysinfo b028e73586ec11151c1c98586eee8f7fad34dbda43e8e30665e046630ec981ef
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "03d82cb358ef7cb1d89becbba3ab1a1805ab4921984066c57e18a278de8f1a43cd",
  "coin": "KMD",
  "oracletxid": "47f317d9d140eb622d22b352cea1b0f531ee0a477d560acc885432b167f61ee6",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RJjGtrxXzvnJp4QwU8iz5Fvh3suoogvLL2",
  "tokenid": "30657ef199daf3be545f24808fff4974b24b3ecee615fb240c2ba06b3143e611",
  "totalsupply": "1.00000000",
  "remaining": "1.00000000",
  "issued": "0.00000000"
}```


[01-Oct-18 07:41 AM] TonyL#3577
@siu It's ORCL1 now (second pinned post)


[01-Oct-18 07:48 AM] siu#3920
ok


[01-Oct-18 09:29 AM] SHossain#0007
```
./oraclefeed ORCL1 47f317d9d140eb622d22b352cea1b0f531ee0a477d560acc885432b167f61ee6 036fe66a54d40b0146bcbf6627064cf023be5bfbb7a4bd5fd390007e5ddb801d13 Ihh 4bc77852ea1df68d8aece2823d99309a7de03a2cb24efeab63ebc536952e4706
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   671    0   671    0     0   9067      0 --:--:-- --:--:-- --:--:--  9067
BTC/USD 6542.6288
Powered by CoinDesk (https://www.coindesk.com/price/) 6542.62880000
coin.KMD vs KMD
loadfile null size.(/tmp/oraclefeed.importaddress)
set refcoin REF8a789UoCKtZcH6XYW5StnXE5XDWBYfK <- KMD [./komodo-cli] M.1 of N.1
broadcast ORCL1 txid.(d11f2a8c2c12d38e07e68862be0f054931505a31729f667b2a1ea6e2d349dbb0)
KMD ht.1033940 <- d4c60f004927593ee95a5c9a3f6c03cb1ac47e4bc533194224e43ad838a47a164b70b50a9a1a4a403a0fdcb42cef141896fe80a2554e8b78f74968180c9201dd1f3dbd2b
already did withdraw KMD RMLBM7dNHUqsfnExV3H9uHeZzPi5dsYSkv 0.00000100 processed
spend ORCL1 47132762ff6a679c2c9d3310dc4bf323b1f614309e5b468eaa207ba168761888/v2 as marker
error code: -25
error message:
```


[01-Oct-18 09:30 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/496358135196286986/Screenshot_from_2018-10-01_17-26-38.png


[01-Oct-18 09:31 AM] TonyL#3577
@SHossain run oraclefeed and it's trying to broadcast my successful withdrawal transaction which I made few days ago.
So it's different reproducing as I thought - even no matter which privkey node have it's trying to re-brodcast succesfully completed withdrawal


[01-Oct-18 09:32 AM] TonyL#3577
And @SHossain used brand new gateway without any deposit/withdrawal transactions for this `oraclefeed` execution


[01-Oct-18 09:37 AM] TonyL#3577
@jl777c https://github.com/jl777/komodo/blob/FSM/src/cc/dapps/oraclefeed.c#L470 btw isn't it should get `bindtxid` instead of `oracletxid`?

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/dapps/oraclefeed.c
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[01-Oct-18 09:39 AM] jl777c#5810
yes, it is using bindtxid, just the variable name is wrong


[01-Oct-18 09:40 AM] jl777c#5810
fixed in the code, but it wont change behavior


[01-Oct-18 09:40 AM] TonyL#3577
Yep, I see


[01-Oct-18 09:45 AM] TonyL#3577
I guess what we see is this execution https://github.com/jl777/komodo/blob/FSM/src/cc/dapps/oraclefeed.c#L843

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/dapps/oraclefeed.c
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[01-Oct-18 09:51 AM] jl777c#5810
spend ORCL1 47132762ff6a679c2c9d3310dc4bf323b1f614309e5b468eaa207ba168761888/v2 as marker
the oraclefeed node needs to be able to spend that


[01-Oct-18 09:54 AM] TonyL#3577
So `oraclefeed` marker now just monitoring for all transactions which looks like gateways withdrawals and trying to execute no matter which pubkey it belongs


[01-Oct-18 09:54 AM] TonyL#3577
I guess there is no problem so


[01-Oct-18 09:56 AM] TonyL#3577
I'm really sorry if I made buzz from nothing. Really missed in these things a little bit last days üòÇ


[01-Oct-18 09:57 AM] jl777c#5810
well cant stop invalid nodes from trying


[01-Oct-18 09:58 AM] TonyL#3577
I just wonder that it's maybe a problem for node if AC live for a long time


[01-Oct-18 09:58 AM] jl777c#5810
as long as it works for the valid node(s) it is not a bug

{Reactions}
üëå 

[01-Oct-18 09:58 AM] TonyL#3577
And there are millions of succesfull transactions


[01-Oct-18 09:58 AM] TonyL#3577
So `oraclefeed` will try to rebroadcast each


[01-Oct-18 09:59 AM] TonyL#3577
But it's hypothetical thing for now


[01-Oct-18 10:03 AM] jl777c#5810
i just merged mihailo's channels CC implementation. He said it is ready to test, but he doubts any of you will find any bugs as his code is totally perfect


[01-Oct-18 10:03 AM] jl777c#5810
üòÉ


[01-Oct-18 10:03 AM] jl777c#5810
just kidding


[01-Oct-18 10:03 AM] jl777c#5810
there will be bugs, plz find them. ask him how to use it


[01-Oct-18 10:03 AM] TonyL#3577
üòÉ meeeat


[01-Oct-18 10:12 AM] TonyL#3577
Oh there is a super big manual part: https://github.com/jl777/komodo/blob/FSM/src/cc/channels.cpp
Will read tomorrow with pleasure

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/channels.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[01-Oct-18 10:13 AM] siu#3920
inspiration for the token dex https://www.youtube.com/watch?v=QheCPxsMryw&feature=youtu.be

{Embed}
The Cryptoverse
https://www.youtube.com/watch?v=QheCPxsMryw&feature=youtu.be
StellarX Review, Tutorial and Walk-through
On today‚Äôs episode of The Cryptoverse‚Ä¶ I would like to walk you through what I have discovered about the brand new stellar x exchange simply by reading the o...
https://images-ext-2.discordapp.net/external/EIlrbOg9O5RlpFS_BF68weQVcRr1zOowfFTCrgbP3N0/https/i.ytimg.com/vi/QheCPxsMryw/maxresdefault.jpg

{Reactions}
üî• 

[01-Oct-18 10:15 AM] TonyL#3577
I've used Cryptobridge on bitshares - it was painful


[01-Oct-18 10:20 AM] Mihailo#5902
@TonyL I'll update channel CC manual very soon so it will be understandable how to use it.


[01-Oct-18 10:22 AM] Mihailo#5902
But for everybody, feel free to ask me about any details you need regarding channel CC ;)

{Reactions}
üéâ Komodo üíØ 

[01-Oct-18 10:23 AM] TonyL#3577
@Mihailo great! Is RCP calls description will be in this updated version?


[01-Oct-18 10:24 AM] Mihailo#5902
Yep

{Reactions}
üëå 

[01-Oct-18 10:44 PM] gcharang#6833
This doc: https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/docs/faq.md was written initially when cc based smart contracts were new to all of us. Can I get feedback on the accuracy of its contents now? @SHossain  @TonyL @Mihailo

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/docs/faq.md
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[01-Oct-18 10:59 PM] TonyL#3577
@gcharang In this FAQ answers on conceptual questions as I can see, so it should be ok since just new CC were added but concept not changed. (if I understand correct for sure)


[01-Oct-18 10:59 PM] gcharang#6833
Got it. Just had to make sure üòÉ

{Reactions}
üëç 

[01-Oct-18 11:07 PM] gcharang#6833
Might be a stupid question:
Does gateway know about assets and oracles at the source code of KMD level or the info about assets and info from oracles need to be extracted by a dAPP and sent to gateway outside of KMD source code?


[01-Oct-18 11:09 PM] TonyL#3577
Gateway binding with oracle and asset (token) on creation step:
` ./komodo-cli -ac_name=ORCL1 gatewaysbind <tokenid> <oracleid> <coinname> <tokensupply> 1 1 <trustedpubkey>`
Oraclefeed dAPP grab data and publish to oracle on chain by `oraclesdata` . Then gateway using data from binded oracle for proof the deposit/withdrawal


[01-Oct-18 11:12 PM] TonyL#3577
`./komodo-cli gatewaysdeposit bindtxid height coin cointxid claimvout deposithex proof destpub amount`
You have to declare height in your deposit call and it's checking for such height oraclized in binded oracle (not checked this part of sourcecode - I guess it's using `oraclessamples` call)


[01-Oct-18 11:13 PM] TonyL#3577
Not understood clear what do you mean by `outside of KMD source code`


[01-Oct-18 11:14 PM] gcharang#6833
I am not too sure either. I will have to read more and understand oracles and gateways before asking the correct questions


[01-Oct-18 11:17 PM] TonyL#3577
https://github.com/jl777/komodo/blob/FSM/src/cc/gateways.cpp#L542 here is function for gateway scanning Ihh data from oracle. Rocket science for me sorry üòÉ

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/gateways.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Reactions}
üëç 

[01-Oct-18 11:21 PM] gcharang#6833
what does `Ihh` mean?


[01-Oct-18 11:21 PM] TonyL#3577
height, blockhash, merkleroot


[01-Oct-18 11:22 PM] TonyL#3577
Special oracle data format


[01-Oct-18 11:39 PM] gcharang#6833
The latest cc code will be in the FSM branch of the repo: jl777/komodo. Correct?


[02-Oct-18 12:03 AM] TonyL#3577
At the moment it's here

{Reactions}
üëç 

[02-Oct-18 12:19 AM] gcharang#6833
I think what I was trying to ask was: 
Does the `komodod` when using gateways cc, access the oracle data that is there in the blockchain by itself or does the gateways cc (komodod) need to be fed the oracle data from the outside?(Like through a rpc call)
Looking at the command you posted above, it seems that we just need to give the `oracleid`  to gateways and komodod will access the data by itself from the blockchain


[02-Oct-18 12:22 AM] TonyL#3577
gatewaysCC access the data by itself from the blockchain (oracleCC) when you doing calls which require such data. Data from outside to blockchain (to oracle) "grabbing" by `oraclefeed` dAPP

{Reactions}
üëç 

[02-Oct-18 01:26 AM] jl777c#5810
programmable magic it is

{Reactions}
shexy 

[02-Oct-18 04:34 AM] siu#3920
@TonyL hi man


[02-Oct-18 04:34 AM] siu#3920
im testing the gateways cc cli interface, it looks awesome, but im not sure about what to do with it


[02-Oct-18 04:34 AM] siu#3920
how can i test for example to buy a token and redeem the coins within


[02-Oct-18 04:34 AM] siu#3920
?


[02-Oct-18 04:36 AM] TonyL#3577
@siu hi and thanks for a feedback! At the moment only possible to prepare the gateway for transactions:
```[0] Create token
[1] Get list of availiable tokens
[2] Create oracle
[3] Oracle subscription UTXOs generator
[4] Get list of availiable oracles
[5] Tokens converter
[6] Bind gateway```


[02-Oct-18 04:37 AM] TonyL#3577
I'm working on deposits section now - will push as soon as finish with it. 
Want to be sure that it's work correct since on this step real KMD transactions involving

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/496646897080205312/unknown.png


[02-Oct-18 04:47 AM] siu#3920
I see LTC in the tokens list


[02-Oct-18 04:47 AM] siu#3920
Is it possible to use ltc already?


[02-Oct-18 04:49 AM] jl777c#5810
any bitcoin protocol coin with a gateway can be used, but for now KMD as the deposit address generation is making KMD addresses


[02-Oct-18 04:50 AM] TonyL#3577
I'm not sure why someone created token with name `LTC` üòÉ  wasn't me


[02-Oct-18 04:50 AM] jl777c#5810
you would need to convert it to LTC address by unconverting the base58, changing prefix and reconverting to LTC base58

{Reactions}
ü§ï 

[02-Oct-18 04:51 AM] siu#3920
Ay


[02-Oct-18 04:52 AM] siu#3920
Sounds painful or at least out of my capacity üò¨


[02-Oct-18 04:57 AM] jl777c#5810
there are websites that do it, but yes it is a pain


[02-Oct-18 05:07 AM] siu#3920
but isnt that what barterdex does already?


[02-Oct-18 05:13 AM] jl777c#5810
yes


[02-Oct-18 05:13 AM] jl777c#5810
notice that CC is inside komodod and not iguana


[02-Oct-18 05:14 AM] jl777c#5810
totally different set of internal source code. so I need to port more of iguana into komodod to be able to use the mm functions


[02-Oct-18 05:14 AM] jl777c#5810
just a hassle


[02-Oct-18 05:14 AM] jl777c#5810
and until it is working flawless with KMD (multisig) there is no point to also have bugs with other coins


[02-Oct-18 05:14 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewaysclaim 2c85b403d76f44a362b6c9aae21daa5326327aaf5db6e31da23f495ca1eabcb9 KMD ea443c7a939123da670d116347eb359c0086157ad22e54fbbd11d6872813ad02 021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96 0.01
invalid Gateways deposittxid ea443c7a939123da670d116347eb359c0086157ad22e54fbbd11d6872813ad02 0.00000000 != 0.01000000```
For this `gatewaysdeposit` : https://codeshare.io/5wQWNj


[02-Oct-18 05:15 AM] jl777c#5810
once the gatewayCC is working with KMD, doing the address conversion will make it work with all the mm coins


[02-Oct-18 05:15 AM] jl777c#5810
invalid Gateways deposittxid ea443c7a939123da670d116347eb359c0086157ad22e54fbbd11d6872813ad02 0.00000000 != 0.01000000
did it confirm?


[02-Oct-18 05:15 AM] jl777c#5810
one issue could be that some deposit might require a very big opreturn and it might not fit


[02-Oct-18 05:15 AM] TonyL#3577
Yes


[02-Oct-18 05:16 AM] jl777c#5810
how big was the oraclesdeposit


[02-Oct-18 05:16 AM] TonyL#3577
Do you mean `oraclessubscribe` ?


[02-Oct-18 05:17 AM] jl777c#5810
sorry gatewaysdeposit


[02-Oct-18 05:17 AM] TonyL#3577
0.01 KMD


[02-Oct-18 05:17 AM] jl777c#5810
also are you claiming on thenode with the claimpubkey


[02-Oct-18 05:17 AM] jl777c#5810
if ( DecodeGatewaysOpRet(tx.vout[numvouts-1].scriptPubKey,coin,bindtxid,publishers,txids,height,cointxid,deposithex,proof,claimpubkey,amount) == 'D' && claimpubkey == mypk )


[02-Oct-18 05:17 AM] TonyL#3577
I've tried to call on 2 nodes - on node who made `gatewaydeposit` and on node who have to receive tokens


[02-Oct-18 05:18 AM] TonyL#3577
No luck on both


[02-Oct-18 05:27 AM] TonyL#3577
I guess I'm missing something conceptual when choosing pubkeys.
` To make a gateway deposit, send the funds to the "deposit" address, along with any amount to the same pubkey address you want to get the assetized KMD to appear in.`
But I want to see assetized KMD on my ORCL1 address and I have different pubkeys for KMD and ORCL1 chains


[02-Oct-18 05:32 AM] TonyL#3577
So if I'm choosing address which I get for ORCL1 in z_sendmany (same pubkey address I ant to get assetized KMD appear in) - I received tokens in ORCL1 but KMD went to "somewhere" when I withdraw it


[02-Oct-18 05:33 AM] jl777c#5810
you need to have a claimvout that matches the address you want to receive the tokens with


[02-Oct-18 05:34 AM] jl777c#5810
on withdraw, you specify an arbitrary withdraw address so it has absolutely nothing to do with the deposit


[02-Oct-18 05:34 AM] jl777c#5810
after all you could transfer all the tokens to someone else and they will want to withdraw to their address

{Reactions}
üí° 

[02-Oct-18 05:38 AM] jl777c#5810
that means something clicked?


[02-Oct-18 05:39 AM] TonyL#3577
just filled one of gaps in flow understanding


[02-Oct-18 05:39 AM] jl777c#5810
at the code level all that is happening is that the CC is checking that the claimvout in the deposit goes to the same address as the claiming node's pubkey


[02-Oct-18 05:39 AM] jl777c#5810
if not, it is rejected


[02-Oct-18 05:39 AM] jl777c#5810
the reason should be clear. why is this restriction there?


[02-Oct-18 05:40 AM] TonyL#3577
To be sure that right person will get the tokens?


[02-Oct-18 05:41 AM] jl777c#5810
yes


[02-Oct-18 05:41 AM] jl777c#5810
otherwise anybody can be watching for gatewaysdeposits and submit a claim to steal the tokens


[02-Oct-18 05:41 AM] jl777c#5810
it becomes a mempool race


[02-Oct-18 05:41 AM] jl777c#5810
not exactly a secure deposit process that we need


[02-Oct-18 05:45 AM] jl777c#5810
so is there a bug where the claiming pubkey cant be claimed by the proper node?


[02-Oct-18 05:45 AM] TonyL#3577
Yes, from my point of view it looks so atm


[02-Oct-18 05:46 AM] TonyL#3577
https://codeshare.io/5wQWNj - `gatewaysdeposit`
```./komodo-cli -ac_name=ORCL1 gatewaysclaim 2c85b403d76f44a362b6c9aae21daa5326327aaf5db6e31da23f495ca1eabcb9 KMD ea443c7a939123da670d116347eb359c0086157ad22e54fbbd11d6872813ad02 021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96 0.01
invalid Gateways deposittxid ea443c7a939123da670d116347eb359c0086157ad22e54fbbd11d6872813ad02 0.00000000 != 0.01000000
```
`gatewaysclaim`


[02-Oct-18 05:48 AM] TonyL#3577
I'll go trough all steps carefully again to be sure


[02-Oct-18 05:50 AM] jl777c#5810
what is the claimvout destination address in the deposit?


[02-Oct-18 05:50 AM] TonyL#3577
Destination address is `RHq3JsvLxU45Z8ufYS6RsDpSG4wi6ucDev`


[02-Oct-18 05:50 AM] jl777c#5810
what is the address on your node for the pubkey 021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96


[02-Oct-18 06:06 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 validateaddress RHq3JsvLxU45Z8ufYS6RsDpSG4wi6ucDev
{
  "isvalid": true,
  "address": "RHq3JsvLxU45Z8ufYS6RsDpSG4wi6ucDev",
  "scriptPubKey": "76a9145dc6ff1dad3e5df49d5cc312a9332c321c14e96188ac",
  "segid": 33,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96",
  "iscompressed": true,
  "account": ""
}
```


[02-Oct-18 06:06 AM] TonyL#3577
But I've added it via `importaddress` and daemon started with other pubkey parameter: `-pubkey=030cb918b90dc084cdb08fcda4297d0db9c86422987df0cafa47ffef57eb6ef647`


[02-Oct-18 06:07 AM] jl777c#5810
?


[02-Oct-18 06:07 AM] jl777c#5810
the node needs to be running with that -pubkey=


[02-Oct-18 06:07 AM] jl777c#5810
otherwise as far as the CC is concerned it is not that node's address


[02-Oct-18 06:07 AM] jl777c#5810
one address/pubkey per node, regardless of if it is in the wallet


[02-Oct-18 06:08 AM] jl777c#5810
any node that isnt -pubkey= 021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96


[02-Oct-18 06:08 AM] jl777c#5810
will be treated as invalid


[02-Oct-18 06:08 AM] jl777c#5810
also the privkey for 021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96 must be in the wallet, or you cant access those funds


[02-Oct-18 06:09 AM] TonyL#3577
Changed `-pubkey=`, `gatewaysclaim` worked, so no bug here
Thank you for clarification!


[02-Oct-18 06:10 AM] TonyL#3577
I thought validation is only on wallet level üôÅ


[02-Oct-18 06:11 AM] jl777c#5810
well it could be, but it isny


[02-Oct-18 06:11 AM] jl777c#5810
isnt


[02-Oct-18 06:11 AM] jl777c#5810
my reason is that each new CC eval code creates a new address


[02-Oct-18 06:11 AM] jl777c#5810
with no easy way to map the address to the pubkey as it is based on a hash


[02-Oct-18 06:11 AM] TonyL#3577
./komodo-cli -ac_name=ORCL1 gatewaysclaim 2c85b403d76f44a362b6c9aae21daa5326327aaf5db6e31da23f495ca1eabcb9 KMD ea443c7a939123da670d116347eb359c0086157ad22e54fbbd11d6872813ad02 021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96 0.01

{
  "result": "success",
  "hex": ""
}
```./komodo-cli -ac_name=ORCL1 sendrawtransaction 01000000031c5711daf842c4f64a3f17de12b021308262895471d56102d6938485b9b928ad02000000484730440220639c6a0ac58836ecc6c1bf5ba54e8b9e3c9c30d152e73a9f1316b5dc0e9397d30220400bf1bd510b20b4323f036d5cfe0d8c8fb21592ecba4a3f57524ebad1e3783501ffffffffd698415536b817d4af8512f0af76d725846fa51d1b256ae871e2eefc71f4b4e8010000007b4c79a276a072a26ba067a565802103ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb4081406866db66fe665be3620edad9cd9cbe948fc46259ea62b515c6c78b243806ed7e2067d6744a6c626eecaba13da7e59c8f8ae43e5e7a8e0fd35e057e4e0127a94da100af038001f1a10001ffffffff02ad132887d611bdfb542ed27a1586009c35eb4763110d67da2391937a3c44ea0000000000ffffffff0440420f0000000000302ea22c8020cc377904112e1559bda6061311b523ab319eaa3a22e387568e7d6291aa20ed598103120c008203000401ccc09ee60500000000302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc483f2e48020000002321021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96ac0000000000000000246a22e37402eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e47600000000
error code: -25
error message:
``` 
Seems we had same last time


[02-Oct-18 06:12 AM] jl777c#5810
so if to allow all addresses in the wallet, then all addresses need to be mapped to all possible CC outputs and then each time to sign a tx all vins compared against all addresses


[02-Oct-18 06:12 AM] jl777c#5810
so it is possible, but not implemented


[02-Oct-18 06:12 AM] jl777c#5810
the claim got a -25?


[02-Oct-18 06:13 AM] TonyL#3577
gatewaysclaim get success and hex - getting -25 on broadcasting


[02-Oct-18 06:13 AM] jl777c#5810
check all the vins to make sure they are still unspent


[02-Oct-18 06:13 AM] jl777c#5810
gettxout is good for at


[02-Oct-18 06:14 AM] jl777c#5810
let me know if all vins are unspent


[02-Oct-18 06:14 AM] jl777c#5810
also any console prints?


[02-Oct-18 06:15 AM] TonyL#3577
I had a lot of prints on `./komodo-cli -ac_name=ORCL1 gatewaysclaim`
```
......
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 vout.0 0.00010000 0.00010000
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 vout.0 0.00010000 0.00010000
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 vout.1 1.00000000 1.00000000
vout.1 227:241 (t) check for refassetid.02eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e476 vs 4b29e94e74e9a903a9fedb18755cc64c6df9af1ffa04394e8c91bf6f95a1aa55 1.00000000
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 vout.1 1.00000000 1.00000000
vout.1 227:241 (t) check for refassetid.02eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e476 vs 872008449f2afd8aae109cdad9a4b605cf6dde9b89bd5f9443eb5443ccceb582 1.00000000
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 vout.1 1.00000000 1.00000000
vout.1 227:241 (t) check for refassetid.02eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e476 vs f35a4d8fcf19d1ca111b1c5e481933defaa0655f4a98a240c9408ac1c820c6d5 1.00000000
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 vout.0 0.00010000 0.00010000
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 vout.0 0.00010000 0.00010000
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 vout.1 1.00000000 1.00000000
vout.1 227:241 (t) check for refassetid.02eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e476 vs 33135119522ab49e8c69c0773bd33bc2e9458efbedb707134345848bfb742d16 1.00000000
check RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 vout.1 1.00000000 1.00000000
vout.1 227:241 (t) check for refassetid.02eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e476 vs 02eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e476 1.00000000
vini.2 has unknown CC address.(RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar)```


[02-Oct-18 06:16 AM] jl777c#5810
vini.2 has unknown CC address.(RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar)


[02-Oct-18 06:16 AM] jl777c#5810
that appears when doing the sendrawtransaction?


[02-Oct-18 06:16 AM] TonyL#3577
No, that appears when doing ```./komodo-cli -ac_name=ORCL1 gatewaysclaim 2c85b403d76f44a362b6c9aae21daa5326327aaf5db6e31da23f495ca1eabcb9 KMD ea443c7a939123da670d116347eb359c0086157ad22e54fbbd11d6872813ad02 021a559101e355c907d9c553671044d619769a6e71d624f68bfec7d0afa6bd6a96 0.01```


[02-Oct-18 06:16 AM] TonyL#3577
With `success` result


[02-Oct-18 06:17 AM] jl777c#5810
well it is an error with signing


[02-Oct-18 06:17 AM] jl777c#5810
isnt RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar the gateways CC address?


[02-Oct-18 06:17 AM] jl777c#5810
let me look


[02-Oct-18 06:17 AM] Mihailo#5902
@TonyL I have added rpc info and vin/vout allocation to channel CC docs. Tell me if it is clear, and do I need to clarify something. Pull request #903.

{Reactions}
üôå (2) üíØ (2) 

[02-Oct-18 06:19 AM] TonyL#3577
@Mihailo Great! Will try channels asap


[02-Oct-18 06:21 AM] jl777c#5810
@TonyL did you change -pubkey on the node doing the gatewaysdeposit and gatewaysclaim, it is expected they are both the same -pubkey=


[02-Oct-18 06:22 AM] jl777c#5810
I mean it is possible for you to gatewaysdeposit to a different pubkey


[02-Oct-18 06:22 AM] jl777c#5810
but whatever pubkey you deposited to, needs to be the -pubkey=


[02-Oct-18 06:22 AM] jl777c#5810
I guess I might need to change it to explicitly use the claimpk


[02-Oct-18 06:22 AM] jl777c#5810
investigating


[02-Oct-18 06:22 AM] TonyL#3577
I've changed `-pubkey=` only on node on which I'm trying to do `gatewaysclaim`


[02-Oct-18 06:23 AM] jl777c#5810
pushed fix


[02-Oct-18 06:24 AM] jl777c#5810
the problem was the gatewaysdeposit used the wrong pubkey, it used the default pubkey and in your deposit the claimpubkey was different


[02-Oct-18 06:24 AM] jl777c#5810
so do another gatewaydeposit


[02-Oct-18 06:24 AM] jl777c#5810
using same cointxid. it should fail. if not that is a bug, as we cant be letting people do multiple deposits with the same cointxid!


[02-Oct-18 06:24 AM] jl777c#5810
also, even in the mempool it should fail


[02-Oct-18 06:24 AM] jl777c#5810
this is a very important error that we need to verify we are getting


[02-Oct-18 06:25 AM] jl777c#5810
once that is verified, then you need to do another KMD deposit, but do it exactly the same and this time it should make a deposittxid that is spendable by the claimpubkey


[02-Oct-18 06:25 AM] TonyL#3577
Roger that. Will rebuild both nodes now and try to do same `gatewaydeposit` first


[02-Oct-18 06:25 AM] jl777c#5810
what you ended up testing was a transfer of KMD to somebody else!


[02-Oct-18 06:25 AM] jl777c#5810
via tokenization


[02-Oct-18 06:26 AM] jl777c#5810
the old code mistakenly assumed that you would only ever send to yourself


[02-Oct-18 06:26 AM] jl777c#5810
clearly a bug


[02-Oct-18 06:27 AM] TonyL#3577
great that we caught it so


[02-Oct-18 06:28 AM] TonyL#3577
`src/cc/dapps/oraclefeed.c | 4 ++--` @jl777c have I rebuild/restart `oraclesfeed` when will do a new `gatewaysdeposit`?


[02-Oct-18 06:29 AM] jl777c#5810
shouldnt matter

{Reactions}
üëå 

[02-Oct-18 06:29 AM] jl777c#5810
it is just the variable renaming


[02-Oct-18 06:36 AM] TonyL#3577
Got error for same `gatewaysdeposit` as was expected:
```pubkeys[0] 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590
found merkleht.1035154 len.36 len2.68 000000012607be57fa408f3d516eced9306501a2722dac4ffc84427794551d4a 4a09a0694e1f717e3454f17123d45b287c8f7a1cc417ed2c477540bcc22349c0
cointxid.01b78e4ae93dce59fabd4370f917a927ed7503472ccc0adddf010d4da0df8417 m.1 of n.1
cointxid.01b78e4ae93dce59fabd4370f917a927ed7503472ccc0adddf010d4da0df8417 already exists
{
  "result": "error",
  "error": "couldnt gatewaysdeposit"
}
```


[02-Oct-18 06:37 AM] TonyL#3577
Next `gatewaysdeposit` for a new transaction I'll rebroadcast fast to be sure that we getting an error when it's in mempool


[02-Oct-18 06:40 AM] jl777c#5810
dont broadcast the identical one


[02-Oct-18 06:40 AM] jl777c#5810
it would just notice it is the same


[02-Oct-18 06:41 AM] jl777c#5810
so make a slightlydifferent gateways deposit rawtx


[02-Oct-18 06:41 AM] jl777c#5810
you can premake them to be able to test the mempool detection


[02-Oct-18 06:41 AM] jl777c#5810
just make sure they have different txid


[02-Oct-18 06:43 AM] TonyL#3577
Sure, got it


[02-Oct-18 06:43 AM] TonyL#3577
For same hash generated I'll just rebroadcast same txid


[02-Oct-18 07:01 AM] TonyL#3577
@jl777c wow RPC validations are very strict now, not generating hex if I change any of parameters - is there any trick to generate not identical `gatewaysdeposit` transaction for same z_sendmany txid?


[02-Oct-18 07:02 AM] jl777c#5810
is the signature the same too?


[02-Oct-18 07:02 AM] jl777c#5810
maybe the identical parameters will generate a different rawhex


[02-Oct-18 07:02 AM] jl777c#5810
the signatures should have a randomized component


[02-Oct-18 07:02 AM] jl777c#5810
if it has any normal inputs


[02-Oct-18 07:04 AM] TonyL#3577
Yes, generating different for same parameters if doing from different nodes


[02-Oct-18 07:06 AM] jl777c#5810
good test is to broadcast simultaneous from different nodes


[02-Oct-18 07:06 AM] jl777c#5810
which one gets mined should determine the "real" one


[02-Oct-18 07:06 AM] TonyL#3577
Hmm one broadcasted, one hex not broadcasted ```error code: -25
error message:
Missing inputs``` even when tried it first


[02-Oct-18 07:07 AM] TonyL#3577
Generated with same parameters ü§ï


[02-Oct-18 07:07 AM] jl777c#5810
so the error detection worked?


[02-Oct-18 07:08 AM] TonyL#3577
I don't think I've tested it since one hex not worked from start (when mempool was clear)


[02-Oct-18 07:10 AM] jl777c#5810
ok, i guess we can test that later


[02-Oct-18 07:10 AM] jl777c#5810
lets make sure the other -pubkey= node can claim


[02-Oct-18 07:14 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenbalance 02eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e476
check RW1q3wTXRkTkuzRa7KfBWey32gm3s6wwg6 0.01000000
{
  "result": "success",
  "CCaddress": "RW1q3wTXRkTkuzRa7KfBWey32gm3s6wwg6",
  "tokenid": "02eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e476",
  "balance": 1000000
}
```


[02-Oct-18 07:14 AM] TonyL#3577
Have tokens on claiming node


[02-Oct-18 07:15 AM] TonyL#3577
``` "totalsupply": "1.00000000",
  "remaining": "0.99000000",
  "issued": "0.01000000"```


[02-Oct-18 07:15 AM] TonyL#3577
Gateways supply reduced as expected


[02-Oct-18 07:16 AM] TonyL#3577
But why there is such conversion rate? 0.01 KMD for 1000000 KMD tokens


[02-Oct-18 07:18 AM] TonyL#3577
So when I'm creating token when I set supply I'm keeping in mind maximum cap of token in KMD


[02-Oct-18 07:18 AM] TonyL#3577
Supply `1` creating a token with `100000000` tokens supply with total value 1 KMD, more clear now


[02-Oct-18 07:20 AM] TonyL#3577
Have to be careful in trades later to not pay 1 KMD for  1/1000000 part of it üòÇ


[02-Oct-18 07:22 AM] TonyL#3577
Will try to sell these tokens, convert back and withdraw after a short break


[02-Oct-18 07:30 AM] jl777c#5810
I changed the display of these tokens to use floating point


[02-Oct-18 07:31 AM] jl777c#5810
but if you look at them without the decimals it is the same as satoshis


[02-Oct-18 07:31 AM] TonyL#3577
I see. Work for GUI üòÉ


[02-Oct-18 07:33 AM] jl777c#5810
tokens CC uses satoshis for tokens


[02-Oct-18 07:33 AM] jl777c#5810
but yes, as long as it all is documented it should just be "work for GUI"


[02-Oct-18 08:31 AM] TonyL#3577
@jl777c Traded tokens, converted - trying to withdraw without success:
```
./komodo-cli -ac_name=ORCL1 gatewayswithdraw 2c85b403d76f44a362b6c9aae21daa5326327aaf5db6e31da23f495ca1eabcb9 KMD 0271bc6b553f5f763ca7f64457710f8a0b3f5273b2941edc5091ca41cec39b7328 0.01
check RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar for gateway inputs
check RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar vout.0 0.00010000 0.00010000
cant find enough inputs or mismatched total
{
  "result": "error",
  "error": "couldnt gatewayswithdraw"
}```


[02-Oct-18 08:32 AM] jl777c#5810
you converted the tokens and 0271bc6b553f5f763ca7f64457710f8a0b3f5273b2941edc5091ca41cec39b7328 owns them?


[02-Oct-18 08:33 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 gatewaysaddress
{
  "result": "success",
  "GatewaysCCaddress": "",
  "Gatewaysmarker": "RGJKV97ZN1wBfunuMt1tebiiHENNEq73Yh",
  "GatewaysPubkey": "03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40",
  "myaddress": "RQVJy1zSEFWZUAXph1F1XVaVpnmKkPDAus"
}
``` 
Btw is it ok that `GatewaysCCaddress` empty?


[02-Oct-18 08:34 AM] jl777c#5810
that is strange!


[02-Oct-18 08:34 AM] jl777c#5810
"GatewaysCCaddress": "RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33",


[02-Oct-18 08:34 AM] jl777c#5810
what is the tokenconvert tx?


[02-Oct-18 08:35 AM] jl777c#5810
it should have sent tokens to RMEdqjz6AyE5he7WXxD2Yf1mCVjUkxGQar


[02-Oct-18 08:35 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 tokenconvert 241 02eb494d51476e4e10b959e9117b94905abc94a459e81016c9343b109c69e476 03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40 1000000```


[02-Oct-18 08:35 AM] jl777c#5810
vout0>


[02-Oct-18 08:36 AM] TonyL#3577
```
 "vout": [
    {
      "value": 0.00000000,
      "valueZat": 0,
      "valueSat": 0,
      "n": 0,
      "scriptPubKey": {
        "asm": "a22c80208eb0bbd9c4cd4e66c80b3873149532b451a9ef1490301ff6b4d956ce15a287388103120c008203000401 OP_CHECKCRYPTOCONDITION",
        "hex": "2ea22c80208eb0bbd9c4cd4e66c80b3873149532b451a9ef1490301ff6b4d956ce15a287388103120c008203000401cc",
        "reqSigs": 1,
        "type": "cryptocondition",
        "addresses": [
          "RWkCyZfZC5Qyak22nYVghZikiC6hbUck7f"
        ]
      }
```


[02-Oct-18 08:36 AM] jl777c#5810
actually it should be in vout1


[02-Oct-18 08:36 AM] TonyL#3577
```      "value": 0.01000000,
      "valueZat": 1000000,
      "valueSat": 1000000,
      "n": 1,
      "scriptPubKey": {
        "asm": "a22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401 OP_CHECKCRYPTOCONDITION",
        "hex": "2ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc",
        "reqSigs": 1,
        "type": "cryptocondition",
        "addresses": [
          "RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33"
        ]
      }
    },
```


[02-Oct-18 08:37 AM] TonyL#3577
Yes in vout1


[02-Oct-18 08:37 AM] jl777c#5810
you did a convert to the redeem address


[02-Oct-18 08:38 AM] jl777c#5810
you need to convert to your own pubkey


[02-Oct-18 08:38 AM] jl777c#5810
then the withdraw spends those 241 tokens for the withdraw


[02-Oct-18 08:38 AM] jl777c#5810
as it is, you made a donation of those tokens


[02-Oct-18 08:39 AM] TonyL#3577
I see :/ My own pubkey = any pubkey on which I want to withdraw funds?


[02-Oct-18 08:39 AM] jl777c#5810
yes. whoever owns the tokens when the withdraw is done gets to say where they end up


[02-Oct-18 08:39 AM] TonyL#3577
So pubkeys in `tokenconvert` and `gatewayswithdraw` needs to be same


[02-Oct-18 08:40 AM] jl777c#5810
no!


[02-Oct-18 08:40 AM] jl777c#5810
you need to think in terms of the CC gateway


[02-Oct-18 08:40 AM] jl777c#5810
its job is to convert tokens for KMD


[02-Oct-18 08:41 AM] jl777c#5810
the person that does the withdraw must own the tokens


[02-Oct-18 08:41 AM] jl777c#5810
the destination pubkey on the KMD side can be any pubkey


[02-Oct-18 08:41 AM] jl777c#5810
you are getting the vins confused with vouts


[02-Oct-18 08:41 AM] jl777c#5810
inputs with outputs


[02-Oct-18 08:41 AM] jl777c#5810
you must own the input to be able to spend it


[02-Oct-18 08:41 AM] jl777c#5810
the withdraw must therefore own the tokens to withdraw


[02-Oct-18 08:42 AM] jl777c#5810
which means the tokenconvert must send it to the pubkey doing the withdraw


[02-Oct-18 08:42 AM] jl777c#5810
if this is unclear, you will continue to make donations


[02-Oct-18 08:42 AM] TonyL#3577
Aha, so in `tokenconvert` I have to use pubkey which in `-pubkey=` and wallet of node executing withdrawal


[02-Oct-18 08:42 AM] jl777c#5810
tokenconvert converts and transfers


[02-Oct-18 08:43 AM] jl777c#5810
you might want to transfer to yourself or to someone else


[02-Oct-18 08:43 AM] jl777c#5810
if you dont own the tokens you cant withdraw them


[02-Oct-18 08:43 AM] TonyL#3577
Yes, It seems clear now


[02-Oct-18 08:43 AM] jl777c#5810
if you own them you can send them to anybody


[02-Oct-18 08:43 AM] jl777c#5810
dont guess


[02-Oct-18 08:43 AM] jl777c#5810
understand clearly


[02-Oct-18 08:43 AM] jl777c#5810
stop donating

{Reactions}
üéÖ 

[02-Oct-18 08:46 AM] TonyL#3577
I'll stop. Now this moment is very clear, thank you!


[02-Oct-18 08:51 AM] jl777c#5810
i know there are pubkey parameters for all the rpc calls, but that doesnt mean you can just use $PUBKEY for all of them!

{Reactions}
üëå 

[03-Oct-18 03:24 AM] CMaurice#1685
Good day. Can @TonyL 's scipts, cryptoconditions_tui be used with the stakedchain/komodo ?


[03-Oct-18 03:24 AM] CMaurice#1685
to be clear, I don't want to use them yet, just plannning whether I need to have multiple komodod's


[03-Oct-18 03:25 AM] TonyL#3577
Hi! @CMaurice You can use it with any AC on which CC activated since AC name setting in all functions


[03-Oct-18 03:25 AM] CMaurice#1685
Hellos and thanks

{Reactions}
üëç 

[03-Oct-18 03:28 AM] TonyL#3577
Just started to move things to separate "TUIs" repo `cryptoconditions_tui` where will be only TUIs code (in previous one is total mess-up now since in same place not related to TUI scripts)


[03-Oct-18 03:29 AM] TonyL#3577
@CMaurice You're attentive, since I've made ` cryptoconditions_tui` repo today but not announced anywhere üòÉ


[03-Oct-18 03:30 AM] CMaurice#1685
Yeah I just happened across it, the more I read, the luckier I get

{Reactions}
treasure (2) 

[03-Oct-18 04:31 AM] TonyL#3577
@jl777c I've noticed that in some time on node which I'm using for oraclefeed and most of others calls starting to accumulate transactions in mempool (node in sync and have connections)
In debug.log it's posting it:```
2018-10-03 11:28:04 ERROR: AcceptToMemoryPool: reject nonstandard transaction input
2018-10-03 11:28:14 AddToWallet 8ee910db43b1d6a7b80ca09d369d818f54bfa399cc2bb2554b6a4f29a30bbe72  new
2018-10-03 11:28:14 ERROR: AcceptToMemoryPool: reject nonstandard transaction input
2018-10-03 11:28:24 AddToWallet 10a6414eedc177bd6a331abb834caa1e6aa25b33e9f0669c9f81bca71a287abf  new
2018-10-03 11:28:24 ERROR: AcceptToMemoryPool: reject nonstandard transaction input
2018-10-03 11:28:34 AddToWallet 8d7a873aa52b0427bf5b29de69e51bb6f13e17926a8a4cd59c22600f877684db  new
2018-10-03 11:28:34 ERROR: AcceptToMemoryPool: reject nonstandard transaction input
2018-10-03 11:28:45 AddToWallet b1330d9b5d0992f9ea1aaaed52dcade84a79c0b8372c5b19f5e6a36d2d6d1f5e  new
2018-10-03 11:28:45 ERROR: AcceptToMemoryPool: reject nonstandard transaction input
2018-10-03 11:28:55 AddToWallet 2a394bc4e328aa96a7121180bc791799d6d2ba059edcffb2090d0e8e2d064e8a  new
2018-10-03 11:28:55 ERROR: AcceptToMemoryPool: reject nonstandard transaction input
2018-10-03 11:29:05 AddToWallet 35b731a0fd6519e0d72764870d6a674056e7149c1c651b3d36e08f8cb8ba79aa  new```

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/497007907884498944/unknown.png


[03-Oct-18 04:32 AM] TonyL#3577
On other node mempool is clear
When I stop - start daemon it's work fine for a some time but then same behaviour

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/497008041992912896/unknown.png


[03-Oct-18 04:40 AM] TonyL#3577
Transactions which rejecting with nonstandart transaction input are from oraclefeed:
```broadcast ORCL1 txid.(35b731a0fd6519e0d72764870d6a674056e7149c1c651b3d36e08f8cb8ba79aa)
KMD ht.1036486 <- c6d00f0086e43da08063512af27427438638b944f40ee0d80df71357b70e503504000000f4416f1571acc56474aec5df9f77246aabcbbc5aa65cb1ba0bf8ad669ac54953```
Which started with these params:
```oraclefeed ORCL1 c23df24bcc27f1448d94a3c9c72fd1480d7674286f581942a327fe2524fe1cd8 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590 Ihh 0711236519fd1395151e88f7f649536231cc8eaaa7d3b1675c1fd07ca02e9ed6```


[03-Oct-18 04:40 AM] jl777c#5810
all nodes running the same version?


[03-Oct-18 04:41 AM] TonyL#3577
Yes


[03-Oct-18 04:41 AM] TonyL#3577
``` git log -1
commit 374dbd844c2399ae82ab3b44027b7cf8a8045ccd (HEAD -> FSM, origin/FSM)
Author: jl777 <jameslee777@yahoo.com>
Date:   Tue Oct 2 02:23:29 2018 -1100

    Fix destination confusion
``` both are on this commit


[03-Oct-18 04:41 AM] jl777c#5810
ALL nodes on the network?


[03-Oct-18 04:41 AM] jl777c#5810
it could be oraclefeed is making non-standard tx


[03-Oct-18 04:42 AM] jl777c#5810
post decoded rawtx for one of those


[03-Oct-18 04:42 AM] TonyL#3577
I can't be sure about ALL nodes in the network, sorry


[03-Oct-18 04:43 AM] jl777c#5810
make a new testchain that is private to you


[03-Oct-18 04:43 AM] jl777c#5810
setup the same nodes


[03-Oct-18 04:43 AM] jl777c#5810
and see if it happens


[03-Oct-18 04:43 AM] TonyL#3577
Yes, will do. Anyway need it for `channels`


[03-Oct-18 04:44 AM] TonyL#3577
```./komodo-cli -ac_name=ORCL1 getrawtransaction "35b731a0fd6519e0d72764870d6a674056e7149c1c651b3d36e08f8cb8ba79aa" 1
error code: -5
error message:
No information available about transaction```


[03-Oct-18 04:44 AM] jl777c#5810
35b731a0fd6519e0d72764870d6a674056e7149c1c651b3d36e08f8cb8ba79aa is in the mempool of that node?


[03-Oct-18 04:46 AM] TonyL#3577
Sry. Decoded rawtransaction: https://codeshare.io/5wQWNj


[03-Oct-18 04:47 AM] TonyL#3577
```    {
      "value": 0.00000000,
      "valueZat": 0,
      "valueSat": 0,
      "n": 4,
      "scriptPubKey": {
        "asm": "OP_RETURN ec44d81cfe2425fe27a34219586f2874760d48d12fc7c9a3948d44f127cc4bf23dc28a4e062d8e0e0d09b2ffdc9e05bad2d6991779bc801112a796aa28e3c44b392a2103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff259044c6d00f0086e43da08063512af27427438638b944f40ee0d80df71357b70e503504000000f4416f1571acc56474aec5df9f77246aabcbbc5aa65cb1ba0bf8ad669ac54953",
        "hex": "6a4ca9ec44d81cfe2425fe27a34219586f2874760d48d12fc7c9a3948d44f127cc4bf23dc28a4e062d8e0e0d09b2ffdc9e05bad2d6991779bc801112a796aa28e3c44b392a2103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff259044c6d00f0086e43da08063512af27427438638b944f40ee0d80df71357b70e503504000000f4416f1571acc56474aec5df9f77246aabcbbc5aa65cb1ba0bf8ad669ac54953",
        "type": "nulldata"
      }
    }``` it seems like a problem


[03-Oct-18 04:48 AM] jl777c#5810
why?


[03-Oct-18 04:48 AM] TonyL#3577
Are 0 value transactions allowed?


[03-Oct-18 04:48 AM] jl777c#5810
yes


[03-Oct-18 04:48 AM] jl777c#5810
it is opreturn anyway


[03-Oct-18 04:48 AM] jl777c#5810
only thing strange i see is not so strange, but same destination address twice


[03-Oct-18 04:49 AM] jl777c#5810
post hex for that one, I will try to see if I get the error too


[03-Oct-18 04:51 AM] TonyL#3577
Hex from `getrawtransaction` :
```./komodo-cli -ac_name=ORCL1 sendrawtransaction 01000000034209d8d9000c97d1d4ce9cecc58cc62ec2237694a3c80735e34cb53c9d39fa09000000004948304502210086fd77b94989768db0546bdd4824eb5f4720a964affffbd15c875456aac4cf4402206675ce1e11fec09ee1b2f8a72ab2e24dce68a1bafb73270f6d0c033044d50b4101ffffffff8a4e062d8e0e0d09b2ffdc9e05bad2d6991779bc801112a796aa28e3c44b392a010000007b4c79a276a072a26ba067a5658021038ba74b71025f32dbea0f1dd83aad07a1c76edc10865d5eb3cd6d61dc2c7d292a8140319c90e24f4aa85df7633fc7be3a6380b39e15951bb0c3da7cbcaa92477686e9486fed9343879e613fb1a02fc445638f8e078f29f938eb78f8bb94f511aaa101a100af038001eca10001ffffffffe008f273d3172b7f23260da09b76c8d6b9e46c27b13bd9a674d8e4fd588305fb000000007b4c79a276a072a26ba067a565802103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff25908140782f16851a6dfb4c12aacdcf8fd70100536102ad74082124c2684135a27f12e16689184d1336d00333ada0e8c9783f6f2e0861dfac87a0bf79f1e2c5d9e799cea100af038001eca10001ffffffff05f0e8a4d4e8000000302ea22c8020850fb1c42ef27644bb8679720990bb87542621d7c53e33fda9568c0f9e5a51d78103120c008203000401cc1027000000000000302ea22c80202ff1e487023beac6eadfe25377152cbde11d9133e025ea6d6f626df8de9a71d78103120c008203000401cc1027000000000000232103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590acf078724e18090000232103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590ac0000000000000000ac6a4ca9ec44d81cfe2425fe27a34219586f2874760d48d12fc7c9a3948d44f127cc4bf23dc28a4e062d8e0e0d09b2ffdc9e05bad2d6991779bc801112a796aa28e3c44b392a2103431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff259044c6d00f0086e43da08063512af27427438638b944f40ee0d80df71357b70e503504000000f4416f1571acc56474aec5df9f77246aabcbbc5aa65cb1ba0bf8ad669ac5495300000000
```


[03-Oct-18 04:54 AM] jl777c#5810
turns out my node had a big mempool also


[03-Oct-18 04:55 AM] jl777c#5810
i mined them all


[03-Oct-18 04:55 AM] jl777c#5810
no errors


[03-Oct-18 04:55 AM] jl777c#5810
I think the mining node hasnt been updated


[03-Oct-18 04:56 AM] jl777c#5810
yes, the node I was mining with was not up to date

{Reactions}
ü§ï 

[03-Oct-18 05:00 AM] TonyL#3577
I'm still generating txs with error:
```2018-10-03 11:59:17 AddToWallet 9f868b844ca8025a161d5e737137c23b9a543f7beefbc6fb482fd5d7eff255ab  new
2018-10-03 11:59:17 ERROR: AcceptToMemoryPool: reject nonstandard transaction input
2018-10-03 11:59:27 AddToWallet 8c3de52b69c663859e3690945e0698428111c01804e71c7047a31b8f97f32e9d  new
2018-10-03 11:59:27 ERROR: AcceptToMemoryPool: reject nonstandard transaction input
2018-10-03 11:59:37 AddToWallet e149ea06b77e790fc5321241dd66430a63ef90bae312bcb04a912f2ef2fa708b  new
2018-10-03 11:59:37 ERROR: AcceptToMemoryPool: reject nonstandard transaction input
```


[03-Oct-18 05:00 AM] TonyL#3577
But mempool cleared on my node after your mining


[03-Oct-18 05:01 AM] Deleted User#0000
I see that "error" on Import TX as well... but apparently it should not be there, because the import TX has no input


[03-Oct-18 05:02 AM] Deleted User#0000
so maybe its being called when its not meant to be


[03-Oct-18 05:02 AM] jl777c#5810
it could be an early error check, but the fact the mempool wasnt being cleared indicates the nodes that were mining were on a fork


[03-Oct-18 05:02 AM] jl777c#5810
let us get it in sync and see if the problem continues


[03-Oct-18 05:03 AM] jl777c#5810
problem is not some error message about mempool, but that the mempool grows so big


[03-Oct-18 05:05 AM] TonyL#3577
It's clearing now, I guess problem was in my mining node. Or in yours not updated mining node hmm


[03-Oct-18 05:11 AM] TonyL#3577
Will setup very private chain so


[03-Oct-18 05:20 AM] jl777c#5810
do you have a mining node?


[03-Oct-18 05:20 AM] jl777c#5810
turns out i wasnt mining ORCL1


[03-Oct-18 05:21 AM] jl777c#5810
so i dont think there is some strange mempool issue


[03-Oct-18 05:22 AM] TonyL#3577
Yes mining enabled on my laptop (following the advice to not mine on node from which I'm doing `gatewaysdeposit ` / `claim` and all the setup)


[03-Oct-18 05:31 AM] jl777c#5810
ok, let me know if the mempool still backlogs


[03-Oct-18 08:14 AM] Alright#0419
@TonyL this chain still alive? `./komodod -ac_cc=1 -ac_name=ORCL1 -addressindex=1 -spentindex=1 -ac_supply=1000 -ac_reward=10000000000000 -addnode=159.69.45.70 -addnode=159.69.201.122`


[03-Oct-18 08:17 AM] jl777c#5810
yes


[03-Oct-18 10:06 AM] TonyL#3577
Hmm something new:
On `gatewaysdeposit`:
``` pubkeys[0] 03431a95c761c491e38a891425009cff5f9eaa3aa3d3d4945dd17f3d0bfcff2590
end of loop
cointxid.a6aa302378d1958c89c70ed9f0553856722216e9c187158543c75bd6b6693ef6 m.0 of n.1
couldnt find merkleroot for ht.1036867 KMD oracle.640df7c69c67e3a05cb8217fa85c08c398cd8a80821e78f5f965beff1d0159d3 m.0 vs n.1```

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/497092077360775169/unknown.png


[03-Oct-18 10:09 AM] TonyL#3577
Problem is with one of nodes, nevermind sorry. Just updated it and it see not all oraclessamples for this oracle. Have to re-sync as well


[03-Oct-18 10:35 AM] Alright#0419
can't get ORCL1 to sync past "blocks": 4308


[03-Oct-18 10:35 AM] Alright#0419
latest FSM


[03-Oct-18 10:35 AM] Alright#0419
didn't see any errors ü§î


[03-Oct-18 10:36 AM] Alright#0419
ah one of my nodes synced fine


[03-Oct-18 10:36 AM] Alright#0419
wat


[03-Oct-18 10:37 AM] TonyL#3577
There is something wrong with this chain as I think


[03-Oct-18 10:37 AM] TonyL#3577
I did many many bad things with it


[03-Oct-18 10:37 AM] Alright#0419
not sure what that was about, deleted data dir and it synced


[03-Oct-18 10:37 AM] Alright#0419
false alarm

{Reactions}
üëå 

[03-Oct-18 11:17 AM] gcharang#6833
@jl777c in tokens, 1 satoshi is 1 token so fractional units of a token are not possible. But if say 10 satoshis are considered 1 token then the token will be divisible to 1 decimal place. Is this option available in the contract that is currently coded?


[03-Oct-18 11:18 AM] jl777c#5810
you are welcome to interpret the token amounts however you wish


[03-Oct-18 11:18 AM] jl777c#5810
but I wont be changing any of the rpc return values


[03-Oct-18 11:18 AM] jl777c#5810
it is up to the application to display the token amounts however it wants to


[03-Oct-18 11:18 AM] gcharang#6833
Understood


[03-Oct-18 11:27 AM] Alright#0419
```
{
  "result": "success",
  "txid": "30e11da80a2e9a67d88d739ad73677b5491889aa2a81e6104bf0d16a176c8898",
  "name": "alright",
  "description": "test",
  "format": "S",
  "marker": "RSaswv8K4SDWBwuYpgSyZZQAvweQ3zKoU4",
  "registered": [
    {
      "publisher": "03ef997bb7fb5c9b328359a92e67225ac60379aadd742a9dcd862ae6150cf13586",
      "baton": "RRyvdvi1K2eCWA6hxrPmeMWwrwYXbvBNQ4",
      "batontxid": "e3145769a74b3ffd4f254071e5ece64d18aa5d67cf811e96655dc48c78d969f4",
      "lifetime": "0.00000000",
      "funds": "10000.00000000",
      "datafee": "0.00010000"
    },
    {
      "publisher": "03ef997bb7fb5c9b328359a92e67225ac60379aadd742a9dcd862ae6150cf13586",
      "baton": "RRyvdvi1K2eCWA6hxrPmeMWwrwYXbvBNQ4",
      "batontxid": "e3145769a74b3ffd4f254071e5ece64d18aa5d67cf811e96655dc48c78d969f4",
      "lifetime": "0.00000000",
      "funds": "10000.00000000",
      "datafee": "0.00010000",
      "publisher": "03ef997bb7fb5c9b328359a92e67225ac60379aadd742a9dcd862ae6150cf13586",
      "baton": "RRyvdvi1K2eCWA6hxrPmeMWwrwYXbvBNQ4",
      "batontxid": "e3145769a74b3ffd4f254071e5ece64d18aa5d67cf811e96655dc48c78d969f4",
      "lifetime": "0.00000000",
      "funds": "10000.00000000",
      "datafee": "1.00000000"
    }
  ]
}
```
Does this seem wrong? Second json is duplicated


[03-Oct-18 11:41 AM] jl777c#5810
it does seem strange


[03-Oct-18 11:41 AM] jl777c#5810
maybe a bug


[03-Oct-18 11:47 AM] Alright#0419
believe it has to do with registering two different times with same pubkey


[03-Oct-18 11:47 AM] Alright#0419
will get steps to reproduce


[03-Oct-18 11:47 AM] Alright#0419 (pinned)
@TonyL `./komodod -ac_name=CCNG -ac_supply=1000 -ac_reward=10000000000000 -ac_cc=1 -addnode=195.201.20.230 -addnode=195.201.137.5`
Tony and I decided to start a new chain

http://ccng.staked.cc/

{Embed}
http://ccng.staked.cc/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[03-Oct-18 11:48 AM] Alright#0419
Pinned a message.


[03-Oct-18 11:49 AM] TonyL#3577
CCNG = CC NextGen üîó üï∫


[03-Oct-18 11:49 AM] jl777c#5810
shouldnt be able to register for same oracle twice with same pubkey


[03-Oct-18 12:01 PM] Alright#0419
yea that's it. Simple as 
`./orcl oraclesregister b4a8df531ebcbca78669a0a13ce4eb109276172a0c5df6e53c36ee9b527bd221 10000`
then 
`./orcl oraclesregister b4a8df531ebcbca78669a0a13ce4eb109276172a0c5df6e53c36ee9b527bd221 100000000`


[03-Oct-18 12:02 PM] Alright#0419
results in this
```
{
  "result": "success",
  "txid": "b4a8df531ebcbca78669a0a13ce4eb109276172a0c5df6e53c36ee9b527bd221",
  "name": "Alright",
  "description": "test",
  "format": "S",
  "marker": "RCHrEcMk8SZCYejwTzjrMiPh9AoUmgZgMP",
  "registered": [
    {
      "publisher": "02648d4edd56fd12b09bf9483e7b40407cce83ecdeb3ebd26b480ff5f5e8493baf",
      "baton": "RBYorBDPZjUjym59qmK3pt56peBfyCqGTC",
      "batontxid": "0a2a788e91d311ac2500fc506c6d035206dae5a1cb201a92c431adf33295e67b",
      "lifetime": "0.00000000",
      "funds": "0.00000000",
      "datafee": "0.00010000"
    },
    {
      "publisher": "02648d4edd56fd12b09bf9483e7b40407cce83ecdeb3ebd26b480ff5f5e8493baf",
      "baton": "RBYorBDPZjUjym59qmK3pt56peBfyCqGTC",
      "batontxid": "0a2a788e91d311ac2500fc506c6d035206dae5a1cb201a92c431adf33295e67b",
      "lifetime": "0.00000000",
      "funds": "0.00000000",
      "datafee": "0.00010000",
      "publisher": "02648d4edd56fd12b09bf9483e7b40407cce83ecdeb3ebd26b480ff5f5e8493baf",
      "baton": "RBYorBDPZjUjym59qmK3pt56peBfyCqGTC",
      "batontxid": "0a2a788e91d311ac2500fc506c6d035206dae5a1cb201a92c431adf33295e67b",
      "lifetime": "0.00000000",
      "funds": "0.00000000",
      "datafee": "1.00000000"
    }
  ]
}
```


[03-Oct-18 12:08 PM] jl777c#5810
was it in the same block?


[03-Oct-18 12:09 PM] Alright#0419
no


[03-Oct-18 12:12 PM] jl777c#5810
so you can register arbitrary number of times?


[03-Oct-18 12:13 PM] jl777c#5810
oh, i think that is on purpose so you can change the datafee


[03-Oct-18 12:13 PM] TonyL#3577
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/Chapter%2011%20-%20oracles%20example
```A data publisher needs to register a datafee and their pubkey for a specific oracletxid. datafee needs to be at least as big as a txfee. Using oraclesregister the current datafee can be updated so a publisher can adapt to market conditions.```

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/Chapter%2011%20-%20oracles%20example
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[03-Oct-18 12:14 PM] jl777c#5810
so it seems not a bug, you can see your price history


[03-Oct-18 12:22 PM] Alright#0419
the duping of the json is a bug though


[03-Oct-18 12:22 PM] Alright#0419
will mess with anything trying to use jq


[03-Oct-18 12:23 PM] jl777c#5810
i will see what .can do to improve the info JSON


[03-Oct-18 12:23 PM] jl777c#5810
purely a display issue


[03-Oct-18 12:26 PM] Alright#0419
actually jq handles it fine, didn't expect that


[03-Oct-18 12:26 PM] Alright#0419
```
./orcl oraclesinfo b4a8df531ebcbca78669a0a13ce4eb109276172a0c5df6e53c36ee9b527bd221 | jq .registered
[
  {
    "publisher": "02648d4edd56fd12b09bf9483e7b40407cce83ecdeb3ebd26b480ff5f5e8493baf",
    "baton": "RBYorBDPZjUjym59qmK3pt56peBfyCqGTC",
    "batontxid": "0a2a788e91d311ac2500fc506c6d035206dae5a1cb201a92c431adf33295e67b",
    "lifetime": "0.00000000",
    "funds": "0.00000000",
    "datafee": "0.00010000"
  },
  {
    "publisher": "02648d4edd56fd12b09bf9483e7b40407cce83ecdeb3ebd26b480ff5f5e8493baf",
    "baton": "RBYorBDPZjUjym59qmK3pt56peBfyCqGTC",
    "batontxid": "0a2a788e91d311ac2500fc506c6d035206dae5a1cb201a92c431adf33295e67b",
    "lifetime": "0.00000000",
    "funds": "0.00000000",
    "datafee": "1.00000000"
  }
]
```


[03-Oct-18 12:26 PM] Alright#0419
just gets rid of the dupe


[03-Oct-18 12:51 PM] Alright#0419
http://ccng.staked.cc/

{Embed}
http://ccng.staked.cc/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[03-Oct-18 12:58 PM] Alright#0419
I did 
`oraclescreate Alright1 testagain S`
then
`oraclesregister <txidofcreate> 10000000`
Now I have 
```
{
  "result": "success",
  "txid": "b46cc54d2701fe3929ef1c2d5af636dad493f4d220a0830a3b98361f2fc055ff",
  "name": "Alright1",
  "description": "testagain",
  "format": "S",
  "marker": "RPmGVy5xuCXpgsGFiMeZw5KGhoqL8NYCzC",
  "registered": [
    {
      "publisher": "02648d4edd56fd12b09bf9483e7b40407cce83ecdeb3ebd26b480ff5f5e8493baf",
      "baton": "RBYorBDPZjUjym59qmK3pt56peBfyCqGTC",
      "batontxid": "11ab34bb95d5c730051fa70c3bafe1bc20c5bd58c22faaa6e914ff0fd79c3c55",
      "lifetime": "0.00000000",
      "funds": "9999.00000000",
      "datafee": "0.10000000"
    }
  ]
}
```
Can someone explain what the "funds" value is please


[03-Oct-18 01:01 PM] jl777c#5810
how much funds it has


[03-Oct-18 01:02 PM] Alright#0419
oh @TonyL did you just subscribe to that?


[03-Oct-18 01:07 PM] Alright#0419
seems funds value is shared between oracles for same publisher
just created this, no one has subscribed and it's funded 
```
{
  "result": "success",
  "txid": "9a1ebc60616ef2cfb1bddffd843f866823f0e9a2437a909b5535f50548dfe383",
  "name": "alright2",
  "description": "testagainagain",
  "format": "S",
  "marker": "RTNPuNxoZyPnY21WkWjjCWZwtHA1pyYdGS",
  "registered": [
    {
      "publisher": "02648d4edd56fd12b09bf9483e7b40407cce83ecdeb3ebd26b480ff5f5e8493baf",
      "baton": "RBYorBDPZjUjym59qmK3pt56peBfyCqGTC",
      "batontxid": "d1864efa75dfe0c01aa90ea0826023dd1ca279504af8182c711d683b5cedad9c",
      "lifetime": "0.00000000",
      "funds": "10099.00000000",
      "datafee": "0.10000000"
    }
  ]
}
```


[03-Oct-18 01:07 PM] Alright#0419
same value for "funds" on the other two oracles this pubkey is registered for


[03-Oct-18 01:32 PM] Alright#0419
Could use some help here. Can't seem to get oraclessamples to work. 
I'm subscribed to the publisher, publisher published
`oraclesdata 40756612346cfb02e5c8058ca55ee65d9c566e4f6aa4ff1ac6c0a91481febb5d FFFFFFFF` and was paid for it but oraclessamples just shows 
```
oraclessamples 40756612346cfb02e5c8058ca55ee65d9c566e4f6aa4ff1ac6c0a91481febb5d 60c514ecbdb3c83def4119f5ab25fc4ecfcc9fd8797b5b2ab7a3f5cc278e75c4 5
{
  "result": "success",
  "samples": [
    [
    ]
  ]
}
```


[03-Oct-18 01:58 PM] Alright#0419
Ah, ok I see my problem


[03-Oct-18 01:58 PM] Alright#0419
batontxid changes with each oraclesdata tx


[03-Oct-18 02:00 PM] Alright#0419
however using the correct batontxid, I'm getting 
```
oraclessamples 40756612346cfb02e5c8058ca55ee65d9c566e4f6aa4ff1ac6c0a91481febb5d 11faf8a77a592cc9101a0b84b2640d92ca53f6f65444d11b4806550d2566f2f3 5
{
  "result": "success",
  "samples": [
    [
    ],
    [
    ],
    [
    ]
  ]
}
```


[03-Oct-18 04:38 PM] TonyL#3577
@Alright Nope didn't subscribe - slept. Your posted data seems not correct for this oracle type. Please check the table with input examples which I've shared.  For string type it should be hex string length + hex encoded string


[03-Oct-18 04:39 PM] TonyL#3577
However I not checked publishing of different datatypes besides of "Ihh" for a while so it might be a good idea to recheck with latest build


[04-Oct-18 04:50 AM] CrisF#3405
@Mihailo  Hi, I'm looking for all of the information I can get on `channels cc` and would be grateful if you could point me towards some.  I saw you mentioned a manual!


[04-Oct-18 04:57 AM] TonyL#3577
@CrisF Updated by @Mihailo channelsCC doc with RPC calls description can be found here: https://github.com/jl777/komodo/blob/FSM/src/cc/CC%20made%20easy#L450

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/CC%20made%20easy
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[04-Oct-18 04:57 AM] TonyL#3577
https://github.com/jl777/komodo/blob/FSM/src/cc/channels.cpp  here is also a concept description in comments on top

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/channels.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[04-Oct-18 04:59 AM] jl777c#5810
can anybody other than mihailo describe how it is possible for mempool tx to be dPoW protected


[04-Oct-18 05:06 AM] gcharang#6833
First fund the channels cc address of the recepient. Wait for the tx to  be dPOW protected so it can't be reorged. This funding utxo can only be claimed by the recipient if he can produce a secret.
So when the sender reveals a secret, the recipient can claim the funds that correspond to it. This funding will be valid till the channel close tx hits the mempool


[04-Oct-18 05:06 AM] Mylo#8306
After tx that creates the channel tx goes into dPoW.  The channel tx (split into 1000) can only be spent once.


[04-Oct-18 05:07 AM] Mylo#8306
what @gcharang said üòÉ


[04-Oct-18 05:11 AM] gcharang#6833
Also the channel close will take effect after the next notarization. So all the funds whose secrets are revealed will be claimable even if there was a reorg attempt


[04-Oct-18 05:12 AM] jl777c#5810
close, but not quite


[04-Oct-18 05:12 AM] jl777c#5810
each channelpayment is a different tx, and not necessarily in the same block


[04-Oct-18 05:13 AM] jl777c#5810
even if any of them are invalidated by a reorg and double spend, the payment is still valid


[04-Oct-18 05:13 AM] jl777c#5810
how is it possible for a payment to survive an actual reorg that double spends all the inputs


[04-Oct-18 05:17 AM] TonyL#3577
I wondered about having separate state hash for each channel. And this state hash notarising


[04-Oct-18 05:17 AM] gcharang#6833
The recipient node has to be online and take notice of the `secret` so that he can send the transaction?


[04-Oct-18 05:18 AM] jl777c#5810
yes!


[04-Oct-18 05:18 AM] jl777c#5810
once the secret is revealed, that allows collection of payment. no need for the sender tx


[04-Oct-18 05:18 AM] jl777c#5810
so even if the payment is reorged and invalidated, the receiver just issues another spend using the secret


[04-Oct-18 05:19 AM] jl777c#5810
now if the recevier is not online, he would miss the chance to do this, but in this case the assumption is the the value transfer hasnt been done


[04-Oct-18 05:20 AM] gcharang#6833
Yes. If the receiver is providing value online, he will have the ability to monitor the mempool


[04-Oct-18 05:20 AM] jl777c#5810
so both nodes dont need to be online for this to work and all the tx are normal tx compatible with wallets and explorers, etc.


[04-Oct-18 05:27 AM] Mylo#8306
what is the format of this `secret`?
is this a correct statement:   so the sender has "pre-spent" the funds into the channel.   The channel is always available (until channel is closed) for recipient to reveal secret for that tx in the channel.


[04-Oct-18 05:31 AM] jl777c#5810
the sender can close the channel and reclaim funds


[04-Oct-18 05:31 AM] gcharang#6833
The channel is nothing but a output created by the sender. it will have the following constraints:
1) It will only be ever spendable either by the receiver or sender
2) receiver can only spend it by revealing a secret only the sender knows (so making a payment means, the sender is reveling a secret)


[04-Oct-18 05:32 AM] jl777c#5810
but the sender cant reclaim the funds until after the close channel is notarized


[04-Oct-18 05:33 AM] jl777c#5810
so the sender has total control by releasing secrets and as soon as it hits the mempool, it is secured by dPoW that the receiver will receive payment


[04-Oct-18 05:33 AM] jl777c#5810
and all of it is blockchain enforced in a backward compatible way


[04-Oct-18 05:33 AM] jl777c#5810
this is why I say channels CC is an improved LN


[04-Oct-18 05:33 AM] jl777c#5810
the method for secret revealing is via hashchain, very efficient encoding of hash secrets


[04-Oct-18 05:36 AM] Mylo#8306
and the receiver, in case of re-org, can just re-reveal the secret to receive the funds in the channel tx.  (lots of things to consider)

hashchain - yes i recall reading it now.  clever/efficient üòÉ


[04-Oct-18 05:37 AM] jl777c#5810
time from concept to initial release, less than a month, and by a new CC dev

{Reactions}
üôå (4) 

[04-Oct-18 06:03 AM] Mihailo#5902
I would describe the channel CC like this:
1) sender "lock" funds in the channel CC address that is spendable by sender or receiver ONLY!
2) then sender make payments to receiver in new transacitons, and in that payment tx also the secret for that amount is now known 
3) if receiver wants to make a payment (this will usually be done only when the payment from sender some how did not reach receiver - for example chain reorg) he must provide the secret. This implies that receiver was online and saw the tx with payment from sender and noted the secret for that payment
4) if sender wants to withdraw fund from channel (he do not want to have channel to receiver anymore), then he first must do a close tx which will just mark that channel will be closed and receiver can see that, and then after close tx is confirmed he can issue refund tx and take the funds.

{Reactions}
üëç (2) 

[04-Oct-18 06:10 AM] Mihailo#5902
As jl777c mentioned the biggest advantage of channel CC is that it has enabled to secure payments that are in mempool with dPoW. I first did not realised how, but with this explanation it gets a lot clearer:
- when the channel is opened and that open tx is notarised basically it means that the amount locked in channel address is known that it will definitively reach either receiver or back to sender. Now when payments are done, by the time they reach mempool, both sides can see them and the secret which is needed to spend them. So, it is not needed to wait the tx to end up in the chain or to be confirmed, because as soon the receiver has the secret for the payment he knows he will get those funds. In other words, you can say that when a payment is done it is immediately confirmed.


[04-Oct-18 06:15 AM] Mihailo#5902
In the case that sender closes the channel, he still must wait for notarisation to happen before he can withdraw funds. So the receiver will see that channel will be closed and no more funds will get to him.


[04-Oct-18 06:16 AM] jl777c#5810
it enables small chains to be used for point of sale instant payments

{Reactions}
üëÜ üëå 

[04-Oct-18 06:17 AM] jl777c#5810
and once channels CC can pay assets, it can be KMD or even BTC equivalents being sent on the small chain, all secured by dPoW and valid in seconds


[04-Oct-18 06:18 AM] jl777c#5810
the combined power of channels, assets, oracles and gateways combined is hard to fully comprehend


[04-Oct-18 06:20 AM] Mylo#8306
And the sender cannot send the payment and close the channel in a quick enough time, because the closing of the channel requires notarization?


[04-Oct-18 06:22 AM] Mihailo#5902
Sender cannot send payment and withdraw funds quickly, as to withdraw it first must be closed and then the close must be notarised which needs more time than the payment to reach receiver.


[04-Oct-18 06:23 AM] Mylo#8306
nice


[04-Oct-18 06:24 AM] jl777c#5810
likely some fancy whitepaper and ICO could have been made for the channels CC, we just implemented it in a month instead

{Reactions}
üòπ 

[04-Oct-18 06:24 AM] jl777c#5810
of course we still need to find all the bugs and fix them and add support for tokens


[04-Oct-18 06:28 AM] Mihailo#5902
You must think of channel CC as instant payment where both sides are present because probably there will be some return from receiver in some form (goods, digital stuff ...) . Good example is you are buying coffee in Starbucks, you send the payment to Starbucks and they see it instantly and give you coffee. If you do not send payment they will not give you coffee, if one side (usually the receiver) is not present then you would usually not use channel CC for tx ( but you still can).


[04-Oct-18 06:29 AM] jl777c#5810
with LN, I think if you are not online all the time, your funds could be at risk


[04-Oct-18 07:33 AM] Alright#0419
@jl777c did you see above about "funds" value being cumulative between oracles


[04-Oct-18 07:33 AM] Alright#0419
if one pubkey registers on multiple oracles, the "funds" value adds up each


[04-Oct-18 07:35 AM] jl777c#5810
I wonder if it is just a display issue or if it affects the publishing


[04-Oct-18 07:35 AM] Alright#0419
still working on publishing, didn't have the length set in first byte, trying it now


[04-Oct-18 07:36 AM] Alright#0419
how might I test that? Subscribe on a different plan then see if I can use funds from a different plan?


[04-Oct-18 07:37 AM] jl777c#5810
yes


[04-Oct-18 07:37 AM] jl777c#5810
seems similar to the rewards bugs we had


[04-Oct-18 07:38 AM] Alright#0419
couple minutes


[04-Oct-18 07:49 AM] Alright#0419
ok, so I created two oracles, registered to them on fresh pubkey, I subscribed on oracle0 then published on oracle1 and was paid from the oracle0 funds


[04-Oct-18 07:49 AM] Alright#0419
so I don't believe it's just cosmetic


[04-Oct-18 07:50 AM] Alright#0419
```
{
  "result": "success",
  "txid": "1d60d8a63582557265fbc3931eef11c864d75b9abcf5fb3783772c61a0b2acb4",
  "name": "testfunds1",
  "description": "testingfundsvaluedupe",
  "format": "S",
  "marker": "RPvBPMkYFZ7JtHLqdexGwJsRXikLbxfvjw",
  "registered": [
    {
      "publisher": "039c8fd50decc3e63d9eb96147335375b11e20308d8cf79776fafb36633d4e0b21",
      "baton": "RAJN2FpYY5935dY3vAQoHF8b4NmqUfMkwf",
      "batontxid": "df1fc1bb3ee3124e78583c2fbd3cc71399161a58d0226e9617394d9be9b3edbc",
      "lifetime": "0.00000000",
      "funds": "999.90000000",
      "datafee": "0.10000000"
    }
  ]
}
```
batontxid changed too


[04-Oct-18 07:51 AM] jl777c#5810
ok, i will investigate. seems it is getting confused about which oracle it is linked to


[04-Oct-18 07:52 AM] Alright#0419
sorry, batontxid did not change, was looking at the wrong oracle


[04-Oct-18 07:56 AM] jl777c#5810
good, glad the baton handling isnt broken. sounds exactly like the rewards bug where funds from all oracles are mixed together for a pubkey


[04-Oct-18 09:27 AM] Alright#0419
@TonyL mentioned that there are examples for the different data types. Does anyone know where these are?


[04-Oct-18 09:28 AM] Alright#0419
or could someone give me an example for S data type?


[04-Oct-18 09:28 AM] Alright#0419
first byte is length in bytes or?


[04-Oct-18 09:32 AM] jl777c#5810
please read oracles.cpp comments at the top of the file


[04-Oct-18 10:23 AM] Alright#0419
I've read it over and over, and I'm still confused about these data types/formats. Take S for example, I should just set the first byte to the overall length then I can have any arbitrary hex following that?


[04-Oct-18 10:30 AM] jl777c#5810
yes


[04-Oct-18 10:30 AM] jl777c#5810
but 's' for < 255 len


[04-Oct-18 02:12 PM] CrisF#3405
@TonyL @@Mihailo Thanks for the information and explanation!


[04-Oct-18 02:13 PM] CrisF#3405
I'll probably have a few questions this weekend when I try it out.


[04-Oct-18 05:31 PM] Deleted User#0000
ChrisF me an you together I read all that I found last night, don't seem as complicated as the first paragraphs make it out to be, but the only way to know for sure it to use it.

{Reactions}
üëç 

[04-Oct-18 11:47 PM] TonyL#3577
Moved Cryptoconditions TUI interface to the new repo to separate from other things: https://github.com/tonymorony/cryptoconditions_tui
Current version allowed to do all needed flow at least once (create token, create oracle, create UTXOs, convert token, bind gateway, make KMD deposit transaction, initiate gateways deposit, gateways claim, convert tokens, withdraw).
Only manual oraclefeed running and checking if desired height oraclised is needed (but it's possible to make more comfortable in future).
Step by step guide which can help a lot on this stage: http://pad.supernet.org/cc_gateways_guide not working now by some reason, but I hope it'll be resolved

{Embed}
https://github.com/tonymorony/cryptoconditions_tui
tonymorony/cryptoconditions_tui
Terminal user interfaces for Komodo CryptoConditions smart-contracts - tonymorony/cryptoconditions_tui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Reactions}
üëå (4) 

[04-Oct-18 11:50 PM] TonyL#3577
There is still bunch of automation have to be done since KMD transaction, gateways deposit, gateways claim are separated now as a different modules and needs human interaction + manual interaction with oraclesfeed needed.

{Reactions}
üëç 

[05-Oct-18 01:12 AM] CrisF#3405
@Deleted User Yes, I think so, too.  The info in channels cpp was very useful.  and now with rco info from mihailo I'll be able to experiment and really have it sink in!  Weekend is here so will have time üòÉ

{Reactions}
üëå 

[05-Oct-18 01:13 AM] Deleted User#0000
just make sure your staked komodo is on latest master and it should all work. Alright merged it in a day or 2 ago now.


[05-Oct-18 01:19 AM] CrisF#3405
Thanks, I updated most nodes about 24hrs ago.  Will check the others now.


[05-Oct-18 01:57 PM] Alright#0419
ok, so I was looking at Tony's examples for s data type he has `05416e746f6e` as an example. Tried it and it works. So the first byte isn't in hex?


[05-Oct-18 01:58 PM] Alright#0419
I assumed the first byte of that would be `35` as opposed to `05`


[05-Oct-18 01:58 PM] Alright#0419
also I did `oraclesdata <txid> 05FFFFFFFFFF` and now when I try `oraclessamples` I'm getting


[05-Oct-18 01:58 PM] Alright#0419
`error: couldn't parse reply from server`


[05-Oct-18 02:00 PM] jl777c#5810
first byte is the length


[05-Oct-18 02:00 PM] jl777c#5810
05 is hex


[05-Oct-18 02:01 PM] Alright#0419
ok, understood


[05-Oct-18 02:01 PM] Alright#0419
but 05FFFFFFFFFF seems to have completely broken the oracle


[05-Oct-18 02:01 PM] Alright#0419
added ones after that and it now gives `error: couldn't parse reply from server` no matter what


[05-Oct-18 02:03 PM] jl777c#5810
a bug?


[05-Oct-18 02:04 PM] Alright#0419
Yes


[05-Oct-18 02:04 PM] Alright#0419
need to see if curl will return something


[05-Oct-18 02:06 PM] jl777c#5810
you can make many test oracles each with a bug duplicated


[05-Oct-18 02:06 PM] jl777c#5810
plz keep track of a list, I will fix them all when I get a chance to revisit oracles

{Reactions}
üëå 

[05-Oct-18 02:07 PM] Alright#0419
same thing with curl btw `{"result":null,"error":{"code":-32700,"message":"Parse error"},"id":null}
`


[05-Oct-18 02:10 PM] jl777c#5810
using the same oraclessamples that worked before


[05-Oct-18 02:13 PM] Alright#0419
yes I did another `oraclesdata` with known working value


[05-Oct-18 02:13 PM] Alright#0419
just grabbing the last one works though


[05-Oct-18 02:13 PM] Alright#0419
so `oraclessamples <txid> 1`


[05-Oct-18 02:14 PM] Alright#0419
05FFFFFFFF just breaks it


[05-Oct-18 02:14 PM] jl777c#5810
what is the format?


[05-Oct-18 02:15 PM] Alright#0419
s


[05-Oct-18 02:15 PM] jl777c#5810
that is a string


[05-Oct-18 02:15 PM] jl777c#5810
try using valid ascii


[05-Oct-18 02:17 PM] jl777c#5810
a data provider making invalid data samples likely wont get renewals


[05-Oct-18 02:17 PM] jl777c#5810
any way that is my excuse for having almost no error checking


[05-Oct-18 02:17 PM] jl777c#5810
üòÉ


[05-Oct-18 02:19 PM] Alright#0419
are the first two bytes length for S?


[05-Oct-18 02:19 PM] jl777c#5810
yes


[05-Oct-18 02:19 PM] jl777c#5810
little endian


[06-Oct-18 04:03 AM] Bryan_Beus#6442
I'm trying to get a faucet cc going. Anyone around that I can ask questions?

I've read through James's "CC made easy" text, and I've read through the `faucet.cpp` file, but am still confused on where to start.

I also checked all the pinned messages, but didn't find anything with a more basic step-by-step for someone with only an intermediate web-dev level of experience.


[06-Oct-18 04:07 AM] Deleted User#0000
very easy. make sure you have -pubkey= set when you start komodo. make sure this address is new and empty


[06-Oct-18 04:07 AM] Deleted User#0000
There needs to be a facuet on the chain


[06-Oct-18 04:08 AM] Deleted User#0000
then just do faucetget RPC


[06-Oct-18 04:08 AM] Deleted User#0000
it will let you take 3 faucetgets


[06-Oct-18 04:08 AM] Deleted User#0000
then you need to stop the daemon and start it with a new -pubkey= with a new unused address


[06-Oct-18 04:08 AM] Bryan_Beus#6442
k, hang on, let me go through this. thank you.


[06-Oct-18 04:09 AM] Deleted User#0000
If you have a chain without a faucet contaract funded obviously you will need to create one and fund it, I have not done that before, but using `komodo-cli help` should give ou the rpc's required


[06-Oct-18 04:10 AM] Deleted User#0000
all CC contracts output a `hex` value in the JSON, which you need to do a `sendrawtransaction` RPC call to send.


[06-Oct-18 04:10 AM] Deleted User#0000
need anyhting else and no body is around ping me


[06-Oct-18 04:11 AM] Bryan_Beus#6442
ok,

I'm working on a test asset chain that I made myself, so sounds like I need to make my own faucet c


[06-Oct-18 04:11 AM] Bryan_Beus#6442
cc


[06-Oct-18 04:11 AM] Deleted User#0000
just check the help, there will be a faucetfund RPC or something similar


[06-Oct-18 04:13 AM] Bryan_Beus#6442
It's empty, unfortunately


[06-Oct-18 04:13 AM] Bryan_Beus#6442
It's my job to fill it! üòÉ


[06-Oct-18 04:13 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB help faucetget
faucetget

siddhartha@aang:~/komodo/src$ 
```


[06-Oct-18 04:15 AM] Bryan_Beus#6442
I'm looking back through James's tutorial... hm...


[06-Oct-18 04:30 AM] Deleted User#0000
it was changed, and maybe the docs were not changed also.


[06-Oct-18 04:30 AM] Deleted User#0000
just do `./komodo-cli -ac_name=AAB help`


[06-Oct-18 04:30 AM] Bryan_Beus#6442
@Deleted User 

If you have time to help on this, it'd be appreciated. I'm not finding anything to indicate how to make a faucet cc, so that you can then use the faucetget rpcs


[06-Oct-18 04:30 AM] Deleted User#0000
and look for the section faucet


[06-Oct-18 04:30 AM] Bryan_Beus#6442
@Deleted User 

I did. There's nothing there.


[06-Oct-18 04:30 AM] jl777c#5810
help | grep faucet


[06-Oct-18 04:31 AM] jl777c#5810
faucetaddress [pubkey]
faucetfund amount
faucetget
faucetinfo


[06-Oct-18 04:31 AM] jl777c#5810
otherwise you dont have ac_cc enabled


[06-Oct-18 04:31 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB help | grep faucet
faucetaddress [pubkey]
faucetfund amount
faucetget
faucetinfo
siddhartha@a
```


[06-Oct-18 04:31 AM] jl777c#5810
ok, so what is wrong with faucetfund?


[06-Oct-18 04:31 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB help | grep faucet
faucetaddress [pubkey]
faucetfund amount
faucetget
faucetinfo
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB help faucetget
faucetget

siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB help faucetaddress
faucetaddress [pubkey]
```


[06-Oct-18 04:31 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB help faucetfund
faucetfund amount
```


[06-Oct-18 04:32 AM] Bryan_Beus#6442
Then help commands are empty... though maybe I just need to do git pull


[06-Oct-18 04:32 AM] jl777c#5810
what more info is needed?


[06-Oct-18 04:32 AM] Bryan_Beus#6442
Um, I'm not on your dev skill level, so I'm not sure what I'm supposed to do, just to get started.


[06-Oct-18 04:32 AM] Bryan_Beus#6442
I know it may seem obvious to you, but to me it's not


[06-Oct-18 04:32 AM] jl777c#5810
did you read the docs that said to faucetfund first?


[06-Oct-18 04:32 AM] jl777c#5810
then faucetget


[06-Oct-18 04:33 AM] Bryan_Beus#6442
Yes...


[06-Oct-18 04:33 AM] jl777c#5810
how can an empty faucet get anything?


[06-Oct-18 04:33 AM] jl777c#5810
there is nothing dev level complicated here


[06-Oct-18 04:33 AM] Bryan_Beus#6442
Well, there's a lot of info about making a pubkey, and something about editing the `faucet.cpp` file


[06-Oct-18 04:33 AM] jl777c#5810
you are overthinking it


[06-Oct-18 04:33 AM] Bryan_Beus#6442
but it sounds like I don't need to do that


[06-Oct-18 04:33 AM] Bryan_Beus#6442
yes


[06-Oct-18 04:33 AM] jl777c#5810
komodo-cli faucetfund 1000


[06-Oct-18 04:33 AM] jl777c#5810
komodo-cli faucetget


[06-Oct-18 04:34 AM] Bryan_Beus#6442
ok, hang on


[06-Oct-18 04:34 AM] jl777c#5810
assuming you are broadcasting the rawtx with komodo-cli sendrawtransaction <hex>


[06-Oct-18 04:34 AM] Bryan_Beus#6442
now it's asking for the pubkey, and I believe I understand how to get that in there...


[06-Oct-18 04:35 AM] Bryan_Beus#6442
FYI, this is the part that is confusing me:

I'll see what I can do without help first

```
In order to get the above values, follow these steps:
A. use getnewaddress to get a new address and put that in the <CC>Normaladdr = ""; line
B. use validateaddress <newaddress from A> to get the pubkey, which is put into the <CC>hexstr[67] = ""; line
C. stop the daemon and start with -pubkey=<pubkey from B> and do a <CC>address rpc call. In the console you will get a printout of the hex for the privkey, assuming the if ( 0 ) in Myprivkey() is enabled (CCutils.cpp)
D. update the CCaddress and privkey and dont forget to change the -pubkey= parameter

The first rpc command to add is <CC>address and to do that, add a line to rpcserver.h and update the commands array in rpcserver.cpp
```


[06-Oct-18 04:35 AM] Bryan_Beus#6442
Specifically, how it states, `<CC>Normaladdr = ""`


[06-Oct-18 04:35 AM] Bryan_Beus#6442
That sounds like we need to edit the file...


[06-Oct-18 04:36 AM] jl777c#5810
if you want to make faucet2 CC


[06-Oct-18 04:36 AM] jl777c#5810
to make a new faucet


[06-Oct-18 04:36 AM] Bryan_Beus#6442
But there's no `Normaladdr` in the `faucet.cpp` file


[06-Oct-18 04:36 AM] Bryan_Beus#6442
okay, so that's about making a new one


[06-Oct-18 04:36 AM] jl777c#5810
requires to make a new facuet with source changes


[06-Oct-18 04:36 AM] Bryan_Beus#6442
Okay


[06-Oct-18 04:36 AM] jl777c#5810
to use the existing faucet, just needs to be funded


[06-Oct-18 04:36 AM] jl777c#5810
i think you are not expecting it to be so easy


[06-Oct-18 04:36 AM] jl777c#5810
is this your first CC?


[06-Oct-18 04:37 AM] jl777c#5810
there are some universal CC things you need to do like -ac_cc= and -pubkey= and sendrawtransaction of the returned hex


[06-Oct-18 04:37 AM] jl777c#5810
given that context, using the faucet CC is the easiest


[06-Oct-18 04:38 AM] Bryan_Beus#6442
Yes, this is my first, and I'm using this experience to write a CC for web plebs, like me.


[06-Oct-18 04:38 AM] Bryan_Beus#6442
(and more than web plebs, but the idea is to get the docs to be as idiot-proof as I can manage. If I can do it, then so can an idiot!)


[06-Oct-18 04:39 AM] Deleted User#0000
to quote @ComputerGenie  `there will always be a bigger idiot`


[06-Oct-18 04:41 AM] Bryan_Beus#6442
Heh. But I am a pretty good baseline.


[06-Oct-18 04:44 AM] Bryan_Beus#6442
So, I did this:

```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB getnewaddress
R9e5YDky7ZrGwU8TL5v2TmscLZJMFVs3X8

siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB validateaddress "R9e5YDky7ZrGwU8TL5v2TmscLZJMFVs3X8"
{
  "isvalid": true,
  "address": "R9e5YDky7ZrGwU8TL5v2TmscLZJMFVs3X8",
  "scriptPubKey": "76a91403f346b76c0617b47427a85fb45c01262052aa3488ac",
  "segid": 15,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c",
  "iscompressed": true,
  "account": ""
}
```

Then I stopped the daemon, and restarted it using this:
```
./komodod -pubkey="033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c" -ac_name=AAB -ac_supply=10000 $1 &
```

But I'm getting this:
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB faucetfund 10 
error code: -1
error message:
to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet

```


[06-Oct-18 04:46 AM] Deleted User#0000
cant use the quotes man


[06-Oct-18 04:46 AM] Deleted User#0000
we found that out early on in Notary season


[06-Oct-18 04:46 AM] Deleted User#0000
remove hte " from the pubkey


[06-Oct-18 04:51 AM] Bryan_Beus#6442
I tried without as well...


[06-Oct-18 04:51 AM] Bryan_Beus#6442
did that first


[06-Oct-18 04:52 AM] jl777c#5810
where is your -ac_cc=2 that enables CC?


[06-Oct-18 04:52 AM] jl777c#5810
a chain that doesnt have CC enabled, doesnt have CC enabled


[06-Oct-18 04:53 AM] Bryan_Beus#6442
Oh, I had -ac_cc=1...


[06-Oct-18 04:53 AM] Bryan_Beus#6442
Let me go back to my notes


[06-Oct-18 04:53 AM] jl777c#5810
ac_cc=1 will work too


[06-Oct-18 04:53 AM] Bryan_Beus#6442
This is what we have in our notes:
```
-ac_cc=1
--------

Setting ``-ac_cc=1`` permits smart contracts on the asset chain, but will not allow the asset chain to interact in cross-chain smart contracts with other asset chains.

-ac_cc=2 to 100
---------------

The values of ``2`` through ``100`` indicate asset chains that can import functions across asset chains, but their coins are not fungible.

For example, an asset chain may be able to query another asset chain on the same ``ac_cc`` cluster for details about a transaction.

However, coins may not be transferred between blockchains.
```


[06-Oct-18 04:53 AM] Bryan_Beus#6442
Ok.


[06-Oct-18 04:53 AM] Bryan_Beus#6442
Well, hmm...


[06-Oct-18 04:54 AM] jl777c#5810
when you start it prints what pubkey it is using


[06-Oct-18 04:54 AM] jl777c#5810
does it show a pubkey or ()


[06-Oct-18 04:54 AM] Bryan_Beus#6442
Here's the command I'm using to launch:
```
./komodod -pubkey=033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c -ac_name=AAB -ac_supply=10000 $1 &
```


[06-Oct-18 04:54 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodod -pubkey=033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c -ac_name=AAB -ac_supply=10000 $1 &
[4] 2525
[3]   Done                    ./komodod -pubkey=033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c -ac_name=AAB -ac_supply=10000 $1
siddhartha@aang:~/komodo/src$ call komodo_args.(./komodod) NOTARY_PUBKEY.(033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c)
>>>>>>>>>> AAB: p2p.8170 rpc.8171 magic.6818d481 1746457729 10000 coins
initialized AAB at 1538826851
finished loading blocks AAB
```


[06-Oct-18 04:54 AM] jl777c#5810
where is the -ac_cc=


[06-Oct-18 04:54 AM] jl777c#5810
./komodod -pubkey=033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c -ac_name=AAB -ac_supply=10000 $1 &


[06-Oct-18 04:54 AM] jl777c#5810
maybe the $1 but that assumes you pass it in each time


[06-Oct-18 04:54 AM] Bryan_Beus#6442
Oh, yes, I forgot that this time


[06-Oct-18 04:55 AM] jl777c#5810
precision is needed


[06-Oct-18 04:55 AM] jl777c#5810
why make a variable for something that is constant?


[06-Oct-18 04:55 AM] jl777c#5810
that only leads to the chance to forget


[06-Oct-18 04:56 AM] Bryan_Beus#6442
Did this:
```
siddhartha@aang:~/komodo/src$ call komodo_args.(./komodod) NOTARY_PUBKEY.(033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c)
>>>>>>>>>> AAB: p2p.8170 rpc.8171 magic.6818d481 1746457729 10000 coins
initialized AAB at 1538826913
set addressindex, will reindex. sorry will take a while.
set spentindex, will reindex. sorry will take a while.
finished loading blocks AAB
fAddressIndex.1/1 fSpentIndex.1/1
fAddressIndex.1/1 fSpentIndex.1/1
height.0 slowflag.1 possible.0 cmp.0

```
Still getting `to use CC contracts you need a valid pubkey`...


[06-Oct-18 04:56 AM] Bryan_Beus#6442
correction, this is the launch command:
```
./komodod -pubkey=033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c -ac_name=AAB -ac_supply=10000 -ac_cc=1 $1 &
```


[06-Oct-18 04:57 AM] Bryan_Beus#6442
I don't have any variables. I know very little about shell scripting.


[06-Oct-18 04:57 AM] Bryan_Beus#6442
The $1 is just something that I put in there, because I see it in all the launch params for the other asset chains we have.


[06-Oct-18 04:57 AM] Bryan_Beus#6442
I can leave it out.


[06-Oct-18 04:58 AM] jl777c#5810
NOTARY_PUBKEY.(033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c)


[06-Oct-18 04:58 AM] jl777c#5810
your pubkey is noticed


[06-Oct-18 04:58 AM] jl777c#5810
it should be working now


[06-Oct-18 04:59 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB faucetfund 10 
error code: -1
error message:
to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet

```


[06-Oct-18 05:00 AM] jl777c#5810
validateaddress R9e5YDky7ZrGwU8TL5v2TmscLZJMFVs3X8


[06-Oct-18 05:01 AM] Bryan_Beus#6442
Did this earlier.
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB validateaddress "R9e5YDky7ZrGwU8TL5v2TmscLZJMFVs3X8"
{
  "isvalid": true,
  "address": "R9e5YDky7ZrGwU8TL5v2TmscLZJMFVs3X8",
  "scriptPubKey": "76a91403f346b76c0617b47427a85fb45c01262052aa3488ac",
  "segid": 15,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c",
  "iscompressed": true,
  "account": ""
}
```


[06-Oct-18 05:01 AM] Bryan_Beus#6442
Should I be using `scriptPubKey`?


[06-Oct-18 05:01 AM] jl777c#5810
no, all seems right


[06-Oct-18 05:01 AM] Bryan_Beus#6442
Hmm... what could I be doing wrong then...


[06-Oct-18 05:02 AM] jl777c#5810
do a faucetaddress


[06-Oct-18 05:02 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAB faucetaddress
error code: -1
error message:
to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet. ERR=-1


```


[06-Oct-18 05:02 AM] Bryan_Beus#6442
maybe the pubkey isn't in my wallet?


[06-Oct-18 05:03 AM] jl777c#5810
"ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "033a7af03e6c2a8199e95a90b46530ea677d2d526258b83ab5561f562cbf4bd08c",


[06-Oct-18 05:03 AM] Bryan_Beus#6442
so, it's in my wallet


[06-Oct-18 05:04 AM] jl777c#5810
can you start from scratch and NEVER forget the -ac_cc=1


[06-Oct-18 05:04 AM] Bryan_Beus#6442
Sure, just make a new chain entirely?


[06-Oct-18 05:04 AM] Bryan_Beus#6442
Yes, I can do that.


[06-Oct-18 05:04 AM] Bryan_Beus#6442
It'll take a few minutes.


[06-Oct-18 05:04 AM] jl777c#5810
it could be running it with and wihout and with got into a bad state


[06-Oct-18 05:05 AM] Bryan_Beus#6442
interesting, gtk


[06-Oct-18 05:06 AM] Bryan_Beus#6442
launch command on machine 1:
```
./komodod -ac_name=AAC -ac_supply=100000 -ac_cc=1 -addnode=192.168.1.101 -gen -genproclimit=$(nproc) &
```


[06-Oct-18 05:09 AM] Mylo#8306
Ah interesting about the start without and with ac_cc on an already existing chain.  I think I‚Äôve hit this snag before if that is the case


[06-Oct-18 05:13 AM] Mylo#8306
Off-topic, but I‚Äôm using a Makefile and the `make` command to reduce errors when doing work with docker and vps deployment.      Same could be done with chains.  In all this test environment across multiple chains and testers


[06-Oct-18 05:13 AM] Bryan_Beus#6442
mining is up and running

Here's the address:
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC getnewaddress
RHJqRaP2XaxSeSMY2eXHm3JcYfSTE2Am93
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC validateaddress "RHJqRaP2XaxSeSMY2eXHm3JcYfSTE2Am93"
{
  "isvalid": true,
  "address": "RHJqRaP2XaxSeSMY2eXHm3JcYfSTE2Am93",
  "scriptPubKey": "76a914581098d47077201512b18386d6c8646151c89e6d88ac",
  "segid": 51,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "0271ab1e303b382c88719bc6f4a2b00cf2486025b8681290fcd69bacf579bf0e21",
  "iscompressed": true,
  "account": ""
}
```


[06-Oct-18 05:14 AM] Bryan_Beus#6442
Here's the relaunch command:
```
./komodod -pubkey=0271ab1e303b382c88719bc6f4a2b00cf2486025b8681290fcd69bacf579bf0e21 -ac_name=AAC -ac_supply=100000 -ac_cc=1 -addnode=192.168.1.101 -gen -genproclimit=$(nproc) &
```


[06-Oct-18 05:15 AM] Bryan_Beus#6442
There we go:
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC faucetaddress
{
  "result": "success",
  "FaucetCCaddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "Faucetmarker": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk",
  "GatewaysPubkey": "03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40",
  "FaucetCCassets": "RRNhaZSNaXWJEMXfRKQSz4vTaXhX7ThMxn",
  "myCCaddress": "RUEYyoS4E1yDyVh6EFZYTTY9EzGtpXHxbT",
  "myaddress": "RHJqRaP2XaxSeSMY2eXHm3JcYfSTE2Am93"
}
```


[06-Oct-18 05:15 AM] Bryan_Beus#6442
Ok, so launching w/o the `ac_cc` param will mess up something permanently...

I'll make a note of that.


[06-Oct-18 05:17 AM] Mylo#8306
üôè thanks @Bryan_Beus appreesh that discovery üòÉ


[06-Oct-18 05:17 AM] Bryan_Beus#6442
:abusedsmily:


[06-Oct-18 05:17 AM] jl777c#5810
yes technically they are different chains


[06-Oct-18 05:17 AM] Bryan_Beus#6442
right


[06-Oct-18 05:17 AM] jl777c#5810
but sharing the same name, dir, etc


[06-Oct-18 05:17 AM] jl777c#5810
big mess


[06-Oct-18 05:17 AM] Bryan_Beus#6442
it's weird that the issue is permanent, though


[06-Oct-18 05:17 AM] jl777c#5810
wont work


[06-Oct-18 05:17 AM] Bryan_Beus#6442
okay


[06-Oct-18 05:18 AM] Bryan_Beus#6442
makes sense


[06-Oct-18 05:18 AM] jl777c#5810
every try sharing the same directory with two different things, using the same names


[06-Oct-18 05:18 AM] jl777c#5810
cant even imaging all the things that could go wrong


[06-Oct-18 05:18 AM] jl777c#5810
amazing it didnt just crash


[06-Oct-18 05:18 AM] Bryan_Beus#6442
hmm, okay


[06-Oct-18 05:18 AM] Bryan_Beus#6442
gtk


[06-Oct-18 05:23 AM] Bryan_Beus#6442
I'm going to separate out the documentation so that there's two tracks - one for people who just want to use the existing commands, and one for people who want to write an actual cc...

For people who want to write an actual cc, I think we'll just leave them what you've already written, jl777

For all the pleb devs, I almost wonder if all this can be combined with the rpc calls in the basic API docs.

I'll wait 'till I finish them all to decide, but if it's just an rpc call, i don't see why not.


[06-Oct-18 05:25 AM] Bryan_Beus#6442
So, I'm doing something else wrong here:
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC faucetfund 100
{
  "result": "success",
  "hex": "010000000159114de885ac6429835feb3c8513288c647dd69b9f867d755dbfe8e9a4dec6d40000000049483045022100bc5d358be7efc890b22f0d70f73bbb6c3d3390419899db4ae47a44762fd126bb02204e737a41a813f15f5e74d2bbed0138372692f57fadd62049bc0cc462a43fe77301ffffffff0200e40b5402000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc2884dcfa1509000023210271ab1e303b382c88719bc6f4a2b00cf2486025b8681290fcd69bacf579bf0e21ac00000000"
}
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC faucetget
{
  "result": "error",
  "error": "couldnt create faucet get transaction"
}
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "0.00000000"
}
```


[06-Oct-18 05:26 AM] SHossain#0007
@Bryan_Beus if you are the only one mining for test, you can use `-genproclimit=1` instead of `-genproclimit=$(nproc)` to use less CPU core and it will still work fine.


[06-Oct-18 05:26 AM] Bryan_Beus#6442
oh, ya....


[06-Oct-18 05:26 AM] SHossain#0007
otherwise, most of your CPU threads will be mining


[06-Oct-18 05:26 AM] Bryan_Beus#6442
good point


[06-Oct-18 05:27 AM] Bryan_Beus#6442
I think there's a command for turning down the nproc without relaunching...


[06-Oct-18 05:28 AM] jl777c#5810
you didnt seem to do a sendrawtransaction of the hex like you need to


[06-Oct-18 05:28 AM] jl777c#5810
if you dont broadcast the rawtx, the rawtx is not broadcast


[06-Oct-18 05:28 AM] jl777c#5810
if the tx is not broadcast, no node processes it


[06-Oct-18 05:28 AM] jl777c#5810
if no node processes it, it is the same as if it didnt happen


[06-Oct-18 05:28 AM] Bryan_Beus#6442
setgenerate


[06-Oct-18 05:28 AM] jl777c#5810
setgenerate true 1


[06-Oct-18 05:29 AM] Bryan_Beus#6442
thx


[06-Oct-18 05:29 AM] Bryan_Beus#6442
okay, let's see...


[06-Oct-18 05:29 AM] jl777c#5810
also until it confirms, it isnt really active


[06-Oct-18 05:30 AM] jl777c#5810
there are some rate exceptions to this, but for the most part CC tx needs to confirm to take effect


[06-Oct-18 05:30 AM] jl777c#5810
rare


[06-Oct-18 05:30 AM] Bryan_Beus#6442
not seeing where/how to sendrawtransaction...


[06-Oct-18 05:31 AM] Bryan_Beus#6442
I don't seem to have `sendrawtransaction` in the basic API/rpc commands doc...


[06-Oct-18 05:31 AM] Bryan_Beus#6442
but I see it in `./komodo-cli -ac_name=AAC help sendrawtransaction`


[06-Oct-18 05:32 AM] Bryan_Beus#6442
oh, nm


[06-Oct-18 05:32 AM] Bryan_Beus#6442
I was looking in the ac params


[06-Oct-18 05:32 AM] jl777c#5810
it is a "norma" signed transaction as far as the daemon is concerned


[06-Oct-18 05:34 AM] Bryan_Beus#6442
do I need to sign it first? Is that what you're referring to about the "normal" signed tx?


[06-Oct-18 05:34 AM] Bryan_Beus#6442
just sendrawtransaction with the hex from `faucetfund` didn't seem to produce a result in `faucetinfo`


[06-Oct-18 05:35 AM] jl777c#5810
did you get a txid


[06-Oct-18 05:35 AM] jl777c#5810
did the txid confirm


[06-Oct-18 05:36 AM] jl777c#5810
when I say it needs to be confirmed to have any effect, i mean that until it is confirmed it wont have any effect


[06-Oct-18 05:37 AM] Bryan_Beus#6442
```
  {
    "account": "",
    "address": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
    "category": "send",
    "amount": -100.00000000,
    "vout": 0,
    "fee": -0.00010000,
    "confirmations": 4,
    "blockhash": "02c579c9f00b7f6b3ca9acd2b130d1c33af232e362d825b16a85ba8ba859779a",
    "blockindex": 1,
    "blocktime": 1538829230,
    "expiryheight": 0,
    "txid": "026e4db7cbc82067fa9166eb18e3b4ba5f2aaacfdc800c310e209faa51e864cf",
    "walletconflicts": [
    ],
    "time": 1538829174,
    "timereceived": 1538829174,
    "vjoinsplit": [
    ],
    "size": 225
  }
```


[06-Oct-18 05:37 AM] jl777c#5810
"confirmations": 4,


[06-Oct-18 05:37 AM] Bryan_Beus#6442
right


[06-Oct-18 05:37 AM] jl777c#5810
ok so what does faucetinfo say now


[06-Oct-18 05:38 AM] Bryan_Beus#6442
Okay, it's registering now


[06-Oct-18 05:38 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "100.00000000"
}
```


[06-Oct-18 05:39 AM] Bryan_Beus#6442
waiting on this command:

```
./komodo-cli -ac_name=AAC faucetget
```

If I understand correctly, this is supposed to take a minute or two to execute.


[06-Oct-18 05:40 AM] SHossain#0007
for `faucetget` you need to start the daemon with a new pubkey and no balance in it. ideally, you may need a 3rd node, since you are using 2 to mine and keep the network up.


[06-Oct-18 05:41 AM] SHossain#0007
why don't you just use the CCNG chain? params are pinned and there are nodes mining it. giving you flexibility only to test


[06-Oct-18 05:41 AM] Bryan_Beus#6442
Oh... so the command I executed isn't going to work...


[06-Oct-18 05:41 AM] Bryan_Beus#6442
I'm just not familiar with CCNG


[06-Oct-18 05:42 AM] Bryan_Beus#6442
I saw it in the pinned messages, but didn't have time to explore it.


[06-Oct-18 05:42 AM] SHossain#0007
it will work. but, if you have balance already in you address, you can't claim faucet funds. that is the rule


[06-Oct-18 05:42 AM] Bryan_Beus#6442
The output is a bit confusing:
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC faucetget
{
  "result": "success",
  "hex": "0100000001cf64e851aa9f200e310c80dccfaa2a5fbab4e318eb6691fa6720c8cbb74d6e02000000007b4c79a276a072a26ba067a565802103682b255c40d0cde8faee381a1a50bbb89980ff24539cb8518e294d3a63cefe1281406139c5adacec404d6a8ec5283343ef619964b526681edd1ca5d35f74ba63390f727a05a64065a833c5c26687a20e0c5a15d66613c36bfa7b0384589d70aa2f22a100af038001e4a10001ffffffff037026735302000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc809698000000000023210271ab1e303b382c88719bc6f4a2b00cf2486025b8681290fcd69bacf579bf0e21ac0000000000000000086a06e4476d5d9e0300000000"
}
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "100.00000000"
}
```


[06-Oct-18 05:43 AM] Bryan_Beus#6442
It would appear that it successful send the 0.1 coins back to the faucet pubkey, correct?


[06-Oct-18 05:43 AM] SHossain#0007
you ddin't broadcast the `hex` using `sendrawtransaction`


[06-Oct-18 05:43 AM] Bryan_Beus#6442
Ok, so we need to do that with each cc command?


[06-Oct-18 05:43 AM] SHossain#0007
each one of them. if you don't broadcast, no one will know


[06-Oct-18 05:44 AM] SHossain#0007
https://github.com/KomodoPlatform/Mastering_CryptoConditions/tree/master/docs/faucet

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/tree/master/docs/faucet
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[06-Oct-18 05:44 AM] SHossain#0007
here is the faucet docs which is a good read before trying


[06-Oct-18 05:44 AM] Bryan_Beus#6442
Out of curiosity, why don't we just automate the sendrawtransaction part?


[06-Oct-18 05:44 AM] SHossain#0007
here is how to use `faucetget` https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/docs/faucet/faucetget.md

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/docs/faucet/faucetget.md
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[06-Oct-18 05:46 AM] Bryan_Beus#6442
looking.

Yes, these are more stylistically inline with our previous documentation.


[06-Oct-18 05:47 AM] Bryan_Beus#6442
Why don't we automate the `sendrawtransaction` part, out of curiosity?


[06-Oct-18 05:52 AM] CrisF#3405
I'm trying to make a script to do this now, haha.  :abusedsmily: 
I have a new strategy: KISS.
Learning a  lot from the process!


[06-Oct-18 05:52 AM] Bryan_Beus#6442
Oh, good.


[06-Oct-18 05:52 AM] Bryan_Beus#6442
Yes, it seems like an unnecessary step.


[06-Oct-18 05:52 AM] Bryan_Beus#6442
for a normal user


[06-Oct-18 05:54 AM] CrisF#3405
I don't have any idea yet why they are how they are.  There might be times in the future when I want flexibility in broadcasting.


[06-Oct-18 05:54 AM] SHossain#0007
@Bryan_Beus normal users are not testing this üòõ


[06-Oct-18 05:54 AM] SHossain#0007
we are (ab)normal creatures üòÑ


[06-Oct-18 05:55 AM] CrisF#3405
Are you calling me names, @SHossain  üòã


[06-Oct-18 05:55 AM] SHossain#0007
calling myself first.


[06-Oct-18 05:55 AM] CrisF#3405
Haha


[06-Oct-18 05:58 AM] SHossain#0007
i'm no coder or programmer.


[06-Oct-18 05:58 AM] SHossain#0007
i just follow the instructions


[06-Oct-18 05:59 AM] SHossain#0007
in a good way, we are advanced users


[06-Oct-18 05:59 AM] Bryan_Beus#6442
Ok, so faucet was easy.


[06-Oct-18 06:00 AM] Bryan_Beus#6442
thank you all


[06-Oct-18 06:00 AM] Bryan_Beus#6442
On to the next one...

{Reactions}
üëçüèΩ 

[06-Oct-18 06:03 AM] Bryan_Beus#6442
Taking a look at `tokens`


[06-Oct-18 06:03 AM] jl777c#5810
once you get the basic workings understood, most all the CC are the same, with just details on what each CC does being different


[06-Oct-18 06:03 AM] jl777c#5810
as to why i dont automatically broadcast is that it changes the state of the chain if you broadcast it


[06-Oct-18 06:03 AM] Bryan_Beus#6442
Yes. I'm just finding the Mastering Cryptoconditions docs, as well, which are also making it much easier.


[06-Oct-18 06:04 AM] Bryan_Beus#6442
Ok, gtk


[06-Oct-18 06:04 AM] jl777c#5810
so you can duplicate a bug and then destroy it by auto-broadcasting


[06-Oct-18 06:04 AM] jl777c#5810
this also allows a gui to get user confirmation before sending the tx


[06-Oct-18 06:04 AM] Bryan_Beus#6442
ok


[06-Oct-18 06:04 AM] jl777c#5810
it is not hard to make a script to autoboradcast


[06-Oct-18 06:04 AM] Bryan_Beus#6442
right


[06-Oct-18 06:04 AM] jl777c#5810
but impossible to not broadcast and autobroadcasting rpc


[06-Oct-18 06:05 AM] Bryan_Beus#6442
right


[06-Oct-18 06:05 AM] jl777c#5810
rpc needs to do the least common denominator


[06-Oct-18 06:05 AM] Bryan_Beus#6442
ok, gtk


[06-Oct-18 06:05 AM] jl777c#5810
else it becomes harder to combine. though in this case it is primarily for debug purpose and adding a "broadcast":1 flag is a possibility


[06-Oct-18 06:05 AM] jl777c#5810
maybe I can add a non-debug mode where all CC are autobroadcast after that rpc call is set


[06-Oct-18 06:06 AM] jl777c#5810
but this is not very hard to deal with either way


[06-Oct-18 06:08 AM] Bryan_Beus#6442
right


[06-Oct-18 07:25 AM] Bryan_Beus#6442
Trying to do `tokenask` on another node.


[06-Oct-18 07:27 AM] Bryan_Beus#6442
This is what I'm getting, haven't figured out yet what I'm doing wrong:

```
siddhartha@zuko:/opt/AgamaApp/resources/app/assets/bin/linux64$ ./komodo-cli -ac_name=AAC tokenlist
[
  "29cd95c7e0c9f857b0a9513535e273aaa30c28fff97daac4a27519b341669780"
]
siddhartha@zuko:/opt/AgamaApp/resources/app/assets/bin/linux64$ ./komodo-cli -ac_name=AAC tokeninfo "29cd95c7e0c9f857b0a9513535e273aaa30c28fff97daac4a27519b341669780"
{
  "result": "success",
  "tokenid": "29cd95c7e0c9f857b0a9513535e273aaa30c28fff97daac4a27519b341669780",
  "owner": "02bb263ecaf443560787e9cc8bfaa0ebdfdfd87057f2e1f44b649ba8b9c6aa970d",
  "name": "TEST",
  "supply": 100000000,
  "description": "A test token"
}
siddhartha@zuko:/opt/AgamaApp/resources/app/assets/bin/linux64$ ./komodo-cli -ac_name=AAC tokenask 1 "29cd95c7e0c9f857b0a9513535e273aaa30c28fff97daac4a27519b341669780" 1
{
  "result": "error",
  "error": "couldnt create ask"
}
```


[06-Oct-18 07:28 AM] Bryan_Beus#6442
Any ideas?


[06-Oct-18 07:34 AM] jl777c#5810
do you have any of the tokens?


[06-Oct-18 07:35 AM] jl777c#5810
you cant ask without having the token, you cant bid without any coins


[06-Oct-18 07:42 AM] Bryan_Beus#6442
I should...


[06-Oct-18 07:42 AM] Bryan_Beus#6442
I'm also trying to transfer a token, but finding this one difficult as well.


[06-Oct-18 07:42 AM] jl777c#5810
TonyL will know how


[06-Oct-18 07:42 AM] jl777c#5810
there is a test guide somewhere where all steps are detailed out


[06-Oct-18 07:42 AM] jl777c#5810
i dont have time to walk you through each step


[06-Oct-18 07:42 AM] Bryan_Beus#6442
oh, that's right


[06-Oct-18 07:43 AM] Bryan_Beus#6442
I'm doing as much as I can without asking for help.


[06-Oct-18 07:43 AM] Bryan_Beus#6442
Only asking when I get stuck.


[06-Oct-18 07:45 AM] SHossain#0007
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=506594567

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[06-Oct-18 07:46 AM] SHossain#0007
Check bottom-left corner for different contracts


[06-Oct-18 07:46 AM] SHossain#0007
token is there


[06-Oct-18 07:47 AM] SHossain#0007
https://github.com/KomodoPlatform/Mastering_CryptoConditions/tree/master/docs/token

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/tree/master/docs/token
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[06-Oct-18 07:47 AM] SHossain#0007
here are the dev docs.


[06-Oct-18 07:49 AM] SHossain#0007
please take some time to read. all API RPC calls are listed there. by looking at the name of commands will give you a general idea about the purpose of those calls and what is possible.


[06-Oct-18 07:49 AM] SHossain#0007
if there is any questions or suggestions to make this better, please let us know or submit a PR in that repo. üòÉ


[06-Oct-18 07:51 AM] Bryan_Beus#6442
Ok, thank you. I saw this earlier, but wasn't familiar enough yet to use it. Thx


[06-Oct-18 07:55 AM] SHossain#0007
jl777 made most of the rpc calls easily understandable. all you have to do is, when you get a hex of raw transaction, you need to broadcast it


[06-Oct-18 07:55 AM] Bryan_Beus#6442
I seem to have made my tokens disappear...


[06-Oct-18 07:55 AM] Bryan_Beus#6442
üòÉ


[06-Oct-18 07:55 AM] SHossain#0007
block confirmation is another important thing


[06-Oct-18 07:56 AM] SHossain#0007
once, you broadcast any tx, until it confirms, balance may disappear or information may not show


[06-Oct-18 07:56 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC tokenlist
[
  "29cd95c7e0c9f857b0a9513535e273aaa30c28fff97daac4a27519b341669780"
]
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC tokenbalance "29cd95c7e0c9f857b0a9513535e273aaa30c28fff97daac4a27519b341669780"
{
  "result": "success",
  "CCaddress": "RNvzJHVXPN8cJWmPhy5tCW6akNmg6xb9gV",
  "tokenid": "29cd95c7e0c9f857b0a9513535e273aaa30c28fff97daac4a27519b341669780",
  "balance": 0
}
```


[06-Oct-18 07:56 AM] Bryan_Beus#6442
it's been gone for awhile...


[06-Oct-18 07:57 AM] SHossain#0007
what did you do before that?


[06-Oct-18 07:59 AM] Bryan_Beus#6442
I did a few more transactions and mined them, and now it's registering.


[06-Oct-18 07:59 AM] SHossain#0007
did you use `tokentransfer`?


[06-Oct-18 07:59 AM] Bryan_Beus#6442
One `sendrawtransaction` wasn't enough to trigger a block, apparently.


[06-Oct-18 07:59 AM] Bryan_Beus#6442
I did


[06-Oct-18 07:59 AM] Bryan_Beus#6442
let me check if the other node has it now


[06-Oct-18 07:59 AM] SHossain#0007
how many confirmation does the tx have?


[06-Oct-18 08:00 AM] Bryan_Beus#6442
the tokentransfer tx? Hmm, one sec.

My baby is waking up. Work will have to be done for the day after this.


[06-Oct-18 08:01 AM] Bryan_Beus#6442
```
siddhartha@aang:~/komodo/src$ ./komodo-cli -ac_name=AAC gettxout "a24f3aa14ac5f623cbdb237740983189dfd2e4a388f42653adfd34fd37a6e411" 1
{
  "bestblock": "0204056d4648fb8dfc4811338139c06be03d074f16b51f9505e666eb04b8298d",
  "confirmations": 1,
  "value": 0.99999900,
  "scriptPubKey": {
    "asm": "a22c80207619580fcd4feb33e1402ee8264dbcf949c2bd44ae7d54999632dc9a67a8a1ac8103120c008203000401 OP_CHECKCRYPTOCONDITION",
    "hex": "2ea22c80207619580fcd4feb33e1402ee8264dbcf949c2bd44ae7d54999632dc9a67a8a1ac8103120c008203000401cc",
    "reqSigs": 1,
    "type": "cryptocondition",
    "addresses": [
      "RNvzJHVXPN8cJWmPhy5tCW6akNmg6xb9gV"
    ]
  },
  "version": 1,
  "coinbase": false
}
```


[06-Oct-18 08:01 AM] Bryan_Beus#6442
Looks like it only processed once I sent another (non cc) tx


[06-Oct-18 08:02 AM] SHossain#0007
now, do you see accurate token balance?


[06-Oct-18 08:07 AM] Bryan_Beus#6442
yep


[06-Oct-18 08:12 AM] SHossain#0007
they didn't disappear. they were just in unconfirmed state


[06-Oct-18 08:13 AM] SHossain#0007
it is always good to use `./komodo-cli -ac_name=AAC getrawmempool` to see if the tx is in mempool or confirmed after broadcasting a tx.


[07-Oct-18 02:44 AM] TonyL#3577
I'm in relocation travel now, will be fully available from tomorrow. Channels CC and more TUI work under aim.

{Reactions}
Komodo (2) rum (3) 

[07-Oct-18 10:15 PM] TonyL#3577
Just started to test channels CC:
@Mihailo `channelsinfo` call allows get an information about channel like a:
```  "Channel": "RC3VHbSFQioJsu3xb3qPuEr9dSW3VqZhWj - 10 payments of 800000000 satoshi - 33a0d659acde3caf7f9b81fd6e0621924365fe58a9fc7ce772a2c54d795f010a"
```


[07-Oct-18 10:16 PM] TonyL#3577
I've made one payment. It's still 10 payments. Is here any way to check how many payments left in channel?
Also how to get the information if channel is open or already closed?


[07-Oct-18 10:19 PM] TonyL#3577
Noticed that now is possible to create channel like this (with payment amount < tx fee):
```  "Channel": "RC3VHbSFQioJsu3xb3qPuEr9dSW3VqZhWj - 10 payments of 8 satoshi - 200013b8e0a770b359a46689e3b457a4ac0fe48f9586728726e6f697d70715ae",
```
What is creating not working "dead" channel: 
```./komodo-cli -ac_name=CCNG channelspayment 200013b8e0a770b359a46689e3b457a4ac0fe48f9586728726e6f697d70715ae 8
{
  "result": "success",
  "hex": hex
}
```
```./komodo-cli -ac_name=CCNG sendrawtransaction hex^^
error code: -26
error message:
64: dust
```


[07-Oct-18 10:24 PM] TonyL#3577
Can't broadcast `channelsclose` tx hex for this 8 sathoshies channel as well. (for 800000000 sats `channelsclose` broadcasted) with error:
```error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```


[07-Oct-18 10:29 PM] TonyL#3577
For "correct" channel all `channelsopen` `channelspayment` `channelsclose` `channelsrefund` seems worked correct


[08-Oct-18 12:11 AM] Deleted User#0000
@CrisF


[08-Oct-18 01:00 AM] CrisF#3405
üëç


[08-Oct-18 01:36 AM] jl777c#5810
@Mihailo bugs!


[08-Oct-18 01:38 AM] jorian#4555
the famous -26 error


[08-Oct-18 01:55 AM] jl777c#5810
the amount is too small, hence dust. we might need to make an exception for this


[08-Oct-18 01:55 AM] TonyL#3577
Yep, amount is < than tx fee


[08-Oct-18 02:02 AM] jl777c#5810
so maybe we just need an error check on channel creation that the minimum payment is at least txfee


[08-Oct-18 03:54 AM] Mihailo#5902
@TonyL For payment, you should give the amount you want to pay, and not the number of payments. I have not done all the checks for correctness. This needs to be done.


[08-Oct-18 03:55 AM] Mihailo#5902
Just for the short time, can you call RPC with correct arguments and I'll do the checking right away.


[08-Oct-18 03:55 AM] TonyL#3577
@Mihailo Yes, I'm calling amount, not number. Sure - with correct arguments basic test seems passed


[08-Oct-18 03:56 AM] TonyL#3577
Opened channel, did payment, closed channels, made refund


[08-Oct-18 03:56 AM] TonyL#3577
All the sums changed correct


[08-Oct-18 03:56 AM] Mihailo#5902
For the channelinfo, if you do not pass channel open tx id it will give you the list of channels, and if you pass the tx id, then you will see the info for that channel


[08-Oct-18 03:57 AM] TonyL#3577
Yes, info for particular channel is the same as in list - checked it as well


[08-Oct-18 03:58 AM] Mihailo#5902
And for particular channel you should see the info how much is left after each payment. But if it is better UX we can add it in the first list.


[08-Oct-18 03:58 AM] TonyL#3577
Hmm didn't see info about how much is left. Let me re-check please


[08-Oct-18 04:06 AM] CrisF#3405
I also don't remember seeing how much was left.


[08-Oct-18 04:07 AM] CrisF#3405
Unable to check at the moment.


[08-Oct-18 04:15 AM] TonyL#3577
Yup, counter in `channelsinfo` works:
```./komodo-cli -ac_name=CCNG channelsopen 027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4 10 10000000
```
```
 ./komodo-cli -ac_name=CCNG channelsinfo 2f95b0f4e3dbe7f5ebc0f9479800c9ff3f44e76f5378313c9406ab5a92ff4631
{
  "result": "success",
  "name": "Channel RC3VHbSFQioJsu3xb3qPuEr9dSW3VqZhWj",
  "Open": "10 payments of 10000000 satoshi"
}
```
```./komodo-cli -ac_name=CCNG channelspayment 2f95b0f4e3dbe7f5ebc0f9479800c9ff3f44e76f5378313c9406ab5a92ff4631 10000000```
```./komodo-cli -ac_name=CCNG channelsinfo 2f95b0f4e3dbe7f5ebc0f9479800c9ff3f44e76f5378313c9406ab5a92ff4631
{
  "result": "success",
  "name": "Channel RC3VHbSFQioJsu3xb3qPuEr9dSW3VqZhWj",
  "Open": "10 payments of 10000000 satoshi",
  "Payment": "10000000 satoshi to RUB9qtKwBj4Gt9HY6Vy117AtCdEutVCzCk, 9 payments left"
}
```


[08-Oct-18 04:15 AM] CrisF#3405
üëç


[08-Oct-18 04:16 AM] Mihailo#5902
Maybe it is more intuitive to put it on top, or in the global list so it can be known righ away how much is left...


[08-Oct-18 04:16 AM] TonyL#3577
@Mihailo Why I have to declare `payment_amount` in `channelspayment` call if I can't choose other than I've set in `channelsopen` ?


[08-Oct-18 04:17 AM] TonyL#3577
@Mihailo I think it might be useful for dAPP devs if it'll be in separate parameter in JSON:
Like a: 
```
result:
name:
amount:
wallet:
payments_left:```
And common list like a array of such arrays


[08-Oct-18 04:17 AM] TonyL#3577
Now it will be hard to parse


[08-Oct-18 04:19 AM] Mihailo#5902
Well, that is good question. I remember once talking with JL should we put amount or number of payments and I think we said at that time that amount is better. But as you say, because you cannot use nothing else except the multiply of denomination set in open, maybe we can but the number of denominations...


[08-Oct-18 04:22 AM] TonyL#3577
I thought first that ` payment_amount ` determine maximum payment amount but now it determine `only` amount which confused me a little bit while testing


[08-Oct-18 04:29 AM] Mihailo#5902
Basically, what you put in channel open is the denomination you will use for payment. If you want to make exact payments, you open multiple channels with different denominations. For example, one for whole coin, one for 0.1, one for 0.01 and with those thre you can make any X.YZ amount.

{Reactions}
üëç (2) 

[08-Oct-18 04:29 AM] TonyL#3577
Oh I see now


[08-Oct-18 04:31 AM] Mihailo#5902
There is a limit of 1000 payments per channel. So instead of creating one channel with small denomination and using it for any amount, you make few channels with each denomination you need.

{Reactions}
üëå 

[08-Oct-18 04:32 AM] Mihailo#5902
I need to add those checks now to prevent using RPC with invalid arguments.

{Reactions}
üëå (2) 

[08-Oct-18 05:02 AM] Mylo#8306
@TonyL re: multiple channel payments for X.YZ amount https://github.com/jl777/komodo/blob/FSM/src/cc/channels.cpp#L27

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/channels.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Reactions}
üôå 

[08-Oct-18 05:15 AM] TonyL#3577
Thanks a lot @Mylo ! A bit different sets of info on channelsCC in MasteringCryptoconditions, channels.cpp and CC Made easy so a little bit lost ‚ò∫


[08-Oct-18 05:17 AM] Mylo#8306
Hey at least you've got a channel working!!   I'm behind on the "actually using the code" part, otherwise may be able to offer some assistance, but I'm nearly caught up - I'm currently working on a flowchart (v0.01) and spin up an AC to test my understanding of reading the notes.  At the same time will be getting the instructions for #cc-gui - so by end of week, hopefully i'm able to be a bit more help instead of just pointing to stuff üëâ üëà


[08-Oct-18 06:30 AM] Bryan_Beus#6442
What do we have by way of an explorer for tokens?


[08-Oct-18 06:31 AM] jl777c#5810
we are a dozen GUI behind the latest CC rpc


[08-Oct-18 06:32 AM] Bryan_Beus#6442
I came back to where I was on Saturday to pick up work, and I've lost the pubkey I was working with.

It's a test chain, so it doesn't matter. But it got me wondering what a user would do to trace down those coins?


[08-Oct-18 06:34 AM] jl777c#5810
ask the chain creator for free coins to compensate them for the loss and mental hardships


[08-Oct-18 06:34 AM] Bryan_Beus#6442
üòÉ


[08-Oct-18 06:35 AM] Bryan_Beus#6442
So, just to be clear, we have no transaction history for tokens, is that correct?


[08-Oct-18 06:35 AM] jl777c#5810
there is addresstxids rpc call


[08-Oct-18 06:35 AM] jl777c#5810
getaddresstxids


[08-Oct-18 06:35 AM] jl777c#5810
getaddressbalance, etc


[08-Oct-18 06:36 AM] jl777c#5810
given your token address, you can get a list of txid


[08-Oct-18 06:36 AM] jl777c#5810
but if you lost your privkey, you cant do much


[08-Oct-18 06:36 AM] Bryan_Beus#6442
Right, I haven't lost the privkey, but just the pubkey. I should still have all privkeys in my wallet.dat


[08-Oct-18 06:36 AM] jl777c#5810
then just get the pubkey again


[08-Oct-18 06:36 AM] Bryan_Beus#6442
So, I should be able to find the pubkey, by iterating through all addresses in my wallet.


[08-Oct-18 06:37 AM] Bryan_Beus#6442
Just out of curiosity. Not going to do this.


[08-Oct-18 06:37 AM] jl777c#5810
no


[08-Oct-18 06:37 AM] jl777c#5810
for CC it is implemented as using the -pubkey= to derive all the CC addresses


[08-Oct-18 06:38 AM] jl777c#5810
but fundamentally any pubkey can be used


[08-Oct-18 06:38 AM] jl777c#5810
and each one generates its own set of related CC addresses


[08-Oct-18 06:39 AM] Bryan_Beus#6442
Ok, so I found the pubkey I was using last time...


[08-Oct-18 06:40 AM] Bryan_Beus#6442
So, if I wanted to use `tokentransfer` on these tokens, I assume I have to stop the asset chain, switch out for this correct pubkey, and then relaunch. 

Is that the idea?


[08-Oct-18 06:41 AM] Bryan_Beus#6442
I don't see anything in `tokentransfer tokenid destpubkey amount` that would otherwise let me choose which pubkey I want to use.

Just trying to understand.


[08-Oct-18 06:41 AM] jl777c#5810
correct


[08-Oct-18 06:42 AM] Bryan_Beus#6442
great. thanks.


[08-Oct-18 06:42 AM] jl777c#5810
this also avoids the need to worry about change addresses


[08-Oct-18 06:42 AM] Bryan_Beus#6442
Yes, that would make it simpler.


[08-Oct-18 06:42 AM] jl777c#5810
however nothing about the CC prevents multi-pubkey usage


[08-Oct-18 06:42 AM] jl777c#5810
but I think people will find having a vector of addresses for each pubkey confusing enough without needing to deal with a matrix of addresses from a vector of pubkeys


[08-Oct-18 06:43 AM] jl777c#5810
especially since things like channels CC creates a new channel address from each pair of pubkeys, we end up with having a cube of possible addresses from the vector of pubkeys for the sender and another for the receiver


[08-Oct-18 06:44 AM] jl777c#5810
to make things a bit more confusing, tokens are a special case where multiple different CC will support the same token


[08-Oct-18 06:44 AM] jl777c#5810
via tokenconvert


[08-Oct-18 06:44 AM] jl777c#5810
currently it is just a one way assets -> evalcode conversion, but likely we need to be able to handle the other direction too


[08-Oct-18 06:47 AM] Bryan_Beus#6442
Ok, that's a bit over my head. I'll save it in my notes and come back to it when I work on channels.

Another question:

Let's say I launch with a pubkey of an address for which I don't have the private key.

A few questions. First, I'm guessing that this means that if I ask or bid for a token and it is accepted, the tokens will be sent to the indicated pubkey -- is that correct?


[08-Oct-18 06:49 AM] jl777c#5810
it should generate an error if you try to masquerade for a pubkey you dont have


[08-Oct-18 06:49 AM] jl777c#5810
or at best it will transfer things you can sign to an address you cant spend from


[08-Oct-18 06:50 AM] Bryan_Beus#6442
Ok. 

So, to be clear, on an asset chain where I'm not using a pubkey, it's not uncommon to launch with a pubkey that may not be mine. 

For example, this might be a way to donate mining rewards to the developer or something. Is that correct?


[08-Oct-18 06:51 AM] jl777c#5810
there is a -donate option for rewards


[08-Oct-18 06:51 AM] jl777c#5810
i guess if it works, then yes you can do that


[08-Oct-18 06:52 AM] jl777c#5810
not sure how common this would be


[08-Oct-18 06:52 AM] jl777c#5810
ALL change goes to the pubkey address


[08-Oct-18 06:52 AM] Bryan_Beus#6442
I just remember reading something about this while reworking docs. I think it was in the zcash default docs.


[08-Oct-18 06:52 AM] jl777c#5810
it wont be long before all your funds end up  in the pubkey address


[08-Oct-18 06:52 AM] jl777c#5810
NOT recommended


[08-Oct-18 06:53 AM] Bryan_Beus#6442
Ooh, okay. I may be misremembering.

So, could we say instead, that under normal circumstances, a user launching with a `-pubkey` parameter active should make sure that they own the privkey to that pubkey?


[08-Oct-18 06:53 AM] Bryan_Beus#6442
That's something I will probably go back and add to the notes...


[08-Oct-18 06:54 AM] jl777c#5810
yes, i probably should just not allow it, but there might be some cases where that is useful


[08-Oct-18 06:54 AM] jl777c#5810
the burden of not burning your funds is up to the cli user


[08-Oct-18 06:55 AM] Bryan_Beus#6442
Ok, I was misremembering.

Here's what's in the basic api right now:

```
pubkey
------

``pubkey`` sets an address to use as a change address for all transactions. This value must be set to a 33 byte pubkey. All mined coins will also be sent to this address.

Usage:

As a default value in the coin's ``.conf`` file:

::

  pubkey=027dc7b5cfb5efca96674b45e9fda18df069d040b9fd9ff32c35df56005e330392

```


[08-Oct-18 06:57 AM] Bryan_Beus#6442
Ok, added some notes about ensuring they have ownership.


[08-Oct-18 07:07 AM] Bryan_Beus#6442
So, I'm trying to piece together what's happening in the transactions when we use tokens, to see how everything is linked together...

I'm looking at the two txids where I sent 100 of my tokens to a pubkey on another node.

On the sending node, I have these two txids:

```
 {
    "account": "",
    "address": "RUYde1UFGHp3frwAYNLordwGq5WZyeVWpc",
    "category": "send",
    "amount": -99898.07693952,
    "vout": 0,
    "fee": -0.00005000,
    "confirmations": 1,
    "blockhash": "0204056d4648fb8dfc4811338139c06be03d074f16b51f9505e666eb04b8298d",
    "blockindex": 1,
    "blocktime": 1538837860,
    "expiryheight": 0,
    "txid": "e6965b24b649289c3bd736431f42de1f3d3e2ce6a24e7abf433021f451ba727d",
    "walletconflicts": [
    ],
    "time": 1538837802,
    "timereceived": 1538837802,
    "vjoinsplit": [
    ],
    "size": 202
  },
  {
    "account": "",
    "address": "RUYde1UFGHp3frwAYNLordwGq5WZyeVWpc",
    "category": "immature",
    "amount": 0.00025000,
    "vout": 0,
    "confirmations": 1,
    "generated": true,
    "blockhash": "0204056d4648fb8dfc4811338139c06be03d074f16b51f9505e666eb04b8298d",
    "blockindex": 0,
    "blocktime": 1538837860,
    "expiryheight": 0,
    "txid": "0483fb72a4433992f7ff0cd8be2be30dcbb2f147866834504cfccf9d18feb956",
    "walletconflicts": [
    ],
    "time": 1538837860,
    "timereceived": 1538837874,
    "vjoinsplit": [
    ],
    "size": 100
  }
```


[08-Oct-18 07:08 AM] Bryan_Beus#6442
Hmm, actually, I'm not sure that they two transactions are related.


[08-Oct-18 07:09 AM] Bryan_Beus#6442
Let me check, hang on.

I have a question, but one sec.


[08-Oct-18 07:09 AM] jl777c#5810
without looking at the actual transaction, you will have a near impossible time to decipher things


[08-Oct-18 07:09 AM] Bryan_Beus#6442
Right, but first I had to see what this was about.


[08-Oct-18 07:09 AM] jl777c#5810
that is because tokens are colored coins and count as normal coins for most things


[08-Oct-18 07:10 AM] jl777c#5810
and the transactions display has always been making some assumptions and confusing


[08-Oct-18 07:10 AM] jl777c#5810
just look at the decoded transactions


[08-Oct-18 07:10 AM] jl777c#5810
it will make things much clearer


[08-Oct-18 07:10 AM] Bryan_Beus#6442
Yes, I was going to get there.


[08-Oct-18 07:10 AM] Bryan_Beus#6442
But I need to start at the beginning.


[08-Oct-18 07:11 AM] jl777c#5810
understanding a highly processed list is not the beginning


[08-Oct-18 07:11 AM] jl777c#5810
but you are free to ignore my advice


[08-Oct-18 07:11 AM] Bryan_Beus#6442
üòÉ


[08-Oct-18 07:13 AM] Bryan_Beus#6442
Here's the decoded transaction.

```
{
  "amount": 0.00000000,
  "confirmations": 1,
  "generated": true,
  "blockhash": "0204056d4648fb8dfc4811338139c06be03d074f16b51f9505e666eb04b8298d",
  "blockindex": 0,
  "blocktime": 1538837860,
  "expiryheight": 0,
  "txid": "0483fb72a4433992f7ff0cd8be2be30dcbb2f147866834504cfccf9d18feb956",
  "walletconflicts": [
  ],
  "time": 1538837860,
  "timereceived": 1538837874,
  "vjoinsplit": [
  ],
  "details": [
    {
      "account": "",
      "address": "RUYde1UFGHp3frwAYNLordwGq5WZyeVWpc",
      "category": "immature",
      "amount": 0.00025000,
      "vout": 0,
      "size": 100
    }
  ],
  "hex": "01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff050282000101ffffffff01a861000000000000232102bb263ecaf443560787e9cc8bfaa0ebdfdfd87057f2e1f44b649ba8b9c6aa970dac63cdb85b"
}
```


[08-Oct-18 07:14 AM] Bryan_Beus#6442
So, when I look at this, I see there is a main property `amount` that is set to `0`.

This one is normally the value that carries the value for a transaction on the asset chain, but here it is allowed to be zero.

Correct?


[08-Oct-18 07:23 AM] jl777c#5810
no


[08-Oct-18 07:23 AM] jl777c#5810
getrawtransaction txid 1


[08-Oct-18 07:24 AM] jl777c#5810
that gets you the decoded raw transaction the hex, nota summary


[08-Oct-18 07:24 AM] TonyL#3577
Added ChannelsCC RPC calls with @Mihailo notes and I/O examples to this file: https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=211514340

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Availalble RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pub...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p

{Reactions}
üôè 

[08-Oct-18 07:28 AM] Bryan_Beus#6442
Ok, so here's the `getrawtransaction txid 1` return:

```
{
  "hex": "01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff050282000101ffffffff01a861000000000000232102bb263ecaf443560787e9cc8bfaa0ebdfdfd87057f2e1f44b649ba8b9c6aa970dac63cdb85b",
  "txid": "0483fb72a4433992f7ff0cd8be2be30dcbb2f147866834504cfccf9d18feb956",
  "overwintered": false,
  "version": 1,
  "locktime": 1538837859,
  "vin": [
    {
      "coinbase": "0282000101",
      "sequence": 4294967295
    }
  ],
  "vout": [
    {
      "value": 0.00025000,
      "valueZat": 25000,
      "valueSat": 25000,
      "n": 0,
      "scriptPubKey": {
        "asm": "02bb263ecaf443560787e9cc8bfaa0ebdfdfd87057f2e1f44b649ba8b9c6aa970d OP_CHECKSIG",
        "hex": "2102bb263ecaf443560787e9cc8bfaa0ebdfdfd87057f2e1f44b649ba8b9c6aa970dac",
        "reqSigs": 1,
        "type": "pubkey",
        "addresses": [
          "RUYde1UFGHp3frwAYNLordwGq5WZyeVWpc"
        ]
      }
    }
  ],
  "vjoinsplit": [
  ],
  "blockhash": "0204056d4648fb8dfc4811338139c06be03d074f16b51f9505e666eb04b8298d",
  "height": 130,
  "confirmations": 1,
  "time": 1538837860,
  "blocktime": 1538837860
}
```


[08-Oct-18 07:30 AM] Bryan_Beus#6442
I'm searching to find where I placed the pubkey to which I transferred those 100 tokens, and also, where it would say that I transferred 100 tokens specifically. (Is that what `size` is in the txid?)


[08-Oct-18 07:32 AM] Bryan_Beus#6442
I've tried using `decoderawtransaction` and `decodescript` on all the hexes I can see in here, but haven't found it yet.


[08-Oct-18 07:44 AM] Bryan_Beus#6442
Also, to make sure I understand, the `value` property is describing the fee in the relevant COIN?


[08-Oct-18 07:48 AM] jl777c#5810
yes value is in COIN


[08-Oct-18 07:48 AM] jl777c#5810
tokens usually displayed at the satoshi level


[08-Oct-18 07:48 AM] jl777c#5810
RUYde1UFGHp3frwAYNLordwGq5WZyeVWpc is a normal address, get the pubkey for that


[08-Oct-18 07:48 AM] jl777c#5810
then do tokenaddress <pubkey>


[08-Oct-18 07:48 AM] jl777c#5810
that will show you what address tokens ended up at


[08-Oct-18 07:49 AM] jl777c#5810
then you can also do a tokenbalance <tokenid> <pubkey?


[08-Oct-18 08:01 AM] Bryan_Beus#6442
The `RUYde1UFGHp3frwAYNLordwGq5WZyeVWpc` address is the one that I'm sending from, I believe? It's in this wallet.dat file when I run `validateadress`

```
{
  "isvalid": true,
  "address": "RUYde1UFGHp3frwAYNLordwGq5WZyeVWpc",
  "scriptPubKey": "76a914d355f746581082323a248603701a2255648f2b6988ac",
  "segid": 52,
  "ismine": true,
  "iswatchonly": false,
  "isscript": false,
  "pubkey": "02bb263ecaf443560787e9cc8bfaa0ebdfdfd87057f2e1f44b649ba8b9c6aa970d",
  "iscompressed": true,
  "account": ""
}
```


[08-Oct-18 08:05 AM] jl777c#5810
not sure what the question is


[08-Oct-18 08:08 AM] Bryan_Beus#6442
"RUYde1UFGHp3frwAYNLordwGq5WZyeVWpc is a normal address, get the pubkey for that
then do tokenaddress <pubkey>
that will show you what address tokens ended up at
then you can also do a tokenbalance <tokenid> <pubkey?"

I'm misunderstanding something, or not communicating correctly.

I want to find out the address that received the tokens that I sent. 

The address above is the one that I sent the tokens from, not the one that I sent the tokens to.

Does that make sense?

i.e. How would a developer help a user track down what they've done, assuming the goal is to keep it all on the blockchain and not in a private/local file on the user's node?


[08-Oct-18 08:14 AM] jl777c#5810
if you forgot who you sent to then you would need to do getaddresstxids or something like that and see where they all were sent to


[08-Oct-18 08:14 AM] jl777c#5810
not sure what the mystery is here


[08-Oct-18 08:14 AM] jl777c#5810
the rpc calls do what they do


[08-Oct-18 08:15 AM] jl777c#5810
once you understand what they do, then you can understand what you can do given any particular situation


[08-Oct-18 08:15 AM] jl777c#5810
if you lose a privkey, sorry


[08-Oct-18 08:15 AM] jl777c#5810
if you forget all tx, then it can be retrieved what txids your wallet did


[08-Oct-18 08:15 AM] jl777c#5810
from that can find whatever you need to knw


[08-Oct-18 08:15 AM] jl777c#5810
know


[08-Oct-18 09:22 AM] Bryan_Beus#6442
I did  a new asset chain from scratch, didn't take long at all. (Very cool how fast this is, btw. Good work.)

And I think I found a good enough answer for half of the question. It seems that for the amount sent, we look at the `fee` property in the txid. It has something to do with the total number of tokens and the amount sent. That should be good enough for the amount of tokens sent.

Finding the address, however, is still confusing to me. I think what might be confusing is in this unexpected address that's showing up. I don't yet understand where it came from.

If I do a `tokenbalance` request (on the sending node), I get this result:

```
{
  "result": "success",
  "CCaddress": "RDqhjUdWcqFLsqDxw748AdjvLz9f5MeUTn",
  "tokenid": "b0a7af14f373fd38d229538f7e1e41ded3baf33ac3194dc5c8a6028972649b08",
  "balance": 10000000000
}
```

Now, that address `RDqhjUdWcqFLsqDxw748AdjvLz9f5MeUTn` is different from the one that I used for my pubkey. The address I used for my pubkey is:  `RSE9SUWrNPB72YDEArMk1XLxWbdaz71oyz`.

The `RDqhjUdWcqFLsqDxw748AdjvLz9f5MeUTn` shows up as one of the details in the `gettransaction` output for the relevant txid (which I can find via `getaddresstxids`, if I ever need to).

```
"details": [
    {
      "account": "",
      "address": "RKKstLc6Zod3Vu1aeDe6grs8rB1QfzFWtv",
      "category": "send",
      "amount": -0.00001000,
      "vout": 0,
      "fee": 99.99990000,
      "size": 446
    },
    {
      "account": "",
      "address": "RDqhjUdWcqFLsqDxw748AdjvLz9f5MeUTn",
      "category": "send",
      "amount": -99.99999000,
      "vout": 1,
      "fee": 99.99990000,
      "size": 446
    },
    {
      "account": "",
      "category": "send",
      "amount": 0.00000000,
      "vout": 2,
      "fee": 99.99990000,
      "size": 446
    }
  ]
```

The other address in there, `RKKstLc6Zod3Vu1aeDe6grs8rB1QfzFWtv`, is a similar address, on my other node.

How do these unexpected addresses link to the pubkeys that we keep in our launch params?


[08-Oct-18 09:37 AM] jl777c#5810
are they cryptoconditions addresses?


[08-Oct-18 09:37 AM] Bryan_Beus#6442
I'm not familiar with what cryptoconditions addresses are.

I'll be you explained them in your documentation, and it was way over my head... üòÉ


[08-Oct-18 09:38 AM] Bryan_Beus#6442
looking


[08-Oct-18 09:43 AM] Bryan_Beus#6442
At a glance, it seems that CC requires new sets of addresses that are somehow linked to a user's main pubkey, but separate.

When I do a `validateaddress` on these CC addresses, I don't see a pubkey.

Is there a way on the sending node that I can view the balance of the CC address on the receiving node?


[08-Oct-18 09:44 AM] Bryan_Beus#6442
On a separate note, I'm testing the CC order book.

I'm getting an error about not having enough utxos. What are the general guidelines to overcome this issue?


[08-Oct-18 09:44 AM] Bryan_Beus#6442
```
siddhartha@zuko:~/komodo/src$ ./komodo-cli -ac_name=AAD tokenfillask "b0a7af14f373fd38d229538f7e1e41ded3baf33ac3194dc5c8a6028972649b08" "c6a8378c112ffc21bab92f375acabb5932d912ff25668174a42fabebb861f837" 5
{
  "result": "error",
  "error": "filltx not enough utxos"
}
```


[08-Oct-18 09:53 AM] jl777c#5810
make utxos


[08-Oct-18 09:53 AM] Bryan_Beus#6442
How many, and does the size matter?


[08-Oct-18 09:54 AM] jl777c#5810
size always matters, but only if it is below dust levels

{Reactions}
üòã 

[08-Oct-18 09:36 PM] dukeleto#7326
@Bryan_Beus most likely you don't have enough funds to do the operation you are trying to do. Watch out, some RPCs take COIN units while others take satoshis


[08-Oct-18 09:37 PM] dukeleto#7326
@Bryan_Beus that error happens, when there are no valid utxos at all associated with the asktxid


[08-Oct-18 10:18 PM] Bryan_Beus#6442
@dukeleto 

Thank you.


[08-Oct-18 11:36 PM] Bryan_Beus#6442
I just went through `rewards`. Very simple and nice.

Question: I notice that on `rewardsunlock`, anyone is able to unlock anyone's funds.

Just out of curiosity, what was our logic for when/why it would be necessary or useful for someone to be able to unlock someone else's funds? For the developer or rewards offerer to end the program, for instance?


[08-Oct-18 11:38 PM] TonyL#3577
@Bryan_Beus  https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/all_chapters.md#chapter-7---rewards-example
```One twist that makes it a bit unexpected is that anybody should be able to unlock the funds that were locked, as long as it ends up in the locking address. The reason for this is that SPV servers want to be supported and while locking can be done via normal sendrawtransaction, it requires a native node to do the unlocking. By allowing anybody to be able to unlock, then there can be a special node that unlocks all locked funds when they are ready. This way, from the user's point of view, they lock the funds and after it is matured, it reappears in their wallet.```

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/all_chapters.md
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[08-Oct-18 11:44 PM] Bryan_Beus#6442
Gotcha. Thanks.


[09-Oct-18 12:42 AM] jl777c#5810
please read the comments at the top of each CC.cpp file


[09-Oct-18 12:42 AM] jl777c#5810
i tried to explain in detail


[09-Oct-18 01:06 AM] Bryan_Beus#6442
Ok.


[09-Oct-18 03:10 AM] Mihailo#5902
@jl777c  and other devs, I'm looking through channels CC code and I noticed I haven`t used the PreventCC function in validation. If I understand it correctly, it only checks if vins/vouts from some index until the end are not CC. Should I use it or it is ok to check individually?


[09-Oct-18 03:13 AM] jl777c#5810
it is a utility function to use if you can indeed know there wont be any other CC vins/vouts. there are a pair of variables that sets the first vin/vout to start at


[09-Oct-18 03:13 AM] jl777c#5810
some calls will have other CC vouts possible


[09-Oct-18 03:14 AM] jl777c#5810
or other CC vins, so it is there if it is useful and handy


[09-Oct-18 03:23 AM] Mihailo#5902
Ok, one more thing. I`m trying to setup komodo on RaspberryPi for mining node but I'm unable to build it. Is there any info on RPi build, some other dependencies?


[09-Oct-18 03:25 AM] TonyL#3577
Are you using Raspberian @Mihailo ?


[09-Oct-18 03:26 AM] Mihailo#5902
I was unabel to install g++-multilib on Raspbian as that package does not exists in their repository.


[09-Oct-18 03:26 AM] Mihailo#5902
Yep


[09-Oct-18 03:26 AM] TonyL#3577
I've tried a little bit but found very big problems in dependencies. Thinking to try on PIdora


[09-Oct-18 03:27 AM] Mihailo#5902
Ok, so I won`t spend more time on it now. Thanks.


[09-Oct-18 03:50 AM] grewalsatinder#9653
for raspberry/arm build of Komodo @radix42 can help


[09-Oct-18 03:50 AM] Mylo#8306
or use docker?


[09-Oct-18 03:51 AM] grewalsatinder#9653
I'm sure arm build scripts might be needing update for Komodo if it's not already building


[09-Oct-18 03:52 AM] Mylo#8306
https://www.raspberrypi.org/blog/docker-comes-to-raspberry-pi/
and if docker installs, try `sudo docker pull imylomylo/jl777-komodo-dev` and then there are more instructions in #cc-gui

{Embed}
https://www.raspberrypi.org/blog/docker-comes-to-raspberry-pi
Docker comes to Raspberry Pi - Raspberry Pi
If you‚Äôre not already familiar with Docker , it‚Äôs a method of packaging software to include not only your code, but also other components...
https://images-ext-1.discordapp.net/external/ziT6YNP1ojIcIIwZ63_bXHpi3Ch_bgoAiN0-1Kewcg4/https/www.raspberrypi.org/app/uploads/2016/08/14907285349_a2a6c87a83_o-500x249.jpg


[09-Oct-18 07:50 AM] Mihailo#5902
Cool, I might use docker for it üòâ


[09-Oct-18 08:45 AM] Mylo#8306
hopefully it works on a pi.  let me know (lmk) how it goes.  you gave me an idea to see if docker is available for arm cpu anyway.


[09-Oct-18 08:48 AM] Deleted User#0000
need 64 bit I am quite sure


[09-Oct-18 08:48 AM] Deleted User#0000
and the CC enabled komodo uses like 3.5GB of ram


[09-Oct-18 08:50 AM] Mylo#8306
pi 3 is 64 bit, just ships with 32 bit OS looking at webpages


[09-Oct-18 08:52 AM] TonyL#3577
Raspberri 3 B+ which I have have only 1 Gig of RAM and Cortex-A53 is 64 bit yep


[09-Oct-18 08:56 AM] TonyL#3577
I've tried to run komodod on instances with similar to pi specs (like a t.micro on AWS) and it crashed by cd because of lack of memory


[09-Oct-18 09:12 AM] radix42#3743
Pi 3 is 64 bit but doesn‚Äôt have all the instruction subsets needed


[09-Oct-18 09:12 AM] grewalsatinder#9653
@radix42 please let me know if you can make it possible to cross-compile on linux for arm64 üôÇ


[09-Oct-18 09:13 AM] radix42#3743
Shouldn‚Äôt be too hard to update my branch from January to current


[09-Oct-18 09:14 AM] grewalsatinder#9653
so I have 3 wish lists to use the daemons on arm64:
- Komodo
- Zcash
- Versus `komodod` too


[09-Oct-18 09:14 AM] grewalsatinder#9653
I have Odroid XU4, Rock64 boards


[09-Oct-18 09:14 AM] grewalsatinder#9653
if you can help make them compile, I can setup a build server


[09-Oct-18 09:14 AM] radix42#3743
Those should work with enough swap


[09-Oct-18 09:14 AM] radix42#3743
I have a build machine


[09-Oct-18 09:14 AM] grewalsatinder#9653
super!


[09-Oct-18 09:16 AM] radix42#3743
Sorry I kinda fell off the map for a while, been overwhelmed with a bunch of personal stuff a lot


[09-Oct-18 09:16 AM] grewalsatinder#9653
üòÖ


[09-Oct-18 09:16 AM] radix42#3743
You‚Äôve seen the evolution of my twitter profile!


[09-Oct-18 09:18 AM] grewalsatinder#9653
haven't been keeping eye, but yes your tweets pop up time and then üòâ


[09-Oct-18 09:19 AM] radix42#3743
Anyway, I‚Äôll pull from jl777‚Äôs dev branch into my arm64 one and give it a whirl today


[09-Oct-18 09:20 AM] grewalsatinder#9653
perfect! thanks mate! üôÇ üëç


[09-Oct-18 09:21 AM] radix42#3743
Oh hey what‚Äôs up with that ewasm bounty, anyone working it you know of?


[09-Oct-18 09:22 AM] radix42#3743
Also I closed that tab and gotta find the post again üòÇ


[09-Oct-18 09:25 AM] xRobeSx#5136
this one radix:  https://forum.komodoplatform.com/t/25000-kmd-bounty-for-cc-wasm-interpreter/176 ?

{Embed}
https://forum.komodoplatform.com/t/25000-kmd-bounty-for-cc-wasm-interpreter/176
25000 KMD bounty for CC Wasm interpreter
I offer a bounty of 25000 Komodo for a Crypto-Conditions based WebAssembly intepreter, in order to ease the move of dapps from Eos to Komodo (and a lot of other stuff)   jl777: wasm support would be cool, but the key aspect is that it can access useful primitives   My bounty ...
https://images-ext-2.discordapp.net/external/wn-USjzYr11KFJbfMXnSvDU4C05OjUDAwAGLCqJwSE8/https/forum.komodoplatform.com/uploads/db3473/original/1X/1af3759a49bc1dcf17a8b0a305d5ccbee17d0944.png


[09-Oct-18 09:44 AM] radix42#3743
Thanks, yes!


[09-Oct-18 09:45 AM] radix42#3743
@grewalsatinder I am running an arm64 build of current dev right now


[09-Oct-18 09:46 AM] radix42#3743
Gonna take a WHILE (if it works! ü§ûüòúüòõ)


[09-Oct-18 09:52 AM] grewalsatinder#9653
üòÉ üëç


[09-Oct-18 10:18 AM] radix42#3743
It is building the cc files as I type!


[09-Oct-18 10:18 AM] radix42#3743
Doing Faucet rn


[09-Oct-18 10:19 AM] jl777c#5810
great!


[09-Oct-18 10:20 AM] jl777c#5810
the idea for supporting an interpreted language is to create functions in opreturn


[09-Oct-18 10:20 AM] jl777c#5810
then a function call would be able to be done via txid


[09-Oct-18 10:20 AM] jl777c#5810
so a library of functions can be made out of code in opreturns


[09-Oct-18 10:21 AM] jl777c#5810
the challenge would be to connect it to blockchain useful things, but an interface to the CCutils.cpp functions and similar ones might do the trick


[09-Oct-18 10:21 AM] jl777c#5810
so a emscripten can convert C code to wasm -> OPRETURN


[09-Oct-18 10:21 AM] radix42#3743
I have been subbed to the ewasm repo forevar


[09-Oct-18 10:22 AM] jl777c#5810
so now I am envisioning a bunch of txid based functions and then a lot of higher level functions can fit into the 8kb opreturn size limit


[09-Oct-18 10:22 AM] radix42#3743
Yer sticking a js interpreter in there somewhere


[09-Oct-18 10:23 AM] jl777c#5810
yes whatever external compilers -> wasm bytecodes -> opreturn


[09-Oct-18 10:23 AM] radix42#3743
I mean for runtime


[09-Oct-18 10:24 AM] jl777c#5810
not sure it would work for runtime using the opreturn model


[09-Oct-18 10:24 AM] jl777c#5810
write a function, put it into opreturn form, test it via txid calling, check it in when it is working


[09-Oct-18 10:25 AM] jl777c#5810
the latest revision would have a baton utxo, so you can trace back the chain of changes, like the oracles CC does


[09-Oct-18 10:25 AM] radix42#3743
Well, when the contract executes on full nodes they have to run the wasm, no?


[09-Oct-18 10:25 AM] jl777c#5810
actually the oracles CC can be used for tracking the data


[09-Oct-18 10:25 AM] jl777c#5810
yes, the wasm must be run


[09-Oct-18 10:26 AM] jl777c#5810
so we need to have it in the opreturn


[09-Oct-18 10:26 AM] jl777c#5810
dont want to get forks due to different results from runtime js


[09-Oct-18 10:27 AM] radix42#3743
Where I am going is that at that point you are shipping a JavaScript interpreter with full nodes, so you could do things like run js-ipfs and stick data in there


[09-Oct-18 10:28 AM] radix42#3743
be able to have contracts at an ipfs hash


[09-Oct-18 10:28 AM] jl777c#5810
certainly an ipfs CC is a good thing to have


[09-Oct-18 10:29 AM] jl777c#5810
but not sure it is safe to have contracts at an ipfs hash


[09-Oct-18 10:29 AM] jl777c#5810
what if it is there at one point in time and not there later, seems a fork


[09-Oct-18 10:29 AM] jl777c#5810
i lean toward fully compiled methods


[09-Oct-18 10:30 AM] radix42#3743
8k is so tiny tho!


[09-Oct-18 10:30 AM] Deleted User#0000
need to be smarter


[09-Oct-18 10:31 AM] radix42#3743
Lord these arm builds take forever


[09-Oct-18 10:32 AM] jl777c#5810
8kb for a single function?


[09-Oct-18 10:32 AM] jl777c#5810
how many functions are so big?


[09-Oct-18 10:33 AM] radix42#3743
Point!


[09-Oct-18 10:33 AM] jl777c#5810
this will force small functions


[09-Oct-18 10:34 AM] jl777c#5810
which then create a blockchain wide library


[09-Oct-18 10:34 AM] jl777c#5810
it seems a good gain for what is sacrificed (large spagetti functions that really should be decomposed into smaller ones)


[09-Oct-18 10:34 AM] jl777c#5810
the on thing that maybe will be restrictive is large data tables


[09-Oct-18 10:53 AM] radix42#3743
Ya


[09-Oct-18 11:03 AM] jl777c#5810
but there are ways around that


[09-Oct-18 12:10 PM] radix42#3743
W00t I‚Äôve got an arm64 build of jl777/dev


[09-Oct-18 12:11 PM] radix42#3743
Just fired it up to sync


[09-Oct-18 12:13 PM] radix42#3743

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/499298483048677395/image0.jpg

{Reactions}
üéÜ (3) shexy (6) 

[09-Oct-18 01:22 PM] radix42#3743
At 85% sync now, the node was already synced to June


[09-Oct-18 01:24 PM] radix42#3743
It‚Äôs using 2.5 gigs of resident memory, @grewalsatinder, so it really wants a beefy aarch64 machine


[09-Oct-18 02:25 PM] radix42#3743
This is the branch: https://github.com/MercerWeissAlt/komodo/tree/dev-aarch64
I need to update the README with the weird symlinks you need to make for it to build

{Embed}
https://github.com/MercerWeissAlt/komodo/tree/dev-aarch64
MercerWeissAlt/komodo
zcash. Contribute to MercerWeissAlt/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/fS2lZ9tO2J25_DK9QHDRstG9LeH4HdXwV9H9bhOqifQ/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/25749108


[09-Oct-18 02:26 PM] jl777c#5810
can you make a pull request to dev branch?


[09-Oct-18 04:00 PM] radix42#3743
yeah, I'll add to the README first tho


[09-Oct-18 04:02 PM] radix42#3743
the bit that you thought made it unmergeable in January is I think NOT an issue, as it merely removes a conditional requiring it to be amd64, when really the code in question builds on any 64 bit proc......I'll try a build of the branch that builds on arm64 on Intel/amd to verify that before I make a PR


[09-Oct-18 04:03 PM] radix42#3743
I'll kick that off on my Xeon build server rn


[09-Oct-18 04:07 PM] radix42#3743
(ok any little endian 64 bit platform *sigh*)


[09-Oct-18 04:09 PM] radix42#3743
I'll also add the 3 commands you need to run to install and setup mingw64 when cross compiling from lin->win, that's just kinda hand-waved üòÉ


[09-Oct-18 04:54 PM] radix42#3743
aaaarrrgghhhhh I need to add a platform conditional in depends/packages/packages.mk for it to all be in one branch......I'm about wiped for the day so later tonight or tomorrow I'll get all the above and THEN a PR!


[09-Oct-18 10:20 PM] dukeleto#7326
awesome progress in the backlog I just read üòÉ

{Reactions}
üëç 

[10-Oct-18 01:35 AM] TonyL#3577
Some teaser üòÉ

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/499500186834567188/unknown.png

{Reactions}
ü§ë (4) üòá (4) üëç (6) üòé (3) 

[10-Oct-18 01:45 AM] Mylo#8306
in case you didn't know @TonyL , barterdex gui has a portfolio management function where you can set trades up so that if you had 33/33/34% of coins at the start and your target is 25/25/50% it will automatically do it.
First it was done by command line.
Then it was done to GUI.
And now with another version of GUI coming.
So your TUI will become GUI soon enough.
Awesome work!

I heard ca3 on a youtube interview talking about the text portfolio management in the background whilst i was doing other work.   it caught my attention, and then i joined the komodo slack.  and the rest is history...


[10-Oct-18 01:46 AM] TonyL#3577
Wow, automatical rebalancing?


[10-Oct-18 01:46 AM] Mylo#8306
haha yes you didn't know that was a feature.  yes, kmd has some interesting tech!!

{Reactions}
üôÄ 

[10-Oct-18 01:46 AM] Mylo#8306
BOTS


[10-Oct-18 01:48 AM] TonyL#3577
Wow that's cool


[10-Oct-18 01:51 AM] TonyL#3577
@Mylo That's why I want to participate actively in #cc-gui - TUI have to be scaled to GUI üòÉ

{Reactions}
üëç (3) Komodo (4) 

[10-Oct-18 04:45 AM] CrisF#3405
@TonyL @Mylo ,  @smkhound made a balancing script for `coinmigration` in #kmdlabs .


[10-Oct-18 04:46 AM] CrisF#3405
It could equalize coins between chains.  Very cool.


[10-Oct-18 06:14 AM] gcharang#6833
When is the `rewardsaddress` RPC useful?


[10-Oct-18 06:22 AM] jl777c#5810
when you want to know what addreses the rewards CC uses


[10-Oct-18 06:49 AM] dukeleto#7326
that TUI screenshot above is pretty awesome, we have come a long way

{Reactions}
üëç (3) 

[10-Oct-18 06:49 AM] dukeleto#7326
harkens back to text adventures and BBS'es


[10-Oct-18 06:50 AM] dukeleto#7326
Crypto-Conditions Text Adventure, with ascii art, could be the next cryptokittiez

{Reactions}
Komodo 

[10-Oct-18 07:54 AM] gcharang#6833
As far as I can tell, the address ``rewards CC`` uses for a user is calculated based on his pubkey and the eval code for rewards CC.
And  this is the address to which his locked vout for the reward go.

When I do the RPC call, I get:

```
./komodo-cli -ac_name=CCNG rewardsaddress 03810d28146f60a42090991b044fe630d1664f3f8f46286c61e7420523318047b5
{
  "result": "success",
  "RewardsCCaddress": "RTsRBYL1HSvMoE3qtBJkyiswdVaWkm8YTK",
  "Rewardsmarker": "RMgye9jeczNjQx9Uzq8no8pTLiCSwuHwkz",
  "GatewaysPubkey": "03ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40",
  "RewardsCCassets": "RLh5sgvh3scCyM4aq1fhYhwgfbmb5SpCkT",
  "CCaddress": "RJdwcBsoWwmt9dtSqyFCULNW2F3zj2mcD3",
  "myCCaddress": "RJdwcBsoWwmt9dtSqyFCULNW2F3zj2mcD3",
  "myaddress": "RVXhz5UCJfSRoTfa4zvBFBrpDBbqMM21He"
}
```

In the above json, 

* `myaddress` is the actual KMD address corresponding to the pubkey
* `RewardsCCaddress` is the Global address corresponding to rewards that has the privkey in the source
* `Rewardsmarker` is the normal address corresponding to the Global rewards address
* `myCCaddress` is the address generated based on pubkey of user and evalcode of rewards

May I know the diffrence between  `CCaddress` and `myCCaddress` ?

Also what are `RewardsCCassets` and `GatewaysPubkey` ?


[10-Oct-18 08:29 AM] Mylo#8306
@gcharang if you are making notes, here is the privkey you mention being in the src https://github.com/jl777/komodo/blob/jl777/src/cc/CCcustom.cpp#L87
I'm sorry i don't know the answers for your CCaddress/myCCaddress questions and would only be able to give bad guesses at this stage.

{Embed}
https://github.com/jl777/komodo/blob/jl777/src/cc/CCcustom.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[10-Oct-18 09:25 AM] gcharang#6833
Thanks @Mylo I did go through the file you linked and the comments in it and some of the others. I am also documenting these RPC


[10-Oct-18 03:48 PM] Kalyan#1867
Hello Everyone, I am Kalyan Sikdar, graduate student in University of Texas, Arlington. I am new to this group and have been invited by Dr. Sajib Dutta. Thank you for having me here.

{Reactions}
üëã (8) Komodo (4) 

[10-Oct-18 08:53 PM] dukeleto#7326
@Kalyan welcome


[10-Oct-18 10:47 PM] SuSC135#6248
Hello , Dr Datta from invited me to join this channel.
I am very much interested in block chains and have been exploring few uses cases from  past one year. Komodo has really interesting concepts and I am really looking forward to work on it.  Right now I am just going through the github link . Let's see where it takes me

{Reactions}
Komodo (3) 

[10-Oct-18 11:46 PM] actionslacks#4072
Welcome @SuSC135


[11-Oct-18 02:25 AM] TonyL#3577
@Mihailo I can't do `channelsclose` for new channel without any `channelspayment` done:
`channelsclose fb1a5808955dad43579e09992f2f8be24dc6db37721a451f462e3151a9115498`
```CC Eval EVAL_CHANNELS Invalid: channelOpen is not yet confirmed(notarised)! spending tx fb1a5808955dad43579e09992f2f8be24dc6db37721a451f462e3151a9115498
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```
`channelsopen` transaction is mined. 

As soon as I broadcast one `channelspayment` even if it in mempool I can close the channel.

So if I'm changed my mind to use this channel there is no way to close it without at least one `channelspayment`
Is it by design?


[11-Oct-18 02:27 AM] Mihailo#5902
@TonyL Let me take a look. Did you mine 2 blocks after open tx? I set minimum confirmations to 2 just for now.


[11-Oct-18 02:28 AM] TonyL#3577
@Mihailo Let me try again with ensuring that at least 2 blocks are mining after `channelsopen`


[11-Oct-18 02:28 AM] Mihailo#5902
you can use "getrawtransaction txid 1" to se number of confirmations on tx


[11-Oct-18 02:29 AM] TonyL#3577
Yup, just have to open new channel now because closed previous one after `channelspayment`


[11-Oct-18 02:37 AM] TonyL#3577
@Mihailo `"confirmations": 2` but still same error after `channelsclose`
And after `channelspayment` I'm able to `channelsclose`


[11-Oct-18 02:37 AM] Mihailo#5902
Ok, I'll check it right away


[11-Oct-18 02:45 AM] Mihailo#5902
Hmmm, I have done channelopen, waited for 2 confirmation and then done channelclose with success


[11-Oct-18 02:46 AM] Mihailo#5902
Without payment


[11-Oct-18 02:46 AM] Mihailo#5902
```
{
  "result": "success",
  "name": "Channel RRPDp9nQCgW7EGvyw9RtQV7eJZiNXrzzbB",
  "Open": "10 payments of 100000 satoshi",
  "Close": "channel"
}
```


[11-Oct-18 02:52 AM] TonyL#3577
```./komodo-cli -ac_name=CCNG channelsopen 0324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272 10 1000000```
``` ./komodo-cli -ac_name=CCNG sendrawtransaction hex <- 7e950f191111c352cd74611d37c3b6d553c8f6c3e9b5089a402a11310785faa5```
```./komodo-cli -ac_name=CCNG getrawtransaction 7e950f191111c352cd74611d37c3b6d553c8f6c3e9b5089a402a11310785faa5 1 <-  "confirmations": 2
```


[11-Oct-18 02:52 AM] TonyL#3577
```./komodo-cli -ac_name=CCNG channelsclose 7e950f191111c352cd74611d37c3b6d553c8f6c3e9b5089a402a11310785faa5
{
  "result": "success",
  "hex": "0100000003a5fa850731112a409a08b5e9c3f6c853d5b6c3371d6174cd52c31111190f957e0300000049483045022100ca5cea7f97401fa3ad6cdb4c3e4da29be1d925562d74a1f6af8f2fbb3358207a02203bbf74601c037683722e4954771b248afed06a328ed469227d7cf818a9d9f53301ffffffffa5fa850731112a409a08b5e9c3f6c853d5b6c3371d6174cd52c31111190f957e00000000a74ca5a281a1a0819ca28194a067a56580210283657a59d69386db4785c48cc8762ebd9113c272fd02d4aed0a172516e7fdc5d81401f1187dca11f9f48ad51bbe2ab64d1b312a47d6a6c6e6259533ed227f346260d74fe267c34483da13312cd7fa18ddf162936e0c2aeb680be75cf05719f08dcc1a129a5278020a033e38f682061a23636f0144ecebb9fcb8c4bddc8e7e3101c0f5b7a2e3d13b48103020000af038001eba10001ffffffffa5fa850731112a409a08b5e9c3f6c853d5b6c3371d6174cd52c31111190f957e010000007b4c79a276a072a26ba067a56580210283657a59d69386db4785c48cc8762ebd9113c272fd02d4aed0a172516e7fdc5d814029090aecebcf0604255e114ca63948843b3e293295fb5a7b13cda03a63a9d3df358b6a99cc6c0cf282b9676a6282852d3e7492a36a86103b30c3a742f0d59332a100af038001eba10001ffffffff058096980000000000302ea22c80206033530bc76b649680a856d002cfc8fb2ffff134249a8d8f3996e79d37230da681031210008203000401cc1027000000000000302ea22c8020b51867c95ca6c53d2427c935318e7ef3b0c10aae9c9643a4aaad3f8cd703f2ae8103120c008203000401cc1027000000000000302ea22c8020c9ada2adfc6c6dec0bd9dd29f4e48c86f84c016abc3552b8815ca3c4a44c561b8103120c008203000401ccc657df5b7400000023210283657a59d69386db4785c48cc8762ebd9113c272fd02d4aed0a172516e7fdc5dac0000000000000000956a4c92eb43a5fa850731112a409a08b5e9c3f6c853d5b6c3371d6174cd52c31111190f957e210283657a59d69386db4785c48cc8762ebd9113c272fd02d4aed0a172516e7fdc5d210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012720a00000040420f0000000000000000000000000000000000000000000000000000000000000000000000000000000000"
}
```


[11-Oct-18 02:52 AM] TonyL#3577
```./komodo-cli -ac_name=CCNG sendrawtransaction hex^^
anon fingerprint 0x106a68e10 0x106a6f658
anon fingerprint 0x106a68700 0x106a72a38
CC Eval EVAL_CHANNELS Invalid: channelOpen is not yet confirmed(notarised)! spending tx 7e950f191111c352cd74611d37c3b6d553c8f6c3e9b5089a402a11310785faa5
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```


[11-Oct-18 02:53 AM] TonyL#3577
Just tried one more time hmm. I'm on latest FSM. Maybe it's connected to particular AC specifics


[11-Oct-18 02:55 AM] TonyL#3577
Waited a little bit more and it's closed


[11-Oct-18 02:55 AM] TonyL#3577
@Alright Is CCNG notarizing?


[11-Oct-18 02:56 AM] Mihailo#5902
It does not have to be notarised as for now just checking confirmations. Check for notarisation has yet to be done.


[11-Oct-18 02:56 AM] TonyL#3577
Oh I see


[11-Oct-18 02:57 AM] TonyL#3577
Btw I can execute one more `channelsclose` transaction for the same channel even if previous `channelclose` mined


[11-Oct-18 02:57 AM] TonyL#3577
```./komodo-cli -ac_name=CCNG channelsinfo 7e950f191111c352cd74611d37c3b6d553c8f6c3e9b5089a402a11310785faa5
{
  "result": "success",
  "name": "Channel RRyrN2G7fRqxdbFcWqxh5PYPR1scCXQEFP",
  "Open": "10 payments of 1000000 satoshi",
  "Close": "channel",
  "Close": "channel"
}
```


[11-Oct-18 02:58 AM] TonyL#3577
And it's double closed now


[11-Oct-18 02:58 AM] Mihailo#5902
Ok, I`ve been able to reproduce


[11-Oct-18 02:59 AM] TonyL#3577
@Mihailo Situation when not possible to broadcast `channelsclose` for some time with `error code: -26`?


[11-Oct-18 03:00 AM] Mihailo#5902
Yes


[11-Oct-18 03:02 AM] TonyL#3577
Just wondering: maybe it's better to have "State" parameter with `Open` or `Close` states 
Or Open parameter with true/false. So if it's closed RPC not allows to send one more closing transaction


[11-Oct-18 03:03 AM] Mihailo#5902
Yeah, I was just thinking that too. RPC needs to check for state and not allow to close already closed, and not opened channel ...


[11-Oct-18 03:06 AM] TonyL#3577
It will help to build dAPP a lot as well.
For example now for `Channel closing` feature I want to display all opened channels by user but it's quite problematic to get such list. 
Only way is parse all `channelsinfo` then from "name" I have to parse only wallet, then for this wallet I have to execute `validateaddress`, then parse and check is it mine


[11-Oct-18 03:08 AM] Mihailo#5902
Ok, found what is the problem. getrawtransaction is returning confirmations 2 but function that checks confirmations return 1. The thing is that the tx ended in block 52 in my case and now it is block 53. Function that calculate confirmations does current height - tx height which is 1, but getrawtransaction returns 2 confirmations....


[11-Oct-18 03:09 AM] TonyL#3577
Oh so actually it should work when `getrawtransaction` returning confirmations 3


[11-Oct-18 03:09 AM] Mihailo#5902
yep


[11-Oct-18 03:10 AM] Mihailo#5902
So I`m just thinking now, what is proper calculation. I think the first, 1 confirmation is one block after the tx....


[11-Oct-18 03:10 AM] Mihailo#5902
It seems that getrawtransaction is wrong üò±


[11-Oct-18 03:11 AM] TonyL#3577
Confirmations are blocks after block to which transaction included


[11-Oct-18 03:11 AM] TonyL#3577
In my understanding


[11-Oct-18 03:11 AM] TonyL#3577
`getrawtransaction` printing `confirmation: 1` right after transaction mined


[11-Oct-18 03:12 AM] TonyL#3577
üôÄ


[11-Oct-18 03:12 AM] Mihailo#5902
Yep


[11-Oct-18 03:18 AM] Mihailo#5902
@jl777c Is this bug or intended to be like this?


[11-Oct-18 04:31 AM] TonyL#3577
@Mihailo Seems here same  2 confirmations checking for `channelsclose` transaction when doing `channelsrefund`


[11-Oct-18 04:33 AM] TonyL#3577
https://github.com/tonymorony/cryptoconditions_tui/blob/master/channels_cc_cli.py first alpha release for channelsCC TUI üòÉ . This time handling much more exceptions than in GatewaysCC TUI so should crash less

{Embed}
https://github.com/tonymorony/cryptoconditions_tui/blob/master/channels_cc_cli.py
tonymorony/cryptoconditions_tui
Terminal user interfaces for Komodo CryptoConditions smart-contracts - tonymorony/cryptoconditions_tui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[11-Oct-18 04:45 AM] Mylo#8306
```
jl777cLast Friday at 2:03 PM
right now the notarization check is a stub
but once a channel is created, it is a matter of making a payment
system is backwards compatible with wallets, explorers, etc. nothing special to setup
though we would want a GUI that can indicate when the mempool payment arrives
so right now, you should be able to break the payment with a reorg
but it is a matter to then add notarization and notarization check, then that makes it dPoW protected mempool payment
```


[11-Oct-18 04:45 AM] Mylo#8306
stub = https://en.wikipedia.org/wiki/Method_stub

{Embed}
https://en.wikipedia.org/wiki/Method_stub
Method stub
A method stub or simply stub in software development is a piece of code used to stand in for some other programming functionality. A stub may simulate the behavior of existing code (such as a procedure on a remote machine, such methods are often called mocks) or be a temporar...


[11-Oct-18 04:46 AM] Mylo#8306
from #kmdlabs üëÜ

{Reactions}
üëç 

[11-Oct-18 04:46 AM] Mylo#8306
@Mihailo @TonyL


[11-Oct-18 04:49 AM] TonyL#3577
Hmm will think on mempool scan implementation


[11-Oct-18 04:57 AM] Deleted User#0000
Yes we were asked to test channels, but notarisation check is a stub so we stopped.


[11-Oct-18 04:57 AM] Deleted User#0000
best you guys get everything else bug free first before we try to reorg payments


[11-Oct-18 05:31 AM] Bryan_Beus#6442
In the marketing meeting today, we were trying to create a narrative to visualize what our customers will be doing with CC.

There were a few areas where we ran to the edge of my understanding.

Can one of the devs please help correct this visualization wherever it is inaccurate?

Let's say that I'm a dApp dev and I want to make a card game.

I have my main asset chain. It serves as the underlying currency for performing transactions on the chain. It is not designed to be a high-market cap coin, by itself.

First, a user will install my software, create a pubkey, do a `faucetget` cc command to get just a small amount of my base currency.

With that, they will then perform a transaction on the network that broadcasts their chosen pubkey (and base58 address), and also the CC-address pairing for that pubkey. This is `AddressA-on-MY-asset-chain`.

For the player to really get started, they first need to pay me, so they can enter my ecosystem, and for that we uses MoMoM and a CC-based STABLE coin. For players to pay me, and to enter my gaming community, I require that they send me $10 USD worth of a KMD-based STABLE coin. They'll send this from a transparent address, `AddressA-on-STABLE`, on the STABLE coin blockchain.

Using MoMoM, my blockchain can detect that my address on the STABLE coin received the correct amount. One of my nodes will then automatically send to `AddressA-on-MY-asset-chain`a starter kit.


[11-Oct-18 05:31 AM] Bryan_Beus#6442
The starter kit will include X amount of the asset chain currency.

It will also an assortment of tokens. The tokens are like cards in a character, RPG-based card game.

Each token has a set of descriptions and properties, like STRENGTH, STAMINA, BASE-HEALTH, et.c,  that affect the token's ability to play against other players.

Now, my user wants to start playing against other players online. 

He and another player connect to one of my nodes, and they also connect to each other. My node is acting as an Oracle. 

The two players place certain items into a CC-based smart contract (yet to be written?), where the person who wins will receive these items. 

Now, they play the card game, broadcasting the data of their decisions to each other. My node simply observes and records the information into my asset chain, making sure all proceeds smoothly.

The game lasts for one hour. During that time, several notarizations of my data make it into KMD, and then into Bitcoin.


[11-Oct-18 05:33 AM] Bryan_Beus#6442
At the conclusion of the game, all three of the nodes (mine, and both of the playing users), calculate the results and payout the CC smart contract according to the winner.

The player who won now has a collection of new tokens that they can use to play again, while the other player has to start over (and perhaps the payout of items is varied across the game, so it's not just winner-take-all, but rather winner-take-more, and loser-take-less).


[11-Oct-18 05:36 AM] Bryan_Beus#6442
Out of the technologies above, dPoW is working fairly reliably, MoMoM is online but not thoroughly tested yet, STABLE is still in testing, Oracle is also in testing, Tokens are not in testing, and there is a CC smart contract required to manage the payout according to the results. 

Those are the aspects that KMD and the open-source KMD-ecosystem community want to provide to our users.

In addition, the dApp developer will want to write their own unique software to make a beautiful dApp game. 

How are we doing in understanding?


[11-Oct-18 05:37 AM] Deleted User#0000
Thats a very large scope... and kind of similar to something me and a mate discussed a while back.


[11-Oct-18 05:38 AM] Deleted User#0000
MoMoM is not activated across all AC at this stage. We are tesing it on STAKED  and currently only have corss chain fungible clusters with working code to test with.


[11-Oct-18 05:39 AM] Deleted User#0000
We would need another CC that works with MoM chains under cc=100 for validating TX from one AC to another ... currently MoMoM needs KMD full node for 1 step of the process.


[11-Oct-18 05:41 AM] Deleted User#0000
for MoMoM to work correctly it needs a few fixes and to be actually enabled in iguana across all chains... We need to test how far it scales, ie number of chains.


[11-Oct-18 05:41 AM] Deleted User#0000
I am pretty sure the chance of a mismatch increases with more and more chains added to the cluster.


[11-Oct-18 05:42 AM] Deleted User#0000
also things like ondemand chains, and PoS chains with blocktimes that can vary a lot, might introduce other points of failure, and we need to test that thourghly aswell still.


[11-Oct-18 05:42 AM] Deleted User#0000
Hope someone else cna help you wiht the other questions


[11-Oct-18 05:53 AM] Bryan_Beus#6442
That's helpful. Thank you. Yes, I know that MoMoM is still in the early stages. I'm just hoping that I have the general idea now.


[11-Oct-18 05:53 AM] Deleted User#0000
If you are just trying to describe whats possible .. .they what you say seems liek ti would work, but it would be VERY hard to implement


[11-Oct-18 06:14 AM] gcharang#6833
Documentation for contracts and their RPC calls: https://docs.komodoplatform.com/cc/contracts/index-contracts.html


[11-Oct-18 06:14 AM] gcharang#6833
Pinned a message.


[11-Oct-18 06:22 AM] Bryan_Beus#6442
@Deleted User 

Can you give me a different narrative, but of what you think is realistic, within the next six to twelve months?


[11-Oct-18 06:22 AM] Bryan_Beus#6442
Just an example use case that is within a dApp dev's ability to achieve?


[11-Oct-18 06:29 AM] Deleted User#0000
Not really, I havent used enough of them. my experaiance is limited.


[11-Oct-18 06:29 AM] Deleted User#0000
I only answered to what i know about


[11-Oct-18 06:29 AM] Deleted User#0000
dont want to speculate on things


[11-Oct-18 07:08 AM] Bryan_Beus#6442
Ok


[11-Oct-18 07:36 AM] dukeleto#7326
@gcharang nice cc docs üòÉ


[11-Oct-18 08:27 AM] Mylo#8306
@Bryan_Beus put that use case into a gist for later.
Eg https://gist.github.com/imylomylo/d363de0a40fc6f56c0ef8d9f681e2f73
This is basic AC creation, rewardsCC, oracleCC for gps or other activity data, scaling configuration

{Embed}
https://gist.github.com/imylomylo/d363de0a40fc6f56c0ef8d9f681e2f73
RUNcoin Documentation
RUNcoin Documentation. GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102


[11-Oct-18 08:27 AM] Mylo#8306
RUNcoin üëÜ


[11-Oct-18 08:27 AM] Bryan_Beus#6442
thanks.

and will do.


[11-Oct-18 08:27 AM] Mylo#8306
Ps can‚Äôt talk atm


[11-Oct-18 02:24 PM] Alright#0419
@TonyL CCNG is not being notarized, why? We can do it if you need to test something


[11-Oct-18 03:08 PM] CrisF#3405
@gcharang Great job again by you and everyone involved. The cc rpc docs are brilliant!! :Komodo:


[11-Oct-18 11:27 PM] gcharang#6833
@CrisF @dukeleto Thanks guys. Do make any suggestions that would improve them.


[11-Oct-18 11:30 PM] Alright#0419
is oraclesdata limited to once per block per publisher?


[11-Oct-18 11:30 PM] TonyL#3577
@Alright Nope, it's not limited. If you need to publish more than one oraclesdata per block you need to create UTXOs by oraclessubscribe


[11-Oct-18 11:31 PM] Alright#0419
Ah, I understand


[11-Oct-18 11:31 PM] Alright#0419
thanks


[11-Oct-18 11:31 PM] TonyL#3577
Regards notarizations - in future Channels will work with it, thats why I've asked )


[11-Oct-18 11:31 PM] TonyL#3577
@Alright https://github.com/tonymorony/cryptoconditions_tui/blob/master/gateways_cc_cli.py in this tool you can find oracles UTXOs generator if needed üòÉ

{Embed}
https://github.com/tonymorony/cryptoconditions_tui/blob/master/gateways_cc_cli.py
tonymorony/cryptoconditions_tui
Terminal user interfaces for Komodo CryptoConditions smart-contracts - tonymorony/cryptoconditions_tui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[12-Oct-18 12:45 AM] jl777c#5810
when a tx in is the chaintip, that is 1 confirmation


[12-Oct-18 12:45 AM] jl777c#5810
the check in the CC seems of by 1


[12-Oct-18 12:59 AM] TonyL#3577
Thinking now where to move next: can create TUI for assetsCC trading, or for betsCC placing, or improve gatewaysCC TUI automation (but it's better to do on feedback of someone tested it), or can start cover some uncovered CCs by auto-tests. Maybe if start write tests more probably to find bugs ü§î


[12-Oct-18 01:16 AM] jl777c#5810
yes, the most important untested one is multisig gateways CC deposit address


[12-Oct-18 01:16 AM] jl777c#5810
it is in a totally untested path, so maybe nothing works at all


[12-Oct-18 01:16 AM] jl777c#5810
together with @Mihailo I hope you two can find and fix all the bugs in oracles and gateways CC


[12-Oct-18 01:16 AM] jl777c#5810
no better way to learn something than by breaking and fixing it


[12-Oct-18 01:19 AM] TonyL#3577
@jl777c Multisig gateways option is more than one pubkey usage on this stage ` gatewaysbind tokenid oracletxid coin tokensupply M N pubkey(s)` ?


[12-Oct-18 01:19 AM] jl777c#5810
yes, try 2 3 <pubkey0> <pubkey1> <pubkey2)


[12-Oct-18 01:19 AM] jl777c#5810
that will make a 2of3 multisig deposit address, starting with b for KMD


[12-Oct-18 01:20 AM] jl777c#5810
then at least 2 of three of those pubkeyX nodes needs to run oraclefeed properly to process withdraw requests


[12-Oct-18 01:20 AM] jl777c#5810
i am 99.99% sure that there will be some problems with the msig withdraw, have fun to find and fix them!


[12-Oct-18 01:21 AM] TonyL#3577
Seems interesting! Going ahead with it


[12-Oct-18 01:25 AM] jl777c#5810
and one this is working, the gateways CC will offer the absolute best level of decentralization for a token DEX


[12-Oct-18 01:25 AM] jl777c#5810
I envision something like 7 of 13 trusted community members to be running the deposit pubkeys


[12-Oct-18 01:26 AM] jl777c#5810
and with it be automated if oraclefeed is running, the withdraw guarantee is that 7 of 13 are simply running the oraclefeed

{Reactions}
üöÄ (3) 

[12-Oct-18 02:12 AM] Mylo#8306
Is it possible to lock a block reward with a CC?  Further, can the BR then be paid out / distributed by another CC according to a different rule, like shares of participation of some external activity?


[12-Oct-18 02:12 AM] Mylo#8306
External activity having been oracle ized


[12-Oct-18 02:21 AM] Deleted User#0000
I was wondering this too ... for TROLL I wanted the BR to go into the faucet fund


[12-Oct-18 02:21 AM] Deleted User#0000
instead i used the maximum AC supply, and put it all in the faucet...


[12-Oct-18 02:21 AM] Deleted User#0000
burns all TX fees


[12-Oct-18 02:25 AM] Alright#0419
@TonyL @Deleted User has a simple TUI for dice betting already


[12-Oct-18 02:25 AM] Deleted User#0000
so does @smkhound

{Reactions}
üëç 

[12-Oct-18 02:25 AM] Deleted User#0000
his is better again


[12-Oct-18 02:25 AM] Deleted User#0000
he improved mine


[12-Oct-18 02:26 AM] Deleted User#0000
mine was based on @ComputerGenie 's


[12-Oct-18 02:27 AM] TonyL#3577
Ok, cool üòÉ Is it on bash?


[12-Oct-18 02:27 AM] Deleted User#0000
Yes I think they are all in bash


[12-Oct-18 02:29 AM] CrisF#3405
@gcharang The only suggestion that I would have at the moment is to keep doing what you are doing.  I figure any other suggestions I might have are very minor in comparison.  The value, especially to newcomers to KMD and to CC, of the documentation you are producing is immense.  Get out as much as you can I'd say!


[12-Oct-18 02:35 AM] CrisF#3405
@Mylo Do you think `blockchain dog` is relevant to what siddhartha was asking about üëÜ?


[12-Oct-18 03:17 AM] Mylo#8306
If blockchain dog gamified walking your dog - sure.  Collect tokens, meet at a dog park etc.

{Reactions}
üòÉ 

[12-Oct-18 03:17 AM] jl777c#5810
nothing stops the blockreward from going to any arbitrary address, including a CC address


[12-Oct-18 03:17 AM] jl777c#5810
but it could be that some CC wont work properly if it is done, not sure this seems like a case where it could break some CC assumptions


[12-Oct-18 03:20 AM] Mylo#8306
OK thanks, something we can test in #kmdlabs


[12-Oct-18 03:28 AM] jl777c#5810
a new simple project for CC dev is to make a faucet that is configurable


[12-Oct-18 03:28 AM] jl777c#5810
so like the rewards plan it would allow to be parameterized


[12-Oct-18 03:28 AM] jl777c#5810
first step is to define all the parameters


[12-Oct-18 03:28 AM] jl777c#5810
then to implement it as faucet2


[12-Oct-18 03:32 AM] TonyL#3577
@jl777c Parameters defining should be on pre-compile stage or on-chain when CC is deployed?


[12-Oct-18 03:41 AM] jl777c#5810
in order to develop a CC, you need to define it first, then develop support for it, then debug it, etc. maybe one of the new students will want to do this


[12-Oct-18 04:00 AM] TonyL#3577
Yep, not going to do it - just was interesting about way of params define implementation


[12-Oct-18 04:02 AM] jl777c#5810
if you need help, just ask your local simple CC designer

{Reactions}
ü§î (2) üé∞ Komodo (2) üë® ‚òé 

[13-Oct-18 06:10 PM] CrisF#3405
Hi, I'm trying to test out channels.  Is there any reason it wouldn't work on STAKED branch?


[13-Oct-18 06:11 PM] CrisF#3405
I've successfully created a channel.


[13-Oct-18 06:14 PM] CrisF#3405
```"Channel": "REPu3ou58hBBQvfR8q8fH5mZDB9PRDvyvF - 1 payments of 1000000000 satoshi - 74921db337f13bcb1b0cd3f0d024d2167b15b1ccc4d63338ed2091511448f575"```


[13-Oct-18 06:14 PM] CrisF#3405
`channelspayment` shows `success`


[13-Oct-18 06:15 PM] CrisF#3405
When `sendrawtransaction` ```error code: -22
error message:
TX decode failed```


[13-Oct-18 07:00 PM] Alright#0419
@CrisF I might need to merge latest into STAKED


[13-Oct-18 07:01 PM] Alright#0419
have to take a look to see if there's any hard forking changes


[13-Oct-18 07:14 PM] CrisF#3405
@Alright Thanks.
I'll see if I can get things going on CCNG when I get back.


[13-Oct-18 07:15 PM] CrisF#3405
Is jl777 branch good for that, or FSM?


[13-Oct-18 07:16 PM] Alright#0419
FSM I believe


[13-Oct-18 07:16 PM] CrisF#3405
OK, thanks!


[14-Oct-18 02:36 AM] CrisF#3405
`channelspayment` sent with FMS on CCNG perfectly.


[14-Oct-18 02:37 AM] CrisF#3405
Will try it out more this week.


[14-Oct-18 02:37 AM] TonyL#3577
@CrisF ChannelsCC working on CCNG chain


[14-Oct-18 02:39 AM] CrisF#3405
Yes, I was trying before on STAKED ü§¶


[14-Oct-18 02:41 AM] CrisF#3405
Have an error with `channelsclose`so will look into what I'm doing wrong there.


[14-Oct-18 02:42 AM] TonyL#3577
@CrisF Channel opening transaction have to be confirmed twice before closing


[14-Oct-18 02:43 AM] CrisF#3405
Thanks, @TonyL .  I'm waiting now.


[14-Oct-18 09:29 PM] Alright#0419
@jl777c can you take a look at this? I know you said you'd come back to oracles once a couple bugs were pin pointed, but I'm having trouble figuring out the pattern here. The json always starts with the same pubkey and prints dupes of it in each

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/501250203135770645/oraclesinfo


[14-Oct-18 09:29 PM] Alright#0419
https://github.com/jl777/komodo/blob/cd91f5d473a9c8037251d879c9bb5ea0ca0399e4/src/cc/oracles.cpp#L878
Right around there i assume

{Embed}
https://github.com/jl777/komodo/blob/cd91f5d473a9c8037251d879c9bb5ea0ca0399e4/src/cc/oracles.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[14-Oct-18 09:30 PM] Alright#0419
I'm going to focus on identifying as many oracles bugs as I can find, but I was hoping to get this fixed before i start doing that. `oraclesinfo` is hard to use in the current state, makes it hard to use in general without scripting to ignore the bug


[14-Oct-18 09:32 PM] Deleted User#0000
I started on investigationg this but fast got very lost.


[14-Oct-18 09:32 PM] Alright#0419
if you look at that oraclesinfo output, this key `03ee91c20b6d26e3604022f42df6bb8de6f669da4591f93b568778cba13d9e9ddf`, is printed 48 times


[14-Oct-18 09:32 PM] Deleted User#0000
My assumpltion was each aray was to contain a single publisher. But there is no check for that


[14-Oct-18 09:32 PM] Alright#0419
it's not the only one that is duped either


[14-Oct-18 09:33 PM] Alright#0419
think they all may be duped many times


[14-Oct-18 09:33 PM] Deleted User#0000
In trying to add a check, or at least a print that will try and give me the data I need, every last checked publisher and the current one appears the same pubkey... unless I made a mistake, which is very posible.


[14-Oct-18 09:34 PM] Deleted User#0000
Alright can you get the amount of TX i the oracle ? I have 209 loops in that for loop... indicating there is 209 TX's


[14-Oct-18 09:34 PM] Alright#0419
amount of oraclessubscribes?


[14-Oct-18 09:35 PM] Alright#0419
sorry registers*


[14-Oct-18 09:36 PM] Deleted User#0000
tbh I am not sure what that loop is looking at at all or what it meant to be doing, its doing 209 loops.... is the dupe comming from the fact it runs too many times or something else?


[14-Oct-18 09:38 PM] Alright#0419
there are 210 oraclesregisters I think


[14-Oct-18 09:38 PM] Alright#0419
http://stakedb1.staked.cc/address/RWV3c8aysEwtuQx6UAMLBjirrkEVBigfg7


[14-Oct-18 09:38 PM] Alright#0419
that's the marker address for the oracle


[14-Oct-18 09:40 PM] Alright#0419
yea looking at this address just had me confused


[14-Oct-18 09:40 PM] Alright#0419
either someone was doing oraclesregister over and over and over or those aren't all oraclesregisters


[14-Oct-18 09:40 PM] Deleted User#0000
210 make sense as the first loop is 0


[14-Oct-18 09:40 PM] Alright#0419
why was someone registering to the oracle over and over?


[14-Oct-18 09:40 PM] Alright#0419
looks like multiple addresses have registered tons of times each


[14-Oct-18 09:41 PM] Deleted User#0000
so maybe its not even a bug, just that someone is registering too many times


[14-Oct-18 09:41 PM] Deleted User#0000
ü§î


[14-Oct-18 09:41 PM] Deleted User#0000
that gives me an idea ..


[14-Oct-18 09:42 PM] Alright#0419
well the way it displays those jsons is definitely a bug IMO


[14-Oct-18 09:42 PM] Deleted User#0000
`addoracleinputs from (RSwgyWd3Hczo84wWqjty2uUHmU3xJjsbWA)`


[14-Oct-18 09:42 PM] Deleted User#0000
*I think*


[14-Oct-18 09:42 PM] Deleted User#0000
that each array is where it prints that, but i am having a hard to tim understanding how...


[14-Oct-18 09:43 PM] Deleted User#0000
as it calls the function that prints that on evey single loop


[14-Oct-18 09:43 PM] Deleted User#0000
maybe if that funciton returns 0... continue


[14-Oct-18 09:43 PM] Deleted User#0000
will try it


[14-Oct-18 10:03 PM] jl777c#5810
plz report any CC bugs to @Mihailo


[14-Oct-18 10:03 PM] jl777c#5810
he will fix them


[15-Oct-18 12:48 AM] TonyL#3577
@jl777c am I using not correct call format for multiply pubkeys gateway bind?
```komodo-cli -ac_name=CCNG gatewaysbind 6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534 7b1a4c07fb5cdbbb6eab95c0fe4766f59434e8f116eb16f58bce0280050b55c2 2 3 027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4 0324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272 035364d385f84f4b6a7647ef660d9419fde0707b5641eee8b768ec69daf0a5a780
error code: -1
error message:
illegal M or N > 15 or tokensupply or invalid tokenid```


[15-Oct-18 12:48 AM] TonyL#3577
Tokenid should be valid


[15-Oct-18 12:49 AM] TonyL#3577
Oh I just mistaked with call sorry for buzzing
Forgot this part  <coinname> <tokensupply>


[15-Oct-18 12:55 AM] TonyL#3577
Multisig gateway created:
```komodo-cli -ac_name=CCNG gatewaysinfo b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0
{
  "result": "success",
  "name": "Gateways",
  "M": 2,
  "N": 3,
  "pubkeys": [
    "027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4",
    "0324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272",
    "035364d385f84f4b6a7647ef660d9419fde0707b5641eee8b768ec69daf0a5a780"
  ],
  "coin": "KMD",
  "oracletxid": "7b1a4c07fb5cdbbb6eab95c0fe4766f59434e8f116eb16f58bce0280050b55c2",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "",
  "tokenid": "6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534",
  "totalsupply": "1.00000000",
  "remaining": "1.00000000",
  "issued": "0.00000000"
}
```
Will try deposit now.
Is for deposit needed 2 from 3 confirmations same as for withdrawal?


[15-Oct-18 12:59 AM] jl777c#5810
deposit should work normally, what deposit address do you have. eventually we will make it wait for notarization


[15-Oct-18 01:01 AM] TonyL#3577
@jl777c  "deposit": ""


[15-Oct-18 01:01 AM] jl777c#5810
that's not good!


[15-Oct-18 01:01 AM] TonyL#3577
Yes, seems like a bug


[15-Oct-18 01:01 AM] jl777c#5810
it should be a b address


[15-Oct-18 01:02 AM] jl777c#5810
i told you there would be bugs üòÉ


[15-Oct-18 01:02 AM] jl777c#5810
need CCNG params


[15-Oct-18 01:02 AM] TonyL#3577
```komodo-cli -ac_name=CCNG gatewaysbind 6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534 7b1a4c07fb5cdbbb6eab95c0fe4766f59434e8f116eb16f58bce0280050b55c2 KMD 100000000 2 3 027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4 0324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272 035364d385f84f4b6a7647ef660d9419fde0707b5641eee8b768ec69daf0a5a780
{
  "result": "success",
  "hex": "0100000001032f74e7c62551282cd40a725e60eb0478f58d5aa40ed6978408b42c0143c6bd0000000049483045022100a996751ba4d4eccc3f46b0d702087c1062c5b5ad0bdf9f69b134ca9203d9a8cc02204c85d1249d8bda9c53eb52e9e7296da8d9695ea28aa536607c201df0b5b9c1ef01ffffffff031027000000000000302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cce051724e180900002321027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4ac0000000000000000bd6a4cbaf142034b4d443c55003485fa72dbe9cf842d2f0d2664b1bdc7f773a554d4b66e4c592027ac2d48966800e1f5050000000002030321027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127221035364d385f84f4b6a7647ef660d9419fde0707b5641eee8b768ec69daf0a5a780c2550b058002ce8bf516eb16f1e83494f56647fec095ab6ebbdb5cfb074c1a7b00000000"
}```


[15-Oct-18 01:02 AM] TonyL#3577
My call


[15-Oct-18 01:02 AM] TonyL#3577
```./komodod -ac_name=CCNG -ac_supply=1000 -ac_reward=10000000000000 -ac_cc=1 -addnode=195.201.20.230 -addnode=195.201.137.5```


[15-Oct-18 01:02 AM] TonyL#3577
CCNG params


[15-Oct-18 01:04 AM] jl777c#5810
reproduced


[15-Oct-18 01:05 AM] jl777c#5810
investigating


[15-Oct-18 01:15 AM] jl777c#5810
hmmm. it is an issue with the bitcoin internals not handling multisig...this will take a while, hopefully you are not blocked waiting for a fix, definitely it is a bug


[15-Oct-18 01:21 AM] TonyL#3577
Will go ahead with something different while multisig gateways not testable


[15-Oct-18 01:23 AM] jl777c#5810
sorry it took so long üòÉ


[15-Oct-18 01:23 AM] jl777c#5810
pushed fix


[15-Oct-18 01:23 AM] TonyL#3577
Hahaha


[15-Oct-18 01:23 AM] TonyL#3577
"Will take a while" = 8 minutes to fix push, noted

{Reactions}
ü§ñ (2) 

[15-Oct-18 01:26 AM] jl777c#5810
just got lucky and was able to stumble about and copy paste some random code that happened to work

{Reactions}
üòÇ (3) 

[15-Oct-18 01:27 AM] TonyL#3577
Rebuilding my nodes to re-test


[15-Oct-18 02:08 AM] TonyL#3577
```./komodo-cli -ac_name=CCNG gatewaysinfo b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0
ExtractDestination failed
f.B M.2 of N.3 size.3 -> bQw31Cxvv5xUFVthFbHiM1D4mqwkcEwAcq
check f551d0d8ec8a558afdcf76d10deb6279f169b3b094560be9c26dc1f0d6f5492d 1.00000000
check 645d6910b596ef1c727ac896f7de6e50687484404432e441c50f6499d341c16d 0.00010000
check 43716dfdf7f4cce72d061bab34a40befb8464b712c5c3f85a3e6ec02cb4e90c6 0.99000000
check b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0 0.00010000
{
  "result": "success",
  "name": "Gateways",
  "M": 2,
  "N": 3,
  "pubkeys": [
    "027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4",
    "0324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272",
    "035364d385f84f4b6a7647ef660d9419fde0707b5641eee8b768ec69daf0a5a780"
  ],
  "coin": "KMD",
  "oracletxid": "7b1a4c07fb5cdbbb6eab95c0fe4766f59434e8f116eb16f58bce0280050b55c2",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "bQw31Cxvv5xUFVthFbHiM1D4mqwkcEwAcq",
  "tokenid": "6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534",
  "totalsupply": "1.00000000",
  "remaining": "1.00000000",
  "issued": "0.00000000"
}
```
Have deposit address now üï∫


[15-Oct-18 02:48 AM] TonyL#3577
@jl777c Is this `ExtractDestination failed` normal in case of multisig gateway usage?
```./oraclefeed CCNG 7b1a4c07fb5cdbbb6eab95c0fe4766f59434e8f116eb16f58bce0280050b55c2 027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4 Ihh b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   673  100   673    0     0  35421      0 --:--:-- --:--:-- --:--:-- 35421
BTC/USD 6494.9413
Powered by CoinDesk (https://www.coindesk.com/price/) 6494.94130000
addoracleinputs from (RDgmmoK5A2BARsu462Ga4YKr9zJVvt7oiQ)
ExtractDestination failed
f.B M.2 of N.3 size.3 -> bQw31Cxvv5xUFVthFbHiM1D4mqwkcEwAcq
check f551d0d8ec8a558afdcf76d10deb6279f169b3b094560be9c26dc1f0d6f5492d 1.00000000
check 645d6910b596ef1c727ac896f7de6e50687484404432e441c50f6499d341c16d 0.00010000
check 43716dfdf7f4cce72d061bab34a40befb8464b712c5c3f85a3e6ec02cb4e90c6 0.99000000
check b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0 0.00010000
loadfile null size.(/tmp/oraclefeed.importaddress)
set refcoin bQw31Cxvv5xUFVthFbHiM1D4mqwkcEwAcq <- KMD [./komodo-cli] M.2 of N.3
addoracleinputs from (RDgmmoK5A2BARsu462Ga4YKr9zJVvt7oiQ)
broadcast CCNG txid.(7d5f42e24cb4273a7c6211b32b54f6dbe0ed0015500478def272b60731bb8f95)
KMD ht.1053674 <- ea131000ebb0e7be7fa29e1707e92accca8b908c12c4c12d47d70308108557bc020000008784fd535d43c3f1c361951a7f8f39a1d6c6291bd3cc1985fcd5c224c049b966
ExtractDestination failed```


[15-Oct-18 02:50 AM] jl777c#5810
if it works otherwise it is normal, if not, it is a bug


[15-Oct-18 03:17 AM] TonyL#3577
gatewaysdeposit worked for a multisig gateway as expected:
```
./komodo-cli -ac_name=CCNG tokenbalance 6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534
{
  "result": "success",
  "CCaddress": "RENyTP2YsjYSJu4eXnwNeYVBFRVaQi5ibU",
  "tokenid": "6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534",
  "balance": 10000000
}
```


[15-Oct-18 03:18 AM] TonyL#3577
Enabled oraclefeed on two gateway keeping nodes from three, preparing withdrawal


[15-Oct-18 03:39 AM] TonyL#3577
1) Converted back tokens:
```komodo-cli -ac_name=CCNG tokenconvert 241 6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534 024827527b4b43ae9987276cce647d32aecfb5b5a2b71cda2928d7bd0a6c8cd928 10000000```
```komodo-cli -ac_name=CCNG sendrawtransaction 0100000002f9dfe7b88f35a0324f510579f354091001a6b2d6ad8a435b62fd116c474c1786020000004847304402207313069e90e49df56ed742ff1a9dad626b598e01ae4e62414d764a81a512a75a022027604a8051fd9db91b0535dc5164d547996c8080da877b0fe82bdf720775843501fffffffff9dfe7b88f35a0324f510579f354091001a6b2d6ad8a435b62fd116c474c1786000000007b4c79a276a072a26ba067a5658021024827527b4b43ae9987276cce647d32aecfb5b5a2b71cda2928d7bd0a6c8cd92881406f20b6fbdc961cb44b51fb151d866e1225dc07ce4103ff5732cf0aba783a184a7d2b5090a6e5f5c59429751cbfb5c35c5478159cfa6048394ac7f082bb882f70a100af038001e3a10001ffffffff040000000000000000302ea22c80205fe4a36e888cd08d245286368f177b9bd5b92b7897d59fe2d137e3fc2abbbada8103120c008203000401cc8096980000000000302ea22c80208ffe95e1df857506ea7b05f28deca906a79a41f8d1fcd79798e804451dc455aa8103120c008203000401cce0570e00000000002321024827527b4b43ae9987276cce647d32aecfb5b5a2b71cda2928d7bd0a6c8cd928ac0000000000000000246a22e3746896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa853400000000
f5af1d0facce2e16c0cf27758c34a66456953eec7021c36f13cab9add1f13d4a```


[15-Oct-18 03:39 AM] TonyL#3577
2) Prepared hex for gatewayswithdraw
```komodo-cli -ac_name=CCNG gatewayswithdraw b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0 KMD 0286f30e22b637a36476c6afeac405d4f129087f1a2a5a08d81566b951a2a021ff 10000000
{
  "result": "success",
  "hex": "01000000024a3df1d1adb9ca136fc32170ec3e955664a6348c7527cfc0162eceac0f1daff502000000484730440220400b5c50287b6e5996fe9054253079e09c0e2fd1434af17675d0c1090baac9e80220238f9652878b4f621b0c17cae1b770c0c9a9791d59e9e20e78e4ab837182ef2b01ffffffff4a3df1d1adb9ca136fc32170ec3e955664a6348c7527cfc0162eceac0f1daff5010000007b4c79a276a072a26ba067a5658021024827527b4b43ae9987276cce647d32aecfb5b5a2b71cda2928d7bd0a6c8cd9288140c92d726970ebadd7e80ba4463d2c1f57953c8b0cb23090fb0d5313eaaa2ecdfe3fcf70ab02fcbd1b6f361994d0cde2cb05428e4c202a32a86cb7c0df57880552a100af038001f1a10001ffffffff040080c6a47e8d0300302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc102700000000000023210286f30e22b637a36476c6afeac405d4f129087f1a2a5a08d81566b951a2a021ffac1027000000000000232103ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40ac0000000000000000246a22e3746896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa853400000000"
}
```


[15-Oct-18 03:39 AM] TonyL#3577
3) Received error on broadcasting which I've never seen before @jl777c 
```komodo-cli -ac_name=CCNG sendrawtransaction 01000000024a3df1d1adb9ca136fc32170ec3e955664a6348c7527cfc0162eceac0f1daff502000000484730440220400b5c50287b6e5996fe9054253079e09c0e2fd1434af17675d0c1090baac9e80220238f9652878b4f621b0c17cae1b770c0c9a9791d59e9e20e78e4ab837182ef2b01ffffffff4a3df1d1adb9ca136fc32170ec3e955664a6348c7527cfc0162eceac0f1daff5010000007b4c79a276a072a26ba067a5658021024827527b4b43ae9987276cce647d32aecfb5b5a2b71cda2928d7bd0a6c8cd9288140c92d726970ebadd7e80ba4463d2c1f57953c8b0cb23090fb0d5313eaaa2ecdfe3fcf70ab02fcbd1b6f361994d0cde2cb05428e4c202a32a86cb7c0df57880552a100af038001f1a10001ffffffff040080c6a47e8d0300302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc102700000000000023210286f30e22b637a36476c6afeac405d4f129087f1a2a5a08d81566b951a2a021ffac1027000000000000232103ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40ac0000000000000000246a22e3746896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa853400000000
error code: -26
error message:
16: bad-txns-in-belowout
```


[15-Oct-18 03:44 AM] TonyL#3577
Checking vouts


[15-Oct-18 03:48 AM] TonyL#3577
Hmm there are two vins with same txid


[15-Oct-18 03:49 AM] TonyL#3577
```komodo-cli -ac_name=CCNG decoderawtransaction ^^
{
  "txid": "40110afd140cf9510575266ce57bf5b4cebacc0f4bbc3faba3bff8bb55896510",
  "size": 477,
  "version": 1,
  "locktime": 0,
  "vin": [
    {
      "txid": "f5af1d0facce2e16c0cf27758c34a66456953eec7021c36f13cab9add1f13d4a",
      "vout": 2,
      "scriptSig": {
        "asm": "30440220400b5c50287b6e5996fe9054253079e09c0e2fd1434af17675d0c1090baac9e80220238f9652878b4f621b0c17cae1b770c0c9a9791d59e9e20e78e4ab837182ef2b01",
        "hex": "4730440220400b5c50287b6e5996fe9054253079e09c0e2fd1434af17675d0c1090baac9e80220238f9652878b4f621b0c17cae1b770c0c9a9791d59e9e20e78e4ab837182ef2b01"
      },
      "sequence": 4294967295
    },
    {
      "txid": "f5af1d0facce2e16c0cf27758c34a66456953eec7021c36f13cab9add1f13d4a",
      "vout": 1,
      "scriptSig": {
        "asm": "a276a072a26ba067a5658021024827527b4b43ae9987276cce647d32aecfb5b5a2b71cda2928d7bd0a6c8cd9288140c92d726970ebadd7e80ba4463d2c1f57953c8b0cb23090fb0d5313eaaa2ecdfe3fcf70ab02fcbd1b6f361994d0cde2cb05428e4c202a32a86cb7c0df57880552a100af038001f1a10001",
        "hex": "4c79a276a072a26ba067a5658021024827527b4b43ae9987276cce647d32aecfb5b5a2b71cda2928d7bd0a6c8cd9288140c92d726970ebadd7e80ba4463d2c1f57953c8b0cb23090fb0d5313eaaa2ecdfe3fcf70ab02fcbd1b6f361994d0cde2cb05428e4c202a32a86cb7c0df57880552a100af038001f1a10001"
      },
      "sequence": 4294967295
    }
```


[15-Oct-18 03:52 AM] TonyL#3577
https://pastebin.com/1sBtwdtp

{Embed}
https://pastebin.com/1sBtwdtp
komodo-cli -ac_name=CCNG getrawtransaction f5af1d0facce2e16c0cf277...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[15-Oct-18 03:56 AM] jl777c#5810
probably need to add a check to prevent duplicate vins


[15-Oct-18 03:57 AM] jl777c#5810
what you can do is change up your vins a bit


[15-Oct-18 03:57 AM] jl777c#5810
hopefully @Mihailo can find and fix the bug, I am not able to debug now

{Reactions}
üëå 

[15-Oct-18 03:58 AM] TonyL#3577
@Mihailo It's a multisig gateway already, not a M N 1 1 one


[15-Oct-18 04:04 AM] Mihailo#5902
Ok, I'll take a look at it now, let me just setup multisig gateway


[16-Oct-18 07:52 AM] TonyL#3577
@jl777c How should `oraclefeed` behaviour by design in case of usage from multiply nodes for same gateway/oracle? Will they try to send blockdata simultaneously or there is some different logic? At the moment seems that only one node sending blockdata to oracle and other in some stand-by


[16-Oct-18 07:54 AM] jl777c#5810
1 or all can send data, it is setup so all do

{Reactions}
üëå 

[16-Oct-18 08:51 AM] Deleted User#0000
hi all, I am Faisal from UTA

{Reactions}
üëã 

[16-Oct-18 08:51 AM] Deleted User#0000
just joined the group


[16-Oct-18 08:52 AM] TonyL#3577
Hi and welcome @Deleted User


[16-Oct-18 09:32 AM] jl777c#5810
@Deleted User welcome! I look forward to working with you to create that very special custom CC

{Reactions}
üëÄ (3) üöÄ (3) Komodo (6) 

[16-Oct-18 11:54 AM] Mihailo#5902
@TonyL  I made the setup of multisig gateways CC, and did the withdraw without the error.


[16-Oct-18 10:57 PM] TonyL#3577
@Mihailo Great! üôå üî• 
Did you push fix for `oraclesinfo` already so I'll able to re-check on my side with > 1 node data publishing?


[17-Oct-18 12:53 AM] Alright#0419
@TonyL what do you mean by "e-check on my side with > 1 node data publishing?"


[17-Oct-18 12:54 AM] Alright#0419
seems to me that the oraclesinfo bug is purely cosmetic


[17-Oct-18 12:54 AM] TonyL#3577
When I get this:
```error code: -26
error message:
16: bad-txns-in-belowout```
Error on `gatewayswithdrawal` only one node was able to publish data by `oraclefeed`


[17-Oct-18 12:55 AM] TonyL#3577
This was caused of `oraclesinfo` not correct presentation and `oraclefeed` wasn't able to grab list of publishers


[17-Oct-18 12:56 AM] Alright#0419
it grabs them all, right? Just shows tons of dupes?


[17-Oct-18 12:56 AM] TonyL#3577
@Mihailo Fixed this presentation problem and `gatewayswithdraw` seems worked on this side


[17-Oct-18 12:56 AM] Alright#0419
that's what I've been experiencing


[17-Oct-18 12:56 AM] Alright#0419
Oh, is that fixed? üòÉ


[17-Oct-18 12:56 AM] TonyL#3577
It's shown publishers data as 1,1+2,1+2+3 instead of 1,2,3


[17-Oct-18 12:57 AM] TonyL#3577
@Alright Yes, @Mihailo fixed it üòÉ Thats why I've asked is fix in production already to re-check `gatewayswithdraw`


[17-Oct-18 01:04 AM] jl777c#5810
@Mihailo plz make a pull request with oraclesinfo fix


[17-Oct-18 01:05 AM] Alright#0419
@Mihailo there is another bug in oracles cc in which, a single pubkey shares funds across all oracles. To reproduce:
create 2 oracles
register from same pubkey on both
subscribe(fund) to first one
publish(oraclesdata) on the second one(one that should not be funded)

It will use the funds of the first oracle


[17-Oct-18 01:06 AM] Alright#0419
Can give you a more detailed way to reproduce if you need it


[17-Oct-18 01:55 AM] Mihailo#5902
@TonyL  @Alright  Hi guys, I'll push the fix for oraclesinfo right away.

{Reactions}
üôå 

[17-Oct-18 01:56 AM] Mihailo#5902
It basically fix the oraclefeed as it was able to work for only first publisher datat, and for those aggregated it did not work.


[17-Oct-18 01:56 AM] jl777c#5810
I am working on a CC design with MARMARA that will allow for users to issue real world value "checks". using the existing post dated check that is an estimated trillion dollars per year market

{Reactions}
ü§ë 

[17-Oct-18 01:57 AM] jl777c#5810
it is quite an intricate thing, but we are getting three levels of security for these user issued checks


[17-Oct-18 01:57 AM] jl777c#5810
the user are typically established businesses or wealthy people


[17-Oct-18 01:57 AM] jl777c#5810
and people can spend a check they have by endorsing it to another person


[17-Oct-18 01:57 AM] jl777c#5810
who in turn can spend it again! and again


[17-Oct-18 01:57 AM] jl777c#5810
so it is like a utxo linked list, very spooky actually


[17-Oct-18 01:58 AM] jl777c#5810
and it is only backed by trust in the original issuer!


[17-Oct-18 01:58 AM] jl777c#5810
this works as punishment for nonpayment is ranging from being kicked out of the country, or even death


[17-Oct-18 01:59 AM] jl777c#5810
but we will have locked rewards as secondary security and a global insurance fund (from -ac_perc) to cover the few remaining cases


[17-Oct-18 01:59 AM] jl777c#5810
the CC will thus enable automated a currently cumbersome and manual process

{Reactions}
üöÄ 

[17-Oct-18 02:00 AM] Mihailo#5902
@TonyL @Alright https://github.com/jl777/komodo/pull/908

{Embed}
https://github.com/jl777/komodo/pull/908
Fix oraclesinfo by Mixa84 ¬∑ Pull Request #908 ¬∑ jl777/komodo
https://images-ext-2.discordapp.net/external/5PP5Rc1dp6Lo2v8nwnTvQmRdaXpEf9xjHeMr0XyppBs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/39563265


[17-Oct-18 02:00 AM] jl777c#5810
such a small change! I guess I was close


[17-Oct-18 02:02 AM] Deleted User#0000
Wow ... yes such an easy fix...


[17-Oct-18 02:02 AM] Deleted User#0000
I messed around with that for hours üòÇ  
Guess it helps if you konw what to look for.


[17-Oct-18 02:03 AM] Mihailo#5902
üòé


[17-Oct-18 02:04 AM] Mihailo#5902
@Alright I'll put in my to-do for that bug with sharing funds, I have to fix oraclefeed for multisig first...


[17-Oct-18 04:14 AM] SHossain#0007
@TonyL how is it going?


[17-Oct-18 04:15 AM] TonyL#3577
@SHossain Was busy with support inquiries today so far. Will rest a little bit, update my nodes with `oraclesinfo` fix and re-test multisig gateway


[17-Oct-18 04:16 AM] SHossain#0007
nice. we need to get the oracles deeply tested


[17-Oct-18 04:16 AM] SHossain#0007
Let me know when you start. I'll join you.

{Reactions}
üëå 

[17-Oct-18 04:18 AM] TonyL#3577
As I understand oraclesCC deeper testing in #kmdlabs at the moment. We went ahead with Mihailo with GatewayCC testing in case of more that one pubkey usage for binding (multisig)


[17-Oct-18 04:28 AM] TonyL#3577
I think that to get oracles `deeply tested` we have to proceed to auto-tests writing and find out if there any bugs in this process. It's taking a lot of time to create different oracles types, publish/read different types of data manually


[17-Oct-18 04:37 AM] SHossain#0007
Let's get your auto test magic TUI üòÉ

{Reactions}
üëç 

[17-Oct-18 04:38 AM] SHossain#0007
that was easier for me to follow along.


[17-Oct-18 04:39 AM] TonyL#3577
TUI just put things in one place for manual testing / usage üòÉ 
https://github.com/jl777/komodo/blob/master/qa/rpc-tests/cryptoconditions.py for auto-tests we have a beautiful @dukeleto 's framework üòÉ

{Embed}
https://github.com/jl777/komodo/blob/master/qa/rpc-tests/cryptoconditions.py
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[17-Oct-18 06:02 AM] TonyL#3577
`deleted messages where I broadcasted transaction generated on asset chain to komodo chain Oo`


[17-Oct-18 06:06 AM] dukeleto#7326
@TonyL thank üòÉ I know I haven't been very active in CC lately, but I have been lurking here

{Reactions}
üôå 

[17-Oct-18 06:18 AM] TonyL#3577
Created and converted tokens as usual:
```komodo-cli -ac_name=CCNG tokeninfo 4a310e037d4e1355322d4aa47ef7c8071e661d06c74b930e7aa134c396e9b5c0
{
  "result": "success",
  "tokenid": "4a310e037d4e1355322d4aa47ef7c8071e661d06c74b930e7aa134c396e9b5c0",
  "owner": "027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4",
  "name": "KMD",
  "supply": 100000000,
  "description": "Testing"
}
```
On gateway bind getting:
```komodo-cli -ac_name=CCNG gatewaysbind 6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534 7b1a4c07fb5cdbbb6eab95c0fe4766f59434e8f116eb16f58bce0280050b55c2 KMD 100000000 2 3 027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4 0324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272 024827527b4b43ae9987276cce647d32aecfb5b5a2b71cda2928d7bd0a6c8cd928
check d4c64e03e66e61fd5dab600c6a4ce3368fa7688f65c9b457547abbede528c100 1.00000000
check 645d6910b596ef1c727ac896f7de6e50687484404432e441c50f6499d341c16d 0.00010000
check 43716dfdf7f4cce72d061bab34a40befb8464b712c5c3f85a3e6ec02cb4e90c6 0.99000000
check b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0 0.00010000
check 86174c476c11fd625b438aadd6b2a601100954f37905514f32a0358fb8e7dff9 0.90000000
check d4c64e03e66e61fd5dab600c6a4ce3368fa7688f65c9b457547abbede528c100 1.00000000
check 645d6910b596ef1c727ac896f7de6e50687484404432e441c50f6499d341c16d 0.00010000
check 43716dfdf7f4cce72d061bab34a40befb8464b712c5c3f85a3e6ec02cb4e90c6 0.99000000
check b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0 0.00010000
check 86174c476c11fd625b438aadd6b2a601100954f37905514f32a0358fb8e7dff9 0.90000000
Gateway bind.KMD (6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534) destaddr.RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 globaladdr.RKWpoK6vTRtq5b9qrRBodLkCzeURHeEk33 token balance 0.90000000 != 1.00000000
{
  "result": "error",
  "error": "couldnt gatewaysbind"
}
```


[17-Oct-18 06:20 AM] jl777c#5810
@Mihailo seems like what happened to you?


[17-Oct-18 06:22 AM] TonyL#3577
Not sure why he getting these 0.9 instead of 1 since I've created token with 1 supply and converted whole supply ü§ï


[17-Oct-18 06:23 AM] TonyL#3577
Convertion transaction id was `d4c64e03e66e61fd5dab600c6a4ce3368fa7688f65c9b457547abbede528c100`


[17-Oct-18 06:31 AM] Mihailo#5902
@jl777c @TonyL  I had problem with oracles where the balance was not matching. But this seems the problem on bind...


[17-Oct-18 06:33 AM] Mihailo#5902
As I see, here seems to be the problem with token supply and total supply in bind command


[17-Oct-18 06:33 AM] Mihailo#5902
Is there some how we can see the converted tokens balance?


[17-Oct-18 06:34 AM] TonyL#3577
I've converted 1 (whole supply) `d4c64e03e66e61fd5dab600c6a4ce3368fa7688f65c9b457547abbede528c100 1.00000000`


[17-Oct-18 06:34 AM] Mihailo#5902
Can you execute tokenbalance for that token and Gateways pubkey


[17-Oct-18 06:34 AM] TonyL#3577
But it's using some other txid `check 86174c476c11fd625b438aadd6b2a601100954f37905514f32a0358fb8e7dff9 0.90000000`


[17-Oct-18 06:34 AM] Mihailo#5902
Yeah, I was wondering what those checks are...


[17-Oct-18 06:35 AM] Mihailo#5902
Hmmm as I see your command, you gave different tokenid in bind!


[17-Oct-18 06:35 AM] TonyL#3577
Converted tokens aren't tokenCC assets anymore, I guess I can't check it balance


[17-Oct-18 06:35 AM] Mihailo#5902
This was your token id 4a310e037d4e1355322d4aa47ef7c8071e661d06c74b930e7aa134c396e9b5c0


[17-Oct-18 06:35 AM] TonyL#3577
Ohhh


[17-Oct-18 06:35 AM] Mihailo#5902
And you supplied 6896482dac2720594c6eb6d454a573f7c7bdb164260d2f2d84cfe9db72fa8534


[17-Oct-18 06:36 AM] Mihailo#5902
Don't worry, happens to me all the time üòÉ

{Reactions}
üòä 

[17-Oct-18 06:36 AM] Mihailo#5902
That's why you need to get that TUI to almost 100% so that we do not make human errors so much üòâ


[17-Oct-18 06:37 AM] jl777c#5810
we do need an enhanced tokenbalance that can list different evalcode

{Reactions}
üëÜ 

[17-Oct-18 06:37 AM] Mihailo#5902
TUI üññ


[17-Oct-18 06:37 AM] TonyL#3577
Yeah, TUI modification is coming after this multisig gateway testing


[17-Oct-18 06:38 AM] TonyL#3577
This time TUI will not "eat" komodod errors and work with RPC calls library


[17-Oct-18 06:43 AM] TonyL#3577
Thank you for help @Mihailo !

{Reactions}
üëç 

[17-Oct-18 07:11 AM] SHossain#0007
first step done
```
>> 0
Input AC name with which you want to work (exmp: ORCL1): CCNG
Set your token name: KMDT
Set your token supply: 1
Set your token description: KMD Test token
Token creation transaction sent to blockchain.
Transaction ID: a10ad28c73eea85aeb623e7100e4a657efe7ba334fb0322a4d9e408bef75d1ed
Token is not created yet. I will check it again in 30 seconds.
You already waiting 0 seconds. Max. waiting time is 300 seconds.
Token succesfully created!
Entry added to tokens_list file!
```


[17-Oct-18 07:11 AM] TonyL#3577
`oraclfeed` working now on multiply publising instances @Mihailo

{Reactions}
üëå 

[17-Oct-18 07:12 AM] Mihailo#5902
@SHossain  Is this token for gateways testing?


[17-Oct-18 07:12 AM] SHossain#0007
yes


[17-Oct-18 07:12 AM] Mihailo#5902
you must name it KMD

{Reactions}
üëÜ 

[17-Oct-18 07:12 AM] SHossain#0007
testing with Tony


[17-Oct-18 07:12 AM] SHossain#0007
ok


[17-Oct-18 07:12 AM] SHossain#0007
doing it again


[17-Oct-18 07:12 AM] Mihailo#5902
that was my mistake to call it KMDT. Basically token and oracle name must be KMD


[17-Oct-18 07:13 AM] Mihailo#5902
I just saved 20-30 minutes of your time üòõ üòÑ

{Reactions}
üëåüèΩ 

[17-Oct-18 07:13 AM] Mihailo#5902
On next team meet-up I expect a pint of beer üòÇ


[17-Oct-18 07:16 AM] SHossain#0007
you will get for sure


[17-Oct-18 07:16 AM] SHossain#0007
üòÉ


[17-Oct-18 07:16 AM] SHossain#0007
üçª


[17-Oct-18 07:16 AM] Mihailo#5902
So easy to make a small mistake on gateways and waste all the steps you done before


[17-Oct-18 07:17 AM] SHossain#0007
```
>> 0
Input AC name with which you want to work (exmp: ORCL1): CCNG
Set your token name: KMD
Set your token supply: 1
Set your token description: KMD test token
Token creation transaction sent to blockchain.
Transaction ID: 0702126e72a123e2448e2a14caf570c87f5ed93e8a176934d36e8d87d16b64f7
Token is not created yet. I will check it again in 30 seconds.
You already waiting 0 seconds. Max. waiting time is 300 seconds.
Token is not created yet. I will check it again in 30 seconds.
You already waiting 30 seconds. Max. waiting time is 300 seconds.
Token is not created yet. I will check it again in 30 seconds.
You already waiting 60 seconds. Max. waiting time is 300 seconds.
Token is not created yet. I will check it again in 30 seconds.
You already waiting 90 seconds. Max. waiting time is 300 seconds.
Token succesfully created!
Entry added to tokens_list file!
```

{Reactions}
‚úÖ 

[17-Oct-18 07:18 AM] SHossain#0007
new token


[17-Oct-18 07:18 AM] SHossain#0007
waiting for oracle creation to be finished
```
>> 2
Availiable data types:

Ihh -> height, blockhash, merkleroot
s -> <256 char string
S -> <65536 char string
d -> <256 binary data
D -> <65536 binary data
c -> 1 byte signed little endian number, C unsigned
t -> 2 byte signed little endian number, T unsigned
i -> 4 byte signed little endian number, I unsigned
l -> 8 byte signed little endian number, L unsigned
h -> 32 byte hash

Input AC name with which you want to work (exmp: ORCL1): CCNG
Set your oracle name: KMD
Set your oracle description: KMD test oracle
Set your oracle type (e.g. Ihh): Ihh
Set registration datafee >= txfee (in satoshis): 10000
Set subscribtion datafee >= txfee (in satoshis): 10000
Oracle creation transaction sent to blockchain.
Transaction ID: 8cf08d0084121ef662109043943f9b08107eaaaaf31b2a123362d284570ce948
Oracle is not created yet. I will check it again in 30 seconds.
You already waiting 0 seconds. Max. waiting time is 300 seconds.
```


[17-Oct-18 07:19 AM] Mihailo#5902
That will fail.


[17-Oct-18 07:19 AM] Mihailo#5902
oracle subscription wants amount in 0.0001000 and register in satoshis.


[17-Oct-18 07:19 AM] Mihailo#5902
Still did not change that to make ti unfirom.


[17-Oct-18 07:19 AM] TonyL#3577
It shouldn't fail if there is 10000 coins on balance


[17-Oct-18 07:19 AM] Mihailo#5902
Yep


[17-Oct-18 07:19 AM] TonyL#3577
Since blockreward > than 100000 on this chain it'll not fail


[17-Oct-18 07:19 AM] Mihailo#5902
That's wat I wanted to write.


[17-Oct-18 07:20 AM] SHossain#0007
```
Oracle creation transaction sent to blockchain.
Transaction ID: 8cf08d0084121ef662109043943f9b08107eaaaaf31b2a123362d284570ce948
Oracle is not created yet. I will check it again in 30 seconds.
You already waiting 0 seconds. Max. waiting time is 300 seconds.
Oracle is not created yet. I will check it again in 30 seconds.
You already waiting 30 seconds. Max. waiting time is 300 seconds.
Oracle succesfully created!
Oracle registration transaction sent to blockchain.
Transaction ID: a5cc21b524f8b4ff746344b677bf292808442f35416b91d09702ea309c341f8f
Oracle is not registered yet. I will check it again in 30 seconds.
You already waiting 0 seconds. Max. waiting time is 300 seconds.
Oracle succesfully registered!
Oracle subscription transaction sent to blockchain.
Transaction ID: 87505e035b1f157a11587caafb2db677aa81f3516dbaee72eb9fc7cc70ed8151
You not subscribed on Oracle yet. I will check it again in 30 seconds.
You already waiting 0 seconds. Max. waiting time is 300 seconds.
```


[17-Oct-18 07:20 AM] SHossain#0007
continuing


[17-Oct-18 07:20 AM] SHossain#0007
ü§î


[17-Oct-18 07:20 AM] TonyL#3577
I especially put 10000 here in instructions to @SHossain so this oracle can live a lot


[17-Oct-18 07:20 AM] Mihailo#5902
And also. You need to put enough funds in subscribe for it to work!


[17-Oct-18 07:20 AM] Mihailo#5902
@SHossain  You probably have balance more than 10000 coins


[17-Oct-18 07:20 AM] SHossain#0007
yes


[17-Oct-18 07:20 AM] Mihailo#5902
because in subscribe you put 10000 and it is coins


[17-Oct-18 07:20 AM] Mihailo#5902
And in register it is satoshis


[17-Oct-18 07:20 AM] SHossain#0007
i guess it is done 
```
Input AC name with which you want to work (exmp: ORCL1): CCNG
Set your oracle name: KMD
Set your oracle description: KMD test oracle
Set your oracle type (e.g. Ihh): Ihh
Set registration datafee >= txfee (in satoshis): 10000
Set subscribtion datafee >= txfee (in satoshis): 10000
Oracle creation transaction sent to blockchain.
Transaction ID: 8cf08d0084121ef662109043943f9b08107eaaaaf31b2a123362d284570ce948
Oracle is not created yet. I will check it again in 30 seconds.
You already waiting 0 seconds. Max. waiting time is 300 seconds.
Oracle is not created yet. I will check it again in 30 seconds.
You already waiting 30 seconds. Max. waiting time is 300 seconds.
Oracle succesfully created!
Oracle registration transaction sent to blockchain.
Transaction ID: a5cc21b524f8b4ff746344b677bf292808442f35416b91d09702ea309c341f8f
Oracle is not registered yet. I will check it again in 30 seconds.
You already waiting 0 seconds. Max. waiting time is 300 seconds.
Oracle succesfully registered!
Oracle subscription transaction sent to blockchain.
Transaction ID: 87505e035b1f157a11587caafb2db677aa81f3516dbaee72eb9fc7cc70ed8151
You not subscribed on Oracle yet. I will check it again in 30 seconds.
You already waiting 0 seconds. Max. waiting time is 300 seconds.
Succesfully subscribed on oracle!
Entry added to oracles_list file!
```


[17-Oct-18 07:21 AM] Mihailo#5902
Basically that is correct usage


[17-Oct-18 07:21 AM] TonyL#3577
Yeah, just wrong printout in TUI now


[17-Oct-18 07:21 AM] Mihailo#5902
You need to give it enough amount in subscribe so it can work. If one fee is 10k sat if you give 1 coin it will have enough funds for 1000 oraclefeed posts.


[17-Oct-18 07:22 AM] SHossain#0007
```
./komodo-cli -ac_name=CCNG getbalance
289997.99870000
```


[17-Oct-18 07:22 AM] Mihailo#5902
@TonyL Not just wrong on TUI, but we should make it uniform on register and subscribe. It is either coins or satoshis.


[17-Oct-18 07:22 AM] Mihailo#5902
Easy to make a mistake if it is different if some developer using it without TUI.


[17-Oct-18 07:23 AM] TonyL#3577
Yeah, better to have satoshies in both places


[17-Oct-18 07:23 AM] SHossain#0007
i thought the value 10000 is already in satoshi


[17-Oct-18 07:23 AM] Mihailo#5902
@SHossain So you made it correctly now you set register to 10k sat and gave 10k coins for funds so it can work for a long time.


[17-Oct-18 07:24 AM] Mihailo#5902
But just to understand how it works. Register fee is how much it cost to post data and in subscribe you give funds for that posting


[17-Oct-18 07:24 AM] TonyL#3577
@SHossain TUI just robbed you üòÇ

{Reactions}
rum 

[17-Oct-18 07:24 AM] Mihailo#5902
If you give 100k sat in subscribe on 10k fee it can only  post 10 times and that's it.


[17-Oct-18 07:25 AM] TonyL#3577
@Mihailo Yes, in `oraclesregister` setting `datafee` then on each `oraclesdata` this datafee reducing from publisher balance


[17-Oct-18 07:25 AM] TonyL#3577
And on publisher balance coins getting by `oraclessubscribe`


[17-Oct-18 07:26 AM] jl777c#5810
oracles CC is designed to create a pay per data market


[17-Oct-18 08:12 AM] SHossain#0007
```
./komodo-cli -ac_name=CCNG gatewaysinfo 97c29d3c21a2cd57d7a438a3fccf042973f19c8f767518a6fbbb94418c222a41
ExtractDestination failed
f.B M.2 of N.3 size.3 -> bDrfF2peuhUzvKQHDBTH4PigrQiYuvBSav
check d4c64e03e66e61fd5dab600c6a4ce3368fa7688f65c9b457547abbede528c100 1.00000000
check ca058debea091da3f184fe16769619ca0609e3afd971e32f4e3f813a3990c33c 0.00010000
check 214ef8beee337c908accfa6637d1cfbae7c618b22b8bc645b3d8a1cf2f5be13e 1.00000000
check 97c29d3c21a2cd57d7a438a3fccf042973f19c8f767518a6fbbb94418c222a41 0.00010000
check 645d6910b596ef1c727ac896f7de6e50687484404432e441c50f6499d341c16d 0.00010000
check 43716dfdf7f4cce72d061bab34a40befb8464b712c5c3f85a3e6ec02cb4e90c6 0.99000000
check b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0 0.00010000
check 86174c476c11fd625b438aadd6b2a601100954f37905514f32a0358fb8e7dff9 0.90000000
{
  "result": "success",
  "name": "Gateways",
  "M": 2,
  "N": 3,
  "pubkeys": [
    "038fc992b38cad65b8e5a8be3078d7fb230c5f147c32e8562f64bedf3fd3a3d234",
    "026e921400dcbd8fbf5dc35afd10b8b1ad89bb44f30084dcb5e457a1e05deb06d5",
    "03847ea2ff1ab3537b8b46376a11b56c2e06054a2bf4279d38cabebe56e9d3099e"
  ],
  "coin": "KMD",
  "oracletxid": "8cf08d0084121ef662109043943f9b08107eaaaaf31b2a123362d284570ce948",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "bDrfF2peuhUzvKQHDBTH4PigrQiYuvBSav",
  "tokenid": "d905cd7814dbbc3b3afdd1aa2bc61abb3a42a9e539b1e7268d562e6f90ca43ab",
  "totalsupply": "1.00000000",
  "remaining": "1.00000000",
  "issued": "0.00000000"
}
```

{Reactions}
üî• 

[17-Oct-18 08:14 AM] Mihailo#5902
Now deposit and claim, this is little bit fragile part üòâ


[17-Oct-18 08:14 AM] TonyL#3577
We're on `oraclefeed` part now üòÉ


[17-Oct-18 08:14 AM] Mihailo#5902
üòÑ


[17-Oct-18 08:26 AM] SHossain#0007
```
./oraclefeed CCNG 8cf08d0084121ef662109043943f9b08107eaaaaf31b2a123362d284570ce948 038fc992b38cad65b8e5a8be3078d7fb230c5f147c32e8562f64bedf3fd3a3d234 Ihh 97c29d3c21a2cd57d7a438a3fccf042973f19c8f767518a6fbbb94418c222a41
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   672    0   672    0     0   8615      0 --:--:-- --:--:-- --:--:--  8615
BTC/USD 6509.0513
Powered by CoinDesk (https://www.coindesk.com/price/) 6509.05130000
addoracleinputs from (RQgLVR2H9URStApKmsb3bjrx86ZZ4W26c3)
addoracleinputs from (RLJwFR8SFmwdNqLFxvLxUmuXs7i92gBEnL)
addoracleinputs from (RUUWFUXJQnsiAEHiRsWKUs8SvN4ggToGHM)
ExtractDestination failed
f.B M.2 of N.3 size.3 -> bDrfF2peuhUzvKQHDBTH4PigrQiYuvBSav
check d4c64e03e66e61fd5dab600c6a4ce3368fa7688f65c9b457547abbede528c100 1.00000000
check ca058debea091da3f184fe16769619ca0609e3afd971e32f4e3f813a3990c33c 0.00010000
check 214ef8beee337c908accfa6637d1cfbae7c618b22b8bc645b3d8a1cf2f5be13e 1.00000000
check 97c29d3c21a2cd57d7a438a3fccf042973f19c8f767518a6fbbb94418c222a41 0.00010000
check 645d6910b596ef1c727ac896f7de6e50687484404432e441c50f6499d341c16d 0.00010000
check 43716dfdf7f4cce72d061bab34a40befb8464b712c5c3f85a3e6ec02cb4e90c6 0.99000000
check b90c9b0b51b667953b6cec8377b5132d59d30195cca392c53bcba474a8e96bd0 0.00010000
check 86174c476c11fd625b438aadd6b2a601100954f37905514f32a0358fb8e7dff9 0.90000000
```


[17-Oct-18 08:32 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/502141827252748308/Screenshot_from_2018-10-17_16-31-15.png

{Reactions}
üî• (2) 

[17-Oct-18 12:25 PM] TonyL#3577
I've brodcasted withdrawal transaction
```./komodo-cli -ac_name=CCNG gatewayswithdraw ca058debea091da3f184fe16769619ca0609e3afd971e32f4e3f813a3990c33c KMD 0271bc6b553f5f763ca7f64457710f8a0b3f5273b2941edc5091ca41cec39b7328 0.1```
And it appeared in pending:
```./komodo-cli -ac_name=CCNG gatewayspending ca058debea091da3f184fe16769619ca0609e3afd971e32f4e3f813a3990c33c KMD
{
  "coin": "KMD",
  "pending": [
    {
      "txid": "c8925a7e6e83ccec40649ac8828bd87ed826aa313a5e74a8a3eeba618742cb74",
      "txidaddr": "REfcFunGHtCTem4CwT152GLsMPYDWwHG8k",
      "withdrawaddr": "RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w",
      "amount": "0.10000000",
      "depositaddr": "bapVJF9vm2Q2ZGjWDjPHoLmhE1Q5fDVCWA",
      "signeraddr": "RUB9qtKwBj4Gt9HY6Vy117AtCdEutVCzCk"
    }
  ],
  "queueflag": 1
}```


[17-Oct-18 12:25 PM] SHossain#0007
```
./komodo-cli -ac_name=CCNG gatewayspending 97c29d3c21a2cd57d7a438a3fccf042973f19c8f767518a6fbbb94418c222a41 KMD
{
  "coin": "KMD",
  "pending": [
    {
      "txid": "c8925a7e6e83ccec40649ac8828bd87ed826aa313a5e74a8a3eeba618742cb74",
      "txidaddr": "REfcFunGHtCTem4CwT152GLsMPYDWwHG8k",
      "withdrawaddr": "RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w",
      "amount": "0.10000000"
    },
    {
      "txid": "c8925a7e6e83ccec40649ac8828bd87ed826aa313a5e74a8a3eeba618742cb74",
      "txidaddr": "REfcFunGHtCTem4CwT152GLsMPYDWwHG8k",
      "withdrawaddr": "RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w",
      "amount": "0.10000000",
      "txid": "f184d56a945edfa40a5a18bef932b9ef4e29a887b71cc00ed40e5da9b4071cb6",
      "txidaddr": "RM28H7NCb8KfGvuGTnEQNoB8xHRTv8LZ2i",
      "withdrawaddr": "RJJr94uFBqkdYXsZgMYZbKjTZmYTdyyz3u",
      "amount": "0.10000000"
    }
  ],
  "queueflag": 0
}
```


[17-Oct-18 12:25 PM] TonyL#3577
Then @SHossain broadcasted his transaction


[17-Oct-18 12:25 PM] TonyL#3577
```./komodo-cli -ac_name=CCNG gatewayspending ca058debea091da3f184fe16769619ca0609e3afd971e32f4e3f813a3990c33c KMD
{
  "coin": "KMD",
  "pending": [
    {
      "txid": "c8925a7e6e83ccec40649ac8828bd87ed826aa313a5e74a8a3eeba618742cb74",
      "txidaddr": "REfcFunGHtCTem4CwT152GLsMPYDWwHG8k",
      "withdrawaddr": "RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w",
      "amount": "0.10000000",
      "depositaddr": "bapVJF9vm2Q2ZGjWDjPHoLmhE1Q5fDVCWA",
      "signeraddr": "RUB9qtKwBj4Gt9HY6Vy117AtCdEutVCzCk"
    },
    {
      "txid": "c8925a7e6e83ccec40649ac8828bd87ed826aa313a5e74a8a3eeba618742cb74",
      "txidaddr": "REfcFunGHtCTem4CwT152GLsMPYDWwHG8k",
      "withdrawaddr": "RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w",
      "amount": "0.10000000",
      "depositaddr": "bapVJF9vm2Q2ZGjWDjPHoLmhE1Q5fDVCWA",
      "signeraddr": "RUB9qtKwBj4Gt9HY6Vy117AtCdEutVCzCk",
      "txid": "f184d56a945edfa40a5a18bef932b9ef4e29a887b71cc00ed40e5da9b4071cb6",
      "txidaddr": "RM28H7NCb8KfGvuGTnEQNoB8xHRTv8LZ2i",
      "withdrawaddr": "RJJr94uFBqkdYXsZgMYZbKjTZmYTdyyz3u",
      "amount": "0.10000000",
      "depositaddr": "bapVJF9vm2Q2ZGjWDjPHoLmhE1Q5fDVCWA",
      "signeraddr": "RUB9qtKwBj4Gt9HY6Vy117AtCdEutVCzCk"
    }
  ],
  "queueflag": 1
}
```


[17-Oct-18 12:25 PM] jl777c#5810
msig side withdraw processing is likely totally broken until @Mihailo fixes them

{Reactions}
üëå 

[17-Oct-18 12:25 PM] TonyL#3577
And my `pending` list messed


[17-Oct-18 12:26 PM] TonyL#3577
And `oraclefeed` throwed errors from start:
```already did withdraw KMD RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w 0.10000000 processed
spend CCNG c8925a7e6e83ccec40649ac8828bd87ed826aa313a5e74a8a3eeba618742cb74/v2 as marker
signing error for SignTx vini.0 0.00010000
signing error for vini.0 of 1
error code: -25
error message:
```


[17-Oct-18 12:26 PM] TonyL#3577
`already did withdraw KMD RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w 0.10000000 processed`
But it not did any withdrawal on RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w


[17-Oct-18 12:28 PM] TonyL#3577
@SHossain Seems our testing is done on this point and gatewaysCC temporary borrowed these 0.1 KMD üòÉ


[17-Oct-18 12:29 PM] SHossain#0007
i lost 0.1 KMD üò≠


[17-Oct-18 12:29 PM] SHossain#0007
:trollface:


[17-Oct-18 12:29 PM] TonyL#3577
Not lost yet üòÉ Maybe we'll able to withdraw after fixes


[17-Oct-18 12:29 PM] SHossain#0007
It was a very long testing üòÉ


[17-Oct-18 12:29 PM] SHossain#0007
thanks for all the help

{Reactions}
üëç 

[17-Oct-18 12:30 PM] TonyL#3577
Just because of bad automation from my software side, I'm sorry for that


[17-Oct-18 12:31 PM] TonyL#3577
But after this pair testing noticed even more bottle-necks than before and next version will be better üòÉ


[17-Oct-18 12:32 PM] SHossain#0007
manual test is good too üòÑ


[17-Oct-18 12:33 PM] TonyL#3577
If using testing software - testing software maybe not well tested, and testing software for testing software testing may be not well tested and so on üòÇ


[17-Oct-18 12:34 PM] SHossain#0007
we can start again tomorrow


[17-Oct-18 12:35 PM] TonyL#3577
Let's wait for @Mihailo feedback on our results

{Reactions}
üëçüèΩ 

[17-Oct-18 02:24 PM] Mihailo#5902
@TonyL @SHossain I see that gatewaysspending suffer from same problem like oraclesinfo üòÉ 
BTW, when you both broadcasted withdraw on gateway was there enough to withdraw or you were testing what happens when you try to double withdraw? As validation on gateways is not done so it allows everything...


[17-Oct-18 02:25 PM] TonyL#3577
@Mihailo We had different gateways


[17-Oct-18 02:25 PM] TonyL#3577
And there was enough to withdraw yep


[17-Oct-18 02:26 PM] TonyL#3577
Problem seems a little bit different to oracle since I saw pending withdraw of @SHossain in pending withdraws of my GW and vice versa


[17-Oct-18 02:26 PM] Mihailo#5902
OK, got it.


[17-Oct-18 02:27 PM] TonyL#3577
But apparently tested what happens on double withdraw even if gateways are different üòÉ


[17-Oct-18 02:40 PM] Mihailo#5902
It's probably the problem of markers or baton as gatewaysspending is not making difference on two different gateways.


[17-Oct-18 02:41 PM] Mihailo#5902
Going in my to-do list. I'm getting woried as to-do list getting larger day by day, and completing one task from to-do takes days üòõ


[17-Oct-18 02:43 PM] TonyL#3577
Hmm maybe we have to focus on some one CC first to make it work as expected and cover basic calls and cases by auto-tests


[17-Oct-18 02:43 PM] TonyL#3577
And then move to other one


[17-Oct-18 02:43 PM] TonyL#3577
To not get lost. Oracles -> Gateways -> Channels  ü§î

{Reactions}
rum 

[17-Oct-18 10:00 PM] jl777c#5810
channels CC is independent from others, but gateways definitely needs a reliable oracles


[18-Oct-18 01:05 AM] TonyL#3577
@gcharang Hi! http://pad.supernet.org/cc_gateways_guide could you please create doc from this draft? I'm a little bit lost in it so might be a good idea to have some doc draft on this point which we can edit later. There definitely should be some unclear / hard to follow moments since few CCs are involved


[18-Oct-18 02:24 AM] TonyL#3577
Checked current auto-tests state before proceed to oracle coverage:
https://github.com/tonymorony/komodo/commit/951627d7cb22a3e4ad4975033aad9e8ca4421626 Current CC tests failing - problem was in this space üòÉ 
@jl777c Will it not miss if I PR to FSM?

{Embed}
https://github.com/tonymorony/komodo/commit/951627d7cb22a3e4ad4975033aad9e8ca4421626
this space made tests failing ¬∑ tonymorony/komodo@951627d
https://images-ext-1.discordapp.net/external/_FZ-6atALXBjBvMLVC1JBeWG05jXc2w_TXrppH7V6kE/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/24797699


[18-Oct-18 02:37 AM] jl777c#5810
sure PR away


[18-Oct-18 10:44 PM] TonyL#3577
Hmm, oracles RPC still allows to do scary things:
``` ./komodo-cli -ac_name=CCNG oraclescreate sfas sdfafa sdfs```
```./komodo-cli -ac_name=CCNG oraclesinfo 816696db2015f79c69c9f71b4323fca48215ebb03d003688771b7be90a117015
{
  "result": "success",
  "txid": "816696db2015f79c69c9f71b4323fca48215ebb03d003688771b7be90a117015",
  "name": "sfas",
  "description": "sdfafa",
  "format": "sdfs",
  "marker": "RBPeVHm72cqQtj1SBkbLKm2BZXGSjBekBV",
  "registered": [
  ]
}
```


[18-Oct-18 10:49 PM] TonyL#3577
Time to practice some C üòÉ


[19-Oct-18 12:52 AM] gcharang#6833
@TonyL I have been working on the cc-gateways-guide from yesterday. Its taking more time than expected because it is so complicated lol. I am trying to understand most of it and then making it. I am about halfway through. Will ping you once it's done.


[19-Oct-18 12:53 AM] TonyL#3577
@gcharang Yep, I lost a little bit in this guide too because it's to complicated üòÉ Feel free to ask me if there any unclear moments or you're not able to follow

{Reactions}
üëç 

[19-Oct-18 01:04 AM] TonyL#3577
@jl777c Only solution I've found so far for oracle type input validation is define in RPC list of allowed oracles like a:
```allowed_formats[] = {'s','S','d','D','c','C','t','T','i','I','l','L','h','Ihh'};```
And then match input with each element of this array, but it add additional complicity since in case if a new data type added to `oracles.cpp` this array have to be changed in `rpcwallet.cpp` as well or RPC will think it's not valid type.
I wonder maybe it's possible to store types in some global variable array in `oracles.cpp` and use this array in `rpcwallet.cpp` to implement data type input validation


[19-Oct-18 01:04 AM] TonyL#3577
So if we add new type in `oracles.cpp` it's automatically valid for rpc


[19-Oct-18 01:05 AM] jl777c#5810
what new types do you expect will be needed?


[19-Oct-18 01:05 AM] jl777c#5810
it handles binary data


[19-Oct-18 01:05 AM] TonyL#3577
I just expect it because noticed 4096 symbols validation for data type input


[19-Oct-18 01:05 AM] TonyL#3577
üòÉ


[19-Oct-18 01:06 AM] jl777c#5810
let me know if there are oracles that dont fit into the current types

{Reactions}
üëå 

[19-Oct-18 01:07 AM] TonyL#3577
0s and 1s should be enough üòÉ Will hardcode it so üëå


[19-Oct-18 02:33 AM] Mihailo#5902
@gcharang @TonyL I'm planning to update Tonys document about gateways as soon as I finish multi-signature gateways. There are some steps that are necessary to do for msig to be able to work properly.

{Reactions}
üëç 

[19-Oct-18 02:44 AM] TonyL#3577
@Mihailo That would be great! If you're busy - you can just left short notes regards steps which I've missed and I'll try to fill these gaps


[19-Oct-18 02:44 AM] TonyL#3577
For gateways I planned separate guide since multi-nodes needed and it's even more complex at all (noted it in current guide)


[19-Oct-18 02:47 AM] TonyL#3577
Hehe C is really rocket science after Python, especially in spot of typization but almost won in this fight:
```./komodo-cli -ac_name=CCNG oraclescreate test test troll
{
  "result": "error",
  "error": "oracles format not valid"
}
```


[19-Oct-18 03:21 AM] Mihailo#5902
Something is really weird happening with oracles. Sometimes it has funds and it works, sometimes not. When one stop working, other one on different node starts working....


[19-Oct-18 03:21 AM] Mihailo#5902
This is with oracles that have multiple publishers...


[19-Oct-18 03:23 AM] TonyL#3577
I'm on creation stage now, next will proceed to registration/subscription/publishing - maybe will find-out something which will help

{Reactions}
üëç 

[19-Oct-18 03:26 AM] Mihailo#5902
Try with 3 publishers on one oracle, when I was trying gateways with 2of3 trusted keys the third publisher that is registred when I subscribe it gets 1 satoshi less than I sent and I'm unable to publish on that one...


[19-Oct-18 03:26 AM] Mihailo#5902
```
"registered": [
    {
      "publisher": "034f5f4e1ee6653367f138ff058e518f8118e64aabb201e18d03bf149155eae052",
      "baton": "RKgq3WHviWe98GzEtMKii9W1dEPZZqpER5",
      "batontxid": "099b54f6f7699ac9ed4c89e3843f48f5ee0098d9568544a68e456df175c4df67",
      "lifetime": "0.00060000",
      "funds": "5.94100000",
      "datafee": "0.00020000"
    },
    {
      "publisher": "025d2c1b95cd6e49ca2159ed58ef748a52c90efb2509d174c091328713388b6e3a",
      "baton": "RKySeMv9Z1hbvbAb2SRHJb7DaAN7XATbjT",
      "batontxid": "50e1e23b11ef03b7a33049ff118bc825d60ecd67c7fd911e97413b1665ffdb8d",
      "lifetime": "8.00020000",
      "funds": "7.97580000",
      "datafee": "0.00010000"
    },
    {
      "publisher": "031022828d4d9d88a231fbf0fe9157c4338b4ef34e0a5d16b53a3000e3be11154d",
      "baton": "RSWputfD3aDapVp7E8iXEKZ1tQ3uG1mzrW",
      "batontxid": "758e712c57e56e08d4e801498cfa9ade3d0553b5c425f97e664916890f61874d",
      "lifetime": "0.00059998",
      "funds": "0.00029999",
      "datafee": "0.00030000"
    }
  ]
```


[19-Oct-18 03:27 AM] Mihailo#5902
Look at third one. Fee is 30ksat but funds are 29999. So this happened few times, but I was in deep debug of gateways and I did not want to swithc focus.


[19-Oct-18 03:27 AM] TonyL#3577
Maybe it was txfee


[19-Oct-18 03:27 AM] TonyL#3577
Oh just 1 sat


[19-Oct-18 03:28 AM] Mihailo#5902
txfee of 1 sat üòâ Nevertheless, txfee is separate vout


[19-Oct-18 03:28 AM] Mihailo#5902
This happened when I registred oracle with 30k sat and sent one subscribe with 30k sat


[19-Oct-18 03:28 AM] Mihailo#5902
Don't know if it will happen if you send on first subscribe a lot more than fee


[19-Oct-18 03:29 AM] Mihailo#5902
My best suggestion to test this is to create oracle with 3 publishers and run 3 oraclefeeds for some time to see if it is going to happen. With starting and stopping oraclefeeds and nodes.


[19-Oct-18 03:33 AM] TonyL#3577
Ok, I'll try to reproduce it  üëç


[19-Oct-18 04:31 AM] TonyL#3577
Added some oracle creation stage RPC checks and tests:
https://github.com/jl777/komodo/pull/914

{Embed}
https://github.com/jl777/komodo/pull/914
Oracles creation RPC checks and tests by tonymorony ¬∑ Pull Reques...
Added validation for oraclesinfo in case of non existing oracleid input
Added oracle data type validation on call (list is hardcoded in rpcwallet)
Made oracle creation stage rpc tests
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[19-Oct-18 07:43 AM] gcharang#6833
How to get address from pubkey for komodo?


[19-Oct-18 07:47 AM] PTYX#6840

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/502855408537305092/0--6A6E5CY2IT4fmc.png

{Reactions}
üëç 

[19-Oct-18 07:49 AM] gcharang#6833
haha. I was asking if there is a CLI command in either `komodod` or marketmaker


[19-Oct-18 08:17 AM] TonyL#3577
@gcharang `validateaddress` if this address belongs to your wallet


[19-Oct-18 08:20 AM] SHossain#0007
@TonyL validateaddress will get your the pubkey of your address, i guess @gcharang is looking for other way


[19-Oct-18 08:20 AM] gcharang#6833
Yup. as shossain says, I know pubkey  --> want to get address


[19-Oct-18 08:23 AM] TonyL#3577
Almost endless amount of addresses can be generated from one pubkey. Chances that you'll generated some "desirable" address --> 0 because of collision
Here is a step by step guide: https://en.bitcoin.it/wiki/Technical_background_of_version_1_Bitcoin_addresses#How_to_create_Bitcoin_Address

{Embed}
https://en.bitcoin.it/wiki/Technical_background_of_version_1_Bitcoin_addresses
Technical background of version 1 Bitcoin addresses


[19-Oct-18 08:34 AM] dukeleto#7326
@gcharang which language do you want to convert from pubkey -> address ?


[19-Oct-18 08:35 AM] dukeleto#7326
@gcharang i think marketmaker can do it somehow, i forget. it prints out a pubkey somewhere that answers your question


[19-Oct-18 08:35 AM] dukeleto#7326
there is no RPC that gives you the data


[19-Oct-18 08:36 AM] dukeleto#7326
i wrote some C++ code recently that does this, it should probably be available via an RPC somehow


[19-Oct-18 08:36 AM] gcharang#6833
I just have a kmd pubkey I got from doing `validateaddress` on a kmd address. I forgot the address. So I wanted to find it from the pubkey


[19-Oct-18 08:36 AM] dukeleto#7326
https://github.com/MyHush/hush/blob/dev/src/komodo_validation011.h#L752

{Embed}
https://github.com/MyHush/hush/blob/dev/src/komodo_validation011.h
MyHush/hush
Hush is a fork of Zcash focused on secure communications - MyHush/hush
https://images-ext-1.discordapp.net/external/4gOX1fKM3QTa9jA_3FPIPM25wLL4gEO1nxlUEoeFbQ0/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/26923909


[19-Oct-18 08:37 AM] dukeleto#7326
easiest thing is probably to patch komodo source code and print it out to stdout or whatever


[19-Oct-18 08:37 AM] dukeleto#7326
or use mm


[19-Oct-18 08:37 AM] gcharang#6833
can you tell me the version number for KMD in the conversion scheme?


[19-Oct-18 08:38 AM] dukeleto#7326
@gcharang are you talking about prefixes/etc to create the address?


[19-Oct-18 08:38 AM] gcharang#6833
Yup like the thing that gives beginning 1 to bitcoin and beginning R to komodo


[19-Oct-18 08:39 AM] dukeleto#7326
```src/chainparams.cpp
169:        base58Prefixes[PUBKEY_ADDRESS] = std::vector<unsigned char>(1,60);
170:        base58Prefixes[SCRIPT_ADDRESS] = std::vector<unsigned char>(1,85);
171:        base58Prefixes[SECRET_KEY] =     std::vector<unsigned char>(1,188);```


[19-Oct-18 08:39 AM] gcharang#6833
Thank you. I will sort it out. Either in C or python. I have found some scripts for BTC. I might be able to edit them


[19-Oct-18 08:39 AM] dukeleto#7326
you might want to look at https://github.com/DeckerSU/komodo_scripts/blob/master/genkomodo.php

{Embed}
https://github.com/DeckerSU/komodo_scripts/blob/master/genkomodo.php
DeckerSU/komodo_scripts
set of komodo helper scripts. Contribute to DeckerSU/komodo_scripts development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/8Zm3nuko0hJQYegJyi9jjc0I2bbSAnM13Ef4WCiLC1M/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/22120003


[19-Oct-18 08:40 AM] dukeleto#7326
i trust Decker's code, he is a notary node operator, and many NN's use that code for various chains


[19-Oct-18 08:40 AM] gcharang#6833
Got it.


[19-Oct-18 08:41 AM] dukeleto#7326
it's just like BTC


[19-Oct-18 08:41 AM] dukeleto#7326
instead of 0x00, it's 0x60, which gives an `R` instead of a `1` prefix


[19-Oct-18 08:41 AM] dukeleto#7326
mainnet/testnet/regtest can have different values, fyi

{Reactions}
üëç 

[19-Oct-18 11:09 AM] jl777c#5810
there are websites that generate BTC addr from pubkey and there are really only 1 address per compressed pubkey and 1 per non-compressed


[19-Oct-18 11:09 AM] jl777c#5810
not sure about this unlimited addresses from a single pubkey


[19-Oct-18 11:09 AM] jl777c#5810
it is basically a totally wrong statement


[19-Oct-18 11:10 AM] jl777c#5810
once you have a BTC address you can use the convaddress api in mm, or via dexstats.info


[19-Oct-18 11:10 AM] TonyL#3577
Yep, I've messed things ‚ò∫


[19-Oct-18 11:35 AM] jl777c#5810
as soon as you admit it, you are forgiven

{Reactions}
üôå (2) 

[19-Oct-18 11:36 AM] gcharang#6833
thanks Jl that helped me out.


[19-Oct-18 11:39 AM] gcharang#6833
@TonyL I have made the doc out of the gateways guide: https://docs.komodoplatform.com/cc/contracts/gateways/scenarios/tutorial.html
I haven't tested it completely but understood the flow of all of it. I will go through it and test it on CLI again tommorrow. It needs some minor edits to add more detail. 
@Mihailo once the parts related to M=/=N=/=1 are added to it, I will add those to the doc too.


[19-Oct-18 11:40 AM] jl777c#5810
base58(60 + rmd160(sha256(pubkey)))


[19-Oct-18 11:40 AM] jl777c#5810
pubkey to address conversion logic


[19-Oct-18 11:42 AM] TonyL#3577
@gcharang Wow, that's great work! üî• üôå  @Mihailo pointed me on step which I've missed in my guide and without this step seems not possible to withdraw funds from gateway. I've re-check the whole flow tomorrow and note this step and maybe some other (will prepare notes/comments based on your doc already).

{Reactions}
üëç 

[19-Oct-18 12:14 PM] SHossain#0007
i just remembered that Decker uses pubkey only to display NN or pool name in insight explorer. that eventually shows the address


[19-Oct-18 12:46 PM] Deleted User#0000
there is a function in iguana and komodo that does it .. ive used it somewhere before


[19-Oct-18 12:53 PM] Alright#0419
@gcharang simplest way I've found is set `-pubkey=` on a daemon then mine a block


[19-Oct-18 12:53 PM] Alright#0419
see where the block reward goes

{Reactions}
üëÜüèΩ (2) 

[20-Oct-18 02:41 AM] TonyL#3577
Hi @Mihailo ! I'm not able to make withdraw now from gateway even in simplest case with M N 1 1 (this time I've imported gateway deposit address privkey on KMD chain) - I guess maybe previous withdraws on this AC broke it since now in `gatewayspending` messed withdrawals for all gateways. 
And behaviour of `gatewayswithdraw` quite strange:
I had a token `"balance": 10000000` and converted it totally with 241 eval and my pubkey.
Then on broadcasting of ```komodo-cli -ac_name=CCNG gatewayswithdraw 3903e595b752d8a8b6afc1f940960d544d19a44358773bba9b1e54ae70f9d974 KMD 0271bc6b553f5f763ca7f64457710f8a0b3f5273b2941edc5091ca41cec39b7328 10000000```
I'm getting ```komodo-cli -ac_name=CCNG sendrawtransaction 010000000239109e7029a437fe1169f6a3034390db5271bb0c1484121bc8a7f0fbb201862c0200000049483045022100997399859c9e8cb4c9b2f3279e9002e17aa164a41d103b37a1a22e36c887730902200174e47a535f7e45b6add7487718359e97402b39f40c62a765151f98e3c946b601ffffffff9ef132c760c904afa30ffc1e7eb9f8ff1bc1d06ab2a087e9b3c0d9ac6592e308010000007b4c79a276a072a26ba067a5658021027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a481409f119ab0fe1f8bb6559257515f229715f39887f32ae1d6c6a0a773f687d367f40e25eafa995fce722832af9d14571443cc5385866d1073de5813e48c11fb5099a100af038001f1a10001ffffffff040080c6a47e8d0300302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc102700000000000023210271bc6b553f5f763ca7f64457710f8a0b3f5273b2941edc5091ca41cec39b7328ac1027000000000000232103ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40ac0000000000000000246a22e37455fe2b31fc073942692828d0a66b2e47c1a8525491146329d13c8dd453fe7ed900000000
spentheight.23841 valuein 100000.0995 vs 10000000.0002 error
error code: -26
error message:
16: bad-txns-in-belowout
```


[20-Oct-18 02:42 AM] TonyL#3577
But gatewayswithdraw with sum as asked in valuein broadcasted: ```komodo-cli -ac_name=CCNG gatewayswithdraw 3903e595b752d8a8b6afc1f940960d544d19a44358773bba9b1e54ae70f9d974 KMD 0271bc6b553f5f763ca7f64457710f8a0b3f5273b2941edc5091ca41cec39b7328 100000
check RSSs7S2ZBvNfhZEgMV5Ww8HCq9vAxLV656 for gateway inputs
check RSSs7S2ZBvNfhZEgMV5Ww8HCq9vAxLV656 vout.1 0.10000000 0.10000000
vout.1 227:241 (t) check for refassetid.55fe2b31fc073942692828d0a66b2e47c1a8525491146329d13c8dd453fe7ed9 vs 55fe2b31fc073942692828d0a66b2e47c1a8525491146329d13c8dd453fe7ed9 0.10000000
```


[20-Oct-18 02:44 AM] TonyL#3577
And after this broadcasting `oraclefeed` throwed an error regards Insufficient funds:
```KMD ht.1060835 <- e32f1000012287dbf3e16b8a18cb1268e72874d62e4500cf881d792d9a1f60599551bb0e32da7b5891491cf26d13e56b227a880a6ebd9b760db5504749fb0f5a920f08ca
sendtoaddress R9uxNZxV46KD9aLskSdudd4G5ieD2vKbm3 0.00010000 txid.(52d80af3501b552b7085837a1b0f4c7f2cf7f45ba53403b2aaca324e1016b493)
error code: -6
error message:
Insufficient funds
loadfile null size.(/tmp/oraclefeed.sendtoaddress)
ERROR withdraw KMD 0000000000000000000000000000000000000000000000000000000000000000 RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w 100000.00000000 processed
already did withdraw KMD RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w 100000.00000000 processed
spend CCNG 8f668b63706057e83b146316c4b1de2bf8e48247462f157f6e6f41dc4e2eb865/v2 as marker
signing error for SignTx vini.0 0.00010000
signing error for vini.0 of 1
error code: -25
error message:
KMD ht.1060835 <- e32f1000012287dbf3e16b8a18cb1268e72874d62e4500cf881d792d9a1f60599551bb0e32da7b5891491cf26d13e56b227a880a6ebd9b760db5504749fb0f5a920f08ca
sendtoaddress R9uxNZxV46KD9aLskSdudd4G5ieD2vKbm3 0.00010000 txid.(52d80af3501b552b7085837a1b0f4c7f2cf7f45ba53403b2aaca324e1016b493)
error code: -6
error message:
Insufficient funds
loadfile null size.(/tmp/oraclefeed.sendtoaddress)
ERROR withdraw KMD 0000000000000000000000000000000000000000000000000000000000000000 RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w 100000.00000000 processed
already did withdraw KMD RNatZFZPxQ1j1y3YqMrg23N9viumpABB4w 100000.00000000 processed
spend CCNG 8f668b63706057e83b146316c4b1de2bf8e48247462f157f6e6f41dc4e2eb865/v2 as marker
signing error for SignTx vini.0 0.00010000
signing error for vini.0 of 1
error code: -25
error message:
```


[20-Oct-18 02:47 AM] TonyL#3577
This one looks very suspicious, since  I had tokensupply 1 (10000000) from start and from where these decimal parts ü§î 
```spentheight.23841 valuein 100000.0995 vs 10000000.0002 error```


[20-Oct-18 02:54 AM] Mihailo#5902
@TonyL Try with fresh setup, who knows what happened with all the withdrawals. But we should take a look at that.


[20-Oct-18 02:55 AM] TonyL#3577
I wonder problem was because I wasn't gentle and input 100000 instead of 1 as withdrawal amount


[20-Oct-18 02:56 AM] TonyL#3577
Should I put token supply in satoshies or non-satoshies or KMD amount in `gatewayswithdraw` ‚ò∫ ?


[20-Oct-18 03:01 AM] TonyL#3577
Hoho


[20-Oct-18 03:01 AM] TonyL#3577
```./komodo-cli -ac_name=CCNG gatewaysinfo 3903e595b752d8a8b6afc1f940960d544d19a44358773bba9b1e54ae70f9d974
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "0324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272",
  "coin": "KMD",
  "oracletxid": "b4f031d6b82d43fbad7f4917ed50636dd1f4b1af402c341b22c5d47593a14cc9",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RFt7FWFgALrqgjPEUPMS9vqhwVwMfhu3VV",
  "tokenid": "55fe2b31fc073942692828d0a66b2e47c1a8525491146329d13c8dd453fe7ed9",
  "totalsupply": "1.00000000",
  "remaining": "100000.90000000",
  "issued": "-99999.90000000"
}
```


[20-Oct-18 03:02 AM] TonyL#3577
I broke my gateway with this withdrawal I see now. `gatewayswithdrawal` supposed measuring in gatewaysCC paradigm since tokens converted to 241


[20-Oct-18 03:03 AM] Mihailo#5902
In withdraw goes the amount of KMD you are withdrawing...


[20-Oct-18 03:03 AM] Mihailo#5902
So if you had 100000 tokens thats 0.001 KMD I think


[20-Oct-18 03:04 AM] TonyL#3577
I had `10000000` for 0.1 KMD deposit


[20-Oct-18 03:04 AM] TonyL#3577
But on `gatewayswithdraw` daemon printed strange check: `spentheight.23841 valuein 100000.0995 vs 10000000.0002 error` 
So I was able to broadcast ```komodo-cli -ac_name=CCNG gatewayswithdraw 3903e595b752d8a8b6afc1f940960d544d19a44358773bba9b1e54ae70f9d974 KMD 0271bc6b553f5f763ca7f64457710f8a0b3f5273b2941edc5091ca41cec39b7328 100000

check RSSs7S2ZBvNfhZEgMV5Ww8HCq9vAxLV656 for gateway inputs
check RSSs7S2ZBvNfhZEgMV5Ww8HCq9vAxLV656 vout.1 0.10000000 0.10000000
vout.1 227:241 (t) check for refassetid.55fe2b31fc073942692828d0a66b2e47c1a8525491146329d13c8dd453fe7ed9 vs 55fe2b31fc073942692828d0a66b2e47c1a8525491146329d13c8dd453fe7ed9 0.10000000
{
  "result": "success",
  "hex": "010000000239109e7029a437fe1169f6a3034390db5271bb0c1484121bc8a7f0fbb201862c020000004948304502210082d0788b1092cbad303e279e1af34ba1facd87aff91c336fbadd2197d862c716022026f742373f34ec57cd89ee75323d3a1134aeb30f965d7315470a7ad5eaea48ed01ffffffff9ef132c760c904afa30ffc1e7eb9f8ff1bc1d06ab2a087e9b3c0d9ac6592e308010000007b4c79a276a072a26ba067a5658021027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a481401838dacbac76b24f5952a85bafb7dbd1a3da0611084b6f36c6c8cd140766f15e4d111d98f5c938c59d6ec5839a52981ca06148887efc739cc9190a4b077a55d7a100af038001f1a10001ffffffff0500a0724e18090000302ea22c802091abda62a548f9c7f5beb19d16f01714ae3d4e526f3266fc8d347d6123f3d77b8103120c008203000401cc102700000000000023210271bc6b553f5f763ca7f64457710f8a0b3f5273b2941edc5091ca41cec39b7328ac1027000000000000232103ea9c062b9652d8eff34879b504eda0717895d27597aaeb60347d65eed96ccb40ac005e9700000000002321027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4ac0000000000000000246a22e37455fe2b31fc073942692828d0a66b2e47c1a8525491146329d13c8dd453fe7ed900000000"
}
```
And broke my gateway


[20-Oct-18 03:17 AM] jorian#4555
quick question guys, can i reach for example dicestatus through RPC already?


[20-Oct-18 03:17 AM] jorian#4555
or do i need komodo-cli?


[20-Oct-18 03:19 AM] TonyL#3577
@jorian As I know at the moment only calls via cli are documented (https://docs.komodoplatform.com/cc/contracts/dice/rpc/dicestatus.html here or here https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=211514340)

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Available RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pubk...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[20-Oct-18 03:24 AM] jl777c#5810
all the CC params are sent in as strings, so using curl with params array ["arg0", "arg1", ... "argN"] should work if you can get the escaping for " done right


[20-Oct-18 03:24 AM] jl777c#5810
start with a standard rpc and get it working via curl


[20-Oct-18 03:24 AM] jl777c#5810
then change the method to a CC method (uses same rpc)


[20-Oct-18 03:24 AM] jl777c#5810
the json syntax via curl is a bit of a pain


[20-Oct-18 05:41 AM] gcharang#6833
@Alright for getting the KMD address, I entered pubkey here: https://bitcoinvalued.com/tools.php to get bitcoin address. Then used the tool here: https://dexstats.info/addressconverter.php to convert that BTC address to KMD address

{Embed}
https://bitcoinvalued.com/tools.php
Bitcoin Hash160 generator, BitCoin address generator, BitCoin publ...
Bitcoin Hash160 generator, BitCoin address generator, Bitcoin public key to Hash160, Bitcoin address validity checker
https://images-ext-1.discordapp.net/external/UeCo0A2euAbW6g2Z_GrVc3JdyV3mwMwSr6T4nOrqyOM/http/bitcoinvalued.com/bitcoinvalued.com.fb.png

{Embed}
https://dexstats.info/addressconverter.php
Dexstats Dashboard - BarterDEX
Key Data for BarterDEX


[21-Oct-18 09:13 AM] TonyL#3577
@Mihailo Started new chain, was very gentle this time with all calls and withdrawn succesfully in case of M N 1 1: https://kmdexplorer.io/tx/47c7fecbd9cf6339861b563ba3e03a40cb230e9a022eb795dbc58dc616ead697 
Do you have luck with multisig gw debugging?

{Reactions}
üëç 

[21-Oct-18 09:19 AM] jl777c#5810
by the way, gateways CC has no validation now, so if you make a horrible mistake, well, things could get horribly messed up


[21-Oct-18 09:21 AM] TonyL#3577
@jl777c Oh yes, had a good lesson when succesfully broadcasted `gatewayswithdraw` transaction for 100000 KMD when gateway had only 0.1 KMD and my gateway became in big dept  üòÉ


[21-Oct-18 09:22 AM] jl777c#5810
ooops


[21-Oct-18 09:23 AM] TonyL#3577
```./komodo-cli -ac_name=CCNG gatewaysinfo 3903e595b752d8a8b6afc1f940960d544d19a44358773bba9b1e54ae70f9d974
{
  "result": "success",
  "name": "Gateways",
  "pubkey": "0324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272",
  "coin": "KMD",
  "oracletxid": "b4f031d6b82d43fbad7f4917ed50636dd1f4b1af402c341b22c5d47593a14cc9",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RFt7FWFgALrqgjPEUPMS9vqhwVwMfhu3VV",
  "tokenid": "55fe2b31fc073942692828d0a66b2e47c1a8525491146329d13c8dd453fe7ed9",
  "totalsupply": "1.00000000",
  "remaining": "100000.90000000",
  "issued": "-99999.90000000"
}```
Accepting donations to rescue my 0.1 KMD üòÉ


[21-Oct-18 09:48 AM] TonyL#3577
@gcharang Important step which I've missed in gateways doc (I guess it's better to add in orange block to 6.3 GatewaysWithdraw):
Before executing gateways withdrawal import private key for gateways deposit address  from asset chain on which you operating gateway to KMD chain on the same node as on which `oraclefeed` is running (to make gateway node able to send KMD withdrawal transactions from gateway wallet balance) by:
`./komodo-cli -ac_name=ORCL gatewaysinfo <bindtxid>` <- get <gateway deposit address> from "deposit" field
`./komodo-cli -ac_name=ORCL dumprivkey <gateway deposit address ^^>` -> getting <private key>
`./komodo-cli importprivkey <private key ^^>`
Without this step gateway will not able to send gateway deposit wallet funds on KMD chain.

{Reactions}
üëç 

[21-Oct-18 12:49 PM] TonyL#3577
Oracles RPC seems very loyal for troll input now as well:
```./komodo-cli -ac_name=CCNG oraclesregister imatrollputtext+randomhexhere 01000000011d2ede37ad589e5774e6dc220a925ae043325bf45d6f65c8a1afe47ac62d2d200000000049483045022100cc40b3f8aa698772dfe1486a8349d465115efbdfa38c9d15ec3b99ceb25fe0ef02206ca2599a3f848c6e8f23bdc04926bdad5f00424a61298243b3517aa5eef007a001ffffffff0410270000000000002321020000000000000000000000000000000000000000000000000000000000000000ac1027000000000000302ea22c8020a83bdefbd26a188a1bb0d74b96636c39157333ec44c8dbae934e4862e2cd39e18103120c008203000401ccd02a724e1809000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac00000000000000004f6a4c4cec520000000000000000000000000000000000000000000000000000000000000000210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012720bca9a3b0000000000000000
{
  "result": "success",
  "hex": "010000000150da2a3cfbf9754f09e7ccf69af83fa86ab27ffc1eb1aca406878529fd5b9a1f0200000048473044022049b55bfb4c5609f37b97b478352d4fb6e58c47605cd0367bd2be0ee31dfa186402204c40170f87ff23f5105e477628832d35277e00110befad82028a9e0fa75bfd3a01ffffffff0410270000000000002321020000000000000000000000000000000000000000000000000000000000000000ac1027000000000000302ea22c8020a83bdefbd26a188a1bb0d74b96636c39157333ec44c8dbae934e4862e2cd39e18103120c008203000401cca0b5714e1809000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac00000000000000004f6a4c4cec520000000000000000000000000000000000000000000000000000000000000000210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012720bca9a3b0000000000000000"
}
```


[21-Oct-18 12:49 PM] TonyL#3577
```./komodo-cli -ac_name=CCNG sendrawtransaction 010000000150da2a3cfbf9754f09e7ccf69af83fa86ab27ffc1eb1aca406878529fd5b9a1f0200000048473044022049b55bfb4c5609f37b97b478352d4fb6e58c47605cd0367bd2be0ee31dfa186402204c40170f87ff23f5105e477628832d35277e00110befad82028a9e0fa75bfd3a01ffffffff0410270000000000002321020000000000000000000000000000000000000000000000000000000000000000ac1027000000000000302ea22c8020a83bdefbd26a188a1bb0d74b96636c39157333ec44c8dbae934e4862e2cd39e18103120c008203000401cca0b5714e1809000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac00000000000000004f6a4c4cec520000000000000000000000000000000000000000000000000000000000000000210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012720bca9a3b0000000000000000
cf2301b1c28ce00f6e956140b8b4d5441f56119175a90087297b987e65b18277```


[21-Oct-18 12:49 PM] TonyL#3577
Instead of oracleid put random text and instead of datafee input random hex. And not RPC only I guess since I was able to broadcast it


[21-Oct-18 12:53 PM] TonyL#3577
`oraclessubscribe` seems ok


[21-Oct-18 01:00 PM] TonyL#3577
Hmm I guess it may be considered as a bug (sent some hex from previous transactions instead of datafee):
1. Created oracle
```./komodo-cli -ac_name=CCNG oraclesinfo a382d2d1ec229ae6017d15641c18e9d75369b40d409a09b161670cfa5bbd7bd7
{
  "result": "success",
  "txid": "a382d2d1ec229ae6017d15641c18e9d75369b40d409a09b161670cfa5bbd7bd7",
  "name": "test",
  "description": "test",
  "format": "s",
  "marker": "RUWckSLuUCuZAiDgnJEDYb2KFBgW5q489E",
  "registered": [
  ]
}
```


[21-Oct-18 01:00 PM] TonyL#3577
2. Made oraclesregister with some random taken hex from previous transactions as datafee input
```./komodo-cli -ac_name=CCNG oraclesregister a382d2d1ec229ae6017d15641c18e9d75369b40d409a09b161670cfa5bbd7bd7 010000000150da2a3cfbf9754f09e7ccf69af83fa86ab27ffc1eb1aca406878529fd5b9a1f0200000048473044022049b55bfb4c5609f37b97b478352d4fb6e58c47605cd0367bd2be0ee31dfa186402204c40170f87ff23f5105e477628832d35277e00110befad82028a9e0fa75bfd3a01ffffffff0410270000000000002321020000000000000000000000000000000000000000000000000000000000000000ac1027000000000000302ea22c8020a83bdefbd26a188a1bb0d74b96636c39157333ec44c8dbae934e4862e2cd39e18103120c008203000401cca0b5714e1809000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac00000000000000004f6a4c4cec520000000000000000000000000000000000000000000000000000000000000000210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012720bca9a3b0000000000000000
{
  "result": "success",
  "hex": "01000000011d3ed3bec21ec209b9d4b3676d47b0822cb37f328f9730d1c4b588ce8bafec1700000000484730440220061cb5dde55fc49e585081bedc556f9006ca8df5639c90e9de4e56079706c8ae0220506e9a1b6778fbe6d4b2f04c57f1c47d3da040f8b543caa59723b8775d69b7df01ffffffff041027000000000000232102d77bbd5bfa0c6761b1099a400db46953d7e9181c64157d01e69a22ecd1d282a3ac1027000000000000302ea22c8020a83bdefbd26a188a1bb0d74b96636c39157333ec44c8dbae934e4862e2cd39e18103120c008203000401ccd02a724e1809000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac00000000000000004f6a4c4cec52d77bbd5bfa0c6761b1099a400db46953d7e9181c64157d01e69a22ecd1d282a3210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127296e40b540200000000000000"
}
```


[21-Oct-18 01:00 PM] TonyL#3577
3. Succesfully broadcasted
```./komodo-cli -ac_name=CCNG sendrawtransaction 01000000011d3ed3bec21ec209b9d4b3676d47b0822cb37f328f9730d1c4b588ce8bafec1700000000484730440220061cb5dde55fc49e585081bedc556f9006ca8df5639c90e9de4e56079706c8ae0220506e9a1b6778fbe6d4b2f04c57f1c47d3da040f8b543caa59723b8775d69b7df01ffffffff041027000000000000232102d77bbd5bfa0c6761b1099a400db46953d7e9181c64157d01e69a22ecd1d282a3ac1027000000000000302ea22c8020a83bdefbd26a188a1bb0d74b96636c39157333ec44c8dbae934e4862e2cd39e18103120c008203000401ccd02a724e1809000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac00000000000000004f6a4c4cec52d77bbd5bfa0c6761b1099a400db46953d7e9181c64157d01e69a22ecd1d282a3210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127296e40b540200000000000000
5c34ffab48490682a6409ce6e16886a796c125410357b26ff96b9f25187fc042```


[21-Oct-18 01:00 PM] TonyL#3577
4. Subscribed on it with some random datafee
```./komodo-cli -ac_name=CCNG oraclesinfo a382d2d1ec229ae6017d15641c18e9d75369b40d409a09b161670cfa5bbd7bd7
{
  "result": "success",
  "txid": "a382d2d1ec229ae6017d15641c18e9d75369b40d409a09b161670cfa5bbd7bd7",
  "name": "test",
  "description": "test",
  "format": "s",
  "marker": "RUWckSLuUCuZAiDgnJEDYb2KFBgW5q489E",
  "registered": [
    {
      "publisher": "0324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272",
      "baton": "RNwrSqBboyNNKz4T8Ln4jzTcM71pV47hcB",
      "batontxid": "5c34ffab48490682a6409ce6e16886a796c125410357b26ff96b9f25187fc042",
      "lifetime": "0.00000000",
      "funds": "379999.37710000",
      "datafee": "100.00000150"
    }
  ]
}
```
But looks not so critical as this `"funds"` sharing between all oracles ( See same `"funds"`: for any oracle creating right after registering even without any subscriptions UTXOs for a new ones)


[21-Oct-18 01:57 PM] ph03nix#3115
!kmdtip @TonyL 0.1

{Reactions}
Komodo 

[21-Oct-18 01:57 PM] KMD TipBot#0077

{Embed}
TipBot
@ph03nix (ph03nix#3115)
You tipped @TonyL **0.1 KMD**


[21-Oct-18 02:36 PM] jl777c#5810
@TonyL i dont understand the bug... 's' format allows any short string


[21-Oct-18 03:18 PM] TonyL#3577
@jl777c I've sent it in `oraclesregister` not `oraclesdata`


[21-Oct-18 03:21 PM] jl777c#5810
oh, ok i guess it needs more validation. good one! @Mihailo

{Reactions}
üôå üëç 

[22-Oct-18 02:47 AM] forkwitch#6080
We could launch CASINO with Dice, Roulette, Videopoker, Blackjack, Slots Seven Hot. Maybe more?


[22-Oct-18 02:48 AM] jl777c#5810
i think the dice CC can be morphed to casino CC, with immunity from 51% attack, and support for a specific class of games


[22-Oct-18 02:48 AM] jl777c#5810
the basic concept is dealer hashes entropy, player picks one of the utxo and attaches his entropy, and that creates a deterministic result


[22-Oct-18 02:48 AM] forkwitch#6080
This is true and maybe better as long as not too much complexity.


[22-Oct-18 02:49 AM] TonyL#3577
I guess better to use some dice2 CC which return random number from X to Y - it will be much more easier to build casino dAPPs on it


[22-Oct-18 02:49 AM] jl777c#5810
so any game that has a user action that generates random numbers that then represent the user "hand", then by having different evaluators all these types of games can be supported


[22-Oct-18 02:49 AM] forkwitch#6080
Or a RNG CC that is used in all Casino games CCs if things should be plugin like.


[22-Oct-18 02:50 AM] jl777c#5810
a single entropy value selected daily and made into a hash chain, revealed after the fact


[22-Oct-18 02:50 AM] jl777c#5810
vs realtime reveal of entropy values from the mempool


[22-Oct-18 02:50 AM] jl777c#5810
in the former, what happens if the dealer node doesnt reveal the seed?


[22-Oct-18 02:50 AM] jl777c#5810
in the latter, the seed must be revealed to resolve the bet


[22-Oct-18 02:51 AM] forkwitch#6080
Why we use a dealer node? We could use blockchain for entropy or i miss something? Client get the eval on his node??


[22-Oct-18 02:51 AM] jl777c#5810
for the realtime response


[22-Oct-18 02:51 AM] jl777c#5810
how else to get realtime response?


[22-Oct-18 02:51 AM] jl777c#5810
that is a requirement


[22-Oct-18 02:54 AM] jl777c#5810
if past values are used, it isnt a secret


[22-Oct-18 02:54 AM] jl777c#5810
if future value is used, it isnt realtime


[22-Oct-18 02:55 AM] jl777c#5810
the miner can win all the time


[22-Oct-18 02:55 AM] jl777c#5810
current design doesnt allow the dealer node to cheat, the player selectes the entropy tx to match up with


[22-Oct-18 02:55 AM] jl777c#5810
miner cannot affect outcome


[22-Oct-18 02:56 AM] forkwitch#6080
I want to explain you how i imagine it. Correct me please when its wrong. I run the roulette CC on my node, i bet, and each block is a game round, i get the bet result from block data. Now can this not trigger a local SEC reveal process to spend won bet without having a dealer node? In my brain from a cryptographic view it is possible, complex but possible. 
Now the dice CC works different and it needs the central node to run or you can not play. I am thinking if it is not possible to be playing and winning 'independent and decentralized'.


[22-Oct-18 02:56 AM] forkwitch#6080
Now controlling the pool.forkwitch.com i can cheat if i want. I dont. How much is the bounty to cheat?


[22-Oct-18 02:57 AM] jl777c#5810
how can entropy not be known to the nodes that create the entropy?


[22-Oct-18 02:58 AM] jl777c#5810
even using a shamir secret approach, the last node that reconstructs the value will know the entropy and whoever knows the entropy can cheat


[22-Oct-18 02:58 AM] jl777c#5810
as it is, yes the dealer node needs to be running, but it can be running on multple nodes for redundancy


[22-Oct-18 02:58 AM] jl777c#5810
and there is no way to cheat (other than 51% which I think I have a solution for)


[22-Oct-18 02:59 AM] jl777c#5810
@Deleted User what part of "it needs to be realtime" did you not understand clear?


[22-Oct-18 02:59 AM] jl777c#5810
2 seconds response is needed


[22-Oct-18 02:59 AM] jl777c#5810
that is the requirement


[22-Oct-18 03:00 AM] jl777c#5810
and if the miner is betting, he would be able to grind the blockhash to maximize chance to win


[22-Oct-18 03:00 AM] jl777c#5810
please, this is a complex issue, due to realtime nature. if a non-realtime is acceptable, then it is rather easy to solve and not so interesting to play


[22-Oct-18 03:01 AM] jl777c#5810
bet, response, bet, response, bet, reponse


[22-Oct-18 03:01 AM] jl777c#5810
vs


[22-Oct-18 03:01 AM] jl777c#5810
bet, wait for a minute, maybe 5, response


[22-Oct-18 03:01 AM] jl777c#5810
how many games have a random 1 to 5 minute delay thrown in and are successful?


[22-Oct-18 03:02 AM] jl777c#5810
I do know about gameplay design to some degree


[22-Oct-18 03:02 AM] siu#3920
Fast response is needed to be competitivw with other games


[22-Oct-18 03:03 AM] siu#3920
If you bet and have to wait 1min for response... your betting desire goes down


[22-Oct-18 03:03 AM] siu#3920
Speed is part of the addictive effect


[22-Oct-18 03:03 AM] forkwitch#6080
You need it without waiting or it will not make enough addicted. Adrenaline will not go up as high and in short distsance up down up down up down then when you wait long. Then its gonna be long adrenalin kick if you lose 2 times but waited 10 minutes its game over and casino dead because gambler gets mad.


[22-Oct-18 03:03 AM] jl777c#5810
realtime response is a REQUIREMENT as in it is REQUIRED, anything else is a fail


[22-Oct-18 03:04 AM] jl777c#5810
no discussion needed on this point


[22-Oct-18 03:04 AM] jl777c#5810
realtime is a must


[22-Oct-18 03:06 AM] jl777c#5810
current design satisfies all requirements other than to be immune from 51%. the next design needs to improve on this and not go backwards


[22-Oct-18 03:06 AM] jl777c#5810
anyway I have an idea to solve the 51% attack...


[22-Oct-18 03:06 AM] siu#3920
Please make it that it doesnt require a hard fork hehe


[22-Oct-18 03:07 AM] jl777c#5810
but the casino CC would use the same method for a player vs house games to get the entropy. just each game would evaluate the two hashes using a different algo to implement the game specifics


[22-Oct-18 03:07 AM] forkwitch#6080
Changing notary freq is not enough?


[22-Oct-18 03:08 AM] jl777c#5810
well it is still theoretically possible...


[22-Oct-18 03:08 AM] jl777c#5810
granted double spending within 5 blocks will not be easy and that assumes you guess when the notaries miss a notarization


[22-Oct-18 03:08 AM] jl777c#5810
but if we can prevent it, we should


[22-Oct-18 03:08 AM] forkwitch#6080
Please explain me the current entropy problem 51%, i have not researched this.


[22-Oct-18 03:08 AM] jl777c#5810
dealer hashes his entropy in the entropytx


[22-Oct-18 03:09 AM] forkwitch#6080
Or is it the idea to revert a gamble?


[22-Oct-18 03:09 AM] jl777c#5810
player picks one of the entropy tx to bet against and adds his entropy


[22-Oct-18 03:09 AM] forkwitch#6080
And miner can read it out and change it with 51% ?


[22-Oct-18 03:09 AM] siu#3920
To revert it and change it for a bigger bet once you know its a winner


[22-Oct-18 03:09 AM] jl777c#5810
now dealer node can determine who wins and then posts the dicewin/loss with the entropy


[22-Oct-18 03:09 AM] jl777c#5810
win or loss doesnt matter


[22-Oct-18 03:09 AM] gcharang#6833

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/503872600829853697/entropy-dealer-bettor.png


[22-Oct-18 03:09 AM] gcharang#6833

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/503872642319646722/Screenshot_from_2018-10-18_17-58-15.png


[22-Oct-18 03:10 AM] jl777c#5810
the key is that the entropy for the specific utxo is revealed


[22-Oct-18 03:10 AM] jl777c#5810
now it is a simple matter to grind your entropy to find a winner, few seconds computation


[22-Oct-18 03:10 AM] jl777c#5810
reorg the chain, invalidate the original dicebet to the revealed entropy tx is back to unspent


[22-Oct-18 03:11 AM] jl777c#5810
make a new dicebet selecting that entropy tx with a guaranteed win at max odds and big bet


[22-Oct-18 03:11 AM] forkwitch#6080
Understood, practically easy exploitable. Not happened now? How much is max bet in the game and can you just play double your bet or it has different odds?


[22-Oct-18 03:12 AM] siu#3920
Its not that easy at current hashrate and low supply


[22-Oct-18 03:12 AM] jl777c#5810
and non-economic based on value of KMDICE vs nicehash


[22-Oct-18 03:12 AM] siu#3920
And dpow


[22-Oct-18 03:13 AM] forkwitch#6080
Only non-economic this is true. Rest bypassable and exploitable.


[22-Oct-18 03:13 AM] forkwitch#6080
How much is the supply now? How much max?


[22-Oct-18 03:14 AM] siu#3920
Max unlocked supply will be 10.5million


[22-Oct-18 03:14 AM] jl777c#5810
21 mil max, 200k supply, 10.5 mil locked


[22-Oct-18 03:14 AM] jl777c#5810
unlocked supply can go lower based on luck


[22-Oct-18 03:14 AM] siu#3920
Max bet is 1000 at 1500:1


[22-Oct-18 03:14 AM] siu#3920
Which might drain 10% of locked coins


[22-Oct-18 03:15 AM] siu#3920
So to drain all the fund youll need to score this 10 times.


[22-Oct-18 03:15 AM] forkwitch#6080
10 bets in theory can drain bankrol?


[22-Oct-18 03:15 AM] siu#3920
Yes


[22-Oct-18 03:15 AM] siu#3920
10 very unlikely bets to happen


[22-Oct-18 03:16 AM] jl777c#5810
it can be made very likely, so we need to hardfork it to prevent


[22-Oct-18 03:16 AM] forkwitch#6080
Reorgning and cheating based on this odd 1:1500 is i believe a hard attack and difficult to hash the correct entr.


[22-Oct-18 03:16 AM] jl777c#5810
just iterate random hash and evaluate for winner, a few seconds will find a 1500:1 winner


[22-Oct-18 03:16 AM] forkwitch#6080
1:2 odd is available and how much is max bet for low odds?


[22-Oct-18 03:16 AM] jl777c#5810
1000 KMDICE


[22-Oct-18 03:17 AM] jl777c#5810
one simplistic way is to make 1500 0.001 bets to find a winner, reorg and submit same hash with 1000 KMDICE bet


[22-Oct-18 03:17 AM] jl777c#5810
but the solution could be simple!


[22-Oct-18 03:18 AM] jl777c#5810
the problem is that the secret is revealed and thus making the entropy tx basically have no entropy as it is a constant


[22-Oct-18 03:18 AM] jl777c#5810
so what we need to do is invalidate any entropy value that has been used before


[22-Oct-18 03:19 AM] jl777c#5810
if each online node could make a list of all bettxid with the matched dealer entropy and then refuse to accept any other bettxid using the same entropy, this 51% attack is thwarted


[22-Oct-18 03:19 AM] jl777c#5810
my unsolved issue is how to do this in a consensus safe way...


[22-Oct-18 03:19 AM] forkwitch#6080
We would not have to archive entropy values with this method?


[22-Oct-18 03:19 AM] jl777c#5810
chain will split if any node didnt see the entropy


[22-Oct-18 03:20 AM] jl777c#5810
yes, it would need to be archived until notarized


[22-Oct-18 03:20 AM] jl777c#5810
so not a big archive


[22-Oct-18 03:20 AM] jl777c#5810
but getting all nodes to the same archive state, is the unsolved problem now


[22-Oct-18 03:21 AM] jl777c#5810
one way is for the dealer node to just create a summary tx(s) each block with this info. since the dealer creates this, it cant be double spent by the attacker and even on reorg and mining domination, it will end up in the mempool


[22-Oct-18 03:21 AM] jl777c#5810
but mempools isnt 100% consensus safe...


[22-Oct-18 03:23 AM] jl777c#5810
any ideas? @Mihailo @forkwitch


[22-Oct-18 03:24 AM] jl777c#5810
ok, i think i see how


[22-Oct-18 03:27 AM] forkwitch#6080
But as we know it the won amount should not be paid or made spendable until we are sure a notarization happened and all node on same state. This can solve it maybe.


[22-Oct-18 03:27 AM] jl777c#5810
yes, sort of, but i think there is a realtime solution for all bets other than a double spent one!


[22-Oct-18 03:28 AM] forkwitch#6080
Observing mempool?


[22-Oct-18 03:29 AM] jl777c#5810
the sequence is:
0) entropy tx is created with hash of entropy (hentropy)
1) player selects it and bets against it using entropy
2) dealer reveals entropy and completes the bet or
2b) dealer ignores it and it eventually times out and player wins by default


[22-Oct-18 03:29 AM] jl777c#5810
so here, all we need to do is have the dealer add the following behavior:


[22-Oct-18 03:29 AM] jl777c#5810
record all rawtx, txid and entropy values used in 2)


[22-Oct-18 03:30 AM] jl777c#5810
if a duplicate entropy is seen (dealer will know this for sure) then instead of 2) he does 2c)


[22-Oct-18 03:30 AM] jl777c#5810
submits proof of the older rawtx, txid, entropy to invalidate the bet and refund, so no money changes


[22-Oct-18 03:31 AM] jl777c#5810
since the rawtx was signed by the player, the dealer couldnt have made a forgery


[22-Oct-18 03:31 AM] forkwitch#6080
Good, so no one can cheat. Why not if redundant entropy is found bet is automatic a loss?


[22-Oct-18 03:31 AM] jl777c#5810
but just in case there are edge cases, we refund all the funds, taking away the incentive to cheat


[22-Oct-18 03:32 AM] forkwitch#6080
How big are chances for this to happen coincidentially?


[22-Oct-18 03:32 AM] jl777c#5810
i am not 100% sure that the dealers proof is sufficient in all cases


[22-Oct-18 03:32 AM] jl777c#5810
i guess it can go either way, but the key is to protect the bankroll


[22-Oct-18 03:32 AM] forkwitch#6080
I understand, that is the goal, and not punishment for cheaters.


[22-Oct-18 03:32 AM] jl777c#5810
and remember there is the nicehash cost, the failed attempts, that are out of pocket costs for cheaters


[22-Oct-18 03:33 AM] jl777c#5810
after all that work they submit the 100% guaranteed win. only to have it proven a cheat and get nothing


[22-Oct-18 03:33 AM] jl777c#5810
very discouraging


[22-Oct-18 03:33 AM] jl777c#5810
for the attacker


[22-Oct-18 03:36 AM] forkwitch#6080
This is true. Maybe we add a output 'Gratulation you have tried to cheat and it was a good try' for the cheaters to get credits for the hard labour.


[22-Oct-18 03:37 AM] jl777c#5810
so this just needs a dicerefund rpc call that submits the proof of double usage, and dealer does this instead of dicefinish, it can even be determined in realtime just as quickly


[22-Oct-18 03:37 AM] jl777c#5810
just need a third case for the dealer to finish a dicebet.


[22-Oct-18 03:37 AM] jl777c#5810
wow, it seems after this KMDICE will be 100% solid from attacks


[22-Oct-18 03:38 AM] jl777c#5810
and the casino CC can implement the same fix, so however many game logic that can be done via 2 entropy hashes can be supported


[22-Oct-18 03:38 AM] jl777c#5810
casinoslots, casinoroulette, casinowheel, etc. all the equivalent of dicebet, just using a different eval function


[22-Oct-18 03:45 AM] grewalsatinder#9653
all on same blockchain is good or separate would be good ?


[22-Oct-18 03:47 AM] jl777c#5810
for now a single chain would be sufficient


[22-Oct-18 03:51 AM] grewalsatinder#9653
cool


[22-Oct-18 03:52 AM] forkwitch#6080
CASINO chain is born @grewalsatinder , all casino games lauching with it. Komodo is like Macao now.


[22-Oct-18 03:53 AM] grewalsatinder#9653
@forkwitch let me know if I could of help with funds.


[22-Oct-18 03:53 AM] grewalsatinder#9653
üôÇ


[22-Oct-18 03:53 AM] grewalsatinder#9653
I'll help in that part


[22-Oct-18 03:53 AM] grewalsatinder#9653
and in GUI part too if possible.


[22-Oct-18 03:53 AM] grewalsatinder#9653
@jl777c @forkwitch thank you for your quick brainstorming sessions on Komodo Games!


[22-Oct-18 03:55 AM] jl777c#5810
@forkwitch can you make the changes for the 51% fix


[22-Oct-18 04:00 AM] siu#3920
What is macao?


[22-Oct-18 04:00 AM] jl777c#5810
las vegas for china


[22-Oct-18 04:00 AM] TonyL#3577
Macau was meant


[22-Oct-18 04:00 AM] siu#3920
Ahh


[22-Oct-18 04:00 AM] TonyL#3577
But both possible to spell üòÉ


[22-Oct-18 04:02 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/503885949193682945/IMG_20181022_180218.jpg


[22-Oct-18 04:03 AM] Mihailo#5902
@TonyL I found a problem in multisig GW as one mechanism in oraclefeed is not fully implemented, so I need to finsih it. Basically when multiple oraclefeeds need to sign the tx they need to broadcast the partial signed tx on AC until it is complete and then broadcast it on external chain in order send funds to withdrawal address.


[22-Oct-18 04:03 AM] TonyL#3577
Have an old tattoo which suits such chain thematics well üòÇ


[22-Oct-18 04:06 AM] TonyL#3577
@Mihailo Ok, will wait for your fixes to re-test. I'm testing oracles now - proceed from creation to registration auto-tests - was able to pass to `oraclesregister` random stuff and broadcasted this tx then (reported above)


[22-Oct-18 04:09 AM] forkwitch#6080
@jl777c with your help i am confident to achieve it, but alone i am afraid i can not make the full casino CC, fix of the 51% in a good format and confidentially. Maybe i add new bugs then. Please check:

1) dealer node create a entropyarray of mempool found entropys
2) dealer compares each bet entropy with the entropyarray
3) if redundancy found dealer will ignore this bet and not do anything further with it.

I have one question.  When i find a duplicate entropy then i call dicerefund(bet) and bet is the one with the duplicate. 

So now i 'only' add dicerefund rpc function and entropy-array and additional check for redundancy?


[22-Oct-18 04:09 AM] forkwitch#6080
If this is right i will try it.


[22-Oct-18 04:15 AM] jl777c#5810
I think dealer only needs to update the entropyarray of the dicebets he is about to finish, as that is when the entropy is revealed. so before updating the array, just check to see if the entropy was already used. if it was, then do a dicerefund with txproof and have it return funds to where they came from. so the dealer can actively and in realtime detect a reuse of a previously completed dicebet


[22-Oct-18 04:16 AM] jl777c#5810
since only the dealer can do a non-timeout finish, the dealer will always have an accurate list of entropy used


[22-Oct-18 04:16 AM] jl777c#5810
really it should be a dicerefund rpc call that requires sufficient proof for all the other nodes to validate put into opreturn


[22-Oct-18 04:16 AM] jl777c#5810
and in the dicefinish rpc to add the handling for this third case


[22-Oct-18 04:31 AM] Mihailo#5902
@TonyL I saw the register you made, noted in my to-do list üòâ

{Reactions}
üëå 

[22-Oct-18 04:33 AM] TonyL#3577
@Mihailo I think I can resolve it on RPC side with additional input checks to not take your time but not sure if some actions needed from SC side since this transaction wasn't just generated but also broadcasted


[22-Oct-18 04:34 AM] jl777c#5810
the rpc should error check as much as possible, but if the validation isnt complete, it can mess up when an attack makes an rpc invalid but validation valid tx


[22-Oct-18 04:35 AM] TonyL#3577
I see, so better to check CC code in such cases so even if RPC not generating transaction with such input it's possible to generate it and broadcast manually in some attack vector


[22-Oct-18 04:36 AM] jl777c#5810
yes, needs to be in both, with the validation ok to be a little more lenient as long as it doesnt allow attacks


[22-Oct-18 04:36 AM] jl777c#5810
just imagine there are bad people out there willing to do bad things


[22-Oct-18 04:38 AM] Mihailo#5902
yes, it must first be done in validation so nobody can transmit tx with bad data. Then the RPC can check if you are inputing wrong things to return error instead of transmitting the tx.


[22-Oct-18 04:42 AM] Mihailo#5902
BTW, which port is used on nodes for AC, is it same 7770? I'm setting up one node at my home server to be for mining on AC ....


[22-Oct-18 04:45 AM] jl777c#5810
getinfo


[22-Oct-18 04:45 AM] jl777c#5810
it shows rpc port


[22-Oct-18 04:47 AM] Mihailo#5902
Ok, saw it. So I see it is using random port, I'll set some specific and forward it üòâ


[22-Oct-18 05:25 AM] forkwitch#6080
Geocold, a good minded security researcher gonna be helping us as a Security Advisor on CASINO.


[22-Oct-18 05:27 AM] forkwitch#6080
Gonna be presenting him the casino cc plan and hear what he says. He is amongst that sort of security researchers who will always find a way for mess.

{Reactions}
üëèüèΩ (8) üëçüèΩ (10) shexy (7) rum (6) parrot (5) yassinkomodo treasure 

[22-Oct-18 10:50 PM] grewalsatinder#9653
Excited for your project @forkwitch üòÉ


[23-Oct-18 08:03 AM] xbis#8594
@jl777c  hi there! I was adviced by Julio to ping you üòÉ


[23-Oct-18 08:05 AM] jl777c#5810
hello! did you get through the Mastering Crypto conditions


[23-Oct-18 08:08 AM] xbis#8594
I am going to finish today


[23-Oct-18 08:09 AM] jl777c#5810
ok, I would like you to start thinking about a payments CC


[23-Oct-18 08:09 AM] jl777c#5810
basically a general purpose CC that allows people to lock funds into their CC address and then have restrictions on how it can be spent


[23-Oct-18 08:10 AM] xbis#8594
could we start from a simple task? just for test)


[23-Oct-18 08:10 AM] jl777c#5810
oh, that was the simple task...


[23-Oct-18 08:10 AM] xbis#8594
ok, waiting for it)


[23-Oct-18 08:11 AM] jl777c#5810
the initial payments CC wont have to have much functionality. just a way for users to fund their account and a way for payments to be made from it


[23-Oct-18 08:11 AM] jl777c#5810
we can then iterate to add more and more features


[23-Oct-18 08:11 AM] jl777c#5810
so locking funds and releasing,is the basic feature


[23-Oct-18 08:12 AM] xbis#8594
what is the difference from rewards?


[23-Oct-18 08:13 AM] jl777c#5810
it is most similar to rewards, but rewards come back to the original user


[23-Oct-18 08:13 AM] xbis#8594
ok, I see


[23-Oct-18 08:13 AM] jl777c#5810
what I am thinking of for payments is to be able to have your monthly bills paid from it


[23-Oct-18 08:13 AM] SHossain#0007
DirectDebit method?


[23-Oct-18 08:14 AM] jl777c#5810
not exactly. but the concept of regular payments, with maximum limits


[23-Oct-18 08:14 AM] jl777c#5810
so if you are paying for electric bill, you can authorize a certain amount per month and then know that it wont pay more than that


[23-Oct-18 08:14 AM] jl777c#5810
a way to protect your funds that are in the hot wallet


[23-Oct-18 08:15 AM] jusoaresf#3291
and it can still vary within that limit like the bills do...


[23-Oct-18 08:16 AM] jl777c#5810
yes. and maybe you can send a payment yourself, or just respond to an invoice


[23-Oct-18 08:16 AM] jl777c#5810
automatic recurring payments


[23-Oct-18 08:16 AM] SHossain#0007
nice. paying server bills like that month after month would be cool


[23-Oct-18 08:16 AM] jl777c#5810
eventually basically anything and everything about doing payments


[23-Oct-18 08:17 AM] SHossain#0007
though, that is just only one usage üòÉ


[23-Oct-18 08:17 AM] jl777c#5810
if anybody has desired features, now is the time to voice it


[23-Oct-18 08:17 AM] xbis#8594
so it shall be like automatic invoice payments with the [month/week/...] limit


[23-Oct-18 08:19 AM] jl777c#5810
yes, lets start with that


[23-Oct-18 08:19 AM] jusoaresf#3291
and max value limit (?)


[23-Oct-18 08:19 AM] jl777c#5810
my guess is over time, it will get a lot more features, but that is a good start. and max limit definitely


[23-Oct-18 08:20 AM] jl777c#5810
so once you put funds in this address, then you know it will go out toward bills


[23-Oct-18 08:20 AM] jl777c#5810
protects against anybody spending the funds on anything else, even yourself


[23-Oct-18 08:21 AM] jusoaresf#3291
no allow_from_address for invoices?


[23-Oct-18 08:22 AM] jl777c#5810
these are the details that @xbis needs to determine


[23-Oct-18 08:22 AM] jl777c#5810
what is needed to make a useful payments CC


[23-Oct-18 08:22 AM] xbis#8594
thanks, I 'll try))


[23-Oct-18 08:22 AM] jl777c#5810
we need to discuss what the required features are and once that is set for v1, then we lock down the details


[23-Oct-18 08:23 AM] jl777c#5810
a CC is very limited in scope, but very powerful, it does take a bit to get up to speed but once you do amazing things are possible in relatively short time.


[23-Oct-18 08:23 AM] jl777c#5810
definitely ask questions!


[23-Oct-18 08:24 AM] jl777c#5810
this is likely new territory and other than the code and Mastering CC, there are no other docs


[23-Oct-18 08:24 AM] jl777c#5810
oh, there are all the testing docs, which might help


[23-Oct-18 08:25 AM] xbis#8594
where could i find the testing docs mentioned?


[23-Oct-18 08:25 AM] gcharang#6833
https://docs.komodoplatform.com/cc/contracts/index-contracts.html
https://docs.komodoplatform.com/cc/index-book-jl.html


[23-Oct-18 08:25 AM] gcharang#6833
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=55258823

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Available RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pubk...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[23-Oct-18 08:25 AM] jl777c#5810
the general concept is to create a "balance" based view for funds and the rpc for it would be on that basis


[23-Oct-18 08:25 AM] xbis#8594
thanks))


[23-Oct-18 10:38 PM] Deleted User#0000
I have added 2 fixes to komodod that I think you guys might find useful. 
1) getinfo now shows your active -pukey 
2) there is a new RPC `setpubkey` that allows you to set the -pubkey if it is not set, without restarting the deamon.

{Reactions}
shexy üëè 

[23-Oct-18 10:40 PM] Deleted User#0000
I am not 100% sure that setpubkey wont break things, but I assume, you wont actually be doing anything that would be accessing the pubkey before you set it. Its mostly there for noobs/testers of CC when they get the "you need a -pubkey set" they cna just go ahead and set it rather than have to gin around restarting things, people seem to find that confusing all the time.


[23-Oct-18 10:40 PM] Deleted User#0000
If you would like a PR to FSM please let me know and I can do that


[23-Oct-18 10:42 PM] Deleted User#0000
```test@testnode:~/staked/StakedModo/src$ ./komodo-cli -ac_name=TEST setpubkey 02f7597468703c1c5c8465dd6d43acaae697df9df30bed21494d193412a1ea193e
{
  "pubkey": "02f7597468703c1c5c8465dd6d43acaae697df9df30bed21494d193412a1ea193e"
}
test@testnode:~/staked/StakedModo/src$ ./komodo-cli -ac_name=TEST setpubkey 02f7597468703c1c5c8465dd6d43acaae697df9df30bed21494d193412a1ea193e
{
  "error": "Can only set pubkey once, to change it you need to restart your daemon.",
  "pubkey": "02f7597468703c1c5c8465dd6d43acaae697df9df30bed21494d193412a1ea193e"
}
```


[23-Oct-18 10:44 PM] TonyL#3577
Hey @Deleted User ! I can test this call itself and make auto-tests which will test crypto-conditions stuff with this parameter usage for pubkey setting

{Reactions}
üëå 

[23-Oct-18 10:44 PM] Deleted User#0000
I did it on staked, so a PR will need to be made against FSM ... its not much code though


[23-Oct-18 10:46 PM] TonyL#3577
I think such call will help in dapps development a lot since there is no way now to proper validate pubkey matching in wallet and daemon param


[23-Oct-18 10:46 PM] TonyL#3577
Confused me a lot also when started with gateway cc üòÉ


[23-Oct-18 10:48 PM] Deleted User#0000
Yes ... I think maybe one other thing should be added before I make PR and thats actually validate the pubkey .. currrently I used the same validation as the -pubkey start param uses, which is test length is 66 ... you can litterally put anything in there as long as its 66 char long. 

I think I can make it return the Raddress that belongs to hte pubkey relitivly easily to allow the user to check the address is right.


[23-Oct-18 10:49 PM] TonyL#3577
Maybe implement most usual case somehow in this call: getwalletaddress -> validateaddress -> put pubkey to -pubkey=


[23-Oct-18 10:50 PM] Deleted User#0000
ü§î


[23-Oct-18 10:50 PM] TonyL#3577
For example if you call `setpubkey` without params


[23-Oct-18 10:50 PM] Deleted User#0000
got ya ... will try this out .


[23-Oct-18 10:50 PM] TonyL#3577
Or some `setpubkey default`


[23-Oct-18 10:50 PM] Deleted User#0000
also if given the pubkey it should generate Raddress and run validate address


[23-Oct-18 10:50 PM] Deleted User#0000
to amke sure its valid before adding I think.


[23-Oct-18 10:53 PM] TonyL#3577
@Deleted User Could you please show the code? Very interesting how you've implemented it (like a restarting daemon or there is a way to change it on fly)


[23-Oct-18 10:53 PM] Deleted User#0000
```extern uint8_t NOTARY_PUBKEY33[];
    extern std::string NOTARY_PUBKEY;
    if ( NOTARY_PUBKEY33[0] == 0 && strlen(params[0].get_str().c_str()) == 66 ) {
        LOCK(cs_main);
        NOTARY_PUBKEY = params[0].get_str();
        decode_hex(NOTARY_PUBKEY33,33,(char *)NOTARY_PUBKEY.c_str());

    } else {
        result.push_back(Pair("error", "Can only set pubkey once, to change it you need to restart your daemon."));
    }
    result.push_back(Pair("pubkey", NOTARY_PUBKEY));
    return result;```


[23-Oct-18 10:54 PM] Deleted User#0000
it was pie once I knew what to look for ...


[23-Oct-18 10:55 PM] Deleted User#0000
after messing with RPC calls for streamer it seemed quite simple so I just tried it ... have not done on daemon with flowing blocks and things, but everywhere in the code relating to it always checks if `NOTARY_PUBKEY33[0] != 0` 
*I think* LOCK(cs_main) should prevent wallet making tx until pubkey has been set to avoid crashes but im an not 100% sure on that.


[23-Oct-18 10:59 PM] TonyL#3577
Oh so looks like it's only possible to set if initial `pubkey=` was totally empty not wrong or different


[23-Oct-18 11:00 PM] Deleted User#0000
yes.... maybe it can be changed in that case also, but I dont know what the results might be


[23-Oct-18 11:00 PM] Deleted User#0000
It seems that if it was already set, and some things had used it.... then you change it


[23-Oct-18 11:01 PM] Deleted User#0000
that anything could happen


[23-Oct-18 11:01 PM] Deleted User#0000
I mostly did it so you can create an address THEN set pubkey, as currently its totally stupid that you need the daemon running with -pubkey but cannot create an address without the daemon running üòÇ


[23-Oct-18 11:02 PM] Deleted User#0000
very handy for making dAPPS

{Reactions}
Komodo 

[24-Oct-18 02:29 AM] Deleted User#0000
https://github.com/jl777/komodo/pull/915

{Embed}
https://github.com/jl777/komodo/pull/915
Setpubkey rpc by blackjok3rtt ¬∑ Pull Request #915 ¬∑ jl777/komodo
Modification to make the currently activated pubkey show in getinfo, so that dAPPs can easily identify what pubkey they are using.
Also adds new RPC call setpubkey that can set a pubkey, if none wa...
https://images-ext-2.discordapp.net/external/H9TDr69kM7mmxGBcENY3FInyORgkC6up-3NZ7sRUihU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/30971146


[24-Oct-18 02:29 AM] Deleted User#0000
@TonyL


[24-Oct-18 02:30 AM] Deleted User#0000
@jorian  if you wanted to see how it works.


[24-Oct-18 02:36 AM] jl777c#5810
merged


[24-Oct-18 02:38 AM] jl777c#5810
just dont setpubkey while something is in progress


[24-Oct-18 02:39 AM] jl777c#5810
also maybe we should require the privkey for the -pubkey be in the wallet, but not sure as there are cases where you want to run as somebody elses pubkey


[24-Oct-18 02:39 AM] Deleted User#0000
Thats why it displays ismine


[24-Oct-18 02:39 AM] Deleted User#0000
and it also uses LOCK


[24-Oct-18 02:40 AM] Deleted User#0000
so it should lock things... im not 100% sure on that though


[24-Oct-18 02:40 AM] Deleted User#0000
Basically, you start daemon, get an address, then set pubkey there should be no reaon anyone ever tries to set it when the pubkey is in use.


[24-Oct-18 02:41 AM] Deleted User#0000
I would advise notary nodes to NEVER use that RPC call üòÉ


[24-Oct-18 03:24 AM] jl777c#5810
yes the LOCK2 will prevent any gross violations of assumptions


[24-Oct-18 03:24 AM] jl777c#5810
but you can definitely get yourself in trouble with this one


[24-Oct-18 03:40 AM] Deleted User#0000
yes, it should be used directly after starting daemon... thats why I made it not able to set if a pubkey has been set already.


[24-Oct-18 05:05 AM] grewalsatinder#9653
@Deleted User very cool to see that PR of yours mate! üòé üëè
Good work!

{Reactions}
üëç 

[24-Oct-18 05:07 AM] Deleted User#0000
Yeah it seems useful... It started as a request for Alright on his CHAT app... and I figured being able to set it after creating an address was needed, everything I tried to make so far was just made hard because you cant do that... Spent a bit long on it, hope it proves useful.


[24-Oct-18 05:10 AM] grewalsatinder#9653
Want to be clear on this pubkey rpc. in what instances/situations I should avoid using this rpc?


[24-Oct-18 05:11 AM] grewalsatinder#9653
for example the trsansaction sending is in progress, I should not issue this rpc.


[24-Oct-18 05:11 AM] grewalsatinder#9653
that I understand


[24-Oct-18 05:11 AM] grewalsatinder#9653
but dosn't other rpc wait to respond while one rpc is in progress?


[24-Oct-18 05:15 AM] Deleted User#0000
You should ONLY use directly after starting the daemon... it replaces using the -pubkey and adds extra checks to stop you using an invalid pubkey.


[24-Oct-18 05:15 AM] Deleted User#0000
and will also report if the pubkey/raddress is imported to the local wallet


[24-Oct-18 05:15 AM] Deleted User#0000
its realy for CC contracts.


[24-Oct-18 05:16 AM] Deleted User#0000
start daemon, generate new address or retreive a valid pubey from wallet then set the pubkey.


[24-Oct-18 05:16 AM] Deleted User#0000
it should not be used for anything else.


[24-Oct-18 05:17 AM] Deleted User#0000
once your use it once the pubkey is then set and you need to reatrt daemon to change it as usual.


[24-Oct-18 05:30 AM] grewalsatinder#9653
cool
thanks for clearing üëç

{Reactions}
üëç 

[24-Oct-18 06:10 AM] Mylo#8306
top work!


[25-Oct-18 11:08 AM] TonyL#3577
Get sick a little bit so wasn't active for a last two days :/ Now feel better, hehe üôå 
I've swiped previous code in this repo: https://github.com/tonymorony/cryptoconditions_tui since it's working bad and not flexible at all 
Now trying to make this TUI less cashable, work with multisig gateways and working with RPC not via komodo-cli calls this time. Made initial commit to demonstrate the usage with RPC lib on token creation example. 
As the most simple solution it's just asking for RPC connection details on start.

{Embed}
https://github.com/tonymorony/cryptoconditions_tui
tonymorony/cryptoconditions_tui
Terminal user interfaces for Komodo CryptoConditions smart-contracts - tonymorony/cryptoconditions_tui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[25-Oct-18 11:11 AM] TonyL#3577
Flow is -> there is a `rpclib` which will have a library for RPC calls built on top of `python-bitcoinrpc` package, `tuilib` building on top of `rpclib` to add needed input asking/printouts, `TUI` itself working with `tuilib`


[25-Oct-18 12:15 PM] gcharang#6833
@TonyL I have a suggestion regarding gateways tui: 
Create 3 different tui: 
 1) for creating represenatative token onchain, create oracle, bind them to gateway... so on... that are the duty of one of the trusted `MofN` fedaration
2) for the gateways user who wants to deposit external coins
3)for the gateways user who has onchain tokens and wants to withdraw external tokens

A script that deals with onchain trade might be good too.

I am not asking for this right away, but this could be the final structure to go for that will make it more understandable to dAPP devs


[25-Oct-18 02:57 PM] TonyL#3577
@gcharang Thanks for suggestion!
Previous one combined all of these but you have to know what you do. Seems like a good idea to separate for gateway operator and gateway user (at least make two modes / menus in same tool)
I've started to struggle with this framework to make GUI of TUI better: https://github.com/npcole/npyscreen
But it's quite hard for me so far since I have no experience with OOP and MVC stuff. With this framework possible to create sub-menus, mouse-support, multi-screens, user can choose path to needed config graphically and a lot of stuff on top of ncurses

{Embed}
https://github.com/npcole/npyscreen
npcole/npyscreen
Automatically exported from code.google.com/p/npyscreen - npcole/npyscreen
https://images-ext-1.discordapp.net/external/SfrEkzPznB6JL97uSwQkizrE09CP4FfedIUpNtHn9Eo/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/2055887

{Reactions}
üëç (2) shexy (2) 

[25-Oct-18 02:59 PM] TonyL#3577
Don't want to give up since it'll allow to push TUIs on the next level and make some skills for GUIs as well


[25-Oct-18 03:20 PM] Alright#0419
please don't üòõ

{Reactions}
trollface üòú Komodo (5) 

[26-Oct-18 07:22 AM] Mihailo#5902
Hey guys, anybody knows how can I easily get WIF private key from byte array?

{Reactions}
ü§î 

[26-Oct-18 12:38 PM] siu#3920
jq


[26-Oct-18 12:38 PM] siu#3920
ohh, no idea, sorry


[26-Oct-18 07:50 PM] TonyL#3577
https://www.youtube.com/watch?v=UWs7YLWVk3E Preview of updated CC TUI üòÉ 
Preparation for gatewaysbind in 1.5 minutes:
Creating oracle, registering, subscribing X times, creating token, converting
More code (in this repo https://github.com/tonymorony/cryptoconditions_tui) and videos with voice explanation coming soon :Komodo:

{Embed}
Tony Lysakov
https://www.youtube.com/watch?v=UWs7YLWVk3E
Crytoconditions TUI preview
https://images-ext-1.discordapp.net/external/xkA0IG8tMgZ8iFrx3tMc3Xv6EPmwWpU5QpmBzQ-P6CM/https/i.ytimg.com/vi/UWs7YLWVk3E/maxresdefault.jpg

{Reactions}
üÜí (11) üëå (7) üëè (7) yassinkomodo Komodo (6) 

[27-Oct-18 01:39 PM] Alright#0419
@jl777c can I make a PR to remove this? Chat dapp polls for new messages at the moment, and it spams the crap out of the stdout


[27-Oct-18 01:40 PM] Alright#0419
https://github.com/jl777/komodo/blob/b9fefbfa06f3803301e598b742ba79c7feca732c/src/cc/oracles.cpp#L669

{Embed}
https://github.com/jl777/komodo/blob/b9fefbfa06f3803301e598b742ba79c7feca732c/src/cc/oracles.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[27-Oct-18 01:40 PM] jl777c#5810
sure


[27-Oct-18 01:48 PM] Alright#0419
done


[27-Oct-18 01:48 PM] Alright#0419
Will be looking into making it event based rather than constantly polling for new messages


[27-Oct-18 01:49 PM] Alright#0419
thinking something like walletnotify may work, haven't tried it yet


[29-Oct-18 02:07 AM] TonyL#3577
Will follow @gcharang suggestion and separate gateway operator and user parts:
Gateways creating process seems to be covered (let's call it an operator part): 
https://github.com/tonymorony/cryptoconditions_tui/blob/master/gateways_tui.py
This time I've added more validations (e.g. you'll be notified if oracle, token and coin ticker names aren't equal) and also multisig should be supported since it's working with custom M N.
Would be great if someone test on his side for gateway creating process @Mihailo @SHossain or anyone else

{Embed}
https://github.com/tonymorony/cryptoconditions_tui/blob/master/gateways_tui.py
tonymorony/cryptoconditions_tui
Terminal user interfaces for Komodo CryptoConditions smart-contracts - tonymorony/cryptoconditions_tui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[29-Oct-18 02:25 AM] TonyL#3577
On my side seems worked for M N 1 1

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/506398187859476480/unknown.png


[29-Oct-18 02:46 AM] Mihailo#5902
@TonyL  I'll test it today, as it seems I finished multisig withdraw so want to test it from the begining

{Reactions}
üëç 

[29-Oct-18 02:48 AM] TonyL#3577
@Mihailo seems M N > 1 not working now smooth in TUI, debugging it and will push fix asap


[29-Oct-18 02:52 AM] jl777c#5810
maybe a pull request with all the  fixes?


[29-Oct-18 02:53 AM] Mihailo#5902
Yep, just one withdraw to let nodes sign it when all of them are running. i did it one by one


[29-Oct-18 03:30 AM] TonyL#3577
Fixed TUI `gatewaysbind` for M N > 1 (was a little bit tricky since gatewaysbind receiving pubkeys not as array but as separate parameters)


[29-Oct-18 03:31 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/506414794404790283/unknown.png

{Reactions}
üññ 

[29-Oct-18 03:35 AM] Mihailo#5902
@gcharang @TonyL Which document should I update with more info for gateway, the etherpad or ?


[29-Oct-18 03:38 AM] gcharang#6833
@Mihailo update the etherpad: http://pad.supernet.org/cc_gateways_guide I will go through your edits and edit the official doc after you give me the go ahead

{Reactions}
üëç 

[29-Oct-18 04:19 PM] siu#3920
which chain are you guys using now?


[29-Oct-18 04:19 PM] siu#3920
the last one pinned has 0 connections üò¶


[29-Oct-18 11:30 PM] Alright#0419
@siu CCNG is spammed to hell, might want to make a new one


[30-Oct-18 02:29 AM] siu#3920
Ok.


[30-Oct-18 02:57 AM] xbis#8594
hi all))
i have started the node with params:
```
./src/komodod -ac_cc=1 -addressindex=1 -spentindex=1 -pubkey=02234de1d05bc694d23bbc378dc00f327ed4b9db6b55464bd98617523b34d653e9 -addnode=78.47.196.146 -daemon
```
and now try to run faucet cc:
```
./src/komodo-cli faucetinfo
```
the response says the funding is zero
please advise where I am wrong to run the faucet cc?


[30-Oct-18 02:59 AM] Deleted User#0000
doesnt look like you set any chain name or parameters?


[30-Oct-18 02:59 AM] Deleted User#0000
surprised it works at all tbh


[30-Oct-18 03:06 AM] xbis#8594
I was not trying to create a new assetchain but use the KMD


[30-Oct-18 03:07 AM] xbis#8594
is it possible?


[30-Oct-18 03:08 AM] Deleted User#0000
ther are no CC on KMD itself


[30-Oct-18 03:11 AM] xbis#8594
so i have to run 2 nodes and activate new assetchain?


[30-Oct-18 03:28 AM] Deleted User#0000
No just use an assetrchins with a faucet... KMDICE has a faucet


[30-Oct-18 03:28 AM] Deleted User#0000
check `komodo/src/assetchains.old` for the start parameter


[30-Oct-18 07:18 AM] xbis#8594
started with 
```
./src/komodod -pubkey=02234de1d05bc694d23bbc378dc00f327ed4b9db6b55464bd98617523b34d653e9 -ac_cc=1 -addressindex=1 -spentindex=1 -ac_name=KMDICE -addnode=78.47.196.146
```
but:
```
./src/komodo-cli -ac_name=KMDICE faucetinfo
{
  "result": "success",
  "name": "Faucet",
  "funding": "0.00000000"
}
```
shall I connect to another node? I could not find KMDICE start params in the assetchains.old ((


[30-Oct-18 07:21 AM] jl777c#5810
#kmdice channel purpose


[30-Oct-18 07:21 AM] jl777c#5810
./komodod -ac_name=KMDICE -ac_supply=10500000 -ac_reward=2500000000 -ac_halving=210000 -ac_cc=2 -addressindex=1 -spentindex=1 -addnode=144.76.217.232 &


[30-Oct-18 07:22 AM] jl777c#5810
if you dont use the right parameters, it is an entirely different chain


[31-Oct-18 06:11 AM] siu#3920
@TonyL hi


[31-Oct-18 06:11 AM] siu#3920
im trying to register to an oracle i made on KMDICE


[31-Oct-18 06:11 AM] siu#3920
this is the oracle: ```/komodo-cli -ac_name=KMDICE oraclesinfo 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f
{
  "result": "success",
  "txid": "322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f",
  "name": "GREETING",
  "description": "Oracle to greet any new member",
  "format": "S",
  "marker": "RDM3PJyq1iZotsG19x4zzEKVT5hUcTR6G7",
  "registered": [
  ]
```


[31-Oct-18 06:11 AM] siu#3920
but when i register, i get this: ```./komodo-cli -ac_name=KMDICE oraclesregister 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f 0.001
{
  "result": "error",
  "error": "couldnt register with oracle txid"
}
```


[31-Oct-18 06:13 AM] siu#3920
i need to subscribe first?


[31-Oct-18 06:13 AM] siu#3920
seems so


[31-Oct-18 06:15 AM] siu#3920
nope, seems like that was not it.


[31-Oct-18 06:18 AM] jl777c#5810
how much funds do you have in your -pubkey address


[31-Oct-18 06:19 AM] siu#3920
[
      "RLLnkPKcUMgA6nbx9bMdDz4F5341PdrvV4",
      862.38492184,
      ""
    ]


[31-Oct-18 06:19 AM] siu#3920
more than enough i believe.


[31-Oct-18 06:22 AM] jl777c#5810
maybe @Mihailo can help you solve this, might be a bug


[31-Oct-18 06:22 AM] siu#3920
```datafee must be txfee or more
datafee must be txfee or more

```


[31-Oct-18 06:22 AM] siu#3920
thisis the output of the console


[31-Oct-18 06:23 AM] siu#3920
but even trying with 1 as datafee, it doesnt approve ```./komodo-cli -ac_name=KMDICE oraclesregister 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f 1
{
  "result": "error",
  "error": "couldnt register with oracle txid"
}
```


[31-Oct-18 06:23 AM] siu#3920
i do remember in the past i had to specify datafee and subscribe fee in `oraclescreate` but seems like that is not in the options of the current help menu


[31-Oct-18 06:24 AM] jl777c#5810
maybe specify it in satoshis


[31-Oct-18 06:24 AM] gcharang#6833
datafee in satoshis


[31-Oct-18 06:24 AM] siu#3920
ahh


[31-Oct-18 06:24 AM] gcharang#6833
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=821923243

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Available RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pubk...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[31-Oct-18 06:24 AM] siu#3920
yep, that was it üòÉ


[31-Oct-18 06:25 AM] siu#3920
im diving again into this after a couple of weeks out of the loop, thanks


[31-Oct-18 06:27 AM] jl777c#5810
it does seem it should be in coins ,not sure why it is silly


[31-Oct-18 06:41 AM] TonyL#3577
Yep, at the moment registration datafee is in satoshies but subscription fee is in coins


[31-Oct-18 06:42 AM] jl777c#5810
it seems wrong


[31-Oct-18 06:42 AM] TonyL#3577
Highlighted it in latest TUI but first version robbed people üòÉ


[31-Oct-18 06:43 AM] jl777c#5810
if this is changed then everything that uses it needs to be changed...


[31-Oct-18 06:44 AM] TonyL#3577
So best time to change it is yesterday while not much dAPPs built on top of it üòÉ


[31-Oct-18 06:44 AM] jl777c#5810
yes, lets ask @Mihailo  to do this üòÉ


[31-Oct-18 06:47 AM] jl777c#5810
if we are ok with forcing datafee > 1.0 to use satoshis, I can make it so anything less than 1.0 uses floating point


[31-Oct-18 06:49 AM] TonyL#3577
Is it ok by consensus to make both in satoshies? I think in such way people definitely will know what they do when sending fee and add a lot of zeros


[31-Oct-18 06:49 AM] jl777c#5810
pushed a mostly backward compatible fix


[31-Oct-18 06:50 AM] jl777c#5810
if floating point fee < 1.0 is used, it is parsed as floating point

{Reactions}
üëå 

[31-Oct-18 06:54 AM] Mihailo#5902
@TonyL @jl777c  I have added this issue in my to-do. The only reason I have not done it yet is that oracles is used already in some AC so we need to notify others about this, so I pushed it in a queue üòâ


[31-Oct-18 06:55 AM] jl777c#5810
my fix should work for all usages where datafee is less than 100 million sats

{Reactions}
üëç (2) 

[31-Oct-18 07:44 AM] siu#3920
Hi guys


[31-Oct-18 07:44 AM] siu#3920
i made this script to create a gpg encrypted message and upload it to an oracle


[31-Oct-18 07:44 AM] siu#3920
```gpg=$(gpg -aer Chainmakers)
count=$(echo -n $gpg | wc -c | xxd -b -p)
bits=$(echo -e $gpg | xxd -b -p | tr -d '\n')
hexstring=$(echo $count$bits)
```


[31-Oct-18 07:45 AM] siu#3920
the output was this: ```3533370a2d2d2d2d2d424547494e20504750204d4553534147452d2d2d2d2d2056657273696f6e3a20476e755047207631206851454d41303458334e4d5a646f576d4151662f65722b487537336254637475424c4c795378756b2f4f416e7148755a626b4f79562b563547436e484c66436e20686d37503852776d5773486b4530586f6e2f6b32574962794c4a48315772687a4b384e714d39585665537247585a7130554f6453566577736a4f7a5971774e4720757a46744d4f414f426d5043473533383941585865774a496577664a4a574a4556463144634a6b71504167354e504d564f6b706854763848524e72637766544c206a634b31624c434b3158724c76306574475a48357a67574d304c397a2f684a6f7557746174642f42413634314d5961387a41707950386e4c6a3554547471563420694b57566e325042566d355841433345777039764e5633686c377170523153312b59437767616f306e3866622b44664b6368395a716f4d6c4d4c566552445155206d426c68354f59327a636c44576e68506750653758376f79686b31374276627542662b4971617431554e4a424161626a642b73454f376d5462434f6b4d58576120492f777a2b736b462b5a6a745453447034785a7761736f386f787463355070534d37457341357634446a6438316c6847674271667655673552517450394f736220494d413d203d756f5874202d2d2d2d2d454e4420504750204d4553534147452d2d2d2d2d0a```


[31-Oct-18 07:45 AM] siu#3920
it should have the number of characters first `353337`


[31-Oct-18 07:46 AM] siu#3920
ahh, i think what the issue is... that 0 after `353337`


[31-Oct-18 07:54 AM] siu#3920
is this conversion correct for using it on the hexstring? ```echo 537 | xxd -b -p
3533370a```


[31-Oct-18 07:54 AM] siu#3920
@jl777c


[31-Oct-18 07:55 AM] jl777c#5810
that is a lot of characters


[31-Oct-18 07:55 AM] siu#3920
it does translate to 537 but the 0a at the end seem to be incorrect


[31-Oct-18 07:55 AM] jl777c#5810
like 1 billion


[31-Oct-18 07:56 AM] siu#3920
hmm


[31-Oct-18 07:56 AM] siu#3920
so the correct hex translation should be: `0219`


[31-Oct-18 07:56 AM] siu#3920
?


[31-Oct-18 07:56 AM] jl777c#5810
that seems sane


[31-Oct-18 07:56 AM] jl777c#5810
around 550


[31-Oct-18 08:06 AM] siu#3920
dont seem to be able to publish it correctly


[31-Oct-18 08:06 AM] siu#3920
it still appear as if the oracle is empty


[31-Oct-18 08:30 AM] siu#3920
Can someone help on the right way to count and convert on bash? Im using xxd but it doesnt seem to be getting the right conversion or im doing something wrong


[31-Oct-18 08:31 AM] siu#3920
Or there is an issue with 'S' format


[31-Oct-18 08:35 AM] siu#3920
Btw. Im using kmdice in FSM branch


[31-Oct-18 08:45 AM] siu#3920
@TonyL @Mihailo


[31-Oct-18 08:55 AM] Mihailo#5902
@siu You want to convert decimal to hex bytes?#3920


[31-Oct-18 08:56 AM] siu#3920
Yes. I think im doing it already but it seems to be wrong since the data is not published


[31-Oct-18 09:05 AM] siu#3920
can someone try to recreate the oracle and see if they can get the data to be submitted?


[31-Oct-18 09:22 AM] Mihailo#5902
So the conversion to hex is good, but it won't post to oracle?


[31-Oct-18 09:24 AM] siu#3920
i think so.


[31-Oct-18 09:24 AM] siu#3920
I have tried different hex conversions just in case, but nothing seems to be working


[31-Oct-18 09:24 AM] Mihailo#5902
@TonyL @SHossain  Here is PR https://github.com/jl777/komodo/pull/924 for multisig withdraw working. If you have time, please test it. It is very fragile, very easy to make something wrong. Also can you please test 1of1 withdraw so that I did not break something. Did not catch time to create another 1of1 gateway.

{Embed}
https://github.com/jl777/komodo/pull/924
Multi signature gateways fix by Mixa84 ¬∑ Pull Request #924 ¬∑ jl7...
Completed multisig withdraw
Fixed oraclefeed for multisig withdraw
Fixed GatewaysPendingWithdraws
Small fixes
https://images-ext-2.discordapp.net/external/5PP5Rc1dp6Lo2v8nwnTvQmRdaXpEf9xjHeMr0XyppBs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/39563265

{Reactions}
üëå 

[31-Oct-18 09:24 AM] Mihailo#5902
@siu let me check the S format, also could you send me the error when trying to post data to oracle?


[31-Oct-18 09:31 AM] siu#3920
there is no error, it just doesnt print the data like expected


[31-Oct-18 09:32 AM] Mihailo#5902
@siu Can you give me the output that is wrong?


[31-Oct-18 09:41 AM] siu#3920
```./komodo-cli -ac_name=KMDICE oraclesdata 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f 000D484f4c41204120544f444f5321{
  "result": "success",
  "hex": "01000000030fc7c190f6cf0665129c68eab2e5705be6aee59f198c0fe9aa855249eadf5d2c030000004948304502210096fb0b9293aa2e63d80c79a88fc2f8a2c4c4b5e3395be3dbe121ec1ef30122410220078d3cabbe6c54259506e94dcb96f096c3c29c915385b6dbce8059d10cd5589901ffffffff0fc7c190f6cf0665129c68eab2e5705be6aee59f198c0fe9aa855249eadf5d2c010000007b4c79a276a072a26ba067a5658021034b608727882fd96b4545e3b68d2896efa4962db8ac893e4387cd09accda4756b8140aa17d6ba3ecddffd6c4ecfb2788b16147a2d56cc34eeb4253583ff6c7d2391d544137e5a9ca225c757d2578fb6b648b42e903834b1a8ee7b8bd079a87757327ca100af038001eca10001ffffffff0fc7c190f6cf0665129c68eab2e5705be6aee59f198c0fe9aa855249eadf5d2c000000007b4c79a276a072a26ba067a565802102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b2081400e921410e75978f0a0f0fa460676b038dc2d991cf676a25cf309d6288031ae68373116c8200e8d9489dfe70bd70fa3f999ea309966d795311e9185eaa36c9281a100af038001eca10001ffffffff05e0570e0000000000302ea22c802086c9e5a0136fbce5e29e812b5a02fe49854dc98980bfad019e5c6de15eb2adbb8103120c008203000401cc1027000000000000302ea22c80201fb046c3f947df56c48fe5a091f14fe4d3a7fba7f6fd906447f31243f05e29528103120c008203000401cc1027000000000000232102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b20acb832290000000000232102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b20ac0000000000000000776a4c74ec446f0712472889c4b42906e2d61f85ded402f2dca5f278bb59e4f30156c5d02d320fc7c190f6cf0665129c68eab2e5705be6aee59f198c0fe9aa855249eadf5d2c2102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b200f000d484f4c41204120544f444f532100000000"```


[31-Oct-18 09:41 AM] siu#3920
```./komodo-cli -ac_name=KMDICE sendrawtransaction 01000000030fc7c190f6cf0665129c68eab2e5705be6aee59f198c0fe9aa855249eadf5d2c030000004948304502210096fb0b9293aa2e63d80c79a88fc2f8a2c4c4b5e3395be3dbe121ec1ef30122410220078d3cabbe6c54259506e94dcb96f096c3c29c915385b6dbce8059d10cd5589901ffffffff0fc7c190f6cf0665129c68eab2e5705be6aee59f198c0fe9aa855249eadf5d2c010000007b4c79a276a072a26ba067a5658021034b608727882fd96b4545e3b68d2896efa4962db8ac893e4387cd09accda4756b8140aa17d6ba3ecddffd6c4ecfb2788b16147a2d56cc34eeb4253583ff6c7d2391d544137e5a9ca225c757d2578fb6b648b42e903834b1a8ee7b8bd079a87757327ca100af038001eca10001ffffffff0fc7c190f6cf0665129c68eab2e5705be6aee59f198c0fe9aa855249eadf5d2c000000007b4c79a276a072a26ba067a565802102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b2081400e921410e75978f0a0f0fa460676b038dc2d991cf676a25cf309d6288031ae68373116c8200e8d9489dfe70bd70fa3f999ea309966d795311e9185eaa36c9281a100af038001eca10001ffffffff05e0570e0000000000302ea22c802086c9e5a0136fbce5e29e812b5a02fe49854dc98980bfad019e5c6de15eb2adbb8103120c008203000401cc1027000000000000302ea22c80201fb046c3f947df56c48fe5a091f14fe4d3a7fba7f6fd906447f31243f05e29528103120c008203000401cc1027000000000000232102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b20acb832290000000000232102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b20ac0000000000000000776a4c74ec446f0712472889c4b42906e2d61f85ded402f2dca5f278bb59e4f30156c5d02d320fc7c190f6cf0665129c68eab2e5705be6aee59f198c0fe9aa855249eadf5d2c2102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b200f000d484f4c41204120544f444f532100000000
e996d911fd4a1f6f533d5127708e59c796e71fd400813c5c13ffaaa9b5fac4ab```


[31-Oct-18 09:41 AM] siu#3920
```./komodo-cli -ac_name=KMDICE oraclessamples 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f e996d911fd4a1f6f533d5127708e59c796e71fd400813c5c13ffaaa9b5fac4ab 10{
  "result": "success",
  "samples": [
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ]
  ]
}
```


[31-Oct-18 09:44 AM] siu#3920
i also tried before this: ```./komodo-cli -ac_name=KMDICE oraclesdata 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f 3133484f4c41204120544f444f5321```


[31-Oct-18 09:44 AM] siu#3920
which resulted in this: ```./komodo-cli -ac_name=KMDICE sendrawtransaction 0100000003b5c70f3eea7ae6630ffac8ef3681ce67011f353ba5825feb52ba90d01d574b2c0300000048473044022052f04fecdbc5d7b60094c7245f62246046b1112d4ec4940deb99803a281f6fa002200b0ff1894d0d5f5fb29a1d54e977e2e0fa32e15d56545b81ce59866c9dfe17d901ffffffffb5c70f3eea7ae6630ffac8ef3681ce67011f353ba5825feb52ba90d01d574b2c010000007b4c79a276a072a26ba067a5658021034b608727882fd96b4545e3b68d2896efa4962db8ac893e4387cd09accda4756b8140825d1eb530a8ef4396ada0b8da72c2d182725ab82c209efc0f6aaf3c7e7a5c577eed612cd96710a2066075f9c7e1e7a5531d0a611a19e30d9dc5b5ee79d8cb5da100af038001eca10001ffffffffb5c70f3eea7ae6630ffac8ef3681ce67011f353ba5825feb52ba90d01d574b2c000000007b4c79a276a072a26ba067a565802102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b2081405aa41171b7d7a03219507b77259f3ebd821451f11a9ac7084de6b835616132cb766bdc21b5237292b5e5bf9ee3adc38e4708d86fc85e52de59f282fe7abe1f52a100af038001eca10001ffffffff05f07e0e0000000000302ea22c802086c9e5a0136fbce5e29e812b5a02fe49854dc98980bfad019e5c6de15eb2adbb8103120c008203000401cc1027000000000000302ea22c80201fb046c3f947df56c48fe5a091f14fe4d3a7fba7f6fd906447f31243f05e29528103120c008203000401cc1027000000000000232102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b20acc859290000000000232102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b20ac0000000000000000776a4c74ec446f0712472889c4b42906e2d61f85ded402f2dca5f278bb59e4f30156c5d02d32b5c70f3eea7ae6630ffac8ef3681ce67011f353ba5825feb52ba90d01d574b2c2102a02f2b7904381bcc0b53a701ed69a3c68a7f4ee5c35dbedca329ca6c05203b200f3133484f4c41204120544f444f532100000000
2c5ddfea495285aae90f8c199fe5aee65b70e5b2ea689c126506cff690c1c70f
```


[31-Oct-18 09:44 AM] siu#3920
but still: ```./komodo-cli -ac_name=KMDICE oraclessamples 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f 2c5ddfea495285aae90f8c199fe5aee65b70e5b2ea689c126506cff690c1c70f 10{
  "result": "success",
  "samples": [
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ]
  ]
}
```


[31-Oct-18 09:47 AM] siu#3920
@Mihailo


[31-Oct-18 09:48 AM] Mihailo#5902
@siu ok I see it


[31-Oct-18 09:48 AM] Mihailo#5902
Ill take a look


[31-Oct-18 10:05 AM] Mihailo#5902
@siu I think I found bug in oraclesamples, but need littlebit more time to figure it out. I'll fix this tomorrow as here is getting late.
BTW has any oraclessamples worked before. By looking at this bug it seems to me that it will return empty data all the time.


[31-Oct-18 10:06 AM] siu#3920
at the start of the oracles cc development i was able to submit data and view it


[31-Oct-18 10:06 AM] Mihailo#5902
OK, so it is working for other formats


[31-Oct-18 10:06 AM] siu#3920
then on a update made it started to publish the data, but that was when james was deep on developing gateways cc


[31-Oct-18 10:07 AM] siu#3920
i took a break from testing it and now im trying to use it again and it seems the issue is still there.


[31-Oct-18 10:07 AM] siu#3920
i think we need to test and make sure which formats are working and which not.


[31-Oct-18 10:08 AM] siu#3920
seems like while gateways was being done, some changes affected some oracles formats


[31-Oct-18 10:08 AM] Mihailo#5902
Let me check for S format again


[31-Oct-18 10:15 AM] siu#3920
ok


[31-Oct-18 10:27 AM] Mihailo#5902
@jl777c Is for S format in the two first bytes the length of the following data?


[31-Oct-18 10:28 AM] jl777c#5810
yes, little endian


[31-Oct-18 10:29 AM] Mihailo#5902
@siu It seems it is not a bug at all. You must make the string in S format so that first two bytes contain the length of next bytes. In little endian format üòâ


[31-Oct-18 10:29 AM] Mihailo#5902
So this is wrong 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f


[31-Oct-18 10:30 AM] Mihailo#5902
2d32 = 11570 üòâ


[31-Oct-18 10:30 AM] Mihailo#5902
That is what I got for length ...


[31-Oct-18 10:30 AM] Mihailo#5902
So just for S and D formats yu must put 2 bytes for length first


[31-Oct-18 10:31 AM] Mihailo#5902
All other get plain data


[31-Oct-18 10:31 AM] siu#3920
ok, so its little endian


[31-Oct-18 10:32 AM] siu#3920
thanks. Let me see what i can get


[31-Oct-18 10:32 AM] Mihailo#5902
@siu You're welcome üòâ


[31-Oct-18 10:32 AM] siu#3920
thanks a lot üòÉ


[31-Oct-18 10:33 AM] siu#3920
i still struggle with this


[31-Oct-18 10:34 AM] Mihailo#5902
@TonyL @SHossain If anything is unclear for multisig gateway ping me please and I'll explain how to use it. Also if you find something missing in gateway doc please add it üòâ

{Reactions}
üëå 

[31-Oct-18 10:34 AM] Mihailo#5902
Over and out for today üòÉ


[31-Oct-18 10:39 AM] siu#3920
@Mihailo what the number should be if this is the hex of the message? `84f4c41204120544f444f5321`


[31-Oct-18 10:40 AM] Mihailo#5902
If I counted good there are 25 chars so it should be 1900 and then the hex


[31-Oct-18 10:41 AM] Mihailo#5902
I think ;)


[31-Oct-18 10:43 AM] siu#3920
no luck


[31-Oct-18 10:44 AM] siu#3920
sorry, this is the message i want to send: `486f6c612c2073616c75646f73206120746f646f73a`


[31-Oct-18 10:44 AM] siu#3920
that one was incomplete


[31-Oct-18 10:44 AM] siu#3920
the first one i posted


[31-Oct-18 10:45 AM] Mihailo#5902
Sorry mybad


[31-Oct-18 10:45 AM] Mihailo#5902
You need to put 0x19 as first byte


[31-Oct-18 10:46 AM] Mihailo#5902
So it is char woth aaci code 25


[31-Oct-18 10:46 AM] siu#3920
but that seems binary format, right?


[31-Oct-18 10:46 AM] Mihailo#5902
Yep


[31-Oct-18 10:46 AM] Mihailo#5902
So first char should be 0x19 and second 0


[31-Oct-18 10:47 AM] Mihailo#5902
@jl777c can this be done over rpc?


[31-Oct-18 10:49 AM] jl777c#5810
the count is part of the hexstring


[31-Oct-18 10:50 AM] Mihailo#5902
Yes but if len is taking the first char and second char, how can you put 2nd char 0?


[31-Oct-18 10:50 AM] jl777c#5810
0x1900.......


[31-Oct-18 10:53 AM] Mihailo#5902
But when inputing in rpc?


[31-Oct-18 10:54 AM] Mihailo#5902
If you write 1900blablabla then the firdt byte is char with asci code 1. Correct me if i'm wrong


[31-Oct-18 10:54 AM] Mihailo#5902
I'm not looking at the code rightnow


[31-Oct-18 10:55 AM] jl777c#5810
you submit a hex string to the rpc


[31-Oct-18 10:56 AM] Mihailo#5902
I'll ve back in 10 minutes


[31-Oct-18 11:05 AM] siu#3920
```echo 22 | xxd -b -ps
32320a```


[31-Oct-18 11:12 AM] Mihailo#5902
@jl777c Ah yes, now I see ParseHex, so hex string is put in bytes as two chars are one hex (byte)


[31-Oct-18 11:12 AM] Mihailo#5902
@siu This echo 22 does not look ok in hex


[31-Oct-18 11:13 AM] Mihailo#5902
22 decimal is 16 hex


[31-Oct-18 11:14 AM] Mihailo#5902
But for this hex `84f4c41204120544f444f5321` I gave wrong length as I thought one char is one byte


[31-Oct-18 11:15 AM] Mihailo#5902
This is basically 13 bytes, so I think your final hex should be `0d0084f4c41204120544f444f5321`


[31-Oct-18 11:16 AM] Mihailo#5902
25 chars long hex needs 13 bytes (26 chars long hex) to store it


[31-Oct-18 11:17 AM] siu#3920
```echo "obase=16; 22" | bc
16```


[31-Oct-18 11:27 AM] Mihailo#5902
@siu use this to convert string to hex string:
```
printf TestString | xxd -ps
```


[31-Oct-18 11:27 AM] Mihailo#5902
or echo -n


[31-Oct-18 11:27 AM] Mihailo#5902
As echo adds implicit newline


[31-Oct-18 11:27 AM] Mihailo#5902
Then calculate length and convert to hex in calculator


[31-Oct-18 11:28 AM] siu#3920
i know for example that 22 in hex is 16  but then to attach it to the hex of the string i just add 16 before the string?


[31-Oct-18 11:29 AM] siu#3920
that is the part that confuses me.


[31-Oct-18 11:29 AM] Mihailo#5902
1600, remmber two bytes. 16 is one, 00 is second


[31-Oct-18 11:29 AM] siu#3920
thanks for the -n tip btw.


[31-Oct-18 11:30 AM] siu#3920
but this wont work? ```echo -n 22 | xxd -ps
3232```


[31-Oct-18 11:31 AM] Mihailo#5902
Ok so if you want to write string 22 into oracle data then you would to that and because that is two byte hex you wil write in the end: `02003232`


[31-Oct-18 11:31 AM] Mihailo#5902
So append length of given hex string in the beginning in little endian order


[31-Oct-18 11:32 AM] siu#3920
no, i mean, im trying to automate the lenght calculation and the convertion to hex afterwards


[31-Oct-18 11:32 AM] Mihailo#5902
if you have AABBCCDDEEFF hex string, then you write `0600AABBCCDDEEFF`


[31-Oct-18 11:32 AM] Mihailo#5902
Oke


[31-Oct-18 11:32 AM] Mihailo#5902
Then just a sec


[31-Oct-18 11:32 AM] siu#3920
so its something like `echo -n "Hello, World" | wc -c`


[31-Oct-18 11:33 AM] siu#3920
which is 12


[31-Oct-18 11:33 AM] siu#3920
then do: ```echo -n "Hello, World" | xxd -ps
48656c6c6f2c20576f726c64```


[31-Oct-18 11:34 AM] siu#3920
then ```echo "obase=16; 12" | bc
C```?


[31-Oct-18 11:35 AM] siu#3920
so final hex would be `0c0048656c6c6f2c20576f726c64`?


[31-Oct-18 11:43 AM] Mihailo#5902
Here is shell script:
```bash
#!/bin/sh
hex=$(printf "$1" | xxd -ps)
echo ${#1}$hex
```


[31-Oct-18 11:43 AM] Mihailo#5902
so just start with the string you want it to be converted


[31-Oct-18 11:44 AM] Mihailo#5902
```
$ ./dataconvert.sh "22"
23232
$ ./dataconvert.sh "Hello world"
1148656c6c6f20776f726c64
```


[31-Oct-18 11:45 AM] Mihailo#5902
Sorry, one mistake


[31-Oct-18 11:45 AM] Mihailo#5902
the length


[31-Oct-18 11:45 AM] Mihailo#5902
just a sec


[31-Oct-18 12:01 PM] Mihailo#5902
Here is final script:
```bash
#!/bin/sh
hex=$(printf "$1" | xxd -ps)
len=$(printf "%.4x" ${#1} | tac -rs ..)
echo $len$hex
```


[31-Oct-18 12:02 PM] Mihailo#5902
@siu so this will convert any string to what you need


[31-Oct-18 12:02 PM] Mihailo#5902
```
$./dataconvert.sh "22"
02003232
$ ./dataconvert.sh "Hello world"
0B0048656c6c6f20776f726c64
```


[31-Oct-18 12:03 PM] siu#3920
hhmm interesting


[31-Oct-18 12:03 PM] siu#3920
let me try


[31-Oct-18 12:09 PM] siu#3920
pardon my ignorance but what does ${#1} stand for?


[31-Oct-18 12:09 PM] siu#3920
pull $1?


[31-Oct-18 12:10 PM] Mihailo#5902
It gives the length of variable $1


[31-Oct-18 12:10 PM] Mihailo#5902
$1 is in bash the first argument when called


[31-Oct-18 12:10 PM] Mihailo#5902
and ${#1} gives length of chars of $1


[31-Oct-18 12:10 PM] siu#3920
ok, so if the message is pulled from another variable, lets say gpg i should use ${#gpg}?


[31-Oct-18 12:14 PM] siu#3920
yep, thanks! let me see if it publishes correctly


[31-Oct-18 12:14 PM] Mihailo#5902
I think you must set a variable to get its length


[31-Oct-18 12:15 PM] Mihailo#5902
I'm looking if it can be done in one line


[31-Oct-18 12:15 PM] Mihailo#5902
But where are you using this, maybe easier with shell script?


[31-Oct-18 12:15 PM] siu#3920
finally!


[31-Oct-18 12:15 PM] siu#3920
```./komodo-cli -ac_name=KMDICE oraclessamples 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f 09ba1642628068b51813955660e334d5947ff41266e2dc79d927127c90609d7d 10
{
  "result": "success",
  "samples": [
    [
      "-----BEGIN PGP MESSAGE----- Version: GnuPG v1 hQEMA04X3NMZdoWmAQf/UeVNPHIaoZ48nsWSikNnqS3ztqbNMH0qKq0nBhHfvrGL RxaYDaJ9SneqZzgayzb6cQq0oSq0OdZQOGhJ5CGrR9rkMFGV5DmwfiLf/9jh6Gnv ordAkDZc2i8sDfnIH0/QWxnLZqT2+PFdg0W7R35aKvQIByMZSELvQieb9bc1lef7 6cbp6I0Xz5TWugk0zWhcTYoa7ZDQDB7ELIYm0wmQ1X9/BEIQahhIRy1ESXgos4Ws TB6vDmdsuxXmS4YEHNsT5+l5Z4YieQmq+a7fogcQYrYfwvjAgXGBiLdLo7CISWmf pTdNcgj21++5s7eLj/hhRyXEebT5YAcAX1Pnp1fvaNJDARE3cDnDIliV2NJWrBt7 9dORimJ4ZlhzonU1YegfVMCDuMzl+DZHcbUdooCPzG+5xXtWII3+jTfnZy00/Mug KiKhlg== =AqoL -----END PGP MESSAGE-----\n"
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ],
    [
    ]
  ]
}
```

{Reactions}
üëç üëè (2) 

[31-Oct-18 12:15 PM] Mihailo#5902
You can do it like this `echo -n hello | wc -m`


[31-Oct-18 12:15 PM] Mihailo#5902
It will give you 5


[31-Oct-18 12:20 PM] Mihailo#5902
Whole line for length could be this `echo -n hello | wc -m | xargs printf "%.4x" | tac -rs ..`


[31-Oct-18 12:37 PM] siu#3920
great! its working!!!


[31-Oct-18 12:38 PM] siu#3920
```#! /bin/bash

gpg=$(gpg -aer Chainmakers)
count=$(printf "%.4x" ${#gpg} | tac -rs .. | echo "$(tr -d '\n')")
#count=$(echo -n $gpg | wc -c | xxd -b -p)
bits=$(echo -e $gpg | xxd -b -p | tr -d '\n')
echo $count$bits
cd ~/komodo/src
hex=$(echo $(./komodo-cli -ac_name=KMDICE oraclesdata 322dd0c55601f3e459bb78f2a5dcf202d4de851fd6e20629b4c489284712076f $count$bits | jq '.hex' ))
rawtx=$(echo "${hex:1: -1}")
./komodo-cli -ac_name=KMDICE sendrawtransaction $rawtx
```


[31-Oct-18 12:38 PM] siu#3920
This will upload a encrypted message to the oracle specified


[31-Oct-18 01:12 PM] Mihailo#5902
üëç


[31-Oct-18 01:12 PM] Mihailo#5902
Btw you can delete | echo "$(tr -d '\n')" from the command


[31-Oct-18 01:13 PM] Mihailo#5902
It is unneccessary


[31-Oct-18 01:13 PM] Mihailo#5902
I removed it above


[31-Oct-18 01:26 PM] siu#3920
thanks!


[31-Oct-18 01:26 PM] siu#3920
```~/CoquiCash/src$ ./coqui-cli oraclessamples 94f1fccdc3a122f3a611144a4b243f2ebc3416f5e0bcd762a39f176f12d3719c eb5d34bc49a79d8502559855741b35da789eef5e00a684ad01d7dd5801930b14 1
{
  "result": "success",
  "samples": [
    [
      "Hoy 31 de Octubre de 2018 se cumplen 10 a√±os de la publicaci√≥n del ensayo seminal sobre Bitcoin escrito por Satoshi Nakamoto. Estamos celebrando una d√©cada de cambio tecnol√≥gico sin precedentes. Felicida"
    ]
  ]
}
```

{Reactions}
üëå (3) 

[31-Oct-18 01:26 PM] siu#3920
First oracle message written in COQUI Cash üòÉ


[31-Oct-18 01:27 PM] siu#3920
celebrating the 10 year anniversary of Bitcoin üòÉ

{Reactions}
rum (5) 

[01-Nov-18 08:30 AM] siu#3920
I think that s format is not workin @Mihailo @jl777c


[01-Nov-18 08:30 AM] Mihailo#5902
What is it now üòõ ?


[01-Nov-18 08:31 AM] siu#3920
i used exactly the same setup i did for writting encrypted messages on  S format but in s and it doesnt print the text


[01-Nov-18 08:31 AM] siu#3920
even when its just a number (text string)


[01-Nov-18 08:31 AM] Mihailo#5902
s does not use length in front


[01-Nov-18 08:31 AM] jl777c#5810
you need to use one byte length instead of 2 bytes


[01-Nov-18 08:31 AM] Mihailo#5902
YEs


[01-Nov-18 08:31 AM] Mihailo#5902
It uses one byte


[01-Nov-18 08:31 AM] siu#3920
üò¨


[01-Nov-18 08:31 AM] Mihailo#5902
Instead of two


[01-Nov-18 08:31 AM] siu#3920
ok... so just 2 digits


[01-Nov-18 08:31 AM] Mihailo#5902
's' -> <256 char string
  'S' -> <65536 char string


[01-Nov-18 08:32 AM] Mihailo#5902
for 256 chars you need one byte for length


[01-Nov-18 08:32 AM] Mihailo#5902
for 65536 you need two bytes


[01-Nov-18 08:32 AM] Mihailo#5902
Yep


[01-Nov-18 08:32 AM] siu#3920
that was it. :/


[01-Nov-18 08:32 AM] Mihailo#5902
so u can use printf %.2x


[01-Nov-18 08:32 AM] Mihailo#5902
And there is no need for little endian


[01-Nov-18 08:32 AM] Mihailo#5902
as it is one byte


[01-Nov-18 08:32 AM] siu#3920
ok, anyway... i got the house balance feed running in S


[01-Nov-18 08:32 AM] Mihailo#5902
so just printf %.2x


[01-Nov-18 08:32 AM] siu#3920
i guess its not much difference


[01-Nov-18 08:33 AM] Mihailo#5902
Same for binary data:
```
  'd' -> <256 binary data
  'D' -> <65536 binary data
```


[01-Nov-18 08:34 AM] siu#3920
```./komodo-cli -ac_name=KMDICE oraclessamples 19360b904978e482f0743229a917dada10d7188c2cf0ad688d519d28afc65388 07d3bb4ff1d821e3f90afede420cebf8872d093aa42223bec2f62a564d1e2542 10
{
  "result": "success",
  "samples": [
    [
      "1046132578610849"
    ],
    [
      "1046132578610849"
    ],
    [
      "1046132578610849"
    ],
    [
      "1046132568610849"
    ],
    [
      "1046132558610849"
    ],
    [
      "1046132558610849"
    ],
    [
      "1046132558610849"
    ],
    [
      "1046132558610849"
    ],
    [
      "1046132558610849"
    ],
    [
      "1046132558610849"
    ]
  ]
}
```


[01-Nov-18 08:35 AM] siu#3920
@Mihailo do you think it would be possible to do a bet cc based on this data?


[01-Nov-18 08:35 AM] Mihailo#5902
How do you mean?


[01-Nov-18 08:35 AM] siu#3920
binary options based on the balance of the house at a given time


[01-Nov-18 08:36 AM] siu#3920
Lets say... we make a bet that tomorrow balance will be >1046132558610849


[01-Nov-18 08:36 AM] siu#3920
you buy yes, i buy no


[01-Nov-18 08:36 AM] Mihailo#5902
Oh, you mean bet on the balance


[01-Nov-18 08:37 AM] siu#3920
yes


[01-Nov-18 08:37 AM] siu#3920
if balance is >1046132558610849 tomorrow then you win


[01-Nov-18 08:37 AM] Mihailo#5902
Well I do not see why it could not be done...


[01-Nov-18 08:37 AM] siu#3920
if its <1046132558610849 then i win


[01-Nov-18 08:38 AM] siu#3920
yes... but time


[01-Nov-18 08:38 AM] Mihailo#5902
But those bets need to be written on chain


[01-Nov-18 08:39 AM] jl777c#5810
i think some sort of bet CC is good to have, that can take inputs from the blockchain, which allows bets to be resolved based on oracles CC


[01-Nov-18 08:39 AM] jl777c#5810
but this would be after prices CC


[01-Nov-18 08:39 AM] jl777c#5810
which is a form of fancy betting


[01-Nov-18 08:39 AM] Mihailo#5902
I do not think to much time needs to implement this... But with every CC you must do correct validation and it always take some time.


[01-Nov-18 08:40 AM] jl777c#5810
yes, we are very close to having the oracles and gateways solid and that allows prices


[01-Nov-18 08:40 AM] jl777c#5810
and pegs, and 1:1 side chains


[01-Nov-18 08:40 AM] jl777c#5810
sometime after that a bet CC


[01-Nov-18 08:40 AM] jl777c#5810
maybe I can give it as a task to one of the new CC devs so if they get it done, then we get it sooner

{Reactions}
üëç 

[01-Nov-18 08:41 AM] siu#3920
cool


[01-Nov-18 08:41 AM] siu#3920
anyway, house balance feed is up and running.


[01-Nov-18 08:41 AM] siu#3920
if anyone needs it for experimentation


[01-Nov-18 01:50 PM] siu#3920
```couldnt find enough oracle inputs REo5RNfgzNJhah8EAzy6Phxrm4WgR8Tfr3, limit 1 per utxo
error code: -22
error message:
TX decode failed
```


[01-Nov-18 01:50 PM] siu#3920
when this happens is because another oracle message has not been confirmed yet, right?


[01-Nov-18 01:52 PM] Alright#0419
@siu not sure


[01-Nov-18 01:52 PM] Alright#0419
you can broadcast multiple oraclesdata in a single block from same publisher if you subscribe to it multiple times


[01-Nov-18 01:53 PM] Alright#0419
for example, chat dapp scripts will register an oracle then subscribe to it 10 times by default


[01-Nov-18 01:53 PM] Alright#0419
meaning user can send 10 messages(txs) per block


[01-Nov-18 02:18 PM] siu#3920
hah... interesting... didnt know that subscribing more times would allow for faster publications


[02-Nov-18 01:14 AM] Alright#0419
think of it like UTXOs


[02-Nov-18 01:59 AM] gcharang#6833
RPC and intro to Oracles contract: https://docs.komodoplatform.com/cc/contracts/oracles/introduction.html

{Reactions}
üòÄ (3) 

[02-Nov-18 03:40 AM] siu#3920
>think of it like UTXOs
 like mostly everything related to KMD üòÇ


[02-Nov-18 04:18 AM] jl777c#5810
not "like UTXO" they are UTXO


[02-Nov-18 04:29 AM] siu#3920
^^


[02-Nov-18 04:39 AM] OsTa#2589
Hello ! What is required to join the CC training? C++?


[02-Nov-18 04:46 AM] jl777c#5810
C/C++ is needed at this stage for making/customizing CC


[02-Nov-18 04:46 AM] jl777c#5810
using the CC via rpc can be done with any language that can issue cli/rpc calls


[02-Nov-18 08:41 AM] OsTa#2589
So that mean I can have some interaction on a CC with python but I can't write a contract right?


[02-Nov-18 08:42 AM] jl777c#5810
with python, you can use all the CC rpc calls, but not create new CC rpc calls


[02-Nov-18 08:42 AM] OsTa#2589
through the rpc calls


[02-Nov-18 08:42 AM] jl777c#5810
yes


[02-Nov-18 08:42 AM] OsTa#2589
ok clear


[02-Nov-18 08:42 AM] OsTa#2589
thanks


[02-Nov-18 08:44 AM] Alright#0419
@OsTa you can create a full dapps using oracles contract and python


[02-Nov-18 08:44 AM] Alright#0419
you can code the "consensus" rules into the dapp itself if they are not vital


[02-Nov-18 08:45 AM] Alright#0419
for example, the chat dapp has a special format for oracle names that will let it know it's a chat room


[02-Nov-18 08:45 AM] Alright#0419
and all versions of the dapp will agree on that format


[02-Nov-18 08:46 AM] Alright#0419
you can have a dapp that watches an oracle for updates and does anything you can write in python(or whatever language) based on what's pushed to the oracle

{Reactions}
üòç 

[02-Nov-18 08:48 AM] Alright#0419
https://github.com/StakedChain/StakedNotary/blob/master/oraclepush.sh
https://github.com/StakedChain/StakedNotary/blob/master/oraclefetch.sh
Here are scripts for pushing/fetching arbitrary jsons on chain

{Embed}
https://github.com/StakedChain/StakedNotary/blob/master/oraclepush.sh
StakedChain/StakedNotary
repo to launch and manage STAKED notary nodes. Contribute to StakedChain/StakedNotary development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759

{Embed}
https://github.com/StakedChain/StakedNotary/blob/master/oraclefetch.sh
StakedChain/StakedNotary
repo to launch and manage STAKED notary nodes. Contribute to StakedChain/StakedNotary development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[02-Nov-18 08:48 AM] Alright#0419
good place to start


[02-Nov-18 08:49 AM] OsTa#2589
@Alright thanks a lot ! I will look into in


[03-Nov-18 10:44 AM] TonyL#3577
Trollbox GUI seems ugly but testable.
Need volunteers to test installation and chatting üòÉ

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/508335803156660224/unknown.png


[03-Nov-18 10:45 AM] TonyL#3577
To start testing:
1) git clone https://github.com/tonymorony/trollbox_gui
2) sudo apt-get install python3 python3-pip libssl-dev
     pip3 install requests
     pip3 install wheel
     pip3 install kivy 
     pip3 install python-bitcoinlib
     pip3 install python-bitcoinrpc
3) Hardcode your RPC credentials here for chain on which you want to test (I'm using CCNG now - can share the details if needed): 
https://github.com/tonymorony/trollbox_gui/blob/master/main.py#L154
And run as python3 main.py
Then logic as in trollbox scripts (https://github.com/StakedChain/trollbox) - create nickname/oracle/subscribe if needed. 
There will nothing happen in gui on this actions in menu but you should see output in console

{Embed}
https://github.com/tonymorony/trollbox_gui
tonymorony/trollbox_gui
My plays with Python Kivy GUI framework and Stakedchain OraclesCC chat concept - tonymorony/trollbox_gui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Embed}
https://github.com/tonymorony/trollbox_gui/blob/master/main.py
tonymorony/trollbox_gui
My plays with Python Kivy GUI framework and Stakedchain OraclesCC chat concept - tonymorony/trollbox_gui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[03-Nov-18 02:16 PM] TonyL#3577
Found installation guide bad. Will publish new one asap


[03-Nov-18 03:01 PM] TonyL#3577
Testing conversation with @Alright was almost smooth beside of fact that he wasnt able to install GUI and used CLI Trollbox üòÇ

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/508400335258255361/unknown.png


[03-Nov-18 03:01 PM] Alright#0419
I really need some help figuring out the logic for a chat dapp history script. I don't really have a way of grabbing the latest oraclesdatas. The only way I can think of doing it is grabbing all messages that ever happened, sorting by timestamp then printing


[03-Nov-18 03:02 PM] Alright#0419
https://github.com/StakedChain/trollbox/blob/master/history.py
I have this, but it's very flawed because it grabs the last 10 messages from all publishers, sort them and prints them

{Embed}
https://github.com/StakedChain/trollbox/blob/master/history.py
StakedChain/trollbox
On chain real time chat for KMD assetchains. Contribute to StakedChain/trollbox development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[03-Nov-18 03:02 PM] Alright#0419
but that doesn't make any sense


[03-Nov-18 03:03 PM] Alright#0419
as if someone says 10 messages since another person said something, messages get cut off


[03-Nov-18 03:04 PM] Alright#0419
basically what I need to figure out is a way of grabbing the latest oraclesdata from *all* publishers


[03-Nov-18 03:04 PM] Alright#0419
but not by amount like oraclessamples is right now, rather based on when they happened


[03-Nov-18 03:05 PM] Alright#0419
that history script would work if I changed 10 to the number of messages the most active publisher has ever sent


[03-Nov-18 03:08 PM] Alright#0419
Would it be possible to add a number in oraclesinfo that shows the amount of `oraclesdata`s a publisher has ever done?


[03-Nov-18 04:15 PM] tolken#2655
Is every ‚Äúuser‚Äù a ‚Äúpublisher‚Äù ?


[03-Nov-18 04:20 PM] Alright#0419
yes


[03-Nov-18 04:23 PM] tolken#2655
Are all messages timestamped?


[03-Nov-18 04:24 PM] tolken#2655
Maybe if you give me some sample data that your script is operating on I can take a look tonight.


[03-Nov-18 04:28 PM] Alright#0419
message is timestamped, yes


[03-Nov-18 04:28 PM] tolken#2655
Never mind. I‚Äôll just get a setup going to I can play. I might be able to help with some areas of this üòÉ


[03-Nov-18 04:28 PM] Alright#0419
the payload for each message is


[03-Nov-18 04:28 PM] Alright#0419
[<timestamp>, "<message>"]


[03-Nov-18 04:28 PM] Alright#0419
so list[0] is time, list[1] message


[03-Nov-18 04:37 PM] Alright#0419 (pinned)
```
./komodod -ac_name=TROLLT -ac_supply=1000 -ac_reward=100000000000000 -ac_cc=2 -addnode=159.69.45.70 -addnode=195.201.137.5
```
New testing chain because CCNG's oracles are bugged out from frequent forks


[03-Nov-18 04:37 PM] Alright#0419
Pinned a message.


[03-Nov-18 04:40 PM] tolken#2655
Alright, I‚Äôll give it a go. This will be my first tiptoe into CC, looking forward to it. üòÉ


[03-Nov-18 04:41 PM] Alright#0419
ping me if you do please


[03-Nov-18 04:42 PM] Alright#0419
https://github.com/StakedChain/trollbox
https://github.com/tonymorony/trollbox_gui
give both a try please if you can

{Embed}
https://github.com/StakedChain/trollbox
StakedChain/trollbox
On chain real time chat for KMD assetchains. Contribute to StakedChain/trollbox development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759

{Embed}
https://github.com/tonymorony/trollbox_gui
tonymorony/trollbox_gui
My plays with Python Kivy GUI framework and Stakedchain OraclesCC chat concept - tonymorony/trollbox_gui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[03-Nov-18 04:42 PM] Alright#0419
they're compatible with each other


[03-Nov-18 04:43 PM] Alright#0419
Can break down exactly what it's doing if code/comments are not clear


[03-Nov-18 04:46 PM] tolken#2655
Ithank you, I‚Äôll get familiar with the code.


[04-Nov-18 12:27 AM] jl777c#5810
why not ask for N samples, if the oldest is still  not at the cutoff, ask for N more


[04-Nov-18 12:27 AM] jl777c#5810
while ( reached_end == 0 )
{
   get N samples
   scan N samples and break if reached_end
}


[04-Nov-18 07:03 AM] TonyL#3577
Hi @Mihailo ! Sorry I've missed your message regards gatewaysCC fixes PR.
I'll start re-test tomorrow and will let you know how it's going


[04-Nov-18 07:13 AM] Mihailo#5902
@TonyL No problem. Ping me tomorrow if you need anything how to setup. Basically in my experience it showed that the best setup is: 1 node for al the commands on creating gateway and deposit, 3 nodes for 2of3 gateway for example, and 1 node mining.

{Reactions}
üëå 

[04-Nov-18 07:27 AM] TonyL#3577
Ok, I'll try to go ahead with such setup


[04-Nov-18 07:28 AM] TonyL#3577
Thanks!


[04-Nov-18 11:41 AM] Mihailo#5902
The reason why this setup is easier is because if you run oraclefeed on 3 nodes for 3 trusted pubkeys, they will post data often and use funds from the wallet. So if you execute some command like gatewaydeposit, when the hex is returned if you are not fast enough to broadcast it, it will use the vout you got in hex and you will not be able to broadcast that hex and will need to get another one. So bottom line I think the nodes with oraclefeed should be independent.


[06-Nov-18 03:31 AM] TonyL#3577
@jl777c Hmm just tried to build latest FSM on new nodes - seems broken:
```cc/dice.cpp: In function ‚Äòuint64_t DiceCalc(int64_t, int64_t, int64_t, int64_t, int64_t, int64_t, uint256, uint256)‚Äô:
cc/dice.cpp:256:84: error: no matching function for call to ‚Äòuint256::uint256(arith_uint256&)‚Äô
     fprintf(stderr,"calc house entropy %s vs bettor %s\n",uint256_str(str,(uint256)house),uint256_str(str2,(uint256)bettor));
                                                                                    ^~~~~
In file included from ./random.h:9:0,
                 from ./primitives/transaction.h:10,
                 from ./primitives/block.h:9,
                 from ./chain.h:10,
                 from ./cc/eval.h:22,
                 from cc/CCinclude.h:39,
                 from cc/CCdice.h:20,
                 from cc/dice.cpp:16:
./uint256.h:116:14: note: candidate: uint256::uint256(const std::vector<unsigned char>&)
     explicit uint256(const std::vector<unsigned char>& vch) : base_blob<256>(vch) {}
              ^~~~~~~
./uint256.h:116:14: note:   no known conversion for argument 1 from ‚Äòarith_uint256‚Äô to ‚Äòconst std::vector<unsigned char>&‚Äô
./uint256.h:115:5: note: candidate: uint256::uint256(const base_blob<256>&)
     uint256(const base_blob<256>& b) : base_blob<256>(b) {}
     ^~~~~~~
./uint256.h:115:5: note:   no known conversion for argument 1 from ‚Äòarith_uint256‚Äô to ‚Äòconst base_blob<256>&‚Äô
./uint256.h:114:5: note: candidate: uint256::uint256()
     uint256() {}
     ^~~~~~~
./uint256.h:114:5: note:   candidate expects 0 arguments, 1 provided
./uint256.h:112:7: note: candidate: constexpr uint256::uint256(const uint256&)
 class uint256 : public base_blob<256> {
       ^~~~~~~```


[06-Nov-18 03:33 AM] jl777c#5810
try again

{Reactions}
üëå 

[06-Nov-18 03:33 AM] jl777c#5810
actively debugging

{Reactions}
üòÉ 

[06-Nov-18 06:52 AM] TonyL#3577
Testing 2 3 gateways deposit on latest FSM.
Have different mempool on 3 nodes at the same time. Blockchain in sync on all three and they are see 2 connections each.:
`Gateway creation / deposit node:`
```./komodo-cli -ac_name=TROLLT getrawmempool
[
  "c48453a646be755527f20e80ab89b92fe6eba72c67db9f2645321254e9fa40b6"
]
```
`One of oraclefeed nodes:`
```
./komodo-cli -ac_name=TROLLT getrawmempool
[
  "a2d1480a6e250de5f409d2f94f01729fc5c36bdf7b73534a9cdc498d549f950a",
  "5242f63bf64b27d6401ae60c062175a10411e8d594338e19884aa0004c010d1b",
  "94927273a619dd484975c72472b5bd711fdbe1549c7e9c9e06d3808aaf849d36",
  "adac31a171d41ec143d8c28e9161180098767f27c55406d1811d32899cbfbb7c",
  "ec2283b47dc768c8e2595f7a662dc10217c3e51c9d179774b7c53b91218c6683",
  "5276c2ab13cffeabfd8160be59f4d0ddda51fff1d6725f67215ee4f1acfc1e98",
  "c48453a646be755527f20e80ab89b92fe6eba72c67db9f2645321254e9fa40b6",
  "63c08894b38d6a9b68a877102e67d794a2974b9dbe2e1a0631e8bebdb6715ac0",
  "f2eabf041a4c483ab3fb2d40867a0c5c869a776db2f20c37e6cf7f767c17e6d1",
  "33e6e026cc8f97b071be3e0666f575c016db3c5f72e9bbc3be75294b1cb74ae3",
  "4e1f38508206d9e0d64e79f05d0d99243b54585faaa781361740cad0c3ca8ef3",
  "387894fd182ff8c4ee1abb78479e8276cdea03e779206768cbea6d342c9a45f4",
  "45f72d12146c3da95f60281b47725eb6764e20eeffd82fb0952177a252a1a1fb"
]
```
`Mining node:`
```/komodo-cli -ac_name=TROLLT getrawmempool
[
]
```


[06-Nov-18 06:54 AM] TonyL#3577
It started after I've broadcasted gatewaysclaim + gatewaysdeposit, before all worked correct
Tried to stop/start some nodes - no luck so far


[06-Nov-18 06:54 AM] jl777c#5810
no guarantee mempool are in sync


[06-Nov-18 06:54 AM] jl777c#5810
but if they run different versions, they can be much out of sync


[06-Nov-18 06:56 AM] TonyL#3577
Hmm 4 nodes have the same version, 1 of the 3 with oraclesfeed have latest with all the dices fixes
I've tried to stop/start gateways creation / deposit node - able to re-broadcast gatewaysdeposit after it but its going to "nowhere"


[06-Nov-18 06:56 AM] TonyL#3577
Will try to re-sync blockchain now also


[06-Nov-18 07:03 AM] Mihailo#5902
I hade similair problems, basically oraclefeed nodes broadcast as many tx as you did subscribe in one block, and sometimes it can get stuck. I do not know exactly why you mining node does not get any of those txs, but be sure that all nodes are in sync...


[06-Nov-18 07:04 AM] Mihailo#5902
And also check often as mempool gets big and when block is mined everything will clear and fill again as oraclefeed posts every 10 seconds.


[06-Nov-18 07:07 AM] TonyL#3577
@Mihailo I've subscribed 100 times for each publisher


[06-Nov-18 07:08 AM] TonyL#3577
But when I just broadcasted oraclefeed all seems ok, before I've made gatewaysclaim + gatewaysdeposit.
Now mempools on broadcasting nodes seems stucked


[06-Nov-18 07:08 AM] TonyL#3577
Anyway will try on new AC with very last FSM on all nodes


[06-Nov-18 07:08 AM] TonyL#3577
And report if behaviour repeats


[06-Nov-18 07:09 AM] jl777c#5810
yes, for mempool things, latest FSM is requirement


[06-Nov-18 07:09 AM] jl777c#5810
dice CC hadd some fatal bugs with mempool states


[06-Nov-18 07:13 AM] Mihailo#5902
Try to do `getrawmempool true` to se which one do not have dependency on other tx and rebroadcast them to get unstuck

{Reactions}
üëå 

[06-Nov-18 07:16 AM] jl777c#5810
without latest FSM, likely massive use of mempool will be broken

{Reactions}
üëå 

[07-Nov-18 03:19 AM] TonyL#3577
Updated all nodes and started a new chain.
Oraclefeed sent few transactions then starting to get errors:
```f.B M.2 of N.3 size.3 -> bEk4j8ESzYDhPGeA5BzWy3WdyerkZqMXZz
5b2e82787c09567039ff13f96ebf272bd1359871f9a5f8b6db9a522089acc77a 1 100000000
37135c9d6a3eda63ec8b388afefaf5a0094ad74cb881a9d244fdbd992b73bacd 0 10000
broadcast TONY0 txid.(c6b0b2f8d74a419e28c7c030d6831ca5afc2456e76d430486c81c8ea1a7a6a08)
KMD ht.1086737 <- 11951000778c18a6dc7a26a357277b22dfc812843b3375282092635bae362bb4219b2d0c4c2ced0e4630d7dfec64f1dccf4809b095b8caf6bd0d0d678394fde7c7ca497f
f.B M.2 of N.3 size.3 -> bEk4j8ESzYDhPGeA5BzWy3WdyerkZqMXZz
5b2e82787c09567039ff13f96ebf272bd1359871f9a5f8b6db9a522089acc77a 1 100000000
37135c9d6a3eda63ec8b388afefaf5a0094ad74cb881a9d244fdbd992b73bacd 0 10000
broadcast TONY0 txid.(74598ebd2fa09588442749faf1a69ca791ad711b9fedaa79d5d281e18854700a)
KMD ht.1086738 <- 12951000356f1f656c229631d0e8c7c8df7c302d18d66a65979c3e905b62c44503000000ef5cabb6350bd6c167f39fd4e2b97e62ab15dfcee99a8159f083cc6dfd3b64e3
f.B M.2 of N.3 size.3 -> bEk4j8ESzYDhPGeA5BzWy3WdyerkZqMXZz
5b2e82787c09567039ff13f96ebf272bd1359871f9a5f8b6db9a522089acc77a 1 100000000
37135c9d6a3eda63ec8b388afefaf5a0094ad74cb881a9d244fdbd992b73bacd 0 10000
CC Eval EVAL_ORACLES Invalid: vin0 not normal spending tx 74598ebd2fa09588442749faf1a69ca791ad711b9fedaa79d5d281e18854700a
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
loadfile null size.(/tmp/oraclefeed.sendrawtransaction)
CC Eval EVAL_ORACLES Invalid: vin0 not normal spending tx 74598ebd2fa09588442749faf1a69ca791ad711b9fedaa79d5d281e18854700a
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[07-Nov-18 03:19 AM] TonyL#3577
If sending `oraclesdata` manually getting the same error on broadcast


[07-Nov-18 03:20 AM] TonyL#3577
From another node it's worked the same way - first succesfully sent few heights then ```16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
loadfile null size.(/tmp/oraclefeed.sendrawtransaction)
CC Eval EVAL_ORACLES Invalid: vin0 not normal spending tx a3a26c0ffaab63f094eb7c4e8a4b061db7a602a4771a2845eea6e1db505e5290
error code: -26
error message:
```


[07-Nov-18 03:21 AM] TonyL#3577
Seems I need help here @jl777c @Mihailo


[07-Nov-18 03:25 AM] jl777c#5810
investigating


[07-Nov-18 03:26 AM] TonyL#3577
I'm on this commit:
```commit a6b21d0d44c3f9c4efb499050723618883d51534 (HEAD -> FSM, origin/FSM)
Author: jl777 <jameslee777@yahoo.com>
Date:   Tue Nov 6 21:58:18 2018 -1100

    Guard adding to entropyused list```


[07-Nov-18 03:30 AM] jl777c#5810
pushed possible fix


[07-Nov-18 03:31 AM] TonyL#3577
testing


[07-Nov-18 03:38 AM] TonyL#3577
@jl777c have I create a new oracle for proper testing? (getting same error now)


[07-Nov-18 03:39 AM] jl777c#5810
do you get identical console prints?


[07-Nov-18 03:39 AM] jl777c#5810
need to see them


[07-Nov-18 03:40 AM] TonyL#3577
```BTC/USD 6514.3063
Powered by CoinDesk (https://www.coindesk.com/price/) 6514.30630000
f.B M.2 of N.3 size.3 -> bEk4j8ESzYDhPGeA5BzWy3WdyerkZqMXZz
check 5b2e82787c09567039ff13f96ebf272bd1359871f9a5f8b6db9a522089acc77a 1.00000000
check 37135c9d6a3eda63ec8b388afefaf5a0094ad74cb881a9d244fdbd992b73bacd 0.00010000
addmultisigaddress.(bEk4j8ESzYDhPGeA5BzWy3WdyerkZqMXZz)
set refcoin bEk4j8ESzYDhPGeA5BzWy3WdyerkZqMXZz <- KMD [./komodo-cli] M.2 of N.3
CC Eval EVAL_ORACLES Invalid: vin0 not normal spending tx 74598ebd2fa09588442749faf1a69ca791ad711b9fedaa79d5d281e18854700a
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
loadfile null size.(/tmp/oraclefeed.sendrawtransaction)
CC Eval EVAL_ORACLES Invalid: vin0 not normal spending tx 74598ebd2fa09588442749faf1a69ca791ad711b9fedaa79d5d281e18854700a
error code: -26
error message:```


[07-Nov-18 03:40 AM] TonyL#3577
```commit 4148e39f731e500e0dd4d5a182fab5139b64e76d (HEAD -> FSM, origin/FSM)
Author: jl777 <jameslee777@yahoo.com>
Date:   Wed Nov 7 00:29:34 2018 -1100

    Return eval->error
```


[07-Nov-18 03:40 AM] jl777c#5810
let me revert a change


[07-Nov-18 03:42 AM] jl777c#5810
ok, its there


[07-Nov-18 03:42 AM] TonyL#3577
building


[07-Nov-18 03:48 AM] TonyL#3577
@jl777c Oh, was there only reversion? Since error is the same


[07-Nov-18 03:48 AM] jl777c#5810
can you test another usage of oracles?


[07-Nov-18 03:49 AM] jl777c#5810
i didnt change oracles except for making sure of proper funcdid


[07-Nov-18 03:54 AM] TonyL#3577
Hmm, before I've updated nodes today oraclefeed worked smooth (on yesterdays commits)
Will try oracles chatting now


[07-Nov-18 03:59 AM] jl777c#5810
or just some very basic unit tests


[07-Nov-18 03:59 AM] jl777c#5810
where there a lot of changes when you first updated today?


[07-Nov-18 04:00 AM] TonyL#3577
Yes were a lot of changes in CCs and RPCs


[07-Nov-18 04:01 AM] TonyL#3577
Oh tests, we have tests,  right üòÉ


[07-Nov-18 04:02 AM] jl777c#5810
seems something broke before today


[07-Nov-18 04:03 AM] jl777c#5810
it is best if you update more frequent, that way it really narrows down what change broke things


[07-Nov-18 04:06 AM] TonyL#3577
Yup, will make a rule for myself now check `git pull` each day before starting do stuff


[07-Nov-18 04:07 AM] TonyL#3577
```"error": "odds must be between 2 and 9999"```
Are odds 2 now means the same as odds 1 before?


[07-Nov-18 04:10 AM] TonyL#3577
Seems have to re-write tests for diceCC after latest updates


[07-Nov-18 04:11 AM] jl777c#5810
i disabled old odds of 1


[07-Nov-18 04:11 AM] TonyL#3577
So just 50/50 bets arent possible now?


[07-Nov-18 04:13 AM] TonyL#3577
Oh, oracles unit tests cover only creation process so far.  Have to improve this white space


[07-Nov-18 06:34 AM] TonyL#3577
@jl777c I'm receiving now blank JSON in case of dicebet to diceplan `name` not matching original one (noticed it in auto-tests):
```./komodo-cli -ac_name=TONY0 dicebet test 0073aa8af8f07fc7770db37b5ebc0e36814699423ed0694b00fcdb1773eb805c 10 2
error decoding opret or sbits mismatch 594b43554c vs 74736574
Dice plan (test) exists.0 vs cmpflag.1
{
}
```
Is it the right place to add sbits match check: https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp#L1064 ?

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[07-Nov-18 06:35 AM] jl777c#5810
yes


[07-Nov-18 06:36 AM] TonyL#3577
Just found that it's implemented here https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp#L886
Trying to understand now why there is no RPC printout

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[07-Nov-18 07:40 AM] dukeleto#7326
@TonyL that needs some error handling


[07-Nov-18 07:40 AM] dukeleto#7326
@TonyL it's just printing to stderr, when it should be assigning to `CCerror` variable


[07-Nov-18 07:41 AM] dukeleto#7326
something like this: ```        CCerror = strprintf("bet size violation %.8f",(double)bet/COIN);
        fprintf(stderr,"%s\n", CCerror.c_str() );```


[07-Nov-18 07:41 AM] dukeleto#7326
which is in the same file


[07-Nov-18 07:41 AM] dukeleto#7326
CCerror variable is special


[07-Nov-18 07:42 AM] dukeleto#7326
if CCerror != "", it is returned as the error message in RPC response


[07-Nov-18 07:42 AM] TonyL#3577
@dukeleto I did it other way:
https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp#L1078
added `error=` here

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[07-Nov-18 07:42 AM] dukeleto#7326
any place that prints to stderr, should probably also set CCerror, unless it's for debugging


[07-Nov-18 07:43 AM] TonyL#3577
There was Diceinit check (which checking existing and name match) but no error message


[07-Nov-18 07:44 AM] dukeleto#7326
@TonyL your "other way", does the rpc know how to set error responses that way?


[07-Nov-18 07:44 AM] dukeleto#7326
i haven't looked at cc code in a while


[07-Nov-18 07:44 AM] TonyL#3577
Yes, RPC print these `"errors=` I've checked first for sure


[07-Nov-18 07:44 AM] TonyL#3577
Continuing reanimate dice tests üòÉ


[07-Nov-18 07:45 AM] dukeleto#7326
this line is an error: https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp#L1182

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[07-Nov-18 07:45 AM] dukeleto#7326
unless you always want to print out CCerror, probably want { } around line 1181 and 1182


[07-Nov-18 07:46 AM] dukeleto#7326
@TonyL so what exactly is your "new/other way" to deal with CC errors? I am not quite understanding.


[07-Nov-18 07:47 AM] TonyL#3577
It's not a new way - I just added error message to check


[07-Nov-18 07:47 AM] dukeleto#7326
i am not understanding


[07-Nov-18 07:48 AM] TonyL#3577
```    if ( (cp= Diceinit(fundingPubKey,fundingtxid,&C,planstr,txfee,mypk,dicepk,sbits,minbet,maxbet,maxodds,timeoutblocks)) == 0 )
        error = "Diceinit error on Dicebet (probably plan not exists or plan name not match)";
        return("");```


[07-Nov-18 07:48 AM] dukeleto#7326
why assign to `error` instead of CCerror ?


[07-Nov-18 07:49 AM] dukeleto#7326
i don't understand this new `error` variable, why it was introduced or how it is tied to CCerror


[07-Nov-18 07:49 AM] dukeleto#7326
but also, i am vastly out-of-date with CC stuff. I see Tony has been doing awesome stuff!

{Reactions}
üôå 

[07-Nov-18 07:50 AM] dukeleto#7326
```       error = "Diceinit error in status";
        return(0.);```


[07-Nov-18 07:50 AM] dukeleto#7326
from DiceStatus


[07-Nov-18 07:50 AM] dukeleto#7326
that can't work correctly


[07-Nov-18 07:51 AM] dukeleto#7326
CCerror must be assigned to


[07-Nov-18 07:51 AM] TonyL#3577
It's James code not mine üòÉ


[07-Nov-18 07:52 AM] TonyL#3577
I just saw this `error=` around, added for my case and it's seems working correct in RPC responses


[07-Nov-18 07:52 AM] dukeleto#7326
don't throw the sage wizard under the bus üòπ . he must have left it there for us to find and learn ü§ì


[07-Nov-18 07:53 AM] dukeleto#7326
it seems many/all internals functions take a std::string error now, that is new


[07-Nov-18 07:54 AM] dukeleto#7326
but not all


[07-Nov-18 07:54 AM] dukeleto#7326
so the new ones that take that string, assign to it. older functions without that assign to CCerror, it seems


[07-Nov-18 07:55 AM] TonyL#3577
James working actively on diceCC debugging these days so a lot of stuff probably might be changed üòÉ


[07-Nov-18 07:55 AM] dukeleto#7326
i thought `error` was a local variable, but it's passed by reference, so the function modifies the value, and then the caller probably does something special


[07-Nov-18 07:56 AM] dukeleto#7326
my guess is James took my hacky CCerror solution and improved it


[07-Nov-18 07:56 AM] jl777c#5810
i am waiting for someone to make a pull request to make the error handling sane


[07-Nov-18 07:56 AM] dukeleto#7326
oh gosh


[07-Nov-18 07:56 AM] dukeleto#7326
@jl777c is every internals function taking a `std::string error` the *new* way?


[07-Nov-18 07:57 AM] jl777c#5810
maybe the entire std::string return value needs to be changed


[07-Nov-18 07:57 AM] jl777c#5810
i havent paid much attention to the error reporting


[07-Nov-18 07:57 AM] dukeleto#7326
CCerror was introduced so that RPC json responses could be sane


[07-Nov-18 07:57 AM] TonyL#3577
```./komodo-cli -ac_name=TONY0 dicebet test 0073aa8af8f07fc7770db37b5ebc0e36814699423ed0694b00fcdb1773eb805c 10 2
error decoding opret or sbits mismatch 594b43554c vs 74736574
Dice plan (test) exists.0 vs cmpflag.1
{
  "result": "error",
  "error": "Diceinit error on Dicebet (probably plan not exists or plan name not match)"
}
```


[07-Nov-18 07:57 AM] dukeleto#7326
instead of libraries trying to parse error strings as json


[07-Nov-18 07:57 AM] TonyL#3577
This `error = ` worked fine hmm


[07-Nov-18 07:58 AM] jl777c#5810
i think it is a global


[07-Nov-18 07:58 AM] dukeleto#7326
my guess is the calling code takes the `error` response and maybe puts that in CCerror


[07-Nov-18 07:59 AM] dukeleto#7326
i haven't looked at the fsm branch CC code lately


[07-Nov-18 08:03 AM] dukeleto#7326
i am looking at the code now


[07-Nov-18 08:03 AM] dukeleto#7326
dicebet does not use CCerror


[07-Nov-18 08:05 AM] dukeleto#7326
which then calls DiceInit


[07-Nov-18 08:06 AM] dukeleto#7326
and other internals functions, which have no way to pass errors back up via CCerror


[07-Nov-18 08:07 AM] TonyL#3577
Hmm, interesting so how RPC error printing this way ü§î


[07-Nov-18 08:08 AM] dukeleto#7326
i am just saying that some error conditions are currently not covered, or not easy to report, because various levels of functions don't have `error` variables


[07-Nov-18 08:09 AM] dukeleto#7326
making everything use CCerror and then doing a single check for CCerror when returning JSON response seems easiest/best to me


[07-Nov-18 08:10 AM] dukeleto#7326
otherwise you need to pass various `error` variables to functions which call other functions, seems like a lot of work for not much gain. CCerror global is all we need, I think


[07-Nov-18 08:25 AM] dukeleto#7326
@TonyL do you know of any cases where errors should be returned, but they are not?


[07-Nov-18 08:43 AM] TonyL#3577
@dukeleto Hmm usually I add to RPC validations in such cases


[07-Nov-18 08:43 AM] TonyL#3577
Oh


[07-Nov-18 08:43 AM] TonyL#3577
At the moment you can put to `oraclessubscribe` almost everything you want


[07-Nov-18 08:44 AM] TonyL#3577
That one I remember @dukeleto


[07-Nov-18 08:44 AM] TonyL#3577
Sorry, `oraclesregister`


[07-Nov-18 08:44 AM] TonyL#3577
```./komodo-cli -ac_name=CCNG oraclesregister imatrollputtext+randomhexhere 01000000011d2ede37ad589e5774e6dc220a925ae043325bf45d6f65c8a1afe47ac62d2d200000000049483045022100cc40b3f8aa698772dfe1486a8349d465115efbdfa38c9d15ec3b99ceb25fe0ef02206ca2599a3f848c6e8f23bdc04926bdad5f00424a61298243b3517aa5eef007a001ffffffff0410270000000000002321020000000000000000000000000000000000000000000000000000000000000000ac1027000000000000302ea22c8020a83bdefbd26a188a1bb0d74b96636c39157333ec44c8dbae934e4862e2cd39e18103120c008203000401ccd02a724e1809000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac00000000000000004f6a4c4cec520000000000000000000000000000000000000000000000000000000000000000210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012720bca9a3b0000000000000000```


[07-Nov-18 08:45 AM] TonyL#3577
Posted behaviour of `oraclesregister` above in this channel


[07-Nov-18 08:45 AM] dukeleto#7326
cool, i haven't touched oracle CC's at all yet


[07-Nov-18 08:46 AM] TonyL#3577
I've started unit-tests for oraclesCC but covered only creation process - now I remember - this oraclesregister is why I've stopped üòÇ


[07-Nov-18 08:47 AM] TonyL#3577
@dukeleto If you'll need to use auto-tests - it's failing now for diceCC because of last contract changes, I'll PR fix today-tomorrow so you may just comment it if needed


[07-Nov-18 08:51 AM] TonyL#3577
@jl777c dicebet seems just broken on latest FSM


[07-Nov-18 08:51 AM] TonyL#3577
```./komodo-cli -ac_name=TONY0 diceinfo 0073aa8af8f07fc7770db37b5ebc0e36814699423ed0694b00fcdb1773eb805c
first.0 entropytxid.304283c41b1d1e14d29db2f319fe3c696906b3186e4b14858403c43ba57f984d val 10000.00000000
numentropy tx 1: 11000.00000000
{
  "result": "success",
  "fundingtxid": "0073aa8af8f07fc7770db37b5ebc0e36814699423ed0694b00fcdb1773eb805c",
  "name": "LUCKY",
  "sbits": 383514793292,
  "minbet": "1.00000000",
  "maxbet": "800.00000000",
  "maxodds": 10,
  "timeoutblocks": 5,
  "funding": "11000.00000000",
  "entropytxs": 1
}
```


[07-Nov-18 08:51 AM] TonyL#3577
./komodo-cli -ac_name=TONY0 dicebet LUCKY 0073aa8af8f07fc7770db37b5ebc0e36814699423ed0694b00fcdb1773eb805c 900 2
{
}


[07-Nov-18 08:51 AM] TonyL#3577
Oh, it's same sorry


[07-Nov-18 08:51 AM] TonyL#3577
Just no printout on error when bet sum is more than maxbet


[07-Nov-18 08:52 AM] TonyL#3577
```./komodo-cli -ac_name=TONY0 dicebet LUCKY 0073aa8af8f07fc7770db37b5ebc0e36814699423ed0694b00fcdb1773eb805c 100 2
{
}
```


[07-Nov-18 08:52 AM] TonyL#3577
Hmm nope, no printouts at all


[07-Nov-18 08:52 AM] jl777c#5810
anything in console?


[07-Nov-18 08:54 AM] TonyL#3577
On other node with a little bit behind in commits I'm getting:
```{
  "result": "error",
  "error": "cant find dice entropy inputs"
}
```


[07-Nov-18 08:54 AM] TonyL#3577
That's because I did only one diceaddfunds so expected


[07-Nov-18 08:56 AM] jl777c#5810
make more


[07-Nov-18 08:57 AM] TonyL#3577
Node with empty output is on:
```commit 8858150393daee9f0adf9d75ae8362e1785655f5 (HEAD -> FSM, upstream/FSM, origin/FSM)
Author: jl777 <jameslee777@yahoo.com>
Date:   Wed Nov 7 01:33:44 2018 -1100

    Test
```


[07-Nov-18 08:57 AM] TonyL#3577
Node which getting error print is on:
```commit a6b21d0d44c3f9c4efb499050723618883d51534 (HEAD -> FSM, origin/FSM)
Author: jl777 <jameslee777@yahoo.com>
Date:   Tue Nov 6 21:58:18 2018 -1100

    Guard adding to entropyused list```


[07-Nov-18 08:59 AM] jl777c#5810
i made many dice changes, you should be on latest


[07-Nov-18 09:01 AM] TonyL#3577
Oh, there were more changes while I dinner üòÉ  Will re-check with very latest üëç


[07-Nov-18 09:02 AM] TonyL#3577
On very latest get this printout, sorry for false alarm


[07-Nov-18 10:21 AM] TonyL#3577
Hmm I found the reason: If I'm adding `error=` printout here: https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp#L1074
I'm receiving RPC error when plan name not match or exists but not receive error when bet or odds is more than maximum. Will try to do with CCerror as @dukeleto advised.
So problem was even not in JL code but in mine üòÉ

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/dice.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[07-Nov-18 11:31 AM] dukeleto#7326
@TonyL stuff is a bit confusing


[07-Nov-18 11:33 AM] dukeleto#7326
if you look at the code that calls DiceBet, it doesn't look at CCerror (yet)


[07-Nov-18 01:41 PM] dukeleto#7326
@jl777c @TonyL https://github.com/jl777/komodo/pull/929

{Embed}
https://github.com/jl777/komodo/pull/929
Clean up dicebet/dicestatus error handling  by leto ¬∑ Pull Reques...
New macro RETURN_IF_ERROR makes it very easy correctly handle CCerror from internals functions and return it in JSON. It doesn't seem worth it to convert lots of existing code to use it, but va...
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[07-Nov-18 01:41 PM] dukeleto#7326
pretty simple/trivial, but brings some sanity to CC error checking


[07-Nov-18 01:42 PM] jl777c#5810
thanks!

{Reactions}
üëç 

[07-Nov-18 01:43 PM] dukeleto#7326
i see many places to add error checking/reporting to oracle/gateway, RETURN_IF_ERROR makes it super easy


[07-Nov-18 01:45 PM] TonyL#3577
Wow it's really cool @dukeleto !


[07-Nov-18 01:57 PM] dukeleto#7326
just doing my part üòÖ


[08-Nov-18 03:32 AM] Mihailo#5902
Hey guys, I see you were talking about returning errors in RPC for CC. When I started with CC (my first CC was channels) I didn't know there was CCerror thing. Now I see it was used in rewards, prices, dice...
I gave some thought on returning errors from CC in RPC, but I went different way. If we would be ok to change that the CC functions instead of returning std::string with hex, to return JSON in which we can already format the JSON with result success and hex if it was ok, or result error with specific error if something went wrong. 
If there is some big issue with this, than I think this CCerror could be used as it was intended to...


[08-Nov-18 04:06 AM] CrisF#3405
Hi, Is `migration` not a single `cc` but a combination of contracts?


[08-Nov-18 04:08 AM] CrisF#3405
I'm looking for info on it like `channels.cpp` has.


[08-Nov-18 04:11 AM] jl777c#5810
migration is pre-CC method


[08-Nov-18 04:12 AM] CrisF#3405
Oh!  Thank you.


[08-Nov-18 04:12 AM] CMaurice#1685
it's a one-way peg, in effect isn't it?


[08-Nov-18 04:13 AM] jl777c#5810
it is a N:N peg


[08-Nov-18 04:13 AM] jl777c#5810
any chain in the cluster to any other chain


[08-Nov-18 04:13 AM] CMaurice#1685
not quite sure what imagined use cases for it are, would like to hear some


[08-Nov-18 04:14 AM] jl777c#5810
it ensures the total coins across the cluster stays the ssame


[08-Nov-18 04:15 AM] CMaurice#1685
thanks, that helps a bit


[08-Nov-18 05:55 AM] dukeleto#7326
@Mihailo if you pass an object around that contains an error (or JSON or whatever), you will need to change a lot of code. Such as when funcA calls funcB which calls funcC, you are going to be passing that object/json around many layers of the call stack, managing it/etc. It's much easier to use the `CCerror` global, and then each RPC checks if `CCerror` has been set, and if it has, renders the error in JSON response correctly. There is even a macro for it, it's just `RETURN_IF_ERROR(CCerrror)` and you are done


[08-Nov-18 06:00 AM] Mihailo#5902
@dukeleto I ment just for the CC RPC function. Like we are returning string now and then in rpcwallet correspondent function we check if it is not empty and then push success and hex into result UniValue. So I meant we could use UniValue in CC function and push Pair("hex",hex) if it is ok, or Pair("error",error_String) if it did not went ok. And in rpcwallet we can add result state and return that.


[08-Nov-18 06:01 AM] Mihailo#5902
But it is similair to CCerror with a lot more code change, so as I said maybe it is easier to use CCerror üòâ


[08-Nov-18 06:04 AM] dukeleto#7326
@Mihailo dicebet and one other internals function was using the `error` variable as an arg, but I just changed that to use CCerror like everything else. That way, it can catch an error set by a function 2 call levels deep, instead of only an error caught in that call level (hope that makes sense)


[08-Nov-18 06:04 AM] dukeleto#7326
various CC's still don't have much error checking, and need this ported


[08-Nov-18 06:05 AM] dukeleto#7326
the ERR_RESULT and RETURN_IF_ERROR macros make things a lot less annoying üòÉ


[08-Nov-18 06:08 AM] Mihailo#5902
üëç


[08-Nov-18 12:53 PM] Bryan_Beus#6442
I'm working on the last few cc documentation stuff, before we can finally soft-launch this new streamlined documentation.

On the `channels` documentation, I don't see any existing docs in the repo:

https://github.com/KomodoPlatform/Documentation/tree/master/docs/source/cc/contracts/channels

Is there anyone with a channels cc chain up and running that can help me work on docs, either today or tomorrow?

I need someone to give me a basic description of what the channels cc is all about, make a list of all rpc calls, make a very simple one-sentence explanation for each rpc call, and show the arguments/structure the call takes.

And then I need this person to execute a full example of the command in the terminal, copy paste that to me, and also copy paste the full response to me. 

I can do some of this by myself, but not all of it, and it is much slower as I don't know anything about how channels works or what it does.

{Embed}
https://github.com/KomodoPlatform/Documentation/tree/master/docs/source/cc/contracts/channels
KomodoPlatform/Documentation
Developer and End user documentation. Contribute to KomodoPlatform/Documentation development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[08-Nov-18 12:54 PM] jl777c#5810
@Mihailo is the one that did the channels


[08-Nov-18 12:55 PM] Mihailo#5902
@Bryan_Beus I can give you a hand tomorrow with channels CC...


[08-Nov-18 12:55 PM] Bryan_Beus#6442
great, thank you very much


[08-Nov-18 12:56 PM] Bryan_Beus#6442
let me know when you're available. I'm generally around somewhere between 4pm to 12am UTC.


[08-Nov-18 12:56 PM] Mihailo#5902
Ok, lets do it around 4pm if you can...


[08-Nov-18 12:57 PM] Bryan_Beus#6442
sounds good, that's usually when I start work


[08-Nov-18 04:44 PM] Bryan_Beus#6442
What's a "baton" in the oracles cc?


[08-Nov-18 04:44 PM] Bryan_Beus#6442
anyone know?


[08-Nov-18 04:45 PM] jl777c#5810
a utxo that is spent by the next transaction in the chain


[08-Nov-18 04:45 PM] jl777c#5810
think of the baton in a relay race as the runners pass the baton to the next runner


[08-Nov-18 04:45 PM] jl777c#5810
there is mutual exclusivity, as there is only one baton


[08-Nov-18 04:45 PM] jl777c#5810
and you can find the tip of the linked list by finding the baton utxo


[08-Nov-18 04:47 PM] Bryan_Beus#6442
I'm a little familiar with linked lists. did some exercises in my programming classes.

so, the baton is the next transaction that will be awarded to the publisher upon a data upload?


[08-Nov-18 04:47 PM] jl777c#5810
it is a marker, used to track each list


[08-Nov-18 04:48 PM] jl777c#5810
not the datafee


[08-Nov-18 04:48 PM] Bryan_Beus#6442
so, you could look up the utxo that's marked as a baton, and in that utxo, there is a cc property that tells you what the next utxo is in that list?


[08-Nov-18 04:49 PM] jl777c#5810
it is the property of the blockchain


[08-Nov-18 04:49 PM] jl777c#5810
the previous utxo, is in the input


[08-Nov-18 04:49 PM] jl777c#5810
so you can just keep finding the previous tx in the baton chain


[08-Nov-18 04:49 PM] jl777c#5810
you know like a linked list


[08-Nov-18 04:50 PM] Bryan_Beus#6442
that makes a little sense


[08-Nov-18 04:50 PM] jl777c#5810
not only can you find the most current datapoint, you can traverse it backwards to the very beginning


[08-Nov-18 04:50 PM] jl777c#5810
you need to understand linked list


[08-Nov-18 04:50 PM] jl777c#5810
in this case a backwards linked list


[08-Nov-18 04:50 PM] Bryan_Beus#6442
I'm still confused about what utxo specifically we're talking about, if it's not the datafee paid to the publisher?


[08-Nov-18 04:50 PM] jl777c#5810
the transactions vouts -> vins creates a backwards linked list


[08-Nov-18 04:50 PM] jl777c#5810
it is a special baton utxo


[08-Nov-18 04:51 PM] jl777c#5810
sole purpose is to be a baton


[08-Nov-18 04:51 PM] jl777c#5810
it gets a free ride as the txfee for the transaction and datafee are already taken care of


[08-Nov-18 04:51 PM] Bryan_Beus#6442
that part I think makes sense.

You're saying that blockchains have a built-in property that show how to link one utxo to another. So, you can mark one utxo as a baton, and then trace its history backwards using the normal blockchain propertiees. Is that correct?


[08-Nov-18 04:51 PM] jl777c#5810
yes


[08-Nov-18 04:52 PM] jl777c#5810
it is literally a backward linked list


[08-Nov-18 04:52 PM] Bryan_Beus#6442
This part still confuses me a bit. Not sure how well I need to understand it to write documentation, but I'm not quite able to describe this yet.

```
sole purpose is to be a baton
it gets a free ride as the txfee for the transaction and datafee are already taken care of
```


[08-Nov-18 04:52 PM] jl777c#5810
and for oracle that is exactly the data structure you need to be able to find all the historical data samples


[08-Nov-18 04:52 PM] Bryan_Beus#6442
I get the part that you're saying, but I don't get why we need a baton.

Does each publisher get a unique baton?


[08-Nov-18 04:52 PM] Bryan_Beus#6442
Or does the baton change over time?


[08-Nov-18 04:53 PM] jl777c#5810
ok, think about a publisher that is publishing a stream of data


[08-Nov-18 04:53 PM] jl777c#5810
each one gets a txid


[08-Nov-18 04:53 PM] jl777c#5810
how would you find the most recent one?


[08-Nov-18 04:53 PM] jl777c#5810
how would you find all of them?


[08-Nov-18 04:53 PM] jl777c#5810
how would you know the sequence?


[08-Nov-18 04:53 PM] jl777c#5810
each publisher gets a baton


[08-Nov-18 04:54 PM] jl777c#5810
each data sample spends the baton and makes a new one


[08-Nov-18 04:54 PM] Bryan_Beus#6442
"each one gets a txid"

by this, do you mean this:

each publisher gets a unique txid, which comes from the `oraclesregister` rpc call? (after doing `sendrawtransaction`)?


[08-Nov-18 04:54 PM] jl777c#5810
you understand that the publisher needs to publish data


[08-Nov-18 04:54 PM] jl777c#5810
he does that by making a transaction


[08-Nov-18 04:54 PM] Bryan_Beus#6442
ok


[08-Nov-18 04:54 PM] jl777c#5810
each transaction gets a txid


[08-Nov-18 04:55 PM] Bryan_Beus#6442
ok


[08-Nov-18 04:55 PM] jl777c#5810
if a publisher publishes a million data points, there is a million txids


[08-Nov-18 04:55 PM] Bryan_Beus#6442
ok


[08-Nov-18 04:55 PM] jl777c#5810
how would you organize this?


[08-Nov-18 04:55 PM] jl777c#5810
how would you even find them all?


[08-Nov-18 04:55 PM] Bryan_Beus#6442
hmm, interesting


[08-Nov-18 04:55 PM] jl777c#5810
you could make a DB and database all the txids...


[08-Nov-18 04:55 PM] jl777c#5810
but that would require a special DB


[08-Nov-18 04:56 PM] Bryan_Beus#6442
but that would be difficult for every publisher to manage on their own

easier to keep it managed on-chain


[08-Nov-18 04:56 PM] jl777c#5810
so instead of the overhead of having a custom DB to track each publishers data samples, I came up with the baton utxo


[08-Nov-18 04:56 PM] Bryan_Beus#6442
ok


[08-Nov-18 04:56 PM] Bryan_Beus#6442
and the baton utxo comes from the most recent data-related txid that the publisher created?


[08-Nov-18 04:57 PM] jl777c#5810
now there can be thousands of publishers all publishing millions of samples and we have billions of txids


[08-Nov-18 04:57 PM] jl777c#5810
when the publisher registers, he creates the first baton


[08-Nov-18 04:57 PM] jl777c#5810
the first datasample spends the first baton and makes the second


[08-Nov-18 04:57 PM] jl777c#5810
the next datasample spends the second an makes the third


[08-Nov-18 04:58 PM] jl777c#5810
register:
 vins.*: normal inputs
 vout.0: txfee tag to normal marker address
 vout.1: baton CC utxo
 vout.2: change, if any
 vout.n-1: opreturn with oracletxid, pubkey and price per data point


[08-Nov-18 04:58 PM] jl777c#5810
data:
 vin.0: normal input
 vin.1: baton CC utxo (most of the time)
 vin.2+: subscription or data vout.0
 vout.0: change to publishers CC address
 vout.1: baton CC utxo
 vout.2: payment for dataprovider
 vout.3: change, if any
 vout.n-1: opreturn with oracletxid, prevbatontxid and data in proper format


[08-Nov-18 04:58 PM] jl777c#5810
this is why I carefully define all inputs and outputs


[08-Nov-18 05:00 PM] jl777c#5810
so given the most recent datasample txid, the baton utxo is txid/v1


[08-Nov-18 05:00 PM] jl777c#5810
we look at vin1 to find the previous datasample


[08-Nov-18 05:00 PM] jl777c#5810
all the way to the initial register


[08-Nov-18 05:00 PM] Bryan_Beus#6442
I think I got you here

so, you may have said this already, but I wasn't clear enough on what a baton is to understand.

is the baton the txid hash of the utxo in question?


[08-Nov-18 05:01 PM] Bryan_Beus#6442
ok ya


[08-Nov-18 05:01 PM] Bryan_Beus#6442
I think that's what you just posted


[08-Nov-18 05:01 PM] Bryan_Beus#6442
```so given the most recent datasample txid, the baton utxo is txid/v1```


[08-Nov-18 05:01 PM] jl777c#5810
the baton is a bitcoin utxo


[08-Nov-18 05:01 PM] jl777c#5810
with special purpose


[08-Nov-18 05:01 PM] jl777c#5810
its purpose is not to make a payment


[08-Nov-18 05:01 PM] jl777c#5810
its purpose is to replace the need for a database


[08-Nov-18 05:13 PM] Bryan_Beus#6442
ok, could we say it like this ? being a bit verbose here, to make sure I understand:

to understand the baton property, one must first understand the problem that it solves.

a publisher publishes data to an oracle

he does this by creating a transaction, using the `oraclesdata` method

when completed (after broadcasting the hex using `sendrawtransaction`), this method returns a txid

if there was only one such txid, it would not be difficult to keep track of it

however, as each publisher is likely publishing lots of data, and thus creating lots of txids, and there are also many publishers, this could result in a state of disorder. It would be difficult to know which data is the most recent, or how data in a contract is related to other data, etc. 

To solve this problem without using centralized and/or external databases, it is easiest for each publisher to have an automatically managed linked list.

This linked list keeps track of the txids submitted by a publisher to a oracle contract, and keeps them in order.

When a publisher first registers for an oracles contract, the returned txid of the `oraclesregister` command (after `sendrawtransaction`) is the first baton.

When the publisher uploads their first data publication to the chain, using `oraclesdata`, the baton property for this publisher in the master `oracles` contract updates to the `txid` returned from the data publication.

Likewise each time they upload data to the chain.

By the nature of blockchain data structure, each utxo txid is already a linked list leading back in time. 

The baton, therefore, points to the txid of the most recently created utxo for this publisher. By finding that utxo, you can find the previous utxo created by this publisher, on this contract, and so on, all the way until you find their first `oraclesregister` utxo (and so on).


[08-Nov-18 05:14 PM] jl777c#5810
yes


[08-Nov-18 05:14 PM] Bryan_Beus#6442
great, thanks


[08-Nov-18 05:14 PM] Bryan_Beus#6442
I'll put this in the introduction


[08-Nov-18 05:14 PM] jl777c#5810
it is likely the most efficient DB ever created


[08-Nov-18 05:15 PM] jl777c#5810
leveraging the existing bitcoin protocol


[08-Nov-18 05:15 PM] Bryan_Beus#6442
heh

yes, I can appreciate the simplicity


[08-Nov-18 05:22 PM] jl777c#5810
of course, it isnt a full DB


[08-Nov-18 05:22 PM] jl777c#5810
but it lets you very efficiently fine the most recent samples from any publisher


[08-Nov-18 05:22 PM] jl777c#5810
which is really what most dapps need


[08-Nov-18 05:23 PM] jl777c#5810
all in a data marketplace context


[08-Nov-18 05:23 PM] jl777c#5810
so the cost for the oraclizing of data is paid for by the datafee


[08-Nov-18 05:23 PM] jl777c#5810
really, an entire major crypto project can be made out of oracles CC


[08-Nov-18 05:33 PM] Bryan_Beus#6442
yes, I can see that


[08-Nov-18 05:34 PM] Bryan_Beus#6442
seems like oracles can basically be a repository for placing existing legacy solutions that are non-decentralized into a blockchain format, while waiting to see what more can be solved with other blockchain/smart-contract technologies


[08-Nov-18 05:35 PM] Bryan_Beus#6442
what is the difference between `baton` and `batontxid`?


[08-Nov-18 05:35 PM] Bryan_Beus#6442
I see `baton` is an address


[08-Nov-18 05:35 PM] Bryan_Beus#6442
and `batontxid` is a typical txid has


[08-Nov-18 05:35 PM] Bryan_Beus#6442
hash


[08-Nov-18 05:35 PM] Bryan_Beus#6442
I guess I should ask, what is the baton address used for?


[08-Nov-18 05:36 PM] Bryan_Beus#6442
do all batontxids take place in the baton address?


[08-Nov-18 05:40 PM] jl777c#5810
the batontxid is the baton utxo sent to the baton address


[08-Nov-18 05:47 PM] Bryan_Beus#6442
this is changing my understanding


[08-Nov-18 05:48 PM] Bryan_Beus#6442
I think part of the difficulty in understanding this is that I'm still confused about how cc addresses work...


[08-Nov-18 05:48 PM] Bryan_Beus#6442
when a publisher does `oraclesregister`, do they get both a `baton` and `batontxid`?


[08-Nov-18 05:49 PM] Bryan_Beus#6442
I'm looking through the method, but it's a long complicated hex


[08-Nov-18 05:49 PM] Bryan_Beus#6442
and I don't see any mention of baton in `oraclesregister`


[08-Nov-18 05:49 PM] jl777c#5810
baton address is just the address of the publisher


[08-Nov-18 05:49 PM] jl777c#5810
normal address


[08-Nov-18 05:50 PM] jl777c#5810
Getscriptaddress(batonaddr,regtx.vout[1].scriptPubKey);


[08-Nov-18 05:50 PM] jl777c#5810
oh, sorry it is a CC address


[08-Nov-18 05:50 PM] jl777c#5810
which is a CC script derived from the publishers pubkey, so it has the publishers pubkey and the oracles eval code


[08-Nov-18 05:51 PM] jl777c#5810
that is put into crypto-conditions serialization


[08-Nov-18 05:51 PM] jl777c#5810
then it is hashed and that is the OP_CHECKCRYPTOCONDITIONS script


[08-Nov-18 05:52 PM] jl777c#5810
I then use the normal method of calculating bitcoin addresses by hashing the CC vout scriptPubkey, adding KMD prefix and base58 encoding it


[08-Nov-18 05:52 PM] jl777c#5810
if anything about the CC vout is changed, the address changes


[08-Nov-18 05:52 PM] jl777c#5810
so a different pubkey changes the CC address


[08-Nov-18 05:52 PM] jl777c#5810
a different evalcode, changes the CC address


[08-Nov-18 05:52 PM] jl777c#5810
a different cryptocondition (1of2, 2of2, etc) will change the CC address


[08-Nov-18 05:53 PM] jl777c#5810
the CC address is just the base58 encoding of the serialized cryptocondition hash


[08-Nov-18 05:53 PM] jl777c#5810
so each pubkey gets one CC address per different CC


[08-Nov-18 06:49 PM] Bryan_Beus#6442
interesting. I think i follow that. Will save it.

going to write instructions and more details about cc addresses soon


[08-Nov-18 07:13 PM] Bryan_Beus#6442
curious, in `oraclesregister`, why do we have the user indicate the desired publisher by using `batonutxo`, and not `baton`? 

as the `baton` address doesn't change, but the `batonutxo` does,  why do we use `batonutxo`?


[08-Nov-18 09:31 PM] Bryan_Beus#6442
@jl777c 

another question, I don't see a method for adding more funds to a subscription. is the `datafee` on `oraclessubscribe`, is that acting like an advance depost, so you have to put in more than the minimum fee?


[08-Nov-18 09:32 PM] Bryan_Beus#6442
also, do you have to subscribe to have any kind of special access to the oracle? or is it that once an oracle uploads data, it's open sourced?


[08-Nov-18 10:01 PM] Deleted User#0000
You just subscribe more than once, I think... .or at least thats how the Chat dAPP is using it.


[08-Nov-18 10:36 PM] jl777c#5810
subscribe more to prepay more


[08-Nov-18 10:36 PM] jl777c#5810
all data is on the blockchain


[08-Nov-18 10:36 PM] jl777c#5810
however it is possible to provide encrypted data to limit who gets the data


[09-Nov-18 12:30 AM] Bryan_Beus#6442
so, for example, a publisher would write a script or something that would send a key to the addresses from which the subscription fees come?


[09-Nov-18 12:31 AM] Bryan_Beus#6442
Also, this question from earlier:

curious, in oraclesregister, why do we have the user indicate the desired publisher by using batonutxo, and not baton? 

as the baton address doesn't change, but the batonutxo does,  why do we use batonutxo?


[09-Nov-18 12:37 AM] jl777c#5810
i think you are confused about batons


[09-Nov-18 12:38 AM] jl777c#5810
oraclesregister is done only by the publisher


[09-Nov-18 12:38 AM] jl777c#5810
he creates the first baton


[09-Nov-18 12:38 AM] jl777c#5810
blockchains dont have addresses in them, just pubkeys or hashes


[09-Nov-18 12:39 AM] jl777c#5810
by specifying a specific baton utxo, you specify the baton address and further, the specific tx in the linked list


[09-Nov-18 12:43 AM] Bryan_Beus#6442
ok, I think I get that. thanks


[09-Nov-18 02:12 AM] passcombo.com üè¥‚ò†üçã#0622
is such CC possible? -> https://twitter.com/PassCombo/status/1060834025827418112

{Embed}
PassComboCom üõ°Ô∏è (@PassCombo)
https://twitter.com/PassCombo/status/1060834025827418112
@Falkvinge The idea could be good only if conditioned by user using smart contract - so that when I die (my condition would be no tx for 1 year) my funds would go to family, friends or organization I support. Not sure if BSV can achieve that. I believe ETH, EOS, Lisk or KM...
Twitter


[09-Nov-18 02:13 AM] passcombo.com üè¥‚ò†üçã#0622
time-based user conditioned tx from specific address


[09-Nov-18 02:13 AM] passcombo.com üè¥‚ò†üçã#0622
best would be if the "code" would run even if wallet off - not dependent on specific machine?


[09-Nov-18 02:32 AM] jl777c#5810
if you lock your funds in to a special contract, then it can be claimed by heirs if you dont use the funds for a year


[09-Nov-18 02:37 AM] actionslacks#4072
this is one of the problems that if solved, could be a big deal.


[09-Nov-18 02:38 AM] jl777c#5810
it seems rather a trivial thing to do...


[09-Nov-18 02:39 AM] actionslacks#4072
Thats a good way to do it. If you don't move the funds within a year, the keys you gave to your beneficiary would have access to the funds


[09-Nov-18 02:39 AM] jl777c#5810
basically you want a DMS


[09-Nov-18 02:40 AM] jl777c#5810
so there is the big stash of funds locked in the inheritance address, a set of smaller amount addresses are referenced, if all of them are idle for the specified amount of time, the heir can spend the big stash


[09-Nov-18 02:41 AM] jl777c#5810
the owner is free to withdraw funds from the big stash at any time


[09-Nov-18 02:42 AM] actionslacks#4072
so how reliable would the date keeping be? would it be referenced to a particular block height?


[09-Nov-18 02:44 AM] jl777c#5810
it would be X amount of time/blocks from the last time any of the referenced addresses sent any funds


[09-Nov-18 02:45 AM] jl777c#5810
simpler to make it blocks (minutes)


[09-Nov-18 02:46 AM] jl777c#5810
simplest case is to refer to the big stash address itself. then if you stop using it, it can be claimed


[09-Nov-18 02:47 AM] actionslacks#4072
is cc modular enough to do this with other coins or would it be exclusive to kmd?


[09-Nov-18 02:47 AM] actionslacks#4072
I guess all you need is to display a message with the key


[09-Nov-18 02:48 AM] jl777c#5810
any CC activated chain can be used


[09-Nov-18 02:49 AM] jl777c#5810
if tokens are supported, then tokenized versions of other coins can also be done,but that makes it more complicated to do


[09-Nov-18 02:50 AM] actionslacks#4072
It would be pretty trick to hack some thing like a ledger hardware wallet to do it for you.


[09-Nov-18 02:54 AM] actionslacks#4072
your heirs plug it in, open the app, "funds not accessible"... wait a year. "I'm dead, here's your inheritance"


[09-Nov-18 03:01 AM] jl777c#5810
ledger wouldnt support it


[09-Nov-18 03:13 AM] actionslacks#4072
ledger the company? or the hardware itself is not capable of referencing the contract?


[09-Nov-18 03:14 AM] jl777c#5810
ledger only does normal taddr tx, not CC


[09-Nov-18 03:19 AM] actionslacks#4072
so is it just a matter of writing the firmware to make cc work with an appropriate chipset?


[09-Nov-18 03:22 AM] actionslacks#4072
idk, I'm way out of my depth here. just spitballing


[09-Nov-18 03:23 AM] jl777c#5810
considering how much work it was to get rewards claiming working, getting CC support is like 1000x the effort


[09-Nov-18 03:23 AM] jl777c#5810
maybe by the year 2500


[09-Nov-18 03:28 AM] actionslacks#4072
Yeah I've been following that. lukechilds made the magic happen.


[09-Nov-18 07:53 AM] Bryan_Beus#6442
Hey @Mihailo 

Whenever you are ready.


[09-Nov-18 08:01 AM] Mihailo#5902
Hey, go ahead


[09-Nov-18 08:01 AM] Mihailo#5902
@Bryan_Beus Wanna continue in DM?


[09-Nov-18 08:01 AM] Bryan_Beus#6442
Sure


[09-Nov-18 08:02 AM] Bryan_Beus#6442
well...


[09-Nov-18 08:02 AM] Bryan_Beus#6442
let's talk about general stuff here, then any specific technical stuff in dm


[09-Nov-18 08:02 AM] Mihailo#5902
Ok


[09-Nov-18 08:02 AM] Bryan_Beus#6442
We're going over... channels, right?


[09-Nov-18 08:02 AM] Mihailo#5902
Yep


[09-Nov-18 08:03 AM] Bryan_Beus#6442
How would you introduce the channels smart contract?


[09-Nov-18 08:03 AM] Bryan_Beus#6442
What's it generally about, and how does it work?


[09-Nov-18 08:03 AM] Bryan_Beus#6442
I'll take your description and turn this into a paragraph or three, depending on how complex.


[09-Nov-18 08:08 AM] Mihailo#5902
Channels CC is a mechanism to make instant payments between two points without a need to wait for transactions to get in the chain and be confirmed. This possible because the funds are locked in a special CC address that could be spent only by owners of private keys for those two pubkeys that are used in creating channel and then funds are released with each payment by the sender to receiver. After that tx with locking funds is protected with dPoW (notarized)  the receiving party can be sure it will receive funds at the moment the payment tx gets in the mempool.


[09-Nov-18 08:09 AM] Bryan_Beus#6442
So channels creates instant payments -- verified as soon as they are in the mempool.


[09-Nov-18 08:09 AM] Bryan_Beus#6442
that's a useful feature!


[09-Nov-18 08:09 AM] Mihailo#5902
Correct


[09-Nov-18 08:09 AM] Mihailo#5902
Very


[09-Nov-18 08:10 AM] Bryan_Beus#6442
Can we combine this with other cc's?


[09-Nov-18 08:11 AM] Mihailo#5902
Well, there is idea to combine it with other CCs to be able to instant pay tokens or tokenized deposit from gateway and etc.


[09-Nov-18 08:11 AM] Mihailo#5902
It is not so simple to combine multiple CCs


[09-Nov-18 08:12 AM] Bryan_Beus#6442
ok


[09-Nov-18 08:12 AM] Bryan_Beus#6442
so, this is mostly for instant payments, and while it can be combined in some scenarios, it can be difficult to accomplish this


[09-Nov-18 08:12 AM] Mihailo#5902
Well, for now it is a single CC


[09-Nov-18 08:15 AM] jl777c#5810
if we can add token sending via channels, then people can channel send tokens that represent, whatever the tokens represent


[09-Nov-18 08:17 AM] Bryan_Beus#6442
ok


[09-Nov-18 08:17 AM] Bryan_Beus#6442
can you please describe for me the general flow of using channels?


[09-Nov-18 08:18 AM] Bryan_Beus#6442
for example, you create a channel with the `rpccall` method,

then you X with `rpccall`,

then X with `rpccall`,

and once the txid enters the mempool, the payment can be considered spent


[09-Nov-18 08:18 AM] Bryan_Beus#6442
and anything about withdrawing from the cc or ending it, etc.


[09-Nov-18 08:27 AM] Mihailo#5902
This is the regular flow of using channel:
```
Channel create: channelsopen destination_public_key number_of_payments payment_amount - this creates a channel between the one creating channel and the destination public key with number of payments defined of certain denomination.
Example: channesopen 025d2c1b95cd6e49ca2159ed58ef748a52c90efb2509d174c091328713388b6e3a 100 10000 - will create a channel with 100 payments of 10k satoshi - in total 0.01 coin.

Channel payment: channelspayment open_tx_id number_of_pyaments_released - this will send the specified amount to receiver
Example channelspayment 636318273631cb3d205bde25bcf0cf3137984e2b866c3aa879040f906fb47c3b 10 - will send 100k satoshi to receiver.
```


[09-Nov-18 08:27 AM] TonyL#3577
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=211514340 here are the RPC calls for channels (channels page)

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
faucet


 Faucet Contract
 Available RPC calls, What does this Call do?, Example Test Command, Example Expected Output, What to Check, Comments, Testing Result
 faucetaddress[ pubkey], Will display central faucet address and your faucet contract address for your pubkey.
 pubk...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[09-Nov-18 08:27 AM] TonyL#3577
With responses examples


[09-Nov-18 08:28 AM] Bryan_Beus#6442
Perfect


[09-Nov-18 08:30 AM] Mihailo#5902
Now when the sender does not want to have the funds in a channel anymore (want to withdraw them and use them anywhere else) he needs to close the channel and after channel close is notarized he can retreive the funds. This is important to show the recevier that the channel will be closed and it won't receive new funds anymore.
```
Channel close: channelsclose open_tx_id - it will close the channel

Channel refund: channelsrefund open_tx_id close_tx_id - this will retreive funds from channle adress back to creators pubkey address, but only after close is notarized
```


[09-Nov-18 08:33 AM] Mihailo#5902
You have also channel info to list all the available channels in which you are involved, and to get specific info for particular channel:
```
Channel info: channelsinfo - will list all the channels available and their open_tx_id
channelsinfo open_tx_id - will list info for that particular channel
```


[09-Nov-18 08:37 AM] Bryan_Beus#6442
ok, great. 

I think I can work with all of this. Will let you know when I have more questions. Thank you both.


[09-Nov-18 08:38 AM] Bryan_Beus#6442
@Mihailo 

will you be around for a bit?


[09-Nov-18 08:39 AM] Mihailo#5902
Well, I'm leaving soon, but will check Discord periodically so you can ask me and I'll respond asap.


[09-Nov-18 08:39 AM] Bryan_Beus#6442
great, thx


[11-Nov-18 03:07 PM] Larbiouajani#7820
https://get.cryptobrowser.site/3696600

{Embed}
https://get.cryptobrowser.site/3696600
CryptoTab Browser - Lightweight, fast, and ready to mine!
CryptoTab Browser is the world‚Äôs first web browser with built-in mining features. Familiar Chrome user interface is perfectly combined with extremely fast mining speed. Mine and browse at the same time!
https://images-ext-2.discordapp.net/external/byzO4o50INdmWXXAqCG7mpH0NACUU-y8IfyJD6Y-Y5s/https/get.cryptobrowser.site/static/django-cryptotab-sharing/cryptotab_sharing/images/message_images/cryptotab_browser_og-img-sqaure-ready-02%402x.png

{Reactions}
ü§î (2) 

[12-Nov-18 12:24 PM] jl777c#5810
@TonyL @Mihailo found the oracles validation error. was latent and small utxo exposed the problem


[12-Nov-18 12:24 PM] jl777c#5810
also, i am not seeing any problems on the dealer node, is the stress test still going?


[12-Nov-18 12:26 PM] TonyL#3577
I've experimented with spam scripts and seems it's broke it. Let me check


[12-Nov-18 12:27 PM] TonyL#3577
Oh, so `oraclefeed` might work now


[12-Nov-18 12:30 PM] jl777c#5810
fix will be tomorrow

{Reactions}
üëå 

[12-Nov-18 12:36 PM] TonyL#3577
@jl777c stress-test should be live


[12-Nov-18 02:41 PM] TonyL#3577
My ISP made a stress-test for me instead by random downtime for a 2 hours  :trollface: 
Was surprised how many things it's possible to do when there is no internet at all

{Reactions}
üòï 

[13-Nov-18 12:30 AM] gcharang#6833
@TonyL Hey! I am testing https://github.com/tonymorony/trollbox_gui  .Can you give me chain params?

{Embed}
https://github.com/tonymorony/trollbox_gui
tonymorony/trollbox_gui
My plays with Python Kivy GUI framework and Stakedchain OraclesCC chat concept - tonymorony/trollbox_gui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[13-Nov-18 12:35 AM] TonyL#3577
Hey @gcharang ! 
Now I'm on: ```./komodod -ac_name=CCNG1 -ac_supply=1000 -ac_reward=10000000000000 -ac_cc=1 -addnode=159.69.201.122 -addnode=159.69.45.70 -daemon```


[13-Nov-18 12:36 AM] gcharang#6833
And he repo is jl777/komodo - FSM branch ?


[13-Nov-18 12:37 AM] TonyL#3577
Yup

{Reactions}
üëç 

[13-Nov-18 12:37 AM] TonyL#3577
Oh have to notice repo in manual as well. And will make some chain kinda official testing chain to mention it in repo


[13-Nov-18 02:13 AM] CrisF#3405
@TonyL I've given it a decent try.  Think it's my ubuntu 16.04 ```MTDev is not supported by your version of linux```


[13-Nov-18 02:15 AM] CrisF#3405
Also tried with trollbox with pubkey trouble.  Think it may be to my setup of having FSM in a diferent directory.
Will have a try again later.


[13-Nov-18 12:09 PM] TonyL#3577
@CrisF Komodo even maybe installed on different server - since app working via RPC - just connection needed to be manually hardcoded atm (https://github.com/tonymorony/trollbox_gui#rpc-connection)
Hmm try something like a  `sudo apt-get install libmtdev1`
I've tried only on 18.04

{Embed}
https://github.com/tonymorony/trollbox_gui
tonymorony/trollbox_gui
My plays with Python Kivy GUI framework and Stakedchain OraclesCC chat concept - tonymorony/trollbox_gui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[13-Nov-18 02:58 PM] TonyL#3577
Downloading 16.04.5 (Xenial Xerus) ISO to check dependencies here


[13-Nov-18 03:11 PM] CrisF#3405
@TonyL Thanks!

{Reactions}
üëç 

[13-Nov-18 05:27 PM] TonyL#3577
@CrisF Started on Ubuntu 16.04 - only one additional step was needed - updating Python to 3.6 by this guide (including this step sudo rm /usr/bin/python3
sudo ln -s python3.5 /usr/bin/python3) http://ubuntuhandbook.org/index.php/2017/07/install-python-3-6-1-in-ubuntu-16-04-lts/
After python updating execute packages installing string again since python3-kivy will update

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/512076165062590466/unknown.png

{Embed}
Ji m
http://ubuntuhandbook.org/index.php/2017/07/install-python-3-6-1-in-ubuntu-16-04-lts
How to Install Python 3.6.1 in Ubuntu 16.04 LTS


[13-Nov-18 05:38 PM] TonyL#3577
@Deleted User Is it possible to put not only pip packages / additional files into virtualenv but also python itself?
On my to-do list arrange packaging/build executables (as soon as RPC connection details will be not hardcoded)
It's not worked on python3.5 because 3.6+ working with bytes type different way


[13-Nov-18 05:40 PM] TonyL#3577
Will try, thanks üëç First time working with external libraries hehe


[13-Nov-18 08:44 PM] CrisF#3405
@TonyL Thank you!


[13-Nov-18 09:12 PM] Deleted User#0000
virtual env is better to not screw system... but not aleays the easiest for noobs... ideally it should *just work*


[13-Nov-18 10:33 PM] TonyL#3577
Current installation is for contributors/devs mostly - in general there is a possibility to build multi-platforms executables in used framework, just have to learn how üòÉ

{Reactions}
üëå 

[14-Nov-18 03:40 AM] TonyL#3577
Seems that I solved problems most of the problems with connectivity problems in TUI - just switched RPC connection lib to this one https://github.com/barjomet/slick-bitcoinrpc Moreover creator promised much better perfomance.
One which I used before (https://github.com/jgarzik/python-bitcoinrpc) seems tricky somewhere and losing RPC connection after X seconds of inactivity - so not recommended to use ))

{Embed}
https://github.com/barjomet/slick-bitcoinrpc
barjomet/slick-bitcoinrpc
Just another Python bitcoin-rpc client. Contribute to barjomet/slick-bitcoinrpc development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/SDFu-LWiBRUmIlMMm-0_3Dd1MSXeNB0wXEUaJ-UB50M/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/7434416

{Reactions}
üëå (2) 

[14-Nov-18 09:45 AM] Mihailo#5902
@TonyL I have fixed oracle (I think üòÉ ) so you can start testing it. I think previous created oracles can be used. But this fix is a hardfork change because there is change in validation so you must update all nodes.
https://github.com/jl777/komodo/pull/948

{Embed}
https://github.com/jl777/komodo/pull/948
Oracle Fix by Mixa84 ¬∑ Pull Request #948 ¬∑ jl777/komodo
Reorder vins so that only one normal vin is before CC vin and other normal vins moved to end
Fixed AddOracleInputs to add utxos only from that oracle
Fixed sharing funds from all oracles for that p...
https://images-ext-2.discordapp.net/external/5PP5Rc1dp6Lo2v8nwnTvQmRdaXpEf9xjHeMr0XyppBs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/39563265

{Reactions}
üëå 

[15-Nov-18 12:18 AM] TonyL#3577
@Mihailo Oraclefeed seems working smooth now  üöÄ 
Almost finished with environment setup to proceed with 2/3 gw deposits/withdrawals test


[15-Nov-18 12:26 AM] TonyL#3577
Time to time oraclefeed printing errors regards not enough oraclesinputs (but there is a few hundred oraclessubscribe UTXOs) but in the next block heights continue to oraclize

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/512543998339055619/unknown.png


[15-Nov-18 12:59 AM] TonyL#3577
Seems problem is on my UTXO generator side. Batch of oraclessubscribes generating but not sending now straight


[15-Nov-18 01:17 AM] TonyL#3577
There is some strange behaviour in general - part of sending transactions just disappear  and not coming mempool(seems that's why UTXO generator getting txids but these transactions not coming to mempool and publisher funds not increasing)
Like a on screenshot - was broadcasted data for 1098079 - 1098085 heights

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/512556806304694294/unknown.png


[15-Nov-18 01:18 AM] TonyL#3577
But actually there is a gap

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/512556949619867658/unknown.png


[15-Nov-18 01:18 AM] jl777c#5810
do you wait until a tx is in the mempool before sending the next one?


[15-Nov-18 01:19 AM] jl777c#5810
unlike dice, with oracles it is important to get each one in the mempool


[15-Nov-18 01:20 AM] TonyL#3577
Is oraclefeed waiting for it?


[15-Nov-18 01:21 AM] TonyL#3577
```broadcast TONY1 txid.(21698e5c49fe5f0a8114379cee14ec7ac177e5554dba5aac6e544d5c8d4557c8)
KMD ht.1098079 <- 5fc110006f358efd1f8351fc6d03e33eae24918acecb8a0256aa50d98d8af30f1b1d850da585de3b0f68912fdc5fc2a7f4bd5e4d8f08a00249899d074752ece3b327acac
f.B M.2 of N.3 size.3 -> bWyntMYswmnUn2zDeCxAxW5TFaNdN8R9pu
9fde01fe12fbe970df8bebaa1b7cb63c1b76d417ebae35c3089fdd0874a60b2e 1 100000000
3f4f2a01d1f183430732651e6b2ef3e86cc9b500b13072e0486480efc00e464d 0 10000
```
```
./komodo-cli -ac_name=TONY1 getrawtransaction 21698e5c49fe5f0a8114379cee14ec7ac177e5554dba5aac6e544d5c8d4557c8 1
error code: -5
error message:
No information available about transaction```


[15-Nov-18 01:24 AM] TonyL#3577
I'll wait re-write UTXO generator to wait previous tx get to mempool - seems things working different now after latest mempool changes


[15-Nov-18 01:24 AM] TonyL#3577
Now getting huge gaps in heights


[15-Nov-18 01:24 AM] jl777c#5810
mempool usage is always a bit unreliable. but not even checking if it got into your own mempool is guaranteeing your nodes idea of current state will be different than what it actually is


[15-Nov-18 01:26 AM] TonyL#3577
oraclefeed printing some txids but there is no such transactions on chain (and don't see any printouts why it's not getting to mempool)


[15-Nov-18 01:26 AM] jl777c#5810
no errors in debug.log


[15-Nov-18 01:26 AM] jl777c#5810
I assume if you wait for confirmations, it works?


[15-Nov-18 01:28 AM] TonyL#3577
```2018-11-15 09:16:36 AddToWallet 0a3589a78bca52006b5fb4588357b0a1c5ff31ae865233fbf131742504ec00bb  new
2018-11-15 09:19:30 connect() to 95.213.238.98:56247 failed after select(): Connection refused (111)
2018-11-15 09:20:17 connect() to 159.65.134.48:56247 failed after select(): Connection refused (111)
2018-11-15 09:20:44 connect() to 217.182.203.106:56247 failed after select(): Connection refused (111)```


[15-Nov-18 01:28 AM] TonyL#3577
I guess thats it


[15-Nov-18 01:30 AM] TonyL#3577
But none of my nodes have such IPs, not sure why this info in .komodo/TONY1/debug.log 
Some blocking from google cloud side maybe ü§î


[15-Nov-18 01:33 AM] TonyL#3577
Hetzner node seems working ok, 2 Google Cloud nodes got issues with transactions broadcasting (part broadcasting part just dissapear)


[15-Nov-18 01:33 AM] TonyL#3577
So problem should be on my network configuration side, not software

{Reactions}
ü§ï 

[15-Nov-18 03:05 AM] TonyL#3577
Interesting - with default GCP firewall restrictions I was able to sync the chain but it's partially blocked transactions broadcasting.
After I've created custom GCP network rules it's seems working ok now. Kinda note if someone will use GCP for assetchain creation  üòÉ


[15-Nov-18 04:02 AM] Mihailo#5902
I think I also had one situation where my tx disappeared, but I thought maybe it was something on my side I did wrong. If it happens elswhere then it could be an issue.


[15-Nov-18 04:14 AM] Mihailo#5902
@TonyL maybe you can hold on testing 2of3 gateway as I have an update for that that I will submit very soon. So you can then test gateway completley. I would focus on this oracle fix to check that everything works correctly.


[15-Nov-18 04:21 AM] TonyL#3577
It was an interesting network issue - firewall blocking rules allowed to synch the chain but didn't allow to interact with mempool for a 3 nodes from 5 in chain.


[15-Nov-18 04:21 AM] TonyL#3577
@Mihailo Will it be a hardforking change? Just tuned everything üòÇ


[15-Nov-18 04:23 AM] TonyL#3577
Eating a lot of time spinoff the new testing chain for 5 gateways test nodes: ensure the pubkeys, fill balance, import pubkeys to KMD chain, register/subscrie on oracle


[15-Nov-18 04:23 AM] TonyL#3577
Seems it's a time for more automation üòÉ


[15-Nov-18 04:25 AM] gcharang#6833
@TonyL you might find the scripts used in https://github.com/StakedChain/staked of some help to start with

{Embed}
https://github.com/StakedChain/staked
StakedChain/staked
repo for using staked chains, for testing and production use - StakedChain/staked
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[15-Nov-18 04:27 AM] Mihailo#5902
@TonyL, hm I think it will not be a hardfork change. I started implementing validation but I can turn it off until it is complete.


[15-Nov-18 04:31 AM] TonyL#3577
Thanks @gcharang üëç 
@Mihailo If there some new changes are coming it's better to test with these changes to not do the same twice, just buzz me when changes are pushed and I'll test rapidly this time - have 5 servers now ready and synced


[15-Nov-18 04:31 AM] TonyL#3577
It's better to test with coming changes because anyway it will need a re-test after it


[15-Nov-18 04:36 AM] Mihailo#5902
üëç


[15-Nov-18 04:50 AM] Mihailo#5902
@TonyL @jl777c Do we have some special defines in code for testing purposes? I was thinking for the function that will check if tx is notarized/confirmed it will be very long to wait for 60 confirms or notarization so we can lower the number just in testing. Do we have some mechanism already?


[15-Nov-18 04:51 AM] jl777c#5810
no we dont


[15-Nov-18 04:51 AM] jl777c#5810
feel free to add one


[15-Nov-18 04:51 AM] jl777c#5810
then build can be done with -DTESTMODE


[15-Nov-18 04:52 AM] Mihailo#5902
Ok, something like that would be good.


[15-Nov-18 05:30 AM] sergipcm#2275
just for curiosity is someone building oracles to retrieve data based on cryptoconditions?


[15-Nov-18 05:31 AM] sergipcm#2275
would be interesting to test some easy to fetch data into an oracle cryptocondition


[15-Nov-18 05:31 AM] sergipcm#2275
I would like to test them with our backend at some point if it kind of works


[15-Nov-18 05:32 AM] sergipcm#2275
I'm talking about easy data feeds such as fiat rates, crypto rates etc


[15-Nov-18 05:35 AM] sergipcm#2275
aggregating data from several services and pushing it through a blockchain data feed service would would be an easy pas-as-you-go option an probably easy to monetize around the community


[15-Nov-18 05:36 AM] sergipcm#2275
is someone aware of anyone building something like this around?


[15-Nov-18 05:37 AM] jl777c#5810
oraclefeed has a mode that pushes price into oracle


[15-Nov-18 05:38 AM] TonyL#3577
https://github.com/tonymorony/trollbox_gui in trollbox messenger gui using oraclesCC to post/read messages

{Embed}
https://github.com/tonymorony/trollbox_gui
tonymorony/trollbox_gui
My plays with Python Kivy GUI framework and Stakedchain OraclesCC chat concept - tonymorony/trollbox_gui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[15-Nov-18 05:39 AM] TonyL#3577
https://github.com/tonymorony/kmd_cc_qa here also some scripts which publish / read from oracles like a basic examples what is possible to do

{Embed}
https://github.com/tonymorony/kmd_cc_qa
tonymorony/kmd_cc_qa
CLI Tools for Komodo CC. Contribute to tonymorony/kmd_cc_qa development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[15-Nov-18 05:40 AM] TonyL#3577
https://github.com/StakedChain/trollbox non gui version of oraclesCC chat

{Embed}
https://github.com/StakedChain/trollbox
StakedChain/trollbox
On chain real time chat for KMD assetchains. Contribute to StakedChain/trollbox development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[15-Nov-18 06:04 AM] sergipcm#2275
thanks checking


[15-Nov-18 07:00 AM] Alright#0419
@sergipcm 
https://github.com/StakedChain/StakedNotary/blob/master/oraclefetch.sh
https://github.com/StakedChain/StakedNotary/blob/master/oraclepush.sh

{Embed}
https://github.com/StakedChain/StakedNotary/blob/master/oraclefetch.sh
StakedChain/StakedNotary
repo to launch and manage STAKED notary nodes. Contribute to StakedChain/StakedNotary development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759

{Embed}
https://github.com/StakedChain/StakedNotary/blob/master/oraclepush.sh
StakedChain/StakedNotary
repo to launch and manage STAKED notary nodes. Contribute to StakedChain/StakedNotary development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759

{Reactions}
üëç 

[15-Nov-18 07:00 AM] Alright#0419
scripts for pushing/retrieving arbitrary jsons on chain


[15-Nov-18 10:32 AM] dukeleto#7326
that looks shiny


[16-Nov-18 02:38 AM] sergipcm#2275
looks nice, hope to have some hours, some day, to dig into it, thx @Alright


[16-Nov-18 02:48 AM] TonyL#3577
https://youtu.be/kcb8lRpZs6s pilot voice video guide for gateways TUI 
Any feedback is welcome - fist such experience üòÇ

{Embed}
Tony Lysakov
https://youtu.be/kcb8lRpZs6s
Gateways CC 1 - Gateway Binding
In this short video demonstration, I've created a gateway for external coin value transfer on Komodo cluster asset chain. Download TUI: https://github.com/to...
https://images-ext-1.discordapp.net/external/k4VxPGEYtAgvzJdDChJf0Q2oDK8mu-5lDv1SWysMKAc/https/i.ytimg.com/vi/kcb8lRpZs6s/maxresdefault.jpg


[16-Nov-18 04:20 AM] TonyL#3577
@Bryan_Beus Hi!  As discussed I've added examples of gatewaysCC RPC calls to test plan (it's not much useful without guide but I think better to have it to keep integrity). Also calls examples can be found here: https://github.com/jl777/komodo/blob/FSM/src/cc/gateways.cpp#L53

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/cc/gateways.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[16-Nov-18 11:40 AM] Bryan_Beus#6442
@TonyL 

Great, thank you


[16-Nov-18 11:41 AM] Bryan_Beus#6442
I will try and add them soon.


[16-Nov-18 11:42 AM] Bryan_Beus#6442
@TonyL 

Before you gave the recent extras, I went through the tutorial and cleaned it up.

Can you please read and verify? I will add the other information/rpc calls soon.

https://siddhartha-komodo.github.io/slate/#smart-contract-gateways


[16-Nov-18 02:59 PM] TonyL#3577
@Bryan_Beus Do you have some draft where is possible to left the comments for this doc?


[16-Nov-18 04:31 PM] Bryan_Beus#6442
You can make a pull request on the github repo

{Reactions}
üëç 

[16-Nov-18 04:31 PM] Bryan_Beus#6442
https://github.com/siddhartha-komodo/slate/pulls

{Embed}
https://github.com/siddhartha-komodo/slate/pulls
siddhartha-komodo/slate
Beautiful static documentation for your API. Contribute to siddhartha-komodo/slate development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/qOB7Mrn3S7jBMxcz6lPwwSHpFhmfuh7RfREC561uKFc/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/33014953


[16-Nov-18 09:15 PM] TonyL#3577
Great üëç , made a little PR for this gateways guide @Bryan_Beus

{Reactions}
üëç 

[17-Nov-18 03:45 AM] TonyL#3577
Mempool checking for previous `oraclessubscribe` transaction before sending next one helped to not miss part of expected transactions.
So gateway creation part of tui seems complete and not buggy atm. Would be great if someone will try to create different gateways with it


[17-Nov-18 02:57 PM] TonyL#3577
Trying to repair unit tests for dice on latest FSM. But facing very strange behaviour atm.
I'm placing 10 bets in test and every time getting win result (most of the time it's refund)
1 strange thing is that I'm getting refund for more than in half of bets and never getting loss
2 strange thing is that  on refund sometimes `"won": 0.0998`, sometimes  `"won": 0.0999`
3 strange thing that on bet of 1 coin sometimes I'm getting : ` {"status": "win", "won": 0.00029998, "result": "success"}` what is totally confusing


[17-Nov-18 02:59 PM] TonyL#3577
I'm broadcasting a bet, mining a block with it, then broadcasting dicefinish, mining a block with it, then calling dicestatus and only after it broadcasting next bet


[17-Nov-18 03:03 PM] dukeleto#7326
@TonyL very interesting. My suggestion is to break down things into "this is probably a bug in the test" versus "this is probably a change in behavior"


[17-Nov-18 03:03 PM] dukeleto#7326
@TonyL why is the response `{"status": "win", "won": 0.00029998, "result": "success"} ` totally confusing? I have been out of the loop a bit üòÉ


[17-Nov-18 03:04 PM] TonyL#3577
Test doing nothing special in this place, just `dicebet ["LUCKY", "9f0df07668e9050bf80b11394fd012f50c694630c9a27ca211953127b0926336", "1", "2"]`


[17-Nov-18 03:04 PM] TonyL#3577
It's totally confusing because I'm betting 1 coin, not even sure in which cases I can get back 0.00029998


[17-Nov-18 03:05 PM] dukeleto#7326
i think i wrote these tests originally, but a lot has been changing


[17-Nov-18 03:05 PM] dukeleto#7326
the tests may be making assumptions that are no longer true


[17-Nov-18 03:06 PM] dukeleto#7326
or, the tests may have been fragile. They depended too much on each other, and now one change makes all the tests after that fail


[17-Nov-18 03:06 PM] dukeleto#7326
try to find the very first thing that fails, concentrate on that. All other failures could be caused by the first "bad test" or "no longer correct" assumption


[17-Nov-18 03:08 PM] dukeleto#7326
"never getting a loss" could maybe be related to lack of entropy


[17-Nov-18 03:08 PM] TonyL#3577
Thing above is what's fails @dukeleto 
Before I've placed 10 bets, counted wins and loses to check if balanace changing correct and it's worked because I've received "loss" or "win" of bet amount * odds+1


[17-Nov-18 03:09 PM] TonyL#3577
I've repaired most of the places before, such as a new rule of at least 100 entropy transactions for bets placing and disabling of odds 1


[17-Nov-18 03:12 PM] TonyL#3577
Will try to repeat it manually, I think problem maybe is that dealer and player nodes are the same in test


[17-Nov-18 03:12 PM] TonyL#3577
Maybe re-worked dice not expecting such case


[17-Nov-18 03:12 PM] dukeleto#7326
@TonyL do you mean that it would be better to have 2 nodes in the test, one a dealer and the other all the players?


[17-Nov-18 03:13 PM] dukeleto#7326
is there new code that is sensitive to that?


[17-Nov-18 03:13 PM] dukeleto#7326
it may be time to split things up, do we still have all CC tests in one file?


[17-Nov-18 03:14 PM] TonyL#3577
Yup, all CC tests are in one file atm


[17-Nov-18 03:15 PM] TonyL#3577
Yes, I think such separation needed anyway - 1 node for dealer (creating/funding plan), 2 node for player - placing bets


[17-Nov-18 03:25 PM] TonyL#3577
@dukeleto Is it ok to separate tests as a classes to files like a dice.py and run in cryptoconditions.py `run_tests` as a dice.run_dice_tests() or better to have separate run_tests in each file and run it like a `PYTHON_DEBUG=1  qa/pull-tester/rpc-tests.sh dice --tracerpc` ?


[17-Nov-18 03:48 PM] dukeleto#7326
@TonyL does only the dice tests need 2 nodes, or will other CC's benefit from having 2 nodes?


[17-Nov-18 03:50 PM] dukeleto#7326
@TonyL i am leaning towards having cryptoconditions_dice.py, cryptoconditions_oracle.py, one test file per contract type


[17-Nov-18 03:51 PM] dukeleto#7326
@TonyL do the nodes need different config/CLI arguments, or can they be the same config?


[17-Nov-18 03:52 PM] dukeleto#7326
we can keep cryptoconditions.py, the original test file. New tests for each contract type, go in a dedicated file for each. That keeps things simple


[17-Nov-18 04:15 PM] TonyL#3577
@dukeleto at the moment seems only dice need additional nodes - in future gateways CC tests will need multiply nodes as well


[17-Nov-18 04:17 PM] TonyL#3577
Seems additional node will make faucet tests easier as well


[17-Nov-18 05:29 PM] TonyL#3577
I think same config is ok


[17-Nov-18 05:40 PM] dukeleto#7326
@TonyL ok, it sounds like all tests can inherit a setup with 2 nodes, and then each CC test can decide how to use each node


[17-Nov-18 05:41 PM] dukeleto#7326
it's a more realistic test environment as well, some errors/bugs cannot be found by doing everything on the same node


[18-Nov-18 09:44 AM] jl777c#5810
@TonyL FSM branch has a massive amount of new code to support sapling. please make sure all the CC are still working as well as they used to


[18-Nov-18 10:25 AM] SHossain#0007
@here who is running the CCNG chain on their node?


[18-Nov-18 10:30 AM] Alright#0419
likely no one


[18-Nov-18 10:30 AM] Alright#0419
I had the seed nodes


[18-Nov-18 10:31 AM] Alright#0419
killed them, if you need something from it, I'll put them up


[18-Nov-18 10:31 AM] Alright#0419
otherwise, just use another chain as it was spammed to hell


[18-Nov-18 10:31 AM] Alright#0419
oracleslist, dicelist, etc


[18-Nov-18 10:31 AM] Alright#0419
all spammed like crazy


[18-Nov-18 10:32 AM] SHossain#0007
i still have 2 nodes running CCNG. will DM you


[18-Nov-18 02:55 PM] siu#3920
any reason why submiting rawtx for oracledata gets me this error: ```error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```


[18-Nov-18 02:57 PM] siu#3920
running KMDICE from dev branch


[18-Nov-18 03:06 PM] Alright#0419
is the publisher funded?


[18-Nov-18 03:06 PM] Alright#0419
you need to do `oraclesregister` then `oraclessubscribe` to fund it


[18-Nov-18 03:13 PM] siu#3920
i did


[18-Nov-18 03:15 PM] siu#3920
"lifetime": "10.00000000",
      "funds": "29.83720000",
      "datafee": "0.00010000"


[18-Nov-18 03:20 PM] siu#3920
btw, FSM branch failed compilation in latest commit ```In file included from cryptoconditions/src/asn/Condition.h:14:0,
                 from cryptoconditions/src/cryptoconditions.c:17:
cryptoconditions/src/asn/SimpleSha256Condition.h:14:26: fatal error: OCTET_STRING.h: No such file or directory
compilation terminated.
Makefile:2435: recipe for target 'cryptoconditions/src/cryptoconditions.lo' failed
make[2]: *** [cryptoconditions/src/cryptoconditions.lo] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f rpc/.deps/libbitcoin_server_a-rawtransaction.Tpo rpc/.deps/libbitcoin_server_a-rawtransaction.Po
make[2]: Leaving directory '/home/siu/komodo/src'
Makefile:4968: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/siu/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1
```


[18-Nov-18 03:26 PM] SHossain#0007
Don't try FSM for now

{Reactions}
‚òù üíØ üëå 

[18-Nov-18 03:26 PM] SHossain#0007
Use jl777 branch


[18-Nov-18 03:34 PM] Alright#0419
don't expect FSM to work at all right now


[19-Nov-18 05:10 AM] siu#3920
ok.


[19-Nov-18 05:11 AM] siu#3920
but im using dev branch and still cant get oracles to publish


[19-Nov-18 05:11 AM] jl777c#5810
jl777 branch


[19-Nov-18 05:11 AM] jl777c#5810
is not dev branch


[19-Nov-18 05:11 AM] jl777c#5810
jl777 is the old FSM


[19-Nov-18 05:19 AM] siu#3920
ok, let me try with jl777 then.


[19-Nov-18 08:00 AM] TonyL#3577
@dukeleto am I understand correct that to add the new node I just have to change this param https://github.com/jl777/komodo/blob/jl777/qa/rpc-tests/cryptoconditions.py#L33
Then add addr1, pubkey1, privkey1 and add one more entry in `nodes` extra_args and then operate with second node as `nodes[1]`?

Also is it enough to declare new test file here https://github.com/jl777/komodo/blob/jl777/qa/pull-tester/rpc-tests.sh#L13 ?

{Embed}
https://github.com/jl777/komodo/blob/jl777/qa/rpc-tests/cryptoconditions.py
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Embed}
https://github.com/jl777/komodo/blob/jl777/qa/pull-tester/rpc-tests.sh
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[19-Nov-18 10:50 AM] dukeleto#7326
@TonyL Yes and yes


[19-Nov-18 10:51 AM] dukeleto#7326
@TonyL tho it hasn't been tested to start 2 nodes in regest, there could be gremlins


[19-Nov-18 10:51 AM] dukeleto#7326
@TonyL in fact, i believe there are some gremlins, which is why I didn't go further at the time


[19-Nov-18 10:52 AM] dukeleto#7326
do you see how the ports are hard-coded at https://github.com/jl777/komodo/blob/jl777/qa/rpc-tests/cryptoconditions.py#L46 ?

{Embed}
https://github.com/jl777/komodo/blob/jl777/qa/rpc-tests/cryptoconditions.py
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[19-Nov-18 10:52 AM] dukeleto#7326
instead of using the python lib 2 start 2 nodes for you, i would manually start the 2 nodes with your own `setup_network` for now


[19-Nov-18 10:53 AM] dukeleto#7326
the python test library doesn't fully understand how to spin up N nodes and know the correct port numbers for them


[19-Nov-18 10:53 AM] dukeleto#7326
this is related to AC's having a specific port combination, based on the AC name


[19-Nov-18 10:54 AM] dukeleto#7326
so REGTEST AC always has the same port, which is why that hack works in our test suite, to know the rpcport ahead of time. The zcash test infra we inherited, the test suite tells the node which ports to use.


[19-Nov-18 10:55 AM] dukeleto#7326
@TonyL we could have REGTEST and REGTEST2 AC's, and then you could put in the fixed ports that REGTEST2 would have


[19-Nov-18 10:56 AM] dukeleto#7326
@TonyL so `extra_args`, which is currently of length 1, would become an array of length 2, the second entry would be REGTEST2 values, with `self.num_nodes=2`, that might work


[19-Nov-18 12:12 PM] TonyL#3577
@dukeleto Hmm, thanks - understood the idea in general but have to try to be sure I understood it üòÉ


[19-Nov-18 12:53 PM] dukeleto#7326
@TonyL trying is the best way to learn. give it a try and i can help you if you get stuck and/or review the PR


[19-Nov-18 12:54 PM] dukeleto#7326
my time is limited right now, i won't be able to work on it myself, but I can advise you


[19-Nov-18 12:54 PM] TonyL#3577
Sure, thanks for all your help @dukeleto üôå


[19-Nov-18 12:58 PM] dukeleto#7326
@TonyL and to explain, if it's not clear, `extra_args` is an array of arrays, and each array is the extra arguments added to that nodes startup `komodod`, in addition to whichever are added by default. Currently it's only specifying the args for one node, and we want to update that and specify the extra_args for 2 nodes


[19-Nov-18 12:59 PM] dukeleto#7326
make the -ac_name of the new node REGTEST2, and then specify the p2p+rpc ports of REGTEST2, leave everything else the same


[19-Nov-18 12:59 PM] dukeleto#7326
that has a reasonable chance of working üòÉ


[19-Nov-18 12:59 PM] dukeleto#7326
it's time somebody else understood these internals üòâ


[19-Nov-18 01:00 PM] TonyL#3577
Aren't the nodes will be on different chains in such case?


[19-Nov-18 01:00 PM] dukeleto#7326
hmm, maybe that was the gremlins üòÉ


[19-Nov-18 01:01 PM] dukeleto#7326
in that case, we need to over-ride rpc/p2p port, correctly, and maybe that is where I stopped


[19-Nov-18 01:01 PM] dukeleto#7326
this is confusing stuff, i went deep into making the ZEC test suite work on KMD


[19-Nov-18 01:01 PM] dukeleto#7326
ZEC has no asset chains


[19-Nov-18 01:01 PM] dukeleto#7326
so KMD asset chains are a complexity the original code was never designed for


[19-Nov-18 01:02 PM] dukeleto#7326
i just did the smallest amount of work to "make it work" for a single node and single asset chain


[19-Nov-18 01:02 PM] dukeleto#7326
the "better" solution is to teach our test infra how to really manage this stuff, but in the mean-time, we need a slightly-less-bad solution


[19-Nov-18 01:04 PM] dukeleto#7326
@TonyL try using the same ac_name, but diff rpc ports


[19-Nov-18 01:04 PM] dukeleto#7326
there may be some bugs, but that use should "work", in an ideal world. The internals may need to learn some stuff


[19-Nov-18 01:05 PM] dukeleto#7326
there is no way that our tests know how to calculate the correct RPC port for a random AC, but if we use REGTEST, it's known


[19-Nov-18 01:05 PM] TonyL#3577
I'll try, maybe have to catch ports on fly via getinfo ü§î


[19-Nov-18 01:05 PM] dukeleto#7326
you can't call getinfo if you don't know the correct rpc port üòÉ


[19-Nov-18 01:05 PM] dukeleto#7326
everything breaks


[19-Nov-18 01:07 PM] dukeleto#7326
you need 2 nodes


[19-Nov-18 01:07 PM] dukeleto#7326
each need their own set of p2p/rpc ports


[19-Nov-18 01:07 PM] dukeleto#7326
one can use the defaults, the other needs them specified, somehow


[19-Nov-18 01:07 PM] dukeleto#7326
that is the core of the problem


[19-Nov-18 01:08 PM] TonyL#3577
Yup, I see


[19-Nov-18 01:08 PM] jl777c#5810
there is a way to calculate the rpc port


[19-Nov-18 01:08 PM] jl777c#5810
but it is out of date


[19-Nov-18 01:08 PM] dukeleto#7326
it could happen, that the config file itself disagrees with your CLI args, or that they are not specified and over-ridden by CLI


[19-Nov-18 01:09 PM] dukeleto#7326
i remember stopping, when I didn't want to parse ACNAME.conf to get rpc ports


[19-Nov-18 01:09 PM] jl777c#5810
but for rpc port you should be able to use -rpcport=nnnn on the commandline


[19-Nov-18 01:09 PM] dukeleto#7326
yes, i think that is enough


[19-Nov-18 01:09 PM] dukeleto#7326
komodod must be started with the same values that you use in komodo-cli


[19-Nov-18 01:09 PM] dukeleto#7326
the test suite can get confused, if everything is not specified correctly


[19-Nov-18 01:10 PM] dukeleto#7326
@TonyL i think the gremlins have an HQ in the test infra library itself, there are some hacks. The extra_args might be only part of the solution


[19-Nov-18 01:11 PM] dukeleto#7326
@TonyL here is some of it: https://github.com/jl777/komodo/blob/master/qa/rpc-tests/test_framework/util.py#L79

{Embed}
https://github.com/jl777/komodo/blob/master/qa/rpc-tests/test_framework/util.py
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[19-Nov-18 01:11 PM] dukeleto#7326
i highly suggest reading that entire file, even if it all doesn't make sense


[19-Nov-18 01:12 PM] dukeleto#7326
it's well written code, the functions names tell you what is going on


[19-Nov-18 01:12 PM] TonyL#3577
Will do üëç


[19-Nov-18 01:12 PM] dukeleto#7326
that code generates the conf used for komodod regtest daemons


[19-Nov-18 01:13 PM] dukeleto#7326
instead of specifying in the conf file, it's passed in via extra_args


[19-Nov-18 01:13 PM] dukeleto#7326
that was the hack I found, after thrashing around a bit


[19-Nov-18 01:14 PM] dukeleto#7326
```    if extra_args[0] == '-ac_name=REGTEST':
        url = "http://rt:rt@%s:%d" % (rpchost or '127.0.0.1', 64368)
    else:
        url = "http://rt:rt@%s:%d" % (rpchost or '127.0.0.1', rpc_port(i))```


[19-Nov-18 01:14 PM] dukeleto#7326
from https://github.com/jl777/komodo/blob/master/qa/rpc-tests/test_framework/util.py#L226

{Embed}
https://github.com/jl777/komodo/blob/master/qa/rpc-tests/test_framework/util.py
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[19-Nov-18 01:14 PM] dukeleto#7326
that is gremlins HQ


[19-Nov-18 01:14 PM] dukeleto#7326
it's a massive hack, that made everything work


[19-Nov-18 01:15 PM] dukeleto#7326
that will break for any AC not named REGTEST, and also does not support more than 1 node


[19-Nov-18 01:15 PM] TonyL#3577
Have to look around the code and think a bit, sure there is a solution


[19-Nov-18 01:16 PM] dukeleto#7326
there should be, i just made it work for the situation at hand


[19-Nov-18 01:17 PM] dukeleto#7326
@TonyL the extra_args stuff is necessary, and then there may be a few bits of new code in the internals to make it work


[20-Nov-18 07:32 AM] siu#3920
Oracles is acting weird for me


[20-Nov-18 07:32 AM] siu#3920
```01000000040a4ecd486e74c0856675de8600a6151358634113beebfd79a5a1a59972c9e23802000000484730440220388ab3db17365e2d75aeaf43e2877fa1aebfddd56471c47cbf3151e704d0455102207b88ac19482439f2ae60d08c11d049a5fed30bcaddcfd40120cb064a70debc2901ffffffff2e8f6a0c0c2a65fc9b1d3c4a021ee04f7c619f30b3b80ef50b4a5486fae395f2010000007b4c79a276a072a26ba067a56580210276c574489419e4431525e098fdbffe41e81e48e4aae55bd6c897fcba9bec5e64814012e7b39ea78bbc05829fc09e376613138c73e7dc582255c6d770e78b81f5774e70b6fa9ee350787116e5c8b46fa531b08bb0b99f3a574a8a06a91f4c21ddab54a100af038001eca10001ffffffff450777b15dcddbce836505c08319b14ac4732f597b1ce10e2fc85f9d868cf224000000007b4c79a276a072a26ba067a56580210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57a814081837add22a773ed45e32bf29a2318d2ec8f4bf6bae00ec06dcae15abc26b76a3ded5cb2b5e36de14b612664d7d2c17f1b7145cc9775b25759e827cb4e34fe18a100af038001eca10001ffffffff0bd1065ab91ae4f1d102f6c246b2c86448a7161d80fc8beeee49a8971d87b13502000000494830450221009dada2822ce22600296dd3e4eceb1455d51cc9e4505eb3786f78687522bb476b02200729c745dd312a4086ac3c9563bee8df0fcad178e753fc63d0722ebaa7577f1401ffffffff05f0b9f50500000000302ea22c8020344295a6b458d8597d9a3a211cd3f2b69d8108a03542cc311fb45e538e7e19fd8103120c008203000401cc1027000000000000302ea22c80209cafa8580047aa339e37619087f8155724ee5a286b4355bef5613f63daad71aa8103120c008203000401cc102700000000000023210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57aac102700000000000023210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57aac0000000000000000746a4c71ec4473fa67a32173d366f56e7e8f80905d397fdd23a276ac94c521d4e0ca3f305b802e8f6a0c0c2a65fc9b1d3c4a021ee04f7c619f30b3b80ef50b4a5486fae395f2210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57a0c0a302e30313031303030310a00000000
23caac614201eaa091591b848c3dacc332c8a47e96f0eb37598d7534dc588119
```


[20-Nov-18 07:32 AM] siu#3920
```01000000040a4ecd486e74c0856675de8600a6151358634113beebfd79a5a1a59972c9e23802000000484730440220388ab3db17365e2d75aeaf43e2877fa1aebfddd56471c47cbf3151e704d0455102207b88ac19482439f2ae60d08c11d049a5fed30bcaddcfd40120cb064a70debc2901ffffffff2e8f6a0c0c2a65fc9b1d3c4a021ee04f7c619f30b3b80ef50b4a5486fae395f2010000007b4c79a276a072a26ba067a56580210276c574489419e4431525e098fdbffe41e81e48e4aae55bd6c897fcba9bec5e64814012e7b39ea78bbc05829fc09e376613138c73e7dc582255c6d770e78b81f5774e70b6fa9ee350787116e5c8b46fa531b08bb0b99f3a574a8a06a91f4c21ddab54a100af038001eca10001ffffffff450777b15dcddbce836505c08319b14ac4732f597b1ce10e2fc85f9d868cf224000000007b4c79a276a072a26ba067a56580210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57a814081837add22a773ed45e32bf29a2318d2ec8f4bf6bae00ec06dcae15abc26b76a3ded5cb2b5e36de14b612664d7d2c17f1b7145cc9775b25759e827cb4e34fe18a100af038001eca10001ffffffff0bd1065ab91ae4f1d102f6c246b2c86448a7161d80fc8beeee49a8971d87b13502000000494830450221009dada2822ce22600296dd3e4eceb1455d51cc9e4505eb3786f78687522bb476b02200729c745dd312a4086ac3c9563bee8df0fcad178e753fc63d0722ebaa7577f1401ffffffff05f0b9f50500000000302ea22c8020344295a6b458d8597d9a3a211cd3f2b69d8108a03542cc311fb45e538e7e19fd8103120c008203000401cc1027000000000000302ea22c80209cafa8580047aa339e37619087f8155724ee5a286b4355bef5613f63daad71aa8103120c008203000401cc102700000000000023210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57aac102700000000000023210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57aac0000000000000000746a4c71ec4473fa67a32173d366f56e7e8f80905d397fdd23a276ac94c521d4e0ca3f305b802e8f6a0c0c2a65fc9b1d3c4a021ee04f7c619f30b3b80ef50b4a5486fae395f2210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57a0c0a302e30313031303030310a00000000
```


[20-Nov-18 07:33 AM] siu#3920
i have tried multiple times to do `oraclesdata`


[20-Nov-18 07:33 AM] siu#3920
but i get the same exact rawtx and txid on multiple tries


[20-Nov-18 07:37 AM] siu#3920
@TonyL @jl777c any particular issue with oracles?


[20-Nov-18 07:37 AM] siu#3920
in jl777 branch*


[20-Nov-18 07:44 AM] siu#3920
this is for KMDICE.


[20-Nov-18 09:31 AM] dukeleto#7326
@siu what error are you getting that is different from what you expect?


[20-Nov-18 09:35 AM] siu#3920
That it generates exatly the same hash on every oraclesdata i submit.


[20-Nov-18 09:36 AM] dukeleto#7326
@siu i am playing the Dumb Devils Advocate, partly because it's fun, and partly because the new oracle CC is new to me


[20-Nov-18 09:36 AM] dukeleto#7326
@siu why is that a bug?


[20-Nov-18 09:37 AM] dukeleto#7326
we need to write some oracle CC tests, so understanding this will help me and probably others


[20-Nov-18 09:39 AM] siu#3920
Expected behaviour is that i submit one oraclesdata and once that transaction gets confirmed another oraclesdata submission would create a new hash.


[20-Nov-18 09:39 AM] siu#3920
On this case the tx doesnt seem to get to the mempool in the first place


[20-Nov-18 09:45 AM] jl777c#5810
"On this case the tx doesnt seem to get to the mempool in the first place" <- that is the problem


[20-Nov-18 09:45 AM] dukeleto#7326
you have to broadcast it, right?


[20-Nov-18 09:45 AM] dukeleto#7326
@siu are you getting some logs about rejection from mempool, or is CC code "failing silently" in your opinion?


[20-Nov-18 09:46 AM] dukeleto#7326
we have very little error checking in Oracles, so far


[20-Nov-18 10:01 AM] siu#3920
Failing silently


[20-Nov-18 10:06 AM] dukeleto#7326
@siu some necessary pre-condition that is required, may not be present


[20-Nov-18 10:06 AM] dukeleto#7326
like enough entropy or something is not confirmed


[20-Nov-18 10:53 AM] siu#3920
Hmm.. right, that could be it


[20-Nov-18 11:34 AM] dukeleto#7326
@jl777c if I want to submit PR's for error-checking stuff for oracles + other new CCs, is the FSM branch the correct place to send those?


[20-Nov-18 11:36 AM] jl777c#5810
FSM branch

{Reactions}
üëç 

[20-Nov-18 01:42 PM] dukeleto#7326
i have some error checking improvements cooking, i will send a PR soon. changing branches made my git repo freak out, so I am making clean and testing from a clean build


[21-Nov-18 01:22 AM] TonyL#3577
@dukeleto got some progress - able to start two nodes daemons:
```connecting to http://rt:rt@127.0.0.1:64368
created proxy
connecting to http://rt:rt@127.0.0.1:64366
created proxy
Done setting up network```


[21-Nov-18 01:22 AM] TonyL#3577
But problem is synchronisation...
```DEBUG:BitcoinRPC:-2-> getinfo []
DEBUG:BitcoinRPC:<-2- {"CCid": 2, "notarized": 0, "connections": 0, "prevMoMheight": 0, "notarizedhash": "0000000000000000000000000000000000000000000000000000000000000000", "notarizedtxid": "0000000000000000000000000000000000000000000000000000000000000000", "errors": "", "version": 1001550, "timeoffset": 0, "pubkey": "02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf", "KMDversion": "0.2.1", "keypoolsize": 2, "premine": 5555555, "blocks": 10, "notarizedtxid_height": "mempool", "walletversion": 60000, "difficulty": 1, "proxy": "", "reward": 10000000, "tiptime": 1542792021, "magic": -649655917, "name": "REGTEST", "paytxfee": 0.0, "keypoololdest": 1542792007, "KMDnotarized_height": 0, "longestchain": 0, "testnet": false, "rpcport": 48380, "protocolversion": 170003, "p2pport": 48379, "notarized_confirms": 0, "balance": 0.0, "relayfee": 1e-06}
DEBUG:BitcoinRPC:-3-> getinfo []
unexpected fname.(/tmp/testfxgS1t/node1) vs REGTEST [REGTEST] n.7 len.21 (t/node1)
DEBUG:BitcoinRPC:<-3- {"CCid": 2, "notarized": 0, "connections": 0, "prevMoMheight": 0, "notarizedhash": "0000000000000000000000000000000000000000000000000000000000000000", "notarizedtxid": "0000000000000000000000000000000000000000000000000000000000000000", "errors": "", "version": 1001550, "timeoffset": 0, "pubkey": "024026d4ad4ecfc1f705a9b42ca64af6d2ad947509c085534a30b8861d756c6ff0", "KMDversion": "0.2.1", "keypoolsize": 2, "premine": 5555555, "blocks": 0, "notarizedtxid_height": "mempool", "walletversion": 60000, "difficulty": 1, "proxy": "", "reward": 10000000, "tiptime": 1296688602, "magic": -649655917, "name": "REGTEST", "paytxfee": 0.0, "keypoololdest": 1542792009, "KMDnotarized_height": 0, "longestchain": 0, "testnet": false, "rpcport": 48380, "protocolversion": 170003, "p2pport": 48379, "notarized_confirms": 0, "balance": 0.0, "relayfee": 1e-06}```


[21-Nov-18 01:25 AM] TonyL#3577
Actually my daemons are with RPC ports which I've specified in config (64368, 64366) - I guess `getinfo` printing same port because of regtest mode

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/514733024269697025/unknown.png


[21-Nov-18 01:26 AM] TonyL#3577
Hmm maybe `-addnode=127.0.0.1:firstnodeport` can do a trick to make it syncing


[21-Nov-18 01:28 AM] TonyL#3577
Otherwise only way I see is separate virtual network creation for second node - such way sync should work via `-addnode=`


[21-Nov-18 01:37 AM] dukeleto#7326
@TonyL cool!


[21-Nov-18 01:37 AM] dukeleto#7326
the test suite handles connecting your nodes together


[21-Nov-18 01:38 AM] TonyL#3577
Hmm, sync_all() never synching:
```DEBUG:BitcoinRPC:-4-> getblockcount []
DEBUG:BitcoinRPC:<-4- 10
DEBUG:BitcoinRPC:-5-> getblockcount []
DEBUG:BitcoinRPC:<-5- 0
DEBUG:BitcoinRPC:-6-> getblockcount []
DEBUG:BitcoinRPC:<-6- 10
DEBUG:BitcoinRPC:-7-> getblockcount []
DEBUG:BitcoinRPC:<-7- 0
DEBUG:BitcoinRPC:-8-> getblockcount []
DEBUG:BitcoinRPC:<-8- 10
DEBUG:BitcoinRPC:-9-> getblockcount []
DEBUG:BitcoinRPC:<-9- 0```


[21-Nov-18 01:38 AM] dukeleto#7326
what are you trying to accomplish with sync_all ?


[21-Nov-18 01:39 AM] dukeleto#7326
i am not sure it does much for your situation. `generate()` will mine a block


[21-Nov-18 01:39 AM] TonyL#3577
Yes, I can mine on both nodes but they don't have `connections:` so it's became a separate chains


[21-Nov-18 01:40 AM] dukeleto#7326
```69:    def sync_all(self):
70-        if self.is_network_split:
71-            sync_blocks(self.nodes[:2])
72-            sync_blocks(self.nodes[2:])
73-            sync_mempools(self.nodes[:2])
74-            sync_mempools(self.nodes[2:])
75-        else:
76-            sync_blocks(self.nodes)
77-            sync_mempools(self.nodes)```


[21-Nov-18 01:40 AM] dukeleto#7326
just so we can be clear, that is what sync_all does


[21-Nov-18 01:42 AM] dukeleto#7326
@TonyL no connections sounds like the nodes are not being connected together correctly. Since we are over-riding various methods, sometimes the inherited methods don't work well with that, and more methods need to be over-written


[21-Nov-18 01:44 AM] TonyL#3577
@dukeleto Hmm I think it's more routing issue


[21-Nov-18 01:44 AM] dukeleto#7326
add some `prints` to see what is going on when you run the test


[21-Nov-18 01:44 AM] TonyL#3577
Since for assetchain start when you connect second node you have to determine first node's IP in `-addnode=` param


[21-Nov-18 01:45 AM] dukeleto#7326
@TonyL where is this code? Are you assigning to `self.nodes` ?


[21-Nov-18 01:46 AM] dukeleto#7326
@TonyL yeah, i can see what you are saying. Second node needs to -addnode the first in CLI


[21-Nov-18 01:46 AM] dukeleto#7326
that is going to be in extra_args, only on the 2nd node


[21-Nov-18 01:46 AM] TonyL#3577
Yup, but both nodes are on the same IP (127.0.0.1) so some routing tricks needed


[21-Nov-18 01:47 AM] dukeleto#7326
@TonyL no routing tricks needed, different ports are enought


[21-Nov-18 01:48 AM] TonyL#3577
@dukeleto it's possible to use: `-addnode= 127.0.0.1:port` ?


[21-Nov-18 01:48 AM] dukeleto#7326
addnode ip:port


[21-Nov-18 01:48 AM] TonyL#3577
Oh ok


[21-Nov-18 01:48 AM] dukeleto#7326
yes


[21-Nov-18 01:48 AM] dukeleto#7326
also, we might need to call `connect_nodes` when there is >1 node


[21-Nov-18 01:48 AM] dukeleto#7326
i didn't call that, because we only had 1 node in our `setup_network`


[21-Nov-18 01:49 AM] dukeleto#7326
```274:def connect_nodes(from_connection, node_num):
275-    ip_port = "127.0.0.1:"+str(p2p_port(node_num))
276-    from_connection.addnode(ip_port, "onetry")
277-    # poll until version handshake complete to avoid race conditions
278-    # with transaction relaying
279-    while any(peer['version'] == 0 for peer in from_connection.getpeerinfo()):
280-        time.sleep(0.1)```


[21-Nov-18 01:49 AM] TonyL#3577
I'll try with more than 2 nodes when sync two


[21-Nov-18 01:49 AM] dukeleto#7326
connect_nodes does what you want, i think. but it doesn't do it in the same way where KMD AC's define it in the CLI, not sure it matters


[21-Nov-18 01:49 AM] TonyL#3577
```DEBUG:BitcoinRPC:<-2- {"CCid": 2, "notarized": 0, "connections": 1, "prevMoMheight": 0, "notarizedhash": "0000000000000000000000000000000000000000000000000000000000000000", "notarizedtxid": "0000000000000000000000000000000000000000000000000000000000000000", "errors": "", "version": 1001550, "timeoffset": 0, "pubkey": "02676d00110c2cd14ae24f95969e8598f7ccfaa675498b82654a5b5bd57fc1d8cf", "KMDversion": "0.2.1", "keypoolsize": 2, "premine": 5555555, "blocks": 10, "notarizedtxid_height": "mempool", "walletversion": 60000, "difficulty": 1, "proxy": "", "reward": 10000000, "tiptime": 1542793774, "magic": -649655917, "name": "REGTEST", "paytxfee": 0.0, "keypoololdest": 1542793761, "KMDnotarized_height": 0, "longestchain": 0, "testnet": false, "rpcport": 48380, "protocolversion": 170003, "p2pport": 48379, "notarized_confirms": 0, "balance": 0.0, "relayfee": 1e-06}
DEBUG:BitcoinRPC:-3-> getinfo []
DEBUG:BitcoinRPC:<-3- {"CCid": 2, "notarized": 0, "connections": 1, "prevMoMheight": 0, "notarizedhash": "0000000000000000000000000000000000000000000000000000000000000000", "notarizedtxid": "0000000000000000000000000000000000000000000000000000000000000000", "errors": "", "version": 1001550, "timeoffset": 0, "pubkey": "024026d4ad4ecfc1f705a9b42ca64af6d2ad947509c085534a30b8861d756c6ff0", "KMDversion": "0.2.1", "keypoolsize": 2, "premine": 5555555, "blocks": 9, "notarizedtxid_height": "mempool", "walletversion": 60000, "difficulty": 1, "proxy": "", "reward": 10000000, "tiptime": 1542793773, "magic": -649655917, "name": "REGTEST", "paytxfee": 0.0, "keypoololdest": 1542793763, "KMDnotarized_height": 0, "longestchain": 9, "testnet": false, "rpcport": 48380, "protocolversion": 170003, "p2pport": 48379, "notarized_confirms": 0, "balance": 0.0, "relayfee": 1e-06}```


[21-Nov-18 01:49 AM] TonyL#3577
Oh yeah


[21-Nov-18 01:50 AM] TonyL#3577
:port worked and have 2 nodes synced asset chain now


[21-Nov-18 01:50 AM] dukeleto#7326
sweet sauce


[21-Nov-18 01:50 AM] dukeleto#7326
it's nice when test suite stuff works üòÉ


[21-Nov-18 01:51 AM] TonyL#3577
Proxy creator now without `-AC_NAME=` hardcode
    ```port = extra_args[3]
url = "http://rt:rt@%s:%d" % (rpchost or '127.0.0.1', int(port[9:]))```


[21-Nov-18 01:59 AM] TonyL#3577
@dukeleto https://github.com/tonymorony/komodo/commit/ec6811d60fbf61680d2b01ab3d2056d46b5d8cf5 initial version

{Embed}
https://github.com/tonymorony/komodo/commit/ec6811d60fbf61680d2b01ab3d2056d46b5d8cf5
initial version of multi-nodes testing ¬∑ tonymorony/komodo@ec6811d
https://images-ext-1.discordapp.net/external/_FZ-6atALXBjBvMLVC1JBeWG05jXc2w_TXrppH7V6kE/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/24797699


[21-Nov-18 01:59 AM] TonyL#3577
Will try to fix dicetests with second node help and PR as soon as it's work


[21-Nov-18 02:00 AM] dukeleto#7326
@TonyL looks nice, good work!


[21-Nov-18 02:02 AM] TonyL#3577
Thanks @dukeleto ! More nodes = more fun


[21-Nov-18 02:04 AM] jl777c#5810
@dukeleto is your missing extern issue a severe one?


[21-Nov-18 02:12 AM] dukeleto#7326
@jl777c no, i thought that I messed up the FSM build maybe


[21-Nov-18 02:13 AM] jl777c#5810
it seems to build


[21-Nov-18 02:14 AM] dukeleto#7326
interesting. I would think that new CC .cpp files would need to declare `extern CCerror`, but maybe not


[21-Nov-18 02:14 AM] dukeleto#7326
if it works, don't fix it


[21-Nov-18 02:14 AM] jl777c#5810
i think it is in CCutils.h


[21-Nov-18 02:14 AM] dukeleto#7326
ok, sounds good


[21-Nov-18 02:14 AM] jl777c#5810
or CCinclude.h from the other error things


[21-Nov-18 02:15 AM] dukeleto#7326
there is so much new stuff in FSM, so many new shiny things


[21-Nov-18 02:16 AM] jl777c#5810
yes, addressindex rpc calls are broken today, but we hope to get it fixed tomorrow


[21-Nov-18 02:18 AM] dukeleto#7326
there is an qa/rpc-tests/addressindex.py but it hasn't been updated for KMD yet


[21-Nov-18 02:19 AM] dukeleto#7326
it uses lot of addresses and privkeys, which need to be converted to be valid on KMD, then those tests will probably work


[21-Nov-18 03:10 AM] TonyL#3577
@jl777c komodod from `jl777` branch crashing on my side after `faucetinfo` call:
```./komodo-cli -ac_name=TROLLT faucetinfo
error: couldn't connect to server: EOF reached (code 1)
(make sure server is running and you are connecting to the correct RPC port)```


[21-Nov-18 03:11 AM] TonyL#3577
No errors in `debug.log` or daemon printouts


[21-Nov-18 04:00 AM] TonyL#3577
Backtrace:
```Thread 9 "zcash-httpworke" received signal SIGFPE, Arithmetic exception.
[Switching to Thread 0x7fffe8ff9700 (LWP 18306)]
0x00005555557fe36a in AddFaucetInputs (cp=cp@entry=0x7fffe8ff8420, mtx=..., pk=..., total=total@entry=0, maxinputs=maxinputs@entry=0) at cc/faucet.cpp:149
149        threshold = total/maxinputs;
```


[21-Nov-18 04:34 AM] jl777c#5810
ok, fixing


[21-Nov-18 04:37 AM] jl777c#5810
updated


[21-Nov-18 06:52 AM] TonyL#3577
Not crashing anymore üëç  With second node adding was able to repair faucet unit-tests


[21-Nov-18 01:10 PM] KomodoWorld#8282
https://gist.github.com/awemany/619a5722d129dec25abf5de211d971bd this a proposed mechanism for 0conf tx on BCH, but not yet production ready. An automatic collateral that goes to the merchant in case of double spending. Another idea for a CC

{Embed}
https://gist.github.com/awemany/619a5722d129dec25abf5de211d971bd
Solving the 0-conf problem using forfeits
Solving the 0-conf problem using forfeits. GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/sQTa_tqNQiJlV5bzUy3YBDmewmXDHOkQsb9j4A3ycXs/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/13838274


[21-Nov-18 01:11 PM] jl777c#5810
channels CC already solves this issue


[21-Nov-18 01:14 PM] KomodoWorld#8282
yes but this doesn't require a channel with a specific recipient


[21-Nov-18 10:54 PM] TonyL#3577
At the moment bets on latest `jl777` seems kinda tricky, before there wasn't such behaviour:

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/515057540976082946/unknown.png


[21-Nov-18 10:54 PM] TonyL#3577
It's pending for 10-15 seconds, then result can change on fly


[21-Nov-18 10:56 PM] TonyL#3577
So not sure how to fix auto-tests now because now dicestatus sometimes return loss on first call if bet actually won + very big timeout needed before `dicestatus` call


[21-Nov-18 11:31 PM] grewalsatinder#9653
was looking around go implimentation of crypto-conditions, and came accross this github repo:
https://github.com/rfcs/crypto-conditions#implementations

{Embed}
https://github.com/rfcs/crypto-conditions
rfcs/crypto-conditions
Composable cryptographic conditionals (signatures, hashes) - rfcs/crypto-conditions
https://images-ext-2.discordapp.net/external/b22bMT9zEHSwXLATclRJN5M1u-H7RShlrbD2DnS4xMQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/20247578


[21-Nov-18 11:31 PM] grewalsatinder#9653
it has links to
JavaScript
Java
Python
Go


[21-Nov-18 11:31 PM] grewalsatinder#9653
Haskell
C


[21-Nov-18 11:32 PM] grewalsatinder#9653
has anyone tested if these linked repos works with our cryptoconditions?


[21-Nov-18 11:32 PM] grewalsatinder#9653
I'm not at the point where I can test go cryptoconditions package, but just curious to know if anyone tested other language library for our cryptoconditions implimentations


[21-Nov-18 11:32 PM] grewalsatinder#9653
@Mylo @TonyL


[21-Nov-18 11:34 PM] grewalsatinder#9653
oh just noticed C library is going to @libscott üòÑ


[21-Nov-18 11:35 PM] TonyL#3577
Make CC on Python is kinda rocket since and sweet dream for me now @grewalsatinder üòÉ


[21-Nov-18 11:36 PM] grewalsatinder#9653
I'm pretty sure you can do it mate üòâ

{Reactions}
üôå 

[21-Nov-18 11:36 PM] grewalsatinder#9653
by looking at the docs I think it should work:
https://godoc.org/github.com/go-interledger/cryptoconditions

{Embed}
https://godoc.org/github.com/go-interledger/cryptoconditions
Package cryptoconditions
This package provides a Go (golang) implementation of the Crypto-Conditions specification intended for the Interledger protocol.


[21-Nov-18 11:36 PM] grewalsatinder#9653
ü§î


[21-Nov-18 11:37 PM] grewalsatinder#9653
starred this repo, will get back to it hopefully soon üôÇ


[21-Nov-18 11:38 PM] grewalsatinder#9653
there are two go libraries üòõ


[21-Nov-18 11:38 PM] grewalsatinder#9653
https://github.com/jtremback/crypto-conditions

{Embed}
https://github.com/jtremback/crypto-conditions
jtremback/crypto-conditions
Crypto conditions in Go. Contribute to jtremback/crypto-conditions development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/idKAV9whktPMMag_gHV9_fwdq49FOc78p_zPwZ-oiec/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/1335122


[21-Nov-18 11:47 PM] TonyL#3577
Sure you'll be able to make your go implementation @grewalsatinder
Sad that all activity in this repo stopped 3 years ago and just two also inactive forks


[21-Nov-18 11:49 PM] TonyL#3577
Python one seems quite active - latest commit just 12 days ago. But have no idea from where to start to make it compatible with current komodod C code


[21-Nov-18 11:49 PM] grewalsatinder#9653
yes I see they both have too old commits


[22-Nov-18 02:50 AM] jl777c#5810
@TonyL FSM branch should be fixed. plz test with all the existing unit tests


[22-Nov-18 02:55 AM] TonyL#3577
@jl777c Ok, will go ahead now. I've supposed to temporary disable part of dice tests (reported behaviour above)


[22-Nov-18 02:58 AM] jl777c#5810
would be good to get a reproducible dice CC bug, then it could be fixed, but for now maximum coverage of all CC is the priority. we can drill down specific dice issues afterwards

{Reactions}
üëå 

[22-Nov-18 03:06 AM] TonyL#3577
On latest FSM auto-tests daemon crashing on initial 100 blocks generating stage, trying to collect information (on jl777 same tests passing)


[22-Nov-18 03:45 AM] TonyL#3577
@jl777c Issue is that on latest FSM daemon with these AC params:
```-ac_name=FSM2 -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 -addressindex=1 -spentindex=1 -addnode=159.69.45.70 -regtest```
Crashing after ```./komodo-cli -ac_name=FSM2 generate 101```
Backtrace:
```finished loading blocks FSM2
[New Thread 0x7fffd6976700 (LWP 1796)]
[New Thread 0x7fffd6175700 (LWP 1797)]
[Thread 0x7fffd6976700 (LWP 1796) exited]
[New Thread 0x7fffd5974700 (LWP 1798)]
[New Thread 0x7fffd5173700 (LWP 1799)]
[New Thread 0x7fffd4972700 (LWP 1800)]
[Thread 0x7fffd5974700 (LWP 1798) exited]
[New Thread 0x7fffc7fff700 (LWP 1801)]
[New Thread 0x7fffc77fe700 (LWP 1802)]
[New Thread 0x7fffc6ffd700 (LWP 1803)]
[New Thread 0x7fffc67fc700 (LWP 1804)]
[Thread 0x7fffc67fc700 (LWP 1804) exited]

Thread 9 "zcash-httpworke" received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7fffd917b700 (LWP 1791)]
0x0000000000000000 in ?? ()
```


[22-Nov-18 03:57 AM] TonyL#3577
So since all unit-tests using regtest mode with generate call it's not working at all atm


[22-Nov-18 04:02 AM] TonyL#3577
Actually seems for backtrace above daemon not crashed but hanged (all RPC calls hanging and it's totally unkillable - only reboot helped)


[22-Nov-18 04:02 AM] jl777c#5810
sorry, no idea what is going wrong...


[22-Nov-18 04:02 AM] jl777c#5810
does regtest mode work at all?


[22-Nov-18 04:02 AM] TonyL#3577
It's work on `jl777`


[22-Nov-18 04:03 AM] jl777c#5810
hopefully duke can fix regtest mode with the sapling merge


[22-Nov-18 04:05 AM] TonyL#3577
Hmm, if not - I have an idea to bootstrap 100 pre-generated blocks and give it to test nodes on each test execution. Not sure if this trick will work ü§î


[22-Nov-18 04:07 AM] TonyL#3577
But in such non-regtest native mode everything will need a rework... Hope @dukeleto will save the world üôå


[22-Nov-18 04:27 AM] Alright#0419
I've never understood the need for regtest unless you're trying to test KMD specific code


[22-Nov-18 04:53 AM] TonyL#3577
Actually that what unit-tests do - test specific KMD code


[22-Nov-18 05:20 AM] jl777c#5810
duplicated the crash in another context. testing fix, but you can try too


[22-Nov-18 05:27 AM] TonyL#3577
Seems the same


[22-Nov-18 05:29 AM] jl777c#5810
yes, same here. investigating


[22-Nov-18 05:54 AM] jl777c#5810
@TonyL try now, it works for me


[22-Nov-18 06:59 AM] jl777c#5810
@TonyL did it work?


[22-Nov-18 08:04 AM] dukeleto#7326
@TonyL tell me what is up with Sapling stuff


[22-Nov-18 08:20 AM] jl777c#5810
fixed a crash today

{Reactions}
üëç (2) 

[22-Nov-18 08:20 AM] jl777c#5810
regtest should work now


[22-Nov-18 04:41 PM] TonyL#3577
@jl777c @dukeleto This regtest crash seems to be solved üëç üôå

{Reactions}
üëç 

[22-Nov-18 05:49 PM] TonyL#3577
https://github.com/jl777/komodo/pull/968 @jl777c Current CC tests passing on FSM at the moment same as on jl777

{Embed}
https://github.com/jl777/komodo/pull/968
CC auto-tests changes by tonymorony ¬∑ Pull Request #968 ¬∑ jl777/...
Added second node
Fixed faucet tests
Commented not working tests
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[22-Nov-18 06:12 PM] TonyL#3577
Faced strange behaviour in test framework for oraclecreate - can't create an oracle:
```
DEBUG:BitcoinRPC:-543-> oraclescreate ["Test", "Testing", "s"]
DEBUG:BitcoinRPC:<-543- {"result": "error", "error": "couldnt create oracle"}
```
And no any other printouts. But node have balance (checking it before this call). It's not reproducing outside of test framework so problem should be somewhere in tests


[22-Nov-18 06:22 PM] TonyL#3577
@dukeleto Seems my modifications for second node adding broke all non CC tests
https://github.com/tonymorony/komodo/blob/FSM/qa/rpc-tests/test_framework/util.py#L206 issue is in this place
For non CC tests nodes creating with different args and this `REGTEST.conf` working only for `cryptocondtions.py`

{Embed}
https://github.com/tonymorony/komodo/blob/FSM/qa/rpc-tests/test_framework/util.py
tonymorony/komodo
Komodo. Contribute to tonymorony/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[22-Nov-18 06:30 PM] TonyL#3577
Is it ok solution to rollback `start_node` for compatibility with old tests and create  separate `start_cc_node` with modifications especially for cryptocondtions tests?


[22-Nov-18 09:04 PM] TonyL#3577
https://github.com/tonymorony/komodo/blob/FSM/qa/rpc-tests/test_framework/util.py#L202 @dukeleto just reincarnated `-ac_name` check gremlin üòÉ

{Embed}
https://github.com/tonymorony/komodo/blob/FSM/qa/rpc-tests/test_framework/util.py
tonymorony/komodo
Komodo. Contribute to tonymorony/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[22-Nov-18 09:37 PM] dukeleto#7326
@TonyL just now seeing your messages


[22-Nov-18 09:38 PM] dukeleto#7326
TLDR: other tests should pass, we should not break them üòÉ


[22-Nov-18 09:39 PM] TonyL#3577
Seems other tests needs sapling adjustment, trying to wrap my head atm since played with CC tests only before


[22-Nov-18 09:40 PM] TonyL#3577
Let's say https://github.com/jl777/komodo/blob/master/qa/rpc-tests/paymentdisclosure.py#L36 here 4 blocks pregenerating but there is a `sapling activation at 61`

{Embed}
https://github.com/jl777/komodo/blob/master/qa/rpc-tests/paymentdisclosure.py
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[22-Nov-18 09:41 PM] TonyL#3577
@dukeleto Could you please give the cue on which part of framework code stopping daemons from previous test / cleaning?


[22-Nov-18 11:05 PM] dukeleto#7326
@TonyL i don't quite understand your question


[22-Nov-18 11:08 PM] dukeleto#7326
@TonyL one thing to note is that many test files did not pass before, and now may fail in different ways because of sapling


[23-Nov-18 12:00 AM] TonyL#3577
@dukeleto At the moment if I run all tests - daemon/s started by previous tests not finishing/terminating automatically. So I guessed there is some part of framework code which should stop these daemons


[23-Nov-18 07:30 AM] Mylo#8306
@grewalsatinder there‚Äôs a python cc integration test suite started by @dukeleto


[23-Nov-18 11:01 AM] dukeleto#7326
@TonyL if your daemon doesn't shut down correctly, that is a bug in your code


[23-Nov-18 11:01 AM] dukeleto#7326
@TonyL it's happened to me as well, when the code that shuts down does not find the correct REGTEST.conf or doesn't get the correct CLI arguments


[23-Nov-18 11:01 AM] jl777c#5810
so with latest FSM, are there any reproducible CC bugs?


[23-Nov-18 11:01 AM] dukeleto#7326
wrong rpcport/etc


[23-Nov-18 11:02 AM] jl777c#5810
or is it working as well as it did before sapling merge?


[23-Nov-18 11:02 AM] dukeleto#7326
I haven't noticed stuff but @TonyL has been doing more lately


[23-Nov-18 01:33 PM] dukeleto#7326
@TonyL i think i see why you broke non-CC tests


[23-Nov-18 01:34 PM] dukeleto#7326
you only create a config file now, if ac_name=REGTEST


[23-Nov-18 01:34 PM] dukeleto#7326
@TonyL in `qa/rpc-tests/test_framework/util.py`


[23-Nov-18 01:55 PM] dukeleto#7326
@TonyL i just wrote some tests for -ac_algo=verushash, very inspired by CC tests file üòÉ https://github.com/jl777/komodo/pull/970

{Embed}
https://github.com/jl777/komodo/pull/970
Tests for -ac_algo=verushash by leto ¬∑ Pull Request #970 ¬∑ jl777...
This new test file starts up 2 regtest nodes with VerusHash PoW algo:
Running /home/dukeleto/git/komodo/qa/pull-tester/run-bitcoin-cli -ac_name=REGTEST -conf=/tmp/testSt2Wx8/node1/REGTEST.conf -por...
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[23-Nov-18 01:55 PM] dukeleto#7326
@TonyL soon, we will want to make our own additions to util.py, KMD flavored additions. Functions like `start_asset_chain()` and things like that, to abstract away all this extra_args uglieness


[23-Nov-18 01:57 PM] dukeleto#7326
we want to make our tests a joy to write and read. Once we have a few test files, we can see common patterns. Already with verushash.py and cryptoconditions.py, I can see how to write some convenience functions, so starting nodes is a few lines, instead of 50

{Reactions}
üëç 

[23-Nov-18 06:59 PM] TonyL#3577
@jl777c I not found any reproducible CC bugs on latests FSM so far
@dukeleto hmm but there wasn't any code which creating config in `start_node` before (https://github.com/jl777/komodo/blob/master/qa/rpc-tests/test_framework/util.py#L196). In latest PR I just added condition to create custom config for `cryptoconditions.py` only if `cryptocondtions.py` extra_args noticed - this code shouldn't affect any previous.
Moreover I've tried to run non CC tests with daemon from latest FSM and old tests files before my changes and behaviour is the same.

{Embed}
https://github.com/jl777/komodo/blob/master/qa/rpc-tests/test_framework/util.py
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[23-Nov-18 06:59 PM] TonyL#3577
```PYTHON_DEBUG=1  qa/pull-tester/rpc-tests.sh addressindex --tracerpc
=== Running testscript addressindex.py ===
Initializing test directory /var/tmp/testJsgHNZ
Writing to /var/tmp/testJsgHNZ/node0/komodo.conf
Writing to /var/tmp/testJsgHNZ/node1/komodo.conf
Writing to /var/tmp/testJsgHNZ/node2/komodo.conf
Writing to /var/tmp/testJsgHNZ/node3/komodo.conf
cmd=/root/latest_FSM/komodo/qa/pull-tester/run-bitcoin-cli
start_node: komodod started, calling : /root/latest_FSM/komodo/qa/pull-tester/run-bitcoin-cli -debug -relaypriority=0 -rpcwait getblockcount 
Running /root/latest_FSM/komodo/qa/pull-tester/run-bitcoin-cli -debug -relaypriority=0 -rpcwait getblockcount 
call komodo_args.(/root/latest_FSM/komodo/src/komodod) NOTARY_PUBKEY.()
initialized  at 1543028272
set addressindex, will reindex. could take a while.
set spentindex, will reindex. could take a while.
finished loading blocks 
fAddressIndex.1/0 fSpentIndex.1/0
fAddressIndex.1/0 fSpentIndex.1/0
height.0 slowflag.1 possible.1 cmp.0
komodo_activate_sapling.0 starting blocktime 1296688602 cmp.0
couldnt go backwards 30 blocks
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
```


[23-Nov-18 07:00 PM] TonyL#3577
At the moment all non-CC tests forever printing `[] PASSPORT iteration waiting for KOMODO_INITDONE` so I think some changes needed because of sapling


[23-Nov-18 07:01 PM] dukeleto#7326
@TonyL interesting

{Reactions}
ü§ï 

[23-Nov-18 07:08 PM] dukeleto#7326
```src/komodo_gateway.h
1377-    expired = 0;
1378-    while ( KOMODO_INITDONE == 0 )
1379-    {
1380:        fprintf(stderr,"[%s] PASSPORT iteration waiting for KOMODO_INITDONE\n",ASSETCHAINS_SYMBOL);
1381-        sleep(3);```


[23-Nov-18 07:10 PM] dukeleto#7326
INITDONE isn't being set, it seems


[23-Nov-18 08:38 PM] TonyL#3577
@dukeleto after 254 `PASSPORT iteration waiting for KOMODO_INIITDONE` it's finally
```[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
[] PASSPORT iteration waiting for KOMODO_INITDONE
komodo_activate_sapling.1 starting blocktime 1542934386 cmp.1
couldnt go backwards 30 blocks
READY for  RPC calls at 1543029035! done PASSPORT  refid.33
```
But nothing else happens


[23-Nov-18 09:05 PM] dukeleto#7326
@TonyL something is up with regtest + sapling

{Reactions}
üò∞ 

[25-Nov-18 05:15 AM] wil#2080
When can we expect CC contracts? March 2019?


[25-Nov-18 06:16 AM] jl777c#5810
they are already working


[25-Nov-18 06:20 AM] wil#2080
@jl777c Thank you.


[25-Nov-18 02:51 PM] TonyL#3577
@Mihailo Hi! Sorry for bothering you again regards JSON. Is it possible by current CC logic to make unique keys in channels list?
```./komodo-cli -ac_name=TONY1 channelsinfo
{
  "result": "success",
  "name": "Channels Info",
  "Channel": "RHgzojn327yDgcyVBbgjE3EabL7UE9ZJZN - 10 payments of 10000000 satoshi - 35cda2197938ccced033708f9b488ba1fbf038a8081918622630b98306fdffcd",
  "Channel": "RHgzojn327yDgcyVBbgjE3EabL7UE9ZJZN - 10 payments of 100000 satoshi - 277d0c2b9eecc26108baf8ad55767261f82e57ca863de5078d3489dd446f4a5b",
  "Channel": "RHgzojn327yDgcyVBbgjE3EabL7UE9ZJZN - 10 payments of 1000000 satoshi - fdff6be0cd0769063101555c26f2d1d425ddaa02d4fbb10fc31c71813e109a3d",
  "Channel": "RHgzojn327yDgcyVBbgjE3EabL7UE9ZJZN - 10 payments of 10000000 satoshi - 99ca7da938b7db8ae18a8b62734a7d2cc195027ff8dbd6a5670d10e3c4586d1d",
  "Channel": "RHgzojn327yDgcyVBbgjE3EabL7UE9ZJZN - 10 payments of 10000000 satoshi - 37b8aa4673537dcbc5913295e740b3d75e1c643e7078a1016fa93898edee8f3f",
  "Channel": "RHgzojn327yDgcyVBbgjE3EabL7UE9ZJZN - 10 payments of 10000000 satoshi - 89b4b8468c61b155e5200bfc737f1d45cb0fe14b5f2232a44aba9622cf33f6f5",
  "Channel": "RHgzojn327yDgcyVBbgjE3EabL7UE9ZJZN - 10 payments of 10000000 satoshi - 7b4a24a151d2306c2465cc6354dc09ef93f6e24fd528d7821689e8aa403636ea",
  "Channel": "RHgzojn327yDgcyVBbgjE3EabL7UE9ZJZN - 10 payments of 100000 satoshi - 218314e24afe8a9e3a1cba4a7e4891529f2393c4fd8e5f469a8c291bfc521df3"
}
```
I'm almost ready with app prototype but duplicate keys allows me to work with only last channel from list.


[25-Nov-18 08:37 PM] dukeleto#7326
agreed, duplicate keys will cause many issues


[26-Nov-18 12:44 AM] Mihailo#5902
@TonyL In channelsinfo there are no duplicate keys. The info is composed of cc address made of two pubkeys (sender and receiver), number of payments and channelopen txid. CC address is always the same between two same pubkeys, but open tx id is different for each channel. So unique indentifier for each channel is its open tx id.


[26-Nov-18 12:46 AM] TonyL#3577
Keys  (` "Channel"`) are duplicated - it's really quite big issue to work with


[26-Nov-18 12:46 AM] Mihailo#5902
I can change the output of the json so that each channel i one json object. When I was making channel CC I aimed for the info to be nice in cmd so that user can see important info.

{Reactions}
üôå 

[26-Nov-18 12:47 AM] Mihailo#5902
Oh you meant json keys. Ok, np.


[26-Nov-18 12:47 AM] Mihailo#5902
I'll make each channel one json object in array.


[26-Nov-18 12:47 AM] TonyL#3577
Oh yeah, JSON keys, I'm sorry if I'm wasn't clear üòÉ


[26-Nov-18 12:47 AM] Mihailo#5902
üëç


[26-Nov-18 05:04 AM] KNOX#9338
**Test CC on a Sapling Activated Chain**

**1.** Clone, fetch zcash sapling params and compile
```
git clone https://github.com/PirateNetwork/komodo
cd komodo
git checkout FSM
./zcutil/fetch-params.sh
./zcutil/build.sh -j$(nproc)
```
**2.** Chain params
```
./komodod -ac_name=SPLTEST -pubkey=<yourpubkey> -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 -addressindex=1 -spentindex=1 -addnode=54.36.126.42 -addnode=94.130.224.11 &
```

**3.** Start CC testing as you did before. Sapling is already activated on this chain. Just mine a block or two and use the funds.

P.S.: Make sure you use this specific repo as this already contains sapling activation code and no need for you to manually edit source and compile.

Can, anyone pin this please?

{Reactions}
üëå (2) 

[26-Nov-18 05:05 AM] KNOX#9338
@TonyL @Mihailo @dukeleto @siu @Alright ^^


[26-Nov-18 05:43 AM] SHossain#0007
@CHMEX do you mind to setup an explorer for SPLTEST chain as well? it would be beneficial for the CC testing on sapling activated chain


[26-Nov-18 05:43 AM] siu#3920
testing


[26-Nov-18 05:50 AM] SHossain#0007
```
./komodo-cli -ac_name=SPLTEST faucetfund 10000
{
  "result": "success",
  "hex": "01000000010227e4541ebe730fa14c48c8bfdf41348c495de676c3db36a5d48cfed949e347000000004847304402204872e032960e1c441219e5c0121786e2001d136749d7cacbd86a0f99d51ab1bc0220562044dbbdcb7de1d9cf53fc3fc7b1cde7d2a8181ee1bff8ae9da29ccfd4946d01ffffffff020010a5d4e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401ccf068cd792f0800002321023bf8ba872e3e4a6d60455354efc1b7daf4f87e942d8d9f2c2b9942ff91df6e0fac00000000"
}
```


[26-Nov-18 05:50 AM] SHossain#0007
```
./komodo-cli -ac_name=SPLTEST sendrawtransaction 01000000010227e4541ebe730fa14c48c8bfdf41348c495de676c3db36a5d48cfed949e347000000004847304402204872e032960e1c441219e5c0121786e2001d136749d7cacbd86a0f99d51ab1bc0220562044dbbdcb7de1d9cf53fc3fc7b1cde7d2a8181ee1bff8ae9da29ccfd4946d01ffffffff020010a5d4e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401ccf068cd792f0800002321023bf8ba872e3e4a6d60455354efc1b7daf4f87e942d8d9f2c2b9942ff91df6e0fac00000000
error code: -26
error message:
16: tx-overwinter-active
```


[26-Nov-18 05:50 AM] SHossain#0007
@jl777c ^^


[26-Nov-18 05:54 AM] jl777c#5810
it is good we tested this, yes it needs to be type 4 tx

{Reactions}
üëçüèΩ 

[26-Nov-18 05:55 AM] SHossain#0007
decoderawtransacion says version 1


[26-Nov-18 05:55 AM] SHossain#0007
```
./komodo-cli -ac_name=SPLTEST decoderawtransaction 01000000010227e4541ebe730fa14c48c8bfdf41348c495de676c3db36a5d48cfed949e347000000004847304402204872e032960e1c441219e5c0121786e2001d136749d7cacbd86a0f99d51ab1bc0220562044dbbdcb7de1d9cf53fc3fc7b1cde7d2a8181ee1bff8ae9da29ccfd4946d01ffffffff020010a5d4e8000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401ccf068cd792f0800002321023bf8ba872e3e4a6d60455354efc1b7daf4f87e942d8d9f2c2b9942ff91df6e0fac00000000
{
  "txid": "27e0a64887dcb8a190d8577e69f271b246c4778bac7ac060216015e07b3a3ebd",
  "overwintered": false,
  "version": 1,
  "locktime": 0,
```


[26-Nov-18 05:57 AM] jl777c#5810
@Decker can you look at cc/CCtx.cpp? it uses the built infunctions to make a tx, so hopefully it is a matter of changing a setting in the CMutableTransaction


[26-Nov-18 05:59 AM] jl777c#5810
the CC vouts are signed using the same cryptoconditions signing, so it must be the tx version (and the normal vouts that are not signed using sapling)


[26-Nov-18 06:04 AM] TonyL#3577
Seems all CC transactions have same 1 version now.
So seems `-regtest`  chain wasn't the best way to test CCs on sapling ü§ï


[26-Nov-18 06:04 AM] jl777c#5810
@Decker I think the problem is     auto consensusBranchId = CurrentEpochBranchId(chainActive.Height() + 1, Params().GetConsensus());
it isnt updating based on the ASSETCHAINS_SAPLING, need to add a new epoch or something like that


[26-Nov-18 06:09 AM] CHMEX#0686
@SHossain spltest.explorer.dexstats.info/
Ping me when it needs a new one / new parameters


[26-Nov-18 06:10 AM] SHossain#0007
Thank you very much again. Much appriciated üòÉ


[26-Nov-18 06:10 AM] SHossain#0007
you may need to update the daemon once we have fixes for the bug found.


[26-Nov-18 06:38 AM] TonyL#3577
CC tests passing on `PirateNetwork`without errors as well, and daemon told me that sapling activated:
```SET SAPLING ACTIVATION height.61
REGTEST sapling activation at 61```
+ when I started `-regtest` not in tests framework (when daemon crashed) CCs worked fine. 
Just checked and sapling activating fine (transactions "version": 4) in regtest mode


[26-Nov-18 06:39 AM] TonyL#3577
So `regtest` seems fooled me üò∞


[26-Nov-18 06:43 AM] jl777c#5810
wait, so without -regtest, is there a problem or no?


[26-Nov-18 06:46 AM] SHossain#0007
the output i provided with normal mode. no regtest


[26-Nov-18 07:07 AM] Mihailo#5902
Hey guys, I have built KMD from master branch in order to run KMD node (I wanted to avoid sapling changes to maybe make some problems). But when I start the daemon I get :
`komodod: main.cpp:3640: void PruneBlockIndexCandidates(): Assertion `!setBlockIndexCandidates.empty()' failed.`


[26-Nov-18 07:08 AM] Mihailo#5902
Even tried with FSM branch to run pure KMD node: `komodod: chain.cpp:147: CBlockIndex* CBlockIndex::GetAncestor(int): Assertion `pindexWalk->pprev' failed.`


[26-Nov-18 07:08 AM] Deleted User#0000
You need to -reindex it


[26-Nov-18 07:08 AM] Deleted User#0000
long standing bug, unreproducable


[26-Nov-18 07:09 AM] Mihailo#5902
Ok, will try to trnasfer chain from other node where it works. Reindex will last too long


[26-Nov-18 07:09 AM] Deleted User#0000
Usually happens syncing on system with too low ram, or a bad quality VPS where ram was over provisioned and runs out.


[26-Nov-18 07:09 AM] Mihailo#5902
Thnx üëç


[26-Nov-18 07:10 AM] Mihailo#5902
Hmmm, interesting. I have 4GB ram on that VPS, but I was compling while chain synced and was out of memory on build, and also saw in get info something about memory. Good I have one node which synced good


[26-Nov-18 07:10 AM] Deleted User#0000
Just use a boot strap yeah.. thats how we been doing staked notaries msotly, as they dont need that much ram to run.


[26-Nov-18 07:11 AM] Mihailo#5902
Bootstrap? Like transfering chain from other node?


[26-Nov-18 07:12 AM] gcharang#6833
https://bootstrap.0x03.services/komodo/KMD.html theres a tar file of KMD chain here

{Reactions}
üëç (2) 

[26-Nov-18 07:12 AM] Deleted User#0000
beat me to it


[26-Nov-18 07:17 AM] Mihailo#5902
Great, didn't knew we had that!


[26-Nov-18 07:22 AM] SHossain#0007
@gcharang it would be better if you please put that bootstrap link to compile komodo doc

{Reactions}
üëç 

[26-Nov-18 07:23 AM] gcharang#6833
But do we wnat to provide a bootstrap through official resources?


[26-Nov-18 07:25 AM] SHossain#0007
ü§î


[26-Nov-18 07:27 AM] Deleted User#0000
Probably not IMO ... its not liek it takes 48H to sync


[26-Nov-18 07:27 AM] Deleted User#0000
its really good for testing


[26-Nov-18 07:27 AM] Deleted User#0000
but everyone should not use bootstrap...


[26-Nov-18 07:27 AM] SHossain#0007
ok. ignore my lpost then


[26-Nov-18 07:28 AM] SHossain#0007
actually, it takes about 1.5 - 2 hours for a full sync for me


[26-Nov-18 07:29 AM] Deleted User#0000
Yes with very fast internet its not bad ... I was inernet limited at 50Mibt on last sync here, and it took many hours... for a ~10GB chain, it pulled in somehting lilke 100GB or more of traffic...


[26-Nov-18 08:02 AM] siu#3920
```komodo_activate_sapling.31 starting blocktime 1543234307 cmp.1
SPLTEST transition at 1 (0, 1231006505) -> (1, 1543234150)
SET SAPLING ACTIVATION height.61
SPLTEST sapling activation at 61
```


[26-Nov-18 08:02 AM] SHossain#0007
yes, it has already been activated


[26-Nov-18 08:11 AM] dukeleto#7326
@KNOX this is a good time to run the automated python tests in the PirateChain fork of komodo: `./qa/pull-tester/rpc-tests.sh cryptoconditions --tracerpc`


[26-Nov-18 08:11 AM] dukeleto#7326
if they don't pass, something is wrong


[26-Nov-18 08:18 AM] dukeleto#7326
@KNOX just some advice, that renaming the repo to `pirate-komodo` or `pirate` makes more sense, so that somebody can clone `komodo` and this pirate version of KMD into the same directory. Right now, I have to choose a custom name for it. And because I already have hundreds of repos, and every person will make their own name for the repo, it's just not ideal


[26-Nov-18 08:19 AM] Mihailo#5902
@jl777c @miketout Hey guys, I just figured out tokenconvert RPC is missing from the new FSM after sapling changes are added. Before there was rpcserver.cpp in src directory, but now I see it is moved to rpc/server.cpp and tokenconvert is not there. I'm worried that maybe something else is could also slipped with new changes...
https://github.com/jl777/komodo/blob/FSM/src/rpc/server.cpp

https://github.com/jl777/komodo/blob/572db45f9d5c80aceb2754964b40f628d57ad090/src/rpcserver.cpp

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/rpc/server.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Embed}
https://github.com/jl777/komodo/blob/572db45f9d5c80aceb2754964b40f628d57ad090/src/rpcserver.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[26-Nov-18 08:20 AM] dukeleto#7326
maybe it was removed on purpose


[26-Nov-18 08:21 AM] jl777c#5810
i think when you do a pull request, anything else missing will come back?


[26-Nov-18 08:21 AM] dukeleto#7326
depends on how branches branched from each other, and which branch you are sending the PR to


[26-Nov-18 08:22 AM] dukeleto#7326
```src/wallet/rpcwallet.cpp
6864:UniValue tokenconvert(const UniValue& params, bool fHelp)
6868:        throw runtime_error("tokenconvert evalcode tokenid pubkey amount\n");```


[26-Nov-18 08:22 AM] dukeleto#7326
latest KMD FSM branch, it's right there


[26-Nov-18 08:22 AM] dukeleto#7326
let me introduce people to a think called `grep -r`, or even better `ack` üòÉ


[26-Nov-18 08:22 AM] dukeleto#7326
also, if we had a test for it, you could run the test to see if it works üòÉ


[26-Nov-18 08:22 AM] Mihailo#5902
@dukeleto, it is in rpcwallet.cpp, but not server.cpp where all other commands are...


[26-Nov-18 08:23 AM] dukeleto#7326
@Mihailo and if you understand why, you will reach enlightenment


[26-Nov-18 08:23 AM] Mihailo#5902
@jl777c I rebased my changes on latest FSM so I do not have it either


[26-Nov-18 08:23 AM] dukeleto#7326
@Mihailo things are put in places that make the compilation work, that is all


[26-Nov-18 08:23 AM] jl777c#5810
tokenconvert is in my tree


[26-Nov-18 08:23 AM] dukeleto#7326
any other logic or sanity or "order" is an accident üòÉ


[26-Nov-18 08:23 AM] jl777c#5810
from jl777 repo?


[26-Nov-18 08:24 AM] dukeleto#7326
jl777/komodo has that RPC, I don't think there is an issue


[26-Nov-18 08:25 AM] Mihailo#5902
Hmmm, I'm looking at correct repo I think: https://github.com/jl777/komodo/blob/FSM/src/rpc/server.cpp

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/rpc/server.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[26-Nov-18 08:26 AM] jl777c#5810
oh. the code is there, but you are right not in the list of rpc calls!


[26-Nov-18 08:26 AM] Mihailo#5902
Yep


[26-Nov-18 08:27 AM] dukeleto#7326
oh, it was lost from the rpc method list, so it won't be found


[26-Nov-18 08:27 AM] dukeleto#7326
@Mihailo good find. something that could be easily caught with automated tests.... Yes, I will be the broken record about automated tests ü§ì


[26-Nov-18 08:28 AM] Mihailo#5902
My worries are that merging the changes for sapling was used from some other branch that could had some other stuff missing...


[26-Nov-18 08:29 AM] dukeleto#7326
yes, if it happened to 1 RPC, it probably happened to more than 1


[26-Nov-18 08:29 AM] Mihailo#5902
And not just RPC...


[26-Nov-18 08:29 AM] dukeleto#7326
verus does not have many RPCs that KMD does


[26-Nov-18 08:29 AM] dukeleto#7326
@Mihailo shouldn't be too hard to diff the file that lists all RPCs


[26-Nov-18 08:29 AM] dukeleto#7326
and see if there is anything missing


[26-Nov-18 08:31 AM] jl777c#5810
so far, most all the tests are working. signing CC is the only known issue, other than missing rpc def


[26-Nov-18 08:36 AM] dukeleto#7326
I am syncing SPLTEST now


[26-Nov-18 08:37 AM] SHossain#0007
@dukeleto you need to use FSM branch from PirateNetwork repo


[26-Nov-18 08:37 AM] dukeleto#7326
yup, I did, as described above


[26-Nov-18 08:37 AM] dukeleto#7326
```  "blocks": 397,
  "longestchain": 397,```

{Reactions}
üëçüèΩ 

[26-Nov-18 08:37 AM] SHossain#0007
hope you already know üòÉ


[26-Nov-18 08:39 AM] dukeleto#7326
i am running the CC tests now, on pirate-komodo


[26-Nov-18 08:40 AM] dukeleto#7326
we really need to setup Travis CI to report this stuff, maybe even on Discord, but on a "badge" on Github would be a huge improvement too


[26-Nov-18 08:40 AM] dukeleto#7326
sapling activated correctly in regtest, yay


[26-Nov-18 08:42 AM] dukeleto#7326
`./qa/pull-tester/rpc-tests.sh cryptoconditions.py --tracerpc`


[26-Nov-18 08:42 AM] dukeleto#7326
```Tests successful
--- Success: cryptoconditions.py ---

Tests completed: 1
successes 1; failures: 0```


[26-Nov-18 08:43 AM] dukeleto#7326
sweet, the tests pass


[26-Nov-18 08:43 AM] Mihailo#5902
Am I retarded or what? I have added the tokenconvert in RPClist and I cannot get it to show up in komodo-cli help or for komodo-cli to execute it. I've even done make clean and then make....
```
// tokens
    { "tokens",       "tokeninfo",        &tokeninfo,         true },
    { "tokens",       "tokenlist",        &tokenlist,         true },
    { "tokens",       "tokenorders",      &tokenorders,       true },
    { "tokens",       "tokenaddress",     &tokenaddress,      true },
    { "tokens",       "tokenbalance",     &tokenbalance,      true },
    { "tokens",       "tokencreate",      &tokencreate,       true },
    { "tokens",       "tokentransfer",    &tokentransfer,     true },
    { "tokens",       "tokenbid",         &tokenbid,          true },
    { "tokens",       "tokencancelbid",   &tokencancelbid,    true },
    { "tokens",       "tokenfillbid",     &tokenfillbid,      true },
    { "tokens",       "tokenask",         &tokenask,          true },
    //{ "tokens",       "tokenswapask",     &tokenswapask,      true },
    { "tokens",       "tokencancelask",   &tokencancelask,    true },
    { "tokens",       "tokenfillask",     &tokenfillask,      true },
    //{ "tokens",       "tokenfillswap",    &tokenfillswap,     true },
    { "tokens",       "tokenconvert",     &tokenconvert,      true },
```


[26-Nov-18 08:43 AM] Mihailo#5902
I hope I'm "what"... üòÉ


[26-Nov-18 08:43 AM] dukeleto#7326
there is another place where you have to specify how many arguments the RPC gets


[26-Nov-18 08:43 AM] Mihailo#5902
Oh, ok.


[26-Nov-18 08:44 AM] dukeleto#7326
and/or if special things happen to some arguments, like integer or stringification. It's confusing


[26-Nov-18 08:45 AM] Mihailo#5902
Do you happen to know by heart where is that place? üòâ


[26-Nov-18 08:45 AM] dukeleto#7326
@Mihailo src/rpc/client.cpp


[26-Nov-18 08:45 AM] dukeleto#7326
vRPCConvertCommands


[26-Nov-18 08:45 AM] dukeleto#7326
only RPCs that require conversion need to be listed. If you are getting an error about method not found, that is not it.


[26-Nov-18 08:46 AM] dukeleto#7326
exactly what error do you get?


[26-Nov-18 08:46 AM] Mihailo#5902
```
error code: -32601
error message:
Method not found
```


[26-Nov-18 08:46 AM] dukeleto#7326
ok, that is not related to not being in that conversion list


[26-Nov-18 08:46 AM] Mihailo#5902
And it is not in help list:
```
== Tokens ==
tokenaddress [pubkey]
tokenask numtokens tokenid price
tokenbalance tokenid [pubkey]
tokenbid numtokens tokenid price
tokencancelask tokenid asktxid
tokencancelbid tokenid bidtxid
tokencreate name supply description
tokenfillask tokenid asktxid fillunits
tokenfillbid tokenid bidtxid fillamount
tokeninfo tokenid
tokenlist
tokenorders [tokenid]
tokentransfer tokenid destpubkey amount
```


[26-Nov-18 08:47 AM] dukeleto#7326
help is dynamically generated, by looking for all defined RPCs


[26-Nov-18 08:47 AM] dukeleto#7326
so if it's not in help, are you sure you are running the latest binary? And you stopped and restarted the daemon since the last compile?


[26-Nov-18 08:49 AM] Mihailo#5902
Yep, done clean build, stopped the daemon and started again and still nothing.


[26-Nov-18 08:49 AM] Mihailo#5902
I'm on correct binary


[26-Nov-18 08:49 AM] dukeleto#7326
@Mihailo show me the diff


[26-Nov-18 08:49 AM] dukeleto#7326
https://giphy.com/gifs/show-money-maguire-9HQRIttS5C4Za

{Embed}
https://giphy.com/gifs/show-money-maguire-9HQRIttS5C4Za
https://images-ext-1.discordapp.net/external/jzI5IDQlg3sd0jeHRgOnKSlLoS8SgAkIKeMrPIv7-EE/%3Fcid%3D73b8f7b15bfc242a7735533759e5e380/https/media1.giphy.com/media/9HQRIttS5C4Za/giphy_s.gif


[26-Nov-18 08:49 AM] Mihailo#5902
of server.cpp?


[26-Nov-18 08:50 AM] dukeleto#7326
of whatever you did, something is not right


[26-Nov-18 08:50 AM] Mihailo#5902
```
diff --git a/src/rpc/server.cpp b/src/rpc/server.cpp
index 70a124b8c..2b09093ed 100644
--- a/src/rpc/server.cpp
+++ b/src/rpc/server.cpp
@@ -468,6 +468,7 @@ static const CRPCCommand vRPCCommands[] =
     { "tokens",       "tokencancelask",   &tokencancelask,    true },
     { "tokens",       "tokenfillask",     &tokenfillask,      true },
     //{ "tokens",       "tokenfillswap",    &tokenfillswap,     true },
+    { "tokens", "tokenconvert", &tokenconvert, true },
 
     /* Address index */
     { "addressindex",       "getaddressmempool",      &getaddressmempool,      true  },
```


[26-Nov-18 08:51 AM] dukeleto#7326
why is tokenfillswap commented out?


[26-Nov-18 08:51 AM] dukeleto#7326
was it like that already?


[26-Nov-18 08:51 AM] Mihailo#5902
Yes it was like that before. Don't know from when...


[26-Nov-18 08:52 AM] dukeleto#7326
i am trying that 1 line diff on my pirate-komodo repo, to see what happens


[26-Nov-18 08:54 AM] Mihailo#5902
```cpp
CRPCTable::CRPCTable()
{
    unsigned int vcidx;
    for (vcidx = 0; vcidx < (sizeof(vRPCCommands) / sizeof(vRPCCommands[0])); vcidx++)
    {
        const CRPCCommand *pcmd;

        pcmd = &vRPCCommands[vcidx];
        mapCommands[pcmd->name] = pcmd;
    }
}
```
This should populate the table with all the commands from vRPCCommands list.


[26-Nov-18 08:54 AM] dukeleto#7326
yup. But also, this code has done this kind of stuff to me many times


[26-Nov-18 08:54 AM] dukeleto#7326
especially if you don't know about the argument conversion list in a different file, it will give you errors about invalid arguments or stringify when you don't want it to


[26-Nov-18 08:54 AM] dukeleto#7326
this seems different


[26-Nov-18 08:56 AM] Mihailo#5902
What is also wierd is that on other nodes where I also used the same code (without tokenconvert in the list), I have it in komodo-cli help üòÆ


[26-Nov-18 08:56 AM] dukeleto#7326
@Mihailo you didn't restart komodod


[26-Nov-18 08:56 AM] dukeleto#7326
i just tested it


[26-Nov-18 08:56 AM] dukeleto#7326
```$ ./src/komodo-cli -ac_name=SPLTEST tokenconvert
error code: -1
error message:
tokenconvert evalcode tokenid pubkey amount
```


[26-Nov-18 08:56 AM] Mihailo#5902
I just restarted it once again when you wrote me did I


[26-Nov-18 08:56 AM] dukeleto#7326
if you don't restart komodod, you will get method not found


[26-Nov-18 08:57 AM] dukeleto#7326
@Mihailo maybe you are restarting wrong komodod


[26-Nov-18 08:57 AM] dukeleto#7326
must be SPLTEST, not any other AC or KMD komodod


[26-Nov-18 08:57 AM] Mihailo#5902
Ahhhhhh, didn't supply AC name


[26-Nov-18 08:58 AM] Mihailo#5902
So it was doing it on KMD....


[26-Nov-18 08:58 AM] Mihailo#5902
Thnx and sorry üò©


[26-Nov-18 08:58 AM] dukeleto#7326
it happens, this stuff can be confusing


[26-Nov-18 09:00 AM] dukeleto#7326
once you have 39 komodo repos on 57 servers with 99 AC running different versions, it can get complicated üòÉ


[26-Nov-18 09:00 AM] dukeleto#7326
@jl777c i have a PR to fix that token RPC and fix a small test issue coming up


[26-Nov-18 09:01 AM] jl777c#5810
ok


[26-Nov-18 09:01 AM] dukeleto#7326
@jl777c do you prefer PR's to komodo that fix PirateChain things, or PR to piratechain and you cherry-pick things from that repo?


[26-Nov-18 09:01 AM] dukeleto#7326
our workflow is getting more complex, with these komodo forks


[26-Nov-18 09:02 AM] dukeleto#7326
for now I am sending stuff to KMD, since it seems PirateChain mostly pulls and just makes a few changes


[26-Nov-18 09:02 AM] jl777c#5810
just PR to FSM repo


[26-Nov-18 09:02 AM] jl777c#5810
everything is flowing from there


[26-Nov-18 09:02 AM] dukeleto#7326
jl777/komodo is the source of all Truth


[26-Nov-18 09:02 AM] SHossain#0007
yes


[26-Nov-18 09:03 AM] SHossain#0007
PirateNetwork will be updated automatically. We are just using that one, because it has a testing timestamp setup


[26-Nov-18 09:03 AM] SHossain#0007
better than messing up codes in James' repo


[26-Nov-18 09:17 AM] dukeleto#7326
@jl777c https://github.com/jl777/komodo/pull/984

{Embed}
https://github.com/jl777/komodo/pull/984
Fsm by leto ¬∑ Pull Request #984 ¬∑ jl777/komodo
Fix the missing tokenconvert RPC and add in ac_private test.
To run this test: ./qa/pull-tester/rpc-tests.sh ac_private.py --tracerpc
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298

{Reactions}
shexy 

[26-Nov-18 09:17 AM] dukeleto#7326
ac_private.py test is also passing on SPLTEST (yay)


[26-Nov-18 09:17 AM] jl777c#5810
so CC sapling is working?


[26-Nov-18 09:18 AM] dukeleto#7326
`./qa/pull-tester/rpc-tests.sh ac_private.py --tracerpc` # run them tests


[26-Nov-18 09:18 AM] TonyL#3577
It's working in regtest


[26-Nov-18 09:18 AM] TonyL#3577
But on chain without regtest it's not


[26-Nov-18 09:18 AM] dukeleto#7326
@jl777c our automated test suite does not cover everything, but there are no failures in regtest, which is a good sign


[26-Nov-18 09:18 AM] siu#3920
``` ./komodo-cli -ac_name=SPLTEST sendrawtransaction 01000000012a488121f84959aca4b946ac51a07a7a90c3e24ed7a09beee6ce45161599244c0000000049483045022100e34a1d2f2003d945d733604c135636711c5ea4d43a58f1299f66530699d59cba02206fb5c1935104e0c978a5005614e679ff1a66f52a8188bda6fdc9a06338a080ee01ffffffff0500e40b5402000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac10270000000000002321039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94eacd04666fa150900002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac00000000000000002c6a2ae646544553540000000040420f000000000080969800000000000a00000000000000140000000000000000000000
error code: -26
error message:
16: tx-overwinter-active
```


[26-Nov-18 09:18 AM] dukeleto#7326
@TonyL what fails on "mainnet" ?


[26-Nov-18 09:18 AM] TonyL#3577
With behaviour which @SHossain reported above


[26-Nov-18 09:18 AM] siu#3920
not on my side


[26-Nov-18 09:18 AM] dukeleto#7326
let's write a test for it üòÉ


[26-Nov-18 09:18 AM] siu#3920
ok


[26-Nov-18 09:18 AM] jl777c#5810
@Decker that is a big clue. maybe regtest creates some new epochid


[26-Nov-18 09:19 AM] dukeleto#7326
ooooooh


[26-Nov-18 09:19 AM] dukeleto#7326
regtest might do some different stuff, i don't even know about epochid


[26-Nov-18 09:19 AM] TonyL#3577
So I thought that everything ok since tests passed, but it was ok only on regtest üò∞


[26-Nov-18 09:20 AM] dukeleto#7326
such is life. Tests aren't perfect, but they sure are better than having nothing

{Reactions}
Komodo 

[26-Nov-18 09:22 AM] dukeleto#7326
@SHossain scrolling up, it seems we have a bug with `decoderawtransaction` ?


[26-Nov-18 09:22 AM] SHossain#0007
yes


[26-Nov-18 09:22 AM] dukeleto#7326
it doesn't show the xtn as "overwintered", and it should


[26-Nov-18 09:23 AM] SHossain#0007
the tx version is 1,


[26-Nov-18 09:23 AM] dukeleto#7326
so we need to see, is the bug in createrawtransaction?


[26-Nov-18 09:24 AM] dukeleto#7326
decoderawtransaction is just decoding, the bug probably is earlier


[26-Nov-18 09:25 AM] dukeleto#7326
the original createrawtransaction from KMD, sounds like it didn't (correctly) learn the new changes to xtn version. Or something was undone/overwritten in the merge


[26-Nov-18 09:25 AM] dukeleto#7326
i can write a test for this


[26-Nov-18 09:27 AM] SHossain#0007
that would be nice. we are waiting for the fix


[26-Nov-18 09:27 AM] jl777c#5810
CCtx functions use the internal signtransaction


[26-Nov-18 09:27 AM] jl777c#5810
which should automatically create sapling, but i didnt update the epoch stuff enough to trigger sapling tx


[26-Nov-18 09:40 AM] jl777c#5810
this never worked before, so it couldnt have been broken


[26-Nov-18 09:40 AM] jl777c#5810
by any github thing


[26-Nov-18 09:53 AM] Mihailo#5902
From time to time my nodes seem to get out of sync and then I have:
```
AcceptBlockHeader hashPrevBlock 013b2e54229d0e2b05a87415dc90d9b1b99dcb3e05200c07162e7ed21691cb72 not found
AcceptBlock AcceptBlockHeader error
ERROR: ProcessNewBlock: AcceptBlock FAILED
```
Is there something to prevent this. I have all 5 nodes connected to each other...


[26-Nov-18 09:54 AM] SHossain#0007
which repo and branch?


[26-Nov-18 09:54 AM] SHossain#0007
are you using latest source?


[26-Nov-18 09:54 AM] Mihailo#5902
latest FSM from jl777 repo


[26-Nov-18 09:56 AM] Mihailo#5902
Or maybe I'm not on latest FSM....


[26-Nov-18 09:56 AM] Mihailo#5902
Was there any fix regarding this?


[26-Nov-18 09:56 AM] SHossain#0007
you can ignore debug.log prints sometime unless you are having issues


[26-Nov-18 09:56 AM] jl777c#5810
there was a fix over the weekend for the sync problems


[26-Nov-18 09:57 AM] SHossain#0007
yes, latest source has fixes for sync issue


[26-Nov-18 09:58 AM] Mihailo#5902
Ok üëç


[26-Nov-18 11:44 AM] Mihailo#5902 (pinned)
@TonyL I have submitted PR for gateways changes. So the flow for withdraw is changed but it considers only oraclefeed. Everything else done by the user stays the same. The thing is that now there is gatewaymarkdone tx which needs to be confirmed/notarized before the withdraw will be done on external chain. For single sig gateways it will be done right after withdraw tx, and with multisig after it is completley signed. Then after markdone is confirmed (in TESTMODE it is 2 blocks) oraclefeed will execute the withdraw on KMD. Also withdraw will not start until withdraw tx is confirmed.
To build daemon in test mode use:  `CONFIGURE_FLAGS='CPPFLAGS=-DTESTMODE' ./zcutil/build.sh -j8`
You can start testing single signature gaetway just to confirm everything is working good. And I think I'll have multisig tested tomorrow so you can then proceed with that too.


[26-Nov-18 11:46 AM] jl777c#5810
it is merged into FSM


[26-Nov-18 01:19 PM] TonyL#3577
@Mihailo Great! Will re-test it tomorrow

{Reactions}
üëå 

[27-Nov-18 03:09 PM] TonyL#3577
@Mihailo Tried non multisig gw - deposited without issues.
Withdrawal is pending (oraclefeed is up and running):
```./komodo-cli -ac_name=TONY1 gatewayspending bc17cbdf140ee569a5c9c6ddc63a0dab0d04a8822a7701858c3bc4c1c022dc0d KMD
{
  "coin": "KMD",
  "pending": [
    {
      "txid": "a454d66aad65331966423dd431bdcfda0be929128ef7c9c6e972238b7dd9b8b5",
      "txidaddr": "RSusQEbuuycWzMbGnNScf8veXUdWyt4drk",
      "withdrawaddr": "RBBGCsq4rYw5JwmYoAt9qy9hGNF8rKgvo8",
      "amount": "0.10000000",
      "confirmed_or_notarized": false
    }
  ],
  "queueflag": 0
}
```


[27-Nov-18 03:10 PM] TonyL#3577
More than 100 blocks passed since `gatewayswithdrawal`. What is the best way to troubleshoot?


[27-Nov-18 04:01 PM] TonyL#3577
Oh, chain was runned from daemon which was built without `CONFIGURE_FLAGS='CPPFLAGS=-DTESTMODE'`
Proceed both deposit and withdrawal succesfull https://kmdexplorer.io/address/RBm4FN3JhjhbVFaGKJ8DQgtgPHKXvhFMs3


[27-Nov-18 04:03 PM] TonyL#3577
Noticed that "remaining": "0.90000000" and  "issued": "0.10000000" not changed after successful withdrawal:
```{
  "result": "success",
  "name": "Gateways",
  "pubkey": "02d389e879ca68809794c0ef29869b23b4dd8e22122fcc4e8b69adb1d33752dd9d",
  "coin": "KMD",
  "oracletxid": "3f93ad9d0fceb2237e3f7ffc66a0324d96ba99deb2926fd2961255f0bad94372",
  "taddr": 0,
  "prefix": 60,
  "prefix2": 85,
  "deposit": "RBm4FN3JhjhbVFaGKJ8DQgtgPHKXvhFMs3",
  "tokenid": "77766e3965f93d3717035ad779ba090e3f3a27fc97a7bde87135e20e4b9de790",
  "totalsupply": "1.00000000",
  "remaining": "0.90000000",
  "issued": "0.10000000"
}
```
Are used tokens burn on withdrawal ?


[27-Nov-18 05:15 PM] TonyL#3577
@Bryan_Beus https://gist.github.com/tonymorony/fae7f3c6074808f7e849e791b0056221 
I wrote down all calls and outputs in manual gateway preparation/creation, deposit/withdrawal flow to this gist. Hope it'll help for documentation.

{Embed}
https://gist.github.com/tonymorony/fae7f3c6074808f7e849e791b0056221
gateway creation process calls/hexes/txids
gateway creation process calls/hexes/txids. GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[27-Nov-18 05:17 PM] Bryan_Beus#6442
Thank you!


[27-Nov-18 05:18 PM] Bryan_Beus#6442
Yes, this looks great. Just what I need.

{Reactions}
üëç 

[27-Nov-18 11:19 PM] Mihailo#5902
@TonyL I'm glad that single sig gateway works. Can you try multisig also, as I couldn't test it yet?


[27-Nov-18 11:33 PM] Mihailo#5902
Used tokens are not burnt, they are put back in gateways pubkey address so they can be reused...


[28-Nov-18 12:43 AM] TonyL#3577
@Mihailo Hmm, so it should be a bug that `remaining` and `issued` remains the same after successful withdrawal


[28-Nov-18 01:36 AM] Mihailo#5902
Probably. I don't know how it was made in the beginning, it probably looks all time deposits but it should look how much is in the gateway pubkey address.


[28-Nov-18 02:04 AM] jl777c#5810
updated FSM branch with support for creating sapling CC tx. @TonyL plz test all CC on a sapling active chain, each CMutableTransaction that is used must be explicitly enabled, so  it is possible for any CC tx to not be updated to version 4 (sapling) in which case it is invalid

{Reactions}
üëå 

[28-Nov-18 02:46 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST2 faucetfund 1000
{
  "result": "success",
  "hex": "0400008085202f890101989416af9b13eda12e11e40467c0f86908ec570b2f1df30d24f3eb11973f600000000049483045022100b01c0e57c8cff9a9f6c0451757d06b4765efffd9fab22352b986d8dfe474c12f02205f155cb1d6197cfcaff9062f865f3eb6dd188256fa08f70d412fe1bd342ba5fa01ffffffff0200e8764817000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401ccf090fb0501090000232103a52c3fc715c4e87fb80427e97c1f5c328e57ea64d1a7a3e1f442ed1a728b40f3ac000000006f0000000000000000000000000000"
}
```
```./komodo-cli -ac_name=SPLTEST2 sendrawtransaction 0400008085202f890101989416af9b13eda12e11e40467c0f86908ec570b2f1df30d24f3eb11973f600000000049483045022100b01c0e57c8cff9a9f6c0451757d06b4765efffd9fab22352b986d8dfe474c12f02205f155cb1d6197cfcaff9062f865f3eb6dd188256fa08f70d412fe1bd342ba5fa01ffffffff0200e8764817000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401ccf090fb0501090000232103a52c3fc715c4e87fb80427e97c1f5c328e57ea64d1a7a3e1f442ed1a728b40f3ac000000006f0000000000000000000000000000
8b23f96695fc36cd1556c7c85a09c52e547bdc71c602da185cb1e1b4be1f5bad```


[28-Nov-18 02:46 AM] TonyL#3577
Broadcasted what is the good sign


[28-Nov-18 02:47 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST2 getrawtransaction 8b23f96695fc36cd1556c7c85a09c52e547bdc71c602da185cb1e1b4be1f5bad 1
{
  "hex": "0400008085202f890101989416af9b13eda12e11e40467c0f86908ec570b2f1df30d24f3eb11973f600000000049483045022100b01c0e57c8cff9a9f6c0451757d06b4765efffd9fab22352b986d8dfe474c12f02205f155cb1d6197cfcaff9062f865f3eb6dd188256fa08f70d412fe1bd342ba5fa01ffffffff0200e8764817000000302ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401ccf090fb0501090000232103a52c3fc715c4e87fb80427e97c1f5c328e57ea64d1a7a3e1f442ed1a728b40f3ac000000006f0000000000000000000000000000",
  "txid": "8b23f96695fc36cd1556c7c85a09c52e547bdc71c602da185cb1e1b4be1f5bad",
  "overwintered": true,
  "version": 4,```


[28-Nov-18 02:51 AM] TonyL#3577
@SHossain @siu @Alright If you have time - could you please help re-test all CCs basic RPC calls according to the test plan on latest FSM with ` komodo_defs.h` from pirate repo?
I've started fresh chain:  ```./komodod -ac_name=SPLTEST2 -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 -addressindex=1 -spentindex=1 -addnode=159.69.201.122 -addnode=159.69.45.70 --daemon```


[28-Nov-18 03:25 AM] KNOX#9338
FSM branch updated in PirateNetwork repo


[28-Nov-18 04:52 AM] siu#3920
morning! will test now

{Reactions}
üëçüèΩ 

[28-Nov-18 05:01 AM] SHossain#0007
i'm using the original SPLTEST chain


[28-Nov-18 05:15 AM] siu#3920
we need a new chain?


[28-Nov-18 05:25 AM] SHossain#0007
@siu check the first pinned post of this channel. instructions were posted by @KNOX


[28-Nov-18 05:25 AM] siu#3920
yes, im using SPLTEST


[28-Nov-18 05:25 AM] siu#3920
i was asking since i see there is a SPLTEST2


[28-Nov-18 05:25 AM] SHossain#0007
We need to follow those instructions to compile and start the chain to test CC


[28-Nov-18 05:25 AM] SHossain#0007
i don't think we need SPLTEST2


[28-Nov-18 05:26 AM] SHossain#0007
Tony created that while the source wasn't updated in the PN repo.


[28-Nov-18 05:26 AM] SHossain#0007
he is currently busy with something and will be back soon


[28-Nov-18 05:26 AM] siu#3920
```./komodo-cli -ac_name=SPLTEST sendrawtransaction 0400008085202f89012a488121f84959aca4b946ac51a07a7a90c3e24ed7a09beee6ce45161599244c000000004948304502210090f3b79a7eefa5bbdbb4ed7f77f8a3a2e886f2b840dcd4a6cfaa5f9bd8880000022004956cdf4c32faf2e095edc9cdeef870871a3bd3549be98836019b2f928c0fbf01ffffffff0500e40b5402000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac10270000000000002321039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94eacd04666fa150900002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac00000000000000002c6a2ae646544553540000000040420f000000000080969800000000000a000000000000001400000000000000000000001b0c00000000000000000000000000
74b7ba1eac1d7d75b51e770c3ec6413b4e0a289183ea1c572fb431492a0bcb5d
```


[28-Nov-18 05:26 AM] siu#3920
`sendrawtransaction` seems to be working now

{Reactions}
üéâ 

[28-Nov-18 05:26 AM] SHossain#0007
jl777 fixed the tx version issue last night. we confirmed


[28-Nov-18 05:27 AM] SHossain#0007
other things been fixed this morning


[28-Nov-18 05:28 AM] siu#3920
cool!


[28-Nov-18 05:29 AM] jl777c#5810
my assumption is that things work as well as they ever had now, just with sapling


[28-Nov-18 05:32 AM] jl777c#5810
if anything is behaving strange, plz report


[28-Nov-18 05:33 AM] siu#3920
ok


[28-Nov-18 05:41 AM] SHossain#0007
i'll prepare the mightly insomnia now


[28-Nov-18 05:41 AM] siu#3920
you have the file?


[28-Nov-18 05:42 AM] siu#3920
for insomnia rpc calls?


[28-Nov-18 05:42 AM] SHossain#0007
i should have it backed up somewhere. but, if you can upload a new one, that would be great


[28-Nov-18 05:43 AM] SHossain#0007
yes, i have it and found


[28-Nov-18 05:43 AM] SHossain#0007
importing them now


[28-Nov-18 05:49 AM] SHossain#0007
reward cc tx is version 4


[28-Nov-18 05:49 AM] SHossain#0007
```
{
  "result": {
    "txid": "c7c36c2689091103ab50e46967df354dfa63de41af4ed9c71accb96895801791",
    "overwintered": true,
    "version": 4,
    "versiongroupid": "892f2085",
    "locktime": 0,
    "expiryheight": 3122,
```


[28-Nov-18 05:51 AM] SHossain#0007
@siu here is the explorer if you need http://spltest.explorer.dexstats.info/

{Embed}
http://spltest.explorer.dexstats.info/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[28-Nov-18 05:54 AM] SHossain#0007
`rewardsaddfunding` is good


[28-Nov-18 05:57 AM] SHossain#0007
tested all rewards cc calls (except `rewardsunlock`) and all seems to be working fine


[28-Nov-18 06:04 AM] siu#3920
```./komodo-cli -ac_name=SPLTEST dicebet TEST 74b7ba1eac1d7d75b51e770c3ec6413b4e0a289183ea1c572fb431492a0bcb5d 0.05 2
skip coinbase or strange entropy tx
skip coinbase or strange entropy tx
pendingbets.0 numentropy tx 2: 120.00000000
{
  "result": "error",
  "error": "cant find dice entropy inputs"
}
```


[28-Nov-18 06:04 AM] siu#3920
`dicebet` is outputting this.


[28-Nov-18 06:05 AM] siu#3920
i did 100 dicefund then did 2 entropy txs of 10 each.


[28-Nov-18 06:06 AM] siu#3920
i guess it doesnt have anything to do with sapling, but 3 txs should be enough, or not?


[28-Nov-18 06:07 AM] TonyL#3577
There >= 100 `diceaddfunds` entropy transactions should be executed before do `dicebet`


[28-Nov-18 06:07 AM] SHossain#0007
have minimum of 10-20 entropy tx for testing


[28-Nov-18 06:07 AM] siu#3920
ah


[28-Nov-18 06:07 AM] TonyL#3577
@SHossain there is kinda strict limit on 100 entropy TX atm

{Reactions}
üëçüèΩ 

[28-Nov-18 06:08 AM] siu#3920
right, these where the changes done by jl777 for KMDICE


[28-Nov-18 06:08 AM] siu#3920
that is a pain to do manually hehehe, let me get the script


[28-Nov-18 06:08 AM] jl777c#5810
its not consensus level, but rpc, so can be bypassed


[28-Nov-18 06:08 AM] Deleted User#0000
the 100 min was something I added as a work around before jl made all the changes


[28-Nov-18 06:08 AM] Deleted User#0000
it cna probaly be lowerd a lot


[28-Nov-18 06:09 AM] Deleted User#0000
if not removed


[28-Nov-18 06:10 AM] Deleted User#0000
its to stop multiple people choosing the same entropy tx.. or alt least reduce the chance of it happening.


[28-Nov-18 06:10 AM] SHossain#0007
`tokencreate` generated version 4 tx


[28-Nov-18 06:11 AM] siu#3920
ok, sending the entropy txs now


[28-Nov-18 06:13 AM] SHossain#0007
`tokenlist` and `tokeninfo` working as usual
```
{
  "result": {
    "result": "success",
    "tokenid": "5b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c9",
    "owner": "02fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e",
    "name": "SPL",
    "supply": 100000000,
    "description": "Sapling Token Test"
  },
  "error": null,
  "id": null
}
```


[28-Nov-18 06:16 AM] SHossain#0007
`diceinfo`
```
{
  "result": {
    "result": "success",
    "fundingtxid": "74b7ba1eac1d7d75b51e770c3ec6413b4e0a289183ea1c572fb431492a0bcb5d",
    "name": "TEST",
    "sbits": 1414743380,
    "minbet": "0.01000000",
    "maxbet": "0.10000000",
    "maxodds": 10,
    "timeoutblocks": 20,
    "funding": "121.70000000",
    "entropytxs": 10
  },
  "error": null,
  "id": null
}
```


[28-Nov-18 06:16 AM] SHossain#0007
`dicebet` 
```
["TEST","74b7ba1eac1d7d75b51e770c3ec6413b4e0a289183ea1c572fb431492a0bcb5d","0.1", "2" ]
```


[28-Nov-18 06:16 AM] SHossain#0007
i get reply
```{
  "result": {
    "result": "error",
    "error": "Your dealer is broke, find a new casino."
  },
  "error": null,
  "id": null
}
```


[28-Nov-18 06:24 AM] TonyL#3577
Such error usually throwing when there is < 100 entropy txs


[28-Nov-18 06:25 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST2 diceinfo b0865b83755daa54e3c1d47163691677ec60d058183f3334b7abcd3bc3f7d09d
skip coinbase or strange entropy tx
skip coinbase or strange entropy tx
skip coinbase or strange entropy tx
pendingbets.0 numentropy tx 210: 31000.00000000
{
  "result": "success",
  "fundingtxid": "b0865b83755daa54e3c1d47163691677ec60d058183f3334b7abcd3bc3f7d09d",
  "name": "TONY",
  "sbits": 1498304340,
  "minbet": "1.00000000",
  "maxbet": "100.00000000",
  "maxodds": 100,
  "timeoutblocks": 5,
  "funding": "31000.00000000",
  "entropytxs": 210
}
```


[28-Nov-18 06:25 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST2 dicebet TONY b0865b83755daa54e3c1d47163691677ec60d058183f3334b7abcd3bc3f7d09d 10 2
skip coinbase or strange entropy tx
skip coinbase or strange entropy tx
skip coinbase or strange entropy tx
pendingbets.0 numentropy tx 210: 31000.00000000
chosen entropy on loop: 40
{
  "result": "success",
  "hex": "0400008085202f890231de820fb361e5e4af797d55e44fde99d098da722175f4a3d8f55af62bf71113000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140c9826664b3c590433de4c82869a5a8be29dcc1122c74ba63e81bb685904193703ea20697b23dce66dd9d7e29e2a9c7a902eb7351c992be2d187869715ebae66ea100af038001e6a10001ffffffff118b793617ac36d15099d3df5c561bd290c03ad1713ab41d12136fdb31b78db60000000049483045022100e37d564fd6557c2d02500a43501c3402dffe68b42c3dda0a5f2f64201d0cd41c022051153a0205c2cd5cef343255e25046b3d51fc0e19b205fe2d0d53a451ceeac2301ffffffff0500e40b5402000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1227000000000000232103a52c3fc715c4e87fb80427e97c1f5c328e57ea64d1a7a3e1f442ed1a728b40f3acde87d71218090000232103a52c3fc715c4e87fb80427e97c1f5c328e57ea64d1a7a3e1f442ed1a728b40f3ac00000000000000006d6a4c6ae642544f4e59000000009dd0f7c33bcdabb734333f1858d060ec7716696371d4c1e354aa5d75835b86b018e1d3f7c0a501168b7629dd6ece6c56395adb3a3029222b8360b2927cc08fb0000000000000000000000000000000000000000000000000000000000000000000000000810100000000000000000000000000"
}
```


[28-Nov-18 06:26 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST2 sendrawtransaction 0400008085202f890231de820fb361e5e4af797d55e44fde99d098da722175f4a3d8f55af62bf71113000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140c9826664b3c590433de4c82869a5a8be29dcc1122c74ba63e81bb685904193703ea20697b23dce66dd9d7e29e2a9c7a902eb7351c992be2d187869715ebae66ea100af038001e6a10001ffffffff118b793617ac36d15099d3df5c561bd290c03ad1713ab41d12136fdb31b78db60000000049483045022100e37d564fd6557c2d02500a43501c3402dffe68b42c3dda0a5f2f64201d0cd41c022051153a0205c2cd5cef343255e25046b3d51fc0e19b205fe2d0d53a451ceeac2301ffffffff0500e40b5402000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc00ca9a3b00000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc1227000000000000232103a52c3fc715c4e87fb80427e97c1f5c328e57ea64d1a7a3e1f442ed1a728b40f3acde87d71218090000232103a52c3fc715c4e87fb80427e97c1f5c328e57ea64d1a7a3e1f442ed1a728b40f3ac00000000000000006d6a4c6ae642544f4e59000000009dd0f7c33bcdabb734333f1858d060ec7716696371d4c1e354aa5d75835b86b018e1d3f7c0a501168b7629dd6ece6c56395adb3a3029222b8360b2927cc08fb0000000000000000000000000000000000000000000000000000000000000000000000000810100000000000000000000000000
d5c95ead928b5ea0e8e5853e67d083d3a8cc49efe5b1136cea131e4939141a6e
```


[28-Nov-18 06:28 AM] TonyL#3577
If someone need to make more entropy (just have to change -ac_name  and plan name/id): 
```#!/bin/bash
TXNUM=0
while [ $TXNUM -lt 105 ]; do
    hash=$(./komodo-cli -ac_name=SPLTEST2 diceaddfunds TONY b0865b83755daa54e3c1d47163691677ec60d058183f3334b7abcd3bc3f7d09d 100 | jq -r .hex)
    ./komodo-cli -ac_name=SPLTEST2 sendrawtransaction $hash >> txs.txt
    let TXNUM=TXNUM+1
done```

{Reactions}
üëèüèΩ 

[28-Nov-18 06:29 AM] SHossain#0007
play my dice, bigger bets, more to win :P
```
{
  "result": {
    "result": "success",
    "fundingtxid": "08733c9898250a04ee16a3f1ae6c712fe90ed274d48278896f8719462c0e1a50",
    "name": "SPL",
    "sbits": 5001299,
    "minbet": "10.00000000",
    "maxbet": "10000.00000000",
    "maxodds": 50,
    "timeoutblocks": 1,
    "funding": "398.00000000",
    "entropytxs": 2
  },
  "error": null,
  "id": null
}
```


[28-Nov-18 06:30 AM] TonyL#3577
Your casino seems broke üòÇ


[28-Nov-18 06:30 AM] SHossain#0007
really??


[28-Nov-18 06:30 AM] TonyL#3577
```"entropytxs": 2```


[28-Nov-18 06:30 AM] SHossain#0007
oh...rest of them are in mempool


[28-Nov-18 06:30 AM] SHossain#0007
mempool is quite big now


[28-Nov-18 06:30 AM] SHossain#0007
need to wait for the next block


[28-Nov-18 06:35 AM] SHossain#0007
@TonyL check now


[28-Nov-18 06:35 AM] SHossain#0007
11 entropy tx


[28-Nov-18 06:35 AM] SHossain#0007
not so broken? üòõ


[28-Nov-18 06:36 AM] SHossain#0007
actually, i'm getting broken


[28-Nov-18 06:36 AM] SHossain#0007
doh


[28-Nov-18 06:37 AM] SHossain#0007
dealer node shows
```
pendingbets.0 numentropy tx 11: 32458.00000000
chosen entropy on loop: 13
pendingbets.0 numentropy tx 11: 32458.00000000
```


[28-Nov-18 06:38 AM] SHossain#0007
@TonyL @siu can you please confirm the SPL dicebet is broken?


[28-Nov-18 06:38 AM] SHossain#0007
`["SPL","08733c9898250a04ee16a3f1ae6c712fe90ed274d48278896f8719462c0e1a50","10", "2" ]`


[28-Nov-18 06:39 AM] TonyL#3577
Do you have 100+ entropy tx on it?


[28-Nov-18 06:39 AM] SHossain#0007
nope


[28-Nov-18 06:40 AM] SHossain#0007
under 15


[28-Nov-18 06:41 AM] siu#3920
Im working on fundig my test plan with more than 100 txs


[28-Nov-18 06:44 AM] TonyL#3577
@siu I've posted funding script example above, maybe it'll help


[28-Nov-18 06:45 AM] siu#3920
I have a funding script, thanks :)

{Reactions}
üëå 

[28-Nov-18 06:48 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST dicebet SPL 08733c9898250a04ee16a3f1ae6c712fe90ed274d48278896f8719462c0e1a50 100 10
pendingbets.0 numentropy tx 14: 32458.30000000
{
  "result": "error",
  "error": "Your dealer is broke, find a new casino."
}
```
@SHossain Your dealer is broke - need to make more entropy txs


[28-Nov-18 06:49 AM] siu#3920
Lol


[28-Nov-18 06:50 AM] SHossain#0007
aha...ok. will do


[28-Nov-18 06:52 AM] siu#3920
```./komodo-cli -ac_name=SPLTEST dicestatus TEST 74b7ba1eac1d7d75b51e770c3ec6413b4e0a289183ea1c572fb431492a0bcb5d ff673f36a371dca051cb069656f400d53d9d2d858ab458b49fff8f22d31d5777
cc_verify error C
cc_verify error C
rebroadcast.L and clear [0] and broadcast entropyused.ac1c964ad583f48cefe68ef1d9ec1f49b8ce826e74bc6cf7fa9584513aed65ab bettxid.ff673f36a371dca051cb069656f400d53d9d2d858ab458b49fff8f22d31d5777 -> 7f60cfb75eece1487dae4cdb13698d2bacc5774efc62a4b7997224224c1c428b
error: couldn't connect to server: EOF reached (code 1)
(make sure server is running and you are connecting to the correct RPC port)
[1]+  Segmentation fault      (core dumped) ./komodod -ac_name=SPLTEST -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 -addressindex=1 -spentindex=1 -addnode=54.36.126.42 -addnode=94.130.224.11 -pubkey=024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774
```


[28-Nov-18 06:52 AM] siu#3920
dice status broke the node


[28-Nov-18 06:52 AM] siu#3920
"core dumped"


[28-Nov-18 06:52 AM] siu#3920
@jl777c


[28-Nov-18 06:53 AM] siu#3920
```2018-11-28 14:52:12 ERROR: CScriptCheck(): 7f60cfb75eece1487dae4cdb13698d2bacc5774efc62a4b7997224224c1c428b:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-11-28 14:52:12 ERROR: CScriptCheck(): 7f60cfb75eece1487dae4cdb13698d2bacc5774efc62a4b7997224224c1c428b:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-11-28 14:52:12 ERROR: AcceptToMemoryPool: ConnectInputs failed 7f60cfb75eece1487dae4cdb13698d2bacc5774efc62a4b7997224224c1c428b
```


[28-Nov-18 06:54 AM] siu#3920
debug.log ^


[28-Nov-18 06:54 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST2 dicestatus TONY b0865b83755daa54e3c1d47163691677ec60d058183f3334b7abcd3bc3f7d09d d5c95ead928b5ea0e8e5853e67d083d3a8cc49efe5b1136cea131e4939141a6e
cc_verify error C
cc_verify error C
rebroadcast.L and clear [0] and broadcast entropyused.4017b5d87f3275d89a743ddb55b263d06e85edab09ddeab9890b7fffba3dd522 bettxid.d5c95ead928b5ea0e8e5853e67d083d3a8cc49efe5b1136cea131e4939141a6e -> f2dad8098416fe74cabdac99d2af83c4394f6263628eb1cf76881890084c03e3
error: couldn't connect to server: EOF reached (code 1)
(make sure server is running and you are connecting to the correct RPC port)``` repeated


[28-Nov-18 06:55 AM] jl777c#5810
backtrace plz


[28-Nov-18 06:57 AM] jl777c#5810
i changed so dicestatus as non-dealer needs to specify bettxid


[28-Nov-18 06:57 AM] jl777c#5810
but it should have printed an error


[28-Nov-18 06:58 AM] TonyL#3577
@jl777c https://paste.ubuntu.com/p/Rsg36hfw3f/


[28-Nov-18 07:07 AM] jl777c#5810
pushed fix


[28-Nov-18 07:22 AM] KNOX#9338
merged FSM branch


[28-Nov-18 07:35 AM] siu#3920
recompiling


[28-Nov-18 07:45 AM] SHossain#0007
`dicebet` tx version 4 as well


[28-Nov-18 07:45 AM] SHossain#0007
i could bet on your plan, couldn't do on mine


[28-Nov-18 07:53 AM] SHossain#0007
with 19 entropy tx my dealer node still seems to be broke
```
pendingbets.0 numentropy tx 19: 32480.40000000
```


[28-Nov-18 07:56 AM] jl777c#5810
yes, 100 is the minimum


[28-Nov-18 07:56 AM] jl777c#5810
<100 will print dealer is broke


[28-Nov-18 07:56 AM] SHossain#0007
thanks


[28-Nov-18 07:58 AM] SHossain#0007
done. using @TonyL's snippet


[28-Nov-18 08:02 AM] SHossain#0007
dicebet is working


[28-Nov-18 08:03 AM] SHossain#0007
dealer node doesn't show anymore the win or loss in console?


[28-Nov-18 08:08 AM] SHossain#0007
who wants some test tokens? please post your pubkey and i'll send you. we need to test the Tokens CC


[28-Nov-18 08:13 AM] SHossain#0007
```
{
    "method":"tokenbid",
"params": ["10000","5b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c9","10"]
}
```


[28-Nov-18 08:13 AM] SHossain#0007
```
{
  "result": {
    "result": "success",
    "hex": "0400008085202f8901c8b7bff2f7b913fc050e20c31903483e5020da2615a6ac29f0e30c2fec25886b0000000048473044022005859c96a5ab41bddc0c6a8cdbd5f6dbfef2577742cb72b77ddfd4aa7b9ed3400220215f0958a2e8d3349533b84cdb13672ffba5a130225be6a3b628e10bc3d99d1a01ffffffff0300a0724e18090000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc80de0f0000000000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eac00000000000000004f6a4c4ce3625b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c910270000000000002102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e00000000d10c00000000000000000000000000"
  },
  "error": null,
  "id": null
}
```


[28-Nov-18 08:16 AM] TonyL#3577
@SHossain My pubkey: `03746097d596be78533f46e9403cad5fa89359d7068dab9d9d601fc8ae758e4b19`


[28-Nov-18 08:18 AM] SHossain#0007
`4443ef6843b15518a51a2ded29b0fd97ed686db6657c12aadf77d25bf170ca9b`


[28-Nov-18 08:18 AM] SHossain#0007
sent


[28-Nov-18 08:18 AM] SHossain#0007
i also have some orders up in orderbook


[28-Nov-18 08:28 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST tokenbalance 5b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c9
{
  "result": "success",
  "CCaddress": "RBgNkuWjq5vdvxJMFL3ufZLHB5iNCcZ4v9",
  "tokenid": "5b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c9",
  "balance": 100000
}
```


[28-Nov-18 08:29 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST tokenfillask 5b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c9 3d8efbc77536e27f30f6655dca7b749416359f1031fabfd784f0bf0e2586308e 100
{
  "result": "success",
  "hex": "010000000318aeba56aca31eb2345fad3e1de6957ab7b0f13d27b6d06294c7e41927baeebb0000000049483045022100e9727285eb357c52b7ce59be63b84409d9de42af8357021b5d0697e33106db780220160641c2cffd7068524e02f490796450fc8248ae08ede97929a1b2b8c62916ff01ffffffff8e3086250ebff084d7bffa31109f351694747bca5d65f6307fe23675c7fb8e3d000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140f035f71b251cf26cba4cfc51bc52767465b6e4594963f3998eb791e00f9477c92d210fbfb0a3b3d4c9b81b2e0434240368e8f7d682f2f0a8115bcddf2c378108a100af038001e3a10001ffffffff35401a2936793976939b637128633a748e230f6ba036dd408b1e2a01affbb0ad0000000049483045022100dc91138d8323ee8e5cab0b926549e572aa96577de6d741e9b9b5e4a58737ec2502205d58a4f46f563976cafea4de798af07db384828c8e41947af4cbbb9d756ee50501ffffffff050000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc6400000000000000302ea22c8020e9290043fe9cf734462ddd67f4f7b2a7f0190983607454d737cbe8be7e2ce9088103120c008203000401cc00e40b5402000000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eacf034d9482e120000232103746097d596be78533f46e9403cad5fa89359d7068dab9d9d601fc8ae758e4b19ac00000000000000004f6a4c4ce3535b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c900000000000000002102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e00000000"
}
```


[28-Nov-18 08:29 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST sendrawtransaction 010000000318aeba56aca31eb2345fad3e1de6957ab7b0f13d27b6d06294c7e41927baeebb0000000049483045022100e9727285eb357c52b7ce59be63b84409d9de42af8357021b5d0697e33106db780220160641c2cffd7068524e02f490796450fc8248ae08ede97929a1b2b8c62916ff01ffffffff8e3086250ebff084d7bffa31109f351694747bca5d65f6307fe23675c7fb8e3d000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140f035f71b251cf26cba4cfc51bc52767465b6e4594963f3998eb791e00f9477c92d210fbfb0a3b3d4c9b81b2e0434240368e8f7d682f2f0a8115bcddf2c378108a100af038001e3a10001ffffffff35401a2936793976939b637128633a748e230f6ba036dd408b1e2a01affbb0ad0000000049483045022100dc91138d8323ee8e5cab0b926549e572aa96577de6d741e9b9b5e4a58737ec2502205d58a4f46f563976cafea4de798af07db384828c8e41947af4cbbb9d756ee50501ffffffff050000000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc6400000000000000302ea22c8020e9290043fe9cf734462ddd67f4f7b2a7f0190983607454d737cbe8be7e2ce9088103120c008203000401cc00e40b5402000000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eacf034d9482e120000232103746097d596be78533f46e9403cad5fa89359d7068dab9d9d601fc8ae758e4b19ac00000000000000004f6a4c4ce3535b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c900000000000000002102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e00000000
error code: -26
error message:
16: tx-overwinter-active```


[28-Nov-18 08:30 AM] jl777c#5810
investigating. version 1 tx should not be created anymore


[28-Nov-18 08:32 AM] SHossain#0007
@TonyL did you update to latest? i see version 4


[28-Nov-18 08:32 AM] SHossain#0007
```
{
"method":"tokenfillask",
"params": ["5b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c9","3d8efbc77536e27f30f6655dca7b749416359f1031fabfd784f0bf0e2586308e","10"]
}
```


[28-Nov-18 08:32 AM] SHossain#0007
```
{
  "result": {
    "result": "success",
    "hex": "0400008085202f8903090f79d89f33ca1f1a69284efacd9ebdcc34c78959359ef20f03d7a64ca709210100000049483045022100f3af3faf59046da52b495f76da02268330ffac05099b094ce131d71cc12d923e0220732a65e57dd88bb513c3e46beb3c605b51cb0dc8c97bbf14d4d68b1fc8e0ad1601ffffffff8e3086250ebff084d7bffa31109f351694747bca5d65f6307fe23675c7fb8e3d000000007b4c79a276a072a26ba067a565802102adf84e0e075cf90868bd4e3d34a03420e034719649c41f371fc70d8e33aa27028140af69d8cef58074750f778dd5be85710c030f3f22ee9d6381b8f4e2dd8dd68da23587a3e9cecdb51e5e477166428aab136e9764132a8d28e4f16847f7ff6e5e23a100af038001e3a10001ffffffffe5ecce1f3d473ea26d14c5ea61e112df22c6be24b5a0ba56f00a40fbf58521de0100000049483045022100afdfb4f36b670d7e05f683b0b523d3e8a59e2605497bdd77cc40e0f80d1802b40220454ebf9452baebaff1e695aaed23bd82b96bb14b1ee360321f65ac6a9db2fbae01ffffffff055a00000000000000302ea22c80201ab400e039122028345520ba041ac3e6ec81ad28d8415e78d760d55f41097dd58103120c008203000401cc0a00000000000000302ea22c80205a4f66742992179bb625b8192eda6dd03db039206f9048a0e2b3fa05017a4a3e8103120c008203000401cc00ca9a3b00000000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eacf0c660ca00090000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eac00000000000000004f6a4c4ce3535b15d1d283f0f74efc1a246e672ecb44a1309b134677e484a374bc001c7729c9001a7118020000002102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e00000000e70c00000000000000000000000000"
  },
  "error": null,
  "id": null
}
```


[28-Nov-18 08:32 AM] SHossain#0007
```
{
  "result": "d2596ebf54a39ada4bfcab13e0fe2e1b1707846d0523dcd75b26a9320b0b1b45",
  "error": null,
  "id": null
}
```


[28-Nov-18 08:32 AM] jl777c#5810
the code looks like it is updated. seems old version is being tested?


[28-Nov-18 08:34 AM] TonyL#3577
Yes, daemon is updated


[28-Nov-18 08:35 AM] jl777c#5810
how are you generating version 1 tx with new daemon?


[28-Nov-18 08:36 AM] TonyL#3577
Investigating it now


[28-Nov-18 08:37 AM] SHossain#0007
i did another fillask and also version 4


[28-Nov-18 08:39 AM] TonyL#3577
Seems I've just forgot to restart daemon on one of the nodes after rebuild


[28-Nov-18 08:39 AM] TonyL#3577
Restart helped

{Reactions}
üëçüèΩ 

[28-Nov-18 08:41 AM] SHossain#0007
that makes sense üòÉ


[28-Nov-18 08:49 AM] TonyL#3577
Too much daemons I have around üòÇ


[28-Nov-18 08:50 AM] SHossain#0007
yes, this happened recently. i even messed up few times


[28-Nov-18 09:11 AM] siu#3920
back from lunch


[28-Nov-18 09:12 AM] SHossain#0007
token cancel bid/ask working as expected and tx version 4


[28-Nov-18 09:14 AM] siu#3920
```./komodo-cli -ac_name=SPLTEST dicebet TEST 74b7ba1eac1d7d75b51e770c3ec6413b4e0a289183ea1c572fb431492a0bcb5d 0.05 2```


[28-Nov-18 09:14 AM] siu#3920
```{
  "result": "success",
  "hex": "0400008085202f890265fba2912cfc7c64366a42401d882d67e3e733e17bd48c19e5b8eaaf41e78012000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140b91900c05d81af5bb387e3ab6f0650e1d6f962bb3b46a7688af810ca6568403271f4e451e0a588933fa1ac38460b4058598043500cc64c289633a22e44a3076ea100af038001e6a10001ffffffff77571dd3228fff9fb458b48a852d9d3dd500f4569606cb51a0dc71a3363f67ff0300000049483045022100c26ad19ce09e256b3c13e307846405bb7575d2e2bdfd4c82a6f852dfea4006d202200f50e7b896e6c99e91661d80844d540b09dde9901a69e7673e5d42cc7b1d7d2501ffffffff058096980000000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc404b4c0000000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc12270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac1c30770d180900002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac00000000000000006d6a4c6ae64254455354000000005dcb0b2a4931b42f571cea8391280a4e3b41c63e0c771eb5757d1dac1ebab77468932bfcb27c7b3cd1f04308b7042ada7a03afaab3ca348473c3b7860214828c000000000000000000000000000000000000000000000000000000000000000000000000120d00000000000000000000000000"
}
```


[28-Nov-18 09:14 AM] siu#3920
```./komodo-cli -ac_name=SPLTEST sendrawtransaction 0400008085202f890265fba2912cfc7c64366a42401d882d67e3e733e17bd48c19e5b8eaaf41e78012000000007b4c79a276a072a26ba067a5658021039d966927cfdadab3ee6c56da63c21f17ea753dde4b3dfd41487103e24b27e94e8140b91900c05d81af5bb387e3ab6f0650e1d6f962bb3b46a7688af810ca6568403271f4e451e0a588933fa1ac38460b4058598043500cc64c289633a22e44a3076ea100af038001e6a10001ffffffff77571dd3228fff9fb458b48a852d9d3dd500f4569606cb51a0dc71a3363f67ff0300000049483045022100c26ad19ce09e256b3c13e307846405bb7575d2e2bdfd4c82a6f852dfea4006d202200f50e7b896e6c99e91661d80844d540b09dde9901a69e7673e5d42cc7b1d7d2501ffffffff058096980000000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc404b4c0000000000302ea22c80200095ece5eee67e1f313e7ba2d156c7617106cd52b75c93ed3fb110ff3fba6e998103120c008203000401cc12270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac1c30770d180900002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac00000000000000006d6a4c6ae64254455354000000005dcb0b2a4931b42f571cea8391280a4e3b41c63e0c771eb5757d1dac1ebab77468932bfcb27c7b3cd1f04308b7042ada7a03afaab3ca348473c3b7860214828c000000000000000000000000000000000000000000000000000000000000000000000000120d00000000000000000000000000
4491452b0650751c2153625bee9f78875fff58c2cfe1a3c9b79a02867b1f87dc
```


[28-Nov-18 09:15 AM] siu#3920
```./komodo-cli -ac_name=SPLTEST dicestatus TEST 74b7ba1eac1d7d75b51e770c3ec6413b4e0a289183ea1c572fb431492a0bcb5d 4491452b0650751c2153625bee9f78875fff58c2cfe1a3c9b79a02867b1f87dc
```


[28-Nov-18 09:15 AM] siu#3920
```{
  "result": "error",
  "error": "didnt find dicefinish tx"
}
```


[28-Nov-18 09:15 AM] siu#3920
output for dicestatus ```cc_verify error C
cc_verify error C
```


[28-Nov-18 09:16 AM] siu#3920
```rebroadcast.W and clear [0] and broadcast entropyused.90846cd578b31593161c3d4b6c942d79b1af52bc4896371688972cb260f7de9e bettxid.4491452b0650751c2153625bee9f78875fff58c2cfe1a3c9b79a02867b1f87dc -> b3ca7550064587e965d97ccc23bfcab82452aeab75de547b82298301e89ef612```


[28-Nov-18 09:17 AM] siu#3920
there is still an issue in dicestatus @jl777c


[28-Nov-18 09:17 AM] jl777c#5810
is that from dealernode?


[28-Nov-18 09:18 AM] siu#3920
ahh, yes... it is.


[28-Nov-18 09:18 AM] siu#3920
that should be the issue, thanks.


[28-Nov-18 09:20 AM] SHossain#0007
yes, i got the same result


[28-Nov-18 09:20 AM] SHossain#0007
dealer node says cc_verify error and player node says 
```
komodo-cli -ac_name=SPLTEST dicestatus SPL 08733c9898250a04ee16a3f1ae6c712fe90ed274d48278896f8719462c0e1a50 bb5759574f95fd5b094e0444fb65ee500b511c96784834d7c79f163878f705df
{
  "result": "success",
  "status": "bet still pending"
}
```


[28-Nov-18 09:21 AM] jl777c#5810
cc verify error is not good... investigating


[28-Nov-18 09:21 AM] jl777c#5810
cc_verify error C
?


[28-Nov-18 09:21 AM] SHossain#0007
suddenly my dealer node lost connection to other nodes,


[28-Nov-18 09:22 AM] SHossain#0007
only 1 peer available


[28-Nov-18 09:22 AM] SHossain#0007
after running `dicestatus` for the 2nd time in dealer node
```
cc_verify error C
cc_verify error C
rebroadcast.W and clear [0] and broadcast entropyused.c339ac9853579c020b4b0e2c00e2eca0c0f28e4f03f4cf6d7235045fce463eb6 bettxid.bb5759574f95fd5b094e0444fb65ee500b511c96784834d7c79f163878f705df -> ca8d29da58e030e35d05f5828dc44337e25037a07690cb5c151f0db2b9b77732
no nodes, break
```


[28-Nov-18 09:27 AM] jl777c#5810
does dicestatus work on non-dealer nodes?


[28-Nov-18 09:30 AM] SHossain#0007
yes


[28-Nov-18 09:30 AM] SHossain#0007
```
komodo-cli -ac_name=SPLTEST dicestatus SPL 08733c9898250a04ee16a3f1ae6c712fe90ed274d48278896f8719462c0e1a50 bb5759574f95fd5b094e0444fb65ee500b511c96784834d7c79f163878f705df
set timeout win T
null entropyused or bettxid
rebroadcast.T to mempool.[0] and broadcast entropyused.0000000000000000000000000000000000000000000000000000000000000000 bettxid.bb5759574f95fd5b094e0444fb65ee500b511c96784834d7c79f163878f705df -> 947e46b93e12c471923645a07b292ca3b7698a678d5faf3e5b944fe0289a9cd9
{
  "result": "success",
  "status": "loss"
}
```


[28-Nov-18 09:31 AM] SHossain#0007
running it 2nd time gave me win 
```
komodo-cli -ac_name=SPLTEST dicestatus SPL 08733c9898250a04ee16a3f1ae6c712fe90ed274d48278896f8719462c0e1a50 bb5759574f95fd5b094e0444fb65ee500b511c96784834d7c79f163878f705df
{
  "result": "success",
  "status": "win",
  "won": 30.00000000
}
```


[28-Nov-18 09:31 AM] SHossain#0007
both of these outputs are from player node


[28-Nov-18 09:32 AM] jl777c#5810
so the problem is just from dealer node...


[28-Nov-18 09:32 AM] jl777c#5810
what if you run dicestatus on dealer node, without the bettxid


[28-Nov-18 09:33 AM] SHossain#0007
```
./komodo-cli -ac_name=SPLTEST dicestatus 08733c9898250a04ee16a3f1ae6c712fe90ed274d48278896f8719462c0e1a50
error code: -1
error message:
dicestatus name fundingtxid bettxid

```


[28-Nov-18 09:33 AM] SHossain#0007
says bettxid needed


[28-Nov-18 09:33 AM] jl777c#5810
that is on dealer node?


[28-Nov-18 09:33 AM] SHossain#0007
yes


[28-Nov-18 09:33 AM] jl777c#5810
pass in all 0s for bettxid


[28-Nov-18 09:34 AM] jl777c#5810
maybe this is not about sapling, just the way it has been (not) working?


[28-Nov-18 09:35 AM] SHossain#0007
my bad


[28-Nov-18 09:35 AM] SHossain#0007
```
./komodo-cli -ac_name=SPLTEST dicestatus SPL 08733c9898250a04ee16a3f1ae6c712fe90ed274d48278896f8719462c0e1a50
{
  "result": "success",
  "status": "no pending bets"
}
```


[28-Nov-18 09:36 AM] SHossain#0007
from dealer node ^^


[28-Nov-18 09:36 AM] SHossain#0007
without bettxid


[28-Nov-18 09:36 AM] SHossain#0007
i missed the plan name earlier ü§¶üèΩ


[28-Nov-18 09:36 AM] jl777c#5810
so the bug is dicestatus on dealernode with bettxid gets error. investigating


[28-Nov-18 09:37 AM] SHossain#0007
daemon crashed


[28-Nov-18 09:37 AM] SHossain#0007
```
error decoding opret or sbits mismatch 54534554 vs 4c5053
Dice plan (SPL) exists.0 vs cmpflag.1
error initializing dealer0_loop
komodod: /home/alien/ptest/depends/x86_64-unknown-linux-gnu/share/../include/boost/thread/pthread/recursive_mutex.hpp:113: void boost::recursive_mutex::lock(): Assertion `!pthread_mutex_lock(&m)' failed.
```


[28-Nov-18 09:37 AM] SHossain#0007
starting with gdb


[28-Nov-18 09:38 AM] SHossain#0007
https://pastebin.com/3fDGdKk2

{Embed}
https://pastebin.com/3fDGdKk2
Thread 21 "zcash-msghand" received signal SIGABRT, Aborted.  [Swit...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[28-Nov-18 09:38 AM] SHossain#0007
backtrace data ^^


[28-Nov-18 09:39 AM] jl777c#5810
deep inside boost. is it reproducible?


[28-Nov-18 09:39 AM] jl777c#5810
error initializing dealer0_loop


[28-Nov-18 09:39 AM] jl777c#5810
that seems an issue


[28-Nov-18 09:39 AM] SHossain#0007
restarting again


[28-Nov-18 09:40 AM] jl777c#5810
lets not get stuck on this optional mode for dice CC, we need to test the rest of CC. I will investigate as it seems a 100% reproducible cc validate error


[28-Nov-18 09:45 AM] SHossain#0007
Tokens CC seems to be working fine. did partial fill and full fill as well


[28-Nov-18 10:20 AM] siu#3920
@SHossain reindex or delete and start over?


[28-Nov-18 10:21 AM] SHossain#0007
please ignore me. it synced fine


[28-Nov-18 10:21 AM] SHossain#0007
from block 0


[28-Nov-18 10:21 AM] SHossain#0007
took some time before starting to sync


[28-Nov-18 10:25 AM] siu#3920
oh, ok


[28-Nov-18 10:33 AM] SHossain#0007
```
{
"method": "rewardsunlock",
    "params": [
        "RWX",
        "8a4bb8b558dc47561e58f4eeaa5af3521689c3c32fbbf390e4975def396b4c7a",
        "c7c36c2689091103ab50e46967df354dfa63de41af4ed9c71accb96895801791"
    ]
}
```


[28-Nov-18 10:33 AM] SHossain#0007
```
{
    "method":"sendrawtransaction",
"params": ["0400008085202f89019117809568b9cc1ac7d94eaf41de63fa4d35df6769e450ab03110989266cc3c7000000007b4c79a276a072a26ba067a565802103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb981403626afae9ab3e9d3a82bb307dd7a15e92a78824af16ab93729adb65aa935924840ee445df70c6ee914dac12c0a5e178f3d41a0cbc5dfb31b0fb72b1e1f361766a100af038001e5a10001ffffffff02f0ca052a01000000232103da60379d924c2c30ac290d2a86c2ead128cb7bd571f69211cb95356e2dcc5eb9ac00000000000000002c6a2ae55552575800000000007a4c6b39ef5d97e490f3bb2fc3c3891652f35aaaeef4581e5647dc58b5b84b8a00000000750d00000000000000000000000000"]
}
```


[28-Nov-18 10:33 AM] SHossain#0007
```
{
  "result": null,
  "error": {
    "code": -26,
    "message": "16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)"
  },
  "id": null
}
```


[28-Nov-18 10:33 AM] SHossain#0007
```
APR 25.00000000 minseconds.0 maxseconds.432000 mindeposit 100000.00000000
amount 50.00000000 125000000000.00000000 3963 -> duration.16894 reward 0.00669631 vals 0.02678526 66.96315000
search mempool for unlocked and unspent CC rewards output for 0.00679631
not enough rewards funds to payout 0.00679631, recover mode tx
CC Eval EVAL_REWARDS Invalid: fundingTx not valid spending tx c7c36c2689091103ab50e46967df354dfa63de41af4ed9c71accb96895801791
```


[28-Nov-18 10:34 AM] SHossain#0007
rewardsinfo shows it has funds
```
{
  "result": {
    "result": "success",
    "fundingtxid": "c7c36c2689091103ab50e46967df354dfa63de41af4ed9c71accb96895801791",
    "name": "RWX",
    "sbits": 5789522,
    "APR": "25.00000000",
    "minseconds": 0,
    "maxseconds": 432000,
    "mindeposit": "100000.00000000",
    "funding": "300050.00000000",
    "locked": "200000.00000000"
  },
  "error": null,
  "id": null
}
```


[28-Nov-18 10:35 AM] jl777c#5810
is this new for saplingmode, or has it been broken in normal mode too?


[28-Nov-18 10:36 AM] SHossain#0007
will test on normal mode


[28-Nov-18 11:24 AM] SHossain#0007
locked some funds using CCNG chain


[28-Nov-18 11:25 AM] SHossain#0007
will report in an hour or so while unlocking


[28-Nov-18 11:34 AM] siu#3920
```cc_verify error C
cc_verify error C
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```


[28-Nov-18 11:34 AM] siu#3920
dice finish gives the same error in dealer node


[28-Nov-18 11:35 AM] jl777c#5810
yes it is the dicefinish that has the troubles, but i think the dicestatus with null txid is processing fine. i will have to look at this other mode tomorrow


[28-Nov-18 11:38 AM] siu#3920
ok


[28-Nov-18 11:38 AM] siu#3920
testing faucet now

{Reactions}
üëåüèΩ 

[28-Nov-18 11:38 AM] SHossain#0007
faucetfund, info worked fine


[28-Nov-18 11:38 AM] SHossain#0007
i didn't test `faucetget`


[28-Nov-18 11:45 AM] axo777#1232
Hi All,  I am looking for help in putting together a UI something like the swagger.io demo where you write API's on their webpage.  I want a tool that will interface to the rpc where the user can "fill in the blanks" to create his own Oracle CC to put IoT data on the blockchain.

{Reactions}
üëèüèΩ (2) 

[28-Nov-18 11:53 AM] siu#3920
@SHossain `faucetget` worked.


[28-Nov-18 11:53 AM] SHossain#0007
great.


[28-Nov-18 11:53 AM] SHossain#0007
that means first 4 CC is mostly working


[28-Nov-18 11:53 AM] SHossain#0007
except the verify error you found.


[28-Nov-18 11:54 AM] SHossain#0007
i'm still testing the rewardsunlock.


[28-Nov-18 11:56 AM] siu#3920
did oracles get tested?


[28-Nov-18 11:56 AM] siu#3920
@SHossain


[28-Nov-18 11:58 AM] SHossain#0007
no.


[28-Nov-18 11:58 AM] SHossain#0007
only 4 CC contract


[28-Nov-18 11:59 AM] SHossain#0007
oracles, gateways and channels not tested yet


[28-Nov-18 12:00 PM] axo777#1232
A data publisher needs to register a datafee and their pubkey for a specific oracletxid.  This needs to get done first


[28-Nov-18 12:04 PM] axo777#1232
There should be a way to get data from a smart phone and upload it to the oracle CC


[28-Nov-18 12:07 PM] axo777#1232
A googlemaps API is another data source we can tap into


[28-Nov-18 12:32 PM] Alright#0419
@axo777 @smkhound is tracking his dog via GPS collar and posting coordinates on chain


[28-Nov-18 12:40 PM] axo777#1232
Cool - Like to see how he does that


[28-Nov-18 12:41 PM] axo777#1232
Does he have a edge device or the cell phone?


[28-Nov-18 12:44 PM] Alright#0419
not quite sure, he had a nice blog post about it, looking for it


[28-Nov-18 12:44 PM] Alright#0419
https://github.com/smk762/Dragonhound

{Embed}
https://github.com/smk762/Dragonhound
smk762/Dragonhound
GPS tracking a wandering hound with Particle.io via Komodo cryptoconditions oracles, displayed on Leaflet - smk762/Dragonhound
https://images-ext-1.discordapp.net/external/6xcX3Z50JaMIMuZ9mAXOpQv_L8FfDr-TLGFP0GMRbbU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/35845239


[28-Nov-18 01:25 PM] axo777#1232
Thanks @Alright


[28-Nov-18 01:26 PM] Alright#0419
couldn't find the blog post, going to just have to wait until he's online


[28-Nov-18 01:26 PM] axo777#1232
Ok, np


[28-Nov-18 02:02 PM] SHossain#0007
@jl777c normal mode `rewardsunlock` doesn't seem to have any issue. only found in the sapling activated version


[28-Nov-18 02:03 PM] SHossain#0007
```
APR 25.00000000 minseconds.0 maxseconds.864000 mindeposit 10000.00000000
amount 100000.00000000 249999999999999.96875000 1478 -> duration.9271 reward 7.34953703 vals 29.39814814 73495.37035000
maxseconds.0 (F) 100000.00000000 100000.00000000
inputs 100000.00000000 CCchange 99992.65036297 amount 100000.00000000 reward 7.34953703
amount 100000.00000000 249999999999999.96875000 1478 -> duration.9271 reward 7.34953703 vals 29.39814814 73495.37035000
```


[28-Nov-18 02:22 PM] Bryan_Beus#6442
Is anyone around that can provide feedback on the gateways cc?

There is an rpc call, gatewaysinfo, for which I need more information.

https://siddhartha-komodo.github.io/komodo-docs-vuepress/basic-docs/cryptoconditions/cc-gateways.html#gatewaysinfo

Look in the returned values and you'll see four === signs.

Those are the values for which I need some explanations about what they are and what they do.

{Embed}
https://siddhartha-komodo.github.io/komodo-docs-vuepress/basic-docs/cryptoconditions/cc-gateways.html
Smart Contract: Gateways | Komodo Developer Documentation
Documentation for developers building on Komodo


[28-Nov-18 03:15 PM] siu#3920
i dont see the ==== signs


[28-Nov-18 03:40 PM] Stephen Daniels#2943
where can i read about oracles/


[28-Nov-18 04:05 PM] DG#6934
#cc-oracles  you mean the channel?


[28-Nov-18 04:06 PM] DG#6934
https://docs.komodoplatform.com/cc/book-jl/chapter11.html?highlight=oracles


[28-Nov-18 04:06 PM] DG#6934
@Stephen Daniels


[28-Nov-18 05:25 PM] Bryan_Beus#6442
@Stephen Daniels 

Check out the new streamlined developer docs:

https://komodoplatform.com/develop-on-komodo/

Go to CryptoConditions > Oracles

{Embed}
https://komodoplatform.com/develop-on-komodo
Develop On Komodo - Komodo
This is your entry point into Komodo's vibrant developer community. Here, you'll find all the information and documentation you need to develop on Komodo.


[28-Nov-18 11:21 PM] jl777c#5810
taddr, prefix, prefix2 are the coin specific address prefixes that are customizing the address for bitcoin vs. KMD vs LTC,e tc


[29-Nov-18 12:28 AM] jl777c#5810
@SHossain I think you had your parameters reversed for the rewardsunlock:
"method": "rewardsunlock",
    "params": [
        "RWX",
        "8a4bb8b558dc47561e58f4eeaa5af3521689c3c32fbbf390e4975def396b4c7a",
        "c7c36c2689091103ab50e46967df354dfa63de41af4ed9c71accb96895801791"
    ]
c7c36c2689091103ab50e46967df354dfa63de41af4ed9c71accb96895801791 is the fundingtxid


[29-Nov-18 12:28 AM] jl777c#5810
reverse them and it should work


[29-Nov-18 12:29 AM] jl777c#5810
so the only known issue seems to be dealer node doing a dice status with a specific bettxid


[29-Nov-18 12:30 AM] jl777c#5810
@siu @jorian does the sapling activated chain support things well enough so KMDICE will run properly? wondering if there is a new bug, or it is just a currently unused case that has a bug


[29-Nov-18 01:02 AM] siu#3920
Today i will update to latest FSM and restart the dealer node.


[29-Nov-18 09:00 AM] dukeleto#7326
@Bryan_Beus from James `taddr, prefix, prefix2 are the coin specific address prefixes that are customizing the address for bitcoin vs. KMD vs LTC,e tc` in case you missed it, that is the info you were looking for to fill in the documentation


[29-Nov-18 10:18 AM] Bryan_Beus#6442
ok, thank you


[29-Nov-18 07:42 PM] Mylo#8306
@Alright @axo777 https://blog.komodoplatform.com/five-bullet-friday-week-46-a9501aa14c18 "Crypto Conditions Gone Wile"

{Embed}
https://blog.komodoplatform.com/five-bullet-friday-week-46-a9501aa14c18
Five Bullet Friday: Week 46 ‚Äì Komodo Platform
If this is the first time you‚Äôre reading our newsletter you can subscribe here and guarantee you don‚Äôt miss out on important news.
https://images-ext-2.discordapp.net/external/QXCWCfW3tc_sg41lArqZcukv53zUHSUubZYaANWh_qE/https/cdn-images-1.medium.com/max/1200/1%2AUxDBUhdYVh39PkjrSXP6GA.jpeg


[29-Nov-18 07:42 PM] Mylo#8306
*wild


[29-Nov-18 07:43 PM] Mylo#8306
the blockchain dog mention is in that blog post from FBF (five bullet fridays)


[29-Nov-18 10:49 PM] TonyL#3577
@dukeleto Have an idea to make alternate RPC tests package  (maybe as TUI and separate module) after this situation with regtest and CC
Just use as RPC connection with one of the existing chains same as I'm doing in TUIs
```rpc_connection = Proxy("http://%s:%s@%s:%d"%(ip, rpc_user, rpc_password, port))```
So will possible to run same tests on any existing chain in "combat" conditions. Or run a new chain with needed params and run tests on it.


[29-Nov-18 10:49 PM] TonyL#3577
Do you think it's worth?


[29-Nov-18 10:55 PM] dukeleto#7326
@TonyL sounds like you want to run tests against an already-running chain? sounds like a useful option


[29-Nov-18 10:57 PM] TonyL#3577
@dukeleto Yes, so we'll not need to hardcode chain params and even if we'll need to test few chains with different params it'll be a quite easy + possibility to test any production asset chain


[29-Nov-18 10:57 PM] TonyL#3577
This situation when something worked well in regtest but not worked at all on non regtest chain made me paranoid üòÇ


[30-Nov-18 10:05 AM] dukeleto#7326
@TonyL make it so defining an environment variable like RPC_TEST_URL=.... makes running the regtests use that instead. Just a point of warning tho, existing tests are very tied to the regtest chain, and check for exact numbers of blocks/etc.. You will need to write tests in such a way to deal with that.


[30-Nov-18 01:04 PM] CrisF#3405
@Mylo The `BlockchainDog` mentioned there is actually from #KMDLabs, haha üê∂ üêä


[30-Nov-18 03:55 PM] Bryan_Beus#6442
Getting this error when building from src:


[30-Nov-18 03:57 PM] Bryan_Beus#6442
```
In file included from cryptoconditions/src/asm/Condition.h:14:0,
from cryptoconditions/src/cryptoconditions.c:17:
cryptoconditions/src/asm/SimpleSha256Condition.h:14:18: fatal error: OCTET_STRING.h: No such file or directory
# include <OCTET_STRING.H>
```


[30-Nov-18 03:58 PM] jl777c#5810
do build.sh again


[30-Nov-18 03:58 PM] jl777c#5810
and again


[30-Nov-18 03:58 PM] jl777c#5810
it should eventually get past the errors


[30-Nov-18 03:58 PM] jl777c#5810
after that just make from the src dir


[30-Nov-18 04:10 PM] Bryan_Beus#6442
Ok, that's working on one laptop. Trying another.


[30-Nov-18 05:03 PM] Bryan_Beus#6442
It worked on one machine, but the other is having more issues.

When I run `make clean`, I get this:

```
checking whether bswap_64 is declared... yes
checking for MSG_NOSIGNAL... yes
checking for visibility attribute... yes
checking for Berkeley DB C++ headers... no
configure: error: libdb_cxx headers missing, Bitcoin Core requires this library for wallet functionality (--disable-wallet to disable wallet functionality)
Makefile:556: recipe for target 'config.status' failed
make: *** [config.status] Error 1
```

I asked in support yesterday, but haven't found an answer so far.

Searched on Google and found some suggestions from a thread where Luke-Jr was involved, but none of the solutions I tried worked.

https://github.com/bitcoin/bitcoin/issues/2998

{Embed}
https://github.com/bitcoin/bitcoin/issues/2998
configure: error: libdb_cxx headers missing (netbsd) ¬∑ Issue #299...
these files are located in /usr/pkg/include/db4 samsa% ls /usr/pkg/include/db4 db.h db_185.h db_cxx.h
https://images-ext-2.discordapp.net/external/yMK6Chm9XthSHhmhzmxCmdZEMqZxRty70Br1T2gs2Kw/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/348933


[30-Nov-18 05:59 PM] Deleted User#0000
@Bryan_Beus  `git clean -f`


[30-Nov-18 06:00 PM] Deleted User#0000
then buiild.sh


[30-Nov-18 06:00 PM] Deleted User#0000
it works


[30-Nov-18 06:00 PM] Deleted User#0000
I aslso had something similar happen where I needed a fresh clone to fix it too


[30-Nov-18 06:01 PM] Bryan_Beus#6442
tried it already. no dice. done each multiple each.


[30-Nov-18 06:01 PM] Deleted User#0000
fresh cone isnt working?


[01-Dec-18 03:16 PM] TonyL#3577
Hmm,  Is it a feature that all mining rewards going to pubkey which I've set as `-pubkey=` daemon param?

Noticed that after starting a fresh chain and mining 100+ blocks I have 0 balance. Investigated:
By mistake left pubkey from different asset chain start as `-pubkey=` and in block generating tx vout funds went to address which was valid to this pubkey on different chain


[01-Dec-18 03:23 PM] Alright#0419
@TonyL yes

{Reactions}
üëå 

[01-Dec-18 03:23 PM] Alright#0419
all change address outputs will go to the address as well


[01-Dec-18 03:25 PM] TonyL#3577
Seems like a strict to typos feature üòÉ


[01-Dec-18 03:55 PM] Alright#0419
Joker added some warnings to staked komodod if you don't have the key for the pubkey set imported


[01-Dec-18 03:55 PM] Alright#0419
not sure if they were upstreamed yet though


[01-Dec-18 06:09 PM] Deleted User#0000
That only works on setpubkey rpc, and that RPC is in all komodods I am pretty sure


[02-Dec-18 06:21 AM] dukeleto#7326
@TonyL a given pubkey is valid on any KMD chain, and even on any coin that uses the same curves. There are use cases where a node sets -pubkey but does not have it imported locally, I guess. Maybe some kind of startup message like "pubkey is not in local wallet" would be useful


[02-Dec-18 07:06 AM] siu#3920
oraclesdata in SPLTEST chain is broken too: ```cc_verify error C
cc_verify error C
cc_verify error C
cc_verify error C
cc_verify error C
```


[02-Dec-18 07:06 AM] siu#3920
everything works, except `oraclesdata`


[02-Dec-18 07:07 AM] siu#3920
```0400008085202f89040645e7b45fe03bd98b467204b8d3fc4292490a20a839a42ffdb696c7ea6ee2730100000049483045022100ffa92fc6e1b507801bb09ef30273da20cff2804984f66f1694d88bf671727c11022033f23bfdfd228053ae245639c89e9555b6527a5f7ba5d23f3622d58d5776774601ffffffff91bc65fe20369a13365fd148da5c403d7cff84c177af43b1c4a0c1151e8df4ec010000007b4c79a276a072a26ba067a56580210242b3933c14187a7d6e18c0a31e97e8ff7f0412e6f5e6585ac29150d02b21acf181402f3ca87abfae9615a762518eae1a64ce31bf1d6fda3662cb905c41fa7408987f2bbbbb9caf317448e165e96728b12d6b84681aa212d188111ededc83e98a0f84a100af038001eca10001ffffffff1a542b293723d7e3edc9ffdb8dd76cd7ae1d0899da5c9e693de703dfea53ebd1000000007b4c79a276a072a26ba067a5658021024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774814013779b736df0624fa71e7f35a22c2ece40fead753cccae4df2de5a2e2ac1bafc5f22a8650e4f6f1da8a98775b7c628ad7699455e47d1c0172665c61592eaeff6a100af038001eca10001ffffffff0b5f83ea9682bed52bb397840674470038330016f4efe8bbb76293131b3de1c10100000048473044022053ddee01b1479b9f108c211201b2029a190b81a15619b276de624a9c95d318e002203489b34ca6fa097287a859547af020f4b6075f24a91c681164ab0b2b16db3aa401ffffffff05f0b9f50500000000302ea22c8020a1219dcf450124e530ec46e7736022efa3264796b8d24ceff178bc244eec0f848103120c008203000401cc1027000000000000302ea22c802038cb32bfc1db5f0ec5d5a64dcc22d6fe7d4cec36cbbbe0e2e762e25b80b42b678103120c008203000401cc10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac00000000000000006b6a4c68ec440ad05d3b20078c3c5206398c8e71e1a139763e43fe39faec002ed267c9e90bae91bc65fe20369a13365fd148da5c403d7cff84c177af43b1c4a0c1151e8df4ec21024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e977740305000a00000000dd2200000000000000000000000000```


[02-Dec-18 07:08 AM] siu#3920
this is from pirate repo


[02-Dec-18 07:08 AM] siu#3920
`https://github.com/PirateNetwork/komodo`


[02-Dec-18 07:08 AM] siu#3920
@jl777c


[02-Dec-18 07:22 AM] jl777c#5810
@TonyL does oracles CC pass the tests?


[02-Dec-18 07:27 AM] TonyL#3577
@jl777c There is only oracle creation process in auto-tests at the moment.
Will test oracles on my side now


[02-Dec-18 07:28 AM] TonyL#3577
@siu did you use https://github.com/PirateNetwork/komodo `FSM` and sapling activated chain?

{Embed}
https://github.com/PirateNetwork/komodo
PirateNetwork/komodo
Komodo. Contribute to PirateNetwork/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/ADiw3GGhxikbnFDt4CIoQJU5OtsBACcR2o-X-CQBF_c/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/42935276


[02-Dec-18 07:30 AM] siu#3920
Yes


[02-Dec-18 07:32 AM] SHossain#0007
wait a minute. the latest FSM branch chagnes weren't merged in there


[02-Dec-18 07:32 AM] TonyL#3577
I can just test on https://github.com/jl777/komodo/tree/FSM

{Embed}
https://github.com/jl777/komodo/tree/FSM
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[02-Dec-18 07:35 AM] SHossain#0007
https://github.com/PirateNetwork/komodo repo is now latest with custom timestamp changes

{Embed}
https://github.com/PirateNetwork/komodo
PirateNetwork/komodo
Komodo. Contribute to PirateNetwork/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/ADiw3GGhxikbnFDt4CIoQJU5OtsBACcR2o-X-CQBF_c/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/42935276


[02-Dec-18 07:37 AM] siu#3920
Ok.


[02-Dec-18 07:37 AM] siu#3920
Will test again

{Reactions}
üëçüèΩ 

[02-Dec-18 07:52 AM] TonyL#3577
`oraclesdata` worked fine for me on latest FSM and SPLTEST chain: https://paste.ubuntu.com/p/2tYj2QD6bH/


[02-Dec-18 08:02 AM] TonyL#3577
For a next week I have a plan for auto-tests: separate it for different files, add non-regtest assetchain connection functionality, cover few uncovered things in dice and oracles, add tests for channels and then proceed to gatewaysCC test automation (should be quite tricky)


[02-Dec-18 08:21 AM] siu#3920
```In file included from ./cc/CCinclude.h:50:0,
                 from cc/eval.cpp:24:
./cc/../komodo_defs.h:20:9: error: invalid digit "9" in octal constant
 >>>>>>> 009b9a6bde7891c13eebbfd8b522330c9968549d
         ^
./cc/../komodo_defs.h:16:1: error: expected unqualified-id before ‚Äò<<‚Äô token
 <<<<<<< HEAD
 ^
cc1plus: warning: unrecognized command line option ‚Äò-Wno-builtin-declaration-mismatch‚Äô
Makefile:3209: recipe for target 'cc/libbitcoin_server_a-eval.o' failed
make[2]: *** [cc/libbitcoin_server_a-eval.o] Error 1
make[2]: *** Waiting for unfinished jobs....
In file included from bitcoind.cpp:44:0:
komodo_defs.h:20:9: error: invalid digit "9" in octal constant
 >>>>>>> 009b9a6bde7891c13eebbfd8b522330c9968549d
         ^
komodo_defs.h:16:1: error: expected unqualified-id before ‚Äò<<‚Äô token
 <<<<<<< HEAD
 ^
cc1plus: warning: unrecognized command line option ‚Äò-Wno-builtin-declaration-mismatch‚Äô
Makefile:4903: recipe for target 'komodod-bitcoind.o' failed
make[2]: *** [komodod-bitcoind.o] Error 1
make[2]: Leaving directory '/home/win/komodo/src'
Makefile:4968: recipe for target 'all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory '/home/win/komodo/src'
Makefile:659: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1```


[02-Dec-18 08:22 AM] siu#3920
something broke on latest pull


[02-Dec-18 08:22 AM] siu#3920
@SHossain


[02-Dec-18 08:24 AM] siu#3920
let me clone from scratch


[02-Dec-18 08:27 AM] SHossain#0007
checking


[02-Dec-18 08:36 AM] SHossain#0007
@siu it built fine in my computer. @KNOX forked fresh and edited only the timestamp on that repo.


[02-Dec-18 08:37 AM] siu#3920
ok, im compiling fresh


[02-Dec-18 08:37 AM] dukeleto#7326
by default, numbers are in octal


[02-Dec-18 08:37 AM] dukeleto#7326
perhaps a 0x prefix is needed somewhere


[02-Dec-18 08:38 AM] dukeleto#7326
oh


[02-Dec-18 08:38 AM] dukeleto#7326
that is a merge conflict marker


[02-Dec-18 08:38 AM] dukeleto#7326
@siu you have a merge conflict


[02-Dec-18 08:38 AM] siu#3920
yeah


[02-Dec-18 08:38 AM] siu#3920
but its weird since i didnt update anything on my side


[02-Dec-18 08:38 AM] dukeleto#7326
is that in the code you are pulling, or local?


[02-Dec-18 08:38 AM] siu#3920
just pulled latest code


[02-Dec-18 08:39 AM] dukeleto#7326
could be a merge conflict commited to repo


[02-Dec-18 08:39 AM] siu#3920
no worries, i cloned a fresh copy and im compiling now.


[02-Dec-18 08:39 AM] dukeleto#7326
well, it ain't gonna work if that has a merge conflict committed üòÉ


[02-Dec-18 08:39 AM] siu#3920
if it compiles now, then it should be ok.


[02-Dec-18 08:39 AM] siu#3920
so far so good


[02-Dec-18 08:39 AM] dukeleto#7326
look at ./cc/../komodo_defs.h:20:9:


[02-Dec-18 08:39 AM] dukeleto#7326
probably a lot faster, but that is just me üòÉ


[02-Dec-18 08:40 AM] dukeleto#7326
i don't like waiting and then builds fail after 10-20 minutes


[02-Dec-18 08:40 AM] dukeleto#7326
you will be compiling boost for a while, lulz


[02-Dec-18 08:41 AM] SHossain#0007
i compiled fresh clone under 8 minutes


[02-Dec-18 08:42 AM] siu#3920
mine is still at it.


[02-Dec-18 08:48 AM] siu#3920
finished ok


[02-Dec-18 08:50 AM] SHossain#0007
good


[02-Dec-18 08:51 AM] SHossain#0007
i have tested `jl777`, `FSM`, `dev` & `beta` branches. they all compiles fine


[02-Dec-18 08:51 AM] jl777c#5810
they are all in sync


[02-Dec-18 08:52 AM] siu#3920
```komodo-cli -ac_name=SPLTEST sendrawtransaction 0400008085202f89040645e7b45fe03bd98b467204b8d3fc4292490a20a839a42ffdb696c7ea6ee27301000000484730440220528e11a91afc492d589999421891961cba86deb79b976377fcd067f1bc1d5a9d0220487c96c33eb08b55d0f11b0c3e54b95c3bd9ec2f66366e09f092b37f86fc0b4a01ffffffff91bc65fe20369a13365fd148da5c403d7cff84c177af43b1c4a0c1151e8df4ec010000007b4c79a276a072a26ba067a56580210242b3933c14187a7d6e18c0a31e97e8ff7f0412e6f5e6585ac29150d02b21acf18140b02e1a3734112ea65202894a02579fe97cb98cb4836b47e7b392e151feaf20ed64b151534f232f04a2ec983a8f7d737320370b607502741505328bee09d16df8a100af038001eca10001ffffffff1a542b293723d7e3edc9ffdb8dd76cd7ae1d0899da5c9e693de703dfea53ebd1000000007b4c79a276a072a26ba067a5658021024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e977748140e5d6954f4099d6e85752dc9a145afab5754ae307b99bc1c55493630c4b4b3146424f97db7533a57bdc7f3ad92aa45fd227674f8ca26325f9c2c61fcabb52da11a100af038001eca10001ffffffff0b5f83ea9682bed52bb397840674470038330016f4efe8bbb76293131b3de1c10100000049483045022100af215b9d9e01e1d861c9d8c6c1966371a3ac1dbe0b52faa9dcba30decdc4d3740220116dda9de7040daf86515d59dd058ebb60222d14753e5b7ba19353f700991bf201ffffffff05f0b9f50500000000302ea22c8020a1219dcf450124e530ec46e7736022efa3264796b8d24ceff178bc244eec0f848103120c008203000401cc1027000000000000302ea22c802038cb32bfc1db5f0ec5d5a64dcc22d6fe7d4cec36cbbbe0e2e762e25b80b42b678103120c008203000401cc10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac00000000000000006b6a4c68ec440ad05d3b20078c3c5206398c8e71e1a139763e43fe39faec002ed267c9e90bae91bc65fe20369a13365fd148da5c403d7cff84c177af43b1c4a0c1151e8df4ec21024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e977740305000a00000000432300000000000000000000000000
```


[02-Dec-18 08:52 AM] siu#3920
```error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[02-Dec-18 08:53 AM] siu#3920
still same result on my side


[02-Dec-18 08:53 AM] siu#3920
```cc_verify error C
cc_verify error C
```


[02-Dec-18 08:53 AM] siu#3920
```commit 009b9a6bde7891c13eebbfd8b522330c9968549d
Author: ParrotGotMeEye <43793612+ParrotGotMeEye@users.noreply.github.com>
Date:   Sun Dec 2 15:34:29 2018 +0000

    Update komodo_defs.h
```


[02-Dec-18 08:53 AM] siu#3920
im on latest right?


[02-Dec-18 08:57 AM] SHossain#0007
yes


[02-Dec-18 08:57 AM] siu#3920
```./komodo-cli -ac_name=SPLTEST oraclesinfo ae0be9c967d22e00ecfa39fe433e7639a1e1718e8c3906523c8c07203b5dd00a
{
  "result": "success",
  "txid": "ae0be9c967d22e00ecfa39fe433e7639a1e1718e8c3906523c8c07203b5dd00a",
  "name": "TEST",
  "description": "testing",
  "format": "S",
  "marker": "RHWq5ydfhNeYUS2yjMp59NjKQfzF66439Q",
  "registered": [
    {
      "publisher": "024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774",
      "baton": "RNcGDXRPW9oDgR9FUeB47wFg6cMFoJHFCL",
      "batontxid": "ecf48d1e15c1a0c4b143af77c184ff7c3d405cda48d15f36139a3620fe65bc91",
      "lifetime": "2.00000000",
      "funds": "2.00000000",
      "datafee": "0.00010000"
    },
    {
      "publisher": "024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774",
      "baton": "RNcGDXRPW9oDgR9FUeB47wFg6cMFoJHFCL",
      "batontxid": "ecf48d1e15c1a0c4b143af77c184ff7c3d405cda48d15f36139a3620fe65bc91",
      "lifetime": "2.00000000",
      "funds": "2.00000000",
      "datafee": "0.00010000"
    },
    {
      "publisher": "024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774",
      "baton": "RNcGDXRPW9oDgR9FUeB47wFg6cMFoJHFCL",
      "batontxid": "ecf48d1e15c1a0c4b143af77c184ff7c3d405cda48d15f36139a3620fe65bc91",
      "lifetime": "2.00000000",
      "funds": "2.00000000",
      "datafee": "0.00010000"
    }
  ]
}
```


[02-Dec-18 08:58 AM] siu#3920
Im not usre why there are 3 repetitions of "publisher" section on oraclesinfo


[02-Dec-18 08:58 AM] siu#3920
i just sent 2 `oraclessubscribe` txs


[02-Dec-18 08:59 AM] siu#3920
and 2 `oraclesregister`


[02-Dec-18 11:28 AM] siu#3920
@TonyL the `oraclesdata` test you did that worked on latest was on SPLTEST? or on another chain?


[02-Dec-18 11:28 AM] siu#3920
i still cant get mine to work


[02-Dec-18 11:30 AM] Alright#0419
@siu what's it doing


[02-Dec-18 11:31 AM] Alright#0419
oracles working for me on every chain I've tried so far


[02-Dec-18 11:32 AM] siu#3920
```error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```


[02-Dec-18 11:32 AM] siu#3920
and console prints: ```cc_verify error C
```


[02-Dec-18 11:33 AM] jl777c#5810
without detailed method to reproduce this error, it cant be reproduced


[02-Dec-18 11:33 AM] siu#3920
i created a S oracle in SPLTEST


[02-Dec-18 11:33 AM] siu#3920
the registered and subscribed to it 2 times


[02-Dec-18 11:34 AM] siu#3920
I try to submit "HOLA!" as data


[02-Dec-18 11:34 AM] siu#3920
`05000a`


[02-Dec-18 11:34 AM] siu#3920
not sure if that is correct though


[02-Dec-18 11:35 AM] jl777c#5810
05000a is illegal


[02-Dec-18 11:35 AM] jl777c#5810
this is 99% likely to be a user error


[02-Dec-18 11:35 AM] siu#3920
ok


[02-Dec-18 11:36 AM] siu#3920
`count=$(echo -n $1 | wc -m | xargs printf "%.4x" | tac -rs .. )`


[02-Dec-18 11:36 AM] Alright#0419
what are you using as count


[02-Dec-18 11:37 AM] Alright#0419
like what does that set count to


[02-Dec-18 11:37 AM] siu#3920
it counts HOLA!


[02-Dec-18 11:37 AM] siu#3920
and turns it into binary


[02-Dec-18 11:38 AM] Alright#0419
what is the exact hex you are trying to use for oraclesdata


[02-Dec-18 11:38 AM] siu#3920
ok, i had a typo in the script


[02-Dec-18 11:38 AM] siu#3920
this is the hex `0500484f4c41210a`


[02-Dec-18 11:39 AM] siu#3920
still get the same result


[02-Dec-18 11:39 AM] Alright#0419
https://github.com/StakedChain/trollbox/blob/bash/chatsend.sh

{Embed}
https://github.com/StakedChain/trollbox/blob/bash/chatsend.sh
StakedChain/trollbox
On chain real time chat for KMD assetchains. Contribute to StakedChain/trollbox development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[02-Dec-18 11:39 AM] Alright#0419
use that logic


[02-Dec-18 11:39 AM] Alright#0419
works every time


[02-Dec-18 11:40 AM] Alright#0419
change `echo "$(date +%s)$message" > msg` to `echo $message > msg`


[02-Dec-18 11:40 AM] siu#3920
`bits=$(echo -e $1 | xxd -b -p | tr -d '\n')
`


[02-Dec-18 11:40 AM] siu#3920
but this works for me in coqui chain


[02-Dec-18 11:40 AM] siu#3920
i have not tried after sapling upgrade though


[02-Dec-18 11:40 AM] Alright#0419
just a moment, let me see what my script produces


[02-Dec-18 11:41 AM] siu#3920
```#! /bin/bash

count=$(echo -n $1 | wc -m | xargs printf "%.4x" | tac -rs .. )
bits=$(echo -e $1 | xxd -b -p | tr -d '\n')
echo $count$bits
cd ~/komodo/src
hex=$(./komodo-cli -ac_name=SPLTEST  oraclesdata ae0be9c967d22e00ecfa39fe433e7639a1e1718e8c3906523c8c07203b5dd00a $count$bits | jq '.hex')
echo $hex
rawtx=$(echo "${hex:1: -1}")
echo $rawtx
./komodo-cli -ac_name=SPLTEST sendrawtransaction $rawtx
```


[02-Dec-18 11:41 AM] siu#3920
this is my script


[02-Dec-18 11:45 AM] Alright#0419
484f4c41210a


[02-Dec-18 11:45 AM] Alright#0419
oh nevermind


[02-Dec-18 11:45 AM] Alright#0419
another moment


[02-Dec-18 11:45 AM] siu#3920
does this script work for you?


[02-Dec-18 11:46 AM] siu#3920
is it something wrong in the script?


[02-Dec-18 11:46 AM] Alright#0419
0600484f4c41210a


[02-Dec-18 11:46 AM] Alright#0419
try that please


[02-Dec-18 11:46 AM] Alright#0419
I'm not sure about your script, but I spent a good amount of time on mine


[02-Dec-18 11:46 AM] Alright#0419
so I know it works


[02-Dec-18 11:47 AM] siu#3920
ok


[02-Dec-18 11:48 AM] siu#3920
```error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```


[02-Dec-18 11:48 AM] siu#3920
same exact result


[02-Dec-18 11:49 AM] siu#3920
```~/komodo/src$ ./komodo-cli -ac_name=SPLTEST  oraclesdata ae0be9c967d22e00ecfa39fe433e7639a1e1718e8c3906523c8c07203b5dd00a 0600484f4c41210a
{
  "result": "success",
  "hex": "0400008085202f89040645e7b45fe03bd98b467204b8d3fc4292490a20a839a42ffdb696c7ea6ee2730100000049483045022100fa5c18456d4af961253a0fbeb219915379663f9fcd3d13d16c2ce1366406a4eb02205f88ae6333d4ad083bec37aa30240ef5f3d5e0ef6743546d130dd4f5093beaec01ffffffff91bc65fe20369a13365fd148da5c403d7cff84c177af43b1c4a0c1151e8df4ec010000007b4c79a276a072a26ba067a56580210242b3933c14187a7d6e18c0a31e97e8ff7f0412e6f5e6585ac29150d02b21acf181401f48b212f01208fd894c54513efd8975247d7a4e8e28187c68f37e4c347ffc1e5ff4d7d8557dac8757c09ee959df32c980893e51991914ec311c95b71298ac29a100af038001eca10001ffffffff1a542b293723d7e3edc9ffdb8dd76cd7ae1d0899da5c9e693de703dfea53ebd1000000007b4c79a276a072a26ba067a5658021024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774814051f963eaca4237f4d94de981e18de5365a706c6010e653fde27457b7972aaf8762e8cc6af552091bca62c6bd47390937d8e6bda015b5a44e7c30e74e25866dd3a100af038001eca10001ffffffff0b5f83ea9682bed52bb397840674470038330016f4efe8bbb76293131b3de1c1010000004948304502210091b46ae072cfce9fa3dd140ca175d8c5c49420e6664744f35320613d0cdd211002205d619d311e0cbd7f388a9f5e5ffd2a1abc02b1cf6552071e9c6dbc994d53907201ffffffff05f0b9f50500000000302ea22c8020a1219dcf450124e530ec46e7736022efa3264796b8d24ceff178bc244eec0f848103120c008203000401cc1027000000000000302ea22c802038cb32bfc1db5f0ec5d5a64dcc22d6fe7d4cec36cbbbe0e2e762e25b80b42b678103120c008203000401cc10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac0000000000000000706a4c6dec440ad05d3b20078c3c5206398c8e71e1a139763e43fe39faec002ed267c9e90bae91bc65fe20369a13365fd148da5c403d7cff84c177af43b1c4a0c1151e8df4ec21024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774080600484f4c41210a00000000f72300000000000000000000000000"
}
```


[02-Dec-18 11:49 AM] Alright#0419
```
{
  "result": "success",
  "samples": [
    [
      "HOLA!\n"
    ]
  ]
}
```


[02-Dec-18 11:49 AM] Alright#0419
can you give me chain params and branch you're using


[02-Dec-18 11:50 AM] siu#3920
``` 
0400008085202f89040645e7b45fe03bd98b467204b8d3fc4292490a20a839a42ffdb696c7ea6ee2730100000049483045022100fa5c18456d4af961253a0fbeb219915379663f9fcd3d13d16c2ce1366406a4eb02205f88ae6333d4ad083bec37aa30240ef5f3d5e0ef6743546d130dd4f5093beaec01ffffffff91bc65fe20369a13365fd148da5c403d7cff84c177af43b1c4a0c1151e8df4ec010000007b4c79a276a072a26ba067a56580210242b3933c14187a7d6e18c0a31e97e8ff7f0412e6f5e6585ac29150d02b21acf181401f48b212f01208fd894c54513efd8975247d7a4e8e28187c68f37e4c347ffc1e5ff4d7d8557dac8757c09ee959df32c980893e51991914ec311c95b71298ac29a100af038001eca10001ffffffff1a542b293723d7e3edc9ffdb8dd76cd7ae1d0899da5c9e693de703dfea53ebd1000000007b4c79a276a072a26ba067a5658021024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774814051f963eaca4237f4d94de981e18de5365a706c6010e653fde27457b7972aaf8762e8cc6af552091bca62c6bd47390937d8e6bda015b5a44e7c30e74e25866dd3a100af038001eca10001ffffffff0b5f83ea9682bed52bb397840674470038330016f4efe8bbb76293131b3de1c1010000004948304502210091b46ae072cfce9fa3dd140ca175d8c5c49420e6664744f35320613d0cdd211002205d619d311e0cbd7f388a9f5e5ffd2a1abc02b1cf6552071e9c6dbc994d53907201ffffffff05f0b9f50500000000302ea22c8020a1219dcf450124e530ec46e7736022efa3264796b8d24ceff178bc244eec0f848103120c008203000401cc1027000000000000302ea22c802038cb32bfc1db5f0ec5d5a64dcc22d6fe7d4cec36cbbbe0e2e762e25b80b42b678103120c008203000401cc10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac10270000000000002321024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774ac0000000000000000706a4c6dec440ad05d3b20078c3c5206398c8e71e1a139763e43fe39faec002ed267c9e90bae91bc65fe20369a13365fd148da5c403d7cff84c177af43b1c4a0c1151e8df4ec21024fa9afae455ace14d3c1373341b9eb0dd1b2a59ae073f45d28f9d129d6e97774080600484f4c41210a00000000f72300000000000000000000000000
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```


[02-Dec-18 11:50 AM] siu#3920
latest FSM branch from https://github.com/PirateNetwork/komodo

{Embed}
https://github.com/PirateNetwork/komodo
PirateNetwork/komodo
Komodo. Contribute to PirateNetwork/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/ADiw3GGhxikbnFDt4CIoQJU5OtsBACcR2o-X-CQBF_c/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/42935276


[02-Dec-18 11:50 AM] Alright#0419
yea seems your script should work


[02-Dec-18 11:50 AM] Alright#0419
only difference between our outputs was mine adding line break


[02-Dec-18 11:51 AM] siu#3920
yeah, that happens a bit


[02-Dec-18 11:51 AM] siu#3920
a space or two after the text you want helps


[02-Dec-18 11:51 AM] Alright#0419
was by design


[02-Dec-18 11:51 AM] Alright#0419
for chat dapp


[02-Dec-18 11:51 AM] siu#3920
ill try from latest FSM of jl777 repo


[02-Dec-18 11:52 AM] Alright#0419
what branch of pirate repo


[02-Dec-18 11:52 AM] siu#3920
FSM


[02-Dec-18 11:52 AM] Alright#0419
Oh I can't read


[02-Dec-18 11:52 AM] siu#3920
üòÇ


[02-Dec-18 11:56 AM] siu#3920
im compiling latest jl777 FSM branch see if result is the same


[02-Dec-18 11:56 AM] SHossain#0007
SPLTEST chian is running using FSM branch of PN repo with custom sapling activation and deadline timestamp


[02-Dec-18 11:57 AM] siu#3920
oh


[02-Dec-18 11:57 AM] SHossain#0007
deadline already passed 2 days ago


[02-Dec-18 11:57 AM] SHossain#0007
so, this chain is Sapling only


[02-Dec-18 11:58 AM] siu#3920
ah


[02-Dec-18 11:58 AM] siu#3920
so if i start it in jl777 repo it will break


[02-Dec-18 11:58 AM] siu#3920
darn


[02-Dec-18 11:58 AM] siu#3920
and im the only one getting these results then?


[02-Dec-18 12:00 PM] SHossain#0007
it will not break if you use the following in `~/komodo/src/komodo_defs.h`
```
#define KOMODO_SAPLING_ACTIVATION 1543073054 // Sat, 24 Nov 2018 15:24:14 GMT
#define KOMODO_SAPLING_DEADLINE 1543593600 // Fri, 30 Nov 2018 16:00:00 GMT
```


[02-Dec-18 12:00 PM] siu#3920
:/


[02-Dec-18 12:00 PM] siu#3920
ok


[02-Dec-18 12:00 PM] SHossain#0007
you can actually test any branch (except master) using the above timestamp and jl777's repo


[02-Dec-18 12:04 PM] siu#3920
@SHossain have you tried it in PN FSM?


[02-Dec-18 12:04 PM] siu#3920
does it work on your side?


[02-Dec-18 12:08 PM] SHossain#0007
```
./komodo-cli -ac_name=SPLTEST oraclescreate TEST testing S

./komodo-cli -ac_name=SPLTEST sendrawtransaction 0400008085202f8902198a606a428701d95c942ff1ab52377198799a3a7898c9c47d5eb7aa92caffae010000004847304402200ed9dd3e1679570995cf824702d14b99dcbc4f4e052a1b976e956ecb227efe6002205818263e1df5d50dc4ef56d8848f00a2a786d556430523bb5ff3b16b1eadc5c101ffffffff1a362237b8160c59cfaf49e6042910ce5173cc8cd4c4f835151f0885e62a912b0100000049483045022100e1a0212982742f8abaf8a1d21ac6647438941eacdf9249be959aea34eb3f3308022043d87ff54576c14717a8321a1d09e420831ad7231b84b96f53121e084328660e01ffffffff0210270000000000002321038c1d42db6a45a57eccb8981b078fb7857b9b496293fe299d2b8d120ac5b5691aac0000000000000000136a11ec43045445535401530774657374696e6700000000042400000000000000000000000000

c0f7a20fe78fa47992a8add42a6a9b50fb1540b8604d69eb120ffe81713ee778
```


[02-Dec-18 12:12 PM] SHossain#0007
```
./komodo-cli -ac_name=SPLTEST oraclesregister c0f7a20fe78fa47992a8add42a6a9b50fb1540b8604d69eb120ffe81713ee778 10000
{
  "result": "success",
  "hex": "0400008085202f89031a6bc9b7e102d50546ca429a1f67266c429c5c0ff7fbc717f3b6a599004beba7010000004847304402203f2db72b3787192740399f430c7108f8e69b0e76057bc142077338ec7d6ca69702206184e51f601e04b002c2197619c92a6b4ea7472e9a794aa201a276d79305a1fa01ffffffff1c6416391bf4921ea6aba88acde599058175566c2ba282a00c6517850abf4e49010000004847304402206c7d792584cda9fd21c7a2c41462af8702813a7ece3aab32d622bbb5ca252dee02204e403b7bd6d0d2368c9593df5468941c3f0f73db129a40edc05aa86e22efdef001ffffffff1ae423c790ff9349102cfd0682bd295b32599cf8601cf49523973f88b955d67901000000494830450221008c58b7b420ee3c516f1511f60f132e760062e5b23fb2ac8224030bd59222deb4022078831a100376da31cf318fce5c60793d6379843dda68c998680153ebde57e74101ffffffff03102700000000000023210278e73e7181fe0f12eb694d60b84015fb509b6a2ad4ada89279a48fe70fa2f7c0ac1027000000000000302ea22c8020d1b27f47950bb0b5d79749a18c912c5a0ab02c73be0c3c4d2a8bad69ebfc86c98103120c008203000401cc00000000000000004f6a4c4cec5278e73e7181fe0f12eb694d60b84015fb509b6a2ad4ada89279a48fe70fa2f7c02102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e102700000000000000000000082400000000000000000000000000"
}
```


[02-Dec-18 12:12 PM] SHossain#0007
```
9e814247dcdc995c0d88a936d0bba6a51b155f928ddb8785418d035fdae5e55f
```


[02-Dec-18 12:18 PM] SHossain#0007
```
{
"method":"oraclessubscribe",
"params": ["c0f7a20fe78fa47992a8add42a6a9b50fb1540b8604d69eb120ffe81713ee778","02fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e", "1" ]
}
```


[02-Dec-18 12:18 PM] SHossain#0007
```
  "result": {
    "result": "success",
    "hex": "0400008085202f890125a6e99b1ae9cf9367ca63c144579ae520a17a310a04f6d4577c5984fee962dc020000004847304402206a99cd9495891fdfe701bd5240d4e04e571bcb9cb5e0145e9b84f7621b7ab43302204245aed563527f0a83b34abd3eb3d54c2d8d944cc1cc1de1b94048b2e016907301ffffffff0400e1f50500000000302ea22c80209f8a94345fa12205ac265c520ca7c8793d667da07c9d2249037b4985d258c41b8103120c008203000401cc102700000000000023210278e73e7181fe0f12eb694d60b84015fb509b6a2ad4ada89279a48fe70fa2f7c0ace09aa43500000000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eac00000000000000004f6a4c4cec5378e73e7181fe0f12eb694d60b84015fb509b6a2ad4ada89279a48fe70fa2f7c02102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e00e1f5050000000000000000142400000000000000000000000000"
  },
```


[02-Dec-18 12:18 PM] SHossain#0007
```
00a444e0248970d861069722264c669239d56e3961f004393e0c239b464df590
```


[02-Dec-18 12:24 PM] SHossain#0007
```
{
"method":"oraclesdata",
"params": ["c0f7a20fe78fa47992a8add42a6a9b50fb1540b8604d69eb120ffe81713ee778","0600484f4c41210a" ]
}
```


[02-Dec-18 12:24 PM] SHossain#0007
```
    "result": "success",
    "hex": "0400008085202f890420e10002002118f01481c4374b1387fa096a6a30cf4d2319d8dac3591c43c3ce0100000049483045022100e8fc1ae1079c234f37a8047ee3e3e411fc7f00f90bffd9affd3f05f4c3ca0bd70220602e916cac81be2b667ebc1ba59fd998d0af33b33682541a303b3d36ab795bb001ffffffff5fe5e5da5f038d418587db8d925f151ba5a6bbd036a9880d5c99dcdc4742819e010000007b4c79a276a072a26ba067a56580210255395ca10e8541205f801452f93727d942a9fd0c387fd32ba7981d56221d5900814020579853d3289d06ef6708e4c5047ddef1f2dd7cd3b5ff7bf9911eaddbb89a7b5915aeb7d83835f727b76f333e7adf0a2e61f0ab6d7e1f75742cc16572669709a100af038001eca10001ffffffff093a583da221aa4a302fa7d8274fa62bc959332f4d8b67c75788d94e96b6f2e8000000007b4c79a276a072a26ba067a565802102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e81406f8ebaa2f4508da20559be088e8b54c515589f29e9f34e5869bd7e59ee761b75037093b95cb43243842568272c81ac3ae9e7355c7ca2b7f5fa7641e00c12a148a100af038001eca10001ffffffff212eea6e68ef25ac2c4631d8863f628e51dd7f6f6ef92ba3a435ca3662d5b718010000004847304402206b4b01a8fc6ebc90a4a82ca2f6730b4514286edaa14eddad84579a7d40d2dd3402201df665caa74ea85da9093f4d541a38241d32db93784bcebdc01e08aedcdba58301ffffffff05f0b9f50500000000302ea22c80209f8a94345fa12205ac265c520ca7c8793d667da07c9d2249037b4985d258c41b8103120c008203000401cc1027000000000000302ea22c8020d1b27f47950bb0b5d79749a18c912c5a0ab02c73be0c3c4d2a8bad69ebfc86c98103120c008203000401cc1027000000000000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eac1027000000000000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eac0000000000000000706a4c6dec4478e73e7181fe0f12eb694d60b84015fb509b6a2ad4ada89279a48fe70fa2f7c05fe5e5da5f038d418587db8d925f151ba5a6bbd036a9880d5c99dcdc4742819e2102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e080600484f4c41210a000000001d2400000000000000000000000000"
  },
```


[02-Dec-18 12:24 PM] SHossain#0007
```
{
  "result": null,
  "error": {
    "code": -26,
    "message": "16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)"
  },
  "id": null
}
```


[02-Dec-18 12:24 PM] siu#3920
yes, exact same result i get in the same chain


[02-Dec-18 12:25 PM] SHossain#0007
@jl777c broadcasting this hex getting error


[02-Dec-18 12:25 PM] SHossain#0007
tx version shows 4


[02-Dec-18 12:28 PM] Alright#0419
tested chat dapp on SPLTEST


[02-Dec-18 12:28 PM] Alright#0419
works fine


[02-Dec-18 12:29 PM] jl777c#5810
confused. so the bug is reproduced in sapling activated, or pre-sapling


[02-Dec-18 12:29 PM] Alright#0419
meaning oraclescreate, oraclesregister, oraclessubscribe, oraclesdata, oraclessamples


[02-Dec-18 12:29 PM] Alright#0419
all work


[02-Dec-18 12:29 PM] siu#3920
only one not working for me is `oraclesdata`


[02-Dec-18 12:29 PM] jl777c#5810
it might work in some cases, but not in all cases


[02-Dec-18 12:30 PM] siu#3920
if someone can reproduce the steps of shosain and see if it works on their side.


[02-Dec-18 12:30 PM] Alright#0419
can you try chat dapp on your side?


[02-Dec-18 12:30 PM] SHossain#0007
SPLTEST is sapling activated and deadline passed on 30th November


[02-Dec-18 12:30 PM] jl777c#5810
@SHossain can you clearly describe when it works and when it doesnt?


[02-Dec-18 12:31 PM] siu#3920
@Alright did you run SPLTEST from PN repo?


[02-Dec-18 12:31 PM] SHossain#0007
i used 
```
{
"method":"oraclesdata",
"params": ["c0f7a20fe78fa47992a8add42a6a9b50fb1540b8604d69eb120ffe81713ee778","0600484f4c41210a" ]
}
```


[02-Dec-18 12:31 PM] Alright#0419
yes


[02-Dec-18 12:31 PM] SHossain#0007
that created the HEX 
```
0400008085202f890420e10002002118f01481c4374b1387fa096a6a30cf4d2319d8dac3591c43c3ce0100000049483045022100e8fc1ae1079c234f37a8047ee3e3e411fc7f00f90bffd9affd3f05f4c3ca0bd70220602e916cac81be2b667ebc1ba59fd998d0af33b33682541a303b3d36ab795bb001ffffffff5fe5e5da5f038d418587db8d925f151ba5a6bbd036a9880d5c99dcdc4742819e010000007b4c79a276a072a26ba067a56580210255395ca10e8541205f801452f93727d942a9fd0c387fd32ba7981d56221d5900814020579853d3289d06ef6708e4c5047ddef1f2dd7cd3b5ff7bf9911eaddbb89a7b5915aeb7d83835f727b76f333e7adf0a2e61f0ab6d7e1f75742cc16572669709a100af038001eca10001ffffffff093a583da221aa4a302fa7d8274fa62bc959332f4d8b67c75788d94e96b6f2e8000000007b4c79a276a072a26ba067a565802102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e81406f8ebaa2f4508da20559be088e8b54c515589f29e9f34e5869bd7e59ee761b75037093b95cb43243842568272c81ac3ae9e7355c7ca2b7f5fa7641e00c12a148a100af038001eca10001ffffffff212eea6e68ef25ac2c4631d8863f628e51dd7f6f6ef92ba3a435ca3662d5b718010000004847304402206b4b01a8fc6ebc90a4a82ca2f6730b4514286edaa14eddad84579a7d40d2dd3402201df665caa74ea85da9093f4d541a38241d32db93784bcebdc01e08aedcdba58301ffffffff05f0b9f50500000000302ea22c80209f8a94345fa12205ac265c520ca7c8793d667da07c9d2249037b4985d258c41b8103120c008203000401cc1027000000000000302ea22c8020d1b27f47950bb0b5d79749a18c912c5a0ab02c73be0c3c4d2a8bad69ebfc86c98103120c008203000401cc1027000000000000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eac1027000000000000232102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313eac0000000000000000706a4c6dec4478e73e7181fe0f12eb694d60b84015fb509b6a2ad4ada89279a48fe70fa2f7c05fe5e5da5f038d418587db8d925f151ba5a6bbd036a9880d5c99dcdc4742819e2102fdc75bb1846234c0bd49d75e47b62e67fa582256c286f1e9ee750ac2c1ba313e080600484f4c41210a000000001d2400000000000000000000000000
```


[02-Dec-18 12:31 PM] SHossain#0007
when i wanted to broadcast the HEX, i get this error
```
  "error": {
    "code": -26,
    "message": "16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)"
  },
```


[02-Dec-18 12:32 PM] siu#3920
@Alright in a oracle with the same setup of S?


[02-Dec-18 12:32 PM] Alright#0419
`26fe59203720cfb061e51e2babd057b96f053e459471dd52afafe0ab1fe9d005`


[02-Dec-18 12:32 PM] Alright#0419
yes


[02-Dec-18 12:32 PM] SHossain#0007
anything wrong with this command?
```
./komodo-cli -ac_name=SPLTEST oraclesdata c0f7a20fe78fa47992a8add42a6a9b50fb1540b8604d69eb120ffe81713ee778 0600484f4c41210a
```


[02-Dec-18 12:33 PM] Alright#0419
someone please just try chat dapp from a node you're experiencing that error on


[02-Dec-18 12:33 PM] Alright#0419
see if it produces the same


[02-Dec-18 12:33 PM] SHossain#0007
i have posted all the commands i used before getting the error


[02-Dec-18 12:33 PM] Alright#0419
https://github.com/StakedChain/trollbox

{Embed}
https://github.com/StakedChain/trollbox
StakedChain/trollbox
On chain real time chat for KMD assetchains. Contribute to StakedChain/trollbox development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[02-Dec-18 12:33 PM] Alright#0419
`./register SPLTEST <txid of S oracle>`


[02-Dec-18 12:34 PM] Alright#0419
then `./send.py SPLTEST <txid of S oracle>` after the register confirms


[02-Dec-18 12:34 PM] siu#3920
"0600484f4c41210a" is what you gave me from you chat dapp @Alright


[02-Dec-18 12:34 PM] Alright#0419
could be different from python version


[02-Dec-18 12:34 PM] Alright#0419
which is what I'm testing atm


[02-Dec-18 12:34 PM] siu#3920
why would `./komodo-cli -ac_name=SPLTEST oraclesdata c0f7a20fe78fa47992a8add42a6a9b50fb1540b8604d69eb120ffe81713ee778 0600484f4c41210a`


[02-Dec-18 12:34 PM] siu#3920
fail?


[02-Dec-18 12:34 PM] Alright#0419
might be based on size


[02-Dec-18 12:35 PM] siu#3920
but the size fail error is different


[02-Dec-18 12:35 PM] jl777c#5810
does this work on a pre-sapling?


[02-Dec-18 12:35 PM] Alright#0419
yes


[02-Dec-18 12:35 PM] siu#3920
it does go through but it doesnt print


[02-Dec-18 12:35 PM] siu#3920
will need to test on a test chain without sapling


[02-Dec-18 12:36 PM] SHossain#0007
brb after some food


[02-Dec-18 12:36 PM] siu#3920
buen provecho


[02-Dec-18 12:36 PM] Alright#0419
`./komodod -ac_name=AJ -ac_supply=999999 -ac_reward=100000000 -ac_algo=verushash -ac_veruspos=60 -ac_cc=2 -addnode=195.201.20.230 -addnode=195.201.137.5`


[02-Dec-18 12:36 PM] Alright#0419
worked on that


[02-Dec-18 12:36 PM] Alright#0419
you guys can connect if you like


[02-Dec-18 12:36 PM] jl777c#5810
worked, meaning siu death hex?


[02-Dec-18 12:36 PM] Alright#0419
pre sapling


[02-Dec-18 12:37 PM] jl777c#5810
we tried siu bug on a pre-sapling?


[02-Dec-18 12:37 PM] Alright#0419
let me just confirm again


[02-Dec-18 12:37 PM] Alright#0419
1 minute


[02-Dec-18 12:37 PM] siu#3920
i have only tried in SPLTEST from PN repo which afaik i after-sapling


[02-Dec-18 12:38 PM] jl777c#5810
maybe this bug has been there all along, maybe it comes from sapling activated


[02-Dec-18 12:39 PM] jl777c#5810
answer to that question determines how best to isolate and fix it


[02-Dec-18 12:42 PM] Alright#0419
0500484f4c41210a works pre-sapling


[02-Dec-18 12:42 PM] Alright#0419
jl777 dev branch


[02-Dec-18 12:44 PM] siu#3920
@SHossain can you try `oraclesdata with `0500484f4c41210a` instead of `0600484f4c41210a`


[02-Dec-18 12:44 PM] siu#3920
just to be sure


[02-Dec-18 12:44 PM] SHossain#0007
sure. just give me few more minutes


[02-Dec-18 12:44 PM] siu#3920
ok


[02-Dec-18 12:45 PM] Alright#0419
Will you test my known working setup please?


[02-Dec-18 12:45 PM] Alright#0419
from your node throwing the error


[02-Dec-18 12:46 PM] siu#3920
i can but why would your app work if the direct rpc command is not working?


[02-Dec-18 12:47 PM] Alright#0419
well if it works for me and not you, it tells us something


[02-Dec-18 12:47 PM] Alright#0419
that's the question I'm trying to answer lol


[02-Dec-18 12:47 PM] siu#3920
shossain reproduce my steps and got to the same problem


[02-Dec-18 12:47 PM] siu#3920
maybe its better if you reproduce the steps and see if you step into the same issue.


[02-Dec-18 12:48 PM] siu#3920
create S oracle


[02-Dec-18 12:48 PM] Alright#0419
waiting for a confirmation


[02-Dec-18 12:48 PM] siu#3920
register with 10000 sats


[02-Dec-18 12:48 PM] Alright#0419
but thanks for not running 3 commands that would have taken you about 30 seconds


[02-Dec-18 12:48 PM] siu#3920
subscribe 2 times with 1 coin each


[02-Dec-18 12:48 PM] siu#3920
and then try oracledata


[02-Dec-18 12:48 PM] siu#3920
i will, im not saying i wont


[02-Dec-18 12:49 PM] siu#3920
i just want to be sure about why its not working directly in the command line first


[02-Dec-18 12:49 PM] Alright#0419
experiencing a different issue atm


[02-Dec-18 12:49 PM] Alright#0419
subscribed just fine, info shows balance


[02-Dec-18 12:50 PM] Alright#0419
but oraclesdata giving 
```
datafee 0.00000000 is illegal
datafee 0.00000000 is illegal
datafee 0.00000000 is illegal
couldnt find enough oracle inputs RFfRkExeayKJnmxyb5NcqnHxUcS4aTtoBi, limit 1 per utxo

couldnt find enough oracle inputs RFfRkExeayKJnmxyb5NcqnHxUcS4aTtoBi, limit 1 per utxo

couldnt find enough oracle inputs RFfRkExeayKJnmxyb5NcqnHxUcS4aTtoBi, limit 1 per utxo

couldnt find enough oracle inputs RFfRkExeayKJnmxyb5NcqnHxUcS4aTtoBi, limit 1 per utxo
```


[02-Dec-18 12:50 PM] Alright#0419
worked before I switched my pubkey


[02-Dec-18 12:50 PM] SHossain#0007
@siu this `0500484f4c41210a` worked


[02-Dec-18 12:51 PM] Alright#0419
same


[02-Dec-18 12:51 PM] SHossain#0007
so, was it a dead HEX?


[02-Dec-18 12:51 PM] siu#3920
great


[02-Dec-18 12:51 PM] siu#3920
im not sure


[02-Dec-18 12:52 PM] Alright#0419
can't reproduce the error


[02-Dec-18 12:52 PM] Alright#0419
with either hex


[02-Dec-18 12:52 PM] siu#3920
maybe with sapling activated wrong size will not get you a blank post, it will jus tnot go through?


[02-Dec-18 12:52 PM] Alright#0419
both work here


[02-Dec-18 12:52 PM] Alright#0419
thanks again for not trying those 3 commands though that would have told us the same thing much earlier


[02-Dec-18 12:54 PM] siu#3920
im not even trying the ones i did earlier since im not in my computer


[02-Dec-18 12:55 PM] Alright#0419
`komodo-cli -ac_name=SPLTEST oraclesdata 26fe59203720cfb061e51e2babd057b96f053e459471dd52afafe0ab1fe9d005 0500484f4c41210a`
`komodo-cli -ac_name=SPLTEST oraclesdata 26fe59203720cfb061e51e2babd057b96f053e459471dd52afafe0ab1fe9d005 0600484f4c41210a`
@SHossain both of these worked for me


[02-Dec-18 12:55 PM] Alright#0419
did you have an error for either?


[02-Dec-18 12:55 PM] SHossain#0007
```
./register.py SPLTEST c0f7a20fe78fa47992a8add42a6a9b50fb1540b8604d69eb120ffe81713ee778
oraclesregister: 621f6df4d3014f57e2150cdbeca2b465b9118a9bb75d3873f5a1330e1cb76f9e
oraclessubscribe: 5e951397abed2ffd61e88dc379f915337a4a653ef777c23373b327ef02aba3fb
oraclessubscribe: 8de2a51ec5b9632d3a2efbc9214aad5e36568665ffd31e53d3b13076b2c71d25
oraclessubscribe: 8cd137701a83597f4033277cf790b35e4dd95bc2b7ce2d6be8f5d66eb4bde147
oraclessubscribe: 989aa0f54054631b02cbcc0878a6ce9ebd3af2d631404cd8d42a2baa66f18b82
oraclessubscribe: ed8ffe1817a6f59a078b48b773361ee7d7ece737b470c1ab620be11d83afee5a
oraclessubscribe: 1f43efb90b2f76baca6bb033aaa117b4ab42830d38c69ff50040563ef36ef17b
oraclessubscribe: 0451cbec44545b2825cce4c12a91d87d2a3b100a01c045cb64293432e9adcca9
oraclessubscribe: ea036d3b497526dceddf40417200f71e78f7f14f70d4606236acdef1e1b5cc94
oraclessubscribe: 5fb7832f266eb92ecee48bfc6b3e673329b00cce14312fd4d2ab7fa3e8bf380c
oraclessubscribe: 505101a2009bd2f080b9eef37f6e133f0601b657794cb1813a97b31c4e420708
wait for oraclessubscribe transactions to confirm before attempting to send message
```


[02-Dec-18 12:56 PM] siu#3920
maybe there is a limit for entropy tx in oracles now like there is in dice?


[02-Dec-18 12:57 PM] Alright#0419
are either of your still able to reliably reproduce the error?


[02-Dec-18 12:57 PM] jl777c#5810
without datafee, there will be an error


[02-Dec-18 12:57 PM] Alright#0419
the stack element error


[02-Dec-18 12:57 PM] SHossain#0007
i'm waiting for the previous txs to be confirmed before i used your `send.py`


[02-Dec-18 12:57 PM] Alright#0419
the datafee thing was because I thought txs were confirmed when they were not


[02-Dec-18 12:58 PM] siu#3920
datafee as in oraclessubscribe?


[02-Dec-18 12:58 PM] siu#3920
or datafee is something new?


[02-Dec-18 12:59 PM] Alright#0419
you set datafee when you register to an oracle


[02-Dec-18 12:59 PM] Alright#0419
it's the amount of coins you want to receive each time you do oraclesdata


[02-Dec-18 12:59 PM] Alright#0419
in sats


[02-Dec-18 01:00 PM] SHossain#0007
```
./send.py SPLTEST c0f7a20fe78fa47992a8add42a6a9b50fb1540b8604d69eb120ffe81713ee778
Type message: 
```


[02-Dec-18 01:00 PM] jl777c#5810
if there isnt enough datafee prepaid, you cant publish


[02-Dec-18 01:00 PM] SHossain#0007
@Alright what would be the message?


[02-Dec-18 01:00 PM] Alright#0419
anything


[02-Dec-18 01:00 PM] Alright#0419
it's chat lol


[02-Dec-18 01:00 PM] siu#3920
i put 10000 satoshis as datafee


[02-Dec-18 01:00 PM] Alright#0419
SHo, you got the stack element error with the HOLA! hex at one point yes?


[02-Dec-18 01:01 PM] Alright#0419
can you try the exact command again if so


[02-Dec-18 01:01 PM] siu#3920
then do 2 txs of 1


[02-Dec-18 01:01 PM] siu#3920
should be enough if im the only one posting, right?


[02-Dec-18 01:01 PM] Alright#0419
the amount of times you subscribe is the amount of UTXOs you have


[02-Dec-18 01:01 PM] siu#3920
yes


[02-Dec-18 01:01 PM] Alright#0419
the amount of times you can do oraclesdata in a single block


[02-Dec-18 01:01 PM] siu#3920
so 2 should be ok


[02-Dec-18 01:02 PM] siu#3920
for personal testing purposes


[02-Dec-18 01:03 PM] Alright#0419
reproduced it I think


[02-Dec-18 01:03 PM] Alright#0419
@jl777c stdout has these prints 
```
cc_verify error C
cc_verify error C
cc_verify error C
cc_verify error C
cc_verify error C
cc_verify error C
```


[02-Dec-18 01:03 PM] Alright#0419
`2018-12-02 21:02:43 ERROR: CScriptCheck(): c6644124417b091c1b80d2ee8abfec79f071c9723efc0488185c33720e338631:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
2018-12-02 21:02:43 ERROR: AcceptToMemoryPool: ConnectInputs failed c6644124417b091c1b80d2ee8abfec79f071c9723efc0488185c33720e338631`


[02-Dec-18 01:03 PM] siu#3920
yey


[02-Dec-18 01:03 PM] SHossain#0007
Yes, when i type message `Hello` and press enter i see `cc_verify error C` in colsole


[02-Dec-18 01:04 PM] SHossain#0007
with your `send.py`


[02-Dec-18 01:07 PM] jl777c#5810
but if the hex is changes a little the error goes away?


[02-Dec-18 01:07 PM] siu#3920
a little in what sense?


[02-Dec-18 01:08 PM] siu#3920
the hex submitted?


[02-Dec-18 01:08 PM] siu#3920
no, it outputs the same error, right or wrong


[02-Dec-18 01:08 PM] Alright#0419
doesn't seem to depend on the hex itself


[02-Dec-18 01:08 PM] Alright#0419
as the hex giving you error didn't give me an error


[02-Dec-18 01:09 PM] Alright#0419
the "HOLA!" hex worked for me on SPLTEST, trying a new pubkey now to see if it works a couple times then stops


[02-Dec-18 01:09 PM] SHossain#0007
@Alright 
```
./komodo-cli -ac_name=SPLTEST oraclesdata 26fe59203720cfb061e51e2babd057b96f053e459471dd52afafe0ab1fe9d005 0500484f4c41210a
{
  "result": "error",
  "error": "datafee 0.00000000 is illegal"
}
```


[02-Dec-18 01:09 PM] SHossain#0007
```
./komodo-cli -ac_name=SPLTEST oraclesdata 26fe59203720cfb061e51e2babd057b96f053e459471dd52afafe0ab1fe9d005 0600484f4c41210a
{
  "result": "error",
  "error": "datafee 0.00000000 is illegal"
}
```


[02-Dec-18 01:09 PM] Alright#0419
that typically means you need to subscribe


[02-Dec-18 01:10 PM] siu#3920
what does `oraclesinfo 26fe59203720cfb061e51e2babd057b96f053e459471dd52afafe0ab1fe9d005` outputs?


[02-Dec-18 01:10 PM] jl777c#5810
i guess what we need is a 100% reproducible sequence and @Mihailo can fix it


[02-Dec-18 01:11 PM] SHossain#0007
@siu 
```
./komodo-cli -ac_name=SPLTEST oraclesinfo 26fe59203720cfb061e51e2babd057b96f053e459471dd52afafe0ab1fe9d005
{
  "result": "success",
  "txid": "26fe59203720cfb061e51e2babd057b96f053e459471dd52afafe0ab1fe9d005",
  "name": "room",
  "description": "DCHAT 0342eb62f734dbe7914908040110cbd1983b08fff67deb8ff6a288e9dc593bb350",
  "format": "S",
  "marker": "RFqHbsBY8HxrSJKPe3SKt9nvA2GDVYcfXC",
  "registered": [
    {
      "publisher": "0342eb62f734dbe7914908040110cbd1983b08fff67deb8ff6a288e9dc593bb350",
      "baton": "RNP5TsuTpyrbU3krnm2jiB6Qv299EZ3wCF",
      "batontxid": "0d189298bb7051093c16d7d5e3b587a2e411d6b5c001f5ada7ffa9931fe3bb79",
      "lifetime": "9.00000000",
      "funds": "8.99990000",
      "datafee": "0.00010000"
    },
    {
      "publisher": "02f75c47d8feb191b6f291fbc42061b591738f17897398d1e7305edd2b9c7d97ad",
      "baton": "RNV7YGd5ZvDgyjbg87UkdXPobim4EvkeLu",
      "batontxid": "8dc68de5c7244e837afae437ea20bb8f33304c38596b1566e8c122e414475e75",
      "lifetime": "10.00000000",
      "funds": "9.99980000",
      "datafee": "0.00010000"
    }
  ]
}
```


[02-Dec-18 01:11 PM] siu#3920
there are more than enough datafee


[02-Dec-18 01:11 PM] Alright#0419
ok so on new pubkey, first oraclesdata worked


[02-Dec-18 01:11 PM] Alright#0419
then stack element error


[02-Dec-18 01:13 PM] SHossain#0007
@siu can you give the exact steps to @Mihailo including the chain repo and params?


[02-Dec-18 01:14 PM] Mihailo#5902
Hey guys, just to let you know. I think I'll be back on Tuseday so will take a look at this thing right away.

{Reactions}
üëçüèΩ (3) 

[02-Dec-18 01:16 PM] Alright#0419
I think problem is spending baton utxo from mempool


[02-Dec-18 01:16 PM] SHossain#0007
Thanks @Mihailo


[02-Dec-18 01:16 PM] Alright#0419
You can do 1 oraclesdata per block


[02-Dec-18 01:16 PM] Alright#0419
if you do more, stack element error


[02-Dec-18 01:18 PM] siu#3920
I have not been able to do even one


[02-Dec-18 01:18 PM] Mihailo#5902
I had once the problem with data fee 0 is illegal but I've done changes to oracles then and thought the oracle was corrupt. This coupd probably be that it finds the wrong baton or as @Alright says when baton is spent in mempool


[02-Dec-18 01:21 PM] Alright#0419
any chance you could get this print `2018-12-02 21:20:29 ERROR: AcceptToMemoryPool: ConnectInputs failed a387e70a5e618725862f8a07b3df0304a03035e279a54b2af733d1aa5830af67`
to show which input is failing


[02-Dec-18 01:21 PM] Alright#0419
1 per block even stopped working for me now, so that theory isn't a great one


[02-Dec-18 01:31 PM] Alright#0419
ok, so newly registered pubkey can send 2 or 3 oraclesdata


[02-Dec-18 01:31 PM] Alright#0419
then stack element error


[02-Dec-18 01:31 PM] Alright#0419
everyone after that


[03-Dec-18 02:21 AM] TonyL#3577
@siu worked on SPLTEST yup


[03-Dec-18 02:45 AM] siu#3920
Ok, there is an issue that so far 3 of us have been able to reproduce


[03-Dec-18 02:46 AM] jl777c#5810
@dimxy do you need help with gateways? if so @TonyL has a very useful TUI


[03-Dec-18 03:07 AM] TonyL#3577
@siu What is the sequence to repeat the problem?
I've tried this way: https://paste.ubuntu.com/p/2tYj2QD6bH/ on FSM and SPLTEST chain.
Have I try to broadcast `oraclesdata` multiply time or register few publishers? How many subscription UTXOs have I create?


[03-Dec-18 03:10 AM] TonyL#3577
@dimxy feel free to contact me if you'll need any guidance for gateway setup
Here you can find a step-by-step guide: https://docs.komodoplatform.com/cc/contracts/gateways/scenarios/tutorial.html for 1 of 1 gateway which should help understand the flow
TUI itslef: https://github.com/tonymorony/cryptoconditions_tui
Video guide for it: https://www.youtube.com/watch?v=kcb8lRpZs6s&t

{Embed}
https://github.com/tonymorony/cryptoconditions_tui
tonymorony/cryptoconditions_tui
Terminal user interfaces for Komodo CryptoConditions smart-contracts - tonymorony/cryptoconditions_tui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Embed}
Tony Lysakov
https://www.youtube.com/watch?v=kcb8lRpZs6s&t
Gateways CC 1 - Gateway Binding
In this short video demonstration, I've created a gateway for external coin value transfer on Komodo cluster asset chain. Download TUI: https://github.com/to...
https://images-ext-1.discordapp.net/external/k4VxPGEYtAgvzJdDChJf0Q2oDK8mu-5lDv1SWysMKAc/https/i.ytimg.com/vi/kcb8lRpZs6s/maxresdefault.jpg


[03-Dec-18 03:18 AM] siu#3920
@TonyL create S oracle


[03-Dec-18 03:18 AM] siu#3920
Register 2 times with 10k sats


[03-Dec-18 03:18 AM] siu#3920
Subscribe 2 times with 1 coin


[03-Dec-18 03:20 AM] siu#3920
Then try oraclesdata


[03-Dec-18 03:20 AM] TonyL#3577
Thanks @siu üëç  Let me try


[03-Dec-18 04:10 AM] TonyL#3577
Hmm did everything exactly this way, not reproduced this issue: https://paste.ubuntu.com/p/YdZKtRCkrV/


[03-Dec-18 04:10 AM] TonyL#3577
Only issue I've noticed is that if I do registration with same datafee twice it's duplicating:
```./komodo-cli -ac_name=SPLTEST oraclesinfo 3a2884d3bb01c8f982f66fe30a59306cdf447c93299d0588641e57480f414e84
{
  "result": "success",
  "txid": "3a2884d3bb01c8f982f66fe30a59306cdf447c93299d0588641e57480f414e84",
  "name": "test",
  "description": "test",
  "format": "S",
  "marker": "RPVhECE2VSXxmKgFNAUwD2L7JWpjvsPYwZ",
  "registered": [
    {
      "publisher": "03699602f2458e23cf9cea406eabd3cec1a547b55a914b3d8241afb98d493fc13b",
      "baton": "RStbYpsBtGGgYXTN26EiLJoMHr1LeJaGkZ",
      "batontxid": "36cd96b903683c83136a8667885a3ccee47cf16a88ca9e13f7fd2ee0a6881abc",
      "lifetime": "2.00000000",
      "funds": "1.99990000",
      "datafee": "0.00010000"
    },
    {
      "publisher": "03699602f2458e23cf9cea406eabd3cec1a547b55a914b3d8241afb98d493fc13b",
      "baton": "RStbYpsBtGGgYXTN26EiLJoMHr1LeJaGkZ",
      "batontxid": "36cd96b903683c83136a8667885a3ccee47cf16a88ca9e13f7fd2ee0a6881abc",
      "lifetime": "2.00000000",
      "funds": "1.99990000",
      "datafee": "0.00010000"
    }
  ]
}```


[03-Dec-18 04:13 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST oraclessamples 3a2884d3bb01c8f982f66fe30a59306cdf447c93299d0588641e57480f414e84 1084ee0e9028411d1be63612c4f2e431c1c35ea215e083a28088f21731076d9c 2
{
  "result": "success",
  "samples": [
    [
      "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
    ],
    [
      "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
    ]
  ]
}
```


[03-Dec-18 04:16 AM] TonyL#3577
Was also able to broadcast multiply `oraclesdata` in same block
And  entropy UTXOs amount limitation seems work correct:
```./komodo-cli -ac_name=SPLTEST oraclesdata 3a2884d3bb01c8f982f66fe30a59306cdf447c93299d0588641e57480f414e84 ffff
couldnt find enough oracle inputs RWu5d2NZaet8Fz9SWihJhF93A581Utod5p, limit 1 per utxo

{
  "result": "error",
  "error": "couldnt find enough oracle inputs RWu5d2NZaet8Fz9SWihJhF93A581Utod5p, limit 1 per utxo\n"
}
```


[03-Dec-18 04:17 AM] siu#3920
Hmm


[03-Dec-18 04:17 AM] siu#3920
Weird


[03-Dec-18 04:17 AM] siu#3920
Can you try multiple inputs?


[03-Dec-18 04:17 AM] TonyL#3577
Multiply = different?


[03-Dec-18 04:18 AM] TonyL#3577
I've tried to broadcast different data in the same block (used `ff`, `fff` and so on)


[03-Dec-18 04:19 AM] TonyL#3577
``` git log -1
commit a6597a8f8349f2c9890554a3cb932c088ba46523 (HEAD -> FSM, origin/FSM)
Merge: 181dcaa02 b09f1c193
Author: jl777 <jl777@users.noreply.github.com>
Date:   Sat Dec 1 23:30:21 2018 -1100

    Merge pull request #1013 from jl777/dev
    
    sync DEV -> FSM
```
```git remote -v
origin    https://github.com/jl777/komodo (fetch)
origin    https://github.com/jl777/komodo (push)```


[03-Dec-18 04:19 AM] TonyL#3577
Maybe we're using some different software


[03-Dec-18 04:24 AM] siu#3920
ooh, we are testing piratenetwork repo


[03-Dec-18 04:25 AM] siu#3920
https://github.com/PirateNetwork/komodo

{Embed}
https://github.com/PirateNetwork/komodo
PirateNetwork/komodo
Komodo. Contribute to PirateNetwork/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/ADiw3GGhxikbnFDt4CIoQJU5OtsBACcR2o-X-CQBF_c/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/42935276


[03-Dec-18 04:25 AM] siu#3920
with sapling already activated


[03-Dec-18 04:25 AM] siu#3920
FSM repo


[03-Dec-18 04:25 AM] TonyL#3577
I have sapling activated on jl777/FSM too


[03-Dec-18 04:25 AM] siu#3920
oh ok


[03-Dec-18 04:25 AM] TonyL#3577
Just changed timestamps in komodo_defs.h

{Reactions}
üëåüèΩ 

[03-Dec-18 04:25 AM] siu#3920
but maybe try with the PN repo to be sure then its just in that repo?


[03-Dec-18 04:26 AM] TonyL#3577
Yup, building already


[03-Dec-18 04:27 AM] siu#3920
thanks!


[03-Dec-18 04:29 AM] TonyL#3577
PirateNetwork/komodo `FSM` and jl777/komodo `FSM` are exactly same except of last commit


[03-Dec-18 04:30 AM] TonyL#3577
And in last commit only timestamps changed


[03-Dec-18 04:30 AM] TonyL#3577
ü§î


[03-Dec-18 04:30 AM] SHossain#0007
i have followed your steps @TonyL and ran into error here is the final command i used
```
./komodo-cli -ac_name=SPLTEST oraclesdata 683c28969f0033842826703c67bf3e3f5853d9caec4643633d21c37cbe03763c 000161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161
```
The hex i got gave me error while broadcasting
```
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[03-Dec-18 04:31 AM] SHossain#0007
pasting full teminal history in pastebin


[03-Dec-18 04:31 AM] TonyL#3577
Extra strange. And you're on pirate repo as well @SHossain ?


[03-Dec-18 04:31 AM] SHossain#0007
yes


[03-Dec-18 04:32 AM] siu#3920
alright also reproduced the issue


[03-Dec-18 04:32 AM] dimxy#2587
@TonyL Hi, pleased to meet you. Thank you very much! I've already found your video guide and tutorial and I'm studying them


[03-Dec-18 04:33 AM] TonyL#3577
Hi @dimxy, it's nice to meet you too! Great üëç


[03-Dec-18 04:34 AM] SHossain#0007
https://paste.ubuntu.com/p/Ss3rBCn9CZ/


[03-Dec-18 04:34 AM] SHossain#0007
i got the following at the last step in console as well
```
cc_verify error C
cc_verify error C
```


[03-Dec-18 04:36 AM] SHossain#0007
```
./komodo-cli -ac_name=SPLTEST getblockhash 10184
0077e6250a296ab148453cd5f3038ae91e1690c3d8a23d7b3b9924ec67e50038
```

{Reactions}
‚ûï 

[03-Dec-18 04:38 AM] TonyL#3577
So only difference is that I'm using jl777/FSM and you're PirateNetwork/FSM


[03-Dec-18 04:38 AM] SHossain#0007
yes. i'm using PirateNetwork/FSM


[03-Dec-18 04:39 AM] SHossain#0007
with NO manual modification locally


[03-Dec-18 04:39 AM] SHossain#0007
just pure FSM from there


[03-Dec-18 04:39 AM] SHossain#0007
unless PirateNetwork/FSM is malformed with the changes


[03-Dec-18 04:39 AM] TonyL#3577
Building PirateNetwork/FSM to test the same flow


[03-Dec-18 04:40 AM] SHossain#0007
ok


[03-Dec-18 04:40 AM] TonyL#3577
Looks like a magic now seems github showing these repos are even  üòÉ


[03-Dec-18 04:41 AM] SHossain#0007
only change in that repo should be this https://github.com/PirateNetwork/komodo/commit/009b9a6bde7891c13eebbfd8b522330c9968549d

{Embed}
https://github.com/PirateNetwork/komodo/commit/009b9a6bde7891c13eebbfd8b522330c9968549d
Update komodo_defs.h ¬∑ PirateNetwork/komodo@009b9a6
https://images-ext-2.discordapp.net/external/RWdTleX0mVNoR331zOYUObKPAhcoYaTiaMjJoCkWhuE/%3Fs%3D200%26v%3D4/https/avatars0.githubusercontent.com/u/43793612


[03-Dec-18 04:41 AM] SHossain#0007
nothing else


[03-Dec-18 04:43 AM] SHossain#0007
using that source for SPLTEST chain from there takes us fast-forward on Komodo and other AC should behave after Feb 15.
i.e.: sapling past deadline and default


[03-Dec-18 04:44 AM] SHossain#0007
sprout disabled


[03-Dec-18 05:20 AM] TonyL#3577
On PirateNetwork/FSM I did same sequence of actions as on jl777/FSM  but get and error on `oraclesdata` tx broadcasting:
```./komodo-cli -ac_name=SPLTEST oraclesdata sendrawtransaction hexoforaclesdata
datafee 0.00000000 is illegal
{
  "result": "error",
  "error": "datafee 0.00000000 is illegal"
}

```


[03-Dec-18 05:22 AM] TonyL#3577
@SHossain could you please check the same on jl777/FSM with timestamps changed in `komodo_defs` on prebuild?


[03-Dec-18 05:23 AM] TonyL#3577
If it'll work for you fine same as for me I guess that's mean that something was corrupted on merge of things from jl777 to PirateNetwork


[03-Dec-18 05:23 AM] SHossain#0007
ok. testing


[03-Dec-18 05:29 AM] SHossain#0007
started compiling jl777/FSM branch with custom timestamp as PN repo

{Reactions}
üëç 

[03-Dec-18 05:32 AM] cipi#4502
@jl777c my komodod compiled from https://github.com/PirateNetwork/komodo FSM branch crashes on startup
it either shows this on console
`komodod-spltest: main.cpp:4044: void PruneBlockIndexCandidates(): Assertion!setBlockIndexCandidates.empty() failed.`
or this in dmesg
`[Dec 3 13:37] traps: zcash-msghand[7922] general protection ip:7fb6c6b4ac71 sp:7fb69affb370 error:0
[  +0.000112]  in libc-2.27.so[7fb6c6ae9000+146000]`
and if i compile it with tcmalloc, it shows me this: `src/tcmalloc.cc:332] Attempt to free invalid pointer 0xea9f25978a437247`
tried to get a backtrace from gdb, but no luck

{Embed}
https://github.com/PirateNetwork/komodo
PirateNetwork/komodo
Komodo. Contribute to PirateNetwork/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/ADiw3GGhxikbnFDt4CIoQJU5OtsBACcR2o-X-CQBF_c/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/42935276


[03-Dec-18 05:37 AM] TonyL#3577
@cipi Hmm I saw similar errors when I've tried to start komodod when concurrent komodod processes were started in system and stopping all these other komodod processes helped


[03-Dec-18 05:42 AM] cipi#4502
can't stop the others, it is on the SPV servers, the other processes are needed for the others assetchains


[03-Dec-18 05:59 AM] SHossain#0007
@TonyL @jl777c tested the jl777/FSM branch with custom timestamp and `oraclesdata` worked fine without any issues ü§î

{Reactions}
ü§î 

[03-Dec-18 06:00 AM] SHossain#0007
this is very strange


[03-Dec-18 06:27 AM] Deleted User#0000
@cipi  seen that before, reindex fixes it, or use a.bootstrap of chain data.


[03-Dec-18 06:28 AM] cipi#4502
it is a new installation, no previous block data there


[03-Dec-18 06:31 AM] TonyL#3577
@SHossain Yup, quite confusing


[03-Dec-18 06:35 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/519159857379540992/unknown.png


[03-Dec-18 06:44 AM] siu#3920
@Deleted User ill try and reindex PN chain thenm


[03-Dec-18 06:47 AM] Deleted User#0000
Maybe that crash was an edge case that's now more prevalent?


[03-Dec-18 06:48 AM] Deleted User#0000
It usually happened on low memory systems for us, months ago now, we just told everyone to use a.bootstrap on low ram systems.


[03-Dec-18 07:31 AM] TonyL#3577
https://github.com/jl777/komodo/pull/1016/commits/08e029bf40bd59479e07d2f7a0d0caa369268cfe @dukeleto @jl777c I've separated CCs tests on different files for each CC with proposed file name format: `cryptoconditions_%CCname%.py` and test class name: `Cryptoconditions%CCname%Test`

{Embed}
https://github.com/jl777/komodo/pull/1016/commits/08e029bf40bd59479e07d2f7a0d0caa369268cfe
separated tests for different CCs to different files by tonymorony...
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[03-Dec-18 07:33 AM] jl777c#5810
the different results with what should be the same source base, indicates maybe the exact precise state of the utxo is what is affecting things


[03-Dec-18 08:58 AM] dukeleto#7326
@TonyL nice PR!! I think that will help us going forward, as we add lots of tests to each


[03-Dec-18 08:58 AM] jl777c#5810
merged


[03-Dec-18 04:12 PM] Alright#0419
@SHossain oraclesdata consistently works the first couple times


[03-Dec-18 04:12 PM] Alright#0419
@TonyL `datafee 0.00000000 is illegal` typically means your node can't find oraclessubscribe utxos


[03-Dec-18 04:21 PM] SHossain#0007
Mihailo should be back tomorrow and will have a look at this issue.


[03-Dec-18 04:47 PM] Alright#0419
Did you have the same experience as me? It'll work 2-3 times with a new pubkey then start throwing stack element errors?


[03-Dec-18 10:23 PM] TonyL#3577
Thanks @dukeleto ! More cool things coming üëç 
@Alright on jl777/FSM it's worked as expected for me - can send as many `oraclesdata` as UTXOs I have in each block. on PirateNetwork/FSM I can't send even 1 `oraclesdata` with `datafee 0.00000000 is illegal`


[03-Dec-18 10:59 PM] Deleted User#0000
so its sapling activation that broke it ?


[04-Dec-18 12:30 AM] TonyL#3577
No, sapling is activated on both (for jl777/FSM it was activated manually by sapling activation timestamps changing in `komodo_defs` to the same as PirateNetwork) and it's the same chain


[04-Dec-18 12:48 AM] Deleted User#0000
yes buyt if you change the timestamps sapling actaully activates


[04-Dec-18 12:48 AM] Deleted User#0000
this is the only diffrence


[04-Dec-18 12:49 AM] Deleted User#0000
I found tetsting pool earlier


[04-Dec-18 12:49 AM] Deleted User#0000
it uses the first time stamp, to calculate the block height it will activate at


[04-Dec-18 12:50 AM] Deleted User#0000
but then doesnt actually activate until where it expects the second timestamp to occur (as a block height)


[04-Dec-18 12:50 AM] Deleted User#0000
so using jl777 branch ]


[04-Dec-18 12:50 AM] Deleted User#0000
nothing is acrtivated until Feb


[04-Dec-18 01:16 AM] Mihailo#5902
Hey guys, I'm back... I'm reading what you wrote about the problem with oracles. So now when @Deleted User wrote that it could be that jl777 FSM branch does not have sapling activated, can some one guide me how to check this (not so familiar with sapling changes)? If sapling is causing this bug with oracles, maybe it will be straight forward to find it...


[04-Dec-18 01:27 AM] siu#3920
Hi! Welcome back! Hope everything is well.


[04-Dec-18 01:29 AM] TonyL#3577
@Deleted User jl777/FSM  was built by me and @SHossain with custom timestamps in komodod_defs (same as PirateNetwork repo have) - with default timestamps you'll not able even sync SPLTEST because sapling is activated on it


[04-Dec-18 01:29 AM] Mihailo#5902
Hi, thnx. It's ok üòâ


[04-Dec-18 01:31 AM] TonyL#3577
@Mihailo Welcome back! To prepare jl777/FSM komodod which is ready for sapling - before building you have to change timestamps in this file: https://github.com/jl777/komodo/blob/FSM/src/komodo_defs.h
For some in the past - for example same as these ones: https://github.com/PirateNetwork/komodo/blob/FSM/src/komodo_defs.h

{Embed}
https://github.com/jl777/komodo/blob/FSM/src/komodo_defs.h
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Embed}
https://github.com/PirateNetwork/komodo/blob/FSM/src/komodo_defs.h
PirateNetwork/komodo
Komodo. Contribute to PirateNetwork/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/ADiw3GGhxikbnFDt4CIoQJU5OtsBACcR2o-X-CQBF_c/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/42935276


[04-Dec-18 01:32 AM] TonyL#3577
After it you should be able to sync sapling activated chain `SPLTEST` or start your very own sapling activated chain


[04-Dec-18 01:37 AM] Mihailo#5902
@TonyL Ok, got it. But just wanted to see is there a way to confirm what @Deleted User wrote, that sapling may not be active just with timestamps? But as you wrote it probably would not sync the chain if it isn't active...


[04-Dec-18 01:38 AM] Mihailo#5902
Forget that, read it wrongly.... Ok, I'll sync SPLTEST and check the oracles, and try with Pirate also...


[04-Dec-18 01:39 AM] Mihailo#5902
Is there bootstrap for Pirate somewhere so that I do not have to sync the whole chain?


[04-Dec-18 01:59 AM] TonyL#3577
@Mihailo before meant not Pirate chain but PirateNetwork repo ( https://github.com/PirateNetwork/komodo)


[04-Dec-18 01:59 AM] Mihailo#5902
Oh, yep. Just the changes from their repo....


[04-Dec-18 01:59 AM] TonyL#3577
Both PirateNetwork/komodo FSM and jl777/komodo FSM were tested on same SPLTEST chain


[04-Dec-18 02:00 AM] TonyL#3577
And results were confusing because repos looks like exactly same


[04-Dec-18 02:00 AM] TonyL#3577
You can ensure if sapling activated if transaction `version` is 4


[04-Dec-18 02:00 AM] Mihailo#5902
Ok, I'm just having an idea that it might be that old oracles which were created before sapling activated could cause problems when sapling is active. Have you tried with fresh oracle when sapling is activated?


[04-Dec-18 02:01 AM] TonyL#3577
Yes, all tests we did on fresh oracles


[04-Dec-18 02:01 AM] TonyL#3577
And sapling was activated from start on SPLTEST


[04-Dec-18 02:01 AM] Mihailo#5902
Ok, and code from Pirate repo has the bug but FSM does not have it?


[04-Dec-18 02:02 AM] TonyL#3577
Aha, same thing not works with komodod from pirate repo FSM when works fine on komodod from jl777 FSM


[04-Dec-18 02:02 AM] TonyL#3577
Flow is: 1) Create oracle, 2) Register twice 3) Subscribe twice


[04-Dec-18 02:02 AM] Mihailo#5902
Oh, and if you register once then it does not happen?


[04-Dec-18 02:03 AM] TonyL#3577
Then you'll able to send `oraclesdata` on jl777 but on PirateNetwork it'll return error `datafee 0.00000000 is illegal`


[04-Dec-18 02:03 AM] TonyL#3577
Oh it's a good question actually


[04-Dec-18 02:06 AM] Mihailo#5902
Ok, lets break it down. So we have two issues. One is datafee 0 illegal and one is AcceptToMemoryPool: ConnectInputs failed.


[04-Dec-18 02:06 AM] Mihailo#5902
Both of them happens only on Pirate FSM branch.


[04-Dec-18 02:06 AM] Mihailo#5902
Steps to reproduce for each are?


[04-Dec-18 02:08 AM] TonyL#3577
I was able to reproduce only issue with `datafee 0 illegal`
Exact steps to reproduce:
1) Create an oracle with S type
2) Register twice with datafee 10000 sat
3) Subscribe twice with fee 1 coin
4) Try to brodcast any `oraclesdata`


[04-Dec-18 02:09 AM] Mihailo#5902
Good, let's address this one first


[04-Dec-18 02:09 AM] Mihailo#5902
I'll try it on my fresh chain and on SPLTEST to see if I can reproduce on both.


[04-Dec-18 02:48 AM] TonyL#3577
@dukeleto Hmm, made a mechanism to connect external servers by RPC credentials in case of `--remoteserver` param.
But issue atm is that all tests which we have using regtest `generate` mechanics :(
```PYTHON_DEBUG=1  qa/pull-tester/rpc-tests.sh cryptoconditions_dice --remoteserver
=== Running testscript cryptoconditions_dice.py ===
Setting up network...
connecting to http://user3343335094:pass4b2b726002e7945ab3d323fdf0d32a83a6c2800b217918f79775367af0c6beeee2@127.0.0.1:41372
created proxy
connecting to http://user1250842895:passbf15df11779835ad933bbc4f9a8d4774c525bcff0cdd91e56c69c0723dbc8e72ce@159.69.201.122:41372
created proxy
Done setting up network
Mining blocks...```

Maybe create custom generate to change existing one - if `--remoteserver` it'll wait for X blocks instead of execute regtest only call `generate` and if  `--remoteserver` no need to pre-generate 100 blocks


[04-Dec-18 02:48 AM] Mihailo#5902
I have started fresh chain on jl777 FSM, and created oracle and everything went good. But when I used Pirate repo and started the daemon I noticed this in output:
```
ORACLEBUG transition at 1 (0, 1231006505) -> (1, 1543918534)
SET SAPLING ACTIVATION height.61
ORACLEBUG sapling activation at 61
```


[04-Dec-18 02:49 AM] Mihailo#5902
I think I have not seen this when using jl FSM. And now I cannot send oraclesdata


[04-Dec-18 02:49 AM] Mihailo#5902
So I've done all oracle stuff before height 61


[04-Dec-18 02:49 AM] TonyL#3577
With JL FSM I guess you used default `komodo_defs` so sapling wasn't activated


[04-Dec-18 02:50 AM] Mihailo#5902
No, I changed komodo_defs to pirate numbers


[04-Dec-18 02:50 AM] TonyL#3577
Hmm strange so:
```SET SAPLING ACTIVATION height.61
ORACLEBUG sapling activation at 61```
These prints just means that sapling will be activated on height 61


[04-Dec-18 02:51 AM] Mihailo#5902
Yep, so I think I did not have sapling activated when using jl FSM


[04-Dec-18 02:53 AM] Mihailo#5902
Oh, it seems I have been using jl FSM all the time...


[04-Dec-18 02:53 AM] Mihailo#5902
as I have that repo src in PATH


[04-Dec-18 02:53 AM] Mihailo#5902
So I was able to reproduce with jl FSM


[04-Dec-18 02:55 AM] TonyL#3577
You can ensure if sapling activated by `./komodo-cli -ac_name=%ac_name% getblock 62` and then `./komodo-cli -ac_name=%ac_name% getrawtransaction tx^^ 1` - version should be 4


[04-Dec-18 03:52 AM] Deleted User#0000
sorry if what I wrote was confusing... I think it must be a sapling thing though... If you need any help to test this I have some time also.


[04-Dec-18 04:06 AM] TonyL#3577
Oh all this test seems to be confusing @Deleted User I think clue was in some locally saved / cached files or something like this since codebase for both executables is the same

@Mihailo Do you need more help with problem isolating?


[04-Dec-18 04:07 AM] Mihailo#5902
@TonyL Not right now. I'm trying to determine if sapling broke this and then I'll locate the problem.

{Reactions}
üôå (2) üëç (2) 

[04-Dec-18 04:54 AM] Mihailo#5902
Ok, so it seems that if I do one register on chain which has sapling activated oraclesdata works. But if I do 2 registers (to same publisher with same fee for now) I get
```
cc_verify error C
ERROR: CScriptCheck(): aeb63e8d8efd284c870581cd8ec97f3c479d689c2b4b9ea2cbab23aa786a4012:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
ERROR: AcceptToMemoryPool: ConnectInputs failed aeb63e8d8efd284c870581cd8ec97f3c479d689c2b4b9ea2cbab23aa786a4012
```


[04-Dec-18 04:54 AM] Mihailo#5902
So I'll check this one first as it seems I found the case when it breaks.


[04-Dec-18 05:13 AM] TonyL#3577
@Mihailo Please note that two `oraclesregister` creating two publishers with same pubkey and datafee in `oraclesinfo` - maybe this info can help somehow in debug


[04-Dec-18 05:20 AM] Mihailo#5902
Yes I know. And the error seems to be about spending the 2nd baton, but have not seen this error by now.


[04-Dec-18 05:33 AM] Deleted User#0000
Alright said it was spending the baton ... Glad you have been able to reeporduce this üòÉ


[04-Dec-18 08:31 AM] dukeleto#7326
@TonyL like i said, use an env variable


[04-Dec-18 08:31 AM] dukeleto#7326
@TonyL giving an argument to the script is making it run all tests, and ignore the single test file argument you gave. It's a bug in the shitty (I mean awesome) test code we inherited


[04-Dec-18 08:37 AM] TonyL#3577
Hmm but it's worked as expected for me (give an argument and run single script)
@dukeleto I've made custom connect node https://github.com/tonymorony/komodo/blob/unit_tests/qa/rpc-tests/test_framework/util.py#L242
In case of https://github.com/tonymorony/komodo/blob/unit_tests/qa/rpc-tests/test_framework/test_framework.py#L102 And re-arranged code blocks a little bit in `test_framework.py`

{Embed}
https://github.com/tonymorony/komodo/blob/unit_tests/qa/rpc-tests/test_framework/util.py
tonymorony/komodo
Komodo. Contribute to tonymorony/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Embed}
https://github.com/tonymorony/komodo/blob/unit_tests/qa/rpc-tests/test_framework/test_framework.py
tonymorony/komodo
Komodo. Contribute to tonymorony/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[04-Dec-18 08:37 AM] TonyL#3577
@dukeleto  But i've declared strict in test code what it should do in case of this arg https://github.com/tonymorony/komodo/blob/unit_tests/qa/rpc-tests/cryptoconditions_dice.py#L23

{Embed}
https://github.com/tonymorony/komodo/blob/unit_tests/qa/rpc-tests/cryptoconditions_dice.py
tonymorony/komodo
Komodo. Contribute to tonymorony/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[04-Dec-18 08:37 AM] TonyL#3577
It's a prototype so far


[04-Dec-18 08:42 AM] dukeleto#7326
@TonyL have you tried giving the argument `--remoteserver` before the filename? Order really matters


[04-Dec-18 08:42 AM] TonyL#3577
So my idea now is to make custom `generate(numblocks)` and call it like a `see_next_block(numblocks)` so in regtest it'll generate numblocks blocks and in case of non regtest chain it'll just wait numblocks


[04-Dec-18 08:42 AM] dukeleto#7326
i can never remember how the test suite arguments work, they are not intuitive


[04-Dec-18 08:43 AM] TonyL#3577
@dukeleto It's worked fine this way: `PYTHON_DEBUG=1  qa/pull-tester/rpc-tests.sh cryptoconditions_dice --remoteserver`


[04-Dec-18 08:43 AM] dukeleto#7326
i am confused. You said it doesn't. Now it does? :abusedsmily:


[04-Dec-18 08:43 AM] TonyL#3577
Hmm I wrote before `but it's worked as expected`


[04-Dec-18 08:44 AM] dukeleto#7326
@TonyL i misunderstood you. I should probably drink some ‚òï

{Reactions}
‚òï 

[04-Dec-18 08:44 AM] TonyL#3577
@dukeleto Oh  most probably it's just my poor english üòÉ


[04-Dec-18 08:45 AM] dukeleto#7326
i just woke up, was up late last night learning about FPGA miners üò¥


[04-Dec-18 08:48 AM] TonyL#3577
Hmm FPGA seems like an interesting tech but too costly to be profitable


[04-Dec-18 08:50 AM] dukeleto#7326
huh?


[04-Dec-18 08:51 AM] dukeleto#7326
@TonyL VRSC fpga's just jumped on the network, a $2500 fpga can mine around 80 VRSC per day. their price is coming down very fast


[04-Dec-18 08:51 AM] dukeleto#7326
and these look like asics, standalone, plug it in a PSU, mine. No more soldering and madness like that


[04-Dec-18 08:51 AM] TonyL#3577
Ahh VRSC


[04-Dec-18 08:51 AM] TonyL#3577
I see now üòÉ


[04-Dec-18 08:52 AM] dukeleto#7326
but this is the CC channel, so I will be quiet üòÉ

{Reactions}
üï∂ üïµ 

[05-Dec-18 02:09 AM] TonyL#3577
There is no validation on `oraclessubscribe` at the moment: possible to broadcast `oraclessubscribe` even there is no `oraclesregister` (no publishers) for this oracle, possible to broadcast with any random text as a publisher id, possible to subscribe with 0 datafee (not sure if it feature).
```./komodo-cli -ac_name=SPLTEST oraclessubscribe dingdong dong 10000
{
  "result": "success",
  "hex": "0400008085202f89010b02157434792d7806e4798b88f4b5eaefb8b2d5131b80ae087987c5884b52c90200000048473044022010e4b78d2a3eaa900c6ea738fadf9e463371cc46f08f66be9acf1223399d59500220395bab0cce92a23095b630071ad7008488eb5c85aab0fbf347b3e68b882f656a01ffffffff040010a5d4e8000000302ea22c8020a1f2a7cbd0f90ea34c11dcbeebfdaa126ea32c30881450eb608898f952b906038103120c008203000401cc10270000000000002321020000000000000000000000000000000000000000000000000000000000000000ac703bf2612f080000232102a3cf299910078222c5f6c3a4f45261c2c900af54dd090e955865c41fd7060047ac00000000000000004f6a4c4cec5300000000000000000000000000000000000000000000000000000000000000002102a3cf299910078222c5f6c3a4f45261c2c900af54dd090e955865c41fd70600470010a5d4e8000000000000001e3200000000000000000000000000"
}
```
```./komodo-cli -ac_name=SPLTEST sendrawtransaction hex^^
8799de2b51515f8ab257a86ef307a7c5976dde2aa304559937ba86b64ba3e0af```


[05-Dec-18 02:10 AM] Deleted User#0000
Also imports are broken on FSM branch


[05-Dec-18 02:10 AM] Deleted User#0000
At least I think they are


[05-Dec-18 02:10 AM] TonyL#3577
And on ` ./komodo-cli -ac_name=SPLTEST oraclesregister a 100000` oraclesregister as well 
```
{
  "result": "success",
  "hex": "0400008085202f890164ae3d1d8841f030d67a59fc163e68b6eae0cd6abe60435a45408687ff25fc4f0200000049483045022100c1af685b32694111344a5e0a44733746090ab4deba9e8d44f228e19cdfbfe94c02205683ea1eaccaf5a1e660206ff6b848ee00acad56ff05d0a6d105a0c6d58a7f6801ffffffff0410270000000000002321020000000000000000000000000000000000000000000000000000000000000000ac1027000000000000302ea22c8020ad90a9dfbe18df939588358376c64a76de4cfbdc4805d9932b509216bed1c3a18103120c008203000401cc9099973618090000232102a3cf299910078222c5f6c3a4f45261c2c900af54dd090e955865c41fd7060047ac00000000000000004f6a4c4cec5200000000000000000000000000000000000000000000000000000000000000002102a3cf299910078222c5f6c3a4f45261c2c900af54dd090e955865c41fd7060047a086010000000000000000001c3200000000000000000000000000"
}```


[05-Dec-18 02:10 AM] TonyL#3577
```./komodo-cli -ac_name=SPLTEST sendrawtransaction 0400008085202f890164ae3d1d8841f030d67a59fc163e68b6eae0cd6abe60435a45408687ff25fc4f0200000049483045022100c1af685b32694111344a5e0a44733746090ab4deba9e8d44f228e19cdfbfe94c02205683ea1eaccaf5a1e660206ff6b848ee00acad56ff05d0a6d105a0c6d58a7f6801ffffffff0410270000000000002321020000000000000000000000000000000000000000000000000000000000000000ac1027000000000000302ea22c8020ad90a9dfbe18df939588358376c64a76de4cfbdc4805d9932b509216bed1c3a18103120c008203000401cc9099973618090000232102a3cf299910078222c5f6c3a4f45261c2c900af54dd090e955865c41fd7060047ac00000000000000004f6a4c4cec5200000000000000000000000000000000000000000000000000000000000000002102a3cf299910078222c5f6c3a4f45261c2c900af54dd090e955865c41fd7060047a086010000000000000000001c3200000000000000000000000000
c9524b88c5877908ae801b13d5b2b8efeab5f4888b79e406782d79347415020b```


[05-Dec-18 02:10 AM] TonyL#3577
There is no oracle with txid `a`. I think these validations might be a root of further problems like we had few days ago


[05-Dec-18 02:12 AM] TonyL#3577
@Deleted User Imports of wallets or?


[05-Dec-18 02:12 AM] Deleted User#0000
coin imports MoMoM transfers


[05-Dec-18 02:13 AM] Deleted User#0000
at least a node on FSM before the verus merge, is incompatible with a version that is after the merge


[05-Dec-18 02:13 AM] Deleted User#0000
regardless if sapling is active yet or not


[05-Dec-18 02:13 AM] Deleted User#0000
I am trying a migrate from sapling merge to sapling merge nodes with sapling merge miners right now ü§û

{Reactions}
ü§ï 

[05-Dec-18 02:14 AM] Deleted User#0000
if this fixes it ... we will just delay launch until sapling activates


[05-Dec-18 02:14 AM] Deleted User#0000
so we dont have to fix it üòÑ


[05-Dec-18 02:33 AM] jl777c#5810
@Mihailo this is another clue about sapling issues with CC:
CC Eval EVAL_IMPORTCOIN Invalid: invalid-code, dont forget to add EVAL_NEWCC to Eval::Dispatch spending tx bc577596ae240904b6b87b24569571cf10491632049027516f0f5cb5887d8748
All imports are failing on sapling merge with this error ... dont really understand what could be causing it.


[05-Dec-18 02:33 AM] jl777c#5810
that indicates that the evalcode is not being extracted properly. so somehow a sapling tx is making CC vout parsing broken (in some cases)


[05-Dec-18 02:49 AM] Deleted User#0000
@jl777c to be clear ... I am on FSM equal branch ... but sapling i NOT avtive yet .. we are usng the default KMD timestamps


[05-Dec-18 02:50 AM] Mihailo#5902
I have another clue, that two registers do not have anything to do with cc verify error. Sometimes it happens sometimes not...


[05-Dec-18 03:06 AM] jl777c#5810
inconsistent behavior indicates it might be memory corruption or uninitialized variable


[05-Dec-18 03:15 AM] TonyL#3577
```CC Eval EVAL_ORACLES Invalid: mismatched datafee spending tx 8c791151a31c5391e30bc35da973a89d2d0665303c530586de71c62c8aa79b1f
```
Sometimes getting such printouts from daemon (when request oraclesdata for this "spending tx" baton let's say)


[05-Dec-18 03:16 AM] TonyL#3577
But all seems work correct in these cases


[05-Dec-18 04:02 AM] TonyL#3577
@jl777c @Mihailo 
Binary (`d`) type oracle still work not as expected:
```./komodo-cli -ac_name=SPLTEST oraclesdata c8b7e208f1518de4e0b72b33235e6b84826060e1e9e8d6d8c47de9f9a7e91e2f 0101```
```./komodo-cli -ac_name=SPLTEST oraclessamples c8b7e208f1518de4e0b72b33235e6b84826060e1e9e8d6d8c47de9f9a7e91e2f 0b55e0e5f25ab5d8542697947aeaa9f1af55d9bc03d57c9ce3dcac0550b18322 1
{
  "result": "success",
  "samples": [
    [
      "0"
    ]
  ]
}
```
Not sure why I'm getting 0 for such `oraclesdata`, for 0100 I'm getting "0" as well


[05-Dec-18 04:04 AM] Alright#0419
@TonyL can you try a few more oraclesdata please


[05-Dec-18 04:04 AM] Alright#0419
from my experience, it works 2 or 3 times on a fresh pubkey


[05-Dec-18 04:04 AM] Alright#0419
then stack element error every time after that


[05-Dec-18 04:06 AM] TonyL#3577
Hmm I've sent a lot of oraclesdata to same oracles these days - never have an issues if there is enough balance and entropy UTXOs


[05-Dec-18 04:06 AM] TonyL#3577
Let me try


[05-Dec-18 04:10 AM] TonyL#3577
@Alright Repeated it


[05-Dec-18 04:10 AM] TonyL#3577
Trowed an error on 4th `oraclesdata` broadcast


[05-Dec-18 04:12 AM] TonyL#3577
https://paste.ubuntu.com/p/bYwd9whc4n/ seems `oraclesdata` ded  at the moment


[05-Dec-18 04:30 AM] Mihailo#5902
@TonyL If you look at the daemon output you will see "cc_verify error C"


[05-Dec-18 04:31 AM] Mihailo#5902
That is the issue with spending baton, but I can`t seem to find a cause why it happens. I thought it was sapling with two registers, but it is not...


[05-Dec-18 04:32 AM] TonyL#3577
I didn't do any cases with 2 same publishers and 2 subscribtions


[05-Dec-18 04:32 AM] TonyL#3577
Just registered once and subscribed once


[05-Dec-18 04:32 AM] TonyL#3577
Then broadcasted 1 oraclesdata per block


[05-Dec-18 04:32 AM] Mihailo#5902
Yep...


[05-Dec-18 04:33 AM] Mihailo#5902
In my case I think I was able to reproduce it on a fresh chain with first oracle I create and the after when I try it does not happen. But I think that was just a coincidence...


[05-Dec-18 04:43 AM] Deleted User#0000
Its not because of sapling


[05-Dec-18 04:44 AM] Deleted User#0000
I have CC_EVAL dead on a non sapling chain


[05-Dec-18 04:44 AM] Deleted User#0000
Its FSM branch... without splaing activated


[05-Dec-18 04:44 AM] Deleted User#0000
the entire KMDLABS cluster is now dead becasuse of it


[05-Dec-18 04:44 AM] Deleted User#0000
lucky its s testnet


[05-Dec-18 04:44 AM] Mihailo#5902
Ok, but it could be the changes that are made on FSM recently for sapling.


[05-Dec-18 04:44 AM] Deleted User#0000
its the verus merge


[05-Dec-18 04:44 AM] Deleted User#0000
but not nessarily sapling


[05-Dec-18 04:44 AM] Mihailo#5902
üëç


[05-Dec-18 04:45 AM] Deleted User#0000
As eveyrthing worked the commit before that merge


[05-Dec-18 04:45 AM] Deleted User#0000
and after it


[05-Dec-18 04:45 AM] Deleted User#0000
its does not


[05-Dec-18 04:45 AM] Deleted User#0000
I am going to have a look around but I'm pretty lost on this one... if I find anyhting I will let you know in here.


[05-Dec-18 04:50 AM] Mihailo#5902
Ok, I'll check also the commit if something looks phishy.


[05-Dec-18 04:51 AM] Mihailo#5902
@Deleted User Can you point me to the exact commit after it stoped working?


[05-Dec-18 04:51 AM] Deleted User#0000
maybe your issue is diffrent to mine../..


[05-Dec-18 04:51 AM] Deleted User#0000
the verus merge has commented out the coinimport validation üòÇ


[05-Dec-18 04:52 AM] Deleted User#0000
like what even üòÑ


[05-Dec-18 04:52 AM] Deleted User#0000
this might be nothing


[05-Dec-18 04:53 AM] jl777c#5810
where is the coinimport that got commented out??


[05-Dec-18 04:53 AM] Deleted User#0000
https://github.com/jl777/komodo/blob/master/src/cc/eval.cpp#L77
In a verison from 3 months ago, this wan not commented out

{Embed}
https://github.com/jl777/komodo/blob/master/src/cc/eval.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[05-Dec-18 04:54 AM] Deleted User#0000
I have not actually tracked our branches to check it yet


[05-Dec-18 04:56 AM] Deleted User#0000
ok yep definatly seems to be commented out in the verus merge


[05-Dec-18 04:56 AM] Deleted User#0000
I think htat gets LABS back up. testing now


[05-Dec-18 04:58 AM] Mihailo#5902
I was afraid that something else could be wrong when I found out that tokenconvert RPC was missing when changes from Verus were commited...


[05-Dec-18 05:00 AM] Deleted User#0000
Theres a lot of strange things... the actual merge for me, wasnt that bad took about 5H


[05-Dec-18 05:00 AM] Deleted User#0000
üòÇ


[05-Dec-18 05:01 AM] Deleted User#0000
still cant even fathom how Im supposed to test everything is still working...


[05-Dec-18 05:23 AM] Deleted User#0000
```        default:
            return(ProcessCC(cp,this, vparams, txTo, nIn));
            // only support coinbase guard for now
            if (ecode == EVAL_COINBASEGUARD)
                return(ProcessCC(cp,this, vparams, txTo, nIn));
            break;```
From @miketout  commit that did this.... It might be related to your issues after all @Mihailo  
"// only support coinbase guard for now"


[05-Dec-18 05:25 AM] Mihailo#5902
Where is this, cannot find it in my code...


[05-Dec-18 05:25 AM] Deleted User#0000
src/cc/eval.cpp


[05-Dec-18 05:25 AM] Deleted User#0000
everything was commented out


[05-Dec-18 05:25 AM] Deleted User#0000
and disabled


[05-Dec-18 05:26 AM] Mihailo#5902
But it was changed later?


[05-Dec-18 05:26 AM] Deleted User#0000
its from verus commit ... maybe @jl777c  already changed part of it to get some things working ... my guess is its disabled elswhere we need to ask @miketout  why he disabled it


[05-Dec-18 05:27 AM] Deleted User#0000
ü§∑


[05-Dec-18 05:27 AM] Mihailo#5902
Yep, we need to know what was the idea.


[05-Dec-18 05:28 AM] Mihailo#5902
But looking at upper code, the if isn't reached at all. The return is before and returns from function...


[05-Dec-18 05:28 AM] Mihailo#5902
So it is the same as now...
```cpp
default:
            return(ProcessCC(cp,this, vparams, txTo, nIn));
            break;
```


[05-Dec-18 05:29 AM] Deleted User#0000
the coin imports above were what led me there...


[05-Dec-18 05:29 AM] Deleted User#0000
they wer just commented out


[05-Dec-18 05:29 AM] Deleted User#0000
so non of my chains would sync


[05-Dec-18 05:29 AM] Mihailo#5902
Yes, they are still


[05-Dec-18 05:29 AM] Deleted User#0000
we have a diffrent fork... I think you can safly uncomment them there


[05-Dec-18 05:30 AM] Deleted User#0000
but its wont help oracles sadly


[05-Dec-18 05:30 AM] Mihailo#5902
üëç


[05-Dec-18 05:31 AM] jl777c#5810
yes, that certainly explains coin migration not working!

{Reactions}
üòÖ 

[05-Dec-18 05:31 AM] jl777c#5810
but normal CC should be working


[05-Dec-18 05:31 AM] jl777c#5810
updated FSM branch

{Reactions}
üëå 

[05-Dec-18 05:33 AM] Mihailo#5902
Basically, to avoid this kind of problems when working on opensource projects (or projects which have a lot of commiters) my practice is to create one squashed commit per change I'm working on, which I review when making PR. This way is much easier to trace changes which caused some problem, and maybe you can avoid commiting unwanted changes if you work on different fork that will contaminate other project....


[05-Dec-18 05:33 AM] jl777c#5810
yes, unfortunately in this case there were 500+ files that changed


[05-Dec-18 05:33 AM] Deleted User#0000
this was clearlty sabotage :trollface:


[05-Dec-18 05:34 AM] Mihailo#5902
üòÑ


[05-Dec-18 05:34 AM] jl777c#5810
i tried to find and fix all such changes, but I missed a couple


[05-Dec-18 05:34 AM] jl777c#5810
my guess on the oracles CC behavior is an uninitialized variable


[05-Dec-18 05:34 AM] Deleted User#0000
just merging it in was hell for me ... I started by remiving most of my code


[05-Dec-18 05:34 AM] jl777c#5810
that would explain the random behavior


[05-Dec-18 05:34 AM] jl777c#5810
i cant think of another theory that explains how it works, but it doesnt, unless it does behavior


[05-Dec-18 05:35 AM] Mihailo#5902
@jl777c Well if it is uninitialized variable, then it is in something that affects all CCs. As the part that is failing is on spending and verifying signatures...


[05-Dec-18 05:36 AM] Mihailo#5902
```
Reg pubkey: 077b01e7c6640ef59724386dd48562fe32cc1dd43d65d381f9f18cd73dee53d9 - RCiCz5FWiLLRi8ex1C4CKdyDTDgwLkxamv
AddToWallet fb6dfb683c63d3db01c8210b33f20f107e991ce2a616dfcfe24948289509a037  new
Reg pubkey: 077b01e7c6640ef59724386dd48562fe32cc1dd43d65d381f9f18cd73dee53d9 - RCiCz5FWiLLRi8ex1C4CKdyDTDgwLkxamv
AddToWallet fb6dfb683c63d3db01c8210b33f20f107e991ce2a616dfcfe24948289509a037  
UpdateTip: new best=00208c078f313020261c744bde2ea57785846919afa5c406eaf122ca424dcc9b  height=134  log2_work=13.022715  log2_stake=-inf  tx=144  date=2018-12-05 13:19:30 progress=1.007519  cache=0.0MiB(10tx)
AddToWallet fb6dfb683c63d3db01c8210b33f20f107e991ce2a616dfcfe24948289509a037  update
Reg pubkey: 077b01e7c6640ef59724386dd48562fe32cc1dd43d65d381f9f18cd73dee53d9 - RCiCz5FWiLLRi8ex1C4CKdyDTDgwLkxamv
Adding fixed seed nodes.
cc_verify error C
ERROR: CScriptCheck(): 2caa0065530875becf57e22912e95049660b73bac9f0855dff110244dc8be70b:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
cc_verify error C
ERROR: CScriptCheck(): 2caa0065530875becf57e22912e95049660b73bac9f0855dff110244dc8be70b:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
ERROR: AcceptToMemoryPool: ConnectInputs failed 2caa0065530875becf57e22912e95049660b73bac9f0855dff110244dc8be70b
```


[05-Dec-18 05:36 AM] Mihailo#5902
I have traced to see if something changes while posting oraclesdata, but everything seems ok.


[05-Dec-18 05:37 AM] Mihailo#5902
And basically, it works few times and then suddenly it decides not to work üòâ


[05-Dec-18 05:38 AM] Deleted User#0000
oracleslimiter


[05-Dec-18 05:38 AM] Mihailo#5902
üòõ


[05-Dec-18 05:38 AM] jl777c#5810
one change miket made was to allow for data after the normal CC vout

{Reactions}
ü§î 

[05-Dec-18 05:39 AM] jl777c#5810
but for normal CC vout, this shouldnt cause an issue. unless the code to handle that has some bug


[05-Dec-18 05:39 AM] jl777c#5810
the idea was to be able to pass in variables to the CC vout, without changing the address generation


[05-Dec-18 05:39 AM] Mihailo#5902
Yes, you mentioned that. Could that somehow afect it. Or maybe ot overlaped something in memory so sometimes it happens?


[05-Dec-18 05:40 AM] jl777c#5810
return cc_readFulfillmentBinary((uint8_t*)ffbin.data(), ffbin.size()-1);


[05-Dec-18 05:41 AM] jl777c#5810
if the size of the fulfillment changed, with padded data, it seems quite possible something is assuming incorrectly


[05-Dec-18 05:41 AM] jl777c#5810
i think the problem is very likely in this area, but it should exhibit itself before sapling as much as after sapling


[05-Dec-18 05:41 AM] Mihailo#5902
```cpp
unsigned char msgHash[32];
    if (doHashMsg) sha256(msg, msgLength, msgHash);
    else memcpy(msgHash, msg, 32);

    if (!cc_secp256k1VerifyTreeMsg32(cond, msgHash)) {
        fprintf(stderr,"cc_verify error C\n");
        return 0;
    }
```
Because it is failing on this if, could it be that something is not ok with msgHash? Maybe msgLentgth is not correct or value passed is not initialized?


[05-Dec-18 05:44 AM] jl777c#5810
yes, it could well be the cond is pointing to invalid length, something like taht


[05-Dec-18 05:45 AM] jl777c#5810
I guess we need to capture the details for the times it works vs the times it doesnt ,especially if it is for the same vout


[05-Dec-18 05:58 AM] siu#3920
which repo are we working on now?


[05-Dec-18 06:22 AM] Mihailo#5902
I'm working on pirate repo as there I had sapling activated. But as @Deleted User  said it has nothing to do with sapling, I can also try to reproduce it on jl777 FSM


[05-Dec-18 06:23 AM] Deleted User#0000
Im my case it was definatly not spling related


[05-Dec-18 06:23 AM] Deleted User#0000
as the code was flat out disabled ...


[05-Dec-18 06:24 AM] Deleted User#0000
I would try it on a non sapling chain though to at least narrow down what it could be.


[05-Dec-18 06:57 AM] TonyL#3577
@jl777c Is there any simple solution for manual generating input for `oraclesdata` of Ihh datatype oracle and how valid  data input looks like?


[05-Dec-18 06:58 AM] jl777c#5810
manually generate it, just look at oraclefeed.c to see how it is done


[05-Dec-18 06:58 AM] jl777c#5810
just binary data


[05-Dec-18 07:01 AM] TonyL#3577
Oh yep, looking trough oraclefeed code for a last 15 minutes - not understood yet


[05-Dec-18 07:01 AM] TonyL#3577
Gonna look more üòÉ


[05-Dec-18 07:01 AM] Mihailo#5902
Just a sec


[05-Dec-18 07:03 AM] Mihailo#5902
get_oracledata function is fetching data from the chain, inside you have this which creates binary data:
```cpp
if ( (height= get_coinheader(refcoin,acname,&blockhash,&merkleroot,prevheight)) > prevheight )
        {
            for (i=0; i<4; i++)
                sprintf(&hexstr[i*2],"%02x",(uint8_t)((height >> (i*8)) & 0xff));
            for (i=31; i>=0; i--)
                sprintf(&hexstr[8 + (31-i)*2],"%02x",blockhash.bytes[i]);
            for (i=31; i>=0; i--)
                sprintf(&hexstr[8 + 64 + (31-i)*2],"%02x",merkleroot.bytes[i]);
            hexstr[8 + 64*2] = 0;
            return(height);
        }
```


[05-Dec-18 07:04 AM] Mihailo#5902
first 8 bytes are the height of the chain, than 64 bytes are blockhash and 64 are merkleroot.


[05-Dec-18 07:05 AM] TonyL#3577
Oh I see, will try. Thanks  @Mihailo !


[05-Dec-18 07:15 AM] TonyL#3577
Coool
```./komodo-cli -ac_name=SPLTEST oraclessamples e0181d32fbc4afc12cd8b1da095e433c7b980d35e02bd98c56a74ce90cb73133 a7d72392f7f016ac2167e39f1a1ce9c6d0a6df6dc2bf2ed000c4c97b659f2fd3 1
{
  "result": "success",
  "samples": [
    [
      "0",
      "00000000ffffffff00000000ffffffff00000000ffffffff00000000ffffffff",
      "00000000ffffffff00000000ffffffff00000000ffffffff00000000ffffffff"
    ]
  ]
```


[05-Dec-18 07:16 AM] Alright#0419
@TonyL that doesn't seem to be working properly


[05-Dec-18 07:16 AM] Alright#0419
from my understanding of oraclessamples at least


[05-Dec-18 07:16 AM] Alright#0419
`1` should only show the latest


[05-Dec-18 07:17 AM] TonyL#3577
Yes it show only the latest entry and there is only one in this oracle


[05-Dec-18 07:18 AM] TonyL#3577
In Ihh height, blockhash and merkleroot are separated in presentation


[05-Dec-18 07:18 AM] Alright#0419
Ah, understood


[05-Dec-18 07:20 AM] TonyL#3577
Oh I guess it's little endian because I've not planned this 0 üòÇ


[05-Dec-18 12:19 PM] Mihailo#5902
I have tried to reproduce cc_verify error on non activated sapling chain, but I'm unable...


[05-Dec-18 12:19 PM] Mihailo#5902
So it seems that this error is only possible with sapling activated


[05-Dec-18 12:23 PM] jl777c#5810
can you duplicate and isolate it on the sapling activated?


[05-Dec-18 12:24 PM] jl777c#5810
it could be there are two different issues


[05-Dec-18 12:24 PM] jl777c#5810
sapling changes the tx serialization, and maybe the CC code depended on the old serialization


[05-Dec-18 12:27 PM] Mihailo#5902
I can duplicate it, but cannot determine exact cause when it happens. Usually 2-3 oraclesdata are successful and then it throws cc_verify error


[05-Dec-18 01:04 PM] jl777c#5810
can you print out the details of the cc_verify cond to see the difference between the failure and success?


[05-Dec-18 01:04 PM] jl777c#5810
there is a way to convert a cond structure into JSON


[05-Dec-18 01:06 PM] jl777c#5810
in cryptoconditions/eval.cpp (not cc/eval.cpp) functions like static void evalToJSON(const CC *cond, cJSON *code) {


[05-Dec-18 03:23 PM] Mihailo#5902
I'll check it tomorrow. I was chasing msgHash today but end up with nothing...


[06-Dec-18 03:39 AM] Mihailo#5902
I'm trying to convert cond to JSON but I get segmentation fault when doing evalToJSON.
```cpp
    json=cJSON_CreateObject();
    evalToJSON(cond,json);  
```


[06-Dec-18 03:39 AM] Mihailo#5902
@jl777c can you point me to the code which allows data after CC that miket added?


[06-Dec-18 03:53 AM] Mihailo#5902
This part is failing in secp256k1Verify:
```cpp
// Only accepts lower S signatures
rc = secp256k1_ecdsa_verify(ec_ctx_verify, &sig, visitor.msg, &pk);
if (rc != 1) return 0;
```


[06-Dec-18 03:55 AM] jl777c#5810
is it adding a CC sig in FinalizeCCTx?


[06-Dec-18 03:56 AM] jl777c#5810
i wonder if the sapling tx serialization changing affects the CC signing


[06-Dec-18 03:59 AM] jl777c#5810
so the visitor.msg must match what was signed.


[06-Dec-18 03:59 AM] jl777c#5810
in FinalizeCCtx:
                uint256 sighash = SignatureHash(CCPubKey(cond), mtx, i, SIGHASH_ALL, utxovalues[i],consensusBranchId, &txdata);
                if ( cc_signTreeSecp256k1Msg32(cond,privkey,sighash.begin()) != 0 )


[06-Dec-18 04:00 AM] jl777c#5810
that is what calculates the sighash which i believe needs to match the vistor.msg, if they are not matched then we isolated the cause and can dig into why it is different


[06-Dec-18 04:00 AM] jl777c#5810
consensusBranchId <- that value changes when sapling activates!


[06-Dec-18 04:00 AM] jl777c#5810
that could be a hint, i think it was 0 before


[06-Dec-18 04:00 AM] jl777c#5810
so if the old code assumed consensusBranchId is 0, it would fail after sapling activation


[06-Dec-18 04:03 AM] Mihailo#5902
Ok, but why is it behaving that it sometimes work and sometimes not? If different value for consensusBranchId is used then it would fail all the time?


[06-Dec-18 04:09 AM] jl777c#5810
clearly something is misbehaving, if we understood it we would know more about it. at this point we need to find the crash point and work from there.


[06-Dec-18 04:10 AM] jl777c#5810
we cant make sweeping assumptions like " If different value for consensusBranchId is used then it would fail all the time"


[06-Dec-18 04:10 AM] jl777c#5810
maybe some code paths set it properly based on the value of an uninitialized variable


[06-Dec-18 04:10 AM] jl777c#5810
maybe it is ok, at first but not after something updates internally


[06-Dec-18 04:10 AM] jl777c#5810
basically its random behavior means it can be almost anything


[06-Dec-18 04:11 AM] jl777c#5810
maybe it has been there all along and only sapling activation exposed it


[06-Dec-18 04:11 AM] Mihailo#5902
Agree.


[06-Dec-18 04:11 AM] jl777c#5810
since there is a clear signature failure and we are generating the sign in finalizeCCtx, it at least allows us to see if the sighash is conflicting


[06-Dec-18 04:11 AM] jl777c#5810
i sure hope it is, as the alternative is getting into some real memory corruption scenarios


[06-Dec-18 04:12 AM] Mihailo#5902
I have printed the value of consensusBranchId in every oraclesdata tx and it is the same: 1991772603


[06-Dec-18 04:12 AM] Mihailo#5902
So at least it does not change


[06-Dec-18 04:12 AM] Mihailo#5902
And after third data tx it failed.


[06-Dec-18 04:13 AM] Mihailo#5902
Is this value for consensusBranchId strange? I do not know what is it for...


[06-Dec-18 04:13 AM] jl777c#5810
well if sighash != msg, that isolates the problem, so let me know if that is the case


[06-Dec-18 04:13 AM] Mihailo#5902
Ok


[06-Dec-18 04:13 AM] jl777c#5810
i actually never checked the value of consensusBranchId


[06-Dec-18 04:14 AM] Mihailo#5902
sighash and msgHash from cc_verify?


[06-Dec-18 04:15 AM] jl777c#5810
rc = secp256k1_ecdsa_verify(ec_ctx_verify, &sig, visitor.msg, &pk);
visitor.msg and sighash


[06-Dec-18 04:15 AM] jl777c#5810
they should be the same, assuming the same keypair is used


[06-Dec-18 04:15 AM] Mihailo#5902
Yep, ok.


[06-Dec-18 04:15 AM] jl777c#5810
so verify the matching pubkey is used for the privkey that signed it


[06-Dec-18 04:15 AM] jl777c#5810
that is the only way that should fail


[06-Dec-18 04:15 AM] jl777c#5810
signing with the mismatched privkey, or singing the wrong hash


[06-Dec-18 04:21 AM] Mihailo#5902
This is the print from FinalizeCCtx:
```
consensus 1991772603
72d8a144331d923e1eba11f5c74867be3512bf0942ee8f4951ea81b1595b7b2b
consensus 1991772603
f88cdd8b6ecf9a2ecc5ab4519333a4a7938d391db62c23665339c04029f25c06
```
Those are two sighash for vin0 and vin1 I think

And this is msg32 from visitor when it does cc_verify for vin1:
```
D3F3BE70754A39BA254F5167A56761648D4CF32E4B29DC72A000077D660C5AF6
```


[06-Dec-18 04:22 AM] jl777c#5810
aha! that is why it fails


[06-Dec-18 04:23 AM] jl777c#5810
so the question is why is visitor.msg D3F3BE70754A39BA254F5167A56761648D4CF32E4B29DC72A000077D660C5AF6 instead of f88cdd8b6ecf9a2ecc5ab4519333a4a7938d391db62c23665339c04029f25c06


[06-Dec-18 04:24 AM] jl777c#5810
so at least we found the exact cause and hopefully can find that the visitor.msg is using a different way to get sighash


[06-Dec-18 04:24 AM] jl777c#5810
or the sighash function is called with slightly different parameters


[06-Dec-18 04:25 AM] Mihailo#5902
I do not think this is correct compare, as I started new oracle and tested when oraclesdata works and they are still different


[06-Dec-18 04:25 AM] Mihailo#5902
```
consensus 1991772603
3a03adb18ad8261873e77df3e87e5f0d27fca85fa9120600abdae9d13e7bf81f
consensus 1991772603
0c6202fcbdbaf1ab36bfdc7b50184e80baf55c5d82d3a85921337126f5500678
```
```
1FF87B3ED1E9DAAB000612A95FA8FC270D5F7EE8F37DE7731826D88AB1AD033A
780650F52671332159A8D3825D5CF5BA804E18507BDCBF36ABF1BABDFC02620C
```


[06-Dec-18 04:32 AM] jl777c#5810
it seems rc = secp256k1_ecdsa_verify(ec_ctx_verify, &sig, visitor.msg, &pk);
is verifying it, but the CC signing is a bit more complex and it seems to call cc_visit which automatically add a signature?


[06-Dec-18 04:32 AM] jl777c#5810
you need to dig into the crytoconditions code to see what exactly it is signing with the secp256k1 sign function


[06-Dec-18 04:33 AM] jl777c#5810
it could be that the sighash in finalizeCCtx is being processed. I know the CC vout is a hash of the actual condition


[06-Dec-18 04:33 AM] jl777c#5810
so there is another layer of processing going on


[06-Dec-18 04:33 AM] Mihailo#5902
Ok, need to get to know how it all works. BTW, who wrote the core of CC?


[06-Dec-18 04:33 AM] jl777c#5810
libscott


[06-Dec-18 04:33 AM] jl777c#5810
let me know when you find the exact values being secp256k1 signed


[06-Dec-18 04:33 AM] jl777c#5810
we need to get 100% up to speed with this code


[06-Dec-18 04:34 AM] Mihailo#5902
Ok, and is he around if I need some help?


[06-Dec-18 04:37 AM] jl777c#5810
he is around occasionally, but the code is there, so I think we can solve this one


[06-Dec-18 04:48 AM] Mihailo#5902
Ok, so it is a problem that visitor msg is different after all:
```
01689a936c74cf0de5681df6d3231167edf152850d855a9f4f78a2fb2d6d9922 sighash, 7329453ccd1035fb04f658c0d67478ca60d82a98c54bdc4c0e7d36c8c9e73297 signed with privkey
faaf33dd9ed46ff577a6b9f83f40606fa4a5bc7e76ffdc7907cab9b0e02edd7f sighash, 84621e9eb74ea9218d47937930e854bae5eff798bf2c23306c66d433cd68b728 signed with privkey

01689a936c74cf0de5681df6d3231167edf152850d855a9f4f78a2fb2d6d9922
faaf33dd9ed46ff577a6b9f83f40606fa4a5bc7e76ffdc7907cab9b0e02edd7f

b909cd5fa57c7c781a341673531866ae1c0eaada34d28234f8c72fb03d96273e sighash, 7329453ccd1035fb04f658c0d67478ca60d82a98c54bdc4c0e7d36c8c9e73297 signed with privkey
42ed6b230b24f1aad716aee9322f1d23a3733499c765c5fb975426cb3e41cb60 sighash, 84621e9eb74ea9218d47937930e854bae5eff798bf2c23306c66d433cd68b728 signed with privkey

f82fa488427d261e1f82038fe8eca6c7843ac7880f0ef45aeac6dc71f5bfc50e
cc_verify error C
ERROR: CScriptCheck(): bd217b74b48be1c6c23de7e0d1bbadf53562da61a5a9f31c43cae5cabe90858d:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
f82fa488427d261e1f82038fe8eca6c7843ac7880f0ef45aeac6dc71f5bfc50e
cc_verify error C
ERROR: CScriptCheck(): bd217b74b48be1c6c23de7e0d1bbadf53562da61a5a9f31c43cae5cabe90858d:1 VerifySignature failed: Script evaluated without error but finished with a false/empty top stack element
```


[06-Dec-18 04:49 AM] Mihailo#5902
So the first check matches 016... and faa..., but the second is different and this is when oraclesdata fails.


[06-Dec-18 04:51 AM] jl777c#5810
good, now to find out the difference in how it is called.


[06-Dec-18 04:52 AM] jl777c#5810
i might know why! when it is validating the mempool, it sometimes doesnt know the current height and maybe it defaults to the wrong height


[06-Dec-18 04:52 AM] jl777c#5810
in CCutils.cpp ProcessCC:
    height = KOMODO_CONNECTING;
    if ( KOMODO_CONNECTING < 0 ) // always comes back with > 0 for final confirmation
        return(true);
    if ( ASSETCHAINS_CC == 0 || (height & ~(1<<30)) < KOMODO_CCACTIVATE )
        return eval->Invalid("CC are disabled or not active yet");
    if ( (KOMODO_CONNECTING & (1<<30)) != 0 )
    {
        from_mempool = 1;
        height &= ((1<<30) - 1);
    }


[06-Dec-18 04:53 AM] jl777c#5810
KOMODO_CONNECTING I try to set sanely in all paths coming in from main.cpp, but it can get called from ProcessBlock, which is async from network traffics


[06-Dec-18 04:53 AM] jl777c#5810
and if the different height is used, it would think it is a different consensusBranchId


[06-Dec-18 04:54 AM] jl777c#5810
One solution for this is that where it errors to try the alternate serialization


[06-Dec-18 04:54 AM] jl777c#5810
so if it is sapling active and it fails, try the sapling inactive serialization


[06-Dec-18 04:54 AM] Mihailo#5902
I saw when I've done prints from cc_verify that sometimes it overlaps so it is multithreaded, could it be some synchronization problem?


[06-Dec-18 04:54 AM] jl777c#5810
if sapling inactive fails, try sapling active


[06-Dec-18 04:54 AM] jl777c#5810
it is multithreaded


[06-Dec-18 04:55 AM] jl777c#5810
ProcessBlock happens while connectblock is happening, this is all the time


[06-Dec-18 04:55 AM] jl777c#5810
I think this is the other explanation for intermittent


[06-Dec-18 04:55 AM] jl777c#5810
it depends on the mempool and when a tx is coming in to be verified in the middle of another


[06-Dec-18 04:55 AM] jl777c#5810
so when there are both sapling active and inactive on the network, it can end up using the wrong serialization format to calculate the sighash


[06-Dec-18 04:56 AM] jl777c#5810
so the fix is to use both serializations in the validation


[06-Dec-18 04:56 AM] jl777c#5810
i hope you can understand what I am saying


[06-Dec-18 04:57 AM] Mihailo#5902
Well not fully,. as I had no time by now to even check what sapling does üò≥


[06-Dec-18 04:57 AM] jl777c#5810
sapling changes the tx serialization which would change the sighash


[06-Dec-18 04:57 AM] jl777c#5810
that is all that matters here


[06-Dec-18 04:58 AM] jl777c#5810
and the height of the tx determines if it is sapling or not


[06-Dec-18 04:58 AM] jl777c#5810
and there is the normal block processing and network based async processing


[06-Dec-18 04:58 AM] Mihailo#5902
Sapling starts from some height and then it always use sapling?


[06-Dec-18 04:58 AM] jl777c#5810
both sharing the same global to set the current height of the CC


[06-Dec-18 04:59 AM] jl777c#5810
yes, once sapling is active it stays active, but tx from older heights can still be process and must be valid


[06-Dec-18 04:59 AM] jl777c#5810
but the cross talk will reduce a lot the longer we are in all sapling


[06-Dec-18 04:59 AM] jl777c#5810
so the cost of an extra validate on error is ok


[06-Dec-18 04:59 AM] Mihailo#5902
Ok, but on my chain sapling started at height 61 and everything I've done was way after that height.


[06-Dec-18 04:59 AM] jl777c#5810
in some cases the global height is set to 0


[06-Dec-18 04:59 AM] jl777c#5810
which is <61


[06-Dec-18 05:00 AM] Mihailo#5902
Oh, you mean sometimes when it validates tx it doesn't know which height it is so it uses 0 and then it will user different serialization?


[06-Dec-18 05:00 AM] jl777c#5810
yes


[06-Dec-18 05:00 AM] Mihailo#5902
Got it!


[06-Dec-18 05:00 AM] jl777c#5810
pretty certain that is what is going on


[06-Dec-18 05:01 AM] jl777c#5810
it was a flimsy thing, but alternative was to flow through height all the way from main.cpp deep into CC validation


[06-Dec-18 05:01 AM] jl777c#5810
that is the alternative way to fix this, to remove KOMODO_CONNECTING and pass in an always accurate height into ProcessCC


[06-Dec-18 05:01 AM] jl777c#5810
which comes in from tx validation


[06-Dec-18 05:02 AM] jl777c#5810
and script interpreter


[06-Dec-18 05:02 AM] jl777c#5810
it was a C++ minefield for me so I decided to use global


[06-Dec-18 05:02 AM] jl777c#5810
maybe you can make a clean way


[06-Dec-18 05:02 AM] jl777c#5810
maybe adding txheight field to the tx being validated that will be there when ProcessCC is called


[06-Dec-18 05:03 AM] Mihailo#5902
Ok, I'm going for lunch and will try it on when I'm back.


[06-Dec-18 06:36 AM] Mihailo#5902
@jl777c I don't quite see how KOMODO_CONNECTING has influence which serialization will be used ...


[06-Dec-18 06:37 AM] jl777c#5810
for now lets just try the alternate serialization if the selected one gets an error


[06-Dec-18 06:37 AM] jl777c#5810
the other way would be way too much code changes this close to an update


[06-Dec-18 06:37 AM] jl777c#5810
just need to know how the visitor.msg was calculated and how to do the alternate calc if it gets an error


[06-Dec-18 06:55 AM] Mihailo#5902
This is what differs when calculating sighash in CCTx and in verify:
```cpp
printf("txdata: %s %s %s %s\n",txdata.hashOutputs.GetHex().data(),txdata.hashPrevouts.GetHex().data(),txdata.hashSequence.GetHex().data(),txdata.hashJoinSplits.GetHex().data());
```
```
txdata: 93a6e371082be9f172b5803f44ec6ae08d5a7d4dbddd1732b6b46667e83e4a6c 47cce7339ce18a01f0a92b5581c2e8fb83c4d3751af525a760802286952cd210 5c4cf0d63b1e79c0cb592656fdc1873d22c6f594f34924a4c7fa32fdb8b15d89 950ffd3ef48936edb04059e67bf7c45aca8450e020243754e9c80e7965b1f33b

txdata: 93a6e371082be9f172b5803f44ec6ae08d5a7d4dbddd1732b6b46667e83e4a6c 1751fa8a98662f7e09f8dee3d8bc748bfdbf95687a810ad5f4771240529d7650 5c4cf0d63b1e79c0cb592656fdc1873d22c6f594f34924a4c7fa32fdb8b15d89 950ffd3ef48936edb04059e67bf7c45aca8450e020243754e9c80e7965b1f33b
```
The second variable is txdata.hashPrevouts which is different üòÆ


[06-Dec-18 06:58 AM] Mihailo#5902
Verification takes txdata from TransactionSignatureChecker class: `sighash = SignatureHash(CCPubKey(cond), *txTo, nIn, nHashType, amount, consensusBranchId, this->txdata);`
And CCTx gets it from mtx passed.


[06-Dec-18 07:01 AM] jl777c#5810
something is overwriting vin[1] ??


[06-Dec-18 07:01 AM] jl777c#5810
that woudl indeed change the sighash


[06-Dec-18 07:02 AM] jl777c#5810
do we know if it is the same tx being validated in the working vs not working case?


[06-Dec-18 07:02 AM] Mihailo#5902
Don't know. It should not. I'm trying to figure out where it got this data and how it can be different


[06-Dec-18 07:02 AM] Mihailo#5902
"do we know if it is the same tx being validated in the working vs not working case?" How do you mean?


[06-Dec-18 07:03 AM] jl777c#5810
is it the same txid being validated in both working vs not working cases?


[06-Dec-18 07:04 AM] Mihailo#5902
I could not make same tx to sometime work and sometimes not. Just some previous txs work and then the one that does not verify never passes


[06-Dec-18 07:05 AM] jl777c#5810
but here we have a single specific tx that is modified from when it is signed to when it is validated?


[06-Dec-18 07:06 AM] Mihailo#5902
Yes


[06-Dec-18 07:06 AM] jl777c#5810
the C++ memory management is a mystery to me


[06-Dec-18 07:06 AM] jl777c#5810
i cant tell what the allocated memory ptrs are


[06-Dec-18 07:07 AM] jl777c#5810
hopefully you can find the tx data and make it not molested


[06-Dec-18 07:07 AM] Mihailo#5902
Well, it could be that something modified hashprevout when broadcasting that tx. There is a lot of code where tx passes before it reaches this function...


[06-Dec-18 07:10 AM] Mihailo#5902
What is the first point in main.cpp (or is it main) where tx is processed after sendrawtransactin?


[06-Dec-18 07:13 AM] jl777c#5810
i am pretty sure the CC validation is all done before it ever completes back up to main.cpp


[06-Dec-18 07:13 AM] jl777c#5810
but sendrawtransaction, just adds it to mempool and broadcasts it


[06-Dec-18 07:14 AM] Mihailo#5902
Yep, and then it does validation I think


[06-Dec-18 07:14 AM] jl777c#5810
process message would get a new transaction and check for validity


[06-Dec-18 07:14 AM] Mihailo#5902
Before relaying


[06-Dec-18 07:14 AM] jl777c#5810
or it could be part of block validation that is doing the CC validation


[06-Dec-18 07:15 AM] jl777c#5810
pretty sure it is just within the script interpreter where the cryptoconditions validation is done


[06-Dec-18 07:15 AM] jl777c#5810
so from the time of FinalizeCCtx to where it is broadcast, must be where it is changed


[06-Dec-18 07:16 AM] Mihailo#5902
Also, it could be good to check this data in the hex returned, maybe something is there malformed


[06-Dec-18 07:32 AM] Mihailo#5902
It has entered to AcceptToMemoryPool already modified...


[06-Dec-18 07:34 AM] jl777c#5810
you verified the hex you are broadcasting is unmodified?


[06-Dec-18 07:34 AM] Mihailo#5902
Doing that now


[06-Dec-18 07:34 AM] jl777c#5810
if so, then sendrawtransaction is modifying the hex?


[06-Dec-18 07:34 AM] jl777c#5810
so I hope the hex you are broadcasting is changed


[06-Dec-18 07:35 AM] Mihailo#5902
Me too


[06-Dec-18 07:35 AM] Mihailo#5902
Maybe EnocdeHex has some problem


[06-Dec-18 07:35 AM] jl777c#5810
and somehow the mtx from FinalizeCCtx to where it generates the JSON is where things go bad. at least that is all inside the oracles.cpp code


[06-Dec-18 07:35 AM] jl777c#5810
crazy bug!


[06-Dec-18 07:37 AM] Mihailo#5902
Also this could be wrong PrecomputedTransactionData txdata(tx);


[06-Dec-18 07:37 AM] Mihailo#5902
But I haven't yet got to it to see how it is getting data from tx


[06-Dec-18 07:37 AM] jl777c#5810
well at least it feels like you have caught the bug in action and it happens all the time, so you will be able to solve it


[06-Dec-18 07:38 AM] Mihailo#5902
üëç


[06-Dec-18 07:47 AM] Mihailo#5902
It must be something with memory managment wrong as after calling SignatureHash in CCTx it gets modified then:
```cpp
printf("txdata: %s %s %s %s\n",txdata.hashOutputs.GetHex().data(),txdata.hashPrevouts.GetHex().data(),txdata.hashSequence.GetHex().data(),txdata.hashJoinSplits.GetHex().data());                
uint256 sighash = SignatureHash(CCPubKey(cond), mtx, i, SIGHASH_ALL, utxovalues[i],consensusBranchId, &txdata);
{
         PrecomputedTransactionData txdata1(mtx);
         printf("txdata2: %s %s %s %s\n",txdata1.hashOutputs.GetHex().data(),txdata1.hashPrevouts.GetHex().data(),txdata1.hashSequence.GetHex().data(),txdata1.hashJoinSplits.GetHex().data());
}    
```           
```
txdata: 93a6e371082be9f172b5803f44ec6ae08d5a7d4dbddd1732b6b46667e83e4a6c 47cce7339ce18a01f0a92b5581c2e8fb83c4d3751af525a760802286952cd210 5c4cf0d63b1e79c0cb592656fdc1873d22c6f594f34924a4c7fa32fdb8b15d89 950ffd3ef48936edb04059e67bf7c45aca8450e020243754e9c80e7965b1f33b
txdata2: 93a6e371082be9f172b5803f44ec6ae08d5a7d4dbddd1732b6b46667e83e4a6c 1751fa8a98662f7e09f8dee3d8bc748bfdbf95687a810ad5f4771240529d7650 5c4cf0d63b1e79c0cb592656fdc1873d22c6f594f34924a4c7fa32fdb8b15d89 950ffd3ef48936edb04059e67bf7c45aca8450e020243754e9c80e7965b1f33b
```


[06-Dec-18 07:50 AM] Mihailo#5902
Aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
It is bug made by me!!!!! üò© üò© üò© 
Remember those moving of multiple normal vins to the end after CC vins. So take a look at the code:
```cpp
PrecomputedTransactionData txdata(mtx);
    n = mtx.vin.size(); 
    //Reorder vins so that for multiple normal vins all other except vin0 goes to the end
    //This is a must to avoid hardfork change of validation in every CC, because there could be maximum one normal vin at the begining with current validation.   
    if (normalvins>1)
    {        
        for(i=1;i<normalvins;i++)
        {   
            mtx.vin.push_back(mtx.vin[1]);
            mtx.vin.erase(mtx.vin.begin() + 1);            
        }
    }      
```


[06-Dec-18 07:51 AM] Mihailo#5902
PrecomputedTransactionData must be after


[06-Dec-18 07:51 AM] Mihailo#5902
And that is why it sometimes work and sometimes not, until it happens to be that it has mor normal vins at the beggining


[06-Dec-18 07:52 AM] jl777c#5810
I wont tell anybody if you dont

{Reactions}
üòÇ (4) 

[06-Dec-18 07:52 AM] Mihailo#5902
üòÜ ü§¶ :yassinheartbroken:


[06-Dec-18 07:53 AM] jl777c#5810
pushed fix


[06-Dec-18 07:54 AM] Mihailo#5902
Wait, I'm checking it still makes some problems. Now vin2 seems to fail


[06-Dec-18 07:55 AM] jl777c#5810
maybe create a new tmpmtx


[06-Dec-18 07:55 AM] jl777c#5810
copy mtx: tmpmtx = mtx; tmpmtx.vin.clear()


[06-Dec-18 07:56 AM] jl777c#5810
and then set the vins from mtx to tmpmtx


[06-Dec-18 07:56 AM] jl777c#5810
at the end mtx = tmpmtx


[06-Dec-18 07:56 AM] jl777c#5810
doing vin[] fiddling in place seems confusing and error prone


[06-Dec-18 07:56 AM] Mihailo#5902
Let me check this better


[06-Dec-18 08:17 AM] Mihailo#5902
Ok, figured out the problem


[06-Dec-18 08:44 AM] Mihailo#5902
I'm having strange problem when issuing RPC. Seems like daemon or RPC is stuck.


[06-Dec-18 08:45 AM] Mihailo#5902
Don't know if it is because of fix, or it happens anyway.


[06-Dec-18 08:48 AM] TonyL#3577
gdb backtrace might be useful if this stuck is possible to reproduce


[06-Dec-18 09:09 AM] Mihailo#5902
I think fix is ok now...
https://github.com/jl777/komodo/pull/1039

{Embed}
https://github.com/jl777/komodo/pull/1039
Fix reorder of vins in FinalizeCCTx by Mixa84 ¬∑ Pull Request #103...
https://images-ext-2.discordapp.net/external/5PP5Rc1dp6Lo2v8nwnTvQmRdaXpEf9xjHeMr0XyppBs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/39563265


[06-Dec-18 09:09 AM] Mihailo#5902
So this just the fix for cc_verify issue.


[06-Dec-18 09:09 AM] Mihailo#5902
I'm not sure now if the illegal datafee issue still stands?


[06-Dec-18 09:10 AM] Mihailo#5902
@TonyL Do we know how to reproduce it exactly?


[06-Dec-18 09:11 AM] Mihailo#5902
Also, it is very strange how I could only eproduce cc_verify error on sapling chain ü§î


[06-Dec-18 09:18 AM] TonyL#3577
@Mihailo  I'll re-test oracles functionality tomorrow and check if this illegal datafee issue is actual (in general reproducing  flow was like a: create oracle S datatype on sapling activated chain, 2 register 10000 sat, 2 subscribe 1 coin and on any data publishing attempt get this datafee error - and it was actual only on PirateNetwork/FSM repo while on jl777/FSM worked fine) + stress/spam test is needed I think


[06-Dec-18 11:40 AM] jl777c#5810
merged. it seems possible the datafee issue could be related, but only way to find out for sure is to test it


[06-Dec-18 11:47 AM] Mihailo#5902
Yes. Maybe datafee issue couod be something because of two registers and finding the baton, but it could also be fixed with this.


[07-Dec-18 03:05 AM] TonyL#3577
On latest FSM possible to create same two publishers:
```komodo-cli -ac_name=SPLTEST oraclesinfo 8636a373ebe01af956ed320742e29d0060c47f33c6238801cca80004d220068d
{
  "result": "success",
  "txid": "8636a373ebe01af956ed320742e29d0060c47f33c6238801cca80004d220068d",
  "name": "Testing",
  "description": "Testing",
  "format": "S",
  "marker": "RX1WWF8B5mN1Qz2MjDLvwuefdiVrYRBbyS",
  "registered": [
    {
      "publisher": "02a3cf299910078222c5f6c3a4f45261c2c900af54dd090e955865c41fd7060047",
      "baton": "RRRZENDykruSdVSJno8WgZyvpRbLh9ixxb",
      "batontxid": "0e64a60bfb64df60b3af1edf44851f6187205484e1025e5baf30900dafdca69f",
      "lifetime": "108.00000000",
      "funds": "108.00000000",
      "datafee": "0.00010000"
    },
    {
      "publisher": "02a3cf299910078222c5f6c3a4f45261c2c900af54dd090e955865c41fd7060047",
      "baton": "RRRZENDykruSdVSJno8WgZyvpRbLh9ixxb",
      "batontxid": "0e64a60bfb64df60b3af1edf44851f6187205484e1025e5baf30900dafdca69f",
      "lifetime": "108.00000000",
      "funds": "108.00000000",
      "datafee": "0.00010000"
    }
  ]
}
```


[07-Dec-18 03:05 AM] TonyL#3577
@Mihailo I've started to mass data publishing and komodod hanged on my side


[07-Dec-18 03:06 AM] TonyL#3577
Maybe it's same situation as you had yesterday


[07-Dec-18 03:08 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/520557118571413504/unknown.png


[07-Dec-18 03:09 AM] TonyL#3577
Hmm it should be different process (on screenshot), sry


[07-Dec-18 03:14 AM] Mihailo#5902
Hmmm, that hanging is strange. Not sure it has to do with fix as I think I had strange behaviour before the fix.


[07-Dec-18 03:17 AM] Mihailo#5902
I did not try datafee issue on Pirate repo as they are not on latest FSM but could check it over there also with the fix.


[07-Dec-18 03:18 AM] TonyL#3577
I'm testing everything on jl777/FSM at the moment


[07-Dec-18 03:19 AM] Mihailo#5902
Good


[07-Dec-18 03:39 AM] TonyL#3577
Hmm I'm broadcast 1 oraclesdata and komodod hangs with 100% loading on CPU


[07-Dec-18 03:39 AM] TonyL#3577
```(gdb) backtrace
#0  0x00007ffff7740c60 in nanosleep () from /lib/x86_64-linux-gnu/libpthread.so.0
#1  0x0000555555bf4e28 in boost::this_thread::hidden::sleep_for(timespec const&) ()
#2  0x000055555597d6a9 in boost::this_thread::sleep_for (ns=<synthetic pointer>...)
    at /root/latest_FSM/komodo/depends/x86_64-unknown-linux-gnu/share/../include/boost/thread/pthread/thread_data.hpp:258
#3  boost::this_thread::sleep_for<long, boost::ratio<1l, 1000l> > (d=...)
    at /root/latest_FSM/komodo/depends/x86_64-unknown-linux-gnu/share/../include/boost/thread/v2/thread.hpp:124
#4  MilliSleep (n=20000) at utiltime.cpp:46
#5  0x00005555555e48f0 in WaitForShutdown (threadGroup=0x7fffffffe0e0) at bitcoind.cpp:67
#6  0x00005555555e5b1e in AppInit (argc=<optimized out>, argv=<optimized out>) at bitcoind.cpp:225
#7  0x00005555555e632d in main (argc=10, argv=0x7fffffffe388) at bitcoind.cpp:239```


[07-Dec-18 03:39 AM] TonyL#3577
Not sure if this backtrace is useful


[07-Dec-18 03:39 AM] Mihailo#5902
Hmmm, this is I suppose when you shutdown the daemon so it waits for all threads to finish so it can exit.


[07-Dec-18 03:40 AM] jl777c#5810
waitforshutdown is the loop the main thread ends up it, waiting for shutdown


[07-Dec-18 03:41 AM] jl777c#5810
100% CPU indicates maybe some issue with locking/unlocking?


[07-Dec-18 03:41 AM] Mihailo#5902
I now that when I had hanging happen when I issue another RPC it is stuck. Could be that some RPC thread is stuck?


[07-Dec-18 03:41 AM] jl777c#5810
or could just be an infinite loop


[07-Dec-18 03:41 AM] jl777c#5810
rpc calls are serialized


[07-Dec-18 03:42 AM] jl777c#5810
if one doesnt finish, the next is just waiting forever


[07-Dec-18 03:42 AM] TonyL#3577
@Mihailo I can call now RPC without args let's say:
```/komodo-cli -ac_name=SPLTEST oraclesdata
error code: -1
error message:
oraclesdata oracletxid hexstr
```
But call with args just hangs ```./komodo-cli -ac_name=SPLTEST oraclesdata 8636a373ebe01af956ed320742e29d0060c47f33c6238801cca80004d220068d 1```


[07-Dec-18 03:43 AM] jl777c#5810
oh, hexstr of "1" ?


[07-Dec-18 03:43 AM] jl777c#5810
what about hexstr of 01


[07-Dec-18 03:43 AM] jl777c#5810
might be a bug handling string len 1


[07-Dec-18 03:43 AM] jl777c#5810
hex is minimum 2 bytes


[07-Dec-18 03:44 AM] TonyL#3577
https://paste.ubuntu.com/p/B8nm72vt6d/


[07-Dec-18 03:44 AM] Mihailo#5902
I don't think that's the problem as I was calling oraclesdata correctly and still got hangs


[07-Dec-18 03:44 AM] TonyL#3577
I'm hanging everything with this script


[07-Dec-18 03:44 AM] TonyL#3577
Broadcast once


[07-Dec-18 03:44 AM] jl777c#5810
problem with the fix for the CC validate error?


[07-Dec-18 03:45 AM] Mihailo#5902
Let see if it is just oracles related.


[07-Dec-18 03:45 AM] TonyL#3577
And then komodod hangs with 100% CPU loading


[07-Dec-18 03:45 AM] Mihailo#5902
Try something else, if it hangs than it is something else.


[07-Dec-18 03:45 AM] TonyL#3577
Sure, let me try


[07-Dec-18 03:47 AM] Mihailo#5902
I just had hang on first oraclesdata I issued


[07-Dec-18 03:47 AM] Mihailo#5902
But thing is that I get the hex from previous and then I broadcast and try another oraclesdata and it hangs.


[07-Dec-18 03:48 AM] Mihailo#5902
Also I noticed that tx are not relayed all the time


[07-Dec-18 03:48 AM] jl777c#5810
when did this behavior start? very few changes recently to CC, only the fix for the validation


[07-Dec-18 03:49 AM] Mihailo#5902
Not quite sure, as I was trying to figure out the problem yesterday and itm ay happen before my fix but not sure.


[07-Dec-18 03:49 AM] TonyL#3577
Seems I can reproduce only on oracles


[07-Dec-18 03:49 AM] TonyL#3577
First oracles data  is broadcasting fine


[07-Dec-18 03:49 AM] TonyL#3577
And then komodod became unresponsible


[07-Dec-18 03:49 AM] TonyL#3577
If I broadcast 2 bets let say - everything is ok


[07-Dec-18 03:50 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/520567712045596672/unknown.png


[07-Dec-18 03:50 AM] TonyL#3577
Bets are ok

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/520567833898254351/unknown.png


[07-Dec-18 03:51 AM] Mihailo#5902
That's good. It may be then something either with my fix or oracles rpc


[07-Dec-18 03:51 AM] TonyL#3577
It's definitely might be since yesterday komodod not hanged after oraclesdata


[07-Dec-18 03:52 AM] TonyL#3577
ü§û Hope it's local thing only for oracles


[07-Dec-18 03:52 AM] Mihailo#5902
Then I screwed somthing for sure üòâ You cannot became good blockchain dev until you f*ck up something good üòõ


[07-Dec-18 03:53 AM] TonyL#3577
A person who never made a mistake never tried anything new. - Albert Einstein üòÉ


[07-Dec-18 03:53 AM] Mihailo#5902
I can issue multiple oraclesdata without broadcasting it. So I think it is not RPC thing


[07-Dec-18 03:54 AM] Mihailo#5902
And after I broadcast it and try another oraclesdata then it hangs


[07-Dec-18 03:54 AM] TonyL#3577
It hangs even without try


[07-Dec-18 03:55 AM] TonyL#3577
Right after broadcast you shouldn't be able to call anything


[07-Dec-18 03:55 AM] TonyL#3577
Like a `getinfo` let's say


[07-Dec-18 03:55 AM] Mihailo#5902
Probably, I just noticed when I tried another oraclesdata


[07-Dec-18 03:57 AM] Mihailo#5902
It can be something in validation that locks, but why it happens now. I'll trace it, but I'm thinking if you could test this without fix, but then you will have cc_verify error.


[07-Dec-18 04:01 AM] TonyL#3577
Yep if I'll rollback - there is another issue like a stack element error after 3+ oraclesdata brodcast


[07-Dec-18 04:01 AM] Mihailo#5902
Validation has passed, and getinfo and other prc works, but I see tx are not relayed. Tried sendtoaddress after that and see nothing is reaching mining node.


[07-Dec-18 04:02 AM] Mihailo#5902
Hmmm, I cannot make it hang now


[07-Dec-18 04:03 AM] Mihailo#5902
It seems I need to call another oraclesdata to make it hang, before the block is mined


[07-Dec-18 04:04 AM] TonyL#3577
Hmm, yes you're right I think


[07-Dec-18 04:06 AM] Mihailo#5902
Ok, located where it is. Trying to find the baton. Let me analyze this.


[07-Dec-18 04:10 AM] Mihailo#5902
@jl777c The problem seems to be here:
```cpp
while ( myIsutxo_spentinmempool(batontxid,1) != 0 )
        batontxid = myIs_baton_spentinmempool(batontxid,1);
```
I remeber we talked about this when I was fixing oracles before, but can't remeber what we said.


[07-Dec-18 04:12 AM] jl777c#5810
probably need to check if it is a null batontxid and break with error


[07-Dec-18 04:12 AM] jl777c#5810
though it really shouldnt be possible for the baton to not exist...


[07-Dec-18 04:18 AM] Mihailo#5902
This part should find the latest baton as I understand...


[07-Dec-18 04:18 AM] Mihailo#5902
And it goes into infinite loop


[07-Dec-18 04:19 AM] jl777c#5810
likely with batontxid being all 0, so first is to break out of the loop if that happens


[07-Dec-18 04:19 AM] jl777c#5810
if course finding out how it returns all 0s is needed too


[07-Dec-18 04:19 AM] Mihailo#5902
No it is not 0


[07-Dec-18 04:19 AM] Mihailo#5902
It stays on one txid
```
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
b11e9774b68a63e781be9e34084ab27e544d6b639843b4aaf58e81f9a3abb322
...
```


[07-Dec-18 04:25 AM] jl777c#5810
i guess need to check for that case too, if the same txid comes back. cant be your own vin


[07-Dec-18 04:25 AM] Mihailo#5902
So I think the problem is here:
```cpp
BOOST_FOREACH(const CTxMemPoolEntry &e,mempool.mapTx)
    {
        const CTransaction &tx = e.GetTx();
        if ( tx.vout.size() > 0 && tx.vin.size() > 1 && batontxid == tx.vin[1].prevout.hash && batonvout == tx.vin[1].prevout.n )
        {
            const uint256 &txid = tx.GetHash();
            //char str[65]; fprintf(stderr,"found baton spent in mempool %s\n",uint256_str(str,txid));
            return(txid);
        }
    }
    return(batontxid);
```
Some how the if does not get satisfied in whole mempool and it returns same batontxid.


[07-Dec-18 04:25 AM] jl777c#5810
yes. maybe it was confirmed?


[07-Dec-18 04:25 AM] Mihailo#5902
Maybe this: `batonvout == tx.vin[1].prevout.n`


[07-Dec-18 04:26 AM] jl777c#5810
i guess you could find out what it should be, given the state of the mempool


[07-Dec-18 04:26 AM] Mihailo#5902
Yeah, maybe it is the reordering of vins that creates the problem


[07-Dec-18 04:27 AM] jl777c#5810
true! i guess the batonvout needs to be set properly, i think it might be a constant in the calling function


[07-Dec-18 04:30 AM] Mihailo#5902
I have to check this from beginning. I see that baton is not on index 1 so that is the problem...


[07-Dec-18 04:30 AM] Mihailo#5902
But reordering should prevent this.


[07-Dec-18 04:45 AM] Mihailo#5902
There was a copy/paste error in previous fix. Now it should work.


[07-Dec-18 04:45 AM] Mihailo#5902
https://github.com/jl777/komodo/pull/1043

{Embed}
https://github.com/jl777/komodo/pull/1043
Fix hanging of oracles by Mixa84 ¬∑ Pull Request #1043 ¬∑ jl777/komodo
https://images-ext-2.discordapp.net/external/5PP5Rc1dp6Lo2v8nwnTvQmRdaXpEf9xjHeMr0XyppBs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/39563265


[07-Dec-18 04:48 AM] TonyL#3577
Rebuilding


[07-Dec-18 04:48 AM] jl777c#5810
updated


[07-Dec-18 04:56 AM] TonyL#3577
Not hangs anymore on my side


[07-Dec-18 04:58 AM] TonyL#3577
Published 100 oraclesdata without issues


[07-Dec-18 05:28 AM] Alright#0419
Have a couple weird observations, not sure they really matter though


[07-Dec-18 05:28 AM] Alright#0419
```
check faucetget txid 00652a730d7efd405f86ad50566b89e309e9397dc41a67885db8daecb589ec00 00/00
faucetget validated
check faucetget txid 00652a730d7efd405f86ad50566b89e309e9397dc41a67885db8daecb589ec00 00/00
faucetget validated
check faucetget txid 00652a730d7efd405f86ad50566b89e309e9397dc41a67885db8daecb589ec00 00/00
faucetget validated
check faucetget txid 00652a730d7efd405f86ad50566b89e309e9397dc41a67885db8daecb589ec00 00/00
faucetget validated
check faucetget txid 00652a730d7efd405f86ad50566b89e309e9397dc41a67885db8daecb589ec00 00/00
faucetget validated
check faucetget txid 00652a730d7efd405f86ad50566b89e309e9397dc41a67885db8daecb589ec00 00/00
faucetget validated
```
stdout of all nodes prints that too many times


[07-Dec-18 05:29 AM] Alright#0419
then things like this happening as well after broadcasting cc txs
```
2018-12-07 13:12:17 UpdateTip: new best=01808fc5d3777ad455247db79720752687e92f1ba436030c53cd77704ec08b2b  height=89  log2_work=11.616549  log2_stake=-inf  tx=96  date=2018-12-07 13:11:53 progress=1.059524  cache=0.0MiB(12tx)
2018-12-07 13:12:17 AddToWallet 3d840f064c16e85f32f46861358136624d24d8ff9d72289197fba4c4b1387787  
2018-12-07 13:13:28 connect() to 185.64.105.111:29476 failed after select(): No route to host (113)
2018-12-07 13:13:32 AddToWallet d377ca2f63223733435b1db4cd105c73a8477e35b3f312a899130cda86bb85e4  new
2018-12-07 13:13:56 AddToWallet 3d840f064c16e85f32f46861358136624d24d8ff9d72289197fba4c4b1387787  
2018-12-07 13:13:56 AddToWallet d377ca2f63223733435b1db4cd105c73a8477e35b3f312a899130cda86bb85e4  
2018-12-07 13:13:56 AddToWallet 3d840f064c16e85f32f46861358136624d24d8ff9d72289197fba4c4b1387787  
2018-12-07 13:13:56 AddToWallet d377ca2f63223733435b1db4cd105c73a8477e35b3f312a899130cda86bb85e4  
2018-12-07 13:13:56 AddToWallet 3d840f064c16e85f32f46861358136624d24d8ff9d72289197fba4c4b1387787  
2018-12-07 13:13:56 AddToWallet d377ca2f63223733435b1db4cd105c73a8477e35b3f312a899130cda86bb85e4  
2018-12-07 13:13:56 UpdateTip: new best=00ecadfcbb797b503dc68c7817677ae8f11aca43754af484d49f1052ad50c5c1  height=90  log2_work=11.649705  log2_stake=-inf  tx=98  date=2018-12-07 13:13:20 progress=1.071429  cache=0.0MiB(16tx)
2018-12-07 13:13:56 AddToWallet 3d840f064c16e85f32f46861358136624d24d8ff9d72289197fba4c4b1387787  update
2018-12-07 13:13:56 AddToWallet d377ca2f63223733435b1db4cd105c73a8477e35b3f312a899130cda86bb85e4  
2018-12-07 13:14:53 AddToWallet d377ca2f63223733435b1db4cd105c73a8477e35b3f312a899130cda86bb85e4  
2018-12-07 13:14:53 AddToWallet d377ca2f63223733435b1db4cd105c73a8477e35b3f312a899130cda86bb85e4  
2018-12-07 13:14:53 AddToWallet d377ca2f63223733435b1db4cd105c73a8477e35b3f312a899130cda86bb85e4
```


[07-Dec-18 05:29 AM] Alright#0419
this is pre-activation FSM branch


[07-Dec-18 05:31 AM] TonyL#3577
I saw such `faucetget validated` print on blockchain synchronisation stage - so thought it's ok since there were some faucet transaction on chain which I've synced. Do you see it on any transaction broadcast as daemon output? @Alright


[07-Dec-18 05:32 AM] TonyL#3577
There are a lot of new validations and printouts, especially in lets say assets


[07-Dec-18 05:33 AM] Alright#0419
the print is normal, but it printing so many times is not


[07-Dec-18 05:34 AM] Alright#0419
like I said, not sure it matters, just thought maybe it was an indication of something else that could be messed up


[07-Dec-18 05:42 AM] Alright#0419
prints once when the node first sees the faucetget tx


[07-Dec-18 05:42 AM] Alright#0419
then prints it many more times after the tx is put into a block


[07-Dec-18 08:53 AM] TonyL#3577
@dukeleto https://github.com/tonymorony/komodo/commit/601820af97063a863f59787a08452c8363933171 made working version of external non regtest nodes/chains testing
At the moment as a demonstration I've implemented such option in dice testing :```
PYTHON_DEBUG=1  qa/pull-tester/rpc-tests.sh cryptoconditions_dice --tracerpc --remoteserver
=== Running testscript cryptoconditions_dice.py ===
Setting up network...
connecting to http://user3343335094:pass4b2b726002e7945ab3d323fdf0d32a83a6c2800b217918f79775367af0c6beeee2@127.0.0.1:41372
created proxy
connecting to http://user1250842895:passbf15df11779835ad933bbc4f9a8d4774c525bcff0cdd91e56c69c0723dbc8e72ce@159.69.201.122:41372
created proxy
```
Test itself will fail because of assumptions of balances made for fresh regtest chain with known block reward. 
But in general it's more for future tests and more interesting/complicated cases in real environments - actually now we can connect to our framework any amount of nodes, located anywhere, with different software versions and so on. So now we are not limited by regtest and local node in our tests ideas.

{Embed}
https://github.com/tonymorony/komodo/commit/601820af97063a863f59787a08452c8363933171
external nodes test working example ¬∑ tonymorony/komodo@601820a
https://images-ext-1.discordapp.net/external/_FZ-6atALXBjBvMLVC1JBeWG05jXc2w_TXrppH7V6kE/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/24797699

{Reactions}
üëç 

[07-Dec-18 09:00 AM] TonyL#3577
Universal `generate` üòÉ  https://github.com/tonymorony/komodo/blob/FSM/qa/rpc-tests/cryptoconditions_dice.py#L95
Before PR I'll test more that this stuff not broke everything made before + will try to make a little bit more OOP

{Embed}
https://github.com/tonymorony/komodo/blob/FSM/qa/rpc-tests/cryptoconditions_dice.py
tonymorony/komodo
Komodo. Contribute to tonymorony/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[07-Dec-18 10:41 AM] SHossain#0007
@Mihailo TXSCLCC chain is being notarized with latest FSM source


[07-Dec-18 10:41 AM] SHossain#0007
and latest iguana source


[07-Dec-18 10:42 AM] SHossain#0007
anyone wants to mine TXSCLCC test chain, let me know and i'll give you start command


[09-Dec-18 12:01 PM] siu#3920
SPLTEST died right?


[09-Dec-18 12:01 PM] siu#3920
what is the new chain?


[09-Dec-18 12:44 PM] SHossain#0007
SPLTEST is not dead


[09-Dec-18 12:44 PM] SHossain#0007
it is running on few systems


[09-Dec-18 12:44 PM] SHossain#0007
my nodes are still mining it


[09-Dec-18 12:50 PM] siu#3920
mine gets stuck at block 60


[09-Dec-18 12:50 PM] siu#3920
with current FSM from piratenetwork


[09-Dec-18 12:50 PM] SHossain#0007
that will not work


[09-Dec-18 12:51 PM] SHossain#0007
edit `~/komodo/src/komodo_defs.h` file with the following timestamp and compile
```
#define KOMODO_SAPLING_ACTIVATION 1543073054 // Sat, 24 Nov 2018 15:24:14 GMT
#define KOMODO_SAPLING_DEADLINE 1543593600 // Fri, 30 Nov 2018 16:00:00 GMT
```
chain start:
```
./komodod -ac_name=SPLTEST -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 -addressindex=1 -spentindex=1 -addnode=54.36.126.42 -addnode=94.130.224.11 &
```


[09-Dec-18 12:52 PM] SHossain#0007
@siu


[09-Dec-18 12:52 PM] SHossain#0007
you can use jl777/komodo repo now


[09-Dec-18 12:52 PM] siu#3920
ok


[09-Dec-18 12:53 PM] SHossain#0007
PirateNetwork repo was used for a different testing with different timestamp


[09-Dec-18 12:56 PM] siu#3920
ok


[10-Dec-18 06:24 AM] siu#3920
```./coqui-cli channelspayment 3b804d984b7853c8e0766b80f50cfc95e9feb2a8a498bd3765c266892fa2846c 1
```


[10-Dec-18 06:24 AM] siu#3920
im testing channels cc in COQUI


[10-Dec-18 06:24 AM] siu#3920
opened a channel of 4 payments of 1 satoshi


[10-Dec-18 06:24 AM] siu#3920
```01000000032cf0a8aa728938a7721afb2a9e36ddec7615162a92316295981d751b6bfe15270200000049483045022100d69b49fb888e9e5659c62d3972e6057349cf9ea323dddde92d568f474fdbb45002201d7db9b790030a03fdb88e517842825662c8af078365a6588776e25fe02e28f601ffffffff6c84a22f8966c26537bd98a4a8b2fee995fc0cf5806b76e0c853784b984d803b00000000a74ca5a281a1a0819ca28194a067a565802103b0dabc5bfd2c2d1c3f5a29c3fd5527f200d0e424dcea08d78e38eb0fe0b34f48814045a68311f94947044da5c57f7c5884e85dee9804b583eb792ed33ede665dd67f356c36e779999488afce547d2c5aa336b9c6462c943801e44bda899cb11cf71ea129a5278020a13b6832b5c696b88f043719506a8281bc17d042fd60a09d868b29392cb7971c8103020000af038001eba10001ffffffff6c84a22f8966c26537bd98a4a8b2fee995fc0cf5806b76e0c853784b984d803b010000007b4c79a276a072a26ba067a565802103b0dabc5bfd2c2d1c3f5a29c3fd5527f200d0e424dcea08d78e38eb0fe0b34f488140d8e98c29303f5ad3aa8ff3b78c0c481ceb3de7370fa13f281e8ba73c7390bb467ad6e2d53a4c8b739d3ea49bd3e341e9fe685882fff5982bcfef3f353ff933d8a100af038001eba10001ffffffff060300000000000000302ea22c802091deb91c6e5dd0a149f5eb5a9abf38ac7e24a0725554b6d391c963c33793ba3a81031210008203000401cc1027000000000000302ea22c802085c9d33d54ccb32a73aa36804c8712c6700d309e27d0179618adaa2a1484ce198103120c008203000401cc1027000000000000302ea22c8020b28be6c1b45e274bd64245ab3bcfbaabd1971e81d06011af8bf379f5fda890bc8103120c008203000401cc010000000000000023210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57aac8038010000000000232103b0dabc5bfd2c2d1c3f5a29c3fd5527f200d0e424dcea08d78e38eb0fe0b34f48ac0000000000000000956a4c92eb506c84a22f8966c26537bd98a4a8b2fee995fc0cf5806b76e0c853784b984d803b2103b0dabc5bfd2c2d1c3f5a29c3fd5527f200d0e424dcea08d78e38eb0fe0b34f48210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57a030000000100000000000000e5c0edd925ed68b4532bc434e04323108a587d1c88572d94e1c9e49ba647b0b700000000
error code: -26
error message:
64: dust```


[10-Dec-18 06:25 AM] siu#3920
```01000000032cf0a8aa728938a7721afb2a9e36ddec7615162a92316295981d751b6bfe15270200000049483045022100d69b49fb888e9e5659c62d3972e6057349cf9ea323dddde92d568f474fdbb45002201d7db9b790030a03fdb88e517842825662c8af078365a6588776e25fe02e28f601ffffffff6c84a22f8966c26537bd98a4a8b2fee995fc0cf5806b76e0c853784b984d803b00000000a74ca5a281a1a0819ca28194a067a565802103b0dabc5bfd2c2d1c3f5a29c3fd5527f200d0e424dcea08d78e38eb0fe0b34f48814045a68311f94947044da5c57f7c5884e85dee9804b583eb792ed33ede665dd67f356c36e779999488afce547d2c5aa336b9c6462c943801e44bda899cb11cf71ea129a5278020a13b6832b5c696b88f043719506a8281bc17d042fd60a09d868b29392cb7971c8103020000af038001eba10001ffffffff6c84a22f8966c26537bd98a4a8b2fee995fc0cf5806b76e0c853784b984d803b010000007b4c79a276a072a26ba067a565802103b0dabc5bfd2c2d1c3f5a29c3fd5527f200d0e424dcea08d78e38eb0fe0b34f488140d8e98c29303f5ad3aa8ff3b78c0c481ceb3de7370fa13f281e8ba73c7390bb467ad6e2d53a4c8b739d3ea49bd3e341e9fe685882fff5982bcfef3f353ff933d8a100af038001eba10001ffffffff060300000000000000302ea22c802091deb91c6e5dd0a149f5eb5a9abf38ac7e24a0725554b6d391c963c33793ba3a81031210008203000401cc1027000000000000302ea22c802085c9d33d54ccb32a73aa36804c8712c6700d309e27d0179618adaa2a1484ce198103120c008203000401cc1027000000000000302ea22c8020b28be6c1b45e274bd64245ab3bcfbaabd1971e81d06011af8bf379f5fda890bc8103120c008203000401cc010000000000000023210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57aac8038010000000000232103b0dabc5bfd2c2d1c3f5a29c3fd5527f200d0e424dcea08d78e38eb0fe0b34f48ac0000000000000000956a4c92eb506c84a22f8966c26537bd98a4a8b2fee995fc0cf5806b76e0c853784b984d803b2103b0dabc5bfd2c2d1c3f5a29c3fd5527f200d0e424dcea08d78e38eb0fe0b34f48210276c6d1c65abc64c8559710b8aff4b9e33787072d3dda4ec9a47b30da0725f57a030000000100000000000000e5c0edd925ed68b4532bc434e04323108a587d1c88572d94e1c9e49ba647b0b700000000```


[10-Dec-18 06:25 AM] siu#3920
but `channelspayment` says im sending dust


[10-Dec-18 06:25 AM] Mihailo#5902
@siu Is there any output from the daemon?


[10-Dec-18 06:25 AM] siu#3920
nope


[10-Dec-18 06:25 AM] siu#3920
no output


[10-Dec-18 06:26 AM] siu#3920
COQUI repo is not in latest


[10-Dec-18 06:26 AM] siu#3920
though


[10-Dec-18 06:26 AM] siu#3920
im waiting for the sapling updates to be ready to then update my repo


[10-Dec-18 06:26 AM] Mihailo#5902
I'm not familiar with this error message. Let me se the repo, and can you give me channelsinfo?


[10-Dec-18 06:27 AM] siu#3920
```./coqui-cli channelsinfo 3b804d984b7853c8e0766b80f50cfc95e9feb2a8a498bd3765c266892fa2846c
{
  "result": "success",
  "name": "Channel RTWeBzkZupFpF58VA4FEpooeY44oWFKYww",
  "Open": "4 payments of 1 satoshi"
}```


[10-Dec-18 06:28 AM] Mihailo#5902
Hmmm, maybe the problem is that payment is 1 satoshi. This is way less than txfee. I think we should parse this on RPC to return error if payment value is less than txfee.


[10-Dec-18 06:28 AM] Mihailo#5902
But still it could be done by raw tx.


[10-Dec-18 07:15 AM] TonyL#3577
Yes, transactions < than txfee not work with channels as I remember


[10-Dec-18 08:02 AM] Alright#0419
@siu you can remove dust rule from daemon and mine your own blocks with those transactions


[10-Dec-18 08:02 AM] Alright#0419
it's not related to channels in particular, just a general rule


[10-Dec-18 08:04 AM] siu#3920
ok, understood, thanks.


[10-Dec-18 08:04 AM] siu#3920
i thought that channels purpose was to work with txs that are less than txfee


[10-Dec-18 08:04 AM] siu#3920
also i created a 1 satoshi payment channel as a mistake :p


[10-Dec-18 08:06 AM] Mihailo#5902
No, channel pupose is to have instant payments without a need for waiting for tx to be mined. And that is the top feature of channel üòâ


[10-Dec-18 08:22 AM] Mihailo#5902
Something seems wrong with broadcasting txs. I do not know is it TUI which I'm using or the client itself. So I used TUI for Gateway to create subscription utxos. They showed  in wallet but they only first were sent to mining node and was mined. From then they do not exist at all....
```
AddToWallet 7d6adb205a20c2c391c0a0c1c5dee77174087620a1b75b153d2631c74c8c815b  new
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  new
AddToWallet 15512413e5884c79a0b8c8afd4fc856de8dd0d96e92fc9a6ebf31f87088b4527  new
AddToWallet 7d6adb205a20c2c391c0a0c1c5dee77174087620a1b75b153d2631c74c8c815b  
AddToWallet 7d6adb205a20c2c391c0a0c1c5dee77174087620a1b75b153d2631c74c8c815b  
AddToWallet 7d6adb205a20c2c391c0a0c1c5dee77174087620a1b75b153d2631c74c8c815b  
UpdateTip: new best=00dc6e4854bf831393b7118119880fda9dafc98e939bd5ed49d2205e9707893b  height=109  log2_work=12.261507  log2_stake=-inf  tx=121  date=2018-12-10 16:13:02 progress=1.009259  cache=0.0MiB(116tx)
AddToWallet 7d6adb205a20c2c391c0a0c1c5dee77174087620a1b75b153d2631c74c8c815b  
AddToWallet 7d6adb205a20c2c391c0a0c1c5dee77174087620a1b75b153d2631c74c8c815b  
AddToWallet 7d6adb205a20c2c391c0a0c1c5dee77174087620a1b75b153d2631c74c8c815b  
AddToWallet 7d6adb205a20c2c391c0a0c1c5dee77174087620a1b75b153d2631c74c8c815b  
UpdateTip: new best=00facd4898e4ac0440e231a6760573f874008a8ad51d3a5beb9ae1de243260d3  height=110  log2_work=12.292609  log2_stake=-inf  tx=123  date=2018-12-10 16:13:16 progress=1.018519  cache=0.0MiB(118tx)
AddToWallet 7d6adb205a20c2c391c0a0c1c5dee77174087620a1b75b153d2631c74c8c815b  update
UpdateTip: new best=0017e9bdfbb6c15ea26552c50436e9ecbc8b5dffa7f4b75a35d444626f411119  height=111  log2_work=12.323899  log2_stake=-inf  tx=124  date=2018-12-10 16:13:24 progress=1.027778  cache=0.0MiB(119tx)
```
```
komodo-cli -ac_name=FSM getrawtransaction e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e 1
error code: -5
error message:
No information available about transaction
```


[10-Dec-18 08:23 AM] Mihailo#5902
This is on latest FSM


[10-Dec-18 08:26 AM] siu#3920
thanks... will test now with a larger output


[10-Dec-18 08:35 AM] Mihailo#5902
@jl777c It seems there is a problem in relaying tx. I have 4 nodes (1 mining) and they are all interconnected with each other. Now when I rebroadcasted e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e it is stays in that node mempool and one more, but it is not reaching mining node and it keeps trying to broadcast it...
```
UpdateTip: new best=00e4597552595bec2784df3a38bbad5fd5887e9ec781f0e96acaa86469491719  height=145  log2_work=13.327412  log2_stake=-inf  tx=158  date=2018-12-10 16:30:31 progress=1.006944  cache=0.0MiB(153tx)
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
UpdateTip: new best=00ef8461d279f2bc49119f27fa5f6f4990972aa6ef5acb51cc354f8a46c9c1e4  height=146  log2_work=13.354249  log2_stake=-inf  tx=159  date=2018-12-10 16:31:01 progress=1.013889  cache=0.0MiB(154tx)
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
UpdateTip: new best=00741345d5911099975d59b503df72660762ab5d0a49459c1bd10ebd0152eefd  height=147  log2_work=13.381137  log2_stake=-inf  tx=160  date=2018-12-10 16:33:17 progress=1.000000  cache=0.0MiB(155tx)
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
```


[10-Dec-18 08:35 AM] Mihailo#5902
I think @Alright mentioned it last Friday


[10-Dec-18 08:36 AM] jl777c#5810
does the mining node get the tx?


[10-Dec-18 08:36 AM] Mihailo#5902
No. And they are all on same code...


[10-Dec-18 08:36 AM] jl777c#5810
in bitcoin, the "broadcasting" is actually just sending it to 2 nodes


[10-Dec-18 08:36 AM] jl777c#5810
maybe we need to increase that to make it more practical


[10-Dec-18 08:37 AM] Mihailo#5902
In my case, only one node received it beside origin node. And all nodes have connections to each other node.


[10-Dec-18 08:37 AM] Mihailo#5902
So it should not be the problem in reaching nodes...


[10-Dec-18 08:38 AM] siu#3920
tried a new channel with bigger tx size


[10-Dec-18 08:39 AM] siu#3920
```CC Eval EVAL_CHANNELS Invalid: channelOpen is not yet confirmed(notarised)! spending tx 070c112d19cdd9846fbc887edc40484871d85eb6c9ac2c7aa1c59e7037be8a64
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[10-Dec-18 08:39 AM] Mihailo#5902
Just to remind you, there is a check if open is notarized/confirmed. So either the chain has notarization so you have to wait for open to be notarized, or if it does not have it then it is 101 confirms.


[10-Dec-18 08:39 AM] siu#3920
let me wait hehehe


[10-Dec-18 08:40 AM] Alright#0419
can test the notarization side of it on CFEK chains


[10-Dec-18 08:40 AM] Mihailo#5902
You can build the client with TESTMODE flasg but it then you must bring up your own chain


[10-Dec-18 08:41 AM] Mihailo#5902
@jl777c I noticed this now but still it did not reach mining node:
```
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
AddToWallet e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e  
UpdateTip: new best=00f38681d0e8c49d225d56fdb683b4f8b28f8a52fc90713e686ae14f162e6181  height=157  log2_work=13.636171  log2_stake=-inf  tx=170  date=2018-12-10 16:39:28 progress=1.000000  cache=0.0MiB(165tx)
Relaying wtx e1a6044960c321b8eebf0c4e2fd5c19bd7953f060980c3ef0d1fd8105a72302e
ResendWalletTransactions: rebroadcast 1 unconfirmed transactions
```


[10-Dec-18 08:42 AM] jl777c#5810
can you look into the sendrawtransaction logic in the networking code?


[10-Dec-18 08:43 AM] jl777c#5810
well i am not sure exactly the code path it takes


[10-Dec-18 08:43 AM] jl777c#5810
oh, what is the txfee you have for that tx?


[10-Dec-18 08:43 AM] Mihailo#5902
I have even made sendraw transaction on each node except the mining node, and they all have it in mempool but not on mining node.


[10-Dec-18 08:43 AM] jl777c#5810
if the txfee is too low, it might not get relayed


[10-Dec-18 08:43 AM] Mihailo#5902
Regular I think


[10-Dec-18 08:43 AM] Mihailo#5902
Let me check


[10-Dec-18 08:44 AM] Mihailo#5902
txfee: 10k sat


[10-Dec-18 08:45 AM] Mihailo#5902
It is oraclessubscribe


[10-Dec-18 08:46 AM] jl777c#5810
I just reverted some txfee and mempool changes to FSM. plz update and see if it still behaves this way


[10-Dec-18 08:57 AM] jl777c#5810
@Mihailo let me know if the updated FSM fixes the propagation. if not, i fear we need to dig into just how exactly a transaction is propagated in the bitcoin code


[10-Dec-18 08:59 AM] Mihailo#5902
@jl777c I'm just testing, but it may also be another thing. I just see now that I wass adding nodes with rpc prot and not p2p port. But I had correct number of nodes in each node. It must be that I added the mining node with correct port to all and then they exchanged nodes..


[10-Dec-18 09:00 AM] jl777c#5810
you should just addnode with ip address and not ports


[10-Dec-18 09:02 AM] Mihailo#5902
Ok, I had habbit of giving port number as my mining node is on idfferent port which I set with -port=


[10-Dec-18 09:09 AM] Mihailo#5902
@jl777c Now I broadcasted 3 oracle subscribe tx and all 3 reached mempool of mining node, but only one were mined and now mempool of mining node is empty. And 2 different nodes have other 2 txs


[10-Dec-18 09:09 AM] Mihailo#5902
Now another tx of 2 left showed up in mining node and gets mined.


[10-Dec-18 09:10 AM] Mihailo#5902
And that one that is left dissapeared from all mempools


[10-Dec-18 09:12 AM] TonyL#3577
@Mihailo is mempool became clear on other nodes as well?


[10-Dec-18 09:13 AM] Mihailo#5902
The one that is left is still in wallet of origin node, and I think it will try to rebroadcast it after a while


[10-Dec-18 09:13 AM] Mihailo#5902
@TonyL yes, now it did. When there were 2 left, 2 nodes had them and 3 nodes had empty mempool


[10-Dec-18 09:14 AM] TonyL#3577
I've faced similar problems in my tests, usually mining switching to the node which initiating transactions helps


[10-Dec-18 09:15 AM] TonyL#3577
As I think it's related to the network connectivity mostly


[10-Dec-18 09:15 AM] Mihailo#5902
Well, this was not behaving like this before...


[10-Dec-18 09:15 AM] TonyL#3577
If I left it for a very long time mempools syncing


[10-Dec-18 09:15 AM] Mihailo#5902
I had occasional problems, but not like this


[10-Dec-18 09:16 AM] TonyL#3577
Are you working on ms-gw atm?


[10-Dec-18 09:16 AM] jl777c#5810
are you using the updated version?


[10-Dec-18 09:17 AM] Mihailo#5902
And I had problems when all my nodes were connected to mining node, but they did not have opened ports so they could not connect to each other. Now I have 4  of 5 nodes that can connect to each other.


[10-Dec-18 09:17 AM] Mihailo#5902
@jl777c Yes, I'm using latest commits


[10-Dec-18 09:18 AM] TonyL#3577
For example I've used GCP nodes - they saw each other, were able to sync blocks


[10-Dec-18 09:18 AM] TonyL#3577
but weren't able to sync mempool before I've made custom network rules


[10-Dec-18 09:19 AM] Alright#0419
@siu


[10-Dec-18 09:20 AM] siu#3920
```Channel tx validated
Channel tx validated
58d7be93f34842cecc628dca0b636b1b62a70967e33ee24171fd6d807e7da19c
```


[10-Dec-18 09:20 AM] siu#3920
i guess it went through


[10-Dec-18 09:20 AM] TonyL#3577
@Mihailo I will go ahead with MS GW testing on latest FSM also


[10-Dec-18 09:20 AM] jl777c#5810
" they did not have opened ports" <- seems that was the problem?


[10-Dec-18 09:20 AM] Mihailo#5902
@jl777c I did sendrawtransaction of that one tx that did'nt mine and it reached only one node (not mining) for now.
And it starts printing:
```
UpdateTip: new best=009895e85dafb8def18917f1fee8d89e5ed603b7c5b2c214dd90516470671317  height=204  log2_work=14.494293  log2_stake=-inf  tx=222  date=2018-12-10 17:17:59 progress=1.004926  cache=0.0MiB(53tx)
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
UpdateTip: new best=00b6b058fba7e2a20c05e33f10b6b0d0b390bd36b13c6507cdb93f7673a7bcdf  height=205  log2_work=14.511197  log2_stake=-inf  tx=223  date=2018-12-10 17:18:28 progress=1.004902  cache=0.0MiB(54tx)
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
UpdateTip: new best=0089233745952bb2b60603747e164eb645499d6bdf026a0fa08149295d302e3b  height=206  log2_work=14.528393  log2_stake=-inf  tx=224  date=2018-12-10 17:18:53 progress=1.004878  cache=0.0MiB(55tx)
AddToWallet 65d062da03527ec6a42776eaa92ea373741a7a29ea7ef3ab5b6ded7411baf28b  
```


[10-Dec-18 09:20 AM] siu#3920
thanks! @Alright


[10-Dec-18 09:20 AM] TonyL#3577
To see if I can repeat such behaviour


[10-Dec-18 09:20 AM] jl777c#5810
so things are working better? well enough or still a problem?


[10-Dec-18 09:20 AM] Mihailo#5902
@jl777c No, that I wrote to TonyL that it was before. I have normal nodes few weeks now.


[10-Dec-18 09:21 AM] siu#3920
```channelsinfo 070c112d19cdd9846fbc887edc40484871d85eb6c9ac2c7aa1c59e7037be8a64
{
  "result": "success",
  "name": "Channel RTWeBzkZupFpF58VA4FEpooeY44oWFKYww",
  "Open": "4 payments of 1000000 satoshi",
  "Payment": "1000000 satoshi to RLF3sBrXAdofwDnS2114mkBMSBeJDd5Doy, 3 payments left"
}
```


[10-Dec-18 09:21 AM] Mihailo#5902
It is not working better. It reaches only one node and stays like that.


[10-Dec-18 09:21 AM] TonyL#3577
@Mihailo Do you have all ports spectrum which komodod using opened?


[10-Dec-18 09:22 AM] TonyL#3577
It's taking random ports between 60000-90000 for interconnecting


[10-Dec-18 09:22 AM] jl777c#5810
do normal payments get relayed?


[10-Dec-18 09:22 AM] TonyL#3577
As I've noticed


[10-Dec-18 09:22 AM] jl777c#5810
is this just CC tx having propagation problems or all tx


[10-Dec-18 09:22 AM] Mihailo#5902
On 3 nodes I haveo n VPS I think all prots are opened. And on my mining node I have only p2p port opened.


[10-Dec-18 09:22 AM] Mihailo#5902
I think that is enough?


[10-Dec-18 09:22 AM] Mihailo#5902
@jl777c Good question, let me try normal tx


[10-Dec-18 09:23 AM] TonyL#3577
Hmm, you might try to open all ports on mining node also, or temporary change mining node


[10-Dec-18 09:25 AM] Mihailo#5902
@jl777c It seems, all tx are having problem. Just made regular sendtoaddress tx and it did not reach any node...


[10-Dec-18 09:26 AM] jl777c#5810
@SHossain are we having problems broadcasting tx with latest version?


[10-Dec-18 09:27 AM] SHossain#0007
i didn't see issue. testing again


[10-Dec-18 09:34 AM] Mihailo#5902
Checked everything now. Deleted peers.dat from all nodes. Started daemons again. Every daemon has 4 connections, and there are 4 nodes started. Used sendtoaddress on node3 and it did not reach any node.


[10-Dec-18 09:36 AM] Mihailo#5902
@jl777c Now I rebroadcasted one tx that was stuck on node3 because the other one was dependant on it, and it seems to work now.


[10-Dec-18 09:39 AM] Mihailo#5902
Now I do not know, did the fix change anything or not...


[10-Dec-18 09:39 AM] SHossain#0007
i used `sendtoaddress` and it worked fine on KMD


[10-Dec-18 09:39 AM] SHossain#0007
compiled latest dev branch and used that


[10-Dec-18 09:41 AM] SHossain#0007
@jl777c ^^


[10-Dec-18 09:41 AM] jl777c#5810
it seems something about a small network


[10-Dec-18 09:41 AM] Mihailo#5902
It seems to work now.


[10-Dec-18 09:41 AM] Mihailo#5902
Should I try without revert?


[10-Dec-18 09:41 AM] TonyL#3577
@Mihailo Did you change something in mining node network rules?


[10-Dec-18 09:42 AM] jl777c#5810
yes, would be good to know if indeed that was the cause


[10-Dec-18 09:46 AM] Mihailo#5902
@TonyL No


[10-Dec-18 09:49 AM] Mihailo#5902
@jl777c It seems to be working ok without the fix too.


[10-Dec-18 09:49 AM] jl777c#5810
ok, then I say it is gremlins


[10-Dec-18 09:49 AM] Mihailo#5902
So this was probably some problem with my setup.


[10-Dec-18 09:53 AM] Mihailo#5902
Hmmm, on 2 nodes all three tx went through. But on 3rd node all three reached mining mempool, and when block was mined it was before mining node took them for minnig, so in for next block mining node took just one tx of 3, and other 2 dissapeared from mempool.


[10-Dec-18 09:54 AM] Mihailo#5902
That one is mined and those 2 are not mined still and only in wallet of 3rd node


[10-Dec-18 09:55 AM] Mihailo#5902
Correction, those 2 tx are on mempool of only one node (not the origin one). This is without the fix.


[10-Dec-18 09:58 AM] jl777c#5810
so the fix is good?


[10-Dec-18 09:59 AM] Mihailo#5902
Something phishy is going on, and I think that when oraclefeed starts feeding it will get to this point.


[10-Dec-18 09:59 AM] Mihailo#5902
Well, not sure. As without the fix I was able to get this issue, but do not know if it does not happen with the fix. Not sure what is exact way to reproduce


[10-Dec-18 10:13 AM] Mihailo#5902
@jl777c I was able to reproduce it with the fix too.


[10-Dec-18 10:13 AM] jl777c#5810
ok, seems maybe you need to dig into the peering code


[10-Dec-18 10:14 AM] Mihailo#5902
If they do not get mined while they are in mining mempool for the block when they were transmitted, then they disappear from mempool


[10-Dec-18 10:15 AM] jl777c#5810
but the original node should rebroadcast it


[10-Dec-18 10:15 AM] jl777c#5810
also if they are conflicting tx, it will indeeed get purged


[10-Dec-18 10:16 AM] Mihailo#5902
Well, I do not know when it will rebroadcast it. but I saw for 10-15 blocks it wasn't retransmitted.


[10-Dec-18 10:17 AM] Mihailo#5902
I think I noteced this with oraclefeed few weeks ago. But then I was chasing that bug with addressIndex and then after I never get to this. Maybe some earlier change influenced this. I have to dig deeper.


[10-Dec-18 10:17 AM] jl777c#5810
in main.cpp:     if ( ASSETCHAINS_CC != 0 ) // CC contracts might refer to transactions in the current block, from a CC spend within the same block and out of order
line 4678


[10-Dec-18 10:17 AM] jl777c#5810
it makes a copy of the mempool and makes sure they are all valid


[10-Dec-18 10:18 AM] jl777c#5810
then at 4675:         // here we add back all txs from the temp mempool to the main mempool.


[10-Dec-18 10:18 AM] jl777c#5810
they are added back in. you can check to see if that process is filtering out these missing tx


[10-Dec-18 10:18 AM] Mihailo#5902
Ok, I'll start from there first thing in the morning.


[12-Dec-18 04:20 AM] Mihailo#5902
It seems that it is a problem in that part of main.cpp.
```
!!!rem-52adbb148e0cd74d7e18ed4786ad4d6a15defeb71d787ca259e180f47181701f
!!!rem-ae668517d94949be3f8929bb78f2293a81cb764039467940c3a46f08c0c26e49
!!!rem-067fcd127b582f7a8eaf0f7df07ee7fd7ef42e857c2e84570032419d5bae697c
!!!readd-52adbb148e0cd74d7e18ed4786ad4d6a15defeb71d787ca259e180f47181701f
!!!invalid-52adbb148e0cd74d7e18ed4786ad4d6a15defeb71d787ca259e180f47181701f
!!!readd-ae668517d94949be3f8929bb78f2293a81cb764039467940c3a46f08c0c26e49
!!!invalid-ae668517d94949be3f8929bb78f2293a81cb764039467940c3a46f08c0c26e49
!!!readd-067fcd127b582f7a8eaf0f7df07ee7fd7ef42e857c2e84570032419d5bae697c
AddToWallet 067fcd127b582f7a8eaf0f7df07ee7fd7ef42e857c2e84570032419d5bae697c  
!!!rem-067fcd127b582f7a8eaf0f7df07ee7fd7ef42e857c2e84570032419d5bae697c
!!!readd-067fcd127b582f7a8eaf0f7df07ee7fd7ef42e857c2e84570032419d5bae697c
AddToWallet 067fcd127b582f7a8eaf0f7df07ee7fd7ef42e857c2e84570032419d5bae697c  
!!!rem-067fcd127b582f7a8eaf0f7df07ee7fd7ef42e857c2e84570032419d5bae697c
!!!readd-067fcd127b582f7a8eaf0f7df07ee7fd7ef42e857c2e84570032419d5bae697c
```
I made this print to see what is removed from mempool into tempmempool and then added back and which one do not pass AcceptToMemoryPool - invalid.


[12-Dec-18 04:20 AM] Mihailo#5902
So the first two seems to fail to get back to the pool


[12-Dec-18 06:42 AM] jl777c#5810
i guess the question is why it becomes invalid


[12-Dec-18 08:41 AM] Mihailo#5902
I localized it that it fails here:
```cpp
// do all inputs exist?
                // Note that this does not check for the presence of actual outputs (see the next check for that),
                // and only helps with filling in pfMissingInputs (to determine missing vs spent).
                BOOST_FOREACH(const CTxIn txin, tx.vin)
                {
                    if (!view.HaveCoins(txin.prevout.hash))
                    {
                        if (pfMissingInputs)
                            *pfMissingInputs = true;
                        //fprintf(stderr,"missing inputs\n");
                        //return state.DoS(0, error("AcceptToMemoryPool: tx inputs not found"),REJECT_INVALID, "bad-txns-inputs-missing");
                        return(false);
                    }
                }
```


[12-Dec-18 08:43 AM] Mihailo#5902
The thing that is strange is that it happens only on some txs and not all the time. So how come it cannot find inputs... I'm thinking that it is because I'm broadcasting 3 txs fast from TUI so the inputs used for 3rd could be the output from 2nd that does not exists yet, but I have not yet looked how this checks the outputs...


[12-Dec-18 08:44 AM] Mihailo#5902
I mean, this check is just checking if the tx refering an input exists, later it checks it the exact inputs exist (line 1740 - main.cpp)


[12-Dec-18 08:46 AM] Mihailo#5902
Ohhhh, it may be the order of adding the tx to mempool. In the beggining txs are removed from mempool (line 4678) and then they are pushed back to mempool (line 4765). Could be that at the moment the refering tx is not in the mempool so this cannot find it.


[12-Dec-18 08:50 AM] Mihailo#5902
`if ( ASSETCHAINS_CC != 0 ) // CC contracts might refer to transactions in the current block, from a CC spend within the same block and out of order` maybe this comment explain it üòõ


[12-Dec-18 08:50 AM] jl777c#5810
yes, adding back seems to need similar logic as above


[12-Dec-18 08:50 AM] Mihailo#5902
I'm just checking could this be in different order


[12-Dec-18 08:50 AM] jl777c#5810
it iterates adding the tx back and as long as 1 is added would continue


[12-Dec-18 08:51 AM] jl777c#5810
if none of them are accepted it would break out of the loop


[12-Dec-18 08:51 AM] jl777c#5810
yes, that is the issue


[12-Dec-18 08:51 AM] Mihailo#5902
üòé


[12-Dec-18 08:51 AM] jl777c#5810
i can fix this


[12-Dec-18 08:52 AM] jl777c#5810
unless u want 2


[12-Dec-18 08:52 AM] Mihailo#5902
No, you go for it. I'm interested what is the best fix üòâ


[12-Dec-18 08:53 AM] Mihailo#5902
I did the harder job, and will let you do the thing nobody wants to do üòÉ üòÇ


[12-Dec-18 08:54 AM] jl777c#5810
üòÉ


[12-Dec-18 08:55 AM] Mihailo#5902
Send me the commit just before you merge it, to review your work üòõ


[12-Dec-18 09:22 AM] jl777c#5810
https://github.com/jl777/komodo/pull/1062

{Embed}
https://github.com/jl777/komodo/pull/1062
fix CC mempool processing by jl777 ¬∑ Pull Request #1062 ¬∑ jl777/...
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[12-Dec-18 09:23 AM] jl777c#5810
let me know if it works. it is in jl777 branch


[12-Dec-18 09:37 AM] jl777c#5810
@Mihailo once you confirm it fixes the mempool problem, I will merge it


[12-Dec-18 09:38 AM] Mihailo#5902
@jl777c Just testing it


[12-Dec-18 09:39 AM] Mihailo#5902
@jl777c It seems to work nicely üëè


[12-Dec-18 09:44 AM] Mihailo#5902
BTW, I now understand this output `ERROR: AcceptToMemoryPool: tx inputs not found` but still I'm intrigued how is this printed as I cannot nowhere in code except one place where it is commented üòÆ


[12-Dec-18 09:59 AM] jl777c#5810
old version?


[12-Dec-18 10:19 AM] Mihailo#5902
Don't know for older but it prints now.


[12-Dec-18 10:23 AM] Mihailo#5902
But it works normal. It is probably printed when tx is broadcasted from other node and the broadcast is also not in the correct order. What I can understand is how it gets printed as there is nothing in the code...


[12-Dec-18 10:25 AM] jl777c#5810
maybe from a different coin daemon running the version with the printout?


[12-Dec-18 10:25 AM] jl777c#5810
oh, but it ends up in the logfile...


[12-Dec-18 10:26 AM] jl777c#5810
gremlins again?


[12-Dec-18 10:40 AM] Mihailo#5902
It looks like gremlins, but there must be some logical explaniation


[12-Dec-18 10:41 AM] jl777c#5810
it must be you are running a version with the printout in it


[12-Dec-18 10:46 AM] Mihailo#5902
I compiled jl777 branch, and ran it on all nodes. And I never uncommented this print...


[12-Dec-18 10:47 AM] jl777c#5810
what if you:
grep "tx inputs not found" komodod


[12-Dec-18 10:48 AM] jl777c#5810
is the string in the executable


[12-Dec-18 11:41 AM] Mihailo#5902
I'll check it out... i greped the whole src dir.


[12-Dec-18 12:17 PM] Mihailo#5902
Greped komodod on that node and it has that output. So I switched to jl777 branch but I did not do  git pull. As I said, there is some logical explanation üòâ


[12-Dec-18 08:00 PM] Deleted User#0000
I knew there was something wrong with that mempool fix... Looks like the solution is nice and simple at least.


[13-Dec-18 01:24 AM] jl777c#5810
@Mihailo so the version that confirms the mempool behavior was fixed wasnt the latest version?


[13-Dec-18 01:25 AM] Mihailo#5902
???


[13-Dec-18 01:26 AM] Mihailo#5902
No, that was only on one node. The fix is correct and works.


[13-Dec-18 01:35 AM] jl777c#5810
ok, just checking


[13-Dec-18 02:45 AM] Mylo#8306
Hi CC devs - who has the most experience with channelsCC from the command line?


[13-Dec-18 02:47 AM] Mylo#8306
I found channelsCC test plan.  I"ll work from that.  Thanks, and if ihave questions ask later.  Cheers


[13-Dec-18 03:00 AM] jl777c#5810 (pinned)
if anybody has a custom CC they want made, please make an issue here: https://github.com/Mixa84/To-Do/issues

{Embed}
https://github.com/Mixa84/To-Do/issues
Mixa84/To-Do
Contribute to Mixa84/To-Do development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/5PP5Rc1dp6Lo2v8nwnTvQmRdaXpEf9xjHeMr0XyppBs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/39563265


[13-Dec-18 03:15 AM] Mihailo#5902
@Mylo I made channels CC so I can help you with it.


[13-Dec-18 03:15 AM] Mylo#8306
thanks @Mihailo üëç


[13-Dec-18 03:29 AM] SHossain#0007
Pinned a message.


[13-Dec-18 03:55 AM] TonyL#3577
@Mihailo Making unit tests for ChannelsCC, seems `channelsrefund` is not work at the moment:
```error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```
Get this error on `channelsrefund` transaction broadcast


[13-Dec-18 03:55 AM] TonyL#3577
https://paste.ubuntu.com/p/kYHdDv864r/ here is a full flow


[13-Dec-18 03:56 AM] Mihailo#5902
@TonyL Have you waited for close to be confirmed?


[13-Dec-18 03:56 AM] Mihailo#5902
Can you give me daemon output also?


[13-Dec-18 03:58 AM] TonyL#3577
Oh, right. How many times it should be confirmed?


[13-Dec-18 03:59 AM] Mihailo#5902
If you did not complie iwth TESTMODE than 101, but when using TESTMODE then it is 2. If chain has notarization then after block is notarized.


[13-Dec-18 04:00 AM] Mihailo#5902
I made RPC call txnotarizedocnfirmed to test if tx is confirmed/notarized for CC purposes


[13-Dec-18 04:01 AM] TonyL#3577
Aha, it's a clue I think since I have default compiled daemons at the moment


[13-Dec-18 04:02 AM] TonyL#3577
Enabled daemon output, it's telling me about it yeah:
```CC Eval EVAL_CHANNELS Invalid: channelOpen is not yet confirmed(notarised)! spending tx b64d277f3f367a29cf98d7d11480dd3d82cdfe20f24daaac6c7b16500854886b
```
Thanks @Mihailo !


[13-Dec-18 04:03 AM] TonyL#3577
But I guess "channelClose" is not yet confirmed, not "channelOpen"
Or opening transaction have to be confirmed/notarised X times as well?


[13-Dec-18 04:03 AM] Mihailo#5902
What is the close txid


[13-Dec-18 04:06 AM] TonyL#3577
Oh, actually ```CC Eval EVAL_CHANNELS Invalid: channelOpen is not yet confirmed(notarised)! spending tx b64d277f3f367a29cf98d7d11480dd3d82cdfe20f24daaac6c7b16500854886b``` this printout I get in my tests on `channelspayment` tx broadcast
Sorry for things messing up, investigating


[13-Dec-18 04:06 AM] Mihailo#5902
Yep, so open must be confirmed before payment can be done. Also close must be confirmed before refund can be done.


[13-Dec-18 04:07 AM] TonyL#3577
Gotcha, will generate needed extra blocks


[13-Dec-18 04:10 AM] Mihailo#5902
You can use RPC txnotarizedocnfirmed for unit tests so that they do not go to next tx until previous is confirmed.


[13-Dec-18 04:23 AM] TonyL#3577
I have ```'confirmations': 2``` on channel opening transaction in tests but getting:
```CC Eval EVAL_CHANNELS Invalid: channelOpen is not yet confirmed(notarised)! spending tx a3bff136ee651c0abf8c84b88a01e58a9eab5b504c5759c3d62fe1e95533f88d
DEBUG:BitcoinRPC:<-- {"result":null,"error":{"code":-26,"message":"16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)"},"id":26}```
On normal chain I can send `channelpayment` right after `channelopen` transction mined
So it should be some specific thing for `regtest` mode. Will spin now `-regtest` chain outside of test framework to doublecheck it


[13-Dec-18 04:25 AM] Mihailo#5902
You shouldn't be able to send payment on either chains. There is a check in validation if open is confirme/notarized.


[13-Dec-18 04:27 AM] Mihailo#5902
Try with make clean and then build client:
```
export CONFIGURE_FLAGS='CPPFLAGS=-DTESTMODE'
./zcutil/build.sh -j8
```


[13-Dec-18 04:34 AM] TonyL#3577
Thanks @Mihailo it's work correct after I've rebuilt.
It was my brain-lag - just realised that on non test framework chain  I've opened channel yesterday - so channel opening transaction just have needed `101+` confirmations

{Reactions}
‚òπ üëç 

[14-Dec-18 04:18 AM] jl777c#5810
added a new CC to: https://github.com/Mixa84/To-Do/issues/6

{Embed}
https://github.com/Mixa84/To-Do/issues/6
coinbase CC ¬∑ Issue #6 ¬∑ Mixa84/To-Do
Initially this CC is specifically for MARMARA project for handling timelocked coinbase funds, which makes running a pool impractical. However, it could well be that we will extend it in the future ...
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[14-Dec-18 04:19 AM] jl777c#5810
it is a relatively simple one, but does require modifying block validation


[14-Dec-18 10:10 AM] TonyL#3577
https://github.com/jl777/komodo/pull/1077 @dukeleto @jl777c I've separated a little bit CC tests from "legacy" ones

{Embed}
https://github.com/jl777/komodo/pull/1077
Separated cryptoconditions tests execution by cc-test.sh  by tonym...
Cryptoconditions tests now executing by separate script cc-tests.sh as the first step/attempt to separate "legacy" tests without asset chain/crypto conditions logic needed from cryptocond...
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[14-Dec-18 10:11 AM] TonyL#3577
And now it's executing 6 times faster since 100 blocks pre-generates only once if you want to test all CCs - realised that it'll be a problem when CCs amount will grow. There is not beautiful logic now and order in which tests execute is matters (faucet have to be first because other way address will be not brand new, gateways tests create token and oracle so tokens and oracles list will be not empty - thats why gateways test should be after oracles and tokens tests and so on)


[14-Dec-18 10:48 AM] dukeleto#7326
@TonyL very nice work, i will take a look


[14-Dec-18 10:49 AM] dukeleto#7326
@TonyL nice commit message. I feel like some that should go into a README or docs somewhere. we dont' have good docs for how to run the test suite with various options right now


[14-Dec-18 10:49 AM] dukeleto#7326
it's not friendly to newcomers, we could change that with some developer docs


[14-Dec-18 10:50 AM] dukeleto#7326
in theory the tests should be isolated as much as possible, but in practice, we do the best we can


[14-Dec-18 10:50 AM] dukeleto#7326
i ran into the same issues, and had to order tests very particularly


[14-Dec-18 10:51 AM] dukeleto#7326
@TonyL i see you updated `qa/rpc-tests/README.md`, very nice


[14-Dec-18 10:52 AM] dukeleto#7326
our CC tests are really starting to evolve, nice to see


[14-Dec-18 11:28 AM] TonyL#3577
Thanks for a feedback @dukeleto ! Seems nobody else use these tests so far so I'm not sure what might be useful for newcomer in Readme besides the info which it already have - for me information in Readme was enough for start.
 I'm ready to improve it on any demand/feedback. 
Yup, our tests are growing üôå  Only issue I don't like now is that sometimes to stop komodods after tests finished I need to ```rm -rf /tmp/*
pkill komodod
``` 
But I think I've almost found how to resolve it (besides of execution of code above in .sh directly)))


[14-Dec-18 11:28 AM] DG#6934
I am starting to see CC now...a big ladder for what I see


[14-Dec-18 11:31 AM] TonyL#3577
@DG Feel free to ask the questions if you want to contribute into CCs tests automation

{Reactions}
‚úå 

[14-Dec-18 11:34 AM] TonyL#3577
CCs is a Huge concept. Banknotes-books... Gate to connect any economical model with blockchain


[14-Dec-18 11:34 AM] DG#6934
hehe good idea changing your name


[14-Dec-18 11:34 AM] TonyL#3577
Just saw @SHossain and repeated hahaha


[14-Dec-18 11:34 AM] TonyL#3577
So copyrights arent mine


[14-Dec-18 11:34 AM] SHossain#0007
We are **Sapling** ready üòÉ


[14-Dec-18 11:37 AM] DG#6934
now I am ready ! lol it reminded me of Matrix Reloaded...Agent Smith copying himself meme

{Reactions}
Komodo 

[14-Dec-18 11:39 AM] SHossain#0007
!kmdtip @TonyL 0.0777

{Reactions}
üöÄ 

[14-Dec-18 11:39 AM] KMD TipBot#0077

{Embed}
TipBot
@SHossain (SaplingHossain#8093)
You tipped @TonyL **0.0777 KMD**


[14-Dec-18 11:39 AM] SHossain#0007
!kmdtip @DG 0.0777

{Reactions}
‚úå 

[14-Dec-18 11:39 AM] KMD TipBot#0077

{Embed}
TipBot
@SHossain (SaplingHossain#8093)
You tipped @DG **0.0777 KMD**


[14-Dec-18 12:38 PM] dukeleto#7326
@TonyL that thing you notice, when you sometimes have to manually kill regtest daemons, that is somewhat expected


[14-Dec-18 12:39 PM] dukeleto#7326
if the test suite dies, in certain ways, sometimes regtest daemons do not get cleaned up properly. Exceptions in the test suite libraries themselves. Perhaps we can add more try/catch somewhere to fix this


[14-Dec-18 12:39 PM] dukeleto#7326
so even if you tell the test suite to clean up, sometimes it fails so hard it does not


[14-Dec-18 12:39 PM] dukeleto#7326
i see this regularly, when messing with test libraries themselves


[14-Dec-18 12:39 PM] dukeleto#7326
not when messing with test files


[14-Dec-18 12:40 PM] dukeleto#7326
we have a very ancient version of the python test suite for BTC, the most recent stuff in BTC core is much nicer


[14-Dec-18 12:40 PM] dukeleto#7326
ZEC does not have that stuff yet either


[14-Dec-18 12:40 PM] dukeleto#7326
for instance, latest BTC python test suite, you don't have to manually maintain a list of test files


[14-Dec-18 12:41 PM] dukeleto#7326
it will auto-recognize it if the file exists


[14-Dec-18 12:41 PM] dukeleto#7326
current implementation is .... ugly, imho. But that is what we inherited from btc 0.11


[14-Dec-18 12:43 PM] TonyL#3577
Yeah, python2 + dat .sh script with list seems like an old school )
In general daemons killing is ok as far as tests working correct


[14-Dec-18 12:44 PM] TonyL#3577
In general I can make super leightweight tests framework for CC only from 1-2 files I think


[14-Dec-18 12:45 PM] dukeleto#7326
i think we do need to have a CryptoConditionsTest class that multiple files can inherit from


[14-Dec-18 12:45 PM] dukeleto#7326
then the code in each file will be only a few lines


[14-Dec-18 12:45 PM] dukeleto#7326
where as right now, there is a lot of duplication between cc test files, for simplicity


[14-Dec-18 12:45 PM] TonyL#3577
Yes, definetly


[14-Dec-18 12:45 PM] dukeleto#7326
now that we have a few cc test files, i think we are at that point


[14-Dec-18 12:45 PM] dukeleto#7326
to make a class, and all those files inherit from that. You will see this pattern throughout the test suite


[14-Dec-18 12:46 PM] TonyL#3577
`setup_chain` `setup_network` `run_test` `send_and_mine` are duplicating all over the CC tests, so possible to move it to common class and inherit then


[14-Dec-18 12:48 PM] dukeleto#7326
yes, the pattern emerges once a few test files are written


[14-Dec-18 12:50 PM] TonyL#3577
Great, was in my todo list actually üëç Will make this class and adjust existing CC tests


[14-Dec-18 12:51 PM] TonyL#3577
While there are not a hundreds of CCs yet - things are still under control üòÇ


[14-Dec-18 12:52 PM] dukeleto#7326
yes, it's the perfect time to refactor, when there are a handful of things. it's not fun when you have to update 100 things


[14-Dec-18 01:26 PM] TonyL#3577
https://github.com/tonymorony/komodo/commit/69a3c6836505a7c68bcf2a9602cb0bcdaa523340 10 minutes = -400 lines of code, OOP is cool paradigm üòÇ

{Embed}
https://github.com/tonymorony/komodo/commit/69a3c6836505a7c68bcf2a9602cb0bcdaa523340
small CC tests refactor ¬∑ tonymorony/komodo@69a3c68
https://images-ext-1.discordapp.net/external/_FZ-6atALXBjBvMLVC1JBeWG05jXc2w_TXrppH7V6kE/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/24797699


[14-Dec-18 03:12 PM] dukeleto#7326
@TonyL yeah, that is awesome. All that duplication goes away, massive code reduction

{Reactions}
üëç 

[14-Dec-18 03:25 PM] TonyL#3577
Oh @dukeleto btw: https://github.com/zcash/zcash/issues/3713 + https://github.com/zcash/zcash/issues/3730
Seems it's a clue why non CCs tests don't like sapling update. At least I see regtest mode, tests and sapling in same sentence üòÉ

{Embed}
https://github.com/zcash/zcash/issues/3713
Regtest mode & tests for Sapling ¬∑ Issue #3713 ¬∑ zcash/zcash
I admit this is in part a question/wish and might not be treated as a potentially actionable issue worth tracking by the Zcash project. If so, please feel free to close this issue. Right now, regte...
https://images-ext-1.discordapp.net/external/rri_xs4SDM55TfxuQ0VudizTD8srsx7_0p3_BljhYtg/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/18089797

{Embed}
https://github.com/zcash/zcash/issues/3730
It should be possible to activate Sapling from the genesis block ...
In #3713, @solardiz wrote: Meanwhile, I found out that activating Sapling with ALWAYS_ACTIVE did have ill effects on testnet in a Zcash fork: trying to restart the node (that already has a chain) f...
https://images-ext-2.discordapp.net/external/s7YMeA0sN51ICaO7YxA42mCPc9zz3v7ybfV1bUxakc4/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/643204


[14-Dec-18 04:55 PM] dukeleto#7326
@TonyL yes, i have been following those issues, they look relevant


[15-Dec-18 10:33 AM] dukeleto#7326
@jl777c https://github.com/jl777/komodo/pull/1085

{Embed}
https://github.com/jl777/komodo/pull/1085
Add makefile and readme for CC dapps by leto ¬∑ Pull Request #1085...
I didn't see the makedapps script until after writing this Makefile
Features:

Only compile dapps that have changed
Recognized $CC environment variable to easily choose compiler
make clean

The...
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[15-Dec-18 10:34 AM] dukeleto#7326
I was interested to learn how zmigrate worked, so I played around a bit. I hope the README makes it easier for people to understand how it works, and the Makefile should make it easier as we add many more dApps, which seem to be on the horizen. Just a bit of icing to add to the cake that James has already baked


[15-Dec-18 10:35 AM] dukeleto#7326
you can see readme on github here: https://github.com/letolabs/komodo/blob/dev/src/cc/dapps/README.md

{Embed}
https://github.com/letolabs/komodo/blob/dev/src/cc/dapps/README.md
letolabs/komodo
Komodo. Contribute to letolabs/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/STidbfwli6qkMkU8vATD46L8ib5zmeVb7WDB5OpJ4KU/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/648647

{Reactions}
üí™ 

[18-Dec-18 02:45 AM] Adli#5025
Hi guys, is there a planned channel for the token CC ?


[18-Dec-18 02:46 AM] Adli#5025
Or are there more informations than the official doc : https://docs.komodoplatform.com/cc/contracts/tokens/rpc-index.html


[18-Dec-18 02:48 AM] Adli#5025
Or is there an existing project that us this CC


[18-Dec-18 02:49 AM] jl777c#5810
#cc-assets

{Reactions}
üëç 

[18-Dec-18 02:50 AM] Adli#5025
Thanks a lot, sorry for disturbing !


[18-Dec-18 05:26 AM] Mylo#8306
@dukeleto thanks for readme.  I think zmigrate can accept an ac_name, but I‚Äôm only going on what @SHossain has written about here https://techloverhd.com/2018/12/full-speed-ahead-the-first-sapling-specific-privacy-chain-is-here/

{Embed}
https://techloverhd.com/2018/12/full-speed-ahead-the-first-sapling-specific-privacy-chain-is-here/
Full Speed Ahead - The First Sapling Specific Privacy Chain is Her...
Pirate (ARRR)is an independent block chain based on Zcash‚Äôs zk-SNARK (zero knowledge proof) tech and created using Komodo Platform. Pirate is a forced Z transaction coin. No transparent transactions are possible apart from Komodo‚Äôs Notary Nodes. Notary Nodes have hard-cod...
https://images-ext-2.discordapp.net/external/qetL3mKgFytuFYYIs4GHvUaCpj_m_Bq6yr148Vxd9jk/https/techloverhd.com/wp-content/uploads/2018/12/PIRATE_ship_on_sea_with_logo.jpg


[18-Dec-18 06:07 AM] jl777c#5810
./zmigrate PIRATE sapling


[18-Dec-18 06:07 AM] jl777c#5810
yes the name is the first parameter


[18-Dec-18 07:43 AM] dukeleto#7326
@Mylo you are right, i missed that in my README


[18-Dec-18 07:44 AM] dukeleto#7326
and I see it's fixed already üòÉ

{Reactions}
ü§ô 

[19-Dec-18 01:25 AM] Deleted User#0000
@Mihailo  I am seeing a huge slow down of CC transactions on chain sync after the spaling activation block. Any idea on what could cause it?


[19-Dec-18 01:25 AM] Mihailo#5902
Hmmm, in what whay is the slow down?


[19-Dec-18 01:25 AM] Deleted User#0000
apears to hang the daemon


[19-Dec-18 01:25 AM] Deleted User#0000
like its locked


[19-Dec-18 01:25 AM] Mihailo#5902
Which CC?


[19-Dec-18 01:26 AM] Deleted User#0000
and pins a CPU core to 100%


[19-Dec-18 01:26 AM] Deleted User#0000
oracles


[19-Dec-18 01:26 AM] Deleted User#0000
at least those are the txs on this chain


[19-Dec-18 01:26 AM] Deleted User#0000
large numbers in a block seems to do it


[19-Dec-18 01:26 AM] Mihailo#5902
We had some problem with oralces, and it was behaving like this (hanging the daemon) but it was fixed.


[19-Dec-18 01:26 AM] Deleted User#0000
hmm I am equal with FSM


[19-Dec-18 01:26 AM] Mihailo#5902
On which version is the client?


[19-Dec-18 01:26 AM] Mihailo#5902
Ok


[19-Dec-18 01:26 AM] Deleted User#0000
Guess you need more data


[19-Dec-18 01:26 AM] Mihailo#5902
Yep


[19-Dec-18 01:27 AM] Deleted User#0000
no worries... dint want to investingate a known problem


[19-Dec-18 01:27 AM] Mihailo#5902
Can you tell me which chain, and I could connect and try to investigate


[19-Dec-18 01:27 AM] Deleted User#0000
its on CFEK KMD labs


[19-Dec-18 01:27 AM] Deleted User#0000
https://github.com/StakedChain/komodo.git

{Embed}
https://github.com/StakedChain/komodo.git
StakedChain/komodo
Komodo. Contribute to StakedChain/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[19-Dec-18 01:27 AM] Deleted User#0000
master branch


[19-Dec-18 01:28 AM] Deleted User#0000
`-addnode=195.201.137.5 -addnode=195.201.20.230 -addnode=103.6.12.112 -ac_supply=100000 -ac_staked=51 -ac_name=CFEK -ac_reward=10000000000000 -ac_cc=102`


[19-Dec-18 01:28 AM] Deleted User#0000
around block 65,000


[19-Dec-18 01:28 AM] Mihailo#5902
And is the hanging only on nodes which post oracle data?


[19-Dec-18 01:28 AM] Deleted User#0000
its hangs on chain sync


[19-Dec-18 01:28 AM] Deleted User#0000
any block with large amoutns of transactions


[19-Dec-18 01:29 AM] Deleted User#0000
only cc transaction


[19-Dec-18 01:29 AM] Deleted User#0000
I tersted a ful block of normal tx and ti was ok


[19-Dec-18 01:29 AM] Deleted User#0000
does not happen before sapling actiuvation block


[19-Dec-18 01:29 AM] Mihailo#5902
Oh, ok.


[19-Dec-18 01:30 AM] Deleted User#0000
you need labs branch to sync chain, because its has import txs on it and requires the correct pubkeys to verify them,


[19-Dec-18 01:31 AM] Mihailo#5902
And what is the exact name of the branch?


[19-Dec-18 01:43 AM] Deleted User#0000
just use master branch its equal with FSM apart from changes to allow a diffrent set of notary nodes and some changes to the staking loop that are yet to me merged down.


[19-Dec-18 01:44 AM] Mihailo#5902
Ok, you confused me with 'you need labs branch' üòâ


[19-Dec-18 01:48 AM] Deleted User#0000
ahh sorry yeah... labs fork (which is actually called staked üòÇ )


[19-Dec-18 01:54 AM] Deleted User#0000
Just synced CFEK on the latest and it seems to be a bit faster than it was, like it no longer hangs for over a minute on some blocks.


[19-Dec-18 01:54 AM] Deleted User#0000
Still slows down a heap over earlier blocks though.


[19-Dec-18 01:55 AM] Deleted User#0000
Not sure if there are that amount of oracels txs in any blocks before sapling... tehre are oracles txs, but not that many of them. DragonHound went into an infinate loop spamming oracles txs


[19-Dec-18 02:04 AM] Mihailo#5902
Ok, so the daemon is not hanging indefinitely, it just slows down... Could it be that spam of oracles txs that is causing this?


[19-Dec-18 02:08 AM] Mihailo#5902
I've started syncing now, let see...


[19-Dec-18 02:46 AM] Mihailo#5902
I see the slow down. But can't seem to figure out why. The number of txs is not huge, so I have see where it is spending lot of time when syncing. Probably in blcok/tx validation


[19-Dec-18 02:53 AM] jl777c#5810
in the dependency loop in main.cpp, the code was changed a bit recently.


[19-Dec-18 03:06 AM] Deleted User#0000
I managed to speed it up quite a lot, but its still very slow, maybe its the actual mempool fix, would it be OK, if we add the txs to the mempool without a addtomempool check? If that indeed its this loop causing it?


[19-Dec-18 03:07 AM] Deleted User#0000
Because I think its OK to assume that the txs in a confirmed mined block are indeed valid


[19-Dec-18 03:14 AM] jl777c#5810
yes, that seems fine


[19-Dec-18 03:14 AM] Deleted User#0000
Its worth a test at least


[19-Dec-18 08:21 PM] Deleted User#0000
doesnt work or speed it up


[19-Dec-18 08:21 PM] Deleted User#0000
üò¶


[19-Dec-18 08:21 PM] Deleted User#0000
mempool ends up full of txs with spent inputs


[19-Dec-18 08:21 PM] Deleted User#0000
and those blocks took just as long to validate


[19-Dec-18 10:42 PM] Deleted User#0000
I think i've identified the issue


[19-Dec-18 10:42 PM] Deleted User#0000
Its when it adds to the mempool...


[19-Dec-18 10:43 PM] Deleted User#0000
Its being done 3-4 times for every block, and each time it happens it takes longer.


[19-Dec-18 10:43 PM] Deleted User#0000
You can make it so that it only checks the transactions when it checks PoW ... but then debug.log floods with:
```2018-12-20 06:13:43 ERROR: myGetTransaction: Deserialize or I/O error - Unknown transaction format: iostream error
2018-12-20 06:13:43 ERROR: myGetTransaction: Deserialize or I/O error - ReadCompactSize(): size too large: iostream error
```


[19-Dec-18 10:43 PM] Deleted User#0000
it still syncs and its much faster ... but that error spams like crazy


[19-Dec-18 10:44 PM] Deleted User#0000
Need some way to flag it inside CheckBlock, so that it only trys to add the txs in once.


[19-Dec-18 10:45 PM] Deleted User#0000
Because once it has done it once, they are all already in the mempool, and it will loop almsot infinatly until they are all rejected.


[19-Dec-18 11:09 PM] Deleted User#0000
going to try a fresh sync fomr block 0, just incaser something here is corrupted


[19-Dec-18 11:49 PM] Deleted User#0000
that seemed to work, trying something else now. Using the flag I used to stop it spamming accept to mempool prints, I am trying to skip all the checks for inputs and just force the txs into the mempool out of order. doing this by  just useing addUnchecked didnt work, but skipping only tx validation and doing the rest of the checks it might actually work.


[20-Dec-18 12:11 AM] Deleted User#0000
looks good so far üòÑ


[20-Dec-18 12:15 AM] Deleted User#0000
Will need to sync KMDICE next to verify that its still working properly... But its now only doing this mempool thing once per block, and it manages to add everything to the mempool in one loop.


[20-Dec-18 12:15 AM] Deleted User#0000
some large blocks on CFEK were takign 28 seconds to add to mempool before.


[20-Dec-18 12:21 AM] Deleted User#0000
now they take 0s


[20-Dec-18 12:25 AM] Deleted User#0000
Definalty stll a slow down here though.


[20-Dec-18 12:40 AM] Deleted User#0000
Need to somehow disable the receiving of transactions and proagating of mempool until the chain is synced...


[20-Dec-18 01:50 AM] jl777c#5810
also the segid fix


[20-Dec-18 01:53 AM] Deleted User#0000
will make PR with all of them at once... I cant seem to work out how to disable propagation of txs while IsInitailBlockDownlaod is true... I managed to stop the mempool receiving txns, because that made it slow down a lot, receiving txs before sapling was active on local node. But syncing KMDICE I have 45mbit upload bandwidth maxed out the whole time. and the nodes I am downlaoding off will be flat out rejecting all that data.


[20-Dec-18 01:56 AM] jl777c#5810
propagation is somewhere in the message processing, i think end of main.cpp


[20-Dec-18 01:56 AM] Deleted User#0000
I found where it does it


[20-Dec-18 01:56 AM] Deleted User#0000
but my code didnt do anything


[20-Dec-18 01:57 AM] Deleted User#0000
```if (inv.type == MSG_TX && IsInitialBlockDownload()) // dont send txs when syncing, it floods other nodes.
                {
                    fprintf(stderr, "skipped sending tx.\n");
                    continue;
                }```


[20-Dec-18 01:57 AM] Deleted User#0000
doesnt work


[20-Dec-18 02:57 AM] jl777c#5810
there would be other places that do the trickling out, look for outbound messages


[20-Dec-18 03:01 AM] Deleted User#0000
this one is very tricky... fast running out of ideas. tried about 10 palces so far to stop it sending.. without any luck. Might be best to try and make it print the data its sending somewher in net.cpp and then working abck from that. I have holidays from tomorrow so If i cant figure this out tonigh I will make PR with the rest before I leave.


[20-Dec-18 03:07 AM] jl777c#5810
yes, that is a good plan.


[20-Dec-18 03:07 AM] jl777c#5810
maybe do it sooner than later as the mempools transmission will definitely take a long time to track down

{Reactions}
üëå 

[20-Dec-18 06:00 AM] Fab√ò#8941
Hello,
As we all know CC are opening  up a lot of possibilities, so does a stable coin on Komodo.
If you are developing a market place, a P2P transaction system or platform that require some kind of price stability, we will be happy to chat with you
We are aiming to develop as much use cases as possible for KSB


[20-Dec-18 06:01 AM] Fab√ò#8941
Don't hesitate to DM me


[20-Dec-18 06:38 AM] Deleted User#0000
https://github.com/jl777/komodo/pull/1119/files

{Embed}
https://github.com/jl777/komodo/pull/1119/files
Fix mempool and staker by blackjok3rtt ¬∑ Pull Request #1119 ¬∑ jl...
This is doing 2 things:
Mempool fix in main.cpp.
It now only checks all transactions and puts them into the mempool once using the fCheckPow flag, which is only called once on each block.
The accep...
https://images-ext-2.discordapp.net/external/H9TDr69kM7mmxGBcENY3FInyORgkC6up-3NZ7sRUihU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/30971146


[20-Dec-18 06:40 AM] jl777c#5810
how sure are you this is 100% safe?


[20-Dec-18 06:44 AM] Deleted User#0000
It appears to be .. I know 100% sure that it checks everything at least once.


[20-Dec-18 06:45 AM] Deleted User#0000
it adds all the txs to the mempool on block receive, but assumes the inputs are fine. A confirmed block has already checked all that.


[20-Dec-18 06:45 AM] Deleted User#0000
staker changes, are syncing DION fine, and works perfectly on CFEK


[20-Dec-18 06:46 AM] Deleted User#0000
Likely want to get @Alright  to test it on MGNX though to make 100% sure.


[20-Dec-18 06:46 AM] Deleted User#0000
or @ComputerGenie


[20-Dec-18 06:55 AM] jorian#4555
`I know 100% sure` the mother of all 'oh shits'


[20-Dec-18 06:55 AM] jorian#4555
or as james likes to say: oops


[20-Dec-18 07:02 AM] Deleted User#0000
it is about 100x faster, so maybe its not safe but I am quite sure that its, checking things 2-3 times doesnt seem to make a lot of sense, if it passes the first time it will pass the second time.


[20-Dec-18 07:02 AM] jl777c#5810
unless it doesnt due to bugs üòÉ

{Reactions}
üòÇ 

[20-Dec-18 07:03 AM] jl777c#5810
i guess the danger is if it passes when it shouldnt that one time it is checked...


[20-Dec-18 07:04 AM] Deleted User#0000
every transaction passes the mempoolhceck to be added at least once, except if a block is received with a transaction that is not in the local mempool, in this case it is added without being checked as the block validation checks all the transactions have inputs already.


[20-Dec-18 07:05 AM] Deleted User#0000
but someone should try to break it


[20-Dec-18 07:07 AM] Deleted User#0000
I am more confident of th changes to the staker, those are definatly safe as no consensus things are change there.


[20-Dec-18 09:30 AM] ComputerGenie#7004
```diff
-    
+
```
I love these üôÑ

{Reactions}
abusedsmily 

[20-Dec-18 09:56 AM] dukeleto#7326
@Deleted User you sure do like whitespace changes üòÉ

{Reactions}
üòÜ 

[20-Dec-18 05:26 PM] Deleted User#0000
its the atmo text editor I dont know how to turn that shit off


[20-Dec-18 05:30 PM] Deleted User#0000
@ComputerGenie  What exactly is wrong wqith CFEK ? I am leaving to go away and wont really bve avalible for a fair while.. around for a few hours to fix anything that might be broken.


[20-Dec-18 10:03 PM] dukeleto#7326
@Deleted User i have never used that editor, but it's probably called something like "strip trailing whitespace"


[20-Dec-18 10:05 PM] dukeleto#7326
also, you can append `?w=1` to ignore whitespace in diffs in Github: https://github.com/jl777/komodo/pull/1119/files?w=1

{Embed}
https://github.com/jl777/komodo/pull/1119/files?w=1
Fix mempool and staker by blackjok3rtt ¬∑ Pull Request #1119 ¬∑ jl...
This is doing 2 things:
Mempool fix in main.cpp.
It now only checks all transactions and puts them into the mempool once using the fCheckPow flag, which is only called once on each block.
The accep...
https://images-ext-2.discordapp.net/external/H9TDr69kM7mmxGBcENY3FInyORgkC6up-3NZ7sRUihU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/30971146

{Reactions}
üëç 

[20-Dec-18 10:05 PM] dukeleto#7326
equivalent to ```     -w, --ignore-all-space
           Ignore whitespace when comparing lines. This ignores differences even if one line has whitespace where the other line has none.
```


[22-Dec-18 09:58 AM] TonyL#3577
@Mihailo Seems I've faced bug in ChannelsCC: https://paste.ubuntu.com/p/hc7zQxtp8w/
When sending payment which covers channel capacity fully throwing an error: ```CC Eval EVAL_CHANNELS Invalid: vout.0 is CC for channelPayment! spending tx 1c05abb9e5c892c8bd2e8dee9f35f27e6ddc7fc4d61e6f94b455a0c84ac75247
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)```

So let's say if open a channel of 10 payments max with 100000 sat denomination you'll able to send 9 payments of 100000 sat but will get an error on 10th

Or send 100000, 800000 and get an error when sending last 100000 and so on


[22-Dec-18 10:00 AM] Mihailo#5902
Ok, will take a look as soon as I'm back (I'll get back on Tuseday)

{Reactions}
üëç 

[22-Dec-18 10:03 AM] TonyL#3577
@Mihailo I'll left it as an issue to your to-do list just to not forget about this edge case


[22-Dec-18 10:03 AM] Mihailo#5902
Great, thnx!

{Reactions}
üëç 

[25-Dec-18 03:01 AM] Mihailo#5902
@TonyL I'm trying to reproduce the bug, but I don't seem to be able. I've opened the channel with 3 payments of 100k sat and then made 1 payment 100k, and then made another payment of 200k sat and that is total amount. Everything went through.


[25-Dec-18 03:03 AM] Mihailo#5902
Even tried your example, 100000-800000-100000


[25-Dec-18 04:35 AM] TonyL#3577
@Mihailo Hmm strange, still reproducible on my side. Are you trying to broadcast this last transaction? (I'm getting error on broadcasting)


[25-Dec-18 04:35 AM] Mihailo#5902
Yes, I broadcasted it.


[25-Dec-18 04:36 AM] Mihailo#5902
So I'm left with a channel that has 0 payments left.


[25-Dec-18 04:36 AM] TonyL#3577
```./komodo-cli -ac_name=TONY7 channelsinfo 2115322e9b5ace609b1bdd42311642d71b30d21f8efcc77ff63a5d48eb487ddb
{
  "result": "success",
  "Channel CC address": "RMujp22fhF3CQh9Nz375VFNWNfdqSLKsQS",
  "Destination address": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
  "Number of payments": 5,
  "Denomination": 1000000,
  "Amount": "5000000 satoshi",
  "Transactions": [
    {
      "Open": "2115322e9b5ace609b1bdd42311642d71b30d21f8efcc77ff63a5d48eb487ddb"
    },
    {
      "Payment": "f72175537f1452a862d8c7a7e72182ce8fb945e6350d37ca7664e9c0c7d6b8b7",
      "Number": 1,
      "Amount": 1000000,
      "Destination": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
      "Secret": "6b17d06d26b36f955d5b079aaf78f7d7c8d6d47b8710cc4b6227bd3ab623e5aa"
    },
    {
      "Payment": "5286e0bfa0c9b2647cf4b5ecc5faccaede556c9cb2c56bc3b065adcbe8fabcd2",
      "Number": 1,
      "Amount": 1000000,
      "Destination": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
      "Secret": "0c43345b1fa1e00888f3c11f3ac6eee32006ecd2fc6b79fe5c2949ddd1706f28"
    },
    {
      "Payment": "785d0f776226a2a648469dd50db7d52801b6a3a2c8665b1bb6b1ee20a3695579",
      "Number": 1,
      "Amount": 1000000,
      "Destination": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
      "Secret": "f8d80ddbefe91d445da3a31c863a6b5078057937d4118980693b5b05c7798ccf"
    },
    {
      "Payment": "1c05abb9e5c892c8bd2e8dee9f35f27e6ddc7fc4d61e6f94b455a0c84ac75247",
      "Number": 1,
      "Amount": 1000000,
      "Destination": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
      "Secret": "033d7b6573cc4326d07de6350e51e7dc85d5da2c086501dd2793749c5a0fcfe8"
    }
  ]
}
```


[25-Dec-18 04:36 AM] TonyL#3577
```./komodo-cli -ac_name=TONY7 channelspayment 2115322e9b5ace609b1bdd42311642d71b30d21f8efcc77ff63a5d48eb487ddb 1000000
{
  "result": "success",
  "hex": "hex"
}
```


[25-Dec-18 04:37 AM] TonyL#3577
```./komodo-cli -ac_name=TONY7 sendrawtransaction hex ^^
CC Eval EVAL_CHANNELS Invalid: vout.0 is CC for channelPayment! spending tx 1c05abb9e5c892c8bd2e8dee9f35f27e6ddc7fc4d61e6f94b455a0c84ac75247
error code: -26
error message:
16: mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)
```


[25-Dec-18 04:37 AM] TonyL#3577
And have same for all channels which creating


[25-Dec-18 04:38 AM] Mihailo#5902
Hmmm, it seems I was working on older channels... But strange as I tried latest FSM....


[25-Dec-18 04:38 AM] Mihailo#5902
I'll check it again!


[25-Dec-18 04:38 AM] TonyL#3577
```git log -1
commit 8ee384869f70c62160564fa5b6178b53e776ddaa (HEAD -> FSM, origin/FSM)
Merge: e89d25e4a 5bcdcf0a7
Author: jl777 <jl777@users.noreply.github.com>
Date:   Thu Dec 20 03:46:09 2018 -1100

    Merge pull request #1119 from blackjok3rtt/FSM
    
    Fix mempool and staker```


[25-Dec-18 04:38 AM] TonyL#3577
I'm on this commit


[25-Dec-18 04:39 AM] TonyL#3577
Yeah, next time will include to report repo/branch/commit - my bad


[25-Dec-18 04:42 AM] Mihailo#5902
No problem, it seems I didn't complie the client when switched to FSM üò≤

{Reactions}
üëç 

[25-Dec-18 07:20 AM] Mihailo#5902
@TonyL figured out what is the problem with channels.

{Reactions}
üëå 

[26-Dec-18 01:31 AM] Mihailo#5902
@TonyL The fix for channels is merged in latest FSM üòâ


[26-Dec-18 02:18 AM] TonyL#3577
@Mihailo Great! Let me check on my side


[26-Dec-18 02:25 AM] TonyL#3577
@Mihailo last payment worked smooth on my side this time
`"Payments left": 0` This new param is very useful btw


[26-Dec-18 02:25 AM] TonyL#3577
```    {
      "Payment": "f72175537f1452a862d8c7a7e72182ce8fb945e6350d37ca7664e9c0c7d6b8b7",
      "Number of payments": 1,
      "Amount": 1000000,
      "Destination": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
      "Secret": "6b17d06d26b36f955d5b079aaf78f7d7c8d6d47b8710cc4b6227bd3ab623e5aa",
      "Payments left": 4
    },
    {
      "Payment": "5286e0bfa0c9b2647cf4b5ecc5faccaede556c9cb2c56bc3b065adcbe8fabcd2",
      "Number of payments": 1,
      "Amount": 1000000,
      "Destination": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
      "Secret": "0c43345b1fa1e00888f3c11f3ac6eee32006ecd2fc6b79fe5c2949ddd1706f28",
      "Payments left": 3
    },
    {
      "Payment": "785d0f776226a2a648469dd50db7d52801b6a3a2c8665b1bb6b1ee20a3695579",
      "Number of payments": 1,
      "Amount": 1000000,
      "Destination": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
      "Secret": "f8d80ddbefe91d445da3a31c863a6b5078057937d4118980693b5b05c7798ccf",
      "Payments left": 2
    },
    {
      "Payment": "1c05abb9e5c892c8bd2e8dee9f35f27e6ddc7fc4d61e6f94b455a0c84ac75247",
      "Number of payments": 1,
      "Amount": 1000000,
      "Destination": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
      "Secret": "033d7b6573cc4326d07de6350e51e7dc85d5da2c086501dd2793749c5a0fcfe8",
      "Payments left": 1
    },
    {
      "Payment": "f0b5257c4f13c2719b20d43bc7a0aab7656fcdca197e0359ad0671fe1848a1c6",
      "Number of payments": 1,
      "Amount": 1000000,
      "Destination": "RNfviykgepoYjRL9ePcuHHuHJwxBGGVcgh",
      "Secret": "833b28385abc37736b192d542208184571c06528c32e5b577488a3c14ad29838",
      "Payments left": 0
    }
  ]```


[26-Dec-18 02:25 AM] TonyL#3577
Should `Number of payments` be different?


[26-Dec-18 02:26 AM] Mihailo#5902
That is the number of payments in that payment. All of this were 1 payment (1000000)


[26-Dec-18 02:26 AM] TonyL#3577
Oh I see


[26-Dec-18 02:27 AM] Mihailo#5902
If you had 2000000 payment then it would be 2 payments


[26-Dec-18 02:31 AM] TonyL#3577
Aha: payment `amount` / channel `denomination`


[26-Dec-18 02:33 AM] Mihailo#5902
You can calculate like that üòâ


[26-Dec-18 02:33 AM] TonyL#3577
Just an illustration for other readers üòÉ


[26-Dec-18 02:33 AM] Mihailo#5902
I can remove that info if it is confusing. There is anyway payment left.


[26-Dec-18 02:35 AM] TonyL#3577
Hmm, current naming might be a little bit confusing for understanding: by number of payments you can assume a separate transaction, not amount of denominations


[26-Dec-18 02:36 AM] TonyL#3577
I found useful for myself made abstraction as "capacity total", "capacity left"


[26-Dec-18 02:37 AM] Mihailo#5902
For me the number of payment could be the order number of payment, but number of payments is in plural üòõ


[26-Dec-18 02:39 AM] TonyL#3577
Oh, you've added `satoshi` disclaimer to `Denomination` field also (broke my app üòÇ )


[26-Dec-18 02:40 AM] Mihailo#5902
Yeah. I thought it could break something but as this info should be human readable I added "satoshi".


[26-Dec-18 02:44 AM] TonyL#3577
Just as a suggestion - maybe put additional information to keys?
Like a:
"Denomination (satoshi)": 100000
Instead of current:
"Denomination": "100000 satoshi"


[26-Dec-18 02:46 AM] TonyL#3577
And totally agree that this disclaimer is an important here and will make understanding easier


[26-Dec-18 02:46 AM] Mihailo#5902
Ah, didn't think of that. Great, I'll change it in future.

{Reactions}
üî• 

[27-Dec-18 08:25 AM] gzezo#2697
Hi guys can someone tell me what are timelocks ?


[27-Dec-18 09:28 AM] dukeleto#7326
@gzezo https://en.bitcoin.it/wiki/NLockTime

{Embed}
https://en.bitcoin.it/wiki/NLockTime
NLockTime


[27-Dec-18 09:29 AM] dukeleto#7326
also https://en.bitcoin.it/wiki/Hashed_Timelock_Contracts

{Embed}
https://en.bitcoin.it/wiki/Hashed_Timelock_Contracts
Hashed Timelock Contracts


[27-Dec-18 10:25 AM] gzezo#2697
Thanks for link, gonna go through it


[03-Jan-19 05:17 AM] Mihailo#5902
I just made an RPC helper function to decode OP_RETURN data from getrawtransaction for example, to see which CC and function is OP_RETURN for. Just supply txid and it will return the info about opret:
```
{
  "result": "success",
  "eval_code": "EVAL_ORACLES",
  "funciton": "D"
}
```
I had a need when debugging transactions to see if some tx is the one I'm looking for and this will help a lot.

{Reactions}
3040_kingpeepo 

[03-Jan-19 07:50 AM] dukeleto#7326
@Mihailo that looks cool, what is the RPC called?


[03-Jan-19 07:57 AM] Mihailo#5902
Decodeccopret, did not yet make PR, will do it soon

{Reactions}
üëç 

[03-Jan-19 10:18 AM] Mihailo#5902
Merged into FSM. Didn't try with non CC opret but i think it will not crash...


[03-Jan-19 10:38 AM] jl777c#5810
"funciton": "D"


[03-Jan-19 12:58 PM] Mihailo#5902
I renamed it to "function" üòõ And D for oracledata üòâ


[03-Jan-19 01:00 PM] Mihailo#5902
Or should I write "funcid"...


[03-Jan-19 06:46 PM] Mylo#8306
"fun kid"  :trollface: 
now get off my lawn üòÑ


[07-Jan-19 09:00 AM] grewalsatinder#9653
trying out lib crypto conditions library


[07-Jan-19 09:01 AM] grewalsatinder#9653
compiled this on linux


[07-Jan-19 09:01 AM] grewalsatinder#9653
https://github.com/libscott/libcryptoconditions

{Embed}
https://github.com/libscott/libcryptoconditions
libscott/libcryptoconditions
Interledger crypto-conditions implemented in C, including simple JSON api - libscott/libcryptoconditions
https://images-ext-1.discordapp.net/external/xQ3CIVE2GBhL5WuUaIMVHaBPrnt9S48QhsBG6GLEetM/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/125019


[07-Jan-19 09:01 AM] grewalsatinder#9653
master branch


[07-Jan-19 09:01 AM] grewalsatinder#9653
edited the .py file with .so file and also tried .a file


[07-Jan-19 09:01 AM] grewalsatinder#9653
getting these errors


[07-Jan-19 09:02 AM] grewalsatinder#9653
```satinder@satinder-vm:~/libscott/libcryptoconditions$ ./cryptoconditions.py 
Traceback (most recent call last):
  File "./cryptoconditions.py", line 13, in <module>
    so.jsonRPC.restype = c_char_p
  File "/usr/lib/python2.7/ctypes/__init__.py", line 379, in __getattr__
    func = self.__getitem__(name)
  File "/usr/lib/python2.7/ctypes/__init__.py", line 384, in __getitem__
    func = self._FuncPtr((name_or_ordinal, self))
AttributeError: /usr/local/lib/libcryptoconditions.so: undefined symbol: jsonRPC```


[07-Jan-19 09:02 AM] grewalsatinder#9653
```satinder@satinder-vm:~/libscott/libcryptoconditions$ ./cryptoconditions.py -h
Traceback (most recent call last):
  File "./cryptoconditions.py", line 12, in <module>
    so = cdll.LoadLibrary('/usr/local/lib/libcryptoconditions.a')
  File "/usr/lib/python2.7/ctypes/__init__.py", line 444, in LoadLibrary
    return self._dlltype(name)
  File "/usr/lib/python2.7/ctypes/__init__.py", line 366, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: /usr/local/lib/libcryptoconditions.a: invalid ELF header```


[07-Jan-19 09:02 AM] grewalsatinder#9653
`ldd` doesn't seems wrong as I see ü§î


[07-Jan-19 09:02 AM] grewalsatinder#9653
```satinder@satinder-vm:~/libscott/libcryptoconditions$ ldd /usr/local/lib/libcryptoconditions.*
/usr/local/lib/libcryptoconditions.a:
    not a dynamic executable
/usr/local/lib/libcryptoconditions.la:
    not a dynamic executable
/usr/local/lib/libcryptoconditions.so:
    linux-vdso.so.1 (0x00007ffe40ad7000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007ff5c76a0000)
    /lib64/ld-linux-x86-64.so.2 (0x00007ff5c7ccf000)
/usr/local/lib/libcryptoconditions.so.0:
    linux-vdso.so.1 (0x00007ffea21e3000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f12650c2000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f12656f1000)
/usr/local/lib/libcryptoconditions.so.0.0.0:
    linux-vdso.so.1 (0x00007ffe999be000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8f2c1ec000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f8f2c81b000)```


[07-Jan-19 09:02 AM] grewalsatinder#9653
I don't know python


[07-Jan-19 09:03 AM] grewalsatinder#9653
just want to get the output of `./cryptoconditions.py -h`


[07-Jan-19 09:03 AM] grewalsatinder#9653
can someone plz help üôÇ


[07-Jan-19 09:08 AM] TonyL#3577
try to run it as `python cryptoconditions.py`


[07-Jan-19 09:09 AM] grewalsatinder#9653
ok


[07-Jan-19 09:09 AM] grewalsatinder#9653
```satinder@satinder-vm:~/libscott/libcryptoconditions$ python cryptoconditions.py -h
Traceback (most recent call last):
  File "cryptoconditions.py", line 13, in <module>
    so.jsonRPC.restype = c_char_p
  File "/usr/lib/python2.7/ctypes/__init__.py", line 379, in __getattr__
    func = self.__getitem__(name)
  File "/usr/lib/python2.7/ctypes/__init__.py", line 384, in __getitem__
    func = self._FuncPtr((name_or_ordinal, self))
AttributeError: /usr/local/lib/libcryptoconditions.so: undefined symbol: jsonRPC
```


[07-Jan-19 09:09 AM] grewalsatinder#9653
same


[07-Jan-19 09:13 AM] TonyL#3577
Hmm seems this `jsonRPC` not defined in `/usr/local/lib/libcryptoconditions.so`


[07-Jan-19 09:13 AM] TonyL#3577
Never worked with this lib - have to try on my side for resolution


[07-Jan-19 09:13 AM] grewalsatinder#9653
that would help mate if solves


[07-Jan-19 09:13 AM] grewalsatinder#9653
I want to try using this lib in my go lang code


[07-Jan-19 09:14 AM] grewalsatinder#9653
also have issues compiling it on osx


[07-Jan-19 09:14 AM] grewalsatinder#9653
will make issues on the repo


[07-Jan-19 09:23 AM] TonyL#3577
Maybe lib is building for different architecture


[07-Jan-19 09:30 AM] TonyL#3577
Oh seems fixed it @grewalsatinder


[07-Jan-19 09:30 AM] TonyL#3577
```so.cc_jsonRPC.restype = c_char_p```


[07-Jan-19 09:30 AM] grewalsatinder#9653
nice! üôÇ


[07-Jan-19 09:30 AM] grewalsatinder#9653
let me try


[07-Jan-19 09:30 AM] TonyL#3577
```./cryptoconditions.py --help
cryptoconditions [-h] {method} {request_json}

methods:
    encodeCondition: Encode a JSON condition to binary
    decodeCondition: Decode a binary condition
    encodeFulfillment: Encode a JSON condition to a fulfillment
    decodeFulfillment: Decode a binary fulfillment
    verifyFulfillment: Verify a fulfillment
    signTreeEd25519: Sign ed25519 condition nodes
    signTreeSecp256k1: Sign secp256k1 condition nodes
    listMethods: List available methods

optional arguments:
  -h, --help            show this help message and exit```


[07-Jan-19 09:31 AM] TonyL#3577
There is no `jsonRPC` in lib but `cc_jsonRPC`


[07-Jan-19 09:31 AM] grewalsatinder#9653
yes!!


[07-Jan-19 09:31 AM] grewalsatinder#9653
it fixed it!!


[07-Jan-19 09:31 AM] TonyL#3577
So it should be just a typo


[07-Jan-19 09:31 AM] grewalsatinder#9653
woohoo!! üéâ


[07-Jan-19 09:31 AM] grewalsatinder#9653
thanks @TonyL üòÉ


[07-Jan-19 09:31 AM] grewalsatinder#9653
can you also take a look at .a file?


[07-Jan-19 09:32 AM] TonyL#3577
You're welcome  mate üòÉ


[07-Jan-19 09:32 AM] grewalsatinder#9653
```OSError: /usr/local/lib/libcryptoconditions.a: invalid ELF header```


[07-Jan-19 09:32 AM] grewalsatinder#9653
that is still same


[07-Jan-19 09:32 AM] grewalsatinder#9653
I need a static .a file


[07-Jan-19 09:32 AM] grewalsatinder#9653
to include in go lang code


[07-Jan-19 09:33 AM] TonyL#3577
Oh actually I didn't look to any files, just saw that below `cc_jsonRPC` calling instead of `jsonRPC`


[07-Jan-19 09:33 AM] TonyL#3577
Will make a PR now lol


[07-Jan-19 09:33 AM] grewalsatinder#9653
yes mate.... thanks üôÇ üëç


[07-Jan-19 09:34 AM] grewalsatinder#9653
if you can help with ELF header that will help too


[07-Jan-19 09:34 AM] grewalsatinder#9653
maybe @ca333 can help later when free


[07-Jan-19 09:37 AM] ca333#0333
the static library libcryptoconditions.a is screwed @grewalsatinder - most likely OS incompatiblity/wrong build bath, etc.


[07-Jan-19 09:38 AM] ca333#0333
have you built/installed it on the machine you re getting the error above?


[07-Jan-19 09:38 AM] ca333#0333
or was it taken over from somewhere?


[07-Jan-19 09:38 AM] grewalsatinder#9653
yes mate, built it with `./autogen.sh` `./configure` `make` `sudo make install`


[07-Jan-19 09:38 AM] grewalsatinder#9653
master branch


[07-Jan-19 09:39 AM] ca333#0333
you on OSX 10.14.x?


[07-Jan-19 09:39 AM] TonyL#3577
https://github.com/libscott/libcryptoconditions/pull/11 üòÉ

{Embed}
https://github.com/libscott/libcryptoconditions/pull/11
I guess it's a typo by tonymorony ¬∑ Pull Request #11 ¬∑ libscott/...
Current cryptoconditions.py throwing an error on execution:
./cryptoconditions.py --help
Traceback (most recent call last):
  File "./cryptoconditions.py", line 13, in <module>
    ...
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Reactions}
üëç 

[07-Jan-19 09:39 AM] grewalsatinder#9653
ubuntu 18.04


[07-Jan-19 09:39 AM] ca333#0333
ok i ll try to reproduce - need a little bit. still in meeting


[07-Jan-19 09:39 AM] grewalsatinder#9653
no problem, will wait for you update


[07-Jan-19 09:40 AM] grewalsatinder#9653
if possible, please try to compile it on osx too mate


[07-Jan-19 09:40 AM] grewalsatinder#9653
I need to have it worked on both osx and linux


[07-Jan-19 09:46 AM] ca333#0333
sure - will do


[07-Jan-19 09:46 AM] grewalsatinder#9653
thanks mate üôÇ


[07-Jan-19 10:13 AM] grewalsatinder#9653
cool! able to compile and use it on osx too!


[07-Jan-19 10:13 AM] grewalsatinder#9653
noticed there is `fixosx` branch which compiles fine on osx


[07-Jan-19 10:13 AM] grewalsatinder#9653
```satinders-MacBook-Pro:libcryptoconditions satinder$ ls -lh /usr/local/lib/lib
libcryptoconditions.0.dylib  libgmpxx.a                   libidn2.0.dylib              libltdl.dylib                libosxfuse.dylib             libsecp256k1.la
libcryptoconditions.a        libgmpxx.dylib               libidn2.a                    libmpc.3.dylib               libosxfuse.la                libunistring.2.dylib
libcryptoconditions.dylib    libhtsjava.2.dylib           libidn2.dylib                libmpc.a                     libosxfuse_i64.2.dylib       libunistring.a
libcryptoconditions.la       libhtsjava.a                 libisl.19.dylib              libmpc.dylib                 libosxfuse_i64.dylib         libunistring.dylib
libgmp.10.dylib              libhtsjava.dylib             libisl.a                     libmpfr.6.dylib              libosxfuse_i64.la            
libgmp.a                     libhttrack.2.dylib           libisl.dylib                 libmpfr.a                    libsecp256k1.0.dylib         
libgmp.dylib                 libhttrack.a                 libltdl.7.dylib              libmpfr.dylib                libsecp256k1.a               
libgmpxx.4.dylib             libhttrack.dylib             libltdl.a                    libosxfuse.2.dylib           libsecp256k1.dylib           
satinders-MacBook-Pro:libcryptoconditions satinder$ ls -lh /usr/local/lib/libcryptoconditions.*
-rwxr-xr-x  1 root  admin   282K  8 Jan 07:11 /usr/local/lib/libcryptoconditions.0.dylib
-rw-r--r--  1 root  admin   1.1M  8 Jan 07:11 /usr/local/lib/libcryptoconditions.a
lrwxr-xr-x  1 root  admin    27B  8 Jan 07:11 /usr/local/lib/libcryptoconditions.dylib -> libcryptoconditions.0.dylib
-rwxr-xr-x  1 root  admin   1.0K  8 Jan 07:11 /usr/local/lib/libcryptoconditions.la```


[07-Jan-19 10:14 AM] grewalsatinder#9653
used `.dylib` and it shows help fine


[07-Jan-19 10:14 AM] grewalsatinder#9653
but using `.a` file it gives this error


[07-Jan-19 10:14 AM] grewalsatinder#9653
```satinders-MacBook-Pro:libcryptoconditions satinder$ python cryptoconditions.py -h
Traceback (most recent call last):
  File "cryptoconditions.py", line 12, in <module>
    so = cdll.LoadLibrary('/usr/local/lib/libcryptoconditions.a')
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py", line 443, in LoadLibrary
    return self._dlltype(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: dlopen(/usr/local/lib/libcryptoconditions.a, 6): no suitable image found.  Did find:
    /usr/local/lib/libcryptoconditions.a: unknown file type, first eight bytes: 0x21 0x3C 0x61 0x72 0x63 0x68 0x3E 0x0A
    /usr/local/lib/libcryptoconditions.a: unknown file type, first eight bytes: 0x21 0x3C 0x61 0x72 0x63 0x68 0x3E 0x0A
satinders-MacBook-Pro:libcryptoconditions satinder$ 
```


[07-Jan-19 10:14 AM] grewalsatinder#9653
so need to sort out the `.a` file for both osx and linux


[07-Jan-19 10:14 AM] grewalsatinder#9653
@ca333


[07-Jan-19 10:15 AM] grewalsatinder#9653
I'll anyway try to use that `.a` lib in my go lang code and see if it works


[07-Jan-19 10:15 AM] grewalsatinder#9653
could be because I don't understand python the issue could be just with python.... may be.... ü§î


[07-Jan-19 10:16 AM] grewalsatinder#9653
I had to fix the .py file in fixosx branch like @TonyL helped üòÅ

{Reactions}
üëç 

[07-Jan-19 10:17 AM] TonyL#3577
Issue is that python code trying to use method from lib which is not presists in this lib üòÉ


[07-Jan-19 10:21 AM] grewalsatinder#9653
okay, just need to confirm something else


[07-Jan-19 10:22 AM] grewalsatinder#9653
can you or someone please confirm if the methods from this lib are what we expect to use with komodo CC ?


[07-Jan-19 10:26 AM] grewalsatinder#9653
at least the example commands there outputs fine


[07-Jan-19 10:26 AM] grewalsatinder#9653
```satinders-MacBook-Pro:libcryptoconditions satinder$ python cryptoconditions.py encodeCondition '{
    "type": "ed25519-sha-256",
    "publicKey": "11qYAYKxCrfVS_7TyWQHOg7hcvPapiMlrwIaaPcHURo"
}'
{
    "uri":    "ni:///sha-256;eZI5q6j8T_fqv7xMROaei9_tmTMk4S7WR5Kr4onPHV8?fpt=ed25519-sha-256&cost=131072",
    "bin":    "A4278020799239ABA8FC4FF7EABFBC4C44E69E8BDFED993324E12ED64792ABE289CF1D5F8103020000"
}
```


[07-Jan-19 10:27 AM] grewalsatinder#9653
```satinders-MacBook-Pro:libcryptoconditions satinder$ python cryptoconditions.py decodeCondition '{
>     "bin": "A4278020799239ABA8FC4FF7EABFBC4C44E69E8BDFED993324E12ED64792ABE289CF1D5F8103020000"
> }'
{
    "uri":    "ni:///sha-256;eZI5q6j8T_fqv7xMROaei9_tmTMk4S7WR5Kr4onPHV8?fpt=ed25519-sha-256&cost=131072",
    "bin":    "A4278020799239ABA8FC4FF7EABFBC4C44E69E8BDFED993324E12ED64792ABE289CF1D5F8103020000",
    "condition":    {
        "type":    "(anon)",
        "fingerprint":    "eZI5q6j8T_fqv7xMROaei9_tmTMk4S7WR5Kr4onPHV8",
        "cost":    131072,
        "subtypes":    0
    }
}
```


[12-Jan-19 01:29 PM] Mylo#8306
@grewalsatinder what r u trying? To use non-c++?


[12-Jan-19 02:19 PM] grewalsatinder#9653
I was testing libscott's libcryptoconditions lib


[12-Jan-19 02:20 PM] grewalsatinder#9653
Was testing to see if I can use that with golang


[12-Jan-19 02:20 PM] grewalsatinder#9653
Like using existing .so or .dll system lib


[12-Jan-19 07:11 PM] Mylo#8306
ok - good to know. sorry i can't  input anything helpful üòÉ

{Reactions}
‚ûï ‚òπ 

[12-Jan-19 09:09 PM] grewalsatinder#9653
No worries mate


[14-Jan-19 03:30 AM] Fernando Ruiz-Tapiador#1569
Hi, can someone add cc-komodo to https://github.com/Overtorment/awesome-smart-contracts ?

{Embed}
https://github.com/Overtorment/awesome-smart-contracts
Overtorment/awesome-smart-contracts
üï∂ List of awesome platforms for smart contracts. Contribute to Overtorment/awesome-smart-contracts development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/bl2kGB8AJ_mQiUZw9sF9-WNIu2CijtIgb_pNiTWuEKk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/1913337

{Reactions}
üëÜüèª 

[14-Jan-19 05:41 AM] TonyL#3577
Hi @Fernando Ruiz-Tapiador ! Thanks for a link sharing üëç  Will go ahead with it


[14-Jan-19 09:11 AM] Fernando Ruiz-Tapiador#1569
üëç


[15-Jan-19 11:57 PM] TonyL#3577
Made a PR https://github.com/Overtorment/awesome-smart-contracts/pull/16

{Embed}
https://github.com/Overtorment/awesome-smart-contracts/pull/16
Added Komodo platform cryptoconditions contracts by tonymorony ¬∑ ...
Main source is: https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/all_chapters.md
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Reactions}
üëç (2) 

[17-Jan-19 08:00 AM] Shaf#5912
Hi


[17-Jan-19 08:01 AM] Shaf#5912
Can anyone advice best chanel for someone interested in learning about development


[17-Jan-19 08:01 AM] Shaf#5912
and also any opportunities to help with projects, thanks


[17-Jan-19 08:05 AM] jl777c#5810
best way is to start testing to understand how CC work. then you can start making custom CC


[17-Jan-19 08:40 AM] TonyL#3577
@Shaf feel free to drop any questions you might have here or in #üíª‚îÉdev-general there a lot of people who are glad to help with even basic questions 
Also #kmdlabs is a great place to start since as James said testing is a good point to understand how things works and kmdlabs is a open community oriented on Komodo tech testing (CC as well)

{Reactions}
üòé 

[17-Jan-19 04:47 PM] Mylo#8306
@Shaf some reading material:
1.  high level summary of what crypto conditions are at top of https://komodoplatform.com/tech-tuesday-update-7/
2.  a very good read https://docs.komodoplatform.com/cc/index-book-jl.html

{Embed}
https://komodoplatform.com/tech-tuesday-update-7/
Tech Tuesday Update #7: A Summary Of Last Week's Development - Komodo
Komodo Platform is starting a weekly briefing on the progress the Komodo Dev Team is making. It's called Tech Tuesday Update. Here's the first one.
https://images-ext-1.discordapp.net/external/5mM-oiRXPZqjXgvgfZbbafJQt6TUjYRR-YWovzFebXc/https/komodoplatform.com/wp-content/uploads/2018/09/tech-tuesday-update.jpg


[17-Jan-19 05:00 PM] Shaf#5912
Thanks all!


[18-Jan-19 12:24 AM] TonyL#3577
Pinned a message.


[18-Jan-19 12:25 AM] TonyL#3577
Info on how to build a test daemon which need only 2 confirmations for channel transactions ^^ (missed it so decided to pin üòÉ )


[19-Jan-19 04:17 AM] Alright#0419
@dimxy @Mihailo 
```
  {
    "funcid": "s",
    "txid": "b688049b059f6c4fd4819d5ac26bf04f66a994da5e40f4fdbc8db2cbc6714fe6",
    "vout": 0,
    "amount": "1000000",
    "askamount": "1000000",
    "origaddress": "RRbepNhmKmfFcWm3GuTqHxKY1VK1oTuLr6",
    "tokenid": "cf6b8197cc60a7584850de8659542fbba6d64d41fdfe199b273728748ecdb59e",
    "totalrequired": "1000000.00000000",
    "price": "1.00000000"
  },
  {
    "funcid": "S",
    "txid": "0dde6ae2e1305bed2ba54076983d187464c95d0803731d904e1eda95a629cde7",
    "vout": 0,
    "amount": "990",
    "askamount": "990",
    "origaddress": "RRbepNhmKmfFcWm3GuTqHxKY1VK1oTuLr6",
    "tokenid": "75ab46f823b2514f468a6132b52bfa463e1657ad9e83e65aaebbcdb822f8b56b"
  }
```
It's possible to overfill a tokenfillask. I don't see it as much of a problem, but this is the output of tokenorders now. I could see this breaking dapps that make the assumption that `"totalrequired":` and ` "price"` will always be there. Probably enough to just take note of it tbh


[19-Jan-19 04:33 AM] Alright#0419
Don't understand this separation thing as much as I should, but should these two lines be interchangeable?
```
mtx.vout.push_back(MakeTokensCC1vout(EVAL_ASSETS, 5, mypk));
mtx.vout.push_back(MakeCC1vout(EVAL_TOKENS, 5, mypk));
```


[19-Jan-19 04:33 AM] Alright#0419
they seem to be in at least some cases


[19-Jan-19 04:35 AM] dimxy#2587
Those are different vouts.


[19-Jan-19 04:35 AM] dimxy#2587
We introduced 2-eval vouts in this version


[19-Jan-19 04:35 AM] Alright#0419
Let me show you where I'm talking about, just a moment


[19-Jan-19 04:36 AM] Alright#0419
https://github.com/jl777/komodo/blob/5ae5375a2953a5a94e189292181c5da0f138a41e/src/cc/CCassetstx.cpp#L737

{Embed}
https://github.com/jl777/komodo/blob/5ae5375a2953a5a94e189292181c5da0f138a41e/src/cc/CCassetstx.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[19-Jan-19 04:37 AM] Alright#0419
this line can be replaced with 
`mtx.vout.push_back(MakeTokensCC1vout(EVAL_ASSETS, received_assetoshis, mypk));`


[19-Jan-19 04:37 AM] Alright#0419
The result is still the same. I'm basically just wondering what the difference is between these two


[19-Jan-19 04:41 AM] dimxy#2587
Yes it might be replaced.
The difference is that in the first case tokens became in one-eval EVAL_TOKENS vouts, in the second case they are remained two-eval EVAL_ASSETS+EVAL_TOKENS vouts


[19-Jan-19 04:42 AM] dimxy#2587
first case tokens you would see in tokenbalance output


[19-Jan-19 04:43 AM] dimxy#2587
it is like the second case tokens remain tokenconverted


[19-Jan-19 04:45 AM] dimxy#2587
so using the first case MakeCC1vout we do not need tokenconvert back


[19-Jan-19 04:52 AM] dimxy#2587
I'll take a look at tokenfillask either


[19-Jan-19 04:56 AM] Alright#0419
the overfilling order thing can't be done via rpc commands. I set received_assetoshis to a static value for that to happen


[19-Jan-19 04:56 AM] Alright#0419
or rather I replaced received_assetoshis in those two vouts with a static value


[19-Jan-19 05:48 AM] jl777c#5810
pushed a new update to jl777 branch that supports -ac_cclib=<name>
Jthis allows devs to make changes to a single file cclib.cpp and define a user defined CC that uses dynamic libraries so no need to even recompile komodod. this enables a separation of a user defined CC from komodod, yet is is part of komodod at runtime

For now, you need to go into src/cc dir and run ./makecclib to make the src/cclib.so file that will be searched for

{Reactions}
shexy (2) 

[19-Jan-19 05:48 AM] jl777c#5810
the -ac_cclib=<name> must match the MYCCLIBNAME that is defined at the top of cclib.cpp


[19-Jan-19 05:48 AM] jl777c#5810
the name specified in -ac_cclib must match the name inside cclib.cpp


[19-Jan-19 05:49 AM] jl777c#5810
there is a CClib_Dispatch function that is called for evalcodes 0x10 to 0x7f (reserved for user defined CC)


[19-Jan-19 05:50 AM] jl777c#5810
what this means is that without rebuilding komodod, you can make a new CC that is inside cclib.cpp (and whatever files linked in to cclib.so) to do validation. For now, only the validation is added. for constructing CC tx, some external process will be needed which can be done however the custom CC wants it to


[19-Jan-19 05:51 AM] jl777c#5810
so for now, it is just a theoretical support for user defined CC, I guess we can make a pass through rpc that will invoke a custom CC rpc,but I leave that for someone else to do


[19-Jan-19 05:55 AM] jl777c#5810
ca333 is working on the build part, for now windows likely wont build at all


[19-Jan-19 05:58 AM] dukeleto#7326
"no need to even recompile komodod" is pretty amazing


[19-Jan-19 06:10 AM] jl777c#5810
it is a dynamic cclib.so library


[19-Jan-19 06:11 AM] jl777c#5810
name is verified to match the -ac_cclib name, if so any CC evalcode 0x10 to 0x7f are sent into the cclib for validation


[19-Jan-19 06:11 AM] jl777c#5810
of course if you dont update the cclib, the cclib.so wont be updated


[19-Jan-19 06:11 AM] dukeleto#7326
dynamic loadable libraries, so = shared object


[19-Jan-19 06:12 AM] dukeleto#7326
that will make it easier for CC devs wanting to write custom things at the c/c++ level, great feature


[19-Jan-19 06:13 AM] jl777c#5810
cclib.cpp is compiled with same include files as main daemon, so has access to all the functions


[20-Jan-19 03:17 AM] jl777c#5810
CClib_methods[] =
{
    { (char *)"faucet2_fund", (char *)"amount", 1, 1, 'F' },
    { (char *)"faucet2_get", (char *)"<no args>", 0, 0, 'G' },
};
->
./komodo-cli -ac_name=CLIB cclibinfo
{
  "result": "success",
  "CClib": "faucet2",
  "methods": [
    {
      "funcid": "F",
      "name": "faucet2_fund",
      "help": "amount",
      "params_required": 1,
      "params_max": 1
    },
    {
      "funcid": "G",
      "name": "faucet2_get",
      "help": "<no args>",
      "params_required": 0,
      "params_max": 0
    }
  ]
}


[20-Jan-19 03:18 AM] jl777c#5810
now i got it so you can define all your rpc methods via data table


[20-Jan-19 03:18 AM] jl777c#5810
of course you need to handle the rpc request when it comes in, but now there is rpc access to the cclib

{Reactions}
üëç (2) üòé (2) Komodo (2) 

[21-Jan-19 01:11 AM] jl777c#5810
latest jl777 and FSM uses cclib.so, and maybe there are some build issues. if so report to ca333


[21-Jan-19 07:30 AM] dukeleto#7326
I will try to test it out on os x soon

{Reactions}
üëç 

[22-Jan-19 01:10 AM] Cryptoon#3362
Is it possible to have an oracle search a record whether or not someone is dead. And if that someone is dead, a cc automatically transfers funds in wallet to their heirs?


[22-Jan-19 01:10 AM] Cryptoon#3362
Then you would no longer need to trust someone with your keys


[22-Jan-19 01:11 AM] Cryptoon#3362
Problem would be to have a reliable source to prove one is dead I assume?


[22-Jan-19 01:12 AM] Cryptoon#3362
Oracle know you are dead > funds transferred to multisig notary (not kmd notary but a real life one) adress > people sign off on the death > funds released?


[22-Jan-19 01:12 AM] jl777c#5810
why not use heir CC?


[22-Jan-19 01:13 AM] Cryptoon#3362
Here notaries are used to execute a will, so could be an option to have them validate the death?


[22-Jan-19 01:13 AM] Cryptoon#3362
Ah heir cc already exists?


[22-Jan-19 01:13 AM] jl777c#5810
yes


[22-Jan-19 01:13 AM] Cryptoon#3362
Nevermind then üôà


[22-Jan-19 01:13 AM] Cryptoon#3362
How does it work, where can I read up?


[22-Jan-19 01:13 AM] jl777c#5810
if after a specified amount of time you make no spends, your heir can spend. works with tokens too, so can be tokenized BTC, KMD, ...


[22-Jan-19 01:14 AM] jl777c#5810
#cc-heir


[22-Jan-19 01:14 AM] Cryptoon#3362
Aha, so the cc assumes you are dead if you dont make a tx?


[22-Jan-19 01:15 AM] jl777c#5810
you make a "will" by creating a specific heir CC address (your pubkey + heir pubkey). and the time required to consider yourself gone


[22-Jan-19 01:17 AM] CryptoNinjaa#5350
"In tonight's news man finally released after being held captive for 2 years, His heir cc finally kicked and he was released unshaved"


[22-Jan-19 01:19 AM] jl777c#5810
be careful who you choose as an heir!


[22-Jan-19 01:19 AM] TonyL#3577
Just realised that it would be good to choose multiply heirs as priority list


[22-Jan-19 01:20 AM] TonyL#3577
If first priority heir not claim after some time - second can claim and so on


[22-Jan-19 01:20 AM] jl777c#5810
you can split the funds to multiple heirs with multiple addresses


[22-Jan-19 01:20 AM] TonyL#3577
In case if I want share funds yes


[22-Jan-19 01:23 AM] TonyL#3577
In usual jurisprudence persists kinda "circles of heirs" - if heirs from first circle not claim after X time - heirs from second circle can claim and so on. If nobody claim money go to the government


[22-Jan-19 01:26 AM] jl777c#5810
only one level is supported. maybe the creator can make the heir keypair and disclose the privkey to the circle of heirs via offchain methods


[22-Jan-19 07:33 AM] Cryptoon#3362
Still a fan of using an oracle, that way funds are released faster when dead :p


[22-Jan-19 07:33 AM] Cryptoon#3362
Anyway, current state will definitely do for now


[22-Jan-19 07:33 AM] Cryptoon#3362
Maybe some day if VRSC is used as a way to verify identity in some countries üòÉ


[28-Jan-19 07:16 AM] Mark81#4505
Is heir-cc able to also spend accuired APR when doing it with komodo?


[30-Jan-19 05:25 AM] Mihailo#5902
@Deleted User I have the same problem with miner blocking even on new chain when it mines the gatewaysclaim tx. Not sure what can be wrong as I think I did'nt change anything regarding that tx... Only thing I did is to rebase to latest FSM...


[30-Jan-19 05:25 AM] Deleted User#0000
I'm not sure what's in that tbh... Can u try with labs komodo build and tell me if its the same?


[30-Jan-19 05:26 AM] Mihailo#5902
I think labs do not have latest gateways changes...


[30-Jan-19 05:27 AM] Deleted User#0000
Its equal with FSM from a few days back just merge it to your own fork? Or do u need me to do that?


[30-Jan-19 05:27 AM] Deleted User#0000
I assume your using 100% pow chain?


[30-Jan-19 05:27 AM] Mihailo#5902
Yes


[30-Jan-19 05:27 AM] Deleted User#0000
Changes I made to miner should only effect pos chains if not its a bug


[30-Jan-19 05:28 AM] Mihailo#5902
I think this is not a problem with miner, but with ConnectBlock which is verifing tx....


[30-Jan-19 05:29 AM] Deleted User#0000
I am quite good at catching bugs if I can reproduce it...


[30-Jan-19 05:30 AM] Deleted User#0000
Hmmm... Connect block calls a csmain lock 2 times but they are in diff {}


[30-Jan-19 05:31 AM] Mihailo#5902
This is reproducable 100%


[30-Jan-19 05:31 AM] Deleted User#0000
In testing I had to make it lock both under sustained tx spam...


[30-Jan-19 05:31 AM] Deleted User#0000
If it can be exactly reproduced DM me steps heading home soon


[30-Jan-19 05:33 AM] Mihailo#5902
The setup is little bit difficult as you have to go through gateway setup. Multisig nodes setup, oraclefeed, waiting for deposit feed in oracles and then deposit and claim.


[30-Jan-19 05:35 AM] Deleted User#0000
If u want me to help I'm going to need them


[30-Jan-19 05:35 AM] Deleted User#0000
I can do it... Maybe not to tonight... But I can make a start


[30-Jan-19 05:36 AM] Mihailo#5902
Maybe I should check also  with 1of1 gateway, maybe it is not a problem there


[30-Jan-19 05:37 AM] Deleted User#0000
I can't deny I've created some terrible bugs lately...  But if I did I will fix them


[30-Jan-19 05:37 AM] Mihailo#5902
I can assist you in setup of gateways, just dm me when you are ready


[30-Jan-19 05:38 AM] Deleted User#0000
Np


[30-Jan-19 05:38 AM] Deleted User#0000
Do u never sleep?


[30-Jan-19 05:38 AM] Deleted User#0000
üòÇ


[30-Jan-19 05:39 AM] Mihailo#5902
Yes I  do üòÉ But it is  14h here now üòâ


[30-Jan-19 05:39 AM] Deleted User#0000
Yeah that old round earth making timezones ay


[30-Jan-19 05:40 AM] Deleted User#0000
I'm +8.. GMT whatever that is


[30-Jan-19 07:26 AM] Mihailo#5902
Same with single gateway...


[30-Jan-19 07:39 AM] Mihailo#5902
Hmmm, I have a lead. If I turn off validation then it works....


[30-Jan-19 07:40 AM] jl777c#5810
validation is using code that locks


[30-Jan-19 07:40 AM] Mihailo#5902
Probably some mistake there as latest I turned on CC validation for gateways


[30-Jan-19 07:40 AM] Mihailo#5902
Haaaa


[30-Jan-19 07:40 AM] jl777c#5810
validation code is deep within locks


[30-Jan-19 07:40 AM] jl777c#5810
no need to lock again


[30-Jan-19 07:40 AM] Mihailo#5902
Probably it is somewhere GetTransaction instead of myGetTransaction


[30-Jan-19 07:41 AM] jl777c#5810
that would do it


[30-Jan-19 07:42 AM] Mihailo#5902
@Deleted User You can sleep with peace. It is not your bug üòõ üòÑ


[30-Jan-19 07:44 AM] Mihailo#5902
Yep, I used functions from Gatewaysbind RPC to check bind in validation, and this function uses GetTransaction...


[30-Jan-19 07:44 AM] Mihailo#5902
CCfullsupply()


[30-Jan-19 07:46 AM] jl777c#5810
the rpc functions call use the non-locking versions


[30-Jan-19 07:50 AM] Mihailo#5902
Yes I know. But these are from CCtx.cpp


[30-Jan-19 07:51 AM] Mihailo#5902
```cpp
int64_t CCfullsupply(uint256 tokenid)
{
    uint256 hashBlock; int32_t numvouts; CTransaction tx; std::vector<uint8_t> origpubkey; std::string name,description;
    if ( GetTransaction(tokenid,tx,hashBlock,false) != 0 && (numvouts= tx.vout.size()) > 0 )
    {
        if (DecodeTokenCreateOpRet(tx.vout[numvouts-1].scriptPubKey,origpubkey,name,description))
        {
            return(tx.vout[0].nValue);
        }
    }
    return(0);
}

int64_t CCtoken_balance(char *coinaddr,uint256 reftokenid)
{
    int64_t price,sum = 0; int32_t numvouts; CTransaction tx; uint256 tokenid,txid,hashBlock; 
    std::vector<uint8_t>  vopretExtra;
    std::vector<std::pair<CAddressUnspentKey, CAddressUnspentValue> > unspentOutputs;
    uint8_t evalCode;

    SetCCunspents(unspentOutputs,coinaddr);
    for (std::vector<std::pair<CAddressUnspentKey, CAddressUnspentValue> >::const_iterator it=unspentOutputs.begin(); it!=unspentOutputs.end(); it++)
    {
        txid = it->first.txhash;
        if ( GetTransaction(txid,tx,hashBlock,false) != 0 && (numvouts=tx.vout.size()) > 0 )
        {
            char str[65];
            std::vector<CPubKey> voutTokenPubkeys;
            if ( reftokenid==txid || (DecodeTokenOpRet(tx.vout[numvouts-1].scriptPubKey, evalCode, tokenid, voutTokenPubkeys, vopretExtra) != 0 && reftokenid == tokenid))
            {
                sum += it->second.satoshis;
            }
        }
    }
    return(sum);
}```


[30-Jan-19 07:51 AM] Mihailo#5902
I suppose I can switch them to myGetTransaction


[30-Jan-19 07:51 AM] Mihailo#5902
As they can be used in validation also...


[30-Jan-19 07:52 AM] jl777c#5810
yes


[30-Jan-19 07:53 AM] jl777c#5810
good plan


[30-Jan-19 10:16 AM] BlackJesus#6161
Wow, I just realised something, but I'm having 1 problem of certainty. A company my company works with uses a system called LPS for supply chain management of car parts and to make sure each part individually goes through all the processes by making a log of when it goes from station to station with an attatched anotator  of whether the part passed or failed the previous process based on parameter window limits. A blockchain is literally keymade for this type of part of tracking but would decentralized nodes holding the database fair better than a Centralized super computer server managing this kind of push/pull query. Honestly on second thought it definitely has to be better, because of the local data holding over a Centralized server having to do pushes and pulls whereas a blockchain only has pushes.


[30-Jan-19 10:51 AM] BlackJesus#6161
Crossposted to askjl777


[30-Jan-19 12:27 PM] jl777c#5810
as long as latency is not an issue, the decentralized network will be much more reliable


[01-Feb-19 08:01 AM] Lumbi#8378
256cc is small but practical dirtbike


[01-Feb-19 08:01 AM] Lumbi#8378
lots of versatility üòÑ


[01-Feb-19 08:02 AM] Mihailo#5902
???


[01-Feb-19 08:02 AM] Lumbi#8378
@Mihailo 256 eval codes


[01-Feb-19 08:03 AM] Mihailo#5902
üòÑ


[01-Feb-19 08:16 AM] Lumbi#8378
http://www.softwarepreservation.org/projects/LISP/book/LISP%201.5%20Programmers%20Manual-1961.07.14.pdf


[02-Feb-19 06:25 AM] passcombo.com üè¥‚ò†üçã#0622
hey guys, just posted in Pirates, but it's about a CC lottery - not sure if somebody already started that but if the Pirates lottery goes fine it might be that a decentralized lottery is also a cool idea attradcting people to the ecosystem. Maybe making this cc-lotttery needs a new ico as to have money for dev + ads + first few lotteries iterations. ICO investors could get a % revenue from lottery tickets. Another possibility is that anyone could run a lottery setting some pars like (time start, time to end, funding initial amount, % revenue for initializer, % revenue for special cause)... Thoughts ? If I new how to code blockchains (and deal with legal things regarding this) I would do it :pirate:


[02-Feb-19 06:27 AM] passcombo.com üè¥‚ò†üçã#0622
---


[02-Feb-19 06:33 AM] passcombo.com üè¥‚ò†üçã#0622
Another idea - cc-schedule-tx - be able to create one time scheduled tx (conditioned tx, parameters: this addr  activity [for example addr not active for 3 months - do send], datetime - after which is is valid, amount to send (or % of holdings), addr or addr list with possibility to check addr activity - not to send to a long dead addr [no withdrawal from addr for longer then N months] - send to first active addr on the list or the most recent active addr on the list OR other addr that have set this CC rules so that the amount will be eventually passed to someone) AND option 2 iterative tx  also where iterations based on amount of time or specific days of week, month like every first Monday of the month ... like in online banking schedule...


[02-Feb-19 06:34 AM] passcombo.com üè¥‚ò†üçã#0622
cc-schedule is maybe kind of generalization of cc-heritage I read somewhere going to be developed


[02-Feb-19 08:01 AM] Lumbi#8378
Trustless, Reliable, Redundant (TRR) : these are the three essential CC design challenges.


[02-Feb-19 10:30 AM] TonyL#3577
Hmm will we play RPG next CC?


[02-Feb-19 10:31 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541324714337894421/Rogue_Screen_Shot_CAR.png


[02-Feb-19 10:57 AM] jl777c#5810
if you run ./makerogue from ~/src/cc


[02-Feb-19 10:57 AM] jl777c#5810
./rogue <seed> gui will play that seed and save keystroke files to rogue.<seed>.i


[02-Feb-19 10:58 AM] jl777c#5810
./rogue <seed> will replay all the keystroke files


[02-Feb-19 10:58 AM] jl777c#5810
still working on getting the rpc calls done, so far newgame, pending, txidinfo are done


[02-Feb-19 10:58 AM] jl777c#5810
i figured out how to gamify any deterministic solitaire game


[02-Feb-19 10:59 AM] jl777c#5810
1. creategame with buyin, then for 5 blocks anybody can register with buyin


[02-Feb-19 10:59 AM] jl777c#5810
2. then progress tx are submitted


[02-Feb-19 10:59 AM] jl777c#5810
3. the first to complete, wins all the buyins


[02-Feb-19 11:00 AM] jl777c#5810
ingame gold becomes ROGUE coins


[02-Feb-19 11:01 AM] jl777c#5810
this will take a bit longer than sudoku did, but made good progress today


[02-Feb-19 11:01 AM] TonyL#3577
On-demand sit-n-go model, thats great üëç


[02-Feb-19 11:02 AM] jl777c#5810
rogue_rpc.cpp has some rpc details


[02-Feb-19 11:02 AM] jl777c#5810
the seed is the bottom 64bits from the future blockhash, so nobody can start ahead of time


[02-Feb-19 11:03 AM] TonyL#3577
We can set min. max. amount of participants


[02-Feb-19 11:03 AM] TonyL#3577
And play some card games between participants via CC, no?


[02-Feb-19 11:03 AM] jl777c#5810
for now, it is just open to whoever registers


[02-Feb-19 11:03 AM] jl777c#5810
only solitaire games can be noninteractive


[02-Feb-19 11:04 AM] TonyL#3577
Not so hard like a let's say poker but something like this https://en.wikipedia.org/wiki/Durak

{Embed}
https://en.wikipedia.org/wiki/Durak
Durak
Durak (Russian: –¥—É—Ä–∞–∫, IPA: [d äÀàrak] (listen), "fool") is a traditional Russian card game that is popular in many post-Soviet states. It is Russia's most popular card game, having displaced Preferans. It has since become known in other parts of the world. The objective...
https://images-ext-1.discordapp.net/external/y6R8eJbQrfaLa7fcmz7rUOvnCalLB_sW5Ok7HByy8vU/https/upload.wikimedia.org/wikipedia/commons/thumb/2/27/Regular_Durak.JPG/1200px-Regular_Durak.JPG


[02-Feb-19 11:04 AM] jl777c#5810
for now I want to limit to those as there is plenty of ground to cover


[02-Feb-19 11:05 AM] jl777c#5810
let me know if jl777 branch builds for you


[02-Feb-19 11:05 AM] jl777c#5810
do the makerogue before building the komodod


[02-Feb-19 11:05 AM] TonyL#3577
Players send moves one-by-one inside the X players room. State of closed cards player gets encrypted and can decrypt with privkey, something like this


[02-Feb-19 11:05 AM] TonyL#3577
Ok, sure


[02-Feb-19 11:06 AM] jl777c#5810
this is also an example of how to have different libcc.so, makecclib makes the sudoku one, makerogue makes the rogue one, they use the same evalcodes


[02-Feb-19 11:08 AM] TonyL#3577
``` ./makerogue 
make: *** No targets specified and no makefile found.  Stop.
In file included from cclib.cpp:458:0:
rogue/mdport.c: In function ‚Äòint md_hasclreol()‚Äô:
rogue/mdport.c:264:17: error: invalid use of incomplete type ‚ÄòTERMINAL {aka struct term}‚Äô
     if (cur_term->type.Strings == NULL)
                 ^~
In file included from rogue/mdport.c:87:0,
                 from cclib.cpp:458:
/usr/include/term.h:689:16: note: forward declaration of ‚ÄòTERMINAL {aka struct term}‚Äô
 typedef struct term TERMINAL;
                ^~~~
In file included from cclib.cpp:465:0:
rogue/passages.c: In function ‚Äòvoid passnum()‚Äô:
rogue/passages.c:376:13: warning: use of an operand of type ‚Äòbool‚Äô in ‚Äòoperator++‚Äô is deprecated [-Wdeprecated]
      newpnum++;
             ^~
In file included from cclib.cpp:466:0:
rogue/potions.c: In function ‚Äòbool turn_see(bool)‚Äô:
rogue/potions.c:297:10: warning: use of an operand of type ‚Äòbool‚Äô in ‚Äòoperator++‚Äô is deprecated [-Wdeprecated]
   add_new++;
          ^~
cp: cannot stat 'librogue.so': No such file or directory```


[02-Feb-19 11:11 AM] jl777c#5810
install ncurses


[02-Feb-19 11:14 AM] TonyL#3577
Installed, same error on execution


[02-Feb-19 11:15 AM] jl777c#5810
did rogue executable get created?


[02-Feb-19 11:17 AM] jl777c#5810
oh, you need to run ./configure from the rogue dir

{Reactions}
üëå 

[02-Feb-19 11:19 AM] jl777c#5810
pushed version that does ./configure automatically


[02-Feb-19 11:20 AM] TonyL#3577
```configure: creating ./config.status
config.status: creating Makefile
config.status: creating rogue.6
config.status: creating rogue.cat
config.status: creating rogue.doc
config.status: creating rogue.html
config.status: creating rogue.me
config.status: creating config.h
gcc -g -O2 -fPIC -DHAVE_CONFIG_H  -c mdport.c
mdport.c: In function ‚Äòmd_hasclreol‚Äô:
mdport.c:264:17: error: dereferencing pointer to incomplete type ‚ÄòTERMINAL {aka struct term}‚Äô
     if (cur_term->type.Strings == NULL)
                 ^~
Makefile:130: recipe for target 'mdport.o' failed
make: *** [mdport.o] Error 1
In file included from cclib.cpp:458:0:
rogue/mdport.c: In function ‚Äòint md_hasclreol()‚Äô:
rogue/mdport.c:264:17: error: invalid use of incomplete type ‚ÄòTERMINAL {aka struct term}‚Äô
     if (cur_term->type.Strings == NULL)
                 ^~
In file included from rogue/mdport.c:87:0,
                 from cclib.cpp:458:
/usr/include/term.h:689:16: note: forward declaration of ‚ÄòTERMINAL {aka struct term}‚Äô
 typedef struct term TERMINAL;
                ^~~~
cp: cannot stat 'librogue.so': No such file or directory```


[02-Feb-19 11:20 AM] TonyL#3577
More prints now, same finish


[02-Feb-19 11:21 AM] TonyL#3577
I guess more dependencies needed


[02-Feb-19 11:24 AM] TonyL#3577
https://github.com/Davidslv/rogue/blob/master/LICENSE.TXT oh it's really port of classic game

{Embed}
https://github.com/Davidslv/rogue/blob/master/LICENSE.TXT
Davidslv/rogue
Original Rogue Game (5.4.4). Contribute to Davidslv/rogue development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/uNUX0TOQxw9iDYsnIygYMJPIDTs-EI-xANAl5fivrNA/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/136777


[02-Feb-19 11:24 AM] TonyL#3577
Wow


[02-Feb-19 11:24 AM] jl777c#5810
it is mostly 30 year old code!

{Reactions}
shexy (3) 

[02-Feb-19 11:24 AM] jl777c#5810
somehow your system doesnt have curses and/or ncurses


[02-Feb-19 11:25 AM] jl777c#5810
how did you install it?


[02-Feb-19 11:25 AM] TonyL#3577
```sudo apt-get install libncurses5-dev libncursesw5-dev```


[02-Feb-19 11:26 AM] jl777c#5810
that seems right: https://askubuntu.com/questions/78749/what-provides-curses-headers-named-curses-h/78776

{Embed}
https://askubuntu.com/questions/78749/what-provides-curses-headers-named-curses-h/78776
What provides curses headers named curses.h?
I need a few header file namely curses.h for text based programming
Please tell me how to install these header files.
https://images-ext-2.discordapp.net/external/02Ix4CZecmbZZvwF7zISHLiF2I1RHCwcLqcPi_-HIcE/%3Fv%3Dc492c9229955/https/cdn.sstatic.net/Sites/askubuntu/img/apple-touch-icon%402.png


[02-Feb-19 11:27 AM] jl777c#5810
make clean and run ./configure again


[02-Feb-19 11:28 AM] jl777c#5810
maybe try to build from Davidslv repo first

{Reactions}
üëå 

[02-Feb-19 11:28 AM] jl777c#5810
are you in jl777 branch?


[02-Feb-19 11:28 AM] TonyL#3577
Yes I'm in jl777 branch


[02-Feb-19 11:29 AM] TonyL#3577
```make clean
rm -f vers.o extern.o armor.o chase.o command.o daemon.o daemons.o fight.o init.o io.o list.o mach_dep.o rogue.o mdport.o misc.o monsters.o move.o new_level.o; rm -f main.o ; rm -f rogue.so
rm -f options.o pack.o passages.o potions.o rings.o rip.o rooms.o save.o scrolls.o state.o sticks.o things.o weapons.o wizard.o xcrypt.o
rm -f core a.exe a.out a.exe.stackdump rogue rogue.exe
rm -f rogue.tar rogue.tar.gz rogue.zip 
rm -f rogue5.4.4/*
rmdir rogue5.4.4
rmdir: failed to remove 'rogue5.4.4': No such file or directory
Makefile:136: recipe for target 'clean' failed
make: [clean] Error 1 (ignored)```
Something suspicious


[02-Feb-19 11:29 AM] SHossain#0007
compiling jl777 branch now


[02-Feb-19 11:29 AM] jl777c#5810
make clean error not a problem


[02-Feb-19 11:30 AM] SHossain#0007
do i need to build the game from here? https://github.com/Davidslv/rogue/

{Embed}
https://github.com/Davidslv/rogue/
Davidslv/rogue
Original Rogue Game (5.4.4). Contribute to Davidslv/rogue development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/uNUX0TOQxw9iDYsnIygYMJPIDTs-EI-xANAl5fivrNA/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/136777


[02-Feb-19 11:30 AM] jl777c#5810
no


[02-Feb-19 11:30 AM] SHossain#0007
ok


[02-Feb-19 11:30 AM] jl777c#5810
just was idea for troubleshooting

{Reactions}
üëçüèΩ 

[02-Feb-19 11:30 AM] jl777c#5810
./makerogue should be all that is needed, but maybe some missing dependency


[02-Feb-19 11:32 AM] TonyL#3577
@jl777c got same error when tried to `make` after `configure` for `Davidslv` code
```mach_dep.c:406:2: warning: ignoring return value of ‚Äòfgets‚Äô, declared with attribute warn_unused_result [-Wunused-result]
  (void) fgets(prbuf, MAXSTR, stdin);
  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
gcc -g -O2  -DHAVE_CONFIG_H  -c main.c
gcc -g -O2  -DHAVE_CONFIG_H  -c mdport.c
mdport.c: In function ‚Äòmd_hasclreol‚Äô:
mdport.c:264:17: error: dereferencing pointer to incomplete type ‚ÄòTERMINAL {aka struct term}‚Äô
     if (cur_term->type.Strings == NULL)
                 ^~
Makefile:130: recipe for target 'mdport.o' failed
make: *** [mdport.o] Error 1
```


[02-Feb-19 11:32 AM] TonyL#3577
So problems not on your side definitely


[02-Feb-19 11:33 AM] TonyL#3577
https://github.com/Davidslv/rogue/issues/2

{Embed}
https://github.com/Davidslv/rogue/issues/2
dereferencing pointer to incomplete type on make ¬∑ Issue #2 ¬∑ Da...
Hi! After running ./configure, this issue on make: $ make gcc -g -O2 -DHAVE_CONFIG_H -c mdport.c mdport.c: In function ‚Äòmd_hasclreol‚Äô: mdport.c:264:17: error: dereferencing pointer to incomplete ty...
https://images-ext-2.discordapp.net/external/BPsQ_1k_gvQ9WcIO4EcgwKrILSTblRhPvpvYISvA1dY/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/14676946


[02-Feb-19 11:33 AM] SHossain#0007
```
./cc/makerogue
./cc/makerogue: line 1: cd: rogue: No such file or directory
./cc/makerogue: line 2: ./configure: No such file or directory
make[1]: Entering directory '/home/user/komodo/src'
  CXX      libbitcoin_util_a-clientversion.o
  AR       libbitcoin_util.a
make[2]: Entering directory '/home/user/komodo/src/secp256k1'
make[2]: Leaving directory '/home/user/komodo/src/secp256k1'
make[2]: Entering directory '/home/user/komodo/src/cryptoconditions'
make[2]: 'libcryptoconditions_core.la' is up to date.
make[2]: Leaving directory '/home/user/komodo/src/cryptoconditions'
  CXXLD    komodod
  CXXLD    komodo-cli
  CXXLD    komodo-tx
  CXXLD    wallet-utility
  CXXLD    komodo-test
make[1]: Leaving directory '/home/user/komodo/src'
gcc: error: cclib.cpp: No such file or directory
cp: cannot stat 'librogue.so': No such file or directory
```


[02-Feb-19 11:33 AM] jl777c#5810
TERMINAL is an ncurses thing, so you dont have struct term defined in the curses.h, something like that


[02-Feb-19 11:33 AM] TonyL#3577
Moreover some guy reported about same issue 16 days ago üòÉ


[02-Feb-19 11:34 AM] jl777c#5810
@SHossain did you do a makerogue first?


[02-Feb-19 11:34 AM] jl777c#5810
it is still statically linking komodod, so the right libcc.so needs to be already in ~/komodo/src


[02-Feb-19 11:34 AM] SHossain#0007
running `./makerogue` from inside `cc` dir got me this
```
gcc -g -O2 -fPIC -DHAVE_CONFIG_H  -c mdport.c
mdport.c: In function ‚Äòmd_hasclreol‚Äô:
mdport.c:264:17: error: dereferencing pointer to incomplete type ‚ÄòTERMINAL {aka struct term}‚Äô
     if (cur_term->type.Strings == NULL)
                 ^~
Makefile:130: recipe for target 'mdport.o' failed
make: *** [mdport.o] Error 1
In file included from cclib.cpp:458:0:
rogue/mdport.c: In function ‚Äòint md_hasclreol()‚Äô:
rogue/mdport.c:264:17: error: invalid use of incomplete type ‚ÄòTERMINAL {aka struct term}‚Äô
     if (cur_term->type.Strings == NULL)
                 ^~
In file included from rogue/mdport.c:87:0,
                 from cclib.cpp:458:
/usr/include/term.h:689:16: note: forward declaration of ‚ÄòTERMINAL {aka struct term}‚Äô
 typedef struct term TERMINAL;
                ^~~~
cp: cannot stat 'librogue.so': No such file or directory
```


[02-Feb-19 11:34 AM] jl777c#5810
install ncurses


[02-Feb-19 11:34 AM] SHossain#0007
this was first. then i tried from src dir


[02-Feb-19 11:34 AM] SHossain#0007
i did install ncurses


[02-Feb-19 11:35 AM] jl777c#5810
it did the configure?


[02-Feb-19 11:35 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541340950006464537/makerogue


[02-Feb-19 11:35 AM] TonyL#3577
Maybe some fresh libs in new Ubuntu repos not compatible with this code, not sure if James using new or some legacy OS release üòÉ


[02-Feb-19 11:36 AM] SHossain#0007
actually in a gist https://gist.github.com/himu007/3adc2ed974d48ededcc69fc9820838eb

{Embed}
https://gist.github.com/himu007/3adc2ed974d48ededcc69fc9820838eb
makerogue
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[02-Feb-19 11:37 AM] SHossain#0007
```
sudo apt-get install libncurses5-dev libncursesw5-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
libncurses5-dev is already the newest version (6.1-1ubuntu1.18.04).
libncursesw5-dev is already the newest version (6.1-1ubuntu1.18.04).
The following packages were automatically installed and are no longer required:
  cmake-data librhash0 libuv1 linux-headers-4.15.0-43 linux-headers-4.15.0-43-generic
  linux-image-4.15.0-43-generic linux-modules-4.15.0-43-generic linux-modules-extra-4.15.0-43-generic
Use 'sudo apt autoremove' to remove them.
0 to upgrade, 0 to newly install, 0 to remove and 66 not to upgrade.
```


[02-Feb-19 11:37 AM] jl777c#5810
pushed workaround

{Reactions}
üëçüèΩ 

[02-Feb-19 11:38 AM] SHossain#0007
this worked. no error

{Reactions}
‚ûï 

[02-Feb-19 11:38 AM] jl777c#5810
now run ./rogue 777


[02-Feb-19 11:38 AM] jl777c#5810
it should replay the keystrokes in the rogue.777 files


[02-Feb-19 11:38 AM] jl777c#5810
from inside cc/rogue


[02-Feb-19 11:39 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541341807590768670/Screenshot_from_2019-02-02_19-38-59.png


[02-Feb-19 11:39 AM] SHossain#0007
```
./rogue 777
replay 777
loaded 58 from (rogue.777.0) total 58
loaded 58 from (rogue.777.1) total 116
loaded 58 from (rogue.777.2) total 174
```


[02-Feb-19 11:39 AM] jl777c#5810
seems it worked


[02-Feb-19 11:39 AM] jl777c#5810
./rogue <seed> gui


[02-Feb-19 11:39 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541341934371864586/unknown.png


[02-Feb-19 11:39 AM] jl777c#5810
that will play the game and make keystroke files, which can then be replayed


[02-Feb-19 11:40 AM] jl777c#5810
for now, only that is working


[02-Feb-19 11:40 AM] jl777c#5810
but the idea is that given a seed and keystrokes, we always end up in the same state


[02-Feb-19 11:40 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541342175770968074/Screenshot_from_2019-02-02_19-40-14.png


[02-Feb-19 11:40 AM] jl777c#5810
you can verify this by comparing savefile with checkfile after the replay is done


[02-Feb-19 11:41 AM] jl777c#5810
if you ever get it so replay is not matching the initial state, that is a bad bug and I will need the keystroke files, along with the savefile


[02-Feb-19 11:42 AM] SHossain#0007
i need to learn to play this :abusedsmily:


[02-Feb-19 11:42 AM] TonyL#3577
`Kicking bats and snakes asses`


[02-Feb-19 11:42 AM] SHossain#0007
never played this game before


[02-Feb-19 11:42 AM] jl777c#5810
dont, it will eat up all your time. it is like C


[02-Feb-19 11:43 AM] SHossain#0007
ok


[02-Feb-19 11:43 AM] SHossain#0007
not playing üòõ


[02-Feb-19 11:43 AM] jl777c#5810
the origin of most all the exploring games


[02-Feb-19 11:43 AM] TonyL#3577
Kinda first RPG


[02-Feb-19 11:43 AM] SHossain#0007
```
./rogue test gui
Hello alien, just a moment while I dig the dungeon... seed.0

Top Ten Scores:
   Score Name
```


[02-Feb-19 11:44 AM] jl777c#5810
i will try to figure out how to get the ingame items into tokens, then DEX can be used to sell items earned


[02-Feb-19 11:44 AM] jl777c#5810
seed needs to be a number


[02-Feb-19 11:44 AM] jl777c#5810
seed of 0 will be not good


[02-Feb-19 11:44 AM] jl777c#5810
i will add check for that


[02-Feb-19 11:44 AM] SHossain#0007
i used `test` as seed


[02-Feb-19 11:45 AM] jl777c#5810
pushed fix, if seed comes in as 0 i change it to 777


[02-Feb-19 11:45 AM] jl777c#5810
no need to update for this


[02-Feb-19 11:45 AM] jl777c#5810
./rogue 123 gui


[02-Feb-19 11:46 AM] jl777c#5810
then when you Q, or go past 460 keystrokes or down to level 2, it will make a keystroke file


[02-Feb-19 11:46 AM] jl777c#5810
then you can ctrl-C, to exit


[02-Feb-19 11:46 AM] jl777c#5810
./rogue 123 will replay the identical game, or it has to in order for this to be able to be blockchain enforced


[02-Feb-19 11:47 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541343900845998081/Screenshot_from_2019-02-02_19-47-13.png


[02-Feb-19 11:47 AM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541343914590994432/unknown.png


[02-Feb-19 11:47 AM] TonyL#3577
Damn


[02-Feb-19 11:48 AM] jl777c#5810
any rogue.<seed>.* files?


[02-Feb-19 11:48 AM] jl777c#5810
make sure it replays the exact game


[02-Feb-19 11:48 AM] SHossain#0007
```
./rogue 123 gui
Hello alien, just a moment while I dig the dungeon... seed.123

Top Ten Scores:
   Score Name
 1    19 alien: quit on level 1.
```


[02-Feb-19 11:49 AM] SHossain#0007
rogue.777.0
rogue.777.1
rogue.777.2
rogue.777.3


[02-Feb-19 11:50 AM] TonyL#3577
```./rogue 777 gui
Hello root, just a moment while I dig the dungeon... seed.777

Top Ten Scores:
   Score Name
 1   166 root: killed on level 1 by a bat.
[Press return to continue]
```


[02-Feb-19 11:50 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541344726213722162/Screenshot_from_2019-02-02_19-50-29.png


[02-Feb-19 11:50 AM] TonyL#3577
No any new files created in `rouge` folder


[02-Feb-19 11:51 AM] SHossain#0007
i have those new files created


[02-Feb-19 11:51 AM] jl777c#5810
did you get to level 2?


[02-Feb-19 11:51 AM] SHossain#0007
no


[02-Feb-19 11:51 AM] SHossain#0007
just level 1


[02-Feb-19 11:51 AM] jl777c#5810
@TonyL what dir did you run it from?


[02-Feb-19 11:51 AM] jl777c#5810
that is where the files will be


[02-Feb-19 11:52 AM] TonyL#3577
@jl777c I run from rouge folder. Bat killed me on lvl1


[02-Feb-19 11:52 AM] TonyL#3577
So I guess it's a reason


[02-Feb-19 11:52 AM] jl777c#5810
oh, then you died before it would have made any files


[02-Feb-19 11:52 AM] jl777c#5810
try to survive to level 2

{Reactions}
üëå 

[02-Feb-19 11:53 AM] TonyL#3577
@SHossain `I` opens inventory


[02-Feb-19 11:54 AM] TonyL#3577
Can change the weapon or use food


[02-Feb-19 11:54 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541345703343947776/Screenshot_from_2019-02-02_19-54-22.png


[02-Feb-19 11:54 AM] SHossain#0007
what is this?


[02-Feb-19 11:54 AM] jl777c#5810
a scroll


[02-Feb-19 11:54 AM] jl777c#5810
there is a very good readme


[02-Feb-19 11:57 AM] SHossain#0007
thanks. found the html file


[02-Feb-19 12:15 PM] SHossain#0007
at level 2


[02-Feb-19 12:18 PM] TonyL#3577
Have we die on lvl2 or it should creates if just exit?


[02-Feb-19 12:20 PM] SHossain#0007
died in level 2


[02-Feb-19 12:20 PM] SHossain#0007
new file was created `rogue.123.2`


[02-Feb-19 12:20 PM] SHossain#0007
started the game with `./rogue 123 gui`


[02-Feb-19 12:23 PM] jl777c#5810
to replay do


[02-Feb-19 12:23 PM] jl777c#5810
./rogue 123


[02-Feb-19 12:23 PM] TonyL#3577
Replay seems work


[02-Feb-19 12:24 PM] jl777c#5810
yes, it was a trick to make it replay precisely and worried it wont always be identical state


[02-Feb-19 12:24 PM] TonyL#3577
Saw my inglorious death again :/


[02-Feb-19 12:25 PM] jl777c#5810
when the ingame items can be extracted from a blockchain validated keystrokes file


[02-Feb-19 12:25 PM] jl777c#5810
then it will become a lot more interesting


[02-Feb-19 12:26 PM] TonyL#3577
Cool, since tokensCC have DEX inside it will possible to trade ingame items


[02-Feb-19 12:26 PM] TonyL#3577
I guess


[02-Feb-19 12:26 PM] jl777c#5810
yes, exactly


[02-Feb-19 12:27 PM] TonyL#3577
Fantastic stuff


[02-Feb-19 12:27 PM] jl777c#5810
the control flow would be to creategame with buyin defined


[02-Feb-19 12:27 PM] jl777c#5810
idea is someone will challenge someone or announce and then people will be able to see it via "pending"


[02-Feb-19 12:27 PM] TonyL#3577
Will be there some bots protection?


[02-Feb-19 12:27 PM] jl777c#5810
then 5 minutes to register


[02-Feb-19 12:28 PM] jl777c#5810
i think for play money, bots wont be an issue


[02-Feb-19 12:28 PM] TonyL#3577
Hmm or maybe no need bots protection - can make a clash of AI


[02-Feb-19 12:28 PM] jl777c#5810
eventually bots can and will arrive and the game will evolve into bot wars

{Reactions}
üíØ 

[02-Feb-19 12:28 PM] TonyL#3577
If somebody wants


[02-Feb-19 12:28 PM] jl777c#5810
exactly


[02-Feb-19 12:28 PM] jl777c#5810
in early days it is easy mining


[02-Feb-19 12:29 PM] SHossain#0007
at level 5 now

{Reactions}
üëæ 

[02-Feb-19 12:29 PM] jl777c#5810
bots are like ASIC


[02-Feb-19 12:29 PM] TonyL#3577
PoR - proof of rogue


[02-Feb-19 12:29 PM] TonyL#3577
üòÉ


[02-Feb-19 12:29 PM] jl777c#5810
so you register and at first for newbie games, you just register. for buyin you need to have ROGUE coins


[02-Feb-19 12:29 PM] TonyL#3577
Oh newbie games are faucet like


[02-Feb-19 12:29 PM] jl777c#5810
eventually the register will specify the external items you want to put back ingame


[02-Feb-19 12:30 PM] jl777c#5810
yes, so people can farm by starting a newbie game, getting items and quit


[02-Feb-19 12:30 PM] jl777c#5810
that saves the inventory and any new items you got you can extract


[02-Feb-19 12:31 PM] jl777c#5810
so eventually the registering will be very interesting 5 minutes as people decide what items to bring ingame. those are lost if you die or get lost ingame


[02-Feb-19 12:31 PM] jl777c#5810
once you are registered, it will submit progress of keystrokes, basically the keystrokes files in opreturn with state hashes. this way every node can verify you did find the 777 gold pieces


[02-Feb-19 12:32 PM] jl777c#5810
and in rogue you win by finding the amulet of yendor and go up back to level 1


[02-Feb-19 12:32 PM] jl777c#5810
so that is the winning condition to win all the buyins


[02-Feb-19 12:32 PM] TonyL#3577
Seems like another XX millions Ethereum smart-contact  ICO functionality


[02-Feb-19 12:32 PM] jl777c#5810
running rogue on ETH would burn up a lot of gas


[02-Feb-19 12:33 PM] jl777c#5810
imagine paying $4 in gas, just to be killed by a snake


[02-Feb-19 12:33 PM] TonyL#3577
I mean like you saw some project made ICO for onchain Sudoku üòÉ


[02-Feb-19 12:33 PM] jl777c#5810
this is 10x or more than sudoku


[02-Feb-19 12:34 PM] jl777c#5810
it is a proof of concept for any game that is deterministic random


[02-Feb-19 12:34 PM] SHossain#0007
reply works fine too


[02-Feb-19 12:34 PM] SHossain#0007
just quit at level 5


[02-Feb-19 12:34 PM] SHossain#0007
too much addictive


[02-Feb-19 12:34 PM] jl777c#5810
it is quite dangerous


[02-Feb-19 12:35 PM] SHossain#0007
will only play for testing if needed :abusedsmily:


[02-Feb-19 12:35 PM] jl777c#5810
with all the different scrolls, rings,staffs,weapons, monsters. it seems to have a lot more depth thanmany more recent games


[02-Feb-19 12:35 PM] TonyL#3577
Super dangerous! I've spent a lot of nights on it - on mobile especially üòÇ


[02-Feb-19 12:35 PM] SHossain#0007
yes, a lot of features


[02-Feb-19 12:35 PM] jl777c#5810
on rogue?


[02-Feb-19 12:35 PM] TonyL#3577
There is a lot of interesting ports of rogue


[02-Feb-19 12:35 PM] TonyL#3577
Dungeon this, dungeon that


[02-Feb-19 12:36 PM] jl777c#5810
any idea how many rogue players there are?


[02-Feb-19 12:36 PM] SHossain#0007
i used  to play something similar (forgot the name) around 1993-4 time


[02-Feb-19 12:36 PM] SHossain#0007
on a console


[02-Feb-19 12:37 PM] SHossain#0007
with game cassetes


[02-Feb-19 12:37 PM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/541356460638994462/Screenshot_2019-02-03-03-36-57-289_com.android.vending.png


[02-Feb-19 12:37 PM] TonyL#3577
1m+ downloads


[02-Feb-19 12:37 PM] jl777c#5810
from the GUI, can you launch a console for the ./rogue?


[02-Feb-19 12:38 PM] TonyL#3577
From the GUI of this mobile game?


[02-Feb-19 12:38 PM] jl777c#5810
for ROGUE chain


[02-Feb-19 12:39 PM] jl777c#5810
i am thinking of the GUI, which will mostly be doing "lobby" function and eventually managing the inventory of ingame/external items


[02-Feb-19 12:39 PM] jl777c#5810
but for the gameplay, it needs to run in a console


[02-Feb-19 12:39 PM] TonyL#3577
Ah I see, launch terminal from GUI - why not I think


[02-Feb-19 12:40 PM] TonyL#3577
Like a Sudoku have a graphical interface for interaction with board and terminal outputs


[02-Feb-19 12:40 PM] jl777c#5810
all the newgame, pending, register should be easy enough. I probably need to make it automatically do the pending tx


[02-Feb-19 12:40 PM] jl777c#5810
then when you win, the gui can do the claimwin and extract rpc calls


[02-Feb-19 12:41 PM] TonyL#3577
Some attractive graphics is needed


[02-Feb-19 12:41 PM] jl777c#5810
i think there might be rogue text -> graphics GUI engines


[02-Feb-19 12:41 PM] SHossain#0007
yes, shiny graphics are the soul of modern games


[02-Feb-19 12:42 PM] jl777c#5810
there should be something off the shelf that can visualize the rogue text screens


[02-Feb-19 12:42 PM] SHossain#0007
and, bit of animation and special effect


[02-Feb-19 12:43 PM] jl777c#5810
it shouldnt be so hard to add a graphics layer on top as the game engine is generating all the events and drawing them onscreen


[02-Feb-19 12:43 PM] TonyL#3577
https://github.com/jacobbogers/rogue-game

{Embed}
https://github.com/jacobbogers/rogue-game
jacobbogers/rogue-game
Quest for Dungeons HTML/CSS/JS remake. Contribute to jacobbogers/rogue-game development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/aCqFkxD5Cp7y3re4KX8IG8DbOlxBTtTrMLyG8Vr6dLw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/896018


[02-Feb-19 12:43 PM] jl777c#5810
the hard part that nobody ever did was to blockchain enforce an rpg


[02-Feb-19 12:44 PM] jl777c#5810
it needs to work with the original rogue


[02-Feb-19 12:45 PM] jl777c#5810
maybe we need to do some joint project with a game company for the visualization


[02-Feb-19 12:45 PM] TonyL#3577
It working with similar elements - maybe possible to port on original one


[02-Feb-19 12:46 PM] jl777c#5810
i dont want to get sidetracked into making some graphical game


[02-Feb-19 12:46 PM] jl777c#5810
that will eat infinite time


[02-Feb-19 12:46 PM] TonyL#3577
For purchases store design, lobby design collaboration is needed anyway


[02-Feb-19 12:46 PM] TonyL#3577
Items design, game design to make balance of items price and etc


[02-Feb-19 12:47 PM] jl777c#5810
so maybe all we need is a TUI


[02-Feb-19 12:47 PM] jl777c#5810
fits in with the text nature and then let somebody else convert it into graphics


[02-Feb-19 12:48 PM] TonyL#3577
For mechanics maturing/testing TUI should be enough


[02-Feb-19 12:48 PM] jl777c#5810
agreed. let us aim for that


[02-Feb-19 12:48 PM] jl777c#5810
i am sure somebody with the graphics experience will want to help out on that side of things, it is quite cool to have a blockchained rpg


[02-Feb-19 12:49 PM] jl777c#5810
i guess there is one on ETH already, but not sure how good it is


[02-Feb-19 12:50 PM] TonyL#3577
Hmm it have gameplay based on chain or only payments?


[02-Feb-19 12:50 PM] jl777c#5810
and who wants to burn ETH to play a game?


[02-Feb-19 12:50 PM] jl777c#5810
not sure of any details. i heard of some space adventure game


[02-Feb-19 12:50 PM] TonyL#3577
Game which I saw  have only token payments of ingame items


[02-Feb-19 12:52 PM] TonyL#3577
So Sudoku -> in a few days Rogue: You can come to GTA6 on blockchain with such progress üòÇ


[02-Feb-19 12:53 PM] jl777c#5810
all that is needed is game engine that is deterministic random


[02-Feb-19 12:53 PM] SHossain#0007
i want Need For Speed


[02-Feb-19 12:53 PM] jl777c#5810
ROGUE is a demonstration of how to blockchain such a game


[02-Feb-19 12:54 PM] jl777c#5810
it will take a full week to do it though, much more work than SUDOKU

{Reactions}
üöÄ (5) charmander_dancing carlton letsplay üóø 

[02-Feb-19 12:57 PM] Jonathan#3687
A nes Zelda style rpg with treasure chests in the game that have KMD....would change the world :


[02-Feb-19 12:58 PM] jl777c#5810
that would be much easier than ROGUE, at least if it is a text adventure game. but it would be english only...


[02-Feb-19 12:59 PM] SHossain#0007
would racing game be possible?


[02-Feb-19 12:59 PM] SHossain#0007
upgrades, trading cars, car parts


[02-Feb-19 12:59 PM] SHossain#0007
winning matches


[02-Feb-19 12:59 PM] jl777c#5810
given a deterministic game engine, ANY such game can be blockchained


[02-Feb-19 01:00 PM] TonyL#3577
Haha we made such GUI for etherem with opensource crew I worked before


[02-Feb-19 01:00 PM] jl777c#5810
the key is that given a 64bit seed and the same user events, identical state is achieved


[02-Feb-19 01:00 PM] TonyL#3577
Racing on spaceships


[02-Feb-19 01:00 PM] SHossain#0007
someone needs to contact EA


[02-Feb-19 01:00 PM] SHossain#0007
or Gameloft


[02-Feb-19 01:01 PM] jl777c#5810
i just liked rogue as it doesnt have a clock, has ingame items and doesnt need graphics


[02-Feb-19 01:01 PM] jl777c#5810
plus it seems to be quite rich in gameplay


[02-Feb-19 01:02 PM] jl777c#5810
so long durations of gameplay fits in an opreturn


[02-Feb-19 01:02 PM] SHossain#0007
that's a nice idea to start with rogue


[02-Feb-19 01:03 PM] jl777c#5810
anyway, just another demonstration of what can be done with CC

{Reactions}
üíØ (4) 

[02-Feb-19 01:15 PM] TonyL#3577
Imo terminal rogue game is infinity times more interesting to play that any "collectable" game like a cryptokitties even if this "collectable" game will have best graphics in the universe


[02-Feb-19 01:16 PM] TonyL#3577
Because it have a gameplay! üòÉ


[02-Feb-19 03:51 PM] dukeleto#7326
This might provide some inspiration or maybe can be integrated somehow: https://github.com/textadventures/quest

{Embed}
https://github.com/textadventures/quest
textadventures/quest
Create text adventure games. Contribute to textadventures/quest development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/4GFpfdvPbwPcUTtaHJsEJQh5QQn9TuKlo_WP2GClnzI/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/5058951


[02-Feb-19 05:59 PM] grewalsatinder#9653
I wonder if James will really make "Ready Player One" type of thing but on blockchain instead one day..... üòÑ


[02-Feb-19 05:59 PM] grewalsatinder#9653
Loved that book and movie.

{Reactions}
üòÇ 

[02-Feb-19 11:37 PM] passcombo.com üè¥‚ò†üçã#0622
is it possible to have a cc-fair-ico that will allow to 1. auto send back collected KMD when soft cap not reached 2. pay collected KMD in installments after voting 3. when projects failed after some installments - people voted to kill it - send back the remaining KMD ?


[02-Feb-19 11:38 PM] passcombo.com üè¥‚ò†üçã#0622
I think fair-ico machine would be great for fair projects in ecosystem, might also get some attention from media maybe


[02-Feb-19 11:39 PM] passcombo.com üè¥‚ò†üçã#0622
this coule be really a product ready to use as ico's run every day almost - since product ready to use might be advertised more then any other


[03-Feb-19 01:04 AM] Bitcoin Benny#9597
Re the game company, I can talk to the lead designer from H1Z1, I just need a clear brief


[03-Feb-19 02:11 AM] jl777c#5810
to make a graphics display that is driven by original rogue game events (text only)


[03-Feb-19 02:12 AM] jl777c#5810
@passcombo.com üè¥‚ò†üçã certainly such a ico CC  can be done, but it seems there is not much demand for it. CC are turing complete ->anything that can have some program written for it can be done in a CC


[03-Feb-19 04:37 AM] passcombo.com üè¥‚ò†üçã#0622
I understand there is "no demand" but I believe it is simmilar "no demand" as denamnd for cars before car era - people do not know they like to have sth before it comes into existance (horses where perfect transportation for many - why some strange engine?). Once investors understand it's sth that can be there and work for securing their funds - they will expect everyone use that.


[03-Feb-19 04:37 AM] passcombo.com üè¥‚ò†üçã#0622
fair ico cc or maybe better - fair startup cc


[03-Feb-19 04:37 AM] passcombo.com üè¥‚ò†üçã#0622
it funding any startup is more general then just ico


[03-Feb-19 04:40 AM] passcombo.com üè¥‚ò†üçã#0622
Is there a progress table for cc with work time estimation? Even if the idea do not suit current time - good to keep all cc ideas in some table with progress and rough work time estimation,. Community will grow into more devs, some things can be realised later.


[04-Feb-19 09:31 PM] DG#6934
Thats a good idea indeed


[04-Feb-19 10:00 PM] hastrup#8742
I like it to


[06-Feb-19 04:01 AM] Mylo#8306
@TonyL @jl777c TUI is the best yes plz.  All we need to show is the logic flow / workflow for existing CC.  When ppl can see flow with the CC code, it will have bigger effect


[06-Feb-19 04:01 AM] Mylo#8306
For understanding & adoption


[07-Feb-19 07:20 PM] n2okpride#1967
https://github.com/evennia/evennia

{Embed}
https://github.com/evennia/evennia
evennia/evennia
Python MUD/MUX/MUSH/MU* development system. Contribute to evennia/evennia development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/7legaa1aR_1ziBOKwncRAIt469R2LOmjDr50oWXL7yQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/1036382


[07-Feb-19 07:25 PM] n2okpride#1967
https://github.com/munificent/hauberk

{Embed}
https://github.com/munificent/hauberk
munificent/hauberk
A web-based roguelike written in Dart. Contribute to munificent/hauberk development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/VKoEUX-ctvr53f7TvDb1AuwXHzkEO-ZojyqLHNpGxoY/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/46275


[07-Feb-19 07:26 PM] n2okpride#1967
https://github.com/leereilly/games

{Embed}
https://github.com/leereilly/games
leereilly/games
:video_game: A list of popular/awesome videos games, add-ons, maps, etc. hosted on GitHub. Any genre. Any platform. Any engine. - leereilly/games
https://images-ext-1.discordapp.net/external/3jXKTMrQdwU4w5Pvel0b7rXff5235iVpymMYJeQDTzw/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/121322


[07-Feb-19 07:27 PM] n2okpride#1967
i'm sure we can find one of these "dead" open source games and breathe new life into it, possibly even reach out to their devs


[07-Feb-19 07:27 PM] n2okpride#1967
https://github.com/watabou/pixel-dungeon

{Embed}
https://github.com/watabou/pixel-dungeon
watabou/pixel-dungeon
Traditional roguelike game with pixel-art graphics and simple interface - watabou/pixel-dungeon
https://images-ext-2.discordapp.net/external/4XEhRHs0Sw1Y2TG9N_tM-VvqrjlNmiGyqHSoaB4ekNk/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/594670


[07-Feb-19 08:22 PM] Mylo#8306
the dart one is interesting.


[07-Feb-19 08:34 PM] Mylo#8306
there's heaps there to retrofit to blockchain incentives @n2okpride


[07-Feb-19 09:58 PM] Mylo#8306
I‚Äôve  left a msg with one web based with recent commits and a roadmap


[08-Feb-19 03:57 AM] Crabby Paddy#6239
Pixel dungeon is amazing


[08-Feb-19 03:58 AM] Crabby Paddy#6239
Shattered pixel dungeon is a modded version that‚Äôs constantly updated. Even better than the original imo. Maybe try them too üòõ


[08-Feb-19 03:59 AM] Crabby Paddy#6239
https://www.reddit.com/u/00-Evan/?st=JRVZZWCS&sh=015772f9

{Embed}
https://www.reddit.com/u/00-Evan/?st=JRVZZWCS&sh=015772f9


[08-Feb-19 03:59 AM] jl777c#5810
the idea isnt for us (me) to do all possible games. I am making a proof of concept of how to blockchain a deterministic random game. once that is out there, the hope is many game devs decide to launch a chain of their own


[08-Feb-19 04:01 AM] SHossain#0007
@jl777c does these game chains require dPoW? (of course dPoW adds additional layer of security for any chain)


[08-Feb-19 04:14 AM] jl777c#5810
before it becomes something people can trade safely on exchanges, it would need dPoW, but just for protecting ingame gold conversions to ROGUE, it seems dPoW is overkill. even if your tx is reorged, you can just issue another one


[08-Feb-19 04:15 AM] SHossain#0007
Thanks for your answer.


[08-Feb-19 04:16 AM] SHossain#0007
waiting for the day when there will be games built on Komodo Platform which worth millions


[08-Feb-19 05:58 AM] dukeleto#7326
https://twitter.com/NakamotoQuotes/status/1092984968823881734

{Embed}
Satoshi Nakamoto Bot (@NakamotoQuotes)
https://twitter.com/NakamotoQuotes/status/1092984968823881734
If you‚Äôre selling digital goods and services, where you don‚Äôt lose much if someone gets a free access, and it can‚Äôt be resold for profit, I think you‚Äôre fine to accept 0 confirmations. It‚Äôs mostly only if you were selling gold or currency that you‚Äôd need multip...
Twitter


[10-Feb-19 11:33 PM] Deleted User#0000
I have a question, is the Crypto Condition Smart contract running on a side chain in Komodo Platform?


[11-Feb-19 12:29 AM] gcharang#6833
Yes they can be run on any assetchain of Komodo. Heres an introduction: https://komodoplatform.com/crypto-conditions-utxo-based-smart-contracts/

{Embed}
https://komodoplatform.com/crypto-conditions-utxo-based-smart-contracts/
Crypto-Conditions: UTXO-Based Smart Contracts on Komodo Platform
Komodo Platform is the world's leading innovator of blockchain technology. Now, Komodo is implementing Crypto-Conditions and UTXO-based smart contracts.
https://images-ext-2.discordapp.net/external/HQSHUCxgkeR_RB-10E01rWYcg23YOXiFKiUxG-FRYlY/https/komodoplatform.com/wp-content/uploads/2018/08/smart-contracts-image.jpg


[11-Feb-19 12:50 AM] Deleted User#0000
So `Asset Chains` are just really `Komodo` side chains @gcharang ?


[11-Feb-19 12:51 AM] jorian#4555
asset chains are completely independent blockchains


[11-Feb-19 12:52 AM] jorian#4555
i'll let the master speak


[11-Feb-19 12:52 AM] jl777c#5810
side chain has special meaning, we are making those too, but assetchains are independent and have no direct linkage to KMD.


[11-Feb-19 12:53 AM] jl777c#5810
a lot of them notarize to KMD, but that is an independent choice


[11-Feb-19 12:53 AM] jl777c#5810
most of them are runtime forks


[11-Feb-19 12:53 AM] jl777c#5810
no source level changes


[11-Feb-19 12:53 AM] jl777c#5810
though you can do that too, as VRSC has done


[11-Feb-19 01:12 AM] Deleted User#0000
@jl777c thanks, so `Asset Chains` are independent blockchains,  but `Crypto Condition` smart contract runs on-chain and broadcast them to the whole `Asset chain` in the KMD ecosystem?


[11-Feb-19 01:12 AM] Deleted User#0000
For source level changes, what if we change the `signature scheme and PoW algorithm'? Is that still doable with Asset chains?


[11-Feb-19 01:13 AM] Deleted User#0000
Yes.. PoW algo can be changed like VRSC did, we use a modified VeruHash in #kmdlabs


[11-Feb-19 01:15 AM] jl777c#5810
CC for a specific chain is only broadcast to nodes for that specific chain


[11-Feb-19 01:15 AM] jl777c#5810
CC are turing complete, if you can code it, you can put it into a CC. though probably some things dont belong in a CC. certainly a new signature scheme is a perfect fit


[11-Feb-19 01:16 AM] jl777c#5810
you can implement schnorr signatures, or shamirs secret, or whatever fancy new crypto signing method


[11-Feb-19 01:16 AM] jl777c#5810
each new CC is a new dedicated transaction type that must follow all the existing rules and whatever new rules you add


[11-Feb-19 01:20 AM] Deleted User#0000
Thanks @jl777c and @Deleted User , so I have read in the developer docs that the `Asset Chain` has a choice to leave the KMD ecosystem, but once it leaves the ecosystem, is it able to create its own Asset Chain and CC?


[11-Feb-19 01:20 AM] Deleted User#0000
Yes


[11-Feb-19 01:21 AM] jl777c#5810
it is open source, if you want you can fork it and maintain a new project


[11-Feb-19 01:21 AM] Deleted User#0000
Your just working with KMD code base at athat point. With #kmdlabs  we have added quite a large amount of features... but can still load and run/mign all komodo chains


[11-Feb-19 01:21 AM] jl777c#5810
not sure what "leave the KMD ecosystem" means specifically...


[11-Feb-19 01:22 AM] Deleted User#0000
I assume that would mean changing so much copde that it no l;onger ran otehr KMD assetchains...


[11-Feb-19 01:22 AM] jl777c#5810
if it means you wont talk to any of us here, i guess that is possible

{Reactions}
ü§£ 

[11-Feb-19 01:22 AM] Deleted User#0000
or even KMD itself


[11-Feb-19 01:22 AM] jl777c#5810
yes, so source level changes that breaks compatibility. certainly that is possible, but we hope that useful additions are merged back into the mainchain, like VRSC does


[11-Feb-19 01:26 AM] Deleted User#0000
@jl777c  and @Deleted User forking the project might be use a lot of time rather than creating an `Asset Chain`.
I was referring to this part https://developers.komodoplatform.com/basic-docs/start-here/outline-for-new-developers.html#the-komodo-declaration-of-independence

{Embed}
https://developers.komodoplatform.com/basic-docs/start-here/outline-for-new-developers.html
Start Here | Komodo Documentation
Documentation for developers building on Komodo


[11-Feb-19 01:27 AM] Deleted User#0000
Maybe I have wrong understanding on `Move elsewhere` üò¶


[11-Feb-19 01:27 AM] Deleted User#0000
assetchain params are very powerful, unless you wanted something very specific using them is usally enough withoug changing code. Small addition can be made by KMD ourself, which has happened in the past.


[11-Feb-19 01:29 AM] Deleted User#0000
@Deleted User so creating a `Asset Chain` *sample-coin* and changing the PoW and signature scheme perhaps both needs changes on C++ core level and CC?


[11-Feb-19 01:30 AM] Deleted User#0000
changint he PoW isnt trivial ... I know how to add one kind of... but its not like a plug an play option YET... if its highly demanded then its something we can add, but its a lot of work to do it properly.


[11-Feb-19 01:33 AM] gcharang#6833
> I was referring to this part https://developers.komodoplatform.com/basic-docs/start-here/outline-for-new-developers.html#the-komodo-declaration-of-independence

It was refering to the dPOW service

{Embed}
https://developers.komodoplatform.com/basic-docs/start-here/outline-for-new-developers.html
Start Here | Komodo Documentation
Documentation for developers building on Komodo


[11-Feb-19 01:34 AM] Deleted User#0000
@gcharang I thought it was being independent on the ecosystem itself. Sorry my bad


[11-Feb-19 01:36 AM] gcharang#6833
There is no connection between diffrent assetchains, unless they explicitly want it. See: https://developers.komodoplatform.com/basic-docs/installations/asset-chain-parameters.html#summary-of-ac-cc

Many of the crosschain features are in the pipeline and in development

{Embed}
https://developers.komodoplatform.com/basic-docs/installations/asset-chain-parameters.html
Asset Chain Parameters | Komodo Documentation
Documentation for developers building on Komodo


[11-Feb-19 01:37 AM] Deleted User#0000
MoMoM is activated for all chains using ac_cc=2 but there are 0 contracts built unpon it as far as I know... Myabe gatewys? but thats still in development too.


[12-Feb-19 02:28 PM] Bryan_Beus#6442
@jl777c 

I'm going to catch up the CC docs soon.

Can you please give me the best point of contact for each of the following (I'm taking these from the CC discord list):

cc-gui

cc-lib

cc-assets

cc-coda

cc-coinbase

cc-heir

cc-momom

cc-rogue

cc-sudoku


[12-Feb-19 02:33 PM] Bryan_Beus#6442
Also, if there are other CCs that you would like me to start prepping for the front-page facing and user friendly developers.komodoplatform.com , let me know.


[12-Feb-19 05:46 PM] Mylo#8306
@Bryan_Beus look at relevant .cpp files in the FSM branch here https://github.com/jl777/komodo/tree/FSM/src/cc

The contributors that are not jl777 or miketout will have some knowledge about the specific CCs you are enquiring about.

{Embed}
https://github.com/jl777/komodo/tree/FSM/src/cc
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[12-Feb-19 05:48 PM] Bryan_Beus#6442
Good to know, thank you.


[12-Feb-19 06:49 PM] josephnicholas GMT+8#5904
Hi all, is there an example transaction  that I can look into where Crypto Conditions are in action in a UTXO?


[12-Feb-19 08:09 PM] jl777c#5810
dimxy for assets and heir, blackjok8r for momom, tonyL for gui at least tui. no need for coda yet. and I guess i would be the one for the others


[12-Feb-19 09:47 PM] josephnicholas GMT+8#5904
Thanks @jl777c I am doing a research project and summary for my thesis project, and it would be nice if what would the transaction look like when there is CC involved, or am I understanding this incorrectly?


[12-Feb-19 09:54 PM] jl777c#5810
tx are basically the same as normal, just that there are special vout
 {
      "value": 0.08960000,
      "valueZat": 8960000,
      "n": 3,
      "scriptPubKey": {
        "asm": "a22c80203d1579313abe7d8ea85f48c65ea66fc512c878c0d0e6f6d54036669de940febf8103120c008203000401 OP_CHECKCRYPTOCONDITION",
        "hex": "2ea22c80203d1579313abe7d8ea85f48c65ea66fc512c878c0d0e6f6d54036669de940febf8103120c008203000401cc",
        "reqSigs": 1,
        "type": "cryptocondition",
        "addresses": [
          "RAuQoR7wqHcyZPd7qgzHfnw1GjcChPm5E1"
        ]
      }


[12-Feb-19 09:55 PM] jl777c#5810
the cryptoconditions hashes the description of the required conditions and that is used in the OP_CHECKCRYPTOCONDITION script to invoke CC validation


[12-Feb-19 10:13 PM] josephnicholas GMT+8#5904
Sounds kinda complicated, but thank you very much for this example, I will look and learn more, was planning  actually on developing Election Dapp using the Komodo platform, since one thing that I already liked about this project is that its security using dPOW


[12-Feb-19 10:14 PM] josephnicholas GMT+8#5904
@jl777c I am writing a summary on what I have researched, might be great if somebody can review it, before I pass it on to my prof


[12-Feb-19 10:14 PM] josephnicholas GMT+8#5904
üòÑ


[12-Feb-19 10:17 PM] jl777c#5810
just post it here and people will review it


[12-Feb-19 10:27 PM] josephnicholas GMT+8#5904
Thanks


[13-Feb-19 12:33 AM] josephnicholas GMT+8#5904
I got this error, when running the faucet CC


[13-Feb-19 12:33 AM] josephnicholas GMT+8#5904
```error code: -1
error message:
to use CC contracts, you need to launch daemon with valid -pubkey= for an address in your wallet. ERR=-1```


[13-Feb-19 12:34 AM] josephnicholas GMT+8#5904
I already ran the daemon with the pubkey I got from `validateaddress` rpc call


[13-Feb-19 12:41 AM] josephnicholas GMT+8#5904
i jus want to learn to validate ta CC, and how it runs


[13-Feb-19 01:01 AM] TonyL#3577
@josephnicholas GMT+8 Could you please share your assetchain params with which you started your daemon? Seems you not set `-pubkey=` param properly


[13-Feb-19 01:05 AM] josephnicholas GMT+8#5904
@TonyL I need to do an asset chain first? I was thinking of directly using it... So are there any steps to do it?


[13-Feb-19 01:09 AM] TonyL#3577
Cryptoconditions not activated on main KMD chain, so you need to start your own assetchain with activated cryptoconditons or use some existing one  (https://docs.komodoplatform.com/komodo/assetchain-params.html?params#ac-cc ac_cc param determines if cryptoconditons are activated)
You can follow this guide (just add -ac_cc param):
https://developers.komodoplatform.com/basic-docs/installations/creating-asset-chains.html#creating-a-new-asset-chain

{Embed}
https://developers.komodoplatform.com/basic-docs/installations/creating-asset-chains.html
Building a Komodo Asset Chain | Komodo Documentation
Documentation for developers building on Komodo


[13-Feb-19 01:09 AM] TonyL#3577
https://docs.komodoplatform.com/komodo/assetchain-params.html here you can find the detailed description of assetchain customisation params


[13-Feb-19 01:12 AM] josephnicholas GMT+8#5904
@TonyL awesome! Thank you very much.


[13-Feb-19 01:12 AM] TonyL#3577
You're most welcome! Feel free to drop your questions if you'll have any


[13-Feb-19 01:14 AM] TonyL#3577
Actually start new blockchain is super simple.
On the first node start daemon like a:
```./komodod -ac_name=GWTEST2 -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 --daemon```
And on the second node:
```./komodod -ac_name=GWTEST2 -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 -addnode=firstnodeip -gen --daemon```


[13-Feb-19 01:15 AM] TonyL#3577
Then just get `pubkey` from validateaddress, restart daemons with valid `-pubkey=` param and you good to go with CC RPC interaction


[13-Feb-19 01:16 AM] josephnicholas GMT+8#5904
Wow, this really neat!!! But will this  be resource intensive (CPU and network) since I am just on an old mac?


[13-Feb-19 01:18 AM] TonyL#3577
If one of your nodes is old Mac it's better to start daemon with `-gen` param on more powerful machine. But it's not resource hungry actually. I'm using old Macbook Air for everyday work and can spin blockchains on it without problems


[13-Feb-19 01:19 AM] TonyL#3577
It only may be a little bit tricky if you want to start multiply nodes blockchain using single PC - there is workaround with separate configs which maybe quite confusing for a fresh mind start. Easiest way is to spin virtual machine for second daemon - but it can slow down your old Mac I wonder


[13-Feb-19 01:21 AM] TonyL#3577
So it might be a good idea to rent VPS or spin cloud instance (for example Google Cloud and AWS offers free trial periods for plays) for usage as a second mining node


[13-Feb-19 01:27 AM] josephnicholas GMT+8#5904
Thanks @TonyL I will try this and rent a VPS....anyway, I have some non CC related question, how do we know if the hash already notarized? Is it when its already mined by BTC miners?


[13-Feb-19 01:31 AM] josephnicholas GMT+8#5904
And also, can I run the commands above on the same machine?


[13-Feb-19 01:33 AM] TonyL#3577
I'm not a huge dPoW expert. In my understanding notarisation happened when state transaction is on Bitcoin blockchain (other words mined and included to block yes). Somebody will correct me if I'm wrong.


[13-Feb-19 01:35 AM] TonyL#3577
You need two separate nodes to issue commands above (blockchain with one node will not work). There is no easy way to make two separate nodes on single machine


[13-Feb-19 01:37 AM] TonyL#3577
https://blog.komodoplatform.com/delayed-proof-of-work-explained-9a74250dbb86 great article explaining dPoW

{Embed}
https://blog.komodoplatform.com/delayed-proof-of-work-explained-9a74250dbb86
Delayed Proof of Work Explained ‚Äì Komodo Platform
It‚Äôs 2018, and we have recently witnessed many 51% attacks (Double Spending) on various Proof of Work (PoW) based blockchains.
https://images-ext-1.discordapp.net/external/K-fpW1anfp5YdwJNtQrc0KoC9uSWbu_VQfCUCRd8pbw/https/cdn-images-1.medium.com/max/1200/1%2AUdeyCiUcELkn4pWfADKEMA.jpeg


[13-Feb-19 01:46 AM] josephnicholas GMT+8#5904
Thanks @TonyL how about the `ac_cc=2` param?


[13-Feb-19 01:46 AM] josephnicholas GMT+8#5904
what's 2? like it can run 2 smart contracts?


[13-Feb-19 01:47 AM] TonyL#3577
https://docs.komodoplatform.com/komodo/assetchain-params.html?params#ac-cc you'll find the answer here


[13-Feb-19 01:48 AM] TonyL#3577
`ac_cc > 1` using to keep chains in cluster (-ac_cc=2 can interact with other chains with -ac_cc=2)


[13-Feb-19 02:33 AM] josephnicholas GMT+8#5904
Thank you @TonyL


[13-Feb-19 06:38 AM] josephnicholas GMT+8#5904
@TonyL I have a question


[13-Feb-19 06:40 AM] TonyL#3577
Go ahead @josephnicholas GMT+8


[13-Feb-19 06:42 AM] josephnicholas GMT+8#5904
on the minig machine what should I look for?


[13-Feb-19 06:43 AM] josephnicholas GMT+8#5904
Like it said I am missing rpc credintials


[13-Feb-19 06:44 AM] josephnicholas GMT+8#5904
and what should I add for the addnode if I am on a VPS?


[13-Feb-19 06:45 AM] TonyL#3577
If first node is your Macbook you have to use public IP of your Macbook in `addnode=` param of second node


[13-Feb-19 06:45 AM] TonyL#3577
Could you share the full command by which you starting the daemon and error which you're getting?


[13-Feb-19 06:47 AM] josephnicholas GMT+8#5904
```azureuser@abe:~/komodo/src$ ./komodo-cli getinfo
error: couldn't connect to server: unknown (code -1)
(make sure server is running and you are connecting to the correct RPC port)```


[13-Feb-19 06:48 AM] TonyL#3577
What are you trying to do?


[13-Feb-19 06:49 AM] josephnicholas GMT+8#5904
So I ran this on my macbook
`./komodod -ac_name=TESTOKEN -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 --daemon`
then on a Azure VPS
`./komodod -ac_name=TESTOKEN -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 -addnode=<MacbookIP> -gen --daemon`


[13-Feb-19 06:49 AM] josephnicholas GMT+8#5904
then I will try to get the pubkey


[13-Feb-19 06:50 AM] josephnicholas GMT+8#5904
but I always get the error everytime I do an rpc call with Komodod-cli


[13-Feb-19 06:50 AM] TonyL#3577
Issue calls for assetchain as `./komodo-cli -ac_name=TESTOKEN getinfo`


[13-Feb-19 06:51 AM] TonyL#3577
Use -ac_name= in every call for assetchain
./komodo-cli calls without -ac_name param issuing calls to KMD chain daemon - and KMD chain daemon isn't up on your node


[13-Feb-19 06:51 AM] josephnicholas GMT+8#5904
azureuser@abe:~/komodo/src$ ./komodo-cli -ac_name=TESTOKEN getinfo
Error reading configuration file: Missing komodo.conf


[13-Feb-19 06:52 AM] josephnicholas GMT+8#5904
Okay I got it now


[13-Feb-19 06:52 AM] josephnicholas GMT+8#5904
missing a `T`


[13-Feb-19 06:52 AM] TonyL#3577
üëç  names should match


[13-Feb-19 06:53 AM] TonyL#3577
It's looking for config in `~/.komodo/<ac_name>/<ac_name>.conf`


[13-Feb-19 06:53 AM] josephnicholas GMT+8#5904
But I am not adding `addnode` that's okay?


[13-Feb-19 06:53 AM] josephnicholas GMT+8#5904
Okay, that makes sense, totally new to this stuff

{Reactions}
üëå Komodo 

[13-Feb-19 06:53 AM] josephnicholas GMT+8#5904
So should I wait unti block is 1?


[13-Feb-19 06:54 AM] TonyL#3577
Yes, you have to specify `addnode` param only for `komodod` start


[13-Feb-19 06:54 AM] TonyL#3577
Could you please share full output of `./komodo-cli -ac_name=TESTTOKEN getinfo` ?


[13-Feb-19 06:55 AM] josephnicholas GMT+8#5904
Okay wait


[13-Feb-19 06:55 AM] TonyL#3577
Just to ensure that your nodes see each other now - there is `connections` param - it should be `1` if nodes connected


[13-Feb-19 06:55 AM] josephnicholas GMT+8#5904
```azureuser@abe:~/komodo/src$ ./komodo-cli -ac_name=TESTTOKEN getinfo
{
  "version": 2001526,
  "protocolversion": 170007,
  "KMDversion": "0.3.3b",
  "notarized": 0,
  "prevMoMheight": 0,
  "notarizedhash": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid_height": "mempool",
  "KMDnotarized_height": 0,
  "notarized_confirms": 0,
  "walletversion": 60000,
  "balance": 0.00000000,
  "blocks": 0,
  "longestchain": 0,
  "timeoffset": 0,
  "tiptime": 1231006505,
  "connections": 0,
  "proxy": "",
  "difficulty": 1,
  "testnet": false,
  "keypoololdest": 1550069210,
  "keypoolsize": 101,
  "paytxfee": 0.00000000,
  "relayfee": 0.00000100,
  "errors": "",
  "CCid": 2,
  "name": "TESTTOKEN",
  "sapling": -1,
  "p2pport": 47289,
  "rpcport": 47290,
  "magic": 2068091789,
  "premine": 5555555,
  "reward": "10000000000000",
  "halving": "0",
  "decay": "0",
  "endsubsidy": "0"
}```


[13-Feb-19 06:56 AM] josephnicholas GMT+8#5904
I did not do anything on `addnode` yet, since I don't know how to have a public address on my mac


[13-Feb-19 06:57 AM] TonyL#3577
`"connections": 0,` - means that nodes aren't connected
I think it's better to do vice versa.
1) Stop daemons now
2) Start daemon on VPS without addnode param
3) Start daemon  on laptop with `-addnode=<ip_of_VPS>` param


[13-Feb-19 06:58 AM] TonyL#3577
If your nodes connect each other you'll see ```"connections": 1,``` in getinfo


[13-Feb-19 06:58 AM] josephnicholas GMT+8#5904
so the daemon on the laptop mines?


[13-Feb-19 06:58 AM] josephnicholas GMT+8#5904
and the VPS doesn't?


[13-Feb-19 06:58 AM] TonyL#3577
You can remain `-gen` param on VPS as before


[13-Feb-19 06:58 AM] josephnicholas GMT+8#5904
okay2x got it


[13-Feb-19 06:59 AM] josephnicholas GMT+8#5904
I'll try


[13-Feb-19 07:01 AM] TonyL#3577
There might  be limitations / blocking by your firewall and/or router also - don't know configuration of network to which your laptop connected and configuration of firewall on VPS. At least  "p2pport": from getinfo should be opened


[13-Feb-19 07:08 AM] josephnicholas GMT+8#5904
still 0 on connections, mayve you are right with firewall


[13-Feb-19 07:10 AM] TonyL#3577
try to `telnet <ip> <p2pport>` both ways


[13-Feb-19 07:11 AM] josephnicholas GMT+8#5904
no I can't connect


[13-Feb-19 07:11 AM] josephnicholas GMT+8#5904
I have no control of this VPS


[13-Feb-19 07:11 AM] josephnicholas GMT+8#5904
maybe I will ask admin of my school


[13-Feb-19 07:12 AM] josephnicholas GMT+8#5904
but can I now test CC even at block 0?


[13-Feb-19 07:16 AM] TonyL#3577
Which komodod daemon version (from which source you downloaded it) are you using?
We may to try to setup blockchain with my VPS as one node and your Macbook as  second node if your Macbook's in network without such network restrictions


[13-Feb-19 07:16 AM] TonyL#3577
I'll just run komodod of same version and will provide you params to sync


[13-Feb-19 07:18 AM] TonyL#3577
```"KMDversion": "0.3.3b"``` oh found it in your call. I guess it's this one: https://github.com/KomodoPlatform/komodo/releases/tag/beta-multios-0.3.3b-beta

{Embed}
https://github.com/KomodoPlatform/komodo/releases/tag/beta-multios-0.3.3b-beta
KomodoPlatform/komodo
Komodo. Contribute to KomodoPlatform/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[13-Feb-19 07:20 AM] josephnicholas GMT+8#5904
Thank you


[13-Feb-19 07:20 AM] josephnicholas GMT+8#5904
do you need my IP?


[13-Feb-19 07:21 AM] jl777c#5810
why not to use existing test chain for CC testing?


[13-Feb-19 07:21 AM] TonyL#3577
Is there any?


[13-Feb-19 07:21 AM] jl777c#5810
TXSCL, @SHossain would know


[13-Feb-19 07:21 AM] TonyL#3577
```./komodod -ac_name=INDIOCC -ac_supply=5555555 -ac_reward=10000000000000 -ac_cc=2 -addnode=159.69.201.122 -addnode=159.69.45.70 --daemon```


[13-Feb-19 07:22 AM] TonyL#3577
Just spinned a chain with two nodes on `"KMDversion": "0.3.3b"` komodod version


[13-Feb-19 07:22 AM] SHossain#0007
TXSCLCC


[13-Feb-19 07:23 AM] josephnicholas GMT+8#5904
should I run the parameters above @TonyL


[13-Feb-19 07:23 AM] SHossain#0007 (pinned)
Test TXSCLCC chain:
```
./komodod -ac_name=TXSCLCC -ac_supply=0 -ac_reward=2500000000 -ac_halving=210000 -ac_cc=2 -addressindex=1 -spentindex=1 -addnode=54.36.126.42 -addnode=94.130.224.11 &
```
Explorer: http://txsclcc.explorer.dexstats.info/

{Embed}
http://txsclcc.explorer.dexstats.info/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[13-Feb-19 07:24 AM] josephnicholas GMT+8#5904
also `&`


[13-Feb-19 07:25 AM] TonyL#3577
@josephnicholas GMT+8 You can run daemon with any of params above. Better to use `TXSCLCC`. Didn't know there is alive chain for CC testing


[13-Feb-19 07:26 AM] josephnicholas GMT+8#5904
Okay so I run `TXSCLCC` now I get the pubkey then run again komodod again right?


[13-Feb-19 07:26 AM] TonyL#3577
Yes


[13-Feb-19 07:26 AM] SHossain#0007
`&` and `-daemon` does the same job


[13-Feb-19 07:32 AM] josephnicholas GMT+8#5904
Got the faucet working, OMG, this is just incredible.


[13-Feb-19 07:32 AM] josephnicholas GMT+8#5904
But the addresses and keys are hardcoded right?


[13-Feb-19 07:35 AM] josephnicholas GMT+8#5904
so the myCCAddress is built from the pubKey that I published right?


[13-Feb-19 07:39 AM] TonyL#3577
Yes, your CC address generating for your `-pubkey`.
This `pubkey` param is like a ID or passport in the CC world.

Here you can find conceptual description of faucetCC:
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/all_chapters.md#chapter-6---faucet-example
And RPC calls examples are in this file on faucet page:
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit#gid=211514340

{Embed}
https://github.com/KomodoPlatform/Mastering_CryptoConditions/blob/master/all_chapters.md
KomodoPlatform/Mastering_CryptoConditions
How to write utxo based CryptoConditions contracts for KMD chains - by jl777 - KomodoPlatform/Mastering_CryptoConditions
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Embed}
https://docs.google.com/spreadsheets/d/1l0dWEPcrv9zE11_TD-XrX_HIYV0VLpadCJN6hvaZERc/edit
Smart Contract Test Plan
Faucet


Faucet Contract
Available RPC calls,What does this Call do?,Example Test Command,Example Expected Output,What to Check,Comments,Testing Result
faucetaddress [pubkey],Will display central faucet address and your faucet contract address for your pubkey.
pubkey starts w...
https://images-ext-2.discordapp.net/external/QZIWn2gC2YrS-VtzZN9auV-B7hhTp1IBFxoo9o3BBOo/https/lh4.googleusercontent.com/jG0EwoRG0GKTwPpnAwZivN2UkcMWt-qr3QUTPsmy2nz8nNGRLIBXezodcKzZoKg9bFwJDQ%3Dw1200-h630-p


[13-Feb-19 07:39 AM] josephnicholas GMT+8#5904
So when doing `faucetfund` it will get the funds from the CC address?


[13-Feb-19 07:39 AM] TonyL#3577
If you doing faucetfund it will get the funds from your wallet


[13-Feb-19 07:40 AM] josephnicholas GMT+8#5904
Okay, meaning the UTXOs right?


[13-Feb-19 07:42 AM] josephnicholas GMT+8#5904
so everytime i do a rpc call, does it make a transaction? or only just those involving funds? Like
`faucetfund` creates a tx but `faucetaddress` doesn't


[13-Feb-19 07:42 AM] josephnicholas GMT+8#5904
I asked this because in Some other Smart Contract blockchain, every process needs gas . üòÑ


[13-Feb-19 07:44 AM] TonyL#3577
`faucetaddress` is a debug call which only scanning but not generating any transaction
`faucetfund` - call which generating raw transaction with needed params to fund faucet


[13-Feb-19 07:46 AM] TonyL#3577
You can easily check in details inputs and outputs of generated transaction 
```./komodo-cli -ac_name=assetchain faucetfund 1
{
  "result": "success",
  "hex": "hexhere"
}
```
``` ./komodo-cli -ac_name=assetchain decoderawtransaction <hexgeneratedbyfaucetfund>```


[13-Feb-19 07:47 AM] josephnicholas GMT+8#5904
okay got it on the link you sent


[13-Feb-19 07:48 AM] josephnicholas GMT+8#5904
this really nice


[13-Feb-19 07:48 AM] josephnicholas GMT+8#5904
what an innovation


[13-Feb-19 07:48 AM] TonyL#3577
To broadcast transaction on blockchain use `./komodo-cli -ac_name=assetchain sendrawtransaction hex` and you'll get transaction id


[13-Feb-19 07:48 AM] josephnicholas GMT+8#5904
then the transaction would have the Crypto condition type right?


[13-Feb-19 07:48 AM] TonyL#3577
You can create really incredible things by determining rules for special UTXOs


[13-Feb-19 07:48 AM] TonyL#3577
```  "vout": [
    {
      "value": 1.00000000,
      "valueZat": 100000000,
      "n": 0,
      "scriptPubKey": {
        "asm": "a22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401 OP_CHECKCRYPTOCONDITION",
        "hex": "2ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc",
        "reqSigs": 1,
        "type": "cryptocondition",
        "addresses": [
          "R9zHrofhRbub7ER77B7NrVch3A63R39GuC"
        ]```


[13-Feb-19 07:49 AM] SHossain#0007
set your pubkey like this (change ROGUE to TXSCLCC) https://github.com/KomodoPlatform/komodo/wiki/Get-Started-with-Rogue-Game#set-pubkey-value

{Embed}
https://github.com/KomodoPlatform/komodo/wiki/Get-Started-with-Rogue-Game
KomodoPlatform/komodo
Komodo. Contribute to KomodoPlatform/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[13-Feb-19 07:50 AM] TonyL#3577
Some vouts are `cryptoconditon` type. There is `eval` codes also to determine to which CC it's related. I advice you to read whole `Mastering cryptoconditons` book if you want to wrap head


[13-Feb-19 07:51 AM] josephnicholas GMT+8#5904
I will @TonyL atleast right now I have a head start to show this demo on the presentation


[13-Feb-19 07:51 AM] josephnicholas GMT+8#5904
Are there any testnet coins I can use to like demo all the faucet calls?


[13-Feb-19 07:52 AM] josephnicholas GMT+8#5904
```$ ./komodo-cli -ac_name=TXSCLCC faucetfund 1
{
  "result": "error",
  "error": "couldnt create faucet funding transaction"
}```


[13-Feb-19 07:53 AM] josephnicholas GMT+8#5904
I guess it needs atleast 1 KMD


[13-Feb-19 07:53 AM] josephnicholas GMT+8#5904
haha


[13-Feb-19 07:53 AM] TonyL#3577
1 TXSCLCC not KMD üòÉ


[13-Feb-19 07:53 AM] TonyL#3577
To check balance use `./komodo-cli -ac_name=TXSCLCC getbalance`


[13-Feb-19 07:53 AM] TonyL#3577
You may try to mine some coins by mining enabling:
`./komodo-cli -ac_name=TXSCLCC setgenerate true`


[13-Feb-19 07:54 AM] josephnicholas GMT+8#5904
okay, will have some funds overnight maybe?


[13-Feb-19 07:55 AM] josephnicholas GMT+8#5904
or maybe someone can send to me?


[13-Feb-19 07:55 AM] josephnicholas GMT+8#5904
üòÉ


[13-Feb-19 07:55 AM] TonyL#3577
I think someone can send it to you, maybe @SHossain have TXSCLCC


[13-Feb-19 07:55 AM] SHossain#0007
what is your address?


[13-Feb-19 07:55 AM] josephnicholas GMT+8#5904
the myAddress part right?


[13-Feb-19 07:55 AM] TonyL#3577
`./komodo-cli -ac_name=TXSCLCC getaccountaddress ""`


[13-Feb-19 07:55 AM] josephnicholas GMT+8#5904
RUvr17LDxHhn5VTWKKcqpDuDEU2Eo1rXxa


[13-Feb-19 07:56 AM] josephnicholas GMT+8#5904
yeah got it


[13-Feb-19 07:56 AM] SHossain#0007
sent fff466cea64aa5d6908b4d0af98271359df886fd9c79380258ce88ba4d46f1d6


[13-Feb-19 07:57 AM] josephnicholas GMT+8#5904
thanks, 150 right?


[13-Feb-19 07:57 AM] josephnicholas GMT+8#5904
thank you very much


[13-Feb-19 07:57 AM] SHossain#0007
777 coins


[13-Feb-19 08:01 AM] josephnicholas GMT+8#5904
Thanks will the server for this asset still be available on Monday, I might have my initial presentation and demo


[13-Feb-19 08:03 AM] SHossain#0007
what do you mean? your server or TXSCLCC seed nodes?


[13-Feb-19 08:04 AM] josephnicholas GMT+8#5904
the TXSCLCC seed nodes.


[13-Feb-19 08:05 AM] josephnicholas GMT+8#5904
"hex": "2ea22c8020e029c511da55523565835887`e4`12e5a0c9b920801b007000df45e545f25028248103120c008203000401cc", on the e4 on this means `EVAL_FAUCET`?


[13-Feb-19 08:07 AM] TonyL#3577
Nope, hex is randomly (almost because CC script generating it) generated - don't have information readable by human unless you decode it. Eval codes are defined in `komodo/src/cc/eval.h`


[13-Feb-19 08:09 AM] SHossain#0007
the TXSCLCC chain is online for couple of months now and will be there
they are also being notarized


[13-Feb-19 08:10 AM] josephnicholas GMT+8#5904
Ok Thanks @SHossain


[13-Feb-19 08:10 AM] josephnicholas GMT+8#5904
@TonyL So you can't really know what the CC being run just by looking into the tx output right?


[13-Feb-19 08:12 AM] TonyL#3577
You can't know it by looking on hex, correct


[13-Feb-19 08:12 AM] TonyL#3577
Easy example


[13-Feb-19 08:13 AM] TonyL#3577
I've pre-generated transaction by `faucetfund 1`
And decode it
One of the vouts is cryptoconditions type with 1 coin amount:
```  "vout": [
    {
      "value": 1.00000000,
      "valueZat": 100000000,
      "n": 0,
      "scriptPubKey": {
        "asm": "a22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401 OP_CHECKCRYPTOCONDITION",
        "hex": "2ea22c8020e029c511da55523565835887e412e5a0c9b920801b007000df45e545f25028248103120c008203000401cc",
        "reqSigs": 1,
        "type": "cryptocondition",
        "addresses": [
          "R9zHrofhRbub7ER77B7NrVch3A63R39GuC"
        ]
      }```


[13-Feb-19 08:14 AM] josephnicholas GMT+8#5904
Yes


[13-Feb-19 08:14 AM] TonyL#3577
Checking faucetaddress:
```./komodo-cli -ac_name=ROGUE faucetaddress
{
  "result": "success",
  "FaucetCCAddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC",
  "CCbalance": 0.00000000,
  "FaucetNormalAddress": "RKQV4oYs4rvxAWx1J43VnT73rSTVtUeckk",
  "FaucetCCTokensAddress": "RKaT8VfRSsu4qWL2kfW3PCzejrzJxi1TcJ",
  "myAddress": "RMmHb7wKPkvwbin9YowDyFaM5yiLrVAG2m",
  "myCCAddress(Faucet)": "RRMbU8VyrcUqywLb6iWqYnxoZP3yXPr3En",
  "myCCaddress": "RRMbU8VyrcUqywLb6iWqYnxoZP3yXPr3En",
  "myCCbalance": 0.00000000,
  "myaddress": "RMmHb7wKPkvwbin9YowDyFaM5yiLrVAG2m",
  "mybalance": 326.12244969
}
```


[13-Feb-19 08:14 AM] TonyL#3577
`"FaucetCCAddress": "R9zHrofhRbub7ER77B7NrVch3A63R39GuC"`


[13-Feb-19 08:14 AM] TonyL#3577
Match with address in cryptoconditions vout of 1 coin üòÉ


[13-Feb-19 08:15 AM] josephnicholas GMT+8#5904
Ok that's the only time we know that yes this a faucet CC.


[13-Feb-19 08:15 AM] TonyL#3577
There are some RPC calls to automatically check to which CC transaction is related but I not remember it since it's using CC devs for debug mostly


[13-Feb-19 08:15 AM] TonyL#3577
But manually way of detection is like this in my understanding


[13-Feb-19 08:16 AM] josephnicholas GMT+8#5904
I think it might be worth adding the eval codes somewhere in the tx I think. since just merely looking into the tx with the eval code makes it easy to know which CC was ran.


[13-Feb-19 08:16 AM] josephnicholas GMT+8#5904
But this is just my opinion.


[13-Feb-19 08:17 AM] josephnicholas GMT+8#5904
üòÉ


[13-Feb-19 08:21 AM] TonyL#3577
Stare on hexes and txids not not the most exciting thing to do it's better if computer doing this job üòÉ


[13-Feb-19 10:58 AM] Alright#0419
@josephnicholas GMT+8 https://github.com/jl777/komodo/blob/master/src/cc/eval.h 

If you look at the hex tony showed you, it will have a corresponding EVAL code for the cryptocondition in it. If you look at the OP_RETURN hex, it will show you what kind of transaction it is for the EVAL code

{Embed}
https://github.com/jl777/komodo/blob/master/src/cc/eval.h
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[13-Feb-19 11:13 AM] Alright#0419
@josephnicholas GMT+8 there is also an rpc called `decodeccopret` which will decode a CC OP_RETURN ScriptPubkey and tell you which cc it is from


[13-Feb-19 05:11 PM] josephnicholas GMT+8#5904
@TonyL and @Alright Thank you very much.


[13-Feb-19 05:41 PM] josephnicholas GMT+8#5904
I didn't find the RPC call, it seems to be not yet implemented?


[13-Feb-19 06:00 PM] Alright#0419
@josephnicholas GMT+8 believe you have to use FSM branch of this repo https://github.com/jl777/komodo

{Embed}
https://github.com/jl777/komodo
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[13-Feb-19 06:00 PM] Alright#0419
also it might not be shown in the help command, not sure


[13-Feb-19 06:06 PM] josephnicholas GMT+8#5904
Yeah, I am currently on `master` branch, but its quite good to know that there is that RPC call present though.


[13-Feb-19 06:41 PM] josephnicholas GMT+8#5904
@jl777c So when we say that CC smart contracts are linked on a specific address and funds are locked only in the contract, how does it differentiate with balanced based smart contracts, contracts are also separated on different address right?


[13-Feb-19 06:42 PM] josephnicholas GMT+8#5904
So we fund every contract to activate it?


[13-Feb-19 09:24 PM] jl777c#5810
CC is utxo based


[13-Feb-19 09:24 PM] jl777c#5810
depending on what specifically you mean by activate....


[13-Feb-19 09:25 PM] jl777c#5810
in some sense the CC are already active, just waiting for funds. but I can see how being dormant is not active.


[13-Feb-19 09:26 PM] jl777c#5810
just because two totally different things have one thing in common, it doesnt really make them the same


[13-Feb-19 10:13 PM] josephnicholas GMT+8#5904
Thanks @jl777c


[14-Feb-19 01:16 PM] dukeleto#7326
@josephnicholas GMT+8 master branch is rarely updated, `beta` or `dev` is probably more what you want


[14-Feb-19 01:17 PM] dukeleto#7326
and for cryptocontracts, many things will only be in `FSM` as alright said


[14-Feb-19 01:19 PM] dukeleto#7326
the branches go like this: jl777 > FSM > dev > beta > master, where the latest code goes in at the left and travels to the right. I am sure somebody will correct me if I am wrong, but I think that is the general structure (there are more branches, but those are the main long-running integration points of various topic branches/PRs/etc)


[14-Feb-19 05:04 PM] josephnicholas GMT+8#5904
@dukeleto thank you for the information


[15-Feb-19 05:12 PM] dukeleto#7326
I think i have fixed building cclib on mac, doing another test right now


[15-Feb-19 05:25 PM] dukeleto#7326
@jl777c https://github.com/jl777/komodo/pull/1252

{Embed}
https://github.com/jl777/komodo/pull/1252
Fix building cclib on darwin by leto ¬∑ Pull Request #1252 ¬∑ jl77...
Tested with
$ cc -v
Apple LLVM version 9.1.0 (clang-902.0.39.1)
Target: x86_64-apple-darwin17.5.0

and gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.11), both build without error.
https://images-ext-2.discordapp.net/external/lcamaiqfGRT5SU8siXS61L2Rl4ej_oWAHAXE5zxwNlw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/30298


[15-Feb-19 08:39 PM] grewalsatinder#9653
Awesome!


[16-Feb-19 04:06 AM] dukeleto#7326
finally!


[16-Feb-19 04:07 AM] dukeleto#7326
it was really bugging me, but I sat down, and it ended up being easier than I thought. I just had to think about how hard it was for a while until I stopped caring about that, and sat down to fix it in 5 minutes

{Reactions}
üëè üòÑ 

[17-Feb-19 06:28 PM] grewalsatinder#9653
https://medium.com/@ConsenSys/thoughts-on-utxo-by-vitalik-buterin-2bb782c67e53

{Embed}
https://medium.com/@ConsenSys/thoughts-on-utxo-by-vitalik-buterin-2bb782c67e53
Recently there has been a proposal to have UTXO based architecture...
Thoughts on UTXOs by Vitalik Buterin, Co-Founder of Ethereum
https://images-ext-2.discordapp.net/external/ytHSB_4fWmz3ktps6F6H7QEDbMNFi_-cv7xDThvVKLE/https/cdn-images-1.medium.com/max/1200/1%2ABMD_a0qrE3e6yrxTg8gf4g.jpeg


[17-Feb-19 06:28 PM] grewalsatinder#9653
I just read this...


[17-Feb-19 06:29 PM] grewalsatinder#9653
> 2. UTXOs are stateless, and so are not well-suited to applications more complex than asset issuance and transfer that are generally stateful, such as various kinds of smart contracts.

`stateless` is what I need to get my head clear on


[17-Feb-19 07:07 PM] grewalsatinder#9653
okay, cleared... I think....


[17-Feb-19 07:10 PM] grewalsatinder#9653
what would be the answer to these two points from this article?
1. UTXOs are unnecessarily complicated, and the complexity gets even greater in the implementation than in the theory.
2. UTXOs are stateless, and so are not well-suited to applications more complex than asset issuance and transfer that are generally stateful, such as various kinds of smart contracts.


[17-Feb-19 07:11 PM] grewalsatinder#9653
I understand the point 1, UTXOs are not as easy to manage. But they provide greater security over Balance based model of blockchain


[17-Feb-19 07:11 PM] grewalsatinder#9653
for second point, How does CC solves this statefulness?


[17-Feb-19 07:28 PM] grewalsatinder#9653
need to re-read mastering cryptoconditions....


[17-Feb-19 09:01 PM] Deleted User#0000
I think CC just adds a possible state to a utxo... Probably over simplified but thats what they appear to do to me.


[17-Feb-19 09:02 PM] jl777c#5810
the blockchain has the state information, ie. the utxo an address has, whether a utxo is unspent


[17-Feb-19 09:03 PM] jl777c#5810
I have almost directly mapped the CC logic to what the blockchain does directly, using linked lists, via baton utxo. the baton provides the mutual exclusiveness, guarantee of single usage, it also allows to reconstruct history by traversing the vins


[17-Feb-19 09:06 PM] jl777c#5810
with a balance based system, how can you be sure it isnt being double spent? sure it is possible to construct a complex system to achieve this, but attack vectors can target the entire balance and it makes the core needlessly more complex. yes, utxo are more of a pain to be dealing with than a balance based, but if that is what it takes to make things fast, secure and scalable, it is a price worth paying


[17-Feb-19 09:06 PM] jl777c#5810
also, if utxo based things are so hard, then how am I able to write them so fast?

{Reactions}
ü§î (2) üëå shexy (5) 

[18-Feb-19 03:20 AM] dukeleto#7326
The more I learn about UTXOs, the more broken coins without them seem. @grewalsatinder ETH people assume there is "global state" for smart contracts, and so I think that is why "stateless" is like a "bad word" to them, it don't jive with their ecosystem


[18-Feb-19 03:22 AM] jl777c#5810
CC seems to have plenty of state to me. the hard part is properly constraining the vin/vout to make validation as simple as possible


[18-Feb-19 03:22 AM] jl777c#5810
maybe the traditional way of looking at smart contracts is too limited?


[18-Feb-19 04:14 AM] Mylo#8306
Maybe because dapps need a state.  Apart from a wallet being completely stateful, not many further dapps exist with utxo only.


Cannot write many dapps with utxo only, but CC opens up a whole new world of possibilities as we‚Äôve seen already in 6 months of half a handful of devs working on it.


[18-Feb-19 04:16 AM] Mylo#8306
CC solves it because any object can be encoded to the CCvout format.  Objects have state through their mutable fields which are exposed by RPC methods (like getters and setters and general functions)


[18-Feb-19 04:17 AM] jl777c#5810
opreturn


[18-Feb-19 04:18 AM] jl777c#5810
plenty of room for state info in opreturn


[18-Feb-19 04:18 AM] jl777c#5810
i guess if you look at pure definition of utxo, there is no opreturn


[18-Feb-19 04:18 AM] jl777c#5810
i prefer to look at what is possible


[18-Feb-19 08:01 PM] grewalsatinder#9653
Thanks for the comments 
Helps a bit with understanding üôÇ üôè


[19-Feb-19 09:12 AM] dukeleto#7326
https://twitter.com/dukeleto/status/1097902786073776130

{Embed}
Duke Leto (@dukeleto)
https://twitter.com/dukeleto/status/1097902786073776130
So $KMD accidentally invented Proof-of-Gameplay and you can now earn coins by proving your skills, which can be independently verified via the public blockchain. Another amazing application of CryptoConditions! $HUSH will also get CryptoConditions support, more details soo...
Twitter

{Reactions}
ü§ò (3) 

[22-Feb-19 07:21 AM] Mylo#8306
i have a problem i'd like to solve with a CC.

1.  i don't like claiming my 5% active user.
2.  i'd like to send funds to a myCC address and they are safe there (locked)
3.  i'd like the funds in (2) released back to original sender address when another deposit is made of more than 1 KMD e.g. 1.0005 from the same originating sender address
4.  whilst funds are locked, i'd like to periodically send a tx less than 1 KMD e.g. 0.0005 to myCC to check if 10k blocks has passed since last activity on the funds, and if so, claim the 5% reward.

possible?


[22-Feb-19 07:22 AM] Mylo#8306
if possible, would rewardsCC be the best place to read the code to build "LazyActiveUserCC" ?


[22-Feb-19 07:28 AM] Alright#0419
@Mylo not sure I understand, but if it relies on CCs being on KMD itself, it will not work


[22-Feb-19 07:29 AM] Alright#0419
KMDCC will not have rewards


[22-Feb-19 07:29 AM] Mylo#8306
ah true.  thank you!


[22-Feb-19 07:29 AM] Alright#0419
shouldn't be too hard to do automated offline signing


[22-Feb-19 07:30 AM] Alright#0419
just seems unnecessary as it's *active* user rewards


[22-Feb-19 07:31 AM] Mylo#8306
trying to safely be lazy and write a useful CC, kill 2 birds with one stone.


[22-Feb-19 07:32 AM] Alright#0419
would recommend hyper ledger claiming app for lazy + safe rewards claiming

{Reactions}
üëå 

[22-Feb-19 07:59 PM] Tylor zkFS#8280
Would recomend BASIC commands.....go to...if then....OR you can write in HEX ...my though is make a new language for everyone forever.  Make it BASIC


[22-Feb-19 08:01 PM] Tylor zkFS#8280
I want to write a CC too!!


[22-Feb-19 08:02 PM] Tylor zkFS#8280
A  CC not in*


[22-Feb-19 11:26 PM] Mylo#8306
C++ has all that


[22-Feb-19 11:27 PM] Mylo#8306
Just a little steeper learning curve.  Someone will make an interpreter one day


[22-Feb-19 11:27 PM] jl777c#5810
CC is not for weekend coders


[22-Feb-19 11:27 PM] jl777c#5810
use the rpc calls of existing CC, that is for weekend coders

{Reactions}
üíØ (4) 

[24-Feb-19 03:36 AM] dukeleto#7326
at the speed new CCs are coming out, most people will choose from a large selection of existing CCs and customize them, maybe even with a GUI builder. Very few people will need to write custom CC's


[24-Feb-19 05:09 AM] grewalsatinder#9653
correct


[24-Feb-19 05:16 AM] Deleted User#0000
Can also look at the other way, tehy are so easy to make... anyone can use the existing as example to make their own.


[24-Feb-19 05:46 AM] dukeleto#7326
"anyone" that is a developer that can mess with Makefiles and c++


[24-Feb-19 05:48 AM] Deleted User#0000
Managed to learn how to do it in a year ü§∑


[24-Feb-19 05:48 AM] Deleted User#0000
guess it depsnds what you want to do though hey


[24-Feb-19 05:50 AM] dukeleto#7326
i think dynamically loadable cclib is the perfect fit, for those that want to dive deep in custom CCs


[24-Feb-19 05:50 AM] Deleted User#0000
they are easier too, from what I have seen testing musig


[24-Feb-19 06:07 PM] Tylor zkFS#8280
This is what im talking about in my own language


[24-Feb-19 06:11 PM] Tylor zkFS#8280
If each CC is broken down in Basic steps i think customization "could" become easy with a CC builder. /gui builder - thanks @dukeleto duke for semi understanding where im headed with my concept


[25-Feb-19 07:25 PM] josephnicholas GMT+8#5904
Hi all, I have been testing the `musig` CC doing the Dilitihium rpc commands, but I want to generate some test coins, I can't seem to cpu mine it using `-gen` with `genproclimit=-1`


[25-Feb-19 07:30 PM] Alright#0419
@josephnicholas GMT+8 do you have multiple nodes running?


[25-Feb-19 07:30 PM] Alright#0419
a node will not mine if it's not connected to at least one other node


[25-Feb-19 07:32 PM] josephnicholas GMT+8#5904
Oh okay, I just have one node running, since it is a new asset chain, so I will have to create another node?


[25-Feb-19 07:48 PM] Alright#0419
yes or use regtest mode


[25-Feb-19 07:48 PM] Alright#0419
would not recommend regtest for CC testing


[25-Feb-19 08:12 PM] dukeleto#7326
we do have CC regtests, tho


[25-Feb-19 08:12 PM] dukeleto#7326
but regtest is not mainnet


[25-Feb-19 08:12 PM] josephnicholas GMT+8#5904
Understood, I am renting a VPS for testing, thanks @Alright


[25-Feb-19 08:13 PM] josephnicholas GMT+8#5904
@dukeleto maybe I will try that as well, since its better for simulation purposes


[25-Feb-19 08:13 PM] Alright#0419
I have a chain I'm testing dilithium with right now, would you like to just connect to it?


[25-Feb-19 08:13 PM] josephnicholas GMT+8#5904
do we have a special RPC call to do CC regtests?


[25-Feb-19 08:13 PM] josephnicholas GMT+8#5904
That would be perfect


[25-Feb-19 08:13 PM] Alright#0419
moment


[25-Feb-19 08:14 PM] Alright#0419
`./komodod -ac_name=DIL -ac_supply=999999 -ac_reward=1000000000 -ac_cc=2 -ac_cclib=soduku -addnode=195.201.137.5 -addnode=195.201.20.230`


[25-Feb-19 08:14 PM] Alright#0419
@josephnicholas GMT+8


[25-Feb-19 08:14 PM] josephnicholas GMT+8#5904
@Alright thanks


[25-Feb-19 08:16 PM] Alright#0419
did you do `./makecclib` prior to build.sh?


[25-Feb-19 08:16 PM] Alright#0419
must be latest jl777 branch as well


[25-Feb-19 08:18 PM] josephnicholas GMT+8#5904
Yeah, I have a question, just ran the daemon but no connected nodes


[25-Feb-19 08:21 PM] Alright#0419
what p2p port does it show when you run it?


[25-Feb-19 08:28 PM] josephnicholas GMT+8#5904
51092


[25-Feb-19 08:31 PM] josephnicholas GMT+8#5904
@Alright how do I make my VPS as node to connect to? or is it automatic?


[25-Feb-19 08:32 PM] Alright#0419
that is the correct p2p port for this chain


[25-Feb-19 08:32 PM] Alright#0419
no errors or anything in stdout or debug.log when you tried to connect?


[25-Feb-19 08:32 PM] Alright#0419
maybe just leave it running for a few minutes?


[25-Feb-19 08:32 PM] Alright#0419
not sure I understand your question


[25-Feb-19 08:35 PM] josephnicholas GMT+8#5904
So I tried what you have said earlier about running 2 nodes to enable mining. So I created 1 node in my mac, and another one in a VPS. Then I ran the VPS daemon, then I connected my my daemon running in my mac to my VPS daemon, using -addnode=<VPS> IP, but it doesn't connect.
Should I add `-listen` or `-connect` flags?


[25-Feb-19 08:41 PM] Alright#0419
you must open the p2p port


[25-Feb-19 08:41 PM] Alright#0419
curious why you chose to start with dilithium testing


[25-Feb-19 08:42 PM] Alright#0419
there are much less complex CCs if you're just looking to get a general feel for how they work


[25-Feb-19 08:42 PM] josephnicholas GMT+8#5904
Coz that's part of my research paper. üòÉ


[25-Feb-19 08:43 PM] Alright#0419
üëç


[25-Feb-19 08:44 PM] Alright#0419
were you not able to connect to this chain?


[25-Feb-19 08:44 PM] Alright#0419
what happens when you try?


[25-Feb-19 08:47 PM] josephnicholas GMT+8#5904
```$ ‚ñ∂ ./komodo-cli -ac_name=DIL getinfo
{
  "version": 2001526,
  "protocolversion": 170007,
  "KMDversion": "0.3.3b",
  "notarized": 0,
  "prevMoMheight": 0,
  "notarizedhash": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid": "0000000000000000000000000000000000000000000000000000000000000000",
  "notarizedtxid_height": "mempool",
  "KMDnotarized_height": 0,
  "notarized_confirms": 0,
  "walletversion": 60000,
  "balance": 0.00000000,
  "blocks": 0,
  "longestchain": 0,
  "timeoffset": 0,
  "tiptime": 1231006505,
  "connections": 0,
  "proxy": "",
  "difficulty": 1,
  "testnet": false,
  "keypoololdest": 1551154567,
  "keypoolsize": 101,
  "paytxfee": 0.00000000,
  "relayfee": 0.00000100,
  "errors": "",
  "pubkey": "0286b45b64435d204a871aa93d3e168ecfc8595a75b9ca041df8d990e43390b6aa",
  "CCid": 2,
  "name": "DIL",
  "sapling": -1,
  "p2pport": 51092,
  "rpcport": 51093,
  "magic": 664028092,
  "premine": 999999,
  "reward": "1000000000",
  "halving": "0",
  "decay": "0",
  "endsubsidy": "0"
}```


[25-Feb-19 08:47 PM] josephnicholas GMT+8#5904
Got no connection.


[25-Feb-19 08:47 PM] Alright#0419
`getpeerinfo` shows nothing as well?


[25-Feb-19 08:47 PM] Alright#0419
Are you using AWS by chance?


[25-Feb-19 08:48 PM] josephnicholas GMT+8#5904
No I am using my Mac


[25-Feb-19 08:49 PM] Alright#0419
could you look at the debug.log and see if there are any errors?


[25-Feb-19 08:49 PM] josephnicholas GMT+8#5904
peerinfo shows noting


[25-Feb-19 08:49 PM] josephnicholas GMT+8#5904
ok, I am tailing debug.log but not error so far. I will check the whole file


[25-Feb-19 08:50 PM] josephnicholas GMT+8#5904
nothing, no errors


[25-Feb-19 08:51 PM] Alright#0419
Are you on a university network or something similar?


[25-Feb-19 08:51 PM] Alright#0419
firewall blocking it possibly?


[25-Feb-19 08:51 PM] Alright#0419
do you have access to a VPN?


[25-Feb-19 08:55 PM] josephnicholas GMT+8#5904
Yes, I am on a university network


[25-Feb-19 08:56 PM] josephnicholas GMT+8#5904
Hmmmm, I'll try to tether in my phone


[25-Feb-19 08:58 PM] josephnicholas GMT+8#5904
Ok, its because of my school's network


[25-Feb-19 08:58 PM] Alright#0419
ok might have a better solution for you then


[25-Feb-19 08:58 PM] josephnicholas GMT+8#5904
Funny thing, I didn't know this, I am on IT security course. Haha


[25-Feb-19 08:59 PM] Alright#0419
start a new chain 
then start a separate node with something like this appended to the chain params
```
-datadir="/<user>/.komodo2" -rpcport=1234 -listen=0 -addnode=127.0.0.1
```


[25-Feb-19 08:59 PM] Alright#0419
it will run two instances of the daemon


[25-Feb-19 09:00 PM] Alright#0419
`komodo-cli` will work with the daemon that has default rpc port set


[25-Feb-19 09:00 PM] Alright#0419
you'll need to use curl to interact with the other daemon


[25-Feb-19 09:00 PM] Alright#0419
does that make sense?


[25-Feb-19 09:01 PM] Alright#0419
I need to go shortly, hoping I can get you situated before that though


[25-Feb-19 09:02 PM] josephnicholas GMT+8#5904
It totally makes sense, its like configuring a mining pool right?


[25-Feb-19 09:02 PM] Alright#0419
not quite?


[25-Feb-19 09:02 PM] Alright#0419
basically do 
`./komodod -ac_name=MYCHAIN -ac_supply=999999 -ac_reward=1000000000 -ac_cc=2 -ac_cclib=soduku -addnode=127.0.0.1`

open another terminal and do

`./komodod -ac_name=MYCHAIN -ac_supply=999999 -ac_reward=1000000000 -ac_cc=2 -ac_cclib=soduku -datadir="/<user>/.komodo2" -rpcport=1234 -listen=0 -addnode=127.0.0.1`

then do 
`komodo-cli -ac_name=MYCHAIN setgenerate true 2`

{Reactions}
yassinheart 

[25-Feb-19 09:02 PM] josephnicholas GMT+8#5904
I will try to get a bus back home to continue researching and testing there, to avoid university Firewall


[25-Feb-19 09:03 PM] Alright#0419
a vpn will get you around any port blocking


[25-Feb-19 09:03 PM] josephnicholas GMT+8#5904
Thanks I will working on this


[28-Feb-19 08:14 AM] josephnicholas GMT+8#5904
How do I change the p2p port of so that I can connect to my local network node?


[28-Feb-19 10:08 AM] Mihailo#5902
@josephnicholas GMT+8 I had success with changing p2p port with -port= even I was told it cannot be changed.


[28-Feb-19 10:09 AM] josephnicholas GMT+8#5904
Well, good for you, I had to recreate the chain then mine again, but it was worth it.


[28-Feb-19 10:12 AM] Mihailo#5902
I think you don't need to create new chain, but never tried to change port after creating chain.


[04-Mar-19 05:23 AM] jl777c#5810
I implemented unique handles for dilithium CC, but the unique names aspect might be of more general interest


[04-Mar-19 08:29 PM] Mylo#8306
Ok thanks


[05-Mar-19 04:43 PM] Cryptofist#7504
Is there a CC that can generate fungible tokens (such as in game items)  yet?


[05-Mar-19 04:44 PM] Cryptofist#7504
@TwilightPunkster K64  Hopefully we can figure this out here.

{Reactions}
‚ù§ 

[05-Mar-19 05:07 PM] TonyL#3577
Tokens (both fungible and not) creating by TokensCC RPC calls. For example  ROGUE using nonfungible tokens (with supply 1). If fungible tokens needed - just token with supply > 1 needs to be created. There are "name" and "description" params on token creation - so there is possible to specify dAPP specific tags/metadata to track/identify specific tokens


[05-Mar-19 05:08 PM] TonyL#3577
List of RPC calls with request/response examples can be found in google doc from this channel topic


[05-Mar-19 05:09 PM] TonyL#3577
Create new token is very easy: `./komodo-cli -ac_name=MYCHAIN tokencreate MyNewToken <supply> "description of my new token"`
And then just broadcast raw hex output to blockchain by `sendrawtransaction hex^^`


[05-Mar-19 05:10 PM] Cryptofist#7504
Thank you @TonyL  !

{Reactions}
üëç 

[05-Mar-19 05:14 PM] Cryptofist#7504
@TwilightPunkster K64  This is Tony, he has told me that you may address him with questions if need be!


[05-Mar-19 05:21 PM] TwilightPunkster K64#7533
@TonyL wua thanks!


[05-Mar-19 05:25 PM] TwilightPunkster K64#7533
@TonyL while browsing through the pinned items I got to a GH repo, with some Pythonian magic called TUI's. Am I mistaken or are these working RPC clients?


[05-Mar-19 05:26 PM] TonyL#3577
@TwilightPunkster K64 This TUI I made for things testing mostly. It using RPC proxy client for communicating with komodo daemon RPC


[05-Mar-19 05:26 PM] TwilightPunkster K64#7533
(also your pad supernet link is dead üò¢ )


[05-Mar-19 05:27 PM] TonyL#3577
Oh  I think I've updated readme ~ week ago without this dead link


[05-Mar-19 05:27 PM] TonyL#3577
https://github.com/tonymorony/komodo_cryptoconditions_tui

{Embed}
https://github.com/tonymorony/komodo_cryptoconditions_tui
tonymorony/komodo_cryptoconditions_tui
Terminal user interfaces for Komodo CryptoConditions smart-contracts - tonymorony/komodo_cryptoconditions_tui
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699


[05-Mar-19 05:28 PM] TonyL#3577
So in general process as easy as:


[05-Mar-19 05:28 PM] TonyL#3577
Creating proxy object by: `rpc_connection = Proxy(rpc_credentials_here)` (it setup/create proxy between your app and komodod daemon)


[05-Mar-19 05:29 PM] TonyL#3577
Then issuing calls by `rpc_connection.call([args])` For example `new_token_info = rpc_connection.tokencreate("Token", "1", "Testing token")`


[05-Mar-19 05:31 PM] TwilightPunkster K64#7533
is it really that simple?


[05-Mar-19 05:31 PM] TonyL#3577
Oh yes, just 1 pip package is needed


[05-Mar-19 05:31 PM] TwilightPunkster K64#7533
____dammit


[05-Mar-19 05:32 PM] TonyL#3577
It built on top of pycur and curl


[05-Mar-19 05:32 PM] TwilightPunkster K64#7533
no way


[05-Mar-19 05:32 PM] TwilightPunkster K64#7533
I spend like 2 days with 4 hours sleep in between reading stuff and this is the thing i was looking for xD


[05-Mar-19 05:33 PM] TonyL#3577
So if let's say I want to start new project:
`pip3 install setuptools wheel slick-bitcoinrpc`
Then in code:
`from slickrpc import Proxy`


[05-Mar-19 05:33 PM] TonyL#3577
Then creating a Proxy and go-go interact with daemon üòÉ


[05-Mar-19 05:34 PM] TwilightPunkster K64#7533
waaaaat


[05-Mar-19 05:34 PM] TwilightPunkster K64#7533
oh


[05-Mar-19 05:34 PM] TwilightPunkster K64#7533
basically it curls


[05-Mar-19 05:34 PM] TwilightPunkster K64#7533
ooooooooh


[05-Mar-19 05:34 PM] TonyL#3577
https://github.com/barjomet/slick-bitcoinrpc I'm using this one (pip3 slick-bitcoinrpc + `from slickrpc import Proxy`)

{Embed}
https://github.com/barjomet/slick-bitcoinrpc
barjomet/slick-bitcoinrpc
Just another Python bitcoin-rpc client. Contribute to barjomet/slick-bitcoinrpc development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/SDFu-LWiBRUmIlMMm-0_3Dd1MSXeNB0wXEUaJ-UB50M/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/7434416


[05-Mar-19 05:35 PM] TonyL#3577
It built on pycurl and ujson


[05-Mar-19 05:35 PM] TwilightPunkster K64#7533
I am going to look for a wall


[05-Mar-19 05:35 PM] TwilightPunkster K64#7533
and doh my head against it


[05-Mar-19 05:36 PM] TonyL#3577
Cool! Glad to help üëç

{Reactions}
‚ù§ 

[05-Mar-19 05:46 PM] TonyL#3577
I think it support anything that you can issue to komodod as rpc call


[05-Mar-19 05:47 PM] TonyL#3577
Is requests creating proxy?


[05-Mar-19 05:48 PM] TonyL#3577

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/552668743701102593/be4Xs.png


[05-Mar-19 05:48 PM] TonyL#3577
pycurl seems to be fastest


[05-Mar-19 05:49 PM] TonyL#3577
https://github.com/barjomet/slick-bitcoinrpc#results and this dude tested speed over python-bitcoinrpc

{Embed}
https://github.com/barjomet/slick-bitcoinrpc
barjomet/slick-bitcoinrpc
Just another Python bitcoin-rpc client. Contribute to barjomet/slick-bitcoinrpc development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/SDFu-LWiBRUmIlMMm-0_3Dd1MSXeNB0wXEUaJ-UB50M/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/7434416


[05-Mar-19 05:50 PM] TonyL#3577
It's kinda simplest and fastest solution which I found to reach my goal of interaction with local and remote komodods, maybe there are other better ways for sure


[05-Mar-19 05:57 PM] TonyL#3577
https://github.com/barjomet/slick-bitcoinrpc/blob/master/slickrpc/rpc.py#L81 I wounder that just this

{Embed}
https://github.com/barjomet/slick-bitcoinrpc/blob/master/slickrpc/rpc.py
barjomet/slick-bitcoinrpc
Just another Python bitcoin-rpc client. Contribute to barjomet/slick-bitcoinrpc development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/SDFu-LWiBRUmIlMMm-0_3Dd1MSXeNB0wXEUaJ-UB50M/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/7434416


[05-Mar-19 06:00 PM] TonyL#3577
It's only for rpc connection to daemon yup
```Just another Python bitcoin-rpc client. Built as faster alternative to python-bitcoinlib rpc (https://github.com/petertodd/python-bitcoinlib) and python-bitcoinrpc (https://github.com/jgarzik/python-bitcoinrpc) using pycurl and ujson.```


[05-Mar-19 06:05 PM] TonyL#3577
To create app on CCs it is the only thing which is needed


[05-Mar-19 06:07 PM] TonyL#3577
Request - receive data from daemon and then can do with it whatever you want


[07-Mar-19 06:04 AM] dukeleto#7326
i just saw a tetris CC in my jl777 merge, very exciting üòÉ

{Reactions}
üíØ (2) üç¥ 

[07-Mar-19 06:05 AM] SHossain#0007
yes. i saw that too. waiting to play üòÉ


[07-Mar-19 06:06 AM] SHossain#0007
exciting


[07-Mar-19 06:06 AM] dukeleto#7326
I remember playing Tetris with my Dad on a brand new NES console, back in the olden days


[07-Mar-19 06:09 AM] jl777c#5810
there is a maketetris script in cc dir


[07-Mar-19 06:09 AM] jl777c#5810
it just builds the dapp


[07-Mar-19 06:10 AM] jl777c#5810
it is unmodified for now and being curses based very primitive looking, but seems to be tetris


[07-Mar-19 06:10 AM] SHossain#0007
i used this type of brick game consoles for tetris long ago


[07-Mar-19 06:11 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/553218092919160833/Screenshot_from_2019-03-07_14-10-54.png


[07-Mar-19 06:11 AM] jl777c#5810
it is a very small code to do the tetris, so should simplify the making of CC. the idea here is that not doing anything, generates an event, ie. if you dont do anything, time passes. this is different from rogue where the clock was each new game action keystroke


[07-Mar-19 06:12 AM] dukeleto#7326
interesting. so tetris will need a "timeout" event that corresponds to the current object hitting the floor, or potentially a shorter timeout if it hits existing objects


[07-Mar-19 06:14 AM] jl777c#5810
i was thinking more just a "time passed" event which will feed into the tetris engine. likely i will need to add an event compression layer to prevent very long keystrokes tx


[07-Mar-19 06:15 AM] jl777c#5810
or for a demo, we can just limit to 8000 events. what is the longest a tetris level can take to do?


[07-Mar-19 06:21 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/553220709305024523/Screenshot_from_2019-03-07_14-21-27.png


[07-Mar-19 06:22 AM] SHossain#0007
screen flashes while the blocks are being moved


[07-Mar-19 06:24 AM] jl777c#5810
i wonder if the original does the same


[07-Mar-19 06:24 AM] jl777c#5810
the url is in the tetris.cpp file


[07-Mar-19 06:25 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/553221712108584961/Screenshot_from_2019-03-07_14-25-14.png


[07-Mar-19 06:25 AM] SHossain#0007
ok. let me try the original one


[07-Mar-19 06:29 AM] SHossain#0007
the original repo shows these deps needed
`sudo apt-get install libsdl-mixer1.2-dev libncurses5-dev`


[07-Mar-19 06:29 AM] jl777c#5810
yes


[07-Mar-19 06:33 AM] SHossain#0007
installed them, and still flashes. trying the original one


[07-Mar-19 06:35 AM] SHossain#0007
hmmm...`make` failed
```
make
gcc -Wall -pedantic -c -g --std=c99 -Isrc/ `sdl-config --cflags` -MM src/tetris.c | sed -e 's/~\(.*\)\.o:/\1.d \1.o:/' > deps/tetris.d
/bin/sh: 1: sdl-config: not found
gcc -Wall -pedantic -c -g --std=c99 -Isrc/ `sdl-config --cflags` -MM src/main.c | sed -e 's/~\(.*\)\.o:/\1.d \1.o:/' > deps/main.d
/bin/sh: 1: sdl-config: not found
gcc -Wall -pedantic -c -g --std=c99 -Isrc/ `sdl-config --cflags` -MM src/util.c | sed -e 's/~\(.*\)\.o:/\1.d \1.o:/' > deps/util.d
/bin/sh: 1: sdl-config: not found
gcc -Wall -pedantic -c -g --std=c99 -Isrc/ `sdl-config --cflags` src/util.c -o obj/release/util.o
/bin/sh: 1: sdl-config: not found
src/util.c: In function ‚Äòsleep_milli‚Äô:
src/util.c:21:19: error: storage size of ‚Äòts‚Äô isn‚Äôt known
   struct timespec ts;
                   ^~
src/util.c:24:3: warning: implicit declaration of function ‚Äònanosleep‚Äô [-Wimplicit-function-declaration]
   nanosleep(&ts, NULL);
   ^~~~~~~~~
src/util.c:21:19: warning: unused variable ‚Äòts‚Äô [-Wunused-variable]
   struct timespec ts;
                   ^~
Makefile:60: recipe for target 'obj/release/util.o' failed
make: *** [obj/release/util.o] Error 1
```


[07-Mar-19 06:38 AM] jl777c#5810
change the nanosleep to usleep


[07-Mar-19 06:38 AM] SHossain#0007
i think i have issues with installing deps


[07-Mar-19 06:38 AM] SHossain#0007
```
udo apt-get install libsdl-mixer1.2-dev libncurses5-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
libncurses5-dev is already the newest version (6.1-1ubuntu1.18.04).
The following packages were automatically installed and are no longer required:
  libllvm6.0:i386 x11proto-dri2-dev x11proto-gl-dev
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  libasound2-dev libcaca-dev libflac-dev libmad0-dev libmikmod-config libmikmod-dev libogg-dev libpulse-dev libsdl1.2-dev libslang2-dev
  libvorbis-dev
Suggested packages:
  libasound2-doc
The following NEW packages will be installed
  libasound2-dev libcaca-dev libflac-dev libmad0-dev libmikmod-config libmikmod-dev libogg-dev libpulse-dev libsdl-mixer1.2-dev
  libsdl1.2-dev libslang2-dev libvorbis-dev
0 to upgrade, 12 to newly install, 0 to remove and 15 not to upgrade.
Need to get 81.5 kB/3,143 kB of archives.
After this operation, 14.1 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
Err:1 http://gb.archive.ubuntu.com/ubuntu bionic-updates/main amd64 libpulse-dev amd64 1:11.1-1ubuntu7.1
  404  Not Found [IP: 91.189.88.152 80]
E: Failed to fetch http://gb.archive.ubuntu.com/ubuntu/pool/main/p/pulseaudio/libpulse-dev_11.1-1ubuntu7.1_amd64.deb  404  Not Found [IP: 91.189.88.152 80]
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?
```


[07-Mar-19 06:38 AM] jl777c#5810
void sleep_milli(int milliseconds)
{
usleep(milliseconds * 1000);
}


[07-Mar-19 06:41 AM] SHossain#0007
deps were the issue. make worked now


[07-Mar-19 06:46 AM] SHossain#0007
```
bin/release/main
unable to initialize SDL_mixer
3
```


[07-Mar-19 06:51 AM] SHossain#0007
after changing nanosleep to usleep compile getting this error
```
./maketetris
tetris.cpp: In function ‚Äòvoid sleep_milli(int)‚Äô:
tetris.cpp:229:1: error: ‚Äòusleep‚Äô was not declared in this scope
 usleep(milliseconds * 1000);
 ^~~~~~
tetris.cpp:229:1: note: suggested alternative: ‚Äòbeep‚Äô
 usleep(milliseconds * 1000);
 ^~~~~~
 beep
```


[07-Mar-19 06:51 AM] SHossain#0007
i edited only tetris.cpp file


[07-Mar-19 08:05 AM] dukeleto#7326
@SHossain add  `#include <unistd.h>`


[07-Mar-19 08:06 AM] dukeleto#7326
to the top of tetris.cpp


[07-Mar-19 10:33 AM] SHossain#0007
Thanks @dukeleto. will try now


[07-Mar-19 10:35 AM] jl777c#5810
likely it still flickers, i will need to tweak the curses usage to fix it


[07-Mar-19 10:37 AM] jl777c#5810
ignoring the flicker is it a decent tetris?


[07-Mar-19 10:41 AM] SHossain#0007
yes, it still flickers


[07-Mar-19 10:45 AM] SHossain#0007
this tetris is not bad at all. colorful and basic


[07-Mar-19 11:12 AM] jl777c#5810
ok as long as it is decent, i will push forward with it, it is quite efficiently coded and i like that


[07-Mar-19 11:12 AM] jl777c#5810
i think we can use the same framework as rogue, just using tetris keystrokes instead


[07-Mar-19 11:20 AM] SHossain#0007
nice


[07-Mar-19 02:32 PM] Alright#0419
@jl777c joker and I were talking about this last night. It seems the randomness in tetris is this
```
Give the player each of the 7 tetrominoes, in a random order.

Give the player each of the 7 tetrominoes, in a random order.

Give the player each of the 7 tetrominoes, in a random order.```
https://tetrisconcept.net/threads/the-tetris-guidelines-random-generator-is-apparently-simple.349/

We were trying to think how this would best work. I'm not sure you're able to make a game that is deterministically random as it uses a RNG every 7 blocks to determine the next 7. I thought maybe instead user could broadcast "I want to play a game. I will multiply the next notarization hash by <arbitrary number>. They then multiply the notarization txid by <arbitrary number> and this gives them the 64 blocks(0-f represent different blocks) that are unique to them. Unique because of the arbitrary number they are multiplying the notarization txid by

{Embed}
https://tetrisconcept.net/threads/the-tetris-guidelines-random-generator-is-apparently-simple.349/
The Tetris guidelines Random Generator is apparently simple. | Tet...
In games adhering to the official Tetris Guidelines, most notably TDS, the randomizer is known to not be purely random. In fact, the randomizer's rules...


[07-Mar-19 02:33 PM] Alright#0419
basically, is it possible to make a tetris engine that will give the same result given the same seed and inputs? If not, does this make sense instead? Network itself(notaries actually) generate "randomness"


[07-Mar-19 02:37 PM] Alright#0419
we also talked about how we could actually validate game logic. It essentially requires every node to replay every game at this point, yes? A keystrokes tx would come in that claimed something like "with this random seed, with these inputs, I got this score." then each node would replay this game and verify that score is what the user claims given same seed and same inputs?


[07-Mar-19 02:38 PM] Alright#0419
Joker had the idea instead to have a subset of nodes that validate games similar to notaries agreeing on blockhashes. If m of n agree(after replaying game and validating score), then it is valid


[07-Mar-19 06:00 PM] Deleted User#0000
Yeah, something like this will be required as the games get more complex. Something like tetris maybe is easy enough... but going too complex with too many keystrokes is not going to work so well. So needs to be simpler.. Less data on chain will be required. There will be a few ways to do this.  But not really sure whats possible. Something that would be ideal, is if you can use a zkSNARK to prove the gameplay rather than have all nodes have to replay every game. I can see a full bock of tetris game txs grinding the chain to halt very fast.


[07-Mar-19 10:23 PM] Mylo#8306
sounds like a seed-generate-resolution, every X seconds.
with a hashchain of seeds, you can have hundreds of seeds for thousands of seconds of gameplay.

if we're thinking about games beyond console, e.g. FPS, think about monsters spawning then acting on the seed they are given in the hashchain, all verifiable.   along with player co-ordinates, velocity etc. again a resolution thing.   this is where streamer data comes in handy @Deleted User 

the life-cycle of all these can be compacted down with chain consolidation at a business/operations level.  active gamers will migrate all their accumulated stuff


[07-Mar-19 10:23 PM] Mylo#8306
just thoughts.


[07-Mar-19 10:35 PM] Mylo#8306
oh, and @Alright ^


[07-Mar-19 11:28 PM] jl777c#5810
it takes a couple milliseconds to replay rogue game, dont underestimate the amount of computation CPU are able to do


[07-Mar-19 11:29 PM] jl777c#5810
as long as the RNG of rogue can be used, then there is no problem. everytime you get a random number, the next one is calculated. there is no need to go back to high entropy source for each random number


[07-Mar-19 11:30 PM] jl777c#5810
1000 rogue games will take a second or two to replay, tetris I imagine will be faster


[07-Mar-19 11:30 PM] jl777c#5810
at worst we would need to make longer blocktimes


[07-Mar-19 11:31 PM] jl777c#5810
let us not overengineer things. zksnarks? math that is very hard to understand, fancy other things... not the best thing to start with such complex things


[07-Mar-19 11:31 PM] jl777c#5810
I always start with the simplest possible solution


[07-Mar-19 11:31 PM] jl777c#5810
often it is good enough and then I am done


[07-Mar-19 11:31 PM] jl777c#5810
if not, then I step it up to the next level of complexity and I stop as soon as the problem is solved. this ends up with arguably the simplest solution that solves the problem


[07-Mar-19 11:32 PM] jl777c#5810
sure, it is good to have bazooka, emp, hellfire missles in your toolkit, but if a flyswatter is all that is needed, just use that


[07-Mar-19 11:33 PM] jl777c#5810
the only issue about tetris that is different than rogue (other than tetris is MUCH simpler gameplay) is that not doing anything creates an event. that is the only real difference, so I dont expect there to be much different in the solution. maybe just just run length encoding of keystrokes


[07-Mar-19 11:33 PM] jl777c#5810
do not overengineer things, especially blockchain logic


[07-Mar-19 11:34 PM] jl777c#5810
it has to be dead simple, else it wont ever consensus


[07-Mar-19 11:38 PM] Alright#0419
will every rogue node validate every game? same seed, same inputs, same result?


[07-Mar-19 11:41 PM] jl777c#5810
"will" ?? they have been since early blocks


[07-Mar-19 11:42 PM] jl777c#5810
it is the blockchain consensus concept applied to rogue


[07-Mar-19 11:42 PM] jl777c#5810
terribly inefficient, but impossible to cheat

{Reactions}
üòÇ 

[07-Mar-19 11:45 PM] Alright#0419
Does a tetris game in this situation need randomness every 7 in-game blocks or just a single seed of entropy to start a game?


[07-Mar-19 11:46 PM] Alright#0419
I keep explaining this concept to joker(same seed, same input, same outcome), and he is convinced it's impractical to code game logic into consensus for every single node


[07-Mar-19 11:50 PM] Mylo#8306
game logic is logic.
crypto condition logic is logic.
wallet logic is logic.
it is all logic.   the faucet logic goes around in a loop until a transaction ends in 00 to stop leechers.
game logic is just to replay.  not in realtime.  super fast.


[07-Mar-19 11:51 PM] Mylo#8306
tetris.  who knows.  maybe the game was written in a time when computing 50k random numbers was expensive for cpu & ram.


[07-Mar-19 11:52 PM] Alright#0419
>impossible to cheat
I think it's the opposite? Die? Submit a different set of keystrokes in which you didn't die


[07-Mar-19 11:52 PM] Deleted User#0000
im just thinking about games that are far more complex than these... it does not seem possible to replay every game with a fuill block to me.. maybe im wrong but doesnt seem to make a lot of sense


[07-Mar-19 11:53 PM] Alright#0419
if you limit this window in which you can "rewrite" the keystrokes, we limit cheating


[07-Mar-19 11:53 PM] Alright#0419
but no matter what, it's possible


[07-Mar-19 11:53 PM] jl777c#5810
still the keystrokes submitted needs to have been played


[07-Mar-19 11:53 PM] Mylo#8306
i had this cheating argument at hte beginning of the week.   you're gonna lose üòÑ


[07-Mar-19 11:54 PM] jl777c#5810
you might be able to implement a limited undo, but with a time constraint there wont be time to redo things in any significant ways


[07-Mar-19 11:54 PM] Deleted User#0000
if the game can be replayed in a few seconds.... just use that code to play games in a microsecond over and over again until you win ?


[07-Mar-19 11:54 PM] Alright#0419
I can cheat. I will cheat if you want me to demonstrate it


[07-Mar-19 11:54 PM] jl777c#5810
you can cheat rogue?


[07-Mar-19 11:54 PM] Alright#0419
Do believe I can


[07-Mar-19 11:54 PM] jl777c#5810
you can create arbitrary player data and have the network accept it?


[07-Mar-19 11:55 PM] Alright#0419
No, if I die, i can undie


[07-Mar-19 11:55 PM] Mylo#8306
mod the buffer?


[07-Mar-19 11:55 PM] Alright#0419
the network would never see me dying

{Reactions}
3040_kingpeepo 

[07-Mar-19 11:55 PM] Mylo#8306
ah no broadcast?


[07-Mar-19 11:57 PM] Alright#0419
I think this window in which you can rewrite your mistakes will always exist in CC blockchain games


[07-Mar-19 11:57 PM] jl777c#5810
yes


[07-Mar-19 11:57 PM] Alright#0419
we need to limit this window as much as possible


[07-Mar-19 11:57 PM] jl777c#5810
but you still need the actual gameplay keystrokes that wins


[07-Mar-19 11:57 PM] jl777c#5810
with rogue, keystrokes sent every level


[07-Mar-19 11:58 PM] jl777c#5810
maybe you can prevent being killed by the Troll, but with a time limit it could be that you cant create a winning keystrokes in time and that is death too


[07-Mar-19 11:59 PM] jl777c#5810
forgery of playerdata is doublespending


[07-Mar-19 11:59 PM] jl777c#5810
delaying of dying is reorging


[07-Mar-19 11:59 PM] jl777c#5810
you can delay your death, but you cant create a win, unless you actually win


[07-Mar-19 11:59 PM] Mylo#8306
if keystrokes were mapped to a channelsCC-style of firing off tx, then streaming actions on the blockchain be possible?


[08-Mar-19 12:00 AM] Alright#0419
ok, how about if i die, I rewrite the keystrokes to bail out instead of dying?


[08-Mar-19 12:00 AM] Alright#0419
I claim the gold that is currently on me and restart


[08-Mar-19 12:00 AM] Mylo#8306
and bail before dying, fiddling with the buffer of keystrokes.


[08-Mar-19 12:01 AM] jl777c#5810
you can reorg the keystrokes


[08-Mar-19 12:01 AM] jl777c#5810
but the valid keystrokes must still be created


[08-Mar-19 12:01 AM] jl777c#5810
bailing out is a valid set of keystrokes and you didnt create gold out of nothing, you had the gold


[08-Mar-19 12:02 AM] Alright#0419
so maybe death shouldn't give you 0 gold?


[08-Mar-19 12:02 AM] Mylo#8306
take a ticket from a queue, the ticket and the keystroke are now bound.  next ticket from queue next keystroke bound to it.  throw them all  together in a ticket/receipt style hash.   hard to undo...surely


[08-Mar-19 12:02 AM] jl777c#5810
not sure it matters so much either way


[08-Mar-19 12:02 AM] Alright#0419
because a hacker can make it give themselves the amount of gold they had accrued?


[08-Mar-19 12:03 AM] jl777c#5810
which translates to 0.3 ROGUE coins.


[08-Mar-19 12:03 AM] jl777c#5810
I can see the cointelegraph article now


[08-Mar-19 12:03 AM] Alright#0419
take for example the potion thing, we can see them all because a hacker can see them all


[08-Mar-19 12:03 AM] Alright#0419
scroll*


[08-Mar-19 12:03 AM] jl777c#5810
hacker mods the rogue game and earns an extra 0.3 ROGUE coins


[08-Mar-19 12:05 AM] jl777c#5810
this can be solved with a separate p2p network of nodes confirming keystroke by keystroke


[08-Mar-19 12:05 AM] jl777c#5810
and that would close this keystrokes reorging


[08-Mar-19 12:06 AM] Alright#0419
keystokes reorging is not the problem


[08-Mar-19 12:06 AM] Alright#0419
the difference between doing and not doing it is


[08-Mar-19 12:06 AM] Alright#0419
if we nerf the difference, it's fine


[08-Mar-19 12:07 AM] jl777c#5810
i guess if dying was the same as bailing out that makes keystrokes reorging pointless


[08-Mar-19 12:07 AM] Deleted User#0000
I havent played rogue... but ive played rogue likes and usually when you die there is just some penalty... you dont lose everything


[08-Mar-19 12:07 AM] jl777c#5810
but I am pushing toward preventing keystrokes reorging


[08-Mar-19 12:08 AM] Alright#0419
faster timeouts


[08-Mar-19 12:08 AM] Alright#0419
that is a good solution


[08-Mar-19 12:08 AM] jl777c#5810
with ROGUE you have the playerdata that we want to have a market for


[08-Mar-19 12:08 AM] Alright#0419
you could have 10 seconds to replay something


[08-Mar-19 12:08 AM] Alright#0419
if you don't come up with a winning outcome in those 10 seconds, you die


[08-Mar-19 12:08 AM] jl777c#5810
if people didnt lose their player data, there wouldnt be much demand for buying playerdata


[08-Mar-19 12:09 AM] jl777c#5810
yes, currently the time limit is 60 blocks


[08-Mar-19 12:09 AM] jl777c#5810
can be shorter


[08-Mar-19 12:09 AM] Alright#0419
that is a good game mechanic üòÇ


[08-Mar-19 12:09 AM] Mylo#8306
you can have players die have a reducing multiplier effect.   e.g. play again and when you find a 10gold, it is only worth 0.9 gold.   each time you die you are reduced in rewards of packages in game?


[08-Mar-19 12:09 AM] Alright#0419
if you die, you have N seconds to unkill yourself


[08-Mar-19 12:10 AM] Deleted User#0000
just have a penalty for dieing...


[08-Mar-19 12:10 AM] Deleted User#0000
its much simpler


[08-Mar-19 12:10 AM] jl777c#5810
i want to implement realtime keystrokes verification


[08-Mar-19 12:11 AM] jl777c#5810
and keep the gameplay the way it is


[08-Mar-19 12:11 AM] jl777c#5810
having a market for playerdata is a key part of the experiment


[08-Mar-19 12:11 AM] Mylo#8306
hash(ticket(randomnumber) + keystroke), next ticket uses the hash as random number.


[08-Mar-19 12:12 AM] Mylo#8306
+ timeout i guess?


[08-Mar-19 12:12 AM] jl777c#5810
anyway, there still isnt much tx validation, so preventing keystrokes reorg is not at the top of the list to fix


[08-Mar-19 12:12 AM] jl777c#5810
in general you proritize things by how important they are against the other things


[08-Mar-19 12:12 AM] jl777c#5810
keystrokes reorg is maybe in the top 10, but just barely


[08-Mar-19 12:13 AM] Alright#0419
it's not even a "reorg" it's simply not submitting keystrokes when you die


[08-Mar-19 12:13 AM] Alright#0419
and replaying them so that you don't die


[08-Mar-19 12:13 AM] Mylo#8306
fun to read anyway.  i got `forgery of playerdata is doublespending` and  `delaying of dying is reorging` out of this exchange, üôè


[08-Mar-19 12:14 AM] Mylo#8306
does it invalidate the "uncheatable" statement though.  i think this is what @Alright  is targeting.


[08-Mar-19 12:14 AM] Alright#0419
my point is


[08-Mar-19 12:14 AM] Alright#0419
level out the playing field between cheaters and non-cheaters


[08-Mar-19 12:14 AM] Mylo#8306
it's  a solvable problem, just "barely" top 10 üòÑ


[08-Mar-19 12:14 AM] Alright#0419
no matter how that affects gameplay


[08-Mar-19 12:14 AM] Alright#0419
it just becomes a unique game


[08-Mar-19 12:15 AM] Alright#0419
it might not be "rogue" but it's "blockchain rogue"


[08-Mar-19 12:15 AM] Mylo#8306
maybe today isn't they day for this line of conversation.  i gotta go anyways.


[08-Mar-19 12:15 AM] Alright#0419
if you die, you have n seconds to find keystrokes in which you don't die


[08-Mar-19 12:15 AM] Alright#0419
does that not sound like a fun game mechanic?


[08-Mar-19 12:16 AM] Mylo#8306
yes it does.  there'll be heaps of those though. and as jl says, it diminishes the playerdata market if you have chances-of-not-dying.


[08-Mar-19 12:16 AM] jl777c#5810
that is what is implemented now

{Reactions}
üëÜ 

[08-Mar-19 12:17 AM] jl777c#5810
just at 60 blocks to allow people an hour to finish a level


[08-Mar-19 12:17 AM] Alright#0419
there is a difference between a game where you attacked a monster and died and a game where you hit shift + Q


[08-Mar-19 12:18 AM] Alright#0419
gold


[08-Mar-19 12:18 AM] Deleted User#0000
so when you die you get less gold?


[08-Mar-19 12:18 AM] Deleted User#0000
that is how like all rogue lilkes work


[08-Mar-19 12:19 AM] Alright#0419
if you die as a non-cheater you get 0 gold. if you "die" as a cheater, you get the gold in your inventory

{Reactions}
üíØ 

[08-Mar-19 12:19 AM] TonyL#3577
I dkn, I played rogue port on mobile a lot and if you die you die


[08-Mar-19 12:19 AM] TonyL#3577
If warriors will not die whats the point to trade em


[08-Mar-19 12:19 AM] Deleted User#0000
not saying thats exactly how rogue works ... but modern games based on it... to leve the leve you usually commit suicide rather than travel all the way back to base


[08-Mar-19 12:20 AM] Alright#0419
what I'm suggesting, they still die


[08-Mar-19 12:20 AM] TonyL#3577
Why it's bad now?


[08-Mar-19 12:20 AM] Alright#0419
if you do not find inputs in n seconds that don't kill you


[08-Mar-19 12:20 AM] Deleted User#0000
hwe figured out hwo to break it liek he does with everything üòÇ


[08-Mar-19 12:20 AM] Alright#0419
and this way, it's fair between cheaters and non-cheaters


[08-Mar-19 12:21 AM] jl777c#5810
i plan to implement a way that doesnt allow not submitting keystrokes


[08-Mar-19 12:21 AM] jl777c#5810
assume that is the case, now how do you cheat?


[08-Mar-19 12:21 AM] TonyL#3577
It's not breaking anything and it's not easy to save dead warrior even now


[08-Mar-19 12:21 AM] Alright#0419
you submit winning keystrokes instead of losing keystrokes?


[08-Mar-19 12:21 AM] TonyL#3577
It's harder to save not dead warrior üòÇ


[08-Mar-19 12:21 AM] Alright#0419
it all comes down to the timeframe in which a user has to do this


[08-Mar-19 12:21 AM] jl777c#5810
you make it sound so easy to not die


[08-Mar-19 12:22 AM] Alright#0419
not easy, but possible


[08-Mar-19 12:22 AM] Mylo#8306
games always have glitches


[08-Mar-19 12:22 AM] jl777c#5810
but if you have to publish keystrokes, how can you cheat


[08-Mar-19 12:22 AM] jl777c#5810
realtime publishing of keystrokes


[08-Mar-19 12:22 AM] Alright#0419
ok that works


[08-Mar-19 12:23 AM] Alright#0419
not sure how that is possible though


[08-Mar-19 12:23 AM] Alright#0419
realtime publishing and validating


[08-Mar-19 12:23 AM] jl777c#5810
you publish your keystrokes to validator nodes in realtime


[08-Mar-19 12:23 AM] Alright#0419
my entire point is that if there are cheats possible because of the design, make the cheats available to everyone


[08-Mar-19 12:23 AM] jl777c#5810
they need to then sign your keystrokes tx


[08-Mar-19 12:24 AM] Alright#0419
if this changes gameplay, so what


[08-Mar-19 12:24 AM] Mylo#8306
so many ways to solve this.... it wil be solved, just not today


[08-Mar-19 12:24 AM] jl777c#5810
yes, the fix would be to change it so zombies are allowed


[08-Mar-19 12:24 AM] jl777c#5810
we had that


[08-Mar-19 12:25 AM] jl777c#5810
but the realtime keystrokes validation is something that I plan to do, so not sure why you keep on about this


[08-Mar-19 12:29 AM] TonyL#3577
```my entire point is that if there are cheats possible because of the design, make the cheats available to everyone``` - I'm not totally sure how to implement now godmode dying protection cheat at the moment. There is even no "death" keystroke. If you can implement such mechanim we can share it I wonder


[08-Mar-19 12:33 AM] TonyL#3577
At the moment a lot of moments can be changed from sourcecode I wonder - like a weapon power, rng and etc. Maybe validation of hash-sum of rogue exectuable by comparing with one written in oracle can help


[08-Mar-19 12:34 AM] Alright#0419
if any element of RNG is left to the user to generate, I don't think this works


[08-Mar-19 12:34 AM] TonyL#3577
It will help to solve problems with `rogue` updating as well - if you not using consensus client now - you not able to play


[08-Mar-19 12:34 AM] Alright#0419
unless it's not actually random


[08-Mar-19 12:34 AM] Alright#0419
and based on some seed they agreed was actually the seed


[08-Mar-19 12:35 AM] TonyL#3577
I'm talikng about ingame pseudo-RNG which creating items, determinating hit-rate and etc


[08-Mar-19 12:36 AM] Alright#0419
are these are based on same inputs, same seed, same outcome?


[08-Mar-19 12:36 AM] Alright#0419
they are determined from the seed, yes?


[08-Mar-19 12:36 AM] jl777c#5810
the cheat would just be to restart level


[08-Mar-19 12:37 AM] TonyL#3577
But if code will send trigger on start to BC and hashsum validation prevent source code modifications - it should help imo


[08-Mar-19 12:37 AM] TonyL#3577
But it's too complicated for this stage of project I thnk


[08-Mar-19 12:37 AM] jl777c#5810
cant prevent modification of local code


[08-Mar-19 12:38 AM] jl777c#5810
but yes I have said 4 times, this issue is not for solving now


[08-Mar-19 12:39 AM] Alright#0419
I trust that you know what you're doing. This all came about from brainstorming with joker on how to best design blockchain tetris


[08-Mar-19 12:39 AM] jl777c#5810
to prevent keystroke reorg level cheats, external observers are needed


[08-Mar-19 12:39 AM] Alright#0419
I might not be able to write the literal code for these things, but i can  recognize a design trap when i see one


[08-Mar-19 12:39 AM] Alright#0419
so i am trying to help him avoid these


[08-Mar-19 12:39 AM] jl777c#5810
to prevent keystroke reorg level cheats, external observers are needed


[08-Mar-19 12:39 AM] Alright#0419
not saying there is a current one


[08-Mar-19 12:39 AM] jl777c#5810
to prevent keystroke reorg level cheats, external observers are needed


[08-Mar-19 05:59 AM] jl777c#5810
https://breakermag.com/tony-sheng-why-adding-crypto-to-games-wont-work-and-it-could/

{Embed}
Tony Sheng
https://breakermag.com/tony-sheng-why-adding-crypto-to-games-wont-work-and-it-could/
Tony Sheng: Why Adding Crypto to Games Won't Work (and How It Could)
Our columnist discusses how to make crypto games coherent products.
https://images-ext-1.discordapp.net/external/clWR3Z-GQn9NwadByZFxaHqippbnxkJMr0x5y4rhhCk/%3Fw%3D262/https/breakermag.com/wp-content/uploads/2019/02/1GjpckMk_400x400-e1550706093744.jpg


[08-Mar-19 06:12 AM] SHossain#0007
Will he write an article with your solution to blockchain based games?


[08-Mar-19 06:13 AM] jl777c#5810
his point is that if you change the games balance by adding crypto, it could very easily break the game


[08-Mar-19 06:14 AM] dukeleto#7326
yes, i believe that


[08-Mar-19 06:15 AM] dukeleto#7326
i am not a gamer, but i have heard people talk about "loot boxes" in games, where companies essentially make you pay for items in the game that are needed to play effectively. Some countries banned the practice, and the companies needed to rebalance the games to make them playable without buying essential items


[08-Mar-19 06:16 AM] dukeleto#7326
I think nobody has effectively integrated blockchains and games yet, but KMD is on the bleeding edge


[08-Mar-19 08:37 PM] Bryan_Beus#6442
I agree


[08-Mar-19 08:49 PM] Crabby Paddy#6239
No one plays those play to win games anymore. New strategy is rare skins haha. Buy a box random skin. 1% legendary, 9% rare, 80% common etc. kids love that type of gambling


[08-Mar-19 08:49 PM] Crabby Paddy#6239
They‚Äôve got steam where you can sell skins for money (non withdrawable) and buy new games or other skin games with it though a lot of games are cross platform, cross launcher etc so it‚Äôs not too useful


[08-Mar-19 08:50 PM] Crabby Paddy#6239
Would be good if there was a universal currency or more devs allowed for inter game items


[08-Mar-19 10:18 PM] ‡º∫Œ±‚ò¨‰∏Ç”¶¬¢ ‡ºí ‡ºª#5987
It would be interesting to allow a player to spend rogue to resurrect a dead player, within a short time frame. Similar to add more coins to continue.

{Reactions}
üëç (3) 

[08-Mar-19 11:14 PM] gcharang#6833
The cost to resurrect can be based on the character's value and increase exponentially with time. This payment could be to the cc address that pays ROGUE for gold when bailout.

there might be a way to use diceCC for the RNG of lootboxes
just thinking aloud


[09-Mar-19 08:58 AM] CHMEX#0686
https://coingape.com/eos-dapp-fishing-joy-hacked/

{Embed}
Nilesh Maurya
https://coingape.com/eos-dapp-fishing-joy-hacked/
EOS Dapp Fishing Joy Hacked By Transaction Blocking Technique: Pec...
While hackers have taken advantage of vulnerabilities in exchanges and certain projects to steal cryptos in the past, their new targets now seem to Internet 3.0, the Dapps. While a lot of Dapp‚Äôs have fallen victims to hackers recently, the new addition to this list is EOS D...
https://images-ext-2.discordapp.net/external/kaMHaFRiR2IMldg0ykU6JDnhr5cAhp1-WV3o96EMVD8/https/cdn.coingape.com/wp-content/uploads/2019/03/09011621/Screen-Shot-2019-03-09-at-1.15.09-am.png


[10-Mar-19 07:45 AM] Mylo#8306
nice find @CHMEX


[10-Mar-19 07:45 AM] Mylo#8306
@Alright one for your biscuit tin ^


[11-Mar-19 03:22 AM] jusoaresf#3291
https://www.reddit.com/r/2007scape/comments/ayyji8/power_outage_in_venezuela_has_plummeted_the/
apparently many Venezuelans are/were making their earnings on RuneScape.

{Embed}
https://www.reddit.com/r/2007scape/comments/ayyji8/power_outage_in_venezuela_has_plummeted_the/
r/2007scape - Power outage in Venezuela has plummeted the amount o...
930 votes and 167 comments so far on Reddit
https://images-ext-2.discordapp.net/external/kafHNA6rqNhoOgxYCuJOqHwXaydH9xbDCJCCAl5_FBo/%3Fauto%3Dwebp%26s%3Dfb280d6baf95a555bdcf94d60bbc644eacc3d9b4/https/preview.redd.it/unctmwnz60l21.jpg

{Reactions}
üòÉ 

[11-Mar-19 03:31 AM] TonyL#3577
So looks like nice market for Rogue game


[11-Mar-19 03:54 AM] jusoaresf#3291
That was my reading too üòÉ


[11-Mar-19 03:55 PM] mrlynch#5735
sorry to butt in, but i have written a py-rpc for pirate that pulls rpc details from PIRATE.conf, but could easily be adapted for multiple coins if anyone is interested
```
TonyL

https://github.com/barjomet/slick-bitcoinrpc I'm using this one (pip3 slick-bitcoinrpc + from slickrpc import Proxy) ```
was searching for python related posts in hope of finding guidelines for komodo libs


[11-Mar-19 06:27 PM] Alright#0419
@mrlynch someone wrote this, and we've been using it since 
https://github.com/KMDLabs/pos64staker/blob/cad035523c6c2aa6c50e9fce5f26355f9379c376/stakerlib.py#L36

{Embed}
https://github.com/KMDLabs/pos64staker/blob/cad035523c6c2aa6c50e9fce5f26355f9379c376/stakerlib.py
KMDLabs/pos64staker
Automated staker for PoS assetchains. Contribute to KMDLabs/pos64staker development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[11-Mar-19 06:31 PM] Alright#0419
https://github.com/KMDLabs/pos64staker/blob/283c077078f279ee341c9160b454f765722ff0fe/stakerlib.py#L12 
version with OSX and windows support

{Embed}
https://github.com/KMDLabs/pos64staker/blob/283c077078f279ee341c9160b454f765722ff0fe/stakerlib.py
KMDLabs/pos64staker
Automated staker for PoS assetchains. Contribute to KMDLabs/pos64staker development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[11-Mar-19 06:31 PM] Alright#0419
believe that someone is Tony, but I could be wrong

{Reactions}
üëå 

[15-Mar-19 04:32 AM] smkhound#7640
I'm working on expanding @TonyL 's `getconf.py` to cover more/all methods. Added a few while working on oracles.earth, though its a work in progress. Hopefully will have a chance to get it done (or closer to complete) this weekend

{Reactions}
üëç (2) 

[16-Mar-19 07:53 PM] Mylo#8306
CCcontract_info *cp


[16-Mar-19 07:55 PM] Mylo#8306
In English, if I‚Äôm reading code, does: cp = cryptocondition pointer, or contract pointer.  To the struct in memory.  Is that an accurate statement?


[16-Mar-19 07:58 PM] Deleted User#0000
its a pointer to a structure of variables in mempory


[16-Mar-19 08:00 PM] Mylo#8306
Yes thanks.
Is the convention used by the dev team to use the argument name ‚Äúcp‚Äù?


[16-Mar-19 08:00 PM] Deleted User#0000
im trying to find where the structure is lol...


[16-Mar-19 08:01 PM] Mylo#8306
Also, what is  the naming convention nValue and nIn?


[16-Mar-19 08:02 PM] Mylo#8306
It holds the basic info of the CC


[16-Mar-19 08:02 PM] Deleted User#0000
you an call anything whatever you want.... but I would advise (and what I try to do) is just use whatever is already being used by the existing code to make things easier to follow


[16-Mar-19 08:02 PM] Mylo#8306
I‚Äôm trying to establish the naming conventions and helper functions for docs.   Yes 100% agree


[16-Mar-19 08:03 PM] Mylo#8306
Maybe I‚Äôll make a google spreadsheet and present üòÉ


[16-Mar-19 08:04 PM] Deleted User#0000
I wish i knew where theis struct was defined.... I hate this part so much.... it took me weeks to work out where all the sctructs for iguana and komodo are defined... 
ONce you have that you can see what actually is contained in them and things are easy


[16-Mar-19 08:04 PM] Mylo#8306
Yeah.  But tell me what mtx is...


[16-Mar-19 08:04 PM] Mylo#8306
Give u 5 seconds to start typing üòù


[16-Mar-19 08:05 PM] Deleted User#0000
mtx should be a transaction


[16-Mar-19 08:05 PM] Deleted User#0000
because of sapling... you need to create it with some huge function


[16-Mar-19 08:05 PM] Mylo#8306
Don‚Äôt should me son


[16-Mar-19 08:05 PM] Deleted User#0000
its a copy paste


[16-Mar-19 08:05 PM] Mylo#8306
Yeah it‚Äôs mutable transaction


[16-Mar-19 08:05 PM] Deleted User#0000
the transaction class is defined in transation.h I think it is ...


[16-Mar-19 08:06 PM] Deleted User#0000
Maybe I dont do things properly... but its all in the code, you juist nede to find it


[16-Mar-19 08:07 PM] Mylo#8306
mtx is the variable used when constructing by the naming convention.  It could have been called cat or dog, but it‚Äôs not.


[16-Mar-19 08:07 PM] Mylo#8306
It‚Äôs easy to know once these conventions are established


[16-Mar-19 08:08 PM] Mylo#8306
As per your ‚Äúknow the structs‚Äù stmt


[16-Mar-19 08:08 PM] Deleted User#0000
`CCinclude.h` will be my referance point. 
Yes. Pretty much... My code doesnt usually follow such things, but im getting better at it. 
For me, you find all the relavent structs and classes, note where they are or open them all... then start making stuff. 
Once you know whats contained in what things are fairly simple to make.


[16-Mar-19 08:08 PM] Mylo#8306
When you see mtx, you go into mutable transaction construction reading code mode


[16-Mar-19 08:09 PM] Mylo#8306
Yeah they are sprinkled around the place üòÉ


[16-Mar-19 08:09 PM] Deleted User#0000
that is the hardest part. Documenting that would help people get started 1000x faster


[16-Mar-19 08:09 PM] Mylo#8306
You read my doc yet üòú


[16-Mar-19 08:10 PM] Deleted User#0000
iguana was litteral days to find where thigns are defined as there were over 2000  results for a serch  üòÜ


[16-Mar-19 08:10 PM] Mylo#8306
Def my aim.  10mins get stuck into it


[16-Mar-19 08:10 PM] Deleted User#0000
yes just about to read it actually


[16-Mar-19 08:10 PM] Deleted User#0000
wasslooking for link, then started talking to you üòõ


[16-Mar-19 08:10 PM] Mylo#8306
Oh don‚Äôt blame me ya kook

{Reactions}
üòÇ 

[16-Mar-19 08:12 PM] Deleted User#0000
lol you DMd it to me... ü§¶


[16-Mar-19 08:12 PM] Deleted User#0000
was easy to find


[16-Mar-19 08:38 PM] Deleted User#0000
yes using 2 letter names for things is fine when your going fast and you wrote it...


[16-Mar-19 08:38 PM] Deleted User#0000
but for someone else ... its difficult to use


[16-Mar-19 08:38 PM] Deleted User#0000
iguana took me months, everything called `dp` and `bp` annd stuff lol


[17-Mar-19 12:57 AM] jl777c#5810
dpow info pointer


[17-Mar-19 12:57 AM] jl777c#5810
block info pointer


[17-Mar-19 12:57 AM] jl777c#5810
it is a convention i use, have a struct that is XYZ_info, then pointers to that is *xp


[17-Mar-19 12:58 AM] jl777c#5810
so add three lines of comments to make it obvious to others


[17-Mar-19 12:58 AM] jl777c#5810
and calling a transaction tx, that actually seems ok, along with txid being transaction id


[17-Mar-19 12:59 AM] jl777c#5810
It is the C++-ness of things that makes all the structs hard to find. for iguana most all the structs are in iguana_structs.h


[17-Mar-19 12:59 AM] jl777c#5810
I like having all the structs in one place


[17-Mar-19 04:20 AM] Deleted User#0000
yes once I found them it was easy


[17-Mar-19 05:52 PM] Dr.Crypto#8986
Is KMD changing to a 50% PoW 50% PoS consensus ?


[17-Mar-19 05:53 PM] Dr.Crypto#8986
Says so on the website under currently in development and testing


[17-Mar-19 05:58 PM] Alright#0419
@Dr.Crypto where?


[17-Mar-19 05:59 PM] Alright#0419
It's likely a confusion between a feature upstreamed from VRSC which allows for 50/50 verushash/veruspos chains


[17-Mar-19 05:59 PM] Dr.Crypto#8986
Ah ye I just realized it


[17-Mar-19 05:59 PM] Alright#0419
that is a feature for assetchains, nothing to do with KMD itself


[21-Mar-19 10:28 AM] jl777c#5810
new payments CC in #cc-payments. it was conceived of and all the rpc calls implemented today. there was a stub for it for a long time, never had quite the right usecase for it


[22-Mar-19 06:13 AM] jl777c#5810
made gamescc based on customcc, for now it just has a blockhash based rng, but it will evolve to support locking funds and paying out based on game results. #cc-games

{Reactions}
üöÄ (3) 

[22-Mar-19 07:41 AM] Mylo#8306
cool thanks


[22-Mar-19 07:41 AM] Mylo#8306
noted.


[22-Mar-19 07:41 AM] Mylo#8306
questions to come at a later date


[22-Mar-19 08:19 AM] TonyL#3577
Looks like a very important link to easily build casinos game


[23-Mar-19 12:17 AM] TwilightPunkster K64#7533
actually, we can totally use that xD


[24-Mar-19 04:58 AM] Mylo#8306
@jl777c what is `e` and `f` in this line https://github.com/jl777/komodo/blob/jl777/src/cc/customcc.cpp#L22 ?

{Embed}
https://github.com/jl777/komodo/blob/jl777/src/cc/customcc.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[24-Mar-19 04:59 AM] Mylo#8306
eval & funds?


[24-Mar-19 05:59 AM] jl777c#5810
if ( vopret.size() > 2 && E_UNMARSHAL(vopret,ss >> e; ss >> f; ss >> pk) != 0 && e == EVAL_CUSTOM )


[24-Mar-19 05:59 AM] jl777c#5810
first two bytes of opreturn get those values. by convention the evalcode and funcid


[24-Mar-19 06:51 AM] Mylo#8306
ok thanks


[26-Mar-19 11:38 PM] Deleted User#0000
Managed to make my first CC with custom CC... very very simple one. Burns coins and submits chain params to the CC cntract allowing to retreive them later. 
Basically just send the chain params as the only argument for the RPC, and it extracts the supply checks if over minimum amount and tehn creates a tx to teh unspendable CC address. Validation is simple return false, as the coins are never allowed to be spent. 
May need to be combined with oracles, to be useful for LABS chain creation üòÉ

{Reactions}
üî• (4) 

[26-Mar-19 11:55 PM] Deleted User#0000
Well it does the burn tx fine. Need some more RPCs to finish it off and get the data back out, but thats the easy part.

{Reactions}
üëç 

[28-Mar-19 03:20 PM] PHBA2061 | VietStaking Validator#2530
hi, when working with cc, do I have to run 2 nodes as well ?


[28-Mar-19 03:40 PM] TonyL#3577
Pinned a message.


[28-Mar-19 03:40 PM] TonyL#3577
@PHBA2061 | VietStaking Validator Hi! If you want to create your assetchain - yes you need at least two nodes.
Also you can use CC test blockchain:
```./komodod -ac_name=TXSCLCC -ac_supply=0 -ac_reward=2500000000 -ac_halving=210000 -ac_cc=2 -addressindex=1 -spentindex=1 -addnode=54.36.126.42 -addnode=94.130.224.11 &```

{Reactions}
üëç 

[28-Mar-19 03:41 PM] PHBA2061 | VietStaking Validator#2530
thank you üòÉ

{Reactions}
üëç 

[28-Mar-19 03:42 PM] TonyL#3577
https://developers.komodoplatform.com/bsk/create-kic.html#step-1-create-an-assetchain-coin-setup-insight-based-explorer-electrum-servers-and-agama-gui-wallet
https://docs.komodoplatform.com/komodo/create-Komodo-Assetchain.html in case if you want to run own chain

{Embed}
https://developers.komodoplatform.com/bsk/create-kic.html
Create a new Blockchain | Komodo Documentation
Documentation for developers building on Komodo

{Reactions}
üëç 

[28-Mar-19 09:54 PM] Deleted User#0000
I worked out at least at a high level how to make LUA scripts for a CC code... not sure how useful it would be ... it could speed up testing code though as you can update the script then just run the RPC again without having to recompile and restarrt. 
I think though to make anything actually useful could turn into a massive task.


[28-Mar-19 09:58 PM] Deleted User#0000
Using external scripts for consensus code is ovbiously a bad idea... But that said to just mess with the CC's by writing LUA scripts  could help people understand how they work better. I think there would be maybe 20-30 functions inside the code that need a wrapper to be able to be used inside the scripts. Not sure if this is anything anyone wants. Just an idea I had.


[29-Mar-19 08:41 AM] PHBA2061 | VietStaking Validator#2530
I have 2 questions 
1) When running the command 
`./komodod -ac_name=TXSCLCC -ac_supply=0 -ac_reward=2500000000 -ac_halving=210000 -ac_cc=2 -addressindex=1 -spentindex=1 -addnode=54.36.126.42 -addnode=94.130.224.11 &`
Do I need to inlcude my pubkey as well ? 
2) I was following the Smart Contract Test Plan in the min message , when running the command 
`./komodo-cli -ac_name=TXSCLCC dicelist` 
it returns a null array, which means there are currently no dice contract deployed on the TXSCLCC ac ?


[29-Mar-19 08:43 AM] SHossain#0007
you can either use `-pubkey=0xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx` on the chain start command or use `./komodo-cli -ac_name=TXSCLCC setpubkey 0xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx` after the chain has started.


[29-Mar-19 08:44 AM] SHossain#0007
almost similar way like this https://github.com/KomodoPlatform/komodo/wiki/Get-Started-with-Rogue-Game#step-1---start-the-chain

{Embed}
https://github.com/KomodoPlatform/komodo/wiki/Get-Started-with-Rogue-Game
KomodoPlatform/komodo
Komodo. Contribute to KomodoPlatform/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[29-Mar-19 08:49 AM] PHBA2061 | VietStaking Validator#2530
@SHossain  thank you, that's what I just did then üòÉ  , and about the 2nd question , it doesn't return 
`[
  "dae5c8147c416709bce9d153072e8857167cbba1255bcb16b35efceaa8a68538",
  "4132ca8e8d46df9f8a8cbe83c99794497e06bbd190bd71f4abcdedf84e90952e"
]`
as stated in the google document, I'm not sure it's just me or it's the same for other nodes üòÇ


[29-Mar-19 08:49 AM] SHossain#0007
did you create a new dice plan on TXSCLCC?


[29-Mar-19 08:50 AM] SHossain#0007
are you fully synced?


[29-Mar-19 09:02 AM] PHBA2061 | VietStaking Validator#2530
I see, my komodo data is not fully synced yet, till now I was working only with my own test chain, so there's no need to sync, thank you üòÉ


[29-Mar-19 09:15 AM] gcharang#6833
there is better docs here than the smart contract test plan @PHBA2061 | VietStaking Validator https://developers.komodoplatform.com/basic-docs/cryptoconditions/cryptoconditions-instructions.html
if you need them

{Embed}
https://developers.komodoplatform.com/basic-docs/cryptoconditions/cryptoconditions-instructions.html
CryptoConditions Instructions | Komodo Documentation
Documentation for developers building on Komodo

{Reactions}
üëç 

[29-Mar-19 09:25 AM] PHBA2061 | VietStaking Validator#2530
thank you


[29-Mar-19 07:59 PM] dukeleto#7326
@Deleted User i think your Lua idea sounds very cool, there are many use cases

{Reactions}
üëå 

[30-Mar-19 01:23 AM] Mylo#8306
@Deleted User sounds interesting,


[30-Mar-19 01:24 AM] Mylo#8306
any wrappers for validation would help just to speed up testing time maybe


[30-Mar-19 05:35 AM] Deleted User#0000
I'm thinking that maybe its an easy way for testing validation as we can change the RPC calls in runtime to test all attack vectors very fast


[30-Mar-19 05:36 AM] Deleted User#0000
That said it may he more work to make it than its worth lol


[31-Mar-19 03:21 PM] Regnar#6164
Looking at the docs for Dilithium it says "The Dilithium CC allows for quantum resistant transactions on any Komodo assetchain that supports it." does this mean Dilithium signatures or the "Q" addresses aren't available for KMD?


[31-Mar-19 07:59 PM] Alright#0419
Not available on KMD. Might be available on KMDCC later this year. Whether or not it'll be on KMDCC is a question for jl


[31-Mar-19 08:17 PM] Regnar#6164
is KMDCC fungible with KMD?


[31-Mar-19 08:21 PM] Alright#0419
@Regnar yes


[31-Mar-19 08:23 PM] Regnar#6164
fungible as in KMD can move to KMDCC at a 1 for 1 rate, burned on one, created on another.


[31-Mar-19 08:24 PM] Alright#0419
Not burned, held in a gateway I believe. Don't know the full details though, I could be wrong


[31-Mar-19 08:25 PM] Regnar#6164
that works too. I'm not sure on the best way to do it, just wondering if people buying and holding KMD will have the benefits of many of the CC tech that will be on KMDCC, or if they will have to mine/buy a different coin all together.


[31-Mar-19 08:26 PM] Regnar#6164
They're different chains obviously, these questions I think a pretty unique to Komodo's situation so I figured they are worth asking


[31-Mar-19 08:27 PM] Regnar#6164
interchangeable


[31-Mar-19 08:28 PM] Regnar#6164
Right that's what I figured, KMD as a chain isn't implementing these CCs, other chains can build with them, including KMDCC


[31-Mar-19 08:36 PM] Regnar#6164
Where can I find information on the difference between KMD and KMDCC, is there an explorer for KMDCC? chain params to run it in Komodod? is it being mined separately from KMD?


[31-Mar-19 08:36 PM] Regnar#6164
Or am I misunderstanding KMDCC?


[31-Mar-19 08:53 PM] TonyL#3577
KMDCC doesn't exist yet, eta is Q2


[31-Mar-19 08:54 PM] TonyL#3577
Difference is z-addresses support and some CCs activated


[31-Mar-19 08:56 PM] TonyL#3577
`is it being mined separately from KMD?` - I wonder yes, since its assetchain


[31-Mar-19 09:05 PM] Regnar#6164
That sounds like it won't be fungible with KMD?


[31-Mar-19 09:12 PM] TonyL#3577
1:1 KMD <-> KMDCC gateway planned


[31-Mar-19 09:12 PM] TonyL#3577
So it'll be fungible with KMD


[31-Mar-19 09:13 PM] Regnar#6164
that's good to hear. I was hoping I wouldn't have to choose between cool KMDCC and KMD as an investment.


[31-Mar-19 09:14 PM] Regnar#6164
I would assume Dilithium would make it to KMD though eventually


[31-Mar-19 09:15 PM] Regnar#6164
seeing as that seems much more security related than other CCs


[31-Mar-19 11:41 PM] jl777c#5810
KMDCC to use the CC denominated in KMD


[31-Mar-19 11:42 PM] jl777c#5810
1:1 automated multisig gateway will exist to allow fungibility between the two


[01-Apr-19 05:30 AM] Regnar#6164
Good to know, thanks.


[02-Apr-19 08:39 PM] dukeleto#7326
`We are deprecating all references of CryptoConditions, and replacing them with Custom Consensus`


[02-Apr-19 08:39 PM] dukeleto#7326
I must have missed a memo


[02-Apr-19 08:49 PM] Deleted User#0000
marketing... we call them CC's does it matter to us


[02-Apr-19 09:16 PM] grewalsatinder#9653
https://y.yarn.co/34109619-f7d6-445b-a5fb-f2f77aed6251_text.gif

{Embed}
https://y.yarn.co/34109619-f7d6-445b-a5fb-f2f77aed6251_text.gif
https://images-ext-2.discordapp.net/external/OIazPkYycvAMt5bUTP7dZmbzEKjuQ53HGtUXazY3UsE/https/y.yarn.co/34109619-f7d6-445b-a5fb-f2f77aed6251_text.gif


[02-Apr-19 09:47 PM] dukeleto#7326
but my TPS reports all say CryptoConditions


[02-Apr-19 09:47 PM] dukeleto#7326
and what is PC Load Letter?!?!

{Reactions}
üòÖ 

[03-Apr-19 04:37 AM] Regnar#6164
https://twitter.com/airratchet/status/1113329237841317888

{Embed}
Schafer Lydia (@airratchet)
https://twitter.com/airratchet/status/1113329237841317888
IBM cryptographers Vadim Lyubashevsky and Gregor Seiler provide quantum safe cryptography standard, CRYSTALS-KYBER, CRYSTALS-#DILITHIUM and FALCON P.s. implemented in Komodo by Jl777 -> https://t.co/e5sA73yQQ9
https://images-ext-2.discordapp.net/external/ZFiXLEf419bHjDbP9yEK8VVnYCMI5MeVZEdr5_e4C4E/https/pbs.twimg.com/media/D3NWBrwXkAA5hse.jpg%3Alarge
Twitter


[03-Apr-19 04:37 AM] Regnar#6164
Dilithium related ^^


[11-Apr-19 11:14 PM] Artist#0765
cool


[11-Apr-19 11:14 PM] Artist#0765
where? @Regnar


[12-Apr-19 11:19 AM] Regnar#6164
^ that link I posted was some IBM cryptographers talking about Dilithium signatures. Komodo just implemented a new Dilithium signature CC


[12-Apr-19 12:17 PM] dukeleto#7326
If anybody wants to suggest a stable-ish CC to be enabled in HUSH, now is the time


[12-Apr-19 12:18 PM] dukeleto#7326
these are our current settings: ```
# CryptoConditions/Custom Consensus params
FAUCET=228
HEIR=234
CHANNEL=235
ORACLE=236
GATEWAY=241
CCENABLE=$FAUCET,$HEIR,$CHANNEL,$ORACLE,$GATEWAY
```


[12-Apr-19 12:18 PM] dukeleto#7326
leaning towards adding Dilithium, and looking for suggestions


[12-Apr-19 09:16 PM] Alright#0419
@dukeleto Dilithium would be a safe bet IMO


[12-Apr-19 09:16 PM] Alright#0419
can't see any reason it would be forking


[13-Apr-19 04:16 AM] dukeleto#7326
groovy


[13-Apr-19 06:18 AM] dukeleto#7326
@Alright can you verify for me which ccenable number I should use for dilithium? My brain is a bit fried


[13-Apr-19 06:18 AM] dukeleto#7326
i forgot what that variable is called and can't search for the hex to convert to decimal, lol


[13-Apr-19 06:18 AM] dukeleto#7326
having a table of values would be really nice to outsiders


[13-Apr-19 06:18 AM] jl777c#5810
dilithium is only in the sudoku libcc if i remember right


[13-Apr-19 06:19 AM] jl777c#5810
it does belone as a core CC though


[13-Apr-19 06:19 AM] dukeleto#7326
ok, i keep learning


[13-Apr-19 06:19 AM] dukeleto#7326
Hush will have to do a forced update in a few weeks for new notaries, so we have a timeframe to make more updates soon


[13-Apr-19 06:19 AM] dukeleto#7326
i am just going to stick with the CC's that I have now. I will put Dilithium in the "to be enabled" category


[13-Apr-19 06:20 AM] dukeleto#7326
@jl777c you were so right saying "perfection is the enemy of completion", as you always seem to be. I went down a deep rabbit hole modifying code I shouldn't, and Alright set me straight


[13-Apr-19 06:21 AM] dukeleto#7326
I mined at least 10 testnets in the last 48hrs, and read parts of KMD internals I had never seen


[13-Apr-19 06:21 AM] dukeleto#7326
learned how magicExtra sausage is made, that is fascinating


[13-Apr-19 06:21 AM] dukeleto#7326
and I learned how badly I could break the mining process by changing things I don't fully understand


[13-Apr-19 06:23 AM] dukeleto#7326
HUSHv3 is still a source code fork, but it's very tiny and lean and protected by an `if AC==HUSH` guard


[13-Apr-19 06:24 AM] dukeleto#7326
I was able to merge 20K lines of diff this morning, `jl777/dev` into my `duke` branch of hush3, *with no merge conflicts* and I almost cried tears of joy


[13-Apr-19 06:35 AM] jl777c#5810
with the lag between CC being developed and it getting GUI and marketing, maybe being one year or more in many cases. any chain that specializes in maximizing any specific CC would end up being the showcase for that CC


[13-Apr-19 07:09 AM] dukeleto#7326
I am hoping to attract some CC devs to the new HUSH chain, and I am very excited about the possibilities of Heir and Oracle and basically all of it


[13-Apr-19 07:10 AM] dukeleto#7326
there are many unexplored avenues of HushList protocol + cryptoconditions, as well


[13-Apr-19 07:10 AM] jl777c#5810
yes, if the viewing keys ever work, it might even be possible to combine zaddr and CC

{Reactions}
üôè (3) 

[13-Apr-19 07:11 AM] dukeleto#7326
I can imagine a CC where unless a specific address sends funds to it regularly, information is released, maybe the privkey that unlocks memo fields, or a viewkey


[13-Apr-19 07:11 AM] dukeleto#7326
dead man switch for whistleblowers


[13-Apr-19 07:12 AM] dukeleto#7326
i think a CC could inject a viewing key into OP_RETURN data, without touching zaddrs directly


[13-Apr-19 07:14 AM] jl777c#5810
it would be like a transistor with a control gate (triggered by tx)


[13-Apr-19 07:14 AM] jl777c#5810
so you send a tx to an address, then then enables those funds to be spent and doing so reveals the pubkey


[13-Apr-19 07:14 AM] dukeleto#7326
i could imagine a few people that would be interested in this kind of tech


[24-Apr-19 11:30 AM] ph03nix#3115
https://twitter.com/AkadoSang/status/1120850014354452481

{Embed}
Akado (@AkadoSang)
https://twitter.com/AkadoSang/status/1120850014354452481
The future success dApp is decentralized and all profits generated are  burned, permanently burning token supply, increasing scarcity and token  value. 

No one talks about this.

Of interest to $EOS, $ETH, $XTZ and $WAVES holders.
Twitter


[29-Apr-19 02:55 AM] Exile13#4458
`perfection is the enemy of completion` ::bows::
yes, the only other cc i would suggest is the zaddr, but im not the first to the punch!


[29-Apr-19 03:00 AM] jl777c#5810
NFT has total supply of 1, at least when the transporter malfunction is fixed

{Reactions}
üç¥ (2) 

[04-May-19 08:19 AM] gcharang#6833
rewards claiming - is available only on the main KMD chain, which won't be getting CC
also, it defeats the purpose of "*active* user reward"


[04-May-19 08:25 AM] gcharang#6833
I don't know the exact reason, but I think it is to
- make people use the KMD chain, update their nodes/wallets, keep up with the latest news of the network
- I remember reading somewhere that it will atleast make the tx fee effectively zero


[04-May-19 08:29 AM] gcharang#6833
anyway, relevant point is: "rewards claiming - is available only on the main KMD chain, which won't be getting CC"
what is `10x`?


[04-May-19 08:33 AM] gcharang#6833
aha! 10x back to you ü§ù


[05-May-19 09:47 AM] PHBA2061 | VietStaking Validator#2530
something I want to report: I'm reading CC chapter 4 on https://docs.komodoplatform.com/cc-jl/chapter04.html , and notice that the external links for `rpcserver.h` and `rpcserver.c` are no longer available

{Embed}
https://docs.komodoplatform.com/cc-jl/chapter04.html
Chapter 04 - CC RPC Extensions | Komodo Documentation
Documentation for developers building on Komodo


[05-May-19 09:58 AM] SHossain#0007
@jl777c did those files moved to https://github.com/jl777/komodo/tree/jl777/src/rpc ?

{Embed}
https://github.com/jl777/komodo/tree/jl777/src/rpc
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[05-May-19 09:58 AM] SHossain#0007
i see those files inside `rpc` dir now
https://github.com/jl777/komodo/blob/jl777/src/rpc/server.cpp
https://github.com/jl777/komodo/blob/jl777/src/rpc/server.h

{Embed}
https://github.com/jl777/komodo/blob/jl777/src/rpc/server.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Embed}
https://github.com/jl777/komodo/blob/jl777/src/rpc/server.h
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[05-May-19 10:02 AM] jl777c#5810
yes


[05-May-19 10:05 AM] SHossain#0007
thanks. i'll check the source files for the doc and update them.

{Reactions}
üëç 

[05-May-19 10:10 AM] SHossain#0007
@PHBA2061 | VietStaking Validator updated chapter 04


[05-May-19 10:11 AM] PHBA2061 | VietStaking Validator#2530
thank you üëç


[09-Jun-19 10:27 PM] Mylo#8306
cool thanks for solving and posting


[10-Jun-19 05:00 AM] Alright#0419
@Deleted User can't print the whole struct, but you can print individual things from it


[10-Jun-19 05:03 AM] Alright#0419
https://github.com/jl777/komodo/blob/5a44f04d8bfa10fd638ab02e8830427b3ef5f5a8/src/cc/CCinclude.h#L112

{Embed}
https://github.com/jl777/komodo/blob/5a44f04d8bfa10fd638ab02e8830427b3ef5f5a8/src/cc/CCinclude.h
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[10-Jun-19 05:06 AM] Alright#0419
https://github.com/jl777/komodo/blob/5a44f04d8bfa10fd638ab02e8830427b3ef5f5a8/src/cc/CCtx.cpp#L78

there's an example of printing something from it

{Embed}
https://github.com/jl777/komodo/blob/5a44f04d8bfa10fd638ab02e8830427b3ef5f5a8/src/cc/CCtx.cpp
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[10-Jun-19 05:06 AM] Alright#0419
evalcode in this case


[11-Jun-19 08:13 AM] Deleted User#0000
its a function that signs transactions


[11-Jun-19 08:14 AM] Deleted User#0000
this kind of replaces that, its extremly diffrent.


[11-Jun-19 08:14 AM] Deleted User#0000
like I said, this wont work with many existing CCs. I think once we figure out how to use it, many new things will be possible


[11-Jun-19 08:15 AM] Deleted User#0000
we are half way there, dimxy is using the ccopparams with pubkeys for marmara, and I used it without pubkeys for paymentsCC


[11-Jun-19 08:15 AM] Deleted User#0000
yes both is required


[11-Jun-19 08:15 AM] jl777c#5810
a properly signed tx is an offchain operation


[11-Jun-19 08:15 AM] jl777c#5810
however it is achieved is fine


[11-Jun-19 08:17 AM] Deleted User#0000
the signing of tx is very o low level, they should all work the same ?


[11-Jun-19 08:17 AM] jl777c#5810
cryptoconditions signing should be compatible


[21-Jun-19 06:48 PM] CyberTrucker#5260
@jl777c spam ^


[21-Jun-19 06:49 PM] CyberTrucker#5260
Same message is in our pirate channel


[04-Jul-19 09:50 AM] Alright#0419
@Deleted User pretty sure you can if you set `ac_sapling=<block height far in the future>`


[04-Jul-19 09:50 AM] Alright#0419
not sure why you would though


[04-Jul-19 09:53 AM] phm87#7395
@Alright if I use ac_sapling as you suggested, can I have overwinter without sapling ? I ask because I think that on kmd, both overwinter and sapling upgrades are fused/mised.


[04-Jul-19 09:54 AM] Alright#0419
I believe so, but I would need to test to confirm


[04-Jul-19 09:54 AM] Alright#0419
believe that would be the default behavior


[04-Jul-19 09:57 AM] phm87#7395
Ok thx. I did not know


[04-Jul-19 09:58 AM] phm87#7395
ac_sapling or ac_public ?


[04-Jul-19 09:58 AM] jl777c#5810
i dont see why ac_public would disabled sapling


[04-Jul-19 09:58 AM] phm87#7395
I will read docs


[04-Jul-19 09:58 AM] Alright#0419
@Deleted User definitely does not


[04-Jul-19 09:58 AM] Alright#0419
just disables z transactions


[04-Jul-19 09:59 AM] Alright#0419
KMD itself is ac_public=1


[04-Jul-19 10:00 AM] Alright#0419
that and nlocktime stuff


[04-Jul-19 10:00 AM] Alright#0419
a few things, would need to read the spec from zcash


[04-Jul-19 10:00 AM] phm87#7395
I expect version 3 and not 4. Overwinter stuff but no sapling fields (or filled with 0)


[04-Jul-19 10:01 AM] phm87#7395
To test my stratum


[04-Jul-19 10:01 AM] phm87#7395
It should work for coins with overwinter but without sapling


[04-Jul-19 10:01 AM] Alright#0419
look at txes on OOT or ZILLA


[04-Jul-19 10:01 AM] phm87#7395
Thx


[07-Jul-19 06:59 PM] Deleted User#0000
https://github.com/KMDLabs/komodo/blob/lotto/src/cc/customcc.cpp
https://github.com/KMDLabs/komodo/blob/lotto/src/cc/customcc.h
This is my first attempt at making a CC from scratch, It changes a fair few things, and leverages the Verus Enhanced CCs with some changes I added myself, to make validation work. We havent tested this yet, but I hope to get a chain up on LABS as soon as I can. I tried to comment well, would be good if someone can have a look at this and let me know if there is something that needs clarifying, as I want people to understand how this works, so they can offer improvements to it. 
The one thing I dont like is that to make it work correctly, I needed to re purpouse the `version` integer in  `COptCCParams` to funcid. Really it should have both, or possibly, we can set version to 3, and maybe this will allow an extra integer to be added to the Class without beaking backwards compatibility.

{Embed}
https://github.com/KMDLabs/komodo/blob/lotto/src/cc/customcc.cpp
KMDLabs/komodo
Komodo. Contribute to KMDLabs/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759

{Embed}
https://github.com/KMDLabs/komodo/blob/lotto/src/cc/customcc.h
KMDLabs/komodo
Komodo. Contribute to KMDLabs/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/HhyWP-0Sd5I4jG6OLRR8Z4upEFZlVyxGwgtl6Aqq9hw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/42953759


[07-Jul-19 07:20 PM] Deleted User#0000
ü§î  Just thaught of something, M is always 1, so maybe funcid can go there.


[14-Jul-19 06:08 PM] Enkhuliral#1827
Is there a post explaining cc to non-technical guys?


[14-Jul-19 06:25 PM] gcharang#6833
https://komodoplatform.com/crypto-conditions-utxo-based-smart-contracts/ @Enkhuliral

{Embed}
https://komodoplatform.com/crypto-conditions-utxo-based-smart-contracts/
Custom Consensus Framework: UTXO-Based Smart Contracts on Komodo
Komodo Platform is a leading innovator of blockchain technology. Now, Komodo is implementing the Custom Consensus framework and UTXO-based smart contracts.
https://images-ext-2.discordapp.net/external/HQSHUCxgkeR_RB-10E01rWYcg23YOXiFKiUxG-FRYlY/https/komodoplatform.com/wp-content/uploads/2018/08/smart-contracts-image.jpg


[16-Jul-19 11:49 AM] Julia#2161
Hi folks! How are u?


[16-Jul-19 11:50 AM] Julia#2161
I have a question: which wallet should i use if I wanna store  komodo, but pirate and k 64 too???


[16-Jul-19 11:50 AM] Julia#2161
i found 5 wallets but don't know what is better to use


[16-Jul-19 12:00 PM] jorian#4555
which 5 did you find?


[16-Jul-19 12:02 PM] Julia#2161
@jorian  verus  ocean quarda  zel


[16-Jul-19 12:02 PM] Julia#2161
4, sorry


[16-Jul-19 12:02 PM] Julia#2161
what should i take


[16-Jul-19 12:03 PM] jorian#4555
verus or ocean are from the komodo community


[16-Jul-19 12:03 PM] jorian#4555
guarda is 3rd party, don't have much experience, maybe ask in #üìà‚îÉtalk-trading


[16-Jul-19 12:04 PM] jorian#4555
never heard of zel


[16-Jul-19 12:04 PM] Julia#2161
zei is listed in the website of komodo


[16-Jul-19 12:05 PM] Julia#2161
i take versus, it's written there that it's a multicoin wallet


[16-Jul-19 12:05 PM] jorian#4555
yes, can't go wrong with that

{Reactions}
üëçüèº 

[16-Jul-19 03:22 PM] CrisF#3405
Hi,
I'm looking for information related to tokenizing realty. Found a bit on assets.cc.
I apologize for not doing more research before asking here. I'm just running out of time.
I'd be grateful for any links and Information that you could share. üôè


[16-Jul-19 07:10 PM] Mylo#8306
https://developers.komodoplatform.com/basic-docs/antara/antara-tutorials/beginner-series-part-0.html

{Embed}
https://developers.komodoplatform.com/basic-docs/antara/antara-tutorials/beginner-series-part-0.html
Komodo Developer Path | Preparation | Komodo Documentation
Documentation for developers building on Komodo


[16-Jul-19 07:10 PM] Mylo#8306
@CrisF about the 4th tutorial in you can make tokens in a docker environment


[16-Jul-19 07:11 PM] Mylo#8306
start on üëÜ  that link and follow next page til you hit "beginner series: Understanding tokens"


[16-Jul-19 07:48 PM] CrisF#3405
OK, great, thanks @Mylo !


[16-Jul-19 07:50 PM] CrisF#3405
It's not for me.  I have someone I'd like to show. They consulting on a project using another platform to do this.


[16-Jul-19 07:50 PM] CrisF#3405
Plant a seed and see what comes from it.


[16-Jul-19 08:20 PM] CrisF#3405
@Mylo the documentation is really becoming amazing, eh!
If there's anything else, technical and non-, happy to hear of it.


[17-Jul-19 01:07 AM] Mylo#8306
That is @Bryan_Beus ‚ÄòS voice on @gcharang @Alright @dimxy and probably artem, artem shossain & jl + a few others work.  I may have planted a little seed with the tool and contributed but definitely most of the heavy lifting was a team effort


[17-Jul-19 06:03 AM] Bryan_Beus#6442
@CrisF 

We have documentation coming on the Assets Antara Module. This module allows for token trading on a chain.

The first draft is finished (by gcharang), and now I need to edit.  Check back in a week or two and we should have it online. Feel free to message me, if needed.


[17-Jul-19 06:58 AM] Bryan_Beus#6442
@Enkhuliral 

https://developers.komodoplatform.com/basic-docs/start-here/core-technology-discussions/antara.html

{Embed}
https://developers.komodoplatform.com/basic-docs/start-here/core-technology-discussions/antara.html
The Antara Framework | Komodo Documentation
Documentation for developers building on Komodo


[17-Jul-19 07:50 AM] CrisF#3405
Thanks @Bryan_Beus , that will be very useful üôè 
I'd like to give them an option for tokenizing and see what happens from there.


[26-Jul-19 11:52 PM] bubu#1031
good morning everyone,have a nice day ‚òï


[27-Jul-19 12:52 AM] phm87#7395
Good morning @bubu have a nice day too ! ‚òï


[07-Aug-19 01:24 AM] ERIC#3057
I have add a new token Antara module to my smart chain .  After I restart my nodes, all my previous blocks have lost.  Any one know what is the problem ?


[07-Aug-19 01:27 AM] gcharang#6833
please make sure the launch parameters are exactly the same as the previous time
changing just one parameter's inclusion or value will create a new chain with the same name


[07-Aug-19 01:30 AM] ERIC#3057
Does that mean each time I want to add an Antara module, I will get a new chain. Can't I use the old chain to support a new Antara module ?


[07-Aug-19 01:31 AM] jl777c#5810
you would need to make source level changes to do that


[07-Aug-19 01:31 AM] jl777c#5810
height activation


[07-Aug-19 01:38 AM] ERIC#3057
I see. Thanks


[07-Aug-19 01:39 AM] jl777c#5810
or just activate all the ones you plan to use. make sure it all works as you expect in testing and then whenever new ones are used, they will be accepted by the same chain.


[21-Aug-19 11:01 PM] nille#9011
good morning everyone ‚òï


[29-Aug-19 09:25 PM] Jota pk 17#6959
hello


[08-Sep-19 12:44 PM] Hooftly#1337
Hey there im looking into Smart Chains and I have a question.  It seems from the code that `-ac_private` for total privacy is not supported and users are instead directed to use PIRATE instead.  Does that mean to make a Smart Chain using Pirate to achieve total privacy or is it suggesting you just use the Currency ARRR Instead?

```
fprintf(stderr,"-ac_private for a non-PIRATE chain is not supported. The only reason to have an -ac_private chain is for total privacy and that is best achieved with the largest anon set. PIRATE has that and it is recommended to just use PIRATE\n");
            StartShutdown();
```


[08-Sep-19 12:46 PM] jl777c#5810
for privacy, it needs to have the largest anon set and with almost a year head start PIRATE has the largest anon set of all zcash coins, something like 30x what zcash ZEC itself has


[08-Sep-19 12:47 PM] jl777c#5810
by making a private chain, you lose the ability of taddr, including CC, so it is really not a very useful chain to make it a private chain with a small anon set, ie. not very private and cant do anything else


[08-Sep-19 12:49 PM] Hooftly#1337
I Understand that but there is ways to get a community together to increase that set like the Church of Monero does.  I guess a Smart Chain is gonna be a hard sell for what i am trying to do


[11-Sep-19 08:51 AM] papacabeza#1885
Hi @jl777c I'm leading a zero-premine academic-focused research project (with mostly anonymous/pseudonymous members)  One of our researchers @Hooftly, our project tech lead.  We have a junior high researcher involved, too (that particular researcher is my daughter). üôÇ  *Question:* we're doing a live crypto project (academic and public policy focus, but it's real crypto) and will hack at this for a while.  Our project researchers are settling in on a Smart Chain as the long-term place for us.  Wanted to understand pricing and cost, and if you have early discounts for projects like ours.  Happy to post links but I don't want to get banned for spamming. üôÇ


[11-Sep-19 08:52 AM] jl777c#5810
if you setup the chains yourself, there is no cost


[11-Sep-19 08:52 AM] jl777c#5810
for dPoW would there be a cost, but for most research things dPoW wouldnt be needed


[11-Sep-19 08:54 AM] papacabeza#1885
One of the things we want to include in our research (down the line) is resilience testing and even open "try and hack us" kind of academic competitions (with prizes).  That's all down the line.  But because we want to build a chain to test on we do want dPoW.  How could we estimate a cost for that (@Hooftly will handle the chain setup)


[11-Sep-19 08:56 AM] papacabeza#1885
Also btw @jl777c you should know that your PoS options are what really caught our attention because my daughter has required as part of the project design criteria that we have a primarily PoS system (for environmental reasons).  It's speaking to the next generation. üôÇ


[11-Sep-19 08:57 AM] Hooftly#1337
We would like to set up an Antara Smart Chain that is Mostly PoS and part PoW utilizing the CC Modules and secured by dPoW


[11-Sep-19 08:59 AM] jl777c#5810
i would suggest to use -ac_adaptivepow=1 instead of PoS, as it allows CPU mining to coexist with on/off ASIC mining


[11-Sep-19 08:59 AM] jl777c#5810
for a purely academic project, we can likely offer dPoW notarization probono if you do all the chain setup yourself


[11-Sep-19 09:03 AM] papacabeza#1885
@jl777c that's really interesting about CPU vs PoS.  I'll run that by her.  I'd love to try and see if we can find some ways to quantify the environmental impact of those tradeoffs . . . I'll look into that.  *Very cool* of you to offer notarization.  We'd love to share what we do (as we do it) to help showcase our project.


[11-Sep-19 09:08 AM] papacabeza#1885
@jl777c she wanted to do 90% PoS, 10% PoW (there was a variable description in docs indicating that might be possible).  Is it possible to do 90% PoS and 10% adapativepow?  She wants to build Raspberry Pi nodes that can meaningfully mine (the Raspberry Pi is the computer of choice for junior high hackers), and figured that they would be most efficient if set up as mini PoS nodes.


[11-Sep-19 09:08 AM] jl777c#5810
CPU mining is very environment friendly and we have it where a single CPU can mine blocks even after an ASIC has been mining


[11-Sep-19 09:09 AM] jl777c#5810
the behavior of a 100% PoW chain will be much more stable and easier to manage than a high percentage PoS chain, with a high percentage PoS chain, everything is dependent on how the premine is allocated. it is not a very decentralized system


[11-Sep-19 09:09 AM] papacabeza#1885
Great input.  I'll bring this to her.


[11-Sep-19 09:10 AM] Hooftly#1337
Coins would need to be staked before block 100 is how I understand it


[11-Sep-19 09:10 AM] Hooftly#1337
on a number of nodes


[11-Sep-19 09:15 AM] jl777c#5810
with PoS you would need to distribute the premine before block 100 and have enough nodes staking to make sure the chain advances


[11-Sep-19 09:16 AM] jl777c#5810
with adaptivePoW, none of that is needed. just start the chain and whatever amount of mining nodes you have, it will advance the chain, even if there is only one core mining in the entire network


[11-Sep-19 09:20 AM] Hooftly#1337
Thanks for the advice.

Understood I realize maintenance is required and what is needed if they decide to go ahead with a heavy PoS chain.


[11-Sep-19 09:27 AM] jl777c#5810
its just easy to botch a high percentage PoS chain and forever it will depend on the initial premine allocation


[11-Sep-19 09:28 AM] jl777c#5810
a much better distribution and less issues with 100% adaptivepow


[11-Sep-19 09:33 AM] papacabeza#1885
We don't have a premine per se but we do have an active chain that we're swapping over, and the "dev wallet" from mining should give us enough to start nodes.  Really good advice on the emphasis on adaptive PoW . . . but we also want the learning/hacking how-is-network-different research opportunity with PoS.  So maybe a mix of some kind?


[11-Sep-19 09:35 AM] jl777c#5810
you can run two chains and see how they compare


[11-Sep-19 09:53 AM] Hooftly#1337
Hmm perhaps one purely PoW and one that is heavier PoS (maybe not 90% ) and we could use CC to have them interact with eachother


[11-Sep-19 09:59 AM] jl777c#5810
make a two chain cluster, you wont be able to do cross chain until notairzations start, but that would be a cool pair of chains


[11-Sep-19 10:09 AM] Hooftly#1337
Yeah I like this idea.  And for research purposes you can analyze impact of both chains.


[16-Sep-19 08:24 AM] Hooftly#1337
Is it ok to ask for a push in the right direction here regarding starting a new Smart Chain and RPC issues?  I cannot seem to access the RPC port via komodo-cli.  I am using the ac_name rpc-port and conf flags.  Its probably something stupid simple im overlooking.

Note I am using the dev branch to utilize Adaptivepow


[16-Sep-19 08:39 AM] jl777c#5810
what specific command is getting what specific error?


[16-Sep-19 08:49 AM] Hooftly#1337
Command: 
```
./komodo-cli -ac_name=assestchain -rpc-port=19690 -conf=/home/ubuntu/.komodo/assetchain/assetchain.conf setgenerate true
``` 

Error:
```
error: couldn't connect to server: unknown (code -1)
(make sure server is running and you are connecting to the correct RPC port)
```

assetchain.conf:
```
rpcuser=myuser
rpcpassword=mypass
rpcport=19690
server=1
txindex=1
rpcworkqueue=256
rpcallowip=127.0.0.1
rpcbind=127.0.0.1
```


[16-Sep-19 09:00 AM] jl777c#5810
what is the rpcport in the getinfo output?


[16-Sep-19 09:10 AM] Hooftly#1337
Command:
```
./komodo-cli -ac_name=assetchain -rpc-port=19690 getinfo
```

Output:
```
error: couldn't connect to server: unknown (code -1)
(make sure server is running and you are connecting to the correct RPC port)
```

Note When starting the Chain on 4 nodes I was given this:
```
>>>>>>>>>> assetchain: p2p.19689 rpc.19690 magic.46bee181 1186914689 315000 coins
```

Just trying to get it started now but RPC wont listen lol


[16-Sep-19 09:14 AM] Hooftly#1337
Flags used on creation:
```
-ac_supply -ac_adaptivepow -ac_blocktime -ac_cbmaturity -ac_cc -ac_ccactivate -ac_eras -ac_reward -ac_end -ac_staked
```


[16-Sep-19 09:22 AM] jl777c#5810
./komodo-cli -ac_name=assetchain  getinfo


[16-Sep-19 09:22 AM] jl777c#5810
does that work?


[16-Sep-19 09:22 AM] jl777c#5810
you dont need to set the rpcport in the cli unless you are using non-standard


[16-Sep-19 09:38 AM] Hooftly#1337
no same error unfortunately


[16-Sep-19 09:49 AM] jl777c#5810
how exactly did you start the chain?


[16-Sep-19 09:50 AM] jl777c#5810
once a chain is started, just doing a ./komodo-cli -ac_name=<NAME> getinfo should just work


[16-Sep-19 10:50 AM] Hooftly#1337
@jl777c Below is the exact command I used on 4 nodes and none have access to RPC able to return `./komodo-cli -ac_name=assetchain getinfo` information.  The same error above occurs.
```
./komodod -ac_name=assetchain -ac_supply=315000 -ac_adaptivepow=1 -ac_blocktime=60 -ac_cbmaturity=12 -ac_cc=2019 =ac_ccactivate=1000 -ac_eras=5 -ac_reward=115000000,8800000,4200000,1800000,1250000 -ac_end=525600,1051200,1576800,1680481,19867680 -ac_staked=50 -add-node=. . .
```


[16-Sep-19 10:52 AM] Hooftly#1337
Im starting to feel like its not something I am doing LOL üòÑ


[16-Sep-19 10:53 AM] cipi#4502
is the daemon really listening to that port?
`netstat -ntlp | grep 19690`


[16-Sep-19 10:54 AM] cipi#4502
could it be that the port is already in use by something else?
`netstat -natp | grep 19690`


[16-Sep-19 10:59 AM] jl777c#5810
@Hooftly it looks fine, @gcharang plz help with this, maybe you can launch that chain and make sure the rpc works


[16-Sep-19 11:05 AM] Hooftly#1337
@cipi hmm its not listening you are correct as netsat returns no response


[16-Sep-19 11:06 AM] Hooftly#1337
assetchain is not actually the name btw üòÑ


[16-Sep-19 11:07 AM] Hooftly#1337
its `ac_name=unicornis`


[16-Sep-19 11:11 AM] jorian#4555
`-add-node=` > `-addnode=`


[16-Sep-19 11:14 AM] jorian#4555
@Hooftly can you share a printscreen of what comes after you run `./komodod -ac_name=...` ?


[16-Sep-19 11:16 AM] Hooftly#1337
Yes I added the nodes I just didnt feel like sharing the Ip Addresses


[16-Sep-19 11:17 AM] Hooftly#1337
I cant share screens here


[16-Sep-19 11:17 AM] Hooftly#1337
@jorian


[16-Sep-19 11:18 AM] jorian#4555
no, but it's `addnode`, not `add-node`


[16-Sep-19 11:18 AM] jorian#4555
maybe that messes up a bit, no idea


[16-Sep-19 11:22 AM] Hooftly#1337
oh shit


[16-Sep-19 11:22 AM] Hooftly#1337
lets try


[16-Sep-19 11:22 AM] Hooftly#1337
If so lol


[16-Sep-19 11:24 AM] cipi#4502
btw, there is also an error in the paramater `=ac_ccactivate=1000`, it should be `-ac_ccactivate=1000`


[16-Sep-19 11:26 AM] Hooftly#1337
look at that lol


[16-Sep-19 11:28 AM] Hooftly#1337
So I nuked the asset chain folder and started again and made those changes to addnode and ccactivate and still the same result


[16-Sep-19 11:32 AM] cipi#4502
what does `netstat -ntlp | grep komodod`show? Does it listen to some other port instead?


[16-Sep-19 11:39 AM] Hooftly#1337
https://imgur.com/a/hVRs96U

{Embed}
https://imgur.com/a/hVRs96U
https://images-ext-2.discordapp.net/external/yxt9miqZjjB5-R3Ly223tI_FpEyY3j8klDdjowcjk9c/https/i.imgur.com/P5ssjCXh.jpg


[16-Sep-19 11:46 AM] cipi#4502
that is the komodod for KMD, the other one is not listening to any port


[16-Sep-19 11:47 AM] cipi#4502
looks more like it didn't even start... `ps aux | grep komodod`


[16-Sep-19 11:48 AM] jorian#4555
hence my question of sharing a printscreen of the exact output


[16-Sep-19 12:00 PM] Hooftly#1337
https://imgur.com/a/EtrMnWQ

{Embed}
https://imgur.com/a/EtrMnWQ
https://images-ext-1.discordapp.net/external/o3ifeqRoyAMwy-vET-1tBSIFwCqEhuPfzfKB_1wH_Tc/https/i.imgur.com/bahJmm8h.jpg


[16-Sep-19 12:01 PM] Hooftly#1337
Output was the same for all 4 nodes as seen on bottom 2 panels


[16-Sep-19 12:11 PM] jorian#4555
did you read what i said?


[16-Sep-19 12:12 PM] jorian#4555
you still have `add-node`


[16-Sep-19 12:12 PM] jorian#4555
replace that with `addnode`


[16-Sep-19 12:12 PM] jorian#4555
remove the hyphen


[16-Sep-19 12:13 PM] jorian#4555
also:


[16-Sep-19 12:13 PM] jorian#4555
>>> 8:24 PM] cipi: btw, there is also an error in the paramater =ac_ccactivate=1000, it should be -ac_ccactivate=1000


[16-Sep-19 12:14 PM] jl777c#5810
still nothing explains why rpc calls cant be made


[16-Sep-19 12:15 PM] jl777c#5810
that indicates something is not right with the system config


[16-Sep-19 12:19 PM] Hooftly#1337
It was the same response when run again with the proper parameters as explained above sorry of that wasnt clear


[16-Sep-19 12:19 PM] Hooftly#1337
@jorian


[16-Sep-19 12:19 PM] jorian#4555
and nothing says Error?


[16-Sep-19 12:21 PM] Hooftly#1337
https://imgur.com/a/70GpVZq

{Embed}
https://imgur.com/a/70GpVZq
https://images-ext-1.discordapp.net/external/nSSxW3xeHQNLxnHZN6KeBXZBRhFZ9ei8iU9s_1thN6Y/https/i.imgur.com/vCJzrC6h.jpg


[16-Sep-19 12:23 PM] cipi#4502
a `-` in front of `ac_ccactivate` is missing and the daemon thinks it is a command and prints the error about `there is no client functionality bla`


[16-Sep-19 12:23 PM] jl777c#5810
cc_activate doenst have a - in front of it


[16-Sep-19 12:23 PM] cipi#4502
üôÇ


[16-Sep-19 12:23 PM] Hooftly#1337
LMAO


[16-Sep-19 12:23 PM] Hooftly#1337
ive been up for too long


[16-Sep-19 12:24 PM] Hooftly#1337
My god that did it


[16-Sep-19 12:24 PM] Hooftly#1337
üò≠


[16-Sep-19 12:24 PM] Hooftly#1337
feel free to throw shame


[16-Sep-19 12:25 PM] jorian#4555
we've all been there, no worries

{Reactions}
üëå 

[16-Sep-19 12:25 PM] jorian#4555
you're now one of us üòÑ


[16-Sep-19 12:26 PM] Hooftly#1337
üòÑ


[16-Sep-19 12:26 PM] Hooftly#1337
Thanks for the assitance guys


[22-Sep-19 08:06 PM] papacabeza#1885
Hi @jl777c  thanks for the assistance with our project.  Jr. researcher moon recorded a short shout-out thank-you to komodo.  One more week of testnet then we swap over on Friday.   Here's the recorded note from Moon. ‚ô• 

https://bittubers.com/post/2447470b-7d9e-4fa9-8b00-848f41bf4424

{Embed}
https://bittubers.com/post/2447470b-7d9e-4fa9-8b00-848f41bf4424
Jr. Researcher Moon announces Unicornis
Aardvark Unicornis is getting close! Junior researcher Moon gives an update and thanks Komodo for sponsoring the tech in the new chain.
https://images-ext-1.discordapp.net/external/GLcmPuObMKVGe2jEeEz_wm-5l2CVgR9uM-JT-0txqFY/%3FGoogleAccessId%3Dbittube-social%2540bittube-airtime-extension.iam.gserviceaccount.com%26Expires%3D1569812091%26Signature%3DX85SmDJbanO4nUw8mQbxqCA%252Ffktw21aI7qdZzMm70AcllKWAMW3OMblbwxSjp5N2wpV3m81F0mruEb0%252FoHzZ4s4B3qb2LiludWSDAHxMu0o0wtR020NGd4KwIdzEFlU2W85zzv6mO3mNhX3OU00qSV%252FlvUYV4k6FtzjoQ05XBU1MSdVS6kmPUSfhY5GK4qF8o1cR1VilOz4pBClXSVZr3JcXrbIeEjq4l4tjyO%252BSjwlveQ3LoGuEjV7HFaMMQlBKXJKUSkRjUbWS5JQwBIGAaXD%252Bh1c%252BL%252FXQ%252BeZmTxsgIE4wZ9on6GpePRSEQQW77WEZGrB4Xdhh%252FevSyQI2RfubXw%253D%253D/https/storage.googleapis.com/bittube-airtime-extension.appspot.com/posts%252Fbittube_87522_1569205238191_thumbnail.jpg

{Reactions}
yassinheart (6) üöÄ üëè (4) 

[22-Sep-19 10:35 PM] jl777c#5810
great to hear that the new generation is building blockchains!


[23-Sep-19 11:22 PM] Slyris#2880
Oh ! So young and inspiring ! Congratulations


[26-Sep-19 04:32 PM] cipi#4502
Would it be possibl√∂e to implement the issuance of options https://en.wikipedia.org/wiki/Option_(finance) in CC?
I mean something like this:

1. issuer creates 2 new coins, BTCUSD_CALL_8000_3012 and BTCUSD_PUT_8000_3012
2. issuer sells this coins on AtomicDEX
3. when a put (BTCUSD_PUT_8000_3012) is bought, issuer must deposit USDC into a contract address
4. when a call (BTCUSD_CALL_8000_3012) is bought, issuer must deposit BTC into a contract address
5. on expiry date (30.12.) the holders of BTCUSD_CALL_8000_3012 or BTCUSD_PUT_8000_3012 are paid out automatically from the contract address
   - all the BTCs are sold for USDC
   - the difference between strike price (8000) and real price in USDC is paid out to either the holders of BTCUSD_CALL_8000_3012 or BTCUSD_PUT_8000_3012

BTCUSD_CALL_8000_3012 and BTCUSD_PUT_8000_3012 can be traded all the time, but 3. and 4. must only be done once (on first transfer from issuer to buyer), so maybe it is easier to do 1., 3. and 4. in one step, so that BTCUSD_CALL_8000_3012 and BTCUSD_PUT_8000_3012 coins are only created when the USDC/BTC deposits have been done.

{Embed}
https://en.wikipedia.org/wiki/Option_(finance)
Option (finance)
In finance, an option is a contract which gives the buyer (the owner or holder of the option) the right, but not the obligation, to buy or sell an underlying asset or instrument at a specified strike price prior to or on a specified date, depending on the form of the option. ...
https://images-ext-2.discordapp.net/external/NvOvbnhcRIAmKVn6bU38edujpoUX5q8F6GX5ETZi7Po/https/upload.wikimedia.org/wikipedia/commons/d/d7/Philippine-stock-market-board.jpg


[27-Sep-19 11:52 AM] johnwhitestar#1227
Guys I have an idea of a coin that can be actually useful in the real life. I worked on this idea for the last two years. I think it would be easier to develop it as a KMD token initially. As I'm not a developer I'll probably need to find a developer to work on the idea with me. I think the additional modules would be needed for my idea to become reality here. So I'd need to ask whether the modules should be written in C++, so I'll be looking for the developer with the right specialization.


[28-Sep-19 02:05 AM] jl777c#5810
C++ would be best for custom modules, if existing modules can be used, then any language can be used to issue api calls


[28-Sep-19 09:43 AM] johnwhitestar#1227
Thank you for replay! I'd like also to ask. Creating additional modules is the only way to make "smart contracts" or the "rules" for my token can be just created with C++ without the code being part of a module?


[28-Sep-19 10:02 AM] jl777c#5810
your question doesnt make technical sense. maybe easier to ask what you want to do that try to speak about technical details


[28-Sep-19 10:22 AM] johnwhitestar#1227
For instance I'd like my tokens to have voting rights and I'd need them to have privacy option enabled, but it's not available as module yet AFAIK. So what I'm asking myself is whether a specific module has to be created or a developer that possibly would work on this idea will just need to create a code for my specific token.


[28-Sep-19 10:23 AM] jl777c#5810
mixing privacy with special rights is not easy to do


[28-Sep-19 10:24 AM] jl777c#5810
if it is solvable,then a dev would be needed


[28-Sep-19 10:24 AM] johnwhitestar#1227
you mean privacy with voting right?


[28-Sep-19 10:24 AM] jl777c#5810
you can do a private voting using a onetime coin just for voting


[28-Sep-19 10:24 AM] jl777c#5810
then use zaddr for voting destination


[28-Sep-19 10:24 AM] jl777c#5810
the one with most coins wins


[28-Sep-19 10:25 AM] jl777c#5810
this is built in functionality, no need for custom


[28-Sep-19 10:25 AM] jl777c#5810
without more details, only general advice can be given


[28-Sep-19 10:26 AM] johnwhitestar#1227
I understand of course it's difficult to speak generally


[28-Sep-19 10:26 AM] johnwhitestar#1227
The thing is that I have a new consensus mechanism in mind.


[28-Sep-19 10:26 AM] johnwhitestar#1227
Or more precisely the evolution of an existent one.


[28-Sep-19 10:27 AM] johnwhitestar#1227
This consensus mechanism at present time is possible to realize only on the base of KMD technology, if any.


[28-Sep-19 10:28 AM] johnwhitestar#1227
But I'm afraid I won't be able to find a good dev to realize this idea on a separate blockchain, at least not as soon as I'd like to, so I was thinking about a kind of imitation of this mechanism under the form of smart contract.


[28-Sep-19 10:29 AM] johnwhitestar#1227
Supposing it would be easier. So once the idea is live maybe it would be easier to attract the interest of a good developer(s).


[28-Sep-19 10:30 AM] johnwhitestar#1227
For obvious reasons speaking about this idea publicly in detail while it's just an idea doesn't make too much sense.


[28-Sep-19 10:37 AM] johnwhitestar#1227
But what I'm trying to do is to release tokens with voting rights and privacy option (to protect the voters), that would vote on the distribution of funds (to fund the projects), this part is similar to masternodes voting.


[28-Sep-19 10:40 AM] johnwhitestar#1227
So if the tokens are being sent to a zaddr to vote once there is a winner the funds available on another address should be transferred to the winning address and the tokens have to be returned to their original owners. In the ideal voting process there shouldn't be any fee payment involved if not nobody will be willing to vote.


[28-Sep-19 10:40 AM] johnwhitestar#1227
This is the key of what I'd need to create (at least the other parts I'd need are already in place in the Antara Framework, as far a I can see). Is it possible to realize this part without being a C++ programmer?


[28-Sep-19 11:28 AM] jl777c#5810
you can just make a special voting chain to handle the voting, but probably you will want some sort of GUI


[28-Sep-19 11:54 AM] johnwhitestar#1227
Thank you very much!


[28-Sep-19 06:37 PM] CrisF#3405
Hi @johnwhitestar ,
I'm also looking for a way to conduct a private vote. 
Unfortunately, I don't have much in the way of technical skills. 
There has been some discussion of this in #kmdlabs . 
Please come and have a look.


[29-Sep-19 01:06 AM] johnwhitestar#1227
@CrisF Thank you so much!

{Reactions}
labs 

[03-Oct-19 01:03 AM] bubu#1031
good morning everyone


[03-Oct-19 01:03 AM] Mihailo#5902
gm


[08-Oct-19 02:09 PM] Regnar#6164
Any test chains that have CC tokens enabled? Also is there a list of some test chains and the params?


[08-Oct-19 02:43 PM] gcharang#6833
@Regnar 
```
./komodod -ac_name=RICK -ac_supply=90000000000 -ac_reward=100000000 -ac_cc=3 -ac_staked=10 -addnode=95.217.44.48 -addnode=138.201.136.145
```
get coins from the faucet <https://www.atomicexplorer.com/#/faucet/rick>

{Reactions}
üëç 

[09-Oct-19 03:21 PM] Regnar#6164
I'm trying to mess with TokensCC using Rick chain. At first I did this
```komodod -ac_name=RICK -ac_supply=90000000000 -ac_reward=100000000 -ac_cc=3 -ac_staked=10 -addnode=95.217.44.48 -addnode=138.201.136.145```


Then `getnewaddress` then `validateaddress` and got privkey with `dumpprivkey`
and then stopped the daemon.

However when I try to restart it with 
```komodod -pubkey=PUBKEY -ac_name=RICK -ac_supply=90000000000 -ac_reward=100000000 -ac_cc=3 -ac_staked=10 -addnode=95.217.44.48 -addnode=138.201.136.145```

It doesn't do anything. just starts a new line in CLI. 

Any idea why this won't run? It runs fine without the pubkey param


[09-Oct-19 03:39 PM] TonyL#3577
Are you using pubkey as pubkey param? Just not sure why you've dumped privkey


[09-Oct-19 03:39 PM] Regnar#6164
i dumped privkey just because I wanted to save it lol


[09-Oct-19 03:39 PM] Regnar#6164
yes `-pubkey=MYPUBKEY`


[09-Oct-19 03:40 PM] TonyL#3577
Any output in cli?


[09-Oct-19 03:41 PM] Regnar#6164
no


[09-Oct-19 03:41 PM] Regnar#6164
it hesitates a second, then just starts a new line in CLI


[09-Oct-19 03:43 PM] Regnar#6164
it works without `-pubkey=PUBKEY`


[09-Oct-19 03:44 PM] Regnar#6164
also this is komodod 0.4.0a


[09-Oct-19 03:45 PM] Regnar#6164
on windows 10


[09-Oct-19 03:45 PM] TonyL#3577
Could you please share full command you are using with actual pubkey?

{Reactions}
üëç 

[09-Oct-19 04:51 PM] Regnar#6164
For anyone who is reading and having a similar issue. I wasn't able to launch the chain using `-pubkey=MYPUBKEY` param, however I was able to launch it without setting pubkey and using `setpubkey` instead


[09-Oct-19 07:17 PM] Regnar#6164
okay so I got RICK all synced up and Tokens CC seems to be working `tokenaddress` returns success. I have 7.77 RICK and I'm attempting to make a test token using `tokencreate` However I'm getting this response
```{
  "result": "error",
  "error": "cant find normal inputs"
}```
using this
`komodo-cli -ac_name=RICK tokencreate MARBLE 777 "Testing the creation of marble token"`


[09-Oct-19 07:18 PM] Regnar#6164
going on this info <https://developers.komodoplatform.com/basic-docs/antara/antara-api/tokens.html#tokens>


[09-Oct-19 09:40 PM] gcharang#6833
@Regnar try
```
komodo-cli -ac_name=RICK tokencreate MARBLE 0.00000777 "Testing the creation of marble token"
```
each sat creates 1 token
> 1 COIN of the blockchain provides 100000000 tokens

{Reactions}
üíØ 

[10-Oct-19 03:16 AM] Regnar#6164
That worked! sorry I was reading it as what I wanted the supply to be, not how many coins I needed to use to make the desired amount of supply

{Reactions}
‚úÖ 

[10-Oct-19 06:49 PM] Regnar#6164
I've got another question. If I want to send tokens to someone I would use `tokentransfer`, but this requires I have their pubkey. <https://developers.komodoplatform.com/basic-docs/antara/antara-api/tokens.html#tokentransfer>

Is there another way to send tokens? It says:
`The tokentransfer method transfers tokens from one Antara Address to another.`


[10-Oct-19 06:51 PM] Regnar#6164
I can get `scriptPubKey` of an address using Komodod's `validateaddress` but I don't think this is what I need


[10-Oct-19 06:52 PM] Regnar#6164
So simply asked, How do I send tokens to an address without knowing their pubkey?


[10-Oct-19 07:13 PM] gcharang#6833
@Regnar they are effectively being transfered from one address to another
but the thing to provide is a pubkey

Pubkey is the address equivalent for Antara modules


[10-Oct-19 07:14 PM] Regnar#6164
right, I thought the only way to find the pubkey for an address you don't own is only if they give it to you, or spend with it.


[10-Oct-19 07:14 PM] gcharang#6833
thats true


[10-Oct-19 07:15 PM] gcharang#6833
so users have to share pubkeys for moving tokens


[10-Oct-19 07:39 PM] Regnar#6164
yea that's what I was hoping to get around


[10-Oct-19 07:40 PM] Regnar#6164
but it looks like you can only send tokens to pubkeys


[10-Oct-19 08:04 PM] Regnar#6164
I think that bit is above my head, why you wouldn't be able to send tokens to an address. Worst case people share pubkeys but I think that would be kind of a pain for average users. Is there a reason they can't be sent to an address?


[10-Oct-19 08:26 PM] gcharang#6833
addresses are just hashed and prettified pubkeys that have less characters and builtin error protection
any GUI wallet that deals with addresses can deal with pubkeys just as easily
maybe they can be shared as qr codes?
what do you think is different between copy/pasting an address and copy/pasting a pubkey for a user?
@Regnar 

the reason pubkeys are used for Antara modules is because thay are the raw form and needed for validating any kind of signature.
 even with addresses, to validate a signature, the pubkey needs to be submitted

just using the pubkey directly makes writing the validation code easier for Antara modules


[10-Oct-19 08:30 PM] CrisF#3405
For final production use won't the most of that be hidden or simplified by the GUI anyhow?


[10-Oct-19 08:33 PM] CrisF#3405
I've been trying out some things with tokens also @Regnar . Interested to hear more of your ideas on them.

{Reactions}
üëç 

[10-Oct-19 08:36 PM] CrisF#3405
There are 2 chains with token enabled in Labs now. `CFEKMYLO` AND `CFEKMYLO6`.  I was testing out token migrations between the chain (NFT).


[10-Oct-19 09:01 PM] Regnar#6164
I guess I was thinking people might be used to looking at addresses in block explorers, and also many wallets currently don't display public keys for simplicity.

 I guess if a chain is going to have tokens, they would make public keys more accessible in their wallet GUIs, but you might get issues like 3rd party wallets which hide that functionality and make it difficult for users to send tokens to one another. Kind of a non issue right now though


[10-Oct-19 09:09 PM] Regnar#6164
I guess I still don't understand the reason for sending to a pubkey over a regular address. It seems to make it more difficult to send to people, or new addresses you don't own. You have to contact someone to get their pubkey?

 Why do we send coins to addresses?


[10-Oct-19 09:10 PM] gcharang#6833
even with addresses, you do have to contact someone to get their address

{Reactions}
üòÖ 

[10-Oct-19 09:11 PM] gcharang#6833
for a gui to be able to transfer tokens, dealing with pubkeys will be the least of their new work


[10-Oct-19 09:15 PM] Regnar#6164
Yea that makes sense. Alright, no problem


[10-Oct-19 09:16 PM] smkhound#7640
pubkeys can be translated to addresses on different chains.


[10-Oct-19 09:16 PM] smkhound#7640
https://en.bitcoin.it/wiki/List_of_address_prefixes

{Embed}
https://en.bitcoin.it/wiki/List_of_address_prefixes
List of address prefixes


[10-Oct-19 09:17 PM] Regnar#6164
This came about because I knew a friends wallet address but not his pubkey, and I wanted to send him some test tokens.


[10-Oct-19 09:20 PM] gcharang#6833
In the future, where there is a gui for Antara modules, the default thing to be shared will have to be a string that has both the pubkey and address in it
this way the pubkey can be validated


[10-Oct-19 09:20 PM] Regnar#6164
Though I don't think his wallet has GUI access to pub keys, I'll have to look. But it does have a seed. So for the test I would send it to him, and if he ever wanted to claim them he'd have to import seed into a wallet that supports tokens. Lol and that's how I got here


[10-Oct-19 09:21 PM] gcharang#6833
>  he'd have to import seed into a wallet that supports tokens
right, and there is no such gui right now


[10-Oct-19 09:23 PM] Regnar#6164
Yea, the issue for us is more that I can't send to his address for him to claim at a later date(even importing into Komodod), because his wallet only seems to support Addresses.


[10-Oct-19 09:23 PM] Regnar#6164
But I'm repeating myself. We need the pubkey to send to


[10-Oct-19 09:23 PM] gcharang#6833
which wallet is he using?


[10-Oct-19 09:24 PM] gcharang#6833
if he is using nativemode, he can get the pubkey


[10-Oct-19 09:25 PM] Regnar#6164
It's a mobile. Idk which one yet, he said earlier he couldn't find pub keys anywhere.


[10-Oct-19 09:25 PM] Regnar#6164
But like I said, sending to him wasn't so he could look at or interact with the tokens, it was strictly so he would have them for a later date.


[10-Oct-19 09:25 PM] gcharang#6833
yes, no litemode wallet has the need to expose pubkeys to users currently


[10-Oct-19 09:25 PM] Regnar#6164
Nuanced case perhaps


[10-Oct-19 09:26 PM] Regnar#6164
Yea seems that way. I was just trying to give ownership to him, to claim at later date whenever he pleased.


[10-Oct-19 09:27 PM] Regnar#6164
Okay. Going to bed, thanks for the explanation


[10-Oct-19 09:28 PM] gcharang#6833
np, he can always export the privkey or seed and use the ocean wallet to get the pubkey
no need to even sync the blockchain


[10-Oct-19 09:28 PM] gcharang#6833
good night!


[10-Oct-19 09:29 PM] gcharang#6833
<https://support.komodoplatform.com/support/solutions/articles/29000031730-how-to-get-a-public-key-to-create-a-new-smart-chain-using-antara-composer>


[10-Oct-19 09:31 PM] Regnar#6164
Yea that was the plan, but for using the tokens, not to just receive them. Unfortunately I think we may be on our own with mobile wallets not providing pubkey, and probably going to have Tokens compared to ERC20 and the inability to send directly to an address. 

Okay that's all, night

{Reactions}
üëã 

[10-Oct-19 10:57 PM] jl777c#5810
nspv wallet displays pubkey


[11-Oct-19 05:43 AM] Regnar#6164
Okay onward for my tokenCC knowledge! 

I understand there aren't any explorers to look at tokens yet (that I know of) but was looking at my token on the RICK explorer and noticed the RICK I used to create the tokens is reading as zero on the explorer.

Is this normal or a bug?


[11-Oct-19 05:44 AM] gcharang#6833
the current explorers aren't equipped to deal with cc transactions
can you share the link to txn?


[11-Oct-19 05:44 AM] Regnar#6164
<https://rick.kmd.dev/tx/f591850f9bd94352a6461a45909db80d5d8549746c766ef5e08ed2959ba089c5>


[11-Oct-19 05:45 AM] Regnar#6164
I figured I couldn't see any of the token stuff, just didn't expect to see the 0.00000777 KMD (RICK) going to an address and then showing as zero balance for the address


[11-Oct-19 05:46 AM] gcharang#6833
the zero value output is an opreturn utxo
it is used to store data
<https://rick.kmd.dev/insight-api-komodo/tx/f591850f9bd94352a6461a45909db80d5d8549746c766ef5e08ed2959ba089c5>


[11-Oct-19 05:52 AM] Regnar#6164
I don't understand what that means exactly. I understand storing values in op_return. 

What does that value mean? It's a hash if something?


[11-Oct-19 05:53 AM] Regnar#6164
So the 777 satoshi is stored in the op_return value, as a utxo?


[11-Oct-19 05:53 AM] Regnar#6164
Or behaves as one?


[11-Oct-19 05:57 AM] gcharang#6833
> showing as zero balance for the address

the address RMDvABbzXVnD7CwAZyMeBQXCvmMqH1iwsY isn't a normal KMD address
it is an address that is specific to tokens cc and modified by its eval code

the 777 sats are locked by the tokens cc: 
```
"asm": "a22c802044d7a309196f78e8948b1bc446dfb1b3ceae1a0725bd89f07c7ecea922042c988103120c008203000401 OP_CHECKCRYPTOCONDITION"
```
do you understand the bitcoin script some what? like OP_CHECKSIG, OP_DUP etc ?


[11-Oct-19 06:00 AM] Regnar#6164
Not familiar, but I'll read up on it right now


[11-Oct-19 06:02 AM] gcharang#6833
@Regnar if you are intersted in a deep dive, going through this write up <https://docs.komodoplatform.com/cc-jl/introduction.html> by jl and googling unknowns can be very rewarding

{Reactions}
üëç 

[11-Oct-19 08:45 AM] jl777c#5810
CC addresses and normal addresses are different "locations" even if they are the same address


[11-Oct-19 08:45 AM] jl777c#5810
there are rpc calls to get the tokenbalance


[11-Oct-19 09:02 AM] Regnar#6164
Yea I started making some Python wrappers for TokensCC and saw that. Can someone send to CC addresses like the `RMDvA...` one above? Or is pubkey the only way?


[11-Oct-19 09:07 AM] gcharang#6833
@Regnar sending normal coins to RMDvABbzXVnD7CwAZyMeBQXCvmMqH1iwsY uisng sendtoaddress will send the coins to an address no one knows the private key of

the address in the context of tokens is hash(evalcode + pubkey + ....) both of them are different

the easiest way to deal with antara modules is to just use the RPC calls corresponding to them
the implementation details are not really important as far as a user is concerned
the only change would be dealing with a longer string (pubkey vs address)


[11-Oct-19 09:08 AM] jl777c#5810
it is based on pubkey


[11-Oct-19 09:08 AM] jl777c#5810
the display of pubkey as an address is basically an arbitrary thing


[11-Oct-19 09:12 AM] Regnar#6164
Okay. Sounds good. I planned to just use the RPCs as given, but wasn't really sure what the reasons were for the different CC addresses. Good to know, don't send to them


[11-Oct-19 09:17 AM] jl777c#5810
CC funds are constrained, so just having the privkey isnt enough. and if you send normal funds to a CC address, well you actually cant do that, as they operate in different "dimensions"


[11-Oct-19 09:17 AM] Regnar#6164
Okay I think I got it. I'm reading through the CC guide right now


[11-Oct-19 09:23 AM] jl777c#5810
there is literally a CCflag that denotes if an address is a CC address or a normal address, in the addresindex DB entries


[11-Oct-19 09:24 AM] jl777c#5810
users should not be using sendtoaddress to send to CC addresses, as sendtoaddress sends to only normal addresses


[11-Oct-19 09:24 AM] jl777c#5810
you need to use the proper CC rpc call to do the CC tx


[11-Oct-19 09:44 AM] Regnar#6164
Yea for this I think it's `tokentransfer`


[11-Oct-19 09:45 AM] Regnar#6164
I'm just trying to get a grasp on all the addresses and details so I can understand it a bit better. Appreciate all the help here üòÅ


[11-Oct-19 10:01 AM] jl777c#5810
it just doesnt fit into any preexisting "box" so you need to make new boxes


[11-Oct-19 10:01 AM] jl777c#5810
some are really simplistic, like faucet, but others are quite complex, like gateways


[11-Oct-19 10:50 AM] Regnar#6164
Yea I'm extremely grateful for the RPCs and Documentation. Definitely some of the best docs I've come across in the space

{Reactions}
üíØ 

[11-Oct-19 11:29 AM] dukeleto#7326
@jl777c does sending normal funds to a CC address make the funds unspendable and hence "burned" for practical purposes?


[11-Oct-19 11:57 AM] jl777c#5810
the CC vout hash is hash of the scriptPubKey, which is a CC vout and not a pubkey. so if you sendtoaddress normal funds to a p2pkh address, odds are you will never find the matching privkey. would need a hash collision between the hash of pubkey and hash of CC vout (which itself is mostly a hash of the CC condition)


[11-Oct-19 11:57 AM] jl777c#5810
however, it wont be provably unspendable


[11-Oct-19 11:57 AM] jl777c#5810
just practically unspendable


[11-Oct-19 12:11 PM] dukeleto#7326
thanks, that answers my question


[15-Oct-19 03:18 PM] Paro#7842
komodo blockchain  also have whitelist?


[15-Oct-19 03:19 PM] Paro#7842
summary
I can choose the IP addresses to connect. ?


[15-Oct-19 03:33 PM] Oszy#5734
you mean connect to specific nodes with `addnode` ?


[15-Oct-19 03:35 PM] Paro#7842
no. except for specific IPs. I don't want anyone to connect.


[15-Oct-19 06:17 PM] gcharang#6833
@Paro 
you can use `-connect` to make sure your own node connects to only certain other ip addresses
but you can't control the  other nodes running the same chain connecting to different ip addresses


[15-Oct-19 06:48 PM] Paro#7842
ty


[17-Oct-19 02:43 PM] Regnar#6164
So not sure this is at all a milestone but, I created some tokens using TokenCC on RICK today from my mobile phone (kinda). I made a discord bot that runs TokensCC RPCs and called it from Discord App on my phone üòÖ

{Reactions}
3040_kingpeepo (3) 

[17-Oct-19 02:50 PM] Regnar#6164
@smkhound mistakenly made a bunch of the same tokens because my error handling sucks and he thought it wasn't working üòÇ


[17-Oct-19 02:51 PM] Regnar#6164
admittedly it literally said `error with creating tokens... Sorry`


[17-Oct-19 03:17 PM] mrlynch#5735
it's not a bug, it's a feature

{Reactions}
üëç üêõ 

[17-Oct-19 05:58 PM] Regnar#6164
I'm getting errors when I run `tokenorders` without a tokenID.
<https://developers.komodoplatform.com/basic-docs/antara/antara-api/assets.html#tokenorders> 
These docs say tokenID is optional, without tokenID is supposed to display all available orders, but I'm getting the error ```error code: -1
error message:
no tokenid```


[17-Oct-19 05:59 PM] Regnar#6164
the example used shows `./komodo-cli -ac_name=HELLOWORLD tokenorders` and some orders as the response


[17-Oct-19 06:19 PM] Mylo#8306
https://github.com/Komodo-Cakeshop/komodo-in-a-box/blob/master/setup/cc/tokens.sh#L133

{Embed}
https://github.com/Komodo-Cakeshop/komodo-in-a-box/blob/master/setup/cc/tokens.sh
Komodo-Cakeshop/komodo-in-a-box
Cakeshop-In-a-Box but komodo specific, Turnkey Blockchain Starter Kit. - Komodo-Cakeshop/komodo-in-a-box
https://images-ext-2.discordapp.net/external/JpoXzzXQ4UN23-0fC_I0eSDzdJcEbB8QyMefYTwucDg/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/45069400


[17-Oct-19 06:20 PM] Mylo#8306
That is the curl equivalent of the cli you want @Regnar


[17-Oct-19 06:22 PM] Mylo#8306
Maybe `komodo-cli .... tokenorders 0cbfadeeed357def654457 ` where 0cb.... is a tokenid


[17-Oct-19 06:22 PM] Regnar#6164
```komodo-cli -ac_name=RICK tokenorders
error code: -1
error message:
no tokenid

komodo-cli -ac_name=RICK tokenorders 0091dedf45ae6cd5bf49e05979f550bb9ed4cb5f2e1ac2690a5049833b752103
[
]```


[17-Oct-19 06:22 PM] Mylo#8306
Perfect


[17-Oct-19 06:22 PM] Mylo#8306
No orders


[17-Oct-19 06:22 PM] Mylo#8306
Empty array


[17-Oct-19 06:23 PM] Regnar#6164
yea I know, that isn't what I'm talking about though


[17-Oct-19 06:23 PM] Regnar#6164
<https://developers.komodoplatform.com/basic-docs/antara/antara-api/assets.html#examples-8>


[17-Oct-19 06:24 PM] Regnar#6164
In that example this command `komodo-cli -ac_name=HELLOWORLD tokenorders` works without a tokenID.


[17-Oct-19 06:24 PM] Regnar#6164
Unless I'm just misunderstanding these docs


[17-Oct-19 06:24 PM] Mylo#8306
Maybe bug


[17-Oct-19 06:24 PM] Regnar#6164
that's what I'm thinking


[17-Oct-19 06:25 PM] Mylo#8306
Ask in #cc-tokens


[17-Oct-19 06:25 PM] Regnar#6164
there isn't one


[17-Oct-19 06:25 PM] Mylo#8306
#cc-assets


[17-Oct-19 06:25 PM] Regnar#6164
okay

{Reactions}
üëç 

[19-Oct-19 02:18 AM] CrisF#3405
Hi @Regnar, have you seen this `https://developers.komodoplatform.com/basic-docs/antara/antara-tutorials/understanding-antara-addresses.html`?
A very good explanation of module addresses.


[19-Oct-19 07:21 AM] Regnar#6164
Yea I read through that one


[19-Oct-19 07:22 AM] coinmonks || CoinCodeCap#8469
I am analyzing komodo's codebase.. here is something may be you guys can use .. https://pastebin.com/gbmeR4Dh

{Embed}
https://pastebin.com/gbmeR4Dh
commit_author_email,count  mrgcharang@gmail.com,1  siddhartha-cryp...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[19-Oct-19 07:23 AM] coinmonks || CoinCodeCap#8469
above file show people who contributed on komodo's github (also ordered by the number of their contribution)


[19-Oct-19 07:24 AM] coinmonks || CoinCodeCap#8469
you can use this to communicate things internally in the ecosystem

{Reactions}
üôèüèΩ (2) 

[19-Oct-19 02:18 PM] SHossain#0007
@coinmonks || CoinCodeCap in that list everyone has only 1 commit count. totally wrong counts.


[19-Oct-19 04:27 PM] dukeleto#7326
```
$ git shortlog -se|sort -rn|head
 10499    jl777 <jameslee777@yahoo.com>
  2817    Wladimir J. van der Laan <laanwj@gmail.com>
  1557    jl777 <jl777@users.noreply.github.com>
  1371    blackjok3r <blackjok3r@gmail.com>
  1097    Gavin Andresen <gavinandresen@gmail.com>
```

{Reactions}
‚úÖ 

[25-Oct-19 12:25 PM] dimxy#2587
@jl777c @Mihailo 
About that new finite state machine (FSM) CC module which is planned to create.
---
I looked through several implementations and seems this tasks is very well defined and it is not very hard to create it as a cc module.
Here is a nice one for pure c https://www.codeproject.com/Articles/1275479/State-Machine-Design-in-C
It implements a basic FSM engine and provides macros to create state and event functions and transition map. 
Also it has useful concepts like guard conditions, entry and exit actions (seems this is derived from UML and this is good)
The important thing is that it supports both internal and external events. Internal events are those which are generated by the state machine.
I think in case of blockchain internal events could be timeouts and address spends or other blockchain events (mentioned in the article in medium.com) so we could provide implementations of some basic functions (for example to implement 'payments').
As external event are supplied by oracles we need to apply additional rules for event data formats (which are oracle formats).
Miners could perform evaluation of state machine (check for events and state transitions) who could take some tx fee as a reward.
---
For which applications is the FSM CC?
In this codeproject example for each FSM application it should be created a specific event and state code (like for motor or centrifuge FSMs in the example).
Do we think that we could provide some set of event and state functions in the which could be used for many FSM configurations?
Is there a specific application domain for which we provide this FSM CC? (That is, we do not want to allow to make a 'Motor State Machine' like in the example, and if this is only about coins or tokens it is easier to develop a some function set for the FSM CC)?
Or maybe we could allow to attach some library to the FSM CC with externally defined event and state processing functions?

{Embed}
https://www.codeproject.com/Articles/1275479/State-Machine-Design-in-C
State Machine Design in C
A compact C finite state machine (FSM) implementation that's easy to use on embedded and PC-based systems.


[25-Oct-19 12:25 PM] dimxy#2587
---
To manage events I think it is good to use 1of2 address 'FSM CC global address' + 'FSM initial txid address', so miners could send events (probably not events, but state transitions) between FSMs instances.
---
A FSM CC config could be a json which defines a state list, events and state transition map (similar to the example) and also binds an oracle txid.
Events are triggered by oracles data and miners create a state transition transactions.


[25-Oct-19 09:46 PM] jl777c#5810
FSM CC should allow to create an arbitrary FSM via opreturn definitions. it should support a nested FSM, so you can create an FSM of arbitrary size. We need to define and implement a comprehensive set of blockchain events as the idea is to make the FSM CC and then after that essentially any logic can be implemented. standardizing the arguments and return values will allow creation of complex events and actions, though if all actions are built in, there is no need to make those nested.


[25-Oct-19 09:47 PM] jl777c#5810
A test of the FSM spec is to have half a dozen usecases and to make sure all of them can be implemented


[25-Oct-19 09:49 PM] jl777c#5810
as you say by having a standard oracles interface we can bring in external events into the statemachine. it should also be possible to create an oracle event based on the state changes of an FSM. this way, a specific FSM can create an event that is then used by other FSM.


[25-Oct-19 09:50 PM] jl777c#5810
At the high level, we want to use FSM to provide as close to turing completeness as practical. For blockchains, turing completeness is overkill and ends up with resource consumption issues. With FSM, the processing of events is the only thing that is taking any time, and really it wouldnt be that much time, and most blockchain dapps logic can be done with a FSM


[25-Oct-19 09:53 PM] jl777c#5810
I think the simplest FSM would be of the form: lock funds into the FSM, if an oracle posts the expected data send release payment. if a timeout happens, the funds can go to the one that put in the funds


[25-Oct-19 09:54 PM] jl777c#5810
so the FSM CC would allow to define such an fsm and we would have this as a template. then any new oracle can be used to make an oracle controlled payment. just during the initial blocks, the chain creator should run the standard FSM templates and we get a list of txids, one for each of the standard FSM


[25-Oct-19 09:55 PM] jl777c#5810
given these txids, specific instances of the standard FSM can be created, and by created, i mean the locking in of funds


[25-Oct-19 09:57 PM] jl777c#5810
so we have the templates of FSM (state maps, events, actions) and specific instances of a template (with all the txids defined).


[25-Oct-19 09:57 PM] jl777c#5810
fsmdefine to define the state maps, parameters, return values, actions


[25-Oct-19 09:58 PM] jl777c#5810
fsmcreate <defined txid> <amount> <parameters> to create a specific instance


[25-Oct-19 10:00 PM] jl777c#5810
once a specific instance is created, it is up to the dapp to notice the trigger events or timeouts and create a state transition transaction. what that means is that regardless of the number of active FSM instances, there is no overhead for polling of events! only when the dapp submits a transaction, will it need to be evaluated and by having it pass in the most recent txid, we can simply look up the current state it is in (as that is part of the required data), find the state map and make sure the submitted tx is following the FSM definition


[25-Oct-19 10:02 PM] jl777c#5810
of course each dapp will need to be polling for events that it cares about, but this is non-consensus load and if you have money at stake, it is not a problem to be running code to look for events.


[25-Oct-19 10:03 PM] jl777c#5810
we need to support crosschain events, so part of the state transition tx in this case would be the txproof for the crosschain tx (likely an oracle, but could be a spend of a specific utxo, etc)


[25-Oct-19 10:05 PM] jl777c#5810
events could be oracle data, spend of utxo, passage of time, height, balance of an address going above/below specified amount, DTO price calculation above/below, DTO price calculation of A > DTO price B, etc, etc, etc

{Reactions}
üëç 

[25-Oct-19 10:06 PM] jl777c#5810
i hope you can see the scope of what is possible with the events. we should also support all the standard comparisons,  ==, !=, >, <, >=, <=

{Reactions}
shexy üëç üòé üî• KMD (3) 

[25-Oct-19 10:13 PM] polycryptoblog#1173
This is exactly what is needed for certain interested parties.   I think this is the biggest thing to come out of the Komodo ecosystem so far.   This will allow for complex blockchains and clusters which currently don‚Äôt exist yet.


[25-Oct-19 10:14 PM] polycryptoblog#1173

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/637519287753375744/image0.gif


[25-Oct-19 10:33 PM] jl777c#5810
yes FSM was scheduled as the last major CC as it needs to be able to utilize all the other core CC and with FSM CC, new logic can be deployed via rpc calls, no need for a hardfork


[26-Oct-19 12:43 AM] jl777c#5810
@dimxy if you can find a GUI that can define FSM and then make the fsmdefine rpc call use the output of that, it would be a great help for getting people up to speed with creating FSM

{Reactions}
üëå 

[26-Oct-19 01:31 AM] jl777c#5810
i think for deploying a FSM instance you would make a "main" equivalent that defines all the sub-FSM that it will use, and if a sub-FSM can have sub-sub-FSM, then there is no practical limit to the complexity of the overall FSM. though i think for vast majority of usage, a single main FSM definition opreturn with its sub-FSM and events will be more than sufficient


[26-Oct-19 01:32 AM] jl777c#5810
so if it makes sense to limit nesting to one level, we can do that as no sense to make something able to handle 1000x the complexity that is actually needed. if we need some complex algo, we would implement that in code and then make an FSM variable/function that invokes it, so a very compact FSM definition can do some very powerful things


[26-Oct-19 11:59 AM] dimxy#2587
I cannot find yet any GUI examples which defines FSM but I can find many backward examples when a GUI is driven by a FSM. But I don't see any problems, with some existing FSM implementations as a base, to develop a json structure for definition of state list, event list and transition map for fsmdefine.
What is more tricky thing is to design state actions and event conditions for flexible internal events, as this involves some kind of expressions on chain values (for example to check if some timeout passed or amount is reached). I think we could develop some simple expression language which is defined on blockchain artefacts, so we need to enumerate such artefacts and assign identifiers for them (like 'ht' as height, 't' as timeout etc). Such expressions might be associated with states and events.
---
Another question is do we really want external dapps for evaluation of FSMs? In this case FSMs are dependent on  that whether the dapp is running and correct. As we have all the states and events inside the chain, wouldn't it be more reliable and self-contained to have the blockchain code (executed by miners) to evaluate FSMs state transitions? (maybe dapps could evaluate some additional conditions on state transitions but this would mean the FSM is not completely defined in the chain)


[26-Oct-19 04:00 PM] Alright#0419
maybe I'm misunderstanding it, but it seems payments CC is half way there already


[26-Oct-19 04:01 PM] Alright#0419
joker added arbitrary logic to unlocks to it, just needs to be standardized?


[27-Oct-19 11:13 AM] dimxy#2587
Yes FSM CC will allow to create payments logic and many other logics with once developed FSM CC code by creating clear state transition model as the FSM CC's configuration


[27-Oct-19 11:33 AM] dimxy#2587
Modules which could be implemented with the FSM CC are those which do not require power of Turing Machine (much data to process, in particular).
I can see that another example to be implemented with FSM is Heir CC (which allows for the Heir to spend locked funds after the funds owner inactivity)


[27-Oct-19 01:00 PM] polycryptoblog#1173
@dimxy  I‚Äôm not sure if this will help you out,  but if I understood right you are looking for a GUI that can define FSM,  it‚Äôs pretty simplistic and not as general purpose as it‚Äôs made for PLC‚Äôs  , but I know you can do such with RSLogix emulator . https://www.splatco.com/fsm_in_ladder.htm

{Reactions}
üëç 

[28-Oct-19 01:12 AM] jl777c#5810
to be able to scale to arbitrary number of active FSM, i dont think it is practical to have the blockchain (everynode) scanning for all possible events. just like nspv is designed to reduce network bandwidth usage, FSM needs to reduce the workload on each node

{Reactions}
ü§î 

[29-Oct-19 12:44 AM] jl777c#5810
CHIPS poker needs a cashier functionality. Initially we will use a multisig to lock and release funds, but this requires these multisig nodes to be online all the time and also to not collude, so the ideal solution is to have a cashier CC, which if run on a pegged chain backed by KMD allows betting with known amounts


[29-Oct-19 12:45 AM] jl777c#5810
the cashier CC should be abstracted from the actual gameplay so it wont need to be contaminated with poker specific knowledge. this will allow the cashier CC to be used for any multiplayer game where player balances can be known.


[29-Oct-19 12:48 AM] jl777c#5810
in order for this to be game independent, each game will need to build into its protocol signed attestation of player balances, probably after each game is completed. So we will have a list of pubkeys and balances, with signatures from either the same set of pubkeys or a slightly different set (dealer, BVV nodes, watchers)


[29-Oct-19 12:48 AM] jl777c#5810
a player can submit a withdraw only to their pubkey, so we avoid false claims using valid attestations


[29-Oct-19 12:49 AM] jl777c#5810
working backwards, it means that when depositing funds to the cashier CC, the list of valid pubkeys for the attestation needs to be given. Also, it is possible this list will change as players change, so there would need to be a way to update the list of valid attestation pubkeys


[29-Oct-19 12:49 AM] jl777c#5810
@sg777 details on cashier CC


[29-Oct-19 12:50 AM] jl777c#5810
@dimxy we should be able to make a FSM instance that implements cashier CC, states include new state, initial deposit, updating attestation pubkey, withdraw

{Reactions}
üëç (7) 

[29-Oct-19 03:54 AM] jl777c#5810
https://medium.com/@jameslee777/multichain-decentralized-cashier-for-gaming-110297ced95f

{Embed}
https://medium.com/@jameslee777/multichain-decentralized-cashier-for-gaming-110297ced95f
Multichain decentralized cashier for gaming
It has taken many years to finally be able to put together a fully decentralized system for one of the most demanding usecases, realtime‚Ä¶

{Reactions}
üíØ (6) KMD (6) 

[30-Oct-19 07:25 AM] dimxy#2587
I tried to draw diagram for the Cashier FSM


[30-Oct-19 07:25 AM] dimxy#2587
Cashier FSM

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/639107737933971468/unknown.png


[30-Oct-19 07:26 AM] dimxy#2587
The point is it turns out we need a compound FSM


[30-Oct-19 07:26 AM] jl777c#5810
i think the cashier doesnt (shouldnt) need to know about other players


[30-Oct-19 07:27 AM] jl777c#5810
the cashier is on a per user basis, not linked to the gameplay directly


[30-Oct-19 07:27 AM] dimxy#2587
okay, I'll review that


[30-Oct-19 07:28 AM] jl777c#5810
it is like at a real casino. when you go to cashier, it doesnt matter about any other player


[30-Oct-19 07:29 AM] jl777c#5810
each player locks funds and gets chips. in our case, the chips are tied to a specific table and a set of pubkeys, the less knowledge of the games the cashier has, the more general it will be


[30-Oct-19 07:33 AM] jl777c#5810
and i think it is a very simple FSM. starting from the initial event, of making a deposit. this create a proof of deposit that can be used by the table as it sees fit.
A. deposit that creates cross chain proof -> B. 
B. submits attested pubkey change -> B.
B. submits attested cashout -> pays to pubkey


[30-Oct-19 07:33 AM] jl777c#5810
on the cashier chain, it only sees the deposit that locks funds. this should create all the data needed for importing chips into a table, but that is all offchain as far as the cashier is concerned.


[30-Oct-19 07:34 AM] jl777c#5810
oh. i guess all funds for a specific table need to be locked into the same CC address!


[30-Oct-19 07:34 AM] jl777c#5810
i see why you had more players involved. it isnt really more players, but just a shared locked address


[30-Oct-19 07:35 AM] jl777c#5810
so the locked address needs to be based on table pubkey


[30-Oct-19 07:36 AM] jl777c#5810
then i think it can be independent of different players. the logic is that a single table cannot create coins, that it is a zero sum game. so when the cashout event is submitted, the table that isnt 51% attacked will have an amount that is less than the total funds in the tables locked funds


[30-Oct-19 07:36 AM] jl777c#5810
of course if an attested cashout arrives that is more than funds locked for a table, that means some funny business happened, but it would fail due to not enough inputs. a table that cheats will only affect players on that table


[30-Oct-19 07:37 AM] jl777c#5810
so to create a deposit, it needs table pubkey (which would likely make a 1of2 address with the global CC address) authorized pubkeys for attestation.


[30-Oct-19 07:38 AM] jl777c#5810
then the only things that i think can happen are that the set of attestation pubkeys changes or a cashout arrives


[30-Oct-19 07:39 AM] jl777c#5810
store the current state in the opreturn data, so just looking at the prior tx you can know the current state, make sure it is a valid event and go to the new state


[30-Oct-19 07:41 AM] jl777c#5810
the cashier template i think has 2 states (3 if you count the initial state of not existing), the first thing that happens is a deposit is made. now the cashier FSM has a specific txid that refers to a specific table and player. i guess we need to add another state to allow adding more funds, or i guess that is an event in state B after the initial creation


[30-Oct-19 07:43 AM] jl777c#5810
A gets table pubkey, player pubkey and authorized attestors and locks the amount in table dependent CC address. Now we have a txid for that player/table. What happens if the player makes another FSM instance? i think it is ok, there can be N instances, but when the player cashes out it would aggregate all of the remaining balance and now the user is able to do a withdraw


[30-Oct-19 07:45 AM] jl777c#5810
A. Create instance, B. event loop where it can be more deposit, change of authorized pubkeys, cashout
cashout would make any other instance for the player/pubkey invalid. probably a good idea to make it so a specific player/pubkey can only have one active FSM instance at a time with a baton, that avoids the orphaned FSM instances


[30-Oct-19 07:46 AM] jl777c#5810
i guess it would be good to first make a cashier CC details, with rpc calls, opreturn data, etc. and then once we have that see how to do it as a FSM


[30-Oct-19 07:57 AM] jl777c#5810
if you think about it, the cashier CC/FSM can be used for any pooling of funds where it is later distributed out to different pubkeys. It could be used for fund raising, where the authorized pubkeys are escrows who would then be able to decide how to allocate the funds, ie. to release it to the project or to refund to the investors. Each reciepient would just need to do a deposit for a small amount.


[30-Oct-19 07:58 AM] jl777c#5810
it could be used to manage funds for a company, where the distributions go to the various departments on the approval of the finance pubkeys


[30-Oct-19 08:00 AM] jl777c#5810
i think the name cashier might color the thinking to just the gaming aspect, what we have is a generalized pooling and distribution based on authorized pubkeys functionality. By making the pubkeys the peers you are playing the poker with, it becomes a decentralized poker cashier, by making the pubkeys the escrows for investment funds release, it becomes a way for managing fund raising, by having the authorized pubkeys being finance and management, it can be used to allocate funds across a company


[30-Oct-19 08:02 AM] jl777c#5810
i guess we need to add another event to make it a bit more general and have a timeout event, so if X amount of time passes (a big number relative to expected timeframes), the initial contributor can withdraw the contributed amounts. therefore, each opreturn should remember the total deposited by each "player". better to have more data than actually needed


[30-Oct-19 08:10 AM] jl777c#5810
it seems "deposit to tableaddress" is an event that can be the trigger for a lot of state changes. a player/table address can have a baton, table address the locked funds. so the cashier FSM description would have blanks for these details, but they are filled in when creating an instance

{Reactions}
shexy 

[30-Oct-19 11:18 AM] jl777c#5810
@dimxy following is in no way complete or correct, but just to give you an idea of what i have in mind as far as defining the FSM:
```[{"state":"init","events":[
{"paid":"<table>,"baton":"<table + player>,"M":<n/2+1>,"pubkeys":["","",...],"next":"idle"]},
 {"state":"idle","events":[{"paid":"<table>,"next":"idle"}, {"cmd":"newpubs","pubkeys":["","",...]}. {"timeout":100000,"next":"end","action":"refund"}, {"attestation":<signatures+data>,"next":"end","action":"redeem"}]}]```


[30-Oct-19 11:20 AM] jl777c#5810
the FSM is defined by an array of states, each state has an array of events. the hard part is encoding all the possible events and making sure all the required actions are supported. it seems this one needs a flag to indicate it is approved by authorized signatures. other FSM could just change states based on blockchain events, like timestamps, blockheights, equations with synthetics


[30-Oct-19 11:21 AM] jl777c#5810
so the spec you write will need to carefully list out all the possible events and actions. the state transitions can just be done via the parsed JSON that wont take much time to calculate. and making sure a new state transition transaction properly fits the required event description will likely need a lot more fields to be fully useful.


[30-Oct-19 11:22 AM] jl777c#5810
not totally happy with the above JSON, but at least it is a start and only halfway broken and incomplete


[30-Oct-19 11:22 AM] jl777c#5810
special states of "init" and "end"


[30-Oct-19 11:24 AM] jl777c#5810
the <> and ["", "", ...] values are filled in with the actual addresses/pubkeys and submitted in the opreturn of the init tx, the txid from that is then used for all the other FSM tx. with appropriate data in the opreturn (parameters, state data, return values)


[30-Oct-19 11:26 AM] jl777c#5810
notice the "events" objects are quite flexible, we can have an event that is a state transition of a specific FSM, it just needs to already exist. so on an "idle" -> "end" transition of a specific FSM txid, that can be an event in a different FSM. this allows the nesting of FSM. it can also require a specific event that causes the state transition, or it can just generate the even if the FSM is in a certain state.


[30-Oct-19 11:28 AM] jl777c#5810
i hope you are getting closer to what i have in mind with all this. in 10kb of JSON, we can specify quite a lot of complexity and with nested events, a 10kb sub-statemachines actions can feed into the next level up. i doubt we need to get anywhere near that complexity, but it all comes for free with this method


[30-Oct-19 11:41 AM] dimxy#2587
Thank you for this.
I'm trying to create a FSM specification which key element is also a json defining states, events and transition map.
To make it common to be able to create wide variety of applications I'm trying to define logical conditions allowing events to occur.
Such expressions will be executed on blockchain artefacts like address, txout, height, time and it will require a basic set of functions which could be used in the expressions. Maybe studying several FSMs like cashier, payments, heir we could understand this functionality.
(the current status is: https://github.com/dimxy/komodo/wiki/Designing-RPC-for-FSM-CC)

{Embed}
https://github.com/dimxy/komodo/wiki/Designing-RPC-for-FSM-CC)
dimxy/komodo
Komodo. Contribute to dimxy/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/FG7_8N0jtCftKtsAk7K5U05eeO1dpQWPnEQ9A5NQLBI/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/21120539


[30-Oct-19 11:47 AM] jl777c#5810
yes, very good, we are thinking along the same lines


[30-Oct-19 11:49 AM] jl777c#5810
since we have a 10kb size limit, maybe we have a human readable JSON, which is then machine converted to much more compact form, there is no need to put onchain field names that are very long, but this is a size optimization to do after we get everything defined. I guess we can use the JSON encoder i made, it is quite efficient at lossless compression of JSON.


[30-Oct-19 11:51 AM] jl777c#5810
building in support for common things like batons will enable mutual exclusion of spending, which is quite important in a lot of cases, oracles, nested FSM, yes this is all coming together and will be quite powerful. using JSON you can define a new FSM that basically implements cashier, payments, heir, faucet CC. I guess we might just try to make sure the FSM can be created for most of the existing simpler CC?


[30-Oct-19 11:54 AM] jl777c#5810
https://blog.acolyer.org/2018/03/20/designing-secure-ethereum-smart-contracts-a-finite-state-machine-approach/

{Embed}
adriancolyer
https://blog.acolyer.org/2018/03/20/designing-secure-ethereum-smart-contracts-a-finite-state-machine-approach/
Designing secure Ethereum smart contracts: a finite state machine ...
Designing secure Ethereum smart contracts: a finite state machine based approach Mavridou & Laszka, FC‚Äô18 You could be forgiven for thinking I‚Äôm down on smart contracts, but I actually think th‚Ä¶
https://images-ext-2.discordapp.net/external/3wnQ9xWce1DtiT13j2YC-ApY8pFJEo3R-kwMmJnCx1I/%3Fw%3D480/https/adriancolyer.files.wordpress.com/2018/03/fsolidm-access.jpeg


[30-Oct-19 11:55 AM] jl777c#5810
above seems to be thinking along the same lines, but we can make the output run at native speeds without GAS costs


[30-Oct-19 11:57 AM] jl777c#5810
unexpected source, but actuall somewhat relevant https://craigwright.net/blog/bitcoin-blockchain-tech/finite-state-machines-in-script/

{Embed}
https://craigwright.net/blog/bitcoin-blockchain-tech/finite-state-machines-in-script/
Finite State Machines in Script
https://images-ext-1.discordapp.net/external/Xxs4Nxb6iU8ULyCLAHoJW0pP-klfFAXkAGAIDj4yUmw/https/craigwright.net/wp-content/uploads/2019/04/1-KrIEdYvJ-exNPAFvSB6FNw.png


[30-Oct-19 11:58 AM] jl777c#5810
https://arxiv.org/pdf/1906.02906.pdf


[30-Oct-19 11:58 AM] jl777c#5810
some FSM examples in the PDF: Smart Contract Design Meets State Machine Synthesis: Case Studies


[30-Oct-19 12:23 PM] dimxy#2587
This will allow to create many new applications based on well-defined formal models and unified and clean supporting code. I think it will be a very big advancement in blockchain technology.
(I also thought about FSM visualization: there is UML state diagram spec and standard XML metadata interchange format, XMI, for storing models, supported by many UML editors, which could be parsed and transformed into json definition or for reverse engineering for documentation creation)


[30-Oct-19 12:27 PM] jl777c#5810
yes, it seems this is the way to fully solve the scalable smart contract problem. let us do it completely and correctly

{Reactions}
3040_kingpeepo 

[31-Oct-19 05:52 AM] dimxy#2587
At first I thought the cashier should issue chips in exchange of deposited coins. Now I see he does not (as this is done in another chain, seems, by the dealer)
That is, the cashier just receives coins on the some cc address and allows to withdraw funds from this addreess within some balance which is attested by pubkeys.
So I draw a new diagram
---
A question that might be to study yet: seems that as many users can deposit or withdraw funds concurrently this means that a new Cashier FSM instance should exist for each user. But if the task is to make FSM for actually a pooled account maybe we need it as an aggregated FSM for several depositing users. Such FSM should wait while all the participants have made deposits, then close accepting deposits and switch to a state of waiting for users cashout events).
---
Anyway, this is the diagram for case one fsm instance == one user pubkey
(it additionally supports 'refund if timeout passed' event)


[31-Oct-19 05:53 AM] dimxy#2587
Cashier FSM (changed)

{Attachments}
https://cdn.discordapp.com/attachments/466507187842187264/639446797827440666/unknown.png


[31-Oct-19 07:02 AM] jl777c#5810
the cashier never closes


[31-Oct-19 07:02 AM] jl777c#5810
it is open ended and each user would have a separate cashier instance per table


[31-Oct-19 07:03 AM] jl777c#5810
there is no need to wait for all users, as some users wont arrive for many hours


[31-Oct-19 07:03 AM] jl777c#5810
2 players arrive, start playing, then half an hour later another player arrives


[31-Oct-19 07:04 AM] jl777c#5810
so you see, it needs to be totally independent and the total balance of the table is the responsibility of the authorized signers to make sure it is a zero sum game. as long as that is the case, the attested withdraw totals will be correct


[31-Oct-19 07:04 AM] jl777c#5810
i will need to study your diagram a bit later

{Reactions}
üëå 

[31-Oct-19 07:09 AM] dimxy#2587
I'll continue to work on the fsm spec then


[31-Oct-19 07:25 AM] jl777c#5810
your flowchart doesnt handle updating of the authorized attestors. i guess that is a bit game specific, but it is very useful to be able to change the authorized pubkeys over time. with poker it is expected to be changing as players come and go. the parameters needed would probably depend on the specific state and event combination, so we might need to define some state/event specific parameters, in addition to state specific in addition to fsm specific parameters. that way we can handle different types of parameters for the different levels


[31-Oct-19 07:37 AM] dimxy#2587
I wrote about this attestors change in the note in the upper-right corner.
It seems this could not implemented by events and states and it is more like fsm parameters. So it might be done with some fsm-instance rpc that allows to additionally change instance parameters after the initialization


[31-Oct-19 07:40 AM] jl777c#5810
why cant the idle state get a "new pubkeys" event?


[31-Oct-19 07:41 AM] jl777c#5810
it would go back to the idle state waiting for all the different possible events: timeout, cashout, new pubkeys


[31-Oct-19 07:42 AM] jl777c#5810
so the idle/newpubkeys would have parameters that are the pubkeys vector


[31-Oct-19 07:42 AM] jl777c#5810
along with the attestation that the pubkeys are changed to the new pubkeys


[31-Oct-19 07:43 AM] jl777c#5810
the idle/cashout would get the parameters of the attestation of player balance


[31-Oct-19 08:08 AM] dimxy#2587
I think, all the states should provide some meaning for the code which queries FSM for its state. So if state is 'Deposit Done' it would mean that no more deposits are possible, and 'Cashout Allowed' state would mean that the user can now withdraw coins. 
But what the 'Idle' state would mean if query it? 
(Maybe we can just add such change-attestor event that would simply return back to the current state)


[31-Oct-19 08:08 AM] jl777c#5810
why do you constrain yourself so that a state is only allowed one event to happen?


[31-Oct-19 08:09 AM] jl777c#5810
if you name your states too literally, maybe it makes it hard to view it flexibly?


[31-Oct-19 08:09 AM] jl777c#5810
i had 2 states, "init" and "idle"


[31-Oct-19 08:10 AM] jl777c#5810
init state is the first tx that creates the FSM instance and it goes to the "idle" state. almost all events now just loop back to idle state. from idle state it can do anything, based on a specific event. and event can be anything. you need to think about this more generally


[31-Oct-19 08:11 AM] jl777c#5810
i guess there is the third state of "end" where the FSM instance is over


[31-Oct-19 08:11 AM] jl777c#5810
so with just three states of init, idle, end you can make quite a lot of different state machines


[31-Oct-19 08:11 AM] jl777c#5810
it then becomes all about what type of "events" are allowed.


[31-Oct-19 08:13 AM] jl777c#5810
if to view the FSM as having a specific configuration, then we can have events that modify that configuration and maybe there are a lot of these, along with the deposit, refund, cashout events where funds are transferred


[31-Oct-19 08:14 AM] jl777c#5810
it could be that we can cover majority of usecases with the init/idle/end state machine states, but no sense to limit the FSM CC to such a simplistic state machine


[31-Oct-19 08:54 AM] dimxy#2587
I did not mean that a state is limited by only one event, it could be several different events that cause transition to this event or several events that move from this state to other states.
I just thought for each real-world state we would want its equivalent in a FSM.
For example, for the Cashier FSM how will we differ if a pubkey is allowed to withdraw coins if we do not have a corresponding state? If we have only 'idle' state we would need to analyze the preceding events (like if the 'attested balance' event already happened) but if so why to have states?
So the FSM processes events internally and moves from state to state accordingly. And there is code which queries the FSM state and does some actions based on this. For example, for Cashier there should be an rpc which withdraws coins from the TableAddress. This code would query the FSM state and if it is in the 'Cashout Allowed' state it withdraws coins (or not if state in another). If we do not have such 'Cashout Allowed' state and have 'Idle' state instead this rpc should check for 'attested-balance' event, but the first case seems for me more structured and dividing code responsibilities. 
(So we will need for each application case to draw its own state machine and events, but we could do it with no coding if we have a json config and sufficient set of functions on blockchain artefacts)


[31-Oct-19 08:56 AM] jl777c#5810
i guess as long as it properly solves the problem at hand, there are many valid statemachines that will achieve this


[31-Oct-19 08:57 AM] jl777c#5810
the important thing is for FSM CC to be able to handle whichever way the fsm designer wants it done


[31-Oct-19 09:01 AM] dimxy#2587
Seems we need to move on with the FSM specification and see how it would solve our cases


[31-Oct-19 09:04 AM] jl777c#5810
yes


[01-Nov-19 06:05 AM] dimxy#2587
When Cashier is provided with attestors-pubkeys how does it validate these pubkeys?
Or is it supposed that the pubkeys are sent from the Cashier instance's creator and Cashier trusts them because of this?


[01-Nov-19 07:01 AM] jl777c#5810
the initial set is sent with the original deposit


[01-Nov-19 07:01 AM] jl777c#5810
yes


[01-Nov-19 07:01 AM] jl777c#5810
then given a set of pubkeys, any changes need the majority of those pubkeys


[01-Nov-19 07:19 AM] dimxy#2587
okay


[02-Nov-19 10:47 AM] dimxy#2587
And what is actually a `player attested balance`? 
Is it a value in some transaction's opreturn or is it an nValue on tx output?
In which chain is this tx, in the CHIPS or in the pegged chain?


[02-Nov-19 10:50 AM] jl777c#5810
it is balances updated offchain and submitted to the cashier chain


[02-Nov-19 10:51 AM] jl777c#5810
the attested signatures would be an opreturn args


[02-Nov-19 10:52 AM] dimxy#2587
so it is a multi-signed message with an amount which is stored in an opreturn


[02-Nov-19 11:33 AM] jl777c#5810
yes


[02-Nov-19 01:02 PM] dimxy#2587
I think we need to work out a common structure for such messages and its placement in the opreturn (so it won't be an ad-hoc solution but a unified format). 
I think it could be a signed json, better to use a standard like rfc7515 for signing. Then we could use arbitrary messages in various FSM events and access message values from event expressions in a unified way (like by json pointer rfc)


[02-Nov-19 01:12 PM] jl777c#5810
sounds good


[03-Nov-19 02:38 PM] Regnar#6164
So I'm trying to take stock of the different proof of concepts being created with Komodo CCs and update the 3rd party docs page with links to them. The goal is to have a single link we can share with people who are interested in the types of things that are being or can be built with CCs.


[03-Nov-19 02:40 PM] Regnar#6164
I've kind of spammed the CC channels with the same call for people to post the PoCs for me so I can add them on Github, I spent a while going through the history of each channel to try and collect the information before I asked, so if it isn't already on the list I posted in the channels, feel free to post it and tag me!

{Reactions}
üëç treasure 

[03-Nov-19 02:49 PM] Regnar#6164
definitely going through Tony's github right now haha


[03-Nov-19 04:57 PM] CrisF#3405
Also would like to make simple reference GUIs for Modules that don't have any.
Something that can be used for demoing possibilities of what the individual Modules can do.

@PHBA2061 | VietStaking Validator has started a great example for Tokens here: https://discordapp.com/channels/412898016371015680/524538792644837376/638344145265623041 and @Regnar has started on an example Token Marketplace here: https://discordapp.com/channels/412898016371015680/524538792644837376/640627767414751235 .

I have made a Trello for the Assets Module progress, and if that proves useful it can be used as a template for work on other Modules.  Please add to it and start checking things off the list.
https://trello.com/b/tpEsu2j1/module-assets

{Embed}
https://trello.com/b/tpEsu2j1/module-assets
Trello
Organize anything, together. Trello is a collaboration tool that organizes your projects into boards. In one glance, know what's being worked on, who's working on what, and where something is in a process.


[03-Nov-19 07:31 PM] Regnar#6164
https://github.com/joostjager/whatsat

{Embed}
https://github.com/joostjager/whatsat
joostjager/whatsat
End-to-end encrypted, onion-routed, censorship-resistant, peer-to-peer instant messaging over Lightning - joostjager/whatsat
https://images-ext-1.discordapp.net/external/IqRFS1HurFv8N8KuQWp_XzUxyFG0jGfJOgrZPu5RpO4/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/4638168


[03-Nov-19 08:39 PM] Regnar#6164
pretty cool idea using lightning for encrypted messaging 
`Recent changes to the protocol made it possible to attach arbitrary data to a payment. This demo leverages that by attaching a text message and a sender signature.

A Lightning payment delivers the message, but no actual money is paid. Because the sender uses a random payment hash, the receiver is not able to settle the payment. The failure message that is returned to the sender serves as a delivery confirmation.

This means that chatting is currently free. However, there is a future in which 'free failures' don't exist anymore. Nodes may start charging a prepaid relay fee and/or start rate limiting sources that produce too many failures. In that case, chatting over Lightning may switch to actually settling the messaging payments and dropping off a few millisats at every hop.`

{Reactions}
üî• (2) 

[04-Nov-19 08:06 AM] Alright#0419
same thing can be accomplished with oracles CC


[04-Nov-19 08:06 AM] Alright#0419
can read data from mempool before they're confirmed


[04-Nov-19 02:11 PM] PHBA2061 | VietStaking Validator#2530
I have 1 question related to this <https://developers.komodoplatform.com/basic-docs/antara/antara-tutorials/beginner-series-part-4.html#attaching-data-to-tokens>
```
Advanced developers can even add functionality to allow the tokens to gain new data over time as they are passed through transactions.
```
Can anyone please elaborate a bit on what functionality needs to be added in order to change tokens data ?

{Reactions}
üôã 

[04-Nov-19 11:47 PM] jl777c#5810
the details would depend on what exactly you want to do


[04-Nov-19 11:48 PM] jl777c#5810
you can link together two arbitrary txids (via oracles or other methods)


[04-Nov-19 11:48 PM] jl777c#5810
of course if you make a custom CC, then anything is possible


[05-Nov-19 12:36 AM] PHBA2061 | VietStaking Validator#2530
thanks for the answer üëç


[06-Nov-19 05:38 AM] dimxy#2587 (pinned)
This is an update for FSM CC specification.
It has close to complete FSM artefact set (while it is an early draft, of course) and has 2 examples how to implement existing cc with it.
It has a description for json structure defining FSM states, events and transitions.
The complicated thing in this is expressions which could be embedded into a fsm definition and will be evaluated by FSM CC module.
With the expressions it is possible to define logical conditions or action to enable/disable a transition or check if a event occured or make some actions on blockchain artefacts.
The goal of this is to allow by developing just fsm json definitions, with no coding, to create various new CC applications based on the single FSM CC module.
https://github.com/dimxy/komodo/wiki/Designing-RPC-for-FSM-CC
I'm trying to borrow concepts from UML State Diagram (believing that it is a well-defined and consistent framework).
---
If all this is close to what we want to have as a FSM module, the next steps could be to create more example definitions to get to the point when the specification becomes stable and artefacts reusable, so it would not need to extend it more and more for each new task.

{Embed}
https://github.com/dimxy/komodo/wiki/Designing-RPC-for-FSM-CC
dimxy/komodo
Komodo. Contribute to dimxy/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/FG7_8N0jtCftKtsAk7K5U05eeO1dpQWPnEQ9A5NQLBI/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/21120539

{Reactions}
üî• (5) üíØ (4) üëå (6) KMD (4) 

[06-Nov-19 06:23 AM] jl777c#5810
@dimxy excellent start! we need to get specific feedback from other CC devs, but i think having some reference fsm created will help others understand this much better. great work!


[06-Nov-19 06:55 AM] dimxy#2587
Thank you, now I'll try to model payments with this


[10-Nov-19 03:54 AM] gcharang#6833
Pinned a message.


[15-Nov-19 10:35 PM] pandaanu73#7907
Who is a devloper of komodo-pokemon


[15-Nov-19 11:18 PM] Regnar#6164
@pandaanu73 https://github.com/NOCTLJRNE/Komodo-Pokemon

{Embed}
https://github.com/NOCTLJRNE/Komodo-Pokemon
NOCTLJRNE/Komodo-Pokemon
Komodo-Pokemon. Contribute to NOCTLJRNE/Komodo-Pokemon development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/4AUg13OsquIB92WnDXeQez58VwdcUyifaOvlfs1PomU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/13896688


[15-Nov-19 11:20 PM] Regnar#6164
PHBA2061 is the dev for it


[16-Nov-19 01:18 AM] PHBA2061 | VietStaking Validator#2530
yes, let me know if you need anything


[16-Nov-19 02:59 AM] Mylo#8306
@PHBA2061 | VietStaking Validator for browser rpc, putting a CORS proxy in front of MORTY.
The rpc url will need to be modded so it looks like `http://proxy.url:port/http://morty.url:port/`

I‚Äôve used https://github.com/imylomylo/cors-anywhere no probs

{Embed}
https://github.com/imylomylo/cors-anywhere
imylomylo/cors-anywhere
CORS Anywhere is a NodeJS reverse proxy which adds CORS headers to the proxied request. - imylomylo/cors-anywhere
https://images-ext-2.discordapp.net/external/Giz-m4wzAWrLCD-Iwf0ZSbwKPBk4UChopj2JoKLF0Yo/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/19399102


[16-Nov-19 03:01 AM] gcharang#6833
I was looking at your repo PHBA, and <https://nuxtjs.org/faq/http-proxy/> seemed like the easiest solution as you were using nuxt already


[16-Nov-19 03:03 AM] PHBA2061 | VietStaking Validator#2530
thank you both, the proxy solution was what I've been working on during the past few days, I made my own custom proxy based on expressjs though, I'll push an update soon today üòÉ

{Reactions}
üëç (2) 

[16-Nov-19 08:36 AM] PHBA2061 | VietStaking Validator#2530
<https://github.com/NOCTLJRNE/Komodo-Pokemon/tree/dex>
I just pushed some updates to my app:
- get rid of the CORS problem, so you can run the app normally on the browser.
- adding some functionalities like token transferring, ask/bid orders placing/filling (based on the existing RPC methods) which allow users to trade their tokens.
- I placed some orders selling my Pok√©mon at 1 MORTY per token, anyone is welcome to buy it ... üòÇ
- I didn't really focus on UX, so the app might be a bit messy

{Reactions}
üëèüèª 

[17-Nov-19 04:48 PM] Mylo#8306
@gcharang I‚Äôll check out that proxy setting, might make things easier for other Vue projects/components .  Let you know in a cpl weeks.  Not on my urgency list and only doing 4hrs screen time max per day atm.

@PHBA2061 | VietStaking Validator Nice work removing CORS.   I‚Äôll look at dockerizing your app in the same cpl week timeframe.

{Reactions}
üëç 

[17-Nov-19 06:54 PM] gcharang#6833
@Mylo something to keep in mind is that,  that proxy setting (<https://nuxtjs.org/faq/http-proxy/>) works only for ssr mode and not for static mode
PHBA's solution is very similar to cors-anywhere
except, it uses express as the proxy server in between

there is no removing CORS lol, there is only removing CORS problems üôÇ 
in the case of localhost to localhost comms,  we can have a local proxy server (cors-anywhere or PHBA's express based one) to act as an inbetween for communicating with the Komodo daemon as it doesn't reply with the proper CORS headers which the browsers look for as a security policy

if we are dealing with an internet API that doesn't set CORS properly, we can have a similar proxy server hosted on a VPS to act as a go between for communicating with the particular API
 <https://cors-anywhere.herokuapp.com/> is a demo of that kind of usage


[17-Nov-19 07:08 PM] Mylo#8306
Yeah rob w‚Äôs is who I forked.

Express CORS proxy, yeah I did same thing for nodejs mmbot github.com/imylomylo/node-cors-server/blob/master/index.js for Initial GUI work before the bot was developed.  This too didn‚Äôt respond with CORS headers, but for my dev env I simply made an ssh tunnel from CORS to wherever the bot was.  One proxy, several docker bots

Thanks for info re SSR vs other.  I‚Äôm not familiar with nuxt - a case of too many frameworks to learn their opinionated ways of doing things üôÉ but if I can make work with sample apps and remove CORS-anywhere, more power to me!

I‚Äôm likely to pick up nspv in 2020 for the longer term investigation in any event.

{Reactions}
üëç 

[18-Nov-19 01:24 AM] PHBA2061 | VietStaking Validator#2530
I forgot to mention that I used this npm package cors in conjunction with express <https://www.npmjs.com/package/cors>, not only to add the Allow-Cross-Origin header to komodo RPC responses, but also to responses from an external API where I pull the Pok√©mon images & descriptions.


[26-Nov-19 05:57 PM] Mylo#8306
@PHBA2061 | VietStaking Validator def will work on docker image next week.  How‚Äôs dev going?
What is difference between dex & master?


[26-Nov-19 06:15 PM] PHBA2061 | VietStaking Validator#2530
I'm a bit busy on learning stuffs so didn't make any progress on the Pok√©mon web app üòÖ , the difference between `dex` & `master` is `dex` has the latest features (no cors issue, token trading feature), I will merge dex to master when I have time


[27-Nov-19 02:32 PM] Mylo#8306
Cool man, no pressure.  That‚Äôs enough details for me to work with next week.  Happy learning!!

{Reactions}
üëç 

[29-Nov-19 03:28 AM] PHBA2061 | VietStaking Validator#2530
stupid question but: is CC enabled on Komodo itself ?


[29-Nov-19 03:33 AM] gcharang#6833
no


[29-Nov-19 03:35 AM] PHBA2061 | VietStaking Validator#2530
& is there a reason why it isn't ?


[29-Nov-19 03:39 AM] gcharang#6833
there are plans for a cc enabled side chain for KMD
this will leave the main chain uncluttered for the normal payments usecase and notarizations

{Reactions}
üëå (2) ü¶æ üí™ 

[29-Nov-19 03:43 AM] PHBA2061 | VietStaking Validator#2530
make sense !


[16-Dec-19 02:07 AM] dukeleto#7326
FYI HUSH has pulled in all changes to all CCs from the KMD 0.5.0 release

{Reactions}
üî• üëå 

[16-Dec-19 02:45 AM] CrisF#3405
Wow! @dimxy, I was just reading through your `Designing RPC for FSM`  and need to say, it's awesome!
My level is very low, but I was able to follow along with that surprisingly well.  Thanks for the great work  üôá

{Reactions}
üíØ (2) 

[16-Dec-19 03:37 AM] dimxy#2587
@CrisF Thank you! (now it is a job yet to implement all this üòÄ)


[16-Dec-19 05:12 AM] CrisF#3405
I have great confidence üëç


[19-Dec-19 02:06 AM] CrisF#3405
Hi,  could it be said that Komodo is working towards a 'programmable blockchain' with FSM and CCs?


[19-Dec-19 02:10 AM] gcharang#6833
Antara modules already make Smart Chains Programmable Blockchains
what FSM does is, make the programmability easier, more accessible, less dangerous and without need for hardforks to update "existing programming"


[19-Dec-19 02:12 AM] gcharang#6833
writing a new Antara module is source level update
creating a new instance of FSM module on chain will be an on chain event that "just" adds data to the blockchain


[19-Dec-19 02:14 AM] CrisF#3405
Awesome, thank you @gcharang!


[22-Jan-20 01:37 AM] Farl#9964
Who is managing the website https://composer.kmd.io/ ?


[22-Jan-20 01:38 AM] Farl#9964
The link to the Terms of Services on https://composer.kmd.io/signup is not working.


[22-Jan-20 04:20 AM] gcharang#6833
thanks @Farl it will be updated

{Reactions}
üëçüèª 

[29-Jan-20 02:02 AM] Audo#5667
_Name changed from "cc-general" to "dev-modules"_


[29-Jan-20 09:04 AM] dukeleto#7326
i was wondering where this channel came from üòÖ


[29-Jan-20 12:51 PM] mercadinaut#9107
[reposting from cc-channels as missed the name change of cc-general | @jl777c ] Hi, Is there a plan to upgrade the VerusHash option for Komodo-Antara smart chains (ac_adaptivepow) from v1.0 to the current version 2.1 now used within Verus?


[29-Jan-20 11:07 PM] jl777c#5810
i am not against this, but it would require significant changes, so it is not high on the priority list


[31-Jan-20 04:26 AM] dukeleto#7326
also, ac_adaptivepow is something different than verushash @mercadinaut , that is a Difficulty Adjustment Algorithm feature for small hashrate chains


[31-Jan-20 04:26 AM] dukeleto#7326
you can use adaptivepow with or without verushash or equihash (N,K) (the algorithms KMD currently supports)


[31-Jan-20 05:12 AM] mercadinaut#9107
Thanks - I meant to have typed ac_algo. That said, I have now caught up with the utility of the Difficulty Adjustment feature.  There are some great features on Verus that I can see could integrate with Antara features - eg using Verus' forthcoming reserve currency trading feature to link with the Gateway module's ability to bind most coins and represent them as tokens on the host chain.  That would enable most blockchain assets to be algorithmically traded with any other. It would seem to make sense to have a Komodo-Antara chain running the same version of verushash as the Verus PBAAS chain. Indeed this would enable merge-mining of both chains together.


[31-Jan-20 05:49 AM] dukeleto#7326
@mercadinaut they are different projects with different goals. As james said, if somebody send a patch he would accept it. The reality is, writing that patch is an extremely large amount of work touching consensus-critical code and nobody is doing it for free üôÇ There have been many versions of verushash, KMD followed every single version but the latest is extremely entangled with verus-specific internals


[31-Jan-20 05:50 AM] dukeleto#7326
I know this, because I looked, and also, I deleted all verus-specific code from Hush, a source fork of KMD üôÇ


[31-Jan-20 03:22 PM] mercadinaut#9107
Thanks for that information @dukeleto After some further investigation it seems that Verus are planning to implement their own external bridges to other blockchain currencies.


[13-Aug-20 04:21 AM] NutellaLicka#4241
I have a question in relation to the different addresses the `assetsaddress` command populates (I guess it's a general CC question).
I'm trying to wrap my head around the EVAL code modifier and why it's used to create a new address versus just using the pubkey address. 

Is it true to say the `myCCaddress` will be the address you use on any chains that have the same EVAL code set, with the same `myaddress` pubkey? Does this then give the CC the ability to conduct cross-chain tx? Why not just use the `myaddress` on each chain?

```myCCaddress     (string)     taking the token contract's EVAL code as a modifier, this is the CC address from the pubkey of the user
myaddress     (string)     the public address of the pubkey used to launch the chain```


[13-Aug-20 04:24 AM] NutellaLicka#4241
& does this related to the referenced "Antara Address" at all?


[13-Aug-20 04:25 AM] NutellaLicka#4241
Referenced specifically in the token transfer command explanation
```The tokentransfer method transfers tokens from one Antara Address to another.```


[14-Aug-20 12:28 AM] Alright#0419
a "CC address" (aka "Antara address" as CC is still our internal name for Antara in many places) is just a way to tell modules where to find utxos of a given condition. 

a "typical" condition will look something like this. They can vary a lot, but this is the most widely used structure in our cpp modules. 
```
{
    "type": "threshold-sha-256",
    "threshold":    2,
    "subfulfillments":  [{
            "type": "eval-sha-256",
            "code": "4A"
        }, {
            "type": "threshold-sha-256",
            "threshold":    1,
            "subfulfillments":  [{
                    "type": "secp256k1-sha-256",
                    "publicKey":    "02C03CDB8822DAA30241CC137FBBEE76EAD55D7F92E667DF1C8CE56E6E50824386"
                }]
        }]
}
```

This condition is encoded as a scriptPubKey, and converted into an address the same way a p2pkh script would be ( example: https://github.com/Alrighttt/pycc-1/blob/7e2952778d8e60443cff4a182a8cf5f35b778b18/pycc/lib.py#L554 )


[14-Aug-20 12:29 AM] Alright#0419
so to put it simply, it's a way of saying... I know this condition structure, where can I find utxos on chain with this same structure


[14-Aug-20 12:30 AM] Alright#0419
`Is it true to say the myCCaddress will be the address you use on any chains that have the same EVAL code set, with the same myaddress pubkey? ` yes, if the module has the same eval code on both chains, and you use the same pubkey on both chains, both chains will produce the same "CC address"

{Reactions}
üëç 

[14-Aug-20 02:49 AM] NutellaLicka#4241
Thanks! Appreciate the in-depth response. Time to continue learning!


[14-Aug-20 02:51 AM] NutellaLicka#4241
The highlight for me is the pubkey is the easiest thing to refer too. It is also the thing all the commands request. So it shouldn't affect the user too much whether its in the CC address or their normal address. Because they're both attached to the pubkey


[15-Aug-20 07:12 AM] dukeleto#7326
@NutellaLicka you can derive the cc address from pubkey but not vice versa, so pubkey is the more useful thing to store internally for lookups/etc

{Reactions}
üëç 

[18-Oct-20 12:46 AM] NutellaLicka#4241
Are there any developers working on antara modules at the moment?


[18-Oct-20 01:42 AM] grewalsatinder#9653
Yep, core devs are already in to version 2 of cryotocondions for a while


[18-Oct-20 01:43 AM] grewalsatinder#9653
@Alright is working on Python based cryotocondions with core devs. That's pretty exciting stuff


[18-Oct-20 02:25 AM] NutellaLicka#4241
Are we able to get any specifics of which modules they're working on


[18-Oct-20 03:02 AM] grewalsatinder#9653
That detail I think @CC dev can tell


[18-Oct-20 03:06 AM] Mihailo#5902
I'n currently updating Gateways to V2, and already processed channels and oracles. Also @dimxy made Tokens V2.


[18-Oct-20 03:18 AM] NutellaLicka#4241
Awesome, thanks for the information. Have these been pushed to the master branch of komodo?


[18-Oct-20 04:08 AM] Mihailo#5902
Not yet. I have made a PR to research branch od Komodo but it hasn't yet been merged. Usually when using CC you were supposed to use other branch than master. It was FSM before, now it is research.


[01-Nov-20 12:23 PM] Sudoba#9452
Is there any module that is designed to use OP_RETURN to for example embed a massage?


[01-Nov-20 12:27 PM] Sudoba#9452
What I mean is that a basic transaction from a to b will never have a message/data that is received by the recipient. Like when you send a bank transfer you can add a description. At this moment is it possible to work around this using a token, but I am looking for something more basic as a supporting module for another module. Already looked at heir module examples, was hoping if there was already such a project out there.


[01-Nov-20 12:34 PM] jl777c#5810
sendtoaddress allows to add a hexstring in the opreturn

{Reactions}
üëç 

[01-Nov-20 09:02 PM] lightspeed393#5403
@gcharang according to help it says, `"comment" this is not part of the transaction, just kept in your wallet.` am I missing something, or is help missing the option for opreturn?


[01-Nov-20 09:04 PM] gcharang#6833
https://docs.komodoplatform.com/basic-docs/smart-chains/smart-chain-api/wallet.html#sendtoaddress
the command I previously posted was wrong, the param we need to use is OP_RETURN. testing it rn

{Embed}
https://docs.komodoplatform.com/basic-docs/smart-chains/smart-chain-api/wallet.html
Wallet
The following RPC calls interact with the komodod software, and are made available through the komodo-cli software.
https://images-ext-2.discordapp.net/external/JRuH6_LDrjOGd6HbRckiIc9OBFcyJGE1c7DjCukFvtA/https/developers.komodoplatform.com/start-here-pics/Dev_Docs_Introduction_small.png


[01-Nov-20 09:05 PM] lightspeed393#5403
oh cool thanks


[01-Nov-20 09:22 PM] lightspeed393#5403
Did you have success in your testing @gcharang? It doesn't seem to like when I add the opreturn field.


[01-Nov-20 09:55 PM] gcharang#6833
yup, investigating. it was supposed to be present in the master branch komodod , but it isn't working as expected. looking at the code now

{Reactions}
üëç 

[01-Nov-20 10:01 PM] gcharang#6833
https://discord.com/channels/412898016371015680/676136067262447633/678232846082637857
as you can see, it was working sometime ago, though that was a different branch


[01-Nov-20 11:56 PM] gcharang#6833
@Alright `sendtoaddress RHYzcobP5WfjaVqyNbDuNdvyvqgdVYxxg2 1 "" "" false "123456"` isn't working in the komodod from komodoplatform - master .
i've checked that the branch has commits from jl777/komodo repo from the time the OP_RETURN param was added  to `sendtoaddress`.  do you know if those commits were reverted ?


[02-Nov-20 07:20 AM] Sudoba#9452
@jl777c Thank you for your reply. Having read the other comments I assume this will be part of the Komodo master branch. I have another question regarding the hexstring. I assume it is there for a reason and are there any things I need to look out for before sending hex necoded strings? ( OP_RETURN is possibly consumed by Antara modules )


[02-Nov-20 07:50 AM] Alright#0419
@gcharang is not in master branch


[02-Nov-20 07:55 AM] lightspeed393#5403
what branch is it in?


[02-Nov-20 09:08 AM] Alright#0419
research branch at least, didn't look anywhere else


[02-Nov-20 09:09 AM] Alright#0419
can look here https://github.com/KomodoPlatform/komodo/blob/0d65a73a9c4e155bd16bd11738d1a286e2ccfe24/src/wallet/rpcwallet.cpp#L565

{Embed}
https://github.com/KomodoPlatform/komodo/blob/0d65a73a9c4e155bd16bd11738d1a286e2ccfe24/src/wallet/rpcwallet.cpp
KomodoPlatform/komodo
Komodo. Contribute to KomodoPlatform/komodo development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[02-Nov-20 09:40 AM] lightspeed393#5403
thanks @Alright


[02-Nov-20 10:31 AM] lightspeed393#5403
Tested on research branch and it worked great. Exactly what I was looking for, thanks for the info everyone. Much easier than using another library like `python-op_return`.


[02-Nov-20 11:56 PM] Mylo#8306
How long until it is pushed to a stable release branch?


[03-Nov-20 08:56 AM] Sudoba#9452
@Myloare you also trying to use hexstrings to add metadata to transactions?


[03-Nov-20 09:48 AM] alkimi#1111
pretty sure somebody is


[03-Nov-20 10:51 AM] Sudoba#9452
in case someone is, the hexstring needs to be even.


[03-Nov-20 11:04 AM] alkimi#1111
I'll spread the word

{Reactions}
üëç 

[03-Nov-20 01:09 PM] Mylo#8306
Not trying but it is a handy feature I would look at using

{Reactions}
üëç 

[10-Nov-20 02:28 AM] Sudoba#9452
Hi, I've got a few answers:
1. How do I dynamically load an Antara module? ( custom )
2. Has anyone tried to develop a VM solution on Komodo?
3. Is AtomicDEX Mobile also open source?
4. Is there a solidity integration?


[31-Jan-21 09:59 AM] Roger#1320
With IDO can you set up stage 1 with 1 price stage 2 with another price and also can notarization service  have different triggers to mine different amounts of coins ?


[31-Jan-21 10:15 AM] lightspeed393#5403
yes you could do different price stages. You'd just have to cancel the sell order at the 1st price and put up a new order at the 2nd price


[31-Jan-21 10:16 AM] lightspeed393#5403
Not sure about the notarization part. Mining is separate from notarizing, but you can specify whatever block rewards you'd like for mining.


[11-Feb-21 02:10 PM] Deleted User#0000
hello all.. KMD is an awesome project... i love the video tutorial on their webiste especially on interoporability
anyone know how a dapp can work which requires a lot of user data.. moreso user images
also integrate a fiat payment gateway


[17-Feb-21 05:35 AM] b0r4cch0#5367
I agree. There problem is lack of peoples attention. They need to advertise offensively.  Or....Elon musk...? üòÜ

{Reactions}
üëç 

[28-Mar-21 07:10 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
Hi all

I'm new to rust and I have a problem with komodo_rpc_client

I know this is a basic rust problem, but there is a charitable soul who will be able to help me around here üòÑ

@jorian @paco 

```
‚îî‚îÄ‚îÄ‚ïº $cargo run
   Compiling hello_komodo v0.1.0 (/home/user/Dev/gh/xdrkush/komodorpc-rust-client/hello_komodo)
error[E0432]: unresolved import `komodo_rpc_client::Client`
 --> src/main.rs:3:5
  |
3 | use komodo_rpc_client::Client;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^ no `Client` in the root

warning: unused import: `komodo_rpc_client::KomodoRpcApi`
 --> src/main.rs:4:5
  |
4 | use komodo_rpc_client::KomodoRpcApi;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

error: aborting due to previous error; 1 warning emitted

For more information about this error, try `rustc --explain E0432`.
error: could not compile `hello_komodo`

To learn more, run the command again with --verbose.

```


[28-Mar-21 07:24 AM] jorian#4555
i'm actually working on a new version that is better than the one you are using

{Reactions}
üëç 

[28-Mar-21 07:24 AM] jorian#4555
but if you're new to rust, you're going to have a hard time üôÇ


[28-Mar-21 07:25 AM] jorian#4555
<https://github.com/jorian/rust-komodo-rpc>

{Reactions}
üëç 

[28-Mar-21 07:25 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
ok ok, so i will wait for you to do that and in the meantime i will train on yew


[28-Mar-21 07:25 AM] jorian#4555
what is yew?


[28-Mar-21 07:31 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
https://yew.rs/docs/en/

{Embed}
https://yew.rs/docs/en/
Introduction ¬∑ Yew Docs
## What is Yew?
https://images-ext-2.discordapp.net/external/BGkEa76661aAmvak4moStvlkrZrxmlIKJeJQADYoeh8/https/yew.rs/img/Rollup.jpg


[28-Mar-21 07:31 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
its use with arrr,


[28-Mar-21 07:32 AM] jorian#4555
oh nice


[28-Mar-21 07:32 AM] jorian#4555
to make what?


[28-Mar-21 07:32 AM] jorian#4555
what kind of app? wallet?


[28-Mar-21 07:42 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
i dont know, 
maybe explorer, ü§∑


[28-Mar-21 07:43 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
how run your app ?


[28-Mar-21 07:43 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
cargo run --bin not fonctional üòÑ


[28-Mar-21 07:45 AM] jorian#4555
it's a lib, not an app. you can't run it, you use it to talk to komodo daemons


[28-Mar-21 07:48 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
I come from the web you understand ? üòÖ


[28-Mar-21 07:48 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
lol


[28-Mar-21 08:33 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
https://lib.rs/crates/komodo_rpc_client üòâ

{Embed}
https://lib.rs/crates/komodo_rpc_client
komodo_rpc_client ‚Äî cryptocurrencies in Rust
A Komodo RPC Client, written in Rust
https://images-ext-2.discordapp.net/external/2Ozv0mdVJMz3kSLhu2lzus0ngqq7H4qEC_I93BM6-Fs/https/lib.rs/crates-logo.png


[29-Mar-21 04:47 AM] ca333#0333
if you are building core-tools with rust on komodo orientate towards robust implementations @ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian such as https://github.com/rust-bitcoin/rust-bitcoincore-rpc - you can easy tweak it and add full komodo interface coverage. 
Most such rpc wrappers are suboptimal as the interface is hardcoded and each change and addition needs manual integration. 

More elegant solution is when your rpc wrapper/lib not only fetches config data and rpc interface connection status automagic but when it can use `help` method and parse response content to map all methods with parameters to dynamic rpc-interface map - provided `help` response is reliable and list parameters with datatypes and response example. It means when your rpc library can learn the interface of a coin autonomous.

However notice such rpc-wrapper practise is considered overkill/outdated for modern enduser-dapps as it using native rpc interface - it can be interesting for services and tools that require full-native node and rpc interface for operations. But everything modern, specifically 'dApps' which are in class of lightweight, mobile-ready and web-ready application require different technology stacks than whats presented ^.

tl;dr: look into SPV libraries functionality if you want to build successful standalone dApps - plus our developers work on full web-support for NSPV/CC technology with great progress, soon you can build trustless Komodo/CC web-dapplications on native web-stack - worth to keep eye on. In general we do not recommend core-daemon rpc interface for dApps unless it is absolutely required by use-case - very rare.

{Embed}
https://github.com/rust-bitcoin/rust-bitcoincore-rpc
rust-bitcoin/rust-bitcoincore-rpc
Rust RPC client library for the Bitcoin Core JSON-RPC API. - rust-bitcoin/rust-bitcoincore-rpc
https://images-ext-1.discordapp.net/external/iG3Tf5Myu4i_0aHTeh7qp58ER8mHAZTf2u2-E80sib8/%3Fs%3D400%26v%3D4/https/avatars.githubusercontent.com/u/37084147

{Reactions}
üëç (2) 

[29-Mar-21 09:06 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
oh yes, thanks for this complete answer üëç 

I'm going to take a closer look, although I'm dev nodejs, rust interests me a lot for that resistance, it's really very interesting thank you again;)

I come back to you in case of problems, but the kmd protocol with its manifest of jl777 is really a mark in stone that attracts me strongly üòç

{Reactions}
üëç KMD 

[29-Mar-21 11:35 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
by any chance you have modules in nodejs ?

This would allow me to be productive very quickly, even if I have to participate in the dev üòâ


[29-Mar-21 11:42 AM] ca333#0333
it does look as @Mylo published npm package for komodod https://www.npmjs.com/package/komodo-rpc-lib @ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian - and remember you can use any json-rpc lib for komodo with slight changes. Technically you can even go one level lower on stack and just use a standard http client library to communicate with coin daemon. 

Please **always** validate a library or third party software is safe and secure when you use it - in current days the upstream attacks going up on such dependency libraries.

{Embed}
https://www.npmjs.com/package/komodo-rpc-lib
komodo-rpc-lib
An rpc wrapper for working with komodo blockchain tech
https://images-ext-1.discordapp.net/external/2wk8OcHCn611djWAWkrbos0ZdT46qDFw0Q3s_CuGp0E/https/static.npmjs.com/338e4905a2684ca96e08c7780fc68412.png

{Reactions}
üëç (2) üòÖ üíØ 

[29-Mar-21 11:47 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
so thank you very much,

it is true that the security between rust and nodejs is quite questionable I admit it, this is why I start to put myself on rust but I cannot be productive and at the same time learn the language, which does not push back in nothing to my motivation to learn rust

But if I can make myself useful to make nodejs vs kmd tutorials while waiting to familiarize myself with rust, that would take a thorn out of my side: D

In any case, I thank you for your responsiveness, your advice and your kindness,

Peace '

thx
https://github.com/imylomylo/komodo-rpc-lib
https://github.com/gcharang/node-komodo-rpc

{Embed}
https://github.com/imylomylo/komodo-rpc-lib
imylomylo/komodo-rpc-lib
ES6 komodo platform rpc for use in gui or nodejs. Contribute to imylomylo/komodo-rpc-lib development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/J-Sy2o3fgPeQ0znFN7sw4LeB8Bw9wl9NvrKDCs5gNSg/%3Fs%3D400%26v%3D4/https/avatars.githubusercontent.com/u/19399102

{Embed}
https://github.com/gcharang/node-komodo-rpc
gcharang/node-komodo-rpc
nodejs json-rpc client for Komodo and Smart Chains, with Promises and support for multiple instances - gcharang/node-komodo-rpc
https://images-ext-2.discordapp.net/external/6kcgAmozKzeVBoS-caLRXH8mH6U5oQro6f4sCPF5HwI/%3Fs%3D400%26v%3D4/https/avatars.githubusercontent.com/u/21151592


[29-Mar-21 01:45 PM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
@gcharang its a genius üíØ 
I test your lib tomorrow !

{Reactions}
rum üëå 

[30-Mar-21 12:33 AM] Mylo#8306
Mine is unmaintained. Needs work to be brought up to scratch


[30-Mar-21 02:26 AM] ca333#0333
both JS and rust are very different stacks and but can complement each other nice. 
With rust you get a guaranteed memory safety and compiled lang which means it is closer to physical layer and doesn't require 'engine' for execution at runtime thus in general compare to JS you receive more performance. For devs it is super efficient tech stack as they have to worry about less compared to other low level stacks and receive benefits from cargo ecosystem.  
tl;dr: Rust mem safety, cargo ecosys and its specific memory management ('borrow checker') are few factors make it the choice for efficient dev of software with performance requirement and safety.
interesting information: https://doc.rust-lang.org/1.8.0/book/references-and-borrowing.html 

Javascript in general and with most engines is a 'interpreted lang' and has garbage collector for memory management as opposed to rust approach. In your case V8 uses JIT compilation thus at very low level after interpreted by V8 it is actually compiled before executed but by the engine - however as dev you will never compile or see byte code version. JS is less closer to the physical layer as the engine sits between your application and the OS. You can imagine as when you need a translator while you talk to me, our conversation is less efficient as if you can talk to me direct - it is very similar with JS execution. So you would not want to use it for software with very high-performance requirement. However JS/nodejs does not mean application can not be very successful and designed with security in mind - look on the DeFi space many successful projects in these days are pure JS applications.
tl:dr: JS allows for fast and efficient development with cost of less performance and safety to certain degree. The npm ecosystem can raise efficiency a lot - if used wisely.

{Reactions}
üëç (2) 

[30-Mar-21 02:27 AM] ca333#0333
Either way recommend you https://doc.rust-lang.org/book/ as rust will become leading tech stack undoubted. We will see many big player legacy projects in crypto and in general IT industry port software from legacy low level stacks to rust.

{Embed}
https://doc.rust-lang.org/book/
The Rust Programming Language - The Rust Programming Language

{Reactions}
üíØ 

[30-Mar-21 03:27 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
lol for the translator's stroke üòÑ

So yes indeed I heard a lot about rust which is indeed a lower level layer than nodejs with a supported memory management, which precisely interests me a lot and that would allow me to evolve in the code

However, it's a while before you have a complete mastery of it

In any case you confirm what I had heard about it and it really gives me the desire to continue in this direction, I will put the necessary time but rust will be part of my stack in the near future üòâ

Anyway I thank you very much for spending time wanting to convert me to rust, it's very cool of you, I feel that I am in good hands with you

Peace '


[30-Mar-21 04:41 AM] grewalsatinder#9653
I agree.
At this point, I'm also thinking to get hands dirty with Rust too.
Seems like it's already dominating and will be dominating in future.
Rust also seems like the next big favorite choice for devs who likes to code in C/C++

{Reactions}
üëç 

[31-Mar-21 09:47 AM] jorian#4555
good news üôÇ


[31-Mar-21 09:47 AM] jorian#4555
but be prepared to struggle a lot in the beginning


[31-Mar-21 03:41 PM] grewalsatinder#9653
I struggled to catch golang for almost 1.5 years.
I guess there is more help for Rust to unstuck üòÖ


[03-Apr-21 10:47 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
hi @gcharang 
i test your module, its good job üòâ
```
‚îî‚îÄ‚îÄ‚ïº $node index.js 
getblockcount 2333993
```
while waiting for my PR (I have re-installed lol)

I made a small app with your module, it's great ! üëç 
thx

{Reactions}
üëç 

[03-Apr-21 12:33 PM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
i make tuto for connect rpc with vuejs üòâ
your librairy is depracted, but i have soluce for now,
i think make a faucet tutorial üòâ (in local version)


[03-Apr-21 02:07 PM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
the init version !
https://github.com/xdrkush/tuto-kapp-vue-node

{Embed}
https://github.com/xdrkush/tuto-kapp-vue-node
xdrkush/tuto-kapp-vue-node
Contribute to xdrkush/tuto-kapp-vue-node development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/i7M6Y74gcjh7M2LYQK66VSQlVlFPvLNz6-zDBp8XIfg/%3Fs%3D400%26v%3D4/https/avatars.githubusercontent.com/u/39158443


[03-Apr-21 09:38 PM] Mylo#8306
@ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian here is some stuff you might be interested in for tutorials


[03-Apr-21 09:38 PM] Mylo#8306
https://ikomodo.com/blockchain-dev-kit-electrum-dex-trading/

{Embed}
iKomodo Mylo
https://ikomodo.com/blockchain-dev-kit-electrum-dex-trading/
Blockchain Dev Kit v1, Electrumx & DEX in 1 hour - iKomodo P2P
Dockerized blockchain dev kit for blockchain creation. Linking lite wallet infrastructure with electrumx & integration with p2p DEX trading
https://images-ext-1.discordapp.net/external/tml0fOCvYJdmzzmtsBcGJBn-ywOmKJWoUobSxZqzmMQ/%3Ffit%3D1179%252C615%26ssl%3D1/https/i1.wp.com/ikomodo.com/wp-content/uploads/2020/08/helloworld-coin.png

{Reactions}
üëç 

[03-Apr-21 09:38 PM] Mylo#8306
Vue as well

{Reactions}
üíØ (2) 

[04-Apr-21 08:37 PM] Mylo#8306
The src is on gh and there's a branch that uses better state management (vuex) and uses creative-tim free design. Looks a lot better üôÇ

{Reactions}
üëç 

[04-Apr-21 08:37 PM] Mylo#8306
But it's not actively developed atm


[05-Apr-21 04:20 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
ok ok, i'm on the testnet for the nn, i will watch !
I would have to perfect myself absolutely with docker üòÑ


[05-Apr-21 08:38 AM] Mylo#8306
well if you want to distribute what you make  with docker images, put a question on stack overflow and/or #dev-ops depending on generic docker probs or komodod/mm2 specific

nn dockerized,  not popular but has been done before by others

{Reactions}
üëç 

[10-Apr-21 02:03 PM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
@gcharang üòâ https://github.com/xdrkush/tuto-kapp-vue-node/commit/5385cdee6faa4d3c5244389ae54d0c6a15093877

{Embed}
https://github.com/xdrkush/tuto-kapp-vue-node/commit/5385cdee6faa4d3c5244389ae54d0c6a15093877
init module gcharang ¬∑ xdrkush/tuto-kapp-vue-node@5385cde
https://images-ext-2.discordapp.net/external/i7M6Y74gcjh7M2LYQK66VSQlVlFPvLNz6-zDBp8XIfg/%3Fs%3D400%26v%3D4/https/avatars.githubusercontent.com/u/39158443

{Reactions}
üëå 

[17-Apr-21 11:21 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
it's progressing, slowly but surely üòâ
https://github.com/xdrkush/tuto-kapp-vue-node

{Embed}
https://github.com/xdrkush/tuto-kapp-vue-node
xdrkush/tuto-kapp-vue-node
Contribute to xdrkush/tuto-kapp-vue-node development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/i7M6Y74gcjh7M2LYQK66VSQlVlFPvLNz6-zDBp8XIfg/%3Fs%3D400%26v%3D4/https/avatars.githubusercontent.com/u/39158443

{Reactions}
üëç 

[17-Apr-21 11:24 AM] ùììùìª ùìöùìæùìºùì± |ü¶Ñ| Komodian#3853
it is true that with a good up-to-date library it would be a treat, to see if we can not try to communicate together to advance our @Mylo  üòâ


==============================================================
Exported 16,754 message(s)
==============================================================
