==============================================================
Guild: Komodo
Channel: Hidden-Channel-Archive / mm_2_0
==============================================================

[06-Aug-18 06:59 AM] ca333#0333
Hi @artem.pikulin & @artemciy_dice - this is the new requested MM2.0 internal channel.
 @carl @Audo can we plz bridge this channel to "KMD-priv-barterDEX2" on riot?


[06-Aug-18 07:00 AM] artemciy_dice#0049
Woot!


[06-Aug-18 07:00 AM] artem.pikulin#0794
@ca333 Thanks!


[06-Aug-18 07:01 AM] artem.pikulin#0794
Can we add lukechilds here?


[06-Aug-18 07:55 AM] artemciy_dice#0049
I think getting a Discord channel here was a good idea. UI is friendlier (smileys, edits, colors) and it's a livelier place.

{Reactions}
üëç (3) 

[06-Aug-18 07:56 AM] artemciy_dice#0049
My idea is to be a tad more noisy here than on Riot.


[06-Aug-18 07:56 AM] artemciy_dice#0049
Just got a word from lukechilds that they will be able to run MM2 under Docker in their testing setups.


[06-Aug-18 07:57 AM] artemciy_dice#0049
This means that we might have a shared environment for the crash reports. A place where `core` files will make sense.


[06-Aug-18 08:00 AM] artemciy_dice#0049
When a crash happens, we can either try to make a stack trace, or let the OS dump the memory into a `core` file. The first option is less reliable in face of memory corruption, as we're running code on the same stack that crashed, but it allows us to share a report that doesn't contain any sensitive information and can be easily shared (copy&pasted).


[06-Aug-18 08:00 AM] ca333#0333
yes discord is pretty comfortable and UX is nice as well. For sensible data, top-secret stuff, etc. matrix protocol based chat with encryption is still better üòÉ


[06-Aug-18 08:01 AM] artemciy_dice#0049
Got it, @ca333 !


[06-Aug-18 08:01 AM] ca333#0333
yes we can have lukechilds here - give me a moment. i might have to create a MM_devs group

{Reactions}
üòã 

[06-Aug-18 08:03 AM] artemciy_dice#0049
With Docker being used by some of the test teams it becomes practical (starts making sense) to add an option that will be dumping a `core` instead of collecting a stack trace.


[06-Aug-18 08:04 AM] ca333#0333
@lukechilds welcome in the MM2.0 dev channel

{Reactions}
üëè üëç 

[06-Aug-18 08:05 AM] ca333#0333
regarding `gdb` ?


[06-Aug-18 08:05 AM] ca333#0333
@artemciy_dice


[06-Aug-18 08:07 AM] artemciy_dice#0049
Yes, with a Docker release and a `core` developers can re-enter the same Docker environment that dumped the `core` and use the `gdb` to work with  the crash (`gdb` works well with both the C and the Rust code).


[06-Aug-18 08:46 AM] Mylo#8306
oh that's handy to know for docker env crashed stuff to relay crash scenarios/data


[06-Aug-18 02:03 PM] carl#3101
@ca333 afaik private rooms can not be bridged


[07-Aug-18 01:02 AM] ca333#0333
@carl if we are using https://github.com/Half-Shot/matrix-appservice-discord then its defenitely possible.

{Embed}
https://github.com/Half-Shot/matrix-appservice-discord
Half-Shot/matrix-appservice-discord
matrix-appservice-discord - A bridge between Matrix and Discord.
https://images-ext-1.discordapp.net/external/m0pJ_t_oXtEyW1rNhuPEAiNi1cgCcXK8ZrMAcrKIWUw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/2072976


[07-Aug-18 01:03 AM] ca333#0333
just need to give the bridge bot permission to join/read this channel


[07-Aug-18 01:20 AM] jl777c#5810
wouldnt it defeat the riot security to link it to insecure discord?


[07-Aug-18 01:31 AM] ca333#0333
the bridge-bot is able to read/post to the configured private matrix channel - access is limited to explicitly "set" channels though

the answer is yes - if a channel contains sensible data than it is a potential security risk.


[07-Aug-18 03:53 AM] artem.pikulin#0794
http://195.201.0.6/ - every MM2 commit binaries will be published here. Windows CI is broken currently so only Linux and MacOS builds are published now. Available binaries contain a bit of Rust code but these don't work properly yet. New directory will be automatically created for every new branch built by CI.

{Reactions}
üëçüèΩ 

[07-Aug-18 03:53 AM] artem.pikulin#0794
Pinned a message.


[07-Aug-18 05:51 PM] artemciy_dice#0049
So the CI builds were broken because... revolution. We're building MM1 as a library now, then letting Rust link everything into it's own binary!

Artem fixed the Linux and macOS builds yesterday and now I've fixed the WIndows one.


[07-Aug-18 06:11 PM] grewalsatinder#9653
Does mm2.0 already does all what current mm1.0 does?


[07-Aug-18 06:12 PM] grewalsatinder#9653
I‚Äôd be interested in making bob side only app for marketmakers


[07-Aug-18 06:25 PM] artemciy_dice#0049
@grewalsatinder , that's the idea, though currently there are stubs in ETOMIC code.


[07-Aug-18 08:47 PM] grewalsatinder#9653
Okay üëå


[10-Aug-18 09:44 AM] artemciy_dice#0049
Windows stack trace:


[10-Aug-18 09:44 AM] artemciy_dice#0049

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/477517587542966283/unknown.png


[10-Aug-18 11:26 AM] artemciy_dice#0049
The Structured Exception Handling I've used won't work properly across threads though. Am going to try the Vectored Exception Handling instead.


[10-Aug-18 02:34 PM] artemciy_dice#0049
M'kay, Vectored Exception Handling works.


[12-Aug-18 03:22 PM] artemciy_dice#0049
Stack traces now also work on Linux ( https://travis-ci.org/artemii235/SuperNET/jobs/415220809 ) and macOS ( https://travis-ci.org/artemii235/SuperNET/jobs/415220810 ), it's the `crash_reports.rs:123] mm2::crash_reports::access_violation::` line in the build logs.

Should have a testable non-etomic MM2 build tomorrow.


[12-Aug-18 03:22 PM] artemciy_dice#0049
(To be put in place of MM1 in order to get stack traces printed onto the screen if there's a crash).


[13-Aug-18 11:57 AM] artemciy_dice#0049
Testable non-etomic MM2 build: http://195.201.0.6/etomic/marketmaker-mainnet-osx-7f359f9.

{Reactions}
üëçüèΩ (2) üíØ (2) üëåüèΩ (2) 

[14-Aug-18 05:04 PM] artemciy_dice#0049
So for the gradual Rust port we're using a trick ( https://stackoverflow.com/a/44036771/257568 ) to copy Git history between the files, allowing both the old C file and the new Rust file to share the same history.

{Embed}
https://stackoverflow.com/a/44036771/257568
GIT copy file preserving history
I have a somewhat confusing question in GIT.
Lets say, I have a file dir1/A.txt committed and git preserves a history of commits

Now I need (for some reasons) to copy the file into dir2/A.txt (not...
https://images-ext-1.discordapp.net/external/dP07hBXxuorGcvXU609uJ_e6ZgPlIdBxqG8OjQQiAyY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon%402.png


[14-Aug-18 05:05 PM] artemciy_dice#0049
Here's why. With gradual port changes thus being local, advanced IDE diffs now can trace code changes through the port. This should help us understand and review it.

I'd like to show such a diff. VSCode:


[14-Aug-18 05:06 PM] artemciy_dice#0049

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/479078273855389696/unknown.png


[14-Aug-18 05:06 PM] artemciy_dice#0049
CLion:


[14-Aug-18 05:06 PM] artemciy_dice#0049

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/479078443439620128/unknown.png


[14-Aug-18 05:12 PM] artemciy_dice#0049
GitHub diff isn't nearly as smart ( https://github.com/artemii235/SuperNET/commit/5a4182f502c00b0c89279734972980d07e3e0a22#diff-54bf2db68cf15547d0d1bd4a641f5e09L223 ), but both IntelliJ/CLion and VSCode (GitLens) allow us to work with prior Git history.

{Embed}
https://github.com/artemii235/SuperNET/commit/5a4182f502c00b0c89279734972980d07e3e0a22
Port btc2kmd to Rust ¬∑ artemii235/SuperNET@5a4182f
https://images-ext-2.discordapp.net/external/pDlCuApmX76fYCqyh5gxhJFMPb4IAHSgUVl-DtEXEjY/%3Fs%3D200%26v%3D4/https/avatars1.githubusercontent.com/u/41847


[14-Aug-18 05:47 PM] lukechilds#2707
woah, that's cool


[14-Aug-18 05:48 PM] lukechilds#2707
there are some pretty major memory leaks in mm btw


[14-Aug-18 05:48 PM] lukechilds#2707
I hadn't realised before as I was mainly running it as a client (Alice) for short periods of time


[14-Aug-18 05:49 PM] lukechilds#2707
but after running my own always on Bob node the memory leak is pretty obvious


[14-Aug-18 05:49 PM] lukechilds#2707
I have to restart the process every week or so otherwise it'll eat up all my RAM


[14-Aug-18 06:08 PM] artemciy_dice#0049
Thanks for the heads-up, @lukechilds , I'll keep my eyes peeled for them during the port!


[14-Aug-18 07:34 PM] Mylo#8306
yeah thanks, gonna keep an eye on it now.  that's really cool about tracking changes across ports


[18-Aug-18 08:06 AM] artemciy_dice#0049

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/480392107228397588/unknown.png


[18-Aug-18 08:07 AM] artemciy_dice#0049

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/480392201004908554/unknown.png


[18-Aug-18 08:14 AM] artemciy_dice#0049
^^ If you look at CI build logs sometimes (they are attached to every commit in the MM2 branches) you might see these Rust tests being invoked by the builds.

Here the `test_events` is a new integration test, it starts MM, starts `mm2 events`, tells MM to share the events with `mm2 events` (by invoking the `getendpoint` method) and checks that `mm2 events` prints such an event.


[18-Aug-18 08:15 AM] artemciy_dice#0049
I'm excited that this kind of integration test works in CI.


[19-Aug-18 05:26 AM] lukechilds#2707
Hey guys


[19-Aug-18 05:26 AM] lukechilds#2707
just a thought


[19-Aug-18 05:26 AM] lukechilds#2707
you may be able to help us with this


[19-Aug-18 05:26 AM] lukechilds#2707
https://docs.google.com/spreadsheets/d/1blgmrJCZ-SfYaJdTTVdk717kZ43R4yzm9YIW2Bt--EM/edit#gid=0

{Embed}
https://docs.google.com/spreadsheets/d/1blgmrJCZ-SfYaJdTTVdk717kZ43R4yzm9YIW2Bt--EM/edit
Failed swap message error codes
Sheet1

 This document is editable by anyone, if you want to add in any error codes you come across or add meanings for those you know the meaning of, that would be very helpful:)( but please don' t delete other people' s text)
 Error Code, Meaning
- 9999, unmatched
- 1000
- ...
https://images-ext-1.discordapp.net/external/82YqZWTle5wNOhEW_SLQOrr_OGDnk5lY_N86NvN04RA/https/lh3.googleusercontent.com/ig0NikYLInznyGxbmngtjB61U4ibRQg2bS_VfvlfY59cta9eARPJYa8at2s7e5KERYexow%3Dw1200-h630-p


[19-Aug-18 05:26 AM] lukechilds#2707
we have basically no docs to go on for error codes


[19-Aug-18 05:26 AM] lukechilds#2707
so just note them down as we come across them and then try and hunt them down in the source


[19-Aug-18 05:26 AM] lukechilds#2707
you'll probs come across a load when you're doing the port


[19-Aug-18 05:27 AM] lukechilds#2707
so if it's not too much trouble, if there's any chance you could update that doc every now and then with error codes and what they mean, it would be a great help to us and anyone else building on top of mm


[19-Aug-18 09:16 AM] artemciy_dice#0049
Of course, Luke!

{Reactions}
üíØ (3) 

[19-Aug-18 09:18 AM] lukechilds#2707
Thanks man, much appreciated üôè


[19-Aug-18 12:52 PM] artemciy_dice#0049

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/480826377378201600/unknown.png


[19-Aug-18 10:34 PM] gcharang#6833
@lukechilds @artemciy_dice This doc has some MM error codes documented. https://docs.komodoplatform.com/barterDEX/MarketmakerErrors.html

{Reactions}
üíØ (2) 

[20-Aug-18 01:54 AM] lukechilds#2707
@gcharang this is brilliant, was not aware that existed, thanks!


[21-Aug-18 02:56 AM] artemciy_dice#0049
Hey, @jl777c ,
is the hardcoded HUSH vanitygen at https://github.com/jl777/SuperNET/blob/22b2ddcea38d9fe82fadbedcd89bd49e96656f4d/iguana/exchanges/mm.c#L211 still in use, should we port it?

{Embed}
https://github.com/jl777/SuperNET/blob/22b2ddcea38d9fe82fadbedcd89bd49e96656f4d/iguana/exchanges/mm.c
jl777/SuperNET
Contribute to SuperNET development by creating an account on Github.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[21-Aug-18 02:58 AM] artemciy_dice#0049
Seems it isn't documented anywhere, hence the question.


[21-Aug-18 03:00 AM] jl777c#5810
not sure if anybody is using it. over the years, I tend to add little utilities like that as a convenience. you can probably skip all those speciality utility modes


[21-Aug-18 03:03 AM] artemciy_dice#0049
Copy, thanks!


[21-Aug-18 09:34 AM] artemciy_dice#0049
I'd like to reference the MarketMaker web documentation from `mm2 --help` and I wonder about the difference between http://api.kmd.host/, https://github.com/KomodoPlatform/KomodoPlatform/wiki/BarterDEX-API-Summary-by-Category and https://github.com/gcharang/KomodoPlatformdocs/blob/master/docs/source/barterDEX/.

{Embed}
https://github.com/KomodoPlatform/KomodoPlatform/wiki/BarterDEX-API-Summary-by-Category
KomodoPlatform/KomodoPlatform
Contribute to KomodoPlatform development by creating an account on Github.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Embed}
https://github.com/gcharang/KomodoPlatformdocs/blob/master/docs/source/barterDEX/
gcharang/KomodoPlatformdocs
Contribute to KomodoPlatformdocs development by creating an account on Github.
https://images-ext-2.discordapp.net/external/XjUnfLh_ll_5ZLNrsZgRQXP1rXaDVUgpLibKLCYGLLw/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/21151592


[21-Aug-18 09:35 AM] artemciy_dice#0049
The latter seems more recent. And has all those error codes documented, for example. But is it published somewhere?


[21-Aug-18 09:50 AM] artemciy_dice#0049
Referencing both the api.kmd.host and the github.com/gcharang/KomodoPlatformdocs/tree/master/docs/source/barterDEX for now ( https://github.com/artemii235/SuperNET/commit/febb66b2075c1f36f6d263c9a0557aa96f2ba6f3#diff-2e6fc899470721433bdb3184346343c2R408 ).

{Embed}
https://github.com/artemii235/SuperNET/commit/febb66b2075c1f36f6d263c9a0557aa96f2ba6f3
Print command-line help when asked to ¬∑ artemii235/SuperNET@febb66b
https://images-ext-2.discordapp.net/external/pDlCuApmX76fYCqyh5gxhJFMPb4IAHSgUVl-DtEXEjY/%3Fs%3D200%26v%3D4/https/avatars1.githubusercontent.com/u/41847


[21-Aug-18 09:54 AM] jl777c#5810
@SHossain not sure the state of documentations


[21-Aug-18 09:59 AM] SHossain#0007
@artemciy_dice this would be the URL we would recommend and it will be maintained https://docs.komodoplatform.com/barterDEX/barterDEX-API.html


[21-Aug-18 10:00 AM] SHossain#0007
I haven't added any new calls there recently.


[21-Aug-18 10:01 AM] SHossain#0007
Please let @gcharang or me know if anything needs updating there


[21-Aug-18 10:02 AM] artemciy_dice#0049
Cool, thanks @SHossain !


[21-Aug-18 10:09 AM] artemciy_dice#0049
@SHossain , This is generated from github.com/gcharang/KomodoPlatformdocs, right?


[21-Aug-18 10:10 AM] SHossain#0007
https://github.com/KomodoPlatform/DocumentationPreview

{Embed}
https://github.com/KomodoPlatform/DocumentationPreview
KomodoPlatform/DocumentationPreview
Contribute to DocumentationPreview development by creating an account on Github.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[21-Aug-18 10:10 AM] SHossain#0007
we moved everything in our KP organization repo


[21-Aug-18 10:10 AM] artemciy_dice#0049
Ah, all right.


[21-Aug-18 10:14 AM] SHossain#0007
sorry, that is the preview where @gcharang does testing. this is the original repo https://github.com/KomodoPlatform/Documentation

{Embed}
https://github.com/KomodoPlatform/Documentation
KomodoPlatform/Documentation
Documentation - Developer and End user documentation
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[21-Aug-18 10:14 AM] SHossain#0007
you can push updates to dev branch of this ^^ repo


[21-Aug-18 10:15 AM] SHossain#0007
master branch is where it is serving from


[21-Aug-18 10:16 AM] artemciy_dice#0049
Copy!

{Reactions}
üëçüèΩ 

[23-Aug-18 10:31 AM] artemciy_dice#0049
With VSCode one can program and see the fresh RLS (Rust Language Server) errors in the diff:    : D


[23-Aug-18 10:31 AM] artemciy_dice#0049

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/482240459939381258/unknown.png

{Reactions}
üëçüèΩ (3) 

[26-Aug-18 06:16 PM] artemciy_dice#0049
I wonder if it will make any sense to use the new https://pro.coinmarketcap.com/pricing "Starter" API as a fallback for when the coingecko API is not available? I mean, no service is 100% reliable and we could fall back to a low-traffic, optionally-custom-API-key CMC if we can't reach coingecko, but will there be any downsides in terms of consistency if we use two price providers instead of one?


[27-Aug-18 12:50 AM] jl777c#5810
maybe allow the user to configure coinmarketcap login info, so if it is there it is used, if not just the free services


[27-Aug-18 12:51 AM] jl777c#5810
then serious marketmakers would get a CMC account for pricing


[27-Aug-18 06:38 AM] artemciy_dice#0049
Makes sense, thanks!


[01-Sep-18 11:07 PM] artemciy_dice#0049
A less known feature of Rust is that loops are expressions. I love it though, as this often allows us to avoid mutable variables and make the code better connected.

The difference between mutable and immutable variables is that the immutable variables are more strictly defined (that is, we don't know if `Option<Value>` is `None`, but `Value` can only be a `Value`).

For example, the static typing here ensures that the immutable `myipaddr` variable gets initialized: https://github.com/artemii235/SuperNET/commit/cf6a2281d6cd32a9c0a242f48ec7dd5f34bbd48b#diff-087cef82ec3a4f92264696f790723461R1510 (the `break ip` on line 1560 provides the necessary value while iterating over multiple IP providers).

{Embed}
https://github.com/artemii235/SuperNET/commit/cf6a2281d6cd32a9c0a242f48ec7dd5f34bbd48b
Configure IP from command line ¬∑ artemii235/SuperNET@cf6a228
Also fetches the real IP without resorting to cURL.
https://images-ext-2.discordapp.net/external/pDlCuApmX76fYCqyh5gxhJFMPb4IAHSgUVl-DtEXEjY/%3Fs%3D200%26v%3D4/https/avatars1.githubusercontent.com/u/41847


[06-Sep-18 08:56 AM] artemciy_dice#0049
It is now possible to run two MM instances on the same PC and netid (in order to test a trade, for example). E.g. 
```
mm2 '{"myipaddr": "127.0.0.1", "gui": "nogui", "client": 1, ...'
mm2 '{"myipaddr": "127.0.0.2", "gui": "nogui", "client": 1, ...'
```

{Reactions}
üëè 

[06-Sep-18 09:13 AM] artemciy_dice#0049
@lukechilds , any plans to explain in the GUI why a particular trade didn't happen? E.g. something like the MM log but human-readable?


[06-Sep-18 09:14 AM] artemciy_dice#0049
Would love to help with that on the MM2 side.


[06-Sep-18 09:14 AM] lukechilds#2707
We would love to


[06-Sep-18 09:15 AM] lukechilds#2707
We are currently showing the error code


[06-Sep-18 09:15 AM] lukechilds#2707
along with a message for some that we understand


[06-Sep-18 09:15 AM] lukechilds#2707
e.g unmatched/cancelled/failed


[06-Sep-18 09:15 AM] lukechilds#2707
but would love to add more detail


[06-Sep-18 09:23 AM] artemciy_dice#0049
@lukechilds , So just to shake things a bit for clarification, have you tried parsing the existing log, stuff like `9486124420107141123 >>>>>>> myprice 0.90000000 qprice 0.99810360 r.93 range 0.09810360 -> 0.99123635, bestprice 0.99123635 counter.-1`? Would it give the necessary information if you did, or is something missing? (*P.S. To follow up on this, yes, it looks to us like some useful information about the trades is still missing from the logs, they can be improved to give more useful information about the trades to both the developers and the users*).


[06-Sep-18 09:25 AM] artemciy_dice#0049
I guess the GUI just ignores the MM logs as of now, right?


[06-Sep-18 09:28 AM] artemciy_dice#0049
What if we turn some of these log messages into a well-defined JSON entries that you can just parse and share with the user?


[06-Sep-18 09:38 AM] artemciy_dice#0049
---
I guess you'd prefer to get these over the TCP/IP instead? But the log is kind of underused then. If MM crashes and is deployed remotely, the GUI doesn't even know what happened, can't show it to the user and consequently the user can't share it with the tech support and the devs. What if we log to GUI over the TCP/IP, allowing the GUI to both glean the information from the log, to share it with advanced users and to attach it to crash reports?


[06-Sep-18 09:56 AM] artemciy_dice#0049
The log is often interesting to everyone, not just the devs.
For example, some videogames share the loading logs with the player. Some videogames and apps (Discord!) even cheat by simulating such a loading log simply to improve the UI.
There is also a lot of videogames that share the RPG system calculation logs *during* the game.
But the log we have is hidden and only *readable* by some of the devs. How about making parts of it readily available in the GUI and readable to any interested user? And consequently giving the interested users more information on what's going on with the trades?


[07-Sep-18 08:58 AM] artemciy_dice#0049
---


[07-Sep-18 08:58 AM] artemciy_dice#0049
Clarifying the networking stack priorities:
https://github.com/artemii235/SuperNET/issues/101#issuecomment-419483901

{Embed}
https://github.com/artemii235/SuperNET/issues/101
[v2] Possible web rtc support. ¬∑ Issue #101 ¬∑ artemii235/SuperNET
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[10-Sep-18 09:22 AM] artem.pikulin#0794
@lukechilds Hi, we have nightly builds of MM2.0 available at http://195.201.0.6/etomic/ (a2fd28f) which we would like to provide to users/testers for alpha-test. It has few top-level functions ported to Rust, detailed stack-traces on crashes and segfaults, partial port of ETH/ERC20 integration. Could you please create a HyperDEX release with these binaries?


[10-Sep-18 09:28 AM] artem.pikulin#0794
Just realized that sindresorhus is not here... @ca333 Could you add him please?


[10-Sep-18 10:12 AM] lukechilds#2707
hey guys


[10-Sep-18 10:12 AM] lukechilds#2707
sorry, seen a few mentions


[10-Sep-18 10:12 AM] lukechilds#2707
had a busy week and totally forgot about a family event I had to be at


[10-Sep-18 10:12 AM] lukechilds#2707
just got back


[10-Sep-18 10:12 AM] lukechilds#2707
catching up on work tonight and tomorrow


[10-Sep-18 10:13 AM] lukechilds#2707
@artem.pikulin is the HTTP/WS API of mmv2 a drop in replacement or are there endpoints missing?


[10-Sep-18 10:15 AM] lukechilds#2707
@artemciy_dice Yeah, currently we ignore the logs (apart from piping it through to stdout for debugging)

I think we would prefer to get all errors as API responses but making the logs more readable would definitely still be a good thing so power users can take a look

We should also be careful what is store in the logs, we don't want to be logging sensitive info to plain text files that we leave on the filesystem.


[10-Sep-18 10:15 AM] artem.pikulin#0794
No endpoints are dropped, it's mostly "old" C MM with some parts implemented in Rust.


[10-Sep-18 10:17 AM] lukechilds#2707
Awesome, we're rushing to get a beta release shipped this week but as soon as that's done I can create a mmv2 fork for testing


[10-Sep-18 10:17 AM] lukechilds#2707
probs best not to use the Rust version in the official release but can definitely get a custom HyperDEX build out for testers


[10-Sep-18 10:44 AM] artemciy_dice#0049
`> I think we would prefer to get all errors as API responses`

@lukechilds, I know what you mean, but with certain things it's not really an option. For example, we're using auto-pricing and getting a failure from some of the providers, possibly a temporary failure. What API should get that error? If we semi-randomly assign the error we might be hampering an API without ample reason to do so, plus plumbing the error there might take some work. I think there needs to be a second "gossip" channel where MM simply tells what's going on.


[10-Sep-18 10:44 AM] lukechilds#2707
We have the WebSocket connection which just sends us random messages with what's going on


[10-Sep-18 10:45 AM] lukechilds#2707
we untangle everything internally and assign updates to specific swaps


[10-Sep-18 10:45 AM] artemciy_dice#0049
And we can reuse this for logging, yes.


[10-Sep-18 10:45 AM] lukechilds#2707
yeah, we could have a generic `error` message which we could handle and notify the user of errors when necessary


[10-Sep-18 10:46 AM] lukechilds#2707
I would personally prefer that over trying to parse the logfile


[10-Sep-18 10:46 AM] lukechilds#2707
but I still agree it would be a good idea to have more readable logs and more easily expose that to power users


[10-Sep-18 10:48 AM] artemciy_dice#0049
I hear you about the parsing, working on a log format right now BTW ( https://github.com/artemii235/SuperNET/issues/116#issuecomment-420019109 ).
GUI will be simply getting a JSON, no special parsing will be necessary on your side. E.g. we'll have a method that will generate a human-readable message on the stdout, with some key-value entries, and you'll be simply getting a JSON on the websocket.

{Embed}
https://github.com/artemii235/SuperNET/issues/116
[v2] CMC paid API ¬∑ Issue #116 ¬∑ artemii235/SuperNET
cipi quotes from CMC: "The Public API will be taken offline on December 4th, 2018. Please migrate your application to the free tier of the Professional API." We might ask users to registe...
https://images-ext-1.discordapp.net/external/gc91fdg3iDxxfwXS9H4o34q0PJAZ-mR4S1XxdwaVkYs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/41847


[10-Sep-18 10:51 AM] artemciy_dice#0049
---
`> probs best not to use the Rust version in the official release but can definitely get a custom HyperDEX build out for testers`

That's awesome, Luke!
Will be looking forward to this.


[13-Sep-18 12:55 AM] artem.pikulin#0794
Hi! I've written the RFC regarding UTXO handling in MM2.0: https://github.com/artemii235/SuperNET/issues/157, would be glad to receive comments about as it might be superficial a bit. @jl777c, @lukechilds I guess you are the most interested. Thanks in advance!

{Embed}
https://github.com/artemii235/SuperNET/issues/157,
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[06-Oct-18 09:07 AM] artemciy_dice#0049
The "autoprice" mode has been ported to Rust and uses CoinGecko by default
(it also now batches the pricing HTTP requests and gives smart status updates to the user).
Support for CoinMarketCap professional API is on the way.
Also going to port the "fundvalue" RPC command in order to complete the CoinGecko conversion.

Now that we're getting some functionality upgrades in MM2, it would be nice if people were to start picking it up and running in order to provide the early / continuous testing and feedback.

{Reactions}
üëç 

[07-Oct-18 06:32 AM] Mylo#8306
Are there build and operation instructions?


[08-Oct-18 12:33 AM] artemciy_dice#0049
@Mylo , as of now MM2 should be fully compatible with MM1 APIs (e.g. you can replace the MM1 binary with the MM2 one to test it). There are builds at http://195.201.0.6/etomic/?C=M;O=D and https://github.com/artemii235/SuperNET/blob/etomic/Dockerfile serves as the build reference.

{Embed}
https://github.com/artemii235/SuperNET/blob/etomic/Dockerfile
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[08-Oct-18 01:11 AM] Mylo#8306
Thanks @artemciy_dice


[08-Oct-18 01:13 AM] artemciy_dice#0049
You're welcome!  D


[08-Oct-18 01:13 AM] Mylo#8306
Is it ok if i write for Tech Tuesday update that MM2 should be fully compatible with MM1 API as part of the progress of the refactor?


[08-Oct-18 01:14 AM] Mylo#8306
And are there any goals of the MM2 refactor that are published already online?


[08-Oct-18 01:22 AM] artemciy_dice#0049
@Mylo , the README at https://github.com/artemii235/SuperNET/tree/etomic/mm2src touches on the goals.
I've been planning to update it with an important goal discovered since, which is to allow the MarketMaker to function behind NAT (cf. https://github.com/artemii235/SuperNET/issues/101#issuecomment-419483901). Right now the HyperDex-MM can only be Alice (buyer), and Bob (seller) must run on a server (a dedicated IP) and from a command-line, which seems contrary to the idea of free *exchange* between peers.

{Embed}
https://github.com/artemii235/SuperNET/tree/etomic/mm2src
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003

{Embed}
https://github.com/artemii235/SuperNET/issues/101
[v2] Possible web rtc support. ¬∑ Issue #101 ¬∑ artemii235/SuperNET
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[08-Oct-18 01:26 AM] artemciy_dice#0049
There's also https://github.com/artemii235/SuperNET/issues/157.


[08-Oct-18 01:29 AM] artemciy_dice#0049
I think the primary goal is stability, e.g. running without crashes and memory leaks and delays and failures, and these others are opportunity goals, we're trying to account for them while refactoring things during the port and the porting priority (e.g. what's ported first) is also guided by these secondary goals.


[08-Oct-18 01:46 AM] artemciy_dice#0049
`> Is it ok if i write for Tech Tuesday update that MM2 should be fully compatible with MM1 API as part of the progress of the refactor?`

We're trying to preserve the API compatibility in order to make the MM1 improvements more easily accessible ( cf. https://github.com/artemii235/SuperNET/tree/etomic/mm2src#gradual-rewrite ), but I don't think the compatibility is a goal per se, e.g. we'll be evolving the API if and when it's necessary.

{Embed}
https://github.com/artemii235/SuperNET/tree/etomic/mm2src
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[08-Oct-18 02:31 AM] Mylo#8306
great.  ok - i'll limit my assumptions to what you've linked to and see if i can squeeze something out for tomorrow otherwise next week probably a good time for an update on MM2 development. 
Whatever i summarize i will c+p here for review & approval.

{Reactions}
üëè 

[17-Oct-18 04:30 PM] artemciy_dice#0049
We're starting to work on the NAT traversal this week. The goal of NAT traversal is the ability for users to run Bob from behind a typical home Wi-Fi routing and the like.

To recap, we have two candidates, the tox (https://github.com/tox-rs/tox) and the ZeroTier. The idea now is to evaluate both of them a bit.

Please chime in if you have any input on this.


[18-Oct-18 07:51 AM] lukechilds#2707
That's great to hear


[18-Oct-18 07:52 AM] lukechilds#2707
btw, is mm2.0 100% compatible with mm1?


[18-Oct-18 07:52 AM] lukechilds#2707
sorry, I know I mentioned a while ago about making a HyperDEX build with mm2 bundled but got swamped with other things


[18-Oct-18 07:53 AM] lukechilds#2707
if we have 100% compatibility I can get that done by next week for you


[19-Oct-18 02:52 AM] hyperDEX#6586
@artemciy_dice It would need a way to support multiple MM behind the same natted IP


[19-Oct-18 03:01 AM] artemciy_dice#0049
@lukechilds , yeah, we should be 100% compatible as of now.
Looking forward to having the early adopters MM2 HyperDex version.


[19-Oct-18 03:02 AM] artemciy_dice#0049
@hyperDEX , multiple MMs sharing the same public IP is a given for NAT traversal, but thanks for reminding me!
Perchance we'll have a way to automatically test such a setup.


[20-Oct-18 05:31 AM] artemciy_dice#0049
Interesting graphics,


[20-Oct-18 05:31 AM] artemciy_dice#0049
https://youbroketheinternet.org/img/architecture

{Embed}
https://youbroketheinternet.org/img/architecture
https://images-ext-2.discordapp.net/external/FYPnFNIa0hSolfATXyodKYQlPVnoX1yxtKckzrIzFpE/https/youbroketheinternet.org/img/architecture


[20-Oct-18 08:42 AM] artemciy_dice#0049
"_When we say that GPLv2 and GPLv3 are incompatible, it means there is no legal way to combine code under GPLv2 with code under GPLv3 in a single program. This is because both GPLv2 and GPLv3 are copyleft licenses: each of them says, ‚ÄúIf you include code under this license in a larger program, the larger program must be under this license too.‚Äù There is no way to make them compatible. We could add a GPLv2-compatibility clause to GPLv3, but it wouldn't do the job, because GPLv2 would need a similar clause._" - https://www.gnu.org/licenses/rms-why-gplv3.en.html

MM is GPLv2 and ZeroTier is GPLv3, I wonder if we can/should upgrade?


[20-Oct-18 01:26 PM] artemciy_dice#0049
P.S. I've tried ZeroTier (as `libzt`) and it actually crashes a lot, for me and for other people according to the tracker issues. Wasn't expecting that. Putting ZeroTier aside for now.


[20-Oct-18 02:01 PM] cipi#4502
btw, tor hidden services also work behind NAT, but they are probably too slow


[20-Oct-18 02:42 PM] artemciy_dice#0049
Thanks for the idea, @cipi!

I'm looking for a good and MM2-compatible reusable library, in case we can skip implementing and maintaining the hole punching ourselves. Tor is cool, but it only has a Java library so far ( https://tor.stackexchange.com/questions/329/how-to-set-up-a-tor-hidden-service ), I found no C/C++ ( https://www.reddit.com/r/TOR/comments/7l8k50/is_there_any_cc_library_for_tor/ ) or Rust ( https://trac.torproject.org/projects/tor/ticket/11331 ) libraries that we could use.

Could've been an interesting contender if it were.   D

{Embed}
https://tor.stackexchange.com/questions/329/how-to-set-up-a-tor-hidden-service
How to set up a Tor hidden service?
Seeing that I find the technical side of it extremely interesting, I want to try to set up a Tor hidden service. For this I am following the Torproject instructions. I installed Tor, have it running,
https://images-ext-2.discordapp.net/external/sZKBwWgot5JoNzEOzEid5Z-n-LerKxA0FEzt5EFA4A8/%3Fv%3D5dd36d51c7c3/https/cdn.sstatic.net/Sites/tor/img/apple-touch-icon%402.png

{Embed}
https://www.reddit.com/r/TOR/comments/7l8k50/is_there_any_cc_library_for_tor
r/TOR - Is there any C/C++ library for tor?
7 votes and 8 comments so far on Reddit


[20-Oct-18 03:06 PM] cipi#4502
hmmm, didn't knew that it doesn't have a C or Rust library... i wonder how all the wallets (including BTC and KMD) have implemented support for Tor hidden services... will let you know if i find something... but the probability that tor is too slow for atomic swaps is pretty high, i fear, although it would be a nice feature... at least for the ultra paranoid traders üòÑ


[20-Oct-18 03:22 PM] artemciy_dice#0049
The wallets probably have the Tor running alongside, as a separate application, and routing requests to the wallet HTTP endpoints. This is fine when Tor support is optional, but not so good if we're going to rely on it by default.


[20-Oct-18 03:42 PM] cipi#4502
haha, sure, they do rely on a running tor... sorry, my fault... was a bit confused


[20-Oct-18 04:32 PM] artemciy_dice#0049
It was a great idea, @cipi!
BTW, I've found that I2P has a C++ library ( https://github.com/PurpleI2P/i2pd/tree/openssl/libi2pd ).
Not sure if this particular I2P client participates in the I2P hole punching, but for relay-based networks, Tor and I2P, the punching is not a requirement.
I wonder if using the I2P relay network is something we should consider for MM2 Bob instances working from behind NAT?

{Embed}
https://github.com/PurpleI2P/i2pd/tree/openssl/libi2pd
PurpleI2P/i2pd
üõ° I2P: End-to-End encrypted and anonymous Internet - PurpleI2P/i2pd
https://images-ext-2.discordapp.net/external/3xgK1NpyBLhHT9ZQsdy0bYDO1j4tHI4ciw6bafxSWTI/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/10586309


[20-Oct-18 05:08 PM] artemciy_dice#0049
And would it be a desirable feature for MM2 swaps to run on I2P by default?


[20-Oct-18 05:19 PM] grewalsatinder#9653
I‚Äôd suggest it a user activity feature. Allow user to activate


[20-Oct-18 05:20 PM] grewalsatinder#9653
The network going through multiple routes will make connections slow and can break in between. Resulting incomplete trades.


[20-Oct-18 05:20 PM] grewalsatinder#9653
It shouldn‚Äôt be default activated.


[20-Oct-18 06:23 PM] artemciy_dice#0049
My opinion is that we need to have the message retransmission logic in MM2 regardless of whether the messages are sent via the I2P or the hole-punched p2p. That is, I2P will be slower but no less reliable than p2p UDP.
One can argue that multi-path routing in I2P might actually improve the reliability (if there's a networking problem *between* the Alice and Bob, which in my experience happens rather often, then going by a different route might workaround the networking problem). It remains to be measured, of course.

Then again, it makes sense to prioritize reliability by default, which might mean using both the normal MM1 way of communicating *and* the I2P (in the hopes that one of these channels will eventually work). Turning off the direct MM1 swap communication will then be an option for those who prefer more anonymity. Thanks, @grewalsatinder.


[25-Oct-18 10:06 AM] SHossain#0007
@benohanlon


[25-Oct-18 10:11 AM] benohanlon#7045
I have an idea for agama wallet / barterdex to focus on micro-transactions. So basically there are these tipbots that are so popular and you usually end up with small amounts of crypto. I want to suggest Agama wallet could be a universal wallet that integrates with the tipbots you get and allows you to atomic swap the balances across diff discords / telegrams / social media into one balance. 

- benefit is these small atomic swap orders increase liquidity for barterdex
- we can charge a small fee 0.5% like changelly 
- we can charge the tipbot devs to tap into this tech and it'll increase functionality for their users
- we can offer users a wallet that will across all platforms posb for a premium

{Reactions}
Komodo rum parrot 

[25-Oct-18 01:22 PM] DG#6934
good idea @benohanlon  , atomic swaps through discord makes it more real for users that haven't used barterdex

{Reactions}
yassinheart 

[26-Oct-18 01:31 AM] Mylo#8306
@benohanlon do you want me to write a little "what if" for TT?   The problem atm is the tipbots have all the addresses for say all the discord users (privkey and pubkey).   The transfers in the bot last i looked is like a CEX, it's just a change in a value in a database.  There's no actual transactions.  For instance I will _make it rain_ and then we look on the explorer, no tx exists.   It's not until a withdraw to your agama wallet that the tx happens.


[26-Oct-18 01:35 AM] Mylo#8306
If a user in discord could say "@tipbox registere Rbenlovesmice123456" and the tipbot then actually sends tx out, it would be cool.  next-gen full custody of funds tipbot.
That's cool - but then how would i _make it rain_ ?  my wallet would need to be online/linked to tipbot.   can chat about it in wales.


[26-Oct-18 01:36 AM] Mylo#8306
Maybe with a browser extension wallet and in browser...could be feasible in the future.


[26-Oct-18 04:45 AM] benohanlon#7045
@Mylo this is something i see us selling to tipbot devs so they'd integrate with us


[26-Oct-18 04:46 AM] benohanlon#7045
and then we'd leverage their users


[29-Oct-18 08:11 AM] Mylo#8306
hmmmm ok i re-read it, so the tipbot devs still do everything as is, but give an option to `kmdtip withdraw DGB <myaddress>` not bad.


[30-Oct-18 05:03 AM] artem.pikulin#0794
As far as I remember there were mentions of UTXO coins that use non-default decimals value (not 8). Does someone remember names of these?


[30-Oct-18 05:08 AM] jl777c#5810
peeercoin


[30-Oct-18 05:08 AM] jl777c#5810
peercoin


[30-Oct-18 05:08 AM] jl777c#5810
that is one of the most prominent 6 digits one, dont remember others


[30-Oct-18 05:09 AM] artem.pikulin#0794
Thanks a lot!


[30-Oct-18 05:15 AM] cipi#4502
Emercoin has 6
Bitcoin Diamond has 7


[30-Oct-18 05:16 AM] artem.pikulin#0794
Thanks again üôÇ


[30-Oct-18 08:38 AM] artemciy_dice#0049
In https://docs.komodoplatform.com/barterDEX/barterDEX-API.html#setpassphrase there are hidden parameters, "netid" and "seednode". The "netid" is only handled (in `LP_passphrase_init`) if the MM is started in the Alice (`IAMLP == 0`) mode.
In MM2 we want the client-server model of trades to go away in favor of a peer-to-peer model where any node can trade as a Bob or an Alice.
So I wonder if we can simply remove these Alice-only parts, like that of the changing the "netid" on the go? @SHossain , @lukechilds , @Bryan_Beus , am I right to assume that this hidden parameters ("netid" to "method: passphrase") isn't actively used anywhere?


[30-Oct-18 10:15 AM] artemciy_dice#0049
Documentation PR: https://github.com/KomodoPlatform/Documentation/pull/46 . cc @SHossain .

{Embed}
https://github.com/KomodoPlatform/Documentation/pull/46
Rename setpassphrase to passphrase by ArtemGr ¬∑ Pull Request #46 ...
The real method name here is "passphrase". Let's use it in order to reference the method properly (with https://docs.komodoplatform.com/barterDEX/barterDEX-API.html#passphrase) from t...
https://images-ext-1.discordapp.net/external/gc91fdg3iDxxfwXS9H4o34q0PJAZ-mR4S1XxdwaVkYs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/41847


[30-Oct-18 10:44 AM] SHossain#0007
@artemciy_dice merged

{Reactions}
üôè 

[30-Oct-18 10:44 AM] SHossain#0007
is it a change for old version as well?


[30-Oct-18 10:53 AM] artemciy_dice#0049
Method's name is "passphrase", you can see this from the example mentioned in the docs, the TOC name "setpassphrase" was simply wrong. So yes, this change in documentation is still compatible with MM1.

{Reactions}
üëåüèΩ 

[30-Oct-18 11:05 AM] SHossain#0007
Thanks


[30-Oct-18 08:08 PM] lukechilds#2707
@artemciy_dice we (HyperDEX) have never used the netid parameter. However I believe the BarterDEX GUI has an option for the user to set a netid on login.

It has also been discussed as a way for users to do OTC trades, you agree a random netid with another user, run your Bob on that netid, and then the other will connect to that netid and fill your order.

I believe it was also discussed as a scaling solution, that a single netid may not be able to cope with a huge amount of users, so we could shard the network over multiple netids and have some sort of bridge node linking the orders together across netids.

However I haven't been involved in those discussions, I just remember reading through them. I would definitely be in favour of removing these parts for a purely P2P approach but maybe best to ask James for clarification on that.


[30-Oct-18 09:37 PM] artem.pikulin#0794
I think that we should keep the netid approach at least for a "private" trading purpose. The GUI clients will use netid 0 by default. Not sure about switching netid in runtime, we plan to support running multiple MMs on 1 machine so if someone wants to do a private trade he can just run another instance. It also might be useful if one already running other node on public netid with active orders.


[30-Oct-18 10:54 PM] artemciy_dice#0049
Runtime switching is nasty, if we aren't actively using it then we should definitely refactor it away, simplifying the corresponding networking and MM (re)initialization logic. And yeah, for the OTC trades we can restart the MM with a different "netid", or run a separate MM process for the extra "netid", and in the future it should be technically possible to run several MM instances in the same process as well.


[30-Oct-18 10:58 PM] artemciy_dice#0049
For now, in https://github.com/artemii235/SuperNET/commit/29db3230a710240104f96561e65915030abcfe8e I have removed the undocumented "netid" support from the "passphrase" method. Thanks for all the information. And we should probably check if it breaks the BarterDEX login or not.

{Embed}
https://github.com/artemii235/SuperNET/commit/29db3230a710240104f96561e65915030abcfe8e
Port RPC passphrase ¬∑ artemii235/SuperNET@29db323
https://images-ext-2.discordapp.net/external/pDlCuApmX76fYCqyh5gxhJFMPb4IAHSgUVl-DtEXEjY/%3Fs%3D200%26v%3D4/https/avatars1.githubusercontent.com/u/41847


[30-Oct-18 11:00 PM] lukechilds#2707
Are these the latest releases with the Rust code: https://github.com/artemii235/SuperNET/releases

{Embed}
https://github.com/artemii235/SuperNET/releases
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[30-Oct-18 11:01 PM] lukechilds#2707
or do we need to get those builds from somewhere else?


[30-Oct-18 11:02 PM] artemciy_dice#0049
Luke, check the pinned message. I believe the normal releases are following the non-Rust branch.


[30-Oct-18 11:04 PM] artemciy_dice#0049
http://195.201.0.6/etomic/?C=M;O=D


[30-Oct-18 11:09 PM] lukechilds#2707
oops, sorry missed that


[30-Oct-18 11:09 PM] lukechilds#2707
from the pinned message


[30-Oct-18 11:09 PM] lukechilds#2707
>Available binaries contain a bit of Rust code but these don't work properly yet.


[30-Oct-18 11:10 PM] lukechilds#2707
is that still correct?


[30-Oct-18 11:23 PM] artem.pikulin#0794
These nightly build work, but should not be used in production. It contains Rust code that mostly works sames way as old C code, so you won't notice big difference.  Also we have issues when trying to perform trades on Windows, please note it when testing.


[30-Oct-18 11:24 PM] lukechilds#2707
ok, thanks


[30-Oct-18 11:24 PM] artem.pikulin#0794
Pinned a message.


[30-Oct-18 11:25 PM] artem.pikulin#0794
I will pin nightly builds status updates when we'll have significant changes.


[30-Oct-18 11:26 PM] artem.pikulin#0794
BTW we have one: @artemciy_dice implemented Coingecko API support along with CMC so there's something new to test.


[30-Oct-18 11:27 PM] lukechilds#2707
Nice


[30-Oct-18 11:28 PM] lukechilds#2707
@sindresorhus will be looking into testing mmv2 and getting you some MacOS/Linux HyperDEX builds this week


[30-Oct-18 11:29 PM] artem.pikulin#0794
Thanks! Looking forward to it.


[31-Oct-18 02:05 AM] jl777c#5810
netid is needed


[31-Oct-18 02:05 AM] jl777c#5810
dont refactor it away


[31-Oct-18 02:06 AM] jl777c#5810
maybe it doesnt have to be visible in the gui, but it is part of the defenses. by having so many netids it makes it impractical to ddos, once we declare it is only one netid, then it will be ddosed


[31-Oct-18 02:07 AM] jl777c#5810
i know, it can still be ddossed if we are only using netid 0, but the fact we can change it makes it a "moving target"

{Reactions}
üëç (2) üíØ 

[31-Oct-18 04:23 AM] lukechilds#2707
mmv2 integration here: https://github.com/atomiclabs/hyperdex/pull/563

{Embed}
https://github.com/atomiclabs/hyperdex/pull/563
Marketmaker v2 test by sindresorhus ¬∑ Pull Request #563 ¬∑ atomic...
https://images-ext-1.discordapp.net/external/qIsgfRxmkTHjXzjE8Z_yMWm0BLcbPpxu3RHGeKXegwI/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/170270

{Reactions}
üòã üëèüèΩ (2) üòÄ (2) 

[31-Oct-18 08:27 AM] artemciy_dice#0049
@jl777c , sorry if it wasn't 100% clear, but I was talking about the runtime netid switching, in the "passphrase" method in particular.

`> maybe it doesnt have to be visible in the gui, but it is part of the defenses`

Nothing prevents the GUI from starting MMs with different netids. Switching the netid at runtime, in a woking MM, on the other hand, is looking for trouble.


[31-Oct-18 08:28 AM] jl777c#5810
yes, switching netid on the fly is quite complex and not needed

{Reactions}
rum 

[18-Nov-18 08:20 AM] artemciy_dice#0049
I've been looking for a good distributed networking solution in order for us not to spend time implementing and maintaining our own.
I had two goals in mind: reliable [fallback] communication between Alice and Bob during the swap, and maybe a generic distributed discovery that will allow us in the future to more easily experiment with order matching and such.

Most options had to be discarded as too raw or abandoned or crashing or not having a generic API or unembeddable or not doing any NAT traversal, etc.

But the search was not fully in vain. I've ended up evaluating Arvid Norberg's libtorrent DHT.
1) It's well-maintained, battle-tested and well-designed (and actively refactored even).
2) It has DHT optimizations and improvements implemented that go beyond the basics (cf. https://blog.libtorrent.org/).
3) It's generic (http://www.bittorrent.org/beps/bep_0044.html; https://www.libtorrent.org/reference-Plugins.html).
4) It has a moderate NAT hole punching support.
5) Arvid Norberg worked at ¬µTorrent!   : D
(cf. https://stackoverflow.com/cv/arvidnorberg)
6) It allows us to reuse all those Bittorrent clients out there as a relay network (and their discovery endpoints, cf. https://github.com/artemii235/SuperNET/blob/c2f2b31024bf33707e536de7a20e943a88b6d663/mm2src/common/dht.cc#L23), which might be cool while the number of MM2 deployments is still small.

So we're starting to test this as the distributed networking solution. This week we've managed to link libtorrent into MM2 on Windows, Linux and macOS (in our CIs) and next week we're going to test using the libtorrent DHT as the fallback mechanism for Alice and Bob swap communication.

With design decisions it's often cost-effective to evaluate the risks, so please chime in if you'd like to point out and discuss any!

{Embed}
https://github.com/artemii235/SuperNET/blob/c2f2b31024bf33707e536de7a20e943a88b6d663/mm2src/common/dht.cc
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[20-Nov-18 04:23 AM] artemciy_dice#0049
Internet hosts will sometimes fail to communicate with each other for no apparent reasons. (Peering problems between providers, hardware router failures, etc). I have observed it in the wild now and then, and now I'm seeing it described as "_routing anomalies_" in this paper - http://www.eecs.harvard.edu/~mema/courses/cs264/papers/epost-eurosys2006.pdf - on pages 5 and 6.
The ability to workaround the _routing anomalies_ is something we caught on while discussing I2P, and we hope to have a level of resistance towards them by using the DHT as the alternative communication path.
BTW, the idea is to have Alice and Bob communicate through several paths, DHT being one of them.


[20-Nov-18 05:28 AM] artemciy_dice#0049

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/514431854032453644/unknown.png


[20-Nov-18 05:33 AM] artemciy_dice#0049
---
And here - https://www.cs.helsinki.fi/u/jakangas/MLDHT/ - are some interesting numbers on the supposed size of the Bittorrent DHT network: between 15 and 27 million nodes circa 2013.


[22-Nov-18 02:01 PM] artemciy_dice#0049
Just checked that libtorrent's UPnP and NAT-PMP works with my Wi-Fi router. The 2111 and 2112 port mappings here were created from the MM2 DHT integration test:

{Reactions}
üëç 

[22-Nov-18 02:01 PM] artemciy_dice#0049

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/515285842881937408/unknown.png


[06-Dec-18 02:51 PM] artemciy_dice#0049
So with the latest commit in the mm2-dice branch we're now successfully using the Bittorrent DHT during a part of the SWAP.

This communication is NAT and firewall proof. In fact, we won't need a direct line of communication between Alice and Bob anymore. There might be a [temporary] internet failure that prevents the two from seeing each other (a "routing anomaly") and they'll still talk via the DHT.

{Reactions}
üî• (6) 

[06-Dec-18 11:48 PM] jl777c#5810
that is great!


[06-Dec-18 11:49 PM] jl777c#5810
the alice <-> bob network link was always a very tricky issue, especially between two home nodes, both behind NAT. I guess with bittorrent, even that problem case will work!


[07-Dec-18 12:50 AM] artemciy_dice#0049
Right! NAT hole punching, even if well-implemented, is unreliable. I remember one source mentioning 7 and another 10 percent of failures to establish connectivity (that is, in a statistically large enough user base around 7-10 percent of clients will not be able to punch a hole through their NATs).


[07-Dec-18 02:57 AM] grewalsatinder#9653
@artemciy_dice great work mate!!! üëè üëè üëè üëå :Komodo: üòÉ

{Reactions}
üòÉ 

[07-Dec-18 05:07 PM] phideas#8309
Not sure if relevant, but maid safe recently did a pretty successful test of their crust P2P networking lib
https://safenetforum.org/t/safe-network-dev-update-november-8-2018/26197
Maybe guys you could take a look if this tech could be used for mm. they are developing everything open source afaik. Not sure how f it is stable enough though. Here is a more detailed overview of crust from the developer
"Crust has a very clear responsibility - reliable peer-to-peer connections. It‚Äôs a generic networking library that essentially tries to connect two nodes/peers/computers directly without an intermediate server."
https://safenetforum.org/t/can-someone-please-explain-crust-vs-cjdns/21591

{Embed}
https://safenetforum.org/t/safe-network-dev-update-november-8-2018/26197
SAFE Network Dev Update - November 8, 2018
Summary Here are some of the main things to highlight this week:   We concluded v2 of our Crust Test yesterday. As of today, we‚Äôve launched an email subscriber list. Sign up (using the form on the footer of the safenetwork.tech website) to receive the latest news on all SAF...
https://images-ext-2.discordapp.net/external/tUUzH-lXEwpTzNqK_0eBaJJjUYVa6SvLi7tQ4hw1btM/https/discourse-cdn-sjc1.com/business5/uploads/safenetwork/optimized/3X/e/a/ea31cfc196c85c396bb89666a5c3e2e0900cca22_1_690x388.jpeg

{Embed}
https://safenetforum.org/t/can-someone-please-explain-crust-vs-cjdns/21591
Can someone please explain Crust vs. CJDNS?
As in the title, can someone (maybe @Grizmoblust? ) please explain the differences between the SAFE Crust and/or Routing Libraries and other projects like CJDNS? Is Crust a CJDNS replacement?     From : (Setting up a public AP for a SAFE meshnet)
https://images-ext-2.discordapp.net/external/5D6LliGZmJMLMoVUSlzRodefDnsXOWIveQ5M-53S7fI/https/safenetforum.org/uploads/safenetwork/original/3X/5/b/5b5e86ec3d61a85ab1cd8ddec74362f8fe3fc1ff.png


[08-Dec-18 02:31 AM] artemciy_dice#0049
@phideas, thanks, that's a nice idea and indeed I've looked into `crust` some. (A few years back I've spent a couple of days trying to make it work, and after that I've monitored what's going on with `crust` and noticed some negative mentions of it from other sources as well). It's rather overdesigned and user-unfriendly, unfortunately. For comparison, recently I did some diving into `libtorrent` C++ code to trace how the DHT lookups work and my experience reading the code was 9/10. With `crust` it was 2/10.

For a modern pure Rust implementation of peer-to-peer we're looking at https://libp2p.io/. When `libp2p` matures, the plan is to add it as an extra channel of communication possible between the MM2 peers and it will net us the ability to p2p-communicate with browser-based implementations of MM2, if needs be.
(`libtorrent`-based channel will likely remain even after that, for extra reliability and giving us the Bittorrent DHT bootstrapping and the multi-million network of peers).

{Embed}
https://libp2p.io//
libp2p - A modular network stack
Run your network applications free from runtime and address services, independently of their location.


[10-Dec-18 01:06 AM] Mylo#8306
üëç üëç


[10-Dec-18 11:00 AM] phideas#8309
thanks for your response @artemciy_dice i was trying hard this year to use mm (barterdex, hyperdex) but it simply didn't worked out for me. i also tried to setup a bob instance on a vps but couldn't get atomic swap with my home connection. i suspect it is caused by networking and nat. if we talk p2p it should work reliably between 2 home connections. and most home connections are behind nat or double, even triple nat. bc ppl nowadays are using cheap routers to increase their wireless coverage at home.
looking forward to mm2, i hope it will be ready to test soon.


[10-Dec-18 11:08 AM] artemciy_dice#0049
@phideas , indeed, NAT traversal and better logging is what we're currently focusing on. Will try to ping you once we have the fully NAT-traversing swaps.

{Reactions}
üëç 

[10-Dec-18 06:56 PM] Mylo#8306
Can I post BitTorrent DHT into tech Tuesday?


[10-Dec-18 06:56 PM] Mylo#8306
Mm2 update


[10-Dec-18 08:49 PM] artem.pikulin#0794
@Mylo Hi, it might be a bit too early because atomic swap code is not fully refactored to use DHT.  You can post the update, but it should be mentioned that it's work in progress and the DHT based swap will be available for testing later.


[10-Dec-18 09:06 PM] Mylo#8306
OK thanks @artem.pikulin for clarification, good stuff üëç


[17-Dec-18 10:28 PM] artemciy_dice#0049
Support for the new CoinMarketCap API has landed in MM2 (issue 208).
CoinGecko remains the default.

{Reactions}
üëç (5) üòÉ (2) 

[14-Jan-19 10:15 PM] ca333#0333
@artem.pikulin - ok lets use this channel for the time being and until the prototype is ready. I will look into the MM2 API today and immediately initiate the GUI prototyping. Please keep in mind that its really just gonna be a fast/ugly (meteorJS) GUI allowing our testers and community to actively test MM2 without CLI - based on the results we  (@naezith , @0x88 and my humble self) will port the logic into a native QT GUI. We might ping you today during the initial setup for ?'s.


[14-Jan-19 10:35 PM] artem.pikulin#0794
@ca333 thanks a lot! `namhoang28` contacted me yesterday, he's actually trying to integrate MM2 in AtomicDEX app, we solved a couple of issues yesterday. Maybe we might not build the ugly GUI from scratch and just use the AtomicDEX app?


[14-Jan-19 10:39 PM] ca333#0333
atomicDEX wont allow a user to really use the API in a "free manner" - so atomicDEX will basically call various funcs() in the background that the user wont see - its bascially a "shapeshift like" GUI for noobs & grannies. I doubt that it will deliver satisfying testing results. 

The planned prototype would basically map the user-inputs straight to MM2 API calls which should give us proper testing results.


[14-Jan-19 10:45 PM] artem.pikulin#0794
What do you think about idea of adding the `advanced` mode to it? It might be more efficient using of dev resourses, rather than wasting time on developing the ugly prototype (the word `ugly` even make us want to get rid of it in the future) we can benefit from adding additional functionality to existing app.


[14-Jan-19 10:45 PM] artem.pikulin#0794
And also it will be useful to have a mobile version of it including the brand new MM2.


[14-Jan-19 10:47 PM] ca333#0333
the ugly GUI wont be a huge project - its literally a week worth of time. 

namhoang28  has been working on AtomicDEX for about 6 months... so you might see the difficulties in here. 
But i am open for any path - if time isn't a factor then we can of course include extended funcs() for testing into AtomicDEX.


[14-Jan-19 10:49 PM] artem.pikulin#0794
What if the dev that is expected to work on ugly GUI will work on AtomicDEX for a while?


[14-Jan-19 10:50 PM] artem.pikulin#0794
It'll speed things up.


[14-Jan-19 10:50 PM] ca333#0333
We dont want to to invest any further time into nodeJS based and npm ecosys utlizing software due to serious security concerns.

{Reactions}
üëç üíØ 

[14-Jan-19 10:50 PM] artem.pikulin#0794
Ok I see.


[14-Jan-19 10:50 PM] ca333#0333
Thats why the decision has been made to do a solid MM GUI


[14-Jan-19 10:53 PM] ca333#0333
we re trying to move away from that tech stack wherever possible. 
For big projects that we have invested a lot of resources into - like Agama for example we re following a path in which we fork all dependencies to our own repositories to ensure nothing like https://www.trendmicro.com/vinfo/dk/security/news/cybercrime-and-digital-threats/hacker-infects-node-js-package-to-steal-from-bitcoin-wallets happens to us. (ps - there have been more cases like this)

{Embed}
https://www.trendmicro.com/vinfo/dk/security/news/cybercrime-and-digital-threats/hacker-infects-node-js-package-to-steal-from-bitcoin-wallets
Hacker Infects Node.js Package to Steal from Bitcoin Wallets - Sec...
A Node.js module with nearly two million downloads a week was compromised after the library was injected with malicious code programmed to steal bitcoins in wallet apps.
https://images-ext-1.discordapp.net/external/uTLiUJvqmRJ4YDrr2QP1O1iJi_jAFts_fI_UvpgANp4/https/documents.trendmicro.com/images/TEx/articles/nodejs-steal-bitcoin-wallets.jpg


[15-Jan-19 01:38 AM] grewalsatinder#9653
exactly the reason I moved away from node.js


[15-Jan-19 01:39 AM] grewalsatinder#9653
also thinking of learning QT after some good practice done with golang, so that I can also do more work with QT+golang instead of golang + react.js


[15-Jan-19 02:23 AM] SHossain#0007
QT sounds awesome


[15-Jan-19 09:32 PM] Mylo#8306
QT been around for ages.   lots of support for it in places like cars etc.


[15-Jan-19 11:02 PM] artemciy_dice#0049
Any feelings on Flutter?


[16-Jan-19 12:04 AM] Mylo#8306
On my list since last year to look at.  Looks impressive but locking into dartlang is a tough one for such a thing


[16-Jan-19 02:02 AM] artemciy_dice#0049
I'm still on the lookout for a good cross-platform env. Have tried several and wasn't happy. Going to take Flutter for a spin. It has hot reload, isn't falling apart like React Native, attracts good vibe and has FFI plans.


[16-Jan-19 02:09 AM] grewalsatinder#9653
what is the full form of FFI ?


[16-Jan-19 02:11 AM] artemciy_dice#0049
Foreign Function Interface, like when we need to use the C/Rust code (say, MarketMaker) from the GUI.


[16-Jan-19 02:13 AM] grewalsatinder#9653
clear üëç


[16-Jan-19 02:14 AM] artemciy_dice#0049
This is often handled in a platform-specific manner, like using JNI on Android and a separate linking on iOS, and this also the case with Flutter at present, but they're working on something unified which long-term should be a plus ( https://github.com/flutter/flutter/issues/7053#issuecomment-302952169 ).

{Embed}
https://github.com/flutter/flutter/issues/7053
Support integrating with C/C++ in plugin framework ¬∑ Issue #7053 ...
It would be nice to have an example of calling C/C++ code, or at least how to build native code along with a Flutter app. This may purely a Gradle question, but its not clear to someone that's ...
https://images-ext-2.discordapp.net/external/2rG3HutN9XAFw1Z2vEn8EGIlpNy_YALOIKffMMVw3aA/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/1335296


[16-Jan-19 02:20 AM] grewalsatinder#9653
I see flutter is for mobile platforms. is it also for desktop? ü§î


[16-Jan-19 02:20 AM] grewalsatinder#9653
doesn't look like


[16-Jan-19 02:21 AM] artemciy_dice#0049
Not at present, https://flutter.io/docs/resources/faq#does-flutter-run-on-the-web
Should be possible to run it in embedded browser in the future (or simply in a browser). ( https://medium.com/flutter-io/hummingbird-building-flutter-for-the-web-e687c2a023a8 )

{Embed}
https://flutter.io/docs/resources/faq
FAQ
Frequently asked questions and answers.
https://images-ext-2.discordapp.net/external/WI9mpnbxgkUKY-2yQ3hUQo6HwhAeuB-gt6tVtKPr1Mk/https/flutter.io/images/flutter-logo-sharing.png

{Embed}
https://medium.com/flutter-io/hummingbird-building-flutter-for-the-web-e687c2a023a8
Hummingbird: Building Flutter for the Web ‚Äì Flutter ‚Äì Medium
At Flutter Live today, we announced that we are experimenting with running Flutter on the Web. In this post, we describe how we are‚Ä¶
https://images-ext-1.discordapp.net/external/oitw_zVf0CzqEEFAZIQkhpaixGTpTi03kQ0s_xTU3U4/https/cdn-images-1.medium.com/max/1200/0%2AgD64Y8ECWBBuSZrx

{Reactions}
üÜí (2) 

[16-Jan-19 02:21 AM] grewalsatinder#9653
I'd like to know good options or alternatives for desktop/mobile UI apps.
for core language I want to use Go, and for UI app, so far I know QT as alternative to Js.


[16-Jan-19 02:22 AM] grewalsatinder#9653
there's already a framework/lib which allows making Go+QT apps


[17-Jan-19 12:41 AM] Mylo#8306
i had a look at dart at lunch.   i'm quite keen in a few more weeks i think i'll lay some ground work out.

{Reactions}
yassinheart 

[28-Jan-19 10:32 AM] siu#3920
any tests i can do to mm2?

{Reactions}
‚òù 

[30-Jan-19 10:08 AM] SHossain#0007
single swaps are working very nice


[30-Jan-19 10:08 AM] SHossain#0007
multiple swaps are the ones having issue on my end


[30-Jan-19 09:52 PM] artem.pikulin#0794 (pinned)

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/540409104641032223/MM2_QA_test_documentation_v0.2.pdf


[30-Jan-19 09:58 PM] artem.pikulin#0794 (pinned)
@MM2 community tester , hi! Welcome to mm2 channel! Please check the https://docs.google.com/spreadsheets/d/18R2oqFU0eAjbm3_p2_VH1QobkMVPeNlpuo7ZMocnkf8/edit#gid=0 spreadsheet. If you're able to test the OS from list please let me know, the first priority is to test the case that nobody tests yet, but it's also fine if several people work on same OS.  Please also check document above, it describes the steps required to build and test MM2. It's not mandatory to always build it from source, every MM2 commit is automatically compiled and uploaded to nightly server: http://195.201.0.6/mm2/. It's also very important to test these binaries on different environments to understand what preparation steps should be done to launch the MM2 on non-development machine. If you have any questions please let me know, I'll be glad to help.

{Embed}
https://docs.google.com/spreadsheets/d/18R2oqFU0eAjbm3_p2_VH1QobkMVPeNlpuo7ZMocnkf8/edit
MM2 test plan
–õ–∏—Å—Ç1

Built from source,Prebuilt nightly binary,Annotation (cells contain usernames of testers),Test failed,Test passed,Test in progress
Windows 10
Windows 8
Windows 7
MacOS Mojave
MacOS High Sierra 
MacOS Sierra
Ubuntu server
Ubuntu desktop 18.04,Shossain
Ubuntu desktop...
https://images-ext-2.discordapp.net/external/Mq4krxn0HIBXtPYYUCH5ZBpwLFd93FnuJkNgn6Gq6Sk/https/lh5.googleusercontent.com/KZ6IzbVzdFLOqzc4k4xk1laBJRXCi0xyCg4S7faIC7pHib2KbwZIReugYkTDBGZ8O03L_g%3Dw1200-h630-p


[30-Jan-19 10:41 PM] artem.pikulin#0794
Pinned a message.


[30-Jan-19 10:41 PM] artem.pikulin#0794
Pinned a message.


[31-Jan-19 12:06 AM] artem.pikulin#0794
@jorian Welcome to MM2 group! Please check pinned messages and let me know if you have any questions.


[31-Jan-19 12:07 AM] jorian#4555
üëç


[31-Jan-19 12:22 AM] jorian#4555
@cipi maintained a super useful coins spread sheet. saw some stuff being discussed about 6 digit coins etc


[31-Jan-19 12:24 AM] jorian#4555 (pinned)
https://docs.google.com/spreadsheets/d/1ezXr4DBctFy6o4t-C_jCa4BpKBfXN4nCqxcCkx6hl9g/edit#gid=232944181

{Embed}
https://docs.google.com/spreadsheets/d/1ezXr4DBctFy6o4t-C_jCa4BpKBfXN4nCqxcCkx6hl9g/edit
250Coins4BarterDEX
Coins

 ,Name,Source,Tester,Status,Completed,Symbol,Name,rpcport,pubtype,taddr,p2shtype,wiftype,txfee,active,Json OP,Notes,Json Output:
1,Bitcoin,n41r0j,Completed,24/07/2017,BTC,bitcoin,8332,0,5,128,0,{\"coin\":\"BTC\", \"name\": \"bitcoin\", \"rpcport\":8332,\"pubtype\":0, \...
https://images-ext-1.discordapp.net/external/gE5U8cGZYV3Hke78GUg1EeeGoZNjLqAYmGvUzY7ROsk/https/lh4.googleusercontent.com/FucfLWRICP1gq8256cfoCniulQO9tMNAgqLcXx2VoSJPn7H9OLMFADdfsTsJbuoszACECQ%3Dw1200-h630-p


[31-Jan-19 12:24 AM] jorian#4555
seems he still updates it


[31-Jan-19 12:27 AM] artem.pikulin#0794
Pinned a message.


[31-Jan-19 12:28 AM] artem.pikulin#0794
@jorian MM2 is `able` to support coins with 6 decimals or maybe even less. But we will need to tweak it a bit for it. The `current` goal is to test that MM2 at least can be built/started on different environments and then perform a test BEER/PIZZA swap. I will note that such coins table exists, didn't know about it. We will surely rely on it later when we consider MM2 safe to trade `real` market coins. Thanks a lot!


[31-Jan-19 02:05 AM] artem.pikulin#0794
@bartwr Welcome to MM2 group! Please check pinned messages and let me know if you have any questions.

{Reactions}
Komodo 

[31-Jan-19 04:24 AM] artem.pikulin#0794
@ca333 @siu let's continue here please.

{Reactions}
üëç 

[31-Jan-19 04:25 AM] siu#3920
```31 12:25:33, mm2:187] BarterDEX MarketMaker UNKNOWN
RPCport.0 remoteport.-1, nanoports 47762 47772 47782
31 12:25:33, lp_native_dex:1558] showwif.0 version: UNKNOWN 2455984605
31 12:25:33, lp_native_dex:1701] error binding to (tcp://25.54.129.99:47772).0
31 12:25:33, lp_native_dex:1709] >>>>>>>>> myipaddr.(tcp://25.54.129.99:47772) pubsock.-1
bind to tcp://25.54.129.99:47762 error for tcp://25.54.129.99:47762: Cannot assign requested address

```


[31-Jan-19 04:26 AM] siu#3920
after adding "myipaddr"


[31-Jan-19 04:28 AM] artem.pikulin#0794
@SHossain could you please pull and rebuild to check if you have same issue?


[31-Jan-19 04:28 AM] artem.pikulin#0794
Something strange is going on.


[31-Jan-19 04:28 AM] SHossain#0007
sure


[31-Jan-19 04:28 AM] artem.pikulin#0794
@siu Please try to set "myipaddr":"127.0.0.1" for now.


[31-Jan-19 04:28 AM] siu#3920
ok


[31-Jan-19 04:28 AM] SHossain#0007
my issue starts when i issue multiple swaps one after another


[31-Jan-19 04:29 AM] siu#3920
@artem.pikulin that did it


[31-Jan-19 04:29 AM] siu#3920
i got it running


[31-Jan-19 04:29 AM] ca333#0333
@siu - plz can you check it with 10.0.0.13


[31-Jan-19 04:29 AM] ca333#0333
i just want to analyse your router/accesspoint behaviour


[31-Jan-19 04:30 AM] ca333#0333
maybe theres a straight forwarder


[31-Jan-19 04:30 AM] siu#3920
that worked too


[31-Jan-19 04:30 AM] ca333#0333
ok - expected that.


[31-Jan-19 04:31 AM] ca333#0333
@artem.pikulin so we can just bind to the local NICs IP which is assigned by his router IF client/node/mm2 is running in subnt.


[31-Jan-19 04:31 AM] artem.pikulin#0794
@ca333 I'm able to reproduce same on my PC.


[31-Jan-19 04:31 AM] ca333#0333
same here. but not server.


[31-Jan-19 04:31 AM] ca333#0333
mac in homenetwork (in subnet)


[31-Jan-19 04:31 AM] ca333#0333
if i use computer with static IP no problems


[31-Jan-19 04:31 AM] artem.pikulin#0794
I had "myipaddr" file that is also used by MM2 and it had "127.0.0.1".


[31-Jan-19 04:32 AM] artem.pikulin#0794
Ok, it's caused by recent changes, the temporary workaround is "myipaddr":"127.0.0.1".

{Reactions}
üëç (2) 

[31-Jan-19 04:55 AM] siu#3920
All swaps have finished successfully so far


[31-Jan-19 04:55 AM] siu#3920
can i set mm2 as LP?


[31-Jan-19 04:55 AM] siu#3920
i want to try it with coqui


[31-Jan-19 04:57 AM] siu#3920
ahh, i should have not said that... i broke it üòÇ


[31-Jan-19 04:57 AM] siu#3920
```1 12:56:30, lp_ordermatch:782] Swap finished with error (-1006, "!send_taker_payment: jsonrpc_client:66] Rpc request JsonRpcRequest { jsonrpc: \"2.0\", id: \"140\", method: \"blockchain.transaction.broadcast\", params: [String(\"0400008085202f89026e2b3c7b81db2d6c894ea2a1b7b687825b2c4e9b0027378b1c7f86f4190d805b010000006a4730440220587c73da0b9c2a4d05d082a52bf0fadbfc5d7a3fa7e49c9c50f69e31028b4b8b02203e0ed5d5404966701036c22dedacad62863a43bc71755528a20f6263d6b54c3c0121025aa4e43447e4a7b8db856a7e75e8912e60232992a6f837078d92d3f2da27be5cffffffff6e2b3c7b81db2d6c894ea2a1b7b687825b2c4e9b0027378b1c7f86f4190d805b010000006a4730440220587c73da0b9c2a4d05d082a52bf0fadbfc5d7a3fa7e49c9c50f69e31028b4b8b02203e0ed5d5404966701036c22dedacad62863a43bc71755528a20f6263d6b54c3c0121025aa4e43447e4a7b8db856a7e75e8912e60232992a6f837078d92d3f2da27be5cffffffff02382bf6050000000017a91469d4dd239c5e6a4c6e47fdccc9b3971c530ef426876a746b04000000001976a914125dc3335fbe5ac697492d168181dff8e74dd39588ac00000000000000000000000000000000000000\")] } failed with error, response: JsonRpcResponse { jsonrpc: \"2.0\", id: \"140\", result: Null, error: 
```


[31-Jan-19 04:57 AM] siu#3920
```Object({\"code\": Number(1), \"message\": String(\"the transaction was rejected by network rules.\\n\\n16: bad-txns-inputs-duplicate\\n[0400008085202f89026e2b3c7b81db2d6c894ea2a1b7b687825b2c4e9b0027378b1c7f86f4190d805b010000006a4730440220587c73da0b9c2a4d05d082a52bf0fadbfc5d7a3fa7e49c9c50f69e31028b4b8b02203e0ed5d5404966701036c22dedacad62863a43bc71755528a20f6263d6b54c3c0121025aa4e43447e4a7b8db856a7e75e8912e60232992a6f837078d92d3f2da27be5cffffffff6e2b3c7b81db2d6c894ea2a1b7b687825b2c4e9b0027378b1c7f86f4190d805b010000006a4730440220587c73da0b9c2a4d05d082a52bf0fadbfc5d7a3fa7e49c9c50f69e31028b4b8b02203e0ed5d5404966701036c22dedacad62863a43bc71755528a20f6263d6b54c3c0121025aa4e43447e4a7b8db856a7e75e8912e60232992a6f837078d92d3f2da27be5cffffffff02382bf6050000000017a91469d4dd239c5e6a4c6e47fdccc9b3971c530ef426876a746b04000000001976a914125dc3335fbe5ac697492d168181dff8e74dd39588ac00000000000000000000000000000000000000]\")}) }")```


[31-Jan-19 04:57 AM] siu#3920
@artem.pikulin


[31-Jan-19 04:58 AM] artem.pikulin#0794
@siu https://github.com/artemii235/SuperNET/issues/269, already known, Electrum seems to return duplicated UTXOs.

{Embed}
https://github.com/artemii235/SuperNET/issues/269,
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[31-Jan-19 04:59 AM] siu#3920
ok, cool


[31-Jan-19 04:59 AM] siu#3920
its the "multiple swaps" error i guess


[31-Jan-19 05:00 AM] artem.pikulin#0794
@siu Yes, I think that Electrum can return duplicates when unspent is just confirmed, so it appears as confirmed and not removed from mempool index yet.


[31-Jan-19 05:00 AM] siu#3920
ok


[31-Jan-19 05:11 AM] SHossain#0007
@artem.pikulin @ca333 i have an issue with latest version
```
31 13:03:38, mm2:187] BarterDEX MarketMaker UNKNOWN
RPCport.0 remoteport.-1, nanoports 47762 47772 47782
31 13:03:38, lp_native_dex:1558] showwif.0 version: UNKNOWN 2455984605
31 13:03:38, lp_native_dex:1648] lp_init] Trying to fetch the real IP from 'http://checkip.amazonaws.com/' ...
31 13:03:38, lp_native_dex:1701] error binding to (tcp://myip:47772).0
31 13:03:38, lp_native_dex:1709] >>>>>>>>> myipaddr.(tcp://myip:47772) pubsock.-1
bind to tcp://myip:47762 error for tcp://myip:47762: Cannot assign requested address
```


[31-Jan-19 05:11 AM] SHossain#0007
replaced public ip with `myip`


[31-Jan-19 05:16 AM] SHossain#0007
adding myipaddr


[31-Jan-19 05:16 AM] artem.pikulin#0794
`Ok, it's caused by recent changes, the temporary workaround is "myipaddr":"127.0.0.1"` - please use valid ip addr and not text `myip`.


[31-Jan-19 05:16 AM] SHossain#0007
to 127.0.0.1


[31-Jan-19 05:17 AM] SHossain#0007
using ^^ working


[31-Jan-19 05:18 AM] SHossain#0007
only from my output i removed my external ip


[31-Jan-19 05:18 AM] SHossain#0007
it was real ip there


[31-Jan-19 05:18 AM] SHossain#0007
first order started


[31-Jan-19 05:23 AM] SHossain#0007
first order completed successfully


[31-Jan-19 05:23 AM] SHossain#0007
issued 2nd one


[31-Jan-19 05:23 AM] SHossain#0007
2nd one didn't go through


[31-Jan-19 05:24 AM] SHossain#0007
```
¬∑ 2019-01-31 13:21:17 +0000 [swap] Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
31 13:21:17, lp_ordermatch:781] Swap finished successfully
31 13:22:55, lp_ordermatch:601] Alice max price: 1.001
time expired for Alice_request
```


[31-Jan-19 05:24 AM] SHossain#0007
```
{
  "bids": [],
  "numbids": 0,
  "biddepth": 0,
  "asks": [],
  "numasks": 0,
  "askdepth": 0,
  "base": "BEER",
  "rel": "PIZZA",
  "timestamp": 1548941069,
  "netid": 9999
}
```


[31-Jan-19 05:24 AM] SHossain#0007
orderbook disappeared for me


[31-Jan-19 05:29 AM] SHossain#0007
restarting mm2 brings back orderbook and order is going through


[31-Jan-19 05:32 AM] artem.pikulin#0794
@SHossain Your nodes is getting disconnected for some reason, we will be able to troubleshoot it when MM2 is completely switched from nanomsg to Libtorrent.


[31-Jan-19 05:34 AM] SHossain#0007
cool


[31-Jan-19 05:34 AM] SHossain#0007
i'll setup a server tomorrow for testing


[31-Jan-19 05:35 AM] SHossain#0007
@artem.pikulin is native mode for coins already supported


[31-Jan-19 05:36 AM] artem.pikulin#0794
@SHossain, yes, as it was told before the crash you experienced was not related to native or electrum mode, it was caused by nanomsg.

{Reactions}
üëçüèΩ 

[31-Jan-19 05:41 AM] cipi#4502
is it planned to replace nanomsg entirely with DHT? I am asking because there is a new nanomsg: https://github.com/nanomsg/nng

{Embed}
https://github.com/nanomsg/nng
nanomsg/nng
nanomsg-next-generation -- light-weight brokerless messaging - nanomsg/nng
https://images-ext-2.discordapp.net/external/S-HRo1nu7ezIci_751HeGA1wPiul4pU_e9fVI2lJfa4/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/5398713


[31-Jan-19 05:42 AM] artem.pikulin#0794
@cipi Yes, we plan to remove it entirely, we don't plan to use `nng` also.


[31-Jan-19 05:42 AM] cipi#4502
ok, cool


[31-Jan-19 05:56 AM] artem.pikulin#0794
MM2 branch is updated, change log:
1. MM2 will make 3 attempts to get a transaction from RPC upon validation, sometimes it could receive transaction info earlier than it reaches local daemon (https://github.com/artemii235/SuperNET/issues/271)
2. Electrum utxo duplicates should be removed (https://github.com/artemii235/SuperNET/issues/269)
3. Electrum now validates that some data was received during last 15 seconds, if not, it'll forcefully reconnect. (https://github.com/artemii235/SuperNET/issues/267). It's required because TCP connection can actually stay alive if you even disconnect the network cable. Ping interval was reduced to 10 seconds so if we don't get any data from Electrum server for 15 seconds there's surely something wrong.

{Embed}
https://github.com/artemii235/SuperNET/issues/271)
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003

{Embed}
https://github.com/artemii235/SuperNET/issues/269)
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003

{Reactions}
üëç (2) 

[31-Jan-19 05:57 AM] artem.pikulin#0794
MM2 seednode is updated, please also update your nodes and try to test concurrent swaps in Electrum mode, it should be more reliable now.


[31-Jan-19 06:04 AM] artem.pikulin#0794
I'm going offline now, please leave your reports here, I'll check and respond tomorrow.


[31-Jan-19 07:05 AM] SHossain#0007
compiling latest now


[31-Jan-19 07:11 AM] artemciy_dice#0049
@cipi, Nng is like replacing a pen with a better pen. It might be a better pen, but still far from being a video cam. In other words, it solves none of the problems that the libtorrent DHT solves for us.
We've been thinking on supporting alternative networking libraries, but more in the way of https://libp2p.io/ (when it matures).
Compatibility with the browser-based peer-to-peer networks is of particular interest. Besides libp2p there's also webtorrent in that space. We also have a chance of this gap being bridged with https://github.com/arvidn/libtorrent/issues/223.

{Embed}
https://libp2p.io/
libp2p - A modular network stack
Run your network applications free from runtime and address services, independently of their location.


[31-Jan-19 07:25 AM] SHossain#0007
@artemciy_dice @artem.pikulin i experienced error on the 2nd swap with latest source. full console log here https://gist.github.com/himu007/d46116d8a7dc583082f2734213d5ed81

{Embed}
https://gist.github.com/himu007/d46116d8a7dc583082f2734213d5ed81
mm2-latest-err-log
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[31-Jan-19 07:26 AM] SHossain#0007
```
31 15:22:39, rpc_clients:717] V4(195.201.83.86:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
31 15:25:50, rpc_clients:691] V4(195.201.12.150:10024) Didn't receive any data since 1548948333. Shutting down the connection.
31 15:25:53, utxo:965] Electrum servers ["electrum1.cipig.net:10024", "electrum2.cipig.net:10024", "electrum3.cipig.net:10024"] ping error "rpc_clients:861] \"rpc_clients:845] rpc_clients:819] future timed out\""
31 15:25:53, rpc_clients:717] V4(195.201.12.150:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
31 15:25:56, rpc_clients:691] V4(195.201.81.113:10024) Didn't receive any data since 1548948333. Shutting down the connection.
31 15:25:59, rpc_clients:691] V4(195.201.83.86:10024) Didn't receive any data since 1548948333. Shutting down the connection.
```


[31-Jan-19 07:26 AM] SHossain#0007
getting these continuously printed in mm2 console


[31-Jan-19 07:29 AM] artem.pikulin#0794
@SHossain looks like electrum connections are continously dropped. @cipi is it possible to see any useful information in server logs?


[31-Jan-19 07:29 AM] artem.pikulin#0794
@SHossain will restart help?


[31-Jan-19 07:31 AM] SHossain#0007
testing that


[31-Jan-19 07:31 AM] SHossain#0007
restart helps usually


[31-Jan-19 07:33 AM] SHossain#0007
after restart first `buy` order didn't succeed


[31-Jan-19 07:33 AM] SHossain#0007
```
31 15:31:35, rpc:335] >>>>>>>>>> DEX stats 127.0.0.1:7783 DEX stats API enabled at unixtime.1548948695 <<<<<<<<<
31 15:31:35, peers:986] external_ip_alert: 82.24.140.124
New priority.0 max_Reserved_msgs.1
New priority.1 max_Reserved_msgs.1
found RPCPORT.8923
31 15:31:47, lp_coins:796] ticker = "BEER", method = Some("electrum"), block_count = 56315
found RPCPORT.11608
31 15:31:47, lp_coins:796] ticker = "PIZZA", method = Some("electrum"), block_count = 47539
¬∑ 2019-01-31 15:31:51 +0000 [dht-boot] DHT bootstrap ... Done.
start remote port
missing field.(maxprice) add to MM_fields[]
missing field.(maxprice) add to MM_fields[]
missing field.(maxprice) add to MM_fields[]
31 15:31:57, lp_ordermatch:601] Alice max price: 1.001
connected to push.(tcp://10.0.0.13:7793) pushsock.6 valid.1  | connected to sub.(tcp://10.0.0.13:7803) subsock.7 valid.1 numactive.2
_LPaddpeer 10.0.0.13 -> numpeers.3 mypubsock.0 other.(1)
31 15:32:11, peers:1154] DHT state saved to "/home/alien/.mm2/lt-dht"
set pubkey for 195.201.116.176 <- 5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12, pairsock.-1
time expired for Alice_request
```


[31-Jan-19 07:33 AM] SHossain#0007
2nd one starting


[31-Jan-19 07:34 AM] SHossain#0007
```
>>>>>>>>>> received quote BEER/PIZZA 0.99081718
31 15:33:40, lp_ordermatch:1158] aliceid.857816075 got new bestprice 0.9908171792918853 dynamictrust -1.00947978 (unconf 0) slowresponse.0
31 15:33:40, lp_ordermatch:601] Alice max price: 1.001
31 15:33:42, lp_ordermatch:1225] send LP_connect aliceid.857816075 0.9908171792918853
```
and waiting


[31-Jan-19 07:34 AM] artem.pikulin#0794
@SHossain please ping the MM2 node and electrum servers when you are testing MM2.


[31-Jan-19 07:34 AM] cipi#4502
i can't see anything useful in the logs... and the monitoring doesn't show me that they are unreachable...
checked the monitoring for the last couple of weeks and the last time i got an error with the connection was on 14.01.2019... and it can also be the monitoring VPS itself, which is not the best VPS you can get


[31-Jan-19 07:36 AM] artem.pikulin#0794
@SHossain are you using Wi-Fi or ethernet? What router do you have? What network bandwidth does your provider offer?


[31-Jan-19 07:37 AM] SHossain#0007
i am using Ethernet i guess it's a DSL router with 120Mbps fiber optic connection


[31-Jan-19 07:37 AM] artem.pikulin#0794
@SHossain please also provide output of `ulimit -n` command.


[31-Jan-19 07:37 AM] SHossain#0007
```
ulimit -n
1024
```


[31-Jan-19 07:38 AM] SHossain#0007
default value since i installed Ubuntu 18.04


[31-Jan-19 07:38 AM] SHossain#0007
didn't change


[31-Jan-19 07:40 AM] artem.pikulin#0794
Could you please try to `ulimit -n 10000` and then start MM2 in same terminal session?


[31-Jan-19 07:40 AM] SHossain#0007
```
Testing download speed................................................................................
Download: 84.90 Mbit/s
Testing upload speed......................................................................................................
Upload: 6.17 Mbit/s
```


[31-Jan-19 07:40 AM] artem.pikulin#0794
10000 is just random value, but should be enough.


[31-Jan-19 07:40 AM] SHossain#0007
sure. increasing ulimit


[31-Jan-19 07:41 AM] SHossain#0007
```
ulimit -n 10000
bash: ulimit: open files: cannot modify limit: Operation not permitted
```


[31-Jan-19 07:41 AM] SHossain#0007
strange. i used this command in my servers without issue


[31-Jan-19 07:44 AM] cipi#4502
this could be useful: https://electrumx.readthedocs.io/en/latest/protocol-methods.html#server-ping
```Ping the server to ensure it is responding, and to keep the session alive. The server may disconnect clients that have sent no requests for roughly 10 minutes.```


[31-Jan-19 07:45 AM] artem.pikulin#0794
@cipi thanks, MM2 already pings every 10 seconds.


[31-Jan-19 07:47 AM] artem.pikulin#0794
@SHossain seems like default hard limit is low on Ubuntu 18.04. Please provide output of `ulimit -a`


[31-Jan-19 07:47 AM] jl777c#5810 (pinned)
best to update the JSON codec with all such fields: missing field.(maxprice) add to MM_fields[]


[31-Jan-19 07:47 AM] jl777c#5810
there is plenty more room to add more fields


[31-Jan-19 07:47 AM] SHossain#0007
```
ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 255968
max locked memory       (kbytes, -l) 16384
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 255968
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited
```


[31-Jan-19 07:47 AM] artem.pikulin#0794
Also you can just use sudo or try lower value.


[31-Jan-19 07:48 AM] SHossain#0007
```
sudo ulimit -n 10000
[sudo] password for user: 
sudo: ulimit: command not found
```


[31-Jan-19 07:48 AM] artemciy_dice#0049
Pinned a message.


[31-Jan-19 07:48 AM] SHossain#0007
lowering the number works
```
ulimit -n
1000
```


[31-Jan-19 07:49 AM] artem.pikulin#0794
Please increase it over 1024 but lower than 10000.


[31-Jan-19 07:49 AM] artemciy_dice#0049
lowering like `ulimit -n 2000`, e.g. more than default but less than hardlimit

{Reactions}
üëç 

[31-Jan-19 07:50 AM] SHossain#0007
can't put over 1024


[31-Jan-19 07:50 AM] SHossain#0007
since i lowered it, can't increase it to 1024


[31-Jan-19 07:50 AM] SHossain#0007
i'll restart my computer


[31-Jan-19 07:51 AM] artemciy_dice#0049
it's local to the session (process in fact), so relogin should work


[31-Jan-19 07:51 AM] cipi#4502
`sudo ulimit` will change the values for the user `root`


[31-Jan-19 07:51 AM] artemciy_dice#0049
sudo bash -l
ulimit -H -n 3000
ulimit -n 3000
mm2


[31-Jan-19 07:52 AM] artemciy_dice#0049
`> sudo ulimit will change the values for the user root`

It'll change the limits for the temporary shell process running under sudo, but yes, it isn't useful unless you're going to continue that shell session.


[31-Jan-19 07:53 AM] cipi#4502
```echo "* soft nofile 2000" >> /etc/security/limits.conf
echo "* hard nofile 2000" >> /etc/security/limits.conf```
then relogin with the user...

{Reactions}
üëç (2) 

[31-Jan-19 07:57 AM] SHossain#0007
aftrer restart i could change to 2000
```
ulimit -n
2000
```


[31-Jan-19 07:57 AM] artem.pikulin#0794
Nice, please test MM2 again.

{Reactions}
üëçüèΩ 

[31-Jan-19 08:00 AM] SHossain#0007
first swap seems going through


[31-Jan-19 08:02 AM] SHossain#0007
1st one completed, started next


[31-Jan-19 08:06 AM] SHossain#0007
2nd one completed. when i issued next one, i see error in console


[31-Jan-19 08:06 AM] SHossain#0007
```
¬∑ 2019-01-31 16:04:54 +0000 [swap] Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
31 16:04:54, lp_ordermatch:781] Swap finished successfully
31 16:05:18, lp_ordermatch:601] Alice max price: 1.001
31 16:05:19, rpc_clients:691] V4(195.201.83.86:10024) Didn't receive any data since 1548950692. Shutting down the connection.
31 16:05:22, rpc_clients:717] V4(195.201.83.86:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
```


[31-Jan-19 08:09 AM] artem.pikulin#0794
`best to update the JSON codec with all such fields: missing field.(maxprice) add to MM_fields[]` @jl777c Hi, we will work on p2p messages encoding/serialization later. It's highly likely that this part will be implemented from scratch, not ported.


[31-Jan-19 08:09 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/540564295524679681/Screenshot_from_2019-01-31_16-08-59.png


[31-Jan-19 08:10 AM] artem.pikulin#0794
@@SHossain please try to set limit to 20000, if it doesn't help it's not ulimit issue.


[31-Jan-19 08:11 AM] artem.pikulin#0794
Would be nice to test from another OS, but same hardware. Is it possible?


[31-Jan-19 08:13 AM] artemciy_dice#0049
If we're concerned with the number of open files (ulimit -n), maybe try to check it with `ls /proc/$pid/fd | wc -l`, where $pid is the mm2 process id?


[31-Jan-19 08:14 AM] SHossain#0007
@artem.pikulin different OS only on this hardware or similar spec on another machine would do? i have same i7-8700k processor in a server with 64GB RAM and SSD


[31-Jan-19 08:16 AM] SHossain#0007
that machine has Ubuntu 16.04


[31-Jan-19 08:16 AM] artem.pikulin#0794
Better if you test another OS on same PC and another server is also fine.


[31-Jan-19 08:17 AM] artem.pikulin#0794
Please also follow @artemciy_dice advice.


[31-Jan-19 08:17 AM] SHossain#0007
ok. i can use live USB with Ubuntu 16.04 or debina


[31-Jan-19 08:18 AM] SHossain#0007
```
ls /proc/3942/fd | wc -l
114
```


[31-Jan-19 08:18 AM] SHossain#0007
@artemciy_dice ^^


[31-Jan-19 08:18 AM] SHossain#0007
3942 is the pid of mm2


[31-Jan-19 08:19 AM] artemciy_dice#0049
@SHossain , Great, now we should run the first swap, measure, run the second swap, measure.


[31-Jan-19 08:19 AM] SHossain#0007
ok. let me restart mm2. current session is broken


[31-Jan-19 08:20 AM] artemciy_dice#0049
With just 114 open files chance is `ulimit -n` is not the culprit, though testing again wouldn't harm.


[31-Jan-19 08:20 AM] SHossain#0007
new session without swap
```
ls /proc/9746/fd | wc -l
90
```


[31-Jan-19 08:21 AM] SHossain#0007
after electrum script
```
ls /proc/9746/fd | wc -l
106
```


[31-Jan-19 08:21 AM] SHossain#0007
after issuing `buy` script
```
ls /proc/9746/fd | wc -l
111
```


[31-Jan-19 08:21 AM] SHossain#0007
swap started


[31-Jan-19 08:22 AM] artem.pikulin#0794
Please track it for a while.

{Reactions}
üëçüèΩ 

[31-Jan-19 08:22 AM] SHossain#0007
same 111 during the swap


[31-Jan-19 08:24 AM] SHossain#0007
after swap finish, still 111


[31-Jan-19 08:24 AM] SHossain#0007
issued next `buy`
```
ls /proc/9746/fd | wc -l
114
```


[31-Jan-19 08:25 AM] SHossain#0007
114 during the swap


[31-Jan-19 08:26 AM] SHossain#0007
down to 108 when the issue started and back to 114 again


[31-Jan-19 08:27 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/540568729059065866/Screenshot_from_2019-01-31_16-26-52.png


[31-Jan-19 08:28 AM] SHossain#0007
i can put Ubuntu 16.04 or any other OS on this machine tomorrow


[31-Jan-19 08:28 AM] SHossain#0007
will use different SSD


[31-Jan-19 08:29 AM] artem.pikulin#0794
Yes, please do, we need to understand if this is OS specific issue.


[31-Jan-19 08:30 AM] artem.pikulin#0794
BTW do you have firewall?


[31-Jan-19 08:30 AM] SHossain#0007
if needed, i can use same SSD as now. just have to backup everything before formatting


[31-Jan-19 08:30 AM] SHossain#0007
no firewall


[31-Jan-19 08:30 AM] SHossain#0007
`Status: inactive`


[31-Jan-19 08:31 AM] artem.pikulin#0794
Ok, please test another OS and let us know how it goes.


[31-Jan-19 08:32 AM] SHossain#0007
sure. will do.


[31-Jan-19 08:34 AM] SHossain#0007
let me also try the Ubuntu 16.04 server with kind of equivalent setup


[31-Jan-19 08:34 AM] cipi#4502
@SHossain is it possible that the clock of the server is not in sync? Because it says "didn't receive any data since timestamp" and if the clock is couple of seconds behind it could lead to such behaviour... i am only guessing though


[31-Jan-19 08:35 AM] SHossain#0007
@cipi i'm using my local machine


[31-Jan-19 08:35 AM] SHossain#0007
i believe it is synchronised with internet time server


[31-Jan-19 08:36 AM] SHossain#0007
i didn't test mm2 on any server yet


[31-Jan-19 08:36 AM] artem.pikulin#0794
Didn't receive data since timestamp means no data was received from electrum connection since the logged time.


[31-Jan-19 08:37 AM] artem.pikulin#0794
It is not related to correct/incorrect time.


[31-Jan-19 08:37 AM] cipi#4502
ok, i see...


[31-Jan-19 08:39 AM] SHossain#0007
setting up the server now


[31-Jan-19 08:40 AM] SHossain#0007
@artem.pikulin can i use `cargo build -vv -j$(nproc)` ?


[31-Jan-19 08:40 AM] SHossain#0007
to use max processor threads?


[31-Jan-19 08:42 AM] artemciy_dice#0049
@SHossain , cargo uses the extra CPUs by default

{Reactions}
üëç (2) shexy 

[31-Jan-19 08:42 AM] SHossain#0007
Thanks. nice to know


[31-Jan-19 08:54 AM] SHossain#0007
Ubuntu 16.04 server ready
```
Finished dev [optimized + debuginfo] target(s) in 4m 44s
```


[31-Jan-19 08:55 AM] SHossain#0007
sorry @ca333 couldn't do it in `3m 33s` üòõ

{Reactions}
üòÇ 

[31-Jan-19 08:56 AM] SHossain#0007
first swap started


[31-Jan-19 08:56 AM] SHossain#0007
```
ulimit -n
1000000
```


[31-Jan-19 08:59 AM] SHossain#0007
Ubuntu 16.04 server, swap completed
```
31 16:56:49, lp_swap:529] Received 'negotiation@tcp://195.201.116.176:38922' (102 bytes, crc 1588844774)
31 16:56:49, lp_swap:552] Sending 'negotiation-reply@tcp://195.201.116.176:38922' (102 bytes, crc 1201488083)
31 16:57:27, lp_swap:553] Received 'negotiated@tcp://195.201.116.176:38922' (1 bytes, crc 2768625435)
31 16:57:30, lp_swap:575] Taker fee tx hash e25c475e589edea638ac3f70b31ea4bf57f21a1fc27d22be66ffc3e64d07ae2d
31 16:57:30, lp_swap:576] Sending 'taker-fee@tcp://195.201.116.176:38922' (253 bytes, crc 3269696935)
31 16:58:09, lp_swap:581] Received 'maker-payment@tcp://195.201.116.176:38922' (358 bytes, crc 2480631134)
31 16:58:09, lp_swap:601] Got maker payment 5cf572f678fc8307c686e1e04c41fe0ca7730eb95763a0ffd59aff4fce20d0ad
31 16:58:24, lp_swap:631] Taker payment tx hash 2e84f67be25c0c94d2a3b3443c8f2411c623cf651d5ef97e2f7493a08aade919
31 16:58:24, lp_swap:634] Sending 'taker-payment@tcp://195.201.116.176:38922' (358 bytes, crc 23565348)
31 16:58:44, lp_swap:646] Taker payment spend tx b1c8768bf5d076656e45d23e67b6ccd19ec858679798ae37ac19eabae3e3aa5c
31 16:58:46, lp_swap:675] Maker payment spend tx 943c30c754bdc2b8342c1add652fa40189e59a34e2178b931beadbcae3fd1709
¬∑ 2019-01-31 17:58:46 +0100 [swap] Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
31 16:58:46, lp_ordermatch:781] Swap finished successfully
```


[31-Jan-19 08:59 AM] SHossain#0007
issued 2nd one


[31-Jan-19 09:01 AM] SHossain#0007
no printout since
```
31 16:59:23, lp_ordermatch:601] Alice max price: 1.001
>>>>>>>>>> received quote BEER/PIZZA 0.97983831
31 16:59:24, lp_ordermatch:1158] aliceid.3734825983 got new bestprice 0.9798383131592638 dynamictrust -1.02079066 (unconf 0) slowresponse.0
31 16:59:26, lp_ordermatch:1225] send LP_connect aliceid.3734825983 0.9798383131592638
```


[31-Jan-19 09:01 AM] SHossain#0007
swap didn't start it seems


[31-Jan-19 09:01 AM] SHossain#0007
issued another buy order and it started


[31-Jan-19 09:05 AM] SHossain#0007
```
¬∑ 2019-01-31 18:03:57 +0100 [swap] Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
31 17:03:57, lp_ordermatch:781] Swap finished successfully
```


[31-Jan-19 09:05 AM] SHossain#0007
finished


[31-Jan-19 09:06 AM] SHossain#0007
next swap started


[31-Jan-19 09:08 AM] SHossain#0007
finished successfully. but, got this error in the middle of the swap progress
```
31 17:06:29, peers:1153] Error renaming RaiiRm("/tmp/lt-dht-15081746108969692164.tmp") to "/home/user/.mm2/lt-dht": Invalid cross-device link (os error 18)
```


[31-Jan-19 09:09 AM] SHossain#0007
next swap also started


[31-Jan-19 09:09 AM] SHossain#0007
could my previous issue be linked with Ubuntu 18.04? or due to home network and NAT? can only confirm tomorrow after installing Ubuntu 16.04 locally


[31-Jan-19 09:10 AM] artem.pikulin#0794
@artemciy_dice the error above related to dht state save for caching purpose and doesn't really affect anything except performance, is it correct?

{Reactions}
üëç 

[31-Jan-19 09:10 AM] SHossain#0007
btw, server doesn't have firewall and it has 1GB dl and 250MB ul


[31-Jan-19 09:11 AM] artem.pikulin#0794
I also have Ubuntu 18.04 and I don't have any issues with MM2 on it.


[31-Jan-19 09:11 AM] SHossain#0007
is your Ubuntu 18.04 in a server or DC?


[31-Jan-19 09:12 AM] artem.pikulin#0794
Desktop, my workstation.


[31-Jan-19 09:13 AM] artem.pikulin#0794
Where do you run tests now?


[31-Jan-19 09:13 AM] artem.pikulin#0794
Is it same network?


[31-Jan-19 09:14 AM] artemciy_dice#0049
@artem.pikulin , changed this message to "Warning, can't rename".

{Reactions}
üëå 

[31-Jan-19 09:18 AM] SHossain#0007
@artem.pikulin running current tests using a dedicated server from a data center


[31-Jan-19 09:19 AM] SHossain#0007
even simultaneous swaps are working fine. no issues


[31-Jan-19 09:20 AM] SHossain#0007
it is a totally different network than my home


[31-Jan-19 09:20 AM] artem.pikulin#0794
Ok, nice to know that it works, but we have not met any issues on dedicated Linux yet üôÇ


[31-Jan-19 09:21 AM] artem.pikulin#0794
The goal is to run on end user environments and your personal Ubuntu is the most important case.


[31-Jan-19 09:21 AM] SHossain#0007
started 3 swaps, 1 finished, waiting for the rest to finish


[31-Jan-19 09:21 AM] artemciy_dice#0049
I see `time expired for Alice_request` in some of the logs above (and in some of my own NAT logs too).


[31-Jan-19 09:21 AM] artemciy_dice#0049
Looks like the timeout frame might be too low.


[31-Jan-19 09:22 AM] SHossain#0007
ok. the last 2 didn't finish yet. should have finished by now


[31-Jan-19 09:22 AM] ca333#0333
using a slighly bigger price will help the ordermatch process


[31-Jan-19 09:23 AM] SHossain#0007
would it be possible to add `uuid` of the swap in the following message?
```
31 17:20:22, lp_ordermatch:781] Swap finished successfully
```


[31-Jan-19 09:23 AM] SHossain#0007
so, we can track which one finished exactly


[31-Jan-19 09:23 AM] artem.pikulin#0794
It's possible, please open an issue.

{Reactions}
üëçüèΩ 

[31-Jan-19 09:25 AM] SHossain#0007
https://gist.github.com/himu007/569544b9234e3420c6dbdd9be8f97064

{Embed}
https://gist.github.com/himu007/569544b9234e3420c6dbdd9be8f97064
3 swaps issued - 1 finished - 2 missing in action
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[31-Jan-19 09:25 AM] SHossain#0007
@artem.pikulin ^^


[31-Jan-19 09:25 AM] SHossain#0007
2 swaps MIA


[31-Jan-19 09:25 AM] SHossain#0007
üòõ


[31-Jan-19 09:26 AM] SHossain#0007
will open an issue now with my suggesstion


[31-Jan-19 09:27 AM] artem.pikulin#0794
Please concentrate on the pc where you have the electrum connection issue. The server Linux was already tested many times and it's not the case that will be used by many users I guess.


[31-Jan-19 09:28 AM] artemciy_dice#0049
Though it's nice to know that MM2 mostly works for you there!


[31-Jan-19 09:28 AM] artemciy_dice#0049
Means something different on that other configuration.


[31-Jan-19 09:28 AM] SHossain#0007
https://github.com/artemii235/SuperNET/issues/274

{Embed}
https://github.com/artemii235/SuperNET/issues/274
add `uuid` of the swap in the swap completed message ¬∑ Issue #274...
Please add the uuid of the specific swap on the swap completed message for better tracking of swap completion. 31 17:20:22, lp_ordermatch:781] Swap finished successfully
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[31-Jan-19 09:29 AM] SHossain#0007
yes, i'll install Ubuntu 16.04 on my local computer tomorrow (same one i had issues and been running 18.04)


[31-Jan-19 09:31 AM] SHossain#0007
from the previous swap in the server these messages appeared in the mm2 console after i issued another swap
```
31 17:26:29, peers:1153] Error renaming RaiiRm("/tmp/lt-dht-2781304649244495676.tmp") to "/home/user/.mm2/lt-dht": Invalid cross-device link (os error 18)
¬∑ 2019-01-31 18:30:25 +0100 [swap] Waiting for Maker payment‚Ä¶ Error: timeout
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
31 17:30:25, lp_ordermatch:782] Swap finished with error (-1005, "Error getting \'maker-payment@tcp://195.201.116.176:32451\': timeout")
```


[31-Jan-19 09:31 AM] artem.pikulin#0794
@SHossain Thanks! Please keep the 18.04 too, if the issue is OS we should investigate it further üôÇ


[31-Jan-19 09:32 AM] SHossain#0007
sure. i'll just remove the M.2 SSD and insert a new one to install ubuntu 16.04


[31-Jan-19 09:32 AM] SHossain#0007
can't loose all the data that are in this drive üòõ


[31-Jan-19 09:33 AM] artem.pikulin#0794
Maker did not send his payment in time, will check logs tomorrow.

{Reactions}
üëçüèΩ 

[31-Jan-19 09:48 AM] Mark81#4505
I have been trying to get mm2.0 working on windows 10. So far my issue is this which happens on two different pc and with vpn and without it. 

```C:\mm2.0> mm2.exe "{\"gui\":\"MM2GUI\",\"netid\":9999,\"client\":1,\"userhome\":\"%USERHOME%\", \"passphrase\":\"%PASSPHRASE%\",\"coins\":\"%COINS%\"}"
WSAStartup called
31 16:54:57, mm2:187] BarterDEX MarketMaker UNKNOWN
RPCport.0 remoteport.-1, nanoports 47762 47772 47782
31 16:54:57, lp_native_dex:1558] showwif.0 version: UNKNOWN 2455984605
31 16:54:57, lp_native_dex:1648] lp_init] Trying to fetch the real IP from 'http://checkip.amazonaws.com/' ...
31 16:54:57, lp_native_dex:1701] error binding to (tcp://188.67.71.250:47772).0
31 16:54:57, lp_native_dex:1709] >>>>>>>>> myipaddr.(tcp://188.67.71.250:47772) pubsock.-1
bind to tcp://188.67.71.250:47762 error for tcp://188.67.71.250:47762: Address not available```


[31-Jan-19 09:51 AM] Mark81#4505
I will try with linux to see if this occurs there also to see if its caused by ISP. I think vpn should clear that out anyway?


[31-Jan-19 09:53 AM] Mark81#4505
Btw on mm2.0 OS builds there are huge differences on file sizes for mm2.0?


[31-Jan-19 09:54 AM] artem.pikulin#0794
@Mark81 please set "myipaddr":"127.0.0.1" at your start script json arg.


[31-Jan-19 09:56 AM] SHossain#0007
it would be like this
```
stdbuf -oL ./mm2 "{\"gui\":\"MM2GUI\",\"myipaddr\":\"127.0.0.1\",\"netid\":9999,\"client\":1,\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\",\"coins\":$coins}" &
```


[31-Jan-19 09:57 AM] SHossain#0007
replace `$passphrase` with your own passphrase unless you have a file called `passphrase` and inside the following
```
export passphrase="<your passphrase here>"
```


[31-Jan-19 09:58 AM] artem.pikulin#0794
We use debug builds, for some reason it's enough for win to have kinda small exe size. The difference is huge but not an issue as we're just testing now.


[31-Jan-19 09:58 AM] SHossain#0007
oh...my lines are for Linux


[31-Jan-19 09:59 AM] Mark81#4505
runs like charm now! thanks!


[31-Jan-19 10:06 AM] SHossain#0007
update: one of my unfinished swap finished now


[31-Jan-19 12:04 PM] artemciy_dice#0049
Regarding the `time expired for Alice_request` error that has shown up in some of your logs, @SHossain , can you try http://195.201.0.6/mm2-natt/mm2-13eeeea-Linux ? It has that timeout increased from 30 to 120.


[31-Jan-19 12:06 PM] artemciy_dice#0049
(My hypothesis is that this timeout might happen when there is a NAT or a firewall or both and the ordermatch messages have to go via the slower open seed node route).


[31-Jan-19 12:13 PM] artemciy_dice#0049
It's the mm2-natt branch if you're building from source.


[31-Jan-19 08:12 PM] ca333#0333
@namhoang28 plz test the API via CLI according to https://discordapp.com/channels/412898016371015680/476025090627207168/540409105223909389 - if you have any issues or questions ask in this channel. Once tested plz integrate this into atomicDEX. For now activate ONLY BEER/PIZZA so we can get the whole team to test MM2 soon.


[31-Jan-19 08:18 PM] namhoang28#4328
thanks @ca333
working on it now

{Reactions}
‚úÖ 

[31-Jan-19 09:10 PM] artem.pikulin#0794
@Deleted User @CrisF Hi! Welcome to MM2 channel, please check pinned messages, there is test plan link and pdf document with instructions. If you have any questions please let me know.

{Reactions}
üëå 

[31-Jan-19 09:52 PM] artem.pikulin#0794
@everyone I noticed that address `RTBhptgeH2xq7ihCTtDKNjcYK7XvVrE5h4` was using BEER electrums for PIZZA. The dexfee http://beer.explorer.dexstats.info/tx/bba6acadd9548015fce08aa2fc76d49a7c01a904a4fd97779fd43ee5f3b140ef was sent in BEER, but it must be PIZZA. If you own this address please correct on your side.


[31-Jan-19 09:54 PM] artem.pikulin#0794
@cipi did you restart BEER electrums about 5 hours ago? The connection to them was interrupted for some time:
```
Feb 01 01:24:39 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[23348]: 01 00:24:39, rpc_clients:717] V4(195.201.12.150:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
Feb 01 01:24:44 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[23348]: 01 00:24:44, rpc_clients:680] V4(195.201.12.150:10022) error Os { code: 111, kind: ConnectionRefused, message: "Connection refused" }
Feb 01 01:24:47 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[23348]: 01 00:24:47, utxo:965] Electrum servers ["electrum1.cipig.net:10022", "electrum2.cipig.net:10022", "electrum3.cipig.net:10022"] ping error "rpc_clients:861] \"rpc_clients:845] rpc_clients:819] future timed out\""
Feb 01 01:24:47 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[23348]: 01 00:24:47, rpc_clients:717] V4(195.201.81.113:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
Feb 01 01:24:47 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[23348]: 01 00:24:47, rpc_clients:717] V4(195.201.83.86:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
Feb 01 01:24:49 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[23348]: ¬∑ 2019-02-01 01:24:49 +0100 [broadcast_my_prices BEER PIZZA] ping request creation failed prices:84] rpc_clients:858] ["rpc_clients:845] rpc_clients:819] future timed out", "rpc_clients:845] rpc_clients:819] future timed out", "rpc_clients:845] rpc_clients:819] future timed out"]
Feb 01 01:24:51 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[23348]: 01 00:24:51, rpc_clients:691] V4(195.201.12.150:10022) Didn't receive any data since 1548980669. Shutting down the connection.
Feb 01 01:24:51 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[23348]: 01 00:24:51, rpc_clients:693] V4(195.201.12.150:10022) error shutting down the connection Os { code: 107, kind: NotConnected, message: "Transport endpoint is not connected" }
```


[31-Jan-19 09:57 PM] artem.pikulin#0794
@SHossain one of your recent swaps failed because seed node didn't receive information about dexfee in time: `Jan 31 18:30:04 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[23348]: 31 17:30:04, lp_ordermatch:453] Swap finished with error (-2003, "Error getting \'taker-fee@tcp://195.201.116.176:32451\': timeout")
`


[31-Jan-19 10:02 PM] artem.pikulin#0794
@Mark81 How did your Windows 10 test go? Do you need any help?


[31-Jan-19 11:09 PM] Mark81#4505
@artem.pikulin i hopefully will get time today for get back on that after work.


[31-Jan-19 11:09 PM] artem.pikulin#0794
@Mark81 Thanks a lot! Have a nice day üôÇ


[01-Feb-19 12:12 AM] namhoang28#4328
Hi guys
Just download the latest version of mm2 but I can't start it from my local.
This is the logs from mm app. Does anyone know how to solve this?
```
LOG: 01 07:59:30, mm2:187] BarterDEX MarketMaker UNKNOWN +206ms
LOG: 01 07:59:30, lp_native_dex:1558] showwif.0 version: UNKNOWN 2455984605 +1ms
LOG: 01 07:59:30, lp_native_dex:1701] error binding to (tcp://116.99.70.131:47772).0 +0ms
LOG: 01 07:59:30, lp_native_dex:1709] >>>>>>>>> myipaddr.(tcp://116.99.70.131:47772) pubsock.-1 +0ms
LOG: RPCport.0 remoteport.-1, nanoports 47762 47772 47782 +0ms
LOG: bind to tcp://116.99.70.131:47762 error for tcp://116.99.70.131:47762: Can't assign requested address +0ms
child process terminated due to receipt of signal null and code 255 +5ms
```
this is my config to start mm app:
```
{
    gui: 'AtomicDex',
    userhome: config.get('paths.homeDir'),
    bin: config.get('paths.binDir'),
    userData: config.get('paths.userDataDir'),
    coins: config.get('marketmaker.data'),
    // NOTE: For testing
    passphrase: '<my passphare>',
    netid: 9999,
}
```


[01-Feb-19 12:12 AM] jorian#4555
after 5 minutes of building: error üò≠


[01-Feb-19 12:13 AM] jorian#4555
```-- Build files have been written to: /Users/Jorian/mm2supernet/build
$ cmake --build . --target marketmaker-lib -j 4
Unknown argument -j
Unknown argument 4``` this seems wrong


[01-Feb-19 12:15 AM] artem.pikulin#0794
@jorian Hi, seems like you have cmake version lower than `3.12`, please provide output of `cmake --version`.


[01-Feb-19 12:16 AM] jorian#4555
you're right! gonna fix, had 3.11.1


[01-Feb-19 12:17 AM] artem.pikulin#0794
@jorian could you please tell what OS are you using? I will put this info to MM2 test plan spreadsheet.


[01-Feb-19 12:18 AM] artem.pikulin#0794
@namhoang28 as discussed in DM please add "myipaddr":"127.0.0.1" to MM2 JSON config.


[01-Feb-19 12:19 AM] artem.pikulin#0794
@namhoang28 I remember that you use MacOS, but don't know the version. What version do you use?


[01-Feb-19 12:19 AM] jorian#4555
i'm using MacOS Mojave


[01-Feb-19 12:20 AM] artem.pikulin#0794
Nice! thanks!


[01-Feb-19 12:21 AM] namhoang28#4328
i'm using MacOS Mojave too


[01-Feb-19 12:22 AM] jorian#4555
on a 2013 mbp, which is getting kind of slow


[01-Feb-19 12:23 AM] artem.pikulin#0794
I see, but @jorian builds from source and @namhoang28 uses binary from http://195.201.0.6/mm2/, correct?


[01-Feb-19 12:23 AM] jorian#4555
yes


[01-Feb-19 12:25 AM] namhoang28#4328
yes, I downloaded mm2 from that


[01-Feb-19 12:25 AM] jorian#4555
```Finished dev [optimized + debuginfo] target(s) in 6m 21s``` yay


[01-Feb-19 12:25 AM] artem.pikulin#0794
Nice, thanks for the info!

{Reactions}
üëç (2) 

[01-Feb-19 12:36 AM] jorian#4555
i actually have the same error as @namhoang28


[01-Feb-19 12:37 AM] jorian#4555
can't assign requested address


[01-Feb-19 12:38 AM] jorian#4555
oh i see


[01-Feb-19 12:38 AM] jorian#4555
can we make that pdf some google doc where we can update stuff?


[01-Feb-19 12:40 AM] artem.pikulin#0794
I think yes, @ca333 could you please move the doc to google docs instead of pdf?


[01-Feb-19 12:40 AM] jorian#4555
haha üòÖ

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/540813734013042698/unknown.png

{Reactions}
üòá 

[01-Feb-19 12:43 AM] namhoang28#4328
uhm, adding myipaddr seems didn't solve my error. @artem.pikulin any idea?
```
{
    "userData": "/Users/lehoang/Library/Application Support/Electron/atomicapp",
    "coins": [{
        "coin": "PIZZA",
        "name": "Pizza",
        "asset": "PIZZA",
        "txversion": 4,
        "rpcport": 11116,
        "electrumServers": [{
            "host": "electrum1.cipig.net",
            "port": 10024
        }, {
            "host": "electrum2.cipig.net",
            "port": 10024
        }],
        "active": 1,
        "market_cap": -2
    }, {
        "coin": "BEER",
        "name": "Beer",
        "asset": "BEER",
        "txversion": 4,
        "rpcport": 8923,
        "electrumServers": [{
            "host": "electrum1.cipig.net",
            "port": 10022
        }, {
            "host": "electrum2.cipig.net",
            "port": 10022
        }],
        "active": 1,
        "market_cap": -1
    }],
    "passphrase": "<my passphrase>",
    "netid": 9999,
    "client": 1,
    "gui": "AtomicDex",
    "userhome": "/Users/lehoang",
    "rpcport": 7783,
    "myipaddr": "127.0.0.1"
}
```


[01-Feb-19 12:43 AM] artem.pikulin#0794
@namhoang28 what error do you get?


[01-Feb-19 12:44 AM] namhoang28#4328
```
  barterdex-api:server:control LOG: 01 08:35:32, mm2:187] BarterDEX MarketMaker UNKNOWN +236ms
  barterdex-api:server:control LOG: 01 08:35:32, lp_native_dex:1558] showwif.0 version: UNKNOWN 2455984605 +0ms
  barterdex-api:server:control LOG: 01 08:35:32, lp_native_dex:1701] error binding to (tcp://116.99.70.131:47772).0 +0ms
  barterdex-api:server:control LOG: 01 08:35:32, lp_native_dex:1709] >>>>>>>>> myipaddr.(tcp://116.99.70.131:47772) pubsock.-1 +0ms
  barterdex-api:server:control LOG: RPCport.0 remoteport.-1, nanoports 47762 47772 47782 +0ms
  barterdex-api:server:control LOG: bind to tcp://116.99.70.131:47762 error for tcp://116.99.70.131:47762: Can't assign requested address +1ms
  barterdex-api:server:control child process terminated due to receipt of signal null and code 255 +5ms
```
same error as I reported above


[01-Feb-19 12:44 AM] artem.pikulin#0794
@jorian yeah, thankfully to @artemciy_dice great work MM2 logs can be fun now üôÇ


[01-Feb-19 12:45 AM] artem.pikulin#0794
@namhoang28 are you sure that provided config is `really` used? Please also check if there is `myipaddr` file in MM2 dir, if it's there - remove it.


[01-Feb-19 12:46 AM] namhoang28#4328
uhm, let me try


[01-Feb-19 12:48 AM] jorian#4555
```common:655] RPC error response: lp_coins:829] lp_coins:786] utxo:951] rpc_clients:530] rpc_clients:358] failed to lookup address information: nodename nor servname provided, or not known``` when trying to add electrums


[01-Feb-19 12:48 AM] artem.pikulin#0794
@jorian please share the command you're using.


[01-Feb-19 12:50 AM] jorian#4555
```./mm2 "{\"gui\":\"MM2GUI\",\"netid\":9999,\"client\":1, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"<pp>\", \"coins\":$coins, \"myipaddr\":\"127.0.0.1\"}" &```


[01-Feb-19 12:50 AM] jorian#4555
there is a coins file


[01-Feb-19 12:50 AM] jorian#4555
and i did source coins


[01-Feb-19 12:50 AM] artem.pikulin#0794
@jorian I mean `electrum` script.


[01-Feb-19 12:50 AM] jorian#4555
the electrum is a copy of that pdf


[01-Feb-19 12:51 AM] jorian#4555
waait.


[01-Feb-19 12:51 AM] jorian#4555
it's copying from a pdf that messes things up


[01-Feb-19 12:51 AM] artem.pikulin#0794
üôÇ


[01-Feb-19 12:53 AM] jorian#4555
ah, this is interesting though: the electrum call contains 3 hostnames, where the second was messed up (it had a space: `electrum1.cip ig.net`) so it threw an error. but now i fixed it and it says PIZZA is already there. so on the first try it said it failed, but actually didn't


[01-Feb-19 12:54 AM] artem.pikulin#0794
Yes, looks like bug. Please restart your MM and try again. We will fix it soon.


[01-Feb-19 12:57 AM] artem.pikulin#0794
https://github.com/artemii235/SuperNET/issues/277

{Embed}
https://github.com/artemii235/SuperNET/issues/277
Coin enable/electrum can return error, but second attempt returns ...
common:655] RPC error response: lp_coins:829] lp_coins:786] utxo:951] rpc_clients:530] rpc_clients:358] failed to lookup address information: nodename nor servname provided, or not known Jorian ah,...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[01-Feb-19 01:03 AM] jorian#4555
cool


[01-Feb-19 01:04 AM] jorian#4555
anyone have some beer? faucet seems broken


[01-Feb-19 01:04 AM] jorian#4555
R9NeDgwvfHusphQ6vvwDDeLRF61Y2WhhBD


[01-Feb-19 01:05 AM] artem.pikulin#0794
http://pizza.explorer.dexstats.info/tx/bce3dd6d4437984ccbefd944b68bff8312e4449dcbc73f201b6755efec427067 sent you 20 PIZZA, there is active order that sells BEER for PIZZA.


[01-Feb-19 01:09 AM] jorian#4555
are you sure?


[01-Feb-19 01:09 AM] jorian#4555
i see an ask in the PIZZA BEER orderbook


[01-Feb-19 01:09 AM] jorian#4555
only 1


[01-Feb-19 01:09 AM] namhoang28#4328
@artem.pikulin it solve my error. Many thanks
```
Please also check if there is myipaddr file in MM2 dir, if it's there - remove it.
```

{Reactions}
ü§ù 

[01-Feb-19 01:10 AM] artem.pikulin#0794
@jorian yes,
```
{"bids":[],"numbids":0,"biddepth":0,"asks":[{"coin":"BEER","address":"RJTYiYeJ8eVvJ53n2YbrVmxWNNMVZjDGLh","price":0.89999998,"numutxos":0,"avevolume":0,"maxvolume":10132.18074249,"depth":0,"pubkey":"5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12","age":8,"zcredits":0}],"numasks":1,"askdepth":0,"base":"BEER","rel":"PIZZA","timestamp":1549012229,"netid":9999}
```


[01-Feb-19 01:11 AM] artem.pikulin#0794
It's output of `curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"orderbook\",\"base\":\"BEER\",\"rel\":\"PIZZA\"}"`


[01-Feb-19 01:11 AM] artem.pikulin#0794
Could you please provide full orderbook output that you see on your side?


[01-Feb-19 01:11 AM] jorian#4555
yeah, i see


[01-Feb-19 01:11 AM] artem.pikulin#0794
Or it's same as mine?


[01-Feb-19 01:12 AM] jorian#4555
error was on my side


[01-Feb-19 01:12 AM] jorian#4555
i think i started a swap now

{Reactions}
üëç 

[01-Feb-19 01:13 AM] artem.pikulin#0794
I sent you 200 more PIZZA just in case.


[01-Feb-19 01:14 AM] jorian#4555
are you trying to make me fat? üòõ


[01-Feb-19 01:14 AM] artem.pikulin#0794
Haha, why not? üôÇ


[01-Feb-19 01:14 AM] jorian#4555
``` Swap finished successfully``` yay


[01-Feb-19 01:15 AM] artem.pikulin#0794
Very nice! Congratz with your first MM2 swap!


[01-Feb-19 01:15 AM] jorian#4555
haha nice üòÑ


[01-Feb-19 01:15 AM] jorian#4555
i can have beer now

{Reactions}
üçª 

[01-Feb-19 01:16 AM] jorian#4555
so is there a test plan, or what do we do next? wait for you to add more api calls?


[01-Feb-19 01:17 AM] artem.pikulin#0794
Please also try to run let's say 10 concurrent swaps and check what happens.


[01-Feb-19 01:17 AM] jorian#4555
wow


[01-Feb-19 01:17 AM] artem.pikulin#0794
Wait for swap to start and then immediately issue next buy request.


[01-Feb-19 01:18 AM] jorian#4555
what would help is a bit more color in the output


[01-Feb-19 01:18 AM] jorian#4555
and maybe you can make it just so that based on the uuid, the color changes a bit. but that's too much to ask i guess


[01-Feb-19 01:19 AM] artem.pikulin#0794
@artemciy_dice already added uuid today, please pull latest commit from `mm2` branch and rebuild.


[01-Feb-19 01:19 AM] artem.pikulin#0794
`what would help is a bit more color in the output` it's great idea, we will note it.


[01-Feb-19 01:19 AM] jorian#4555
oh and another thing: i didn't have to split any utxo! üéâ


[01-Feb-19 01:20 AM] jorian#4555
that alone is a killer feature in the upgrade from 1 to 2


[01-Feb-19 01:21 AM] artem.pikulin#0794
Yeah, UTXOs are selected right before transaction creation, not on order creation or some other stage.


[01-Feb-19 01:24 AM] jorian#4555
can you actually see my swaps?


[01-Feb-19 01:24 AM] jorian#4555
in mm1.0, we could see all msgs


[01-Feb-19 01:26 AM] jorian#4555
things like request, connect, connected


[01-Feb-19 01:26 AM] artem.pikulin#0794
It doesn't work in MM2 yet, but we're going to restore it.


[01-Feb-19 01:26 AM] jorian#4555
nice


[01-Feb-19 01:34 AM] namhoang28#4328
```‚Ä®barterdex-api:server:control LOG: 01 09:21:58, lp_ordermatch:781] Swap finished successfully +1ms‚Ä®```‚Ä®
got one swap successfully :D
But it seems `balance` method doesn‚Äôt work‚Ä®
```‚Ä®api.privateCall({method: 'balance', address: "RRVJBpA5MoeTo3beA1iP6euWWrWcJdJtXu", coin: "BEER"})
‚Ä®{"result":"success","coin":"BEER","address":"RRVJBpA5MoeTo3beA1iP6euWWrWcJdJtXu","balance":0}‚Ä®```
‚Ä®@artem.pikulin#0794  you still haven't implemented this yet, right?


[01-Feb-19 01:38 AM] artem.pikulin#0794
@namhoang28 please use new `my_balance` method, `balance` is being deprecated, at least in native mode it can provide wrong amount if address is not imported to local daemon.


[01-Feb-19 01:38 AM] artem.pikulin#0794
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_balance\",\"coin\":\"BEER\"}"`


[01-Feb-19 01:39 AM] artem.pikulin#0794
Response `{"address":"R9o9xTocqr6CeEDGDH6mEYpwLoMz6jNjMW","balance":11.97611187,"coin":"BEER"}`


[01-Feb-19 01:40 AM] namhoang28#4328
@artem.pikulin nice, thanks


[01-Feb-19 02:01 AM] siu#3920
What about btc swaps? Can they be tested?


[01-Feb-19 02:07 AM] artem.pikulin#0794 (pinned)
@siu Hi, BTC testnet would be nice to test and should work, please don't attempt to trade assets with real market cost, if MM2 crashes during swap you risk to lose your funds.


[01-Feb-19 02:50 AM] cipi#4502
@artem.pikulin yes, i restarted BEER electrums in order to compact the database. I do this regularly (like every 2 weeks) because of this issue: https://github.com/kyuupichan/electrumx/issues/185 and in order to free up some RAM. Not sure, but it looks like there is a small memleak.

{Embed}
https://github.com/kyuupichan/electrumx/issues/185
DB::flush_count overflow ¬∑ Issue #185 ¬∑ kyuupichan/electrumx
I got a case where the DB::flush_count went over 65535 and a full database resync was needed. Normally the flush_count would overflow after about 455 days in Bitcoin if we were indexing a fully syn...
https://images-ext-1.discordapp.net/external/8jqRp5KS2b9F7SeTlHyUtdAmzkXiVVp0JzQ7NZSmxdM/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/944152


[01-Feb-19 03:14 AM] artem.pikulin#0794
@cipi Yes, `ca333` also told me about it. Could you please make a short delay (like 1 minute or a bit more) between different servers restart for the coin? All 3 servers going down at 1 time make redundancy actually useless. It may even break someones ongoing swap because node will either fail to send the transaction or validate the tx of other side of swap.


[01-Feb-19 03:15 AM] artem.pikulin#0794
But if there is a delay between restarts MM2 will just fallback to another server and keep working as expected.


[01-Feb-19 03:19 AM] cipi#4502
will try to add some random delay, because doing it manually for 9 servers and 40 coins is a mess...


[01-Feb-19 03:19 AM] artem.pikulin#0794
@Kiruel Welcome to MM2 channel! Please check pinned messages, you'll find the test instructions there. Let me know if you have any questions.

{Reactions}
üëå 

[01-Feb-19 03:20 AM] artem.pikulin#0794
@cipi What if we create a shell script that does it? üôÇ


[01-Feb-19 03:20 AM] artem.pikulin#0794
It'll connect to server via SSH, restart all electrums, make a delay e.g. 5 minutes and then go to next server.


[01-Feb-19 03:21 AM] cipi#4502
sure... but the servers need different time to compact the database... for small coins (even KMD) it only takes a minute or 2, but BTC takes one hour or more... therefore i don't compact the database for BTC that often


[01-Feb-19 03:23 AM] artem.pikulin#0794
Well maybe it's worth to setup cron job that will do automatic restart on different `days`?


[01-Feb-19 03:23 AM] cipi#4502
btw, mm1 simply tries to reconnect to electrums... and it also worked during a swap, i tested it... 
yes, that is a good idea


[01-Feb-19 03:23 AM] artem.pikulin#0794
You'll just need to track sometimes that it actually happens.


[01-Feb-19 03:23 AM] artem.pikulin#0794
MM2 tries to reconnect too, but as you can see from logs it still takes about 15 seconds or so to do it.


[01-Feb-19 03:26 AM] cipi#4502
i will simply setup cron-jobs on the servers... but it will take me some time to setup 40 cron jobs on each of the 9 servers


[01-Feb-19 03:28 AM] artem.pikulin#0794
MM2 Electrum  client works this way:
It sends request to first server, if it takes more than 5 seconds it aborts it and switches to next, repeats until all servers are tried.


[01-Feb-19 03:28 AM] artem.pikulin#0794
Maybe I should adjust the timeout or make more attempts, but anyway nothing good will happen if all servers are down `concurrently` üôÇ


[01-Feb-19 03:29 AM] artem.pikulin#0794
`i will simply setup cron-jobs on the servers... but it will take me some time to setup 40 cron jobs on each of the 9 servers` - thanks a lot!


[01-Feb-19 03:29 AM] cipi#4502
sure... i will do that üòÉ


[01-Feb-19 03:35 AM] artem.pikulin#0794
Pinned a message.


[01-Feb-19 03:41 AM] artem.pikulin#0794
@cipi I also wonder: does Electrum accept client requests during DB compaction? Is it indexing the data still and providing up-to-date information?


[01-Feb-19 03:46 AM] cipi#4502
no, i have to stop the electrum server, then start the DB compaction and then start it up agian


[01-Feb-19 03:46 AM] cipi#4502
like `sudo systemctl stop electrumx_MNZ && COIN=Monaize DB_DIRECTORY=/electrumdb/MNZ /home/electrum/electrumx/compact_history.py && sudo systemctl start electrumx_MNZ`


[01-Feb-19 03:47 AM] SHossain#0007
@artemciy_dice i'll get your fix tested frist


[01-Feb-19 03:48 AM] cipi#4502
best would be if the dev would fix the issue so that this compaction is not needed any more, but the github issue is pretty old and it does not look like he will find a better solution


[01-Feb-19 03:48 AM] artemciy_dice#0049
@SHossain , it has been merged into mm2, so please grab the latest version of that one if you can.


[01-Feb-19 03:49 AM] SHossain#0007
sure. then, i'll try latest before i change OS on same machine

{Reactions}
üëç 

[01-Feb-19 03:51 AM] artem.pikulin#0794
@cipi Thanks for the info!


[01-Feb-19 03:57 AM] Kiruel#2091
@artem.pikulin hi ! Do you have documention to run MM2 on android/ios ?


[01-Feb-19 03:57 AM] artem.pikulin#0794
@Kiruel Hi, we have not tried to build it on mobile yet, but we will work on it soon.


[01-Feb-19 03:57 AM] Kiruel#2091
I saw on the doc we can use it for mobile.


[01-Feb-19 03:58 AM] Kiruel#2091
Ok, thx do you think it's possible to run on Dart ? üòÉ


[01-Feb-19 04:00 AM] SHossain#0007
did anyone have compile issues with latest source?


[01-Feb-19 04:00 AM] artem.pikulin#0794
We're actually considering Flutter as one of possible alternatives to build the mobile app on.


[01-Feb-19 04:01 AM] artem.pikulin#0794
@SHossain please pull and compile again, I have pushed erronous commit and already fixed it, excuse me.


[01-Feb-19 04:01 AM] SHossain#0007
no worries. `git pull`ed building latest now.


[01-Feb-19 04:01 AM] SHossain#0007
this worked fine

{Reactions}
üëå 

[01-Feb-19 04:03 AM] SHossain#0007
started my first swap


[01-Feb-19 04:07 AM] SHossain#0007
```
¬∑ 2019-02-01 12:05:35 +0000 [swap uuid=00537c5cd2de7d936808a93222f503957b33686d8efda98e99043720420f9c82] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```

{Reactions}
üëç 

[01-Feb-19 04:09 AM] SHossain#0007
thanks for adding the `uuid` @artem.pikulin üòÉ


[01-Feb-19 04:09 AM] artem.pikulin#0794
Please thx @artemciy_dice, he did this task today üôÇ


[01-Feb-19 04:10 AM] SHossain#0007
Thanks very much @artemciy_dice üòÉ


[01-Feb-19 04:11 AM] artemciy_dice#0049
lol, you're welcome!


[01-Feb-19 04:15 AM] SHossain#0007
got broken pipe and timedout error


[01-Feb-19 04:16 AM] SHossain#0007
https://gist.github.com/himu007/08e78d61052e07d845efd5b9a7bba816

{Embed}
https://gist.github.com/himu007/08e78d61052e07d845efd5b9a7bba816
mm2-err
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040


[01-Feb-19 04:16 AM] SHossain#0007
full log


[01-Feb-19 04:16 AM] artem.pikulin#0794
Electrum client wasn't changed, please try another OS on same machine or least another machine on same network.


[01-Feb-19 04:16 AM] siu#3920
@artem.pikulin can etomic/erc20 be done?


[01-Feb-19 04:16 AM] SHossain#0007
though, mm2 console says swap completed successfull


[01-Feb-19 04:17 AM] artem.pikulin#0794
@siu yes, ETH/ERC20 swap can be done, it works without ETOMIC now. But no orders are up yet.


[01-Feb-19 04:17 AM] siu#3920
oh wow, really?


[01-Feb-19 04:17 AM] siu#3920
nice


[01-Feb-19 04:17 AM] siu#3920
ok, i will try to get this running.


[01-Feb-19 04:18 AM] siu#3920
so to setup a server for mm2 i can just run the same binary right?


[01-Feb-19 04:18 AM] siu#3920
with ./client  script


[01-Feb-19 04:18 AM] artem.pikulin#0794
Yes, please note that MM2 defaults to Ropsten testnet and there is no way to change it right now.


[01-Feb-19 04:19 AM] siu#3920
ok


[01-Feb-19 04:19 AM] siu#3920
how can i get some testnet eth?


[01-Feb-19 04:19 AM] artem.pikulin#0794
If you need test ETH/ERC20 please let me know.


[01-Feb-19 04:19 AM] siu#3920
maybe @cipi can help?


[01-Feb-19 04:19 AM] artem.pikulin#0794
Just give me your address üôÇ


[01-Feb-19 04:19 AM] siu#3920
i need to test this for ERC20 migration.


[01-Feb-19 04:19 AM] siu#3920
ok, let me set eveyrthing first :p


[01-Feb-19 04:21 AM] artem.pikulin#0794
@SHossain what are specs of your testing PC? What other apps do you have running?


[01-Feb-19 04:22 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/540869656806817812/Screenshot_from_2019-02-01_12-22-18.png


[01-Feb-19 04:23 AM] SHossain#0007
Apps running:
Gooel Chrome
Riot Desktop
Discord
gedit
terminal windows


[01-Feb-19 04:24 AM] SHossain#0007
SSD is Samsung 970 PRO M.2


[01-Feb-19 04:24 AM] SHossain#0007
will change that to 512GB 960 PRO M.2 and will run Ubuntu 16.04


[01-Feb-19 04:25 AM] SHossain#0007
need to shut down and open my laptop now


[01-Feb-19 04:25 AM] artem.pikulin#0794
Please wait a bit üôÇ


[01-Feb-19 04:25 AM] SHossain#0007
ok


[01-Feb-19 04:25 AM] artem.pikulin#0794
Let's collect more info on current system.


[01-Feb-19 04:26 AM] SHossain#0007
ok


[01-Feb-19 04:27 AM] artem.pikulin#0794
Please run `sudo tcpdump host 27.102.107.27 -A -n > dump.txt`, then restart MM2 and use it until you see Electrum errors. Let's see what happens with TCP connection between your machine and `electrum1.cipig.net`.


[01-Feb-19 04:28 AM] artem.pikulin#0794
When it's done please send the dump here (make sure it has some data after you enable Electrums) and then run another OS on your machine.


[01-Feb-19 04:28 AM] cipi#4502
sorry, i don't have testnet coins


[01-Feb-19 04:30 AM] SHossain#0007
@artem.pikulin i had mm2 killed after the error. shall i get the error first > get tcpdump > then restart?


[01-Feb-19 04:31 AM] artem.pikulin#0794
Please run tcpdump `before` you start the MM2, the dump will be less-less useful if it captures only after-error state.


[01-Feb-19 04:31 AM] SHossain#0007
ok


[01-Feb-19 04:34 AM] artem.pikulin#0794
After you enable coins please do `cat dump.txt` from another session to make sure it captures packets to dump.


[01-Feb-19 04:34 AM] artem.pikulin#0794
And only then start doing other stuff üôÇ


[01-Feb-19 04:36 AM] SHossain#0007
it's empty


[01-Feb-19 04:36 AM] SHossain#0007
dump.txt file is 0 bytes


[01-Feb-19 04:36 AM] artem.pikulin#0794
Did you enable coins in electrum mode?


[01-Feb-19 04:37 AM] SHossain#0007
the first terminal is still showing
```
sudo tcpdump host 27.102.107.27 -A -n > dump.txt
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on enp110s0, link-type EN10MB (Ethernet), capture size 262144 bytes
```


[01-Feb-19 04:37 AM] SHossain#0007
yes, i enabled coins in electrum mode


[01-Feb-19 04:37 AM] artem.pikulin#0794
Do you have interfaces other than `enp110s0`?


[01-Feb-19 04:38 AM] SHossain#0007
yes


[01-Feb-19 04:38 AM] SHossain#0007
```
enp110s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.0.7  netmask 255.255.255.0  broadcast 192.168.0.255
        inet6 fe80::e872:9dd3:2d5b:f5a0  prefixlen 64  scopeid 0x20<link>
        ether 80:ca:ca:ac:ac:8f  txqueuelen 1000  (Ethernet)
        RX packets 246950  bytes 280203398 (280.2 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 160968  bytes 18496646 (18.4 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 18  
```


[01-Feb-19 04:38 AM] cipi#4502
likely you are connecting to another electrum... 27.102.107.27 is electrum1.cipig.net in Korea... maybe you are connecting to electrum1.cipig.net from Europe, which has 195.201.12.150


[01-Feb-19 04:39 AM] SHossain#0007
ok. changing the ip


[01-Feb-19 04:39 AM] cipi#4502
or maybe 192.169.7.252 (electrum1.cipig.net in North America)... if possible, use the DNS name, not the IP


[01-Feb-19 04:39 AM] artem.pikulin#0794
Aha, so Shossain might use another IP...


[01-Feb-19 04:40 AM] artem.pikulin#0794
It's actually quite important information.


[01-Feb-19 04:40 AM] artem.pikulin#0794
@SHossain please do `ping electrum1.cipig.net`


[01-Feb-19 04:40 AM] cipi#4502
yes, every entry (electrum1-3) has 3 possible IPs, one in Korea, one in Germany and one in California... depending on your own location, you get a different IP


[01-Feb-19 04:41 AM] SHossain#0007
```
ping electrum1.cipig.net
PING electrum1.cipig.net (195.201.12.150) 56(84) bytes of data.
64 bytes from static.150.12.201.195.clients.your-server.de (195.201.12.150): icmp_seq=1 ttl=54 time=29.1 ms
64 bytes from static.150.12.201.195.clients.your-server.de (195.201.12.150): icmp_seq=2 ttl=54 time=28.0 ms
64 bytes from static.150.12.201.195.clients.your-server.de (195.201.12.150): icmp_seq=3 ttl=54 time=26.8 ms
64 bytes from static.150.12.201.195.clients.your-server.de (195.201.12.150): icmp_seq=4 ttl=54 time=25.7 ms
64 bytes from static.150.12.201.195.clients.your-server.de (195.201.12.150): icmp_seq=5 ttl=54 time=34.0 ms
64 bytes from static.150.12.201.195.clients.your-server.de (195.201.12.150): icmp_seq=6 ttl=54 time=32.6 ms
64 bytes from static.150.12.201.195.clients.your-server.de (195.201.12.150): icmp_seq=7 ttl=54 time=30.7 ms
64 bytes from static.150.12.201.195.clients.your-server.de (195.201.12.150): icmp_seq=8 ttl=54 time=28.8 ms
^C
--- electrum1.cipig.net ping statistics ---
8 packets transmitted, 8 received, 0% packet loss, time 7010ms
rtt min/avg/max/mdev = 25.766/29.527/34.073/2.654 ms
```


[01-Feb-19 04:41 AM] artem.pikulin#0794
It might be issue with specific electrum servers.


[01-Feb-19 04:41 AM] SHossain#0007
hardcoded ip is better instead of DNS?


[01-Feb-19 04:41 AM] SHossain#0007
i mean for electrum servers


[01-Feb-19 04:41 AM] artem.pikulin#0794
Please ping `electrum2` and then `electrum3`.


[01-Feb-19 04:42 AM] SHossain#0007
```
ping electrum2.cipig.net
PING electrum2.cipig.net (195.201.81.113) 56(84) bytes of data.
64 bytes from static.113.81.201.195.clients.your-server.de (195.201.81.113): icmp_seq=1 ttl=53 time=46.4 ms
64 bytes from static.113.81.201.195.clients.your-server.de (195.201.81.113): icmp_seq=2 ttl=53 time=31.7 ms
64 bytes from static.113.81.201.195.clients.your-server.de (195.201.81.113): icmp_seq=3 ttl=53 time=30.4 ms
64 bytes from static.113.81.201.195.clients.your-server.de (195.201.81.113): icmp_seq=4 ttl=53 time=31.5 ms
64 bytes from static.113.81.201.195.clients.your-server.de (195.201.81.113): icmp_seq=5 ttl=53 time=39.5 ms
^C
--- electrum2.cipig.net ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4006ms
rtt min/avg/max/mdev = 30.408/35.962/46.452/6.174 ms
```


[01-Feb-19 04:42 AM] SHossain#0007
```
ping electrum3.cipig.net
PING electrum3.cipig.net (195.201.83.86) 56(84) bytes of data.
64 bytes from static.86.83.201.195.clients.your-server.de (195.201.83.86): icmp_seq=1 ttl=52 time=38.8 ms
64 bytes from static.86.83.201.195.clients.your-server.de (195.201.83.86): icmp_seq=2 ttl=52 time=28.6 ms
64 bytes from static.86.83.201.195.clients.your-server.de (195.201.83.86): icmp_seq=3 ttl=52 time=37.7 ms
64 bytes from static.86.83.201.195.clients.your-server.de (195.201.83.86): icmp_seq=4 ttl=52 time=30.3 ms
^C
--- electrum3.cipig.net ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3001ms
rtt min/avg/max/mdev = 28.636/33.875/38.818/4.467 ms
```


[01-Feb-19 04:43 AM] cipi#4502
DNS is better, because you get the IP of an electrum servers near your own location... else it would not be possible to get such nice ping times as 30ms... if you are from Australia and connect to the servers in Germany your ping time would be something like 250ms


[01-Feb-19 04:43 AM] artem.pikulin#0794
My seednode uses same IPs as you get @SHossain so shouldn't be issue with servers.


[01-Feb-19 04:44 AM] artem.pikulin#0794
@cipi I have 300ms ping to Electrums but still works fine for some reason and not fine on @SHossain machine üôÇ


[01-Feb-19 04:45 AM] cipi#4502
DNS is located at Amazon AWS and they measure the ping times and decide which IP you get


[01-Feb-19 04:46 AM] SHossain#0007
afaik, my broadband connection is not the fastest in the world, but should be very stable and from the best broadband provider in UK, Virgin media


[01-Feb-19 04:46 AM] artem.pikulin#0794
@SHossain please hold on and give me 5 minutes, I need to write down a plan for you üôÇ


[01-Feb-19 04:46 AM] SHossain#0007
sure


[01-Feb-19 04:48 AM] cipi#4502
btw, this DNS approach also spreads the load, else everybody would connect to the same server... this way the load spreads over 3 servers

{Reactions}
üëçüèΩ 

[01-Feb-19 04:53 AM] siu#3920
does anyone have the list for the electrum servers available?


[01-Feb-19 04:54 AM] siu#3920
also scripts for activating ERC20 or ETH


[01-Feb-19 04:54 AM] siu#3920
need to refresh my mind on these


[01-Feb-19 04:54 AM] SHossain#0007
eth/erc20 activation was like native coins


[01-Feb-19 04:56 AM] artem.pikulin#0794
@SHossain to be sure that MM2 won't occasionally get another IP due to load balancing please change electrum enable scripts from DNS to IPs mentioned below, the test plan is:
1. Start dumping using the IPs that we got from your pings `sudo tcpdump -e "host 195.201.12.150 or host 195.201.81.113 or host 195.201.83.86" -A -n > dump1.txt`.
2. Run MM2, enable electrums, replace `electrum1.cipig.net` to `195.201.12.150` and do same for other DNS/IPs.
3. Make sure that `dump1.txt` actually has any data.
4. Use MM2 until errors happen.
5. Wait about a minute, see few more error messages, stop MM2 and then stop tcpdump.


[01-Feb-19 04:57 AM] artem.pikulin#0794
Make a second run, all steps are same except electrum IPs: `sudo tcpdump -e "host 27.102.107.27 or host 27.102.107.28 or host 195.201.83.86" -A -n > dump2.txt`


[01-Feb-19 04:57 AM] artem.pikulin#0794
Second dump contains IPs to which DNS resolves on my location.


[01-Feb-19 04:58 AM] cipi#4502
```# Korea - ap-northeast-2
27.102.107.27
27.102.107.28
27.102.107.29 (offline because stuff)

# California - us-west-1
192.169.7.252
69.12.77.197
23.152.0.28

# Germany - eu-central-1
195.201.12.150
195.201.81.113
195.201.83.86```


[01-Feb-19 04:58 AM] artem.pikulin#0794
Make sure you dump to different files also üôÇ


[01-Feb-19 04:59 AM] artem.pikulin#0794
Because if you occasionally use same name you'll have to repeat the test run.


[01-Feb-19 05:00 AM] artem.pikulin#0794
@SHossain I got to go now, please send the dumps here when they are ready along with MM2 logs and then proceed to another OS test. Thanks a lot!


[01-Feb-19 05:01 AM] SHossain#0007
will do.


[01-Feb-19 05:01 AM] artem.pikulin#0794
@siu `curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ETH\"}"
` will enable ETH and return your address and balance.


[01-Feb-19 05:02 AM] artem.pikulin#0794
As I got to go could someone please share his ETH testnet address? I will send you Ropsten ETH and you will be able to send it to @siu.


[01-Feb-19 05:03 AM] siu#3920
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ETH\"}"
{"error":"lp_coins:816] lp_coins:624] Coin ETH already initialized"}```


[01-Feb-19 05:03 AM] siu#3920
whats wrong here?


[01-Feb-19 05:03 AM] artem.pikulin#0794
You try to enable it second time I guess.


[01-Feb-19 05:04 AM] artem.pikulin#0794
Please restart and try again.


[01-Feb-19 05:04 AM] siu#3920
the first time it said this: ```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ETH\"}"
{"error":"rpc:277] rpc_clients:144] invalid format"}```


[01-Feb-19 05:04 AM] siu#3920
ok


[01-Feb-19 05:05 AM] siu#3920
ahh, sure, i need to add it to coins file


[01-Feb-19 05:05 AM] siu#3920
sorry


[01-Feb-19 05:05 AM] artem.pikulin#0794
Yes, and also it should have `"etomic":"0x0000000000000000000000000000000000000000"` field.


[01-Feb-19 05:06 AM] artem.pikulin#0794
The ETOMIC coin is not used anymore, but field is still there helping to detect it's ETH/ERC20 and not UTXO.


[01-Feb-19 05:06 AM] siu#3920
```{"address":"0x0bb040504daf112bfcf37548df477d7f7fe6f506","balance":10.12458665,"result":"success"}```


[01-Feb-19 05:06 AM] siu#3920
i have some ETH! :p


[01-Feb-19 05:06 AM] artem.pikulin#0794
https://ropsten.etherscan.io/address/0x0bb040504daf112bfcf37548df477d7f7fe6f506


[01-Feb-19 05:06 AM] artem.pikulin#0794
Yeah


[01-Feb-19 05:07 AM] siu#3920
cool


[01-Feb-19 05:07 AM] siu#3920
ok.


[01-Feb-19 05:07 AM] artem.pikulin#0794
Let me setup the selling order on seednode.


[01-Feb-19 05:07 AM] siu#3920
so, how is the new format for ./sell?


[01-Feb-19 05:07 AM] artem.pikulin#0794
I will sell BEER for ETH.


[01-Feb-19 05:07 AM] siu#3920
ok


[01-Feb-19 05:10 AM] siu#3920
can you please share what ./sell script you use? i want to familiarize with it


[01-Feb-19 05:11 AM] SHossain#0007
@artem.pikulin now, i'm getting dump data üòÉ


[01-Feb-19 05:11 AM] SHossain#0007
capturing now


[01-Feb-19 05:11 AM] artem.pikulin#0794
@siu `curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"setprice\",\"base\":\"$1\",\"rel\":\"$2\",\"price\":0.9}"`


[01-Feb-19 05:11 AM] artem.pikulin#0794
`{"bids":[],"numbids":0,"biddepth":0,"asks":[{"coin":"BEER","address":"RJTYiYeJ8eVvJ53n2YbrVmxWNNMVZjDGLh","price":0.89999998,"numutxos":0,"avevolume":0,"maxvolume":10112.08775118,"depth":0,"pubkey":"5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12","age":9,"zcredits":0}],"numasks":1,"askdepth":0,"base":"BEER","rel":"ETH","timestamp":1549026639,"netid":9999}` - BEER/ETH order is up, please try to buy.


[01-Feb-19 05:13 AM] artem.pikulin#0794
@SHossain good work! And thanks again üôÇ I will check collected data when I'm back.


[01-Feb-19 05:13 AM] SHossain#0007
got error from the first swap


[01-Feb-19 05:14 AM] SHossain#0007
i'll dm you the dump logs


[01-Feb-19 05:15 AM] SHossain#0007
2nd swap didn't start


[01-Feb-19 05:22 AM] SHossain#0007
sent the 1st dump and logs


[01-Feb-19 05:22 AM] SHossain#0007
running 2nd test


[01-Feb-19 05:23 AM] SHossain#0007
2nd run: 1st swap using 2nd set of electrum servers completed without any error displayed


[01-Feb-19 05:26 AM] cipi#4502
@SHossain what was the first set of electrums where you had problems?


[01-Feb-19 05:26 AM] SHossain#0007
`host 195.201.12.150 or host 195.201.81.113 or host 195.201.83.86`


[01-Feb-19 05:27 AM] SHossain#0007
2nd set i'm got error displayed during the 2nd swap


[01-Feb-19 05:27 AM] siu#3920
sorry, im back


[01-Feb-19 05:27 AM] cipi#4502
weird... that are the "best" servers, the ones at Hetzner


[01-Feb-19 05:27 AM] SHossain#0007
```
01 13:26:05, rpc_clients:694] V4(195.201.83.86:10024) Didn't receive any data since 1549027546. Shutting down the connection.
01 13:26:05, rpc_clients:694] V4(27.102.107.28:10024) Didn't receive any data since 1549027536. Shutting down the connection.
01 13:26:05, lp_swap:656] Taker payment spend tx 04a056fd368db2132e54b758171e8df7f61f3cf324e2e2cb8a5bb1fb967699f7
01 13:26:07, rpc_clients:720] V4(27.102.107.28:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
01 13:26:07, rpc_clients:720] V4(195.201.83.86:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
```


[01-Feb-19 05:27 AM] SHossain#0007
this was the error. but, swap completed successfully


[01-Feb-19 05:27 AM] SHossain#0007
issuing more buy order, and capturing dumps


[01-Feb-19 05:28 AM] SHossain#0007
same error on the 3rd one


[01-Feb-19 05:28 AM] SHossain#0007
but, nothing like the very first set of electrum ip sets


[01-Feb-19 05:28 AM] siu#3920
```./buy
{"result":"success","swaps":[[2107152530, 747926005], [3285304086, 3669280482], [773491812, 4122364206]],"netamounts":[],"pending":{"uuid":"7182b6c062feb8f855659cfd37051da35868f353792cad308778336c357d3538","expiration":1549027830,"timeleft":119,"tradeid":1837535891,"requestid":0,"quoteid":0,"bob":"BEER","base":"BEER","basevalue":1.00040019,"alice":"ETH","rel":"ETH","relvalue":1.00020000,"desthash":"7a28b235e16308cdc72de1dcef23cc5de602f3cd5c7f55cfb79e88dbdb572564","aliceid":2616601946},"uuid":"7182b6c062feb8f855659cfd37051da35868f353792cad308778336c357d35```


[01-Feb-19 05:28 AM] siu#3920
here i go


[01-Feb-19 05:29 AM] SHossain#0007
actually, the errors are being displayed more and more


[01-Feb-19 05:29 AM] SHossain#0007
@cipi if you want the dumps, let me know, i'll DM you


[01-Feb-19 05:30 AM] cipi#4502
sure, maybe i can find some useful correlation


[01-Feb-19 05:31 AM] siu#3920
``` 2019-02-01 09:30:53 -0400 [swap uuid=7182b6c062feb8f855659cfd37051da35868f353792cad308778336c357d3538] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```


[01-Feb-19 05:31 AM] siu#3920
this is it?


[01-Feb-19 05:31 AM] SHossain#0007
using 2nd set of ips, now i have the errors more after 4th swap completed. 5th swap didn't start. i'll capture 2 minutes more and then uploading all


[01-Feb-19 05:32 AM] SHossain#0007
that is swap completed  @siu


[01-Feb-19 05:33 AM] SHossain#0007
finally `time expired for Alice_request` for the 5th swap


[01-Feb-19 05:33 AM] SHossain#0007
no other swap starts. orderbook disappeared


[01-Feb-19 05:33 AM] SHossain#0007
stopping dump


[01-Feb-19 05:34 AM] siu#3920
wow, ETH/BEER swap went as smooth as baby cheeks


[01-Feb-19 05:35 AM] SHossain#0007
while these errors happen, my home network suffers. (all active connections gets disconnected from other computers. i have some miners on the same network and some of them kind of restarts)


[01-Feb-19 05:35 AM] SHossain#0007
i have noticed this yesterday and today


[01-Feb-19 05:36 AM] SHossain#0007
ssh connections gets disconnected on other machines of the network


[01-Feb-19 05:38 AM] SHossain#0007
i have seen similar issues last year while testing marketmaker1 using electrum mode. Slack app suffered most that time (frequent connection errors)


[01-Feb-19 05:38 AM] SHossain#0007
@artem.pikulin @cipi i've DM'd you the 2nd set dump logs


[01-Feb-19 05:40 AM] artem.pikulin#0794
@SHossain Seems like it's not network issue.


[01-Feb-19 05:40 AM] artem.pikulin#0794
@SHossain I haven't gone yet


[01-Feb-19 05:40 AM] SHossain#0007
haha...ok


[01-Feb-19 05:40 AM] artem.pikulin#0794
Please don't reinstall OS


[01-Feb-19 05:41 AM] artem.pikulin#0794
How many unspents does your address have?


[01-Feb-19 05:41 AM] artem.pikulin#0794
I guess there're dozens.


[01-Feb-19 05:41 AM] SHossain#0007
need to check how many


[01-Feb-19 05:42 AM] artem.pikulin#0794
I can see there are many of thems and Electrum client seems to start getting stuck when all of these are requested from servers.


[01-Feb-19 05:44 AM] artem.pikulin#0794
Please don't change anything with your address, you can stop testing for now, I will need to recreate issue on my machine with your UTXOs set.


[01-Feb-19 05:45 AM] SHossain#0007
checking the utxo amounts. i had a lot as far as i remember


[01-Feb-19 05:46 AM] SHossain#0007
BEER: 68 utxos
PIZZA: 133 utxos


[01-Feb-19 05:48 AM] SHossain#0007
i guess not too many utxos :abusedsmily:


[01-Feb-19 05:49 AM] artem.pikulin#0794
Yes, but it's good case for testing.


[01-Feb-19 05:49 AM] artem.pikulin#0794
Please keep it like this üôÇ


[01-Feb-19 05:50 AM] artem.pikulin#0794
Did you use same passphrase on dedicated server?


[01-Feb-19 05:50 AM] SHossain#0007
yes


[01-Feb-19 05:50 AM] SHossain#0007
same passphrase


[01-Feb-19 05:50 AM] SHossain#0007
i can use different if needed


[01-Feb-19 05:50 AM] SHossain#0007
with fresh funds of 1 utxo


[01-Feb-19 05:50 AM] artem.pikulin#0794
Anyway dedicated network should be faster.


[01-Feb-19 05:50 AM] artem.pikulin#0794
Yes, please try another address with 1 UTXO and check if error is gone.


[01-Feb-19 05:51 AM] SHossain#0007
ok. trying a new seed on the same computer

{Reactions}
üëç 

[01-Feb-19 05:51 AM] SHossain#0007
let me find a funny seed first üòõ


[01-Feb-19 06:00 AM] SHossain#0007
using DNS based electrum list and new seed with only 1 utxo for each coin
```
{"address":"RXmtP1PVH1ChWkL6EwM1p2LqJx8kMMwj88","balance":77.7,"result":"success"}{"address":"RXmtP1PVH1ChWkL6EwM1p2LqJx8kMMwj88","balance":77.7,"result":"success"}
```


[01-Feb-19 06:01 AM] SHossain#0007
first swap going through fine it seems


[01-Feb-19 06:02 AM] SHossain#0007
damn! i spoke too soon
```
01 14:02:06, rpc_clients:694] V4(195.201.81.113:10024) Didn't receive any data since 1549029705. Shutting down the connection.
01 14:02:06, rpc_clients:694] V4(195.201.83.86:10024) Didn't receive any data since 1549029705. Shutting down the connection.
01 14:02:15, rpc_clients:720] V4(195.201.81.113:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
01 14:02:15, rpc_clients:720] V4(195.201.83.86:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
01 14:02:25, lp_swap:656] Taker payment spend tx 385e5d2175f881d04a9be73d6e9a675326cf6b1f7652a61074ac00bc8e53c86f
01 14:02:26, lp_swap:685] Maker payment spend tx 1c17628bcf52586fab622178ba87ad02d9e3a30c1af6c5a78965ef4424a05737
¬∑ 2019-02-01 14:02:26 +0000 [swap uuid=0fea3f0029bef19ae8f2b08bbbff43c40bf8a350ac148ba6cd538829a5f8a5a1] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```


[01-Feb-19 06:06 AM] Mark81#4505
Hi. Happy to announce that on windows 10 i have conducted one atomic swap and three simultaneous swaps perfectly with test coins without any problems.

{Reactions}
üëåüèΩ üéä (2) 

[01-Feb-19 06:08 AM] cipi#4502
the 195.201.x.x are the electrums is Germany, they are the best what we have... load is very low (0.1 - 0.3 with `AMD EPYC 7401P 24-Core Processor`) and they have 128GB RAM... i can't imagine the problem is with the servers itself... very strange


[01-Feb-19 06:13 AM] SHossain#0007
let's see what Artem finds out from my log dumps


[01-Feb-19 06:13 AM] Mark81#4505
Electrum connection errors.


[01-Feb-19 06:16 AM] artem.pikulin#0794
@@SHossain please do tcpdump with new passphrase too.


[01-Feb-19 06:17 AM] SHossain#0007
ok


[01-Feb-19 06:25 AM] SHossain#0007
error on first swap using new seed and 2nd set of electrum servers first
```
¬∑ 2019-02-01 14:24:35 +0000 [swap uuid=ab67ebd1ad3e7f9bf26f104d51303d4f8300ca18af3f0e406d4c0a7145094e34] Waiting for Maker negotiated‚Ä¶ Error: timeout
    Waiting for Maker negotiation data‚Ä¶ Done.
01 14:24:35, lp_ordermatch:786] Swap finished with error (-1000, "Error getting \'negotiated@tcp://195.201.116.176:32156\': timeout")
```


[01-Feb-19 06:26 AM] SHossain#0007
swap didn't complete or being very slow


[01-Feb-19 06:31 AM] SHossain#0007
2nd swap displayed this error
```
01 14:30:42, rpc_clients:694] V4(195.201.83.86:10024) Didn't receive any data since 1549031419. Shutting down the connection.
01 14:30:50, rpc_clients:720] V4(195.201.83.86:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
```


[01-Feb-19 06:37 AM] cipi#4502
would it be possible to set the timeouts higher, so that it takes longer till mm2 shows `Didn't receive any data since 1549031419. Shutting down the connection.`? I think that depnding on the number of UTXOs it simply takes a bit longer to get the UTXOs from electrum.


[01-Feb-19 06:42 AM] SHossain#0007
tried again with first set of ips and the first swap displayed error
```
01 14:36:55, lp_ordermatch:783] Entering the taker_swap_loop
01 14:37:09, peers:1154] DHT state saved to "/home/user/.mm2/lt-dht"
01 14:37:11, lp_swap:537] Received 'negotiation@tcp://195.201.116.176:40622' (102 bytes, crc 222562368)
01 14:37:11, lp_swap:562] Sending 'negotiation-reply@tcp://195.201.116.176:40622' (102 bytes, crc 863674686)
¬∑ 2019-02-01 14:40:12 +0000 [swap uuid=7dc7b4288596d78e27ebcbed223fe8dc8ef0c70e39e462d8e48f3c49d7b86f30] Waiting for Maker negotiated‚Ä¶ Error: timeout
    Waiting for Maker negotiation data‚Ä¶ Done.
01 14:40:12, lp_ordermatch:786] Swap finished with error (-1000, "Error getting \'negotiated@tcp://195.201.116.176:40622\': timeout")
```


[01-Feb-19 06:45 AM] Mark81#4505
Is anybody else loosing agama spv connection when iniating several swap loops? Also with that it looses connection in mm2.0 to electrum servers. And swap fails.


[01-Feb-19 06:46 AM] SHossain#0007
my guess is, while using mm via electrum, it does something to local network connections


[01-Feb-19 06:48 AM] Mark81#4505
I have had restarted my router several times with this because i also lost connection with internet.


[01-Feb-19 06:50 AM] SHossain#0007
yes, i guess i tried to describe the same issue few pages up what you are having


[01-Feb-19 06:50 AM] SHossain#0007
this needs to be identified and fixed


[01-Feb-19 06:51 AM] Mark81#4505
Well its now confirmed to being.


[01-Feb-19 06:52 AM] artemciy_dice#0049
@SHossain , I'm curious how `netstat -ntu | wc -l` changes during these network-heavy SWAPs.


[01-Feb-19 06:52 AM] SHossain#0007
i'll get them. give me some time before i start the next tests


[01-Feb-19 06:53 AM] artemciy_dice#0049
I mean, are we creating a lot of connections or just topping the bandwidth over a small number of ones?


[01-Feb-19 06:58 AM] artemciy_dice#0049
@Mark81 , on Windows a corresponding tool is https://docs.microsoft.com/en-us/sysinternals/downloads/tcpview. Not exacly necessary, but just in case, it might be useful to see this high-level picture and whether it looks the same between our different hosts.


[01-Feb-19 07:04 AM] cipi#4502
i think it is the bandwith, since the number of connections does not seem to increase when i look at the electrum servers


[01-Feb-19 07:05 AM] artemciy_dice#0049
Yeah, and yesterday we were checking the number of open file descriptors and it was small (~123). But netstat might still show TIME_WAIT churn which sometimes might be a problem for the router (I'm surprised that the routers fail).


[01-Feb-19 07:07 AM] cipi#4502
if you are on linux, you can install iftop `sudo apt-get install iftop` and let it run during a swap: `sudo iftop -nNP`... you should see the used bandwith for each connection made


[01-Feb-19 07:08 AM] SHossain#0007
alright. will monitor netstat and iftop now


[01-Feb-19 07:09 AM] SHossain#0007
before client start
```
netstat -ntu | wc -l
24
```


[01-Feb-19 07:10 AM] SHossain#0007
after `client` start
```
netstat -ntu | wc -l
32
```


[01-Feb-19 07:10 AM] SHossain#0007
after `electrum` script
```
netstat -ntu | wc -l
46
```


[01-Feb-19 07:11 AM] SHossain#0007
after `buy` start
```
netstat -ntu | wc -l
48
```


[01-Feb-19 07:11 AM] SHossain#0007
and, down in the middle
```
 netstat -ntu | wc -l
40
```


[01-Feb-19 07:12 AM] artemciy_dice#0049
Looks good, check netstat when after you see a connectivity failure.


[01-Feb-19 07:12 AM] SHossain#0007
more down
```
netstat -ntu | wc -l
37
```


[01-Feb-19 07:12 AM] SHossain#0007
after connectivity failure
```
netstat -ntu | wc -l
36
```


[01-Feb-19 07:13 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/540912495657746444/Screenshot_from_2019-02-01_15-12-52.png


[01-Feb-19 07:13 AM] SHossain#0007
iftop


[01-Feb-19 07:13 AM] cipi#4502
number of sessions (connections) to BEER electrum of IP 195.201.12.150

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/540912551123353621/elec_BEER.png


[01-Feb-19 07:13 AM] SHossain#0007
after swap completed message
```
netstat -ntu | wc -l
41
```


[01-Feb-19 07:15 AM] artemciy_dice#0049
Cool, thanks. So we only create a lightest of loads on the connection tracking, but I don't readily see why a router would misbehave after a bit of bandwidth.


[01-Feb-19 07:16 AM] SHossain#0007
could bandwidth be issue? (i guess not)


[01-Feb-19 07:17 AM] SHossain#0007
currently, i'm not doing other bandwidth intensive test


[01-Feb-19 07:18 AM] SHossain#0007
no blockchain downloading, no live streaming on TV, no torrent downloading


[01-Feb-19 07:23 AM] Mark81#4505
@artemciy_dice  well its Huawei so it doesn't suprise me a bit.


[01-Feb-19 07:38 AM] artemciy_dice#0049
From @Mark81 's TCPView snapshot it looks like we were talking with three Electrum servers and the load was really low.


[01-Feb-19 07:38 AM] artemciy_dice#0049
```
mm2.exe    13080    TCP    192.168.100.160    58891    195.201.12.150    10022    ESTABLISHED    18    1¬†600    18    4¬†748                        
mm2.exe    13080    TCP    192.168.100.160    58893    195.201.81.113    10022    ESTABLISHED    17    1¬†450    17    4¬†661                        
mm2.exe    13080    TCP    192.168.100.160    58895    195.201.83.86    10022    ESTABLISHED    17    1¬†450    17    4¬†661                        
mm2.exe    13080    TCP    192.168.100.160    58898    195.201.12.150    10024    ESTABLISHED    26    2¬†808    26    5¬†434                        
mm2.exe    13080    TCP    192.168.100.160    58900    195.201.81.113    10024    ESTABLISHED    17    1¬†452    17    4¬†663                        
mm2.exe    13080    TCP    192.168.100.160    58904    195.201.83.86    10024    ESTABLISHED    17    1¬†452    17    4¬†663                        
```


[01-Feb-19 07:40 AM] artemciy_dice#0049
Neither the number of connections nor the bandwidth seems high enough to cause any grief.


[01-Feb-19 08:08 AM] Mark81#4505
very interesting notice.


[01-Feb-19 08:09 AM] Mark81#4505
i am not able to ping electrum server at 195.201.116.176 until i shutdown mm2.0.exe

{Reactions}
üôè 

[01-Feb-19 08:09 AM] Mark81#4505
```C:\mm2.0>ping 195.201.116.176 -t

Pinging 195.201.116.176 with 32 bytes of data:
Request timed out.
Request timed out.
Request timed out.
Reply from 195.201.116.176: bytes=32 time=78ms TTL=50
Reply from 195.201.116.176: bytes=32 time=58ms TTL=50
Reply from 195.201.116.176: bytes=32 time=60ms TTL=50
Reply from 195.201.116.176: bytes=32 time=58ms TTL=50
Reply from 195.201.116.176: bytes=32 time=57ms TTL=50
Reply from 195.201.116.176: bytes=32 time=61ms TTL=50
Reply from 195.201.116.176: bytes=32 time=58ms TTL=50
Reply from 195.201.116.176: bytes=32 time=64ms TTL=50
Reply from 195.201.116.176: bytes=32 time=55ms TTL=50
Reply from 195.201.116.176: bytes=32 time=56ms TTL=50```


[01-Feb-19 08:10 AM] Mark81#4505
after third timed out i closed mm2.0.exe


[01-Feb-19 08:12 AM] cipi#4502
`195.201.116.176` is not any of the electrums in use, not sure what that is...
this are the IPs
```# Korea - ap-northeast-2
27.102.107.27
27.102.107.28
27.102.107.29

# California - us-west-1
192.169.7.252
69.12.77.197
23.152.0.28

# Germany - eu-central-1
195.201.12.150
195.201.81.113
195.201.83.86```


[01-Feb-19 08:13 AM] Mark81#4505
ok sorry, it is this ```CONNECTED mpnet.0 fill.0 gtc.0 numpending.0 tradeid.3734835172 requestid.1080866252 quoteid.3390549974 pairstr.tcp://195.201.116.176:35756
BEER/PIZZA bid 0.95095000 ask 0.00000000
alice pairstr.(tcp://195.201.116.176:35756) pairsock.13
01 15:59:13, lp_ordermatch:779] Entering the taker_swap_loop
01 15:59:30, lp_swap:529] Received 'negotiation@tcp://195.201.116.176:35756' (102 bytes, crc 4233604207)
01 15:59:30, lp_swap:552] Sending 'negotiation-reply@tcp://195.201.116.176:35756' (102 bytes, crc 2166294816)
01 16:00:21, lp_ordermatch:601] Alice max price: 0.9509499999999999
>>>>>>>>>> received quote BEER/PIZZA 0.91294706
01 16:00:22, lp_ordermatch:1158] aliceid.2521555100 got new bestprice 0.9129470569934903 dynamictrust -1.09558284 (unconf 0) slowresponse.0
01 16:00:24, lp_ordermatch:1225] send LP_connect aliceid.2521555100 0.9129470569934903
01 16:00:24, lp_ordermatch:1540] CONNECTED.({"address":"RJTYiYeJ8eVvJ53n2YbrVmxWNNMVZjDGLh","aliceid":2521555100,"base":"BEER","desthash":"7b30bd2cb7f9209d8283e544f184d088cee8da1c4f4e2fb2ccfd4b07fc76c72b","destsatoshis":"100020000","desttxfee":"1000","etomicdest":"","etomicsrc":"","gui":"cli","maxprice":0.95095,"method":"connected","method2":"connected","pair":"tcp://195.201.116.176:29698","price":0.91294706,"proofsend CONNECT for %u-%u\n":[],"quoteid":378165410,"quotetime":1549036826,"rel":"PIZZA","requestid":1439440894,"satoshis":"109558284","srchash":"5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12","timestamp":1549036820,"tradeid":1826451806,"txfee":"1000","uuid":"441dac98981a1b42b6831437ab160c73652c58fc47df43bccb9dc372c289f1f6"})
01 16:00:25, lp_ordermatch:1110] alice 7b30bd2cb7f9209d8283e544f184d088cee8da1c4f4e2fb2ccfd4b07fc76c72b received CONNECTED.(2521555100) mpnet.0 fill.0 gtc.0```


[01-Feb-19 08:13 AM] cipi#4502
it is mm2-server, not electrum


[01-Feb-19 08:14 AM] Mark81#4505
ok, thanks.


[01-Feb-19 08:22 AM] Mark81#4505
ok another test and it seems that everything goes unreachable after launching many swaps. and once you shutdown mm2.exe everything returns to normal. ```C:\mm2.0>ping 8.8.8.8 -t

Pinging 8.8.8.8 with 32 bytes of data:
Request timed out.
Request timed out.
Request timed out.
Request timed out.
Request timed out.
Request timed out.
Request timed out.
Reply from 8.8.8.8: bytes=32 time=63ms TTL=120
Reply from 8.8.8.8: bytes=32 time=32ms TTL=120
```


[01-Feb-19 08:25 AM] SHossain#0007
correct. same behaviour most of the time with many sawps in Linux


[01-Feb-19 08:31 AM] SHossain#0007
@Yassin you don't see this channel? :abusedsmily:


[01-Feb-19 08:36 AM] Yassin#3685
yep üòÉ


[01-Feb-19 08:36 AM] Yassin#3685
it is one clic?


[01-Feb-19 08:36 AM] SHossain#0007
ok... üòÉ


[01-Feb-19 08:36 AM] Yassin#3685
:troll_hardcore:


[01-Feb-19 08:36 AM] Yassin#3685
i am noob tester


[01-Feb-19 08:36 AM] SHossain#0007
not yet


[01-Feb-19 08:36 AM] SHossain#0007
only command line testing


[01-Feb-19 08:37 AM] Yassin#3685
üòÖ


[01-Feb-19 08:37 AM] Yassin#3685
just joke in channel trading


[01-Feb-19 08:37 AM] Yassin#3685
:troll_compadre:


[01-Feb-19 08:37 AM] SHossain#0007
we will get you the first one click version when ready to test PIZZA/BEER


[01-Feb-19 08:37 AM] Yassin#3685
sure!! üòÉ


[01-Feb-19 08:38 AM] Yassin#3685
‚úå


[01-Feb-19 08:54 AM] Mark81#4505
did we have pizza faucet?


[01-Feb-19 09:08 AM] SHossain#0007
yes, we have at atomicexplorer.com


[01-Feb-19 09:09 AM] SHossain#0007
you need PIZZA funds?


[01-Feb-19 09:11 AM] Mark81#4505
thanks, still having over 50 but feeling low on that üòâ


[01-Feb-19 09:12 AM] SHossain#0007
post your address


[01-Feb-19 09:12 AM] Mark81#4505
RTBhptgeH2xq7ihCTtDKNjcYK7XvVrE5h4


[01-Feb-19 09:14 AM] SHossain#0007
777 sent 98e6c30cc48b0e9b811de9cd7feb514965870cc4b189a6156fdf257afd591ee4


[01-Feb-19 09:14 AM] Mark81#4505
yikes! Feeling loadded right now! Thanks.


[01-Feb-19 09:15 AM] SHossain#0007
you need some BEER too?


[01-Feb-19 09:16 AM] Mark81#4505
i have those around 9k


[01-Feb-19 09:16 AM] SHossain#0007
ok.


[01-Feb-19 09:23 AM] Mark81#4505
how do you return to unfinished swaps after restart?


[01-Feb-19 09:32 AM] SHossain#0007
i haven't looked into that yet.


[01-Feb-19 09:33 AM] SHossain#0007
we are still trying to identify the issues i'm having. you also experienced the same on Windows


[01-Feb-19 09:54 AM] artemciy_dice#0049
We don't have that part yet, wanted to redesign it (given that SWAP restoration is about reliability, it has to be rigoriously tested and improve reliability rather than being something of an untested appendix).
The problem I see is that the machinery used to continue the SWAP after a restart might in fact add extra complexity and make SWAPs less reliable and harder to debug if something happens. Does it make sense anyone?
So there's this idea of only trying to restore the SWAP when we reach the stages where it can not be rolled back automatically. In order to minimize the extra complexity, at least at first. Thoughts?


[01-Feb-19 10:00 AM] SHossain#0007
my suggestion would be to make it stable step by step rather than putting everything together

{Reactions}
abusedsmily 

[01-Feb-19 10:01 AM] artemciy_dice#0049
Exactly!


[01-Feb-19 10:01 AM] Mark81#4505
I agree with @SHossain

{Reactions}
üëçüèΩ 

[01-Feb-19 10:02 AM] artemciy_dice#0049
Cool, thanks for your input guys!

{Reactions}
üëçüèΩ (2) 

[01-Feb-19 11:35 AM] siu#3920
```01 19:24:41, lp_ordermatch:1229] send LP_connect aliceid.954567175 0.9758599047866885
01 19:24:41, lp_ordermatch:1114] alice 7a28b235e16308cdc72de1dcef23cc5de602f3cd5c7f55cfb79e88dbdb572564 received CONNECTED.(954567175) mpnet.0 fill.0 gtc.0
CONNECTED mpnet.0 fill.0 gtc.0 numpending.0 tradeid.490544040 requestid.3468385190 quoteid.323893582 pairstr.tcp://195.201.116.176:19990
BEER/ETH bid 1.00100000 ask 0.00000000
alice pairstr.(tcp://195.201.116.176:19990) pairsock.9
01 19:24:41, lp_ordermatch:783] Entering the taker_swap_loop
01 19:24:59, lp_swap:537] Received 'negotiation@tcp://195.201.116.176:19990' (102 bytes, crc 1094810463)
01 19:24:59, lp_swap:562] Sending 'negotiation-reply@tcp://195.201.116.176:19990' (102 bytes, crc 919275605)
01 19:26:07, lp_swap:563] Received 'negotiated@tcp://195.201.116.176:19990' (1 bytes, crc 2768625435)
01 19:26:08, lp_swap:585] Taker fee tx hash 0x6550bbc759b11ef3f343098f5e8ff2e330e959c0c1845ff454ef8c3b65607ddf
01 19:26:08, lp_swap:586] Sending 'taker-fee@tcp://195.201.116.176:19990' (107 bytes, crc 2414083106)
01 19:27:12, peers:1154] DHT state saved to "/home/siu/.mm2/lt-dht"
```


[01-Feb-19 11:35 AM] siu#3920
something doesnt seem right on this swap @artem.pikulin


[01-Feb-19 11:36 AM] siu#3920
it got stuck here


[01-Feb-19 11:44 AM] siu#3920
```01 19:37:12, peers:1154] DHT state saved to "/home/siu/.mm2/lt-dht"
¬∑ 2019-02-01 15:37:38 -0400 [swap uuid=a4997872e4f2eda2562adf1380e28e380b55b1c44a31395d1d0812559603ca4f] Waiting for Maker payment‚Ä¶ Error: timeout
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
01 19:37:38, lp_ordermatch:786] Swap finished with error (-1005, "Error getting \'maker-payment@tcp://195.201.116.176:19990\': timeout")
```


[01-Feb-19 04:56 PM] siu#3920
```{"error":"lp_coins:829] lp_coins:624] Coin BTC already initialized"}```


[01-Feb-19 04:56 PM] siu#3920
BTC gives me this error... mm2 was just started and this was the first try to activate electrum


[01-Feb-19 04:56 PM] siu#3920
console printed: ```02 00:55:26, common:655] RPC error response: lp_coins:829] lp_coins:624] Coin BTC already initialized
```


[01-Feb-19 04:56 PM] siu#3920
i guess it has to do with btc bein in testnet only?


[02-Feb-19 12:48 AM] namhoang28#4328
hi guys
i need some more PIZZA for testing. could anyone send me some of it? `RRVJBpA5MoeTo3beA1iP6euWWrWcJdJtXu `


[02-Feb-19 12:58 AM] jl777c#5810
sent 79ebfaaac86bd7bbd6bf2f78d9c0283d83f6f36647a6e0494d54702fa956def4


[02-Feb-19 12:59 AM] namhoang28#4328
@jl777c thanks : D


[02-Feb-19 03:53 AM] SHossain#0007
started a swap and it is running for 7 minutes. not finished yet.


[02-Feb-19 04:07 AM] SHossain#0007
20 minutes and counting


[02-Feb-19 04:16 AM] SHossain#0007
broken pipe. it seems we need to wait for Artem's fix to arrive


[02-Feb-19 04:18 AM] siu#3920
it seems like artems servers went down or something


[02-Feb-19 04:18 AM] siu#3920
my swaps have been failing since yesterday evening


[04-Feb-19 03:01 AM] artem.pikulin#0794
@SHossain @siu Hi, I've had to restart my node , tried to swap and it always failed on getting the txfee data, the swaps are going well after restart, please recheck.


[04-Feb-19 03:03 AM] artem.pikulin#0794
@siu BTC and KMD are already enabled in "non-inititalized" mode by default, the bug is they can't be enabled manually because of this. We will fix it on this week.

{Reactions}
üëå (2) 

[04-Feb-19 03:10 AM] artem.pikulin#0794
@SHossain After exploring your TCP dumps I can say that issue is not related to  a number of UTXOs, it takes about 500ms to receive the data and timeout is not triggered. However the issue always occur as follows: Electrum resubscribes to `blockchain.headers` in loop, it doesn't cause repetitive subscription messages from server and it's the easiest way to do it in case of reconnection. It doesn't cause issues on my seed node or workstation, I have not ever seen `01 13:29:49, rpc_clients:694] V4(27.102.107.27:10024) Didn't receive any data since 1549027760. Shutting down the connection.` messages.


[04-Feb-19 03:12 AM] artem.pikulin#0794
The issue always appears with following dumps:
```
13:25:46.715482 80:fa:5b:4f:a3:8f > c0:ff:d4:46:94:6f, ethertype IPv4 (0x0800), length 172: 192.168.0.7.38648 > 195.201.83.86.10024: Flags [P.], seq 5572:5678, ack 18736, win 530, options [nop,nop,TS val 3048451018 ecr 55760161], length 106
E...w.@.@.........SV..'(.68\0.......-......
.....R.!{"jsonrpc":"2.0","id":"blockchain.headers.subscribe","method":"blockchain.headers.subscribe","params":[]}

13:25:46.953274 80:fa:5b:4f:a3:8f > c0:ff:d4:46:94:6f, ethertype IPv4 (0x0800), length 172: 192.168.0.7.38648 > 195.201.83.86.10024: Flags [P.], seq 5572:5678, ack 18736, win 530, options [nop,nop,TS val 3048451256 ecr 55760161], length 106
E...w.@.@.........SV..'(.68\0.......,......
.....R.!{"jsonrpc":"2.0","id":"blockchain.headers.subscribe","method":"blockchain.headers.subscribe","params":[]}

13:25:47.193159 80:fa:5b:4f:a3:8f > c0:ff:d4:46:94:6f, ethertype IPv4 (0x0800), length 172: 192.168.0.7.38648 > 195.201.83.86.10024: Flags [P.], seq 5572:5678, ack 18736, win 530, options [nop,nop,TS val 3048451496 ecr 55760161], length 106
E...w.@.@.........SV..'(.68\0.......+......
.....R.!{"jsonrpc":"2.0","id":"blockchain.headers.subscribe","method":"blockchain.headers.subscribe","params":[]}
```


[04-Feb-19 03:13 AM] artem.pikulin#0794
Your OS stops receiving responses from electrum server on TCP level. It attempts to repeat the message, but no response still until forceful reconnect.


[04-Feb-19 03:18 AM] artem.pikulin#0794
For some reason it always happens with `blockchain.headers.subscribe`, @cipi do you know if Electrum server can handle such requests in "special" way? I also want to check that `blockchain.headers.subscribe` reach the server at all, could we please run tcpdumps together on @SHossain side and Electrum servers? There are just 2 possible cases:
1. Request reaches server and it doesn't respond for some reason (or it responds, but response is getting blocked somewhere between).
2. Request doesn't reach the server at all.


[04-Feb-19 03:53 AM] SHossain#0007
nice analysis @artem.pikulin. üòÉ


[04-Feb-19 03:54 AM] jl777c#5810
electrum servers have a shutoff and kill connection or stop responding to it after it sees some amount of "errors" from it. I think once you get electrum 99% reliable,the last 1% might simply not be possible to achieve. so some sort of "hot spare" connection would be needed


[04-Feb-19 04:05 AM] SHossain#0007
the first swap time expired for me :abusedsmily: 
```
connected to push.(tcp://92.243.96.175:7793) pushsock.6 valid.1  | connected to sub.(tcp://92.243.96.175:7803) subsock.7 valid.1 numactive.3
_LPaddpeer 92.243.96.175 -> numpeers.3 mypubsock.0 other.(1)
time expired for Alice_request
```


[04-Feb-19 04:06 AM] artem.pikulin#0794
MM2 Electrum client automatically attempts to send request to fallback address and also it automatically reconnects in case of errors. We are not sure yet if it caused by server or there is some issue on network level. Even if 100% reliability is not reachable it's still good for us to learn how to troubleshoot it.


[04-Feb-19 04:07 AM] artem.pikulin#0794
@SHossain did you see `set pubkey for 195.201.116.176` message? Do you also see the order in BEER/PIZZA orderbook?


[04-Feb-19 04:11 AM] SHossain#0007
yes, and yes


[04-Feb-19 04:12 AM] SHossain#0007
```
New priority.1 max_Reserved_msgs.1
¬∑ 2019-02-04 12:02:34 +0000 [dht-boot] DHT bootstrap ... Done.
found RPCPORT.8923
04 12:02:36, lp_coins:796] ticker = "BEER", method = Some("electrum"), block_count = 57552
found RPCPORT.11608
04 12:02:37, lp_coins:796] ticker = "PIZZA", method = Some("electrum"), block_count = 48853
start remote port
missing field.(maxprice) add to MM_fields[]
missing field.(maxprice) add to MM_fields[]
missing field.(maxprice) add to MM_fields[]
04 12:02:53, lp_ordermatch:603] lp_trade] Alice max price: 1.001
04 12:02:54, peers:1154] DHT state saved to "/home/user/.mm2/lt-dht"
set pubkey for 195.201.116.176 <- 5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12, pairsock.-1
connected to push.(tcp://92.243.96.175:7793) pushsock.6 valid.1  | connected to sub.(tcp://92.243.96.175:7803) subsock.7 valid.1 numactive.3
_LPaddpeer 92.243.96.175 -> numpeers.3 mypubsock.0 other.(1)
time expired for Alice_request
```


[04-Feb-19 04:12 AM] SHossain#0007
i checked orderbook before issuing buy


[04-Feb-19 04:12 AM] artem.pikulin#0794
Just have done successful swap üôÇ


[04-Feb-19 04:13 AM] artem.pikulin#0794
Ordermatch fail is still going to happen sometimes, let's wait until we refactor nanomsg out.


[04-Feb-19 04:14 AM] artem.pikulin#0794
Electrum issue seems much more dangerous as it might abort ongoing swap.


[04-Feb-19 04:15 AM] SHossain#0007
ok


[04-Feb-19 04:15 AM] artem.pikulin#0794
@SHossain Let's do the very simple test, I suspect that Electrum error should happen even without swaps. Actually it seem to happen with "fallback" connections that are less actively used.

{Reactions}
letsplay 

[04-Feb-19 04:16 AM] artem.pikulin#0794
Could you please start tcpdump and enable BEER and PIZZA with just 1 Electrum: 195.201.83.86? According to previous logs we might start seeing errors in ~10 minutes after start.


[04-Feb-19 04:17 AM] SHossain#0007
sure. doing it

{Reactions}
üëç 

[04-Feb-19 04:27 AM] cipi#4502
@artem.pikulin for some reason blockchain.headers.subscribe does not seem to work properly. I have added the KMD electrums to this site, which also uses subscribe and it looks like it does not work: https://1209k.com/bitcoin-eye/ele.php?chain=kmd (Height is 0)
i don't know why, maybe something is missing/wrong in the electrum-config for KMD: https://github.com/cipig/electrumx/blob/master/electrumx/lib/coins.py#L331
i will need to investigate this

{Embed}
https://github.com/cipig/electrumx/blob/master/electrumx/lib/coins.py
cipig/electrumx
Alternative implementation of spesmilo/electrum-server - cipig/electrumx
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761


[04-Feb-19 04:30 AM] SHossain#0007
@artem.pikulin only with this electrum, the swap is going fine. capturing tcpdump. let's see


[04-Feb-19 04:35 AM] SHossain#0007
first one completed. 2nd one going through


[04-Feb-19 04:38 AM] artem.pikulin#0794
@SHossain please just leave coins enabled without swaps, the main idea is that issue happens with "idle" connections that just do pings and subscriptions.


[04-Feb-19 04:39 AM] SHossain#0007
oh. ok


[04-Feb-19 04:41 AM] SHossain#0007
capturing again


[04-Feb-19 04:47 AM] artem.pikulin#0794
@cipi Thanks for the info, I now wonder if might not rely on it at all. Does https://electrumx.readthedocs.io/en/latest/protocol-methods.html#blockchain-transaction-get `always` have `confirmations` field for all coins when `verbose=true`?


[04-Feb-19 04:47 AM] cipi#4502
the site https://1209k.com/bitcoin-eye/ele.php doesn't contain zcash-coins at all, so either subscribe does not work with `DeserializerZcash` at all, or my config is missing something
not sure about blockchain-transaction-get...


[04-Feb-19 04:49 AM] artem.pikulin#0794
Not sure if it'll solve `SHossain` issue as it more likely to be network related but still it will be easier to use it in just `request-response` mode without server pushing the events.


[04-Feb-19 04:49 AM] cipi#4502
yes, maybe it is a good idea to not use subscribe at all till i found the reason why it isn't working


[04-Feb-19 04:49 AM] artem.pikulin#0794
Is there a way just to get latest block info with it's number?


[04-Feb-19 04:50 AM] cipi#4502
haha, that is a very good question... i also searched for a way to do this, but haven't found one


[04-Feb-19 04:50 AM] cipi#4502
besides the subscribe stuff


[04-Feb-19 04:50 AM] artem.pikulin#0794
Yea, I think it's quite inconvenient...


[04-Feb-19 04:51 AM] cipi#4502
but there must be one, because `curl -s --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"getcoin\",\"coin\":\"KMD\"}"` is returning the height in mm1


[04-Feb-19 04:51 AM] SHossain#0007
@pbca26 how do you get latest block info with it's number for Agama Lite?


[04-Feb-19 04:52 AM] SHossain#0007
(using electrum)


[04-Feb-19 04:52 AM] pbca26#5430
how do you mean?


[04-Feb-19 04:53 AM] artem.pikulin#0794
@cipi AFAIK MM1 did it using `blockchain.headers.subscribe`.


[04-Feb-19 04:55 AM] Mark81#4505
@artem.pikulin on my tests i lost  connection to internet as you can see on my pint tests on friday. Googles 8.8.8 8 was unreachable when mm2.0 went on multiswap loop. After force quiting mm2.0 everything resumed normal so i think its messing up network connection.


[04-Feb-19 04:55 AM] cipi#4502
i don't think so, because it would mean that subscribe is working...
@jl777c how did mm1 get the blockheight from electrum?


[04-Feb-19 04:57 AM] artem.pikulin#0794
@cipi Subscribe `is working` in MM2, it just stops working for @SHossain for some reason.


[04-Feb-19 05:00 AM] artem.pikulin#0794
@Mark81 Hi, yes, I'm aware of it, we have agreed with @artemciy_dice that he will help you with it. He also uses Windows so it'll be more convenient for him to troubleshoot it. @artemciy_dice please ping @Mark81 when you're able to continue investigating his network outage issue.

{Reactions}
labs 

[04-Feb-19 05:01 AM] cipi#4502
ooops, i thought i does not work at all... weird


[04-Feb-19 05:01 AM] artem.pikulin#0794
@cipi But it will be easier to not use it üôÇ


[04-Feb-19 05:05 AM] cipi#4502
i haven't set XPUB_VERBYTES and XPRV_VERBYTES for KMD in electrum
this values are normally taken from src/chainparams.cpp (base58Prefixes[EXT_PUBLIC_KEY] and base58Prefixes[EXT_SECRET_KEY])
don't know if that has something to do with subscribe... maybe i should simply set them and look what happens


[04-Feb-19 05:09 AM] artem.pikulin#0794
I didn't test KMD Electrum, but BEER and PIZZA `blockchain.headers.subscribe` seem to work, it responds with latest block info, e.g.:
Request
```
13:25:46.715444 80:fa:5b:4f:a3:8f > c0:ff:d4:46:94:6f, ethertype IPv4 (0x0800), length 160: 192.168.0.7.58584 > 27.102.107.28.10024: Flags [P.], seq 5572:5678, ack 18689, win 775, length 106
E.....@.@./......fk...'(.....p..P.......{"jsonrpc":"2.0","id":"blockchain.headers.subscribe","method":"blockchain.headers.subscribe","params":[]}
```
Response:
```
13:25:47.207107 c0:ff:d4:46:94:6f > 80:fa:5b:4f:a3:8f, ethertype IPv4 (0x0800), length 537: 27.102.107.28.10022 > 192.168.0.7.41616: Flags [P.], seq 18728:19211, ack 5676, win 18666, length 483
E...2W@....d.fk.....'&...70.5t    .P.H..L..{"jsonrpc": "2.0", "method": "blockchain.headers.subscribe", "params": [{"version": 4, "prev_block_hash": "007bfa560c17a233a848d5aa980bb231cb2548b9e877ee30761fbc57fe8fa8ca", "merkle_root": "6428bc7104db8a6a55e2320910cb80ab9e348437966a853a238cc27e72671c67", "reserved": "6337e6aa4848f73b9df602882f9ec6b211983b18da583c1bf2b083281cb8435e", "timestamp": 1549027504, "bits": 537857807, "nonce": "00009260bbc89b6f93e40bf5e5fc461f8d56303df55a1ebcb27de909bb4a0003", "block_height": 56662}]}
```


[04-Feb-19 05:10 AM] cipi#4502
indeed... looks good...


[04-Feb-19 05:11 AM] cipi#4502
wonder why https://1209k.com/bitcoin-eye/ele.php?chain=kmd does not show this infos then... it is exactly the info that is missing there


[04-Feb-19 05:14 AM] SHossain#0007
@cipi i'll need your help within an hour to set up 2 electrum servers in my home network


[04-Feb-19 05:14 AM] artem.pikulin#0794
@cipi I guess it's something wrong with `1209k.com`, because I get valid response from KMD Electrums:
```
ElectrumBlockHeader { bits: 486670561, block_height: 1214012, merkle_root: ede7f7d45e1e53afef877df25fd94cb61b23fc4c8f2179a26fcf6df28b50a677, nonce: 000084f7a6ad0569df026be3078cf793bdfad9401791b1d9b1ccf69dfee60007, prev_block_hash: 0000000200c5ac6fb1cc941a15bfdb0dfef8d859580b8580b62a3d825eafbb54, timestamp: 1549286002, version: 4 }
```


[04-Feb-19 05:14 AM] SHossain#0007
this is another test case from @artem.pikulin


[04-Feb-19 05:15 AM] artem.pikulin#0794
@SHossain I need the server which I will use as MM2 node with @cipi electrums, there is no need to setup electrums at your home at least for now üôÇ


[04-Feb-19 05:15 AM] SHossain#0007
oh...ok


[04-Feb-19 05:16 AM] artem.pikulin#0794
If I need it, I can setup it by myself and help you üôÇ


[04-Feb-19 05:20 AM] cipi#4502
would be good to setup electrums that only support protocol version 1.4 and higher to see if we need to make some changes...
atm i have one running 46.4.87.18 port 10022 for BEER, the electrumx. cipig.net ones are still the old ones that also support protocol version 1.2


[04-Feb-19 05:21 AM] cipi#4502
problem is that i can't update the cipig.net ones to the new version, else mm1 will not work any more


[04-Feb-19 05:26 AM] artem.pikulin#0794
@cipi I'm testing the MM2 with `46.4.87.18` right now.


[04-Feb-19 05:27 AM] siu#3920
im testing ETH swaps again with newest code


[04-Feb-19 05:27 AM] cipi#4502
hmmm, do we need electrums with mm1-support? afaik Agama already supports the new electrums and it does not look like many people  are using mm1 with electrum


[04-Feb-19 05:27 AM] siu#3920
last week they started to fail


[04-Feb-19 05:27 AM] siu#3920
now they seem to be working again


[04-Feb-19 05:27 AM] siu#3920
maybe a seed node went down or something?


[04-Feb-19 05:27 AM] artem.pikulin#0794
Already found an error: blockheader doesn't have `bits` field anymore so MM2 fails on `blockchain.headers.subscribe`.

{Reactions}
üëå (2) 

[04-Feb-19 05:28 AM] artem.pikulin#0794
@siu 
```
artem.pikulinToday at 6:01 PM
@SHossain @siu Hi, I've had to restart my node , tried to swap and it always failed on getting the txfee data, the swaps are going well after restart, please recheck.
```


[04-Feb-19 05:29 AM] artem.pikulin#0794
The node didn't recognize the dexfee for some reason, but it started after node restart. We will investigate it after we solve current issues.


[04-Feb-19 05:30 AM] siu#3920
great! Swaps are going through for me today


[04-Feb-19 05:33 AM] siu#3920
```04 13:32:03, rpc_clients:720] V4(69.12.77.197:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
04 13:32:05, rpc_clients:694] V4(23.152.0.28:10022) Didn't receive any data since 1549287106. Shutting down the connection.
04 13:32:05, utxo:965] Electrum servers ["electrum1.cipig.net:10022", "electrum2.cipig.net:10022", "electrum3.cipig.net:10022"] ping error "rpc_clients:864] \"rpc_clients:848] rpc_clients:822] future timed out\""
04 13:32:05, rpc_clients:720] V4(23.152.0.28:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
04 13:32:09, rpc_clients:694] V4(23.152.0.28:10024) Didn't receive any data since 1549287106. Shutting down the connection.
04 13:32:13, rpc_clients:720] V4(23.152.0.28:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
04 13:32:15, rpc_clients:694] V4(192.169.7.252:10022) Didn't receive any data since 1549287106. Shutting down the connection.
04 13:32:15, rpc_clients:720] V4(192.169.7.252:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
04 13:32:23, utxo:965] Electrum servers ["electrum1.cipig.net:10024", "electrum2.cipig.net:10024", "electrum3.cipig.net:10024"] ping error "rpc_clients:864] \"rpc_clients:848] rpc_clients:822] future timed out\""
04 13:32:25, utxo:965] Electrum servers ["electrum1.cipig.net:10022", "electrum2.cipig.net:10022", "electrum3.cipig.net:10022"] ping error "rpc_clients:864] \"rpc_clients:848] rpc_clients:822] future timed out\""
04 13:32:55, rpc_clients:694] V4(23.152.0.28:10022) Didn't receive any data since 1549287158. Shutting down the connection.
```


[04-Feb-19 05:33 AM] siu#3920
I just got a bunch of these messages, might be my bad internet connection since im connected from my phone hotspot.


[04-Feb-19 05:37 AM] cipi#4502
`Already found an error: blockheader doesn't have bits field anymore so MM2 fails on blockchain.headers.subscribe.`
this could also be the reason why the mentioned site does not show the infos correctly... i can imagine it was already switched to the new behaviour with the new version


[04-Feb-19 05:38 AM] artem.pikulin#0794
@siu Please `ping 192.169.7.252` and all `cipi` electrums when you're running MM2. Let's first check how stable is your connection with these `outside` of MM.


[04-Feb-19 05:38 AM] siu#3920
swap seems to be going through even with bad connection


[04-Feb-19 05:39 AM] siu#3920
```04 13:37:43, lp_swap:611] Got maker payment 2453e85235bad909c32a43d263bbece693752ea0acfcc6c0853bca245eca6252
04 13:37:49, lp_swap:641] Taker payment tx hash 0x158837e9e49cdea258597f83af12382b20cb3ab66fd2fff8a8f402f47b46b6e7
04 13:37:49, lp_swap:644] Sending 'taker-payment@tcp://195.201.116.176:29888' (242 bytes, crc 989645155)
04 13:37:53, rpc_clients:683] V4(23.152.0.28:10024) error Os { code: 110, kind: TimedOut, message: "Connection timed out" }
04 13:37:53, rpc_clients:683] V4(69.12.77.197:10024) error Os { code: 110, kind: TimedOut, message: "Connection timed out" }
```


[04-Feb-19 05:39 AM] artem.pikulin#0794
Phone hotspot is actually very good case to test üôÇ


[04-Feb-19 05:40 AM] siu#3920
``` 2019-02-04 09:38:54 -0400 [swap uuid=e3b4c09ace5bd4c0a3f4de128758fac23ff80297629ad157fddcc131ae20f3ad] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```


[04-Feb-19 05:40 AM] siu#3920
finished even with bad connection


[04-Feb-19 05:40 AM] siu#3920
will need to leave for now, will be back later for more testing.


[04-Feb-19 05:41 AM] artem.pikulin#0794
Ok, thanks! Nice to know that MM2 is still able to swap despite the electrum connection errors.


[04-Feb-19 05:52 AM] cipi#4502
@artem.pikulin should i setup BEER and PIZZA electrums with the new electrum-version? ATM there is only one BEER electrum with new version, i can setup BEER and PIZZA on 2 servers, so we have 2 BEER and 2 PIZZA electrums for testing mm2 entirely with new electrum version


[04-Feb-19 05:57 AM] artem.pikulin#0794
@cipi Only 1 Electrum is enough to fix errors if there are some, but it will be good to have servers for Pizza too and maybe even test a single coin with different servers versions `at once`, e.g. first server is 1.2, but second is 1.4.


[04-Feb-19 05:59 AM] cipi#4502
1.2 BEER and PIZZA are already running, electrum1-3.cipig.net port 10022 is 1.2 BEER and electrum1-3.cipig.net port 10024 are 1.2 PIZZA
i will setup 1.4 BEER and PIZZA on different IPs, so we can combine them as we like


[04-Feb-19 05:59 AM] artem.pikulin#0794
Thanks!


[04-Feb-19 06:16 AM] SHossain#0007
started  swap on a 2nd machine on the same network


[04-Feb-19 06:18 AM] SHossain#0007
first swap completed. started 2nd swap


[04-Feb-19 06:24 AM] SHossain#0007
2nd swap was good. at 3rd swap, i have same issue on a 2nd machine


[04-Feb-19 06:24 AM] SHossain#0007
full console log DM'd


[04-Feb-19 06:29 AM] cipi#4502 (pinned)
ok, we have 1.4 electrums for BEER and PIZZA
```46.4.78.11 port 10022 = BEER
46.4.87.18 port 10022 = BEER
46.4.78.11 port 10024 = PIZZA
46.4.87.18 port 10024 = PIZZA```


[04-Feb-19 06:30 AM] cipi#4502
same ports, but electrum1 to electrum3.cipig.net are 1.2 electrums


[04-Feb-19 07:29 AM] artem.pikulin#0794
@cipi I've just pushed the Electrum 1.4 support to `MM2`, I tested it with BEER Electrum, the Block header format seems the only thing to fix. Also it will work with both `blockheader` formats so different electrum versions at once should just work.


[04-Feb-19 07:31 AM] artem.pikulin#0794
@MM2 community tester , @SHossain, @siu `"myipaddr":"127.0.0.1"` workaround is not required anymore (thx to @artemciy_dice!), you will see a message `üòÖ 2019-02-04 22:22:21 +0700 [myipaddr] We couldn't bind on the external IP *.*.*.* (port 47772), so NAT is likely to be present. We'll be okay though.` and MM2 should just work. Please check it when you have time.

{Reactions}
üëçüèΩ 

[04-Feb-19 07:43 AM] jl777c#5810
i think i used a getblockheader call, dont remember


[04-Feb-19 08:30 AM] SHossain#0007
both of my computers in the same home network produces similar issue. will try using a different internet provider now


[04-Feb-19 08:37 AM] SHossain#0007
compiling latest and will try without `myipaddr` option


[04-Feb-19 08:46 AM] SHossain#0007
tried 2 swaps, both came as time expired
```
04 16:39:43, lp_ordermatch:603] lp_trade] Alice max price: 1.001
time expired for Alice_request
04 16:42:39, lp_ordermatch:603] lp_trade] Alice max price: 1.001
time expired for Alice_request
```


[04-Feb-19 09:09 AM] SHossain#0007
mostly likely swaps doesn't start with latest source. tried old network as well


[04-Feb-19 09:50 AM] siu#3920
any other coins i can test?


[04-Feb-19 09:52 AM] SHossain#0007
please test BEER/PIZZA with latest source


[04-Feb-19 09:52 AM] SHossain#0007
swap is not starting for me


[04-Feb-19 09:55 AM] siu#3920
ok


[04-Feb-19 09:55 AM] siu#3920
```04 17:50:40, peers:1154] DHT state saved to "/home/siu/.mm2/lt-dht"
¬∑ 2019-02-04 13:55:23 -0400 [swap uuid=bdab7e9477ddc788d95f8f7ea163c7707bc346cd9ab5008b5f7fd39c19d1f4d4] Waiting for Maker payment‚Ä¶ Error: timeout
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
04 17:55:23, lp_ordermatch:786] Swap finished with error (-1005, "Error getting \'maker-payment@tcp://195.201.116.176:13702\': timeout")
```


[04-Feb-19 09:55 AM] siu#3920
swap of ETH and BEER on latest code failed


[04-Feb-19 09:57 AM] SHossain#0007
BEER/PIZZA swap started with my using a server and latest source


[04-Feb-19 09:59 AM] siu#3920
mine started but finished with timeout error


[04-Feb-19 10:00 AM] SHossain#0007
ended up with error


[04-Feb-19 10:00 AM] SHossain#0007
```
>>>>>>>>>> received quote BEER/PIZZA 0.92095160
04 17:56:22, lp_ordermatch:1162] aliceid.2168123015 got new bestprice 0.920951599159435 dynamictrust -1.08606056 (unconf 0) slowresponse.0
04 17:56:24, lp_ordermatch:1544] CONNECTED.
04 17:56:24, lp_ordermatch:1229] send LP_connect aliceid.2168123015 0.920951599159435
04 17:56:24, lp_ordermatch:1114] alice 7ddef60bf8582605f4b49ccecf79a8b94a64047d685747039e122ea3406c3818 received CONNECTED.(2168123015) mpnet.0 fill.0 gtc.0
CONNECTED mpnet.0 fill.0 gtc.0 numpending.0 tradeid.141271485 requestid.1840196934 quoteid.275428868 pairstr.tcp://195.201.116.176:47737
BEER/PIZZA bid 1.00100000 ask 0.00000000
alice pairstr.(tcp://195.201.116.176:47737) pairsock.10
04 17:56:24, lp_ordermatch:783] Entering the taker_swap_loop
04 17:56:42, lp_swap:537] Received 'negotiation@tcp://195.201.116.176:47737' (102 bytes, crc 2029953786)
04 17:56:42, lp_swap:562] Sending 'negotiation-reply@tcp://195.201.116.176:47737' (102 bytes, crc 1708825447)
set pubkey for 0.0.0.0 <- f42668d3243b9bdf79af8ef59fb4de9109cdab2745c8505da87bcacacb1d4a2c, pairsock.-1
¬∑ 2019-02-04 18:59:42 +0100 [swap uuid=df8a6f17fcdf5999b918ad87719519d373523ca402b1b38ff453d691c85a5c54] Waiting for Maker negotiated‚Ä¶ Error: timeout
    Waiting for Maker negotiation data‚Ä¶ Done.
04 17:59:42, lp_ordermatch:786] Swap finished with error (-1000, "Error getting \'negotiated@tcp://195.201.116.176:47737\': timeout")
```


[04-Feb-19 10:01 AM] SHossain#0007
i've removed `myipaddr` from client script


[04-Feb-19 10:01 AM] SHossain#0007
as @artemciy_dice suggested


[04-Feb-19 10:02 AM] SHossain#0007
that is from a server ^^


[04-Feb-19 10:02 AM] SHossain#0007
```
04 17:59:47, lp_ordermatch:1229] send LP_connect aliceid.1955672508 0.9528901657943145
04 17:59:47, lp_ordermatch:1114] alice f42668d3243b9bdf79af8ef59fb4de9109cdab2745c8505da87bcacacb1d4a2c received CONNECTED.(1955672508) mpnet.0 fill.0 gtc.0
CONNECTED mpnet.0 fill.0 gtc.0 numpending.0 tradeid.3414462970 requestid.3949907704 quoteid.499952011 pairstr.tcp://195.201.116.176:26428
BEER/PIZZA bid 1.00100000 ask 0.00000000
alice pairstr.(tcp://195.201.116.176:26428) pairsock.10
04 17:59:47, lp_ordermatch:783] Entering the taker_swap_loop
04 18:00:05, lp_swap:537] Received 'negotiation@tcp://195.201.116.176:26428' (102 bytes, crc 1414250854)
04 18:00:05, lp_swap:562] Sending 'negotiation-reply@tcp://195.201.116.176:26428' (102 bytes, crc 469307192)
04 18:00:24, rpc_clients:718] V4(195.201.83.86:10022) Didn't receive any data since 1549303206. Shutting down the connection.
04 18:00:25, rpc_clients:718] V4(195.201.81.113:10024) Didn't receive any data since 1549303207. Shutting down the connection.
04 18:00:25, rpc_clients:718] V4(195.201.83.86:10024) Didn't receive any data since 1549303207. Shutting down the connection.
04 18:00:27, rpc_clients:744] V4(195.201.83.86:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
04 18:00:27, rpc_clients:744] V4(195.201.81.113:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
04 18:00:27, rpc_clients:744] V4(195.201.83.86:10024) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
```


[04-Feb-19 10:02 AM] SHossain#0007
thi sis from home connection ^^


[04-Feb-19 10:04 AM] SHossain#0007
but, from home connection the swap is still in progress despite of showing errors


[04-Feb-19 10:04 AM] SHossain#0007
and, it's completed
```
04 18:03:01, lp_swap:563] Received 'negotiated@tcp://195.201.116.176:26428' (1 bytes, crc 2768625435)
04 18:03:06, lp_swap:585] Taker fee tx hash 45aceb9aa367373e41172c7e4a19b0c8bc49b1b15b322f39cfdb411cfd5778da
04 18:03:06, lp_swap:586] Sending 'taker-fee@tcp://195.201.116.176:26428' (252 bytes, crc 907523394)
04 18:03:43, lp_swap:591] Received 'maker-payment@tcp://195.201.116.176:26428' (358 bytes, crc 2669982652)
04 18:03:43, lp_swap:611] Got maker payment dbed12b313a238cdf087074398f61000d9edbfdba7fa88641a134930f871354d
04 18:03:46, lp_swap:641] Taker payment tx hash 281f2b0e442c46f18d0f4b74e0909fd780a54cb2dcba921f044b7d60f82cd89f
04 18:03:46, lp_swap:644] Sending 'taker-payment@tcp://195.201.116.176:26428' (357 bytes, crc 2343071810)
04 18:04:17, lp_swap:656] Taker payment spend tx b4d3a17e978eca5828a4f6bb554a94027acb22bab262b9b6e48a39343f2d4e1d
04 18:04:19, lp_swap:685] Maker payment spend tx 04acbe213f30467863846cc7e74df2dd6f14b2093379e0ab32660d2b962f17f8
¬∑ 2019-02-04 18:04:19 +0000 [swap uuid=81afa68c0ba837deea62fb08fdf280a289b6f3c71c7426714e9032d18cd98f9c] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```


[04-Feb-19 10:05 AM] artemciy_dice#0049
@SHossain , are you saying that the SWAP consistently fails without `"myipaddr": "127.0.0.1"`, or is it just a single test so far?


[04-Feb-19 10:06 AM] SHossain#0007
no, actually, it just completed


[04-Feb-19 10:06 AM] SHossain#0007
even though, it showed the brokenPipe error


[04-Feb-19 10:09 AM] artemciy_dice#0049
kk! The new IP selection code shouldn't be harming anything.


[04-Feb-19 10:12 AM] SHossain#0007
```
CONNECTED mpnet.0 fill.0 gtc.0 numpending.0 tradeid.3991516422 requestid.3346513310 quoteid.702630504 pairstr.tcp://195.201.116.176:50122
BEER/PIZZA bid 1.00100000 ask 0.00000000
alice pairstr.(tcp://195.201.116.176:50122) pairsock.11
04 18:05:31, lp_ordermatch:783] Entering the taker_swap_loop
04 18:05:51, lp_swap:537] Received 'negotiation@tcp://195.201.116.176:50122' (102 bytes, crc 2626390682)
04 18:05:51, lp_swap:562] Sending 'negotiation-reply@tcp://195.201.116.176:50122' (102 bytes, crc 931949974)
04 18:05:54, rpc_clients:718] V4(195.201.81.113:10022) Didn't receive any data since 1549303533. Shutting down the connection.
04 18:06:02, rpc_clients:718] V4(195.201.83.86:10022) Didn't receive any data since 1549303533. Shutting down the connection.
04 18:06:03, rpc_clients:744] V4(195.201.81.113:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
04 18:06:03, rpc_clients:744] V4(195.201.83.86:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
¬∑ 2019-02-04 18:08:51 +0000 [swap uuid=8de2cb60b83bc9681d0c42250d468ff0258154c7d09b95e08bd5c7fd1f29fdd9] Waiting for Maker negotiated‚Ä¶ Error: timeout
    Waiting for Maker negotiation data‚Ä¶ Done.
04 18:08:51, lp_ordermatch:786] Swap finished with error (-1000, "Error getting \'negotiated@tcp://195.201.116.176:50122\': timeout")
```


[04-Feb-19 10:12 AM] SHossain#0007
2nd swap from same machine and network errored out.


[04-Feb-19 10:13 AM] SHossain#0007
when these errors comes up, my whole network suffers. until error comes up, the networks stays fine.


[04-Feb-19 10:27 AM] artemciy_dice#0049
So one theory is that we have some unnecessary traffic in the communication with the public seed node, and we want to test this by doing the SWAP on a different netid, where the public seed node is not available. I'm looking at the test documentation right now to see what needs to be changed for that.


[04-Feb-19 10:36 AM] Bryan_Beus#6442
How long should the startup process hang here?

```
04 18:28:38, peers:925] DHT state saved to "/home/siddhartha/.mm2/lt-dht"
```

Been about 8 minutes.


[04-Feb-19 10:36 AM] Bryan_Beus#6442
oh, error


[04-Feb-19 10:36 AM] siu#3920
``` 2019-02-04 14:32:11 -0400 [swap uuid=c2978680d1eaba18d5b48f59788f5cebda5f292cbb44710d06779508adcdceac] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```


[04-Feb-19 10:36 AM] siu#3920
now its working


[04-Feb-19 10:36 AM] Bryan_Beus#6442
```
thread 'main' panicked at '

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!   unwrap! called on Result::Err                                              !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
mm2src/rpc.rs:292,20 in mm2::rpc
Can't bind on 127.0.0.1:7783

Err(Os { code: 98, kind: AddrInUse, message: "Address already in use" })

', /home/siddhartha/.cargo/registry/src/github.com-1ecc6299db9ec823/unwrap-1.2.1/src/lib.rs:55:25
stack backtrace:

```


[04-Feb-19 10:37 AM] siu#3920
without restart


[04-Feb-19 10:37 AM] Bryan_Beus#6442
I see, I didn't kill the process properly


[04-Feb-19 10:39 AM] SHossain#0007
@artemciy_dice netid can be specified in `client` or `run` script in seed node or bob node


[04-Feb-19 10:41 AM] artemciy_dice#0049
@Bryan_Beus , DHT state is saved in parallel, it isn't a part of some single sequence, so the question "how long should the process hang in DHT state saved?" doesn't compute on my side.


[04-Feb-19 10:41 AM] Bryan_Beus#6442
Okay.


[04-Feb-19 10:41 AM] Bryan_Beus#6442
It was just 'cause I didn't realize that the original command in the guide had an `&` at the end.

{Reactions}
üÜó üÜí 

[04-Feb-19 10:42 AM] artemciy_dice#0049
Regarding the "Address already in use", can you please check if there are other mm2 processes left over binding on the mm2 ports?


[04-Feb-19 10:42 AM] Bryan_Beus#6442
Ya, I was able to kill it with `ps` and `kill -9`


[04-Feb-19 10:43 AM] SHossain#0007
`pkill -15 mm2` is the safest


[04-Feb-19 10:43 AM] Bryan_Beus#6442
It's working now, I think


[04-Feb-19 10:43 AM] Bryan_Beus#6442
oh okay


[04-Feb-19 10:43 AM] Bryan_Beus#6442
Is that  a soft kill?


[04-Feb-19 10:43 AM] SHossain#0007
yes


[04-Feb-19 10:43 AM] SHossain#0007
and specifically `mm2`


[04-Feb-19 10:48 AM] Bryan_Beus#6442
right, I got that part


[04-Feb-19 10:48 AM] Bryan_Beus#6442
question:

When I'm writing the documentation, would it be okay to set `userpass` as an env var?


[04-Feb-19 10:54 AM] SHossain#0007
there are multiple ways to use `userpass`. one of them which i'm using is the old way. having a file called `userpass` wtih content inside `export userpass="<userpass>"` and every script has `export userpass` line in the beginning of the script.

{Reactions}
üëç 

[04-Feb-19 10:55 AM] Bryan_Beus#6442
right, that's what I did locally, but I'm wondering if it's safe to instruct other users to do so as well?


[04-Feb-19 10:56 AM] SHossain#0007
i don't think there is any safety related issue here. just what is easy and convinient for user. (i can be wrong as well)


[04-Feb-19 11:00 AM] artemciy_dice#0049
> @artemciy_dice netid can be specified in client or run script in seed node or bob node

@SHossain , so I went through the MM2_QA_test_documentation_v0.2.pdf and it is one-sided, starting only one part of the SWAP. Whereas in order to test the SWAP without the overhead of the open seed node ordermatch communication we'd have to run both parts of the SWAP (Alice and Bob, Taker and Maker) on the same host, using "seednode" option to connect them.


[04-Feb-19 11:10 AM] artemciy_dice#0049
And I wonder if running such a test would solve anything. Will probably focus on reproducing this on our development server and with a traffic shaper for now.


[04-Feb-19 11:13 AM] Bryan_Beus#6442
@SHossain 

If you have a sec, can you please send BEER to this address:

RJTYiYeJ8eVvJ53n2YbrVmxWNNMVZjDGLh


[04-Feb-19 11:14 AM] cipi#4502
Pinned a message.


[04-Feb-19 11:15 AM] SHossain#0007
sent dedd0b4a672c91d6a60898430ec792fee8e4f45db4e6f550811e1e3afaa4ad6f


[04-Feb-19 11:19 AM] Bryan_Beus#6442
thanks!


[04-Feb-19 11:21 AM] Bryan_Beus#6442
Oh, it looks like there's only orders up in the other direction.

Can you please send PIZZA to the same address?


[04-Feb-19 11:22 AM] Bryan_Beus#6442
@SHossain ^


[04-Feb-19 11:23 AM] Jonathan#3687
bad30777f672dac274b354b3a11f74a44036ea935b138e5bc9fbbbc9122c66e0


[04-Feb-19 11:23 AM] Jonathan#3687
sent 10k üòÉ


[04-Feb-19 11:23 AM] SHossain#0007
sent 96211438e830c10c4688f2632fc7c5afff7cfef50c4a79db01d9a943fa24c448


[04-Feb-19 11:23 AM] Bryan_Beus#6442
thanks!


[04-Feb-19 11:23 AM] Bryan_Beus#6442
oh boy üòÉ


[04-Feb-19 11:26 AM] Bryan_Beus#6442
Hmm, I'm not sure how, but I seem to have copy/pasted the wrong address. üòÉ 

RQNUR7qLgPUgZxYbvU9x5Kw93f6LU898CQ


[04-Feb-19 11:26 AM] Bryan_Beus#6442
@SHossain


[04-Feb-19 11:26 AM] Bryan_Beus#6442
@Jonathan


[04-Feb-19 11:27 AM] Bryan_Beus#6442
Earlier, I saw this in the output:

```
siddhartha@zuko:~/KomodoPlatform/target/debug$ curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"orderbook\",\"base\":\"BEER\",\"rel\":\"PIZZA\"}"
{"bids":[],"numbids":0,"biddepth":0,"asks":[{"coin":"BEER","address":"RJTYiYeJ8eVvJ53n2YbrVmxWNNMVZjDGLh","price":0.89999998,"numutxos":0,"avevolume":0,"maxvolume":10078.85028615,"depth":0,"pubkey":"5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12","age":5,"zcredits":0}],"numasks":1,"askdepth":0,"base":"BEER","rel":"PIZZA","timestamp":1549306254,"netid":9999}
```


[04-Feb-19 11:27 AM] Bryan_Beus#6442
That's where I grabbed that address from ... but it was a mistake. That's the address that's offering.


[04-Feb-19 11:27 AM] Bryan_Beus#6442
My bad.


[04-Feb-19 11:28 AM] Bryan_Beus#6442
My address is this one:

```
RQNUR7qLgPUgZxYbvU9x5Kw93f6LU898CQ
```


[04-Feb-19 11:28 AM] SHossain#0007
just a sec


[04-Feb-19 11:29 AM] SHossain#0007
you sure that this is your address? `RQNUR7qLgPUgZxYbvU9x5Kw93f6LU898CQ`


[04-Feb-19 11:29 AM] SHossain#0007
sent 104d3f94126e699f3fa0d332fed2ac90af1aebec1e2c36368b095f59e39b37a5


[04-Feb-19 11:30 AM] Bryan_Beus#6442
```
siddhartha@zuko:~/KomodoPlatform/target/debug$ curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_balance\",\"coin\":\"PIZZA\"}" | jq
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   194  100    78  100   116    390    580 --:--:-- --:--:-- --:--:--   970
{
  "address": "RQNUR7qLgPUgZxYbvU9x5Kw93f6LU898CQ",
  "balance": 77.7,
  "coin": "PIZZA"
}
```


[04-Feb-19 11:30 AM] SHossain#0007
i guess the previous address was from bob node.


[04-Feb-19 11:30 AM] Bryan_Beus#6442
It worked, thanks!


[04-Feb-19 11:30 AM] Bryan_Beus#6442
Yes, it was bob node, and I was a little bewildered in the output. My bad.


[04-Feb-19 11:30 AM] Bryan_Beus#6442
Sorry @Jonathan !

The BEER is in the bob node, whoever is running that has it.


[04-Feb-19 11:31 AM] SHossain#0007
you can buy the BEER using PIZZA


[04-Feb-19 11:31 AM] SHossain#0007
that's ok. coins are not lost. they are with bob


[04-Feb-19 11:31 AM] Bryan_Beus#6442
Whoa, did that atomic swap just succeed THAT FAST!?!


[04-Feb-19 11:31 AM] Bryan_Beus#6442
```
}siddhartha@zuko:~/Komodota "{\"userpass\":\"$userpass\",\"method\":\"buy\",\"base\":\"BEER\",\"rel\":\"PIZZA\",\"relvolume\":1,\"price\":0.95}" | jq
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   665  100   516  100   149    426    123  0:00:01  0:00:01 --:--:--   550
{
  "result": "success",
  "swaps": [
    [
      3133750805,
      3536460903
    ]
  ],
  "netamounts": [],
  "pending": {
    "uuid": "f9d622f9751b676e517a3be05714aa328a1805abfde08c154c0fdfcd1bc13b5f",
    "expiration": 1549308715,
    "timeleft": 29,
    "tradeid": 2454972419,
    "requestid": 0,
    "quoteid": 0,
    "bob": "BEER",
    "base": "BEER",
    "basevalue": 1.0530423,
    "alice": "PIZZA",
    "rel": "PIZZA",
    "relvalue": 1.0002,
    "desthash": "edb2a3d86a7c1b3665a9bd269974ca154e005c0afa3e95e0e7da6e9bd231ae11",
    "aliceid": 261355442
  },
  "uuid": "f9d622f9751b676e517a3be05714aa328a1805abfde08c154c0fdfcd1bc13b5f"
}
```


[04-Feb-19 11:33 AM] Jonathan#3687
No worries @Bryan_Beus - sent both to that address üëç


[04-Feb-19 11:33 AM] Bryan_Beus#6442
Thanks!


[04-Feb-19 11:33 AM] Bryan_Beus#6442
This is FAST! Way better than 1.0!


[04-Feb-19 11:37 AM] Bryan_Beus#6442
Oh, hang on, I think it may not have gone through yet?


[04-Feb-19 11:37 AM] Bryan_Beus#6442
@Jonathan did you send this 10 BEER?


[04-Feb-19 11:38 AM] Jonathan#3687
Yep


[04-Feb-19 11:38 AM] Bryan_Beus#6442
Oh, okay....


[04-Feb-19 11:38 AM] Bryan_Beus#6442
I think my swaps haven't worked yet, then.


[04-Feb-19 11:38 AM] Bryan_Beus#6442
Hmm...


[04-Feb-19 11:39 AM] Bryan_Beus#6442
I can see these are stacking up:

```
"swaps": [
    [
      188190870,
      2658866488
    ],
    [
      3133750805,
      3536460903
    ]
  ],
```


[04-Feb-19 11:39 AM] Bryan_Beus#6442
I'm not seeing any output in the `mm2` terminal that would show success.


[04-Feb-19 11:40 AM] SHossain#0007
that means, swap didn't work


[04-Feb-19 11:40 AM] SHossain#0007
it will show progress of every stage


[04-Feb-19 11:41 AM] Bryan_Beus#6442
Can you help me understand this?
```
>>>>>>>>>> received quote BEER/PIZZA 1.06198023
04 19:40:26, lp_ordermatch:1158] aliceid.2239814990 got new bestprice 1.0619802331306898 dynamictrust -9.41656945 (unconf 0) slowresponse.1
04 19:40:27, lp_ordermatch:601] Alice max price: 1.1011
04 19:40:28, lp_ordermatch:1225] send LP_connect aliceid.2239814990 1.0619802331306898
04 19:40:29, lp_ordermatch:1540] CONNECTED.({"address":"RJTYiYeJ8eVvJ53n2YbrVmxWNNMVZjDGLh","aliceid":2239814990,"base":"BEER","desthash":"edb2a3d86a7c1b3665a9bd269974ca154e005c0afa3e95e0e7da6e9bd231ae11","destsatoshis":"1000020000","desttxfee":"1000","etomicdest":"","etomicsrc":"","gui":"cli","maxprice":1.1011,"method":"connected","method2":"connected","pair":"tcp://195.201.116.176:13295","price":1.06198023,"proofsend CONNECT for %u-%u\n":[],"quoteid":379810065,"quotetime":1549309229,"rel":"PIZZA","requestid":877267405,"satoshis":"941656945","srchash":"5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12","timestamp":1549309226,"tradeid":848811416,"txfee":"1000","uuid":"683b49705de3a180dddb37a790a066e318e675f8832edcf3f40457c4b2eee8d2"})
04 19:40:29, lp_ordermatch:1110] alice edb2a3d86a7c1b3665a9bd269974ca154e005c0afa3e95e0e7da6e9bd231ae11 received CONNECTED.(2239814990) mpnet.0 fill.0 gtc.0
CONNECTED mpnet.0 fill.0 gtc.0 numpending.0 tradeid.848811416 requestid.877267405 quoteid.379810065 pairstr.tcp://195.201.116.176:13295
BEER/PIZZA bid 1.10110000 ask 0.00000000
alice pairstr.(tcp://195.201.116.176:13295) pairsock.12
04 19:40:29, lp_ordermatch:779] Entering the taker_swap_loop
04 19:40:31, lp_signatures:613] lp_notify_recv] hailed by peer: 127.0.0.1
04 19:40:31, peers:996] investigate_peer] ip 127.0.0.1 preferred port 7803
04 19:40:31, peers:355] Sending a ping to V4(127.0.0.1:7803)‚Ä¶
```


[04-Feb-19 11:41 AM] Bryan_Beus#6442
I tried raising the price to 1.1


[04-Feb-19 11:44 AM] Bryan_Beus#6442
Here's a swap error:

```
¬∑ 2019-02-04 10:43:30 -0900 [swap] Waiting for Maker negotiation data‚Ä¶ Error: timeout
04 19:43:30, lp_ordermatch:782] Swap finished with error (-1000, "Error getting \'negotiation@tcp://195.201.116.176:13295\': timeout")
```


[04-Feb-19 11:46 AM] Bryan_Beus#6442
Looks like there's a connection error.

Could be vps...


[04-Feb-19 11:50 AM] Bryan_Beus#6442
Is there a method to see my swaps in waiting?


[04-Feb-19 11:51 AM] SHossain#0007
not sure about the actual API yet for that. we are trying to troubleshoot the connection issues


[04-Feb-19 11:51 AM] Bryan_Beus#6442
Also, can I pipe the swap output in the `mm2` process to `less` or something, so that I can view it?


[04-Feb-19 11:51 AM] Bryan_Beus#6442
or `jq`?


[04-Feb-19 11:51 AM] Bryan_Beus#6442
Okay


[04-Feb-19 12:06 PM] Bryan_Beus#6442
@SHossain @artemciy_dice 

Also, if I wanted to do these api calls not as curls, but with a method more similar to the `komodo-cli` software, how would I do that?


[04-Feb-19 12:06 PM] Bryan_Beus#6442
`./mm2 <command>` I assume?


[04-Feb-19 12:08 PM] Bryan_Beus#6442
Seems to want it in JSON
```
siddhartha@zuko:~/KomodoPlatform/target/debug$ ./mm2 my_balance BEER
04 20:07:14, mm2:198] BarterDEX MarketMaker UNKNOWN
04 20:07:14, mm2:236] mm2:346] couldnt parse.(my_balance).common:216] Can't parse JSON, error: my_balance
siddhartha@zuko:~/KomodoPlatform/target/debug$ ./mm2 my_balance "BEER"
04 20:07:38, mm2:198] BarterDEX MarketMaker UNKNOWN
04 20:07:38, mm2:236] mm2:346] couldnt parse.(my_balance).common:216] Can't parse JSON, error: my_balance
```


[04-Feb-19 12:20 PM] artemciy_dice#0049
@Bryan_Beus , mm2 prints to stdout as usual. You can start it in foreground and the output will simply go to the terminal. Or you can redirect it to a log file and `tail` that file. Or you can pipe it to `less`, NP.

I didn't see the `cli` interface on the radar so far. We hope to make the swaps available to the wider audience with a simple GUI, and using it from the command-line is mostly a debugging / troubleshooting option. Any particular points towards the importance of having such a `cli` interface?


[04-Feb-19 12:22 PM] Bryan_Beus#6442
Okay, no worries about `cli` for now, then.


[04-Feb-19 12:23 PM] Bryan_Beus#6442
The reason I ask is that the `curl` commands are more confusing for a newcomer, but it doesn't matter. I'll give a brief explaination of what `curl` is, I'm already telling people to install `jq`, and I'm including the extra `env` variable.


[04-Feb-19 12:24 PM] Bryan_Beus#6442
@artemciy_dice 

I haven't had a chance yet to get a swap to go through, though, just FYI.

I'll use ca333's successful examples for the docs.


[04-Feb-19 12:36 PM] artemciy_dice#0049
@Bryan_Beus , can you try running a `cargo test` in the build directory?


[04-Feb-19 12:36 PM] Bryan_Beus#6442
just `cargo test`?


[04-Feb-19 12:36 PM] artemciy_dice#0049
I wonder if the failure of the SWAP on your host will map into a failure of some of our automatic tests.


[04-Feb-19 12:36 PM] artemciy_dice#0049
Yep.


[04-Feb-19 12:36 PM] Bryan_Beus#6442
Okay, it's executing.


[04-Feb-19 12:40 PM] Bryan_Beus#6442
```
test result: ok. 17 passed; 0 failed; 9 ignored; 0 measured; 0 filtered out
```


[04-Feb-19 12:43 PM] artemciy_dice#0049
Good to know, thanks @Bryan_Beus !


[04-Feb-19 12:43 PM] Bryan_Beus#6442
Okay, sounds good.


[04-Feb-19 12:44 PM] Bryan_Beus#6442
Out of curiosity, (I'm only just learning about docker), is this the type of thing that docker would be good for?

As in, if we made an Ubuntu-based docker image that had everything pre-installed and ready to go, could we just have people download that image and run it, instead of installing mm2 on their OS?


[04-Feb-19 12:44 PM] Bryan_Beus#6442
For demo purposes, instead of testing purposes?


[04-Feb-19 12:48 PM] artemciy_dice#0049
We have a Docker build, https://github.com/artemii235/SuperNET/blob/mm2/Dockerfile, it serves as the reference build in fact, and yes, distributing mm2 through Docker is entirely feasible, but then again, distributing GUIs via Docker isn't a status quo and mm2 is intended to be a part of a GUI, used with clicks and not command lines.


[04-Feb-19 12:53 PM] artemciy_dice#0049
If you want to add a Docker section to the docs, then by all means, we'll happily support that option.


[04-Feb-19 01:00 PM] Bryan_Beus#6442
That may be better for the purpose of a terminal walthrough.


[04-Feb-19 01:00 PM] Bryan_Beus#6442
I'm almost finished for now, but maybe I'll add it afterwards, if it won't slow you down.

I'll have to ask a lot of questions, probably.

{Reactions}
üëç 

[04-Feb-19 01:37 PM] artemciy_dice#0049
@SHossain , can you please send a PIZZA to RFf5mf3AoixXzmNLAmgs2L5eWGveSo6X7q ?


[04-Feb-19 01:37 PM] SHossain#0007
sure.


[04-Feb-19 01:38 PM] SHossain#0007
41f068b3bd76bd8796c5b150372a9a244df7d131ddede3c15d3f04442f457f4a


[04-Feb-19 01:38 PM] SHossain#0007
sent


[04-Feb-19 01:38 PM] artemciy_dice#0049
Yum  )


[04-Feb-19 01:39 PM] SHossain#0007
would it be possible to separate the legacy mm1 api calls in the `help` call? so, we know which once are acutally in mm2


[04-Feb-19 01:40 PM] SHossain#0007
it would be easy for @Bryan_Beus's documentation as well


[04-Feb-19 01:43 PM] artemciy_dice#0049
BTW, I'm getting the same timeout on our development server,
```
04 21:38:46, lp_ordermatch:783] Entering the taker_swap_loop
04 21:39:04, lp_swap:537] Received 'negotiation@tcp://195.201.116.176:42962' (102 bytes, crc 735096548)
04 21:39:04, lp_swap:562] Sending 'negotiation-reply@tcp://195.201.116.176:42962' (102 bytes, crc 4262082043)
¬∑ 2019-02-04 22:42:04 +0100 [swap uuid=3b000afad12abaa449b6536e48df820d577652cbb1bb90b5d30abee67bb68a22] Waiting for Maker negotiated‚Ä¶ Error: timeout
    Waiting for Maker negotiation data‚Ä¶ Done.
04 21:42:04, lp_ordermatch:786] Swap finished with error (-1000, "Error getting \'negotiated@tcp://195.201.116.176:42962\': timeout")
```
so I guess something is currently broken on the Maker (Bob) side.


[04-Feb-19 01:44 PM] SHossain#0007
are the bobs running native or electrum mode?


[04-Feb-19 01:47 PM] artemciy_dice#0049
I don't know, we didn't synchronize with Artem on how this test is set up.

{Reactions}
üëçüèΩ 

[04-Feb-19 01:53 PM] artemciy_dice#0049
@SHossain , what do you think about moving some of that RPC help documentation into `mm2 help`?
I don't quite dig the RPC help, why list the methods without even a hint of what they do? Is it processed automatically somewhere?
Should be possible to go through RPC help and remove the outdated methods, of course (filed as https://github.com/artemii235/SuperNET/issues/283). What do you mean by legacy calls though? Why keep the calls in the list unless they're supported?


[04-Feb-19 01:58 PM] SHossain#0007
nice idea to make `mm2 help`. by leagacy i mean the API calls from marketmaker1.0. and which are not   ported yet to mm2


[04-Feb-19 02:00 PM] artemciy_dice#0049
You mean the calls that are working but using the old MM1 code?


[04-Feb-19 02:00 PM] SHossain#0007
yes


[04-Feb-19 02:02 PM] SHossain#0007
so, if we separate them like below, it will also help us better testing
```
mm2
=====
help
buy
electrum
enable
sell
---
mm1
===
calcaddress
txblast
convaddress
statsdisp
fomo
```


[04-Feb-19 02:02 PM] SHossain#0007
example ^^


[04-Feb-19 02:02 PM] SHossain#0007
working and ported mm2 commands under mm2 line and rest under mm1 line


[04-Feb-19 02:02 PM] SHossain#0007
just some ideas


[04-Feb-19 02:02 PM] SHossain#0007
does that make any sense?


[04-Feb-19 02:08 PM] artemciy_dice#0049
It makes certain sense, but the distinction isn't clear-cut. If an RPC call is invoked first via the C code but then delegates 80% of the work into a Rust function, where should it go?

It might be more interesting to separate the GUI calls from the internal ordermatch calls broadcasted via the open seed nodes.


[04-Feb-19 02:09 PM] SHossain#0007
i mean, just to organise them for better understanding


[04-Feb-19 02:09 PM] SHossain#0007
no need to remove them


[04-Feb-19 02:09 PM] SHossain#0007
current help output:
```
        available localhost RPC commands:
        setprice(base, rel, price, broadcast=1)
        autoprice(base, rel, fixed, minprice, maxprice, margin, refbase, refrel, factor, offset)*
        goal(coin=*, val=<autocalc>)
        myprice(base, rel)
        enable(coin)
        disable(coin)
        notarizations(coin)
        statsdisp(starttime=0, endtime=0, gui="", pubkey="", base="", rel="")
        ticker(base="", rel="")
        tradesarray(base, rel, starttime=<now>-timescale*1024, endtime=<now>, timescale=60) -> [timestamp, high, low, open, close, relvolume, basevolume, aveprice, numtrades]
        pricearray(base, rel, starttime=0, endtime=0, timescale=60) -> [timestamp, avebid, aveask, highbid, lowask]
        getrawtransaction(coin, txid)
        inventory(coin, reset=0, [passphrase=])
        lastnonce()
        cancel(uuid)
        buy(base, rel, price, relvolume, timeout=10, duration=3600)
        sell(base, rel, price, basevolume, timeout=10, duration=3600)
        withdraw(coin, outputs[], broadcast=0)
        eth_withdraw(coin, to, amount, gas, gas_price, broadcast=0)
        txblast(coin, utxotxid, utxovout, utxovalue, txfee, passphrase, outputs[], broadcast=0)
        sendrawtransaction(coin, signedtx)
        swapstatus(pending=0, fast=0)
        swapstatus(coin, limit=10)
        swapstatus(base, rel, limit=10)
        swapstatus(requestid, quoteid, pending=0, fast=0)
        recentswaps(limit=3)
        kickstart(requestid, quoteid)
        notarizations(coin)
        public API:
        getcoins()
        getcoin(coin)
        portfolio()
        getpeers()
```


[04-Feb-19 02:10 PM] artemciy_dice#0049
It doesn't map well to my understanding of the mm2 code, so I don't readily see which understanding will be improved from maintaining an extra taxonomy.


[04-Feb-19 02:10 PM] SHossain#0007
```
        passphrase(passphrase, gui, netid=0, seednode="")
        listunspent(coin, address)
        setconfirms(coin, numconfirms, maxconfirms=6)
        trust(pubkey, trust) # positive to trust, 0 for normal, negative to blacklist
        my_balance(coin)
        balance(coin, address)
        balances(address)
        fundvalue(address="", holdings=[], divisor=0)
        orderbook(base, rel, duration=3600)
        getprices()
        inuse()
        movecoinbases(coin)
        getmyprice(base, rel)
        getprice(base, rel)
        secretaddresses(prefix='secretaddress', passphrase, num=10, pubtype=60, taddr=0)
        gen64addrs(passphrase, taddr=0, pubtype=60)
        electrum(coin, ipaddr, port)
        snapshot(coin, height)
        snapshot_balance(coin, height, addresses[])
        dividends(coin, height, <args>)
        stop()
        bot_list()
        bot_statuslist()
        bot_buy(base, rel, maxprice, relvolume) -> botid
        bot_sell(base, rel, minprice, basevolume) -> botid
        bot_settings(botid, newprice, newvolume)
        bot_status(botid)
        bot_stop(botid)
        bot_pause(botid)
        calcaddress(passphrase, coin=KMD)
        convaddress(coin, address, destcoin)
        instantdex_deposit(weeks, amount, broadcast=1)
        instantdex_claim()
        timelock(coin, duration, destaddr=(tradeaddr), amount)
        unlockedspend(coin, txid)
        opreturndecrypt(coin, txid, passphrase)
        getendpoint(port=5555)
        getfee(coin)
        mpnet(onoff)
        sleep(seconds=60)
        listtransactions(coin, address, count=10, skip=0)
        jpg(srcfile, destfile, power2=7, password, data="", required, ind=0)
        version
```


[04-Feb-19 02:11 PM] SHossain#0007
so, my request is to sort out the API calls that are currently ported to mm2 and available for testing. my understanding is, not all the APIs are ready for mm2


[04-Feb-19 02:12 PM] artemciy_dice#0049
Yeah, this would make sense, thanks for clarifying.


[04-Feb-19 02:14 PM] artemciy_dice#0049
(All calls are a part of mm2 by default, because we're porting gradually, but some of them might be currently less tested or temporarily unsupported due to changes, so we can mark this).

{Reactions}
üëçüèΩ 

[04-Feb-19 02:16 PM] SHossain#0007
yep


[04-Feb-19 02:16 PM] SHossain#0007
so, testers don't get confused which ones to test and which one not yet


[04-Feb-19 02:30 PM] Bryan_Beus#6442
@SHossain 

I have never been able to get the faucet to work for PIZZA or BEER?


[04-Feb-19 02:31 PM] Bryan_Beus#6442
The recaptcha seems to expire before the processing concludes, from what little I can tell?


[04-Feb-19 02:31 PM] Bryan_Beus#6442
It's still processing, and there's no new funds in my address.


[04-Feb-19 02:31 PM] Bryan_Beus#6442
I'd like to use this in the walkthrough, if we can get it to work.


[04-Feb-19 02:31 PM] SHossain#0007
probably faucet is empty. @pbca26 can you please check?


[04-Feb-19 02:31 PM] Bryan_Beus#6442
Oh, okay, that would make sense.


[04-Feb-19 05:32 PM] Bryan_Beus#6442
@ca333 @artem.pikulin @artemciy_dice 

The first draft of the documentation for MM2 is now ready for your assistance.

Most of the work should be done, but there is one part where I still need a lot of input from you three.

Please go to this repository, fork it to your own personal repos, and then clone it locally.

Switch to the `mm` branch.

Inside the directory run `yarn install` and then `yarn docs:dev`

This will create an instance of our documents with the MM2 status.

You can see them at `localhost:8080`

Once you have them up and running, navigate in the navbar to the "DEX Software & API" section.

You are welcome to read through all of it, but there is one part in particular that I specifically need your help.

Go to DEX API

Read down through it and you will notice that there are many incorrect or missing definitions in the `Arguments:` and `Response:` tables, throughout the document.

I need this information from you.

You can find the src file in this directory:

`/docs/basic-docs/atomic-swap-dex/`

In there, please go through and just rewrite everything exactly how you would like it. 

You should be on your own fork, so you can't mess anything up.

Please try to avoid leaving notes or references to me, as it can take me heaps more time to track you down later and find out what you were referring to.

Just write over my writing until it looks accurate.

You should be able to see how the markdown is formatted, and each time you save the file the Vuepress runtime in localhost:8080 will update to show you your changes.

Once you've got it fixed how you would like it, submit the changes as a pull request to me.

I will then go over your content and rework any styling/grammar inconsistencies, and then pass it back to you for final review. I will send you the git commit, so you can quickly see which changes were made.

Thanks!


[04-Feb-19 05:32 PM] Bryan_Beus#6442
@ca333 @artemciy_dice @artem.pikulin 

Naturally, I don't need all three of you to do this at once. 

If you want to take turns looking it over, that would be best.


[04-Feb-19 05:36 PM] Bryan_Beus#6442 (pinned)
Oops, the repository:

https://github.com/KomodoPlatform/developer-docs/tree/mm/docs/basic-docs/atomic-swap-dex

{Embed}
https://github.com/KomodoPlatform/developer-docs/tree/mm/docs/basic-docs/atomic-swap-dex
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[04-Feb-19 05:38 PM] Bryan_Beus#6442
This is the part that typically takes a long time to do, when doing documentation -- i.e. where I have to track down people who have the information, and are super busy, and it can wind up taking us both lots of time with lots of miscommunications if we don't just power through. 

It will all go much faster for everyone if at least one of you powers through this in one solid session, making sure everything is technically accurate and there's no missing information.

Also, if you can provide me with examples for the commands I can't execute on my machine yet, that would really help.

Thanks!


[04-Feb-19 08:12 PM] artemciy_dice#0049
FYI, reproduced Electrum connectivity issues on our development server by using the iproute2 traffic shaper.


[04-Feb-19 08:13 PM] artemciy_dice#0049
(Maybe it'll help us with adjusting the Electrum connections to the low-bandwidth conditions).


[04-Feb-19 09:37 PM] Bryan_Beus#6442
great


[04-Feb-19 09:38 PM] Bryan_Beus#6442
I don't have low-bandwidth though, btw. At least, not for a home connection. It's moderately high speed. Peak of 550Mbps.


[04-Feb-19 09:40 PM] Bryan_Beus#6442
Actually just tested at 730mbps. Higher than I thought!

{Reactions}
üòÆ 

[04-Feb-19 10:24 PM] Deleted User#0000
ü§£  what ... thats the same speed as my notary node server in Australia


[04-Feb-19 10:59 PM] grewalsatinder#9653
Hah, I pay 132 nzd per month for 900mbps speed üòÖ


[04-Feb-19 11:33 PM] Deleted User#0000
lol here in outback basically I'm very lcuky to have 50/100 for less than $100 a month.


[04-Feb-19 11:34 PM] Deleted User#0000
its a huge upgrade from 1.5/20


[05-Feb-19 12:32 AM] grewalsatinder#9653
sometimes I think I would have a luxury life if I wasn't living in NZ. üòê


[05-Feb-19 12:32 AM] grewalsatinder#9653
but life here is still better than where I came from üòõ


[05-Feb-19 01:21 AM] SHossain#0007
Nice to hear you guys to could identify the connectivity bugs. Serious bug indeed.


[05-Feb-19 01:34 AM] SHossain#0007
Vast majority of our end-users will have under 10Mbps connection speed


[05-Feb-19 01:34 AM] SHossain#0007
since mm2 will be available on Mobile phones, it will have less speed in some countries

{Reactions}
troll_hmm 

[05-Feb-19 03:17 AM] artem.pikulin#0794
@SHossain Hi, low bandwidth emulation test by @artemciy_dice is very good, I have already adjusted Electrum timeouts to make it wait longer for response. However issue at your home network might be not related to MM2 timeouts, I've also removed `blockchain.headers.subscribe` calls, swaps can be done without it. Could you please rebuild MM2, launch tcpdump and try several swaps again at your home?


[05-Feb-19 03:18 AM] artem.pikulin#0794
It's not guaranteed that changes will solve the issue, but we might see something new üôÇ


[05-Feb-19 03:18 AM] SHossain#0007
same set of electrum servers as last time?


[05-Feb-19 03:18 AM] artem.pikulin#0794
Yes.


[05-Feb-19 03:21 AM] SHossain#0007
started a new swap


[05-Feb-19 03:24 AM] SHossain#0007
2 swaps runnign in parallel


[05-Feb-19 03:24 AM] SHossain#0007
both swap completed successfully


[05-Feb-19 03:24 AM] SHossain#0007
```
¬∑ 2019-02-05 11:24:10 +0000 [swap uuid=ef000efd0aaac9b5f75192b78221ae06afe965becf86b49ada4dae66889ebd21] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
05 11:24:11, lp_swap:685] Maker payment spend tx 1a81acad3a43b6788744652612ee69eca6fd83f55072e378e5dd77f8e7868f68
¬∑ 2019-02-05 11:24:11 +0000 [swap uuid=e92b4978b32da7d0e0c53e273bdfec041e7b598c17a4b340c5898be01e7f0dd7] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```


[05-Feb-19 03:25 AM] SHossain#0007
issued a new one and it seems  hasn't started yet


[05-Feb-19 03:25 AM] artem.pikulin#0794
Ok, no Electrum errors at all?


[05-Feb-19 03:26 AM] SHossain#0007
not yet


[05-Feb-19 03:26 AM] SHossain#0007
```
05 11:24:21, lp_ordermatch:603] lp_trade] Alice max price: 1.001
time expired for Alice_request
```


[05-Feb-19 03:27 AM] SHossain#0007
issued another one and looks like it will have same time expired result


[05-Feb-19 03:27 AM] SHossain#0007
the swap didn't start


[05-Feb-19 03:28 AM] artem.pikulin#0794
Do you see orders in orderbook?


[05-Feb-19 03:28 AM] SHossain#0007
yes


[05-Feb-19 03:28 AM] SHossain#0007
orderbook is there


[05-Feb-19 03:28 AM] SHossain#0007
just checked


[05-Feb-19 03:28 AM] artem.pikulin#0794
Let's wait a bit.


[05-Feb-19 03:29 AM] SHossain#0007
came up with time expired


[05-Feb-19 03:31 AM] ca333#0333
thanks @Bryan_Beus - checking it out


[05-Feb-19 03:32 AM] SHossain#0007
now got the error
```
05 11:32:30, utxo:964] Electrum servers ["electrum1.cipig.net:10024", "electrum2.cipig.net:10024", "electrum3.cipig.net:10024"] ping error "rpc_clients:891] \"rpc_clients:875] rpc_clients:849] future timed out\""
```


[05-Feb-19 03:32 AM] SHossain#0007
can't issue any more buy.


[05-Feb-19 03:33 AM] SHossain#0007
orderbook script works


[05-Feb-19 03:33 AM] artem.pikulin#0794
@SHossain Ok, please stop MM2 for now and DM logs and dumps.


[05-Feb-19 03:33 AM] SHossain#0007
ok


[05-Feb-19 03:34 AM] artem.pikulin#0794
@ca333 Hi, I've just forked the docs repo and started working on docs, you can leave this task for me üôÇ

{Reactions}
üíØ 

[05-Feb-19 03:38 AM] ca333#0333
excellent @artem.pikulin - let me know if you need anything

{Reactions}
üëå 

[05-Feb-19 04:33 AM] siu#3920
testing mm2 latest code


[05-Feb-19 04:37 AM] siu#3920
```¬∑ 2019-02-05 08:35:47 -0400 [swap uuid=e9fbfbe5c062dba20010a0a494ab051734d0ab20e75fc9f3de50726f001a5ca7] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.

```


[05-Feb-19 04:37 AM] siu#3920
first try works like a charm


[05-Feb-19 05:23 AM] artem.pikulin#0794
@siu Hi, thanks for checking! Do you use phone hotspot again?


[05-Feb-19 05:23 AM] siu#3920
nope, my home internet 20mb


[05-Feb-19 05:24 AM] siu#3920
connection is working great. No timeouts or anything similar


[05-Feb-19 05:24 AM] artem.pikulin#0794
Ok, I see, please also try phone hotspot if possible.


[05-Feb-19 05:25 AM] siu#3920
ok, will do


[05-Feb-19 05:42 AM] Kiruel#2091
Hi guys I try to compile on my Mac os MM2 with `cargo build -vv` but i have this error: 

```   Compiling parity-wordlist v1.2.1
error[E0554]: #![feature] may not be used on the stable release channel
  --> /Users/Etienne/.cargo/registry/src/github.com-1ecc6299db9ec823/hashbrown-0.1.8/src/lib.rs:15:5
   |
15 | /     feature(
16 | |         alloc,
17 | |         alloc_layout_extra,
18 | |         allocator_api,
...  |
22 | |         dropck_eyepatch
23 | |     )
   | |_____^

error: aborting due to previous error```

What i missing ?


[05-Feb-19 05:42 AM] Kiruel#2091
macOS Mojave


[05-Feb-19 06:08 AM] artem.pikulin#0794
@Kiruel Hi, please install `nightly` Rust instead of `stable`.


[05-Feb-19 06:09 AM] artem.pikulin#0794
```
rustup install nightly-2018-12-24
rustup default nightly-2018-12-24
rustup component add rustfmt-preview
```


[05-Feb-19 06:09 AM] Kiruel#2091
Thx i will try


[05-Feb-19 06:40 AM] artem.pikulin#0794
@Kiruel You're welcome, did it work? If you need further help please let me know.


[05-Feb-19 06:43 AM] Kiruel#2091
Hum yeah it's work but now problem with -lcrypto not found I will show you the detail in 15min


[05-Feb-19 06:43 AM] Kiruel#2091
So the compilation fail


[05-Feb-19 06:57 AM] Kiruel#2091
```  = note: ld: library not found for -lcrypto
          clang: error: linker command failed with exit code 1 (use -v to see invocation)```


[05-Feb-19 06:58 AM] Kiruel#2091
I will try to install openssl from the repo directly


[05-Feb-19 06:58 AM] artem.pikulin#0794
@Kiruel the workaround is 
`LIBRARY_PATH=/usr/local/opt/openssl/lib cargo build` or linking libcrypto permanently to /usr/local/lib
`ln -s /usr/local/opt/openssl/lib/libcrypto.a /usr/local/lib`


[05-Feb-19 07:00 AM] artem.pikulin#0794
Homebrew installed openssl is fine, Rust just doesn't look for libs in `/usr/local/opt` by default.


[05-Feb-19 07:01 AM] Kiruel#2091
ok i try the first one then if its work i will linking permanently.


[05-Feb-19 07:01 AM] Kiruel#2091
```    Finished dev [optimized + debuginfo] target(s) in 25.34s```


[05-Feb-19 07:01 AM] Kiruel#2091
Heyhey


[05-Feb-19 07:01 AM] Kiruel#2091
finaly üòõ


[05-Feb-19 07:01 AM] artem.pikulin#0794
Nice!


[05-Feb-19 07:17 AM] Kiruel#2091
```05 15:16:51, rpc:338] >>>>>>>>>> DEX stats 127.0.0.1:7783 DEX stats API enabled at unixtime.1549379811 <<<<<<<<<``` connected


[05-Feb-19 08:04 AM] Kiruel#2091
The faucet for BEER is broken i guess (https://www.atomicexplorer.com/#/faucet/beer) can someone give me some BEER to test the swap ? RXQjmPtM1TZfPpjjF8JgUtczoeymHAr79y

{Embed}
https://www.atomicexplorer.com/
Atomic Explorer
Atomic Explorer


[05-Feb-19 08:05 AM] artem.pikulin#0794
http://pizza.explorer.dexstats.info/tx/5a560a3e3237c598e273efad59f7950159edf663c4b35ab36963ba6b9cb287ba - sent 100 PIZZA, there is a node selling BEER for PIZZA.


[05-Feb-19 08:05 AM] Kiruel#2091
Ok great thx.


[05-Feb-19 08:11 AM] Kiruel#2091
@artem.pikulin My balance will be refresh  without do nothing else than a call api `my_balance` ?


[05-Feb-19 08:12 AM] Kiruel#2091
Or i need to wait 6 conf or ?


[05-Feb-19 08:15 AM] artem.pikulin#0794
@Kiruel , it will show even unconfirmed balance. You should be able to trade now.


[05-Feb-19 08:15 AM] Kiruel#2091
hum i see 0.0 in my balance


[05-Feb-19 08:15 AM] Kiruel#2091
I will try a trade


[05-Feb-19 08:15 AM] artem.pikulin#0794
Do you use native or electrum?


[05-Feb-19 08:17 AM] Kiruel#2091
electrum


[05-Feb-19 08:17 AM] Kiruel#2091
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"BEER\",\"urls\":[\"electrum1.cipig.net:10022\",\"electrum2.cipig.net:10022\",\"electrum3.cipig.net:10022\"]}"```


[05-Feb-19 08:18 AM] artem.pikulin#0794
Please check PIZZA balance, there is active order that will allow you to by BEER.


[05-Feb-19 08:18 AM] Kiruel#2091
```{
    "address": "RXQjmPtM1TZfPpjjF8JgUtczoeymHAr79y",
    "balance": 0.0,
    "coin": "PIZZA"
}```


[05-Feb-19 08:19 AM] artem.pikulin#0794
Please provide a command that you used to enable pizza.


[05-Feb-19 08:20 AM] Kiruel#2091
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"PIZZA\",\"urls\":[\"electrum1.cipig.net:10022\",\"electrum2.cipig.net:10022\",\"electrum3.cipig.net:10022\"]}"```


[05-Feb-19 08:20 AM] Kiruel#2091
Shit its not the same port


[05-Feb-19 08:20 AM] Kiruel#2091
damn


[05-Feb-19 08:20 AM] Kiruel#2091
Can i remove a coin ?


[05-Feb-19 08:21 AM] artem.pikulin#0794
Please restart MM2 and enable again with correct ports.


[05-Feb-19 08:21 AM] Kiruel#2091
ok


[05-Feb-19 08:24 AM] Kiruel#2091
When i re-launch mm2 with this command ```./mm2 "{\"gui\":\"MM2GUI\",\"netid\":9999,\"client\":1,
\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"${passphrase}\",
\"coins\":$coins}" &```

I get this error: 
```
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!   unwrap! called on Result::Err                                              !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
mm2src/rpc.rs:295,20 in mm2::rpc
Can't bind on 127.0.0.1:7783

Err(Os { code: 48, kind: AddrInUse, message: "Address already in use" })

', /Users/Etienne/.cargo/registry/src/github.com-1ecc6299db9ec823/unwrap-1.2.1/src/lib.rs:55:25
stack backtrace:
.......
  LP_nativeDEX.c:1366] _LPinit
  lp_native_dex.rs:1905] mm2::lp_native_dex::lp_init::h556e85ea7ccdd3a9
  mm2.rs:116] mm2::lp_main::h5c2b7bb6855c7c05
  mm2.rs:353] mm2::run_lp_main::hde1b9ee6cfbc5f47
  mm2.rs:220] mm2::main::h4a1d20d7d5ba668a
  lib.rs:102] ___rust_maybe_catch_panic

[2]  + 84148 abort      ./mm2```


[05-Feb-19 08:24 AM] Kiruel#2091
Oh he is not killed by a ctr+C


[05-Feb-19 08:24 AM] Kiruel#2091
oO


[05-Feb-19 08:25 AM] Kiruel#2091
My bad


[05-Feb-19 08:26 AM] Kiruel#2091
Ok now i have my balance updated üòÉ !

{Reactions}
üëç 

[05-Feb-19 08:26 AM] Kiruel#2091
```{
    "address": "RXQjmPtM1TZfPpjjF8JgUtczoeymHAr79y",
    "balance": 100.0,
    "coin": "PIZZA"
}```


[05-Feb-19 08:34 AM] Kiruel#2091
I try 2 swap but i have this error :
```¬∑ 2019-02-05 16:31:53 +0000 [swap uuid=5a233bc4b1e5daebbd2dd4b2b05a16baad695233840c8e79283ab9038a50cd86] Waiting for Maker negotiated‚Ä¶ Error: timeout
    Waiting for Maker negotiation data‚Ä¶ Done.
05 16:31:53, lp_ordermatch:786] Swap finished with error (-1000, "Error getting \'negotiated@tcp://195.201.116.176:45997\': timeout")```


[05-Feb-19 08:39 AM] artem.pikulin#0794
MM2 seed node might be stuck again, let me restart it.


[05-Feb-19 08:40 AM] artem.pikulin#0794
@Kiruel please restart your MM and try to swap again.


[05-Feb-19 08:40 AM] Kiruel#2091
ok


[05-Feb-19 08:58 AM] Kiruel#2091
```05 16:55:10, lp_swap:537] Received 'negotiation@tcp://195.201.116.176:40177' (102 bytes, crc 2364890376)
05 16:55:10, lp_swap:562] Sending 'negotiation-reply@tcp://195.201.116.176:40177' (102 bytes, crc 1977831324)
¬∑ 2019-02-05 16:58:11 +0000 [swap uuid=46f20cbe183481e766656caf7a24dba03dd379eb535739d141e06417158ca6b2] Waiting for Maker negotiated‚Ä¶ Error: timeout
    Waiting for Maker negotiation data‚Ä¶ Done.
05 16:58:11, lp_ordermatch:786] Swap finished with error (-1000, "Error getting \'negotiated@tcp://195.201.116.176:40177\': timeout")```


[05-Feb-19 08:59 AM] Kiruel#2091
Failed


[05-Feb-19 09:27 AM] artem.pikulin#0794
@Kiruel The error is related to swap data transfers via libtorrent, @artemciy_dice could you please help to troubleshoot it? I guess we might need additional debug logging to understand why it fails.
```
Feb 05 18:08:09 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: ¬∑ 2019-02-05 18:08:09 +0100 [swap uuid=2a8073e2538b22911362916a6626d8cf63014c079c0f8771c3d48f33bea3adb7] Waiting for Negotiation reply‚Ä¶ Error: timeout
Feb 05 18:08:09 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:08:09, lp_ordermatch:455] Swap finished with error (-2000, "Error getting \'negotiation-reply@tcp://195.201.116.176:25651\': timeout")
```
Maker node fails to get the first DHT message from Taker. It's surely not an issue with Maker node as I've just started a swap and it's on `maker-payment` stage already.


[05-Feb-19 09:28 AM] artem.pikulin#0794
I have to go offline now, it's late here already. @Kiruel let's continue tomorrow, we'll discuss the possible ways to troubleshoot the issue and get back to you.


[05-Feb-19 09:29 AM] artem.pikulin#0794
P.S. swap finished 
```
Feb 05 18:25:12 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:25:12, lp_swap:368] Sending 'negotiation@tcp://195.201.116.176:29441' (102 bytes, crc 119552709)
Feb 05 18:25:48 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:25:48, lp_swap:370] Received 'negotiation-reply@tcp://195.201.116.176:29441' (102 bytes, crc 3511175699)
Feb 05 18:25:48 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:25:48, lp_swap:381] Sending 'negotiated@tcp://195.201.116.176:29441' (1 bytes, crc 2768625435)
Feb 05 18:26:30 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:26:30, lp_swap:386] Received 'taker-fee@tcp://195.201.116.176:29441' (252 bytes, crc 2011720802)
Feb 05 18:26:30 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:26:30, lp_swap:392] Taker fee tx c9cfa62c266411864e4063157475fc03318a182735638d1aa017967cb7f68990
Feb 05 18:26:33 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:26:33, lp_swap:417] Maker payment tx 563be7573318dc953b527951c534ce18fffece09354172f954d547884829fef1
Feb 05 18:26:33 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:26:33, lp_swap:418] Sending 'maker-payment@tcp://195.201.116.176:29441' (358 bytes, crc 3846432594)
Feb 05 18:27:13 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:27:13, lp_swap:424] Received 'taker-payment@tcp://195.201.116.176:29441' (357 bytes, crc 2039923904)
Feb 05 18:27:13 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:27:13, lp_swap:445] Taker payment tx 278125270ae0cdfa922f04f2e913792ab5ff4c6256366e2eed078b53824f7989
Feb 05 18:27:15 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: 05 17:27:15, lp_swap:472] Taker payment spend tx a046fb84c9698952ac54189a3f4fc6df537a80fba47823ed53660b0333cfac43
Feb 05 18:27:15 ubuntu-4gb-nbg1-dc3-1-artem1 marketmaker[9879]: ¬∑ 2019-02-05 18:27:15 +0100 [swap uuid=46dbaa653e188056c888fbea7b952fc694b033c7abcfe0b23f3d624767ca1c90] Swap finished successfully.
```


[05-Feb-19 09:30 AM] Kiruel#2091
Ok see you soon @artem.pikulin thx üòÉ


[05-Feb-19 10:22 AM] artem.pikulin#0794
@Kiruel thank you too for testing!


[05-Feb-19 10:39 AM] Kiruel#2091
I will do more than testing ;) I will try to use mm2 to create a application on flutter.

{Reactions}
shexy 

[05-Feb-19 10:40 AM] Kiruel#2091
First I need to test mm2 in CLI then maybe adding android compilation in cargo then try with iOS


[05-Feb-19 10:41 AM] Kiruel#2091
I just read the code and try to understand rust too xD


[05-Feb-19 11:15 AM] Kiruel#2091
```¬∑ 2019-02-05 19:14:27 +0000 [swap uuid=1e26dd77e4635d684308becb1052bbeacd3e9fac6cb033c3a539f51d15018ef8] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```


[05-Feb-19 11:15 AM] Kiruel#2091
swap success

{Reactions}
üéä 

[05-Feb-19 12:09 PM] siu#3920
why would this one server be unable to compile? ```-- Build files have been written to: /home/siu/SuperNET/build
$ cmake --build . --target marketmaker-lib -j 4
[ 23%] Built target libcrypto777
[ 26%] Built target libsecp256k1
[ 91%] Built target libjpeg
[100%] Built target marketmaker-lib
thread 'main' panicked at 'Unable to find libclang: "couldn\'t find any valid shared libraries matching: [\'libclang.so\', \'libclang-*.so\', \'libclang.so.*\'], set the `LIBCLANG_PATH` environment variable to a path where one of these files can be found (invalid: [])"', src/libcore/result.rs:1009:5
note: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.

```


[05-Feb-19 12:16 PM] SHossain#0007
have anyone tried macOS yet?


[05-Feb-19 12:19 PM] siu#3920
not me


[05-Feb-19 12:19 PM] SHossain#0007
i'll try now


[05-Feb-19 12:23 PM] SHossain#0007
@siu try installing the deps again


[05-Feb-19 12:23 PM] siu#3920
√¨ did


[05-Feb-19 12:23 PM] siu#3920
nothing new :/


[05-Feb-19 12:24 PM] SHossain#0007
i've made this markup version of install guide and works fine on my end https://gist.github.com/himu007/29fccf28f3fcad5d7145b8d75014f652

{Embed}
https://gist.github.com/himu007/29fccf28f3fcad5d7145b8d75014f652
compile-mm2
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040

{Reactions}
üôè 

[05-Feb-19 12:24 PM] SHossain#0007
contains important commands


[05-Feb-19 12:25 PM] siu#3920
cool, will try


[05-Feb-19 12:25 PM] siu#3920
my servers have ubuntu 16.04, maybe there is an issue?


[05-Feb-19 12:26 PM] SHossain#0007
i've tested Ubuntu 16.04 and all was fine


[05-Feb-19 12:36 PM] siu#3920
its weird since it only happens in some servers


[05-Feb-19 12:36 PM] siu#3920
which i installed all depends on


[05-Feb-19 12:37 PM] siu#3920
here is some more detail ```[common 0.1.0] cargo:rustc-link-lib=static=nanomsg
[common 0.1.0] thread 'main' panicked at 'Unable to find libclang: "couldn\'t find any valid shared libraries matching: [\'libclang.so\', \'libclang-*.so\', \'libclang.so.*\'], set the `LIBCLANG_PATH` environment variable to a path where one of these files can be found (invalid: [])"', src/libcore/result.rs:1009:5
[common 0.1.0] note: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.
error: failed to run custom build command for `common v0.1.0 (/home/siu/SuperNET/mm2src/common)`
process didn't exit successfully: `/home/siu/SuperNET/target/debug/build/common-24bd00cf90359a38/build-script-build` (exit code: 101)```


[05-Feb-19 12:41 PM] artemciy_dice#0049
@SHossain , the Docker build is the reference one. I think you might have missed some libraries mentioned there. https://github.com/artemii235/SuperNET/blob/76f8528cf7c3610c58a2e0b7f88813c5d8504c3d/Dockerfile#L15

{Embed}
https://github.com/artemii235/SuperNET/blob/76f8528cf7c3610c58a2e0b7f88813c5d8504c3d/Dockerfile
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[05-Feb-19 12:42 PM] artemciy_dice#0049
@siu, try doing `apt-get install -y llvm-3.9-dev libclang-3.9-dev clang-3.9` please.


[05-Feb-19 12:45 PM] SHossain#0007
thanks @artemciy_dice . i'll add these in my guide as well. @Bryan_Beus please add them in the mm2 install doc if they are not there


[05-Feb-19 12:47 PM] siu#3920
@artemciy_dice that did it! thanks!


[05-Feb-19 12:49 PM] SHossain#0007
my gist been updated


[05-Feb-19 12:50 PM] SHossain#0007
wondering how my Ubuntu 16.04 worked without this


[05-Feb-19 12:51 PM] siu#3920
mm2.0 is now totally electrum based, right?


[05-Feb-19 12:51 PM] siu#3920
no native chains needed even on mm nodes?


[05-Feb-19 12:51 PM] SHossain#0007
nope


[05-Feb-19 12:51 PM] SHossain#0007
native should work as well


[05-Feb-19 12:51 PM] siu#3920
ok, cool


[05-Feb-19 12:51 PM] siu#3920
im setting mm2 on all my servers


[05-Feb-19 12:52 PM] siu#3920
so we can test with COQUI too

{Reactions}
shexy 

[05-Feb-19 01:07 PM] ca333#0333
@SHossain - @Kiruel is using mm2 on OSX should you run into any issue.


[05-Feb-19 01:10 PM] SHossain#0007
sure. thanks @ca333. i'll for sure ask. i'm still installing. using a totally different network and slightly slow. i'll put a new router in my home soon replacing the existing one soon. just to identify the issues i'm having. @Kiruel  did you put any maOS installing guides up?


[05-Feb-19 01:10 PM] Kiruel#2091
No I just try today to run on my macOS


[05-Feb-19 01:11 PM] Kiruel#2091
And it's work after few minutes.


[05-Feb-19 01:11 PM] Kiruel#2091
Just installing everything and do this help me a lot : ```LIBRARY_PATH=/usr/local/opt/openssl/lib cargo build or linking libcrypto permanently to /usr/local/lib
ln -s /usr/local/opt/openssl/lib/libcrypto.a /usr/local/lib```


[05-Feb-19 01:12 PM] Kiruel#2091
I try now to compile for Android.

{Reactions}
shexy 

[05-Feb-19 01:13 PM] SHossain#0007
i'll ask around if i run into any issues. finishing up with the rust components


[05-Feb-19 01:15 PM] Bryan_Beus#6442
@artemciy_dice 

I updated the docs section `Install Additional Dependencies` to say this:

```
sudo apt-get install -y libboost-dev libboost-system-dev build-essential git apt-get install llvm-3.9-dev libclang-3.9-dev clang-3.9
```

Does that look accurate?


[05-Feb-19 01:21 PM] Bryan_Beus#6442
Whoa, @artem.pikulin, this is an amazing pull request! So thorough! 

I'm merging and will probably be able to do any final touch ups very quickly. 

Thanks.


[05-Feb-19 01:52 PM] ca333#0333
@artem.pikulin @artemciy_dice  - just for your info:

A file in the supernet rootdir -`marketmaker2_build_win.cmd` - is being flagged as `Gen:Heur.BZC.ONG.Cross.9.0A2B4758`


[05-Feb-19 02:20 PM] Bryan_Beus#6442
In these types of commands:

```
**buy base rel price relvolume timeout=number duration=number**
```

When I give a full description later of each argument, I believe that I should say that:

timeout is the amount of time to wait for a response from the network before the request should be cancelled

duration is the amount of time that a successful request will remain in the orderbook.

Does that sound accurate?


[05-Feb-19 02:20 PM] Bryan_Beus#6442
@artemciy_dice @artemciy_dice


[05-Feb-19 02:20 PM] siu#3920
```make[2]: *** Waiting for unfinished jobs....
CMakeFiles/torrent-rasterbar.dir/build.make:673: recipe for target 'CMakeFiles/torrent-rasterbar.dir/src/bt_peer_connection.cpp.o' failed
make[2]: *** [CMakeFiles/torrent-rasterbar.dir/src/bt_peer_connection.cpp.o] Error 1
CMakeFiles/Makefile2:72: recipe for target 'CMakeFiles/torrent-rasterbar.dir/all' failed
make[1]: *** [CMakeFiles/torrent-rasterbar.dir/all] Error 2
Makefile:129: recipe for target 'all' failed
make: *** [all] Error 2
thread 'main' panicked at '

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!   unwrap! called on Result::Err                                              !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
mm2src/common/build.rs:660,5 in build_script_build
Can't make

Err(Custom { kind: Other, error: StringError("command [\"make\", \"-j2\"] exited with code 2") })
```


[05-Feb-19 02:20 PM] siu#3920
another issue


[05-Feb-19 02:25 PM] siu#3920
i installed all depends on this server


[05-Feb-19 02:31 PM] artemciy_dice#0049
`> Does that look accurate?`

From the top of my head, `libcurl4-openssl-dev`, `libssl-dev`, `pkg-config` are missing and might be needed for a build to succeed.


[05-Feb-19 02:35 PM] Bryan_Beus#6442
ok, adding.


[05-Feb-19 02:35 PM] Bryan_Beus#6442
did you see my question about how to define timeout and duration?


[05-Feb-19 02:35 PM] Bryan_Beus#6442
@artemciy_dice


[05-Feb-19 02:36 PM] artemciy_dice#0049
No, I'm at `Gen:Heur.BZC.ONG.Cross.9.0A2B4758` now, trying to remember the URL of the site that allows to test a file against a bunch of different AVs.


[05-Feb-19 02:37 PM] Bryan_Beus#6442
@artem.pikulin 

Re: which dependencies to install, updated:

```
sudo apt-get install -y libboost-dev libboost-system-dev build-essential git apt-get install llvm-3.9-dev libclang-3.9-dev clang-3.9 libcurl4-openssl-dev libssl-dev pkg-config
```


[05-Feb-19 02:37 PM] Bryan_Beus#6442
@artemciy_dice &


[05-Feb-19 02:37 PM] Bryan_Beus#6442
^


[05-Feb-19 02:38 PM] artemciy_dice#0049
Scanning with virustotal


[05-Feb-19 02:38 PM] Bryan_Beus#6442
meant that to go to you


[05-Feb-19 02:38 PM] Bryan_Beus#6442
Here's the other question, regarding timeout and duration

In these types of commands:

**buy base rel price relvolume timeout=number duration=number**

When I give a full description later of each argument, I believe that I should say that: timeout is the amount of time to wait for a response from the network before the request should be cancelled duration is the amount of time that a successful request will remain in the orderbook. Does that sound accurate?


[05-Feb-19 02:38 PM] artemciy_dice#0049
@ca333 , https://www.virustotal.com/#/file/d377c06d82640a4a556e1c1e2d297fdfab43938bf99e629b09f10fff62f16aa7/detection - marketmaker2_build_win.cmd looks clean with these popular AVs. Which antivirus flagged it?


[05-Feb-19 02:39 PM] ca333#0333
bitdefender engine @artemciy_dice


[05-Feb-19 02:40 PM] artemciy_dice#0049
Hmm.


[05-Feb-19 02:42 PM] Bryan_Beus#6442
@ca333 

Can you take a look at this question?

Regarding timeout and duration In these types of commands: 

buy base rel price relvolume timeout=number duration=number 

When I give a full description later of each argument, I believe that I should say that: timeout is the amount of time to wait for a response from the network before the request should be cancelled duration is the amount of time that a successful request will remain in the orderbook. Does that sound accurate?


[05-Feb-19 02:44 PM] artemciy_dice#0049
`> timeout is the amount of time to wait for a response from the network before the request should be cancelled`

@Bryan_Beus , `timeout` passed to `buy` is a kind of a base value, we should be adding extra seconds to it for some particularly slow operations and then some to account for non-direct DHT.


[05-Feb-19 02:45 PM] ca333#0333
exactly - like @artemciy_dice just said you as a trader/user can pass the timeout parameter to the function.


[05-Feb-19 02:45 PM] Bryan_Beus#6442
The default value is 10. Is this enough, or should we say more?


[05-Feb-19 02:45 PM] ca333#0333
so you basically are able to decide.


[05-Feb-19 02:45 PM] ca333#0333
in a normal network its enough. but in exoctic networks probably not.


[05-Feb-19 02:46 PM] artemciy_dice#0049
The default value is `LP_AUTOTRADE_TIMEOUT` and it's used when `timeout` isn't explicitly passed and it's 120.


[05-Feb-19 02:46 PM] Bryan_Beus#6442
Ok, so we should recommend `20`. Then I'll state that if left blank, the value will be set to `120`.


[05-Feb-19 02:46 PM] ca333#0333
ok i never really checked it but only grapped that it was not even 30 seconds


[05-Feb-19 02:46 PM] artemciy_dice#0049
Why 20?


[05-Feb-19 02:47 PM] Bryan_Beus#6442
From ca's comment?


[05-Feb-19 02:47 PM] ca333#0333
i wasnt refering to network timeout but to time before you can reissue a non-matched swap


[05-Feb-19 02:47 PM] artemciy_dice#0049
It was 30, I have increased it to 120 recently, we've seen timeouts happening otherwise.


[05-Feb-19 02:47 PM] ca333#0333
i think its 30 right now?


[05-Feb-19 02:47 PM] ca333#0333
ok i see


[05-Feb-19 02:48 PM] Bryan_Beus#6442
What would you like me to recommend?


[05-Feb-19 02:48 PM] ca333#0333
isnt 2 minutes too much?


[05-Feb-19 02:48 PM] artemciy_dice#0049
For non-mobile, stable internet 30 is all right.

{Reactions}
üëç 

[05-Feb-19 02:48 PM] ca333#0333
what if swap isnt matched for 2 min?


[05-Feb-19 02:48 PM] ca333#0333
yes agree - 30 is a good num.


[05-Feb-19 02:48 PM] ca333#0333
never had a problem with it - from diff. internet connections. one is in the snowy mountains.


[05-Feb-19 02:49 PM] artemciy_dice#0049
I don't see why we should assume a stable internet if we target mobile though.


[05-Feb-19 02:49 PM] Bryan_Beus#6442
Okay, I will say, the default value should be set to 30.

And then, if it's not set, I will say that MM2 will attempt to determine the most suitable timeout value.


[05-Feb-19 02:49 PM] Bryan_Beus#6442
How's that?


[05-Feb-19 02:49 PM] ca333#0333
usually mobile internet isnt that bad?


[05-Feb-19 02:49 PM] ca333#0333
except if you are "mobile"


[05-Feb-19 02:49 PM] ca333#0333
like - moving


[05-Feb-19 02:49 PM] ca333#0333
but static mobile net on same net should be okay


[05-Feb-19 02:50 PM] ca333#0333
but yeah - guess doesnt apply for global net conditions


[05-Feb-19 02:51 PM] artemciy_dice#0049
Exactly, internet is flacky on the move, and also when the network is under load (which with some ops is very often; in fact, I was in France half a year back or so, and mobile internet was total crap most of the time); and when you have Wi-Fi with lots of routers around (in a condo).


[05-Feb-19 02:51 PM] ca333#0333
yeah many potential interferences


[05-Feb-19 02:52 PM] ca333#0333
well we should have mobile build hopefully soon to determine the situation


[05-Feb-19 02:52 PM] Bryan_Beus#6442
Here's what I have for `buy` currently:

```
## buy

**buy base rel price relvolume timeout=number duration=number**

The `buy` method issues a buy request and attempts to match an order from the orderbook based on the provided arguments.

By default, `timeout` and `duration` should be set to `timeout=30` and `duration=3600`.

If `timeout` is not set, MM2 will attempt to determine the most suitable value.

### Arguments:

| Structure | Type     | Description |
| --------- | -------- | ----------- |
| base       | string | the name of the coin the user desires to receive |
| rel       | string | the name of the coin the user desires to sell |
| price     | number | the price in `rel` the user is willing to pay per one unit of the `base` coin |
| relvolume | number | the amount of coins the user is willing to spend of the `rel` coin |
| timeout | number | the amount of time to wait until the request expires |
| duration | number | | 
```


[05-Feb-19 02:53 PM] Bryan_Beus#6442
I still need the info for duration.


[05-Feb-19 02:53 PM] Bryan_Beus#6442
This is how long it should stay on the orderbook, correct?


[05-Feb-19 02:53 PM] ca333#0333
duration is the counter which keeps looking for ordermatch if i am not mistaken


[05-Feb-19 02:54 PM] ca333#0333
so it keeps looking for <duration> seconds before dropping the request and allowing user to reisssue buy call


[05-Feb-19 02:54 PM] ca333#0333
@artemciy_dice can say if correct


[05-Feb-19 02:55 PM] Bryan_Beus#6442
does `dropping the request` mean that the request is altogether cancelled? Just making sure I understand.


[05-Feb-19 02:55 PM] artemciy_dice#0049
( https://www.tripadvisor.com/ShowTopic-g187147-i14-k6706511-o210-What_is_best_and_cheapest_prepaid_SIM_CARD_in_france-Paris_Ile_de_France.html#93228865 - I tried several ops, and the one I've ended up using was in fact crappy by default, and required a special app switching to LTE to work ok )

{Embed}
https://www.tripadvisor.com/ShowTopic-g187147-i14-k6706511-o210-What_is_best_and_cheapest_prepaid_SIM_CARD_in_france-Paris_Ile_de_France.html
what is best and cheapest prepaid SIM CARD in france? - Paris Foru...
Answer 211 of 230: Hello, 

I will be in Paris for One week and need french number and internet on my mobile.

I want to have possibility to receive call and maybe make some few calls in french+using internet(for surfing+checking my email).



In this situation what...
https://images-ext-2.discordapp.net/external/tknj62J0O141jzrSq1tVCU2SAIdSMCP9_KJSsNnb1vI/https/static.tacdn.com/img2/postimg.jpg


[05-Feb-19 02:56 PM] ca333#0333
a special app!? wow this is next level mess


[05-Feb-19 02:57 PM] artemciy_dice#0049
Yeah, there are apps that allow you to fine-tune stuff, https://photos.google.com/share/AF1QipPgnvAtQ3GfhNaz56JSEnJOgYNwdn7JhlmsFSh_Ya5mTv3KkyVtUxCvZVd5otrScA/photo/AF1QipNHS2qpjvEqO46r5mC8Vl6Qn1P_cmR-Mt93Sa9_?key=NWM0TWhKUzlKWWRuS1ZqTFBrYW5KdTdSSE8yS25B, but most people won't use these kind of hacks.


[05-Feb-19 02:58 PM] artemciy_dice#0049
`> By default, `timeout` and `duration` should be set to `timeout=30` and `duration=3600`.`

I'd recommend not specifying them by default.


[05-Feb-19 02:59 PM] artemciy_dice#0049
Letting the MM pick one instead.


[05-Feb-19 03:00 PM] SHossain#0007
@Bryan_Beus i would suggest to use default value set from mm and devs/users can define other values as they like.


[05-Feb-19 03:01 PM] SHossain#0007
oh...i see @artemciy_dice wrote the same thing

{Reactions}
üòá 

[05-Feb-19 03:01 PM] SHossain#0007
yes, better to let MM2 pick the value


[05-Feb-19 03:01 PM] Bryan_Beus#6442
ok, sounds good, rewriting.


[05-Feb-19 03:02 PM] Bryan_Beus#6442
@artemciy_dice 

Was the comment from ca on duration correct?


[05-Feb-19 03:04 PM] Bryan_Beus#6442
Here's what I have now:

```
## buy

**buy base rel price relvolume duration=number (timeout=number)**

The `buy` method issues a buy request and attempts to match an order from the orderbook based on the provided arguments.

MM2 will set the `timeout` by default, but the user may override by giving it a value.

### Arguments:

| Structure | Type     | Description |
| --------- | -------- | ----------- |
| base       | string | the name of the coin the user desires to receive |
| rel       | string | the name of the coin the user desires to sell |
| price     | number | the price in `rel` the user is willing to pay per one unit of the `base` coin |
| relvolume | number | the amount of coins the user is willing to spend of the `rel` coin |
| timeout | number | the amount of time to wait until the request expires; MM2 handles automatically |
| duration | number | the amount of time MM2 will continue attempting to match an order; once this time expires, the user may reissue a `buy` request |
```


[05-Feb-19 03:06 PM] artemciy_dice#0049
`> For non-mobile, stable internet 30 is all right.`

And I've been just reminded, by my own tripadvisor entry no less, that Wi-Fi in hotels was absolutely horrible. I mean, nightmarish. In fact, I wonder if we should check connectivity before we even attempt the SWAP, because crappy internet is a thing.


[05-Feb-19 03:07 PM] ca333#0333 (pinned)
true - run a predefined netoperation and measure speed and bandwith + ping to evaluate an estimation on net-situation.


[05-Feb-19 03:07 PM] ca333#0333
good idea @artemciy_dice


[05-Feb-19 03:07 PM] Bryan_Beus#6442
Updated: I added a line about duration having a default value? This is from before. 

```
## buy

**buy base rel price relvolume duration=number (timeout=number)**

The `buy` method issues a buy request and attempts to match an order from the orderbook based on the provided arguments.

MM2 will set the `timeout` by default, but the user may override by giving it a value.

`duration` should be set to `3600` by default.

### Arguments:

| Structure | Type     | Description |
| --------- | -------- | ----------- |
| base       | string | the name of the coin the user desires to receive |
| rel       | string | the name of the coin the user desires to sell |
| price     | number | the price in `rel` the user is willing to pay per one unit of the `base` coin |
| relvolume | number | the amount of coins the user is willing to spend of the `rel` coin |
| timeout | number | the amount of time to wait until the request expires; MM2 handles automatically |
| duration | number | the amount of time MM2 will continue attempting to match an order; once this time expires, the user may reissue a `buy` request |
```


[05-Feb-19 03:07 PM] artemciy_dice#0049
Pinned a message.


[05-Feb-19 03:07 PM] Bryan_Beus#6442
Or will MM2 handle duration automatically as well?


[05-Feb-19 03:09 PM] ca333#0333
yes mm2 will handle it automatically @Bryan_Beus - user should only pass base rel price relvol

{Reactions}
üíØ 

[05-Feb-19 03:09 PM] Bryan_Beus#6442
great


[05-Feb-19 03:09 PM] artemciy_dice#0049
`duration` is optional, https://github.com/artemii235/SuperNET/blob/76f8528cf7c3610c58a2e0b7f88813c5d8504c3d/mm2src/lp_ordermatch.rs#L1737

{Embed}
https://github.com/artemii235/SuperNET/blob/76f8528cf7c3610c58a2e0b7f88813c5d8504c3d/mm2src/lp_ordermatch.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[05-Feb-19 03:10 PM] artemciy_dice#0049
Maybe we should mark the optional fields somehow.


[05-Feb-19 03:11 PM] ca333#0333
good idea - maybe all optional args inside brackets `(optional param)`


[05-Feb-19 03:11 PM] Bryan_Beus#6442
I did


[05-Feb-19 03:11 PM] Bryan_Beus#6442
**sell base rel price basevolume (duration=number) (timeout=number)**

{Reactions}
‚úÖ 

[05-Feb-19 03:12 PM] Bryan_Beus#6442
Here are the table values:

```
| timeout | number | the amount of time to wait until the request expires; MM2 handles automatically |

| duration | number | the amount of time MM2 will continue attempting to match an order; once this time expires, the user may reissue a `sell` request |
```


[05-Feb-19 03:14 PM] artemciy_dice#0049
Now, last I heard from @artem.pikulin , there are sensitive steps in the SWAP where we can't quite rollback it. We'll be adding the logic to keep moving it forward instead (even across the mm2 restarts). So "once this time expires, the user may reissue a `sell` request" seems like way oversimplified to me. It assumes that the SWAP was rolled back, which might not be the case due to blockchain and network conditions, or due to the SWAP being in a sensitive state.


[05-Feb-19 03:15 PM] artemciy_dice#0049
My preference would be to wait for @artem.pikulin to discuss and clarify on how we should be handling this field.


[05-Feb-19 03:37 PM] Bryan_Beus#6442
@artemciy_dice @ca333 

I'm almost done with MM2 docs.

artem pikulin did a great job of going through the api and adding missing information.

If you two would like to review it and make sure you also approve, somewhere within the next day would be very helpful. 

We may be able to have this live by Wednesday.

{Reactions}
üëç (2) 

[05-Feb-19 04:01 PM] siu#3920
trying my first KMD/COQUI swap


[05-Feb-19 04:01 PM] siu#3920
```06 00:00:11, lp_ordermatch:1544] CONNECTED.({"address":"REbwjC5mfQBRevH78CuRjcvQudxa3ii5Ma","aliceid":1331305125,"base":"COQUI","desthash":"7a28b235e16308cdc72de1dcef23cc5de602f3cd5c7f55cfb79e88dbdb572564","destsatoshis":"1020000","desttxfee":"1000","etomicdest":"","etomicsrc":"","gui":"cli","maxprice":3.003,"method":"connected","method2":"connected","pair":"tcp://0.0.0.0:39075","price":1.27912037,"proofsend CONNECT for %u-%u\n":[],"quoteid":3339307682,"quotetime":1549411211,"rel":"KMD","requestid":2300059864,"satoshis":"798423","srchash":"f5e71f32fbb1b16599f12c264b75f45c7bea63de6ed93899c499d35cc6ef466a","timestamp":1549411208,"tradeid":3881611136,"txfee":"1000","uuid":"a3fbe4d7b844e4501c2a82eb7386761b564a49c3ddcff69ec6a74470101ed53d"})
```


[05-Feb-19 04:02 PM] siu#3920
```06 00:01:33, lp_ordermatch:455] Swap finished with error (-2006, "!send_maker_payment: rpc_clients:158] Rpc request JsonRpcRequest { jsonrpc: \"1.0\", id: \"0\", method: \"sendrawtransaction\", params: [String(\"0400008085202f8901c4950b165676e676641228c36ec845ed0b2b9e48c7ac70177d1607db14ea5d01000000006b483045022100e5f3409f95ea839bbcee6e5c0f72a80ed4819dd189987d77cb1530b62caebd6002207503518cea5f48f083d56426096ade03d3b2c191c5a4c2646ad7da785635d6f0012103851587da4e07502926555ddaa7c95adaa6b29a31b8093b4b0432b88c545f46fdffffffff02ef2a0c000000000017a9142a54ebd277859fbbc5bbf4e3fa3ae4ea629178b9879f350c00000000001976a9143a648d95e1306217485e6e8de001d19d085a69c688ac00000000000000000000000000000000000000\")] } failed with HTTP status code 500 Internal Server Error, response body: {\"result\":null,\"error\":{\"code\":-22,\"message\":\"TX decode failed\"},\"id\":\"0\"}\n")
```


[05-Feb-19 04:03 PM] siu#3920
finished with error üò¶


[05-Feb-19 04:08 PM] SHossain#0007
@cipi i couldn't connect to the 1.4 electrum servers. got this error
```
{"error":"lp_coins:829] lp_coins:786] utxo:951] rpc_clients:557] rpc_clients:390] rpc_clients:699] Connection timed out (os error 110)"}{"error":"lp_coins:829] lp_coins:786] utxo:951] rpc_clients:557] rpc_clients:390] rpc_clients:699] Connection timed out (os error 110)"}
```


[05-Feb-19 04:08 PM] SHossain#0007
electrum script
```
#!/bin/bash
source userpass
curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"BEER\",\"urls\":[\"46.4.78.11:10022\",\"6.4.87.18:10022\"]}"
curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"PIZZA\",\"urls\":[\"46.4.78.11:10024\",\"6.4.87.18:10024\"]}"
```


[05-Feb-19 04:10 PM] SHossain#0007
trying with Ubuntu sever 16.04 on a dedicated machine.


[05-Feb-19 04:12 PM] siu#3920
seems like there are issues with KMD


[05-Feb-19 04:12 PM] siu#3920
will try BEER/COQUI


[05-Feb-19 04:27 PM] siu#3920
this is weird, a BEER/COQUI swap failed too ```¬∑ 2019-02-06 01:25:58 +0100 [swap uuid=1d04227b04becc3d7e19d524e03248cc692e4527f89cc9200202e77bfe95ed8e] Waiting for Taker fee‚Ä¶ Done. !validate taker fee: utxo:740] rpc_clients:158] Rpc request JsonRpcRequest { jsonrpc: "1.0", id: "0", method: "getrawtransaction", params: [String("1127e881c5da3d251c4afa1b3e0db7a0002bf681a6925100a485da3f6cd5aab9"), Number(1)] } failed with HTTP status code 500 Internal Server Error, response body: {"result":null,"error":{"code":-5,"message":"No information available about transaction"},"id":"0"}

    Waiting for Negotiation reply‚Ä¶ Done.
06 00:25:58, lp_ordermatch:455] Swap finished with error (-2010, "!validate taker fee: utxo:740] rpc_clients:158] Rpc request JsonRpcRequest { jsonrpc: \"1.0\", id: \"0\", method: \"getrawtransaction\", params: [String(\"1127e881c5da3d251c4afa1b3e0db7a0002bf681a6925100a485da3f6cd5aab9\"), Number(1)] } failed with HTTP status code 500 Internal Server Error, response body: {\"result\":null,\"error\":{\"code\":-5,\"message\":\"No information available about transaction\"},\"id\":\"0\"}\n")```


[05-Feb-19 04:30 PM] cipi#4502
@SHossain i see an error in your call: the IP is 46.4.87.18, not 6.4.87.18, a `4` is missing


[05-Feb-19 04:32 PM] cipi#4502
the first IP is correct, just the second is wrong


[05-Feb-19 04:33 PM] SHossain#0007
oppppsss. thanks for noticing


[05-Feb-19 04:36 PM] SHossain#0007
@cipi they are working now


[05-Feb-19 04:36 PM] SHossain#0007
started a swap


[05-Feb-19 04:38 PM] siu#3920
```¬∑ 2019-02-06 01:37:28 +0100 [swap uuid=67e9e5019cf1466a2ebd2131a18d6297e2286cd2ec85b93e492baf882a27d053] Waiting for Negotiation reply‚Ä¶ Error: timeout
06 00:37:28, lp_ordermatch:455] Swap finished with error (-2000, "Error getting \'negotiation-reply@tcp://0.0.0.0:40841\': timeout")```


[05-Feb-19 04:38 PM] siu#3920
swaps keep failing


[05-Feb-19 04:40 PM] SHossain#0007
first swap completed. 2nd one got error
```
¬∑ 2019-02-06 01:38:24 +0100 [swap uuid=8b98209166766906c2bd245ab53cbec4d56056411b306eb76cbe7ee6acccb633] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
>>>>>>>>>> received quote BEER/PIZZA 0.96985752
06 00:38:30, lp_ordermatch:1162] aliceid.3904324476 got new bestprice 0.9698575224804382 dynamictrust -1.0312955 (unconf 0) slowresponse.0
06 00:38:30, lp_ordermatch:603] lp_trade] Alice max price: 1.001
06 00:38:32, lp_ordermatch:1229] send LP_connect aliceid.3904324476 0.9698575224804382
unexpected missing string value.(alien)
unexpected missing string value.(alien)
unexpected missing string value.(alien)
```


[05-Feb-19 04:42 PM] SHossain#0007
ubuntu 16.04 server with 1gbps connection


[05-Feb-19 04:43 PM] SHossain#0007
next swap started


[05-Feb-19 04:49 PM] siu#3920
how many confs does the new mm2 need ?


[05-Feb-19 04:54 PM] siu#3920
ok, using electrum on both servers and speeding up block generation for coqui i got the swap through


[05-Feb-19 04:54 PM] siu#3920
```06 00:53:57, lp_swap:472] Taker payment spend tx fbb7a8510411b71c2aaa5793ae7822b248467ae80c2795bac6373b4e76ecf946
¬∑ 2019-02-06 01:53:57 +0100 [swap uuid=32526471dc60662c207cdee8c4855f7ab4728200f906935bf8502518c2d8c28b] Swap finished successfully.
    Waiting for Taker payment to be spent‚Ä¶
    Waiting for Taker payment confirmation‚Ä¶
    Waiting for Taker payment‚Ä¶ Done.
    Sending Maker payment‚Ä¶
    Waiting for Taker fee‚Ä¶ Done.
    Waiting for Negotiation reply‚Ä¶ Done.
```


[05-Feb-19 04:59 PM] SHossain#0007
server is working fine. multiple swaps finishing nicely.


[05-Feb-19 04:59 PM] siu#3920
with native daemons?


[05-Feb-19 05:00 PM] siu#3920
@SHossain


[05-Feb-19 05:00 PM] SHossain#0007
nope. just electrum. the list cipi posted and pinned in this channel


[05-Feb-19 05:00 PM] SHossain#0007
BBER/PIZZA


[05-Feb-19 05:00 PM] siu#3920
ok


[05-Feb-19 05:01 PM] siu#3920
i tried native BEER/COQUI and KMD/COQUI and it didnt work


[05-Feb-19 05:01 PM] siu#3920
electrum did work though


[05-Feb-19 05:03 PM] siu#3920
```06 01:03:05, lp_swap:656] Taker payment spend tx b51db98e0146b9d10b9b9e6b1d1c7bb124793218c7234e1462760be06bb2767c
06 01:03:07, lp_swap:685] Maker payment spend tx f5553b66eeb3c11b2b9da0677b6ecb707ad061f9cbc501b0f92a20f960560431
¬∑ 2019-02-05 21:03:07 -0400 [swap uuid=3731ffc5e8cd7c056fefb288d5e8ad2e802ee32854cdbaa84214b0301552604c] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```


[05-Feb-19 05:03 PM] siu#3920
another one, autoprice scripts seem to be working well on mm2


[05-Feb-19 05:04 PM] siu#3920
also, would like to know how much traffic electrum mm2 can handle


[05-Feb-19 05:04 PM] siu#3920
im off for the night... good night


[05-Feb-19 05:04 PM] siu#3920
COQUI orders are up if anyone wants to test


[05-Feb-19 05:14 PM] SHossain#0007
i had multiple BEER/PIZZA swaps completed successfully and some came up with the following error
```
¬∑ 2019-02-06 02:13:48 +0100 [swap uuid=c024ebb93ade03eed461b7c614992d84ee609e8e374b26a7b9964b264455ac30] Waiting for Maker payment‚Ä¶ Error: timeout
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
06 01:13:48, lp_ordermatch:786] Swap finished with error (-1005, "Error getting \'maker-payment@tcp://195.201.116.176:52512\': timeout")
```


[05-Feb-19 05:15 PM] SHossain#0007
but, better than my home connection. definitely, i need to change the router and try a new one, if that helps


[05-Feb-19 09:54 PM] artem.pikulin#0794
@siu Hi, if you test `real market value` coins please make sure that you trade `small` amounts that you might consider to `completely lose`, as I mentioned previously if MM2 crashes or something else wrong happens you might `lose` your coins: https://discordapp.com/channels/412898016371015680/476025090627207168/540835548810707005


[05-Feb-19 09:57 PM] artem.pikulin#0794
@everyone please check message above üëÜ


[05-Feb-19 10:04 PM] artem.pikulin#0794
@artemciy_dice @Bryan_Beus Hi, I've just checked that `duration` arg of `buy/sell` requests is not used at all in MM2 code. We can consider this as `deprecated`.

{Reactions}
üëç 

[05-Feb-19 10:05 PM] Bryan_Beus#6442
ok, fixing now, thank you


[05-Feb-19 10:05 PM] Bryan_Beus#6442
what about in `orderbook`?


[05-Feb-19 10:06 PM] Bryan_Beus#6442
oh, it's deprecated there already


[05-Feb-19 10:25 PM] artem.pikulin#0794
`i tried native BEER/COQUI and KMD/COQUI and it didnt work` @siu could you please provide more details about `it didn't work`? If you experience any error please post the `logs` too.


[05-Feb-19 11:23 PM] artem.pikulin#0794
@kmdstudent Hi, welcome to MM2 channel! I've added you to `MM2 community tester group`. Please leave `all` questions about MM2 here. It's in `private` test stage so it's prefferred to discuss details at separate non-public channel.


[05-Feb-19 11:24 PM] artem.pikulin#0794
@kmdstudent Regarding your build error: please provide output of `openssl version`. What OS do you have?


[06-Feb-19 12:41 AM] artem.pikulin#0794
@everyone I've just pushed `non-backwards-compatible` changes to `mm2` branch, please make sure to use the latest commit, swaps won't work otherwise.

{Reactions}
üëç (4) 

[06-Feb-19 02:11 AM] siu#3920
good morning @artem.pikulin


[06-Feb-19 02:11 AM] siu#3920
Yesterday i set a server with KMD/COQUI/BEER


[06-Feb-19 02:12 AM] siu#3920
on native mode, swaps didnt work with KMD/COQUI  this was the error: ```06 00:01:33, lp_ordermatch:455] Swap finished with error (-2006, "!send_maker_payment: rpc_clients:158] Rpc request JsonRpcRequest { jsonrpc: \"1.0\", id: \"0\", method: \"sendrawtransaction\", params: [String(\"0400008085202f8901c4950b165676e676641228c36ec845ed0b2b9e48c7ac70177d1607db14ea5d01000000006b483045022100e5f3409f95ea839bbcee6e5c0f72a80ed4819dd189987d77cb1530b62caebd6002207503518cea5f48f083d56426096ade03d3b2c191c5a4c2646ad7da785635d6f0012103851587da4e07502926555ddaa7c95adaa6b29a31b8093b4b0432b88c545f46fdffffffff02ef2a0c000000000017a9142a54ebd277859fbbc5bbf4e3fa3ae4ea629178b9879f350c00000000001976a9143a648d95e1306217485e6e8de001d19d085a69c688ac00000000000000000000000000000000000000\")] } failed with HTTP status code 500 Internal Server Error, response body: {\"result\":null,\"error\":{\"code\":-22,\"message\":\"TX decode failed\"},\"id\":\"0\"}\n")```


[06-Feb-19 02:12 AM] siu#3920
Then i tried BEER/COQUI, and it didnt work, but it might have to do with beer daemon in my server


[06-Feb-19 02:12 AM] siu#3920
then i tried full electrum BEER/COQUI and it did work.


[06-Feb-19 02:22 AM] siu#3920
btw, did a new experiment today, left the marketmaker running on my laptop all night and in the server


[06-Feb-19 02:22 AM] siu#3920
now i tried a swap without restart or anything and it worked!


[06-Feb-19 02:23 AM] siu#3920
so stability seems to be very good!


[06-Feb-19 02:24 AM] artem.pikulin#0794
@siu Thanks! Is Sapling activated for COQUI?


[06-Feb-19 02:30 AM] artem.pikulin#0794
Looks like yes. Strange error, the transaction actually looks valid.


[06-Feb-19 02:31 AM] artem.pikulin#0794
Could you please try `"coqui-cli" decoderawtransaction 0400008085202f8901c4950b165676e676641228c36ec845ed0b2b9e48c7ac70177d1607db14ea5d01000000006b483045022100e5f3409f95ea839bbcee6e5c0f72a80ed4819dd189987d77cb1530b62caebd6002207503518cea5f48f083d56426096ade03d3b2c191c5a4c2646ad7da785635d6f0012103851587da4e07502926555ddaa7c95adaa6b29a31b8093b4b0432b88c545f46fdffffffff02ef2a0c000000000017a9142a54ebd277859fbbc5bbf4e3fa3ae4ea629178b9879f350c00000000001976a9143a648d95e1306217485e6e8de001d19d085a69c688ac00000000000000000000000000000000000000`?


[06-Feb-19 02:33 AM] artem.pikulin#0794
Going to run COQUI daemon locally and check.


[06-Feb-19 02:36 AM] artem.pikulin#0794
@siu it actually works, I wonder what is different... Moreover electrum works.


[06-Feb-19 02:37 AM] siu#3920
Yes, sapling is activated


[06-Feb-19 02:37 AM] artem.pikulin#0794
https://gist.github.com/artemii235/19ea5d442aeb66d6cdedb8e7da349844

{Embed}
https://gist.github.com/artemii235/19ea5d442aeb66d6cdedb8e7da349844
COQUI tx
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[06-Feb-19 02:37 AM] siu#3920
What i can think is that thw beer daemon was the one with the issue?


[06-Feb-19 02:38 AM] siu#3920
So the tx is valid?


[06-Feb-19 02:39 AM] siu#3920
Sorry, the error might be in the KMD side?


[06-Feb-19 02:39 AM] siu#3920
I think i remember some days ago that kmd and btc still needed some work


[06-Feb-19 02:40 AM] artem.pikulin#0794
The work was not related to `sendrawtransaction`, BTC and KMD couldn't be enabled, but it's now solved by @artemciy_dice.


[06-Feb-19 02:42 AM] artem.pikulin#0794
https://discordapp.com/channels/412898016371015680/476025090627207168/542648679077642242 - the failure was with `sendrawtransaction` request to COQUI daemon, this transaction output was about to be spent: http://coqui.explorer.dexstats.info/tx/015dea14db07167d1770acc7489e2b0bed45c86ec328126476e67656160b95c4


[06-Feb-19 02:43 AM] artem.pikulin#0794
Do you use latest daemon versions?


[06-Feb-19 02:44 AM] artem.pikulin#0794
Please try `./komodo-cli -ac_name=COQUI decoderawtransaction 0400008085202f8901c4950b165676e676641228c36ec845ed0b2b9e48c7ac70177d1607db14ea5d01000000006b483045022100e5f3409f95ea839bbcee6e5c0f72a80ed4819dd189987d77cb1530b62caebd6002207503518cea5f48f083d56426096ade03d3b2c191c5a4c2646ad7da785635d6f0012103851587da4e07502926555ddaa7c95adaa6b29a31b8093b4b0432b88c545f46fdffffffff02ef2a0c000000000017a9142a54ebd277859fbbc5bbf4e3fa3ae4ea629178b9879f350c00000000001976a9143a648d95e1306217485e6e8de001d19d085a69c688ac00000000000000000000000000000000000000` and send the output.


[06-Feb-19 02:57 AM] siu#3920
yes, i updated them like a week ago


[06-Feb-19 02:58 AM] siu#3920
it seems the problem is my daemon, i just noticed longestchain: 0


[06-Feb-19 03:00 AM] siu#3920
definitively the issues are on my server daemons, sorry for that.


[06-Feb-19 03:00 AM] artem.pikulin#0794
NP, please try to test MM2 in native mode again when you fix the issues.


[06-Feb-19 03:01 AM] siu#3920
restart of the daemon triggered a reindex... will come back later


[06-Feb-19 03:18 AM] Kiruel#2091
Hi @artem.pikulin , I just create a PR for you, i just update the README, if it's ok for you. https://github.com/artemii235/SuperNET/pull/291

{Embed}
https://github.com/artemii235/SuperNET/pull/291
[v2] feat: update README adding documentation for osx by Kiruel ¬∑...
https://images-ext-1.discordapp.net/external/gbqvkOfGVZLpQJHL1q2hOLuou7P0zrTDmaYmhO6sZVg/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/8250175


[06-Feb-19 03:42 AM] artem.pikulin#0794
@Kiruel Hi, thanks! I left a comment to your PR, please check it when you have time.

{Reactions}
üëå 

[06-Feb-19 03:58 AM] Kiruel#2091
@artem.pikulin  I just push the modification tell me if it's ok.


[06-Feb-19 04:51 AM] siu#3920
I have a KMD/COQUI swap that is stuck


[06-Feb-19 04:52 AM] siu#3920
```06 12:25:38, lp_ordermatch:783] Entering the taker_swap_loop
set pubkey for 127.0.0.1 <- f5e71f32fbb1b16599f12c264b75f45c7bea63de6ed93899c499d35cc6ef466a, pairsock.-1
06 12:25:55, lp_swap:523] Received 'negotiation@tcp://127.0.0.1:15901' (69 bytes, crc 3660591643)
06 12:25:55, lp_swap:546] Sending 'negotiation-reply@tcp://127.0.0.1:15901' (69 bytes, crc 2024344936)
06 12:26:32, lp_swap:547] Received 'negotiated@tcp://127.0.0.1:15901' (1 bytes, crc 2768625435)
06 12:26:33, lp_swap:569] Taker fee tx hash 56ed4c9e8d536a4d64f564e865e7d77693d42dbc013e339a253c487004ba3fe8
06 12:26:33, lp_swap:570] Sending 'taker-fee@tcp://127.0.0.1:15901' (253 bytes, crc 963330268)
06 12:27:18, lp_swap:575] Received 'maker-payment@tcp://127.0.0.1:15901' (504 bytes, crc 751202168)
06 12:27:18, lp_swap:593] Got maker payment d7173ef9a81ff4408067a011c1f3af52a7e69c740829d096dfbee9e7c95b0a9f
06 12:30:27, peers:1154] DHT state saved to "/home/siu/.mm2/lt-dht"
set pubkey for 0.0.0.0 <- c213230771ebff769c58ade63e8debac1b75062ead66796c8d793594005f3920, pairsock.-1
06 12:40:27, peers:1154] DHT state saved to "/home/siu/.mm2/lt-dht"
PRICEFEED UPDATE.(BEER  / PIZZA)   0.90000000 5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12   1.11111111
06 12:50:27, peers:1154] DHT state saved to "/home/siu/.mm2/lt-dht"
```


[06-Feb-19 04:52 AM] siu#3920
after getting maker payment, no other info


[06-Feb-19 04:52 AM] siu#3920
its been 20+ minutes like that.


[06-Feb-19 04:53 AM] siu#3920
server using both native chains and client using both electrum


[06-Feb-19 04:55 AM] siu#3920
Server printed the same messages with no other error messages so far: ```06 12:26:59, lp_swap:406] Maker payment tx d7173ef9a81ff4408067a011c1f3af52a7e69c740829d096dfbee9e7c95b0a9f
06 12:26:59, lp_swap:407] Sending 'maker-payment@tcp://127.0.0.1:15901' (504 bytes, crc 751202168)
```


[06-Feb-19 04:58 AM] siu#3920
ok, got a resolution: ```¬∑ 2019-02-06 08:55:22 -0400 [swap uuid=d66c306223a240525583a26d96c9cc620b149118cbbbeec0e5748b081dbcfef2] Waiting for the confirmation of the Maker payment‚Ä¶ !maker_coin.wait_for_confirmations: rpc_clients:80] rpc_clients:888] ["rpc_clients:875] rpc_clients:849] future timed out", "rpc_clients:875] rpc_clients:849] future timed out", "rpc_clients:875] rpc_clients:849] future timed out"]
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
06 12:55:22, lp_ordermatch:786] Swap finished with error (-1005, "!maker_coin.wait_for_confirmations: rpc_clients:80] rpc_clients:888] [\"rpc_clients:875] rpc_clients:849] future timed out\", \"rpc_clients:875] rpc_clients:849] future timed out\", \"rpc_clients:875] rpc_clients:849] future timed out\"]")
06 12:55:22, rpc_clients:747] V4(69.12.77.197:10011) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:55:22, rpc_clients:747] V4(23.152.0.28:10011) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:55:43, rpc_clients:747] V4(192.169.7.252:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:55:43, rpc_clients:747] V4(69.12.77.197:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:56:43, utxo:945] Electrum servers ["electrum1.cipig.net:10022", "electrum2.cipig.net:10022", "electrum3.cipig.net:10022"] ping error "rpc_clients:891] \"rpc_clients:875] rpc_clients:849] future timed out\""
06 12:56:45, utxo:945] Electrum servers ["electrum1.cipig.net:10024", "electrum2.cipig.net:10024", "electrum3.cipig.net:10024"] ping error "rpc_clients:891] \"rpc_clients:875] rpc_clients:849] future timed out\""
```


[06-Feb-19 05:02 AM] siu#3920
I think it has to do with KMD not being active... afaik, KMD gets automatically activated if the daemon is running, right?


[06-Feb-19 05:22 AM] artem.pikulin#0794
@siu seems like Electrums got disconnected, please try to call `my_balance` for KMD, will it work and display correct balance?


[06-Feb-19 05:22 AM] siu#3920
im using the `getcoin` method


[06-Feb-19 05:22 AM] siu#3920
which says the coin is disabled


[06-Feb-19 05:22 AM] artem.pikulin#0794
`getcoin` doesn't work.


[06-Feb-19 05:22 AM] siu#3920
oh ok


[06-Feb-19 05:22 AM] siu#3920
which is the new method?


[06-Feb-19 05:23 AM] siu#3920
It does work for assetchains


[06-Feb-19 05:23 AM] artem.pikulin#0794
`getcoin` is not guaranteed to work properly. Please use `my_balance`.


[06-Feb-19 05:25 AM] artem.pikulin#0794
Do you use phone hotspot now?


[06-Feb-19 05:28 AM] siu#3920
no, office internet, sorry, have not tried hotspot again


[06-Feb-19 05:28 AM] siu#3920
i wanted to test first how to set a proper marketmaker server


[06-Feb-19 05:29 AM] siu#3920
ok, got it with my_balance


[06-Feb-19 05:31 AM] artem.pikulin#0794
Did `my_balance` work and display correct balance?


[06-Feb-19 05:36 AM] siu#3920
yes


[06-Feb-19 05:36 AM] siu#3920
and it shows KMD as active


[06-Feb-19 05:36 AM] siu#3920
although swap didnt work


[06-Feb-19 05:37 AM] siu#3920
will try again now though, waiting for another BEER/COQUI swap to finish


[06-Feb-19 05:37 AM] siu#3920
is there something that might make KMD not work properly?


[06-Feb-19 05:52 AM] artem.pikulin#0794
There are a lot of Electrum errors:
```
rpc_clients:888] [\"rpc_clients:875] rpc_clients:849] future timed out\", \"rpc_clients:875] rpc_clients:849] future timed out\", \"rpc_clients:875] rpc_clients:849] future timed out\"]")
06 12:55:22, rpc_clients:747] V4(69.12.77.197:10011) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:55:22, rpc_clients:747] V4(23.152.0.28:10011) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:55:43, rpc_clients:747] V4(192.169.7.252:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:55:43, rpc_clients:747] V4(69.12.77.197:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:56:43, utxo:945] Electrum servers ["electrum1.cipig.net:10022", "electrum2.cipig.net:10022", "electrum3.cipig.net:10022"] ping error "rpc_clients:891] \"rpc_clients:875] rpc_clients:849] future timed out\""
06 12:56:45, utxo:945] Electrum servers ["electrum1.cipig.net:10024", "electrum2.cipig.net:10024", "electrum3.cipig.net:10024"] ping error "rpc_clients:891] \"rpc_clients:875] rpc_clients:849] future timed out\""
```


[06-Feb-19 05:57 AM] artem.pikulin#0794
@siu Could you please ping electrums for some time? `ping electrum1.cipig.net` and others. Please also run `git log` in MM2 source dir and show the output.


[06-Feb-19 06:42 AM] siu#3920
hello, sorry, had to go AFK for a bit


[06-Feb-19 06:43 AM] siu#3920
```ping electrum1.cipig.net
PING electrum1.cipig.net (192.169.7.252) 56(84) bytes of data.
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=1 ttl=50 time=108 ms
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=2 ttl=50 time=107 ms
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=3 ttl=50 time=118 ms
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=4 ttl=50 time=109 ms
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=5 ttl=50 time=109 ms
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=6 ttl=50 time=109 ms
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=7 ttl=50 time=106 ms
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=8 ttl=50 time=115 ms
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=9 ttl=50 time=129 ms
64 bytes from 192.169.7.252 (192.169.7.252): icmp_seq=10 ttl=50 time=117 ms
^C
--- electrum1.cipig.net ping statistics ---
10 packets transmitted, 10 received, 0% packet loss, time 9000ms
rtt min/avg/max/mdev = 106.573/113.032/129.178/6.704 ms
```


[06-Feb-19 06:43 AM] siu#3920
```git log
commit b39fea9afe780864b3c1ea5f980d85e330abb4ec (HEAD -> mm2, origin/mm2, origin/HEAD)
Merge: 3bb0ac753 b7d7cf77e
Author: Artem Pikulin <ortgma@gmail.com>
Date:   Wed Feb 6 15:38:17 2019 +0700

    Merge pull request #290 from artemii235/feature/289
    
    #289 Use persistent pubkeys instead of pubs a0/b0 for UTXO coins.

commit b7d7cf77e566a0372eb1eac061bb5dd81f5e73a9
Author: Artem Pikulin <ortgma@gmail.com>
Date:   Wed Feb 6 15:20:49 2019 +0700

    #289 Use persistent pubkeys instead of pubs a0/b0 for UTXO coins.

commit 3bb0ac753dbc8d4764b06f42b219058978c00222
Merge: 76f8528cf 560e07c8e
Author: Artem Pikulin <ortgma@gmail.com>
Date:   Wed Feb 6 13:21:36 2019 +0700

    Merge pull request #288 from artemii235/mm2-kmd
    
    Enable electrum from conf and defaults
```


[06-Feb-19 06:43 AM] siu#3920
@artem.pikulin


[06-Feb-19 07:04 AM] artem.pikulin#0794
@siu Thanks, it looks like there was network connection issue for some time so MM2 wasn't able to get transaction data from Electrum to check for confirmations. It actually makes only 1 attempt to get it which is not enough for sure. I will change it tomorrow, it will endlessly try to get transaction data until timeout. We can do this in `wait_for_confirmations` as transaction existense is already checked before.


[06-Feb-19 07:10 AM] siu#3920
it might be something to do with the slow block generation of COQUI


[06-Feb-19 07:10 AM] siu#3920
but it only gives the timeout error with KMD though


[06-Feb-19 07:12 AM] artem.pikulin#0794
This specific error is not related to slow block generation of any coin, it was like short network outage that caused Electrums to disconnect:
```
06 12:55:22, rpc_clients:747] V4(69.12.77.197:10011) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:55:22, rpc_clients:747] V4(23.152.0.28:10011) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:55:43, rpc_clients:747] V4(192.169.7.252:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:55:43, rpc_clients:747] V4(69.12.77.197:10022) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }
06 12:56:43, utxo:945] Electrum servers ["electrum1.cipig.net:10022", "electrum2.cipig.net:10022", "electrum3.cipig.net:10022"] ping error "rpc_clients:891] \"rpc_clients:875] rpc_clients:849] future timed out\""
06 12:56:45, utxo:945] Electrum servers ["electrum1.cipig.net:10024", "electrum2.cipig.net:10024", "electrum3.cipig.net:10024"] ping error "rpc_clients:891] \"rpc_clients:875] rpc_clients:849] future timed out\""
```


[06-Feb-19 07:13 AM] siu#3920
ok, will try again


[06-Feb-19 07:14 AM] artem.pikulin#0794
@siu Thanks, please leave logs here if you have any issues, I will check it tomorrow. I have to go offline now.


[06-Feb-19 07:17 AM] siu#3920
cool, have a nice day


[06-Feb-19 09:16 AM] siu#3920
Ok, i had a COQUI/BEER swap that took forever to finish so i ignored it and executed a new COQUI/KMD swap


[06-Feb-19 09:16 AM] siu#3920
which also took forever.


[06-Feb-19 09:16 AM] siu#3920
After about 2 hours, i got this: ```06 17:04:17, lp_swap:684] Taker refund tx hash d8753fd8423e0e2f8479dc06aa381015255646adc36a513decae8cdc0c0c62e8
¬∑ 2019-02-06 13:04:17 -0400 [swap uuid=acf28a440a771fd685629d240d710882d5e2d965f26db023a50bf97070ca55bb] Swap finished with refund.
    Wait until payment is refundable‚Ä¶
    Refunding the Taker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶ Error: utxo:813] rpc_clients:515] Waited too long until 1549472645 for output TransactionOutput { value: 1019000, script_pubkey: a914d31286277508d2b419cdec7802bfedf35dccae2187 } to be spent 
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
06 17:05:20, lp_swap:636] Taker payment spend tx 51f0d0a421f0fd2d9c98160e8efe6d951f5a377245ddb66eedf4b47216ce22c1
06 17:05:21, lp_swap:664] Maker payment spend tx dc06b8c1d4c053b1a9df1744ddf27cb62b4ff795515b130af816b33e8f17a451
¬∑ 2019-02-06 13:05:21 -0400 [swap uuid=bc9ace7317a730ead802b02b61156ba3a4ef58479c44a3286295dac9c2782823] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
06 17:10:29, peers:1154] DHT state saved to "/home/siu/.mm2/lt-dht"
```


[06-Feb-19 09:16 AM] siu#3920
so one failed and the other was successful


[06-Feb-19 09:18 AM] siu#3920
If im interpreting this correctly, this time the COQUI/KMD swap finished successfully, the other one didnt


[06-Feb-19 10:52 AM] siu#3920
awesome! ``` 2019-02-06 14:52:04 -0400 [swap uuid=fcfbb6d0be693ab5dc7aac20c809bce6433665bee36b64487a8d9533772156dd] Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
```


[06-Feb-19 10:52 AM] siu#3920
swaps working consistently now


[06-Feb-19 10:53 AM] siu#3920
they take some time because of slow block generation in COQUI, but all is good.


[06-Feb-19 11:02 AM] siu#3920
Have there been stories of lost funds? or are we working the same way barterdex1 worked?


[06-Feb-19 09:01 PM] artem.pikulin#0794
@siu Hi, MM2 might not rollback properly even if it doesn't crash, but if it crashes or stops for whatever reason stuck funds are `100%` lost.


[06-Feb-19 09:02 PM] artem.pikulin#0794
I've mentioned several times that MM2 is for `test coins only` now.


[06-Feb-19 09:24 PM] artem.pikulin#0794
@MM2 community tester , @siu @SHossain The `mm2` branch is updated, @artemciy_dice made changes that will hopefully decrease the number of failed swaps with errors like `06 01:13:48, lp_ordermatch:786] Swap finished with error (-1005, "Error getting \'maker-payment@tcp://195.201.116.176:52512\': timeout")`. It also contains debug logs for DHT that will help us to troubleshoot the issue if it's still happening. Please make sure to use the latest `mm2` commit, the changes are `not` backwards-compatible.

{Reactions}
üëç (3) 

[06-Feb-19 11:12 PM] artemciy_dice#0049
We've mentioned before in this channel of doing a desktop Flutter.IO ( https://discordapp.com/channels/412898016371015680/476025090627207168/535040612685185033 ).
Looks like we've just got an upgrade: https://github.com/gliheng/flutter-rs (Flutter on desktop, and with a Rust backend).

{Embed}
https://github.com/gliheng/flutter-rs
gliheng/flutter-rs
Desktop flutter runner. Contribute to gliheng/flutter-rs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/aApx5K_jhZ8_aRKqF3B5LyF3ftPUr2jmRrH12_xn_z8/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/1280299

{Reactions}
üòª (2) 

[06-Feb-19 11:38 PM] artemciy_dice#0049
BTW, a question came up of how we're to embed MM2 on Android. I was thinking of a JNI library, but maybe we can run it simply as a Linux sub-process? Any experience / pointers on that?


[07-Feb-19 01:26 AM] CrisF#3405
Bought some BEER `4c28dcb9deb839381130b0b9bf5a5cb3b5486707f4de2f4749d647b7744720ff ` üéÜ 
Set-up was very easy, following guide.  (Some user error, haha)
Ubuntu 18.04 desktop.
During trade some messages ```BASH
07 09:01:48, peers:533] transmit] chunk 3bxln9zhese1q.1 stored, 262 ‚Üí 262
07 09:01:50, peers:785] dht_get on a missing chunk v4dx1yifw0be.1 after 10.0```

{Reactions}
üíØ 

[07-Feb-19 01:27 AM] CrisF#3405
Anyone have PIZZA üçï to sell?  I only have BEER üç∫ .


[07-Feb-19 01:46 AM] SHossain#0007
@artem.pikulin my new router has started and will be acctivated soon. (broadband provider has to activate the router from their end). hofully my connection issues should go away. if not, will call them up for troubleshooting.


[07-Feb-19 01:47 AM] artem.pikulin#0794
@SHossain Hi, thanks for update! I hope too üôÇ

{Reactions}
ü§ûüèΩ 

[07-Feb-19 01:49 AM] artem.pikulin#0794
@CrisF Hi, ` RThUidaY6NoXmmgHSwY4qbf3GNaz6ZFGtA` is this your test address?


[07-Feb-19 01:49 AM] CrisF#3405
Yes, it is.


[07-Feb-19 01:50 AM] artem.pikulin#0794
```
07 09:01:48, peers:533] transmit] chunk 3bxln9zhese1q.1 stored, 262 ‚Üí 262
07 09:01:50, peers:785] dht_get on a missing chunk v4dx1yifw0be.1 after 10.0
```
These messages are fine, just a bit more verbose output of DHT ops.


[07-Feb-19 01:51 AM] artem.pikulin#0794
@CrisF sent you some PIZZA: http://pizza.explorer.dexstats.info/tx/2a342f0a73658ee1122765c1b16d3c850e49741d2aa725bb365d121a726a5ad6


[07-Feb-19 01:54 AM] CrisF#3405
Great, thanks!  I'll do some more.


[07-Feb-19 02:27 AM] SHossain#0007
@CHMEX can you listen to netid 9999 for swap countings? would that work?


[07-Feb-19 02:30 AM] CrisF#3405
Not seeing anything in the orderbook at the moment.


[07-Feb-19 02:30 AM] artem.pikulin#0794
@SHossain it won't, MM2 doesn't broadcast finished swaps data to P2P network.


[07-Feb-19 02:30 AM] SHossain#0007
i see


[07-Feb-19 02:31 AM] SHossain#0007
i have 4 swaps processing in parallel


[07-Feb-19 02:31 AM] CrisF#3405
Ahh, looks like my connection dropped.


[07-Feb-19 02:32 AM] CrisF#3405
4 in parallel is good.  Are the problems from before fixed then?


[07-Feb-19 02:33 AM] SHossain#0007
it seems my issues are gone now with new router and new code üòÉ

{Reactions}
üéâ 

[07-Feb-19 02:34 AM] artem.pikulin#0794
@SHossain, very nice!


[07-Feb-19 02:34 AM] SHossain#0007
only 1 pending request warning/error after doing 10 swaps or so 
```
07 10:33:44, common:658] RPC error response: lp_ordermatch:1753] lp_ordermatch:1818] Only 1 pending request at a time, wait 1
```


[07-Feb-19 02:35 AM] artem.pikulin#0794
@CrisF Yes, some DHT fixes were made by @artemciy_dice, it should be even more reliable now üôÇ


[07-Feb-19 02:35 AM] CrisF#3405
I saw he made some, glad they worked üòÉ


[07-Feb-19 02:36 AM] SHossain#0007
mm2 seems much reliable now. time to test more and more üòÉ


[07-Feb-19 02:37 AM] SHossain#0007
look like new code is looking for missing chunks of data and adding them when found (at least if that what the following lines means)
```
07 10:35:50, peers:785] dht_get on a missing chunk 14g7k3i2tq5f1.1 after 10.0
07 10:35:58, peers:533] transmit] chunk 2l5ktyshov8tl.1 stored, 262 ‚Üí 262
```


[07-Feb-19 02:40 AM] artem.pikulin#0794
@SHossain it's just verbose output of DHT operations, MM2 waits for data to be stored on DHT and it's fine if it's not there yet (`missing chunk `), MM just keeps requesting (`dht_get`).


[07-Feb-19 02:41 AM] artem.pikulin#0794
We're going to remove these logs when we confirm that there're no more issues.

{Reactions}
üëç 

[07-Feb-19 02:49 AM] CrisF#3405
Another one went through.  Very fast and smooth.
I had `ufw` enabled this time.


[07-Feb-19 02:50 AM] CrisF#3405
I have many ports open, but am not exactly sure which ones are necessary and which aren't.


[07-Feb-19 02:59 AM] SHossain#0007
i'm having most stable swap experience. every swap  is being completed

{Reactions}
üî• (2) 

[07-Feb-19 03:01 AM] artem.pikulin#0794
@SHossain is it possible to enable old router back just to check if it would work with latest code? üôÇ


[07-Feb-19 03:02 AM] artem.pikulin#0794
If it works, the fault was code, if it doesn't - the old router is faulty.


[07-Feb-19 03:05 AM] SHossain#0007
it is possible but will cause more delays as i have to call and get the old router activated. my provider provisions router mac address manually in the netwrok


[07-Feb-19 03:05 AM] SHossain#0007
if necessary, i can do that


[07-Feb-19 03:05 AM] artem.pikulin#0794
It's not necessary, I'm just curious üôÇ


[07-Feb-19 03:05 AM] SHossain#0007
none of the active SSH got disrupted on the otherr computer with this new router and all the swaps happening in this computer.


[07-Feb-19 03:06 AM] artem.pikulin#0794
As you said you experienced same issues with torrent download when using old router so something is not right with it definitely.


[07-Feb-19 03:08 AM] SHossain#0007
yes, possibly. hopefully, no other issue i run into from this point forward and continue with smooth  testing üòÉ


[07-Feb-19 03:09 AM] SHossain#0007
Thanks for your help with all the testings you have done patiently with me üòÉ


[07-Feb-19 03:11 AM] artem.pikulin#0794
@SHossain thank you too! You help to make MM2 better and better üôÇ

{Reactions}
üíØ 

[07-Feb-19 03:12 AM] SHossain#0007
That is goal. To make MM2 better in every way.


[07-Feb-19 03:12 AM] CrisF#3405
This is very smooth.  It sure is nice not to worry about UTXOs!!


[07-Feb-19 03:13 AM] SHossain#0007
yep. end-user don't have to deal with splitting utxo or manage inventory anymore

{Reactions}
üéâ 

[07-Feb-19 03:14 AM] artem.pikulin#0794
Agree, addresses used with automatic CI testing ended up with hundreds of `0.001` UTXOs that were not really usable for anything.

{Reactions}
üëç 

[07-Feb-19 03:14 AM] SHossain#0007
at some point i had thousands of utxos wtih mm1 testings


[07-Feb-19 03:15 AM] artem.pikulin#0794
When I just started using MM2 with these addresses there were transactions with dozens inputs.


[07-Feb-19 03:15 AM] SHossain#0007
electrum used to have issues with many utxos like that


[07-Feb-19 03:17 AM] Deleted User#0000
üò¶ I won the beer stress test by using 10,000 utxos and 8 marketmakers in paralell ... Those were the days... Flood bob so nobody ellse could buy :troll_cool:


[07-Feb-19 03:18 AM] SHossain#0007
we will have stress test again when we have things more stable and probably with GUI

{Reactions}
üëç 

[07-Feb-19 03:18 AM] CrisF#3405
Haha, I got one trade that weekend and found a bug :abusedsmily:   Very happy about it.  That was the first time I every heard of KMD.  That test got me here.


[07-Feb-19 03:18 AM] SHossain#0007
or maybe first CLI stress test, then, GUI


[07-Feb-19 03:19 AM] Deleted User#0000
I used GUI for that test... I used my notary server at home with 8 VM's each running all full native daemon and full barterdex GUI's took 3 days to prepare for it... Nobody had a chance üòÜ


[07-Feb-19 03:20 AM] Deleted User#0000
I think CHMEX beat me just .... with AWS and CLI


[07-Feb-19 03:20 AM] CrisF#3405
Haha, I remember you (think it was) saying you were going to stop, to give everyone a chance.  You only had 400 KMD üòÉ


[07-Feb-19 03:21 AM] CrisF#3405
Took me 20 hrs straight to get one miniscule trade haha.


[07-Feb-19 03:21 AM] CrisF#3405
Good times.


[07-Feb-19 03:22 AM] Deleted User#0000
lol


[07-Feb-19 03:23 AM] Deleted User#0000
yeah I think I did stop... I found a pretty easy exploit... just load up 30 bots on every MM and bob would just be closed out to everyone else


[07-Feb-19 03:24 AM] CrisF#3405
Soo it was youu, üòÉ

{Reactions}
üëç 

[07-Feb-19 03:25 AM] Deleted User#0000
Man i forgot about the other test... that was so long ago... So many of us  joined around that time. Still plenty here too... So good. üòÉ anyway not channel for this lol.. sorry guys. Great work on MM2 looks impressive. Will gie it a try soon.


[07-Feb-19 03:26 AM] artem.pikulin#0794
@Deleted User It's fine to remember `these old good MM1 days` here, why not üôÇ

{Reactions}
üòÇ (2) 

[07-Feb-19 03:31 AM] SHossain#0007
Before BEER/PIZZA, we had MNZ stress test, @jorian won that one. He used insomnia. Then, we had BTCH stress test... Exciting days, those were.

{Reactions}
üíØ (2) 

[07-Feb-19 03:32 AM] SHossain#0007
And, more exciting days coming :)


[07-Feb-19 03:32 AM] CrisF#3405
Yes!  Looking forward to them üòÉ


[07-Feb-19 03:33 AM] CrisF#3405
MM2


[07-Feb-19 04:28 AM] siu#3920
morning

{Reactions}
‚òï (4) 

[07-Feb-19 04:29 AM] siu#3920
lets test


[07-Feb-19 04:42 AM] siu#3920
```07 12:38:17, peers:785] dht_get on a missing chunk vns8xz3dulmp.1 after 10.0
07 12:38:19, peers:533] transmit] chunk gcor37q71s7g.1 stored, 2 ‚Üí 77
07 12:38:22, peers:533] transmit] chunk 3bevwx0p6e83p.1 stored, 2 ‚Üí 262
07 12:38:24, peers:533] transmit] chunk gcor37q71s7g.1 stored, 77 ‚Üí 77
07 12:38:26, peers:533] transmit] chunk 3bevwx0p6e83p.1 stored, 2 ‚Üí 262
07 12:38:27, peers:785] dht_get on a missing chunk vns8xz3dulmp.1 after 10.0
07 12:38:37, peers:785] dht_get on a missing chunk vns8xz3dulmp.1 after 10.0
07 12:38:42, peers:533] transmit] chunk 3bevwx0p6e83p.1 stored, 2 ‚Üí 262
07 12:38:47, peers:785] dht_get on a missing chunk vns8xz3dulmp.1 after 10.0
07 12:38:48, peers:533] transmit] chunk 3bevwx0p6e83p.1 stored, 262 ‚Üí 262
07 12:38:57, peers:785] dht_get on a missing chunk vns8xz3dulmp.1 after 10.0
```


[07-Feb-19 04:42 AM] siu#3920
this is new


[07-Feb-19 04:46 AM] artem.pikulin#0794
https://discordapp.com/channels/412898016371015680/476025090627207168/543018190922317825


[07-Feb-19 04:47 AM] artem.pikulin#0794
@siu, Hi, It's explained above.


[07-Feb-19 04:51 AM] jorian#4555
Insomnia might still be useful


[07-Feb-19 05:17 AM] CrisF#3405
Your Insomnia guide was very useful!


[07-Feb-19 05:48 AM] jorian#4555
Was, it's gone now


[07-Feb-19 05:48 AM] jorian#4555
Might put it back


[07-Feb-19 06:40 AM] artemciy_dice#0049
With insomnia one of the options might be switching to a polyphasic sleep diet. The author of this book had insomnia and becoming polyphasic has cured it: https://www.amazon.com/Ubersleep-Nap-Based-Schedules-Polyphasic-Lifestyle-ebook/dp/B00E1XAD7W/

{Reactions}
üòÇ (5) 

[07-Feb-19 07:06 AM] jorian#4555
```On average, I sleep about four hours a day -- three at night, and one hour broken into three 20-minute naps.```


[07-Feb-19 07:07 AM] jorian#4555
quite effective, half of what 'normal' people need


[07-Feb-19 08:21 AM] artem.pikulin#0794
I will be on vacation from tomorrow (February 8th) to February 15th. I will be reachable depending on internet availability. If you have any questions about MM2 please contact @artemciy_dice, also you can DM or ping me, I will respond immediately once I'm able to be online. Thanks to @everyone for testing and supporting MM2, we will make it the best together! @artemciy_dice `HUGE` thanks to you üôÇ your hard work makes MM2 so great. See you all in 1 week, will be back to work with max effort üë∑

{Reactions}
üç∏ (7) ü§ó (4) üëç (2) üöÄ (2) 

[07-Feb-19 08:21 AM] siu#3920
awesome! have a great vacation!


[07-Feb-19 08:22 AM] artem.pikulin#0794
Thanks üôÇ


[07-Feb-19 08:30 AM] jusoaresf#3291
Have fun!

{Reactions}
üòâ 

[07-Feb-19 08:38 AM] Kiruel#2091
Yeah have fun dude !

{Reactions}
üòâ 

[07-Feb-19 08:57 AM] SHossain#0007
Enjoy your time @artem.pikulin üòÉ

{Reactions}
üç∫ 

[07-Feb-19 08:57 AM] SHossain#0007
you deserve it


[07-Feb-19 09:09 AM] Audo#5667
Have a nice holiday @artem.pikulin !

{Reactions}
üî• 

[07-Feb-19 09:25 AM] siu#3920
What is the best way to automate the extraction of userpass?


[07-Feb-19 09:25 AM] siu#3920
anyone has an example ?


[07-Feb-19 09:26 AM] siu#3920
since `setpassphrase` got deprecated, i dont know what to use to automate userpass extration in a script.


[07-Feb-19 09:34 AM] artem.pikulin#0794
@siu Good question! That reminds me of idea to make `userpass` independent from `passphrase` at all. I think it should be set from config, e.g. `rpc_password` field,  not "magically" generated. So you will be able to set it by yourself upon MM2 start.


[07-Feb-19 09:35 AM] artem.pikulin#0794
I already have my first task to do after vacation üôÇ


[07-Feb-19 09:35 AM] siu#3920
hehe, great!


[07-Feb-19 09:35 AM] siu#3920
ok, sounds like a plan.


[07-Feb-19 09:35 AM] siu#3920
Have fun!

{Reactions}
üòã 

[07-Feb-19 04:08 PM] grewalsatinder#9653
Have fun @artem.pikulin üòÄ

{Reactions}
‚òù 

[08-Feb-19 06:59 AM] Kiruel#2091
Hi, when i start mm2 where i can find the list of all the coins ? 
`[{"coin": "PIZZA","asset": "PIZZA","txversion":4,"rpcport":
11608},{"coin": "BEER","txversion":4,"asset": "BEER","rpcport": 8923}]`


[08-Feb-19 07:00 AM] Kiruel#2091
Because have just this coins.


[08-Feb-19 07:02 AM] SHossain#0007
https://github.com/jl777/coins/blob/master/coins

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[08-Feb-19 07:02 AM] Kiruel#2091
Ok i find it üòõ ~


[08-Feb-19 07:03 AM] Kiruel#2091
ty


[08-Feb-19 07:03 AM] SHossain#0007
13 parallel swaps completed sucessfully


[08-Feb-19 07:03 AM] Kiruel#2091
can i use that https://github.com/jl777/SuperNET/blob/0e71090e5b5953698c89e5212d22a75e2787aeec/etomic_build/coins ?

{Embed}
https://github.com/jl777/SuperNET/blob/0e71090e5b5953698c89e5212d22a75e2787aeec/etomic_build/coins
jl777/SuperNET
Contribute to jl777/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[08-Feb-19 07:04 AM] SHossain#0007
you can.


[08-Feb-19 07:04 AM] SHossain#0007
but, the jl777/coins repo is the primary and all coins are listed there


[08-Feb-19 07:05 AM] grewalsatinder#9653
@Kiruel the jl777/coins repo is the collection of all the coins data that other coin communities contribute to.


[08-Feb-19 07:05 AM] Kiruel#2091
@grewalsatinder ok i see.


[08-Feb-19 07:05 AM] grewalsatinder#9653
It is updated by the community itself, and administered by our team where it needs some corrections


[08-Feb-19 07:06 AM] grewalsatinder#9653
you can indeed your own set for testing, but ultimately that public repo should be used to have the coins data used in the applications


[08-Feb-19 07:06 AM] Kiruel#2091
I saw that on the json     ```
"confpath": "USERHOME/.sparkscore/sparks.conf"
```


[08-Feb-19 07:06 AM] Kiruel#2091
What is this ?


[08-Feb-19 07:06 AM] grewalsatinder#9653
I use that repo in version 1 of BarterDEX GUI app.


[08-Feb-19 07:06 AM] Kiruel#2091
ok


[08-Feb-19 07:06 AM] grewalsatinder#9653
USERHOME is a keyword


[08-Feb-19 07:06 AM] SHossain#0007
that's the location of the coin conf file


[08-Feb-19 07:06 AM] grewalsatinder#9653
it gets replaced with the system's user data directory


[08-Feb-19 07:07 AM] SHossain#0007
every coin in native mode needs coin.conf file for that coin with few mandatory params inside


[08-Feb-19 07:07 AM] grewalsatinder#9653
in mm1 it had that condition built in the mm1 code


[08-Feb-19 07:07 AM] Kiruel#2091
Ok for electrum way i don't need it ?


[08-Feb-19 07:08 AM] SHossain#0007
electrum doesn't use coin.conf. it is there for native coins


[08-Feb-19 07:09 AM] SHossain#0007
the full coins json string serves both native and electrum mode


[08-Feb-19 07:09 AM] grewalsatinder#9653
@Kiruel this is from BarterDEX GUI app, which used mm1:
https://github.com/KomodoPlatform/BarterDEX/blob/master/ipc/shepherd-ipc.js#L440

{Embed}
https://github.com/KomodoPlatform/BarterDEX/blob/master/ipc/shepherd-ipc.js
KomodoPlatform/BarterDEX
üìà BarterDEX: Decentralised Exchange and Cryptocurrency Market - KomodoPlatform/BarterDEX
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
üëå 

[08-Feb-19 07:09 AM] grewalsatinder#9653
just for reference


[08-Feb-19 07:11 AM] grewalsatinder#9653
https://github.com/KomodoPlatform/BarterDEX/blob/master/gui/js/ipc-actions.js#L725

{Embed}
https://github.com/KomodoPlatform/BarterDEX/blob/master/gui/js/ipc-actions.js
KomodoPlatform/BarterDEX
üìà BarterDEX: Decentralised Exchange and Cryptocurrency Market - KomodoPlatform/BarterDEX
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[08-Feb-19 07:12 AM] grewalsatinder#9653
https://github.com/KomodoPlatform/BarterDEX/blob/master/gui/js/dex_CoinsDB.js

{Embed}
https://github.com/KomodoPlatform/BarterDEX/blob/master/gui/js/dex_CoinsDB.js
KomodoPlatform/BarterDEX
üìà BarterDEX: Decentralised Exchange and Cryptocurrency Market - KomodoPlatform/BarterDEX
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[08-Feb-19 07:21 AM] Kiruel#2091
mm2 use 7% of my CPU with no swap active etc.. it's normal ?


[08-Feb-19 07:24 AM] SHossain#0007
same here.


[08-Feb-19 07:26 AM] Kiruel#2091
Just want to understand because on my mac its ok but on Mobile phone its can be a huge problem.


[08-Feb-19 07:26 AM] SHossain#0007
yeah, battery life will take the hit


[08-Feb-19 07:27 AM] SHossain#0007
mobile users don't like battery hungry apps. but, they can probably make exception for using DEX üòõ


[08-Feb-19 07:27 AM] SHossain#0007
When @artem.pikulin comes back, he can tell us more i hope.


[08-Feb-19 07:28 AM] Kiruel#2091
Yeah not urgent but need to be noted.

{Reactions}
üëåüèΩ 

[08-Feb-19 07:31 AM] SHossain#0007
agree


[08-Feb-19 07:35 AM] Kiruel#2091
https://github.com/artemii235/SuperNET/issues/299

{Embed}
https://github.com/artemii235/SuperNET/issues/299
CPU usage not normal ¬∑ Issue #299 ¬∑ artemii235/SuperNET
CPU usage is ~7% when no swap or nothing, i guess it's not normal. What OS do you use? Mac OS 10.14.2 (18C54) What marketmaker version do you run? mm2
https://images-ext-1.discordapp.net/external/gbqvkOfGVZLpQJHL1q2hOLuou7P0zrTDmaYmhO6sZVg/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/8250175

{Reactions}
üíØ üëç 

[08-Feb-19 07:55 AM] CrisF#3405
Hi @SHossain, could you tell me how you are running swaps in parallel?  I'd like to give it a try tomorrow.


[08-Feb-19 08:05 AM] SHossain#0007
just issue `buy` order one after another

{Reactions}
troll_lol 

[08-Feb-19 08:05 AM] SHossain#0007
@CrisF ^^


[08-Feb-19 08:06 AM] CrisF#3405
Oh, I tried that but got a message about one instance at a time, or something to that effect.


[08-Feb-19 08:06 AM] Kiruel#2091
@grewalsatinder There is a place with all assets icon for all coins ?


[08-Feb-19 08:06 AM] CrisF#3405
I'll give it another try.


[08-Feb-19 08:23 AM] gcharang#6833
https://github.com/jl777/coins/tree/master/icons @Kiruel

{Embed}
https://github.com/jl777/coins/tree/master/icons
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Reactions}
üëå 

[08-Feb-19 08:23 AM] Kiruel#2091
perfect thx


[08-Feb-19 08:26 AM] CrisF#3405
Wow, mm2 is quite amazing @artem.pikulin , @artemciy_dice !
I just did around 50 swaps in 4 minutes or so.

{Reactions}
üòÉ 

[08-Feb-19 08:26 AM] CrisF#3405
@SHossain I got this error ```  "error": "lp_ordermatch:1753] lp_ordermatch:1818] Only 1 pending request at a time, wait 118"
``` but a 2 second wait or so was enough for it to work without error.


[08-Feb-19 08:27 AM] SHossain#0007
you need to wait until the first swap starts


[08-Feb-19 08:27 AM] SHossain#0007
üòõ


[08-Feb-19 08:27 AM] SHossain#0007
then, start the next one


[08-Feb-19 08:27 AM] SHossain#0007
don't start them like crazy üòÑ


[08-Feb-19 08:27 AM] CrisF#3405
Yeah, I was a bit impatient before, haha. 2 seconds ...


[08-Feb-19 08:28 AM] CrisF#3405
`http://pizza.explorer.dexstats.info/address/RThUidaY6NoXmmgHSwY4qbf3GNaz6ZFGtA`


[08-Feb-19 08:31 AM] artemciy_dice#0049
That's a lot of pizza!


[08-Feb-19 08:33 AM] CrisF#3405
All that key pushing got me hungry üòÉ

{Reactions}
üçª (3) 

[08-Feb-19 08:34 AM] CrisF#3405
I'm still amazed at how smooth that was.

{Reactions}
üòÇ 

[08-Feb-19 09:02 AM] Kiruel#2091
Ok guys i try to active all the coins in the same time with this coins from agama wallet:
https://github.com/pbca26/agama-wallet-lib/blob/master/src/electrum-servers.js

But i got some error maybe wrong server etc.. someone can help me ?

I create a gist for the bug report: https://gist.github.com/Kiruel/2914dc869a281dd5533fa255ed47badd

{Embed}
https://github.com/pbca26/agama-wallet-lib/blob/master/src/electrum-servers.js
pbca26/agama-wallet-lib
Common library for cryptocurrencies. Contribute to pbca26/agama-wallet-lib development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/eAyZeHiy4WW9wZ48j56fGdLeddChc61iEXHM6kAeHvs/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/7769879

{Embed}
https://gist.github.com/Kiruel/2914dc869a281dd5533fa255ed47badd
error_connection
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-1.discordapp.net/external/gbqvkOfGVZLpQJHL1q2hOLuou7P0zrTDmaYmhO6sZVg/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/8250175


[08-Feb-19 09:13 AM] cipi#4502
MNZ and VOTE are no more (no electrums), the others seem mainly public avalilable electrums, which we don't run ourselves and some of them seem down


[08-Feb-19 09:18 AM] Kiruel#2091
Ok so I will just keep the success coins


[08-Feb-19 09:21 AM] cipi#4502
it can happen that some of the public servers are down, but there are more then one server per coin configured, so mm should try all and keep those that work... if 1 out of 4 servers is down, it should not fail, but simply use the ones that are working


[08-Feb-19 10:31 AM] SHossain#0007
kept mm2 idle over an hour during my lunch today. after i came back, issued a swap and worked fine. no connection issues


[08-Feb-19 10:31 AM] SHossain#0007
great imporovement on this


[08-Feb-19 12:09 PM] cipi#4502
@artemciy_dice is it possible to make mm2 read this file https://github.com/jl777/coins/blob/master/coins directly for coin configs? It is JSON... mm1 needs the list in an environment variable and it is a different format, which is not so good üòâ

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[08-Feb-19 12:12 PM] artemciy_dice#0049
@cipi , You mean getting it via HTTP from that URL? Or loading it from a local file?


[08-Feb-19 12:14 PM] artemciy_dice#0049
There was a fallback to load it from a file, cf. https://github.com/artemii235/SuperNET/blob/937abf332e1ff4c5e9a24e2c0836eba31bc79b3b/mm2src/mm2.rs#L156

{Embed}
https://github.com/artemii235/SuperNET/blob/937abf332e1ff4c5e9a24e2c0836eba31bc79b3b/mm2src/mm2.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[08-Feb-19 12:17 PM] artemciy_dice#0049
But I don't think it's ported.


[08-Feb-19 12:18 PM] cipi#4502
no, just read it from disk, not network


[08-Feb-19 12:19 PM] cipi#4502
looks like the code you posted does this... OK


[08-Feb-19 12:20 PM] artemciy_dice#0049
We have the file loading, but it loads from "coins" and not from "exchanges/coins.json".
https://github.com/artemii235/SuperNET/blob/937abf332e1ff4c5e9a24e2c0836eba31bc79b3b/mm2src/mm2.rs#L339

{Embed}
https://github.com/artemii235/SuperNET/blob/937abf332e1ff4c5e9a24e2c0836eba31bc79b3b/mm2src/mm2.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[08-Feb-19 12:22 PM] artemciy_dice#0049
Here's the file loaded that way in some of the tests: https://github.com/artemii235/SuperNET/blob/mm2/etomic_build/client/coins

{Embed}
https://github.com/artemii235/SuperNET/blob/mm2/etomic_build/client/coins
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[08-Feb-19 12:26 PM] cipi#4502
hmmm, i only make changes to the coins file in jl's repo: https://github.com/jl777/coins/blob/master/coins
removed recently a lot of ERC20 tokens that are not working any more (moved to mainnet, like they call it... as if it was testnet before that :-D)
there should be only one of this files, else there will be chaos

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[08-Feb-19 12:36 PM] artemciy_dice#0049
I've filed it under https://github.com/artemii235/SuperNET/issues/300 just in case.

{Embed}
https://github.com/artemii235/SuperNET/issues/300
Load DRY coins? ¬∑ Issue #300 ¬∑ artemii235/SuperNET
We have a list of coins, https://github.com/jl777/coins/blob/master/coins, maintained by cipi. And we have our own list of coins, maintained for MM2 tests, https://github.com/artemii235/SuperNET/bl...
https://images-ext-1.discordapp.net/external/gc91fdg3iDxxfwXS9H4o34q0PJAZ-mR4S1XxdwaVkYs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/41847

{Reactions}
üëå 

[09-Feb-19 12:28 AM] namhoang28#4328
hey guys

how do i get information about the swap in mm2.
I need that information to update the UI
In mm1, I can get it by calling `swapstatus` method (https://docs.komodoplatform.com/barterDEX/barterDEX-API.html#swapstatus-requestid-quoteid-pending-0) or via websockets event
but not sure how I do it in mm2?


[09-Feb-19 12:46 AM] namhoang28#4328
and it seems withdraw function is not ready yet.
just withdraw some BEER coin and it returns invaild response:
```
Params
{
coin: "BEER"
method: "withdraw"
outputs: [{RL1XYoxbKaETGSqiS4po3pk1ZjRYqHBqvc: 0.1}]
queueid: 0
userpass: "<my userpass>"
}

Response:
{
complete: false
txfee: 1000
txid: "0000000000000000000000000000000000000000000000000000000000000000"
}
```


[10-Feb-19 05:32 AM] CrisF#3405
Hi, where can I find `my_balance`?  I've had a look  but haven't been able to find anything.
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"balance\",\"coin\":\"BEER\",\"address\":\"RThUidaY6NoXmmgHSwY4qbf3GNaz6ZFGtA\"}"``` has been deprecated it seems.


[10-Feb-19 05:33 AM] SHossain#0007
for now check balance in explorer please


[10-Feb-19 05:33 AM] SHossain#0007 (pinned)
https://beer.kmdexplorer.io
https://pizza.kmdexplorer.io

{Embed}
https://beer.kmdexplorer.io
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}

{Embed}
https://pizza.kmdexplorer.io
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[10-Feb-19 05:33 AM] CrisF#3405
Ok, thanks üëç


[10-Feb-19 05:34 AM] SHossain#0007
you can also use Agama Lite mode


[10-Feb-19 05:34 AM] SHossain#0007
Lite mode is pretty fast to display txs from version 0.3.3a


[10-Feb-19 05:36 AM] CrisF#3405
Cool, I've got Agama now so will try that too.
In the process of setting up mm2 on  Ubuntu 16.04 desktop, on a quite low powered system.
Will see how that goes.

{Reactions}
üëçüèΩ 

[10-Feb-19 05:40 AM] CrisF#3405
Do I need `calcaddress` to get my wif?  Passphrase returns a diferent address in Agama.


[10-Feb-19 05:45 AM] SHossain#0007
same passphrase will return same address in Agama Lite mode and mm2


[10-Feb-19 05:47 AM] SHossain#0007
check your passphrase


[10-Feb-19 05:47 AM] CrisF#3405
Hmm, ok I'll try again.


[10-Feb-19 05:55 AM] CrisF#3405
Ahh, the passphrase has a `space` at the start and end :/  That could have caused a few problems!
Works now.  Thanks üòÉ


[10-Feb-19 05:55 AM] CrisF#3405
```export passphrase="‚Äã cfsdgkjh...............ll "```


[10-Feb-19 07:07 AM] siu#3920
@CrisF method is my_balance


[10-Feb-19 07:07 AM] siu#3920
not balance


[10-Feb-19 07:19 AM] CrisF#3405
@siu That worked!  Thanks a lot üòÉ


[10-Feb-19 07:19 AM] siu#3920
sure, no problem.

{Reactions}
üëç 

[10-Feb-19 07:24 AM] CrisF#3405
Just had a crash while building.  Apparently thread 'main' panicked üò®


[10-Feb-19 07:25 AM] SHossain#0007
did it happen on the low-powered system?


[10-Feb-19 07:26 AM] SHossain#0007
what are the system spec?


[10-Feb-19 07:26 AM] CrisF#3405
Yes.


[10-Feb-19 07:27 AM] CrisF#3405
```CPU INTEL CELERON
N3160 UP TO 2.24 GHZ
4 GB DDR3L DUAL CHANNEL```
4gb swap.


[10-Feb-19 07:28 AM] SHossain#0007
HDD or SSD?


[10-Feb-19 07:29 AM] SHossain#0007
was it the first time you wanted to build on this machine?


[10-Feb-19 07:29 AM] CrisF#3405
It got much farther than expected.  Crashed around a part that had `"make" -j2`
SSD


[10-Feb-19 07:30 AM] CrisF#3405
M.2


[10-Feb-19 07:30 AM] SHossain#0007
make for which specific package?


[10-Feb-19 07:32 AM] SHossain#0007
for `cmake`?


[10-Feb-19 07:32 AM] CrisF#3405
`cargo build -vv`


[10-Feb-19 07:33 AM] CrisF#3405
here's the end...


[10-Feb-19 07:34 AM] CrisF#3405
```     BOOST_STATIC_CONSTANT(limb_type, sign_bit_mask = 1u << (limb_bits - 1));
    ^
/usr/include/boost/multiprecision/cpp_int.hpp:404:4: error: right operand of shift expression ‚Äò(1 << 63)‚Äô is >= than the precision of the left operand [-fpermissive]
    BOOST_STATIC_CONSTANT(limb_type, sign_bit_mask = 1u << (limb_bits - 1));
    ^
/usr/include/boost/multiprecision/cpp_int.hpp:556:4: error: right operand of shift expression ‚Äò(1 << 63)‚Äô is >= than the precision of the left operand [-fpermissive]
    BOOST_STATIC_CONSTANT(limb_type, sign_bit_mask = 1u << (limb_bits - 1));
    ^
CMakeFiles/torrent-rasterbar.dir/build.make:660: recipe for target 'CMakeFiles/torrent-rasterbar.dir/src/peer_connection.cpp.o' failed
make[2]: *** [CMakeFiles/torrent-rasterbar.dir/src/peer_connection.cpp.o] Error 1
make[2]: *** Waiting for unfinished jobs....
CMakeFiles/torrent-rasterbar.dir/build.make:673: recipe for target 'CMakeFiles/torrent-rasterbar.dir/src/bt_peer_connection.cpp.o' failed
make[2]: *** [CMakeFiles/torrent-rasterbar.dir/src/bt_peer_connection.cpp.o] Error 1
CMakeFiles/Makefile2:72: recipe for target 'CMakeFiles/torrent-rasterbar.dir/all' failed
make[1]: *** [CMakeFiles/torrent-rasterbar.dir/all] Error 2
Makefile:129: recipe for target 'all' failed
make: *** [all] Error 2
thread 'main' panicked at '

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!   unwrap! called on Result::Err                                              !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
mm2src/common/build.rs:660,5 in build_script_build
Can't make

Err(Custom { kind: Other, error: StringError("command [\"make\", \"-j2\"] exited with code 2") })

', /home/tox1/.cargo/registry/src/github.com-1ecc6299db9ec823/unwrap-1.2.1/src/lib.rs:55:25
note: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.```


[10-Feb-19 07:35 AM] CrisF#3405
First time to build mm2 on this machine.  Ran mm1 on it.


[10-Feb-19 07:36 AM] SHossain#0007
@artemciy_dice ^^


[10-Feb-19 07:37 AM] SHossain#0007
i have not seen any crash on my Linux systems yet


[10-Feb-19 07:37 AM] SHossain#0007
while compiling


[10-Feb-19 07:38 AM] CrisF#3405
It's Ubuntu16.04 desktop.


[10-Feb-19 07:39 AM] SHossain#0007
it could be related to your specific system


[10-Feb-19 07:39 AM] SHossain#0007
Ubuntu 16.04 worked fine for me


[10-Feb-19 07:41 AM] CrisF#3405
Could it be related to this?```c) ‚Äã build tools for your OS (build-essential on Linux, XCode on OSX or MSVC on Windows)
The following sections of this documentation assume you are building/running MM2 on a
Debian 9/10 or Ubuntu 18.04 host.```


[10-Feb-19 07:41 AM] CrisF#3405
I didn't do anything here.


[10-Feb-19 07:43 AM] SHossain#0007
you need to have `build-essential` package installed. this is mandatory


[10-Feb-19 07:44 AM] CrisF#3405
I'm haven't found how to check whether it is installed.


[10-Feb-19 07:45 AM] SHossain#0007
just follow this one then https://gist.github.com/himu007/29fccf28f3fcad5d7145b8d75014f652

{Embed}
https://gist.github.com/himu007/29fccf28f3fcad5d7145b8d75014f652
compile-mm2
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/Qx6z4A2x3fXUMicK26FfxO0XCVNXI0f0LO00uiWvE9g/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/8881040

{Reactions}
üëå 

[10-Feb-19 07:45 AM] artemciy_dice#0049
`> here's the end...`

We've seen this "right operand of shift expression" error happening with certain Boost versions, there is incompatibility between the Boost and the system compiler sometimes.


[10-Feb-19 07:48 AM] artemciy_dice#0049
Not sure how much of a problem it is. If building from source code is a normal way the users would be getting mm2, then we might invest time into a more robust build, by controling the compiler and boost versions probably.


[10-Feb-19 07:51 AM] artemciy_dice#0049
My thinking by default is that we'll have a GUI package with mm2 binary inside.

{Reactions}
üëåüèΩ (2) 

[10-Feb-19 07:58 AM] artemciy_dice#0049
We can also detect that error and print a human-readable message, to the effect of "this Boost version is not compatible with this compiler".

{Reactions}
üëç 

[10-Feb-19 05:09 PM] CrisF#3405
The error ‚òù  suggests ```
note: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.``` Not sure how to do that but can try if it helps.


[10-Feb-19 05:55 PM] CrisF#3405
Oh, I erased the message. On phone now & don't have a copy here.


[10-Feb-19 05:56 PM] CrisF#3405
I followed @SHossain 's guide but crashed while building with same error as original.


[10-Feb-19 06:08 PM] CrisF#3405
I found some info on how to `rust_backtrace` and will try that when I get back.


[10-Feb-19 06:52 PM] CrisF#3405
Hi @artemciy_dice ,
I ran `RUST_BACKTRACE=1 cargo build -vv` and got a backtrace on the `panic`.  Hope it helps.
https://pastebin.com/dk7KVf7b

{Embed}
https://pastebin.com/dk7KVf7b
mm2 - RUST_BACKTRACE=1 - Pastebin.com
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[10-Feb-19 06:54 PM] CrisF#3405
System: ```CPU INTEL CELERON
N3160 UP TO 2.24 GHZ
4 GB DDR3L DUAL CHANNEL
4 GB SWAP
Ubuntu 16.04 Desktop```


[10-Feb-19 06:54 PM] artemciy_dice#0049
The "panic" happens because the C build errored out, and the C build errors out because your Boost version is not compatible with your C version, but thanks for the log.


[10-Feb-19 06:56 PM] CrisF#3405
Thanks üòÉ  
Should I try a different version of Boost, or C?


[10-Feb-19 06:58 PM] artemciy_dice#0049
We're using Ubuntu Xenial with the default Boost and C versions. Can't help you with other versions, exploring this incompatibility further wasn't our goal.


[10-Feb-19 07:00 PM] CrisF#3405
Ok üëç 
I have one more Ubuntu 16.04 desktop system atm (not such a low-powered system).  I'll test it on that.


[10-Feb-19 07:02 PM] artemciy_dice#0049
Cool. You can also grab a binary from http://195.201.0.6/mm2/?C=M;O=D


[10-Feb-19 07:02 PM] CrisF#3405
Ok üëç


[10-Feb-19 07:35 PM] artemciy_dice#0049
@CrisF , I've added a note at https://github.com/artemii235/SuperNET/issues/265#issuecomment-462211507. Planning to ask you to test a new version in a few days.

{Embed}
https://github.com/artemii235/SuperNET/issues/265
[v2] Static/header-only boost ¬∑ Issue #265 ¬∑ artemii235/SuperNET
We've got a report that MM2 fails on some Arch Linux versions due to a different Boost library version. Should use static linking or get rid of library-level Boost dependency (using the header-...
https://images-ext-1.discordapp.net/external/gc91fdg3iDxxfwXS9H4o34q0PJAZ-mR4S1XxdwaVkYs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/41847


[10-Feb-19 07:43 PM] CrisF#3405
Thanks üòÉ


[10-Feb-19 11:40 PM] gcharang#6833
@artemciy_dice I have added a comment here: https://github.com/artemii235/SuperNET/issues/300#issuecomment-462239593
```
If the file [jl777/coins:coins@`master`](https://github.com/jl777/coins/blob/master/coins) is going to be downloaded over http for updates, can a signature system be used to check the authenticity of the received file? If not, by just faking a user's coins file with malicious electrums, funds can be stolen.
```
Not sure if you guys have considered it

{Embed}
https://github.com/artemii235/SuperNET/issues/300
Load DRY coins? ¬∑ Issue #300 ¬∑ artemii235/SuperNET
We have a list of coins, https://github.com/jl777/coins/blob/master/coins, maintained by cipi. And we have our own list of coins, maintained for MM2 tests, https://github.com/artemii235/SuperNET/bl...
https://images-ext-1.discordapp.net/external/gc91fdg3iDxxfwXS9H4o34q0PJAZ-mR4S1XxdwaVkYs/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/41847

{Reactions}
troll_hardcore 

[11-Feb-19 01:28 AM] Kiruel#2091
Hi guys, it's possible to find a doc with all call MM2 ?


[11-Feb-19 01:29 AM] Kiruel#2091
I see no link on the README.


[11-Feb-19 02:29 AM] siu#3920
Afaik it is still being developed @Kiruel


[11-Feb-19 02:33 AM] Kiruel#2091
I find in `mm2src/rpc/lp_command.rs` a help command with many command.


[11-Feb-19 02:33 AM] Kiruel#2091
I just want to know if there are all available.


[11-Feb-19 04:19 AM] artemciy_dice#0049
`> Hi guys, it's possible to find a doc with all call MM2 ?`

@Kiruel , try looking at https://github.com/KomodoPlatform/developer-docs/tree/mm/docs/basic-docs/atomic-swap-dex ?
@Bryan_Beus and @artem.pikulin were recently busy updating it.

{Embed}
https://github.com/KomodoPlatform/developer-docs/tree/mm/docs/basic-docs/atomic-swap-dex
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
üëå (2) 

[11-Feb-19 04:20 AM] artemciy_dice#0049
Pinned a message.


[11-Feb-19 04:50 AM] Kiruel#2091
Anyone have the same problem ? 
```11 12:50:01, utxo:945] Electrum servers ["cetus.cryptap.us:50004", "kraken.cryptap.us:50004"] ping error "rpc_clients:894] \"rpc_clients:878] rpc_clients:852] future timed out\""
```


[11-Feb-19 04:50 AM] Kiruel#2091
I can't get any balances.


[11-Feb-19 04:51 AM] Kiruel#2091
```11 12:51:00, rpc_clients:750] V4(195.201.81.113:10053) failed to write to socket Os { code: 32, kind: BrokenPipe, message: "Broken pipe" }```


[11-Feb-19 04:53 AM] CHMEX#0686
do you have plans to implement 'ticker' which returns a 24h trading stats based on a local node stats file?


[11-Feb-19 06:02 AM] siu#3920
https://github.com/chainmakers/chainmaker/blob/master/marketmaker/mm2install

{Embed}
https://github.com/chainmakers/chainmaker/blob/master/marketmaker/mm2install
chainmakers/chainmaker
Blockchain infrastructure development. Contribute to chainmakers/chainmaker development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/0Ge3wNvy3GdgH7O50WD_rhZGuESIZPoIE-nCVAftxJc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/35841643

{Reactions}
üëçüèΩ 

[11-Feb-19 06:02 AM] siu#3920
did a script to automate mm2 setup.


[11-Feb-19 06:02 AM] siu#3920
It even creates a random passphrase for you.


[11-Feb-19 09:58 AM] artemciy_dice#0049
@CHMEX , our first step in that direction is probably reimplementing roll-forward of SWAPs after a restart. I'm a strong supporter of using SQLite for this, this database is very portable and also very good in terms of usability and performance when one knows how to use it. If that works, should not be hard to port/reimplement SWAP statistics next. You want us to file an issue about that?


[11-Feb-19 10:01 AM] CHMEX#0686
I like SQL I also like simple json objects to me it does not matter really you are the experts on that:) 
The main question I have can any node on the same netid see connected trades like it worked in mm1 ?


[11-Feb-19 10:02 AM] CHMEX#0686
It would be nice to expose the data to a website so people can see what's going on on barterdex


[11-Feb-19 10:06 AM] artemciy_dice#0049
Ah, yes, we plan to account for those statistical sites, but how we'll do this is still in flux. Priorities right now are mobile builds and binary nightly updater, which would allow us to continue testing mm2 in GUIs. After that we'll return to ordermatching and sharing the SWAPs.


[11-Feb-19 10:08 AM] artemciy_dice#0049
---
`> I also like simple json objects`

I see how having the history of SWAPs as a set of human-readable JSON files might be cool!


[11-Feb-19 10:15 AM] artemciy_dice#0049
---
`> can any node on the same netid see connected trades like it worked in mm1`

Any specific use cases of why we'd want *any* node to do that and not just the nodes dedicated to keeping track of such statistics?


[11-Feb-19 06:52 PM] siu#3920
```curl --url "http://127.0.0.1:7783" --data "{\"base\":\"REVS\",\"rel\":\"KMD\",\"margin\":$margin,\"fundvalue_bid\":\"assetNAV_KMD\",\"fundvalue_ask\":\"assetNAV_KMD\",\"userpass\":\"$userpass\",\"method\":\"autoprice\",\"holdings\":[$dexholdings],\"divisor\":9000000}"

```


[11-Feb-19 06:53 PM] siu#3920
is this type of autprice still functional in mm2?


[11-Feb-19 10:06 PM] artemciy_dice#0049
Autopricing should work, yes.


[11-Feb-19 10:21 PM] CHMEX#0686
Thank you that would be really good to have stats at some point.
There is no need imo that any node can see stats the only thing I can imagine is if everybody sees it there could be a realtime ticker on each application but that's about it.


[11-Feb-19 10:31 PM] artemciy_dice#0049
I see! The real-time ticker will improve the user's confidence in connectivity and exchange (by showing that it works and is being used and is visible from the user's device) and might be something pretty to look on.


[11-Feb-19 10:35 PM] CHMEX#0686
I agree sometimes who hear people in our trade channels did you see that Buy / Sell wall whale bro is back etc.


[11-Feb-19 10:35 PM] CHMEX#0686
So people are interessted in this data I believe


[11-Feb-19 10:36 PM] artemciy_dice#0049
Filed at https://github.com/artemii235/SuperNET/issues/302.

{Reactions}
üòç 

[12-Feb-19 03:16 AM] CrisF#3405
Hi,  I'd Like to confirm that I'm using a binary download correctly.  (have always built before)
If the binary is `mm2-48c1297-Linux` then from the same directory  I do ```stdbuf -oL ./mm2-48c1297-Linux "{\"gui\":\"MM2GUI\",\"netid\":9999,\"client\":1,\"userhome\":\"/${HOME#"/"}\",\"passphrase\":\"‚Äã<mypassphrase>\",\"coins\":$coins}" &```


[12-Feb-19 03:16 AM] CrisF#3405
Is that correct?


[12-Feb-19 03:19 AM] Kiruel#2091
```./mm2 "{\"gui\":\"MM2GUI\",\"netid\":9999,\"client\":1
\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"${passphrase}\",
\"coins\":$coins}" &``` i do this me


[12-Feb-19 03:21 AM] CrisF#3405
Thanks üòÉ I'll try that using the `mm2-48c1297-Linux`.


[12-Feb-19 03:22 AM] CrisF#3405
I received a warning in std doing it the way I originally tried. ```12 11:20:07, peers:1199] Warning, can't rename RaiiRm("/tmp/lt-dht-229635254522629858.tmp") to "/home/will/.mm2/lt-dht": Invalid cross-device link (os error 18)```


[12-Feb-19 04:15 AM] siu#3920
@artemciy_dice quick question, since im jsut in doubt. If now i setup a autoprice order for a coin i have no balance, it doesnt show order? I remember back in mm1 an order was showed but it just showed utxos=0


[12-Feb-19 06:13 AM] artemciy_dice#0049
@siu, orderbook seems to show up the entry to me


[12-Feb-19 06:13 AM] artemciy_dice#0049
```
Starting mm2:

    target\debug\mm2 "{\"gui\":\"nogui\",\"client\":1, \"passphrase\":\"123\", \"coins\":[{\"coin\":\"BEER\",\"asset\":\"BEER\",\"rpcport\":8923,\"txversion\":4},{\"coin\":\"PIZZA\",\"asset\":\"PIZZA\",\"rpcport\":11608,\"txversion\":4},{\"coin\":\"ETOMIC\",\"asset\":\"ETOMIC\",\"rpcport\":10271,\"txversion\":4},{\"coin\":\"ETH\",\"name\":\"ethereum\",\"etomic\":\"0x0000000000000000000000000000000000000000\",\"rpcport\":80}]}"
```


[12-Feb-19 06:13 AM] artemciy_dice#0049
```
Checking the orderbook:

    curl --url "http://127.0.0.1:7783" --data "{\"base\":\"BTC\",\"rel\":\"KMD\",\"userpass\":\"5bfaeae675f043461416861c3558146bf7623526891d890dc96bc5e0e5dbc337\",\"method\":\"orderbook\"}"

Returns: {"bids":[],"numbids":0,"biddepth":0,"asks":[],"numasks":0,"askdepth":0,"base":"BTC","rel":"KMD","timestamp":1549980369,"netid":0}

^^ Orderbook is empty initially.
```


[12-Feb-19 06:13 AM] artemciy_dice#0049
```
Placing an autoprice order:

    curl --url "http://127.0.0.1:7783" --data "{\"base\":\"BTC\",\"rel\":\"KMD\",\"margin\":0.1,\"fundvalue_bid\":\"assetNAV_KMD\",\"fundvalue_ask\":\"assetNAV_KMD\",\"userpass\":\"5bfaeae675f043461416861c3558146bf7623526891d890dc96bc5e0e5dbc337\",\"method\":\"autoprice\",\"holdings\":[],\"divisor\":9000000}"

Returns: `{"result": "success", "status": "created"}`
```


[12-Feb-19 06:13 AM] siu#3920
what about REVS and KMD?


[12-Feb-19 06:14 AM] artemciy_dice#0049
```
Checking the orderbook again:

    curl --url "http://127.0.0.1:7783" --data "{\"base\":\"BTC\",\"rel\":\"KMD\",\"userpass\":\"5bfaeae675f043461416861c3558146bf7623526891d890dc96bc5e0e5dbc337\",\"method\":\"orderbook\"}"

Returns `{"bids":[],"numbids":0,"biddepth":0,"asks":[],"numasks":0,"askdepth":0,"base":"BTC","rel":"KMD","timestamp":1549980701,"netid":0}` at first.

Returns `{"bids":[],"numbids":0,"biddepth":0,"asks":[{"coin":"BTC","address":"1EgzMaygp4apLmwW7kLf4Gorhkxmfgc2z6","price":5421.60498047,"numutxos":0,"avevolume":0,"maxvolume":0,"depth":0,"pubkey":"25a491638a815a6e669319532270b616124aab4bfd7e466fc08606ab46d48931","age":18,"zcredits":0}],"numasks":1,"askdepth":0,"base":"BTC","rel":"KMD","timestamp":1549980729,"netid":0}` a bit later.

We can monitor mm2 obtaining the price in its log.
```


[12-Feb-19 06:15 AM] artemciy_dice#0049
I haven't tested REVS. File an issue with the invocation details if it doesn't work for you, please.


[12-Feb-19 06:15 AM] siu#3920
ok, im trying to set an order now


[12-Feb-19 06:18 AM] siu#3920
ok, i got a return from autprice command: ```{"result": "success", "status": "created"}12 14:15:04, portfolio:1044] lp_autoprice] 1 Using ref / for REVS/KMD factor None, offset None, margin None/None fixed None
```


[12-Feb-19 06:18 AM] siu#3920
but orderbook doesnt show anything: ```./orderbook
{"bids":[],"numbids":0,"biddepth":0,"asks":[],"numasks":0,"askdepth":0,"base":"KMD","rel":"REVS","timestamp":1549981103,"netid":9999}```


[12-Feb-19 06:19 AM] artemciy_dice#0049
The orderbook isn't filled immediately. You should see entries akin to
```
12 14:11:07, prices:1520] lp_btcprice] Fetching prices, akin to
$ curl "https://api.coingecko.com/api/v3/coins/markets?ids=komodo%2Cbitcoin-cash%2Clitecoin&vs_currency=btc"
```
in the log first.


[12-Feb-19 06:20 AM] siu#3920
yes, i get those: ```12 14:19:05, prices:1520] lp_btcprice] Fetching prices, akin to
$ curl "https://api.coingecko.com/api/v3/coins/markets?ids=komodo%2Cbitcoin-cash%2Clitecoin&vs_currency=btc"
12 14:19:36, prices:1520] lp_btcprice] Fetching prices, akin to
$ curl "https://api.coingecko.com/api/v3/coins/markets?ids=komodo%2Cbitcoin-cash%2Clitecoin&vs_currency=btc"
12 14:20:06, prices:1520] lp_btcprice] Fetching prices, akin to
$ curl "https://api.coingecko.com/api/v3/coins/markets?ids=komodo%2Cbitcoin-cash%2Clitecoin&vs_currency=btc"
```


[12-Feb-19 06:22 AM] artemciy_dice#0049
Oh, here's something you should check


[12-Feb-19 06:25 AM] artemciy_dice#0049
The `coins` configuration should have both the ticker symbol and the name of the coin configured in the corresponding fields: https://github.com/artemii235/SuperNET/blob/48c1297f95f18505a3bebde67ca81bbf5f978c59/mm2src/portfolio/portfolio_tests.rs#L83

{Embed}
https://github.com/artemii235/SuperNET/blob/48c1297f95f18505a3bebde67ca81bbf5f978c59/mm2src/portfolio/portfolio_tests.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[12-Feb-19 06:26 AM] artemciy_dice#0049
Working with both the coingecko and coinmarketcap we're a bit more sensitive to this: some APIs are using only the tickers and others only the names.


[12-Feb-19 06:27 AM] artemciy_dice#0049
Other than that, I don't see why mm2 isn't fetching the REVS price for you. Submit the invocation details and we'll take a look.


[12-Feb-19 07:12 AM] siu#3920
ok, will try again


[12-Feb-19 07:24 AM] siu#3920
verified coins file and REVS had a typo in the rpcport field


[12-Feb-19 07:25 AM] siu#3920
although im using it with electrum which i believe makes it not relevant


[12-Feb-19 07:25 AM] siu#3920
anyway, fixed that and executed client again, now i got this print which i had not noticed earlier


[12-Feb-19 07:25 AM] siu#3920
```missing field.(maxprice) add to MM_fields[]
missing field.(maxprice) add to MM_fields[]
unexpected missing string value.(alien)
missing field.(maxprice) add to MM_fields[]
unexpected missing string value.(alien)
unexpected missing string value.(alien)
```


[12-Feb-19 07:26 AM] siu#3920
```curl --url "http://127.0.0.1:7783" --data "{\"base\":\"REVS\",\"rel\":\"KMD\",\"margin\":$margin,\"fundvalue_bid\":\"assetNAV_KMD\",\"fundvalue_ask\":\"assetNAV_KMD\",\"userpass\":\"$userpass\",\"method\":\"autoprice\",\"holdings\":[$dexholdings],\"divisor\":9000000}"```


[12-Feb-19 07:28 AM] siu#3920
i think i know my issue :p


[12-Feb-19 07:28 AM] siu#3920
i had not added the `$dexholdings` variable


[12-Feb-19 10:34 AM] Bryan_Beus#6442
@Kiruel 

Here's the documentation I'm working on (I work for Komodo).

Everything is finished, except for the `Introduction to Komodo DEX`, but that one's not really needed for people who already get the idea.

https://github.com/KomodoPlatform/developer-docs/tree/mm/docs/basic-docs/atomic-swap-dex

{Embed}
https://github.com/KomodoPlatform/developer-docs/tree/mm/docs/basic-docs/atomic-swap-dex
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[12-Feb-19 10:36 AM] Kiruel#2091
@Bryan_Beus Thx dude !


[12-Feb-19 11:14 AM] Bryan_Beus#6442
Sure thing, @Kiruel 

If you want to run it in "pretty" mode, just follow the README in the project directory and view it on local host. The search feature on vuepress is very convenient while developing.


[13-Feb-19 05:33 AM] siu#3920
orderbooks are being published without issues today. Seems like there was a glitch or i did something wrong.

{Reactions}
troll_cool 

[13-Feb-19 05:44 AM] Kiruel#2091
Hi guys, I try to sell some PIZZA with this command but I got a strange error :
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"sell\", \"base\":\"BEER\", \"rel\":\"PIZZA\", \"relvolume\":1,\"price\":1}" --silent | python -m json.tool
{
    "error": "lp_ordermatch:1762] lp_ordermatch:1793] Volume must be greater than 0"
}```

Where I'm wrong ? I have 97 PIZZA.


[13-Feb-19 05:44 AM] Kiruel#2091
The `relvolume\":1` is greater than 0


[13-Feb-19 05:44 AM] Kiruel#2091
I try 10 etc..


[13-Feb-19 06:01 AM] SHossain#0007
put price 1.1


[13-Feb-19 06:01 AM] SHossain#0007
and try


[13-Feb-19 06:01 AM] Kiruel#2091
same


[13-Feb-19 06:01 AM] artemciy_dice#0049
@Kiruel , the error has the stack trace. It points at https://github.com/artemii235/SuperNET/blob/48c1297f95f18505a3bebde67ca81bbf5f978c59/mm2src/lp_ordermatch.rs#L1793. And we can see there that either the `dump` or the `base_volume` fields should be present.

{Embed}
https://github.com/artemii235/SuperNET/blob/48c1297f95f18505a3bebde67ca81bbf5f978c59/mm2src/lp_ordermatch.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[13-Feb-19 06:03 AM] Kiruel#2091
yeah i saw on the code.


[13-Feb-19 06:03 AM] artemciy_dice#0049
Actually "basevolume", there's a rename here https://github.com/artemii235/SuperNET/blob/48c1297f95f18505a3bebde67ca81bbf5f978c59/mm2src/lp_ordermatch.rs#L1729

{Embed}
https://github.com/artemii235/SuperNET/blob/48c1297f95f18505a3bebde67ca81bbf5f978c59/mm2src/lp_ordermatch.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[13-Feb-19 06:03 AM] Kiruel#2091
But can't understand why


[13-Feb-19 06:03 AM] Kiruel#2091
oh


[13-Feb-19 06:03 AM] Kiruel#2091
We need to refresh this doc so https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md üòõ !

{Embed}
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[13-Feb-19 06:04 AM] Kiruel#2091
nvm its already on the doc


[13-Feb-19 06:04 AM] Kiruel#2091
..


[13-Feb-19 06:04 AM] Kiruel#2091
Just buy and sell don't have the same variable.


[13-Feb-19 06:04 AM] Kiruel#2091
I will try with `basevolume`


[13-Feb-19 06:05 AM] Kiruel#2091
ok work: ```{
    "netamounts": [],
    "pending": {
        "alice": "BEER",
        "aliceid": 2646264638,
        "base": "PIZZA",
        "basevalue": 10.00040019,
        "bob": "PIZZA",
        "desthash": "0fd5cc0dcca2d6437ee5f256a28389ab0f786eb6370405ac96daf2d96474a844",
        "expiration": 1550066848,
        "quoteid": 0,
        "rel": "BEER",
        "relvalue": 10.0002,
        "requestid": 0,
        "timeleft": 119,
        "tradeid": 1656358900,
        "uuid": "fe6b97659d259652725455ab4eed70bba0b7169ffe5f3af41b0a7d9d8947cd81"
    },
    "result": "success",
    "swaps": [
        [
            1778037922,
            3345213649
        ]
    ],
    "uuid": "fe6b97659d259652725455ab4eed70bba0b7169ffe5f3af41b0a7d9d8947cd81"
}```


[13-Feb-19 06:06 AM] Kiruel#2091
So if i understand when i create a SELL it should appear on the orderbook ?


[13-Feb-19 06:07 AM] Kiruel#2091
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"orderbook\", \"base\":\"PIZZA\", \"rel\":\"BEER\"}" --silent | python -m json.tool
{
    "askdepth": 0,
    "asks": [],
    "base": "PIZZA",
    "biddepth": 0,
    "bids": [],
    "netid": 9999,
    "numasks": 0,
    "numbids": 0,
    "rel": "BEER",
    "timestamp": 1550066813
}```
Because I saw nothing.


[13-Feb-19 06:25 AM] Kiruel#2091
Ok i find, i need to use setprice. But I can't define the volume.


[13-Feb-19 06:32 AM] artemciy_dice#0049
@Kiruel , I've tried your sequence and I see an orderbook entry appear after a while.


[13-Feb-19 06:32 AM] artemciy_dice#0049
```
$ curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"aa503e7d7426ba8ce7f6627e066b04bf06004a41fd281e70690b
3dbc6e066f69\",\"method\":\"orderbook\", \"base\":\"PIZZA\", \"rel\":\"BEER\"}" --silent
{"bids":[],"numbids":0,"biddepth":0,"asks":[{"coin":"PIZZA","address":"RNyBS6ryQtPPQnJhavKn9o94U2RNExLZon","price":0.00010000,"numutxos":0,"avevolume":0,"maxvolume":0,"depth":0,"pubkey":"25a491638a815a6e669319532270b616124aab4bfd7e466fc08606ab46d48931","age":55,"zcredits":0}],"numasks":1,"askdepth":0,"base":"PIZZA","rel":"BEER","timestamp":1550068343,"netid":0}
```

The orderbook was empty initially, but the entry has appeared after half a minute or so.
Didn't have time to look more closely at that code yet.


[13-Feb-19 06:33 AM] siu#3920 (pinned)
I have an issue with balance now :p


[13-Feb-19 06:33 AM] siu#3920
```{"coin":"REVS","address":"RUJkA6jzZrgagTVNywYVs7U4E4nKcnnBSe","price":0.32339385,"numutxos":0,"avevolume":0,"maxvolume":0,"depth":0,"pubkey":"0ef8026f094fba1f31a67a9ba1d2ff0ee904abe143c36a075c568b691aa3697a","age":1,"zcredits":0}],"numasks":1,"askdepth":0,"base":"REVS","rel":"KMD","timestamp":1550066134,"netid":9999}```


[13-Feb-19 06:33 AM] siu#3920
orderbook shows this


[13-Feb-19 06:33 AM] siu#3920
`"numutxos":0,"avevolume":0,"maxvolume":0,"depth":0`


[13-Feb-19 06:34 AM] siu#3920
but in this address i have: ``` ./getcoin REVS
{"address":"RUJkA6jzZrgagTVNywYVs7U4E4nKcnnBSe","balance":1.33972821,"coin":"REVS"}```


[13-Feb-19 06:34 AM] siu#3920
Just one utxo though on seller side.


[13-Feb-19 06:50 AM] artemciy_dice#0049
Pinned a message.


[13-Feb-19 06:56 AM] artemciy_dice#0049
I suspect that the new UTXO listing code (`fn list_unspent_ordered`) is only used during the SWAP currently.


[13-Feb-19 06:56 AM] artemciy_dice#0049
We might get back to that when we're porting the orderbook.


[13-Feb-19 06:57 AM] artemciy_dice#0049
Will be interesting to check it with REVS then.


[13-Feb-19 08:13 AM] siu#3920
cool


[13-Feb-19 08:13 AM] siu#3920
thanks for clearing that up.


[14-Feb-19 07:28 AM] Kiruel#2091
Someone can add some order for PIZZA/BEER please I need to test something üòÉ


[14-Feb-19 07:29 AM] Kiruel#2091
If you can make more than 3-4 orders its can be really cool.


[14-Feb-19 08:08 AM] siu#3920
hmm, let me see if i can set something up


[14-Feb-19 08:28 AM] Kiruel#2091
@siu thx


[14-Feb-19 08:29 AM] Kiruel#2091
Do you see my order btw ?


[14-Feb-19 08:29 AM] Kiruel#2091
```{
    "askdepth": 0,
    "asks": [
        {
            "address": "RXQjmPtM1TZfPpjjF8JgUtczoeymHAr79y",
            "age": 8,
            "avevolume": 0,
            "coin": "PIZZA",
            "depth": 0,
            "maxvolume": 97.99700552,
            "numutxos": 0,
            "price": 2,
            "pubkey": "0fd5cc0dcca2d6437ee5f256a28389ab0f786eb6370405ac96daf2d96474a844",
            "zcredits": 0
        }
    ],
    "base": "PIZZA",
    "biddepth": 0,
    "bids": [
        {
            "address": "RXQjmPtM1TZfPpjjF8JgUtczoeymHAr79y",
            "age": 8,
            "avevolume": 0,
            "coin": "BEER",
            "depth": 0,
            "maxvolume": 1.98961888,
            "numutxos": 0,
            "price": 0.5,
            "pubkey": "0fd5cc0dcca2d6437ee5f256a28389ab0f786eb6370405ac96daf2d96474a844",
            "zcredits": 0
        }
    ],
    "netid": 9999,
    "numasks": 1,
    "numbids": 1,
    "rel": "BEER",
    "timestamp": 1550161756
}```


[16-Feb-19 02:12 AM] CrisF#3405
Hi, I'm been struggling with some noob trouble for the past couple of days and would be grateful for some help.


[16-Feb-19 02:12 AM] CrisF#3405
It involves an extra `space` being added to my passphrase.


[16-Feb-19 02:13 AM] CrisF#3405
in debug/target/passphrase: ```export passphrase="UrG27..."```


[16-Feb-19 02:15 AM] CrisF#3405
htop:```... "passphrase":" UrG27..."```


[16-Feb-19 02:16 AM] CrisF#3405
Of course, this generates a new address.


[16-Feb-19 02:17 AM] CrisF#3405
I haven't had extra `space` added on this system before using the same methods.


[16-Feb-19 02:20 AM] CrisF#3405
Is this mm2 related, or my system (more likely)?


[16-Feb-19 02:22 AM] CrisF#3405
(mm2-48c1297-Linux, Ubuntu 16.04)


[16-Feb-19 04:15 AM] Kiruel#2091
Can I see your env?


[16-Feb-19 04:27 AM] CrisF#3405
There are many, is there any in particular I should send?


[16-Feb-19 04:47 AM] siu#3920
that is weird.


[16-Feb-19 08:01 AM] Kiruel#2091
Your passphrase


[16-Feb-19 08:07 AM] CrisF#3405
Hi, send in DM.


[16-Feb-19 05:26 PM] CrisF#3405
Thanks to the time and help from @Kiruel my address troubles have been resolved :abusedsmily:
üôè

{Reactions}
üëå 

[16-Feb-19 05:28 PM] CrisF#3405
Now, on to the next trouble, haha.


[17-Feb-19 12:35 AM] CrisF#3405
fyi, I'm seeing a few of these on screen ```17 08:23:32, peers:1199] Warning, can't rename RaiiRm("/tmp/lt-dht-8715439029490073394.tmp") to "/home/will/.mm2/lt-dht": Invalid cross-device link (os error 18)
```
(regular Ubuntu 16.04 desktop machine)


[17-Feb-19 11:41 PM] artem.pikulin#0794
@everyone Hi! I'm happy to get back to work üôÇ If you have any questions please let me know.

{Reactions}
üéâ (7) üëã (5) üëç (5) 

[17-Feb-19 11:44 PM] crypto999#4866
Hurrah! Hope you had a nice break...


[18-Feb-19 12:20 AM] artem.pikulin#0794
Good news: MM2 seednode is up for more than 1 week and working as expected, I've just made a test swap:
```
‚óè mm.service - Marketmaker Service
   Loaded: loaded (/etc/systemd/system/mm.service; enabled; vendor preset: enabled)
   Active: active (running) since Thu 2019-02-07 07:37:38 CET; 1 weeks 4 days ago
```

{Reactions}
üöÄ (3) 

[18-Feb-19 12:20 AM] artem.pikulin#0794
`¬∑ 2019-02-18 15:02:58 +0700 [swap uuid=f6ae2e3651aea38043768f011eaa13fd019e73b4a05a3ee3f1e3870176ca1f00] Swap finished successfully.`


[18-Feb-19 12:43 AM] grewalsatinder#9653
glad to see you back artem üôÇ 
hope you enjoyed your break

{Reactions}
üòã 

[18-Feb-19 12:47 AM] ca333#0333
Welcome back @artem.pikulin - i hope you had nice holidays!

{Reactions}
üòã 

[18-Feb-19 02:26 AM] siu#3920
Welcome back @artem.pikulin


[18-Feb-19 02:28 AM] siu#3920
I have some issues related to orderbooks


[18-Feb-19 03:19 AM] artem.pikulin#0794
@siu Hi, thanks! Do you mean this issue? https://github.com/artemii235/SuperNET/issues/303

{Embed}
https://github.com/artemii235/SuperNET/issues/303
REVS/KMD BOTS/KMD and BET/KMD orderbook does not propagate ¬∑ Issu...
Describe the bug In a server i activate REVS, BOTS and BET in electrum mode and execute a autoprice command. Orders never appear even when the output of command is "success". Please answe...
https://images-ext-1.discordapp.net/external/xCKCGKW2Cdx-azNvvFa86K6JbDxwudWk-KIM31ZOFss/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/225342


[18-Feb-19 03:26 AM] siu#3920
Yes


[18-Feb-19 03:27 AM] siu#3920
Seems like it is intermitent, sometimes it works sometimes it doesnt


[18-Feb-19 03:36 AM] artem.pikulin#0794
I'm going to work on it on this week, some parts of `autprice` were ported `as is` from C so it's not guaranteed to work properly yet.


[18-Feb-19 03:37 AM] SHossain#0007
Welcome back @artem.pikulin üòÉ

{Reactions}
Komodo 

[18-Feb-19 03:37 AM] artem.pikulin#0794
I see that you set `fixed` price in some cases, better to use just `setprice` for this.


[18-Feb-19 05:52 AM] artem.pikulin#0794
@siu @SHossain @Kiruel @MM2 community tester The latest MM2 commit adds `rpc_password` field to MM2 json config. You don't have to catch it in logs anymore, just set it and then use as `userpass` for RPC calls. The `userpass` will also be renamed soon, going to keep it for some time for compatibility.

{Reactions}
üëç (3) 

[18-Feb-19 05:52 AM] siu#3920
ok


[18-Feb-19 05:52 AM] siu#3920
thanks!


[18-Feb-19 05:52 AM] siu#3920
let me try that.


[18-Feb-19 05:53 AM] Kiruel#2091
So how to get the userpass ?


[18-Feb-19 05:53 AM] siu#3920
execute my_password


[18-Feb-19 05:54 AM] Kiruel#2091
just method `my_password` ? nice


[18-Feb-19 05:54 AM] Kiruel#2091
I will test this too


[18-Feb-19 05:57 AM] Kiruel#2091
Lets build üòÉ


[18-Feb-19 05:58 AM] artem.pikulin#0794
@Kiruel you don't have to get userpass, you `set it explicitly` now, e.g.: https://github.com/artemii235/SuperNET/blob/mm2/mm2src/mm2_tests.rs#L523

{Embed}
https://github.com/artemii235/SuperNET/blob/mm2/mm2src/mm2_tests.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[18-Feb-19 05:59 AM] artem.pikulin#0794
For GUI it's even better to generate new RPC password on every run for security purpose. `userpass` definition is `deprecated`, it will be renamed to `rpc_password` for all RPC calls.


[18-Feb-19 06:01 AM] Kiruel#2091
But how to generate my rpc_password ?


[18-Feb-19 06:01 AM] artem.pikulin#0794
It's just random string üôÇ


[18-Feb-19 06:02 AM] Kiruel#2091
How its now related to userpass ?


[18-Feb-19 06:02 AM] artem.pikulin#0794
You set `rpc_password` by your choice and then use this as `userpass`,


[18-Feb-19 06:02 AM] Kiruel#2091
Oh i see


[18-Feb-19 06:03 AM] Kiruel#2091
So for my call i can do this : ```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"setprice\", \"base\":\"BEER\", \"rel\":\"PIZZA\", \"price\":0.7}" --silent | python -m json.tool```
OR this:
```curl --url "http://127.0.0.1:7783" --data "{\"rpc_password\":\"MY_SUPER_PASS\",\"method\":\"setprice\", \"base\":\"BEER\", \"rel\":\"PIZZA\", \"price\":0.7}" --silent | python -m json.tool```


[18-Feb-19 06:03 AM] Kiruel#2091
right ?


[18-Feb-19 06:06 AM] artem.pikulin#0794
API calls remain same, please keep using `userpass` there. The difference is you don't have to watch at MM logs to get it. You set it by yourself in MM config.


[18-Feb-19 06:06 AM] artem.pikulin#0794
`stdbuf -oL ./mm2 "{\"gui\":\"MM2GUI\",\"netid\":9999, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"YOUR_PASSPHRASE_HERE\", \"coins\":$coins, \"rpc_password\":\"YOUR_PASSWORD_HERE\"}"`


[18-Feb-19 06:07 AM] Kiruel#2091
Ok i will try


[18-Feb-19 06:08 AM] Kiruel#2091
When I try this: ```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"MY_PASSWORD\",\"method\":\"orderbook\", \"base\":\"PIZZA\", \"rel\":\"BEER\"}" --silent | python -m json.tool```
I have this error:
```{
    "error": "authentication error you need to make sure userpass is set"
}```


[18-Feb-19 06:09 AM] Kiruel#2091
```./mm2 "{\"gui\":\"MM2GUI\",\"netid\":9999,\"client\":1,
\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"${passphrase}\", \"rpc_password\":\"MY_PASSWORD\",
\"coins\":$coins}" &```


[18-Feb-19 06:14 AM] artem.pikulin#0794
@Kiruel please make sure that you built the `latest` commit, I've just rechecked it and it worked.


[18-Feb-19 06:16 AM] artem.pikulin#0794
```
git rev-parse HEAD
bbe3f3e2bec9e15b6d9d3c874e21d9a4a99f157b
```
You should be building this commit: https://github.com/artemii235/SuperNET/commit/bbe3f3e2bec9e15b6d9d3c874e21d9a4a99f157b

{Embed}
https://github.com/artemii235/SuperNET/commit/bbe3f3e2bec9e15b6d9d3c874e21d9a4a99f157b
Merge pull request #305 from artemii235/feature/298 ¬∑ artemii235/...
#298 Add rpc_password field to JSON config.
https://images-ext-1.discordapp.net/external/bhxbZp_vqWMDWyHbDAs2ChYL0J22s1YIUu1txMsCnWQ/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/15745003


[18-Feb-19 06:18 AM] Kiruel#2091
Yeah `git log`


[18-Feb-19 06:18 AM] Kiruel#2091
bbe3f3e2bec9e15b6d9d3c874e21d9a4a99f157b


[18-Feb-19 06:18 AM] Kiruel#2091
last commit


[18-Feb-19 06:19 AM] Kiruel#2091
```git rev-parse HEAD bbe3f3e2bec9e15b6d9d3c874e21d9a4a99f157b

bbe3f3e2bec9e15b6d9d3c874e21d9a4a99f157b
bbe3f3e2bec9e15b6d9d3c874e21d9a4a99f157b```


[18-Feb-19 06:20 AM] artem.pikulin#0794
It's MM error, there is old C code that also checks userpass and it doesn't use the new `rpc_password`, excuse me. Let me fix it.


[18-Feb-19 06:21 AM] artem.pikulin#0794
So for example the new password will work for `enable/electrum` calls, but not for `orderbook`.


[18-Feb-19 06:22 AM] Kiruel#2091
Ok üòÉ


[18-Feb-19 06:22 AM] Kiruel#2091
Np


[18-Feb-19 06:23 AM] Kiruel#2091
So everytime mm2 is run i will create a random string for the rpc_password.


[18-Feb-19 06:24 AM] Kiruel#2091
When the bin for android are ready, for now just same password will be ok üòÉ thx for this feat


[18-Feb-19 06:34 AM] Kiruel#2091
I confirm the `enable/electrum` works. ```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"MY_PASSWORD\",\"method\":\"electrum\",\"coin\":\"BEER\",\"urls\":[\"electrum1.cipig.net:10022\",\"electrum2.cipig.net:10022\",\"electrum3.cipig.net:10022\"]}"
{"address":"RXQjmPtM1TZfPpjjF8JgUtczoeymHAr79y","balance":10.36936229,"result":"success"}%```


[18-Feb-19 06:37 AM] artem.pikulin#0794
Yea, as expected üôÇ I've already pushed a fix, need to wait for CI builds to finish before merging to mm2 branch.


[18-Feb-19 06:38 AM] Kiruel#2091
ok


[18-Feb-19 06:47 AM] artem.pikulin#0794
@Kiruel it's done, please pull and rebuild. Just in case to force the C code rebuild please launch `touch mm2src/common/build.rs` after `pull` and before `cargo build`.


[18-Feb-19 06:48 AM] Kiruel#2091
what is build.rs ?


[18-Feb-19 06:48 AM] Kiruel#2091
(empty file for what ?)


[18-Feb-19 06:48 AM] Kiruel#2091
i mean


[18-Feb-19 06:53 AM] artem.pikulin#0794
It's not empty, it's Cargo build script (https://doc.rust-lang.org/cargo/reference/build-scripts.html) responsible for C/C++ dependencies compilation. `touch` will change `build.rs` modification time - it will trigger the C code rebuild.


[18-Feb-19 06:59 AM] Kiruel#2091
oh right


[18-Feb-19 06:59 AM] Kiruel#2091
i see


[18-Feb-19 07:00 AM] Kiruel#2091
problem with the build


[18-Feb-19 07:01 AM] Kiruel#2091
I will create a gist

{Reactions}
üëå 

[18-Feb-19 07:02 AM] Kiruel#2091
https://gist.github.com/Kiruel/9de5699f704cdb8ea8b15c005e4d6b7d

{Embed}
https://gist.github.com/Kiruel/9de5699f704cdb8ea8b15c005e4d6b7d
error_build_mac_os
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-1.discordapp.net/external/gbqvkOfGVZLpQJHL1q2hOLuou7P0zrTDmaYmhO6sZVg/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/8250175


[18-Feb-19 07:09 AM] artem.pikulin#0794
@Kiruel could you please do following:
```
rm -rf build
rm -rf mm2src/common/c_headers
touch mm2src/common/build.rs
cargo build
```


[18-Feb-19 07:13 AM] Kiruel#2091
same


[18-Feb-19 07:14 AM] Kiruel#2091
i will go get some food brb in ~30min


[18-Feb-19 07:23 AM] artem.pikulin#0794
@Kiruel k, bon appetit üôÇ please try `xcode-select --install` when you're back (https://stackoverflow.com/a/47443911/8707622).

{Embed}
https://stackoverflow.com/a/47443911/8707622).
Broken c++ std libraries on macOS High Sierra 10.13
I recently bought a new MacBook on which I transferred my old session. Since then, and after i upgraded to 10.13, i can't get clang to compile anything including only iostream.
Given this program :...
https://images-ext-1.discordapp.net/external/dP07hBXxuorGcvXU609uJ_e6ZgPlIdBxqG8OjQQiAyY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon%402.png


[18-Feb-19 08:30 AM] Kiruel#2091
```xcode-select: error: command line tools are already installed, use "Software Update" to install updates```


[18-Feb-19 08:37 AM] Kiruel#2091
Really strange I can't build anymore üòí


[18-Feb-19 08:47 AM] artem.pikulin#0794
@Kiruel please provide output of `ls /usr/include` and `ls /usr/local/include`


[18-Feb-19 08:49 AM] Kiruel#2091
https://gist.github.com/Kiruel/046cfc0d9764a430628ea041eb3c8206

{Embed}
https://gist.github.com/Kiruel/046cfc0d9764a430628ea041eb3c8206
ls_
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-1.discordapp.net/external/gbqvkOfGVZLpQJHL1q2hOLuou7P0zrTDmaYmhO6sZVg/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/8250175


[18-Feb-19 08:57 AM] artem.pikulin#0794
@Kiruel please provide output of `cpp -v`


[18-Feb-19 09:20 AM] Kiruel#2091
https://gist.github.com/Kiruel/a8039daa798ba4aa806b4d84fb649a3e

{Embed}
https://gist.github.com/Kiruel/a8039daa798ba4aa806b4d84fb649a3e
cpp
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-1.discordapp.net/external/gbqvkOfGVZLpQJHL1q2hOLuou7P0zrTDmaYmhO6sZVg/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/8250175


[18-Feb-19 09:24 AM] artem.pikulin#0794
@Kiruel Ok, thanks, let's try to repeat the error outside of build process, please install rust bindgen separately `cargo install bindgen` and then run `bindgen includes/curve25519.h` from MM2 dir.


[18-Feb-19 09:35 AM] Kiruel#2091
```5:35:13 ‚ûú  supernet-kiruel git:(mm2)  $ bindgen includes/curve25519.h
includes/curve25519.h:20:10: fatal error: 'memory.h' file not found
includes/curve25519.h:20:10: fatal error: 'memory.h' file not found, err: true
thread 'main' panicked at 'Unable to generate bindings: ()', src/libcore/result.rs:1009:5
note: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.```


[18-Feb-19 09:36 AM] artem.pikulin#0794
@Kiruel ok, and now please `RUST_BACKTRACE=1 bindgen includes/curve25519.h --verbose`


[18-Feb-19 09:48 AM] artem.pikulin#0794
@Kiruel I have to go offline now, it's late here already. Let's continue tomorrow please. As temporary workaround you can use the prebuilt nightly from http://195.201.0.6/mm2/, latest MacOS binary is: http://195.201.0.6/mm2/mm2-753ddd50f-Darwin


[18-Feb-19 09:48 AM] Kiruel#2091
Ok see you tomorrow ;)


[18-Feb-19 09:49 AM] artem.pikulin#0794
@Kiruel thanks, please run `RUST_BACKTRACE=1 bindgen includes/curve25519.h --verbose` and leave output here, I'll analyze it tomorrow when I come back online.


[18-Feb-19 09:51 AM] Kiruel#2091
Ok


[18-Feb-19 09:52 AM] Kiruel#2091
```5:51:53 ‚ûú  supernet-kiruel git:(mm2)  $ RUST_BACKTRACE=1 bindgen includes/curve25519.h --verbose
includes/curve25519.h:20:10: fatal error: 'memory.h' file not found
includes/curve25519.h:20:10: fatal error: 'memory.h' file not found, err: true
thread 'main' panicked at 'Unable to generate bindings: ()', src/libcore/result.rs:1009:5
stack backtrace:
   0: std::sys::unix::backtrace::tracing::imp::unwind_backtrace
   1: std::sys_common::backtrace::_print
   2: std::panicking::default_hook::{{closure}}
   3: std::panicking::default_hook
   4: std::panicking::rust_panic_with_hook
   5: std::panicking::continue_panic_fmt
   6: rust_begin_unwind
   7: core::panicking::panic_fmt
   8: core::result::unwrap_failed
   9: std::panicking::try::do_call
  10: __rust_maybe_catch_panic
  11: bindgen::main
  12: std::rt::lang_start::{{closure}}
  13: std::panicking::try::do_call
  14: __rust_maybe_catch_panic
  15: std::rt::lang_start_internal
  16: main
Bindgen unexpectedly panicked
This may be caused by one of the known-unsupported things (https://github.com/rust-lang-nursery/rust-bindgen#c), please modify the bindgen flags to work around it as described in https://github.com/rust-lang-nursery/rust-bindgen#c
Otherwise, please file an issue at https://github.com/rust-lang-nursery/rust-bindgen/issues/new```


[18-Feb-19 10:31 AM] Kiruel#2091
So I just test with the binary mm2-753ddd50f-Darwin latest the rpc_password works well.


[18-Feb-19 11:15 AM] siu#3920
i just tested the my_password method but it doesnt seem to be working for me


[18-Feb-19 11:15 AM] siu#3920
or something im doing is wrong


[18-Feb-19 04:07 PM] Kiruel#2091
Its not a method, you need to use :```./mm2"{\"gui\":\"MM2GUI\",\"netid\":9999,\"client\":1,
\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"${passphrase}\", \"rpc_password\":\"YOUR_PASSWORD\",
\"coins\":$coins}" &```
Then in your call use username like before but with value `YOUR_PASSWORD`.

{Reactions}
üëç 

[18-Feb-19 04:07 PM] Kiruel#2091
The username in mm2 is deprecated now.


[18-Feb-19 04:08 PM] Kiruel#2091
@siu


[18-Feb-19 04:09 PM] siu#3920
Hmm, interesting. Will test this tomorrow

{Reactions}
üëç 

[19-Feb-19 12:31 AM] artem.pikulin#0794
@Anton @at @PTYX Hi! Welcome to `mm2` channel. Please check pinned messages (https://discordapp.com/channels/412898016371015680/476025090627207168/540409105223909389) to get the instruction how to test MM2. If you have any questions please let me know.

{Embed}
https://discordapp.com/channels/412898016371015680/476025090627207168/540409105223909389)
Discord - Free voice and text chat for gamers
Step up your game with a modern voice & text chat app. Crystal clear voice, multiple server and channel support, mobile apps, and more. Get your free server now!
https://images-ext-2.discordapp.net/external/HfR2VUvbtgDrYRhtJYtbVRG8ptOUXl0szXSCAOAiC_8/https/discordapp.com/assets/ee7c382d9257652a88c8f7b7f22a994d.png


[19-Feb-19 03:42 AM] siu#3920
Im building mm2 on a raspberry pi

{Reactions}
üò≤ (2) 

[19-Feb-19 03:42 AM] siu#3920
so far so good. still building rust though


[19-Feb-19 06:08 AM] siu#3920
ok, so after about 2 hours of compiling mm2 on a raspberrypi, it finished with an error: https://pastebin.com/aWU5Qgpt

{Embed}
https://pastebin.com/aWU5Qgpt
error[E0308]: mismatched types      --> mm2src/peers/peers.rs:1048...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[19-Feb-19 06:08 AM] siu#3920
@artem.pikulin @artemciy_dice


[19-Feb-19 06:11 AM] artemciy_dice#0049
@siu , looks like the `char` has a different signedness on Raspberry Pi. Thanks for the log, we'll fix the signedness in the highlighted parts.


[19-Feb-19 07:17 AM] siu#3920
cool! thanks


[19-Feb-19 07:46 AM] Kiruel#2091
I have a question, it's possible to get all swap history ?


[19-Feb-19 07:46 AM] Kiruel#2091
For one coin I would like to show every transaction atleast


[19-Feb-19 07:48 AM] Kiruel#2091
With electrum RPC its possible no ?


[19-Feb-19 07:48 AM] Kiruel#2091
Ok i have my response http://docs.electrum.org/en/latest/protocol.html


[19-Feb-19 07:48 AM] Kiruel#2091
üòÉ


[19-Feb-19 08:04 AM] siu#3920
check `SuperNET/target/debug/DB/GTC/orders` for the orders list


[19-Feb-19 08:05 AM] siu#3920
@Kiruel


[19-Feb-19 08:06 AM] Kiruel#2091
yep i just saw its nice üòÉ


[19-Feb-19 08:06 AM] Kiruel#2091
But if i change a device i cant see the orders anymore


[19-Feb-19 08:06 AM] siu#3920
nope


[19-Feb-19 08:06 AM] Kiruel#2091
They are a solution for this ?


[19-Feb-19 08:06 AM] Kiruel#2091
(i mean a decentralized solution) xD


[19-Feb-19 08:06 AM] siu#3920
your address history in the block explorer is the other option


[19-Feb-19 08:07 AM] siu#3920
wish doesnt identify what is a swap and what is not, but at least you can have an idea.


[19-Feb-19 08:07 AM] Kiruel#2091
hum i see


[19-Feb-19 08:08 AM] Kiruel#2091
They are no imformation in the blockchain about the swap ?


[19-Feb-19 08:08 AM] Kiruel#2091
Like the ID swap


[19-Feb-19 08:08 AM] siu#3920
but there is no decentralized solution for centrally storing all users swap data


[19-Feb-19 08:08 AM] siu#3920
once the network starts having traffic, a feed of started swaps will be available which is what @CHMEX uses for his stats.


[19-Feb-19 08:10 AM] Kiruel#2091
Maybe we can add a data in the blockchain for a swap. IF i do a swap BEER/PIZZA they will have 2 transactions and we can add some data on it like ID swap. üòÉ ! Then we can just get this from electrum.


[19-Feb-19 08:10 AM] Kiruel#2091
Just a idea


[19-Feb-19 08:11 AM] Kiruel#2091
So the database its just the blockchain himself


[19-Feb-19 08:11 AM] siu#3920
but why would you want to attach that in a public way?


[19-Feb-19 08:11 AM] Kiruel#2091
Its just a id anyway.


[19-Feb-19 08:12 AM] Kiruel#2091
And we can encrypt it with the userpass.


[19-Feb-19 08:12 AM] Kiruel#2091
hum or not


[19-Feb-19 08:13 AM] Kiruel#2091
Its not a problem i guess to see every swap for a address no ?


[19-Feb-19 08:15 AM] CHMEX#0686
@siu fyi currently mm2.0 does not have a 'ticker' api call so it cant show anything. As as soon as that is in mm2.0 i point my nodes at it.


[19-Feb-19 08:15 AM] siu#3920
yep, we are waiting for a couple of api calls to be migrated


[19-Feb-19 08:16 AM] siu#3920
i mean, yes, i think that now with oracles something like a stats chain could be done.


[19-Feb-19 08:16 AM] siu#3920
maybe do a dexcharts chain ;p


[19-Feb-19 04:15 PM] CrisF#3405
There is a lot of work being done in #kmdlabs  relating to `Oracles`.  Stats collection kind of things among others.
Not sure if that's the best way to do things here, but might it be an option?


[19-Feb-19 09:04 PM] cipi#4502
@artemciy_dice the new release of mm1 v1.0.1170 from here https://github.com/artemii235/SuperNET/releases has a problem
i get `{"error":"coin port conflicts with existing coin"}` when enabling coins where the rpcport from coins file is the same as with some other coins from there
before that change (last version) mm1 was simply reading the coin config file, took the `rpcport` from there and used that instead of the ones from coin file
thsi was a solution we found for conflicting rpcports, because the coin devs do not seem to worry about using the same rpcport as othercoins and the coins file contains the default rpcort of the coin

{Embed}
https://github.com/artemii235/SuperNET/releases
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[19-Feb-19 09:04 PM] cipi#4502
can we make mm1 work as before, else it will not be possible to use coins with same default rpc port?


[19-Feb-19 10:06 PM] artemciy_dice#0049
@cipi, I did no changes in the `mm1` branch AFAIK, we'll have to bring this up with @artem.pikulin and @Decker. But I remember calling this old C "coin port conflicts with existing coin" code from mm2 and I *suspect* that it was there for quite some time, I don't think that it is something added or enabled in the latest release.
Looks like we've been adding new coins to `mm1` so that's might be what triggered the error for you?


[19-Feb-19 10:09 PM] cipi#4502
previous release v1.0.1170 does not have this, so i reverted to this older release... 90% of my coins do not work with the new release


[19-Feb-19 10:18 PM] artemciy_dice#0049
Okay, thanks for bringing this up. @artem.pikulin or me, we'll look into that soon.


[19-Feb-19 11:48 PM] artem.pikulin#0794
@cipi Hi, please address all `mm1` issues to me. The latest release was made by merging this PR: https://github.com/artemii235/SuperNET/pull/308/files. I guess the issue might be caused by this code change: https://github.com/artemii235/SuperNET/pull/308/files#diff-9ebc60464c76312f25a37ab685f8f431R540 @Decker could you take a look at it please?

{Embed}
https://github.com/artemii235/SuperNET/pull/308/files.
Build software better, together
GitHub is where people build software. More than 31 million people use GitHub to discover, fork, and contribute to over 100 million projects.
https://images-ext-1.discordapp.net/external/GknnCjizMYMXTf7AxtPGiAkqk1cGv6dwIUxYVc4g3cA/https/github.githubassets.com/images/modules/open_graph/github-logo.png

{Embed}
https://github.com/artemii235/SuperNET/pull/308/files
Patch mm1 by DeckerSU ¬∑ Pull Request #308 ¬∑ artemii235/SuperNET
https://images-ext-1.discordapp.net/external/8Zm3nuko0hJQYegJyi9jjc0I2bbSAnM13Ef4WCiLC1M/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/22120003


[20-Feb-19 12:10 AM] Decker#3767
@artem.pikulin oh, yes, can be ... change line 540: https://github.com/artemii235/SuperNET/pull/308/files#diff-9ebc60464c76312f25a37ab685f8f431R540 from this:
```uint16_t port = LP_coininit(&cdata,symbol,name,assetname==0?"":assetname,isPoS,port,pubtype,p2shtype,wiftype,txfee,estimatedrate,longestchain,juint(item,"wiftaddr"),juint(item,"taddr"),LP_busport(port),jstr(item,"confpath"),decimals,txversion);```
to this:
```LP_coininit(&cdata,symbol,name,assetname==0?"":assetname,isPoS,port,pubtype,p2shtype,wiftype,txfee,estimatedrate,longestchain,juint(item,"wiftaddr"),juint(item,"taddr"),LP_busport(port),jstr(item,"confpath"),decimals,txversion);```
and test again.
@cipi ^

{Embed}
https://github.com/artemii235/SuperNET/pull/308/files
Patch mm1 by DeckerSU ¬∑ Pull Request #308 ¬∑ artemii235/SuperNET
https://images-ext-1.discordapp.net/external/8Zm3nuko0hJQYegJyi9jjc0I2bbSAnM13Ef4WCiLC1M/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/22120003


[20-Feb-19 12:11 AM] artem.pikulin#0794
@Decker thanks! 1 minute, going to push change to trigger the release.


[20-Feb-19 12:11 AM] Decker#3767
@artem.pikulin better to test on @cipi system first ...


[20-Feb-19 12:12 AM] Decker#3767
just need to remove `uint16_t port =` and recompile.


[20-Feb-19 12:12 AM] artem.pikulin#0794
Ok, @cipi, could you please build MM1 from source with mentioned change and test again?


[20-Feb-19 12:12 AM] artem.pikulin#0794
If everything is fine we will add this to master branch of my fork.


[20-Feb-19 12:16 AM] Decker#3767
commit mentioned above is important, bcz without it every asset have txversion=1 by default. bcz LP_coininit return positive (!) number = port number, and earlier (before changes) part of code in which we do `coin->txversion = 4;` never executed. bcz :
```
if ( LP_coininit(...) < 0 ) // always >= 0
```


[20-Feb-19 12:41 AM] cipi#4502
tried to build, but i doesn't work because cmake on debian stable is too old... will need to try it on another system, don't want to mess up this one with debian-testing


[20-Feb-19 12:47 AM] cipi#4502
it builds... i hope the binary will work on the other system


[20-Feb-19 12:50 AM] cipi#4502
nope `/marketmaker: /lib/x86_64-linux-gnu/libc.so.6: version GLIBC_2.25 not found (required by ./marketmaker)`
i somehow expected that


[20-Feb-19 12:59 AM] cipi#4502
@artem.pikulin can you please build this, i can't do it on the system with the wallets and the build made on another system is not portable


[20-Feb-19 01:11 AM] cipi#4502
wait a moment, i managed to install cmake 3.13 on debian-stretch... strange thing is that it is included in stretch-backports, but dont't get updated... i did it manually


[20-Feb-19 01:17 AM] artem.pikulin#0794
@cipi the issue should not be cmake, it's about different libc versions on your OSes. I guess that version built locally on my dev machine won't run on your environment as well. Need to adjust Travis CI pipeline to upload files to nightly server instead of release publish. But maybe we just publish a release and then remove if it doesn't work?


[20-Feb-19 01:18 AM] artem.pikulin#0794
Too much effort for testing 1 line change in deprecated software.


[20-Feb-19 01:26 AM] artemciy_dice#0049
`> I guess that version built locally on my dev machine won't run on your environment as well.`

Isn't there a degree of ABI compatibility between libc versions?


[20-Feb-19 01:29 AM] artemciy_dice#0049
https://stackoverflow.com/questions/11107263/how-compatible-are-different-versions-of-glibc
There's a chance it will work.

{Embed}
https://stackoverflow.com/questions/11107263/how-compatible-are-different-versions-of-glibc
How compatible are different versions of glibc?
Specifically:
Is it assured somehow that all versions of glibc 2.x are binary compatible?
If not, how can I run a binary (game) on my system which has been compiled for a different version? Can I
https://images-ext-1.discordapp.net/external/dP07hBXxuorGcvXU609uJ_e6ZgPlIdBxqG8OjQQiAyY/%3Fv%3D73d79a89bded/https/cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon%402.png


[20-Feb-19 01:30 AM] cipi#4502
managed to get everything to build and run and everything üòÉ


[20-Feb-19 01:30 AM] cipi#4502
@Decker the patch with removing `uint16_t port =` is working, my coins are all back


[20-Feb-19 01:33 AM] artem.pikulin#0794
@cipi thanks! Pushed the commit: https://github.com/artemii235/SuperNET/commit/b3acd14ed0e50a062d5ef1fd7514d1fc4630ab5a, new release will be published in ~30 minutes.


[20-Feb-19 01:34 AM] artem.pikulin#0794
@artemciy_dice thanks for noticing it, yea, it could work probably, issue is solved now üôÇ

{Reactions}
troll_cool 

[20-Feb-19 01:38 AM] cipi#4502
just had a look and libc is version `2.28` on the one system and `2.24` on the other... and the error was saying `version GLIBC_2.25 not found`... the one with `2.24` is debian-stretch (stable), the other one is buster (testing) or even sid (unstable), not so sure any more üòâ


[20-Feb-19 01:43 AM] cipi#4502
the stackoverflow-comment has it right: `In short, glibc is backward-compatible, not forward-compatible.`, so building stuff with latest stable versions of libc should not get us in too much trouble with that


[20-Feb-19 01:46 AM] artemciy_dice#0049
Interesting. The way I see it, we should build on an older system when possible (don't rush upgrading CI, for example) in order for the binary build to cover more distributions.


[20-Feb-19 01:47 AM] cipi#4502
lol ... yes, you are of course right... looks like i need more coffee üòÑ

{Reactions}
‚òï (3) 

[20-Feb-19 07:45 AM] Mark81#4505
I have been testing now newest mm2.0 and  i am very happy to say its working very nicely now. hmm one thing what came to my mind is that is mm2.0 engine trying to find best price for offering since i was buying pizza with beer way over marketprice by offering 3 beer coin  for every pizza coin? got 10 pizzas for 25 beer coins and there should be inventory with better prices.


[20-Feb-19 07:46 AM] Mark81#4505
or maybe it is best to say how hard it is trying to find best price for buyer?


[20-Feb-19 07:52 AM] Mark81#4505
another test ask 25beer@3pizza resulted in  16 pizza coin and simultaneus swap  with ask 2beer@0.95pizza resulted in 2.117pizza coin.


[20-Feb-19 07:53 AM] Mark81#4505
there should be optimization for better trade performance. it does as user wants but is that ok when there is better inventory with lower prices?


[20-Feb-19 08:23 AM] artem.pikulin#0794
@Mark81 Hi, thanks a lot for your feedback! Yeah, MM2 trade price negotiation is not clear now, we already have the issue about it: https://github.com/artemii235/SuperNET/issues/266, we're going to fix this till April 1st.

{Embed}
https://github.com/artemii235/SuperNET/issues/266,
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[21-Feb-19 07:35 PM] artemciy_dice#0049
`> ok, so after about 2 hours of compiling mm2 on a raspberrypi, it finished with an error: https://pastebin.com/aWU5Qgpt`

@siu , `mm2-cross` branch now fixes some of these.


[21-Feb-19 07:35 PM] siu#3920
Awesome! Will give it a test tomorrow


[22-Feb-19 05:33 AM] siu#3920
@artemciy_dice This is the new result: ``` Running `/home/pi/SuperNET/target/debug/build/common-681aa3a9e1442eed/build-script-build`
[common 0.1.0] rerun-if-changed=/home/pi/SuperNET/iguana/exchanges/etomicswap
[common 0.1.0] rerun-if-changed=/home/pi/SuperNET/iguana/exchanges
[common 0.1.0] rerun-if-changed=/home/pi/SuperNET/iguana/secp256k1
[common 0.1.0] rerun-if-changed=/home/pi/SuperNET/crypto777
[common 0.1.0] rerun-if-changed=/home/pi/SuperNET/crypto777/jpeg
[common 0.1.0] rerun-if-changed=/home/pi/SuperNET/OSlibs/win
[common 0.1.0] rerun-if-changed=/home/pi/SuperNET/CMakeLists.txt
[common 0.1.0] thread 'main' panicked at 'Target not (yet) supported: armv7-unknown-linux-gnueabihf', mm2src/common/build.rs:655:18
[common 0.1.0] note: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.
error: failed to run custom build command for `common v0.1.0 (/home/pi/SuperNET/mm2src/common)`
process didn't exit successfully: `/home/pi/SuperNET/target/debug/build/common-681aa3a9e1442eed/build-script-build` (exit code: 101)
--- stdout
rerun-if-changed=/home/pi/SuperNET/iguana/exchanges/etomicswap
rerun-if-changed=/home/pi/SuperNET/iguana/exchanges
rerun-if-changed=/home/pi/SuperNET/iguana/secp256k1
rerun-if-changed=/home/pi/SuperNET/crypto777
rerun-if-changed=/home/pi/SuperNET/crypto777/jpeg
rerun-if-changed=/home/pi/SuperNET/OSlibs/win
rerun-if-changed=/home/pi/SuperNET/CMakeLists.txt

--- stderr
thread 'main' panicked at 'Target not (yet) supported: armv7-unknown-linux-gnueabihf', mm2src/common/build.rs:655:18
note: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.

```


[22-Feb-19 05:34 AM] siu#3920
armv7 not yet supported.


[22-Feb-19 05:35 AM] artemciy_dice#0049
k, let me add it to the list.


[22-Feb-19 05:46 AM] artemciy_dice#0049
@siu , I've pushed a commit that helps us with recognizing it as a normal Unix build. Will you give it another go?


[22-Feb-19 05:47 AM] siu#3920
sure, on it


[22-Feb-19 07:51 AM] siu#3920
https://pastebin.com/pnHQPvyJ

{Embed}
https://pastebin.com/pnHQPvyJ
g++: internal compiler error: Killed (program cc1plus)  Please sub...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[22-Feb-19 07:51 AM] siu#3920
now it stopped here.


[22-Feb-19 07:52 AM] siu#3920
@artemciy_dice


[22-Feb-19 07:53 AM] Kiruel#2091
Do you follow this doc ?  @siu https://github.com/artemii235/SuperNET/blob/bb94f1b548c68e6b9fead3f1505c8f963878dee1/docs/ANDROID.md

{Embed}
https://github.com/artemii235/SuperNET/blob/bb94f1b548c68e6b9fead3f1505c8f963878dee1/docs/ANDROID.md
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[22-Feb-19 07:54 AM] siu#3920
nope, will try this method now


[22-Feb-19 07:54 AM] Kiruel#2091
with docker and stuff


[22-Feb-19 07:55 AM] Kiruel#2091
It will not work yet but at the end u should see somehting like `error: Could not compile `mm2`.`


[22-Feb-19 07:55 AM] Kiruel#2091
@artemciy_dice Work on it üòâ ! And I test with him on my macOS.


[22-Feb-19 07:56 AM] siu#3920
but why would i need a docker container?


[22-Feb-19 07:56 AM] siu#3920
i am looking to compile on raspberry pi?


[22-Feb-19 07:57 AM] Kiruel#2091
Docker its for cross


[22-Feb-19 07:57 AM] Kiruel#2091
cross will install all u need with docker


[22-Feb-19 07:57 AM] Kiruel#2091
Because your rasberry is arm its like android.


[22-Feb-19 08:16 AM] siu#3920
ok, lets see if this works out


[22-Feb-19 08:17 AM] artemciy_dice#0049
@siu , thanks for the gist, will take a look later.
Instruction referenced by @Kiruel is for cross-compilation, I think it's a different beast from what you're trying to do.

{Reactions}
‚úÖ 

[22-Feb-19 08:18 AM] siu#3920
yeah, that is what has me confused.


[22-Feb-19 08:18 AM] siu#3920
Since im not trying to cross compile im trying to compile within the raspberry itself


[22-Feb-19 08:18 AM] artemciy_dice#0049
Right!


[25-Feb-19 09:17 AM] siu#3920
hello @artem.pikulin and @artemciy_dice, what new things i can test? i see a couple of new commits happening

{Reactions}
üòè 

[25-Feb-19 09:20 AM] artem.pikulin#0794
@siu Hi, just few fixes for cross-platform building, I'm going to restore `withdraw` RPC tomorrow, will let you know once it's ready üôÇ

{Reactions}
üåï (2) üöÄ (2) 

[25-Feb-19 09:20 AM] Kiruel#2091
ohohoh !


[25-Feb-19 09:31 AM] siu#3920
Cool, any updates on the orderbook inconsistencies?


[25-Feb-19 09:44 AM] namhoang28#4328
@artem.pikulin üëç


[25-Feb-19 09:48 AM] artem.pikulin#0794
@siu `any updates on te orderbook inconsistencies?` not yet, please use `setprice` + `buy` for now, `autoprice` logic is complicated a bit so we need time to fix/refactor it.


[25-Feb-19 09:49 AM] siu#3920
Ah, ok, perfect. Thanks.


[25-Feb-19 09:54 AM] siu#3920
```25 17:53:34, lp_native_dex:1573] showwif.0 version: UNKNOWN 2455984605
25 17:53:34, lp_native_dex:1661] lp_init] Trying to fetch the real IP from 'http://checkip.amazonaws.com/' ...
üòÖ 2019-02-25 13:53:39 -0400 [myipaddr] We couldn't bind on the external IP 24.54.xxx.xxx (port 47772), so NAT is likely to be present. We'll be okay though.
25 17:53:39, lp_native_dex:1740] lp_init] Listening on tcp://0.0.0.0:47772 (LP_mypubsock 0)```


[25-Feb-19 09:54 AM] siu#3920
nice message


[25-Feb-19 01:33 PM] artemciy_dice#0049
@siu, I've looked closer at https://pastebin.com/pnHQPvyJ.
GCC 7.1. has crashed while processing a boost header.

Our normal builds happen on GCC 5.4.0.
Incompatibilities between compilers and libraries do happen, it isn't as rare as we'd like to.
Not much we can do about it.
Would it be possible to downgrade to GCC 5.4 ?


[25-Feb-19 01:35 PM] siu#3920
Yes. will do.


[25-Feb-19 05:57 PM] siu#3920
hi guys, did a REVS/KMD swap, still running. but i find weird that this happening: ```26 01:46:36, lp_swap:407] Sending 'maker-payment@c909358bbc5295433f0248f37f9155f08cc3c049e31ca45fde0a0eb06ce2fafb' (357 bytes, crc 380364423)
26 01:46:46, peers:785] dht_get on a missing chunk 1e1cv2v4zzg7j.1 after 10.0
26 01:46:53, peers:533] transmit] chunk 1gd9l8rgm1jwq.1 stored, 8 ‚Üí 8
26 01:46:53, peers:533] transmit] chunk 373dj16k0x87e.1 stored, 2 ‚Üí 366
26 01:46:56, peers:785] dht_get on a missing chunk 1e1cv2v4zzg7j.1 after 10.0
26 01:47:06, peers:785] dht_get on a missing chunk 1e1cv2v4zzg7j.1 after 10.0
26 01:47:16, peers:785] dht_get on a missing chunk 1e1cv2v4zzg7j.1 after 10.0
```


[25-Feb-19 05:57 PM] siu#3920
i would guess it means connection problems? But this is a vps who is printing this, which my guess is it should have really good connection.


[25-Feb-19 06:01 PM] siu#3920
it finished successfully though: ``` 2019-02-25 21:59:58 -0400 [swap uuid=c909358bbc5295433f0248f37f9155f08cc3c049e31ca45fde0a0eb06ce2fafb] REVS/KMD Swap finished successfully.
    Spending maker payment‚Ä¶
    Waiting for taker payment spend‚Ä¶
    Sending the Taker fee‚Ä¶
    Waiting for the confirmation of the Maker payment‚Ä¶
    Waiting for Maker payment‚Ä¶ Done.
    Sending Taker fee‚Ä¶
    Waiting for Maker negotiated‚Ä¶ Done.
    Waiting for Maker negotiation data‚Ä¶ Done.
    ```


[26-Feb-19 01:18 AM] artemciy_dice#0049
A peer would often *wait* for a message from another peer even before that other peer is ready to send one. Plus there are DHT delays. So these "missing" messages are expected. We print them to check that the communication loop is active and sound. In fact, should turn them off soon.


[26-Feb-19 01:49 AM] cipi#4502
btw, gcc-5 is not included in debian any more, not even in the testing-repos... gcc version in stable is 6.3 and 8.2 in testing and unstable... i don'T think gcc 7 will ever see the light of day, looks like they will switch directly from 6 to 8 when time will come


[26-Feb-19 01:55 AM] artemciy_dice#0049
Good to know, @cipi ! GCC 5 is still the default on Ubuntu Xenial. We should probably collect the known-good compilers. Drop us a note if you try one.


[26-Feb-19 02:06 AM] cipi#4502
i used almost all of them, but not with mm2 yet, will have to try it out... so far i think that the difference between gcc 5 and 6 are not that big, so most things should compile with gcc 6 out of the box... i only had problems with gcc 7 and 8, for example with komodod... had the case where it compiled but crashed reproducible at start, every time... but afaik the problem is solved in the meantime... will let you know when i find something regading mm2

{Reactions}
awthanks 

[26-Feb-19 02:56 AM] artem.pikulin#0794
@siu Hi, most likely MM2 waited some time for 3 REVS payment confirmations. As I can see swap took about 10 minutes total. We will add some logging to `wait_for_confirmations` stage, MM2 waits silently now.


[26-Feb-19 05:58 AM] Mark81#4505
Also output of ongoing simultaneus swaps could be added: like swap finished succesfully (3/5). Helps tracking.


[26-Feb-19 06:01 AM] PTYX#6840
@artem.pikulin we can test on mojave and high sierra.


[26-Feb-19 06:02 AM] PTYX#6840
i'll go through the documentation now and will let you know I get stuck


[26-Feb-19 06:10 AM] artem.pikulin#0794
@Mark81 Hi, thanks for suggestion! We will work on it too.


[26-Feb-19 06:11 AM] artem.pikulin#0794
@PTYX Thanks, as I know nobody tested High Sierra yet.

{Reactions}
üëå 

[26-Feb-19 06:12 AM] siu#3920
```#!/bin/bash

while true; do 

    base=$1
    rel=$2
    price=$(curl https://www.atomicexplorer.com/api/ticker | jq -r '.result.'$base'.'$rel'')
    cd ~/SuperNET/target/debug
    source passphrase
    source userpass
    BASE=$(echo $1 | tr '[:lower:]' '[:upper:]')
    REL=$(echo $2 | tr '[:lower:]' '[:upper:]')
    curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"setprice\",\"base\":\"$BASE\",\"rel\":\"$REL\",\"price\": $price,\"broadcast\":1}"
    sleep 60
done
```


[26-Feb-19 06:12 AM] siu#3920
a little script to account for autoprice for now


[26-Feb-19 06:12 AM] siu#3920
have not tested it yet üòÇ


[26-Feb-19 06:29 AM] siu#3920
now it works


[26-Feb-19 06:29 AM] siu#3920
just execute ./setprice revs kmd


[26-Feb-19 06:29 AM] siu#3920
or something similar


[26-Feb-19 06:31 AM] siu#3920
```./orderbook
{"bids":[],"numbids":0,"biddepth":0,"asks":[{"coin":"REVS","address":"RUJkA6jzZrgagTVNywYVs7U4E4nKcnnBSe","price":0.47141632,"numutxos":0,"avevolume":0,"maxvolume":6.19680539,"depth":0,"pubkey":"0ef8026f094fba1f31a67a9ba1d2ff0ee904abe143c36a075c568b691aa3697a","age":4,"zcredits":0}],"numasks":1,"askdepth":0,"base":"REVS","rel":"KMD","timestamp":1551191462,"netid":9999}%    ```


[26-Feb-19 06:34 AM] siu#3920
@artem.pikulin so setprice only executes a sell order?


[26-Feb-19 06:34 AM] siu#3920
no bids?


[26-Feb-19 06:38 AM] artem.pikulin#0794
@siu `setprice` order means that you act as `market maker` only, `buy/sell` - `market taker`, it can be displayed as bid or ask depending on coins order in call. For example if you reverse order of coins in orderbook call (`base:KMD rel:REVS` instead of `base:REVS rel:KMD`) the order will be displayed as `bid`.


[26-Feb-19 06:38 AM] siu#3920
ah


[26-Feb-19 06:38 AM] siu#3920
ok


[26-Feb-19 06:39 AM] siu#3920
so the variation is now in orderbook


[26-Feb-19 06:39 AM] siu#3920
maybe that makes it easier for everyone to understand the base/rel concept


[26-Feb-19 11:05 AM] siu#3920
@artem.pikulin @artemciy_dice ```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"withdraw\",\"coin\":\"$1\",\"outputs\":[{\"$2\":$3}],\"broadcast\":1}"```


[26-Feb-19 11:05 AM] siu#3920
what could be wrong?


[26-Feb-19 11:05 AM] siu#3920
i see that maybe it needs broadcast 0 instead of 1?


[26-Feb-19 11:06 AM] artem.pikulin#0794
Withdraw doesn't work yet, I'm still working on it.


[26-Feb-19 11:06 AM] siu#3920
ah ok, i thought you told me to test it :p


[26-Feb-19 11:08 AM] artem.pikulin#0794
It took more time than I thought, please hold on for a while. I will let you know immediately once it's ready üôÇ


[26-Feb-19 11:19 AM] artemciy_dice#0049
`> Also output of ongoing simultaneus swaps could be added: like swap finished succesfully (3/5). Helps tracking.`

Status of ongoing operations is shared via the "dashboard" file currently.
( `watch cat dashboard` should work )
We can update the console with it, but implementing this without cluttering the log output is compplicated and mm2 would normally be backed by a GUI.


[26-Feb-19 11:23 AM] artemciy_dice#0049
All in all, a nice feature to have but probably not a top priority right now.


[26-Feb-19 12:37 PM] siu#3920
A build failed on one of my servers https://gist.github.com/siulynot/c70b2b22ebb9a6a3a502bca8084b9490

{Embed}
https://gist.github.com/siulynot/c70b2b22ebb9a6a3a502bca8084b9490
gist:c70b2b22ebb9a6a3a502bca8084b9490
GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-1.discordapp.net/external/xCKCGKW2Cdx-azNvvFa86K6JbDxwudWk-KIM31ZOFss/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/225342


[26-Feb-19 12:40 PM] siu#3920
i do have libboost-all-dev installed


[26-Feb-19 01:29 PM] siu#3920
@artem.pikulin  ^


[26-Feb-19 02:41 PM] siu#3920
```./orderbook
{"bids":[{"coin":"REVS","address":"RUJkA6jzZrgagTVNywYVs7U4E4nKcnnBSe","price":2.12126723,"numutxos":0,"avevolume":0,"maxvolume":6.14744647,"depth":0,"pubkey":"0ef8026f094fba1f31a67a9ba1d2ff0ee904abe143c36a075c568b691aa3697a","age":10,"zcredits":0}],"numbids":1,"biddepth":0,"asks":[],"numasks":0,"askdepth":0,"base":"KMD","rel":"REVS","timestamp":1551220818,"netid":9999}%   ```


[26-Feb-19 02:41 PM] siu#3920
somethin is not right about the setprice api call


[26-Feb-19 02:41 PM] siu#3920
```{"bids":[],"numbids":0,"biddepth":0,"asks":[{"coin":"REVS","address":"RUJkA6jzZrgagTVNywYVs7U4E4nKcnnBSe","price":0.47141632,"numutxos":0,"avevolume":0,"maxvolume":6.14744647,"depth":0,"pubkey":"0ef8026f094fba1f31a67a9ba1d2ff0ee904abe143c36a075c568b691aa3697a","age":8,"zcredits":0}],"numasks":1,"askdepth":0,"base":"REVS","rel":"KMD","timestamp":1551220847,"netid":9999}```


[26-Feb-19 02:41 PM] siu#3920
executing orderbook with inverted BASE/REL


[26-Feb-19 02:41 PM] siu#3920
price does not become 1/price


[26-Feb-19 02:42 PM] siu#3920
also, if the order is in the bids section coin should show KMD in this case


[26-Feb-19 02:43 PM] siu#3920
```    curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"setprice\",\"base\":\"REVS\",\"rel\":\"KMD\",\"price\": $price,\"broadcast\":1}"```


[26-Feb-19 02:44 PM] siu#3920
this being the call, REL coin is KMD and BASE is REVS


[26-Feb-19 04:47 PM] artemciy_dice#0049
@siu , thanks for the report, filed under https://github.com/artemii235/SuperNET/issues/319.


[26-Feb-19 04:47 PM] siu#3920
No problem


[26-Feb-19 06:21 PM] grewalsatinder#9653
@ca333 m curious, how are we running mm2 daemon on mobile?


[26-Feb-19 06:22 PM] grewalsatinder#9653
Made a java native module for flutter?


[26-Feb-19 06:22 PM] grewalsatinder#9653
Is that mm2 binary included in that code?


[26-Feb-19 11:34 PM] artem.pikulin#0794
@siu `A build failed on one of my servers https://gist.github.com/siulynot/c70b2b22ebb9a6a3a502bca8084b9490` Hi, what gcc version do you have on this server?


[27-Feb-19 01:44 AM] siu#3920
Need to check, im afk now, ill let you know when im there.

{Reactions}
üëå 

[27-Feb-19 06:31 AM] siu#3920
```gcc version 7.2.0 (Ubuntu 7.2.0-8ubuntu3.1~16.04.york0) 
```


[27-Feb-19 06:31 AM] siu#3920
@artem.pikulin


[27-Feb-19 06:33 AM] siu#3920
need to change to 5.4 right?


[27-Feb-19 06:38 AM] artem.pikulin#0794
@siu Yes, we have the `gcc (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609` on our CI agent and it works fine.


[27-Feb-19 06:39 AM] siu#3920
yes, on all other servers i had 5.4, not sure why that one has 7.2, will downgrade


[27-Feb-19 08:00 AM] siu#3920
aaannddd, i broke the server üòÇ

{Reactions}
troll_cool 

[27-Feb-19 08:01 AM] siu#3920
i hope i had nothing important there :p


[27-Feb-19 08:02 AM] siu#3920
never remove gcc-7-base


[27-Feb-19 08:09 AM] grewalsatinder#9653
üòÑ


[28-Feb-19 05:17 AM] mobipoi#5774
@artem.pikulin will beta release come with a gui so it can be tested thoroughly before full release


[28-Feb-19 05:21 AM] artem.pikulin#0794
@mobipoi Hi, yes, the beta testing will be public so GUI is `required` to announce it.


[28-Feb-19 05:28 AM] mobipoi#5774
Ok nice , yes it makes sense to do so


[28-Feb-19 05:36 AM] siu#3920
The GUI is in the works too. Hold your socks before they get blown out üòÇ


[28-Feb-19 06:10 AM] artem.pikulin#0794
@siu @MM2 community tester Hi, I've just merged the PR with `withdraw/send_raw_transaction` implementation to `mm2` branch. The usage example:
 Request
```
curl --url "http://127.0.0.1:7783" --data "{\"method\":\"withdraw\",\"coin\":\"ETOMIC\",\"to\":\"R9o9xTocqr6CeEDGDH6mEYpwLoMz6jNjMW\",\"amount\":10,\"userpass\":\"$userpass\"}"
```
Response:
```bash
{
     "tx_hex":"RAW_TX_HERE",
    "from":"R9o9xTocqr6CeEDGDH6mEYpwLoMz6jNjMW",
    "to":"R9o9xTocqr6CeEDGDH6mEYpwLoMz6jNjMW",
    "amount":10.0,
    "fee_details":{
        "amount":0.00001
    }
}
```

{Reactions}
üëç (3) 

[28-Feb-19 06:11 AM] artem.pikulin#0794
Please note that withdraw `does not` broadcast the transaction.


[28-Feb-19 06:12 AM] artem.pikulin#0794
Validate tx details and bypass `RAW_TX_HERE` to `send_raw_transaction` if everything is correct.


[28-Feb-19 06:13 AM] artem.pikulin#0794
`curl --url "http://127.0.0.1:7783" --data "{\"method\":\"send_raw_transaction\",\"coin\":\"KMD\",\"tx_hex\":\"RAW_TX_HERE\",\"userpass\":\"$userpass\"}"`


[28-Feb-19 06:13 AM] artem.pikulin#0794
The response of `send_raw_transaction`:


[28-Feb-19 06:14 AM] artem.pikulin#0794
```
{
    "tx_hash":"0b024ea6997e16387c0931de9f203d534c6b2b8500e4bda2df51a36b52a3ef33",
}
```


[28-Feb-19 06:14 AM] artem.pikulin#0794
Be careful, do not send big amounts of real value coins üôÇ


[28-Feb-19 06:36 AM] siu#3920
great!


[28-Feb-19 06:36 AM] siu#3920
so even if i specify `broadcast` it wont?


[28-Feb-19 06:43 AM] siu#3920
```{"tx_hash":"b35dcd30214580ba7b3c879d74c7d2d4f51ebba6b5ff5727bd14a879afb6beb0"}```


[28-Feb-19 06:43 AM] siu#3920
@artem.pikulin works here


[28-Feb-19 06:44 AM] siu#3920
```"from":"RUJkA6jzZrgagTVNywYVs7U4E4nKcnnBSe","to":"RAxJZhfTnyC62wV8cYZAcS4b1vTpZf1DoY","amount":0.12,"fee_details":{"amount":0.00001}}```


[28-Feb-19 06:44 AM] artem.pikulin#0794
Yes, there is no `broadcast` arg at all.


[28-Feb-19 06:45 AM] artem.pikulin#0794
Might be dangerous to send tx right away due to dynamic fees of some coins.


[28-Feb-19 06:45 AM] siu#3920
ok


[28-Feb-19 06:45 AM] siu#3920
how would this work with BTC then?


[28-Feb-19 06:46 AM] artem.pikulin#0794
According to docs `estimate_fee` returns fee per Kbyte, I just set to use the value received from `estimate_fee` as total fee for now.


[28-Feb-19 06:47 AM] artem.pikulin#0794
Dynamic fee for UTXO coins is a bit tricky, I will refactor it a bit later.


[28-Feb-19 06:48 AM] siu#3920
ok, btc is a bch we know üòÇ


[02-Mar-19 04:23 AM] ca333#0333
@grewalsatinder we are running MM2 natively on mobile. will release more details and infos on mobile runtime enviroment very soon.

{Reactions}
üòé (2) 

[02-Mar-19 04:28 AM] grewalsatinder#9653
üëç üôÇ


[04-Mar-19 03:28 AM] hyperDEX#6586
Finally back. @artem.pikulin sorry i have not been following along. How far along are we with mm2.0 replicating all mm 1.0 functionalities?


[04-Mar-19 03:36 AM] artem.pikulin#0794
@hyperDEX Hi, depending on feedback we might remove/not port some RPCs at all. The plan is to restore/port the most essential functionality (swapstatus, autoprice, other important calls), hopefully it'll be done till April the 1st (or later a bit in Q2 2019).


[04-Mar-19 03:38 AM] hyperDEX#6586
How is it functioning with testing at the moment? Issues with Nat and generally reliability been ironed out?


[04-Mar-19 03:52 AM] artem.pikulin#0794
Testing goes well, we don't have statistics yet, but I think there's pretty high swap success rate. Working behind the NAT is not solved completely yet, MM2 still relies on nanomsg for ordermatching.


[04-Mar-19 04:02 AM] hyperDEX#6586
Thanks Artem


[04-Mar-19 03:19 PM] siu#3920
I just tested the latest mm2 and it seems to have problems propagating orders with ./setprice too.


[04-Mar-19 03:27 PM] siu#3920
If anyone can test, please check if you see orders of REVS/KMD


[04-Mar-19 04:04 PM] siu#3920
It eventually showed. Took more than 30  minutes though


[05-Mar-19 12:13 AM] artem.pikulin#0794
@siu Hi, please provide more info about your environment, MM startup scripts, logs, requests, etc. I've noticed that 9999 seednode went down for some reason, but after restart `setprice` order is propagating immediately.


[05-Mar-19 03:35 AM] siu#3920
startup script ^


[05-Mar-19 04:05 AM] SHossain#0007
i see REVS/KMD orderbook. it appeared quickly, no delay
```
./orderbook | jq '.'
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   497  100   371  100   126   362k   123k --:--:-- --:--:-- --:--:--  485k
{
  "bids": [
    {
      "coin": "REVS",
      "address": "RUJkA6jzZrgagTVNywYVs7U4E4nKcnnBSe",
      "price": 2.12126723,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 5.09337124,
      "depth": 0,
      "pubkey": "0ef8026f094fba1f31a67a9ba1d2ff0ee904abe143c36a075c568b691aa3697a",
      "age": 8,
      "zcredits": 0
    }
  ],
  "numbids": 1,
  "biddepth": 0,
  "asks": [],
  "numasks": 0,
  "askdepth": 0,
  "base": "KMD",
  "rel": "REVS",
  "timestamp": 1551787473,
  "netid": 9999
}
```


[05-Mar-19 05:16 AM] siu#3920
seems like there was an issue with seed node for a moment.


[05-Mar-19 05:42 AM] artem.pikulin#0794
@siu Do all of your nodes use default 9999 seednode? (The default is used if you don't explicitly set "seednode" param in MM2 json cmd config).


[05-Mar-19 05:53 AM] siu#3920
yes, i use the 9999 seednode


[05-Mar-19 07:18 AM] siu#3920
```./orderbook | jq
{
  "bids": [],
  "numbids": 0,
  "biddepth": 0,
  "asks": [
    {
      "coin": "COQUI",
      "address": "RWdBfoQPBfbhF3GGoG2qNnCdDsUcQ2Nf1r",
      "price": 0.32398495,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 17.0105954,
      "depth": 0,
      "pubkey": "5491037c6539149fddbdc43eddfe14881b6b20a0504030257c9ad0c5c7de1a77",
      "age": 5,
      "zcredits": 0
    },
    {
      "coin": "COQUI",
      "address": "RCcQFPBxUzgNXYr2rzDeRiXBPqDmKrHNmZ",
      "price": 0.32398495,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 61676.97657008,
      "depth": 0,
      "pubkey": "2733d67becda455fd7de12f941b9530ffa0abc35c749a5ce786099e8bd58364c",
      "age": 4,
      "zcredits": 0
    },
    {
      "coin": "COQUI",
      "address": "RApKoFsER8Mzm6KXoweyeK8BRyEUUCxzv9",
      "price": 0.32398495,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 63968.39824353,
      "depth": 0,
      "pubkey": "ebd538dcc0a059cc87f8713968cc3da3128f2e98cc993b2c8323a489cfeca37c",
      "age": 5,
      "zcredits": 0
    },
    {
      "coin": "COQUI",
      "address": "RUSvGn1B27e4HUDvtpUyjYHubY5QaovaDn",
      "price": 0.32398495,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 54450.715985,
      "depth": 0,
      "pubkey": "6ebe10029f21aae00f38ccdaa2cf89f23ed98a7f833aea23ea6ac576a0fc5731",
      "age": 4,
      "zcredits": 0
    },
    {
      "coin": "COQUI",
      "address": "REbwjC5mfQBRevH78CuRjcvQudxa3ii5Ma",
      "price": 0.32398495,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 191220.3336245,
      "depth": 0,
      "pubkey": "f5e71f32fbb1b16599f12c264b75f45c7bea63de6ed93899c499d35cc6ef466a",
      "age": 5,
      "zcredits": 0
    }
  ],
  "numasks": 5,
  "askdepth": 0,
  "base": "COQUI",
  "rel": "KMD",
  "timestamp": 1551799155,
  "netid": 9999
}
    ```


[05-Mar-19 07:19 AM] siu#3920
I have a bunch of coqui orders up if someone wants to test


[05-Mar-19 07:20 AM] siu#3920
`05 15:20:16, lp_ordermatch:771] Entering the taker_swap_loop COQUI/KMD`


[05-Mar-19 07:26 AM] artem.pikulin#0794
@siu `"maxvolume": 191220.3336245,` please `do not` use MM2 with such amounts. I'm warning again that if something goes wrong you will `LOSE` it.


[05-Mar-19 07:51 AM] siu#3920
ok, it was an old address i have funds in.


[07-Mar-19 05:20 AM] siu#3920
@artem.pikulin


[07-Mar-19 05:20 AM] siu#3920
I was going to test ZRX


[07-Mar-19 05:20 AM] siu#3920
but enable is not working


[07-Mar-19 05:20 AM] siu#3920
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ZRX\"}"```


[07-Mar-19 05:21 AM] siu#3920
```cant open.(/home/siu/.0x/0x.conf)
07 13:19:39, common:658] RPC error response: lp_coins:889] lp_coins:861] eth:1189] invalid type: null, expected a sequence
```


[07-Mar-19 05:21 AM] siu#3920
seems like ETH coins are not activating like they did before.


[07-Mar-19 05:31 AM] artem.pikulin#0794
@siu Hi, please try to enable according to this docs update https://github.com/KomodoPlatform/developer-docs/pull/30/files

{Embed}
https://github.com/KomodoPlatform/developer-docs/pull/30/files
Mention new params for ETH/ERC20 coins "enable". by artemii235 ¬∑ ...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003

{Reactions}
üëç 

[07-Mar-19 05:32 AM] artem.pikulin#0794
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ETH\",\"urls\":[\"http://195.201.0.6:8545\"],\"swap_contract_address\":\"0x7Bc1bBDD6A0a722fC9bffC49c921B685ECB84b94\"}"` please note that this example is for `Ropsten` testnet.


[07-Mar-19 05:32 AM] artem.pikulin#0794
To test on mainnet you should use these params: https://github.com/KomodoPlatform/developer-docs/pull/30/files#diff-c12725964473d9ee49821701e932f8cfR113

{Embed}
https://github.com/KomodoPlatform/developer-docs/pull/30/files
Mention new params for ETH/ERC20 coins "enable". by artemii235 ¬∑ ...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[07-Mar-19 05:33 AM] siu#3920
great, thanks!

{Reactions}
Komodo 

[07-Mar-19 05:34 AM] SHossain#0007 (pinned)
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md

{Embed}
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[07-Mar-19 05:34 AM] artem.pikulin#0794
@SHossain thanks, yeah, easier to read md file than PR diff üôÇ

{Reactions}
üëçüèΩ 

[07-Mar-19 05:35 AM] SHossain#0007
very true üòÉ


[07-Mar-19 05:35 AM] artem.pikulin#0794
Pinned a message.


[07-Mar-19 05:37 AM] siu#3920
so i use the same smart-contract address for any coin?


[07-Mar-19 05:37 AM] siu#3920
doesnt seem so


[07-Mar-19 05:41 AM] artem.pikulin#0794
@siu It's `Atomic swap` smart contract address, not address of token. ERC20 smart contract address is set by `etomic` field in coins file as it was before.


[07-Mar-19 05:41 AM] siu#3920
ok


[07-Mar-19 05:42 AM] siu#3920
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ZRX\",\"urls\":[\"http://195.201.0.6:8545\"],\"swap_contract_address\":\"0xE41d2489571d322189246DaFA5ebDe1F4699F498\"}"
{"error":"lp_coins:889] lp_coins:861] eth:1213] eth:1170] please ensure the contract and method you're calling exist! failed to decode empty bytes. if you're using jsonrpc this is likely due to jsonrpc returning `0x` in case contract or method don't exist"}%                                             ```


[07-Mar-19 05:42 AM] siu#3920
still seem to be something wrong with ZRX


[07-Mar-19 05:43 AM] siu#3920
```{\"coin\":\"ZRX\",\"name\":\"0x\",\"etomic\":\"0xE41d2489571d322189246DaFA5ebDe1F4699F498\",\"rpcport\":80}```


[07-Mar-19 05:43 AM] siu#3920
coins file had this contract address


[07-Mar-19 05:43 AM] artem.pikulin#0794
Please check the docs and my comments 1 more time.


[07-Mar-19 05:44 AM] artem.pikulin#0794
You shouldn't put the token address to swap contract address.


[07-Mar-19 05:44 AM] artem.pikulin#0794
It's not same thing.


[07-Mar-19 05:44 AM] artem.pikulin#0794
Also you're using `Ropsten` config.


[07-Mar-19 05:45 AM] siu#3920
ahhh server port is different


[07-Mar-19 05:45 AM] artem.pikulin#0794
Yes, and tip `Swap smart contract on ETH mainnet: 0x8500AFc0bc5214728082163326C2FF0C73f4a871 Main-net node maintained by MM2 team: http://195.201.0.6:8555`


[07-Mar-19 05:45 AM] siu#3920
got it!


[07-Mar-19 05:45 AM] siu#3920
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ZRX\",\"urls\":[\"http://195.201.0.6:8555\"],\"swap_contract_address\":\"0xE41d2489571d322189246DaFA5ebDe1F4699F498\"}"
{"address":"0x0bb040504daf112bfcf37548df477d7f7fe6f506","balance":0.0,"result":"success"}%                                     ```

{Reactions}
üëç 

[07-Mar-19 05:46 AM] artem.pikulin#0794
Not correct still üôÇ


[07-Mar-19 05:46 AM] artem.pikulin#0794
`Swap smart contract on ETH mainnet: 0x8500AFc0bc5214728082163326C2FF0C73f4a871`


[07-Mar-19 05:46 AM] artem.pikulin#0794
Please restart MM and replace the `\"swap_contract_address\":\"0xE41d2489571d322189246DaFA5ebDe1F4699F498\"` with `\"swap_contract_address\":\"0x8500AFc0bc5214728082163326C2FF0C73f4a871\"`


[07-Mar-19 05:47 AM] siu#3920
even if im using ZRX instead of ETH?


[07-Mar-19 05:48 AM] artem.pikulin#0794
It's swap contract address, it's same for `all` tokens running on same ETH network and for ETH too.


[07-Mar-19 05:48 AM] artem.pikulin#0794
Swap contract address is not in any relation to `etomic` field.


[07-Mar-19 05:48 AM] siu#3920
ok


[07-Mar-19 05:48 AM] siu#3920
understood


[07-Mar-19 05:49 AM] artem.pikulin#0794
Please keep config same, restart MM then and run `curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ZRX\",\"urls\":[\"http://195.201.0.6:8555\"],\"swap_contract_address\":\"0x8500AFc0bc5214728082163326C2FF0C73f4a871\"}"`


[07-Mar-19 05:49 AM] siu#3920
ok


[07-Mar-19 05:49 AM] siu#3920
doing that


[07-Mar-19 05:49 AM] artem.pikulin#0794
I've just corrected the port, should be 8555.


[07-Mar-19 05:54 AM] siu#3920
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ZRX\",\"urls\":[\"http://195.201.0.6:8555\"],\"swap_contract_address\":\"0x8500AFc0bc5214728082163326C2FF0C73f4a871\"}"
{"address":"0x0bb040504daf112bfcf37548df477d7f7fe6f506","balance":0.0,"result":"success"}%                                                                 ```


[07-Mar-19 05:54 AM] siu#3920
now


[07-Mar-19 05:57 AM] artem.pikulin#0794
Works üôÇ Balance is correct, as I can see your address doesn't have any ZRX.


[07-Mar-19 05:57 AM] siu#3920
hehe, no


[07-Mar-19 05:57 AM] siu#3920
will add a bit now for testing


[07-Mar-19 05:57 AM] siu#3920
COQUI/ZRX swap


[07-Mar-19 06:05 AM] siu#3920
also withdraw of erc20 token


[07-Mar-19 06:38 AM] siu#3920
``` 2019-03-07 15:37:02 +0100 [swap uuid=caa2215bfece74ea2907f376069812d1bc0a52046e62382e3bcbc964dd8a0bbc] Waiting for Taker payment to be spentÔøΩ !send_maker_spends_taker_payment: eth:436] RPC error: Error { code: ServerError(-32010), message: "Insufficient funds. The account you tried to send transaction from does not have enough funds. Required 1500000000000000 and got: 0.", data: None }
    Waiting for Taker payment confirmationÔøΩ
    Waiting for Taker paymentÔøΩ Done.
    Sending Maker paymentÔøΩ
    Waiting for Taker feeÔøΩ Done.
    Waiting for Negotiation replyÔøΩ Done.
07 14:37:02, lp_ordermatch:455] Swap finished with error (-2007, "!send_maker_spends_taker_payment: eth:436] RPC error: Error { code: ServerError(-32010), message: \"Insufficient funds. The account you tried to send transaction from does not have enough funds. Required 1500000000000000 and got: 0.\", data: None }")```


[07-Mar-19 06:41 AM] siu#3920
https://etherscan.io/tx/0x077348446bca77e0228f3086dcb771469ade16c5c688fed53b93b630e814ff81


[07-Mar-19 06:41 AM] siu#3920
the transactions did happen on each network


[07-Mar-19 06:42 AM] siu#3920
https://explorer.coqui.cash/tx/5b3a31c6d3403589ff9c567c1547053e6f2d2cd6b933eeb13e67c7aa49fb0574


[07-Mar-19 06:46 AM] artem.pikulin#0794
What is the other node ETH address? It doesn't has enough ETH to execute the smart contract.


[07-Mar-19 06:47 AM] artem.pikulin#0794
MM2 should not allow to start the trade in such case, but it did.


[07-Mar-19 06:48 AM] siu#3920
```¬∑ 2019-03-07 15:45:50 +0100 [swap uuid=8563cec8372588c7bba3fdbca948d28827ad7d3c12fea575c903fe049bd04e8a] Waiting for Negotiation replyÔøΩ Error: timeout (180.0 > 180.0)
07 14:45:50, lp_ordermatch:455] Swap finished with error (-2000, "Error getting \'negotiation-reply@8563cec8372588c7bba3fdbca948d28827ad7d3c12fea575c903fe049bd04e8a\': timeout (180.0 > 180.0)")
set pubkey for 127.0.0.1 <- ebd538dcc0a059cc87f8713968cc3da3128f2e98cc993b2c8323a489cfeca37c, pairsock.-1
```


[07-Mar-19 06:48 AM] siu#3920
now i got this


[07-Mar-19 06:48 AM] siu#3920
the bob node needs to have some ZRX balance?


[07-Mar-19 06:49 AM] artem.pikulin#0794
https://etherscan.io/address/0xe2864c812ec9636f7706653e768b2e657e740a57


[07-Mar-19 06:49 AM] artem.pikulin#0794
0 ETH


[07-Mar-19 06:49 AM] artem.pikulin#0794
Both sides must have some ETH to trade ETH/ERC20.


[07-Mar-19 06:50 AM] artem.pikulin#0794
Because it's required to burn some gas.


[07-Mar-19 06:51 AM] artem.pikulin#0794
Please do not swap again until both sides have ETH, I will fix this tomorrow, zero ETH balance shouldn't be allowed to start the swap.


[07-Mar-19 06:53 AM] siu#3920
hmm, interesting


[07-Mar-19 06:55 AM] artem.pikulin#0794
Yeah, it's confusing a bit, you need ETH to buy ETH üôÇ


[07-Mar-19 06:55 AM] siu#3920
oh well


[07-Mar-19 07:11 AM] artem.pikulin#0794
@siu thx for testing! You found a bug üôÇ


[07-Mar-19 07:11 AM] siu#3920
awesome


[07-Mar-19 07:12 AM] siu#3920
wouldnt the eth side of the swap need to put the gas funds?


[07-Mar-19 07:17 AM] artem.pikulin#0794
We can try to do this, but there is no incentive for ETH side to do it.


[07-Mar-19 07:19 AM] artem.pikulin#0794
So if the ETH side is not nice and doesn't unlock the payment the other side will need ETH still.


[07-Mar-19 08:17 AM] siu#3920
got it


[12-Mar-19 06:32 AM] siu#3920
Hello @artem.pikulin any updates i should test?


[12-Mar-19 06:38 AM] artem.pikulin#0794
@siu Hi, not yet, I'm finishing big refactoring related to `swapstatus` RPC call.


[12-Mar-19 06:39 AM] siu#3920
ahh yes, that is important., ill be here üòÉ


[13-Mar-19 02:49 AM] jl777c#5810
@siu can you see this?


[13-Mar-19 03:00 AM] jorian#4555
he needs the mm2_0tester role


[13-Mar-19 03:32 AM] siu#3920
Hey, thanks!

{Reactions}
üëã 

[13-Mar-19 04:20 AM] artem.pikulin#0794 (pinned)
@MM2 community tester @SHossain Hi! I've pushed big update to MM2 branch, it has following changes:
1. Swap status now saved to local DB. It's much less chance now to lose the funds in case of crash and there should be enough info to refund the payment using saved data anyway.
2. Swap status is broadcasted to another peers for statistics gathering purpose.
3. Added `my_swap_status` and `stats_swap_status` RPC methods, first to get status of swap on current node, other to get swap status made by someone else. `stats_swap_status` method might be renamed later to have more clear name.
`my_swap_status` example: `curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_swap_status\",\"params\":{\"uuid\":\"swap_uuid\"}}"`
`stats_swap_status` example (notice that it's public method not requiring userpass): `curl --url "http://127.0.0.1:7783" --data "{\"method\":\"stats_swap_status\",\"params\":{\"uuid\":\"swap_uuid\"}}"`
The seednode is updated, it's `not backwards compatible` with previous mm2 so please make sure to update your node to perform the swaps.

{Reactions}
üöÄ (2) üôå 

[13-Mar-19 04:22 AM] artem.pikulin#0794
Please try to swap and then check that `DB/SWAPS/MY` has the `YOUR_SWAP_UUID.json` file, it should contain the data that you'll receive via `my_swap_status` call.


[13-Mar-19 04:29 AM] TonyL#3577
Hi @artem.pikulin ! Just FYI: @SHossain is not availiable till March 28th
Will test swap on updated version asap


[13-Mar-19 04:29 AM] artem.pikulin#0794
@TonyL thanks for the info!

{Reactions}
üëç 

[13-Mar-19 05:00 AM] TonyL#3577
@artem.pikulin I'm getting `curl: (52) Empty reply from server` now on ETOMIC/BEER order filling attempt and same response on any other calls until I restart it.

Sequence of actions and mm2 prints:
https://paste.ubuntu.com/p/5GntpJjpPX/


[13-Mar-19 05:01 AM] TonyL#3577
Built mm2 from this commit
```git log -1
commit 31b17b2d14a3e0af3cb3b7bdd2c5b1d6ab5e5cfb (HEAD -> mm2, origin/mm2, origin/HEAD)
Author: Artem Pikulin <ortgma@gmail.com>
Date:   Wed Mar 13 17:47:32 2019 +0700

    Remove stack trace log on RPC error.
```
by `cargo build -vv` command


[13-Mar-19 05:02 AM] artem.pikulin#0794
There is segfault in underlying C code, let me check the stacktrace, will get back to you in ~10 minutes.

{Reactions}
üëç 

[13-Mar-19 05:08 AM] artem.pikulin#0794
@TonyL It actually crashes on code path that wasn't changed üôÇ Could you please do `ls -la DB` in directory where MM2 binary is located and send the output here?


[13-Mar-19 05:10 AM] siu#3920
setting up nodes for testing


[13-Mar-19 05:11 AM] TonyL#3577
@artem.pikulin 
```~/marketmaker/SuperNET/target/debug/DB$ ls -la
total 32
drwxr-xr-x 6 tony tony 4096 Mar 12 18:09 .
drwxr-xr-x 9 tony tony 4096 Mar 13 18:37 ..
-rw-r--r-- 1 tony tony    0 Mar 12 18:09 deposits.RLQPcQQBxQzpHXBXFPkXUGefT6naiaS2My
drwxr-xr-x 2 tony tony 4096 Mar 12 18:52 GTC
-rw-r--r-- 1 tony tony    3 Mar 13 18:49 instantdex_RLQPcQQBxQzpHXBXFPkXUGefT6naiaS2My_append.json
-rw-r--r-- 1 tony tony    3 Mar 13 18:49 instantdex_RLQPcQQBxQzpHXBXFPkXUGefT6naiaS2My.json
drwxr-xr-x 2 tony tony 4096 Mar 12 18:49 PRICES
drwxr-xr-x 4 tony tony 4096 Mar 13 18:40 SWAPS
-rw-r--r-- 1 tony tony    0 Mar 12 18:09 .tmpmarker
drwxr-xr-x 2 tony tony 4096 Mar 12 18:09 UNSPENTS
```


[13-Mar-19 05:11 AM] artem.pikulin#0794
@TonyL thanks, and now `ls -la DB/GTC`


[13-Mar-19 05:12 AM] TonyL#3577
```~/marketmaker/SuperNET/target/debug/DB/GTC$ ls -la
total 16
drwxr-xr-x 2 tony tony 4096 Mar 12 18:52 .
drwxr-xr-x 6 tony tony 4096 Mar 12 18:09 ..
-rw-r--r-- 1 tony tony   32 Mar 13 18:49 checkval
-rw-r--r-- 1 root root  419 Mar 12 18:52 orders
-rw-r--r-- 1 tony tony    0 Mar 12 18:09 .tmpmarker
```


[13-Mar-19 05:12 AM] TonyL#3577
`-rw-r--r-- 1 root root  419 Mar 12 18:52 orders` root:root


[13-Mar-19 05:13 AM] artem.pikulin#0794
Looks like it caused by write permission denied to `DB/GTC/orders`


[13-Mar-19 05:13 AM] artem.pikulin#0794
Could you please try to switch the owner of whole DB dir to `tony:tony`?


[13-Mar-19 05:14 AM] TonyL#3577
Sure, let me try. It's very possible that I did something on some stage under `sudo`


[13-Mar-19 05:16 AM] artem.pikulin#0794
This is a bug anyway, MM2 does check that `GTC` folder is writeable, but doesn't check the `GTC/orders`, I'm going to add the check right now.

{Reactions}
üî• üëç 

[13-Mar-19 05:17 AM] TonyL#3577
Yes folder owner changing did the trick:
```{"result":"success","swaps":[[1396694542, 3060666496]],"netamounts":[],"pending":{"uuid":"637099d9a96a7ef7b8f6782d5ea342275ce64059e47a9563478adc6174c077c7","expiration":1552479534,"timeleft":119,"tradeid":4217300978,"requestid":0,"quoteid":0,"bob":"BEER","base":"BEER","basevalue":9.00037995,"alice":"ETOMIC","rel":"ETOMIC","relvalue":10.00020000,"desthash":"34e8ac87d034c614c55b0df9152e6c3367d955200d2f74a4cb0d1fae5bf64204","aliceid":1907723150},"uuid":"637099d9a96a7ef7b8f6782d5ea342275ce64059e47a9563478adc6174c077c7"}```


[13-Mar-19 05:18 AM] siu#3920
woot


[13-Mar-19 05:22 AM] TonyL#3577
@artem.pikulin Am I doing something wrong?:
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"156ewr\",\"method\":\"my_swap_status\",\"params\":{\"uuid\":\"637099d9a96a7ef7b8f6782d5ea342275ce64059e47a9563478adc6174c077c7\"}}"
{"error":"lp_swap:1276] EOF while parsing a value at line 1 column 0"}```


[13-Mar-19 05:24 AM] artem.pikulin#0794
@TonyL Did the swap start? If it didn't the swap file wouldn't be created but it's an error too, should display `swap data is not found`.


[13-Mar-19 05:25 AM] artem.pikulin#0794
Please check the `DB/SWAPS/MY` content, I guess there is no file `637099d9a96a7ef7b8f6782d5ea342275ce64059e47a9563478adc6174c077c7.json`.


[13-Mar-19 05:25 AM] TonyL#3577
@artem.pikulin Yes, have only `checkval` file in `DB/SWAPS/MY`


[13-Mar-19 05:25 AM] siu#3920
seems to be working here: https://pastebin.com/PCw8wCjk

{Embed}
https://pastebin.com/PCw8wCjk
{"type":"Taker","uuid":"d971d526e36810ee5b2f5e4888d8b18e094feea02c...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[13-Mar-19 05:26 AM] artem.pikulin#0794
@TonyL But did swap start? If it didn't this is expected behavior for now, but if it did we need to troubleshoot.


[13-Mar-19 05:26 AM] siu#3920

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/555366151530610693/d971d526e36810ee5b2f5e4888d8b18e094feea02c0f16e60d8bbf5809097163.json


[13-Mar-19 05:27 AM] artem.pikulin#0794
@siu How do you find the response structure? Is it clear what's going on? üôÇ


[13-Mar-19 05:27 AM] TonyL#3577
How to ensure if it started?

I'm executed:
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"156ewr\",\"method\":\"buy\",\"base\":\"BEER\",\"rel\":\"ETOMIC\",\"relvolume\":10,\"price\":1.11111114}"
{"result":"success","swaps":[[1396694542, 3060666496]],"netamounts":[],"pending":{"uuid":"637099d9a96a7ef7b8f6782d5ea342275ce64059e47a9563478adc6174c077c7","expiration":1552479534,"timeleft":119,"tradeid":4217300978,"requestid":0,"quoteid":0,"bob":"BEER","base":"BEER","basevalue":9.00037995,"alice":"ETOMIC","rel":"ETOMIC","relvalue":10.00020000,"desthash":"34e8ac87d034c614c55b0df9152e6c3367d955200d2f74a4cb0d1fae5bf64204","aliceid":1907723150},"uuid":"637099d9a96a7ef7b8f6782d5ea342275ce64059e47a9563478adc6174c077c7"}```


[13-Mar-19 05:28 AM] siu#3920
taker means bob?


[13-Mar-19 05:28 AM] siu#3920
maker means alice?


[13-Mar-19 05:28 AM] artem.pikulin#0794
Taker means `alice`, Maker means `bob`.


[13-Mar-19 05:28 AM] artem.pikulin#0794
Bob was always the marketmaker and we changed the definitions accordingly.


[13-Mar-19 05:29 AM] Audo#5667
Hello guys, we are currently working on the DEX content. Do you have a list of supported coins of the alpha release somewhere?

P.S. awesome job with the research doc about CC tech you guys made some time ago! üí™ really helpful


[13-Mar-19 05:29 AM] artem.pikulin#0794
@TonyL You should see the message like `Entering the taker_swap_loop BEER/ETOMIC`.

{Reactions}
üëå 

[13-Mar-19 05:32 AM] artem.pikulin#0794
Seems like the swap didn't start, I don't see any mentions of `637099d9a96a7ef7b8f6782d5ea342275ce64059e47a9563478adc6174c077c7` at seednode logs.


[13-Mar-19 05:32 AM] siu#3920
```"from":"","to":"","amount":0.0,"fee_details":null}}}```


[13-Mar-19 05:32 AM] TonyL#3577
Aha, seems so - I'm re-executed same call and this time get print ```13 12:32:03, lp_ordermatch:763] Entering the taker_swap_loop BEER/ETOMIC
```


[13-Mar-19 05:33 AM] siu#3920
amounts seem to be printing 0.0


[13-Mar-19 05:33 AM] artem.pikulin#0794
@siu will be fixed soon, thanks for report.

{Reactions}
üëç 

[13-Mar-19 05:34 AM] TonyL#3577
`57dc979d63ee7fda9fdd4454179e6febf68c554453f506fc7889a1d10cff72e8.json` have json now in `DB/SWAPS/MY`


[13-Mar-19 05:35 AM] artem.pikulin#0794
@TonyL Nice, as expected, does `my_swap_status` work with `57dc979d63ee7fda9fdd4454179e6febf68c554453f506fc7889a1d10cff72e8`?


[13-Mar-19 05:36 AM] TonyL#3577
@artem.pikulin Yep, here is a output: https://paste.ubuntu.com/p/FJ7vbjNRk5/


[13-Mar-19 05:36 AM] artem.pikulin#0794
Perfect, is response structure clear to you? üôÇ


[13-Mar-19 05:37 AM] TonyL#3577
Is there presists only events which already happened or not-happened events as well?


[13-Mar-19 05:39 AM] artem.pikulin#0794
It contains only events that already happened, you won't see `TakerFeeSent` if it's not sent yet or failed to send (if it's failed to send there will be `TakerFeeSendFailed` instead.


[13-Mar-19 05:40 AM] artem.pikulin#0794
Possible event variants are here: https://github.com/artemii235/SuperNET/blob/mm2/mm2src/lp_swap.rs#L843

{Embed}
https://github.com/artemii235/SuperNET/blob/mm2/mm2src/lp_swap.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[13-Mar-19 05:40 AM] siu#3920
so there is a new rpc call?


[13-Mar-19 05:40 AM] siu#3920
my_swap_status?


[13-Mar-19 05:41 AM] artem.pikulin#0794
Yes, old `swapstatus` is deprecated, the response structure is completely different so I prefer to give it another name.


[13-Mar-19 05:41 AM] artem.pikulin#0794
Also there is new `stats_swap_status` RPC method to get swap info broadcasted from another nodes, it has different meaning and different response structure from `my_swap_status`.


[13-Mar-19 05:42 AM] TonyL#3577
```            "maker_amount": 1009339521,
            "maker_coin": "BEER",
            "maker_payment_confirmations": 1,
            "maker_payment_wait": 1552482923,
            "my_persistent_pub": "028eb31ee3d1025b0eaef8bf4f9af4910ddec91767f1c7ec0fd00b87966473e8ff",
            "started_at": 1552480323,
            "taker_amount": 1000019000,
            "taker_coin": "ETOMIC",
            "taker_payment_confirmations": 1,
            "taker_payment_lock": 1552488123,
```
Are `maker_amount` `taker_amount` in satoshis and `"started_at": 1552480323,` is UNIX timestamp?


[13-Mar-19 05:43 AM] artem.pikulin#0794
@TonyL yes, all correct.

{Reactions}
üëç 

[13-Mar-19 05:44 AM] TonyL#3577
Wanted to complain that it's unclear a little because of same decimals amount - but I wonder if I guessed from 1st attempt it should be clear üòÉ


[13-Mar-19 05:44 AM] siu#3920
so networks stats is now available for mm2?


[13-Mar-19 05:44 AM] siu#3920
using stats_swap_status?


[13-Mar-19 05:45 AM] artem.pikulin#0794
@siu yes, actually we just need to create a site for it or adapt dexstats.info.


[13-Mar-19 05:46 AM] siu#3920
i wonder how i can migrate dexcharts.com to it.


[13-Mar-19 05:46 AM] siu#3920
to get price charts


[13-Mar-19 05:46 AM] siu#3920
and price tickers.


[13-Mar-19 05:48 AM] TonyL#3577
Hi @Audo not sure about such list - I'm a new guy in this channel :)
https://docs.google.com/spreadsheets/d/1ezXr4DBctFy6o4t-C_jCa4BpKBfXN4nCqxcCkx6hl9g/edit#gid=232944181 found this one in pinned messages

{Embed}
https://docs.google.com/spreadsheets/d/1ezXr4DBctFy6o4t-C_jCa4BpKBfXN4nCqxcCkx6hl9g/edit
250Coins4BarterDEX
Coins

 ,Name,Source,Tester,Status,Completed,Symbol,Name,rpcport,pubtype,taddr,p2shtype,wiftype,txfee,active,Json OP,Notes,Json Output:
1,Bitcoin,n41r0j,Completed,24/07/2017,BTC,bitcoin,8332,0,5,128,0,{\"coin\":\"BTC\", \"name\": \"bitcoin\", \"rpcport\":8332,\"pubtype\":0, \...
https://images-ext-1.discordapp.net/external/gE5U8cGZYV3Hke78GUg1EeeGoZNjLqAYmGvUzY7ROsk/https/lh4.googleusercontent.com/FucfLWRICP1gq8256cfoCniulQO9tMNAgqLcXx2VoSJPn7H9OLMFADdfsTsJbuoszACECQ%3Dw1200-h630-p


[13-Mar-19 05:50 AM] jorian#4555
i think https://github.com/jl777/coins has an up to date list

{Embed}
https://github.com/jl777/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[13-Mar-19 05:50 AM] siu#3920
@Audo you can use this ^


[13-Mar-19 05:53 AM] artem.pikulin#0794
Please note that these coins `should` work, but `must` be tested again with MM2 as there are a lot of changes.


[13-Mar-19 05:53 AM] siu#3920
@artem.pikulin i need to specify base and rel coins for `stats_swap_status`?


[13-Mar-19 05:53 AM] jl777c#5810
maybe we can ask each coin community to help test their coins? when we can make the mm2 more available


[13-Mar-19 05:53 AM] artem.pikulin#0794
@siu No, please just follow the example: https://discordapp.com/channels/412898016371015680/476025090627207168/555349473547780099


[13-Mar-19 05:54 AM] artem.pikulin#0794
`curl --url "http://127.0.0.1:7783" --data "{\"method\":\"stats_swap_status\",\"params\":{\"uuid\":\"swap_uuid\"}}"`


[13-Mar-19 05:54 AM] siu#3920
hmm, so i need a uuid, it seems like a call for a particular swap


[13-Mar-19 05:54 AM] siu#3920
we need a global one üò¨


[13-Mar-19 05:56 AM] artem.pikulin#0794
@jl777c `maybe we can ask each coin community to help test their coins? when we can make the mm2 more available`, good idea! We need to assign a responsible person then who will contact communities, help them with testing and bug reporting.


[13-Mar-19 05:56 AM] artem.pikulin#0794
@siu `we need a global one` - right, will add something like `recent_swaps_stats`.


[13-Mar-19 05:57 AM] siu#3920
yes, maybe get the command to call a threshold that can be accumulated in a txt file


[13-Mar-19 05:58 AM] siu#3920
afaik, that is how it is done in mm1 (maybe @jl777c can help on explaining how it works)


[13-Mar-19 05:58 AM] gcharang#6833
Pinned a message.


[13-Mar-19 05:59 AM] jl777c#5810
if its in a DB, then a script to extract the txt file is probably the way to do it


[13-Mar-19 06:02 AM] jl777c#5810
just make it a requirement of a community signoff that mm2 works with their coins (including txid proof) before it is displayed in the gui

{Reactions}
üíØ 

[13-Mar-19 06:05 AM] artem.pikulin#0794
@jl777c How the `community signoff` should look? Do you mean that we should do this automatically somehow?


[13-Mar-19 06:05 AM] siu#3920
but in DB there is data for global swaps or just for swaps done with that passphrase?


[13-Mar-19 06:05 AM] jl777c#5810
no, just have a github where communities can submit pull request with their proof of swap info


[13-Mar-19 06:06 AM] jl777c#5810
then we just need one person to go through it to add it to gui


[13-Mar-19 06:06 AM] artem.pikulin#0794
@siu MM2 stores both types of swaps and stores them in different locations. `stats_swap_status` is method returning the swaps data received from `other_nodes`.


[13-Mar-19 06:06 AM] jl777c#5810
if a community doesnt care enough to do some swaps, then why should we add it to gui


[13-Mar-19 06:06 AM] artem.pikulin#0794
@siu https://discordapp.com/channels/412898016371015680/476025090627207168/555369949129080832


[13-Mar-19 06:07 AM] jl777c#5810
i guess could be my coins repo where there is a "mm2":1 field that would be needed and such a field in a pull request along with mm2proofs

{Reactions}
üëå Komodo 

[13-Mar-19 06:07 AM] jl777c#5810
without it, it wouldnt get merged in


[13-Mar-19 06:07 AM] siu#3920
that shoul work, yes


[13-Mar-19 06:07 AM] artem.pikulin#0794
@siu `my_swap_status` will return only `my` swaps that was done on current node.


[13-Mar-19 06:08 AM] siu#3920
ok....I'll look into it, thanks.


[13-Mar-19 06:08 AM] jl777c#5810
so we just need a guide on how to generate the proof of mm2 swap and that can all go into the coins repo too


[13-Mar-19 06:08 AM] artem.pikulin#0794
@jl777c `i guess could be my coins repo where there is a "mm2":1 field that would be needed and such a field in a pull request along with mm2proofs`, perfect! We can deny coin enable in MM2 if `mm2` field is missing also.


[13-Mar-19 06:09 AM] artem.pikulin#0794
It's fast to do, going to add this tomorrow.


[13-Mar-19 06:09 AM] siu#3920
they would just need to do the swap and upload the .json swap file


[13-Mar-19 06:09 AM] jl777c#5810
but if you disable it then how will they get the proof of mm2?\


[13-Mar-19 06:10 AM] jl777c#5810
i guess they would just need to add "mm2":1 to the json file, which they need to do to make the pull request anyway


[13-Mar-19 06:11 AM] artem.pikulin#0794
The tester can add `"mm2":1` manually if he knows what's he's doing, so should be no issue.


[13-Mar-19 06:11 AM] jl777c#5810
yes, so this is a mostly automated process with work shared by all coin communities


[13-Mar-19 06:11 AM] artem.pikulin#0794
It's a danger zone that requires additional actions, looks fine.


[13-Mar-19 06:28 AM] siu#3920
https://pastebin.com/UrUvfeL3

{Embed}
https://pastebin.com/UrUvfeL3
Possible Spam Detected
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[13-Mar-19 06:28 AM] siu#3920
@artem.pikulin , this is the output of stats_swap_status, seems like it just outputs DB/SWAPS/MY/ files


[13-Mar-19 06:30 AM] siu#3920
I am thinking on somethin more like this: http://api1.barterdexapi.net/viewall.php


[13-Mar-19 06:31 AM] siu#3920
for these stats, back in mm1 you need to run mm using `./run` instead of `./client`


[13-Mar-19 06:31 AM] siu#3920
it was a mode for global stats information calls.


[13-Mar-19 06:45 AM] artem.pikulin#0794
@siu http://api1.barterdexapi.net/viewall.php can be easily reached by processing the MM2 swaps output, there's no `run` and `client` differentiation anymore, but maybe only seednodes have the info about all swaps on netid, need to check it.


[13-Mar-19 06:46 AM] siu#3920
the difference run had was that it had a public API related to stats


[13-Mar-19 06:47 AM] siu#3920
maybe take infor from netid nodes?


[13-Mar-19 06:47 AM] artem.pikulin#0794
It can be done by setting `rpc_ip` to public IP address.


[13-Mar-19 06:47 AM] siu#3920
ok


[13-Mar-19 10:57 AM] SHossain#0007
@artem.pikulin excited to test once I'm back. nice work üòÉ


[13-Mar-19 10:58 AM] SHossain#0007
@CHMEX probably this new update is interesting to you for the APIs (if you haven't seen already)


[13-Mar-19 10:20 PM] artem.pikulin#0794
@TonyL Hi, I've just pushed the `DB/GTC/orders` permission check, could you test it please when you have time?


[13-Mar-19 10:22 PM] artem.pikulin#0794
It should display the error `Permission denied (os error 13) when trying to open the file DB/GTC/orders in write mode` if file isn't writable.


[13-Mar-19 10:50 PM] TonyL#3577
@artem.pikulin Sure, I'm on the way to airport - will able to check at evening

{Reactions}
üëç 

[14-Mar-19 01:16 AM] artem.pikulin#0794
@MM2 community tester @TonyL the latest MM2 commit requires the "mm2" param set either in coins config (e.g. this PR: https://github.com/jl777/coins/pull/257/files), or in `enable/electrum` request: `curl --url "http://127.0.0.1:7783" --data "{\"queueid\":0,\"needjson\":1,\"method\":\"electrum\",\"coin\":\"ETOMIC\",\"urls\":[\"electrum1.cipig.net:10025\",\"electrum2.cipig.net:10025\",\"electrum3.cipig.net:10025\"],\"userpass\":\"$userpass\",\"mm2\":1}"`

{Embed}
https://github.com/jl777/coins/pull/257/files),
Add "mm2" to few coins that were tested with MM2. by artemii235 ¬∑...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[14-Mar-19 01:18 AM] artem.pikulin#0794
If you test some coin and it's confirmed that it's working please make a PR to `coins` repo according to this guide: https://github.com/jl777/coins#0-the-coin-must-be-tested-with-barterdex-atomic-swaps

{Embed}
https://github.com/jl777/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[14-Mar-19 01:20 AM] artem.pikulin#0794
It's now safe to trade assets with real market cost, but please be careful still, swap small amounts that you can consider losing if something goes wrong.

{Reactions}
üëå 

[14-Mar-19 01:27 AM] jl777c#5810
lets add a proof of mm2 as a requirement for adding "mm2":1 (other than coins we know for sure are working), so that way we get all the initial swap txids in the repo. make a new dir to have the coin specific proof

{Reactions}
üëç 

[14-Mar-19 02:41 AM] artem.pikulin#0794
@jl777c Done: https://github.com/jl777/coins/pull/258, also added ETH info, please let me know if I need to add something else.


[14-Mar-19 05:55 AM] artem.pikulin#0794
@siu https://discordapp.com/channels/412898016371015680/476025090627207168/553225058835890176, MM2 now checks that it has enough ETH balance to spend other side payment on ETH/ERC20 order attempt. Please test it when you have time. As I can see the address you used doesn't have ETH still: https://etherscan.io/address/0xe2864c812ec9636f7706653e768b2e657e740a57

{Embed}
https://discordapp.com/channels/412898016371015680/476025090627207168/553225058835890176,
Discord - Free voice and text chat for gamers
Step up your game with a modern voice & text chat app. Crystal clear voice, multiple server and channel support, mobile apps, and more. Get your free server now!
https://images-ext-2.discordapp.net/external/HfR2VUvbtgDrYRhtJYtbVRG8ptOUXl0szXSCAOAiC_8/https/discordapp.com/assets/ee7c382d9257652a88c8f7b7f22a994d.png


[14-Mar-19 08:21 AM] TonyL#3577
@artem.pikulin Getting print now:
``` 14 15:20:23, mm2:188] BarterDEX MarketMaker UNKNOWN
RPCport.0 remoteport.-1, nanoports 47762 47772 47782
14 15:20:23, lp_native_dex:1589] showwif.0 version: UNKNOWN 2455984605
14 15:20:23, mm2:226] mm2:358] mm2:127] lp_native_dex:1633] lp_native_dex:1486] lp_native_dex:1469] Permission denied (os error 13) when trying to open the file DB/GTC/orders in write mode
```


[14-Mar-19 08:41 AM] artem.pikulin#0794
@TonyL Nice, as expected, thanks!

{Reactions}
üëç 

[19-Mar-19 12:44 AM] artem.pikulin#0794
@everyone I have a UX related question, prerequisite:
1. Someone posts the BEER/ETOMIC order with price 1. E.g. `{"method": "setprice","base": BEER,"rel": ETOMIC,"price": 1}`.
2. Then someone another makes buy request with higher price (2): `{"method": "buy","base": BEER,"rel": ETOMIC,"relvolume": 0.1,"price": 2}`
3. Current MM2 will negotiate a trade `0,05 BEER/0.1 ETOMIC` using the price from `buy` order.

Should we keep things like this? In my personal experience on centralized exchanges the 1:1 trade would happen (maker price). Even more: I could place the order with higher price and it would close all existing orders with lower price (if I had enough volume for it) keeping the change on my account. According to our goal `make similar UX to CEX` we might want to change the current behaviour. Should we? Please share your thoughts.


[19-Mar-19 12:52 AM] Mylo#8306
Yes I think so, but is it feature creep + i'm not a trader, but your suggestion is what i would expect to happen - otherwise "trades don't work" imo 2 satoshis opinion.

Conversely, what happens, would happen if
1. Someon posts a buy order `{"method": "buy","base": BEER,"rel": ETOMIC,"relvolume": 0.1,"price": 2}`
2. Someone else puts a sell order `{"method": "setprice","base": BEER,"rel": ETOMIC,"price": 1}`
Because they want to liquidate, what does MM1 do?

Because if i'm person in (2) i would want to liquidate because i have my price i'm happy with because i seek another opportunity.


[19-Mar-19 01:20 AM] artem.pikulin#0794
MM1 adjusted the price by itself taking the fees and some random multipliers but would use the more profitable price for maker. The MM2 follows same logic and works as described above.


[19-Mar-19 02:56 AM] artem.pikulin#0794
I think that CEX approach is correct, let's assume that there are 3 existing makers buy orders with `1.5, 1.4, 1.3` prices. And taker is coming posting `1:1` order. `1.5` price  is higher so it should have the `advantage` in order matching and be matched first. Seems fair to me.

{Reactions}
üëå 

[19-Mar-19 03:01 AM] artem.pikulin#0794
Also it might be `default` behavior that can be changed by some parameters in RPC call, e.g. setting `margin` or something else.


[19-Mar-19 03:09 AM] siu#3920
Marketmaker worked as a auction. In centralized exchange, the lowest priced asks is chosen first always


[19-Mar-19 03:10 AM] siu#3920
I had a couple of people complain about mm1 working as a auctiom btw, since it did some small variations in price that confused some users


[19-Mar-19 03:20 AM] artem.pikulin#0794
So I expect that we move in right direction. The upcoming MM2 commit will remove automatic price variations, so 1:1 order will result in real 1:1 trade.


[19-Mar-19 03:52 AM] artem.pikulin#0794
@MM2 community tester @TonyL Please update your MM2 to latest version from `mm2` branch. It contains backwards incompatible changes, the 9999 seednode is updated already. MM2 won't vary price anymore, e.g. if you set `1` price it will trade `exactly` 1:1 amounts. Also the taker side will match best available price. As example there's active `1:1` BEER/ETOMIC order. Even if you post `2:1` buy order the actual trade will happen at `1:1` rate.

{Reactions}
üëç (3) 

[19-Mar-19 04:01 AM] siu#3920
Price variations might happen if for example the lowest ask volume is lower than the bid


[19-Mar-19 04:02 AM] artem.pikulin#0794
Price variations happened `every time` because MM recalculated price depending on fees.


[19-Mar-19 04:02 AM] artem.pikulin#0794
And there was `1.001` or `1.01` hardcoded multiplier also.


[19-Mar-19 04:02 AM] siu#3920
For example if a ask is 10 coins at 1.0 and  bid is of 20 coins at 1.0 then 10 coins are bought and a bid for the remaining coins is listed for 1.0


[19-Mar-19 04:04 AM] siu#3920
If the buy is executed as a "market" order, then an automatic order is executed until all bid volume selected is executed, no matter the price


[19-Mar-19 04:05 AM] siu#3920
`./buy` should have these variations


[19-Mar-19 04:05 AM] siu#3920
First example is known as a limit order


[19-Mar-19 04:05 AM] siu#3920
Second one is a market order


[19-Mar-19 04:05 AM] artem.pikulin#0794
Yes, this is planned to achieve, but let's first be sure that MM2 doesn't vary the price by it's own hidden logic.


[19-Mar-19 04:11 AM] siu#3920
Great!


[19-Mar-19 04:25 AM] siu#3920
Users want to do the calculations based on bid volume and price. Final outcome should be exactly `bid volume - (exchange + tx fees)`


[19-Mar-19 06:02 AM] ca333#0333
*Also the taker side will match best available price* - excellent - thanks for the enhancement @artem.pikulin

{Reactions}
üíØ (2) 

[19-Mar-19 07:24 AM] artem.pikulin#0794
`Users want to do the calculations based on bid volume and price. Final outcome should be exactly bid volume - (exchange + tx fees)` @siu please test current MM2, it should work `exactly` like you described.


[19-Mar-19 07:25 AM] artem.pikulin#0794
There's 1:1 BEER/ETOMIC order for convenience.


[19-Mar-19 08:09 AM] TonyL#3577
@artem.pikulin Worked as expected on my side - placed order for 10 coins 1:2 and it used 1:1 order

{Reactions}
üëå 

[19-Mar-19 08:20 AM] TonyL#3577
Balances changed correctly I wonder.
From: ```"balance": 100.7337867,
"coin": "BEER",
  
"balance":189.85800938,
"coin":"ETOMIC"```

To: ```"balance":  110.7337767,
"coin": "BEER",
  
"balance": 179.84511937,
"coin":"ETOMIC"```


[19-Mar-19 08:33 AM] artem.pikulin#0794
@TonyL Thanks!  It worked as expected.

{Reactions}
üî• 

[19-Mar-19 08:36 AM] mobipoi#5774
Nice work @artem.pikulin

{Reactions}
Komodo 

[19-Mar-19 09:45 PM] Mylo#8306
Brilliant


[20-Mar-19 10:13 AM] cipi#4502
i have a question regarding the rust setup... it says i should do `curl https://sh.rustup.rs -sSf | sh` to install it... but what about root-privileges? I don't want to install it as user, because other users will not be able to use it then... is there a deb-Package somewhere to download?


[20-Mar-19 10:24 AM] cipi#4502
found this: https://github.com/rust-lang/rustup.rs/issues/1085
but does not look like a straight forward way... think i will give it a try anyway

{Embed}
https://github.com/rust-lang/rustup.rs/issues/1085
Installing rustup for all linux users ¬∑ Issue #1085 ¬∑ rust-lang/...
What's the recommended way to install rustup for all users on a linux machine? When I run curl https://sh.rustup.rs -sSf | sh -s in a root shell, it installs to /root/.cargo. When I move the .c...
https://images-ext-1.discordapp.net/external/mKgjg1Dhy6gqAoZk6SV1m60x7mTF_jJ215u0ar2ERhE/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/535593


[20-Mar-19 02:19 PM] cipi#4502
@artem.pikulin i installed mm2 on home node and on one server... seems to work on home node, i can interact with the coins, but on the server mm2 dies on startup
last i see in log is:
```_LPaddpeer 195.201.116.176 -> numpeers.2 mypubsock.0 other.(0)
20 21:18:00, rpc:350] >>>>>>>>>> DEX stats 127.0.0.1:7783 DEX stats API enabled at unixtime.1553116680 <<<<<<<<<
Signal caught! sig 11```


[20-Mar-19 02:22 PM] cipi#4502
ah, sig 11 is a segmenation fault `SIGSEGV      11       Core    Invalid memory reference`


[20-Mar-19 02:26 PM] cipi#4502
happens in dht
```Thread 33 "dht" received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7ffff1162700 (LWP 8495)]
0x0000555555d6e427 in libtorrent::dht::traversal_algorithm::add_entry(libtorrent::digest32<160ul> const&, boost::asio::ip::basic_endpoint<boost::asio::ip::udp> const&, libtorrent::flags::bitfield_flag<unsigned char, libtorrent::dht::observer_flags_tag, void>) ()```


[20-Mar-19 02:27 PM] cipi#4502
backtrace

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/558038935985717274/backtrace.txt


[20-Mar-19 09:44 PM] artem.pikulin#0794
@cipi Hi, could you please more info about your environment?
1. OS version.
2. gcc version.
3. Boost version `apt list --installed | grep boost`


[20-Mar-19 09:47 PM] cipi#4502
sure, i tried with both gcc 6 and gcc 8 and also with libboost 1.62 and 1.67, because i thought it could be that... but it makes no difference
OS is debian 9... also tried a different server, but also debian 9


[20-Mar-19 09:48 PM] artem.pikulin#0794
Could you please try the prebuilt binary on the server? http://195.201.0.6/mm2/mm2-f2f353b-Linux


[20-Mar-19 09:48 PM] cipi#4502
the apt list returns a pretty long list, do you really want to see it? :-)
i downgraded libbost so now it is `1.62.0.1`


[20-Mar-19 09:48 PM] cipi#4502
sure, will try that


[20-Mar-19 09:49 PM] artem.pikulin#0794
`apt list --installed | grep boost` will print boost only


[20-Mar-19 09:49 PM] cipi#4502
yes, but still a long list... need to put that in a file, discord does not let me post such long messages


[20-Mar-19 09:50 PM] artem.pikulin#0794
That's fine, please share all the output.


[20-Mar-19 09:51 PM] cipi#4502

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/558150588345483276/libboost.txt


[20-Mar-19 09:51 PM] artem.pikulin#0794
Is there a reason to run Rust and MM2 under different users on server? MM2 is not multi-user currently, it won't start possibly due to permission issues with DB dir.


[20-Mar-19 09:51 PM] artem.pikulin#0794
You should start it from different dir.


[20-Mar-19 09:52 PM] cipi#4502
it does not run as different user, it is just installed under /opt/rust, thats all
and that works fine on my home node


[20-Mar-19 09:53 PM] cipi#4502
the DB dir is ~/SuperNET/etomic_build/client/DB


[20-Mar-19 09:56 PM] cipi#4502
the binary does not work, it needs libboost_system.so.1.58.0... i don't have such an old lib, debian stable contains 1.62


[20-Mar-19 09:57 PM] cipi#4502
i should maybe get me a fresh new VM and try to build there, see if it makes a difference... but strange is that it works at home


[20-Mar-19 09:58 PM] artem.pikulin#0794
Do you have Debian 9 at home too?


[20-Mar-19 10:00 PM] cipi#4502
yes, i have it on all nodes üòÉ


[20-Mar-19 10:01 PM] cipi#4502
but some package versions may differ... that is why i downgraded libboost to 1.62 on the server, so that it matches the version at home


[20-Mar-19 10:08 PM] cipi#4502
i will try it on a fresh new VM, maybe it works


[20-Mar-19 10:10 PM] artem.pikulin#0794
I've found similar issue in libtorrent repo: https://github.com/arvidn/libtorrent/issues/3261. Seems like it's all about compiler `-std` flag and `C++` version. I think we can solve it by compiler flags, but need to have a bit research on it.


[20-Mar-19 10:11 PM] artem.pikulin#0794
@cipi is it possible to give the SSH access to 1 of servers with issue?


[20-Mar-19 10:12 PM] artem.pikulin#0794
It'll help me to solve the issue faster, I need to code for it üôÇ


[20-Mar-19 10:13 PM] cipi#4502
sure, just send me your ssh key... but not sure in which state the VM is now, i tried different things, maybe it does not even build any more ;-)
but give me your key and i will give you ssh access


[20-Mar-19 10:14 PM] cipi#4502
from the issue: `On a system where you use pre-built libraries, you should build all software with the same compiler and compiler switches as those libraries were built with.`... yes, that is also what i thought...


[20-Mar-19 10:14 PM] artem.pikulin#0794
It's fine, please setup the Debian 9 from scratch and try to build on fresh system.


[20-Mar-19 10:14 PM] cipi#4502
already at it


[20-Mar-19 10:46 PM] cipi#4502
OK, it works on the new VM
`gcc version 6.3.0` and libboost 1.62.0.1


[20-Mar-19 10:47 PM] cipi#4502
so it looks like i messed up the 2 servers a bit...


[22-Mar-19 01:43 AM] Mylo#8306
i will have a few nodes installed this weekend for testing as well


[22-Mar-19 04:59 AM] ca333#0333 (pinned)
**New testchains:**

https://rick.kmd.dev/
https://morty.kmd.dev/

We are setting up orderbooks and more infrastructure over the weekend.

{Embed}
https://rick.kmd.dev/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}

{Embed}
https://morty.kmd.dev/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}

{Reactions}
üî• (4) 

[22-Mar-19 04:59 AM] ca333#0333
Pinned a message.


[23-Mar-19 07:30 PM] CrisF#3405
Hi, Where can I find the params to mine some `RICK` & `MORTY`?


[23-Mar-19 11:44 PM] Mylo#8306
`src/assetchains.old` @CrisF


[23-Mar-19 11:45 PM] CrisF#3405
Thanks, Mylo!

{Reactions}
üëç 

[24-Mar-19 01:03 AM] CrisF#3405
Hi @Mylo, I wasn't able to to find them there. (jl777 branch)


[24-Mar-19 01:18 AM] Mylo#8306
@CrisF sry, yes it's in a very specific place.... jl777 repo dev branch https://github.com/jl777/komodo/blob/dev/src/assetchains.old

{Embed}
https://github.com/jl777/komodo/blob/dev/src/assetchains.old
jl777/komodo
Komodo. Contribute to jl777/komodo development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[24-Mar-19 01:19 AM] CrisF#3405
Ahh, thank Mylo üôè

{Reactions}
üëç 

[25-Mar-19 06:06 AM] artem.pikulin#0794
@Monetashi Hi again, welcome to MM2 channel! Please check pinned messages, these contain instructions how to build and test MM2 in CLI mode. If you have any questions please let me know.

{Reactions}
üëå 

[25-Mar-19 06:08 AM] jorian#4555
@artem.pikulin do you have a document or overview of things that need testing / have been tested?


[25-Mar-19 06:11 AM] artem.pikulin#0794
@jorian There's no such document, usually when new feature is implemented I'm pinging `MM2 community tester` and `TonyL` asking to test it.


[25-Mar-19 06:12 AM] artem.pikulin#0794
If bugs are found we create a corresponding Github issue.


[25-Mar-19 06:14 AM] artem.pikulin#0794
If you're looking for something to test please try to swap different coins with MM2. It should be safe now, however it's recommended to swap low amounts that you might accept to lose if something goes wrong.


[25-Mar-19 06:15 AM] jorian#4555
do you get feedback of what has been tested?


[25-Mar-19 06:16 AM] artem.pikulin#0794
https://github.com/jl777/coins/blob/master/coins - there're `many` coins that were supported previously, but not tested with MM2. If you use some coin but it doesn't have `mm2:1` in config still please test it and create a PR to coins repo according to the guide: https://github.com/jl777/coins#0-the-coin-must-be-tested-with-barterdex-atomic-swaps

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Embed}
https://github.com/jl777/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[25-Mar-19 06:18 AM] artem.pikulin#0794
You might just a create a PR as feedback, but if you find a bug please create a Github issue. It might be also useful to coop with `cipi` to not test one coin twice.


[25-Mar-19 06:21 AM] artem.pikulin#0794
`do you get feedback of what has been tested?` yes, feedback is posted here if everything works as expected.


[25-Mar-19 06:23 AM] artem.pikulin#0794
And also we have auto-tests that are running on Azure Pipelines on `every` MM2 commit. The tests include DHT data exchange, RPC calls and even test coins swaps.


[25-Mar-19 06:25 AM] artem.pikulin#0794
So when new commit is pushed we're already sure that common user scenario like `start node/enable coin/buy and swap` is already working on all supported OSes.


[25-Mar-19 06:31 AM] jorian#4555
that is great


[25-Mar-19 11:24 AM] siu#3920
@everyone  There are now two faucets active in faucetCC for RICK and MORTY chains. Please, test and let me know if you can get your coins when needed, thanks.

{Reactions}
üëå (4) 7361_PepeWiZz (2) 

[29-Mar-19 03:10 AM] smkhound#7640
confirmed faucetget on both, 0.1 returned. RICK worked first try, MORTY needed a few attempts.


[31-Mar-19 10:59 AM] jorian#4555
any progress here? bit silent..


[31-Mar-19 11:09 AM] cipi#4502
https://github.com/artemii235/SuperNET/issues
atm, i am hanging here: https://github.com/artemii235/SuperNET/issues/355#issuecomment-478343312

{Embed}
https://github.com/artemii235/SuperNET/issues
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003

{Embed}
https://github.com/artemii235/SuperNET/issues/355
price updates don't propagate ¬∑ Issue #355 ¬∑ artemii235/SuperNET
It looks like price updates done with setprice don't propagate. Here are 2 examples: GAME/KMD 0.10465959 {"result":"success"} GAME/KMD 0.10281689 {"result":"s...
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761

{Reactions}
üëç 

[31-Mar-19 11:23 AM] jorian#4555
seems more organized


[01-Apr-19 03:29 AM] SHossain#0007
Hello lovely people. How is it going? What are we testing now?


[01-Apr-19 03:30 AM] smkhound#7640
I just built on Ubuntu 18.04, about to test some trades üòÉ

{Reactions}
üëçüèΩ 

[01-Apr-19 03:31 AM] SHossain#0007
i just did one and it went throught. used `mm2:1` param on coins file


[01-Apr-19 03:34 AM] smkhound#7640
have you go some spare üçï ?


[01-Apr-19 03:35 AM] SHossain#0007
sure


[01-Apr-19 03:35 AM] SHossain#0007
send me your address


[01-Apr-19 03:35 AM] smkhound#7640
RJPismQ3n9hdBaawgiob3B2U7ZU3Uxsvcr


[01-Apr-19 03:35 AM] smkhound#7640
thanks


[01-Apr-19 03:35 AM] smkhound#7640
faucet has been a bit hit and miss last few days


[01-Apr-19 03:38 AM] SHossain#0007
99d961d9b6b0deb04169e87360a2165949d208061c9776b7d4901fdccf9d01b5


[01-Apr-19 03:38 AM] SHossain#0007
sent


[01-Apr-19 03:38 AM] SHossain#0007
anyone wants RICK & MORTY, please also let me know


[01-Apr-19 03:39 AM] SHossain#0007
i'll get these 2 coins tested up today


[01-Apr-19 03:40 AM] smkhound#7640
thanks, I mined some earlier so I'm ok. will they end up on testnet?


[01-Apr-19 03:41 AM] SHossain#0007
they are being notarized by mainnet


[01-Apr-19 04:13 AM] smkhound#7640
not able to submit two orders (or get balance) at same time on same node while order pending?


[01-Apr-19 04:13 AM] smkhound#7640
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_balance\",\"coin\":\"BEER\"}" | jq
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (7) Failed to connect to 127.0.0.1 port 7783: Connection refused```


[01-Apr-19 04:14 AM] cipi#4502
looks more like mm2 died...  `127.0.0.1 port 7783: Connection refused`


[01-Apr-19 04:15 AM] smkhound#7640
yep... `packet_write_wait: Connection to 116.203.120.91 port 22: Broken pipe` in other terminal


[01-Apr-19 04:17 AM] cipi#4502
if you start mm2 in the foreground and the ssh connection dies, mm2 will stop


[01-Apr-19 04:18 AM] cipi#4502
`stdbuf -oL nohup ../../target/debug/mm2 "{\"netid\":9999,\"gui\":\"nogui\",\"client\":1, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\"}" > /tmp/mm.log &`
and then `tail -f /tmp/mm.log` to watch the console output

{Reactions}
üëå 

[01-Apr-19 04:23 AM] smkhound#7640
I used `stdbuf -oL ./mm2 "{\"gui\":\"MM2GUI\",\"netid\":9999, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"mmTestPassFalseFlag\", \"rpc_password\":\"mmTestPassFakeNews\"}" &`


[01-Apr-19 04:23 AM] smkhound#7640
will add nohup


[01-Apr-19 04:25 AM] cipi#4502
it needs to be nohup, nohup means something like "no hang up", so the process started (mm2) don't die with your session


[01-Apr-19 05:07 AM] smkhound#7640
I used it a while back for capturing debug I think for scale testing. just need to remember to delete output every now and then


[01-Apr-19 05:07 AM] smkhound#7640
```01 11:38:50, lp_ordermatch:758] Entering the taker_swap_loop BEER/PIZZA
01 11:39:11, lp_swap:1075] Received 'negotiation@9dd797bc61043b34d576c1ddf008927c4bf5108f2d76533165998e5e065f0c86' (69 bytes, crc 756096153)
01 11:39:11, lp_swap:1104] Sending 'negotiation-reply@9dd797bc61043b34d576c1ddf008927c4bf5108f2d76533165998e5e065f0c86' (69 bytes, crc 163610173)
01 11:39:51, lp_swap:1111] Received 'negotiated@9dd797bc61043b34d576c1ddf008927c4bf5108f2d76533165998e5e065f0c86' (1 bytes, crc 2768625435)
01 11:39:56, lp_swap:1155] Taker fee tx hash 79b142cd44ae47ede2af8000d414aa81bcd9f61692c5048a57ef119cbcbbc466
01 11:39:56, lp_swap:1156] Sending 'taker-fee@9dd797bc61043b34d576c1ddf008927c4bf5108f2d76533165998e5e065f0c86' (245 bytes, crc 2366526168)
set pubkey for 94.130.35.94 <- bab6ad2eebe1e666369cab504d4622b22c1f1ef718ef388e88020f30a1573e01, pairsock.-1
¬∑ 2019-04-01 13:51:26 +0200 [swap uuid=9dd797bc61043b34d576c1ddf008927c4bf5108f2d76533165998e5e065f0c86] Finished
    Maker payment validate failed...
    Taker fee sent...
    Negotiated...
    Started...
```


[01-Apr-19 05:09 AM] smkhound#7640
curiously, balance for pizza and beer are exactly the same ü§∑


[01-Apr-19 05:09 AM] smkhound#7640
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_balance\",\"coin\":\"BEER\"}" | jq
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   152  100    83  100    69    408    339 --:--:-- --:--:-- --:--:--   748
{
  "address": "RJPismQ3n9hdBaawgiob3B2U7ZU3Uxsvcr",
  "balance": 199.998703,
  "coin": "BEER"
}```


[01-Apr-19 05:09 AM] smkhound#7640
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_balance\",\"coin\":\"PIZZA\"}" | jq
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   154  100    84  100    70    411    343 --:--:-- --:--:-- --:--:--   754
{
  "address": "RJPismQ3n9hdBaawgiob3B2U7ZU3Uxsvcr",
  "balance": 199.998703,
  "coin": "PIZZA"
}
```


[01-Apr-19 05:10 AM] cipi#4502
https://pizza.kmdexplorer.io/address/RJPismQ3n9hdBaawgiob3B2U7ZU3Uxsvcr
shows 777
looks like you connected both BEER and PIZZA to the same electrum


[01-Apr-19 05:11 AM] smkhound#7640
that's be it...


[01-Apr-19 05:12 AM] smkhound#7640
best way to exit mm?


[01-Apr-19 05:13 AM] cipi#4502
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"stop\"}"`

{Reactions}
üëç (3) 

[01-Apr-19 05:51 AM] siu#3920
its good to start mm in  screen if you are running it on a vps


[01-Apr-19 06:51 AM] SHossain#0007
also, you can use `pkill -15 mm2`


[01-Apr-19 07:24 AM] SHossain#0007
@smkhound for your output i see `Maker payment validate failed..` maybe that is the reason the swap didn't work.


[01-Apr-19 07:25 AM] SHossain#0007
you would see this with successful swap
```
¬∑ 2019-04-01 11:26:40 +0100 [swap uuid=cd504d8fdc56ab420c93eaba316b56b85bd3b74b0ee387cadde9743c2c1eaefe] Finished
    Maker payment spent...
    Taker payment spent...
    Taker payment sent...
    Maker payment validated and confirmed...
    Maker payment wait confirm started...
    Maker payment received...
    Taker fee sent...
    Negotiated...
    Started...
```


[01-Apr-19 07:42 AM] smkhound#7640
yeah, wasnt sure if that was round 2 or not...


[01-Apr-19 07:42 AM] smkhound#7640
do you still have to splitutxos in mm2?


[01-Apr-19 08:03 AM] SHossain#0007
nope. all automatic


[01-Apr-19 08:04 AM] SHossain#0007
1 of the greatest feature of MM2 and would be very pleasing to new users


[01-Apr-19 08:04 AM] SHossain#0007
no more utxo inventory management

{Reactions}
üöÄ 

[01-Apr-19 08:06 AM] jorian#4555
that is such an understated improvement


[01-Apr-19 08:07 AM] SHossain#0007
i agree


[01-Apr-19 08:08 AM] SHossain#0007
i remember most of the users complained about utxo just by not understanding it. now, even grandma can do swaps without knowing those


[01-Apr-19 12:38 PM] siu#3920
Not having to split utxo's is the real game changer here.


[02-Apr-19 03:50 AM] SHossain#0007
did anyone create any RICK & MORTY orderbook?


[02-Apr-19 03:50 AM] SHossain#0007
ok., got it


[02-Apr-19 03:50 AM] SHossain#0007
orderbook appeared


[02-Apr-19 03:53 AM] SHossain#0007
order processing


[02-Apr-19 03:57 AM] SHossain#0007
```
¬∑ 2019-04-02 11:57:23 +0100 [swap uuid=6fc2361e12ec9d457723e7d9a984f6e0defcb2b4afdd34528ae2e2b95ed25158] Finished
    Maker payment spent...
    Taker payment spent...
    Taker payment sent...
    Maker payment validated and confirmed...
    Maker payment wait confirm started...
    Maker payment received...
    Taker fee sent...
    Negotiated...
    Started...
```


[02-Apr-19 04:00 AM] SHossain#0007
balance changed perfectly and amounts are precise


[02-Apr-19 04:11 AM] SHossain#0007
now 5 swaps started one after another


[02-Apr-19 04:26 AM] SHossain#0007
```
¬∑ 2019-04-02 12:23:31 +0100 [swap uuid=46849fcfcaaa136a5ecc5be58e6c7c3d30313c06ceb33468a6b1a8626f3423c2] Finished
    Maker payment validate failed...
    Taker fee sent...
    Negotiated...
    Started...
¬∑ 2019-04-02 12:23:36 +0100 [swap uuid=87bd03d29c59252dedadabd16194515e536a0586694bdde1fa3a21b3ec3142ee] Finished
    Maker payment validate failed...
    Taker fee sent...
    Negotiated...
    Started...
¬∑ 2019-04-02 12:23:41 +0100 [swap uuid=88fdf46b2bf8118b6ea8677a0b8a78a9b743aa199dbdf4370dba9e5ea24b8f16] Finished
    Maker payment validate failed...
    Taker fee sent...
    Negotiated...
    Started...
```


[02-Apr-19 04:26 AM] SHossain#0007
they are coming as failed


[02-Apr-19 04:38 AM] SHossain#0007
and no info about 2 more


[02-Apr-19 04:39 AM] SHossain#0007

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/562601949975937065/Screenshot_from_2019-04-02_12-39-06.png


[02-Apr-19 04:39 AM] SHossain#0007
3 DEX fee went out of the wallet for those failed ones


[02-Apr-19 04:39 AM] SHossain#0007
started a fresh single swap


[02-Apr-19 04:43 AM] SHossain#0007
single swap completes successfully


[02-Apr-19 04:43 AM] SHossain#0007
could that be related to number of UTXOs?


[02-Apr-19 04:43 AM] SHossain#0007
i started with single UTXO on both coin


[02-Apr-19 04:44 AM] Kiruel#2091
I don't think its related to utxos @SHossain


[02-Apr-19 04:44 AM] Kiruel#2091
Do you use the lastest mm2 bin ?


[02-Apr-19 04:44 AM] SHossain#0007
yes


[02-Apr-19 04:44 AM] SHossain#0007
latest compiled this morning


[02-Apr-19 04:45 AM] SHossain#0007
wasn't here for last 2 weeks. hopefully not doing anything wrong. using `mm2:1` on coins file


[02-Apr-19 04:46 AM] Kiruel#2091
Can you provide full logs of mm2 when you do yours swaps ?


[02-Apr-19 04:48 AM] SHossain#0007
https://gist.githubusercontent.com/himu007/3e1aaf609fad382119b9e16fd49b0594/raw/b9c6ae14dec5941c757a0de2ba7daed8cecb03dc/gistfile1.txt


[02-Apr-19 04:49 AM] SHossain#0007
few weeks ago, i did 10 simultaneous swaps and all  of them were fine


[02-Apr-19 05:20 AM] artem.pikulin#0794
@SHossain, Hi! Could you please also post the result of `curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_swap_status\",\"params\":{\"uuid\":\"46849fcfcaaa136a5ecc5be58e6c7c3d30313c06ceb33468a6b1a8626f3423c2\"}}"`


[02-Apr-19 05:22 AM] SHossain#0007
https://gist.githubusercontent.com/himu007/d80c694f77a3d7bb0023b76764e2d53e/raw/8a360674fe0beebfde4401073969b1336a001839/swap-status


[02-Apr-19 05:23 AM] artem.pikulin#0794
AFAIK @ca333 restarted maker node recently which could lead to swaps being aborted there. From your side you didn't receive the maker payment data so your swaps failed.

{Reactions}
‚úÖ (2) 

[02-Apr-19 05:24 AM] SHossain#0007
makes sense


[02-Apr-19 05:24 AM] SHossain#0007
trying again


[02-Apr-19 05:28 AM] Kiruel#2091
Swap should be works now. @SHossain


[02-Apr-19 05:28 AM] SHossain#0007
thanks @Kiruel


[02-Apr-19 05:28 AM] SHossain#0007
started few now


[02-Apr-19 05:44 AM] SHossain#0007
all good now


[02-Apr-19 05:45 AM] SHossain#0007
i'll setup a maker node by today


[02-Apr-19 05:55 AM] SHossain#0007
started another set of 5. 4 completed successfully and 1 got `time expired for Alice_request`


[02-Apr-19 07:01 AM] smkhound#7640
I tried a few, keep getting `time expired for Alice_request`. Taking dog for walk, will reboot and try again on return


[02-Apr-19 07:05 AM] SHossain#0007
single swaps working fine


[02-Apr-19 08:12 AM] smkhound#7640
yep, got a pair of singles completed here too now


[03-Apr-19 01:03 AM] cipi#4502
@artem.pikulin latest mm2 does not build any more
```error[E0308]: mismatched types
   --> mm2src/lp_native_dex.rs:257:17
    |
257 |                 my_ip.as_ptr() as *mut c_char,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected i32, found *-ptr
    |
    = note: expected type `i32`
               found type `*mut i8````


[03-Apr-19 01:04 AM] cipi#4502
some more of this errors are shown, but all of them are `mismatched types`


[03-Apr-19 01:05 AM] artem.pikulin#0794
@cipi please do `touch mm2src/common/build.rs` and try to rebuild.


[03-Apr-19 01:07 AM] artem.pikulin#0794
This action is sometimes required when old C-code is changed, the most recent MM2 CI build passed on all platforms so force C-code rebuild should help.


[03-Apr-19 01:07 AM] artem.pikulin#0794
https://dev.azure.com/ortgma/Marketmaker/_build/results?buildId=505


[03-Apr-19 01:07 AM] cipi#4502
this helped... does it harm when i do this every time i rebuild? Besides that it takes a bit longer?


[03-Apr-19 01:08 AM] artem.pikulin#0794
No harm, you can do this every build if delay is acceptable.


[03-Apr-19 01:09 AM] cipi#4502
sure, couple seconds more don't matter üòÉ

{Reactions}
üëå 

[03-Apr-19 02:56 AM] smkhound#7640
rebuilt and single trade completed.


[03-Apr-19 02:58 AM] smkhound#7640
@SHossain when you do the sets of 5, is it a command I'm not aware of of just a loop of 5 singles?


[03-Apr-19 02:58 AM] SHossain#0007
i just issue `./buy` one after another


[03-Apr-19 02:58 AM] SHossain#0007
when i see a buy order got `CONNECTED` message, i issue the next

{Reactions}
üëç 

[03-Apr-19 02:59 AM] smkhound#7640
also pls let me know if other tests required. I'm just moving around Beer and Pizza at the moment based on the docs


[03-Apr-19 02:59 AM] SHossain#0007
i moved to RICK & MORTY.


[03-Apr-19 03:00 AM] smkhound#7640
cool, got a few of them somewhere, will have a shot


[03-Apr-19 03:00 AM] SHossain#0007
ca333 has a maker node setup for them


[03-Apr-19 03:12 AM] SHossain#0007
getting a new VPS setup for maker node


[03-Apr-19 04:12 AM] smkhound#7640
which electrum ports are used for RICK/MORTY?


[03-Apr-19 04:15 AM] SHossain#0007
jsut a sec


[03-Apr-19 04:16 AM] SHossain#0007
```
curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"RICK\",\"urls\":[\"116.203.111.225:10004\",\"116.203.120.175:10004\",\"116.203.40.22:10004\"]}"
curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"MORTY\",\"urls\":[\"116.203.111.225:10005\",\"116.203.120.175:10005\",\"116.203.40.22:10005\"]}"
```


[03-Apr-19 04:16 AM] SHossain#0007
@smkhound this is what i'm using


[03-Apr-19 04:16 AM] SHossain#0007
3 servers by @cipi


[03-Apr-19 04:17 AM] smkhound#7640
cheers, the 10004/10005 was what I was after üëç

{Reactions}
üëçüèΩ 

[03-Apr-19 05:35 AM] smkhound#7640
is there a dumpprivkey command for mm2?


[03-Apr-19 05:36 AM] smkhound#7640
or do you have to use withdraw method to another address?


[03-Apr-19 05:39 AM] cipi#4502
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"calcaddress\",\"passphrase\":\"yourpasshere\",\"coin\":\"KMD\"}" | json_pp`
`wif` is what you are searching for

{Reactions}
üçª 

[03-Apr-19 06:11 AM] cipi#4502
btw, there is also a maker with "real" funds
```ZEC/KMD 61.61923705 {"result":"success"}
KMD/ZEC 0.01793698 {"result":"success"}
CHIPS/KMD 0.03516365 {"result":"success"}
KMD/CHIPS 44.68900028 {"result":"success"}
BTG/KMD 13.40914662 {"result":"success"}
KMD/BTG 0.09788095 {"result":"success"}
GAME/KMD 0.11306319 {"result":"success"}
KMD/GAME 11.60855284 {"result":"success"}
ETH/KMD 142.24078701 {"result":"success"}
KMD/ETH 0.00820205 {"result":"success"}
BTC/KMD 4199.36957764 {"result":"success"}
KMD/BTC 0.00026320 {"result":"success"}
LTC/KMD 70.30866960 {"result":"success"}
KMD/LTC 0.01572015 {"result":"success"}
EMC2/KMD 0.05940590 {"result":"success"}
KMD/EMC2 22.09376559 {"result":"success"}
BCH/KMD 243.15471784 {"result":"success"}
KMD/BCH 0.00454551 {"result":"success"}```
i have more wallets, but orderbook propagation is a bit problematic atm with too many pairs, so i reduced it to 9 wallets


[03-Apr-19 06:12 AM] smkhound#7640
thanks.


[03-Apr-19 06:12 AM] smkhound#7640
I'm having an issue with balance display. Sent some Rick and Morty


[03-Apr-19 06:13 AM] smkhound#7640
shows up on explorers - https://morty.explorer.dexstats.info/address/RJPismQ3n9hdBaawgiob3B2U7ZU3Uxsvcr
https://rick.explorer.dexstats.info/address/RJPismQ3n9hdBaawgiob3B2U7ZU3Uxsvcr


[03-Apr-19 06:14 AM] smkhound#7640
but not in mm2


[03-Apr-19 06:14 AM] smkhound#7640
``` curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_balance\",\"coin\":\"RICK\"}" | jq
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   145  100    76  100    69    361    328 --:--:-- --:--:-- --:--:--   690
{
  "address": "RJPismQ3n9hdBaawgiob3B2U7ZU3Uxsvcr",
  "balance": 0,
  "coin": "RICK"
}
```


[03-Apr-19 06:15 AM] smkhound#7640
```curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_balance\",\"coin\":\"MORTY\"}" | jq
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   147  100    77  100    70    381    346 --:--:-- --:--:-- --:--:--   724
{
  "address": "RJPismQ3n9hdBaawgiob3B2U7ZU3Uxsvcr",
  "balance": 0,
  "coin": "MORTY"
}
```


[03-Apr-19 06:15 AM] SHossain#0007
when you use `electrum` script first, it shows balance


[03-Apr-19 06:17 AM] smkhound#7640
you mean this one?


[03-Apr-19 06:17 AM] smkhound#7640
``` curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"MORTY\",\"urls\":[\"electrum1.cipig.net:10005\",\"electrum2.cipig.net:10005\",\"electrum3.cipig.net:10005\"]}" | jq
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   231  100    70  100   161  10000  23000 --:--:-- --:--:-- --:--:-- 33000
{
  "error": "lp_coins:867] lp_coins:622] Coin MORTY already initialized"
}
```


[03-Apr-19 06:18 AM] cipi#4502
wait, RICK and MORTY are not on electrum1.cipig.net, only on 3 test electrums i have set up... will move them to the main electrums after the notary elections are over


[03-Apr-19 06:18 AM] cipi#4502
you need to use 116.203.111.225 116.203.120.175 116.203.40.22 instead


[03-Apr-19 06:18 AM] smkhound#7640
thanks üëç


[03-Apr-19 06:19 AM] cipi#4502
ports are OK, 10004 and 10005... will use other ports when i move them, but i will make the PR to the coins repo by then


[03-Apr-19 06:19 AM] SHossain#0007
```
curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"RICK\",\"urls\":[\"116.203.111.225:10004\",\"116.203.120.175:10004\",\"116.203.40.22:10004\"]}"
curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"MORTY\",\"urls\":[\"116.203.111.225:10005\",\"116.203.120.175:10005\",\"116.203.40.22:10005\"]}"
```


[03-Apr-19 06:27 AM] smkhound#7640
all good now üòÉ


[03-Apr-19 06:28 AM] smkhound#7640
I restarted mm2, because `coins already intitialised`. Is there a `remove coin` or `changeSPV` command?


[03-Apr-19 06:42 AM] artemciy_dice#0049
No, coin configuration is sort of immutable, removing a coin from underneath a working mm2 server would introduce complexity that doesn't seem required in most use cases.


[03-Apr-19 06:44 AM] cipi#4502
there is a `disable` call, maybe we should remove it, it does weird things... coin is then shown as disabled, but you can't enable it, because `already intitialised` üòÉ


[03-Apr-19 06:50 AM] cipi#4502
something else... is this already known?
```   "asks" : [
      {
         "pubkey" : "bab6ad2eebe1e666369cab504d4622b22c1f1ef718ef388e88020f30a1573e01",
         "price" : 142.93940735,
         "avevolume" : "0",
         "zcredits" : "0",
         "age" : 3,
         "depth" : "0",
         "address" : "RT9MpMyucqXiX8bZLimXBnrrn2ofmdGNKd",
         "numutxos" : "0",
         "maxvolume" : 0.09146432,
         "coin" : "ETH"```
orderbook shows KMD address for ERC20-tokens


[03-Apr-19 06:52 AM] cipi#4502
other coins are fine, only the ERC20 show wrong address


[03-Apr-19 06:53 AM] SHossain#0007
i did setup a `maker` node with RICK & MORTY in native mode using a VPS. i see orderbook on that node. but can't see it from my local node


[03-Apr-19 06:53 AM] SHossain#0007
```
{
  "bids": [
    {
      "coin": "MORTY",
      "address": "RPigNZvL5C17F7B8CpkBQQU4jozVWyRxxK",
      "price": 1,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 10000,
      "depth": 0,
      "pubkey": "7ddef60bf8582605f4b49ccecf79a8b94a64047d685747039e122ea3406c3818",
      "age": 1,
      "zcredits": 0
    }
  ],
  "numbids": 1,
  "biddepth": 0,
  "asks": [
    {
      "coin": "RICK",
      "address": "RPigNZvL5C17F7B8CpkBQQU4jozVWyRxxK",
      "price": 1,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 10000,
      "depth": 0,
      "pubkey": "7ddef60bf8582605f4b49ccecf79a8b94a64047d685747039e122ea3406c3818",
      "age": 1,
      "zcredits": 0
    }
  ],
  "numasks": 1,
  "askdepth": 0,
  "base": "RICK",
  "rel": "MORTY",
  "timestamp": 1554299293,
  "netid": 9998
}
```


[03-Apr-19 06:54 AM] SHossain#0007
used netid 9998


[03-Apr-19 06:54 AM] SHossain#0007
can someone please try using netid 9998 with RICK & MORTY?


[03-Apr-19 06:54 AM] SHossain#0007
just for a small testing


[03-Apr-19 06:55 AM] cipi#4502
yes, give me a minute


[03-Apr-19 06:55 AM] SHossain#0007
thanks @cipi üòÉ


[03-Apr-19 06:55 AM] SHossain#0007
VPS doesn't have any ports blocking


[03-Apr-19 06:56 AM] smkhound#7640
I just completed a Morty to Rick trade. due to walk dog but will test next on your netid on return

{Reactions}
üëçüèΩ 

[03-Apr-19 06:56 AM] cipi#4502
@SHossain i suspect you are `173.249.5.31`


[03-Apr-19 06:56 AM] SHossain#0007
my local node using RICK & MORTY electrum servers gets this
```
{
  "bids": [],
  "numbids": 0,
  "biddepth": 0,
  "asks": [],
  "numasks": 0,
  "askdepth": 0,
  "base": "RICK",
  "rel": "MORTY",
  "timestamp": 1554299788,
  "netid": 9998
}
```


[03-Apr-19 06:57 AM] SHossain#0007
@cipi no. my server ip is `51.38.82.175`


[03-Apr-19 06:58 AM] cipi#4502
on netid 9998 i only get one peer
`connected to push.(tcp://173.249.5.31:47761) pushsock.2 valid.1  | connected to sub.(tcp://173.249.5.31:47771) subsock.3 valid.1 numactive.1`


[03-Apr-19 06:58 AM] cipi#4502
oohh, that me üòÑ


[03-Apr-19 06:59 AM] cipi#4502
there are no seed nodes on netid 9998, i assume


[03-Apr-19 06:59 AM] SHossain#0007
maybe my setup is wrong?


[03-Apr-19 06:59 AM] SHossain#0007
```
#!/bin/bash
source passphrase
source coins
stdbuf -oL ./mm2 "{\"gui\":\"SH_VPS\",\"netid\":9998,\"mm2\":1,\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\",\"coins\":$coins}" &
```


[03-Apr-19 06:59 AM] SHossain#0007
this is the client/run script i'm using


[03-Apr-19 07:00 AM] SHossain#0007
do i need to specify `ip` as well?


[03-Apr-19 07:01 AM] cipi#4502
there are seed nodes in the code https://github.com/artemii235/SuperNET/commit/c8a15ad56468d7e2989fca52433dbe489c7dc1ef

{Embed}
https://github.com/artemii235/SuperNET/commit/c8a15ad56468d7e2989fca52433dbe489c7dc1ef
Add 2 cipi nodes to default MM2 seeds. ¬∑ artemii235/SuperNET@c8a15ad
https://images-ext-1.discordapp.net/external/bhxbZp_vqWMDWyHbDAs2ChYL0J22s1YIUu1txMsCnWQ/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/15745003


[03-Apr-19 07:03 AM] cipi#4502
not sure what about those here: https://github.com/artemii235/SuperNET/blob/c8a15ad56468d7e2989fca52433dbe489c7dc1ef/mm2src/lp_native_dex.rs#L975
but as long as they are not running on netid 9998, it does not matter, i think

{Embed}
https://github.com/artemii235/SuperNET/blob/c8a15ad56468d7e2989fca52433dbe489c7dc1ef/mm2src/lp_native_dex.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[03-Apr-19 07:05 AM] cipi#4502
ok, those are old mm1 seed nodes, i see 2 of my IPs there , so we have only those on netid 9999, these here https://github.com/artemii235/SuperNET/blob/c8a15ad56468d7e2989fca52433dbe489c7dc1ef/mm2src/lp_native_dex.rs#L984

{Embed}
https://github.com/artemii235/SuperNET/blob/c8a15ad56468d7e2989fca52433dbe489c7dc1ef/mm2src/lp_native_dex.rs
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[03-Apr-19 07:06 AM] cipi#4502
i see that you can pass a seednode in cli
`\"seednode\":\"10.100.0.2\` will try with your node ip


[03-Apr-19 07:09 AM] cipi#4502
lol, that crashed my node... another sig 4... strange... i tra again


[03-Apr-19 07:10 AM] cipi#4502
my fault, forget what i said... i forgot to remove the second line from startscript, so it started 2 mm-processes


[03-Apr-19 07:11 AM] SHossain#0007
started with the seednode ip you mentioned above


[03-Apr-19 07:11 AM] cipi#4502
me too... we are connected... i see
`connected to push.(tcp://51.38.82.175:47761) pushsock.4 valid.1  | connected to sub.(tcp://51.38.82.175:47771) subsock.5 valid.1 numactive.2`


[03-Apr-19 07:11 AM] cipi#4502
can you do `setprice` again?


[03-Apr-19 07:13 AM] SHossain#0007
extremely sorry. the server ip is `51.38.82.189`


[03-Apr-19 07:13 AM] SHossain#0007
175 is a different node


[03-Apr-19 07:14 AM] SHossain#0007
did you use `seednode` in your client script?


[03-Apr-19 07:15 AM] cipi#4502
np, `connected to push.(tcp://51.38.82.189:47761) pushsock.4 valid.1  | connected to sub.(tcp://51.38.82.189:47771) subsock.5 valid.1 numactive.2`
yes, i use this
`stdbuf -oL nohup ../../target/debug/mm2 "{\"netid\":9998,\"seednode\":\"51.38.82.189\",\"gui\":\"nogui\",\"client\":1, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\"}" > /tmp/mm.log &`


[03-Apr-19 07:16 AM] cipi#4502
```   "asks" : [
      {
         "address" : "RPigNZvL5C17F7B8CpkBQQU4jozVWyRxxK",
         "avevolume" : "0",
         "pubkey" : "7ddef60bf8582605f4b49ccecf79a8b94a64047d685747039e122ea3406c3818",
         "numutxos" : "0",
         "price" : 1,
         "age" : 1,
         "depth" : "0",
         "coin" : "RICK",
         "zcredits" : "0",
         "maxvolume" : 10000
      }
   ],
   "askdepth" : "0",
   "timestamp" : 1554300957,
   "biddepth" : "0",
   "numbids" : 1,
   "bids" : [
      {
         "address" : "RPigNZvL5C17F7B8CpkBQQU4jozVWyRxxK",
         "avevolume" : "0",
         "pubkey" : "7ddef60bf8582605f4b49ccecf79a8b94a64047d685747039e122ea3406c3818",
         "numutxos" : "0",
         "price" : 1,
         "coin" : "MORTY",
         "depth" : "0",
         "age" : 1,
         "zcredits" : "0",
         "maxvolume" : 10000
      }```


[03-Apr-19 07:17 AM] SHossain#0007
cool. thanks. please buy some üòÉ


[03-Apr-19 07:18 AM] SHossain#0007
so, using netid works like before


[03-Apr-19 07:19 AM] SHossain#0007
now i see orderbook on my local node


[03-Apr-19 07:19 AM] cipi#4502
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"buy\",\"base\":\"RICK\",\"rel\":\"MORTY\",\"relvolume\":1,\"price\":1.1}"`... looks good


[03-Apr-19 07:19 AM] SHossain#0007
started couple of swaps


[03-Apr-19 07:20 AM] SHossain#0007
i'm using 
```
curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"buy\",\"base\":\"RICK\",\"rel\":\"MORTY\",\"relvolume\":1,\"price\":2,\"maxprice\":2.1}"```


[03-Apr-19 07:20 AM] SHossain#0007
price is high. didn't change since last test


[03-Apr-19 07:23 AM] SHossain#0007
1 of your swap completed


[03-Apr-19 07:23 AM] cipi#4502
why price and maxprice? what is maxprice good for?


[03-Apr-19 07:23 AM] SHossain#0007
i guess that was the old way for the auction system


[03-Apr-19 07:24 AM] SHossain#0007
don't remember the actual reason


[03-Apr-19 07:26 AM] SHossain#0007
we may not need to use maxprice anymore (if Artem confirm)


[03-Apr-19 07:26 AM] cipi#4502
i didn't knew maxprice till now üòÉ


[03-Apr-19 07:31 AM] SHossain#0007
`maxprice` could be a misunderstanding on my part too


[03-Apr-19 07:35 AM] cipi#4502
probably not that important...


[03-Apr-19 07:35 AM] SHossain#0007
even though i had price:2 in my script, it used 1 (best price)


[03-Apr-19 07:35 AM] SHossain#0007
so, users can't mess up or pay extra


[03-Apr-19 07:36 AM] SHossain#0007
will test without maxprice field


[03-Apr-19 07:37 AM] SHossain#0007
now i remember, mm2 stdout shows `missing field.(maxprice) add to MM_fields[]`. so i added that for testing üòÑ


[03-Apr-19 07:38 AM] cipi#4502
i see this in console output when i pass only "price: 1.1"
`03 14:34:06, lp_ordermatch:591] lp_trade] Alice max price: 1.1`


[03-Apr-19 07:38 AM] SHossain#0007
but, the fix for that lies in the code and Artem will take care of that


[03-Apr-19 07:39 AM] SHossain#0007
i just started a swap with only price 1


[03-Apr-19 07:39 AM] SHossain#0007
no fraction or above the orderbook. just plain price as orderbook shows


[03-Apr-19 07:39 AM] SHossain#0007
swap in progress


[03-Apr-19 07:41 AM] cipi#4502
yes, saw that too... so no need to add fractions to price just to be sure it matches, very nice


[03-Apr-19 07:47 AM] SHossain#0007
will do multiple swaps to see if i get any timeout error


[03-Apr-19 07:48 AM] SHossain#0007
started 15


[03-Apr-19 07:49 AM] SHossain#0007
`03 14:48:13, lp_ordermatch:1129] aliceid.2084222642 got new bestprice 1.000010000100001 dynamictrust -1 (unconf 0) slowresponse.0`


[03-Apr-19 07:50 AM] cipi#4502
did you start all 15 from the same taker node?


[03-Apr-19 07:50 AM] SHossain#0007
yes


[03-Apr-19 07:51 AM] SHossain#0007
didn't work


[03-Apr-19 07:51 AM] SHossain#0007
```
¬∑ 2019-04-03 15:50:25 +0100 [swap uuid=74d37df483b0f54ed78c0fde958a88380c7ae1260d7e868ae4a4a2bcfc8ecaab] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:50:29 +0100 [swap uuid=27fb26bcc199747961e2aaa6d93a820e87a742e2c5cb98f9de515d1e7ec04464] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:50:33 +0100 [swap uuid=1d0ff52f9c80b6405bb225838be8e60ddbd99ef34752dcb7ede7eacbd667806a] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:50:38 +0100 [swap uuid=16da2c4beea8e5abb9c9e296514f34d54a10e7126aadb377487a44864477932e] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:50:38 +0100 [swap uuid=6811582e5cec17d5f5baf3053976c1cc8020ba406e6f4dba8424f36cf590fd9e] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:50:42 +0100 [swap uuid=2d4c1e93e572092cdf3a973451406ac41380bede7548e0e5b20a5355df9c668a] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:50:43 +0100 [swap uuid=c9addca315c814e3cab5f329b14a48f470284330c303f2e2c1eeee765e0fa1c2] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:50:47 +0100 [swap uuid=13a5d7c66e0bb44cdd7cb34b19d403280b667370660a88bf434708b0d2064623] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:50:51 +0100 [swap uuid=c315c5683a64100953f7ea7e05617edb93539cf5333aa9fa77f5ace63f35cb3c] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:50:56 +0100 [swap uuid=1615b4fcf815c30f5001ac427f4478abb6bdd4576f6c41d83926a3286ee2011d] Finished
    Negotiate failed...
    Started...
¬∑ 2019-04-03 15:51:00 +0100 [swap uuid=db3518b5452ef13fdbb438de3c6bb3349d097445145c506a3f045b6a4ae6f8b5] Finished
    Negotiate failed...
    Started...
```


[03-Apr-19 07:52 AM] cipi#4502
could be we need to wait for artem to finish the work he does in this branch: https://github.com/artemii235/SuperNET/tree/feature/100
i have a feeling it also affects multiple swaps from the same node, but not sure

{Embed}
https://github.com/artemii235/SuperNET/tree/feature/100
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[03-Apr-19 07:52 AM] SHossain#0007
maker node is also showing same failed messages


[03-Apr-19 07:52 AM] SHossain#0007
let's see with 1 then 5


[03-Apr-19 07:53 AM] SHossain#0007
probably if i wait until the negotiation done on both nodes and start new, it may progress


[03-Apr-19 07:53 AM] SHossain#0007
(still theory)


[03-Apr-19 07:55 AM] cipi#4502
i started one too


[03-Apr-19 07:55 AM] SHossain#0007
```
03 14:55:13, lp_swap:552] Sending 'negotiation@86a4ca8daffeb6efcc6a0b03eee71691563f1304ea2ca24169af0a0e6e338e34' (69 bytes, crc 3365685423)
send CONNECT for 43347434-549937102
```


[03-Apr-19 07:56 AM] SHossain#0007
both maker and taker nodes exchange negotiation data


[03-Apr-19 07:57 AM] cipi#4502
must be it... i only see requestid 43347434


[03-Apr-19 07:57 AM] SHossain#0007
yes, that is from maker node


[03-Apr-19 07:57 AM] SHossain#0007
would like to see how the maker node behaves when 10 taker nodes sends request at the same time


[03-Apr-19 07:58 AM] cipi#4502
i think it works as long as the taker are all on different IPs


[03-Apr-19 08:01 AM] SHossain#0007
```
¬∑ 2019-04-03 16:59:27 +0200 [swap uuid=16da2c4beea8e5abb9c9e296514f34d54a10e7126aadb377487a44864477932e] Finished
    Taker fee validate failed...
    Negotiated...
    Started...
¬∑ 2019-04-03 16:59:31 +0200 [swap uuid=2d4c1e93e572092cdf3a973451406ac41380bede7548e0e5b20a5355df9c668a] Finished
    Taker fee validate failed...
    Negotiated...
    Started...
```


[03-Apr-19 08:01 AM] SHossain#0007
your swaps?


[03-Apr-19 08:02 AM] cipi#4502
no, mine went through


[03-Apr-19 08:02 AM] cipi#4502
`2019-04-03 15:00:45 +0000 [swap uuid=86a4ca8daffeb6efcc6a0b03eee71691563f1304ea2ca24169af0a0e6e338e34] Finished`


[03-Apr-19 08:02 AM] SHossain#0007
could be from my first 15


[03-Apr-19 08:02 AM] cipi#4502
yes, likely the maker is waiting some time for `Taker fee`

{Reactions}
üëçüèΩ 

[03-Apr-19 08:10 AM] SHossain#0007
@smkhound `my_balance` call is showing my balance fine `{"address":"RXmtP1PVH1ChWkL6EwM1p2LqJx8kMMwj88","balance":153.9997,"coin":"RICK"}`
while only `balance` is not showing my balance `{"result":"success","coin":"RICK","address":"RXmtP1PVH1ChWkL6EwM1p2LqJx8kMMwj88","balance":0}`


[03-Apr-19 08:11 AM] smkhound#7640
I'm using my_balance, issue was wrong electrum


[03-Apr-19 08:11 AM] SHossain#0007
got it


[03-Apr-19 08:12 AM] smkhound#7640
connected to netid 9998, just wating for funds to arrive and will attempt another trade


[03-Apr-19 08:12 AM] cipi#4502
i think `my_balance` is the new call, ported to rust and `balance` is still the old C-code


[03-Apr-19 08:12 AM] SHossain#0007
yes, i believe you are right


[03-Apr-19 08:13 AM] SHossain#0007
you need seednode param as well @smkhound . this is the line i'm using
```
stdbuf -oL ./mm2 "{\"gui\":\"alien\",\"netid\":9998,\"seednode\":\"51.38.82.189\",\"mm2\":1,\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\",\"coins\":$coins}"
```


[03-Apr-19 08:13 AM] smkhound#7640
thnx


[03-Apr-19 08:13 AM] SHossain#0007
the default test seednodes are hardcoded in the source. this is a separate one


[03-Apr-19 08:16 AM] smkhound#7640
the mm and coins params I didnt have in my start script. Are they required, or ok to communicate when adding coins with  electrum method?


[03-Apr-19 08:18 AM] SHossain#0007
this is my full start script
```
#!/bin/bash
source passphrase
source coins
stdbuf -oL ./mm2 "{\"gui\":\"alien\",\"netid\":9998,\"seednode\":\"51.38.82.189\",\"mm2\":1,\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\",\"coins\":$coins}" &
```


[03-Apr-19 08:19 AM] SHossain#0007
i have `coins` and `passphrase` file in the same dir


[03-Apr-19 08:20 AM] SHossain#0007
this is similar to the testing we have done for version 1


[03-Apr-19 08:21 AM] SHossain#0007
this is my current `coins` file contents
```
export coins="[{\"coin\": \"PIZZA\",\"asset\": \"PIZZA\",\"txversion\":4,\"rpcport\":11608,\"mm2\":1},{\"coin\": \"BEER\",\"txversion\":4,\"asset\": \"BEER\",\"rpcport\": 8923,\"mm2\":1},{\"coin\": \"RICK\",\"asset\": \"RICK\",\"txversion\":4,\"rpcport\":28223,\"mm2\":1},{\"coin\": \"MORTY\",\"txversion\":4,\"asset\": \"MORTY\",\"rpcport\": 63812,\"mm2\":1}]"
```


[03-Apr-19 08:22 AM] smkhound#7640
I have them in the folder too, just not in start script


[03-Apr-19 08:22 AM] cipi#4502
if you don't pass `\"coins\":$coins` to start params, mm2 looks for coins file in present directory and uses that... that is also my preferred way to start


[03-Apr-19 08:23 AM] smkhound#7640
and the `mm2:1` param? I have on coins file, but not start script


[03-Apr-19 08:23 AM] cipi#4502
you can get the latest file here: `wget https://raw.githubusercontent.com/jl777/coins/mymm/coins`
you can pass mm2:1 when enabling the coins


[03-Apr-19 08:24 AM] cipi#4502
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"RICK\",\"mm2\":1}"`


[03-Apr-19 08:24 AM] cipi#4502
works with `electrum`too


[03-Apr-19 08:25 AM] SHossain#0007
i added this on the start script `\"mm2\":1,` just as a precaution


[03-Apr-19 08:25 AM] SHossain#0007
so, i won't forget that and it will not cause any harm


[03-Apr-19 08:32 AM] SHossain#0007
issued a swap but that didn't progress after receiving quote.
alice node (electrum)
```
>>>>>>>>>> received quote RICK/MORTY 1.00000100
03 15:28:19, lp_ordermatch:1129] aliceid.686014937 got new bestprice 1.000001000001 dynamictrust -10 (unconf 0) slowresponse.0
03 15:28:20, lp_ordermatch:591] lp_trade] Alice max price: 1
03 15:28:21, lp_ordermatch:1196] send LP_connect aliceid.686014937 1.000001000001
```
bob node (native)
```
bob 7ddef60bf8582605f4b49ccecf79a8b94a64047d685747039e122ea3406c3818 received REQUEST.(6d55319d2c9b85951ca470b8593da6d4) mpnet.0 fill.0 gtc.0
03 15:28:19, lp_ordermatch:961] dest sat 1000000000 sat 1000000000 tx_fee 1000
RICK/MORTY qprice 1.00000000 myprice 1.00000000 [1.00000000]
03 15:28:19, lp_ordermatch:1023] Send RESERVED id.686014937
```


[03-Apr-19 08:33 AM] SHossain#0007
this behaviour i also found yesterday. which is after some time or after some swaps, mm2 can't progress with new swaps (sometimes)


[03-Apr-19 08:33 AM] SHossain#0007
has anyone else experienced this?


[03-Apr-19 08:34 AM] SHossain#0007
no other swaps were running on any nodes


[03-Apr-19 08:34 AM] SHossain#0007
this was output of the buy script
```
{"result":"success","swaps":[[378694936, 1720215644], [2104653582, 1157374261], [1873841179, 1344505511]],"netamounts":[],"pending":{"uuid":"cf35d8f446b2d3c274820c94a76b9dd86d55319d2c9b85951ca470b8593da6d4","expiration":1554305419,"timeleft":119,"tradeid":1200554030,"requestid":0,"quoteid":0,"bob":"RICK","base":"RICK","basevalue":10,"alice":"MORTY","rel":"MORTY","relvalue":10,"desthash":"f42668d3243b9bdf79af8ef59fb4de9109cdab2745c8505da87bcacacb1d4a2c","aliceid":686014937},"uuid":"cf35d8f446b2d3c274820c94a76b9dd86d55319d2c9b85951ca470b8593da6d4"}
```


[03-Apr-19 08:35 AM] SHossain#0007
issued another buy and that is progressing nicely


[03-Apr-19 08:36 AM] cipi#4502
yes, i also experienced that... the node is then stuck and only a restart will help... i suspect it gets stuck in some price_post loops, so this happens only on maker nodes that did use `setprice` call... the more different `setprice` calls you make (different coins), the quicker you get your node stuck


[03-Apr-19 08:40 AM] SHossain#0007
thanks for the explanation. yes, i used `setprice` on bob node


[03-Apr-19 08:41 AM] cipi#4502
https://github.com/artemii235/SuperNET/issues/355
longer story...

{Embed}
https://github.com/artemii235/SuperNET/issues/355
price updates don't propagate ¬∑ Issue #355 ¬∑ artemii235/SuperNET
It looks like price updates done with setprice don't propagate. Here are 2 examples: GAME/KMD 0.10465959 {"result":"success"} GAME/KMD 0.10281689 {"result":"s...
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761


[03-Apr-19 08:42 AM] cipi#4502
https://github.com/artemii235/SuperNET/issues/355#issuecomment-478255294
if i look over my comment, then it looks like the same what you just experienced... that is fine, it means i am not crazy (at least not totally) and it is not my setup

{Embed}
https://github.com/artemii235/SuperNET/issues/355
price updates don't propagate ¬∑ Issue #355 ¬∑ artemii235/SuperNET
It looks like price updates done with setprice don't propagate. Here are 2 examples: GAME/KMD 0.10465959 {"result":"success"} GAME/KMD 0.10281689 {"result":"s...
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761


[03-Apr-19 08:42 AM] SHossain#0007
üòÉ


[03-Apr-19 08:43 AM] SHossain#0007
good. we are sane


[03-Apr-19 08:43 AM] SHossain#0007
going out for some lunch. bbl


[03-Apr-19 08:44 AM] SHossain#0007
hoping to get testing done like good old days with all of you üòÇ


[03-Apr-19 08:44 AM] cipi#4502
üòÉ


[03-Apr-19 08:44 AM] cipi#4502
bon appetit

{Reactions}
üëçüèΩ 

[03-Apr-19 09:02 AM] smkhound#7640
successful trade completed on 9998. Kicked of another, just hit midnight tho so will report outsome when the sun rises ‚úå

{Reactions}
üëçüèΩ 

[03-Apr-19 10:57 AM] SHossain#0007
i was doing some slow swaps. 1 by 1. all were completing fine. but, this one failed
```
CONNECTED mpnet.0 fill.0 gtc.0 numpending.0 tradeid.366954254 requestid.1944102470 quoteid.4063860905 pairstr.tcp://51.38.82.189:24814
RICK/MORTY bid 1.00000000 ask 0.00000000
alice pairstr.(tcp://51.38.82.189:24814) pairsock.15
03 17:51:32, lp_ordermatch:758] Entering the taker_swap_loop RICK/MORTY
03 17:51:52, lp_swap:1075] Received 'negotiation@b9308dbf518eb453be5c191372319d68de2f6ff2da3a2cd9af4c5579df83f11d' (69 bytes, crc 3121822020)
03 17:51:52, lp_swap:1104] Sending 'negotiation-reply@b9308dbf518eb453be5c191372319d68de2f6ff2da3a2cd9af4c5579df83f11d' (69 bytes, crc 1474630601)
¬∑ 2019-04-03 18:54:52 +0100 [swap uuid=b9308dbf518eb453be5c191372319d68de2f6ff2da3a2cd9af4c5579df83f11d] Finished
    Negotiate failed...
    Started...
```


[03-Apr-19 10:57 AM] SHossain#0007
from bob node
```
03 17:51:31, lp_ordermatch:1316] bob sets negotiationdone.1554313891
03 17:51:31, lp_ordermatch:1066] bob 7ddef60bf8582605f4b49ccecf79a8b94a64047d685747039e122ea3406c3818 received CONNECT.(de2f6ff2da3a2cd9af4c5579df83f11d)
03 17:51:31, lp_ordermatch:416] LP_nanobind produced sock 17, pair_str tcp://51.38.82.189:24814 (canbind Null LP_fixed_pairport 0) Alice is f42668d3243b9bdf79af8ef59fb4de9109cdab2745c8505da87bcacacb1d4a2c
03 17:51:31, lp_ordermatch:433] Entering the maker_swap_loop RICK/MORTY
03 17:51:31, lp_swap:552] Sending 'negotiation@b9308dbf518eb453be5c191372319d68de2f6ff2da3a2cd9af4c5579df83f11d' (69 bytes, crc 3121822020)
send CONNECT for 1192578530-3668630249
¬∑ 2019-04-03 19:54:31 +0200 [swap uuid=b9308dbf518eb453be5c191372319d68de2f6ff2da3a2cd9af4c5579df83f11d] Finished
    Negotiate failed...
    Started...
```


[03-Apr-19 04:10 PM] smkhound#7640
overnighter succesful, and another over mornign coffee


[03-Apr-19 10:42 PM] artem.pikulin#0794
@SHossain @smkhound @cipi Hi, the current ordermatching process is not stable and success rate vary, it's about 75% now. We're already working on improvement. `price updates don't propagate` might be also fixed because there will be rework of P2P messages broadcasting.

{Reactions}
üëçüèΩ (2) 

[04-Apr-19 01:00 AM] eosgermany#0112
Thanks!

{Reactions}
üëå 

[04-Apr-19 04:19 AM] SHossain#0007
Thanks for the update @artem.pikulin


[05-Apr-19 10:00 AM] Kiruel#2091
Hi, someone can configure some order rick/morty plz ?


[05-Apr-19 10:01 AM] SHossain#0007
i've orders up.


[05-Apr-19 10:01 AM] SHossain#0007
for RICK & MORTY


[05-Apr-19 10:01 AM] SHossain#0007
give me few minutes. i'll put them on default netid 9999


[05-Apr-19 10:01 AM] Kiruel#2091
I see nothing.


[05-Apr-19 10:01 AM] Kiruel#2091
ah ok ty


[05-Apr-19 10:02 AM] SHossain#0007
i was testing on netid 9998 and using different seednode ip


[05-Apr-19 10:02 AM] Kiruel#2091
I will make a another 100 swaps test üòâ


[05-Apr-19 10:03 AM] SHossain#0007
you should see orders now


[05-Apr-19 10:03 AM] Kiruel#2091
yes


[05-Apr-19 10:03 AM] Kiruel#2091
1 for 1 ?


[05-Apr-19 10:04 AM] SHossain#0007
```
{
  "bids": [
    {
      "coin": "MORTY",
      "address": "RPigNZvL5C17F7B8CpkBQQU4jozVWyRxxK",
      "price": 1,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 9941.79961,
      "depth": 0,
      "pubkey": "7ddef60bf8582605f4b49ccecf79a8b94a64047d685747039e122ea3406c3818",
      "age": 8,
      "zcredits": 0
    }
  ],
  "numbids": 1,
  "biddepth": 0,
  "asks": [
    {
      "coin": "RICK",
      "address": "RPigNZvL5C17F7B8CpkBQQU4jozVWyRxxK",
      "price": 1,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 10058.19961,
      "depth": 0,
      "pubkey": "7ddef60bf8582605f4b49ccecf79a8b94a64047d685747039e122ea3406c3818",
      "age": 8,
      "zcredits": 0
    }
  ],
  "numasks": 1,
  "askdepth": 0,
  "base": "RICK",
  "rel": "MORTY",
  "timestamp": 1554483828,
  "netid": 9999
}
```


[05-Apr-19 10:04 AM] SHossain#0007
yes


[05-Apr-19 10:04 AM] Kiruel#2091
cool ty


[05-Apr-19 10:04 AM] SHossain#0007
you want price changed?


[05-Apr-19 10:04 AM] Kiruel#2091
yeah just more like 1 for 1.2


[05-Apr-19 10:04 AM] Kiruel#2091
But its ok for now


[05-Apr-19 10:04 AM] SHossain#0007
i see swaps started


[05-Apr-19 10:06 AM] Kiruel#2091
yep


[05-Apr-19 10:06 AM] Kiruel#2091
Ty i have my test üòÉ

{Reactions}
üëçüèΩ 

[07-Apr-19 01:34 AM] smkhound#7640
tried a few today, but orderbooks on netid 9999 seem to be empty


[07-Apr-19 03:30 AM] SHossain#0007
my maker node is down at the moment. changing few things on that server. will be up by the end of the day

{Reactions}
üëç 

[11-Apr-19 03:44 AM] artem.pikulin#0794
@MM2 community tester @SHossain Hi! Please update your MM2 to latest version as it's `not compatible` with previous one. For some time you might see messages like 
```
üòü 2019-04-11 12:40:31 +0200 [seed_connection 46.4.87.18:47772] Error Broken pipe (os error 32) writing to socket, dropping connection
üòü 2019-04-11 12:40:31 +0200 [seed_connection 46.4.78.11:47772] Error Broken pipe (os error 32) writing to socket, dropping connection
```
Please ignore them, they will go away when all MM2 seednodes are updated. If you have any questions please let me know.

{Reactions}
üëå (3) 

[11-Apr-19 03:45 AM] artem.pikulin#0794
@cipi üëÜ Hi, additional action is required for `46.4.87.18` and `46.4.78.11` seednodes, please add `"i_am_seed":true` to JSON cmd arg to let MM2 know that it should act as seednode.


[11-Apr-19 06:47 AM] cipi#4502
the 2 seed nodes are updated...
it indeed shows messages like this
```üòÄ 2019-04-11 13:46:30 +0000 [seed_connection 46.4.87.18:47772] Connecting...
üòü 2019-04-11 13:46:30 +0000 [seed_connection 46.4.87.18:47772] Connection error Connection refused (os error 111)
üòÄ 2019-04-11 13:46:30 +0000 [seed_connection 46.4.78.11:47772] Connecting...
üòü 2019-04-11 13:46:30 +0000 [seed_connection 46.4.78.11:47772] Connection error Connection refused (os error 111)```


[11-Apr-19 06:49 AM] cipi#4502
mm2 is listening to port 47773. not 47772


[11-Apr-19 07:18 AM] cipi#4502
i think i found the problem... the option needs to be `\"i_am_seed\":true`... exactly...


[11-Apr-19 07:21 AM] cipi#4502
the seed nodes are showing thousands and thousands of this messages
```
üòÄ 2019-04-11 14:19:12 +0000 [incoming_connection 173.249.5.31:33398] New connection...
üòÄ 2019-04-11 14:19:12 +0000 [incoming_connection 173.249.5.31:22128] New connection...```
seems like it is opening new connections to this IP all the time... don't know why


[11-Apr-19 07:21 AM] cipi#4502
also saw this once
`11 14:20:30, lp_network:119] Error expected value at line 1 column 1 parsing JSON from msg SP!`
could be related


[11-Apr-19 07:24 AM] cipi#4502
oh... theses are incoming connections... from another node... i will update this node too


[11-Apr-19 07:26 AM] artem.pikulin#0794
@cipi yes, old nodes are spamming with connections, please make sure that all nodes are updated.


[11-Apr-19 10:55 PM] artem.pikulin#0794
@MM2 community tester @SHossain If you have IP `116.203.55.133` or `1.171.42.89` please update your MM2 node ASAP. Your nodes `are not functional` at the moment and spamming the MM2 seednodes with connections.


[12-Apr-19 03:15 AM] smkhound#7640
got a couple of 404 links in docs
https://docs.komodoplatform.com/mmV1/installation/install-marketmakerV1.html#running-marketmakerv1

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/566204742208847906/unknown.png

{Embed}
https://docs.komodoplatform.com/mmV1/installation/install-marketmakerV1.html
Installing and Using MarketmakerV1 (in linux or MacOS) | Komodo Do...
Documentation for developers building on Komodo


[12-Apr-19 03:16 AM] smkhound#7640
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/566205013169405953/unknown.png

{Embed}
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[12-Apr-19 03:16 AM] smkhound#7640
are the v1 api commands available elsewhere?


[12-Apr-19 03:42 AM] SHossain#0007
@artem.pikulin those are not my ip


[12-Apr-19 03:43 AM] artem.pikulin#0794
@SHossain I see, thanks, just pinging you separately as usual as you're not in `MM2 community tester` group üôÇ


[12-Apr-19 03:44 AM] SHossain#0007
thanks very much for that. i can assign myself that tag if that helps you manage things


[12-Apr-19 03:44 AM] artem.pikulin#0794
@smkhound Hi, MM1 is deprecated, is there a reason to use it now instead of MM2?


[12-Apr-19 03:44 AM] artem.pikulin#0794
@SHossain Thanks, I've just assigned you MM2 tester role for convenience üôÇ

{Reactions}
üëçüèΩ 

[12-Apr-19 03:44 AM] SHossain#0007
cool.


[12-Apr-19 03:45 AM] smkhound#7640
no intention to use it, just reporting links in mm2 docs that refer to it are broken.
I was going to read up some more to anticipate the RPCs for future testing


[12-Apr-19 03:47 AM] artem.pikulin#0794
I think it would be best to remove MM1 from official docs at all, because as it's there people might think that it's usable and should work while it doesn't.

{Reactions}
üëç 

[12-Apr-19 03:54 AM] SHossain#0007
@gcharang ^^


[12-Apr-19 04:27 AM] gcharang#6833
Noted.

{Reactions}
Komodo 

[15-Apr-19 08:05 AM] gcharang#6833
The mmV1 docs are in docs.komodoplatform.com but not developers.komodoplatform.com

The second site is the one being linked in official materials and new comers

The docs already had this note in the second header:
```
BarterDEX is officially deprecated as of this writing and mm2 is under testing before public release.
```
I have heard ca333 saying, to not remove the docs for it until an appropriate alternative is available for use.

So, I was intending to keep the mmV1 docs up till mm2 is out for the public.
I can remove them if I can get confirmation


[17-Apr-19 04:31 AM] siu#3920
hi guys


[17-Apr-19 04:31 AM] siu#3920
im testing mm2 again after some weeks out of the loop


[17-Apr-19 04:31 AM] siu#3920
i used this parameter to get the client running: ```stdbuf -oL ./mm2 "{\"gui\":\"alien\",\"netid\":9998,\"seednode\":\"51.38.82.189\",\"mm2\":1,\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\",\"coins\":$coins}"```


[17-Apr-19 04:32 AM] siu#3920
but i get this out put when starting the client and calling electrum: ```17 11:30:52, peers:1202] initialize] netid 9998 public key 5491037c6539149fddbdc43eddfe14881b6b20a0504030257c9ad0c5c7de1a77 preferred port 47772 drill false
0.0.0.0 invalid pushsock.-1 or subsock.-1
17 11:30:52, mm2:214] mm2:329] mm2:116] lp_native_dex:1780] lp_native_dex:1557] lp_native_dex:1027] At least 1 IP must be provided
17 11:31:12, common:665] RPC error response: lp_coins:862] lp_coins:636] mm2 param is not set neither in coins config nor enable request, assuming that coin is not supported
{"error":"lp_coins:862] lp_coins:636] mm2 param is not set neither in coins config nor enable request, assuming that coin is not supported"}```


[17-Apr-19 04:33 AM] siu#3920
i did add mm2: 1 to the jl777/coins repo, does that makes a difference or not?


[17-Apr-19 04:38 AM] artem.pikulin#0794
@siu Hi, few changes need to be made:
1. Change `\"seednode\":\"51.38.82.189\"` to `\"seednodes\":[\"51.38.82.189\"]`, MM2 now accepts multiple seednodes as input.
2. On `51.38.82.189` add `\"i_am_seed\":true` to JSON cmd arg to let the node know it's seed.
3. Regarding the coin: did you download/update your local config after updating the repo?


[17-Apr-19 04:40 AM] siu#3920
```stdbuf -oL ./mm2 "{\"gui\":\"alien\",\"netid\":9998,\"seednode\":[\"51.38.82.189\"],\"i_am_seed\":true,\"mm2\":1,\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\",\"coins\":$coins}"```


[17-Apr-19 04:40 AM] siu#3920
?


[17-Apr-19 04:42 AM] siu#3920
```17 11:41:14, mm2:185] BarterDEX MarketMaker UNKNOWN
RPCport.0 remoteport.-1, nanoports 47761 47771 47781
17 11:41:14, lp_native_dex:1618] showwif.0 version: UNKNOWN
17 11:41:14, lp_native_dex:1703] lp_init] Trying to fetch the real IP from 'http://checkip.amazonaws.com/' ...
ÔøΩ
 2019-04-17 13:41:15 +0200 [myipaddr] We couldn't bind on the external IP 78.47.108.168 (port 47771), so NAT is likely to be present. We'll be okay though.
17 11:41:15, log:706] LogState] Bye!
17 11:41:15, mm2:214] mm2:329] mm2:116] lp_native_dex:1765] Address already in use (os error 98)
```


[17-Apr-19 04:43 AM] siu#3920
do i ned the "myipaddr" parameter?


[17-Apr-19 04:43 AM] siu#3920
i thought that was not needed anymore


[17-Apr-19 04:45 AM] artem.pikulin#0794
`\"seednodes\"`


[17-Apr-19 04:46 AM] artem.pikulin#0794
And also remove `\"i_am_seed\"` on node that is not seednode.


[17-Apr-19 04:46 AM] artem.pikulin#0794
There should be either `seednodes` arg or `i_am_seed`, not both.


[17-Apr-19 04:50 AM] siu#3920
but is there a netid with a seed node set?


[17-Apr-19 04:52 AM] artem.pikulin#0794
Yes, `9999` has 3 hardcoded seednodes: 1 mine and 2 cipi's.


[17-Apr-19 04:53 AM] siu#3920
and what ips they have or how i can connect to it?


[17-Apr-19 04:53 AM] siu#3920
seems like the old setup didnt work for me either


[17-Apr-19 04:54 AM] siu#3920
```stdbuf -oL ./mm2 "{\"gui\":\"alien\",\"myipaddr\":\"127.0.0.1\",\"netid\":9999,\"client\":1,\"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\",\"coins\":$coins}" &
```


[17-Apr-19 05:04 AM] siu#3920
got it working, thanks!


[18-Apr-19 11:02 PM] jorian#4555
is there a changelog for v1 to v2? like api changes?


[18-Apr-19 11:07 PM] jorian#4555
i found this: https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md is that up-to-date?

{Embed}
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[18-Apr-19 11:38 PM] artem.pikulin#0794
@jorian Hi, yes, this doc should be used as MM2 API reference. It's up to date, also I will add a couple of new methods soon.


[19-Apr-19 12:03 AM] jorian#4555
thanks üòÉ


[20-Apr-19 03:46 AM] siu#3920
Hello @artem.pikulin does the `listtransactions` call exist in mm2?


[20-Apr-19 06:01 AM] siu#3920
@artem.pikulin what could the issue bee here? ```20 12:59:23, lp_ordermatch:1269] bob sets negotiationdone.1555765163
20 12:59:23, lp_ordermatch:1023] bob 5491037c6539149fddbdc43eddfe14881b6b20a0504030257c9ad0c5c7de1a77 received CONNECT.(4809f3178af9375b37751542332af1ef)
20 12:59:23, lp_ordermatch:426] Entering the maker_swap_loop BEER/COQUI
20 12:59:23, lp_swap:554] Sending 'negotiation@db3a79b57bbbfe659b8f35cd6b66a5974809f3178af9375b37751542332af1ef' (69 bytes, crc 3642399073)
send CONNECT for 1767979183-2374607252
20 13:00:07, lp_swap:562] Received 'negotiation-reply@db3a79b57bbbfe659b8f35cd6b66a5974809f3178af9375b37751542332af1ef' (69 bytes, crc 3602323132)
20 13:00:07, lp_swap:578] Sending 'negotiated@db3a79b57bbbfe659b8f35cd6b66a5974809f3178af9375b37751542332af1ef' (1 bytes, crc 2768625435)
¬∑ 2019-04-20 15:00:51 +0200 [swap uuid=d4b43a1f4742bc31050e8b37f0ecd8667e4ca7428870df6f9110b9d28b6d7305] Finished
    Taker fee validate failed...
    Negotiated...
    Started...
```


[20-Apr-19 09:06 AM] artem.pikulin#0794
@siu Hi, `listransactions` will be available next week. For failed swap please provide response of `curl --url "http://127.0.0.1:7783" --data "{\"method\":\"my_swap_status\",\"params\":{\"uuid\":\"d4b43a1f4742bc31050e8b37f0ecd8667e4ca7428870df6f9110b9d28b6d7305\"},\"userpass\":\"$userpass\"}"`


[20-Apr-19 09:07 AM] siu#3920
I figured already, was due to low balance


[20-Apr-19 09:12 AM] siu#3920
Thanks for the update though


[22-Apr-19 09:19 AM] siu#3920
@artem.pikulin BTC is still not active to swap?


[22-Apr-19 09:21 AM] artem.pikulin#0794
@siu It's enabled by default, swap should work.


[22-Apr-19 09:21 AM] siu#3920
ok


[22-Apr-19 09:27 AM] siu#3920
what is the minimum order size for btc?


[22-Apr-19 09:36 AM] artem.pikulin#0794
There's no minimum order size currently, but to avoid dust errors (too small output amount) I'd recommend to trade no less than 0.01


[22-Apr-19 09:36 AM] artem.pikulin#0794
For any coin


[01-May-19 04:39 AM] hyperDEX#6586
@artem.pikulin i was told mm 2.0 is about 90% done. How long do you think it will take for the last 10% to be done and tested?


[01-May-19 04:40 AM] artem.pikulin#0794
The paradox of programming is "last" 10% usually take more time than first 90% üôÇ


[01-May-19 04:40 AM] hyperDEX#6586
ahha that is what i was thinking üòõ


[01-May-19 04:41 AM] hyperDEX#6586
You think year end would be achievable ?


[01-May-19 04:45 AM] artem.pikulin#0794
MM2 is actually usable but we need GUI, no exact timeline for this right now, there will be announcements about public tests starting. This year of course, should happen towards summer.


[01-May-19 04:57 AM] hyperDEX#6586
Is mm 2.0 backward compatible with all mm 1.0 apis?


[01-May-19 04:58 AM] hyperDEX#6586
If so we could probably get hyperDEX to use mm 2.0 pretty easily


[01-May-19 05:19 AM] artem.pikulin#0794
No, many of APIs are changed or removed at all. The list of currently working RPC methods can be found here: https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003

{Reactions}
üëç 

[01-May-19 05:44 AM] jorian#4555
We are doing a beta test right now


[01-May-19 05:45 AM] jorian#4555
Using mm2.0


[01-May-19 05:48 AM] jorian#4555
works on all 3 platforms

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/573128548823334922/unknown.png


[01-May-19 05:48 AM] jorian#4555
well, BCH and BTC don't work yet, but i saw an issue was already reported about that


[01-May-19 07:02 AM] artem.pikulin#0794
BTC works, but requires dynamic fee hadling improvement, the trade will be expensive for now. BCH doesn't. Going to work on both on this week.


[03-May-19 04:41 AM] artem.pikulin#0794
@MM2 community tester Hi, the most recent update to MM2 contains important change. - KMD and BTC are not enabled by default anymore and should be added to `coins` config. It caused several issues (up to MM2 can't be started at all), all of them are now gone.
Please enable KMD and BTC explicitly with `electrum/enable` call if required.

{Reactions}
üëç (6) 

[03-May-19 04:41 AM] siu#3920
cool


[03-May-19 08:22 AM] siu#3920
there seems to be a weird thing happening with latest release


[03-May-19 08:22 AM] siu#3920
it is encoding seeds differently


[03-May-19 08:56 AM] artem.pikulin#0794
Using seed phrases is not broken, but if you set the `WIF` as seed MM2 won't recognize it now as the privkey initialization code changed. I will fix it tomorrow.

{Reactions}
üëç 

[03-May-19 12:11 PM] siu#3920
@artem.pikulin how is BTC handled in coins file now? There is no BTC entrance in github.com/jl777/coins repo


[03-May-19 12:14 PM] siu#3920
enabling it with electrum gives me this response: ``` curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"BTC\",\"urls\":[\"electrum1.cipig.net:10000\",\"electrum2.cipig.net:10000\",\"electrum3.cipig.net:10000\"]}"
ÔøΩ
 2019-05-03 21:14:10 +0200 [coin BTC no-conf] Warning, coin BTC is used without a corresponding configuration.
03 19:14:10, common:668] RPC error response: lp_coins:876] lp_coins:677] mm2 param is not set neither in coins config nor enable request, assuming that coin is not supported
{"error":"lp_coins:876] lp_coins:677] mm2 param is not set neither in coins config nor enable request, assuming that coin is not supported"}```


[03-May-19 12:25 PM] cipi#4502
https://raw.githubusercontent.com/cipig/coins/mymm/coins


[03-May-19 12:29 PM] siu#3920
thanks cipi!


[03-May-19 12:29 PM] siu#3920
starting latest code crashed for me: https://pastebin.com/LyLdM5VE

{Embed}
https://pastebin.com/LyLdM5VE
./client &  [3] 17318  siu@Ubuntu-1604-xenial-64-minimal:~/SuperNE...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[03-May-19 12:34 PM] cipi#4502
`Can't bind on 127.0.0.1:7783` ... i would say mm2 is already running, or some other process is already using port 7783


[03-May-19 12:41 PM] siu#3920
jikes, that was it.


[03-May-19 01:03 PM] siu#3920
BTC swaps are still failing the same way.


[03-May-19 01:11 PM] cipi#4502
the file in DB/SWAPS/MY/ should contain the exact error message


[03-May-19 01:13 PM] cipi#4502
pipe it through json_pp, else the whole file will be shown as one line, but only one part is important


[03-May-19 01:14 PM] siu#3920
https://pastebin.com/DscLEA9L

{Embed}
https://pastebin.com/DscLEA9L
{"result":{"error_events":["StartFailed","NegotiateFailed","TakerF...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[03-May-19 01:14 PM] siu#3920
my_swap_status command


[03-May-19 01:15 PM] siu#3920

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/573965995157225472/d971d526e36810ee5b2f5e4888d8b18e094feea02c0f16e60d8bbf5809097163.json


[03-May-19 01:16 PM] siu#3920
swap file


[03-May-19 01:17 PM] cipi#4502
```            "timestamp" : 1556913811175,
            "event" : {
               "data" : {
                  "error" : "lp_swap:1194] utxo:448] jsonrpc_client:66] Rpc request JsonRpcRequest { jsonrpc: \"2.0\", id: \"31\", method: \"blockchain.transaction.broadcast\", params: [String(\"0400008085202f89015abc7e85b937951dadb01c0625d1079dd731c93cd038f9cb9e1b7511113cd9594b0000006b4830450221009a8f7a26d18aeb5419db04c66d807a3ef9c569fc6f976be99c33680e96667a32022016bb53e3be1a8ae36db078ad222240c3352a82a522e556497a61280b95934b2b0121025aa4e43447e4a7b8db856a7e75e8912e60232992a6f837078d92d3f2da27be5cffffffff02f5000000000000001976a914ca1e04745e8ca0c60d8c5881531d51bec470743f88acbd760a00000000001976a914125dc3335fbe5ac697492d168181dff8e74dd39588ac929ecc5c000000000000000000000000000000\")] } failed with error, response: JsonRpcResponse { jsonrpc: \"2.0\", id: \"31\", result: Null, error: Object({\"code\": Number(1), \"message\": String(\"the transaction was rejected by network rules.\\n\\nTX decode failed\\n[0400008085202f89015abc7e85b937951dadb01c0625d1079dd731c93cd038f9cb9e1b7511113cd9594b0000006b4830450221009a8f7a26d18aeb5419db04c66d807a3ef9c569fc6f976be99c33680e96667a32022016bb53e3be1a8ae36db078ad222240c3352a82a522e556497a61280b95934b2b0121025aa4e43447e4a7b8db856a7e75e8912e60232992a6f837078d92d3f2da27be5cffffffff02f5000000000000001976a914ca1e04745e8ca0c60d8c5881531d51bec470743f88acbd760a00000000001976a914125dc3335fbe5ac697492d168181dff8e74dd39588ac929ecc5c000000000000000000000000000000]\")}) }"
               },
               "type" : "TakerFeeSendFailed"```


[03-May-19 01:18 PM] siu#3920
yep, that is the error i always get


[03-May-19 01:20 PM] cipi#4502
taker is BTC... but `bitcoin-cli decoderawtransaction hex` is showing `TX decode failed`, just like in the error message
`komodo-cli decoderawtransaction hex` with same hex is working though... looks like mm2 confused takercoin with makercoin


[03-May-19 01:21 PM] siu#3920
``` curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"setprice\",\"base\":\"KMD\",\"rel\":\"BTC\",\"price\": 0.00019,\"broadcast\":1}"```


[03-May-19 01:22 PM] siu#3920
this is my `setpirce`


[03-May-19 01:23 PM] siu#3920
which i think is correct


[03-May-19 01:23 PM] cipi#4502
does not really matter, since the ordermatch worked, else you would not have a SWAPS file
the problem is the error from that SWAPS file


[03-May-19 01:24 PM] siu#3920
ok, so maybe the mm2 is inverting the takefee hex


[03-May-19 01:25 PM] siu#3920
like you say


[03-May-19 01:26 PM] cipi#4502
it is inverting the whole makercoin and takercoin
it shows
`"taker_coin" : "BTC"`
`"maker_coin" : "KMD"`
but the failed tx is TakerFeeSendFailed, because the tx from there is a KMD tx, not a BTC tx, so the BTC wallet correctly denies that tx


[03-May-19 01:27 PM] cipi#4502
@artem.pikulin


[03-May-19 01:28 PM] cipi#4502
i always used KMD as taker_coin, so this problem never showed up here


[03-May-19 01:31 PM] cipi#4502
looks like it is the same issue as here: https://github.com/artemii235/SuperNET/issues/385

{Embed}
https://github.com/artemii235/SuperNET/issues/385
KMD/BTC swap fails, taker fee send fails ¬∑ Issue #385 ¬∑ artemii2...
Describe the bug Trying to buy Komodo with Bitcoin fails. Negotiation happens but taker fee send fails. Please answer following questions and attach requested info - it&#39;ll help to solve iss...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[03-May-19 01:34 PM] siu#3920
yes, i have been following the issue in the repo.


[03-May-19 01:35 PM] siu#3920
Lol @cipi i think you are giving the finger to artem above üòÇ


[03-May-19 01:35 PM] siu#3920
im sure that is not waht you meant.


[03-May-19 01:36 PM] SHossain#0007
haha...this emoji is confusing with point up üòÑ


[03-May-19 01:38 PM] cipi#4502
oh, damn, that was not my intention...
i added a comment to the above issue...


[03-May-19 01:38 PM] siu#3920
great!


[03-May-19 01:42 PM] cipi#4502
good thing about this is that i think it should be easy to fix
i guess just replacing takercoin with makercoin somewhere in the code should do the job


[03-May-19 08:53 PM] artem.pikulin#0794
I've just started KMD/BTC swap on my own and it passes taker fee stage: https://www.blockchain.com/btc/tx/57aa0c800938f9d3faab2a85ed65140ab995536e933215358653cdbcfb392519


[03-May-19 08:54 PM] artem.pikulin#0794
It doesn't look like that taker coin is replaced with maker coin, it looks like BTC has wrong txversion somehow.


[03-May-19 08:55 PM] artem.pikulin#0794
@cipi and @siu - could you please try to `withdraw` the BTC to your own address without `send_raw_transaction`, please show the `tx_hex` of result.


[03-May-19 08:56 PM] artem.pikulin#0794
Here is the BTC taker payment: https://www.blockchain.com/btc/tx/8cdfecc5f583bbcc99ef696eb993b0d5e732c6152004ca0a3294e17975c93999


[03-May-19 09:05 PM] artem.pikulin#0794
Taker payment spent: https://blockstream.info/tx/9e5ec910d55c37c3dfc84815bc9ad92a7c879fd26ba677b6f5a24b4d7482ba53

{Embed}
https://blockstream.info/tx/9e5ec910d55c37c3dfc84815bc9ad92a7c879fd26ba677b6f5a24b4d7482ba53
Bitcoin Explorer
https://images-ext-1.discordapp.net/external/Ezv078UsqyWj6-jTLfmnnkI_5oCKZo94bIRcwbBDa7E/https/blockstream.info/img/social-sharing.png


[03-May-19 09:06 PM] artem.pikulin#0794
The fee is big as my maker node was not updated with latest dynamic fee handling.


[03-May-19 09:13 PM] cipi#4502
```{
  "txid": "30005ddb1dce08225f65517644919bd749389cfe29df68b08b4cd70b93ae6326",
  "overwintered": true,
  "version": 4,
  "versiongroupid": "892f2085",
  "locktime": 1556830476,
  "expiryheight": 0,
  "vin": [
    {
      "txid": "920ec760d2ff950c6a823bd64464faa7f838670a677bd66c3173f2eed815ef60",
      "vout": 0,
      "scriptSig": {
        "asm": "3045022100b0261349cc40a790312bd9f5a5af40b16861b3a32c99458094628224987908d4022020384a56c516597862319a5870f11ea19031a3f379f24d0580e923db07caf118[ALL] 031650607bf13082f2edfc2f84e8737a9ee2a42e2f99d38660cccad6a04f868812",
        "hex": "483045022100b0261349cc40a790312bd9f5a5af40b16861b3a32c99458094628224987908d4022020384a56c516597862319a5870f11ea19031a3f379f24d0580e923db07caf1180121031650607bf13082f2edfc2f84e8737a9ee2a42e2f99d38660cccad6a04f868812"
      },
      "sequence": 4294967295
    }
  ],
  "vout": [
    {
      "value": 0.00002298,
      "interest": 0.00000000,
      "valueZat": 2298,
      "n": 0,
      "scriptPubKey": {
        "asm": "OP_DUP OP_HASH160 ca1e04745e8ca0c60d8c5881531d51bec470743f OP_EQUALVERIFY OP_CHECKSIG",
        "hex": "76a914ca1e04745e8ca0c60d8c5881531d51bec470743f88ac",
        "reqSigs": 1,
        "type": "pubkeyhash",
        "addresses": [
          "RThtXup6Zo7LZAi8kRWgjAyi1s4u6U9Cpf"
        ]
      }
    },
    {
      "value": 0.01987462,
      "interest": 0.00000000,
      "valueZat": 1987462,
      "n": 1,
      "scriptPubKey": {
        "asm": "OP_DUP OP_HASH160 90c11e0a72f3bb8010f6aa15529e1772a44787d4 OP_EQUALVERIFY OP_CHECKSIG",
        "hex": "76a91490c11e0a72f3bb8010f6aa15529e1772a44787d488ac",
        "reqSigs": 1,
        "type": "pubkeyhash",
        "addresses": [
          "RNUajAhtAMB4P7j9q6QeiPrqnmZVGc1SgA"
        ]
      }
    }
  ],
  "vjoinsplit": [
  ],
  "valueBalance": 0.00000000,
  "vShieldedSpend": [
  ],
  "vShieldedOutput": [
  ]
}```


[03-May-19 09:13 PM] cipi#4502
this is the decoded tx from sius swap try... the addresses are KMD addresses, but it should be BTC...


[03-May-19 09:14 PM] cipi#4502
i think the difference is that he tried to buy KMD with BTC, and you are trying to buy BTC with KMD


[03-May-19 09:16 PM] cipi#4502
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"withdraw\",\"coin\":\"BTC\",\"to\":\"1NdwJoQVLxj5kCHXKcaLxWrByddbgyHofb\",\"amount\":0.001}"`
is showing
```{"tx_hex":"0100000001e5715636c5d0aafcb5774bb444fc52dbf9f24c698d1f3a62bc852da2083f5642240000006b483045022100fc783652be4975b5ff8f62216902ce782d4246dd3c6a5c48b556d3e84a448fd402200b2d9ecd9c4fe90fdb9aa0f40e0c9293e95ebc7aca0176f1b1c6463d640a2d0b0121026da2fc632afabbb1b86d04a9a012db25eca74db38ba2eccd88552f27f4c0b245ffffffff02a0860100000000001976a914ed56f2feb905938b45d2e009ec14add0e7d0157288ac84100200000000001976a914ed56f2feb905938b45d2e009ec14add0e7d0157288acea11cd5c","tx_hash":"da265f16555f713cad6bbee1f39701b28ea066135c955b935a9ffa131bb687ae","from":["1NdwJoQVLxj5kCHXKcaLxWrByddbgyHofb"],"to":["1NdwJoQVLxj5kCHXKcaLxWrByddbgyHofb"],"total_amount":0.002553,"spent_by_me":0.002553,"received_by_me":0.002353,"my_balance_change":-0.0002,"block_height":0,"timestamp":1556943338,"fee_details":{"amount":0.0002},"coin":"BTC","internal_id":""}```
looks ok to me


[03-May-19 09:16 PM] artem.pikulin#0794
I've bought BTC with KMD.


[03-May-19 09:17 PM] cipi#4502
try the other way round


[03-May-19 09:17 PM] cipi#4502
so that BTC is taker coin


[03-May-19 09:17 PM] artem.pikulin#0794
BTC was `taker` coin.


[03-May-19 09:17 PM] artem.pikulin#0794
It sent the dex fee and taker payment.


[03-May-19 09:18 PM] cipi#4502
hmmm, ok, maybe siu should tell us his setprice and buy-call, i am not sure what he did


[03-May-19 09:18 PM] artem.pikulin#0794
It's not `setprice`, `buy`, `sell` issue.


[03-May-19 09:18 PM] artem.pikulin#0794
I've asked to provide `actual` coin config in Github issue but didn't get the response to it.


[03-May-19 09:19 PM] artem.pikulin#0794
It's like BTC has `txversion:4` or `asset:BTC` in config which causes MM2 to generate the transaction in wrong format.


[03-May-19 09:20 PM] artem.pikulin#0794
It's already told, but ignored for some reason: https://github.com/artemii235/SuperNET/issues/385#issuecomment-488930614

{Embed}
https://github.com/artemii235/SuperNET/issues/385
KMD/BTC swap fails, taker fee send fails ¬∑ Issue #385 ¬∑ artemii2...
Describe the bug Trying to buy Komodo with Bitcoin fails. Negotiation happens but taker fee send fails. Please answer following questions and attach requested info - it&#39;ll help to solve iss...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[03-May-19 09:26 PM] artem.pikulin#0794
https://gist.github.com/artemii235/f968233538c021b78adff40766ab3ce7 - just to confirm that KMD/BTC swap worked.

{Embed}
https://gist.github.com/artemii235/f968233538c021b78adff40766ab3ce7
KMD/BTC swap
KMD/BTC swap. GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003

{Reactions}
üëå 

[04-May-19 04:11 AM] siu#3920
I cant find this config


[04-May-19 04:11 AM] siu#3920
The only config is the one in the coins file


[04-May-19 04:32 AM] siu#3920
this is the config on one of the servers: ```{\"coin\":\"BTC\",\"name\":\"bitcoin\",\"fname\":\"Bitcoin\",\"rpcport\":8332,\"pubtype\":0,\"p2shtype\":5,\"wiftype\":128,\"txfee\":20000,\"mm2\":1```


[04-May-19 04:32 AM] siu#3920
@artem.pikulin


[04-May-19 08:24 AM] cipi#4502
@siu simply do this:
`cd ~/SuperNET/etomic_build/client && rm coins && wget https://raw.githubusercontent.com/cipig/coins/mymm/coins`
and start mm2 like this: `../../target/debug/mm2 "{\"netid\":9999,\"gui\":\"nogui\",\"client\":1, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\"}"`
it will use the coin config from the file


[04-May-19 08:34 AM] siu#3920
```/home/siu/SuperNET/etomic_build/client/coins: line 1: [: missing `]'            
/home/siu/SuperNET/etomic_build/client/coins: line 2894: syntax error: unexpected end of file
```


[04-May-19 08:34 AM] siu#3920
seems like there is a syntax error


[04-May-19 08:34 AM] siu#3920
i think i know.


[04-May-19 08:35 AM] siu#3920
no, seems like the format mm2 is expecting is different


[04-May-19 08:35 AM] siu#3920
testing again.


[04-May-19 08:38 AM] siu#3920
```source coins
coins:[:1: ']' expected
coins:2894: parse error near `\n'
```


[04-May-19 08:39 AM] siu#3920
still the same.


[04-May-19 09:03 AM] cipi#4502
no `source coins`, you don't need the coins in an environment variable, mm2 will read the file


[04-May-19 09:04 AM] cipi#4502
this is my `client` file that i use to start mm2
```#!/bin/bash
source passphrase
stdbuf -oL nohup ../../target/debug/mm2 "{\"netid\":9999,\"gui\":\"nogui\",\"client\":1, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\"}" > /tmp/mm.log &```


[04-May-19 09:09 AM] cipi#4502
it will read the file `coins` located in the same directory


[04-May-19 12:24 PM] siu#3920
Ok, will test this later


[05-May-19 07:21 AM] artem.pikulin#0794
@siu `this is the config on one of the servers: ` Hi, please provide all the `coins` content either from CMD or `coins` file, does this `one of the servers` have error on BTC swap? I need config from the node that tested and confirmed to have the error.


[05-May-19 07:23 AM] siu#3920
This is the config from my laptop ```const data = [
  {
    coin: 'BTC',
    name: 'Bitcoin',
    asset: 'BTC',
    urls: ['electrum1.cipig.net:10000', 'electrum2.cipig.net:10000'],
    active: 1,
    market_cap: 97822306639,
    mm2: 1
},```


[05-May-19 07:26 AM] jorian#4555
```6:19 AM] artem.pikulin: It's like BTC has txversion:4 or asset:BTC in config which causes MM2 to generate the transaction in wrong format.```


[05-May-19 07:27 AM] jorian#4555
i think i see the problem


[05-May-19 07:27 AM] artem.pikulin#0794
`asset: 'BTC'`


[05-May-19 07:27 AM] siu#3920
asset: BTC


[05-May-19 07:27 AM] siu#3920
i just delete that? or is asset supposed to be something different?


[05-May-19 07:28 AM] artem.pikulin#0794
`asset` means `Komodo assetchain` so as BTC is not an assetchain it should be just removed.


[05-May-19 07:28 AM] artem.pikulin#0794
And MM2 uses `txversion:4 + overwintered` format for all assetchains by default.


[05-May-19 07:29 AM] siu#3920
ok


[05-May-19 07:29 AM] siu#3920
so completely removing it should fix this.


[05-May-19 07:29 AM] artem.pikulin#0794
Yes


[05-May-19 08:12 AM] siu#3920
Can confirm `asset: BTC` was the root cause of btc swaps not working: ```05 15:10:09, lp_swap:753] Taker payment spend tx 200c499eb0439a6bc000d5fe1d26e436326e73f0042fe3650ebaf04c5b13013e
¬∑ 2019-05-05 17:10:09 +0200 [swap uuid=d941fc3c86fc64b01178182a874e052779010d2512dadcd53b6d7482c8d009da] Finished
    Taker payment spent...
    Taker payment validated and confirmed...
    Taker payment wait confirm started...
    Taker payment received...
    Maker payment sent...
    Taker fee validated...
    Negotiated...
    Started...
```

{Reactions}
üî• 

[06-May-19 04:21 AM] hyperDEX#6586
@jl777c  do you mind if i add Luke into this channel?


[06-May-19 04:21 AM] jl777c#5810
its not my channel, but i have no objections


[06-May-19 04:22 AM] hyperDEX#6586
@artem.pikulin ^^ same question hehe


[06-May-19 04:23 AM] artem.pikulin#0794
I have no objections too


[06-May-19 04:23 AM] artem.pikulin#0794
Anyone trying to use/test MM2 is welcome here.


[06-May-19 04:24 AM] hyperDEX#6586
Hmmm how can i add some someone to a private channel im not admin/mod over?


[06-May-19 04:24 AM] hyperDEX#6586
Found it


[06-May-19 04:27 AM] hyperDEX#6586
Actually @artem.pikulin are you able to invite luke to the channel?


[06-May-19 04:27 AM] artem.pikulin#0794
Yes, going to assign `MM2 community tester` role to him.


[06-May-19 04:27 AM] hyperDEX#6586
Thanks üòÉ


[06-May-19 04:28 AM] artem.pikulin#0794
Done


[06-May-19 04:29 AM] hyperDEX#6586
Thanks.


[06-May-19 04:29 AM] lukechilds#2707
thanks guys


[06-May-19 04:29 AM] lukechilds#2707
I've been hearing good things about MM2, looking forward to having a play


[06-May-19 04:33 AM] hyperDEX#6586
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md is this the latest API doc?

{Embed}
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[06-May-19 04:34 AM] Kiruel#2091
@hyperDEX https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md#arguments

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[06-May-19 04:37 AM] hyperDEX#6586
Thanks @Kiruel

{Reactions}
üëå 

[06-May-19 04:38 AM] hyperDEX#6586
Silly question but is there a change log of changes in the API from mm 1.0 to mm 2.0?


[06-May-19 04:48 AM] artem.pikulin#0794
There's no such changelog, most of MM1 methods were not ported yet (and I'm not sure if all of them are necessary). All currently working methods are mentioned in docs, if you need something specific from MM1 that is not mentioned there please let me know.

{Reactions}
Komodo 

[06-May-19 04:52 AM] hyperDEX#6586
ta


[06-May-19 08:27 AM] cipi#4502
@artem.pikulin does the address shown in orderbook have some meaning?
this are the asks from BTC/KMD
```   "asks" : [
      {
         "depth" : "0",
         "coin" : "BTC",
         "pubkey" : "5491037c6539149fddbdc43eddfe14881b6b20a0504030257c9ad0c5c7de1a77",
         "avevolume" : "0",
         "address" : "14p5cGy5DZmtNMQwTQiytBvxMVuTmFMSyU",
         "zcredits" : "0",
         "price" : 5263.14990234,
         "age" : 9,
         "maxvolume" : 0.00065001,
         "numutxos" : "0"
      },
      {
         "pubkey" : "bab6ad2eebe1e666369cab504d4622b22c1f1ef718ef388e88020f30a1573e01",
         "avevolume" : "0",
         "depth" : "0",
         "coin" : "BTC",
         "zcredits" : "0",
         "price" : 5536.29541016,
         "maxvolume" : 0.02620853,
         "age" : 6,
         "numutxos" : "0",
         "address" : "14p5cGy5DZmtNMQwTQiytBvxMVuTmFMSyU"
      }```


[06-May-19 08:28 AM] cipi#4502
both entries have the same address... and my own `bab6ad2eebe1e666369cab504d4622b22c1f1ef718ef388e88020f30a1573e01` entry has the wrong address, the correct address is `1NdwJoQVLxj5kCHXKcaLxWrByddbgyHofb`


[06-May-19 08:32 AM] artem.pikulin#0794
It should be the address that belongs to node placed the order, but it doesn't look valid. Maybe it's an orderbook displaying bug, please create an issue on Github, I'll investigate it.


[06-May-19 08:33 AM] cipi#4502
ok, will do, thanks


[09-May-19 11:28 AM] siu#3920
Has anyone teste swap with btc 0.17 codebase?


[09-May-19 11:49 PM] jorian#4555
i have had trouble with the last step in the process. Or rather, mm2.0 had trouble: ```
  barterdex-api:server:control LOG:     Maker payment spend failed... +0ms
  barterdex-api:server:control LOG:     Taker payment spent... +0ms
  barterdex-api:server:control LOG:     Taker payment sent... +0ms
  barterdex-api:server:control LOG:     Maker payment validated and confirmed... +0ms
  barterdex-api:server:control LOG:     Maker payment wait confirm started... +0ms
  barterdex-api:server:control LOG:     Maker payment received... +0ms
  barterdex-api:server:control LOG:     Taker fee sent... +0ms
  barterdex-api:server:control LOG:     Negotiated... +0ms```


[09-May-19 11:50 PM] jorian#4555
`swap uuid=0ff8cda0d0a09fdd64f0551feef2023245a604adfa4aeed3b357b38cb1d0984f`


[09-May-19 11:51 PM] jorian#4555
the maker got the payment starting here:  https://www.kmdexplorer.io/tx/569c092f55f8c2c03e75c66336e1f9d9e2ea854dffca3c11a6b74d55d8a6a25a


[09-May-19 11:53 PM] jorian#4555
but the taker didn't get his DEX here: https://dex.kmdexplorer.io/tx/170a56b56ddd5ec918704e8d81e2d520b71f871996969da72bf8962bffc2c3be


[09-May-19 11:53 PM] jorian#4555
2 swaps are in limbo state


[10-May-19 12:19 AM] jorian#4555
doing a beer - pizza swap did work, though. probably something wrong on my side since the DEX pair is mine


[10-May-19 12:19 AM] artem.pikulin#0794
Hi, please always provide the `my_swap_status` of `both` sides when you have issues, logs are displaying general swap state without error messages. Also taking a look at `my_swap_status` at your own might help you to understand what the issue is.


[10-May-19 12:20 AM] artem.pikulin#0794
It will also save yours and others time, `my_swap_status` is a `must` when swap fails.


[10-May-19 12:20 AM] artem.pikulin#0794
Sorry, the above message is to @jorian


[10-May-19 12:24 AM] artem.pikulin#0794
`my_swap_status` at docs: https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md#my_swap_status, so in your case the request is `curl --url "http://127.0.0.1:7783" --data "{\"method\":\"my_swap_status\",\"params\":{\"uuid\":\"0ff8cda0d0a09fdd64f0551feef2023245a604adfa4aeed3b357b38cb1d0984f\"},\"userpass\":\"$userpass\"}"`.

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[10-May-19 12:37 AM] jorian#4555
i figured it out, will use my_swap_status next time


[10-May-19 12:40 AM] jorian#4555
i do need help with unlocking the funds in that p2sh address, though


[10-May-19 12:40 AM] jorian#4555
seems i didn't set txversion:4 on DEX asset, :abusedsmily:


[10-May-19 12:47 AM] artem.pikulin#0794
`i do need help with unlocking the funds in that p2sh address, though` - as of now MM2 is not refunding/spending the payment in case of failure. I can add new API call pretty fast that attempts to `spend/refund` again on user demand. We also discussed the automatic `continue/rollback` in case of errors, but it seemed non-trivial and error-prone approach.
Summary: let your `stuck` payment be there for a while, I will add the `unstuck` call and get back to you to test it.


[10-May-19 12:47 AM] jorian#4555
ok


[10-May-19 12:50 AM] jorian#4555
@cipi i noticed that your coins file lists some assets that are not yet tagged with mm2.0


[10-May-19 08:16 AM] cipi#4502
i only added mm2:1 to the coins that i tested with mm2, like in this PR: https://github.com/jl777/coins/commit/f6b2b510992e2e10df90755185ae5ae08057fa9b

{Embed}
https://github.com/jl777/coins/commit/f6b2b510992e2e10df90755185ae5ae08057fa9b
LTC is mm2 compatible ¬∑ jl777/coins@f6b2b51
https://images-ext-1.discordapp.net/external/DEpA_yVWgnDGALxS6REG6mxdIdhRpohnMBi-sUxykW0/%3Fs%3D200%26v%3D4/https/avatars2.githubusercontent.com/u/32116761


[10-May-19 08:39 AM] cipi#4502
@artem.pikulin enabling some ERC20 tokens shows an error
`10 15:35:49, common:678] RPC error response: lp_coins:863] lp_coins:834] eth:1737] eth:1706] Invalid address checksum`
was working yesterday, so i assume it was introduced with the latest commit
ICN, ETH are working
DROP, LIKE are not working


[10-May-19 06:03 PM] artem.pikulin#0794
@cipi Hi, according to the changes of https://github.com/artemii235/SuperNET/issues/394, the etomic field in coins should be provided in mixed-case checksum form, so for DROP it will be: `0x4672bAD527107471cB5067a887f4656D585a8A31` and for LIKE `0x02F61Fd266DA6E8B102D4121f5CE7b992640CF98`. The easiest way to get the mixed-case encoded address is to search for address on etherscan, e.g.:

{Embed}
https://github.com/artemii235/SuperNET/issues/394,
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[10-May-19 06:03 PM] artem.pikulin#0794

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/576575182584414220/unknown.png


[10-May-19 06:04 PM] artem.pikulin#0794
`withdraw` call for ETH/ERC20 now requires the address to be in mixed-case form too.


[10-May-19 06:06 PM] cipi#4502
i just enabled DROP
this is the entry in coins file
```  {
    "coin":"DROP",
    "name":"dropil",
    "fname": "Dropil",
    "etomic":"0x4672bad527107471cb5067a887f4656d585a8a31",
    "rpcport":80
  },```
and this is enable call:
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"DROP\",\"urls\":[\"http://eth1.cipig.net:8555\",\"http://eth2.cipig.net:8555\",\"http://eth3.cipig.net:8555\"],\"swap_contract_address\":\"0x8500AFc0bc5214728082163326C2FF0C73f4a871\",\"mm2\":1}"`


[10-May-19 06:07 PM] artem.pikulin#0794
Shouldn't have worked with latest commit.


[10-May-19 06:07 PM] cipi#4502
oh, i think see what you mean: `0x4672bad527107471cb5067a887f4656d585a8a31` not equal `0x4672bAD527107471cB5067a887f4656D585a8A31`?


[10-May-19 06:08 PM] cipi#4502
no, DROP does not work with latest, ETH does


[10-May-19 06:08 PM] artem.pikulin#0794
Please change
```
  {
    "coin":"DROP",
    "name":"dropil",
    "fname": "Dropil",
    "etomic":"0x4672bad527107471cb5067a887f4656d585a8a31",
    "rpcport":80
  },
```


[10-May-19 06:08 PM] artem.pikulin#0794
to
```
  {
    "coin":"DROP",
    "name":"dropil",
    "fname": "Dropil",
    "etomic":"0x4672bAD527107471cB5067a887f4656D585a8A31",
    "rpcport":80
  },
```


[10-May-19 06:09 PM] cipi#4502
yes, clear now, thanks


[10-May-19 06:09 PM] cipi#4502
will do


[10-May-19 06:10 PM] artem.pikulin#0794
`oh, i think see what you mean: 0x4672bad527107471cb5067a887f4656d585a8a31 not equal 0x4672bAD527107471cB5067a887f4656D585a8A31?` - it's actually equal, but the mixed-case form is recommended to use by ETH as it lowers the chance of address mistyping: https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md#rationale

{Embed}
https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md
ethereum/EIPs
The Ethereum Improvement Proposal repository. Contribute to ethereum/EIPs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/LtMFsMTLUhKgO8tTv7Iif0D9OEsT7DR15aa-48Pq4XM/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/6250754


[10-May-19 06:11 PM] artem.pikulin#0794
I think I will write a small script that will convert all `etomic` fields to mixed-case form and make a PR to https://github.com/jl777/coins/

{Embed}
https://github.com/jl777/coins/
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[10-May-19 06:12 PM] cipi#4502
or the one that is testing a swap with this tokens on mm2 sets the mm2-flag and changes the `etomic` field too üòâ


[10-May-19 06:13 PM] artem.pikulin#0794
This part will require additional preparation step, we first need to give few tokens to testing address somehow, but sure, this process can be automated and it's not hard.


[12-May-19 04:21 PM] cipi#4502
@artem.pikulin can you please invite @Bongistan ? He would like to test mm2.


[12-May-19 10:55 PM] artem.pikulin#0794
@cipi Hi, it's done. @Bongistan welcome!


[13-May-19 02:13 AM] Bongistan#2965
Thanks @artem.pikulin


[14-May-19 05:14 AM] SHossain#0007
@cipi when you get some time, could you please look into adding GIN?


[14-May-19 05:14 AM] SHossain#0007
GIN is already being dPoW'd


[14-May-19 05:22 AM] Kiruel#2091
@SHossain GIN ?


[14-May-19 05:22 AM] SHossain#0007
yes


[14-May-19 05:22 AM] Kiruel#2091
What is it ?


[14-May-19 05:22 AM] SHossain#0007
Gincoin


[14-May-19 05:22 AM] Kiruel#2091
It's a coin ?


[14-May-19 05:22 AM] SHossain#0007
let me find their source


[14-May-19 05:22 AM] SHossain#0007
yes, a coin. they have masternodes and succh


[14-May-19 05:22 AM] Kiruel#2091
https://gincoin.io/


[14-May-19 05:22 AM] Kiruel#2091
?


[14-May-19 05:23 AM] SHossain#0007
https://github.com/GIN-coin/gincoin-core

{Embed}
https://github.com/GIN-coin/gincoin-core
GIN-coin/gincoin-core
GINcoin Core is the official wallet of the GINcoin cryptocurrency - GIN-coin/gincoin-core
https://images-ext-2.discordapp.net/external/PmJew1Q4h5OBxVA33spk4bhFC0HdsBrPs8CqUu4ZcmM/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/45803563


[14-May-19 05:23 AM] SHossain#0007
yes, your URL is correct


[14-May-19 05:23 AM] Kiruel#2091
A dash fork.


[14-May-19 05:23 AM] Kiruel#2091
What you think @ca333 ?


[14-May-19 05:24 AM] cipi#4502
GIN is already added: https://github.com/jl777/coins/blob/master/coins#L362

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[14-May-19 05:24 AM] SHossain#0007
Ah...cool. Thanks @cipi


[14-May-19 05:25 AM] Kiruel#2091
Ok nvm.


[14-May-19 05:26 AM] SHossain#0007
i sent message to pbca26 for Agama integration


[14-May-19 05:26 AM] cipi#4502
i will make a test swap with mm2, pretty sure it will work with mm2 too


[14-May-19 05:27 AM] SHossain#0007
fantastic.


[14-May-19 05:28 AM] SHossain#0007
jl777's idea is to add all 3rd party coins that are using dPoW into Agama and MM2


[14-May-19 05:29 AM] cipi#4502
haha, i have setup GAME, EMC2 and GIN on the new mm2 LP, just didn't done a testswap with mm2...


[14-May-19 05:31 AM] SHossain#0007
üòÉ


[14-May-19 05:54 AM] ca333#0333
fyi - we will be using a small list of initially supported coins - solid coins with decent community or exclusive ACs. Others are welcome to request a coin-listing. More infos ref. this process soon.

{Reactions}
‚úÖ 

[14-May-19 05:55 AM] ca333#0333
^ ref. mobile DEX app. 
And barterDEX 2.0 backend software supports 99.x % of all  CMC-coins anyway.


[14-May-19 05:56 AM] cipi#4502
the coins on this node already have an orderbook in mm2: http://olebr6e22lght5m4.onion/cgi-bin/icinga/status.cgi?host=mm_2&style=detail&limit=0&start=1 (guest/guest)


[14-May-19 05:57 AM] cipi#4502
GIN, EMC2 and GAME are also among them


[14-May-19 05:57 AM] SHossain#0007
.onion pages don't open in normal browser?


[14-May-19 05:58 AM] cipi#4502
no, only in torbrowser or a browser that has tor configured as a proxy


[14-May-19 05:58 AM] SHossain#0007
seems, i'm getting a feel to use torbrowser and all things tor


[14-May-19 05:59 AM] cipi#4502
üòÉ


[14-May-19 05:59 AM] SHossain#0007
i should look into that soon


[14-May-19 01:48 PM] cipi#4502
GIN swap with mm2: https://github.com/jl777/coins/pull/288/files

{Embed}
https://github.com/jl777/coins/pull/288/files
GIN is mm2 compatible by cipig ¬∑ Pull Request #288 ¬∑ jl777/coins
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761

{Reactions}
shexy üëå 

[14-May-19 03:09 PM] SHossain#0007
if @bedeabza setup min 2 electrum servers, that would help the with MM2 and Agama integration. let's see what he says


[14-May-19 03:10 PM] SHossain#0007
he is interested to setup elecrum servers based on our initial conversation


[17-May-19 08:59 AM] cipi#4502
the coins listed in this file should have an orderbook in mm2: https://github.com/cipig/mmtools/blob/master/mpm/mpm.conf.full
base coin is KMD

{Embed}
https://github.com/cipig/mmtools/blob/master/mpm/mpm.conf.full
cipig/mmtools
Contribute to cipig/mmtools development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/86Pqxe1bJj-KF7PD_IIMab3Uu4UVW6HfDMshj56c0HQ/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/32116761


[20-May-19 12:11 AM] gcharang#6833
@krtk6160 wants to test mm2, can someone add him?


[20-May-19 01:44 AM] gcharang#6833
@artem.pikulin can you please add @krtk6160 to this channel?


[20-May-19 01:46 AM] artem.pikulin#0794
@gcharang Hi, it's done, @krtk6160 welcome!

{Reactions}
üëç 

[20-May-19 01:51 AM] gcharang#6833
@krtk6160 any issues installing, testing mm2, you can ask here


[20-May-19 01:52 AM] krtk6160#3131
Hi! Thank you guys!


[20-May-19 01:53 AM] krtk6160#3131
Do I need to install any dependencies if I'm trying to run the pre-built binary?


[20-May-19 02:23 AM] cipi#4502
```ldd ../../target/debug/mm2
        linux-vdso.so.1 (0x00007ffc2d1ee000)
        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f0456873000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f045666f000)
        librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f0456467000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f045624a000)
        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f0456033000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f0455c94000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f04589a7000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f0455990000)```
this libs should be present on every linux installation, so i would say "no, you don't need any dependencies


[20-May-19 02:56 AM] krtk6160#3131
Okay, thanks


[20-May-19 02:57 AM] krtk6160#3131
I'm trying to get the basic BEER <-> PIZZA atomic swap working, and I'm getting errors.
What should I enter in the `passphrase` field?


[20-May-19 03:00 AM] cipi#4502
which passphrase field?


[20-May-19 03:02 AM] krtk6160#3131
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-walkthrough.md
In this document, to initialize MM, we need to pass an rpc password and a passphrase

{Embed}
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-walkthrough.md
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[20-May-19 03:03 AM] cipi#4502
you can choose a passphrase you like... the secret keys for all coins are derived from this passphrase... to access the funds you will need this passphrase, so save it üòâ


[20-May-19 03:05 AM] krtk6160#3131
Okay, so I just put in this exact command:
`stdbuf -oL ./mm2 "{\"gui\":\"MM2GUI\",\"netid\":9999, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"randompass\", \"rpc_password\":\"12341234\"}" &
`
And it fails saying 
`[1] 17010
20 10:04:23, mm2:160] BarterDEX MarketMaker UNKNOWN
20 10:04:23, mm2:189] mm2:296] key must be a string at line 1 column 3
[1]+  Exit 1`


[20-May-19 03:08 AM] cipi#4502
hmmm, never saw this... if i interpret this right, then `key must be a string at line 1 column 3` is referring to `\"userhome\":\"/${HOME#"/"}\"`
which is strange, since i have the same:
`stdbuf -oL nohup ../../target/debug/mm2 "{\"netid\":9999,\"gui\":\"nogui\",\"client\":1, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\"}" > /tmp/mm.log &`


[20-May-19 03:09 AM] cipi#4502
what does `echo ${HOME#"/"}` show when you enter it in console?


[20-May-19 03:09 AM] krtk6160#3131
`home/krtk6160`


[20-May-19 03:10 AM] cipi#4502
looks good... maybe it is something else


[20-May-19 03:11 AM] krtk6160#3131
Does it need any specific directory to be present in my home directory?


[20-May-19 03:11 AM] krtk6160#3131
I really have no idea what's happening here


[20-May-19 03:12 AM] cipi#4502
i don't use prebuilt binaries, i am using git, so my start script and everything else is located in `~/SuperNET/etomic_build/client`


[20-May-19 03:12 AM] krtk6160#3131
I didn't use the prebuilt binary for this, I built it from source because the prebuilt binary was giving out the same error


[20-May-19 03:13 AM] cipi#4502
wonderful... then do this: `cd ~/SuperNET/etomic_build/client && rm coins && wget https://raw.githubusercontent.com/jl777/coins/master/coins`
it will download the latest coins file from git
it should be loacted in the same dir where you start mm2 from... `~/SuperNET/etomic_build/client`for me


[20-May-19 03:20 AM] krtk6160#3131
Where do I get a mm2 json config file from?


[20-May-19 03:21 AM] krtk6160#3131
I ran the same command again after wgetting the coins file, but now it fails with a different error


[20-May-19 03:21 AM] krtk6160#3131
`
20 10:21:19, mm2:160] BarterDEX MarketMaker UNKNOWN
RPCport.0 remoteport.-1, nanoports 47762 47772 47782
20 10:21:19, lp_native_dex:1650] showwif.0 version: UNKNOWN
userpass.(userpass is deprecated, set the rpc_password in MM2 JSON config instead: https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-walkthrough.md#initiate-marketmaker-20)
cant create.(DB/3c15ac6587f3db71abfc9a3e984e140987fd689e/.tmpmarker) errno.2 No such file or directory
cant create.(DB/3c15ac6587f3db71abfc9a3e984e140987fd689e/SWAPS/.tmpmarker) errno.2 No such file or directory
20 10:21:19, lp_native_dex:1457] FATAL ERROR cant create "DB/3c15ac6587f3db71abfc9a3e984e140987fd689e/SWAPS/checkval"
20 10:21:19, log:711] LogState] Bye!
20 10:21:19, mm2:189] mm2:306] mm2:91] lp_native_dex:1695] lp_native_dex:1502] SWAPS db dir is not writeable
`


[20-May-19 03:23 AM] cipi#4502
i know of only one json-config, the one with the coins, from here: https://github.com/jl777/coins
`FATAL ERROR cant create "DB/3c15ac6587f3db71abfc9a3e984e140987fd689e/SWAPS/checkval"` indicates the dir/file can't be created... probably because the directory belongs to another user, not the one you started mm2 as

{Embed}
https://github.com/jl777/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[20-May-19 03:24 AM] cipi#4502
go to `~/SuperNET/etomic_build/client` and start mm2 from there


[20-May-19 03:32 AM] krtk6160#3131
there isn't any mm2 binary present in the `etomic_build/client` directory


[20-May-19 03:34 AM] cipi#4502
yes, that's why my start script looks like this:
`stdbuf -oL nohup ../../target/debug/mm2 "{\"netid\":9999,\"gui\":\"nogui\",\"client\":1, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"$passphrase\"}" > /tmp/mm.log &`
`../../target/debug/mm2`is the location of the binary... it is the location `cargo build -vv` places the binary in


[20-May-19 03:35 AM] krtk6160#3131
Aah, that was a stupid question from me, apologies for that üòÑ


[20-May-19 03:35 AM] krtk6160#3131
Okay, so I tried running the command from the client dir, I'm getting the same error


[20-May-19 03:35 AM] krtk6160#3131
Should I try with sudo?


[20-May-19 03:36 AM] cipi#4502
seems the directory you are starting from does not belong to the user krtk6160... i assume you are logged in as krtk6160...


[20-May-19 03:36 AM] cipi#4502
do `sudo chown -R krtk6160:krtk6160 *`


[20-May-19 03:38 AM] krtk6160#3131
Tried that, same error


[20-May-19 03:41 AM] cipi#4502
strange... seems like a bug... can you please do `mkdir DB` manually... seems to me like mm2 is not creating this directory if it is not already present, only sunsequent directories inside the existing DB-dir... only a theory


[20-May-19 03:41 AM] krtk6160#3131
The DB dir is to be made inside the client dir right?


[20-May-19 03:42 AM] cipi#4502
yes, it should be located in the same dir from where you start mm2 from (not the locaton of the binary)


[20-May-19 03:42 AM] krtk6160#3131
You were right!


[20-May-19 03:42 AM] krtk6160#3131
Manually creating DB dir fixed it


[20-May-19 03:42 AM] cipi#4502
cool... then you found the first bug üòÉ


[20-May-19 03:42 AM] krtk6160#3131
Do I need to open an issue for this on github?


[20-May-19 03:43 AM] cipi#4502
sure, would be nice... else i will do it myself üòÑ


[20-May-19 03:43 AM] krtk6160#3131
Alright, I'll do it. There's no specific format for an issue on the repo, right?


[20-May-19 03:44 AM] cipi#4502
no, just click on `Don‚Äôt see your issue here? Open a regular issue.` and it should open an empty issue, without formatting and stuff


[20-May-19 03:49 AM] krtk6160#3131
Done üòÉ

{Reactions}
üëå 

[20-May-19 04:00 AM] artem.pikulin#0794
@krtk6160 Could you please run `ls -la` in mm2 executable dir and post result here?


[20-May-19 04:02 AM] krtk6160#3131
The `target/debug` dir right?


[20-May-19 04:02 AM] krtk6160#3131
`
total 571112
drwxrwxr-x   8 krtk6160 krtk6160      4096 May 20 16:07 .
drwxrwxr-x   3 krtk6160 krtk6160      4096 May 20 15:19 ..
drwxrwxr-x  68 krtk6160 krtk6160      4096 May 20 15:07 build
-rw-rw-r--   1 krtk6160 krtk6160         0 May 20 15:06 .cargo-lock
-rw-rw-r--   1 krtk6160 krtk6160     52008 May 20 15:50 coins
drwxrwxr-x   2 krtk6160 krtk6160     65536 May 20 15:19 deps
drwxrwxr-x   2 krtk6160 krtk6160      4096 May 20 15:07 examples
drwxrwxr-x 303 krtk6160 krtk6160     20480 May 20 15:07 .fingerprint
drwxrwxr-x   9 krtk6160 krtk6160      4096 May 20 15:18 incremental
-rw-rw-r--   2 krtk6160 krtk6160 434167028 May 20 15:19 libmm2.a
-rw-rw-r--   1 krtk6160 krtk6160      6176 May 20 15:19 libmm2.d
-rwxrwxr-x   2 krtk6160 krtk6160 150460536 May 20 15:19 mm2
-rw-rw-r--   1 krtk6160 krtk6160      6171 May 20 15:19 mm2.d
drwxrwxr-x   2 krtk6160 krtk6160      4096 May 20 15:07 native

`


[20-May-19 04:03 AM] artem.pikulin#0794
Do you run mm2 from this dir?


[20-May-19 04:04 AM] krtk6160#3131
I run it from `etomic_build/client`
`
total 100
drwxrwxr-x 3 krtk6160 krtk6160  4096 May 20 16:29 .
drwxrwxr-x 4 krtk6160 krtk6160  4096 May 20 14:56 ..
-rwxrwxr-x 1 krtk6160 krtk6160   181 May 20 14:56 buy_ONE_ANOTHER
-rwxrwxr-x 1 krtk6160 krtk6160   667 May 20 14:56 client
-rwxrwxr-x 1 krtk6160 krtk6160   899 May 20 14:56 client_debug
-rw-rw-r-- 1 krtk6160 krtk6160 57144 May 20 16:26 coins
drwxrwxr-x 3 krtk6160 krtk6160  4096 May 20 16:11 DB
-rwxrwxr-x 1 krtk6160 krtk6160  1592 May 20 14:56 enable
-rw-rw-r-- 1 krtk6160 krtk6160    37 May 20 16:01 passphrase
-rwxrwxr-x 1 krtk6160 krtk6160   292 May 20 14:56 setpassphrase
-rw-rw-r-- 1 krtk6160 krtk6160  2547 May 20 16:29 stats.log
-rw-rw-r-- 1 krtk6160 krtk6160   100 May 20 16:22 userpass

`


[20-May-19 04:04 AM] cipi#4502
@artem.pikulin i think the problem is that mm2 does not create the dir `DB`, only subdirs inside `DB`, but not `DB` itself


[20-May-19 04:05 AM] artem.pikulin#0794
@cipi yes, I've just tried to remove the DB dir and it's not recreated. Will fix shortly, @krtk6160 thanks for bug report!


[20-May-19 04:16 AM] krtk6160#3131
I tried to run the following command:

`
curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"BEER\",\"urls\":[\"electrum1.cipig.net:10022\",\"electrum2.cipig.net:10022\",\"electrum3.cipig.net:10022\"]}"
`

But if fails with 
`
{"error":"lp_coins:880] lp_coins:680] mm2 param is not set neither in coins config nor enable request, assuming that coin is not supported"}
`

I double checked, and the mm2 param is indeed set. (I'm using the coins file from the git repo)


[20-May-19 04:20 AM] cipi#4502
seems like a bug too... you can also set the mm2-parameter manually, in the `electrum` call though:
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"electrum\",\"coin\":\"BEER\",\"urls\":[\"electrum1.cipig.net:10022\",\"electrum2.cipig.net:10022\",\"electrum3.cipig.net:10022\"],\"mm2\":1}"`


[20-May-19 04:20 AM] krtk6160#3131
@cipi Yep, that worked!


[20-May-19 04:21 AM] krtk6160#3131
Issue for this too? üòÑ


[20-May-19 04:25 AM] cipi#4502
artem is the boss üòâ if it is an easy fix, then maybe not


[20-May-19 04:27 AM] krtk6160#3131
Okay I'll wait for his reply üòÑ


[20-May-19 05:15 AM] krtk6160#3131
I'm trying to perform a Beer <-> Pizza atomic swap, and after issuing the `buy` method, this is the output I receive on the mm2 terminal

`
>>>>>>>>>> received quote BEER/PIZZA 1.00010001
20 12:04:56, lp_ordermatch:1081] aliceid.657001070 got new bestprice 1.000100010001 (unconf 0) slowresponse.0
20 12:04:57, lp_ordermatch:1148] send LP_connect aliceid.657001070 1.000100010001
20 12:04:58, lp_ordermatch:1460] CONNECTED.({"address":"RJTYiYeJ8eVvJ53n2YbrVmxWNNMVZjDGLh","aliceid":657001070,"base":"BEER","desthash":"a7a233b62e77312cce65d4820aa79873a79e8b961433e7cd6e94469ed52ecf05","destsatoshis":"10000000","desttxfee":"1000","etomicdest":"","etomicsrc":"","gui":"cli","maxprice":1.5,"method":"connected","pair":"","price":1.00010001,"quoteid":1402793431,"quotetime":1558353898,"rel":"PIZZA","requestid":1613117799,"satoshis":"10000000","srchash":"5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12","timestamp":1558353894,"tradeid":3389956896,"txfee":"1000","uuid":"b61fc16564e549f5c6e71c579727396ffb144e4a57fded4982a4c77e3f3aeb94"})
20 12:04:59, lp_ordermatch:1037] alice a7a233b62e77312cce65d4820aa79873a79e8b961433e7cd6e94469ed52ecf05 received CONNECTED.(657001070) mpnet.0 fill.0 gtc.0
CONNECTED mpnet.0 fill.0 gtc.0 numpending.0 tradeid.3389956896 requestid.1604868048 quoteid.1935296466 pairstr.
BEER/PIZZA bid 1.50000000 ask 0.00000000
alice pairstr.()
20 12:04:59, lp_ordermatch:719] Entering the taker_swap_loop BEER/PIZZA
¬∑ 2019-05-20 17:37:59 +0530 [swap uuid=b61fc16564e549f5c6e71c579727396ffb144e4a57fded4982a4c77e3f3aeb94] Finished
    Negotiate failed...
    Started...

`


[20-May-19 05:15 AM] krtk6160#3131
It's stuck on this now


[20-May-19 05:15 AM] SHossain#0007
how many times this happened?


[20-May-19 05:18 AM] krtk6160#3131
This is the second time. Last time it happened, I force closed mm2 and restarted my machine.


[20-May-19 05:19 AM] SHossain#0007
try few more times and check the results please


[20-May-19 05:19 AM] krtk6160#3131
How should I close mm2 while a swap is going on?


[20-May-19 05:19 AM] krtk6160#3131
issuing the `stop` command?


[20-May-19 05:20 AM] SHossain#0007
you can use the `stop` command or `pkill -15 mm2`


[20-May-19 05:37 AM] krtk6160#3131
I tried 3 more times, and the same thing happens


[20-May-19 05:38 AM] SHossain#0007
what is your internet connection speed?


[20-May-19 05:38 AM] cipi#4502
you may want  to look in the file `DB/SWAPS/MY/xxxxx.json`, where xxxx is the id of the swap that failed... it should contain the actual error that happened


[20-May-19 05:40 AM] cipi#4502
oh, wait, it changed... it is `DB/yyyyy/SWAPS/MY/xxxxx.json`... yyyy is the id of your node


[20-May-19 05:41 AM] krtk6160#3131
This is what the logs contain:
`
{"type":"Taker","uuid":"b61fc16564e549f5c6e71c579727396ffb144e4a57fded4982a4c77e3f3aeb94","events":[{"timestamp":1558353899742,"event":{"type":"Started","data":{"taker_coin":"PIZZA","maker_coin":"BEER","maker":"5a2f1c468b7083c4f7649bf68a50612ffe7c38b1d62e1ece3829ca88e7e7fd12","my_persistent_pub":"0253318411af9cb2fd9dd682a394e6dd6da12a13199e7c0b8258e48f35a4d281e7","lock_duration":7800,"maker_amount":10000000,"taker_amount":10000000,"maker_payment_confirmations":1,"taker_payment_confirmations":1,"taker_payment_lock":1558361699,"uuid":"b61fc16564e549f5c6e71c579727396ffb144e4a57fded4982a4c77e3f3aeb94","started_at":1558353899,"maker_payment_wait":1558356499}}},{"timestamp":1558354079770,"event":{"type":"NegotiateFailed","data":{"error":"lp_swap:1125] \"timeout (180.0 > 180.0)\""}}},{"timestamp":1558354079771,"event":{"type":"Finished"}}],"success_events":["Started","Negotiated","TakerFeeSent","MakerPaymentReceived","MakerPaymentWaitConfirmStarted","MakerPaymentValidatedAndConfirmed","TakerPaymentSent","TakerPaymentSpent","MakerPaymentSpent","Finished"],"error_events":["StartFailed","NegotiateFailed","TakerFeeSendFailed","MakerPaymentValidateFailed","TakerPaymentTransactionFailed","TakerPaymentDataSendFailed","TakerPaymentWaitForSpendFailed","MakerPaymentSpendFailed","TakerPaymentRefunded","TakerPaymentRefundFailed"]}
`


[20-May-19 05:42 AM] krtk6160#3131
All my swaps have the same `success_events` and `error_events`


[20-May-19 05:42 AM] cipi#4502
```      {
         "event" : {
            "data" : {
               "error" : "lp_swap:1125] \"timeout (180.0 > 180.0)\""
            },
            "type" : "NegotiateFailed"
         },
         "timestamp" : 1558354079770
      },```


[20-May-19 05:42 AM] cipi#4502
that is the problem... looks like the seller hasn't answered in 180s


[20-May-19 05:43 AM] krtk6160#3131
Oh, so should I place both the sell and buy orders?


[20-May-19 05:43 AM] krtk6160#3131
Is that possible using the same mm2 node?


[20-May-19 05:43 AM] cipi#4502
no, you will need 2 nodes with 2 different passphrases and as such 2 different addresses


[20-May-19 05:44 AM] krtk6160#3131
is it possible to run 2 nodes on the same machine?


[20-May-19 05:44 AM] cipi#4502
you can also try some other coins... RICK and MORTY are our new testcoins and there should be orders for them


[20-May-19 05:44 AM] krtk6160#3131
okay, i'll try that


[20-May-19 05:45 AM] cipi#4502
```curl --url "http://127.0.0.1:7783" --data "{\"method\":\"electrum\",\"coin\":\"RICK\",\"urls\":[\"116.203.111.225:10004\",\"116.203.120.175:10004\",\"116.203.40.22:10004\"],\"userpass\":\"$userpass\",\"mm2\":1}"
curl --url "http://127.0.0.1:7783" --data "{\"method\":\"electrum\",\"coin\":\"MORTY\",\"urls\":[\"116.203.111.225:10005\",\"116.203.120.175:10005\",\"116.203.40.22:10005\"],\"userpass\":\"$userpass\",\"mm2\":1}"```


[20-May-19 05:46 AM] cipi#4502
RICK and MORTY are still on test electrums... will move them to the main electrums this week... if no problems will arise in the meantime with the new electrum version


[20-May-19 05:46 AM] SHossain#0007
@krtk6160 post your address, i'll send you RICK & MORTY coins for testing


[20-May-19 05:47 AM] krtk6160#3131
`RA2zGXYMvVaEaWjNKn5jL58w9YCp46xzWb`


[20-May-19 05:48 AM] SHossain#0007
sent 10 of each coins


[20-May-19 05:49 AM] SHossain#0007
i believe the price for each coin is half of the other coin. so, you can increase your balance just by swapping


[20-May-19 05:50 AM] krtk6160#3131
Okay, i'll try them out, thanks!


[20-May-19 05:55 AM] krtk6160#3131
Same error again


[20-May-19 05:55 AM] krtk6160#3131
I'll try connecting to a different internet connection


[20-May-19 05:55 AM] krtk6160#3131
and then retry this


[20-May-19 06:00 AM] krtk6160#3131
What kinds of blockchain are the RICK and MORTY coins on?


[20-May-19 06:00 AM] krtk6160#3131
Are they komodo assetchains?


[20-May-19 06:00 AM] SHossain#0007
yes


[20-May-19 06:00 AM] SHossain#0007
```
./komodod -pubkey=$pubkey -ac_name=RICK -ac_supply=90000000000 -ac_reward=100000000 -ac_cc=3 -addnode=138.201.136.145 &
./komodod -pubkey=$pubkey -ac_name=MORTY -ac_supply=90000000000 -ac_reward=100000000 -ac_cc=3 -addnode=138.201.136.145 &
```


[20-May-19 06:08 AM] krtk6160#3131
Okay, so the swap worked, but I didn't get a `swap finished successfully` message.
It is stuck on 
`
¬∑ 2019-05-20 18:32:51 +0530 [swap uuid=d70b1829b0a1f2cfa436f82b3e247af0e7b0c35d041c1d3abaacc0c3e2f29c16] Finished
    Maker payment spent...
    Taker payment spent...
    Taker payment sent...
    Maker payment validated and confirmed...
    Maker payment wait confirm started...
    Maker payment received...
    Taker fee sent...
    Negotiated...
    Started...

`


[20-May-19 06:08 AM] krtk6160#3131
How do I remove my previous pending swaps?


[20-May-19 06:08 AM] krtk6160#3131
Is there a way to cancel them?


[20-May-19 06:12 AM] cipi#4502
when the swap didn't even start (like in the failed BEER/PIZZA swaps), it doesn't matter... the only remainig peace of this "failed to start"-swaps is the file in DB/SWAPS/MY
only if funds were already transferred and the swap failed then it is a problem, but there is already an issue for this (refund the parties and stuff like that): https://github.com/artemii235/SuperNET/issues/406
the above swap looks ok, i think there is no further output

{Embed}
https://github.com/artemii235/SuperNET/issues/406
Add API to spend/refund the stuck swap payment (hash/timelocked tr...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[20-May-19 06:13 AM] cipi#4502
you can check the balances to be sure üòâ


[20-May-19 06:19 AM] SHossain#0007
@krtk6160 here are the explorers for RICK & MORTY, where you can check with your address for any swap completed or not. 
http://rick.kmd.dev
http://morty.kmd.dev

{Embed}
http://rick.kmd.dev
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}

{Embed}
http://morty.kmd.dev
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}


[20-May-19 06:31 AM] krtk6160#3131
I'm going to try a swap between a base coin from my own custom assetchain and ether from ropsten


[20-May-19 06:32 AM] krtk6160#3131
In the first step, I'll need to run a node for my assetchain and connect to it through mm2, right?


[20-May-19 06:36 AM] cipi#4502
erc20 tokens from eth chain are enabled like this
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ETH\",\"urls\":[\"http://eth2.cipig.net:8555\",\"http://eth3.cipig.net:8555\"],\"swap_contract_address\":\"0x8500AFc0bc5214728082163326C2FF0C73f4a871\",\"mm2\":1}"`
where `swap_contract_address` is a contract deployed by artem on the eth chain... i don't know if he deployed the contract on test chains too and  if so what the address is
you can replace ETH with any other symbol present in the coins file
after you managed to enable the coins, everything else should be the same


[20-May-19 06:38 AM] krtk6160#3131
Yes, he did deploy the contract on the ropsten chain, and I already connected to an eth node via mm2 and can transferred some eth to an account.


[20-May-19 06:38 AM] cipi#4502
cool


[20-May-19 06:39 AM] krtk6160#3131
But for swapping it with my own coin from an assetchain, I'll need to first connect mm2 to a node that runs that customchain right?


[20-May-19 06:40 AM] cipi#4502
yes, you need to run the chain on the same node and add it to the coins file, if not already there
an entry for a KMD assetchain looks like this
```  {
    "coin": "RFOX",
    "asset": "RFOX",
    "fname": "RedFOX",
    "rpcport": 32269,
    "mm2": 1
},```


[20-May-19 06:41 AM] krtk6160#3131
Okay, I'll try to swap RICK and ETH first, and then try with my own KMD chain


[20-May-19 06:41 AM] krtk6160#3131
Is it possible to run 2 different mm2 daemons on a single machine?


[20-May-19 06:42 AM] krtk6160#3131
If yes, then the ports will need to be specified in some config file, right?


[20-May-19 06:42 AM] krtk6160#3131
I'm asking because I'll have to place both the bids


[20-May-19 06:42 AM] cipi#4502
not sure, the problem will be conflicting ports, yes :-)
i don't know if is already made configurable, i guess not


[20-May-19 06:44 AM] cipi#4502
of course, there is always a way, like virtual IPs and stuff, but it will not be easy... i think it is easier to get a cheap 5‚Ç¨ VPS and install mm2 a second time there


[20-May-19 06:47 AM] krtk6160#3131
I see


[20-May-19 06:47 AM] krtk6160#3131
I don't understand why I can't place the buy and sell orders from the same mm2 node, can you explain?


[20-May-19 06:51 AM] cipi#4502
the first problem that comes to my mind is that mm2 excludes his own pubkey from the offers in the orderbook
and then there is the problem with same coin addresses... you would send funds from your address to your own address... i guess mm can't differentiate then
but i don't know all the internals, there are for sure more reasons why it is not going to work


[20-May-19 06:52 AM] krtk6160#3131
But I'll be sending funds from address A on a chain B to address A on chain C, which could be owned by different persons


[20-May-19 06:53 AM] artem.pikulin#0794
@krtk6160 Could you please explain in more details what do you mean by `place the buy and sell orders from the same mm2 node`?


[20-May-19 06:54 AM] artem.pikulin#0794
You can actually put let's say `BTC/KMD` sell and buy orders with different prices and then benefit from rate difference.


[20-May-19 06:54 AM] artem.pikulin#0794
A kind of arbitrage trading.


[20-May-19 06:54 AM] cipi#4502
KMD assetchains all share the same pubtype, p2shtype and wiftype, so all addresses would be the same if they are derived from the same passphrase


[20-May-19 06:57 AM] krtk6160#3131
@artem.pikulin The scenario is, I want to try and swap RICK and ETH (present on ropsten). In order to do that, I'll need to place an order saying I will give 1 ETH for 1.2 RICK. After that I'll need to place a buy order specifying I'd like to give 1.2+ RICK in order to get 1ETH.


[20-May-19 06:57 AM] krtk6160#3131
I wanna know how I could do this


[20-May-19 06:59 AM] artem.pikulin#0794
You have to setup 2 nodes for this: 1 with sell, another with buy order. In theory it might be possible to add the case like `trade on single node`, but it doesn't make much sense as people use exchanges to trade with other people.


[20-May-19 07:00 AM] artem.pikulin#0794
You can run 2 MM2 nodes on single server btw, you need to run them from different directories and also use different `passphrase` and `rpcport`.


[20-May-19 07:01 AM] krtk6160#3131
@artem.pikulin How can I change the rpcport?


[20-May-19 07:01 AM] krtk6160#3131
I can't find any file where that is specified


[20-May-19 07:04 AM] artem.pikulin#0794
It's set in MM2 json config (command line or MM2.json file), so you need to have 2 MM2 exes at different dirs with configs (examples):
```
{
"passphrase":"pass1",
"rpcport":7783
} 
```
```
{
"passphrase":"pass2",
"rpcport":7784
} 
```


[20-May-19 07:05 AM] krtk6160#3131
I see. Thanks a lot.


[20-May-19 07:06 AM] artem.pikulin#0794
There're more options available, you can tell MM2 to use another IP for RPC (if required) using `rpcip`. To see all available options just run `./mm2 help`


[20-May-19 07:06 AM] krtk6160#3131
What do you mean by another ip?


[20-May-19 07:07 AM] artem.pikulin#0794
I mean another network interface.


[20-May-19 07:07 AM] krtk6160#3131
Oh okay


[20-May-19 07:09 AM] krtk6160#3131
Can I just duplicate the SuperNET directory with another name (and then change the config files) or do I need to build it again?


[20-May-19 07:10 AM] artem.pikulin#0794
You can just copy `target/debug/mm2` somewhere and run it there.


[20-May-19 07:10 AM] krtk6160#3131
Okay


[20-May-19 11:06 PM] krtk6160#3131
I could use the enable command to connect to eth ropsten chain yesterday, but today it fails with a `VM error` :

`
{"error":"lp_coins:866] lp_coins:837] eth:1761] eth:1709] eth:1708] Error(Rpc(Error { code: ServerError(-32015), message: \"VM execution error.\", data: Some(String(\"Reverted 0x\")) }), State { next_error: None, backtrace: InternalBacktrace { backtrace: Some(stack backtrace:\n   0: error_chain::backtrace::imp::InternalBacktrace::new::h33309f38622779ab (0x561104eb0754)\n             at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/error-chain-0.12.0/src/backtrace.rs:56\n   1: <error_chain::State as core::default::Default>::default::h57428160fdf1d41f (0x561104eb0b95)\n             at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/error-chain-0.12.0/src/lib.rs:666\n   2: web3::error::Error::from_kind::hd8db380507879e05 (0x561104e6765d)\n             at /root/.cargo/git/checkouts/rust-web3-c440e08f2ed9a5f7/83d01da/<::error_chain::error_chain::impl_error_chain_processed macros>:53\n   3: <web3::error::Error as core::convert::From<web3::error::ErrorKind>>::from::h91769bf3360770b0 (0x561104e6770b)\n             at /root/.cargo/git/checkouts/rust-web3-c440e08f2ed9a5f7/83d01da/src/error.rs:10\n   4: <T as core::convert::Into<U>>::into::h854842e465a4502d (0x561104e6717b)\n             at /rustc/ddab10a692aab2e2984b5c826ed9d78a57e94851/src/libcore/convert.rs:454\n   5: web3::helpers::to_result_from_output::h25465643ecbe8038 (0x561104e64760)\n             at /root/.cargo/git/checkouts/rust-web3-c440e08f2ed9a5f7/83d01da/src/helpers.rs:87\n   6: coins::eth::web3_transport::single_response::hd104a7a0f0ff9958 (0x561104db5aa6)\n             at mm2src/coins/eth/web3_transport.rs:22\n   7: <coins::eth::web3_transport::Web3Transport as web3::Transport>::send::{{closure}}::hac57f69b798c7ec1 (0x561104e42b25)\n
`

I have truncated the error as discord won't let me post the full error due to character limit.


[20-May-19 11:07 PM] krtk6160#3131
I'm unable to connect to the main chain also. I tried with  `[\"http://eth2.cipig.net:8555\",\"http://eth3.cipig.net:8555\"]` as well as `http://195.201.0.6:8555` for main chain.


[21-May-19 12:44 AM] artem.pikulin#0794
@krtk6160 Hi, could you please post the `enable` request that results in this error? Such error typically happens when ERC20 token is activated, but it has the invalid `etomic` field in `coins` config. This field must contain valid ERC20 smart contract address.


[21-May-19 12:45 AM] artem.pikulin#0794
So MM2 attempts to call the `decimals` function of smart contract that doesn't have this function.


[21-May-19 12:46 AM] krtk6160#3131
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"enable\",\"coin\":\"ETH\",\"urls\":[\"http://195.201.0.6:8545\"],\"swap_contract_address\":\"0x7Bc1bBDD6A0a722fC9bffC49c921B685ECB84b94\"}"
`
@artem.pikulin#0794  This is what I used. Directly copied from the documentation. This same command was working yesterday


[21-May-19 12:55 AM] artem.pikulin#0794
Could you please post the `ETH` record from the coins file also?


[21-May-19 12:57 AM] krtk6160#3131
`{
    "coin": "ETH",
    "name": "ethereum",
    "fname": "Ethereum",
    "etomic": "0x7Bc1bBDD6A0a722fC9bffC49c921B685ECB84b94",
    "rpcport": 80,
    "mm2": 1
  }`


[21-May-19 12:59 AM] artem.pikulin#0794
`"etomic": "0x7Bc1bBDD6A0a722fC9bffC49c921B685ECB84b94"` - etomic field must be `0x0000000000000000000000000000000000000000` for ETH. It's smart contract address of ERC20 token so MM2 attempts to call `decimals` function on smart contract with address `0x7Bc1bBDD6A0a722fC9bffC49c921B685ECB84b94` that doesn't work because it's `etomic-swap` smart contract.


[21-May-19 01:02 AM] krtk6160#3131
Oh, I get it. Thanks!

{Reactions}
ü§ù 

[21-May-19 01:04 AM] krtk6160#3131
Still getting the same error


[21-May-19 01:04 AM] krtk6160#3131
I'll wget the coins file and try again


[21-May-19 01:06 AM] krtk6160#3131
Yes, it works now


[21-May-19 01:31 AM] krtk6160#3131
I can't see my buy order placed from one node on the other node. How is the order request propagated? Is there a way to speed it up?


[21-May-19 01:57 AM] krtk6160#3131
@artem.pikulin  Is it normal if an order doesn't show up even after 15 minutes?


[21-May-19 01:58 AM] jl777c#5810
maybe we need some special nodes that are maximizing propagation through the kademlia?


[21-May-19 01:59 AM] artem.pikulin#0794
@krtk6160 Could you please post the RPC request that you use to broadcast the order?


[21-May-19 02:00 AM] krtk6160#3131
`
curl --url "http://127.0.0.1:7770" --data "{\"userpass\":\"12341234\",\"method\":\"buy\",\"base\":\"RICK\",\"rel\":\"ETH\",\"relvolume\":0.1,\"price\":0.5,\"timeout\":100000}" | jq
`


[21-May-19 02:02 AM] artem.pikulin#0794
@krtk6160 Such requests are not broadcasted to orderbooks yet, this is being refactored right now, currently you have to call the `setprice` - this is `marketmaker mode` call that will be propagated to other nodes.


[21-May-19 02:02 AM] artem.pikulin#0794
From the other side you will need to call `buy` - it triggers `market taker` request that will match with your maker node.


[21-May-19 02:02 AM] krtk6160#3131
I need to have mm2 be able to bind to a public port for that, right?


[21-May-19 02:03 AM] artem.pikulin#0794
No, public port is not required for this anymore.


[21-May-19 02:03 AM] krtk6160#3131
Okay


[21-May-19 02:04 AM] krtk6160#3131
Also, both the nodes need to pay a gas price when exchanging ETH/KMD?


[21-May-19 02:05 AM] artem.pikulin#0794
Yes, you need ETH to buy ETH actually üôÇ


[21-May-19 02:05 AM] krtk6160#3131
Oh okay üòÑ


[21-May-19 02:06 AM] krtk6160#3131
There's no timeout for setprice, right?


[21-May-19 02:07 AM] krtk6160#3131
So I'll need some RICK and ETH on both the nodes to pay for txn fees?


[21-May-19 02:11 AM] artem.pikulin#0794
@jl777c `maybe we need some special nodes that are maximizing propagation through the kademlia?` - after few discussions we've concluded that DHT `is less practical for implementing a shared feed of orders (particularly due to delays and races in a large DHT)`, here's good issue from `artemciy` about it: https://github.com/artemii235/SuperNET/issues/373#issue-429647662. MM2 uses `old style` order propagation as of now, but nanomsg was replaced with Rust standard lib TcpStreams which seems to work reliably, but there's wide field for optimizations still. The current problem is `buy/sell` do not actually place the order - just broadcast `taker` request, but it's being removed right now.

{Embed}
https://github.com/artemii235/SuperNET/issues/373
p2p for ordermatching, plans ¬∑ Issue #373 ¬∑ artemii235/SuperNET
I&#39;ve learned from Artem that in the ordermatching we&#39;re using a feed of orders. This feed is traditional to exchanges and is transparent to users, we show it in the GUIs. The orders...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[21-May-19 02:12 AM] jl777c#5810
maybe use the DHT as a fallback so at least there is a way where the order gets to the orderbook

{Reactions}
üëç 

[21-May-19 02:13 AM] jl777c#5810
add timestamps so duplicates are able to be filtered out


[21-May-19 02:13 AM] artem.pikulin#0794
@krtk6160 
`There's no timeout for setprice, right?` - yes
`So I'll need some RICK and ETH on both the nodes to pay for txn fees?` - to buy ETH you need ETH because you have to pay gas fee to call the smart contract. This is not required for UTXO coins - the fee is deducted from payment amount so you might have 0 RICK and still be able to buy RICK.


[21-May-19 02:13 AM] jl777c#5810
and then whatever realtime method can coexist with the DHT for the problem cases


[21-May-19 02:17 AM] artem.pikulin#0794
DHT doesn't guarantee data synchronization, if we have several nodes broadcasting orders for one pair then we will have a race condition so some data will be lost for sure. It's considered as possible option, but we're also considering alternatives that might match better.


[21-May-19 02:20 AM] jl777c#5810
a decentralized orderbook cant always be 100% in sync, almost by definition


[21-May-19 02:20 AM] jl777c#5810
i think whatever race condition needs to be handled in some way, which can be as simple as accepting maybe a slightly worse price in race conditions


[21-May-19 02:36 AM] artem.pikulin#0794
We're considering different options, as of now DHT `is not` excluded.


[21-May-19 02:36 AM] artem.pikulin#0794

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/580328080254697482/unknown.png


[21-May-19 02:38 AM] jorian#4555
@cipi i just tried a swap with CHIPS, but it didn't end up being successful


[21-May-19 02:39 AM] jorian#4555
is there a log on your end with an error?


[21-May-19 05:12 AM] cipi#4502
@jorian everythin fine here, the swap completed succesfully


[21-May-19 05:14 AM] cipi#4502

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/580367741253582858/KMD-CHIPS.txt


[21-May-19 05:16 AM] jorian#4555
no it didn't: http://chips.komodochainz.info/address/bZ8CE1nuFnvhKRZKrU4rdABdYUgvsoYopM


[21-May-19 05:16 AM] jorian#4555
should've gone here: RTZQks3g9hixdKuYhXhZuuTgwMEK3SPk55


[21-May-19 05:17 AM] cipi#4502
thst is `MakerPaymentSent`, your node needs to claim this payment


[21-May-19 05:18 AM] cipi#4502
look in your swap file for an error


[21-May-19 05:18 AM] artem.pikulin#0794
@jorian Please check the `my_swap_status` of failed swap.


[21-May-19 06:09 AM] jorian#4555
we had txversion:4 on CHIPS, that must be the issue


[21-May-19 06:11 AM] cipi#4502
please use coins file from here: https://github.com/jl777/coins/blob/master/coins

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[21-May-19 06:12 AM] jorian#4555
üëç


[21-May-19 10:42 AM] Mylo#8306
hi,
a question in #dev-dico is:
will mm2 have "whale resistance" for dICOs like mm1 did.


[21-May-19 10:42 AM] Mylo#8306
one of the selling points of dICO was wider distribution of coins.   is this still achievable with mm2?


[21-May-19 10:44 AM] jorian#4555
you can release funds to a marketmaker address in tranches


[21-May-19 10:58 AM] jorian#4555
that could be a solution, since i think the goal was to mimic a CEX and buy up multiple orders at once


[24-May-19 04:17 AM] artem.pikulin#0794
@Mylo Hi, please excuse me for delayed response, I think that guaranteed `whale resistance` is not really possible, as example we can add the `max_amount_per_pubkey` argument for orders so 1 pubkey/address won't be able to  buy the entire balance of seller. However it's easy to create new passphrase and run the new node on brand new IP address. Imho is hard to create such protection that won't be easy to get around.


[24-May-19 04:20 AM] jl777c#5810
still it will be harder than other ways


[24-May-19 04:22 AM] jl777c#5810
so mitigation is fair to say


[24-May-19 04:22 AM] jl777c#5810
resistance is not prevention


[24-May-19 04:24 AM] artem.pikulin#0794
Yes, I've mixed the definitions a bit, so `max_amount_per_pubkey` is kinda easy way to add the `resistance`, but it's also easy to get around. `Prevention` doesn't look possible at least for now.


[24-May-19 04:24 AM] jl777c#5810
we are only claiming resistance, which it is

{Reactions}
üëç 

[24-May-19 04:25 AM] jl777c#5810
only highly technical whale can do it


[24-May-19 04:25 AM] jl777c#5810
normal whale clicking gui is prevented


[24-May-19 04:26 AM] jl777c#5810
that solves 90%+ and much better than existing


[24-May-19 08:24 PM] Mylo#8306
@artem.pikulin no need to apologize,  your manners & politeness are a kind reminder on how to address ppl on discord, thank you!

Thanks for clarifications on wordings etc & yes important words to convey to marketing/community.


[25-May-19 05:56 AM] jorian#4555
how well tested is the `withdraw` api in combination with KMD? I experimented a bit with KMD that had some rewards built up, and noticed that when i define the `amount` in the `withdraw` api call, the rewards get added to that amount as well


[25-May-19 05:57 AM] jorian#4555
i would expect that the rewards are sent back to the address belonging to the passphrase


[25-May-19 06:05 AM] jorian#4555
hmm. this actually happens only occasionally


[25-May-19 06:05 AM] jorian#4555
as if the position of the vout defines where rewards go


[25-May-19 11:02 AM] jorian#4555
we've been having some issues with maker payment: https://gist.github.com/jorian/34f9e5bb9f012fa895ad6bd782b81004

{Embed}
https://gist.github.com/jorian/34f9e5bb9f012fa895ad6bd782b81004
swap-logs
swap-logs. GitHub Gist: instantly share code, notes, and snippets.
https://images-ext-2.discordapp.net/external/U91ko7MZ4k7aq8I50dL4O_DSKToIGs9fu32OVo6FX3Q/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/10341677


[25-May-19 11:02 AM] jorian#4555
these are 2 swap statuses


[25-May-19 11:02 AM] jorian#4555
for some reason, the maker payment ends up in an undecodable tx


[25-May-19 11:03 AM] jorian#4555
using these params, this used to work until today ```
{
    coin: 'COQUI',
    name: 'Coqui Cash',
    txversion: 4,
    urls: ['electrum1.cipig.net:10011', 'electrum2.cipig.net:10011'],
    rpcport: 14276,
    active: 0,
    market_cap: 0,
    mm2: 1
  },```


[25-May-19 11:04 AM] jorian#4555
could it have something to do with your electrums @cipi ? seeing that they also changed some behaviour in the mobile agama app


[25-May-19 11:53 AM] cipi#4502
@jorian can you please try with the settings from here: https://github.com/jl777/coins/blob/master/coins#L2791
```  {
    "coin": "COQUI",
    "asset": "COQUI",
    "fname": "Coqui Cash",
    "rpcport": 14276,
    "mm2": 1
},```
` "asset": "COQUI",` is missing in your config and i think that is the problem

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[26-May-19 11:18 PM] artem.pikulin#0794
@jorian Hi, seems like the config was changed on your side. The example you provided generates tx with version 4, but not in overwintered format, notice the `04000000` version while it should be `04000080`. So `asset:COQUI` or `overwintered:true` is required to be set in coins config.


[26-May-19 11:20 PM] artem.pikulin#0794
` I experimented a bit with KMD that had some rewards built up, and noticed that when i define the amount in the withdraw api call, the rewards get added to that amount as well` - could you please show an example of tx? This part is not auto-tested, but I coded it to send the reward to the address derived from passphrase, not the `to` address of withdraw call, but maybe there's something wrong.


[28-May-19 10:05 AM] ca333#0333
@everyone is anyone running maker nodes for RICK/MORTY?


[28-May-19 10:06 AM] Mylo#8306
no.  should we start doing it?


[28-May-19 10:06 AM] Mylo#8306
for beta, or leave it for the experts?


[03-Jun-19 12:38 AM] jorian#4555
`Invalid Signature` is people running outdated mm2 instances? or is something wrong in my setup


[03-Jun-19 05:22 AM] hyperDEX#6586
@artem.pikulin can you add sindresorhus#8187 to this channel please


[03-Jun-19 06:42 AM] artem.pikulin#0794
@hyperDEX Hi, it's done, @sindresorhus welcome!

{Reactions}
üëçüèª 

[03-Jun-19 11:38 AM] Alright#0419
do we have any guides for running bobs on mm2?


[03-Jun-19 11:40 AM] SHossain#0007
not yet. setup normally and use `setprice` call to publish orders


[03-Jun-19 11:41 AM] Alright#0419
don't even know where to start @SHossain üòÖ


[03-Jun-19 11:41 AM] SHossain#0007
pinned posts has setup guides and API guides


[03-Jun-19 11:42 AM] SHossain#0007
https://github.com/KomodoPlatform/developer-docs/tree/mm/docs/basic-docs/atomic-swap-dex

{Embed}
https://github.com/KomodoPlatform/developer-docs/tree/mm/docs/basic-docs/atomic-swap-dex
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[03-Jun-19 12:20 PM] jorian#4555
@Alright wanna set nodes for LABS?


[03-Jun-19 12:33 PM] Alright#0419
yep


[03-Jun-19 01:10 PM] cipi#4502
@Alright here is a quickstart i just wrote
you need to have rust installed though

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/585198523797078026/mm2-quicksetup


[04-Jun-19 08:09 AM] siu#3920
@Alright we can help, DM me.


[07-Jun-19 09:42 AM] bartwr#6773
nice quickstart @cipi


[07-Jun-19 10:28 AM] bartwr#6773
Question @cipi Are the mm2 for KMD and BTC on netid 9999 updated to the latest version of https://github.com/artemii235/SuperNET/ ?

{Embed}
https://github.com/artemii235/SuperNET/
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[07-Jun-19 10:29 AM] bartwr#6773
I executed `curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"buy\",\"base\":\"KMD\",\"rel\":\"BTC\",\"volume\":40,\"price\":0.000199}" | jq`, and get:

```
{
  "result": {
    "action": "Buy",
    "base": "KMD",
    "base_amount": "40",
    "dest_pub_key": "0000000000000000000000000000000000000000000000000000000000000000",
    "method": "request",
    "rel": "BTC",
    "rel_amount": "0.0079600000000000000",
    "sender_pubkey": "9ada2f59820b8c805c63e48cceee25ecf5fcfb432c8dd795d04ed490d5ff3262",
    "uuid": "25d6cfa1-c426-4e4a-a835-09a8e7a7d903"
  }
}
```

but in my mm2 logs I get:

```({"base":"KMD","rel":"BTC","base_amount":"40","rel_amount":"0.0079600000000000000","action":"Buy","uuid":"25d6cfa1-c426-4e4a-a835-09a8e7a7d903","method":"request","sender_pubkey":"9ada2f59820b8c805c63e48cceee25ecf5fcfb432c8dd795d04ed490d5ff3262","dest_pub_key":"0000000000000000000000000000000000000000000000000000000000000000"})
07 17:26:10, common:678] RPC error response: lp_ordermatch:693] Invalid Signature
07 17:26:20, common:678] RPC error response: lp_ordermatch:693] Invalid Signature
07 17:26:31, common:678] RPC error response: lp_ordermatch:693] Invalid Signature
07 17:26:41, common:678] RPC error response: lp_ordermatch:693] Invalid Signature
```


[07-Jun-19 10:38 AM] cipi#4502
yes, all mm2 nodes are running latest version
`git clone https://github.com/artemii235/SuperNET -b mm2`


[07-Jun-19 10:39 AM] cipi#4502
try lower volume, i haven't put much funds in there atm


[07-Jun-19 10:52 AM] bartwr#6773
Can't do lower volume, it will give the dust error


[07-Jun-19 10:52 AM] bartwr#6773
Can try other coins though


[07-Jun-19 10:52 AM] artem.pikulin#0794
@bartwr Hi! Could you please show the output of `orderbook KMD BTC`?


[07-Jun-19 10:53 AM] artem.pikulin#0794
Maybe there're just no orders or volume is too small as `cipi` mentioned.


[07-Jun-19 10:53 AM] bartwr#6773
@artem.pikulin Will do (greetings from The Hague). Will do in few minutes

{Reactions}
Komodo 

[07-Jun-19 10:55 AM] artem.pikulin#0794
Greetings back üôÇ


[07-Jun-19 10:57 AM] bartwr#6773
Right now the orderbook of KMD/BTC is:

`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"orderbook\",\"base\":\"KMD\",\"rel\":\"BTC\"}" | jq`

=>

```{
  "bids": [],
  "numbids": 0,
  "biddepth": 0,
  "asks": [
    {
      "coin": "KMD",
      "address": "RT9MpMyucqXiX8bZLimXBnrrn2ofmdGNKd",
      "price": 0.00019797,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 39.63291181,
      "depth": 0,
      "pubkey": "bab6ad2eebe1e666369cab504d4622b22c1f1ef718ef388e88020f30a1573e01",
      "age": 8,
      "zcredits": 0
    },
    {
      "coin": "KMD",
      "address": "RAwv8JhfvmFx2V3QpY7ehiYpBJ1eqxxdxR",
      "price": 0.00019797,
      "numutxos": 0,
      "avevolume": 0,
      "maxvolume": 10.9,
      "depth": 0,
      "pubkey": "f5ed6b0b8fc05705d2427f3ceff4e5f910a4efe75df5984891d62d6042c5180f",
      "age": 3,
      "zcredits": 0
    }
  ],
  "numasks": 2,
  "askdepth": 0,
  "base": "KMD",
  "rel": "BTC",
  "timestamp": 1559930298,
  "netid": 9999
}
```


[07-Jun-19 10:58 AM] bartwr#6773
I indeed did a larger order, I did 40 KMD. Will try a bit lower.


[07-Jun-19 11:00 AM] bartwr#6773
Hah. With KMD volume `39` I still got the `Amount 0.0077220000000000000 is too low, it'll result to dust error, at least 0.00777 is required` error.


[07-Jun-19 11:00 AM] bartwr#6773
With KMD volume `39.6` it just works.


[07-Jun-19 11:01 AM] bartwr#6773
Still lots of `RPC error response: lp_ordermatch:693] Invalid Signature` errors. I'll just ignore those. Presumably people using older version of the mm2.


[07-Jun-19 11:05 AM] bartwr#6773
Yes. Works & looks great. Swap finished üòÉ


[07-Jun-19 11:06 AM] cipi#4502
`"uuid" : "325b700e-c0e6-4e31-b6b0-49da11585d1e"` was successfull


[07-Jun-19 11:06 AM] bartwr#6773
Really smooth


[07-Jun-19 11:08 AM] bartwr#6773
I love the way the logs are much more readable than in mm(1)

```¬∑ 2019-06-07 20:04:37 +0200 [swap uuid=325b700e-c0e6-4e31-b6b0-49da11585d1e] Finished
    Maker payment spent...
    Taker payment spent...
    Taker payment sent...
    Maker payment validated and confirmed...
    Maker payment wait confirm started...
    Maker payment received...
    Taker fee sent...
    Negotiated...
    Started...
```

üòÄ And the emoticons in front of the logs of course -)

{Reactions}
üëå 

[07-Jun-19 11:13 AM] bartwr#6773
Would be nice to show the 24h swaps of testnet 9999 on https://dexstats.info/ I think netid 0 is not used these days

{Embed}
https://dexstats.info/
Dexstats Dashboard - BarterDEX and Komodo ECO System
Key Data and statistics for BarterDEX, KMD and the Komodo Eco System.


[07-Jun-19 11:27 AM] cipi#4502
i don't know if it supports mm2... @CHMEX might know more


[07-Jun-19 11:30 AM] artem.pikulin#0794
It's not supported yet, we will help to setup the stats a bit later, have some important stuff to finish first.

{Reactions}
üôÇ 

[16-Jun-19 08:58 PM] hyperDEX#6586
@artem.pikulin my devs need help with https://github.com/atomiclabs/hyperdex/pull/602#issuecomment-498241016

{Embed}
https://github.com/atomiclabs/hyperdex/pull/602
Marketmaker v2 by sindresorhus ¬∑ Pull Request #602 ¬∑ atomiclabs/...
This a continuation of #563.
The intention of this PR is to get HyperDEX with mm2 in a workable state.
I&#39;m currently testing against mm2 d794c7b22.
Current plan:

 Use the new rpc_password ...
https://images-ext-2.discordapp.net/external/JaTLwRiiE1Y7IX4ciskCC6cfdH-GpYHGB91c-TmDteY/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/1520924


[17-Jun-19 01:34 AM] artem.pikulin#0794
@hyperDEX Hi, I responded in comments.


[17-Jun-19 01:37 AM] hyperDEX#6586
thanks @artem.pikulin


[17-Jun-19 01:37 AM] hyperDEX#6586
Are not working now, meaning it will be working in the future?


[17-Jun-19 01:42 AM] artem.pikulin#0794
Possibly yes, but not guaranteed. I'd recommend to rely only on currently available methods.


[17-Jun-19 02:16 AM] hyperDEX#6586
@artem.pikulin web sockets access is retained?


[17-Jun-19 04:15 AM] artem.pikulin#0794
@hyperDEX It will be back, previous implementation was based on nanomsg, but we removed the nanomsg at all from MM2 codebase and haven't replaced with pure Rust implementation yet.


[17-Jun-19 04:17 AM] hyperDEX#6586
Do you have a rough ETA on that?


[17-Jun-19 04:26 AM] artem.pikulin#0794
I think not earlier than mid-July as we're preparing for public beta now and WS support is not included to the `must have` tasks for beta.


[17-Jun-19 04:34 AM] hyperDEX#6586
ok thanks Artem


[23-Jun-19 06:20 AM] smkhound#7640
error message link 404
`userpass.(userpass is deprecated, set the rpc_password in MM2 JSON config instead: https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-walkthrough.md#initiate-marketmaker-20)
`


[23-Jun-19 06:20 AM] smkhound#7640
should be https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-tutorials/atomicdex-walkthrough.md

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-tutorials/atomicdex-walkthrough.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[23-Jun-19 09:06 AM] smkhound#7640
DASH is generating R-addr on 'electrum' method


[23-Jun-19 12:07 PM] TonyL#3577
@smkhound in coins file use confpath field:
```{
"coin": "DASH",
"name": "dashcore",
"fname": "Dash",
"confpath": "USERHOME/.dashcore/dash.conf",
"rpcport": 9998,
"pubtype": 76,
"p2shtype": 16,
"wiftype": 204,
"txfee": 10000,
"mm2": 1
},```

and create empty file dash.conf in USERHOME/.dashcore after it `X` address will be generated

{Reactions}
üëç 

[25-Jun-19 03:58 PM] cipi#4502
there is an error in the doc: https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md#arguments-4
it says: `volume     number     the amount of coins the user is willing to spend of the rel coin` but volume is the amount of base coins you want to buy
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"buy\",\"base\":\"BCH\",\"rel\":\"KMD\",\"volume\":0.001,\"price\":380}"`
results in a `({"base":"BCH","rel":"KMD","base_amount":"0.001000000000000000","rel_amount":"0.380000000000000000","action":"Buy","uuid":"a28623ee-0dc5-4da7-8c0e-e60d22c820ac","method":"request","sender_pubkey":"3d0efe5aaba2ea9cf093054d5cc88fcf15accb5ddf71ee626387553655806768","dest_pub_key":"0000000000000000000000000000000000000000000000000000000000000000"})`

{Embed}
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
üëç 

[26-Jun-19 12:46 AM] artem.pikulin#0794
@cipi Please refer to https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md, the base repo belonging to `KomodoPlatform` hasn't been updated for some time. I'm reviewing the docs right now, will submit a PR soon, however the most actual doc will still live in my fork.


[26-Jun-19 04:39 AM] hyperDEX#6586
@artem.pikulin are we still on track for WS and the other calls mid july?


[26-Jun-19 04:59 AM] artem.pikulin#0794
@hyperDEX Tbh I'm not sure anymore, we have a huge task pool with limited time to do, so WS might be postponed for unpredictable period of time. However I think as a lot was changed in MM2 you may still start to integrate it to HyperDEX, almost all data structures, RPC calls were changed so it's enough of work even without WS to support it.


[27-Jun-19 12:29 AM] hyperDEX#6586
@artem.pikulin we use WS to get updates to the GUI, without it, i cannot justify devs trying to hack together yet another method.


[27-Jun-19 12:29 AM] hyperDEX#6586
Nor can i justify devs working on something without a finished codebase, we were in that situation last time around.


[27-Jun-19 12:29 AM] hyperDEX#6586
So there is no ETA, is there any focus on having a desktop DEX app?


[27-Jun-19 12:30 AM] artem.pikulin#0794
Initial MM2 goal was to provide the working version asap, we have asked you test first versions that contained some part of Rust code and were fully compatible like in the August of 2018.


[27-Jun-19 12:31 AM] artem.pikulin#0794
And first feedback received was few months later so HyperDEX team was considered as `not interested`.


[27-Jun-19 12:31 AM] artem.pikulin#0794
Now you're coming here few months later and asking for something that is not planned, I give you alternative way - if you don't like it you can just wait.


[27-Jun-19 12:33 AM] artem.pikulin#0794
WS is just transport - you can easy refactor this to checking something in loop by sending HTTP requests - MM2 doesn't hang on this anymore.


[27-Jun-19 12:33 AM] artem.pikulin#0794
So it's like hundreds simultaneous requests per second.


[27-Jun-19 12:34 AM] artem.pikulin#0794
So it's not any hard and not required to `hack around` for long time for anyone who considers himself as professional developer.


[27-Jun-19 12:34 AM] hyperDEX#6586
Was it not the goal of the upgrade to keep all functionality? That was my assumption, removing something critical to how the previous mm 1.0 worked was not what i expected. I am sure i asked about WS a long time ago too.


[27-Jun-19 12:36 AM] artem.pikulin#0794
We couldn't wait for your feedback, the MM1 relied on nanomsg which messed up the whole networking between nodes without any real possibility to properly troubleshoot it, so it was replaced by Rust std TcpStreams which just work. WS support was planned but then got postponed for more important tasks.


[27-Jun-19 12:37 AM] artem.pikulin#0794
And it keeps getting postponed, you could just track MM2 progress and make changes accordingly, you didn't - so you have to do huge refactoring now.


[27-Jun-19 12:41 AM] artem.pikulin#0794
`Nor can i justify devs working on something without a finished codebase, we were in that situation last time around.` - the codebase won't ever be `finished`, the development is continous process, it's not like old style "waterfall" when you get the release and new release will come after 1 year.


[27-Jun-19 12:43 AM] artem.pikulin#0794
https://discordapp.com/channels/412898016371015680/476025090627207168/476342180722638849 - the first link to MM2 nightly builds was posted on `08/07/2018`


[27-Jun-19 12:44 AM] artem.pikulin#0794
https://github.com/atomiclabs/hyperdex/pull/563

{Embed}
https://github.com/atomiclabs/hyperdex/pull/563
Marketmaker v2 test by sindresorhus ¬∑ Pull Request #563 ¬∑ atomic...
https://images-ext-2.discordapp.net/external/JaTLwRiiE1Y7IX4ciskCC6cfdH-GpYHGB91c-TmDteY/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/1520924


[27-Jun-19 12:44 AM] artem.pikulin#0794
MM2 test PR was created on Oct31, 2018!


[27-Jun-19 12:45 AM] artem.pikulin#0794
That's enough to know IMHO.


[27-Jun-19 12:46 AM] artem.pikulin#0794
Did you really need about 3 months to test the application that had like 99% of MM1 code and just few lines of Rust with 100% compatible API?


[27-Jun-19 12:56 AM] artem.pikulin#0794
MM2 is evolving very fast, if you keep just `waiting` for some `frozen` version it'll never happen. Check the commit activity especially during last few weeks - this way you'll be just more and more behind and it'll turn out that you need to build just new GUI instead of trying to refactor existing one.


[27-Jun-19 01:08 AM] hyperDEX#6586
We were told that everything was going to be ported over multiple times, that things should be backward compatible.  That is why we have just left things for you and the team to implement then we build it with mm 2.0 and we can all be happy.

@lukechilds or @sindresorhus  can you take a look and see how long it would take to refactor?


[27-Jun-19 01:09 AM] artem.pikulin#0794
I told that we will try to keep backwards compatibilty unless we're unable to do it.


[27-Jun-19 01:10 AM] artem.pikulin#0794
Then it turned out that it's easier to not keep it at all, again: it took 3 months for you to test at least something. We don't have 3 months to wait for feedback about our changes.


[27-Jun-19 01:11 AM] hyperDEX#6586
Did you tell us 7 months ago that WS will not be implemented?


[27-Jun-19 01:12 AM] artem.pikulin#0794
I couldn't because nanomsg was removed just a couple of months ago.


[27-Jun-19 01:12 AM] artem.pikulin#0794
And also I don't have time to argue more about this, we have way too much of work for beta.


[27-Jun-19 01:12 AM] artem.pikulin#0794
So you have no choice: WS won't be implemented in near future.


[27-Jun-19 01:13 AM] hyperDEX#6586
Then why are you referring back to what was or was not tested back in Oct?


[27-Jun-19 01:13 AM] artem.pikulin#0794
Because your feedback is slow.


[27-Jun-19 01:13 AM] artem.pikulin#0794
Though you considered as not interested.


[27-Jun-19 01:14 AM] hyperDEX#6586
We spent a year and a shitload of funds building it, why we would not be interested in something that was supposed to be backward compatible? You do what you need to, but people burning their own money for the sake of the project does not fall from the skies all the time.


[27-Jun-19 01:15 AM] artem.pikulin#0794
If you were interested why would you test the backend for you GUI since 3 months when you were asked to do it?


[27-Jun-19 01:15 AM] artem.pikulin#0794
Again: it's not `that much` work to refactor it even now.


[27-Jun-19 01:15 AM] artem.pikulin#0794
MM2 has just 10 RPC methods.


[27-Jun-19 01:15 AM] hyperDEX#6586
There is no point going over this again, you said it will be backward compatible, so we left it until it was ready to test.


[27-Jun-19 01:15 AM] hyperDEX#6586
Anyways will wait for the devs to have a look.


[27-Jun-19 01:16 AM] artem.pikulin#0794
I said that we will keep compatibility if possible.


[27-Jun-19 01:16 AM] artem.pikulin#0794
It wasn't possible.


[27-Jun-19 01:16 AM] hyperDEX#6586
Would have been good to tell us it wouldnt be that is the problem


[27-Jun-19 01:16 AM] hyperDEX#6586
Even a few weeks ago you said it was


[27-Jun-19 01:16 AM] hyperDEX#6586
Which is what is frustrating for me.


[27-Jun-19 01:16 AM] artem.pikulin#0794
When and where?


[27-Jun-19 01:16 AM] hyperDEX#6586
I understand things change, but this is not how you handle it


[27-Jun-19 01:18 AM] artem.pikulin#0794
As example `cipi` updates all his nodes upon new commits.


[27-Jun-19 01:18 AM] artem.pikulin#0794
Without any notification.


[27-Jun-19 01:19 AM] artem.pikulin#0794
Is it so hard to watch at docs and repo? Everything is public.


[27-Jun-19 01:19 AM] artem.pikulin#0794
Nightly builds are tested by CI, the binary is uploaded.


[27-Jun-19 01:20 AM] hyperDEX#6586
I could not have the devs working on something that was not done, we have worked for over a year to make this work, there is no way i could fund devs to just sit there and wait for things to be completed.


[27-Jun-19 01:20 AM] artem.pikulin#0794
Seems like you just don't understand the concept.


[27-Jun-19 01:20 AM] artem.pikulin#0794
It's like Agile - we had the `working` version since the very first commit of MM2.


[27-Jun-19 01:21 AM] artem.pikulin#0794
Not sure if we 100% meet the Agile concepts, because everyone interprets this term differently.


[27-Jun-19 01:23 AM] artem.pikulin#0794
https://discordapp.com/channels/412898016371015680/476025090627207168/555349473547780099


[27-Jun-19 01:23 AM] hyperDEX#6586
This is not a productive use of either of our times. Will let Luke or Sindre have a look.


[27-Jun-19 01:23 AM] artem.pikulin#0794
Here is just one public annoucement here where I mention that something is not backward compatible.


[27-Jun-19 01:23 AM] artem.pikulin#0794
I'm pretty sure I will find another examples.


[27-Jun-19 01:25 AM] artem.pikulin#0794
https://discordapp.com/channels/412898016371015680/476025090627207168/552091878045122561


[27-Jun-19 01:25 AM] artem.pikulin#0794
And you were also told that we might remove RPC calls, etc.


[27-Jun-19 01:26 AM] artem.pikulin#0794
Enough info to understand that MM2 doesn't keep compatibility anymore?


[27-Jun-19 01:30 AM] ca333#0333
The new mm2 version was strongly optimized and is not backwards compatible since it would have prevented the improvements/optimizations. However, the new mm2 API can be easily implemented/mapped over into any front-end. On our request the new mm2 has not been built with a specific GUI in mind but rather with an optimal solution for all future GUI devs and front-end implementations. The mm2 api doc answers all technical questions.


[27-Jun-19 01:34 AM] hyperDEX#6586
@ca333 That is great but if we had been told about this earlier, i could have started this process months ago and hopefully launch with atomicDEX.


[27-Jun-19 01:34 AM] hyperDEX#6586
But i guess you have a desktop app ready to go, so that is fine.


[27-Jun-19 01:36 AM] hyperDEX#6586
As you know i have funded the bulk of this GUI out of my own pocket, with the bear and people losing interest in KMD and the non functioning dex, i could not keep the devs on full time. This is not a direct problem but it indirectly shooting all KMD holders in the foot.


[27-Jun-19 01:41 AM] ca333#0333
I am sorry to hear that and it is certainly not our intention to hurt anyone nor in our interest to cause financial loss. Yes i know you have been funding this and you have all our respect for this and everything you done for us and still doing. Things were suboptimal - as you lost resources and time so did we. MM2 is now here to change all these old problems. Months ago you werent around for a long time so i think that was also part of this problem. We are glad you are back - let me tell you that the new mm2 is really not hard to either map to an existing GUI and modify it slightly or to build a new one based on the old skeleton. The API is very small and not complex at all. Most of the things we had to take care of in the GUI are now handled by MM2. No annoying utxo-splits anymore, comprehensive dex and wallet operation infos like TXs, swaps, statuses, etc. 
Its very good.


[27-Jun-19 01:42 AM] hyperDEX#6586
Yes, that lost time was unfortunate but when you try to be too secure, that is a problem too üòÑ


[27-Jun-19 01:43 AM] hyperDEX#6586
Anyways, like i said i have asked Sindre and Luke to take a look and see what we can do to port it.


[27-Jun-19 01:44 AM] ca333#0333
awesome - thank you! Please let us know if we can be of any help for them. If anything is unclear or missing in the docs, and so on feel free to ping us anytime.


[27-Jun-19 01:46 AM] hyperDEX#6586
Sure., will let you know.


[27-Jun-19 04:57 AM] smkhound#7640
Tryna do a withdraw ith LABS, getting this error - 
```Message: {'error': 'rpc:288] utxo:1092] Request(RequestError { request: JsonRpcRequest { jsonrpc: "2.0", id: "14", method: "blockchain.transaction.broadcast", params: [String("0100000001327eb3b5bd0d217f2cc56dcaa653a3dfa534cd40de552891ca3d3709b1c46efb010000006b4830450221008af9a4aea8fe61d90a1b77470f7012416042a2acd89e961489c335429583512702205ba04f6ac232a952edaf87091c92d2bf311280d38dcf2eb2de0c680c1da5a864012102915592a388691b850ae82d87d992243f9b4b7fa086d047ff09ff269f4d55def1ffffffff0200c2eb0b000000001976a91400b7c0b2d8ceb353bb15d23e59a42fe4c42a9ae688ac189fe111000000001976a91432ef2795d92eda216e7dbba5ede2a7f4350c8a9488acbcae145d")] }, error: Object({"code": Number(1), "message": String("the transaction was rejected by network rules.\\n\\n16: tx-overwinter-active\\n[0100000001327eb3b5bd0d217f2cc56dcaa653a3dfa534cd40de552891ca3d3709b1c46efb010000006b4830450221008af9a4aea8fe61d90a1b77470f7012416042a2acd89e961489c335429583512702205ba04f6ac232a952edaf87091c92d2bf311280d38dcf2eb2de0c680c1da5a864012102915592a388691b850ae82d87d992243f9b4b7fa086d047ff09ff269f4d55def1ffffffff0200c2eb0b000000001976a91400b7c0b2d8ceb353bb15d23e59a42fe4c42a9ae688ac189fe111000000001976a91432ef2795d92eda216e7dbba5ede2a7f4350c8a9488acbcae145d]")}) })'}
```


[27-Jun-19 04:57 AM] TonyL#3577
please ensure that you have `"overwintered": 1` for labs in your coins file

{Reactions}
üëçüèø 

[27-Jun-19 04:58 AM] TonyL#3577
you can find my coins file in our private tests repo master branch üòÉ


[27-Jun-19 05:00 AM] smkhound#7640
turns out can work without overwintered.


[27-Jun-19 05:01 AM] smkhound#7640
I just forgot to update coins file on scond node


[27-Jun-19 05:01 AM] smkhound#7640
I've been using https://raw.githubusercontent.com/jl777/coins/master/coins


[27-Jun-19 05:03 AM] smkhound#7640
only activating these right now to test tho - 
```RDvWMrz4B597R9WvzC6Kzsxwuz2wsR1ptZ : 45.33389147 RICK
RDvWMrz4B597R9WvzC6Kzsxwuz2wsR1ptZ : 55.39196303 MORTY
15eKHM6maFLYM99jX27CuMdk9iaMGcQva8 : 0 BTC
RDvWMrz4B597R9WvzC6Kzsxwuz2wsR1ptZ : 1.00881513 KMD
D9nQpc3QsfEpt9LLFc6mT7oM2rJebkCwjR : 96.7940595 DGB
QRFJPePUkiDMnHEkwMRh2dRNeyX4UKdq9y : 7.01867161 QTUM
LPsGYZQbeuabbwqthA6WBNhWMvwdLvfM7P : 0.025646 LTC
XfLA7bkfXxZ8W5kKNuRRktKXz4A3EaSwsD : 0.10765628 DASH
RDvWMrz4B597R9WvzC6Kzsxwuz2wsR1ptZ : 4 VERUS
D9nQpc3QsfEpt9LLFc6mT7oM2rJebkCwjR : 496.98081936 DOGE
RDvWMrz4B597R9WvzC6Kzsxwuz2wsR1ptZ : 2.99999 LABS
RDvWMrz4B597R9WvzC6Kzsxwuz2wsR1ptZ : 2 RFOX
```


[27-Jun-19 05:20 AM] cipi#4502
@artem.pikulin can you please invite @Oszy to the channel?


[27-Jun-19 05:25 AM] artem.pikulin#0794
@cipi Hi, done.


[27-Jun-19 05:38 AM] artem.pikulin#0794
@Oszy welcome!


[27-Jun-19 05:42 AM] TonyL#3577
@smkhound strange - until I added "overwintered: 1" I get same `String("the transaction was rejected by network rules.\\n\\n16: tx-overwinter-` errors in test swaps


[27-Jun-19 05:45 AM] Oszy#5734
Thanks!


[27-Jun-19 06:47 AM] smkhound#7640
i'll check swaps, but withdraw worked ok anyways


[27-Jun-19 06:51 AM] smkhound#7640
just caught this, mm2 kept on going tho
```
thread 'maker_loop' panicked at '

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!   unwrap! called on Result::Err                                              !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
mm2src/lp_swap.rs:1279,17 in mm2::mm2::lp_swap

Err("lp_swap:2124] Swap first event must be Started")

', /root/.cargo/registry/src/github.com-1ecc6299db9ec823/unwrap-1.2.1/src/lib.rs:67:25
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
stack backtrace:
   0: std::sys::unix::backtrace::tracing::imp::unwind_backtrace
             at src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:39
   1: std::sys_common::backtrace::_print
             at src/libstd/sys_common/backtrace.rs:71
   2: std::panicking::default_hook::{{closure}}
             at src/libstd/sys_common/backtrace.rs:59
             at src/libstd/panicking.rs:197
   3: std::panicking::default_hook
             at src/libstd/panicking.rs:211
   4: std::panicking::rust_panic_with_hook
             at src/libstd/panicking.rs:474
   5: std::panicking::continue_panic_fmt
             at src/libstd/panicking.rs:381
   6: std::panicking::begin_panic_fmt
             at src/libstd/panicking.rs:336
   7: <core::result::Result<T, E> as unwrap::VerboseUnwrap>::verbose_unwrap
             at /root/mm2_build/SuperNET/<::std::macros::panic macros>:8
   8: mm2::mm2::lp_swap::run_maker_swap
             at mm2src/lp_swap.rs:1279
   9: mm2::mm2::lp_ordermatch::lp_connect_start_bob::{{closure}}
             at mm2src/lp_ordermatch.rs:260
¬∑ 2019-06-27 15:49:54 +0200 [swap uuid=8098b598-fa9f-4910-ad54-38f5a44d563c] Finished
    Start failed...```


[27-Jun-19 06:51 AM] smkhound#7640
so far so good with LABS


[27-Jun-19 06:51 AM] smkhound#7640
```27 13:51:32, lp_ordermatch:286] Entering the taker_swap_loop RFOX/LABS
```


[27-Jun-19 07:02 AM] artem.pikulin#0794
@smkhound Hi, you're not using the most recent version.


[27-Jun-19 07:02 AM] artem.pikulin#0794
This panick was fixed yesterday.


[27-Jun-19 07:02 AM] artem.pikulin#0794
https://github.com/artemii235/SuperNET/commit/d8c70ea266f6a6ee306371e1acde6d8bc16340aa#diff-ea22e3bf261cf710b86c64822acf0ecaL2124

{Embed}
https://github.com/artemii235/SuperNET/commit/d8c70ea266f6a6ee306371e1acde6d8bc16340aa
Fix few panics caused by unwrap on Err/None #442 #443 ¬∑ artemii23...
https://images-ext-1.discordapp.net/external/bhxbZp_vqWMDWyHbDAs2ChYL0J22s1YIUu1txMsCnWQ/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/15745003

{Reactions}
awthanks 

[27-Jun-19 07:08 AM] artem.pikulin#0794
But the initial problem is swap was failed to start, please post the `my_swap_status` of `8098b598-fa9f-4910-ad54-38f5a44d563c` for further investigation.


[27-Jun-19 07:44 AM] smkhound#7640
```./get_swapStatus.py 8098b598-fa9f-4910-ad54-38f5a44d563c
{'result': {'error_events': ['StartFailed', 'NegotiateFailed', 'TakerFeeValidateFailed', 'MakerPaymentTransactionFailed', 'MakerPaymentDataSendFailed', 'TakerPaymentValidateFailed', 'TakerPaymentSpendFailed', 'MakerPaymentRefunded', 'MakerPaymentRefundFailed'], 'events': [{'event': {'data': {'error': 'lp_swap:797] maker amount 0.8000000000000000 is larger than available 0.5970000000000000, balance 2.997, locked by other swaps 2.4000000000000000'}, 'type': 'StartFailed'}, 'timestamp': 1561643394358}, {'event': {'type': 'Finished'}, 'timestamp': 1561643394358}], 'my_info': None, 'success_events': ['Started', 'Negotiated', 'TakerFeeValidated', 'MakerPaymentSent', 'TakerPaymentReceived', 'TakerPaymentWaitConfirmStarted', 'TakerPaymentValidatedAndConfirmed', 'TakerPaymentSpent', 'Finished'], 'type': 'Maker', 'uuid': '8098b598-fa9f-4910-ad54-38f5a44d563c'}}
```


[27-Jun-19 12:21 PM] mobipoi#5774
@ca333   is there already a desktop app ready to launch with mobile?  If so nice prefer desktop, and @hyperdex it all good there is more than enough opportunities for everyone and it does makes sense that kmd version launches first and set the standard


[27-Jun-19 12:21 PM] mobipoi#5774
@hyperDEX


[27-Jun-19 12:36 PM] ca333#0333
mobile version will launch alone @mobipoi and desktop is following a few weeks later so we can focus on mobile feedback and revision first. Our marketing team will provide the official infos when its ready.


[27-Jun-19 12:53 PM] mobipoi#5774
Ok


[27-Jun-19 08:28 PM] artem.pikulin#0794
@smkhound Hi, as I can see you started several swaps that were about to use more coins than your balance, so you can see the error `maker amount 0.8000000000000000 is larger than available 0.5970000000000000, balance 2.997, locked by other swaps 2.4000000000000000`, there were other swaps that already locked (virtually until the swap transaction is sent) `2.4` coins so at this moment you were able to trade no more than `0.597` (even a bit less as this virtual lock doesn't count the txfees).


[27-Jun-19 09:04 PM] smkhound#7640
Correct - script I was running covers all combination pairs of a bunch of activated coins. Will see if I can tweak balances and prices to avoid the overspend


[28-Jun-19 01:36 AM] smkhound#7640
still working on it, but results of latest run here

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/594083782919979008/status_127.0.0.1_mm2_buy_orders_28-June-2019-3.csv


[28-Jun-19 02:53 AM] grewalsatinder#9653
@artem.pikulin does mm2.0 support gRPC, or is that in the plans in future ?


[28-Jun-19 02:54 AM] grewalsatinder#9653
would it be too much work to adopt gRPC in mm2.0 ?


[28-Jun-19 02:56 AM] Oszy#5734
I have successfully installed, set up, and done my first swap  using the instructions from gitHub (I assume this is expected üòÑ ) apart from one tiny error I found during cargo build, in the build file (`mm2scr/common/build.rs`) where it sets cpu threads to use it outputs `-j 4` and it panics and stops so I had to comment that part of the function out as it wasn't working with `-j4` either.

{Reactions}
üíØ 

[28-Jun-19 06:42 AM] jorian#4555
is there a way to reach the mm2 docs publicly?


[28-Jun-19 06:42 AM] jorian#4555
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md

{Embed}
https://github.com/KomodoPlatform/developer-docs/blob/mm/docs/basic-docs/atomic-swap-dex/dex-api.md
KomodoPlatform/developer-docs
Contribute to KomodoPlatform/developer-docs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[28-Jun-19 06:42 AM] jorian#4555
i know of that page, which links to api.kmd.host but that one's dead


[28-Jun-19 06:43 AM] Kiruel#2091
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[28-Jun-19 06:44 AM] jorian#4555
i am familiar with that. are these pages not hosted anywhere but there?


[28-Jun-19 09:49 PM] smkhound#7640
`{'event': {'data': {'error': 'lp_swap:1714] eth:608] RPC error: Error { code: ServerError(-32010), message: "Transaction with the same hash was already imported.", data: None }'}, 'type': 'TakerFeeSendFailed'}` seeing this on a USDC swap ü§∑üèª


[28-Jun-19 09:52 PM] smkhound#7640
a few successful ETH swaps, no luck with BAT/USDC/QTUM though

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/594389668577935360/status_ETH_127.0.0.1_mm2_buy_orders_29-June-2019.csv


[28-Jun-19 09:53 PM] smkhound#7640
also ETH balance doesnt look right, unless gas is hell expensive or I have "funds in transit" awaiting return


[28-Jun-19 10:03 PM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/594392398377910282/failed_USDC_RICK.txt


[28-Jun-19 10:16 PM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/594395746376351746/failed_BAT_MORTY.txt


[28-Jun-19 11:34 PM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/594415460657791019/status_HUSH_127.0.0.1_mm2_buy_orders_29-June-2019.csv


[28-Jun-19 11:52 PM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/594419936013582336/status_RICK_127.0.0.1_mm2_buy_orders_29-June-2019.csv


[28-Jun-19 11:53 PM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/594420131418079252/status_USDC_127.0.0.1_mm2_buy_orders_29-June-2019-1.csv


[29-Jun-19 12:12 AM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/594424888840683530/status_MORTY_127.0.0.1_mm2_buy_orders_29-June-2019.csv


[29-Jun-19 12:12 AM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/594424926044291082/status_QTUM_127.0.0.1_mm2_buy_orders_29-June-2019.csv


[29-Jun-19 12:14 AM] jl777c#5810
what percentage are failures?


[29-Jun-19 12:16 AM] smkhound#7640
close to consistently failing on BAT / USDC / QTUM, otherwise ok.
QTUM success on RICK / MORTY, timeout on the rest


[29-Jun-19 12:17 AM] smkhound#7640
Had some success with BAT / USDC yesterday, not so  much today


[29-Jun-19 02:16 AM] artem.pikulin#0794
@smkhound Hi, how many swaps are you running concurrently? In 1 of your reports I noticed that there were over 30 concurrent swaps, is this correct?


[29-Jun-19 02:17 AM] smkhound#7640
yeah, I'm probably pushing the limits.


[29-Jun-19 02:17 AM] smkhound#7640
Initial tests were effectively all pair combinations of all activated coins


[29-Jun-19 02:17 AM] smkhound#7640
I've since added a filter to do all pairs against a specific base


[29-Jun-19 02:21 AM] smkhound#7640
each test run outputs the CSV, should show how many active trades... but there seem to be some zombie trades still attempting to kickstart. I've run `cancel_all`, but still see 
`29 09:20:53, lp_swap:2024] Can't kickstart the swap fed64c38-5526-44a7-9978-c7a8fbc8942f until the coin LABS is activated` when reloading ./mm2


[29-Jun-19 02:21 AM] smkhound#7640
early tests were almost 128 trades, though a few less due to no balance for some coins


[29-Jun-19 02:21 AM] smkhound#7640
now its about 10-12


[29-Jun-19 02:22 AM] artem.pikulin#0794
There's an interrupted swap on previos run that used LABS coin, so according to what MM2 logs you have to enable it to finish the swap.


[29-Jun-19 02:23 AM] artem.pikulin#0794
Do your reports have swap statuses from both participating nodes?


[29-Jun-19 02:24 AM] artem.pikulin#0794
I can see only taker side events.


[29-Jun-19 02:25 AM] smkhound#7640
I'll check other node, should also have uuids stored


[29-Jun-19 02:25 AM] artem.pikulin#0794
As of now I'm noticing 2 issues: `nonce` problems with concurrent ETH/ERC20 trades and networking side issues when over 10 concurrent swaps are running.


[29-Jun-19 02:25 AM] smkhound#7640
I enable LABs, run cancel, but it still wants to kickstart again next time I restart mm2


[29-Jun-19 02:25 AM] artem.pikulin#0794
It's `swap` kickstart, not order.


[29-Jun-19 02:26 AM] smkhound#7640
ETH is being eaten fast too


[29-Jun-19 02:26 AM] artem.pikulin#0794
`cancel_order` doesn't affect swaps at all.


[29-Jun-19 02:26 AM] jl777c#5810
maybe to limit the number of concurrent swaps possible to avoid the limits


[29-Jun-19 02:26 AM] smkhound#7640
not sure what gas rates are, but I've burned half my eth


[29-Jun-19 02:26 AM] artem.pikulin#0794
Let's separate the concerns please.


[29-Jun-19 02:26 AM] artem.pikulin#0794
There're dozens of reports which we should all process and this is getting mixed with `gas is being burnt too fast`.


[29-Jun-19 02:27 AM] smkhound#7640
k, so swaps tryna kickstart will just timeout?


[29-Jun-19 02:27 AM] artem.pikulin#0794
Swap will be driven to Finished state after you enable LABS, so you should enable it and wait for the message that it's finished.


[29-Jun-19 02:28 AM] smkhound#7640
cool, will just leave mm2 running idle for a few hours


[29-Jun-19 02:29 AM] artem.pikulin#0794
Gtg, will be back in a couple of hours.

{Reactions}
üëãüèª 

[29-Jun-19 04:53 AM] artem.pikulin#0794
@smkhound Please perform post-run analysis of your reports and check error messages that you get. Same/similar error message can be grouped in 1 issue. Please don't include successful swaps as we're not interested in them. Please gather swap_status from `both` nodes, it's `always` essential to troubleshoot. As example please take a look at this issue: https://github.com/artemii235/SuperNET/issues/446

{Embed}
https://github.com/artemii235/SuperNET/issues/446
ETH/QTUM swap failed. ¬∑ Issue #446 ¬∑ artemii235/SuperNET
Number of other ongoing swaps: 12 number of failed swaps with same error in test run: 1 full maker swap status: (link will be here) full taker swap status: (link will be here) The error on taker si...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[29-Jun-19 04:53 AM] artem.pikulin#0794
It's created from 1 of your reports.


[29-Jun-19 04:54 AM] artem.pikulin#0794
As you can see you got dust error when you were using QTUM as taker, QTUM has quite high txfees and dust threshold so you should use about 3 QTUM per trade as taker to avoid dust errors on dexfee broadcast.


[29-Jun-19 04:55 AM] smkhound#7640
working on the other side reports, was getting ``` ./get_swapStatus.py fd476185-ace2-482b-a949-1d4b1df48fca
{'error': 'swap data is not found'}
smk762@smk762-1:~/mm2_autotests$ ./get_orderStatus.py fd476185-ace2-482b-a949-1d4b1df48fca
{'error': 'Order with uuid fd476185-ace2-482b-a949-1d4b1df48fca is not found'}```
using setprice on that side, not sure if that is reason.


[29-Jun-19 04:56 AM] smkhound#7640
refactoring, will check `sell`


[29-Jun-19 04:57 AM] smkhound#7640
thinking maybe mix up between swap_uuids and order_uuids


[29-Jun-19 04:58 AM] smkhound#7640
Will follow that issue as template for future runs üëçüèª


[29-Jun-19 04:59 AM] artem.pikulin#0794
If you get some failed swaps please post them as Github issues, files posted here will get easily lost and messed up.


[29-Jun-19 05:05 AM] artem.pikulin#0794
For USDC as maker I need info from maker node, all swaps failed to receive the maker payment data, so something wrong was there.


[29-Jun-19 05:06 AM] artem.pikulin#0794
```
811201f3-6754-42d3-a4f3-f98e56cfc017
6ef9a662-fc2f-4deb-814e-ed5696703638
0559f096-aaa1-49ba-b81f-133102ebf989
63cee741-6c49-4cd4-a3e6-81772d4f337a
77c96de4-dbbe-4ae3-a2af-2442e9960f6e
6efdeecc-307c-48e4-9360-eccd38a1cf03
d1a4efc5-4379-4a6a-9274-8e20c4c0547d
89b264b3-2dc3-4b46-9505-5a8696d80e05
2e008945-867a-4ebd-8286-2a4210982c52
f8c4256e-7643-47ec-b2c5-7c99e3c613da
933e8125-bf27-43a8-b10d-9e3b1fe3b190
746a81b4-ed40-4fd2-be1d-ee68c724b097
```


[29-Jun-19 05:06 AM] artem.pikulin#0794
These ones


[29-Jun-19 05:12 AM] cipi#4502
not my node... i have USDC/KMD pair


[29-Jun-19 05:13 AM] artem.pikulin#0794
Yeah, I know, the message about swap statuses is targeting @smkhound


[29-Jun-19 05:13 AM] artem.pikulin#0794
Btw @cipi did you have success USDC swaps?


[29-Jun-19 05:13 AM] smkhound#7640
I had success with a few yesterday, but not today


[29-Jun-19 05:25 AM] cipi#4502
yes: https://github.com/jl777/coins/blob/master/swaps/USDC-KMD.md

{Embed}
https://github.com/jl777/coins/blob/master/swaps/USDC-KMD.md
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[29-Jun-19 05:26 AM] artem.pikulin#0794
Ok, it should work, we need a report from maker node to troubleshoot it, taker swap statuses do not provide any useful information in this case.


[29-Jun-19 05:49 AM] artem.pikulin#0794
Important bug caught - ETH/ERC20 payments refund failed due to error in function call arguments in MM2, will be fixed ASAP.

{Reactions}
üôèüèª 

[29-Jun-19 06:02 AM] TonyL#3577
@smkhound I propose to make any automated tests (especially huge loading one) in enviroment where we control both maker and taker (our test env netid)
Otherwise we: a) can negatively affect mobile app testers experience b) cant collect easily both maker and taker swap statuses / logs


[29-Jun-19 06:03 AM] TonyL#3577
Also usually if swap stuck - it's possible to find out pretty clear error message. You just need maker/taker swap status and mm2 logs


[29-Jun-19 06:03 AM] TonyL#3577
So then you can open GH issue with this information attached and error message highlighted


[29-Jun-19 06:04 AM] smkhound#7640
I'm using the netid from the cluster we're on, using two other nodes trading with each other. Cluster will auto better, will try and merge latest scrripts to work with cluster tomorrow


[29-Jun-19 06:04 AM] TonyL#3577
Seed nodes are up - all you have to do is to change netid in MM2.json and restart mm2 I wonder


[29-Jun-19 06:05 AM] TonyL#3577
We just have to keep in mind  seed nodes mm2 binary update when testing new version


[29-Jun-19 06:06 AM] smkhound#7640
new scripts have 127.0.0.1 hardcoded in places. just need to make sure that is a var so cluster scripts can link in


[29-Jun-19 06:06 AM] TonyL#3577
Cant understand what problem is - you can add any computer to cluster - just need to add seednodes ips and change netid


[29-Jun-19 06:07 AM] TonyL#3577
So you can add servers on which you currently running swaps to cluster


[29-Jun-19 06:07 AM] TonyL#3577
just add seednodes to MM2.json and change netid and it should work as it is


[29-Jun-19 06:07 AM] smkhound#7640
cluster already checks sha, got a "start_mm2" script wich gets latest `coins` from jl777 repo and latest `mm2-latest-Linux.zip`, extracts it etc.

{Reactions}
üî• 

[29-Jun-19 06:11 AM] smkhound#7640
problem is small. Older cluster scripts we have `my_balance("http://"+taker_ip+":7783", passphrase, base['tag'])`
in new scripts, some places hardcodes 127.0.0.1 
just need to find and make var


[29-Jun-19 06:36 AM] artem.pikulin#0794
The bug with ETH/ERC20 is fixed and pushed to `mm2`. Please update your MM2.

{Reactions}
üëçüèª (4) 

[01-Jul-19 12:48 AM] artem.pikulin#0794
@smkhound Hi, could you please send the urls of ETH nodes that you used during testing? The value of urls from `enable` https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md#enable

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[01-Jul-19 12:51 AM] smkhound#7640
```
    {
        'tag': 'ETH',
        'electrum': ["http://eth1.cipig.net:8555",
                     "http://eth2.cipig.net:8555",
                     "http://eth3.cipig.net:8555"],
        'contract': "0x8500AFc0bc5214728082163326C2FF0C73f4a871"
    },```


[01-Jul-19 12:51 AM] smkhound#7640
```
                params = {'userpass': user_pass,
                          'method': 'enable',
                          'urls':coin['electrum'],
                          'coin': cointag,
                          'swap_contract_address': coin['contract'],
                          'mm2':1,
                          'tx_history':tx_history,}```


[01-Jul-19 12:55 AM] smkhound#7640
fwiw, here's logs for latest sequential combinations test between my two nodes


[01-Jul-19 12:55 AM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/595160570643087370/mm2_node_seq_orders_30-June-2019-5.csv


[01-Jul-19 12:55 AM] smkhound#7640
I've not had a proper look yet, but most errors appear to be due to insufficient funds


[01-Jul-19 12:57 AM] smkhound#7640
and involving eth, qtum or doge.
I know qtum funds are suboptimal, will try and top up this week


[01-Jul-19 12:57 AM] artem.pikulin#0794
Could you please provide reports in format mentioned on Saturday?


[01-Jul-19 12:57 AM] smkhound#7640
will do


[01-Jul-19 12:58 AM] smkhound#7640
once I clear out false positives etc


[01-Jul-19 12:58 AM] artem.pikulin#0794
It's hard to navigate in 300+ lines CSV that also has info about successful swaps in which we're not interested at all.


[01-Jul-19 01:09 AM] artem.pikulin#0794
`will do
once I clear out false positives etc`
Thanks!


[01-Jul-19 01:21 AM] smkhound#7640
Are DOGE or QTUM to be ignored? Those are the only ones with error `rejected by network rules`
Otherwise the error was `insufficient funds` on ETH/ERC20s


[01-Jul-19 01:22 AM] smkhound#7640
swaps were all small qty, likely less than DOGE/QTUM tx fee


[01-Jul-19 01:22 AM] smkhound#7640
in which case likely cause of rejection


[01-Jul-19 01:22 AM] TonyL#3577
Yesterday DOGE swapped fine on my side as well as QTUM


[01-Jul-19 01:22 AM] smkhound#7640
I've also had successful swaps on both sometimes


[01-Jul-19 01:25 AM] TonyL#3577
Yep, most probably it's because of swaps amount less than tx fee (especially for DOGE - doge have few coins as tx fee)


[01-Jul-19 01:28 AM] smkhound#7640
I'll tweak to use variable amounts base on coin. I believe the only errors I got were due to insufficient funds or swap < txfee so nothing to report except success and empty pockets


[01-Jul-19 01:29 AM] TonyL#3577
I think we have really good swaps experience/reliability now


[01-Jul-19 01:30 AM] TonyL#3577
have 100% success in AtomicDEX tests


[01-Jul-19 01:30 AM] smkhound#7640
any other coins to test next round?


[01-Jul-19 01:31 AM] TonyL#3577
Lets concentrate on testing of what we have now. CSV report cosmetic improvement will be very helpful


[01-Jul-19 01:31 AM] TonyL#3577
Now it's hard to get needed/helpful info from it


[01-Jul-19 01:32 AM] smkhound#7640
I had vision of translating csv to color coded matrix, with links to status for maker/taker.


[01-Jul-19 01:32 AM] smkhound#7640
hosted at o to http://qamodo.reports üòÑ


[01-Jul-19 01:33 AM] smkhound#7640
can probablyput it on a hidden page within oracles.earth for now tho


[01-Jul-19 08:22 AM] artem.pikulin#0794
@smkhound @TonyL Please test the most recent MM2 with concurrent ETH/ERC20 swaps, it should handle nonce better now (requesting it from all URLs and checking that it's equal) so less or no errors should occur.


[01-Jul-19 08:23 AM] artem.pikulin#0794
I mean errors decribed in this issue: https://github.com/artemii235/SuperNET/issues/447, these happened when you attempted to swap ETH/BAT/USDC with some other coin at same time.

{Embed}
https://github.com/artemii235/SuperNET/issues/447,
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[01-Jul-19 08:24 AM] TonyL#3577
@smkhound I‚Äôm in road now, will be fully available tomorrow. Could you please trigger swap tests?


[01-Jul-19 08:25 AM] smkhound#7640
I'm a bit low on ETH but will see what I can do


[01-Jul-19 08:28 AM] TonyL#3577
I can send some eth from mobile wallet


[01-Jul-19 08:56 AM] smkhound#7640
A few swaps underway, I gotta sleep tho
5f321a21-0e4c-4ba3-92a2-73aaafdb2982
97a3db97-c90d-461e-9fb3-491cd4fcd4fc
f69e89fe-ec2a-44f5-8b16-040835a4d20c
c7d8b2f1-1b6f-4ad1-b82e-86fe8eea8f89
5f321a21-0e4c-4ba3-92a2-73aaafdb2982
on netid 7777


[01-Jul-19 08:58 AM] smkhound#7640
```
01 15:57:31, lp_swap:1140] Taker payment spend tx 48743085c1d0867cf8820ae391db0408c39b990b84e91b4373d7fd8b70f77969
¬∑ 2019-07-01 17:57:31 +0200 [swap uuid=c7d8b2f1-1b6f-4ad1-b82e-86fe8eea8f89] Finished
    Taker payment spent...
    Taker payment validated and confirmed...
    Taker payment wait confirm started...
    Taker payment received...
    Maker payment sent...
    Taker fee validated...
    Negotiated...
    Started...

```
so far so good.

{Reactions}
üíØ 

[01-Jul-19 08:58 AM] Kiruel#2091
Good night @smkhound thx for testing.


[01-Jul-19 08:59 AM] smkhound#7640
np, early start tommorow or I'd stay up üòÑ


[02-Jul-19 03:47 AM] smkhound#7640
been like this for a while, but number is slowly decreasing


[02-Jul-19 03:47 AM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/595566154387423253/Screenshot_20190702-183905.png


[02-Jul-19 03:47 AM] smkhound#7640
is it "safe" to recieve in this state?


[02-Jul-19 03:47 AM] smkhound#7640
will i be able to use eth as gas prior to full sync?


[02-Jul-19 03:50 AM] smkhound#7640
... also, I'm gettting a "no gas" warning when KMD is sell coin and BAT/USDC/ETH is buy coin...
seems strange buyer is expected to pay gas for incoming coin...


[02-Jul-19 03:52 AM] Kiruel#2091
It's will be fix today, now we have a get_trade_fee on mm2 and i can check if the user have enought ETH to perform a trade.


[02-Jul-19 03:52 AM] Kiruel#2091
If its ERC.


[02-Jul-19 03:52 AM] smkhound#7640
so I dont need eth to buy eth?


[02-Jul-19 03:53 AM] Kiruel#2091
It's a good question @artem.pikulin ?


[02-Jul-19 03:53 AM] Kiruel#2091
I think you paid the fee only the coin you sell.


[02-Jul-19 03:53 AM] artem.pikulin#0794
You need ETH to buy ETH, yes.

{Reactions}
üòê 

[02-Jul-19 03:53 AM] Kiruel#2091
Arf


[02-Jul-19 03:54 AM] artem.pikulin#0794
It's the way Ethereum works, you have to pay gas to call the etomic-swap smart contract.


[02-Jul-19 03:54 AM] smkhound#7640
so tahts just for erc20/eth? I dont need kmd to buy kmd...


[02-Jul-19 03:55 AM] artem.pikulin#0794
Of course you don't because KMD is utxo coin, you still pay the fee but it works differently.


[02-Jul-19 03:56 AM] smkhound#7640
cool, makes sense


[02-Jul-19 03:57 AM] Kiruel#2091
Ok, I will make a issue thx.


[02-Jul-19 03:57 AM] smkhound#7640
kmd/rick/morty are green dot


[02-Jul-19 03:58 AM] Kiruel#2091
Yeah only ERC.


[02-Jul-19 03:58 AM] smkhound#7640
will check erc20s once I get some eth in


[02-Jul-19 03:58 AM] smkhound#7640
red dot on bch, dash, qtum


[02-Jul-19 03:58 AM] smkhound#7640
no balance in others to check right now


[02-Jul-19 04:01 AM] Kiruel#2091
For all GUI problem can you post in the channel #ü§ù‚îÇdex-mobile . Thx.

{Reactions}
üëçüèª 

[02-Jul-19 04:02 AM] smkhound#7640
sorry, didnt realise in wrong channel üòÑ


[02-Jul-19 04:02 AM] Kiruel#2091
np üòâ


[02-Jul-19 04:02 AM] smkhound#7640
will move post over


[02-Jul-19 04:53 AM] TonyL#3577
@artem.pikulin was something changed in mm2 required build deps? Build on latest is failing on my machine on which I built succesfully before: https://paste.ubuntu.com/p/s9rv6VRTwC/


[02-Jul-19 04:53 AM] artem.pikulin#0794
https://github.com/artemii235/SuperNET#how-to-build

{Embed}
https://github.com/artemii235/SuperNET
artemii235/SuperNET
Contribute to artemii235/SuperNET development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[02-Jul-19 04:54 AM] artem.pikulin#0794
`cargo build --features native` - `native` is mandatory now, please try to add it and build again.

{Reactions}
üëç 

[02-Jul-19 05:12 AM] TonyL#3577
built fine by `cargo build --features native`

{Reactions}
‚úÖ 

[02-Jul-19 08:09 AM] smkhound#7640
gwtting `error: Response(Object({"code": Number(1), "message": String("the transaction was rejected by network rules.\\n\\nmin relay fee not met, 400000 < 1151200 (code 66)` on a QTUM withdraw, tried sending 7, 5 and 3


[02-Jul-19 08:11 AM] smkhound#7640
full output - https://pastebin.com/AvcthGHa

{Embed}
https://pastebin.com/AvcthGHa
smk762@cctest163:~/mm2_autotests$ ./withdraw.py QTUM QRFJPePUkiDMn...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[02-Jul-19 08:13 AM] cipi#4502
`qtum-cli -getinfo` shows `"relayfee": 0.00400000`, `"version": 170200` for me
what does your daemon say?


[02-Jul-19 08:16 AM] smkhound#7640
I'm using electrum


[02-Jul-19 08:16 AM] smkhound#7640
```
    {
        'tag': 'QTUM',
        'min_swap': 3,
        'api-id': 'qtum',
        'electrum': [{"url":"s1.qtum.info:50001"},
                     {"url":"s2.qtum.info:50001"},
                     {"url":"s3.qtum.info:50001"},
                     {"url":"s4.qtum.info:50001"},
                     {"url":"s5.qtum.info:50001"},
                     {"url":"s6.qtum.info:50001"},
                     {"url":"s7.qtum.info:50001"},
                     {"url":"s8.qtum.info:50001"},
                     {"url":"s9.qtum.info:50001"}]
    },```


[02-Jul-19 08:17 AM] cipi#4502
don't have access to these, they are run by the qtum-guys


[02-Jul-19 08:20 AM] smkhound#7640
https://qtum.info/ says fee about 0.004


[02-Jul-19 08:20 AM] smkhound#7640
I think complex tx, big hex, more fee


[02-Jul-19 08:22 AM] smkhound#7640
will look closer 2moro


[02-Jul-19 08:24 AM] smkhound#7640
maybe go native...


[02-Jul-19 08:26 AM] TonyL#3577
@smkhound not all of these electrums are on latest Electrumx version


[02-Jul-19 08:26 AM] TonyL#3577
as I remember


[02-Jul-19 08:27 AM] TonyL#3577
s3 and s9 were on 1.2 last time I checked and s6 was down


[02-Jul-19 08:27 AM] TonyL#3577
you can check version this way: ```(echo '{ "id": 1, "method": "server.version", "params": [] }'; sleep 0.5) | ncat s3.qtum.info 50001```


[02-Jul-19 08:30 AM] cipi#4502
the error says `min relay fee not met, 400000 < 1151200`, so i assume the relay fee is meant, not the txfee


[02-Jul-19 08:31 AM] cipi#4502
maybe they forgot to update the qtum-daemon on the electrums too


[02-Jul-19 08:32 AM] smkhound#7640
probalbly why I have had trouble with qtum. must sleep now, but should be able to resolve tomorrow


[02-Jul-19 11:16 PM] artem.pikulin#0794
QTUM uses dynamic fee calculation, 400k satoshis should work for tx no larger than 1kb, @smkhound the tx size you attempted to send is almost 3kb so you get relay fee `1151200`.

{Reactions}
ü§ë 

[03-Jul-19 01:21 AM] smkhound#7640
Is there a way to change fee value in mm2? I've installed and synced native daemon so can consolidate utxos through that if needed


[03-Jul-19 03:14 AM] artem.pikulin#0794
@smkhound If you use electrum you may remove the `txfee` from `coins` from QTUM config: https://github.com/jl777/coins/blob/master/coins#L2188 and MM2 will use the `estimatefee` call from Electrum and calculate the fee depending on tx size.

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Reactions}
awthanks 

[03-Jul-19 03:15 AM] artem.pikulin#0794
But it might not work for native mode as there're 2 calls: `estimatesmartfee` and `estimatefee`, but MM2 uses `estimatefee` by default which might not return valid amount.


[03-Jul-19 03:17 AM] artem.pikulin#0794
There's open issue about it: https://github.com/artemii235/SuperNET/issues/425

{Embed}
https://github.com/artemii235/SuperNET/issues/425
Use "estimatesmartfee" instead of "estimate_fee" for UTXO native m...
estimate_fee is mostly deprecated, I think we can even detect automatically which method is available.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[03-Jul-19 03:20 AM] artem.pikulin#0794
@smkhound do you have QTUM native daemon running now?


[03-Jul-19 03:22 AM] smkhound#7640
yep


[03-Jul-19 03:23 AM] smkhound#7640
havent used with mm2 yet, just cleaning test repo up a bit atm


[03-Jul-19 03:23 AM] artem.pikulin#0794
Is it synced? Could you please try to call `estimatesmartfee` and `estimatefee` on it?


[03-Jul-19 03:26 AM] artem.pikulin#0794
Now I wonder if we should detect the available native method automatically or set it through config.


[03-Jul-19 03:40 AM] smkhound#7640
```smk762@smk762-1:~/qtum-0.17.6/bin$ ./qtum-cli estimatefee
error code: -32
error message:
estimatefee was removed in v0.17.
Clients should use estimatesmartfee.
smk762@smk762-1:~/qtum-0.17.6/bin$ ./qtum-cli estimatesmartfee 6
{
  "feerate": 0.00402306,
  "blocks": 6
}
```


[03-Jul-19 03:40 AM] smkhound#7640
looks like `estimatefee` removed


[03-Jul-19 03:48 AM] artem.pikulin#0794
Thanks! I'm adding the `estimatefee` or `estimatesmartfee` auto-detection now.


[03-Jul-19 03:49 AM] artem.pikulin#0794
Could you please aldo call `./qtum-cli estimatesmartfee 1` ?


[03-Jul-19 04:16 AM] smkhound#7640
```smk762@smk762-1:~/mm2_autotests/lib$ ~/qtum-0.17.6/bin/qtum-cli estimatesmartfee 1
{
  "feerate": 0.00402326,
  "blocks": 2
}
smk762@smk762-1:~/mm2_autotests/lib$ ~/qtum-0.17.6/bin/qtum-cli estimatesmartfee 2
{
  "feerate": 0.00402326,
  "blocks": 2
}
```


[03-Jul-19 05:03 AM] artem.pikulin#0794
@smkhound Please try to remove the `txfee` from QTUM config and try to test QTUM in both Electrum and native mode. It should calculate and use proper fee amount depending on tx size.


[03-Jul-19 05:04 AM] artem.pikulin#0794
I've just pushed the fix, please ensure that you use latest version.


[03-Jul-19 05:05 AM] smkhound#7640
build or http://195.201.0.6/mm2/mm2-latest-Linux.zip ?


[03-Jul-19 05:06 AM] artem.pikulin#0794
You can use pre-built nightly binary, it's updated 3 minutes ago after successful CI build.


[03-Jul-19 05:09 AM] artem.pikulin#0794
If your test is successful please submit a PR removing `txfee` for QTUM in coins repo.

{Reactions}
üëçüèº 

[03-Jul-19 07:43 AM] smkhound#7640
```failed with HTTP status code 500 Internal Server Error, response body: {\\"result\\":null,\\"error\\":{\\"code\\":-26,\\"message\\":\\"min relay fee not met, 1000 < 1092000 (code 66)\\"},\\"id\\":\\"0\\"}\\n") }'}
```
same error, different wording on native


[03-Jul-19 07:46 AM] smkhound#7640
using native CLI, get this in stdout - 
```/qtum-cli sendtoaddress QRFJPePUkiDMnHEkwMRh2dRNeyX4UKdq9y 1
2019-07-03T14:43:53Z [default wallet] Fee Calculation: Fee:227800 Bytes:338 Needed:170665 Tgt:6 (requested 6) Reason:"Half Target 60% Threshold" Decay 0.96200: Estimation: (403909 - 1e+99) 100.00% 13.8/(13.8 0 mem 0.0 out) Fail: (0 - 403909) 100.00% 12.8/(12.8 0 mem 0.0 out)
2019-07-03T14:43:53Z [default wallet] CommitTransaction:
```


[03-Jul-19 07:46 AM] smkhound#7640
```2019-07-03T14:46:25Z [default wallet] Fee Calculation: Fee:187833 Bytes:372 Needed:187833 Tgt:6 (requested 6) Reason:"Half Target 60% Threshold" Decay 0.96200: Estimation: (403909 - 1e+99) 100.00% 13.8/(13.8 0 mem 0.0 out) Fail: (0 - 403909) 100.00% 12.8/(12.8 0 mem 0.0 out)
2019-07-03T14:46:25Z [default wallet] CommitTransaction:
```


[03-Jul-19 07:48 AM] smkhound#7640
```./qtum-cli gettransaction cf4b89719518c9a67d3c2d5c6d5eba3a5e79c3ae5d3735cb4696a22a9d78d463
{
  "amount": 0.00000000,
  "fee": -0.00187833,
```


[03-Jul-19 07:58 AM] smkhound#7640
tried all electrums individually, same error as before.


[03-Jul-19 07:58 AM] smkhound#7640
After consolidating funds through native RPC, no error with mm2


[03-Jul-19 07:58 AM] smkhound#7640
```./atomicdex-cli withdraw QTUM QLfnEfNK6D14ToRjQQDoBcsmZBjtaRWMr2 5
{'block_height': 0,
 'coin': 'QTUM',
 'fee_details': {'amount': 1e-05},
 'from': ['QRFJPePUkiDMnHEkwMRh2dRNeyX4UKdq9y'],
 'internal_id': '',
 'my_balance_change': -5.00001,
 'received_by_me': 3.39999,
 'spent_by_me': 8.4,
 'timestamp': 1562165864,
 'to': ['QLfnEfNK6D14ToRjQQDoBcsmZBjtaRWMr2'],
 'total_amount': 8.4,
 'tx_hash': '71673a90cc109b586450fded11e3f4fa8096a1c968da7baed78ddb6734867615',
 'tx_hex': '0100000001acfe2a75ddb36d7f8b6914a1a2e68f4b8c91bdb2bf470a36122b90a7059cb2e6000000006a473044022078d5ba872d6a9615a32a7caf3dc74c855656ad7aadbef179d1ef644ec9d37d4a022016b0ed817b6fbcce9d6d7ada51d73526c982a28c6db57dea6cc764e54a5360f6012102915592a388691b850ae82d87d992243f9b4b7fa086d047ff09ff269f4d55def1ffffffff020065cd1d000000001976a91400b7c0b2d8ceb353bb15d23e59a42fe4c42a9ae688ac18f94314000000001976a91432ef2795d92eda216e7dbba5ede2a7f4350c8a9488ac68c21c5d'}
```


[03-Jul-19 08:02 AM] artem.pikulin#0794
Something is not right, you shouldn't get 1000 sat txfee for QTUM.


[03-Jul-19 08:06 AM] artem.pikulin#0794
So MM2 sets 1000 by itself as fixed amount, going to fix now.


[03-Jul-19 08:17 AM] artem.pikulin#0794
@smkhound Please retest QTUM with latest MM2, it used hardcoded 1000 sat fee if it wasn't set for all coins except BTC, QTUM is excluded now too. But for all others it will still use 1000 when `txfee` is not set in config.

{Reactions}
üëçüèº 

[03-Jul-19 09:17 AM] smkhound#7640
I'll have to recreate dust to replicate the previous errors, but json from withdraw now has 
```atomicdex-cli withdraw QTUM QLfnEfNK6D14ToRjQQDoBcsmZBjtaRWMr2 3
{'block_height': 0,
 'coin': 'QTUM',
 'fee_details': {'amount': 0.004},
 'from': ['QRFJPePUkiDMnHEkwMRh2dRNeyX4UKdq9y'],
 'internal_id': '',
 'my_balance_change': -3.004,
 'received_by_me': 0.996,
 'spent_by_me': 4.0,
 'timestamp': 1562170499,
 'to': ['QLfnEfNK6D14ToRjQQDoBcsmZBjtaRWMr2'],
 'total_amount': 4.0,
 'tx_hash': '15e9c6cd143468e7905e47ff0cc8c9fbb89707657e3db97c252b8050b185ec84',
 'tx_hex': '01000000017e27503f40541cf91855f982444036467d8c1e495f6313ffe4de3146e394caed010000006b483045022100abdf9c55d5f5299c7e46d2d74b9fc452895239dd51a5ce79df1d8acff02d0a0002203dff87baa52fdac473aee559fa70f37e4ce5ad66dc2d8287db2a3a731cb5517b012102915592a388691b850ae82d87d992243f9b4b7fa086d047ff09ff269f4d55def1ffffffff0200a3e111000000001976a91400b7c0b2d8ceb353bb15d23e59a42fe4c42a9ae688ac80c6ef05000000001976a91432ef2795d92eda216e7dbba5ede2a7f4350c8a9488ac83d41c5d'}
```


[03-Jul-19 08:49 PM] artem.pikulin#0794
@smkhound Hi, did you remove the `txfee` from QTUM config? You shouldn't have received 0.004 fee as your transaction size is smaller than 1kb.


[03-Jul-19 08:57 PM] smkhound#7640
I did.... but my mm2 update script also pulls coins file from jl777 repo so maybe my changes reverted when updating mm2...
will check/confirm and retry.


[03-Jul-19 09:03 PM] smkhound#7640
yep, that happened üòÖ


[03-Jul-19 09:03 PM] smkhound#7640
output now is


[03-Jul-19 09:04 PM] smkhound#7640
` 'fee_details': {'amount': 0.00077382},` üòÉ


[03-Jul-19 09:04 PM] smkhound#7640
will PR so next update doesnt repeat confusion


[03-Jul-19 10:21 PM] artem.pikulin#0794
Is transaction successfully broadcast with `'fee_details': {'amount': 0.00077382}`?


[03-Jul-19 10:26 PM] artem.pikulin#0794
Please use `send_raw_transaction` with `tx_hex` received from `withdraw` call, as I can see `15e9c6cd143468e7905e47ff0cc8c9fbb89707657e3db97c252b8050b185ec84` is not present on QTUM blockchain so we don't know whether it works properly.


[03-Jul-19 11:12 PM] smkhound#7640
`"fee_details":{"amount":0.00077382}`
` error: Response(Object({\"code\": Number(1), \"message\": String(\"the transaction was rejected by network rules.\\n\\nmin relay fee not met, 77382 < 90400 (code 66)`


[03-Jul-19 11:14 PM] smkhound#7640
https://pastebin.com/41wrbLrK

{Embed}
https://pastebin.com/41wrbLrK
>>> curl --url "http://127.0.0.1:7783" --data "{\"method\":\"withd...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[03-Jul-19 11:15 PM] smkhound#7640
seems to be autocalulating, but a little short of required.


[03-Jul-19 11:39 PM] artem.pikulin#0794
Yes, MM2 seem to miscalculate it, checking.


[04-Jul-19 01:09 AM] smkhound#7640
PR reverted on jl777/coins until ok

{Reactions}
üëå 

[04-Jul-19 03:34 AM] artem.pikulin#0794
@smkhound The latest MM2 commit adds the change output size to estimated tx size by default, so QTUM should work fine now. Could you please update your MM2 and test again? Please make sure that you don't have `txfee` in coins file and the generated transaction is accepted by coin daemon via MM2 `send_raw_transaction` call.

{Reactions}
üëçüèº 

[04-Jul-19 03:36 AM] smkhound#7640
build or zip?


[04-Jul-19 03:36 AM] artem.pikulin#0794
Whatever you prefer, MM2 nightly is updated per every commit.


[04-Jul-19 03:39 AM] smkhound#7640
sweet, `md5sum mm2
c71b76922317835fa08928bdd20f7503  mm2
`


[04-Jul-19 04:03 AM] smkhound#7640
```failed with HTTP status code 500 Internal Server Error, response body: {\\\"result\\\":null,\\\"error\\\":{\\\"code\\\":-26,\\\"message\\\":\\\"min relay fee not met, 77417 < 90000 (code 66)\\\"},\\\"id\\\":\\\"0\\\"}\\n\") }"``` üò¶


[04-Jul-19 04:03 AM] smkhound#7640
https://pastebin.com/sP2Xj2sB

{Embed}
https://pastebin.com/sP2Xj2sB
curl --url "http://127.0.0.1:7783" --data "{\"method\":\"withdraw\...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[04-Jul-19 04:39 AM] TonyL#3577
@smkhound `c71b76922317835fa08928bdd20f7503` it's a build from this d614a4e1b724656182d9829c18103db2f97cfacd commit


[04-Jul-19 04:39 AM] TonyL#3577
https://github.com/artemii235/SuperNET/commit/e31bd721fdc197efb3b424efa332e93b8f7c7bc2 but fees calc fix was pushed recently

{Embed}
https://github.com/artemii235/SuperNET/commit/e31bd721fdc197efb3b424efa332e93b8f7c7bc2
Add change output size to default tx size on dynamic UTXO fee calc...
https://images-ext-1.discordapp.net/external/bhxbZp_vqWMDWyHbDAs2ChYL0J22s1YIUu1txMsCnWQ/%3Fs%3D200%26v%3D4/https/avatars3.githubusercontent.com/u/15745003


[04-Jul-19 04:44 AM] TonyL#3577
http://159.69.45.70/e31bd721fdc197efb3b424efa332e93b8f7c7bc2.zip build from needed commit

{Reactions}
üëçüèº 

[04-Jul-19 05:10 AM] smkhound#7640
`10bec645f947efd8058d79259ab4a13c  mm2`


[04-Jul-19 05:16 AM] smkhound#7640
üçæ  
https://qtum.info/tx/b784ee16e979b0d6d3658b3f8b0676178ae3f79394fd26fbd615589da241811a
https://pastebin.com/vP21uk5f

{Embed}
https://pastebin.com/vP21uk5f
curl --url "http://127.0.0.1:7783" --data "{\"method\":\"withdraw\...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[04-Jul-19 05:43 AM] artem.pikulin#0794
So does it work in the end? üôÇ


[04-Jul-19 05:44 AM] smkhound#7640
qtum fine, still having trouble with verus but not on app, just in cli


[04-Jul-19 05:44 AM] smkhound#7640
https://github.com/artemii235/SuperNET/issues/454

{Embed}
https://github.com/artemii235/SuperNET/issues/454
Verus withdraw issue ¬∑ Issue #454 ¬∑ artemii235/SuperNET
Describe the bug , error: Response(Object({&quot;code&quot;: Number(1), &quot;message&quot;: String(&quot;the transaction was rejected by network rules.\\n\\n16: tx-overwinter-a...
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[04-Jul-19 05:45 AM] artem.pikulin#0794
You should set `txversion:4` and `overwintered:1` for Verus.

{Reactions}
üëçüèº 

[04-Jul-19 05:45 AM] artem.pikulin#0794
https://github.com/jl777/coins/blob/master/coins#L2725

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[04-Jul-19 05:46 AM] artem.pikulin#0794
Correction: `overwintered:1`.


[04-Jul-19 05:50 AM] TonyL#3577
https://github.com/jl777/coins/blob/master/coins#L2679 hmm so it should be modified here as well if it will work on your side  (overwintered:1)

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[04-Jul-19 05:53 AM] cipi#4502
swap worked fine with the settings from https://github.com/jl777/coins/blob/master/coins#L2679
https://github.com/jl777/coins/blob/master/swaps/VRSC-KMD.md

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Embed}
https://github.com/jl777/coins/blob/master/swaps/VRSC-KMD.md
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[04-Jul-19 05:53 AM] cipi#4502
10 days ago


[04-Jul-19 05:53 AM] smkhound#7640
bch also needs overwintered?


[04-Jul-19 05:54 AM] TonyL#3577
yes, on my side it worked too and just few days ago because AtomicDEX using same params as in coins repo


[04-Jul-19 05:54 AM] artem.pikulin#0794
VRSC shouldn't work without overwintered in coins file...


[04-Jul-19 05:54 AM] artem.pikulin#0794
Ah, it has `asset:VRSC`.


[04-Jul-19 05:55 AM] artem.pikulin#0794
Then it's fine, `asset` makes MM2 to use txversion 4 and overwintered.


[04-Jul-19 05:55 AM] artem.pikulin#0794
https://github.com/jl777/coins/blob/master/coins#L2160

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[04-Jul-19 05:55 AM] artem.pikulin#0794
BCH doesn't need overwintered, overwintered is applicable only for Zcash and it's forks.


[04-Jul-19 05:56 AM] cipi#4502
what is the exact trigger? the key "asset", or the name of the asset?


[04-Jul-19 05:57 AM] artem.pikulin#0794
If coin config has `asset` key it will use `txversion:4` and `overwintered`, it's hardcoded in MM2.


[04-Jul-19 05:58 AM] cipi#4502
ok, good to know, i thought there was a hardcoded list in mm2 with the name of all the assets that should have txversion:4 and overwintered


[04-Jul-19 05:58 AM] smkhound#7640
do we have cipi servers for bch?


[04-Jul-19 05:59 AM] artem.pikulin#0794
There're still few: `KMD`, `BEER`, `PIZZA`.


[04-Jul-19 05:59 AM] artem.pikulin#0794
https://github.com/jl777/coins/blob/master/electrums/BCH

{Embed}
https://github.com/jl777/coins/blob/master/electrums/BCH
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Reactions}
üëçüèº 

[04-Jul-19 05:59 AM] artem.pikulin#0794
@smkhound  you will find the answers in coins repo usually.


[04-Jul-19 06:00 AM] cipi#4502
if you find non-working electrums, please let me know and i will look for new ones


[04-Jul-19 06:02 AM] smkhound#7640
bch fine, I still had verus as coin in sendrawtx ü§¶üèº


[04-Jul-19 11:30 AM] jorian#4555
is it still necessary to define userhome in the startup parameters of mm2?


[05-Jul-19 11:21 AM] siu#3920
may any updates lately break mm2 build?


[05-Jul-19 11:21 AM] siu#3920
i cant seem to be able to build it on ubuntu


[05-Jul-19 11:21 AM] siu#3920
https://pastebin.com/egNNfkAa

{Embed}
https://pastebin.com/egNNfkAa
error: couldn't read mm2src/common/c_headers/LP_include.rs: No suc...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[05-Jul-19 11:21 AM] siu#3920
this is the output


[05-Jul-19 11:22 AM] siu#3920
i did `rustup update nightly` just in case but that doesnt seem to work either


[07-Jul-19 01:23 AM] ca333#0333 (pinned)
@siu try again with:

`rustup install nightly-2019-06-26` 
`rustup default nightly-2019-06-26`
`rustup component add rustfmt-preview`
`cargo clean` 
`cargo build --features native -vv`


[07-Jul-19 12:42 PM] siu#3920
üëå

{Reactions}
üëçüèº 

[09-Jul-19 06:21 AM] siu#3920
Pinned a message.


[11-Jul-19 12:35 AM] artem.pikulin#0794
@MM2 community tester @sindresorhus @hyperDEX Hi, important incompatible change is pushed to `mm2`. If 1 of coins in pair is KMD the taker will get 10% discount for dexfee. Also there's `0.0001` threshold for fee now: if the calculated fee amount is less than `0.0001` MM2 will use `0.0001` instead of `amount/777 - discount`.


[11-Jul-19 12:38 AM] jorian#4555
is the threshold for KMD only?


[11-Jul-19 12:39 AM] artem.pikulin#0794
Threshold is for all coins.


[11-Jul-19 12:39 AM] jorian#4555
gonna be expensive BTC trades


[11-Jul-19 12:39 AM] artem.pikulin#0794
BTC trades are expensive anyway.


[11-Jul-19 12:39 AM] jorian#4555
true that


[11-Jul-19 12:39 AM] jorian#4555
anyways, nice stuff on making KMD the preferred pair


[11-Jul-19 12:40 AM] artem.pikulin#0794
The miner fee is high, so if you're taker you will already have to pay around 2$ of miner fees.


[11-Jul-19 12:40 AM] artem.pikulin#0794
So low volume BTC trades are impractical as of now.


[11-Jul-19 10:48 AM] mobipoi#5774
More incentives for kmd pairing taker will more likely choose kmd as a liquid gate way rather than Btc


[11-Jul-19 10:48 AM] mobipoi#5774
Unless it a hodl buy then fees should matter less


[11-Jul-19 10:49 AM] mobipoi#5774
In that case


[14-Jul-19 01:33 AM] smkhound#7640
having an issue with OOT using electrums `blockchain.scripthash.get_balance`
Assuming due to `electrum1.utrum.io:10088` not being updated.
loading native to test with now


[14-Jul-19 01:37 AM] smkhound#7640
In other news, I've been testing swaps most of the week with a mix of native (ACs & QTUM/DGB) and electrum without issue. üëçüèº


[15-Jul-19 06:08 AM] Mylo#8306
@smkhound ‚Äútesting swaps‚Äù, have you been both market maker & taker using mm2?


[15-Jul-19 06:11 AM] smkhound#7640
yeah, I have two nodes, scripts run on maker node but talk to taker node via rpc from IP.


[15-Jul-19 06:11 AM] smkhound#7640
I'm basically trading with myself


[15-Jul-19 06:15 AM] smkhound#7640
rigged it to post CSV result to http://oracle.earth/qa_reports/
just cleared out older reports tho, cos I added a column for outcome


[15-Jul-19 06:33 AM] Mylo#8306
Wow heaps of data that‚Äôs so cool.


[15-Jul-19 06:37 AM] smkhound#7640
hoping to apply to more tests etc as time goes on. Works well for mm2 on single swaps and sequential combinations across a list of coins. Concurrent needs a bit of debug since most recent changes.


[18-Jul-19 12:53 PM] cipi#4502
saw couple of these in the console output of maker during a ERC20 swap (maker was ERC20)
```18 19:48:04, eth:2060] Max nonce 372 != 371 min nonce
18 19:48:05, eth:2060] Max nonce 372 != 371 min nonce
18 19:48:12, eth:2060] Max nonce 373 != 372 min nonce
18 19:48:13, eth:2060] Max nonce 373 != 372 min nonce```
it stopped after a while and the swap was successfull
i just wanted to aks what it means


[18-Jul-19 12:55 PM] jl777c#5810
nonce needs to increment for each request


[18-Jul-19 12:55 PM] jl777c#5810
maybe it got off by one for a bit


[18-Jul-19 10:47 PM] Mylo#8306
```
$ cmake -DMM_VERSION=UNKNOWN -DCMAKE_BUILD_TYPE=Debug ..
thread 'main' panicked at '

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!   unwrap! called on Result::Err                                              !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
mm2src/common/build.rs:862,5 in build_script_build

Err(Os { code: 2, kind: NotFound, message: "No such file or directory" })

', /home/mylo/.cargo/registry/src/github.com-1ecc6299db9ec823/unwrap-1.2.1/src/lib.rs:67:25
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace.

```


[18-Jul-19 10:48 PM] Mylo#8306
this is after running `cargo build --features native -vv` and it got to the end.   Following the setup guide @ https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-setup/get-started-atomicdex.html#build-mm2

{Embed}
https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-setup/get-started-atomicdex.html
Installing AtomicDEX Software (MM2) | AtomicDEX Documentation
Documentation for developers building on AtomicDEX


[18-Jul-19 10:53 PM] Mylo#8306
with `BACKTRACE=1`


[18-Jul-19 10:55 PM] Mylo#8306
https://0bin.net/paste/LqI6ByHZP13D2X6Y#j69d3bnzjbOA1amQKghW0b5MhSSFq+cgqMM7L29uZqN

{Embed}
https://0bin.net/paste/LqI6ByHZP13D2X6Y
0bin - encrypted pastebin
0bin is a client-side-encrypted
                   pastebin featuring burn after reading, an history and
                   a clipboard


[18-Jul-19 10:58 PM] Mylo#8306
trying on 2nd machine


[18-Jul-19 11:14 PM] Mylo#8306
worked on 2nd machine, 1st machine unusual though.


[18-Jul-19 11:26 PM] Mylo#8306
```
working machine
$ clang
clang                         clang-3.9                     clang-6.0                     clang-apply-replacements-3.9  clang-cl-3.9                  clang-include-fixer-3.9       clang-rename-3.9              
clang++                       clang++-3.9                   clang++-6.0                   clang-check-3.9               clang-cpp-6.0                 clang-query-3.9               clang-tblgen-3.9

Not working machine:
$ clang
clang-3.9                     clang-apply-replacements-3.9  clang-cl-3.9                  clang-query-3.9               clang-tblgen-3.9              
clang++-3.9                   clang-check-3.9               clang-include-fixer-3.9       clang-rename-3.9 
```
if that has anything to do with it


[19-Jul-19 04:19 AM] artem.pikulin#0794
@Mylo looks like you don't have cmake available in PATH on your not working machine.


[19-Jul-19 04:22 AM] artem.pikulin#0794
@cipi It's "warning" message. MM2 requests the transaction nonce from all available nodes and checks that values are equal. It's done to prevent nonce calculation errors. For example you might use ETH and BAT with same nodes urls. But these urls are used in random order so ETH may target `eth1` node first and BAT `eth2`. After ETH transaction is sent we need to ensure that transaction reached the `eth2` node and nonce is increased.


[19-Jul-19 04:22 AM] Mylo#8306
Correct, I was looking for version numbers.  Ok will dbl check docs thanks @artem.pikulin champion


[19-Jul-19 05:41 AM] smkhound#7640
I'm getting some `invalid address checksum` trying to add more ERC20 tokens. 
Saw convo in this channel 10/5/2019 about EIP-55 and tried to use the code linked at https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md#rationale to change to acceptable case.
doesnt seem to be working (fails assert) for 
 LINK :  https://etherscan.io/token/0x514910771af9ca656af840dff83e8264ecf986ca

not sure where I'm going wrong

{Embed}
https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md
ethereum/EIPs
The Ethereum Improvement Proposal repository. Contribute to ethereum/EIPs development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/LtMFsMTLUhKgO8tTv7Iif0D9OEsT7DR15aa-48Pq4XM/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/6250754


[19-Jul-19 06:02 AM] hyperDEX#6586
@artem.pikulin how hard would it to get tron support?


[19-Jul-19 07:04 AM] artem.pikulin#0794
@hyperDEX As I can see TRON uses secp256k1 for signing and solidity as smart contract language, which makes things easier. But some time will be required to learn and support their RPC API and transaction structure so I'd estimate this to take 4-6 weeks if we start doing it.


[19-Jul-19 07:05 AM] jl777c#5810
other things higher priority


[19-Jul-19 07:05 AM] jl777c#5810
maybe TRON can develop the compatible module, they have millions and millions to spend on things


[19-Jul-19 09:24 AM] cipi#4502
@smkhound please use latest coin file from here: https://github.com/jl777/coins/blob/master/coins
this was fixed by  sindresorhus: https://github.com/jl777/coins/commit/992702af607c1c485fc757d18ba997a5eaec9b0f

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559

{Embed}
https://github.com/jl777/coins/commit/992702af607c1c485fc757d18ba997a5eaec9b0f
Ensure all the `etomic` addresses are using their checksummed vers...
https://images-ext-1.discordapp.net/external/7q7BbxblLHxPZ931XAZQAcm7M0efOW126c8h-W-PLkA/%3Fs%3D200%26v%3D4/https/avatars1.githubusercontent.com/u/170270


[19-Jul-19 02:24 PM] hyperDEX#6586
@artem.pikulin yeah not urgent at all, just wanted to see how hard it would be.


[19-Jul-19 11:53 PM] smkhound#7640
cheers @cipi, I had an older version.


[20-Jul-19 06:05 PM] siu#3920
We have reports of funds not arriving after swap is complete. Has anyone else seen this?


[20-Jul-19 06:36 PM] cipi#4502
https://github.com/KomodoPlatform/atomicDEX-API/issues/474
which was fixed
you can see in the jsons of the swap if it is the same problem

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/474
taker does not claim TUSD sent by maker ¬∑ Issue #474 ¬∑ KomodoPla...
tried a TUSD/KMD swap maker (TUSD) is showing the swap as completed but taker does not claim the sent TUSD maker payment: https://etherscan.io/tx/0xb72c1ff3470d9893ef9a265d9a513d10b54734638b8941254...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[21-Jul-19 06:25 AM] siu#3920
Thanks


[24-Jul-19 03:08 AM] Kiruel#2091
Why there is a map in background oO ?


[24-Jul-19 03:08 AM] Kiruel#2091
Btw its nice !


[24-Jul-19 03:09 AM] smkhound#7640
lol, just part of the standard template. originally used to track dog, been using as dev playground for oracle / labs stuff ever since.


[24-Jul-19 04:07 AM] hyperDEX#6586
@artem.pikulin https://github.com/KomodoPlatform/atomicDEX-API/issues/463#issuecomment-513468060 Can you help with this? We are trying to get hyperDEX out but there are a few things we need help with

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/463
Add ability to cancel a swap at any non-critical step ¬∑ Issue #46...
Currently, the cancel_order endpoint is not very useful as it only really works if you&#39;re a maker and only for the first 30 seconds. Swap cancel is possible on some stages, it&#39;s pos...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[24-Jul-19 04:15 AM] jl777c#5810
once a swap starts you cant just cancel it, you need to follow the CLTV in the atomic swap protocol


[24-Jul-19 05:10 AM] CrisF#3405
Like the oracle.earth orderbook, @smkhound  üëç


[24-Jul-19 05:11 AM] smkhound#7640
cheers, barebones and simple for now, might add some eycandy this weekend

{Reactions}
üòÉ 

[24-Jul-19 06:25 AM] siu#3920
https://twitter.com/kmdchainmakers/status/1154018397476282372

{Embed}
Chainmakers (@kmdchainmakers)
https://twitter.com/kmdchainmakers/status/1154018397476282372
We are proud to finally be able to release Chainswap!!! Our frontend dapp based on @KomodoPlatform #atomicdex! #chainswap #atomicswaps #DEX #cryptotrading https://t.co/jZNok9Tfsn
Twitter


[24-Jul-19 06:25 AM] siu#3920
open for tests and bug reports


[24-Jul-19 03:34 PM] hyperDEX#6586
@artem.pikulin @cipi does the new mm2.0 require the bids/asks to be a few % over/under to fill now?


[24-Jul-19 03:34 PM] hyperDEX#6586
We used to have to do that in mm1.0, are exact matches working?


[24-Jul-19 04:06 PM] hyperDEX#6586
Secondary question, if the buy rate for KMD is 0.1 for say RICKY and the app sells KMD at 0.08 will it fill at 0.1 or 0.08 if the volume of that buy order is enough?


[25-Jul-19 03:50 AM] artemciy_dice#0049
@hyperDEX , the orderbook might still have rounding errors, might affect the exact matches ( https://github.com/KomodoPlatform/atomicDEX-API/issues/495 ). We're going to chage the API, returning a decimal JSON string instead of a JSON number.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/495
orderbook method output too precise numbers ¬∑ Issue #495 ¬∑ Komod...
example of orderbook method output: https://paste.ubuntu.com/p/HXtVKzs9gz/ &quot;price&quot;: 9.276517762044985 Sometimes it&#39;s 15 decimals, noticed 16 and 17 also. Such behavior cau...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[25-Jul-19 04:09 AM] hyperDEX#6586
@artemciy_dice any indication of when you will do that? Then it will be precise like the centralized exchanges?


[25-Jul-19 04:10 AM] hyperDEX#6586
Also can i ask the market maker functionality that connects to centralized exchange APIs, is that in mm2.0 already?


[25-Jul-19 04:23 AM] artemciy_dice#0049
@hyperDEX , we don't have centralized exchange integration yet, as far as I'm aware of.


[25-Jul-19 04:25 AM] hyperDEX#6586
Ok.

One last question - Secondary question, if the buy rate for KMD is 0.1 for say RICKY and the app sells KMD at 0.08 will it fill at 0.1 or 0.08 if the volume of that buy order is enough?


[25-Jul-19 06:17 AM] hyperDEX#6586
Can someone please give user dcprevere#1502  mm2.0 tester tag please


[25-Jul-19 01:58 PM] cipi#4502
if maker is selling for 0.08 and you bid 0.1, the swap will execute for 0.08


[25-Jul-19 01:58 PM] cipi#4502
so to avoid rounding errors and stuff, just bid a bit more then maker is asking


[25-Jul-19 03:08 PM] hyperDEX#6586
Cool just want the same logic as the centralized exchanges


[25-Jul-19 07:23 PM] hyperDEX#6586
@jl777c if you get a moment can you give @dcprevere mm role so he can view this channel?


[25-Jul-19 08:50 PM] jl777c#5810
i dont have that option...


[26-Jul-19 12:24 AM] hyperDEX#6586
@ca333 do you have that option?

{Reactions}
‚úÖ 

[29-Jul-19 05:39 PM] artemciy_dice#0049
`> any indication of when you will do that?`

@hyperDEX , https://github.com/KomodoPlatform/atomicDEX-API/commit/ee80172df44e89249ba9ae07c290e9865245ce1b

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/commit/ee80172df44e89249ba9ae07c290e9865245ce1b
Return the price as a string in the orderbook ¬∑ KomodoPlatform/at...
In order to avoid the floating point rounding errors.

#495
https://images-ext-2.discordapp.net/external/pDlCuApmX76fYCqyh5gxhJFMPb4IAHSgUVl-DtEXEjY/%3Fs%3D200%26v%3D4/https/avatars1.githubusercontent.com/u/41847


[29-Jul-19 06:43 PM] hyperDEX#6586
@artemciy_dice Does that mean order book should be correct?Do we need to build in a margin of error?


[29-Jul-19 06:44 PM] hyperDEX#6586
Say someone is selling KMD at 0.000120001, if someone wanted to buy it would 0.000120001 match or do i still need to put say 0.00012002 or something to match with it?


[29-Jul-19 06:46 PM] artemciy_dice#0049
You should be getting the exact price for `asks`, though there is still a division involved for `bids` ( https://github.com/KomodoPlatform/atomicDEX-API/issues/495#issuecomment-516220196 ).

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/495
orderbook method output too precise numbers ¬∑ Issue #495 ¬∑ Komod...
example of orderbook method output: https://paste.ubuntu.com/p/HXtVKzs9gz/ &quot;price&quot;: 9.276517762044985 Sometimes it&#39;s 15 decimals, noticed 16 and 17 also. Such behavior cau...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[29-Jul-19 08:02 PM] hyperDEX#6586
@artemciy_dice so how can the GUI represent that?


[29-Jul-19 08:04 PM] hyperDEX#6586
What margin of error should we build into the ask price?


[29-Jul-19 08:04 PM] hyperDEX#6586
Also is there any reason why there is so many digits after the 0? Beyond a point it becomes pointless.


[29-Jul-19 08:29 PM] artemciy_dice#0049
I think the number of digits there can be reduced to `coins.decimals` (where `coins.decimals` is the number of digits specified in the coins file, cf. https://github.com/jl777/coins/blob/6d751ee11b6ada6bd481555114162f09e9c28e38/coins#L1245), which is eight digits by default (though I'd rather round to `coins.decimals + 1` to indicate that the price is not precise). The real problem here is that we can't precisely represent some divisions with the decimal numbers, so the minimal rounding error remains in the `bids`.

{Embed}
https://github.com/jl777/coins/blob/6d751ee11b6ada6bd481555114162f09e9c28e38/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[29-Jul-19 08:33 PM] artemciy_dice#0049
I should probably mention that reducing the number of digits will increase the error margin.


[29-Jul-19 08:36 PM] hyperDEX#6586
Yes but we talking very small numbers right?


[29-Jul-19 08:36 PM] hyperDEX#6586
Say we use 8 digits


[29-Jul-19 08:36 PM] hyperDEX#6586
We dont want to get to a point where the bids and asks are changing with 60th digit being changed and have a flood of that


[29-Jul-19 08:37 PM] hyperDEX#6586
What is the margin of error, sure it would be bigger if we limit the digits after the 0 but what is practical?


[29-Jul-19 08:37 PM] hyperDEX#6586
Can you give me a example of the division issue?


[29-Jul-19 08:39 PM] artemciy_dice#0049
Example is 1/3, or 1/6.


[29-Jul-19 08:41 PM] hyperDEX#6586
We want to replicate the UX of a centralized exchange. Also when someone does a swap say I am selling KMD for 0.00012 and someone had to bid 0.00012001 to overcome the margin, from memory it will show the entry as being filled at 0.00012001 and not the actual rate as 0.00012?


[29-Jul-19 08:42 PM] hyperDEX#6586
@artemciy_dice sorry i dont get it.

1/3 = 0.33333333 with 8 digits


[29-Jul-19 08:42 PM] hyperDEX#6586
1/6 = 0.16666667 rounded up with 8


[29-Jul-19 08:43 PM] artemciy_dice#0049
1/3 does not equals 0.33333333, but if that isn't a concern than congrats, problem solved.


[29-Jul-19 08:44 PM] hyperDEX#6586
What does it equal to you 1/3?


[29-Jul-19 08:45 PM] artemciy_dice#0049
It can not be represented as a decimal.


[29-Jul-19 08:45 PM] artemciy_dice#0049
0.(3)


[29-Jul-19 08:45 PM] hyperDEX#6586
My dumb brain cannot process this.


[29-Jul-19 08:45 PM] artemciy_dice#0049
Never mind then.


[29-Jul-19 08:46 PM] hyperDEX#6586
My devs need to know this though as we need to make the UX work with what you guys are building.


[29-Jul-19 08:46 PM] artemciy_dice#0049
I hope the devs have all the information they need with https://github.com/KomodoPlatform/atomicDEX-API/issues/495#issuecomment-516220196

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/495
orderbook method output too precise numbers ¬∑ Issue #495 ¬∑ Komod...
example of orderbook method output: https://paste.ubuntu.com/p/HXtVKzs9gz/ &quot;price&quot;: 9.276517762044985 Sometimes it&#39;s 15 decimals, noticed 16 and 17 also. Such behavior cau...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[29-Jul-19 08:47 PM] artemciy_dice#0049
Also would be a good idea to subscribe to that issue.


[29-Jul-19 11:38 PM] TonyL#3577
```          "event": {
            "data": {
              "error": "lp_swap:1677] Started_at time_dif over 60 81"
            },
            "type": "NegotiateFailed"
          },
``` first time see such error on swap (it's error on taker side) - might it be related to not precise time settings on phone? (https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_swap.rs#L904)

on maker side it failed just by timeout:
```            "data": {
              "error": "lp_swap:894] \"timeout (180.1 > 180.0)\""
            },
            "type": "NegotiateFailed"
          },
```

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_swap.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[30-Jul-19 01:45 AM] ca333#0333
interesting!


[30-Jul-19 01:45 AM] ca333#0333
lets try to reproduce this one

{Reactions}
üëç 

[30-Jul-19 02:47 AM] TonyL#3577
@ca333 reproduced - just set clock on phone 23 minutes from actual time and got:
```            "data": {
              "error": "lp_swap:1677] Started_at time_dif over 60 1394"
            },
```


[30-Jul-19 02:47 AM] TonyL#3577
so my guess was correct üòÉ

{Reactions}
üëç 

[30-Jul-19 02:48 AM] TonyL#3577
@Angelina yes, –∏–≥–æ—Ä—å has his phone clocks out of sync for 81 seconds what is more than allowable 60

{Reactions}
üò¶ 

[02-Aug-19 02:40 AM] hyperDEX#6586
@artem.pikulin can you look into https://github.com/KomodoPlatform/atomicDEX-API/issues/492#issuecomment-514623915 when you have some time please. It will help users know what has gone wrong.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/492
Currency should not be enabled if the `electrum` calls fails ¬∑ Is...
When enabling the currency OOT using the electrum endpoint: { coin: &quot;OOT&quot; method: &quot;electrum&quot; servers: [{url: &quot;electrum1.utrum.io:10088&quot;}, {url:...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[02-Aug-19 03:08 AM] hyperDEX#6586
https://github.com/atomiclabs/hyperdex/issues/609

Also would you mind taking a look at this one too? This is preventing people from adding multiple limit orders

{Embed}
https://github.com/atomiclabs/hyperdex/issues/609
Order Submission Issue ¬∑ Issue #609 ¬∑ atomiclabs/hyperdex
I tried to make 5 KMD/RICK orders very quickly. I did not wait till the orders showed up on the GUI to place the next one. It looks like all 5 is open but on the KMD sell order side, I can see the ...
https://images-ext-2.discordapp.net/external/JaTLwRiiE1Y7IX4ciskCC6cfdH-GpYHGB91c-TmDteY/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/1520924


[02-Aug-19 03:10 AM] hyperDEX#6586
@cipi you got any ideas with this one?


[02-Aug-19 05:56 AM] cipi#4502
@hyperDEX i think that is not supported atm (more then one maker order per pair)


[02-Aug-19 05:58 AM] hyperDEX#6586
@cipi any ideas why?


[02-Aug-19 06:08 AM] cipi#4502
this limitation was in mm1... not sure if it was already removed in mm2... you can try to use the parameter `cancel_previous: false` with the `setprice`call (it defaults to `true`, so if you call setprice again, all previous orders are cancelled)
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md#setprice

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[02-Aug-19 02:38 PM] hyperDEX#6586
@artemciy_dice got any ideas?


[02-Aug-19 02:48 PM] artemciy_dice#0049
Parallel trading should work, let's wait for Artem to investigate the issues deeper. I can help with HTTP headers if that's a blocker.


[02-Aug-19 02:49 PM] hyperDEX#6586
Yes that is a blocker to get more reliable bug reports, if you could work on that would be great.


[02-Aug-19 02:50 PM] hyperDEX#6586
But if you have higher priorities with atomicDEX then time better spent there


[02-Aug-19 03:01 PM] artemciy_dice#0049
It aligns well, I'll need to touch the HTTP server soon, will do this sooner than later.

{Reactions}
üëç 

[03-Aug-19 05:20 AM] dcprevere#1502
Hi, I've got some questions about MM2, but this is my first time working with a DEX.

- can orders be partially filled?
- shouldn't maker/taker be a property of an execution rather than an order?
- where can I get details of executions? Or how can I link a transaction to an order?

Expanding on the 2nd question:

If I place an order that is partially filled by an order already on the order book, is the order a maker or a taker? What I've worked with before would consider the initial execution a taker, and subsequent executions would be makers.


[03-Aug-19 06:42 AM] smkhound#7640
@dcprevere  some questions might be answered here - https://developers.atomicdex.io/

```Buy and sell methods always create the taker order first. Therefore, you must pay an additional 1/777 fee of the trade amount during the swap when taking liquidity from the market. If your order is not matched in 30 seconds, the order is automatically converted to a maker request and stays on the orderbook until the request is matched or cancelled. To always act as a maker, please use the setprice method.```

that should answer the first 2 questions (and the expansion). Details of the excecution can be extracted from the swap uuid using the `my_swap_status` method. Currently this needs to be excecuted via CLI. You can also see the transactions in the transaction history of the coins involved in the swap within the app or on a block explorer (by correlating the swap timestamp with on chain transaction times).
Some examples of trade components for compatible pairs are here - https://github.com/jl777/coins/tree/master/swaps 
Though these pairs may not be available through the gui yet, the txid for maker/taker operations are linked within.

{Embed}
https://developers.atomicdex.io/
Introduction to AtomicDEX | AtomicDEX Documentation
Documentation for developers building on AtomicDEX

{Embed}
https://github.com/jl777/coins/tree/master/swaps
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[05-Aug-19 04:08 AM] hyperDEX#6586
@artem.pikulin did you get a chance to look https://github.com/atomiclabs/hyperdex/issues/609 as this is a pretty big roadblock not just for hyperDEX but is something essential to have to have lots of liquidity

{Embed}
https://github.com/atomiclabs/hyperdex/issues/609
Order Submission Issue ¬∑ Issue #609 ¬∑ atomiclabs/hyperdex
I tried to make 5 KMD/RICK orders very quickly. I did not wait till the orders showed up on the GUI to place the next one. It looks like all 5 is open but on the KMD sell order side, I can see the ...
https://images-ext-2.discordapp.net/external/JaTLwRiiE1Y7IX4ciskCC6cfdH-GpYHGB91c-TmDteY/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/1520924


[05-Aug-19 05:26 AM] artem.pikulin#0794
@hyperDEX Hi, not yet, it's buggy limitation of MM2 as of now: it's possible to create several orders per 1 pair on your node and these all will be visible via `my_orders` API, but orderbook will display only 1 order of the node per specific pair.


[05-Aug-19 05:32 AM] hyperDEX#6586
Thanks, is this a high priority to fix?


[05-Aug-19 05:34 AM] artem.pikulin#0794
I will work on it after I fix this one https://github.com/KomodoPlatform/atomicDEX-API/issues/502 and add the API to free the funds that were stuck by swaps. Possibly on next week.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/502
KMD-VRSC swap failed by timeout and not refunding to taker [funds ...
mm2 version: 64bfd683c swap uuid: 8f5b267a-efa8-49d6-a92d-ec0523cca891 KMD-VRSC swap stuck by timeout on iOS user side (most probably app was closed or screen shut down what causing mm2 closing) th...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[05-Aug-19 05:36 AM] hyperDEX#6586
Cool thanks!


[06-Aug-19 12:01 AM] artem.pikulin#0794
Important notice for everyone who builds the atomicDEX-API from source: Rust version was updated https://github.com/KomodoPlatform/atomicDEX-API#how-to-build Please make sure that you install and default the nightly-2019-08-05 before attempting to build the most recent commit.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
üëç (2) 

[06-Aug-19 12:16 AM] dcprevere#1502
@smkhound Thank you for your help, I understand how Maker and Taker work now but I'm still curious about partially-filled orders. I've been going through the documentation, and I got to this point:
```
 Step 4: Withdrawal of Coins

After someone accepts the order and your trade is finished, the coins received (LTC) and the coins leftover (KMD) can be withdrawn.

Execute the following command to withdraw 0.97 KMD to the address RUFf4de7gZE7sp5vPcxaAsvv6j79ZbQgAu.
```
 But it doesn't make it clear if this step is just optional, or if the remaining amount could still be taken by another order.

The reason I'm so curious is that the documentation says that a swap uuid can be found from the buy/sell call... which I would assume would be the uuid of the order and would mean that there is one swap/execution per order.


[06-Aug-19 12:37 AM] smkhound#7640
The swap uuid is different to the order uuids. Check the sample output at https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#order-status
There is a maker order uuid, a taker order uuid, and a swap uuid. For a maker uuid, if more than one swap, the related swap uuids are in listed. I'll see if we can get an example which demonstrates this more clearly. 

The `withdraw` method is basically how you can send coins out from the AtomicDEX wallet to another address (otherwise it stays in your AtomicDEX address, and can be swapped again). The withdraw method returns raw hex (tx_hex) which needs to be broadcast with the `sendrawtransaction` method to complete the withdrawl. 

So `withdraw` is optional, and not related to (i.e. not a part of) a swap.

{Embed}
https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html
DEX API | AtomicDEX Documentation
Documentation for developers building on AtomicDEX


[06-Aug-19 01:32 AM] dcprevere#1502
Thank you!


[06-Aug-19 01:32 AM] dcprevere#1502
So is the documentation for `my_swap_status` right? 
```
params uuid     string     the uuid of swap, typically received from the buy/sell call
```


[06-Aug-19 01:36 AM] dcprevere#1502
This is returned from BUY:
```
result     object     the resulting order object
result.action     string     the action of the request (Buy)
result.base     string     the base currency of request
result.base_amount     string     the resulting amount of base currency that will be received if the order matches
result.rel     string     the rel currency of the request
result.rel_amount     string     the maximum amount of rel coin that will be spent to buy the base_amount (according to price)
result.method     string     this field is used for internal P2P interactions; the value is always equal to "request"
result.dest_pub_key     string     reserved for future use. dest_pub_key will allow the user to choose the P2P node that will be eligible to match with the request. This value defaults to a "zero pubkey", which means anyone can be a match
result.sender_pubkey     string     the public key of this node
result.uuid     string     the request uuid
```


[06-Aug-19 01:38 AM] smkhound#7640
`order_status` method takes the order uuid as paramater
`my_swap_status` method takes swap uuid as parameter


[06-Aug-19 01:39 AM] smkhound#7640
you should be able to get swap uuid from `order_status` method output


[06-Aug-19 01:39 AM] smkhound#7640
and you can get order uuids from `my_orders` method.


[06-Aug-19 01:40 AM] smkhound#7640
or recent swap uuids from `my_recent_swaps` method


[06-Aug-19 01:41 AM] dcprevere#1502
And `buy` returns the order, order contains the swap id


[06-Aug-19 01:41 AM] dcprevere#1502
Got it


[06-Aug-19 01:41 AM] dcprevere#1502
Thanks again

{Reactions}
üëçüèº 

[06-Aug-19 01:41 AM] smkhound#7640
no worries, I had the same confusion early on üòÑ


[09-Aug-19 05:50 AM] CrisF#3405
Hi, does anyone have an example swap involving BCH and ETH I can show someone? (txids) Maybe @cipi?


[09-Aug-19 05:51 AM] smkhound#7640
I can do one later tonight üëçüèº


[09-Aug-19 05:53 AM] smkhound#7640
recorded swaps to confirm are here - https://github.com/jl777/coins/tree/master/swaps
mostly use KMD as one of the pair for test confirms

{Embed}
https://github.com/jl777/coins/tree/master/swaps
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[09-Aug-19 05:54 AM] CrisF#3405
Man, you should be celebrating, haha üçª


[09-Aug-19 05:55 AM] CrisF#3405
Thanks, I'll the check link üôá

{Reactions}
üçæ 

[09-Aug-19 06:38 AM] cipi#4502
i only have KMD orders up and as such only swaps with KMD... try KMD/ETH


[09-Aug-19 06:45 AM] CrisF#3405
Cool, thanks @cipi üëç  I'm particularly after a BCH ETH or BCH ECR20 transaction I can follow through on the explorer.
I''m setting up some nodes now so can try when that's done.


[09-Aug-19 06:47 AM] cipi#4502
if KMD/ETH and KMD/BCH swaps are working, then BCH/ETH will work too


[09-Aug-19 06:49 AM] CrisF#3405
Yeah, I had an atomicdex BCH ETH go through.


[09-Aug-19 06:49 AM] CrisF#3405
I want the info to show someone.


[09-Aug-19 06:52 AM] cipi#4502
btw, swap infos are here: https://github.com/jl777/coins/tree/master/swaps
if you already did BCH/ETH, then you have the same info on your node

{Embed}
https://github.com/jl777/coins/tree/master/swaps
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[09-Aug-19 07:22 AM] CrisF#3405
Thanks, my swap was on atomicdex so I don't have txids.  Will do one on node when I get it set up.


[09-Aug-19 08:56 AM] Oszy#5734
you can get the txid's from explorers just put your address in the respective explorers

{Reactions}
üëç 

[09-Aug-19 08:57 AM] Oszy#5734
also you can export your log from atomicdex


[09-Aug-19 09:26 AM] smkhound#7640
@CrisF PM'd you a BCH/ETH trade made from CLI. 
Will translate the details to coin/swaps repo tommorow.

{Reactions}
üî• 

[09-Aug-19 09:30 AM] CrisF#3405
Thanks a lot @smkhound :3040_kingpeepo:

{Reactions}
üëçüèª 

[09-Aug-19 09:31 AM] CrisF#3405
Yeah, never though of that @Oszy ! üíé


[12-Aug-19 07:08 PM] CrisF#3405
Hi, was wondering about seeing my passphrase and rpc_password displayed in htop.  Was this also the case in mm1?  I don't remember seeing that.


[12-Aug-19 07:08 PM] CrisF#3405
(Been a while...)


[12-Aug-19 08:10 PM] smkhound#7640
are you using MM2.json file?


[12-Aug-19 08:11 PM] CrisF#3405
Just installed as per guide.


[12-Aug-19 08:12 PM] smkhound#7640
which guide?


[12-Aug-19 08:13 PM] CrisF#3405
`https://docs.komodoplatform.com/mmV2/LP/walkthrough.html`


[12-Aug-19 08:15 PM] smkhound#7640
yeah, using commandline params for passphrase on launch will reveal to htop. 
If you use a `MM2.json` file in the same folder as `mm2` binary , it will read from there instead.


[12-Aug-19 08:16 PM] smkhound#7640
@gcharang can we add  this to docs? ‚òùüèº

{Reactions}
üëç 

[12-Aug-19 08:17 PM] smkhound#7640
I've written a little about it here - https://github.com/smk762/pytomicDEX/blob/master/README.md

{Embed}
https://github.com/smk762/pytomicDEX/blob/master/README.md
smk762/pytomicDEX
Contribute to smk762/pytomicDEX development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6xcX3Z50JaMIMuZ9mAXOpQv_L8FfDr-TLGFP0GMRbbU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/35845239


[12-Aug-19 08:18 PM] smkhound#7640
though there are also addtional params for seed nodes which might be needed if on a private netid


[12-Aug-19 08:20 PM] smkhound#7640
you dont need to use pytomicDEX to use the MM2.json.
just make an `MM2.json` file in same folder as `mm2` and put this in it
```{
"gui":"MM2GUI",
"netid":9999,
"rpc_password":"ENTER SECURE RPC PASSWORD",
"passphrase":"ENTER A SECURE PASSPHRASE",
"userhome":"/home/YOURUSERNAME/"
}``` substituting values as required

{Reactions}
üëç 

[12-Aug-19 08:23 PM] CrisF#3405
Thanks, checking out pytomic now.


[13-Aug-19 03:56 AM] gcharang#6833
updated the doc

{Reactions}
rum üíØ 

[13-Aug-19 11:43 PM] CrisF#3405
Hi, 
I'd like to get to `importprivkey` for my mm2 passphrase.  I had a look in atomicDEX API docs for `calcaddress` but didn't see anything.  (looking for syntax) . Does mm2 have `calcaddress` or is mm1 the best to get privkeys?


[13-Aug-19 11:48 PM] CrisF#3405
(had this from mm1:  `curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"calcaddress\",\"passphrase\":\"default\",\"coin\":\"DGB\"}"` )


[13-Aug-19 11:59 PM] artem.pikulin#0794
@CrisF Hi, as of now MM2 doesn't have `calcaddress` or `showprivkey` capabilities. I will add the API to display the privkey of the coin soon. As temporary workaround yes, please use MM1.


[14-Aug-19 12:02 AM] CrisF#3405
Ok, thanks, @artem.pikulin  üëç


[14-Aug-19 12:52 AM] smkhound#7640
in a pinch, using Verus Agama can also help turn seed into privkey.

{Reactions}
üëç (2) 

[14-Aug-19 01:48 AM] CrisF#3405
Ahh, cool.  Got them from `calcaddress`. Good practice.


[14-Aug-19 04:17 AM] Oszy#5734
You can also do `convertpassphrase` in Komodo Ocean

{Reactions}
üôè 

[16-Aug-19 12:01 AM] Slyris#2880
How does the `atomicDex` application of the hit to manage private keys? from what I understood when you activated the coins it made an enable of each of these coins (through mm2) (thus to be able to recover the public key, but how did they do for the private key / seed?) I will probably have to follow the same principle on my side for the makerbot @artem.pikulin


[16-Aug-19 12:39 AM] artem.pikulin#0794
@Slyris The privkey is derived from passphrase and stored in memory during the whole MM2 run. When coin is activated it initializes it's own copy of keypair.
Startup init: https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_native_dex.rs#L1239
Coin init (utxo): https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/coins/utxo.rs#L1601

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_native_dex.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/coins/utxo.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
KMD üëç 

[25-Aug-19 12:50 AM] Slyris#2880

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/615090680854741033/Capture_decran_2019-08-25_a_09.50.14.png


[25-Aug-19 12:51 AM] Slyris#2880
@gcharang @artemciy_dice or @artem.pikulin 

Can we rename `cancellallorders` -> `cancel_all_orders` in the left ?


[25-Aug-19 12:56 AM] Slyris#2880
It's a bit incoherent to read knowing that the method in mm2 is `cancel_all_orders`


[25-Aug-19 12:56 AM] Slyris#2880
(I had to click on show answer to be sure to have the correct syntax)


[26-Aug-19 02:01 AM] gcharang#6833
@Slyris the sidebar is auto generated
will look into making the `_` visible in the sidebar


[26-Aug-19 02:44 AM] Slyris#2880
Ok great


[07-Sep-19 08:41 AM] siu#3920
Hello @artem.pikulin is there a simple way to add Utrum (OOT)  to mm2?


[07-Sep-19 08:42 AM] siu#3920
i mean, is it possible to add it as a smartchain? or does it still needs to be added as external coin?


[07-Sep-19 08:44 AM] cipi#4502
OOT does not have sapling activated, but mm2 assumes all ACs have sapling. So either this has to be changed in mm2 or OOT must activate sapling.


[07-Sep-19 05:30 PM] TonyL#3577
Just such params in coins file needed  I think:
```"txversion": 1,
"overwintered": 0```


[07-Sep-19 08:55 PM] cipi#4502
i fear this params will be overwritten by mm2 internal logic


[08-Sep-19 04:31 AM] TonyL#3577
but for ZILLA it works


[08-Sep-19 01:06 PM] siu#3920
@TonyL is the version in coins file for ZILLA the final one which works for mm2


[08-Sep-19 07:48 PM] TonyL#3577
@siu Hmm, nope - working version which using in AtomicDEX looks like this:
```    {
        "coin": "ZILLA",
        "name": "ZILLA",
        "rpcport": 10041,
        "pubtype": 60,
        "p2shtype": 85,
        "wiftype": 188,
        "mm2": 1,
        "txfee": 10000,
        "txversion": 1,
        "overwintered": 0
    },```


[09-Sep-19 03:08 AM] siu#3920
thanks!

{Reactions}
üëç 

[10-Sep-19 12:38 PM] siu#3920
Did something change in the way USDC is withdrawed?


[10-Sep-19 12:57 PM] siu#3920
oh, it seems not.


[10-Sep-19 12:57 PM] cipi#4502
you can specify gasprice now: https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md#withdraw

{Embed}
https://github.com/artemii235/developer-docs/blob/mm/docs/basic-docs/atomicdex/atomicdex-api.md
artemii235/developer-docs
Contribute to artemii235/developer-docs development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6tle8mq-vBNKZMUSJgicxTqb0XV_6r5olkUss4Ckk7U/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/15745003


[10-Sep-19 12:57 PM] siu#3920
gas price needs to be manually set now?


[10-Sep-19 12:57 PM] cipi#4502
optionally


[10-Sep-19 12:58 PM] siu#3920
hmm seems like eth is slow today then


[10-Sep-19 12:58 PM] siu#3920
i had sent before with now issues


[10-Sep-19 12:58 PM] siu#3920
now i have 2 txs waiting for more than 30min.


[10-Sep-19 12:59 PM] cipi#4502
gasprice is high... compare gasprice from your tx with https://etherscan.io/gastracker
if it is too low, it can take a while


[10-Sep-19 01:00 PM] cipi#4502
estimated duration: 00 hr 46 min 11 secs with 12 gwei atm


[10-Sep-19 01:11 PM] cipi#4502
in the end, it only depends on the price you are willing to pay :-)
with 16 gwei it will be confirmed in a minute


[10-Sep-19 09:06 PM] artem.pikulin#0794
@siu Hi, do you use `gas_station_url` when enabling ETH/ERC20 coins? (https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#command-for-ethereum-and-erc20-based-blockchains-with-gas-station-url) If not MM2 will request gas price from ETH node directly which might be either higher or lower than currently required.
And also even if gas station is used there might be time gap between gas price jumps significantly but it's not reflected on the station so you will get long confirmation time.

{Embed}
https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html
DEX API | AtomicDEX Documentation
Documentation for developers building on AtomicDEX


[10-Sep-19 09:08 PM] artem.pikulin#0794
Btw ETH allows to override pending transactions by setting same nonce and higher gas price, setting nonce manually on withdraw for ETH/ERC20 looks like good idea in such cases.


[12-Sep-19 04:12 AM] siu#3920
I got the tx out after like 4 hours. But later i did another tx and got confirmed in less than 30seconds. I guess it was network congestion @cipi @artem.pikulin


[18-Sep-19 03:35 AM] Oszy#5734
where do we post failed swaps for research?  (Maker Payment Validate Failed)
uid: 85585431-3a98-488c-8228-b7a79ca67e4c


[18-Sep-19 03:44 AM] artem.pikulin#0794
@Oszy Hi, I've just checked the swap status on seed node. Seems like maker node just went offline since it didn't send the maker payment data to your node and also didn't broadcast it's swap status to the seed (but maybe it will a bit later).

{Reactions}
üëç 

[18-Sep-19 03:53 AM] Oszy#5734
Next one, 333c6844-9c60-4c32-8132-9843a6311b4f  Negotiate Failed


[18-Sep-19 04:02 AM] Oszy#5734
This 8e1da324-2a6b-40e0-a76e-29af8ebd45ed stuck at TAKERPAYMENTSENT


[18-Sep-19 04:17 AM] artem.pikulin#0794
`333c6844-9c60-4c32-8132-9843a6311b4f` - attempt to trade with same maker that seem to have some issues, maker negotiation data didn't reach your node so it simply timed out.


[18-Sep-19 04:17 AM] artem.pikulin#0794
`8e1da324-2a6b-40e0-a76e-29af8ebd45ed` - no info about this on seed node, please wait for payment to be refunded.


[18-Sep-19 04:19 AM] Oszy#5734
thanks for checking üòâ


[23-Sep-19 01:18 AM] Oszy#5734
who could help me with a little chain analysis? I missing about 190 KMD after a couple swaps and based on explorer data I can't seem to find where did it go. I can DM details.


[23-Sep-19 01:33 AM] TonyL#3577
please DM me the details/logs @Oszy


[23-Sep-19 06:04 AM] Oszy#5734
all sorted thanks for help üôÇ

{Reactions}
üëç 

[27-Sep-19 08:09 AM] mobipoi#5774
Congratulations @artemciy_dice @artem.pikulin


[27-Sep-19 08:09 AM] mobipoi#5774
Great work on mm2


[27-Sep-19 08:09 AM] mobipoi#5774
and production on dex in general

{Reactions}
KMD 

[27-Sep-19 08:14 AM] artemciy_dice#0049
Thanks, @mobipoi ! It is exciting to see the new technologies in action!


[01-Oct-19 04:45 AM] siu#3920
Is there still no way to see dex stats?


[01-Oct-19 04:45 AM] siu#3920
Volumes and prices ?


[01-Oct-19 04:59 AM] smkhound#7640
orderbooks are here - https://oracle.earth/mm2_orderbook/
trade stats are difficult to quantify, previously only included a subset of overall data. Once I have time and figure out a better way to get more comprehensive data, I'll let you know, but prefer not to publish stats based on incomplete data.


[01-Oct-19 05:00 AM] siu#3920
üëç üëç


[03-Oct-19 04:31 AM] artemciy_dice#0049
I was in Venice yesterday. Shared a few pictures to friends on FB. If you‚Äôre curious, send me an add. Fair warning: my FB is not about MM or computer science.


[03-Oct-19 04:31 AM] artemciy_dice#0049
https://www.facebook.com/artem.grinblat

{Embed}
https://www.facebook.com/artem.grinblat
Log into Facebook | Facebook
Log into Facebook to start sharing and connecting with your friends, family, and people you know.


[07-Oct-19 09:50 AM] siu#3920
@smkhound and @TonyL awesome work with pytomicDEX

{Reactions}
üôèüèΩ üëç 

[07-Oct-19 09:50 AM] siu#3920
i gave it a run this weekend and its awesome


[07-Oct-19 09:50 AM] siu#3920
thanks for your efforts


[07-Oct-19 09:50 AM] smkhound#7640
I just pushed some updates üëçüèΩ


[07-Oct-19 09:50 AM] TonyL#3577
all credits to @smkhound üôÇ


[07-Oct-19 09:51 AM] siu#3920
one thing tho... this morning i found i had 5 failed swaps with "negotiation failed"


[07-Oct-19 09:51 AM] siu#3920
is this something to do with the mm2? or the TUI?


[07-Oct-19 09:51 AM] smkhound#7640
can you check to see if from same pubkey(s)?


[07-Oct-19 09:51 AM] smkhound#7640
I had 30 without error in last 4 days, but had 3 fail with same error today


[07-Oct-19 09:52 AM] smkhound#7640
2 from same taker pubkey, one froma differenet one


[07-Oct-19 09:53 AM] smkhound#7640
I suspect it is connection issues or phone going to sleep from taker, but cant be sure


[07-Oct-19 09:55 AM] siu#3920
ok


[07-Oct-19 09:55 AM] siu#3920
will check on the next round.


[07-Oct-19 09:55 AM] siu#3920
i closed the mm


[07-Oct-19 09:57 AM] smkhound#7640
option 6 in menu is to help try and figure out why there is fails, shows taker pub and can select to view json events


[07-Oct-19 09:58 AM] siu#3920
```  | Oct  7 08:11:07 |      NegotiateFailed       | Maker | -2.95625 | 58.92463 |    -     |
     | Oct  7 06:59:40 |      NegotiateFailed       | Maker | -5.60680 | 114.6295 |    -     |
      | Oct  6 14:14:41 |      NegotiateFailed       | Maker | -16.4402 | 338.6698 |    -     |
       | Oct  6 13:21:53 |      NegotiateFailed       | Maker | -14.3923 | 288.6998 |   ```


[07-Oct-19 09:58 AM] siu#3920
ok


[07-Oct-19 10:02 AM] siu#3920
```[NegotiateFailed]
{'event': {'data': {'error': 'maker_swap:269] "maker_swap:265] timeout (180.0 > 180.0)"'}, 'type': 'NegotiateFailed'}, 'timestamp': 1570382693671}
```


[07-Oct-19 10:02 AM] siu#3920
timeout


[07-Oct-19 10:03 AM] siu#3920
```[Started]                                                                               
{'event': {'data': {'lock_duration': 7800, 'maker_amount': '14.39230837', 'maker_coin': 
'KMD', 'maker_coin_start_block': 1562752, 'maker_payment_confirmations': 1, 'maker_paym$nt_lock': 1570398113, 'my_persistent_pub': '03db419891c867f545d90be56f7ee8c9ce9fa829e88$97bf3f7ba00a654a2634a4', 'started_at': 1570382513, 'taker': '1e78b77a0ac8ea974efa6aae898838e9598b92b6c5baa35362cbd1bb904f2fc8', 'taker_amount': '288.6998843794278608084008', 'taker_coin': 'RVN', 'taker_coin_start_bl
ock': 914854, 'taker_payment_confirmations': 1, 'uuid': '394c3469-9c37-4baf-965d-1ef7511
7f0ea'}, 'type': 'Started'}, 'timestamp': 1570382513670}
```


[07-Oct-19 10:04 AM] smkhound#7640
thnx, different taker pub to mine ü§î


[07-Oct-19 10:04 AM] siu#3920
no idea...


[07-Oct-19 10:05 AM] siu#3920
maybe it was just bad internet or something


[07-Oct-19 10:05 AM] smkhound#7640

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/630812876747177993/unknown.png


[07-Oct-19 12:35 PM] Oszy#5734
where is the repo for pythomic?


[07-Oct-19 12:51 PM] siu#3920
https://github.com/tonymorony/pytomicDEX

{Embed}
https://github.com/tonymorony/pytomicDEX
tonymorony/pytomicDEX
Contribute to tonymorony/pytomicDEX development by creating an account on GitHub.
https://images-ext-2.discordapp.net/external/IULxymVak7WPV8PZwfkPCOyLSBf6KKjfvRL8wa24Vjc/%3Fs%3D400%26v%3D4/https/avatars1.githubusercontent.com/u/24797699

{Reactions}
üëç 

[07-Oct-19 01:29 PM] Oszy#5734
awesome job


[07-Oct-19 01:33 PM] Oszy#5734
does it need py2 or py3?


[07-Oct-19 01:33 PM] Oszy#5734
getting error with pip
` ERROR: Could not find a version that satisfies the requirement json (from versions: none)
ERROR: No matching distribution found for json & subprocess`


[07-Oct-19 01:39 PM] Oszy#5734
these should be built in, i have 3.7


[07-Oct-19 01:48 PM] Oszy#5734
nevermind i downloaded them manually


[07-Oct-19 01:50 PM] Oszy#5734
working great side by side with chainswap


[07-Oct-19 03:28 PM] siu#3920
Great!


[08-Oct-19 12:41 AM] TonyL#3577
my repo is a fork üôÇ https://github.com/smk762/pytomicDEX @smkhound  created/maintain it

{Embed}
https://github.com/smk762/pytomicDEX
smk762/pytomicDEX
Contribute to smk762/pytomicDEX development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/6xcX3Z50JaMIMuZ9mAXOpQv_L8FfDr-TLGFP0GMRbbU/%3Fs%3D400%26v%3D4/https/avatars3.githubusercontent.com/u/35845239

{Reactions}
üëç (2) 

[08-Oct-19 05:26 AM] smkhound#7640
credit to @TonyL for original TUI code from CCs I borrowed from ü§ù

{Reactions}
KMD 

[21-Oct-19 10:49 PM] CrisF#3405
Hi, (asking 2nd time, here, to get a larger variety of ideas for a post)
```apart from regular people trading on the DEX, what usecases does mm2 have? What other technologies does it make possible or is it involved in?
(eg, swap different platforms NFTs - is that possible?)```


[22-Oct-19 06:47 PM] artemciy_dice#0049
One use case we've considered, IIRC, is for MM to be a portable interface to the various native and electrum wallets, a meta-wallet.

{Reactions}
üëç 

[23-Oct-19 03:34 AM] artem.pikulin#0794
Yea, a convenient interface (API) for multiple coins. MM2 abstracts over all of these different protocols and RPC APIs so the developer building the wallet on top of MM2 doesn't have to care about specific underlying implementation (btw it's still nice for such developer to know all this stuff, but MM2 makes it not mandatory).


[23-Oct-19 07:01 AM] CrisF#3405
Thanks!


[27-Oct-19 07:11 AM] smkhound#7640
@artem.pikulin what is the correct way to specify path/file for MM2.json location as a mm2 runtime param?
e.g. `./mm2 conf=/path/to/MM2.json` ?


[27-Oct-19 07:43 AM] smkhound#7640
and if not possible... feature request? üôèüèΩ


[28-Oct-19 08:25 AM] artem.pikulin#0794
@smkhound Hi, as of now config path is hardcoded as `MM2.json` in current working direcrory. It's possible to pass it through cmd/env and it will be nice feature indeed. Yes, please create an issue about it, thanks!

{Reactions}
üëçüèΩ 

[28-Oct-19 08:37 AM] cipi#4502
@artem.pikulin could you please reduce the output of
`28 15:13:24, rpc_clients:115] Waiting for tx c995ca15ec3b75ace3bcd1c6b66b03bc9ac6cb5952f779c0006b2e5844cf41f8 confirmations, now 0, required 1`
to only every other second or so? atm mm2 does this every second and it generates a lot of output, even on fast chains

{Reactions}
‚òù 

[28-Oct-19 08:38 AM] artem.pikulin#0794
@cipi Hi, sure, please create an issue üôÇ Will do and ping you on Github.


[28-Oct-19 08:46 AM] cipi#4502
done, thanks.

{Reactions}
üëç 

[29-Oct-19 04:43 AM] Oszy#5734
Can i actually kill the electrum server by spamming swaps? I just got disconnected from them after starting  about 40 swaps üòÑ 
It didn't connect back automatically unless i was enquiring about balance.


[29-Oct-19 04:43 AM] Oszy#5734
could this happen during the atomicDEX stress test?


[29-Oct-19 04:51 AM] Oszy#5734
actually it's jumping between servers now


[29-Oct-19 05:00 AM] Oszy#5734
`29 11:57:53, rpc_clients:1284] V4(195.201.83.86:10018) error "rpc_clients:1207] Didn\'t receive any data since 1572350 
213. Shutting down the connection."                                                                                    
29 11:57:53, rpc_clients:1248] Electrum client connected to 195.201.83.86:10018                                        
29 11:57:53, rpc_clients:1284] V4(195.201.12.150:10017) error "rpc_clients:1207] Didn\'t receive any data since 157235 
0213. Shutting down the connection."                                                                                   
29 11:57:54, rpc_clients:1248] Electrum client connected to 195.201.12.150:10017                                       
29 11:57:54, rpc_clients:1284] V4(195.201.83.86:10017) error "rpc_clients:1207] Didn\'t receive any data since 1572350 
214. Shutting down the connection."                                                                                    
29 11:57:54, rpc_clients:1248] Electrum client connected to 195.201.83.86:10017   `

whilst i am waiting for a lot of swaps to complete it keeps disconnecting, is that normal?


[29-Oct-19 05:30 AM] artem.pikulin#0794
@Oszy Hi, did you start all these 40 swaps for same pair? (RICK/MORTY presumably according to electrum servers ports).


[29-Oct-19 05:31 AM] cipi#4502
looked in the logs of the electrums servers and there were no errors by that time
health checks from AWS Route 53 also all green, no connectivity errors

{Reactions}
üëç 

[29-Oct-19 05:57 AM] Oszy#5734
yes same pairs, actually about 8 completed, my  RICK has 66 transactions, MORTY has 8 been swapping RICK>MORTY


[29-Oct-19 05:58 AM] Oszy#5734
had a lot of these: 
```"event": {
              "data": {
                "error": "taker_swap:597] utxo:546] utxo:546] rpc_clients:934] JsonRpcError { request: JsonRpcRequest { jsonrpc: \"2.0\", id: \"476\", method: \"blockchain.scripthash.listunspent\", params: [String(\"0f0e129ebc07cf445cffd2657b7e9b00fcfdff002b28dcbe1db2c32db0e95f32\")] }, error: Transport(\"rpc_clients:770] rpc_clients:770] [\\\"rpc_clients:1412] common:1068] future timed out\\\", \\\"rpc_clients:1412] common:1068] future timed out\\\", \\\"rpc_clients:1412] common:1068] future timed out\\\"]\") }"
              },
              "type": "TakerFeeSendFailed"```


[29-Oct-19 05:59 AM] Oszy#5734
` "total": 87`


[29-Oct-19 06:01 AM] Oszy#5734
Thanks cipi i was just curious if the electrum has some kind of limitation


[29-Oct-19 06:40 AM] artem.pikulin#0794
@cipi Does electrum log the case when server drops the client for excessive request rate?


[29-Oct-19 06:47 AM] cipi#4502
yes, it logs that, thats why i looked into the logs, but there was nothing there
and yes, electrumx has limitations: https://electrumx.readthedocs.io/en/latest/environment.html#envvar-COST_SOFT_LIMIT
but they are set 5-10 times higher then default on our servers
```
INITIAL_CONCURRENT = 50
COST_SOFT_LIMIT = 10000
COST_HARD_LIMIT = 100000
BANDWIDTH_UNIT_COST = 10000
```


[29-Oct-19 06:52 AM] cipi#4502
raised the last value, now `BANDWIDTH_UNIT_COST = 50000` for RICK and MORTY


[29-Oct-19 08:15 AM] smkhound#7640
perhaps IP ban for spam?


[29-Oct-19 09:38 AM] Oszy#5734
if that so, what's the time between swap requests to avoid ban?


[29-Oct-19 11:14 AM] smkhound#7640
not sure, just guessing it could be fail2ban or something


[29-Oct-19 11:35 AM] Oszy#5734
ok, i'll add a delay and see what happens


[29-Oct-19 01:45 PM] Oszy#5734
definitely looks a lot better with 15 seconds delay between each call. still a noticeable amount of timeouts, but i guess that is up to the maker node as well, will analyse swap history when all finished.

Will run it for 6 hours, every minute from now, report back in the morining üôÇ


[29-Oct-19 01:55 PM] Oszy#5734
If I only initiate RICK `sell` for MORTY at price of `0.5` for the amount of `0.01` RICK is it normal for me to see amounts of MORTY like 0.00685525, 0.00799 , and 0.00832333 coming in? all the others are 0.00499 which should be the correct amount


[29-Oct-19 04:47 PM] artemciy_dice#0049
FYI, it is now possible to build MM under Raspbian ( cf. https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/docs/Raspbian-QEMU.md ). It's not ideal, takes a lot of time under QEMU (like two or three days on my PC), maybe a cross-compilation approach would work better in practice, though knowing that it builds right there is also nice.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/docs/Raspbian-QEMU.md
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
shexy 

[30-Oct-19 12:24 AM] artem.pikulin#0794
@Oszy Hi, could you please provide more info on 
```
If I only initiate RICK sell for MORTY at price of 0.5 for the amount of 0.01 RICK is it normal for me to see amounts of MORTY like 0.00685525, 0.00799 , and 0.00832333 coming in?
```
?


[30-Oct-19 12:24 AM] artem.pikulin#0794
Do you mean that you request 1 amount to be traded, but getting something other in resulting swap(s)?


[30-Oct-19 12:27 AM] artem.pikulin#0794
Could you please also create an issue about the Electrum disconnections when many swaps are started concurrently for same pair? I'd like to investigate it a bit later and it will be nice to track it on Github.


[30-Oct-19 12:38 AM] Oszy#5734
Yes i have a big log now of swap history will do in a bit, want to go through it first


[30-Oct-19 12:39 AM] Oszy#5734
Regarding the swap amounts:
I only swapping with 0.5 price and 0.01 vol so i should be getting only 0.0049 morty for each swap


[30-Oct-19 12:39 AM] Oszy#5734
But i have much different amounts coming in from the B addresses


[30-Oct-19 12:49 AM] artem.pikulin#0794
So you got more Morty than you expected? It's expected behavior if there's more profitable order on network. You order may be matched with better price so you pay `0.01` RICK as expected, but get more MORTY.


[30-Oct-19 01:04 AM] Oszy#5734
oh okay that's good, so it's basically a max_price


[30-Oct-19 01:07 AM] Oszy#5734
@artem.pikulin 
found this on github:
https://github.com/KomodoPlatform/atomicDEX-API/issues/254

I found 5 of these errors in my swap log

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/254
When several concurrent swaps are running UTXO coin in Electrum mo...
2019-01-24 04:21:46 +0100 [swap] Sending Taker fee‚Ä¶ !send_taker_fee: jsonrpc_client:66] Rpc request JsonRpcRequest { jsonrpc: &quot;2.0&quot;, id: &quot;238&quot;, method: &quot...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[30-Oct-19 01:09 AM] artem.pikulin#0794
Do you get the `transaction was rejected by network rules.`? Could you please post the full swap statuses with such error via Gist or pastebin?


[30-Oct-19 01:11 AM] Oszy#5734
one sec i'll send you all the errors filtered in one paste


[30-Oct-19 01:12 AM] Oszy#5734
https://pastebin.com/CbzEDASR

{Embed}
https://pastebin.com/CbzEDASR
[JSON]    "error": "maker_swap:196] !my_balance utxo:1264] JsonRpc...
https://images-ext-1.discordapp.net/external/lZwHlcJYEP_-CeL744a7RSWVnhrIifPJgiIcmKkDuJY/https/pastebin.com/i/facebook.png


[30-Oct-19 01:24 AM] Oszy#5734
mm2 has a log or i need to start it with output > ?


[30-Oct-19 01:27 AM] artem.pikulin#0794
MM2 outputs it's log to stdout by default, but it can be redirected to file using `MM_LOG` environment variable. From `mm2 --help`:
```
MM_LOG         ..  File path. Must end with '.log'. MM will log to this file.
```


[30-Oct-19 01:28 AM] Oszy#5734
ok i'll restart and log the mm2 output as well for the electrum issue

{Reactions}
üëç 

[31-Oct-19 03:28 AM] Mark81#4505
```
Ôòü 2019-10-31 12:23:44 +0200 [seed_connection 195.201.116.176:47772] Error Broken pipe (os error 32) writing to socket, dropping connection
Ôòü 2019-10-31 12:23:44 +0200 [seed_connection 46.4.87.18:47772] Error Broken pipe (os error 32) writing to socket, dropping connection
Ôòü 2019-10-31 12:23:44 +0200 [seed_connection 46.4.78.11:47772] Error Broken pipe (os error 32) writing to socket, dropping connection
‚Ä¶ 2019-10-31 12:23:44 +0200 [seed_connection 195.201.116.176:47772] Connecting‚Ä¶
‚ö° 2019-10-31 12:23:45 +0200 [seed_connection 195.201.116.176:47772] Connected
‚Ä¶ 2019-10-31 12:23:45 +0200 [seed_connection 46.4.87.18:47772] Connecting‚Ä¶
‚ö° 2019-10-31 12:23:45 +0200 [seed_connection 46.4.87.18:47772] Connected
‚Ä¶ 2019-10-31 12:23:45 +0200 [seed_connection 46.4.78.11:47772] Connecting‚Ä¶
‚ö° 2019-10-31 12:23:45 +0200 [seed_connection 46.4.78.11:47772] Connected
```


[31-Oct-19 03:29 AM] Mark81#4505
trying to place orders from Hyper-v ubuntu on windows 10 machine and getting lot of those errors. Same goes on windows 10 side.


[31-Oct-19 03:40 AM] artem.pikulin#0794
@Mark81 Hi, do you mean that you see same error with native windows MM2 binary running on your win10 host?


[31-Oct-19 03:40 AM] Mark81#4505
```
:worried: 2019-10-31 12:38:41 +0200 [seed_connection 46.4.87.18:47772] Error Et√§palvelin sulki aiemmin luodun yhteyden. (os error 10054) on reading from socket, dropping connection
‚Ä¶ 2019-10-31 12:38:41 +0200 [seed_connection 46.4.87.18:47772] Connecting‚Ä¶
:zap: 2019-10-31 12:38:41 +0200 [seed_connection 46.4.87.18:47772] Connected
:worried: 2019-10-31 12:38:42 +0200 [seed_connection 46.4.78.11:47772] Error Et√§palvelin sulki aiemmin luodun yhteyden. (os error 10054) on reading from socket, dropping connection
‚Ä¶ 2019-10-31 12:38:42 +0200 [seed_connection 46.4.78.11:47772] Connecting‚Ä¶
:zap: 2019-10-31 12:38:42 +0200 [seed_connection 46.4.78.11:47772] Connected
:worried: 2019-10-31 12:38:52 +0200 [seed_connection 195.201.116.176:47772] Error Et√§palvelin sulki aiemmin luodun yhteyden. (os error 10054) writing to socket, dropping connection
‚Ä¶ 2019-10-31 12:38:52 +0200 [seed_connection 195.201.116.176:47772] Connecting‚Ä¶```


[31-Oct-19 03:41 AM] Mark81#4505
swaps worked earlier fine but now i dont seem to get them through at all


[31-Oct-19 03:42 AM] Mark81#4505
so after that i tried through virtual machine on same windows 10 with hyper-V and also there are same connection issues. at the moment i dont have native linux installed.


[31-Oct-19 03:43 AM] artem.pikulin#0794
Isn't MM2 blocked by your firewall?


[31-Oct-19 03:44 AM] Mark81#4505
i dont think so beacuse it works fine with commands such as getiing balance and orderbooks and setting orders


[31-Oct-19 03:46 AM] Mark81#4505
it keeps dropping established seed connections


[31-Oct-19 03:49 AM] Mark81#4505
```üòü 2019-10-31 09:31:50 +0200 [seed_connection 195.201.116.176:47772] Error Et√§palvelin sulki aiemmin luodun yhteyden. (os error 10054) writing to socket, dropping connection
‚Ä¶ 2019-10-31 09:31:50 +0200 [seed_connection 195.201.116.176:47772] Connecting‚Ä¶
‚ö° 2019-10-31 09:31:50 +0200 [seed_connection 195.201.116.176:47772] Connected
üòü 2019-10-31 09:32:11 +0200 [seed_connection 46.4.78.11:47772] Error Et√§palvelin sulki aiemmin luodun yhteyden. (os error 10054) writing to socket, dropping connection
‚Ä¶ 2019-10-31 09:32:11 +0200 [seed_connection 46.4.78.11:47772] Connecting‚Ä¶
‚ö° 2019-10-31 09:32:11 +0200 [seed_connection 46.4.78.11:47772] Connected
31 07:32:12, lp_ordermatch:325] Entering the maker_swap_loop RICK/MORTY
31 07:32:12, maker_swap:300] Sending 'negotiation@9a7c7855-f63d-4ca3-886e-0a523b4fd660' (69 bytes, crc 1234386547)
31 07:32:18, peers:1174] external_ip_alert: 2001:14bb:170:26ac:342e:b6e9:7051:3
31 07:32:18, peers:1174] external_ip_alert: 2001:14bb:170:26ac:342e:b6e9:7051:3
31 07:32:18, peers:1174] external_ip_alert: 2001:14bb:170:26ac:342e:b6e9:7051:3
üòü 2019-10-31 09:32:21 +0200 [seed_connection 46.4.87.18:47772] Error Et√§palvelin sulki aiemmin luodun yhteyden. (os error 10054) on reading from socket, dropping connection
‚Ä¶ 2019-10-31 09:32:21 +0200 [seed_connection 46.4.87.18:47772] Connecting‚Ä¶
‚ö° 2019-10-31 09:32:21 +0200 [seed_connection 46.4.87.18:47772] Connected
31 07:32:42, http_fallback:489] transmit] TBD, time to use the HTTP fallback...
31 07:32:52, http_fallback:489] transmit] TBD, time to use the HTTP fallback...
31 07:32:53, maker_swap:308] Received 'negotiation-reply@9a7c7855-f63d-4ca3-886e-0a523b4fd660' (69 bytes, crc 1340036353)
31 07:32:53, maker_swap:351] Sending 'negotiated@9a7c7855-f63d-4ca3-886e-0a523b4fd660' (1 bytes, crc 2768625435)
31 07:32:53, http_fallback:489] transmit] TBD, time to use the HTTP fallback...```


[31-Oct-19 03:49 AM] Mark81#4505
over here i had swaps working with errors. and this is from windows 10


[31-Oct-19 03:52 AM] Mark81#4505
i also tested through nordvpn with same results


[31-Oct-19 03:56 AM] artem.pikulin#0794
Could you please DM me your IPv4 address?


[31-Oct-19 04:08 AM] Mark81#4505
i am keeping mm2 running. if it helps those error start running once i have loaded coins rick/morty/commod. And on rick and morty i have set orders.


[31-Oct-19 04:12 AM] artem.pikulin#0794
Let me check on Win10 too, maybe the error is OS specific and is easily recreatable.


[31-Oct-19 04:13 AM] artem.pikulin#0794
What MM2 version do you use currently?


[31-Oct-19 04:13 AM] Mark81#4505
yeah, tested by removing orders and issuing new one and errors came right away. newest from last night build.


[31-Oct-19 04:38 AM] Mark81#4505
tested with another windows 10 machine with same results


[31-Oct-19 04:38 AM] Mark81#4505
both  use same network connection


[31-Oct-19 05:02 AM] Oszy#5734
seed node issue here too @artem.pikulin


[31-Oct-19 05:02 AM] Oszy#5734
connection reset


[31-Oct-19 05:03 AM] artem.pikulin#0794
Seems like it's all related to the stress test, there're hunders of RICK/MORTY orders now and seems like it already makes MM2 to malfunction.


[31-Oct-19 05:03 AM] artem.pikulin#0794
https://github.com/KomodoPlatform/atomicDEX-API/issues/567


[31-Oct-19 05:06 AM] Oszy#5734
all swap fails on mobile too


[31-Oct-19 05:08 AM] Oszy#5734
looks like stressing really working üòÑ


[31-Oct-19 05:11 AM] cipi#4502
CPU usage of mm2 process
mm2-nodes 100-150%
seed-nodes 50-80%
is mm2 multi-threaded? can it use more then one CPU core?


[31-Oct-19 05:14 AM] cipi#4502
seed nodes console log very active, high number of `incoming_connection` entries
... and also `Error Resource temporarily unavailable (os error 11) writing to socket, dropping connection`


[31-Oct-19 05:14 AM] artem.pikulin#0794
MM2 doesn't use only single CPU core.


[31-Oct-19 05:15 AM] artem.pikulin#0794
I'm already aware of this
```
... and also Error Resource temporarily unavailable (os error 11) writing to socket, dropping connection
```


[31-Oct-19 05:15 AM] cipi#4502
very good, then CPU usage is not a problem...


[31-Oct-19 06:23 AM] cipi#4502
the number of connections is pretty low on the seeds `netstat -natp | wc -l` shows only 350
but looks like the same connections are opened then closed again
`tail -5000 /tmp/mm.log | grep 81.0.1.117` (random selected ip)
```üòÄ 2019-10-31 13:13:06 +0000 [incoming_connection 81.0.1.117:12484] New connection...
üòü 2019-10-31 13:13:16 +0000 [incoming_connection 81.0.1.117:12484] Error Resource temporarily unavailable (os error 11) writing to socket, dropping connection
üòÄ 2019-10-31 13:13:36 +0000 [incoming_connection 81.0.1.117:12495] New connection...
üòü 2019-10-31 13:13:53 +0000 [incoming_connection 81.0.1.117:12495] Error Resource temporarily unavailable (os error 11) writing to socket, dropping connection
üòÄ 2019-10-31 13:14:06 +0000 [incoming_connection 81.0.1.117:12504] New connection...
üòü 2019-10-31 13:14:24 +0000 [incoming_connection 81.0.1.117:12504] Error Resource temporarily unavailable (os error 11) writing to socket, dropping connection
üòÄ 2019-10-31 13:14:36 +0000 [incoming_connection 81.0.1.117:12524] New connection...
üòü 2019-10-31 13:14:53 +0000 [incoming_connection 81.0.1.117:12524] Error Resource temporarily unavailable (os error 11) writing to socket, dropping connection
üòÄ 2019-10-31 13:15:06 +0000 [incoming_connection 81.0.1.117:12536] New connection...
üòü 2019-10-31 13:15:25 +0000 [incoming_connection 81.0.1.117:12536] Error Resource temporarily unavailable (os error 11) writing to socket, dropping connection```


[31-Oct-19 07:28 AM] Oszy#5734
that's mm2 client trying to connect to seed node every minute or so


[05-Nov-19 01:14 AM] jorian#4555
is there any kind of limit that is being used when querying the orderbook? i noticed in my tests that when i query the orderbook let's say every second, that all the orders disappear after a minute or 2


[05-Nov-19 01:23 AM] Oszy#5734
i guess that would be the same kind of limitation I ran into when tried to place multiple orders very quick. 
Check the mm2 output, does it disconnect you from the electrum when the orders disappear? Are those orders cancelled or just not able to pull the orderbook after a while?


[05-Nov-19 01:34 AM] jorian#4555
it's purely orderbook calls. i'm not placing orders, i just query


[05-Nov-19 01:34 AM] jorian#4555
i do it every second, and i notice the number of orders increase at first, but decrease after a while, as if i'm blocked from fetching the current orders


[05-Nov-19 01:34 AM] jorian#4555
not much output from mm2 debug actually


[05-Nov-19 01:47 AM] jorian#4555
and, very helpful: it doesn't always happen. in some sessions i'm perfectly able to query the orderbook for a long time without orders disappearing


[05-Nov-19 01:50 AM] Oszy#5734
someone reported a similar occurrence on Android, and I noticed it too, sometimes the orderbook is just loading forever, and then doesn't show any orders until I restart the app


[05-Nov-19 01:50 AM] Oszy#5734
also sometimes i see the same order twice


[05-Nov-19 02:04 AM] artem.pikulin#0794
@jorian @Oszy Hi, such issue was reported during stress test: https://github.com/KomodoPlatform/atomicDEX-API/issues/567 and it's more likely happens when network load increases and also depends on the environment (OS, etc.). The problem will stop happening when we refactor the ordermatching network protocol to more efficient version.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/567
orderbook disappears shortly after start ¬∑ Issue #567 ¬∑ KomodoPl...
In the latest version from github 8801999, the orderbook disappears shortly after restart. It can be fetched once after mm2 restarted, but the second time, it is empty. Nodes that do setprice thems...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[05-Nov-19 02:05 AM] jorian#4555
ok, great


[07-Nov-19 03:15 AM] jorian#4555
<https://developers.komodoplatform.com/basic-docs/atomicdex/atomicdex-api.html#setprice> has a response value `matches`, but i don't know what the object looks like. is it always empty, as the docs suggest? 
> contains the map of ongoing matches with other orders, empty as the order was recently created


[07-Nov-19 03:23 AM] Oszy#5734
my guess is it would be an object with `uid's that matches you setprice if there is any
Artem must know üòõ


[09-Nov-19 07:54 AM] cipi#4502
https://docs.binance.org/atomic-swap.html
could be useful for implementing BEP3 atomic swaps on mm2

{Reactions}
üëç (2) 

[10-Nov-19 11:06 PM] artem.pikulin#0794
@jorian Hi, to get the format of order `matches` please take a look at `order_status` response example: https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#order-status

{Embed}
https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html
Komodo Developer Documentation
Documentation for developers building on the Komodo Platform
https://images-ext-2.discordapp.net/external/JRuH6_LDrjOGd6HbRckiIc9OBFcyJGE1c7DjCukFvtA/https/developers.komodoplatform.com/start-here-pics/Dev_Docs_Introduction_small.png


[11-Nov-19 10:46 AM] jorian#4555
thanks. maybe it can be clarified in the docs?


[11-Nov-19 01:21 PM] cipi#4502
seeing this from time to time on the seed nodes:
`11 20:48:33, http_fallback:216] merge_map_impl] Clock of "some obscure string" rewound from 3 to 1`
what does that mean?


[12-Nov-19 09:35 PM] Oszy#5734
I had a swap that did timeout because of long BTC blocks and low fee (no conf over 3 hours), and instead of refund, this morning it's actually went trough. Is this something new or just my first case? üòÑ


[12-Nov-19 09:54 PM] artem.pikulin#0794
@Oszy Hi, the BTC swaps have much longer locktimes (as of now 10x times bigger than for other coins) so even if it takes over 3 hours for tx to confirm the swap might still go through successfully.


[12-Nov-19 09:56 PM] artem.pikulin#0794
```
seeing this from time to time on the seed nodes:
11 20:48:33, http_fallback:216] merge_map_impl] Clock of "some obscure string" rewound from 3 to 1
what does that mean?
```
@artemciy_dice Hi, could you please your comment on this?


[12-Nov-19 10:03 PM] artemciy_dice#0049
IIRC, this log entry is emitted when we allow the same HTTP fallback record to be used for a new MM instance (happens after MM restarts). This is a limited exception to CRDT clock logic, which is used to prevent out-of-order updates otherwise. It's likely that we'll get back to that code in the future and make this exception unnecessary, but for now it should be logged in the debug log for the purpose of future development (though we can also comment it out temporarily if it gets in the way too much).


[12-Nov-19 10:07 PM] artemciy_dice#0049
@artem.pikulin , makes sense?


[12-Nov-19 10:09 PM] artem.pikulin#0794
Yes, I guess `from time to time` doesn't mean that it `gets way too much` so it's not required to even comment it out. Thanks a lot for explanation!

{Reactions}
troll_cool 

[12-Nov-19 10:18 PM] Oszy#5734
Thanks Artem, it was interesting as it showed timeout first then went trough, maybe it has to be adjusted so it doesn't show timeout if it's 10x?


[12-Nov-19 10:18 PM] Oszy#5734
I guess i should take a note of this in #ü§ù‚îÇdex-mobile instead


[12-Nov-19 10:30 PM] artemciy_dice#0049
HTTP fallback should take the expected delay into account already. What's the real concern here, @Oszy ?


[12-Nov-19 10:32 PM] Oszy#5734
Just a UI discrepancy in atomicdex mobile, not an mm2 concern since Artem explained to me that BTC has 10x locktime.


[12-Nov-19 10:36 PM] artemciy_dice#0049
Yeah, I saw some of those UI timeouts as well. We should test with BTC more. @TonyL , can we do that?

{Reactions}
üëç 

[12-Nov-19 10:37 PM] Oszy#5734
I am going to put this on github


[12-Nov-19 10:37 PM] artemciy_dice#0049
@Oszy , at https://github.com/ca333/komodoDEX/issues ?


[12-Nov-19 10:38 PM] Oszy#5734
https://github.com/KomodoPlatform/atomicDEX/issues/ > this is for the mobile right

{Embed}
https://github.com/KomodoPlatform/atomicDEX/issues/
KomodoPlatform/atomicDEX
This is the official AtomicDEX mobile (smartphone app) repository - KomodoPlatform/atomicDEX
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[12-Nov-19 10:38 PM] artemciy_dice#0049
Nope


[12-Nov-19 10:38 PM] Oszy#5734
the one you linked is 404


[12-Nov-19 10:38 PM] artemciy_dice#0049
UI isn't OSS yet


[12-Nov-19 10:38 PM] Oszy#5734
my link in pinned to #ü§ù‚îÇdex-mobile


[12-Nov-19 10:39 PM] Oszy#5734
https://github.com/KomodoPlatform/atomicDEX/issues

{Embed}
https://github.com/KomodoPlatform/atomicDEX/issues
KomodoPlatform/atomicDEX
This is the official AtomicDEX mobile (smartphone app) repository - KomodoPlatform/atomicDEX
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[12-Nov-19 10:39 PM] Oszy#5734
everybody posting here


[12-Nov-19 10:40 PM] artemciy_dice#0049
Okay, there's no harm in tracking this with the MM issue as well. Thanks @Oszy .

{Reactions}
üëç 

[12-Nov-19 11:04 PM] TonyL#3577
https://discordapp.com/channels/412898016371015680/476025090627207168/644063367031685160 thats private repo @artemciy_dice 
problem description sounds similar to issue #603 in this repo (```"event":{"data":{"error":"taker_swap:848] utxo:987] rpc_clients:960] JsonRpcError { request: JsonRpcRequest { jsonrpc: \"2.0\", id: \"5\", method: \"blockchain.transaction.broadcast\", params: [String(\"hex\")] }, error: Response(Object({\"code\": Number(1), \"message\": String(\"the transaction was rejected by network rules.\\n\\n\\n[hex]\")})) }"},"type":"MakerPaymentSpendFailed"``` in swap status but actually tx is fine in some time and swap succesfully completed but in gui indicating as failed because of failed event)
@Oszy Could you please DM me the log and this swap uuid?

{Reactions}
üëç awthanks 

[04-Dec-19 11:39 AM] naezith#9757
at pc I made a buy order, giving MORTY for RICK `curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"buy\",\"base\":\"RICK\",\"rel\":\"MORTY\",\"volume\":\"2\",\"price\":\"1.5\"}" | jq`

installed atomicdex to my phone, filled some rick in from faucet, accepted that order I made
waits 10-15 mins at step 2/3
then swap failed
did the exactly same thing again and again it took 15 mins and then it failed
here is the log at pc side https://hastebin.com/lazufabedu.sql

looks like this in app


[04-Dec-19 11:40 AM] naezith#9757

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/651870557712941066/Capture_2019-12-04-22-17-55.png


[04-Dec-19 11:41 AM] naezith#9757
what am I doing wrong


[04-Dec-19 12:04 PM] Oszy#5734
are you using different addresses for the phone/pc?
what does the log say where it failed?


[04-Dec-19 12:13 PM] naezith#9757
I posted the full pc log


[04-Dec-19 12:13 PM] naezith#9757
and at mobile it's just that screenshot, nothing else


[04-Dec-19 12:14 PM] naezith#9757
and yes, different addresses


[04-Dec-19 12:19 PM] Oszy#5734
post the my_recent_swaps output


[04-Dec-19 12:19 PM] Oszy#5734
that's just mm2 output


[04-Dec-19 12:19 PM] Oszy#5734
`curl --url "http://127.0.0.1:7783" --data "{\"userpass\":\"$userpass\",\"method\":\"my_recent_swaps\",\"limit\":100}"`


[04-Dec-19 12:24 PM] naezith#9757
https://hastebin.com/eputumogoy.bash


[04-Dec-19 12:25 PM] naezith#9757
@Oszy please ping me every time you type


[04-Dec-19 12:25 PM] naezith#9757
I'd see sooner


[04-Dec-19 12:26 PM] Oszy#5734
`MakerPaymentTransactionFailed`


[04-Dec-19 12:27 PM] Oszy#5734
mm2 on your pc couldn't send the coins for some reason


[04-Dec-19 12:29 PM] Oszy#5734
is your coins file updated to the latest? @naezith


[04-Dec-19 12:30 PM] cipi#4502
`\"the transaction was rejected by network rules.\\n\\n16: tx-overwinter-active\\n`
likely, the coin config is wrong
coins with sapling need
```    "txversion": 4,
    "overwintered": 1,```

{Reactions}
üëÜ (2) 

[04-Dec-19 12:31 PM] Oszy#5734
and restart mm2 after editing the coins file


[04-Dec-19 12:44 PM] naezith#9757
its the one from docs ```
[
{"coin":"RICK","asset":"RICK","fname":"RICK (TESTCOIN)","rpcport":28223,"mm2":1},
{"coin":"MORTY","asset":"MORTY","fname":"MORTY (TESTCOIN)","rpcport":63812,"mm2":1},
  {
    "coin": "KMD",
    "name": "komodo",
    "fname": "Komodo",
    "rpcport": 7771,
    "pubtype": 60,
    "p2shtype": 85,
    "wiftype": 188,
    "txversion": 4,
    "overwintered": 1,
    "txfee": 1000,
    "mm2": 1
  }]

```

{Reactions}
üëç 

[04-Dec-19 12:44 PM] naezith#9757
plus I added KMD manually


[04-Dec-19 12:45 PM] naezith#9757
so I am adding those two lines to both


[04-Dec-19 12:52 PM] naezith#9757
alright, going through it again


[04-Dec-19 12:57 PM] naezith#9757
yaaay it works now


[04-Dec-19 01:04 PM] naezith#9757
thank you!


[04-Dec-19 03:47 PM] cipi#4502
RICK and MORTY need txversion and overwintered too
please use the settings from the coins repo: https://github.com/jl777/coins/blob/master/coins#L2124

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[04-Dec-19 05:19 PM] naezith#9757
yes, this needs to be updated https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-tutorials/atomicdex-walkthrough.html#setting-up-the-coin-list

{Reactions}
üëç 

[07-Dec-19 08:13 PM] cipi#4502
question: do multiple asks from a single pubkey make sense?
```    {
      "coin": "CHIPS",
      "address": "RA1Kvcaa2mopyvw6bZYnvZWXeyrLZjsRRM",
      "price": "0.2500000000000000",
      "maxvolume": "1000",
      "pubkey": "1f7e17a03ebdfca41963b6f3d31b8ffca073452ddbfde21580f311f6974aa31e",
      "age": 3,
      "zcredits": 0
    },
    {
      "coin": "CHIPS",
      "address": "RA1Kvcaa2mopyvw6bZYnvZWXeyrLZjsRRM",
      "price": "0.2200000000000000",
      "maxvolume": "1000",
      "pubkey": "1f7e17a03ebdfca41963b6f3d31b8ffca073452ddbfde21580f311f6974aa31e",
      "age": 4,
      "zcredits": 0
    }```
what i think: the ask with price 0.25 does not make sense, a taker can buy up all the CHIPS from this pubkey for 0.22, simply by issuing a buy with volume 1000, waiting till the orderbook entry gets updated (as long as there are CHIPS left in the wallet) and issuing another buy call for 0.22
am i wrong?


[09-Dec-19 01:40 AM] artem.pikulin#0794
@cipi Hi! MM2 keeps all matches and removes the order if it was filled completely. It happens despite the available balance so only order with `0.25` price will stay in orderbook after `0.22` is filled with 1000 coins buy. As example I have more than 1 RICK,  I initially created the 1 RICK/MORTY sell and then bought 0.1 RICK from it. That's how order status response looks now:


[09-Dec-19 01:41 AM] artem.pikulin#0794
```
{
  "result": {
    "maker_orders": {
      "e3febd97-22e0-4aee-8aca-c56b771016ee": {
        "available_amount": "0.9",
        "base": "RICK",
        "cancellable": true,
        "created_at": 1575883512106,
        "matches": {
          "9b6f6992-18d7-4eb6-94db-634007c6e4c6": {...}
        },
        "max_base_vol": "1",
        "min_base_vol": "0",
        "price": "1",
        "rel": "MORTY",
        "started_swaps": [
          "9b6f6992-18d7-4eb6-94db-634007c6e4c6"
        ],
        "uuid": "e3febd97-22e0-4aee-8aca-c56b771016ee"
      }
    },
    "taker_orders": {}
  }
}
```


[09-Dec-19 01:41 AM] artem.pikulin#0794
Please notice the `"available_amount": "0.9",`, it's not possible to buy more than 0.9 from this order now. Once it's bought the order is removed completely.


[22-Dec-19 12:35 AM] CrisF#3405
Hi guys,
I'll be giving a short talk on atomic swaps and DEX to a Fintech group in Tokyo mid-January.  

I would like to speak a little of how mm2 and atomic swaps could possibly be used in IoT devices (if this is realistic).  

Also how mm2 could be used in more of a b2b or internal perspective.

Sorry if that is unclear, I'm having trouble expressing what I'm thinking (it isn't very clear to me what I'm asking for).

Any ideas, technical or otherwise, would be appreciated üôè


[22-Dec-19 03:27 AM] smkhound#7640
I'm not sure but I recall someone trying to build mm2 on an IoT board. There's instructions for R-Pi below


[22-Dec-19 03:31 AM] smkhound#7640
Even if not built on board, you could run it on a newtork the iot device has access to, and use rpc calls to the IP of the computer running mm2.


[22-Dec-19 03:31 AM] smkhound#7640
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/docs/Raspbian-QEMU.md

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/docs/Raspbian-QEMU.md
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[22-Dec-19 07:15 AM] cipi#4502
@artem.pikulin
```
    /// If true - allow coins withdraw to P2SH addresses (Segwit).
    /// the flag will also affect the address that MM2 generates by default in the future
    /// will be the Segwit (starting from 3 for BTC case) instead of legacy
```
does this mean i will have to move the funds away before enabling segwit?


[22-Dec-19 08:46 AM] cipi#4502
what happens when a non-segwit-node trades with a segwit-node? is that possible?


[22-Dec-19 07:51 PM] artem.pikulin#0794
@cipi Hi, I will work this out once full Segwit support is implemented. The current goal is just to enable P2SH withdraw, everything other is a kind of `TODO`. The questions and compatibility problems will be solved upon implementation.


[22-Dec-19 09:13 PM] artem.pikulin#0794
@CrisF Hi!
`I would like to speak a little of how mm2 and atomic swaps could possibly be used in IoT devices (if this is realistic)` - From technical perspective it should be possible to use MM2 on IoT devices. Supporting specific device depends on it's hardware performance, CPU architecture and OS. The platform should be supported by Rust: https://forge.rust-lang.org/release/platform-support.html, it has  good coverage so I guess we can run MM2 on many different devices (but it might require some effort).
From user perspective I can imagine an in-house MM2 node connected to the smart home system. The node can be managed from mobile device or by voice using virtual assistant, e.g. "Alexa, sell 10 KMD for 10$". Manufacturing and white-labelling such devices might good idea from b2b perspective also.
Or maybe TV automatically paying for VOD service subscription represented as crypto asset. This also contains b2b value: integrations with TV manufacturers, crypto asset integration to VOD service utilizing KMD tech, etc.

{Reactions}
üî• 

[23-Dec-19 11:28 PM] Slyris#2880
Hey ! @artem.pikulin are you here ?


[23-Dec-19 11:30 PM] Slyris#2880
I would like to know what is the condition for the sync status of my_tx_history to stop returning NotEnabled?

I have enable RICK/MORTY, waiting and waiting, then doing some tx_history but nothing happen, all the time NotEnabled


[23-Dec-19 11:31 PM] Slyris#2880
```json
[D][00:52:45][worker thr]: resp {"result":{"current_block":209979,"from_id":null,"limit":50,"skipped":0,"sync_status":{"state":"NotEnabled"},"total":0,"transactions":[]}}
[D][00:52:45][worker thr]: resp {"result":{"current_block":208017,"from_id":null,"limit":50,"skipped":0,"sync_status":{"state":"NotEnabled"},"total":0,"transactions":[]}}
[D][00:52:45][worker thr]: resp {"result":{"current_block":208017,"from_id":null,"limit":50,"skipped":0,"sync_status":{"state":"NotEnabled"},"total":0,"transactions":[]}}
```


[23-Dec-19 11:38 PM] artem.pikulin#0794
@Slyris Hi, you should add `"tx_history": true` upon coin activation: https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#arguments-6 The flag is supported by both `enable` and `electrum` methods.

{Embed}
https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html
Komodo Developer Documentation
Documentation for developers building on the Komodo Platform
https://images-ext-2.discordapp.net/external/JRuH6_LDrjOGd6HbRckiIc9OBFcyJGE1c7DjCukFvtA/https/developers.komodoplatform.com/start-here-pics/Dev_Docs_Introduction_small.png


[23-Dec-19 11:38 PM] Slyris#2880
let me check if i forget to do that


[23-Dec-19 11:38 PM] Slyris#2880
```
[D][08:35:00][coin thr]: req {"coin":"BTC","servers":[{"url":"electrum3.cipig.net:10000"},{"url":"electrum2.cipig.net:10000"},{"url":"electrum1.cipig.net:10000"}],"with_tx_history":true,"method":"electrum","userpass":"atomic_dex_rpc_password"}
```

LOL THE FAIL


[23-Dec-19 11:39 PM] Slyris#2880
i did with_tx_history (-_-)

{Reactions}
troll_cool 

[23-Dec-19 11:41 PM] Slyris#2880
Ah everything is better now @artem.pikulin

{Reactions}
üëç 

[23-Dec-19 11:41 PM] Slyris#2880
üòÑ


[23-Dec-19 11:51 PM] Slyris#2880
man i have insane perf i can enable 50 coins in 0,08 seconds using multithread @artem.pikulin üòÑ

{Reactions}
üî• 

[23-Dec-19 11:53 PM] Slyris#2880
I have 2 versions of the app  now, the second version is much faster


[23-Dec-19 11:54 PM] Slyris#2880
```nim
jsonSchema:
    ElectrumRequestParams:
        coin: string
        servers: ElectrumServerParams[]
        tx_history : bool
    ElectrumAnswerSuccess:
        address: string
        balance: string
        "result": string
    ElectrumAnswerError:
        error: string
    BalanceRequestParams:
        coin: string
    BalanceAnswerSuccess:
        address: string
        balance: string
        locked_by_swaps: string
        coin: string
    BalanceAnswerError:
        error: string
    TransactionHistoryRequestParams:
        coin: string
        limit: int
        from_id ?: string
    StatusAdditionalInfo:
        transactions_left ?: int
        code ?: int
        message ?: string
        blocks_left ?: int
    StatusData:
        state: string
        additional_info ?: StatusAdditionalInfo
    FeesDetails:
        amount ?: string
        coin ?: string #/// <erc 20 
        gas ?: int #///< erc 20
        gas_price ?: string #///< erc20
        total_fee ?: string #///< erc20
    TransactionData:
        block_height: int
        coin: string
        confirmations: int
        fee_details: FeesDetails
        "from": string[]
        internal_id: string
        my_balance_change: string
        received_by_me: string
        spent_by_me: string
        timestamp: int
        timestamp_human ?: string
        to: string[]
        total_amount: string
        tx_hash: string
        tx_hex: string
    TransactionHistoryContents:
        "current_block": int
        "from_id" : string or nil
        limit: int
        skipped: int
        sync_status: StatusData
        transactions: TransactionData[]
        total: int
    TransactionHistoryAnswerSuccess:
        "result" : TransactionHistoryContents
        "coin" ?: string
        "human_timestamp" ?: string
    TransactionHistoryAnswerError:
        error: string
```

I use Json Schema to auto validate my json answer


[23-Dec-19 11:54 PM] artem.pikulin#0794
I guess you have very good network connectivity also üôÇ MM2 sends RPC requests upon coin activations so this process speed mostly depends on your internet speed and quality.


[23-Dec-19 11:55 PM] Slyris#2880
i have really good internet too yeah


[23-Dec-19 11:55 PM] Slyris#2880
But it's async in my app


[23-Dec-19 11:55 PM] Slyris#2880
So even it's take time


[23-Dec-19 11:55 PM] Slyris#2880
no latencies in the GUI


[23-Dec-19 11:55 PM] artem.pikulin#0794
What is your ping to let's say `electrum1.cipig.net`?


[23-Dec-19 11:56 PM] Slyris#2880
64 bytes from 195.201.12.150: icmp_seq=5 ttl=50 time=3.563 ms


[23-Dec-19 11:56 PM] artem.pikulin#0794
Well yeah, `0,08` seconds for coins activation is realistic with 3ms ping üôÇ


[23-Dec-19 11:56 PM] Slyris#2880
And i still using mm2 in debug


[23-Dec-19 11:57 PM] Slyris#2880
waiting for nightly release :p


[24-Dec-19 12:59 AM] CrisF#3405
Thanks @artem.pikulin üôá


[24-Dec-19 01:28 AM] artem.pikulin#0794
@CrisF You're welcome! We can generate more ideas if required after some brainstorming üôÇ


[24-Dec-19 01:57 AM] CrisF#3405
I'd appreciate all the ideas you can come up with :)


[27-Dec-19 06:35 PM] CrisF#3405
Hi, would like to confirm,
Does MM2 have a usecase in an internal or private network, and chain clusters, as a backup/option for cross-chain data/asset exchange? 
Would this be difficult for a project or corporation with enough resources to set up?


[27-Dec-19 11:15 PM] smkhound#7640
with private netid and internal (firewalled?) seednodes, mm2 should be able to do that. difficulty depends on how many resources available for dev.


[12-Jan-20 04:08 PM] CrisF#3405
Hi, another couple of questions about MM2...
If I'm asked about who pays the gas fee fees for ETH-based swaps, what kind of answer would be good?

Also, how do BTC-based coins interact with ERC-20 etc?

üôè


[12-Jan-20 11:33 PM] Oszy#5734
both parties have to pay the gas fee


[12-Jan-20 11:35 PM] Oszy#5734
interaction between utxo and erc coins happens via the eth smart contract


[14-Jan-20 03:21 PM] CrisF#3405
Thanks @Oszy üíé


[26-Jan-20 12:46 AM] gcharang#6833
@artemciy_dice are the lock times (takerpayment/makerpayment ) for different coins programmatically calculated(based on blocktimes) or custom ?
I want to add this info to the docs to make the uncertainity(is there a bug/or the locktime isn't over) of refund status lesser (in case of a failed swap)


[26-Jan-20 01:14 AM] artemciy_dice#0049
@gcharang , 
It looks like we have a constant
```
const PAYMENT_LOCKTIME: u64 = 3600 * 2 + 300 * 2;
```
and a heuristic to multiply that constant for certain coins, https://github.com/KomodoPlatform/atomicDEX-API/blob/bdfe38c23b09921b1781df54a017a14d16ac68af/mm2src/lp_swap.rs#L280

Should check with Artem Pikulin, swap logic is his expertise.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/bdfe38c23b09921b1781df54a017a14d16ac68af/mm2src/lp_swap.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[26-Jan-20 01:33 AM] gcharang#6833
thanks for this info!

maybe making this info available via rpc can enable GUI to display estimated locktime? should I create an issue?
it could be as part of the reponse for <https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#order-status>


[26-Jan-20 01:58 AM] artemciy_dice#0049
I was thinking of using the gossip protocols to get the actual locktimes seen in our network, but this MM information can also provide a definitive max value, sound like a good idea @gcharang

{Reactions}
üëç 

[27-Jan-20 02:17 AM] artem.pikulin#0794
@gcharang @artemciy_dice Hi! Yes, the locktime is constant but it's multiplied for "slow" coins. 

I think that displaying expected locktime in `order_status` might be useful for users to understand for how long their funds will be locked if the order matches. 

However it doesn't fix the uncertainty (bug or not) if the swap is running and it failed for some reason so MM2 waits for locktime expiration to refund the payment. `my_swap_status` (https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#my-swap-status) method contains the `lock_duration`,  `maker/taker_payment_lock` in Started event data and `maker/taker_payment_locktime` in Negotiated data. So API provides the data that might help to handle such situation.

But I also think that it might be a bit tricky for GUI developers to process all these events data. The refund can be triggered by multiple events actually so it might worth to add an `aggregated_state` field that will contain the current state like `Will refund my payment at 1561529842`.

`aggregated_state` will simplify the swap state handling and developers will be still able to have like "pro-mode" events processing if they prefer to do so. Artem, what do you think about this idea?

{Embed}
https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html
Komodo Developer Documentation
Documentation for developers building on the Komodo Platform
https://images-ext-2.discordapp.net/external/JRuH6_LDrjOGd6HbRckiIc9OBFcyJGE1c7DjCukFvtA/https/developers.komodoplatform.com/start-here-pics/Dev_Docs_Introduction_small.png

{Reactions}
üëç 

[27-Jan-20 02:27 AM] artemciy_dice#0049
One problem might be that the lock_duration "feels" undocumented because there is no description for it. When a field is undocumented my gut reaction is often to avoid it because there is no contract with the API provider on what the field means, when it is present, how we are supposed to use it, etc. When the fields are documented it isn't much of a problem to access them, IMHO, even in the events array. @artem.pikulin


[27-Jan-20 02:30 AM] artemciy_dice#0049
I think we need a subsection in the order status docs with examples on how to detect certain common states and interpret the relevant data bits.


[27-Jan-20 03:17 AM] artem.pikulin#0794
@artemciy_dice True, I'm going to add a drop-down section describing the event meaning and their data structure. Will do it on this week, might take a bit time as there are quite many of different events.


[27-Jan-20 03:19 AM] artemciy_dice#0049
Awesome! That would be very helpful for when we tinker UI.

{Reactions}
ü§ù rum (2) 

[27-Jan-20 03:56 AM] artem.pikulin#0794
What I'm also thinking of is adding the `Definitions` section because I see that `Order` and `Swap` are mixed pretty often (in this case too: `order_status` was mentioned few times while the problem is mostly `my_swap_status` related), these words should have different meaning.

`Order` is part of market depth that always works as `limit order` (https://www.investopedia.com/terms/l/limitorder.asp, it's subject to change as we will add more order types for sure). It can be matched with other orders having *equal or better* price and must not be ever matched with order having worse price by definition.

*The result* of order matching process is a `Swap`. The Swap is actual exchange process when traders funds are locked under Atomic Swap protocol conditions guaranteeing that funds will be either exchanged or both sides will have enough time to refund their funds back. The important part is 1 order can be matched with N other orders so multiple swaps will be started. (this is not true for Taker order now, but it should be changed, it's an implementation detail inherited from MM1).

So on high level it can be represented as function: `F (MY_ORDER, [OTHER_ORDER_1, ..., OTHER_ORDER_N]) -> [SWAP_1, ..., SWAP_M]`, where M <= N, the attempt of order matching can be made, but the swap *is not guaranteed* to be started because price, volume or some other conditions e.g. peer reputation might not match the required constraints.

And this relation is reflected in the API: `order_status` for Maker order has `started_swaps` field that contains uuids of the swaps that were initiated by the selected order (1-to-N relation).

{Reactions}
üëç ü¶∏‚Äç‚ôÇÔ∏è 

[27-Jan-20 03:58 AM] artem.pikulin#0794
Thereafter the `my_swap_status` can be called with selected uuid to check specific swap details and status.


[27-Jan-20 04:28 AM] gcharang#6833
thanks for the above discussion guys
it was informative!


[27-Jan-20 04:28 AM] gcharang#6833
```json
{
"maker_coin": "VRSC",
"maker_error_type": "NegotiateFailed",
"maker_error_msg": "maker_swap:312] \"maker_swap:308] timeout (180.0 > 180.0)\"",
"maker_gui": "atomicDEX 0.2.12 Android",
"maker_version": "401ff3d37",
"taker_coin": "LTC",
"taker_error_type": "NegotiateFailed",
"taker_error_msg": "taker_swap:541] Started_at time_dif over 60 238",
"taker_gui": "atomicDEX 0.2.12 Android",
"taker_version": "401ff3d37"
}
```
what does the error  "taker_swap:541] Started_at time_dif over 60 238" mean ?
@artem.pikulin @artemciy_dice


[27-Jan-20 04:36 AM] artemciy_dice#0049
A time difference of more than 60 seconds (238 seconds in fact) between the time the swap negotiation started according to the taker and the same time according to the maker. Might mean the wall clocks on the devices are out of sync. BTW, we should probably consider using our own time (with the help of seed and caretaker nodes), though that's not a priority right now.

{Reactions}
üëç 

[27-Jan-20 04:38 AM] gcharang#6833
got it!


[31-Jan-20 03:02 AM] cipi#4502
parity messed up the last update completely... the situation is now:
- blocks that were written by the 2.7.0 version will cause a panic when queried with the `trace`-calls
- i now run the nodes with tracing RPC disabled, so they don't crash (`--jsonrpc-apis=safe,-traces`)
- it does not look like they will manage to fix the problem, so the only solution is to resync the entire chain from scratch or try to reset the DB to a point before 2.7.0 https://github.com/paritytech/parity-ethereum/issues/11422#issuecomment-580382210
@artem.pikulin#0794 what do you recommend? Do we need the traces or can we switch to using a block explorer?

{Embed}
https://github.com/paritytech/parity-ethereum/issues/11422
panic after updating from 2.6.8 to 2.7.0 when `Tracing` is enabled...
Jan 29 18:28:55 Debian-94-stretch-64-minimal systemd[1]: Started Parity Ethereum Daemon. Jan 29 18:28:56 Debian-94-stretch-64-minimal parity[8412]: 2020-01-29 18:28:56 UTC Starting Parity-Ethereum/...
https://images-ext-1.discordapp.net/external/k-PtTYyUS7b9auIdODfpQ_h98mRT58mpRGj1Bpi-j4o/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/14176906


[31-Jan-20 03:39 AM] cipi#4502
reset does not work: `Attempting to reset the chain 28000 blocks back failed: state is pruned (max available: 64)`
so the only remaining option is a complete resync... which will take ages... or leave traces disabled


[31-Jan-20 03:45 AM] cipi#4502
i will start a complete resync on the failover node... but with the old 2.6.8beta version, because beta is much more stable than stable... and only update the stuff again in case of a hardfork


[31-Jan-20 06:10 AM] artem.pikulin#0794
@cipi Please resync at least 1 node without tracing and also spin up the Geth node. May you also put the Geth node behind the same DNS that is used in AtomicDEX GUI?


[31-Jan-20 06:11 AM] artem.pikulin#0794
We need to have 1-2 node without tracing, the ETH transaction history won't be available for a while, but it's better than complete ETH/ERC20 outage.


[31-Jan-20 06:13 AM] artem.pikulin#0794
ERC20 transactions history will still work btw because it uses smart contract events retrieved with standard APIs implemented by both Geth and Parity.


[31-Jan-20 06:13 AM] artem.pikulin#0794
Parity uses warp sync when tracing is turned off so it should be quite fast.


[31-Jan-20 06:14 AM] cipi#4502
i already started a complete resync on all nodes... parity continues to respond to RPC queries even when not synced, so AtomicDEX will fail anyway till all nodes are synced


[31-Jan-20 06:15 AM] artem.pikulin#0794
Do you resync all nodes with tracing turned on?


[31-Jan-20 06:15 AM] cipi#4502
no, they are with tracing on


[31-Jan-20 06:15 AM] artem.pikulin#0794
Please turn the tracing off on 1 node and resync it, it will use warp sync so you will presumably have working node in few hours, not weeks.


[31-Jan-20 06:16 AM] cipi#4502
but that will not help as long as AtomicDEX queries all nodes... would need to make it not answer toi queries till synced


[31-Jan-20 06:17 AM] artem.pikulin#0794
Can you just remove DNS records for a while?


[31-Jan-20 06:18 AM] artem.pikulin#0794
And close the ports until node is synced.


[31-Jan-20 06:18 AM] cipi#4502
yes... but next question: how do you make the difference between a tracing node and a not tracing node?


[31-Jan-20 06:19 AM] artem.pikulin#0794
There is no actual difference, if the tracing API is not supported node will return an error and ETH transactions history won't work.


[31-Jan-20 06:19 AM] cipi#4502
atomicdex will simply query one of the configured nodes in the hope that it offers the tracing calls


[31-Jan-20 06:19 AM] cipi#4502
but if one has tracing on and the other off


[31-Jan-20 06:19 AM] cipi#4502
ahh, ok


[31-Jan-20 06:19 AM] artem.pikulin#0794
It will switch between nodes in case of errors.


[31-Jan-20 06:20 AM] artem.pikulin#0794
No problem if some nodes do not support tracing, even if ALL nodes do not support tracing only ETH transactions history won't work. Everything else *will work*.


[31-Jan-20 06:20 AM] cipi#4502
yes, i know


[31-Jan-20 06:27 AM] artem.pikulin#0794
@cipi Please use `ufw reject` (iptables REJECT) to block the port so it results into `connection refused` immediately. If you use `drop` the requests will stuck until timeout delaying the switching between nodes addresses.


[31-Jan-20 06:28 AM] cipi#4502
failover node is syncing without tracing now... the others continue with tracing
i will simply change the livechecks when it is done, so they fail and all DNS records point to the IP of this failover node


[31-Jan-20 06:31 AM] artem.pikulin#0794
Please close the ports or remove DNS until nodes are synced.
```
curl --data '{"method":"eth_blockNumber","params":[],"id":1,"jsonrpc":"2.0"}' -H "Content-Type: application/json" -X POST eth1.cipig.net:8555
{"jsonrpc":"2.0","result":"0x2363aa","id":1}
```
Nodes respond with outdated information which may cause a lot of frustration because users will see outdated balance.


[31-Jan-20 06:38 AM] cipi#4502
closed port


[31-Jan-20 06:42 AM] artem.pikulin#0794
Thanks! All 3 eth.cipig.net now return `connection refused` as expected.


[31-Jan-20 08:17 AM] cipi#4502
failovernode is synced and all DNS entries point towards this node

{Reactions}
üëç 

[31-Jan-20 08:58 AM] cipi#4502
@artem.pikulin what startparams should i use for a geth node?
`geth --rpc --rpcport 8555 --rpcaddr 0.0.0.0`?


[02-Feb-20 07:09 AM] artem.pikulin#0794
@cipi Hi, please also add `--rpcapi eth,web3`, all other API modules are not used by MM2 and some of them should be also not available for public usage for security reasons (e.g. `admin`). According to documentation geth whitelists access to `eth,shh` by default, but we don't need shh and need web3.


[02-Feb-20 07:09 AM] artem.pikulin#0794
https://geth.ethereum.org/docs/rpc/server


[02-Feb-20 10:36 AM] cipi#4502
thanks, will do... i have a plan:
- wait for parity with tracing to sync on eth1-3 (#6529706/#9404740)
- stop parity on the failover node and replace it with geth listening on the same rpcport (8555)
DNS entries for eth1-3 will switch to the IP of the failover node in case parity does not answer on port 8555 any more (for whatever reason)... TTL is 60s


[04-Feb-20 05:19 PM] tolken#2655
Will Mm2 eventually use the old mm1.0 style 0conf for near instant trades, or can/will cc-channels be leveraged instead?


[05-Feb-20 01:36 AM] artem.pikulin#0794
@tolken Hi! We have several ideas in mind, it can work same way as it was in MM1, we may also use cc-channels or side-chains for this purpose. The decision to trust other node will be made by its reputation (https://github.com/KomodoPlatform/atomicDEX-API/issues/571). Btw you may also configure MM2 to use zero confirmations for specific coin by setting `required_confirmations:0` (https://github.com/jl777/coins/blob/master/coins#L77). Of course you should use it at your own risk for public trading, but it can serve very well for private network.

{Embed}
https://github.com/jl777/coins/blob/master/coins
jl777/coins
coin parameters and all files needed for GUI support - jl777/coins
https://images-ext-1.discordapp.net/external/ZluS_vPUp--Ma1oFnNdhU0YaB0OEwzwGFNPA2N_uSAk/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/5962559


[05-Feb-20 10:38 AM] tolken#2655
Awesome; thanks Artem, thats exciting to hear. Im really curious about the channels, pegged coins etc. Near instant swaps, with a pegged koModo backed BTC (kBTC) would be epic.


[10-Feb-20 02:22 PM] tolken#2655
How would Hardware wallets be integrated with something like MM? I haven't spent time to try out Shapeshifts integration as they claim to support ledger and such. I can't imagine it would be very elegant in most configurations. I'd imagine either you would have to be present with you hardware wallet to 'confirm' each transaction, or you'd have to move funds from your hard-ware secured wallet, to a temporary 'trading' address, limiting your exposed funds. Are there any more robust solutions in mind, or is that more or less how a hardware wallet would interface with something like market maker?


[11-Feb-20 12:04 AM] Oszy#5734
I can imagine you'd have to manually approve the 1-2 outgoing transactions on ledger during the swap.

{Reactions}
‚úÖ 

[11-Feb-20 10:03 AM] tolken#2655
@Oszy I suppose as a taker that might be acceptable, even if not ideal, but for a maker serving potentially thousands of transactions, needless to say it would t work.


[11-Feb-20 10:43 AM] tolken#2655
I‚Äôve been wondering if there a way to identify/flag an atomic swap vs a standard transaction. If for example someone gained access to a marketmaker, they could just deplete funds/send whatever using the withdraw functionality. On the other hand, perhaps a maker and taker produced some sort of hash that‚Äôs associated with each step of the swap. That‚Äôs part of the authentication/signing of each transaction, differentiating it from a standard withdraw function.


[11-Feb-20 10:43 AM] Oszy#5734
well, I don't think ledger would allow any kind of automation that's why it's safe


[11-Feb-20 10:44 AM] tolken#2655
No, I agree, that‚Äôs why I typed up the thoughts above. I‚Äôve just heard about ‚Äòeventual‚Äô hardware support at some point and haven‚Äôt quite worked out how that would even work.


[11-Feb-20 11:18 AM] tolken#2655
I‚Äôm curious if by limiting transactions (if even possible) to those that are identified as part of an atomic swap, it might reduce the ability of a malicious user from sending funds to some arbitrary address.


[11-Feb-20 08:38 PM] jl777c#5810
if a marketmaker node is compromised, then it is compromised, the privkey is in the attackers hands. funds that are locked he would need to follow the same rules and it wont be easy to spend to a different address when it unlocks, but it is possible. also the withdraw of any funds not locked. remember with blockchains, whoever has the privkey has the coins


[13-Feb-20 01:55 AM] Oszy#5734
https://github.com/KomodoPlatform/atomicDEX-API/releases/tag/2.0.1638


[16-Feb-20 12:40 PM] cipi#4502
@artem.pikulin i debugged a failed swap today and have some questions
it was KMD/BTC and i was maker with BTC
the swap failed with `TakerPaymentValidateFailed` on my side
```
"error" : "maker_swap:552] !taker_coin.tx_details_by_hash: utxo:1614] JsonRpcError { request: JsonRpcRequest { jsonrpc: \"2.0\", id: \"102264\", method: \"blockchain.transaction.get\", params: [String(\"6fd35a415e27840d6990e9c9ae3d6f74c000a4aa5f335b41a365f383f3138d20\"), Bool(true)] }, error: Transpors:1417] common:1070] future timed out\\\", \\\"rpc_clients:1417] rpc_clients:1407] send failed because receiver is gone\\\"]\") }"
```
this maker is using electrums for all coins
my impression was that it failed too quickly, so i looked in the code
if this is the place where it fails, than it tries only once: https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_swap/maker_swap.rs#L639
whereas here it tries 3 times: https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_swap/maker_swap.rs#L405

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_swap/maker_swap.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[16-Feb-20 12:41 PM] cipi#4502
failed swap

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/678702634068344839/5e496448-8d38-443d-b02c-59bf6ef1cd73.json


[16-Feb-20 12:42 PM] cipi#4502
log during failed swap

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/678702686845141022/5e496448-8d38-443d-b02c-59bf6ef1cd73.txt


[16-Feb-20 12:46 PM] cipi#4502
could you change the code so that it also tries 3 times here?


[16-Feb-20 02:52 PM] cipi#4502
the many `Didn\'t receive any data since 1581844439. Shutting down the connection.` are also strange... some of the electrum servers mentioned there are not related to the KMD/BTC swap... i assume they are related to `setprice` calls that happen at the same time for the other coins
calling `(echo '{ "id": 1, "method": "blockchain.transaction.get", "params": ["6fd35a415e27840d6990e9c9ae3d6f74c000a4aa5f335b41a365f383f3138d20",true] }'; sleep 0.5) | ncat electrum1.cipig.net 10001` from the same mm2 node is always fast, so i wonder why the timeouts even happen... maybe related to setprice calls and not to lookups during a swap


[17-Feb-20 01:38 AM] artem.pikulin#0794
@cipi Hi!
The error message contains a code location from where the error was originated, so correct place to look is `maker_swap:552` (https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_swap/maker_swap.rs#L552), MM2 makes 3 attempts there already, however it might worth to refactor it to time based check using wait_duration instead of just 3 attempts. 
`if this is the place where it fails, than it tries only once: https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_swap/maker_swap.rs#L639` - there's infinite loop which stops only when `tx_details_by_hash` succeeds, it is the transaction broadcasted by ourselves so we can endlessly try to retrieve transaction details for it.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/lp_swap/maker_swap.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[17-Feb-20 01:44 AM] artem.pikulin#0794
`the many Didn\'t receive any data since 1581844439. Shutting down the connection. are also strange...` - every electrum connection starts background async loop which does liveliness check, if no data is received in 60 seconds then connection is considered as dead and MM2 tries to reconnect:
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/coins/utxo/rpc_clients.rs#L1209
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/coins/utxo/rpc_clients.rs#L1290
It happens without any connection with orderbook, swap and other activity. The connect loop starts when you activate a coin so you can see such messages even if you don't make any requests to related coin RPC.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/coins/utxo/rpc_clients.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[17-Feb-20 06:15 AM] cipi#4502
ok, i see, thanks for the explanations... so in this case even trying 3 times to get the tx_details failed
will need to debug this further... this timeouts should never happen... and the fact that when this timeouts show up, every connected electrumx server is mentioned tells me that it is either related to networking on this node or that mm2 gets stuck somewhere... i saw it getting stuck when manually calling `my_balance` for couple of coins... does not happen often, but i think it is related...


[17-Feb-20 06:28 AM] cipi#4502
could a stucked connection to one electrumx server have influence over the other coins connected to other electrumx servers?


[17-Feb-20 06:47 AM] cipi#4502
something else: there is a slight rounding issue in check_i_have_enough_to_trade: `maker_swap:235] !check_i_have_enough_to_trade utxo:1434] BTC balance 1.29738824 is too low, required 1.29738825`
but not that important üòâ


[17-Feb-20 10:18 AM] cipi#4502
i have setup a fresh VPS only with AtomicDEX and tried a swap... and it also got one timeout
```
17 18:01:31, maker_swap:642] Error utxo:1614] JsonRpcError { request: JsonRpcRequest { jsonrpc: "2.0", id: "2402", method: "blockchain.transaction.get", params: [String("467a3c304eaad1379459aecfddf8952359f6d2daa7f86f27ac69c234ddbc4e79"), Bool(true)] }, error: Transport("rpc_clients:773] rpc_clients:773] [\"rpc_clients:1417] common:1070] future timed out\", \"rpc_clients:1417] common:1070] future timed out\", \"rpc_clients:1417] common:1070] future timed out\"]") } getting tx details of 467a3c304eaad1379459aecfddf8952359f6d2daa7f86f27ac69c234ddbc4e79
```
right after this
```
17 18:01:12, rpc_clients:1289] "electrum-ltc.bysh.me:50001" error "rpc_clients:1210] Didn\'t receive any data since 1581962402. Shutting down the connection."
17 18:01:12, rpc_clients:1253] Electrum client connected to electrum-ltc.bysh.me:50001
```
but `electrum-ltc.bysh.me` has nothing to do with this swap (RVN/KMD)
after i disabled LTC and tried the same RVN/KMD swap, no `future timed out`
it looks like one bad/slow electrum server leads to timeouts on other, not related servers
will do some more testing, but pretty sure i am on the right path


[17-Feb-20 10:23 AM] cipi#4502
btw, the node had almost no traffic during the entire swap, so it is not related to bad/slow network


[17-Feb-20 11:12 AM] Oszy#5734
i believe i had the same experience and I shared it here, back in 2019 i had load of these disconnections


[17-Feb-20 11:13 AM] Oszy#5734
https://discordapp.com/channels/412898016371015680/476025090627207168/638708636708896779


[17-Feb-20 11:17 AM] cipi#4502
in the meantime i disabled the rate limiting stuff on the electrums completely and set huge values for other ressource related stuff
```
MAX_SESSIONS = 5000
INITIAL_CONCURRENT = 100
COST_SOFT_LIMIT = 0
COST_HARD_LIMIT = 0
```
so at least this problem is gone... but we also use external electrums and they likely haven't disabled the rate limits


[17-Feb-20 11:23 AM] cipi#4502
what i don't understand is why this `Shutting down the connection` seem to always happen in bunches, for many connected electrums... like if it looses connection to one electrum, the others are affected too shortly after... maybe because it tries to hard to reconnect to the one electrum


[17-Feb-20 11:32 AM] cipi#4502
problem with this rate limits in electrumx could also be this
```
If a session disconnects, ElectrumX continues to associate its cost with its IP address, so if it immediately reconnects it will re-acquire its previous cost allocation.
```
so if the external electrums are indeed rate-limiting us, and finally disconnecting us (the value `INITIAL_CONCURRENT` has reached 0 for the session) than it makes no sense to reconnect to those
so maybe the logic in mm2 should be changed, so that it takes the list of electrums and only connects to 1-2 of them... if one of those disconnects us, connect to another one from the list (in case there is a third one) and don't try to reconnect


[17-Feb-20 11:37 AM] cipi#4502
i removed all coins with external electrums from one of my maker nodes and let it only with the coins i run electrums for
this maker node is also a tor relay and uses a lot of bandwith
i will let it run for a while and see how it works...


[17-Feb-20 11:39 AM] cipi#4502
i expect it to do just fine... but we will see


[17-Feb-20 12:06 PM] cipi#4502
ok, the disconnects are  not because of rate limits
```
17 20:03:02, rpc_clients:1289] "electrum2.cipig.net:10000" error "rpc_clients:1210] Didn\'t receive any data since 1581969709. Shutting down the connection."
17 20:03:02, rpc_clients:1253] Electrum client connected to electrum2.cipig.net:10000
```
they are disabled on this electrums...


[17-Feb-20 12:21 PM] cipi#4502
and not related to other traffic on the node... same node with 0 other traffic:
```
17 20:14:04, rpc_clients:1289] "electrum1.cipig.net:10051" error "rpc_clients:1210] Didn\'t receive any data since 1581970375. Shutting down the connection."
17 20:14:04, rpc_clients:1253] Electrum client connected to electrum1.cipig.net:10051
17 20:14:06, rpc_clients:1289] "electrum2.cipig.net:10061" error "rpc_clients:1210] Didn\'t receive any data since 1581970378. Shutting down the connection."
17 20:14:06, rpc_clients:1253] Electrum client connected to electrum2.cipig.net:10061
17 20:14:12, maker_swap:475] Error utxo:1614] JsonRpcError { request: JsonRpcRequest { jsonrpc: "2.0", id: "1018", method: "blockchain.transaction.get", params: [String("da6427d4670bf67694efc991f87473a76b6a8658cf350a75cb0054b361947077"), Bool(true)] }, error: Transport("rpc_clients:773] rpc_clients:773] [\"rpc_clients:1417] common:1070] future timed out\", \"rpc_clients:1417] common:1070] future timed out\", \"rpc_clients:1417] common:1070] future timed out\"]") } getting tx details of da6427d4670bf67694efc991f87473a76b6a8658cf350a75cb0054b361947077
```
during a DOGE/KMD swap... the disconnected electrums `electrum1.cipig.net:10051` and `electrum2.cipig.net:10061` are RVN and DASH, not related to this swap
this disconnects only happen during a swap, not when node is running and only updating prices every 90s with setprice and max:true (which also involves doing electrum calls, because of the balance)... but the disconnected electrums are not related to the swap... totally weird


[18-Feb-20 11:44 PM] gcharang#6833
is the mechanism for GUIs to collect fees implemented? if so, is it documented some place?


[19-Feb-20 12:02 AM] jl777c#5810
each gui should add a "gui" field to their orders and there should be stats that are generated from this. the dexfee collection is built into the protocol as spam prevention


[19-Feb-20 12:05 AM] gcharang#6833
ok, so the GUI author will get paid when the DEX payout happens? i.e., manually?


[19-Feb-20 12:06 AM] jl777c#5810
yes


[19-Feb-20 12:10 AM] gcharang#6833
got it. when you say "each gui should add a "gui" field to their orders" , is it enough for the GUI author to start mm2 with 
```
./mm2 "{\"gui\":\"MY_GUI_NAME\",\"netid\":9999, \"userhome\":\"/${HOME#"/"}\", \"passphrase\":\"YOUR_PASSPHRASE_HERE\", \"rpc_password\":\"YOUR_PASSWORD_HERE\"}"
```
or, should they also do something else?


[19-Feb-20 12:14 AM] jl777c#5810
each swap


[19-Feb-20 12:23 AM] gcharang#6833
ok, mm2 seems to be setting the GUI value for each order
<https://paste.ubuntu.com/p/3phK7jXjgg/>
I think this is enough for collecting stats and making payout
should we also encourage a GUI developer to include a public address in the gui argument? right now, there is only a name like `"gui": "atomicDEX 0.2.12 Android",` which might cause disputes at the time of payout


[19-Feb-20 12:44 AM] jl777c#5810
it seems that there will be little doubt which repo a GUI is officially from

{Reactions}
üëç 

[19-Feb-20 01:11 AM] artem.pikulin#0794
@cipi Hi!
Could you please try to reproduce the issue collecting following info:
1. Server specs: CPU frequency, RAM size.
2. List of all enabled coins.
3. CPU load and mem usage.
4. Tcpdump of all traffic on MM2 side.
5. Number of concurrent swaps with list of involved coins.


[19-Feb-20 06:30 AM] CrisF#3405
Hi, I have a small project asking me about adding mm2 swap tech to his game. 
Is it too early for this? If not, where is best to send him for information?


[19-Feb-20 08:03 AM] Oszy#5734
well without more details i can only advise this: 
https://developers.atomicdex.io/basic-docs/atomicdex/introduction-to-atomicdex.html


[19-Feb-20 08:03 AM] Oszy#5734
if he can elaborate on what he wants to do we can get into details

{Reactions}
üôè 

[19-Feb-20 12:54 PM] CrisF#3405
He would like to add the ability to do swaps to app. Either a game or a new project.


[19-Feb-20 01:28 PM] Oszy#5734
like 2 players trading items in game via atomic swap?


[19-Feb-20 02:32 PM] CrisF#3405
I don't know the exact use he has in mind, but that is one possibility.  Another might be buying in with other currencies.


[20-Feb-20 12:28 AM] Oszy#5734
yeah it's possible to integrate mm2 into the game all resources are on that link, as for the how to, he either figures it out or ask us here


[20-Feb-20 01:38 AM] artem.pikulin#0794
@CrisF Hi! In addition to @Oszy comments I would also ask the project dev(s) following:
1. Do they already know with what tech stack/protocol their assets will be implemented? Will it be KMD assetchain or maybe they will use ERC tokens or something else? It matters the most because they might target the blockchain platform that is not supported by AtomicDEX yet.
2. Do they have a sample app to which they would like to integrate atomic swaps? On what platforms is it available? (Or supposed to be available) Is it desktop/mobile/browser/multiplatform?


[20-Feb-20 01:40 AM] CrisF#3405
Thanks @artem.pikulin üôá ,
I'll check with the dev and let you know what he says üëç

{Reactions}
ü§ù 

[20-Feb-20 05:17 AM] cipi#4502
@artem.pikulin will need to make a setup and collect tcpdump... does not make sense to do it on a host that does other things, it will contain too much other data
just had another failed swap where the maker was KMD... during the swap i got 5 such messages
```
20 13:03:36, maker_swap:475] Error utxo:1615] JsonRpcError { request: JsonRpcRequest { jsonrpc: "2.0", id: "1498", method: "blockchain.transaction.get", params: [String("c1d24cd8bb420565aded04cf08e7cbe11c8425e454c00db7557fc37e539317e9"), Bool(true)] }, error: Transport("rpc_clients:778] rpc_clients:778] [\"rpc_clients:1422] common:1100] future timed out\", \"rpc_clients:1422] common:1100] future timed out\", \"rpc_clients:1422] common:1100] future timed out\"]") } getting tx details of c1d24cd8bb420565aded04cf08e7cbe11c8425e454c00db7557fc37e539317e9
```
but doing a `(echo '{ "id": 1, "method": "blockchain.transaction.get", "params": ["c1d24cd8bb420565aded04cf08e7cbe11c8425e454c00db7557fc37e539317e9",true] }'; sleep 0.5) | ncat electrum1.cipig.net 10001 | json_pp` from the same host, during that swap showed me the tx instantly
maker is a VPS, 4 cores `QEMU Virtual CPU version 2.5+`, 8 GB RAM
CPU load is nearly 0, memusage 1 GB
the only ongoing swap was the KMD/DOGE swap
i have BTC, KMD, RVN, ZEC, DOGE, DASH, BCH, LTC, QTUM and ETH enabled, all electrum
every 90s `setprice` is called for all the above coins with KMD pair
will try to collect some tcpdump data


[20-Feb-20 05:18 AM] cipi#4502
this is the console output with the `future timeouts` during the swap

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/680040513726054444/error.txt


[21-Feb-20 12:11 AM] artem.pikulin#0794
@cipi The tcpdump data is most important here, as of now I expect 2 possible cases:
1. The MM2 sends requests, electrum server responds, but MM2 fails to process the response for some reason. In this case it's 100% MM2 internal problem.
2. MM2 sends request, but response isn't coming from Electrum. In this case it's highly likely network or electrum server related problem and MM2 is fine.
Even if tcpdump contains much of other information it's not a big problem, I can easily filter out unneeded info.


[21-Feb-20 06:13 PM] cipi#4502
@artem.pikulin i collected a tcpdump with `sudo tcpdump -i eth0 -w dump` on a maker
the enabled coins are the same as above, but i used a more powerful VPS (same CPU, but 8 cores) with no other traffic and no other processes running
first swap went fine DOGE/KMD
second swap, KMD/DOGE, was also succesfull, but i got 3 `future timed out` errors towards the end of the swap
i also called `(echo '{ "id": 1, "method": "blockchain.transaction.get", "params": ["99caab76bd025d189f10856dc649aad1a191b1cfd9b139ece457c5fedac58132",true] }'; sleep 0.5) | ncat electrum1.cipig.net 10060` manually twice (after the second future timed out error) and got a response, so this 2 calls will be seen in the tcpdump... the tcpdump only contains this second swap with the errors
dump: https://dexapi.cipig.net/dump.gz
console: https://dexapi.cipig.net/error.txt
let me know if i should use other options for tcpdump or if you need more of those


[25-Feb-20 12:04 AM] artem.pikulin#0794
@cipi Thanks for the dump! As I can see from it there're no network issues, `blockchain.transaction.get` request and response are transferred successfully on system TCP level, so it's highly likely MM2 internal problem. I will do more research about this and get back to you with custom MM2 version with additional debugging output for further troubleshooting.


[25-Feb-20 01:56 AM] artem.pikulin#0794
@cipi I was able to reproduce the problem on my workstation, seems like there's a deadlock in electrum client implementation that leads to `future time out` even when there're perfect network conditions. It might take a bit time for more troubleshooting and refactoring, but I think I will push a fix on this week.


[26-Feb-20 08:48 AM] artem.pikulin#0794
@cipi Electrum deadlock is not reproducible anymore on my environment with changes made in this branch: https://github.com/KomodoPlatform/atomicDEX-API/tree/mm2-electrum-deadlock-fix. Could you please try to build mm2 from it, run few concurrent swaps and check that bug doesn't happen on your side too?


[26-Feb-20 10:36 AM] cipi#4502
@artem.pikulin did a couple of swaps and i can't reproduce the deadlock. Problem is gone, great work!


[27-Feb-20 01:34 AM] artem.pikulin#0794
@cipi Thanks! Let's track it for a bit more time please to be sure that problem doesn't happen again. The current version is not final fix, I plan to refactor it.


[27-Feb-20 03:32 AM] cipi#4502
i updated all nodes to this version... will report any errors


[27-Feb-20 03:33 AM] cipi#4502
@artem.pikulin i stumbled upon a new problem, related to dynamic fees


[27-Feb-20 03:33 AM] cipi#4502

{Attachments}
https://cdn.discordapp.com/attachments/476025090627207168/682550816682672138/error.txt


[27-Feb-20 03:34 AM] cipi#4502
looks like `estimatefee` returns a fee that is lower than the min relay fee... or there is an error with fee calculation


[27-Feb-20 03:37 AM] cipi#4502
tried some stuff
```
litecoin-cli estimatesmartfee 1
{
  "feerate": 0.00001000,
  "blocks": 2
}
```
and `litecoin-cli -getinfo` shows `"relayfee": 0.00001000`


[27-Feb-20 04:15 AM] artem.pikulin#0794
@cipi The problem is MM2 uses hardcoded estimated transaction size (300 bytes) for swap spends: https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/coins/utxo.rs#L984. But created transaction is 301 bytes long, so calculated 298 fee is less than minimum required in this case (301 according to error message from coin daemon). I'm going to slightly increase the hardcoded amount right now as fast fix, will implement proper tx size calculation in this case on next week.

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/blob/mm2/mm2src/coins/utxo.rs
KomodoPlatform/atomicDEX-API
This is the official AtomicAPI (atomicDEX API) repository - KomodoPlatform/atomicDEX-API
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[27-Feb-20 04:22 AM] artem.pikulin#0794
@cipi Done https://github.com/KomodoPlatform/atomicDEX-API/commit/3ef17e6daadf65e26258812af5510cf3436ab237, also pushed to `mm2-electrum-deadlock-fix`.


[27-Feb-20 04:25 AM] cipi#4502
thanks, will update


[28-Feb-20 12:38 AM] cipi#4502
@artem.pikulin i fear the changes regarding the tx-size are not enough... i got 2 new failures with LTC, both with `min relay fee not met, 297 < 300 (code 66)` on `TakerPaymentSpendFailed`


[28-Feb-20 03:28 AM] artem.pikulin#0794
@cipi Yes, my bad, actually 305 / 1024 is Àú297 so the change was not sufficient, please excuse me. I guess coin daemons divide by 1000 when calculate fee so I'm going to change it now and push again.


[28-Feb-20 04:30 AM] artem.pikulin#0794
@cipi Pushed fix to both `mm2` and `electrum-deadlock-fix`, please retest.


[28-Feb-20 06:53 AM] cipi#4502
thanks. i updated all nodes and did a LTC-swap, but `estimatesmartfee 1` was returning `"feerate": 0.00001040`
guess i need to wait till `"feerate": 0.00001000` and retest to be sure


[28-Feb-20 07:36 AM] cipi#4502
did a RVN swap with dynamic txfee in the meantime
RVN was not working at all before the fix (failed at MakerPayment), now it does

{Reactions}
üëç 

[28-Feb-20 01:47 PM] cipi#4502
the electrum dead-lock-fix also looks very good... haven't seen any `future time out` errors in the logs
and i just did more than 20 swaps RICK/MORTY swaps with up to 10 in parallel


[28-Feb-20 11:03 PM] artem.pikulin#0794
@cipi Hello, super, thanks for the testing! I will release the fix on next week then.


[04-Mar-20 02:46 AM] Oszy#5734
`¬∑ 2020-03-04 10:46:06 +0000 [tx_history LABS] utxo:1575] Error "utxo:1614] JsonRpcError { request: JsonRpcRequest { jsonrpc: \"2.0\", id: \"10178\", method: \"blockchain.transaction.get\", params: [String(\"da38c9a10ebf45587b48a40cadce8022bac76b3f56cc9293dc127c4d3808dfb3\"), Bool(true)] }, error: Response(Object({\"code\": Number(-32600), \"message\": String(\"response too large (over 1,000,000 bytes\")})) }" on getting the details of da38c9a10ebf45587b48a40cadce8022bac76b3f56cc9293dc127c4d3808dfb3, skipping the tx`
is this the coinbase tx issue error?


[04-Mar-20 03:01 AM] cipi#4502
https://electrumx.readthedocs.io/en/latest/environment.html#envvar-MAX_SEND
your tx is simply too big... how big is it? ... and why?


[04-Mar-20 03:02 AM] cipi#4502
btw, same as with CEXes applies to AtomicDEX too: don't mine to your AtomicDEX address!


[04-Mar-20 03:04 AM] cipi#4502
but it is for `tx_history` anyway, so not important to swaps... but error can happen with swaps too if you 1 Million utxos and mm2 tries to use them, eg as vins for transactions


[04-Mar-20 03:07 AM] Oszy#5734
it's not my AD address i mine to


[04-Mar-20 03:07 AM] Oszy#5734
I just sent everything I mined TO my AD address


[04-Mar-20 03:07 AM] Oszy#5734
i had LABS split into thousands of UTXO's


[04-Mar-20 03:07 AM] Oszy#5734
for staking


[04-Mar-20 03:08 AM] Oszy#5734
should I just resend it a couple times to myself


[04-Mar-20 03:08 AM] cipi#4502
problem is that tx_history will look after all vins of the tx, so in this case it doesn't help to send the amount once... you may have to send it twice...


[04-Mar-20 03:09 AM] Oszy#5734
cool that's what i was thinking


[04-Mar-20 03:09 AM] Oszy#5734
okay


[13-Mar-20 08:41 AM] Oszy#5734
http://dexapi.cipig.net:8080/public/error.php?uuid=db742877-55d4-498b-8d61-9aca50f00a10


[13-Mar-20 08:44 AM] Oszy#5734
trade was started yesterday (yes again BTC) just confirmed a few hours ago (took really long) and not it's ` MakerPaymentWaitRefundStarted` for a while
is this going to be 44 hours again?


[13-Mar-20 08:44 AM] Oszy#5734
@cipi @artem.pikulin what's your take on this swap


[13-Mar-20 08:44 AM] Oszy#5734
was the btc fee too low also?


[13-Mar-20 08:50 AM] cipi#4502
i  have a similar problem: https://dexapi.cipig.net/public/error.php?uuid=bc07bf6c-50e1-4704-8192-766b91df864f
waiting since yesterday for my KMD refund... gonna miss the VOTE snapshot because of the damn BTC txfee..
the btc fee is dynamic, the output from `bitcoin-cli estimatesmartfee 1` is used... but if the fee rises like crazy in the meantime, the tx can be stuck for a long time


[13-Mar-20 08:54 AM] cipi#4502
i will remove my BTC orders in the future from orderbook if the fee gets too high... just like with the ERC20 tokens... those are off since yesterday because the fee doesn't get lower


[13-Mar-20 08:55 AM] cipi#4502
btw `| (1728:43) [swap uuid=bc07bf6c-50e1-4704-8192-766b91df864f] Maker payment wait refund till 1584170871 started..`
your node should show something similar on console... it says how long it will take till refund


[13-Mar-20 08:58 AM] Oszy#5734
(1748:01) [swap uuid=db742877-55d4-498b-8d61-9aca50f00a10] Maker payment wait refund till started...


[13-Mar-20 08:58 AM] Oszy#5734
so tomorrow morning... nice


[13-Mar-20 08:59 AM] cipi#4502
same here :-)
converted my timestamp and it says `03/14/2020 @ 7:27am (UTC)`


[13-Mar-20 09:00 AM] Oszy#5734
my log is 13GB btw, it's way too big can't wait for that reduced output update


[13-Mar-20 09:00 AM] Oszy#5734
if i don't watch it my server can get full üòÑ


[13-Mar-20 09:01 AM] cipi#4502
i overwrite the log every time i restart...


[13-Mar-20 09:01 AM] Oszy#5734
yeah IF I restart


[13-Mar-20 09:02 AM] Oszy#5734
but it's good to have all previous logs if I don't check it for weeks even


[13-Mar-20 09:02 AM] Oszy#5734
without all the junk


[13-Mar-20 09:03 AM] Oszy#5734
gonna have to do an auto archive script that removes duplicate lines..


[13-Mar-20 09:03 AM] cipi#4502
i rely only on the swap jsons for older stuff... those will get my funds back one way or the other :-)
@artem.pikulin#0794 can we do something about https://github.com/KomodoPlatform/atomicDEX-API/issues/568 ?

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/568
Locktimes optimization ¬∑ Issue #568 ¬∑ KomodoPlatform/atomicDEX-API
At the moment locktimes in some cases are too huge (for example in case of BTC maker payment it&#39;s almost 48 hours) so would be great to make waiting less (for the case above we can reduce i...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[13-Mar-20 09:04 AM] cipi#4502
@artem.pikulin


[13-Mar-20 09:05 AM] Oszy#5734
true, json's are there


[13-Mar-20 09:05 AM] Oszy#5734
it's just so easy to miss a failed order if i am not watching like a hawk all day üòÑ


[13-Mar-20 09:11 AM] cipi#4502
btw, there are cases where MakerPaymentRefund can fail with error ` the transaction was rejected by network rules.\\n\\nnon-final (code 64)` from the coin daemon/electrum...  and mm2 does not try again those swaps... saw it happen with BTC and BCH... but if you try a manual refund at a later time, it works
so it may be wise to look from time to time after such failed refunds
i do it with ```for i in `grep -l '"type":"MakerPaymentRefundFailed"' DB/*/SWAPS/MY/*`; do ls -la $i; done``` when in the directory where the DB-dir is located... it will show you the json-files and so also the swap uuid, so you can call `recover_funds_of_swap` manually for those


[13-Mar-20 09:28 AM] Oszy#5734
thank you that's a handy script


[13-Mar-20 09:28 AM] Oszy#5734
saved it


[19-Mar-20 06:23 AM] artem.pikulin#0794
@cipi Hi, please excuse me for long response, sure, it's quite easy to change the locktimes, however it will be compatibility breaking change so I think it will be done a bit later along with other non-compatible updates.


[21-Apr-20 07:02 PM] artemciy_dice#0049
A bit of MM orderbook statistics obtained via caretakers: https://gitlab.com/artemciy/mm-pubsub-db/-/blob/ff9b2329/373-p2p-order-matching.md#data-mining-experiment.


[22-Apr-20 11:47 AM] cipi#4502
@artem.pikulin i fear we have another problem with DOGE
they made this change https://github.com/dogecoin/dogecoin/pull/1615, which sets the dust threshold to 1 DOGE, so every tx below 1 DOGE is rejected with `The transaction was rejected by network rules.\\n\\n64: dust`
i updated the electrums to a version that contains this change, but i will revert back to the previous version
we should think though about how to solve this issue


[22-Apr-20 11:51 AM] cipi#4502
hmmm, i fear that only setting the min trade amount for DOGE to 777 (so that TakerFee is > 1) would solve it
777 DOGE is 1.5$


[22-Apr-20 10:13 PM] artem.pikulin#0794
@cipi Hi, min dex fee threshold is hardcoded to `0.0001` as of now, I have a plan to refactor it and make this threshold dynamic depending on coin tx fee size: https://github.com/KomodoPlatform/atomicDEX-API/issues/545#issue-494555687

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/545
Recheck the minimum dex fee threshold. Make it lower or higher depe...
atomicDEX-API/mm2src/lp_swap.rs Line 327 in e01d8ac pub fn dex_fee_amount(base: &str, rel: &str, trade_amount: &BigDecimal) -> BigDecimal {
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113

{Reactions}
üëç 

[24-Apr-20 01:43 AM] cipi#4502
any idea how this can happen: https://dexapi.cipig.net/public/error.php?uuid=ad1670ea-a05f-4df0-96e9-dfa01c3d55be
saw such errors `Not sufficient balance. Couldn't collect enough value from utxos` couple of times


[24-Apr-20 01:45 AM] TonyL#3577
maybe taker spending coins in some other swap/tx before taker payment actually happened?


[24-Apr-20 01:47 AM] cipi#4502
possible... or maybe mm2 tries to spend a utxo that has 0 confirmations... unfortunately i can't check this, since the swap was not done by me and time has passed since then...


[04-May-20 06:44 AM] cipi#4502
@artem.pikulin can we please reduce the time between "order is cancelled" and "order disappears from orderbook"? if i remember right, there was a intentionally builtin timeout, so that orderbooks don't look empty when orders are updated... atm, we have too many orders and it is also a bit irritating when orders appear twice in orderbook: https://komodod.com/atomicdex/orderbook?pair=BTC-KMD (orders with same "Sum(KMD)" are basically the same, same node, same pubkey, same funds, just different time)
i also hope it will help with disappearing orderbook entries atm and "NegotiateFailed" swaps


[04-May-20 10:56 PM] artem.pikulin#0794
@cipi Hi, could you please create a Github issue for your request? I will check it out later this week.


[05-May-20 04:50 PM] CrisF#3405
Hi, there is a big online conference on now.  There is a lot of talk on what other projects are working on regarding their networking layers.


[05-May-20 04:50 PM] CrisF#3405
Right now ETH2.0 networking talk.
https://readylayer.one/

{Embed}
https://readylayer.one/
Ready Layer One ‚Äî¬†2020 Open Blockchain Week
Ready Layer One is an interactive, immersive virtual event which contains talks, workshops and rants by well-known speakers as well as community-sourced contributors.
https://images-ext-2.discordapp.net/external/p2dpCShmJFev5ubIrUnED-7BVh2vQG8PqWk9rCJD9Wc/https/readylayer.one/assets/img/rlopreview.jpg


[05-May-20 04:51 PM] CrisF#3405
I'll post some of the presentation slidedecks in other channels.


[05-May-20 04:56 PM] CrisF#3405
Thought this might be interesting to hear what other projects are doing regarding networking etc to compare, but you may already know.


[05-May-20 04:59 PM] CrisF#3405
Possibly be useful for Marketing in the future when they start actively promoting dexP2P etc.


[29-May-20 12:00 PM] cipi#4502
`29 18:21:32, peers:1345] hf_poll error: http_fallback:606] http_fallback:627] http_fallback:570] Value set of length 2`
never seen that before... now on 2.0.1984_mm2_e1dac77d6_Linux_Release from AtomicDEX-Pro during a KMD-MCL swap with an unknown party... it wasn't there when i did the same swap with another node of mine... but does not seem to affect anything, swap finished fine... worth a issue?


[02-Jun-20 04:36 AM] cipi#4502
saw this failed swap: https://dexapi.cipig.net/public/error.php?uuid=2d08e473-6627-4b8f-b1ff-5b32900e0678
`min relay fee not met` on BCH sending TakerPayment with a tx that has more than a dozen inputs...
@artem.pikulin question is: would it help to set `force_min_relay_fee` to true for BCH too? thing is that BCH has a fixed fee in coins file (estimatefee does not work in BCH at all) and i thought that `force_min_relay_fee` is more for dynamic fee coins... or is it a more general problem with such big transactions?


[02-Jun-20 04:42 AM] cipi#4502
BCH has `"relayfee": 0.00001000`, same as txfee in coins file `"txfee": 1000,`... why would a fixed fee coin use a fee other than that set in coins file as fixed fee?


[02-Jun-20 04:57 AM] artem.pikulin#0794
Doesn't BCH use dynamic fee? If tx is big 1000 satoshi might be simply not enough for tx to be broadcast.


[02-Jun-20 05:05 AM] cipi#4502
unfortunately it doesn't work on BCH... it has only an `estimatefee` call, which does not accept any arguments and `estimatesmartfee` does not exist... it is the only coin that does this... the others take the number of blocks as args


[02-Jun-20 05:07 AM] cipi#4502
```
bch-cli estimatefee
0.00001000
```


[02-Jun-20 05:08 AM] artem.pikulin#0794
Do they actually use `1000` sat per kbyte?


[02-Jun-20 05:09 AM] artem.pikulin#0794
Ugh, transaction size in report is 1879 üôÇ


[02-Jun-20 05:09 AM] cipi#4502
i haven't calculated the amounts from the above tx... yes, only saw the size and the number of inputs


[02-Jun-20 05:10 AM] cipi#4502
https://github.com/Bitcoin-ABC/bitcoin-abc
last commit a year ago... but afaik there is no other wallet for BCH


[02-Jun-20 05:11 AM] cipi#4502
i thought, maybe they changed that in the end


[02-Jun-20 05:12 AM] cipi#4502
```
(echo '{ "id": 1, "method": "blockchain.estimatefee", "params": ["1"] }'; sleep 0.5) | ncat bch.imaginary.cash 50001
{"jsonrpc": "2.0", "error": {"code": 2, "message": "daemon error: DaemonError({'code': -1, 'message': 'estimatefee\\n\\nEstimates the approximate fee per kilobyte needed for a transaction\\n\\nResult:\\nn              (numeric) estimated fee-per-kilobyte\\n\\nExample:\\n> bitcoin-cli estimatefee \\n'})"}, "id": 1}
```
so public BCH electrums use the same wallet


[02-Jun-20 05:13 AM] cipi#4502
you could make yet another exception about estimatefee just for BCH üòÑ


[02-Jun-20 05:14 AM] cipi#4502
or treat the setting from coins file as if it would be the response from `estimatefee 1` üòÑ


[02-Jun-20 05:17 AM] cipi#4502
btw, i expect that fee to never change, it will always be 1000... never saw https://blockchair.com/bitcoin-cash showing anything else than 1 sats per byte recommended fee


[02-Jun-20 07:03 AM] artem.pikulin#0794
I see, we can handle it in config, already thought about it some time ago. It might be set as `{"fee_type":"Dynamic","sat_per_kb":1000}`. Will do the trick I guess. https://github.com/KomodoPlatform/atomicDEX-API/issues/656

{Embed}
https://github.com/KomodoPlatform/atomicDEX-API/issues/656
Allow to set dynamic fee in coins file. ¬∑ Issue #656 ¬∑ KomodoPlatfo...
BCH has incompatible estimate fee request params so our estimate_fee calls do not work. As BCH daemon always returns 1000 sat per Kbyte we can just set this number in config e.g. in form {&quot...
https://images-ext-2.discordapp.net/external/RDvx2WIoH0iRzE_70DuHLDOM6rqONFcnMd4HT0XBnOI/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/21276113


[02-Jun-20 07:09 AM] cipi#4502
yes, that would help
i hope BCH wallet will behave like all the others one day and simply accept nblocks in estimatefee call


[03-Jun-20 02:44 AM] Oszy#5734
@artem.pikulin what is the timeout on waiting for nota on DEX asset?


[03-Jun-20 02:45 AM] Oszy#5734
I had a swap where there was normal amount of notas and my swap failed with  `!wait for maker payment confirmations: rpc_clients:108] Waited too long until 1591171674 for transaction `


[03-Jun-20 02:46 AM] Oszy#5734
`"uuid":"e4253022-8d7a-47d1-8c89-da0ee524ac81"`


[03-Jun-20 02:47 AM] TonyL#3577
man my phone went offline so it's timeouted


[03-Jun-20 02:47 AM] TonyL#3577
üòÖ


[03-Jun-20 02:48 AM] Oszy#5734
love you


[03-Jun-20 02:48 AM] TonyL#3577
(i was a taker)


[03-Jun-20 02:48 AM] Oszy#5734
then why the maker fails according the log?


[03-Jun-20 02:48 AM] Oszy#5734
confusing :p


[03-Jun-20 02:50 AM] TonyL#3577
will look closer into this one a little bit later


[03-Jun-20 02:51 AM] cipi#4502
"waiting for nota" means AtomicDEX waits for the specific tx to be notarized, not just for the next nota on that chain... if the next nota does not contain the block where the tx was in, it does not count


[03-Jun-20 02:52 AM] Oszy#5734
> "waiting for nota" means AtomicDEX waits for the specific tx to be notarized, not just for the next nota on that chain... if the next nota does not contain the block where the tx was in, it does not count
@cipi ahem thanks for clarifying. strange that it didn't include it it's not like we have a full mempool üòÑ


[03-Jun-20 02:53 AM] cipi#4502
the notarization happens with a specific frequency, normally 10 blocks


[03-Jun-20 02:53 AM] Oszy#5734
ahem it was quite different from that the past few hours i can see


[03-Jun-20 02:54 AM] TonyL#3577
@Oszy you can put your order back if you want complete this trade üòÉ


[03-Jun-20 02:54 AM] Oszy#5734
i will once i get the refund


[03-Jun-20 02:54 AM] TonyL#3577
ah I see


[03-Jun-20 02:54 AM] TonyL#3577
but in general there was a problem on my side I'm sure


[03-Jun-20 02:55 AM] Oszy#5734
okay, i am always stressing myself out that the problem is on my side üòÑ


[03-Jun-20 02:55 AM] TonyL#3577
I was in a barbershop for a hour and there was no internet


[03-Jun-20 02:55 AM] TonyL#3577
they when I took my phone swap failed


[03-Jun-20 02:56 AM] TonyL#3577
other two completed fine when I was on the way üòÖ


[03-Jun-20 02:59 AM] Oszy#5734
hope you had a nice haircut at least then


[03-Jun-20 02:59 AM] Oszy#5734
üòÑ

{Reactions}
üòÉ 

[03-Jun-20 03:32 AM] artem.pikulin#0794
The maker payment took too long to notarize as I can see, the problem is not in Tony's device went offline. MM2 waits for maker payment confirmation/notarization (which actually means that coin RPC should return confirmations >= 2) for `6240` seconds (almost 2 hours). Will dig with Tony into it.


[03-Jun-20 03:42 AM] Oszy#5734
thanks for checking,


[03-Jun-20 04:14 AM] artem.pikulin#0794
I was mistaken, on taker side it waits less time: `3120` seconds which is a bit less than 1 hour, looks like it wasn't enough for tx to be notarized in this case.


[03-Jun-20 04:22 AM] Oszy#5734
should it be equal on taker side?


[03-Jun-20 07:37 AM] artem.pikulin#0794
Taker waits less time than maker for maker payment confirmation (2/5 of base locktime tbh hard to tell why, I don't remember üôÇ), but even maker waiting time (3/5 of locktime which is more than 1 hour) was not sufficient in this case because notarization took even longer. Looks like we have to consider increasing locktime for notarized chains, more over the protocol can be improved and use dynamically calculated lock times depending on swapped coins block times. E.g. for ETH/ERC20 swap it might be sufficient to have lock time of few minutes.

{Reactions}
üëç 

[09-Jun-20 01:37 AM] gcharang#6833
@cipi 
can you please go through these docs and suggest corrections?
 - Get your Coin/Token/Asset listed on the AtomicDEX-API : <https://hackmd.io/@gcharang/BJQ2ba2hI>
- How to submit a Pull Request to add a coin to AtomicDEX-API: <https://hackmd.io/@gcharang/SkGngph28>
if you DM me your email address, I can give you edit access


[11-Jun-20 02:59 AM] hyperDEX#6586
Hi all, been away for a while, has mm2.0 been progressing? Have we made much progress since Dec for the LP mm bot?


[17-Jul-20 04:14 AM] cipi#4502
@artem.pikulin looks like ZEC changed the consensus_branch_id... i saw this error:
`the transaction was rejected by network rules.\\n\\n16: old-consensus-branch-id (Expected f5b9230b, found 2bb40e60`
our coins config has `"consensus_branch_id": "0x2BB40E60"` set for ZEC... i guess we need to change that
do you know what the `version_group_id` is for? does it need to be changed too?


[17-Jul-20 04:49 AM] cipi#4502
changed only consensus_branch_id and it works again: https://github.com/KomodoPlatform/coins/pull/24


[19-Jul-20 10:54 PM] artem.pikulin#0794
@cipi Hi! Here is the description of `version_group_id`: https://github.com/zcash/zips/blob/master/zip-0202.rst#version-group-id. You can check whether this value and other things should be updated on `Network upgrade developer guide` page (https://zcash.readthedocs.io/en/latest/rtd_pages/nu_dev_guide.html#heartwood). Yeah, this time they changed only `consensus_branch_id`. Thanks a lot for your PR!

{Embed}
https://github.com/zcash/zips/blob/master/zip-0202.rst
zcash/zips
Zcash Improvement Proposals. Contribute to zcash/zips development by creating an account on GitHub.
https://images-ext-1.discordapp.net/external/QPRkPDZ0P8HYtO4CeaEVJF0ANfqYgXKpk3VxiNKYmhw/%3Fs%3D400%26v%3D4/https/avatars0.githubusercontent.com/u/16122764


==============================================================
Exported 4,294 message(s)
==============================================================
